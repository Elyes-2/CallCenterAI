(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9414],{29:(ne,j,e)=>{"use strict";e.d(j,{D:()=>i});var n=e(74848),a=e(96540),s=e(7389),d=e(92745),o=e(37386),l=e(77824);function i({onChange:c,hide:p,type:h}){const u=(0,a.useMemo)(()=>[{label:(0,d.t)("dashboard-scene.variable-hide-select.hide_options.label.nothing","Nothing"),value:s.zL.dontHide},{label:(0,d.t)("dashboard-scene.variable-hide-select.hide_options.label.variable","Variable"),value:s.zL.hideVariable},{label:(0,d.t)("dashboard-scene.variable-hide-select.hide_options.label.label","Label"),value:s.zL.hideLabel}],[]),r=(0,a.useMemo)(()=>u.find(v=>v.value===p)?.value??u[0].value,[p,u]);return h==="constant"?null:(0,n.jsx)(o.D,{label:(0,d.t)("dashboard-scene.variable-hide-select.label","Hide"),children:(0,n.jsx)(l.z,{options:u,onChange:c,value:r})})}},54:(ne,j,e)=>{"use strict";e.d(j,{C0:()=>g,HL:()=>l,Q9:()=>E,VQ:()=>i,Wd:()=>v,jy:()=>u,lV:()=>r,nU:()=>c,q0:()=>x});var n=e(65642),a=e(15130),s=e(11257),d=e(52161);function o(m){return(0,d.z2)(m)?"grafana":"external"}const l={read:{grafana:s.w.AlertingInstanceRead,external:s.w.AlertingInstancesExternalRead},create:{grafana:s.w.AlertingInstanceCreate,external:s.w.AlertingInstancesExternalWrite},update:{grafana:s.w.AlertingInstanceUpdate,external:s.w.AlertingInstancesExternalWrite},delete:{grafana:s.w.AlertingInstanceUpdate,external:s.w.AlertingInstancesExternalWrite}},i={read:{grafana:s.w.AlertingNotificationsRead,external:s.w.AlertingNotificationsExternalRead},create:{grafana:s.w.AlertingNotificationsWrite,external:s.w.AlertingNotificationsExternalWrite},update:{grafana:s.w.AlertingNotificationsWrite,external:s.w.AlertingNotificationsExternalWrite},delete:{grafana:s.w.AlertingNotificationsWrite,external:s.w.AlertingNotificationsExternalWrite}},c={read:{grafana:s.w.AlertingSilenceRead,external:s.w.AlertingInstanceRead},create:{grafana:s.w.AlertingSilenceCreate,external:s.w.AlertingInstancesExternalWrite},update:{grafana:s.w.AlertingSilenceUpdate,external:s.w.AlertingInstancesExternalWrite}},p={read:s.w.AlertingProvisioningRead,readSecrets:s.w.AlertingProvisioningReadSecrets,write:s.w.AlertingProvisioningWrite},h={read:{grafana:s.w.AlertingRuleRead,external:s.w.AlertingRuleExternalRead},create:{grafana:s.w.AlertingRuleCreate,external:s.w.AlertingRuleExternalWrite},update:{grafana:s.w.AlertingRuleUpdate,external:s.w.AlertingRuleExternalWrite},delete:{grafana:s.w.AlertingRuleDelete,external:s.w.AlertingRuleExternalWrite}};function u(m){const y=o(m);return{read:l.read[y],create:l.create[y],update:l.update[y],delete:l.delete[y]}}function r(m){const y=o(m);return{read:i.read[y],create:i.create[y],update:i.update[y],delete:i.delete[y],provisioning:p}}function v(m){const y=o(m);return{read:h.read[y],create:h.create[y],update:h.update[y],delete:h.delete[y]}}function g(m){return()=>a.TP.evaluatePermission(m)}function E(){return{canCreateGrafanaRules:a.TP.hasPermission(s.w.FoldersRead)&&a.TP.hasPermission(h.create.grafana),canCreateCloudRules:a.TP.hasPermission(s.w.DataSourcesRead)&&a.TP.hasPermission(h.create.external),canEditRules:m=>a.TP.hasPermission(v(m).update)}}function x(){const{unifiedAlertingEnabled:m}=(0,n.zj)(),y=a.TP.hasPermission(v(d.hY).read),b=a.TP.hasPermission(v(d.hY).update);return m&&y&&b}},87:(ne,j,e)=>{"use strict";e.d(j,{R:()=>l});var n=e(74848),a=e(96540),s=e(35427),d=e(64400),o=e(71479);const l=(0,a.memo)(({seriesName:i,color:c,gradient:p,readonly:h,lineStyle:u})=>{const{onSeriesColorChange:r}=(0,d.d2)(),v=(0,a.useCallback)(g=>r(i,g),[i,r]);return i&&r&&c&&!h?(0,n.jsx)(s.Dp,{color:c,onChange:v,enableNamedColors:!0,children:({ref:g,showColorPicker:E,hideColorPicker:x})=>(0,n.jsx)(o.p,{color:c,className:"pointer",ref:g,onClick:E,onMouseLeave:x,lineStyle:u})}):(0,n.jsx)(o.p,{color:c,gradient:p,lineStyle:u})});l.displayName="VizLegendSeriesIcon"},182:(ne,j,e)=>{"use strict";e.d(j,{BO:()=>c,Wx:()=>i,ZP:()=>l,k7:()=>d,qf:()=>o});var n=e(43173),a=e(2869),s=e(15629);function d(){return Object.values(n.$.datasources)}function o(p){if(!(0,s.TN)(n.$.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const h=(0,s.P8)(n.$.unifiedAlerting.minInterval);if(!p||!(0,s.TN)(p))return{globalLimit:h,exceedsLimit:!1};const u=(0,s.P8)(p),r=h>u&&u>0;return{globalLimit:h,exceedsLimit:r}}function l(){return a.W.Irm in n.$.apps}function i(){return l()?a.W.Irm:a.W.Incident}function c(){return l()?a.W.Irm:a.W.OnCall}},302:(ne,j,e)=>{"use strict";e.d(j,{CH:()=>o,E7:()=>d});var n=e(1682),a=e(82345);const s=l=>{const i=l.field.links;if(!(!i||i.length===0))return{getLinks:c=>{const p={};if(l.view){const{dataFrame:u}=l.view;p.__series={value:{name:u.name,refId:u.refId},text:t("panel.get-field-links-supplier.text.series","Series")};const r=l.colIndex!==void 0?u.fields[l.colIndex]:void 0;if(r){if(p.__field={value:{name:r.name,labels:r.labels},text:t("panel.get-field-links-supplier.text.field","Field")},l.rowIndex!==void 0&&l.rowIndex>=0){const{timeField:v}=getTimeField(u);p.__value={value:{raw:r.values[l.rowIndex],numeric:l.display.numeric,text:formattedValueToString(l.display),time:v?v.values[l.rowIndex]:void 0},text:t("panel.get-field-links-supplier.text.value","Value")}}l.view&&(p.__data={value:{name:u.name,refId:u.refId,fields:getFieldDisplayValuesProxy({frame:u,rowIndex:l.rowIndex})},text:t("panel.get-field-links-supplier.text.data","Data")})}else p.__value={value:{raw:l.display.numeric,numeric:l.display.numeric,text:formattedValueToString(l.display),calc:l.name},text:t("panel.get-field-links-supplier.text.value","Value")}}else console.log("VALUE",l);const h=(u,r,v)=>{const g={...p,...r};return c(u,g,v)};return i.map(u=>getLinkSrv().getDataLinkUIModel(u,h,l))}}},d=(l,i)=>{const c=l.links;if(!(!c||c.length===0))return{getLinks:()=>c.map(p=>(0,a.mQ)().getDataLinkUIModel(p,i||l.replaceVariables,l))}},o=(l,i)=>{const c=n.b4.getPanelLinks(l)?.state.rawLinks;if(!(!c||c.length===0))return{getLinks:()=>c.map(p=>(0,a.mQ)().getDataLinkUIModel(p,i,l))}}},359:(ne,j,e)=>{"use strict";e.d(j,{D:()=>d,R:()=>o});var n=e(57866),a=e(49297),s=e(64761);const d={id:s.F.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(l,i)=>c=>c.pipe(a.z.operator({include:o(l.include,l.byVariable),exclude:o(l.exclude,l.byVariable)},i))},o=(l,i)=>{if(!l)return;const{names:c,pattern:p,variable:h}=l;if(i&&h){const u=h;if(/^\{.*\}$/.test(u)){const r=u.slice(1).slice(0,-1).split(",");return{id:n.Ct.byNames,options:{names:r}}}return{id:n.Ct.byNames,options:{names:u.split(",")}}}if(!((!Array.isArray(c)||c.length===0)&&!p))return p?!Array.isArray(c)||c.length===0?{id:n.Ct.byRegexp,options:p}:{id:n.Ct.byRegexpOrNames,options:l}:{id:n.Ct.byNames,options:{names:c}}}},406:(ne,j,e)=>{"use strict";e.d(j,{Xv:()=>g,ks:()=>x,s7:()=>p,zM:()=>i});var n=e(81160),a=e(44922),s=e(95004),d=e(36638),o=e(57866),l=e(64761);const i={id:l.F.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(y,b)=>D=>D.pipe((0,n.T)(f=>i.transformer(y,b)(f))),transformer:y=>b=>!Array.isArray(b)||b.length===0?b:c(y,b)??[]};function c(y,b){if(!y.conversions.length)return b;const D=b.map(f=>({...f}));for(const f of y.conversions){if(!f.targetField)continue;const C=d.sJ.get(o.Ct.byName).get(f.targetField);for(const P of D)P.fields=P.fields.map(T=>C(T,P,D)?p(T,f):T)}return D}function p(y,b){switch(b.destinationType){case s.PU.time:return x(y,b.dateFormat);case s.PU.number:return r(y);case s.PU.string:return g(y,b.dateFormat,{timeZone:b.timezone},b.joinWith);case s.PU.boolean:return v(y);case s.PU.enum:return m(y,b.enumConfig);case s.PU.other:return E(y);default:return y}}const h=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function u(y,b){let D=b?{format:b}:void 0;const f=y.values.slice();let C=f.find(M=>M!=null);const P=typeof C=="number"&&b==="X",T=typeof C=="string"&&h.test(C);for(let M=0;M<f.length;M++)if(f[M]){let I=T?Date.parse(f[M]):(0,a.b)(f[M],D).valueOf();Number.isFinite(I)?f[M]=P?I*1e3:I:f[M]=null}else f[M]=null;return{...y,type:s.PU.time,values:f}}function r(y){const b=y.values.slice(),D=b.some(f=>typeof f=="string");for(let f=0;f<b.length;f++){let C=b[f];D&&C!=null&&typeof C=="string"&&(C=C.replace(/,/g,""));const P=+C;b[f]=Number.isFinite(P)?P:null}return{...y,type:s.PU.number,values:b}}function v(y){const b=y.values.slice();for(let D=0;D<b.length;D++)b[D]=!!b[D];return{...y,type:s.PU.boolean,values:b}}function g(y,b,D,f){let C=y.values;switch(y.type){case s.PU.time:C=C.map(P=>(0,a.b)(P,D).format(b));break;case s.PU.string:case s.PU.other:C=C.map(P=>f?.length&&Array.isArray(P)?P.join(f):JSON.stringify(P));break;default:C=C.map(P=>`${P}`)}return{...y,type:s.PU.string,values:C}}function E(y){const b=y.values.slice();for(let D=0;D<b.length;D++)try{b[D]=JSON.parse(b[D])}catch{b[D]=null}return{...y,type:s.PU.other,values:b}}function x(y,b){const D=typeof y.values[0]=="number",f=b==="X";return y.type===s.PU.time&&D?y:D&&!f?{...y,type:s.PU.time}:u(y,b)}function m(y,b){const D={...b},f=y.values.slice(),C=new Map;if(D.text&&D.text.length>0)for(let P=0;P<D.text.length;P++)C.set(D.text[P],P);else return y;for(let P=0;P<f.length;P++){const T=f[P];f[P]=C.get(T)}return{...y,config:{...y.config,type:{enum:D}},type:s.PU.enum,values:f}}},428:(ne,j,e)=>{"use strict";e.d(j,{j:()=>n});function n(a,s){const d=/\{\{\s*(.+?)\s*\}\}/g;return a.replace(d,(o,l)=>s[l]?s[l]:l)}},443:(ne,j,e)=>{"use strict";e.d(j,{BU:()=>l,JJ:()=>o,Xx:()=>i});var n=e(36394),a=e(33553),s=e(48588),d=e(739);const o={mode:a.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function l(c,p,h,u){const r=h!=null,v=u===d.wV.Vertical?p:c,g=Math.min(v*.15/1.5,20),E=g*1.5,x=r?p-E:p,m=Math.min(x,c);return{showLabel:r,gaugeHeight:m,titleFontSize:g}}function i(c,p,h){const u=p.thresholds??o,r=u.mode===a.O.Percentage,v=u.steps;let g=p.min??s.tw,E=p.max??s.d1;r&&(g=0,E=100);const x=(0,n.yQ)(g,v),m=(0,n.yQ)(E,v),y=[{value:+g.toFixed(c),color:h.visualization.getColorByName(x.color)}];let b=!0;for(let D=0;D<v.length;D++){const f=v[D];if(b){x===f&&(b=!1);continue}const C=v[D-1];if(y.push({value:f.value,color:h.visualization.getColorByName(C.color)}),f===m)break}return y.push({value:+E.toFixed(c),color:h.visualization.getColorByName(m.color)}),y}},565:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{ALERTING_COLOR:()=>da.xj,Alert:()=>Sa.F,AlertingSettings:()=>Kt,AsyncMultiSelect:()=>hr.Iv,AsyncSelect:()=>hr.DW,AsyncVirtualizedSelect:()=>hr.gZ,AutoSaveField:()=>St,AutoSizeInput:()=>ml.D,Avatar:()=>Lr.e,AxisPlacement:()=>aa.vM,Badge:()=>ti.E,BarAlignment:()=>aa.Nj,BarGauge:()=>gn.xE,BarGaugeDisplayMode:()=>aa.eX,BarValueVisibility:()=>aa.yL,BigValue:()=>Hn.yV,BigValueColorMode:()=>Hn.yp,BigValueGraphMode:()=>Hn.$p,BigValueJustifyMode:()=>Hn.F8,BigValueTextMode:()=>Hn.SV,Box:()=>tl.a,BracesPlugin:()=>Fl,BrowserLabel:()=>Ol.J,Button:()=>me.$n,ButtonCascader:()=>Ue,ButtonGroup:()=>Zo.e,ButtonSelect:()=>ii.f,CallToActionCard:()=>_r.c,Card:()=>ri.Z,CardContainer:()=>Ao.Q,Carousel:()=>Pe.F,Cascader:()=>Fe.v,CertificationKey:()=>en.K,Checkbox:()=>vl.S,ClearPlugin:()=>cc.v,ClickOutsideWrapper:()=>de.N,ClipboardButton:()=>Ge.b,ClipboardPlugin:()=>Wc.s,CodeEditor:()=>An.B,CodeEditorSuggestionItemKind:()=>zn.q,CollapsableSection:()=>gs.M,Collapse:()=>Wa.S,ColorPicker:()=>ze.sk,ColorPickerInput:()=>De,Combobox:()=>so.G,CompletionItemKind:()=>wn.I,ConfirmButton:()=>L.Z,ConfirmModal:()=>fn.u,Container:()=>ro.mc,ContextMenu:()=>kr.t,ControlledCollapse:()=>Wa.a,Counter:()=>zt.p,CustomHeadersSettings:()=>Ro.P,CustomScrollbar:()=>Ee.E,DEFAULT_ANNOTATION_COLOR:()=>da.Mk,DOMUtil:()=>a,DataLinkButton:()=>Ss.R,DataLinkInput:()=>Zr.l,DataLinksContextMenu:()=>Ir.e,DataLinksInlineEditor:()=>Ys.e,DataLinksInlineEditorBase:()=>gr.J,DataSourceHttpSettings:()=>yr.t,DatePicker:()=>nt.l,DatePickerWithInput:()=>ut.l,DateTimePicker:()=>gt.K,DeleteButton:()=>ie.e,Divider:()=>bl.c,DrawStyle:()=>aa.GR,Drawer:()=>ur._,Dropdown:()=>io.m,ElementSelectionContext:()=>Na._,EmptySearchResult:()=>Oe.Z,EmptyState:()=>Ne.p,ErrorBoundary:()=>vr.tH,ErrorBoundaryAlert:()=>vr.Xw,ErrorWithStack:()=>eo.D,EventBusPlugin:()=>hi.K,EventsCanvas:()=>Sl.a,EventsWithValidation:()=>Ja.Pw,FIXED_UNIT:()=>fi.s,FadeTransition:()=>Sn.A,FeatureBadge:()=>cr.y,FeatureInfoBox:()=>js,Field:()=>wt.D,FieldArray:()=>ao,FieldLinkList:()=>zs,FieldSet:()=>rl.n,FieldValidationMessage:()=>ol.P,FileDropzone:()=>Fa.gH,FileDropzoneDefaultChildren:()=>Fa.wI,FileListItem:()=>Ya.I,FileUpload:()=>si.e,FilterInput:()=>gl.Z,FilterPill:()=>Lt.m,Form:()=>ki.l,FormattedValueDisplay:()=>oi.i,FullWidthButtonContainer:()=>mr,Gauge:()=>Nn._,GlobalStyles:()=>go.k,Graph:()=>Ei,GraphContextMenu:()=>co,GraphContextMenuHeader:()=>Br,GraphGradientMode:()=>aa.on,GraphNG:()=>br,GraphSeriesToggler:()=>uo,GraphThresholdsStyleMode:()=>aa.Ly,GraphWithLegend:()=>jl,Grid:()=>ei.x,HorizontalGroup:()=>ro.Gy,Icon:()=>i.I,IconButton:()=>le.K,IndentationPlugin:()=>Fc.T,InfoBox:()=>Ha.w,InlineField:()=>bt.I,InlineFieldRow:()=>ll.C,InlineFormLabel:()=>Za.I,InlineLabel:()=>ca.c,InlineSegmentGroup:()=>il.e,InlineSwitch:()=>dr.K,InlineToast:()=>Re.r,Input:()=>xr.p,InputControl:()=>Ji.e,InteractiveTable:()=>tt.j,JSONFormatter:()=>qr.B,JsonExplorer:()=>Ar.O,KeyboardPlugin:()=>Ml.Z,Label:()=>sl.J,LegacyForms:()=>$c,LegacyInputStatus:()=>d.O,Legend:()=>sr.s,LegendDisplayMode:()=>aa.lm,LineInterpolation:()=>aa.dx,Link:()=>qi.N,LinkButton:()=>me.z9,List:()=>ht.B,LoadingBar:()=>Le.G,LoadingPlaceholder:()=>Ke._,Marker:()=>ui.p,Menu:()=>Yr.W,MenuGroup:()=>Jr.r,MenuItem:()=>Xr.D,Modal:()=>ta.a,ModalHeader:()=>ra.r,ModalRoot:()=>Ca.EO,ModalTabContent:()=>Un,ModalTabsHeader:()=>ea.J,ModalsContext:()=>Ca.wE,ModalsController:()=>Ca.$s,ModalsProvider:()=>Ca.YO,MultiCombobox:()=>hl.f,MultiSelect:()=>hr.KF,NO_DATA_COLOR:()=>da.nO,NewlinePlugin:()=>Kc.O,NodeGraphDataFrameFieldNames:()=>Tr,OK_COLOR:()=>da.Xw,PENDING_COLOR:()=>da.ct,PageToolbar:()=>ya.d,Pagination:()=>Je.d,PanelChrome:()=>nn.NR,PanelChromeLoadingIndicator:()=>an.I,PanelContainer:()=>Rl._,PanelContextProvider:()=>Rn.XF,PanelContextRoot:()=>Rn.e4,PlotLegend:()=>jr.$,PluginSignatureBadge:()=>lo.B,PointVisibility:()=>aa.yL,Popover:()=>ue.A,PopoverController:()=>oe.I,Portal:()=>fe.ZL,PortalContainer:()=>fe.qB,QueryField:()=>En.X,REGION_FILL_ALPHA:()=>da.UJ,RadioButtonDot:()=>fl.J,RadioButtonGroup:()=>oo.z,RadioButtonList:()=>pl.a,RangeSlider:()=>_i.F,ReactMonacoEditor:()=>Gn.m,ReactUtils:()=>ae,RefreshPicker:()=>st.cC,RelativeTimeRangePicker:()=>xl.N,RenderUserContentAsHTML:()=>Ln.I,RunnerPlugin:()=>Ai.U,SCHEMA:()=>ns.yx,ScaleDirection:()=>aa.ON,ScaleDistribution:()=>aa.L4,ScaleOrientation:()=>aa.Lt,ScrollContainer:()=>b.P,SearchFunctionType:()=>ms.T,SecretInput:()=>ni.L4,SecretTextArea:()=>ai.lp,SecureSocksProxySettings:()=>Ut.Y,Segment:()=>On.Y,SegmentAsync:()=>Fn.s,SegmentInput:()=>ss,SegmentSection:()=>ar.L,SegmentSelect:()=>Ws.a,Select:()=>hr.l6,SelectContainer:()=>hr.KA,SelectMenuOptions:()=>cl.o5,SelectionShortcutsPlugin:()=>wc.l,SeriesColorPicker:()=>ze.Dp,SeriesColorPickerPopover:()=>be.o,SeriesColorPickerPopoverWithTheme:()=>be.t,SeriesIcon:()=>Ms.p,SeriesTable:()=>Wt.o,SeriesTableRow:()=>Wt.g,SeriesVisibilityChangeBehavior:()=>jn.K,SeriesVisibilityChangeMode:()=>pi.B,SetInterval:()=>Xa.u,SlatePrism:()=>Vc.D,SlideOutTransition:()=>In.n,Slider:()=>Xo,Space:()=>al.$,Sparkline:()=>Tn.O,Spinner:()=>sn.y,Stack:()=>nl.B,StackingMode:()=>aa.gs,StatsPicker:()=>qe.S,SuggestionsPlugin:()=>dc.Pz,Switch:()=>dr.d,TLSAuthSettings:()=>Jt.j,Tab:()=>Bt.o,TabContent:()=>on.J,TabbedContainer:()=>Ae.q,Table:()=>Ta.X,TableCellDisplayMode:()=>aa.ob,TableCellInspector:()=>Pa.s,TableCellInspectorMode:()=>Pa.B,TableInputCSV:()=>Ka,TabsBar:()=>is.U,Tag:()=>Pt.v,TagList:()=>Yt.L,TagsInput:()=>Ot.u,Text:()=>el.E,TextArea:()=>Ua.f,TextLink:()=>Io.Y,ThemeContext:()=>y.D,TimeOfDayPicker:()=>pt.R,TimePickerTooltip:()=>rt.xS,TimeRangeInput:()=>yl.b,TimeRangeLabel:()=>mt.f,TimeRangePicker:()=>rt.$6,TimeRangeProvider:()=>ot.A,TimeSeries:()=>Mt,TimeZonePicker:()=>ke.U,ToggleAllState:()=>ul.X,Toggletip:()=>ye.G,ToolbarButton:()=>to.I,ToolbarButtonRow:()=>qo.U,Tooltip:()=>C.m,TooltipDisplayMode:()=>aa.$N,TooltipPlugin:()=>Qn,TooltipPlugin2:()=>jo.xl,UPLOT_AXIS_FONT_SIZE:()=>Tl.pi,UPlotChart:()=>ci.Z,UPlotConfigBuilder:()=>li.e,UnitPicker:()=>We.p,UserIcon:()=>Lo.n,UsersIndicator:()=>El,ValuePicker:()=>Xi.i,VariablesInputModal:()=>Il.b,VerticalGroup:()=>ro.gW,VerticalTab:()=>kt,VirtualizedSelect:()=>hr.ip,VizLayout:()=>Xn.KU,VizLegend:()=>dn.t,VizLegendListItem:()=>Ra.M,VizRepeater:()=>Vt.S,VizTooltip:()=>kn,VizTooltipContainer:()=>Zn.o,WeekStartPicker:()=>Ze.l6,WithContextMenu:()=>Mo.n,XYCanvas:()=>di._,ZoomPlugin:()=>Wn,attachDebugger:()=>Cr.h,buildScaleKey:()=>wo,calculateFontSize:()=>$n.Vr,clearButtonStyles:()=>me.my,colors:()=>da.Tj,commonOptionsBuilder:()=>n,convertOldAngularValueMapping:()=>Gs.I1,createLogger:()=>Rs.h,createPointerDistance:()=>fs.b,defaultIntervals:()=>st.cb,fieldMatchersUI:()=>Zi.g,floatingUtils:()=>ee,fuzzyMatch:()=>po.I,getAvailableIcons:()=>Ea.GO,getCanvasContext:()=>$n.Yc,getCardStyles:()=>ri.H,getCellLinks:()=>as.k,getDragStyles:()=>Dl.l,getFieldTypeIcon:()=>Ea.SS,getFieldTypeIconName:()=>Ea.lV,getGraphFieldOptions:()=>Fs.P,getInputStyles:()=>xr.n,getPortalContainer:()=>fe.gF,getScrollbarWidth:()=>zo,getSelectStyles:()=>dl.J,getTagColor:()=>Dr.yC,getTagColorIndexFromName:()=>Dr.JF,getTagColorsFromName:()=>Dr.MC,getTextColorForAlphaBackground:()=>da.mZ,getTextColorForBackground:()=>da.sg,getTheme:()=>rs,getWeekStart:()=>Ze.rL,graphFieldOptions:()=>Fs.t,graphTickFormatter:()=>Bo,graphTimeFormat:()=>yi,hasValidationEvent:()=>Ja.K,isIconSize:()=>Ea.rJ,isWeekStart:()=>Ze.rE,linkModelToContextMenuItems:()=>Xs.J,logOptions:()=>mo,makeFragment:()=>ns.dF,makeValue:()=>ns.mO,measureText:()=>$n.kD,mockTheme:()=>Kr,mockThemeContext:()=>I.fq,preparePlotFrame:()=>Si,regexValidation:()=>Ja.RP,resetSelectStyles:()=>f.A,sharedInputStyle:()=>Yi.Xb,sharedSingleStatMigrationHandler:()=>Gs._$,sharedSingleStatPanelChangedHandler:()=>Gs.gl,sortedColors:()=>da.Ih,styleMixins:()=>X,stylesFactory:()=>B.N,toIconName:()=>Os.Uo,useElementSelection:()=>Na.y,useForceUpdate:()=>ps.C,useGraphNGContext:()=>Gt,usePanelContext:()=>Rn.d2,usePointerDistance:()=>fs.C,useSplitter:()=>Cl.h,useStyles:()=>I.IS,useStyles2:()=>I.of,useTheme:()=>I.DP,useTheme2:()=>I.$j,validate:()=>Ja.tf,variableSuggestionToCodeEditorSuggestion:()=>sa.O,withErrorBoundary:()=>vr.Xc,withTheme:()=>I.SL,withTheme2:()=>I.cV});var n={};e.r(n),e.d(n,{ScaleDistributionEditor:()=>k.W1,StackingEditor:()=>Y.m,addAxisConfig:()=>k.rg,addAxisPlacement:()=>k.Wq,addAxisWidth:()=>k.T4,addHideFrom:()=>te.e,addLegendOptions:()=>q.H,addStackingConfig:()=>Y.I,addTextSizeOptions:()=>re.I,addTooltipOptions:()=>se.D});var a={};e.r(a),e.d(a,{getNextCharacter:()=>_,getPreviousCousin:()=>J});var s=e(94959),d=e(32581),o=e(74848),l=e(73757),i=e(30703);const c=ct=>{const xt=ct.selectProps.menuIsOpen;return(0,o.jsx)(l.c.IndicatorsContainer,{...ct,children:(0,o.jsx)(i.I,{name:xt?"angle-up":"angle-down",style:{marginTop:"7px"}})})},p=c,h=ct=>{const{children:xt}=ct;return(0,o.jsx)(l.c.NoOptionsMessage,{...ct,children:(0,o.jsx)("div",{className:"gf-form-select-box__desc-option",children:(0,o.jsx)("div",{className:"gf-form-select-box__desc-option__body",children:xt})})})},u=h;var r=e(46942),v=e.n(r),g=e(96540),E=e(46005),x=e(8539),m=e(66963),y=e(35555),b=e(92807),D=e(89534),f=e(57830),C=e(45967);const P=ct=>{const{children:xt,isSelected:Dt,data:Rt}=ct;return(0,o.jsx)(l.c.Option,{...ct,children:(0,o.jsxs)("div",{className:"gf-form-select-box__desc-option",children:[Rt.imgUrl&&(0,o.jsx)("img",{className:"gf-form-select-box__desc-option__img",src:Rt.imgUrl,alt:""}),(0,o.jsxs)("div",{className:"gf-form-select-box__desc-option__body",children:[(0,o.jsx)("div",{children:xt}),Rt.description&&(0,o.jsx)("div",{className:"gf-form-select-box__desc-option__desc",children:Rt.description})]}),Dt&&(0,o.jsx)(i.I,{name:"check","aria-hidden":"true"})]})})},T=null;var M=e(22803),I=e(63142),B=e(65240);const U=(0,B.N)(ct=>({header:(0,M.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${ct.colors.background.secondary}`,"&:hover":{color:ct.colors.text.maxContrast}}),label:(0,M.css)({flexGrow:1}),icon:(0,M.css)({paddingRight:"2px"})}));class W extends g.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(xt=>({expanded:!xt.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:xt}=this.props.selectProps.value;xt&&this.props.options.some(Dt=>Dt.value===xt)&&this.setState({expanded:!0})}}componentDidUpdate(xt){xt.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:xt,label:Dt,theme:Rt}=this.props,{expanded:Ft}=this.state,At=U(Rt);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:At.header,onClick:this.onToggleChildren,role:"presentation",children:[(0,o.jsx)("span",{className:At.label,children:Dt}),(0,o.jsx)(i.I,{className:At.icon,name:Ft?"angle-up":"angle-down"})]}),Ft&&xt]})}}const V=(0,I.cV)(W),z=ct=>(0,o.jsx)(l.c.MenuList,{...ct,children:(0,o.jsx)(b.P,{showScrollIndicators:!0,overflowX:"hidden",maxHeight:"inherit",children:ct.children})});class R extends g.PureComponent{static{this.contextType=y.D}static{this.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:P,SingleValue:D.K,IndicatorsContainer:p,MenuList:z,Group:V}}}render(){const{defaultValue:xt,getOptionLabel:Dt,getOptionValue:Rt,onChange:Ft,options:At,placeholder:Qt,width:Xt,value:Zt,className:tn,isDisabled:pn,isLoading:bn,isSearchable:vn,isClearable:_n,backspaceRemovesValue:ua,isMulti:$a,autoFocus:ba,openMenuOnFocus:ha,onBlur:za,maxMenuHeight:ys,noOptionsMessage:ts,isOpen:Is,components:la,tooltipContent:Vn,tabSelectsValue:Da,onCloseMenu:qt,onOpenMenu:fa,allowCustomValue:La,formatCreateLabel:xa,"aria-label":ln}=this.props;let Qa="";Xt&&(Qa="width-"+Xt);let Ma=E.Ay;const Ds={};La&&(Ma=m.A,Ds.formatCreateLabel=xa??(Zs=>Zs));const Us=v()("gf-form-input","gf-form-input--form-dropdown",Qa,tn),ir={...R.defaultProps.components,...la};return(0,o.jsx)(N,{onCloseMenu:qt,onOpenMenu:fa,tooltipContent:Vn,isOpen:Is,children:(Zs,Li)=>(0,o.jsx)(Ma,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Us,components:ir,defaultValue:xt,value:Zt,getOptionLabel:Dt,getOptionValue:Rt,menuShouldScrollIntoView:!1,isSearchable:vn,onChange:Ft,options:At,placeholder:Qt||"Choose",styles:(0,f.A)(this.context),isDisabled:pn,isLoading:bn,isClearable:_n,autoFocus:ba,onBlur:za,openMenuOnFocus:ha,maxMenuHeight:ys,noOptionsMessage:ts,isMulti:$a,backspaceRemovesValue:ua,menuIsOpen:Is,onMenuOpen:Zs,onMenuClose:Li,tabSelectsValue:Da,"aria-label":ln,...Ds})})}}class O extends g.PureComponent{static{this.contextType=y.D}static{this.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300}}render(){const{defaultValue:xt,getOptionLabel:Dt,getOptionValue:Rt,onChange:Ft,placeholder:At,width:Qt,value:Xt,className:Zt,loadOptions:tn,defaultOptions:pn,isLoading:bn,loadingMessage:vn,noOptionsMessage:_n,isDisabled:ua,isSearchable:$a,isClearable:ba,backspaceRemovesValue:ha,autoFocus:za,onBlur:ys,openMenuOnFocus:ts,maxMenuHeight:Is,isMulti:la,tooltipContent:Vn,onCloseMenu:Da,onOpenMenu:qt,isOpen:fa}=this.props;let La="";Qt&&(La="width-"+Qt);const xa=v()("gf-form-input","gf-form-input--form-dropdown",La,Zt);return(0,o.jsx)(N,{onCloseMenu:Da,onOpenMenu:qt,tooltipContent:Vn,isOpen:fa,children:(ln,Qa)=>(0,o.jsx)(x.A,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:xa,components:{Option:P,SingleValue:D.K,IndicatorsContainer:p,NoOptionsMessage:u},defaultValue:xt,value:Xt,getOptionLabel:Dt,getOptionValue:Rt,menuShouldScrollIntoView:!1,onChange:Ft,loadOptions:tn,isLoading:bn,defaultOptions:pn,placeholder:At||"Choose",styles:(0,f.A)(this.context),loadingMessage:vn,noOptionsMessage:_n,isDisabled:ua,isSearchable:$a,isClearable:ba,autoFocus:za,onBlur:ys,openMenuOnFocus:ts,maxMenuHeight:Is,isMulti:la,backspaceRemovesValue:ha})})}}class N extends g.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:xt}=this.props;xt&&xt(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:xt}=this.props;xt&&xt(),this.setState({isOpenInternal:!1})}}render(){const{children:xt,isOpen:Dt,tooltipContent:Rt}=this.props,{isOpenInternal:Ft}=this.state;let At;return(Ft||Dt)&&(At=!1),Rt?(0,o.jsx)(C.m,{show:At,content:Rt,placement:"bottom",children:(0,o.jsx)("div",{children:xt(this.onOpenMenu,this.onCloseMenu)})}):(0,o.jsx)("div",{children:xt(this.onOpenMenu,this.onCloseMenu)})}}const F=null;var G=e(2543);class H extends g.PureComponent{constructor(){super(...arguments),this.state={id:(0,G.uniqueId)()},this.internalOnChange=xt=>{xt.stopPropagation(),this.props.onChange(xt)}}render(){const{labelClass:xt="",switchClass:Dt="",label:Rt,checked:Ft,disabled:At,transparent:Qt,className:Xt,theme:Zt,tooltip:tn,tooltipPlacement:pn}=this.props,bn=w(Zt),vn=this.state.id,_n=`gf-form-label ${xt} ${Qt?"gf-form-label--transparent":""} pointer`,ua=(0,M.cx)(bn.switch,Dt,{[bn.switchTransparent]:Qt});return(0,o.jsx)("div",{className:bn.container,children:(0,o.jsxs)("label",{htmlFor:vn,className:(0,M.cx)("gf-form",bn.labelContainer,Xt),children:[Rt&&(0,o.jsxs)("div",{className:_n,children:[Rt,tn&&(0,o.jsx)(C.m,{placement:pn||"auto",content:tn,theme:"info",children:(0,o.jsx)(i.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})]}),(0,o.jsxs)("div",{className:ua,children:[(0,o.jsx)("input",{disabled:At,id:vn,type:"checkbox",checked:Ft,onChange:this.internalOnChange}),(0,o.jsx)("span",{className:bn.slider})]})]})})}}const K=(0,I.cV)(H),w=ct=>{const xt=(0,M.css)({background:ct.v1.palette.gray1,borderRadius:ct.shape.radius.pill,height:"16px",width:"32px",display:"block",position:"relative","&::before":{position:"absolute",content:"''",height:"12px",width:"12px",left:"2px",top:"2px",background:ct.components.input.background,[ct.transitions.handleMotion("no-preference")]:{transition:"0.4s"},borderRadius:ct.shape.radius.circle,boxShadow:ct.shadows.z1}});return{container:(0,M.css)({display:"flex",flexShrink:0}),labelContainer:(0,M.css)({display:"flex",cursor:"pointer",marginRight:ct.spacing(.5)}),switch:(0,M.css)({display:"flex",position:"relative",width:"56px",height:ct.spacing(4),background:ct.components.input.background,border:`1px solid ${ct.components.input.borderColor}`,borderRadius:ct.shape.radius.default,alignItems:"center",justifyContent:"center",input:{opacity:0,width:0,height:0},[`input:checked + .${xt}`]:{background:ct.colors.primary.main},[`input:checked + .${xt}::before`]:{transform:"translateX(16px)"}}),switchTransparent:(0,M.css)({background:"transparent",border:0,width:"40px"}),slider:xt}};var Q=e(23659),k=e(44017),te=e(45013),q=e(41069),se=e(79277),re=e(14099),Y=e(81082),X=e(35484);typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(ct){const xt=(this.document||this.ownerDocument).querySelectorAll(ct);let Dt=this,Rt;do{for(Rt=xt.length;--Rt>=0&&xt.item(Rt)!==Dt;);Dt=Dt.parentElement}while(Rt<0&&Dt);return Dt});function J(ct,xt){let Dt=ct.parentElement?.previousSibling,Rt;for(;Dt;){if(Dt instanceof HTMLElement&&(Rt=Dt.querySelector(xt)),Rt)return Rt;Dt=Dt.previousSibling}}function _(ct){const xt=(ct||window).getSelection();if(!xt||!xt.anchorNode)return null;const Dt=xt.getRangeAt(0),Rt=xt.anchorNode.textContent,Ft=Dt.startOffset;return Rt.slice(Ft,Ft+1)}var ee=e(76373),ae=e(44019),le=e(76319),L=e(7075),ie=e(44458),oe=e(43533),ue=e(2381),ye=e(59243),fe=e(15245),Ee=e(52718),Ae=e(64467),Ge=e(47931),Fe=e(64913),Pe=e(56873),Ve=e(38092),me=e(45861),Se=e(78121),Qe=e(21133);const Ue=ct=>{const{onChange:xt,className:Dt,loadData:Rt,icon:Ft,buttonProps:At,hideDownIcon:Qt,variant:Xt,disabled:Zt,...tn}=ct,pn=(0,I.of)(Ie),bn=(0,I.of)(Qe.T);let vn=ct.children;return Qt||(vn=[ct.children,(0,o.jsx)(i.I,{name:"angle-down",className:pn.icons.right},"down-icon")]),(0,o.jsx)(Ve.A,{onChange:(0,Se.k)(xt),loadData:(0,Se.W)(Rt),dropdownClassName:(0,M.cx)(bn.dropdown,pn.popup),...tn,expandIcon:null,children:(0,o.jsx)(me.$n,{icon:Ft,disabled:Zt,variant:Xt,...At??{},children:vn})})};Ue.displayName="ButtonCascader";const Ie=ct=>({popup:(0,M.css)({label:"popup",zIndex:ct.zIndex.dropdown}),icons:{right:(0,M.css)({margin:"1px 0 0 4px"}),left:(0,M.css)({margin:"-1px 4px 0 0"})}});var Re=e(53371),Ke=e(6975),Le=e(47327),ze=e(35427),Be=e(7612),$e=e(65229),Ye=e(6773),de=e(8135),ge=e(12173),pe=e(32550);const De=(0,g.forwardRef)(({value:ct="",onChange:xt,returnColorAs:Dt="rgb",...Rt},Ft)=>{const[At,Qt]=(0,g.useState)(ct),[Xt,Zt]=(0,g.useState)(!1),tn=(0,I.$j)(),pn=(0,I.of)(Me),bn=(0,I.of)(pe.$);(0,$e.A)(_n=>{if(_n===ct)return;if(!_n){xt("");return}const ua=tn.visualization.getColorByName(_n);xt(Dt==="rgb"?Ye.MV.asRgbString(ua):Ye.MV.asHexString(ua))},500,[At]);const vn=_n=>{document.querySelector('[data-testid="color-popover"]')?.contains(_n.relatedTarget)||Zt(!1)};return(0,o.jsx)(de.N,{onClick:()=>Zt(!1),children:(0,o.jsxs)("div",{className:pn.wrapper,children:[Xt&&!Rt.disabled&&(0,o.jsx)(Be.p9,{"data-testid":"color-popover",color:At,onChange:Qt,className:(0,M.cx)(bn.root,pn.picker)}),(0,o.jsx)(ge.A,{...Rt,theme:tn,color:At,onChange:Qt,buttonAriaLabel:"Open color picker",onClick:()=>Zt(!0),onBlur:_n=>vn(_n),ref:Ft,isClearable:!0})]})})});De.displayName="ColorPickerInput";const Me=ct=>({wrapper:(0,M.css)({position:"relative"}),picker:(0,M.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,M.css)({position:"absolute"})});var be=e(57339),Oe=e(74451),Ne=e(50201),We=e(12965),qe=e(34107),st=e(90811),rt=e(91867),ot=e(72296),mt=e(83692),pt=e(11527),ke=e(59310),Ze=e(5857),nt=e(96396),ut=e(43482),gt=e(27282),ht=e(5585),tt=e(27594),Ot=e(10928),jt=e(92745),wt=e(37386);const Ht=(0,g.memo)(()=>{const ct=(0,I.of)(hn);return(0,o.jsxs)("div",{className:ct.ellipsis,children:[(0,o.jsx)("span",{className:ct.firstDot,children:"."}),(0,o.jsx)("span",{className:ct.secondDot,children:"."}),(0,o.jsx)("span",{className:ct.thirdDot,children:"."})]})});Ht.displayName="EllipsisAnimated";const hn=ct=>({ellipsis:(0,M.css)({display:"inline"}),firstDot:(0,M.css)({[ct.transitions.handleMotion("no-preference","reduce")]:{animation:`${Dn} 2s linear infinite`}}),secondDot:(0,M.css)({[ct.transitions.handleMotion("no-preference","reduce")]:{animation:`${Bn} 2s linear infinite`}}),thirdDot:(0,M.css)({[ct.transitions.handleMotion("no-preference","reduce")]:{animation:`${xn} 2s linear infinite`}})}),Dn=(0,M.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,Bn=(0,M.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,xn=(0,M.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,ft=2*1e3;function St(ct){const{invalid:xt,loading:Dt,onFinishChange:Rt,saveErrorMessage:Ft="Error saving this value",error:At,children:Qt,disabled:Xt,...Zt}=ct,[tn,pn]=g.useState({isLoading:!1,showSuccess:!1,showError:xt}),bn=(0,g.useRef)(null);g.useEffect(()=>{let ba;if(tn.showSuccess){const ha=tn.showError?0:ft;ba=setTimeout(()=>{pn({...tn,showSuccess:!1})},ha)}return()=>{window.clearTimeout(ba)}},[tn]);const vn=(0,g.useCallback)(ba=>{xt||(pn({...tn,isLoading:!0,showSuccess:!1}),Rt(ba).then(()=>{pn({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{pn({...tn,isLoading:!1,showError:!0})}))},[xt,tn,Rt]),_n=(0,g.useMemo)(()=>(0,G.debounce)(vn,600,{leading:!1}),[vn]),ua=xt||tn.showError||void 0,$a=(0,I.of)(Tt);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(wt.D,{...Zt,loading:Dt||void 0,invalid:ua,disabled:Xt,error:At||tn.showError&&Ft,ref:bn,className:$a.widthFitContent,children:g.cloneElement(Qt(ba=>{_n(ba)}))}),tn.isLoading&&(0,o.jsx)(Re.r,{referenceElement:bn.current,placement:"right",children:(0,o.jsxs)(jt.x6,{i18nKey:"grafana-ui.auto-save-field.saving",children:["Saving ",(0,o.jsx)(Ht,{})]})}),tn.showSuccess&&(0,o.jsx)(Re.r,{suffixIcon:"check",referenceElement:bn.current,placement:"right",children:(0,o.jsx)(jt.x6,{i18nKey:"grafana-ui.auto-save-field.saved",children:"Saved!"})})]})}St.displayName="AutoSaveField";const Tt=()=>({widthFitContent:(0,M.css)({width:"fit-content"})});var Je=e(34213),Pt=e(94018),Yt=e(37658),Lt=e(34343),fn=e(71599),En=e(92505),An=e(50992),Gn=e(65232),zn=e(78193),sa=e(13477),ta=e(22787),ra=e(53428),ea=e(52792);const Un=({children:ct})=>{const xt=(0,I.of)(oa);return(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:xt.header,children:(0,o.jsx)("div",{className:xt.content,children:ct})})})},oa=ct=>({header:(0,M.css)({display:"flex",margin:ct.spacing(0,0,3,0)}),content:(0,M.css)({flexGrow:1})});var Ca=e(8515),ya=e(84600),Xa=e(82143),Ta=e(24343),Pa=e(64780),pa=e(68125),Ua=e(87105);class ma extends g.PureComponent{constructor(xt){super(xt),this.readCSV=(0,G.debounce)(()=>{const{config:Ft}=this.props,{text:At}=this.state;this.setState({data:(0,pa.Jh)(At,{config:Ft})})},150),this.onTextChange=Ft=>{this.setState({text:Ft.target.value})};const{text:Dt,config:Rt}=xt;this.state={text:Dt,data:(0,pa.Jh)(Dt,{config:Rt})}}componentDidUpdate(xt,Dt){const{text:Rt}=this.state;(Rt!==Dt.text||this.props.config!==xt.config)&&this.readCSV(),this.props.text!==xt.text&&this.props.text!==Rt&&this.setState({text:this.props.text}),this.state.data!==Dt.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:xt,height:Dt,theme:Rt}=this.props,{data:Ft}=this.state,At=Oa(Rt);return(0,o.jsxs)("div",{className:At.tableInputCsv,children:[(0,o.jsx)(Ua.f,{style:{width:xt,height:Dt},placeholder:(0,jt.t)("grafana-ui.table.csv-placeholder","Enter CSV here..."),value:this.state.text,onChange:this.onTextChange,className:At.textarea}),Ft&&(0,o.jsx)("footer",{className:At.footer,children:Ft.map((Qt,Xt)=>{const Zt=Qt.length,tn=Qt.fields.length;return(0,o.jsxs)("span",{children:[(0,o.jsxs)(jt.x6,{i18nKey:"grafana-ui.table.csv-counts",children:["Rows:",{rows:Zt},", Columns:",{columns:tn}]}),"\xA0",(0,o.jsx)(i.I,{name:"check-circle"})]},Xt)})})]})}}const Ka=(0,I.cV)(ma);Ka.displayName="TableInputCSV";const Oa=(0,B.N)(ct=>({tableInputCsv:(0,M.css)({position:"relative"}),textarea:(0,M.css)({height:"100%",width:"100%"}),footer:(0,M.css)({position:"absolute",bottom:"15px",right:"15px",border:`1px solid ${ct.colors.success.border}`,background:ct.colors.success.main,color:ct.colors.success.contrastText,padding:`1px ${ct.spacing(.5)}`,fontSize:"80%"})}));var is=e(54314),Bt=e(60208),$t=e(51898),zt=e(72489);const kt=(0,g.forwardRef)(({label:ct,active:xt,icon:Dt,counter:Rt,className:Ft,suffix:At,onChangeTab:Qt,href:Xt,...Zt},tn)=>{const pn=(0,I.of)(mn),bn=()=>(0,o.jsxs)(o.Fragment,{children:[Dt&&(0,o.jsx)(i.I,{name:Dt}),ct,typeof Rt=="number"&&(0,o.jsx)(zt.p,{value:Rt}),At&&(0,o.jsx)(At,{className:pn.suffix})]}),vn=(0,M.cx)(pn.link,xt&&pn.activeStyle);return(0,o.jsx)("a",{href:Xt,className:vn,...Zt,onClick:Qt,"aria-label":Zt["aria-label"]||$t.Tp.components.Tab.title(ct),role:"tab","aria-selected":xt,ref:tn,children:bn()})});kt.displayName="Tab";const mn=ct=>({link:(0,M.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:ct.colors.text.primary,svg:{marginRight:ct.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,M.css)({label:"activeTabStyle",color:ct.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:ct.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,M.css)({marginLeft:ct.spacing(1)})});var on=e(13941),Ln=e(70663),Hn=e(97611),Tn=e(53431),Nn=e(58684),gn=e(98005),Zn=e(71076);const kn=({content:ct,position:xt,offset:Dt})=>{const Rt=(0,I.of)(it);return xt?(0,o.jsx)(fe.ZL,{className:Rt.portal,children:(0,o.jsx)(Zn.o,{position:xt,offset:Dt||{x:0,y:0},children:ct})}):null};kn.displayName="VizTooltip";const it=()=>({portal:(0,M.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})});var Wt=e(63428),Vt=e(33352),nn=e(67522),an=e(39884),Rn=e(64400),Xn=e(54735),jn=e(22940),dn=e(4268),Ra=e(89123),Sa=e(34999),Wa=e(89599),gs=e(74475),Ss=e(5753);function zs({links:ct}){const xt=(0,I.of)(Rr);if(ct.length===1)return(0,o.jsx)(Ss.R,{link:ct[0]});const Dt=ct.filter(Ft=>Ft.target==="_blank"),Rt=ct.filter(Ft=>Ft.target==="_self");return(0,o.jsxs)(o.Fragment,{children:[Rt.map((Ft,At)=>(0,o.jsx)(Ss.R,{link:Ft},At)),(0,o.jsxs)("div",{className:xt.wrapper,children:[(0,o.jsx)("p",{className:xt.externalLinksHeading,children:(0,o.jsx)(jt.x6,{i18nKey:"grafana-ui.field-link-list.external-links-heading",children:"External links"})}),Dt.map((Ft,At)=>(0,o.jsxs)("a",{href:Ft.href,target:Ft.target,className:xt.externalLink,children:[(0,o.jsx)(i.I,{name:"external-link-alt"}),Ft.title]},At))]})]})}const Rr=ct=>({wrapper:(0,M.css)({flexBasis:"150px",width:"100px",marginTop:ct.spacing(1)}),externalLinksHeading:(0,M.css)({color:ct.colors.text.secondary,fontWeight:ct.typography.fontWeightRegular,fontSize:ct.typography.size.sm,margin:0}),externalLink:(0,M.css)({color:ct.colors.text.link,fontWeight:ct.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:ct.spacing(1)}})}),mr=({className:ct,children:xt})=>{const Dt=(0,I.of)(So);return(0,o.jsx)("div",{className:(0,M.cx)(Dt,ct),children:xt})},So=()=>(0,M.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}});var Gs=e(59795),_r=e(43951),kr=e(97375),Yr=e(87063),Jr=e(30930),Xr=e(94535),Mo=e(41479),Ys=e(96822),gr=e(73628),Zr=e(81917),Ir=e(6399),Ms=e(71479),Ha=e(79331),cr=e(991);const js=(0,g.memo)((0,g.forwardRef)(({title:ct,featureState:xt,...Dt},Rt)=>{const Ft=(0,I.of)(Oo),At=xt?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:Ft.badge,children:(0,o.jsx)(cr.y,{featureState:xt})}),(0,o.jsx)("h3",{children:ct})]}):(0,o.jsx)("h3",{children:ct});return(0,o.jsx)(Ha.w,{branded:!0,title:At,urlTitle:"Read documentation",ref:Rt,...Dt})}));js.displayName="FeatureInfoBox";const Oo=ct=>({badge:(0,M.css)({marginBottom:ct.spacing(1)})});var qr=e(50275),Ar=e(22658),vr=e(36303),eo=e(56297),yr=e(96004),Ro=e(55803),dr=e(21285),bt=e(18027);function Kt({options:ct,onOptionsChange:xt}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h3",{className:"page-heading",children:(0,o.jsx)(jt.x6,{i18nKey:"grafana-ui.data-source-settings.alerting-settings-heading",children:"Alerting"})}),(0,o.jsx)("div",{className:"gf-form-group",children:(0,o.jsx)("div",{className:"gf-form-inline",children:(0,o.jsx)("div",{className:"gf-form",children:(0,o.jsx)(bt.I,{labelWidth:29,label:(0,jt.t)("grafana-ui.data-source-settings.alerting-settings-label","Manage alert rules in Alerting UI"),disabled:ct.readOnly,tooltip:(0,jt.t)("grafana-ui.data-source-settings.alerting-settings-tooltip","Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."),children:(0,o.jsx)(dr.K,{value:ct.jsonData.manageAlerts!==!1,onChange:Dt=>xt({...ct,jsonData:{...ct.jsonData,manageAlerts:Dt.currentTarget.checked}})})})})})})]})}var Ut=e(3936),Jt=e(37235),en=e(45558),sn=e(68079),Sn=e(19052),In=e(4819),On=e(61875),Fn=e(76671),ia=e(29647),$n=e(53568),ca=e(79233),Ia=e(37864),Va=e(3431);const ka=14;function ss({value:ct,onChange:xt,Component:Dt,className:Rt,placeholder:Ft,inputPlaceholder:At,disabled:Qt,autofocus:Xt=!1,onExpandedChange:Zt,...tn}){const pn=(0,g.useRef)(null),[bn,vn]=(0,g.useState)(ct),[_n,ua]=(0,g.useState)((0,$n.kD)((ct||"").toString(),ka).width),[$a,,ba,ha]=(0,Va.Q)(Xt,Zt),za=(0,I.of)(Ia.m);if((0,ia.A)(pn,()=>{ha(!1),xt(bn)}),!ba)return(0,o.jsx)($a,{disabled:Qt,Component:Dt||(0,o.jsx)(ca.c,{className:(0,M.cx)(za.segment,{[za.queryPlaceholder]:Ft!==void 0&&!bn,[za.disabled]:Qt},Rt),children:ct||Ft})});const ys=(0,M.css)({width:`${Math.max(_n+20,32)}px`});return(0,o.jsx)("input",{...tn,ref:pn,autoFocus:!0,className:(0,M.cx)("gf-form gf-form-input",ys),value:bn,placeholder:At,onChange:ts=>{const{width:Is}=(0,$n.kD)(ts.target.value,ka);ua(Is),vn(ts.target.value)},onBlur:()=>{ha(!1),xt(bn)},onKeyDown:ts=>{[13,27].includes(ts.keyCode)&&(ha(!1),xt(bn))}})}var Ws=e(89467),ar=e(52042),ur=e(8207),Ps=e(17437),vs=e(69156),xr=e(63527),Qi=e(91302);const Xo=({min:ct,max:xt,onChange:Dt,onAfterChange:Rt,orientation:Ft="horizontal",reverse:At,step:Qt,value:Xt,ariaLabelForHandle:Zt,marks:tn,included:pn,inputId:bn,showInput:vn=!0})=>{const _n=Ft==="horizontal",ua=(0,I.of)(Qi.$,_n,!!tn),$a=vs.A,[ba,ha]=(0,g.useState)(Xt??ct),za=Zt??(0,jt.t)("grafana-ui.slider.drag-handle-aria-label","Use arrow keys to change the value"),ys=(0,g.useCallback)(qt=>{const fa=typeof qt=="number"?qt:qt[0];ha(fa),Dt?.(fa)},[ha,Dt]),ts=(0,g.useCallback)(qt=>{let fa=+qt.target.value;Number.isNaN(fa)&&(fa=0),ha(fa),Dt&&Dt(fa),Rt&&Rt(fa)},[Dt,Rt]),Is=(0,g.useCallback)(qt=>{const fa=+qt.target.value;fa>xt?ha(xt):fa<ct&&ha(ct)},[xt,ct]),la=(0,g.useCallback)(qt=>{const fa=typeof qt=="number"?qt:qt[0];Rt?.(fa)},[Rt]),Vn=_n?[]:[ua.sliderInputVertical],Da=_n?[]:[ua.sliderInputFieldVertical];return(0,o.jsxs)("div",{className:(0,M.cx)(ua.container,ua.slider),children:[(0,o.jsx)(Ps.Global,{styles:ua.tooltip}),(0,o.jsxs)("div",{className:(0,M.cx)(ua.sliderInput,...Vn),children:[(0,o.jsx)($a,{min:ct,max:xt,step:Qt,defaultValue:Xt,value:ba,onChange:ys,onChangeComplete:la,vertical:!_n,reverse:At,ariaLabelForHandle:za,marks:tn,included:pn}),vn&&(0,o.jsx)(xr.p,{type:"text",width:7.5,className:(0,M.cx)(ua.sliderInputField,...Da),value:ba,onChange:ts,onBlur:Is,min:ct,max:xt,id:bn})]})]})};Xo.displayName="Slider";var _i=e(21103),ki=e(50426),Yi=e(3343),Ji=e(26987),Zo=e(93256),to=e(7895),qo=e(36219),Xi=e(59695),Zi=e(63152),qi=e(20941),Io=e(89640),el=e(66404),tl=e(31286),nl=e(41654),ei=e(13943),al=e(35137),sl=e(72636),sr=e(53487),rl=e(16780),ol=e(12594),il=e(83871),ll=e(97095),no=e(49785);const ao=({name:ct,control:xt,children:Dt,...Rt})=>{const{fields:Ft,append:At,prepend:Qt,remove:Xt,swap:Zt,move:tn,insert:pn}=(0,no.jz)({control:xt,name:ct,...Rt});return Dt({fields:Ft,append:At,prepend:Qt,remove:Xt,swap:Zt,move:tn,insert:pn})};var hr=e(18857),cl=e(72508),dl=e(69665),ul=e(29362),so=e(43243),hl=e(70683),ro=e(32881),ti=e(99887),oo=e(77824),fl=e(45450),pl=e(16203),ml=e(33033),gl=e(12737),ni=e(48767),ai=e(40601),vl=e(32635),si=e(57688),Fa=e(40279),Ya=e(48431),yl=e(56265),xl=e(90929),ri=e(8073),Ao=e(43856),oi=e(21539),ii=e(15356),io=e(88559),lo=e(63509),Lo=e(35942);const El=({users:ct,onClick:xt,limit:Dt=4})=>{const Rt=(0,I.of)(Pl);if(!ct.length)return null;Dt=Dt>0?Dt:4;const Ft=ct.length>Dt,At=ct.length-Dt,Qt=At>99;return(0,o.jsxs)("div",{className:Rt.container,"aria-label":(0,jt.t)("grafana-ui.users-indicator.container-label","Users indicator container"),children:[Ft&&(0,o.jsx)(Lo.n,{onClick:xt,userView:{user:{name:"Extra users"},lastActiveAt:""},showTooltip:!1,children:Qt?"...":`+${At}`}),ct.slice(0,Ft?Dt:Dt+1).reverse().map(Xt=>(0,o.jsx)(Lo.n,{userView:Xt},Xt.user.name))]})},Pl=ct=>({container:(0,M.css)({display:"flex",justifyContent:"center",flexDirection:"row-reverse",marginLeft:ct.spacing(1),"& > button":{marginLeft:ct.spacing(-1)}}),dots:(0,M.css)({marginBottom:"3px"})});var Lr=e(71555),Za=e(51115),bl=e(3271),Dl=e(45897),Cl=e(93008),Fs=e(99555),li=e(47276),Tl=e(23414),ci=e(92790),jr=e(61897),di=e(16477),ui=e(73858),Sl=e(7515),jo=e(69234),hi=e(18667),Ml=e(93630),fi=e(62748),pi=e(49256),Ol=e(88977),Rl=e(3023),Il=e(81538),Al=e(34796),mi=e.n(Al),Hs=e(26332),aa=e(739),gi=e(80011);const co=({getContextMenuSource:ct,timeZone:xt,itemsGroup:Dt,dimensions:Rt,contextDimensions:Ft,...At})=>{const Qt=ct(),Xt=Dt?Dt.map(pn=>({...pn,items:pn.items?.filter(bn=>bn.label)})):[],Zt=()=>{if(!Qt)return null;let pn;if(Rt?.yAxis&&Ft?.yAxis?.[1]){const vn=(0,Hs.WK)(Rt.yAxis,Ft.yAxis[0],Ft.yAxis[1]),_n=Qt.series.valueField.display;pn=_n(vn)}const bn=(0,gi.LE)(Qt.datapoint[0],{defaultWithMS:Qt.series.hasMsResolution,timeZone:xt});return(0,o.jsx)(Br,{timestamp:bn,seriesColor:Qt.series.color,displayName:Qt.series.alias||Qt.series.label,displayValue:pn})},tn=()=>Xt?.map((pn,bn)=>(0,o.jsx)(Jr.r,{label:pn.label,children:(pn.items||[]).map(vn=>(0,o.jsx)(Xr.D,{url:vn.url,label:vn.label,target:vn.target,icon:vn.icon,active:vn.active,onClick:vn.onClick},`${vn.label}`))},`${pn.label}${bn}`));return(0,o.jsx)(kr.t,{...At,renderMenuItems:tn,renderHeader:Zt})},Br=({timestamp:ct,seriesColor:xt,displayName:Dt,displayValue:Rt})=>{const Ft=(0,I.of)(Ks);return(0,o.jsxs)("div",{className:Ft.wrapper,children:[(0,o.jsx)("strong",{children:ct}),(0,o.jsxs)(ro.Gy,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(Ms.p,{color:xt}),(0,o.jsx)("span",{className:Ft.displayName,children:Dt})]}),Rt&&(0,o.jsx)(oi.i,{value:Rt})]})]})};function Ks(ct){return{wrapper:(0,M.css)({padding:ct.spacing(.5,1),fontSize:ct.typography.size.sm,zIndex:ct.zIndex.tooltip}),displayName:(0,M.css)({whiteSpace:"nowrap",paddingLeft:ct.spacing(.5)})}}var Js=e(55386),rr=e(16515),or=e(5421);const Ll=(ct,xt)=>{let Dt=0,Rt=ct.values.length-1,Ft;for(;;){if(Dt>Rt)return Math.max(Rt,0);Ft=Math.floor((Dt+Rt)/2);const At=ct.values[Ft];if(At===xt)return Ft;At&&At<xt?Dt=Ft+1:Rt=Ft-1}},vi=(ct,xt,Dt,Rt)=>{let Ft,At,Qt,Xt,Zt;const tn=[];let pn,bn;for(Ft=0;Ft<ct.length;Ft++){At=ct[Ft];const vn=xt[Ft];Qt=Ll(vn,Dt),Xt=Dt-vn.values[Qt],Zt=vn.values[Qt],(pn===void 0||Xt>=0&&(Xt<pn||pn<0)||Xt<0&&Xt>pn)&&(pn=Xt,bn=vn.display?(0,Js.cN)(vn.display(Zt)):Zt);const _n=At.display(At.values[Qt]);tn.push({value:(0,Js.cN)(_n),datapointIndex:Qt,seriesIndex:Ft,color:_n.color,label:(0,rr.Ct)(At),time:vn.display?(0,Js.cN)(vn.display(Zt)):Zt})}return{results:tn,time:bn}},Bo=(ct,xt)=>(0,gi.LE)(ct,{format:xt?.options?.timeformat,timeZone:xt?.options?.timezone}),yi=(ct,xt,Dt)=>{if(xt&&Dt&&ct){const Rt=Dt-xt,Ft=Rt/ct/1e3,At=86400010,Qt=31536e6;return Ft<=10?or.WC.interval.millisecond:Ft<=45?or.WC.interval.second:Rt<=At?or.WC.interval.minute:Ft<=8e4?or.WC.interval.hour:Rt<=Qt?or.WC.interval.day:Ft<=31536e3?or.WC.interval.month:or.WC.interval.year}return or.WC.interval.minute},Uo=({dimensions:ct,activeDimensions:xt,pos:Dt,timeZone:Rt})=>{let Ft=null;if(xt.xAxis===null)return null;xt.yAxis&&(Ft=xt.yAxis[0]);const At=xt.xAxis[1]?(0,Hs.WK)(ct.xAxis,xt.xAxis[0],xt.xAxis[1]):Dt.x,Qt=vi(ct.yAxis.columns,ct.xAxis.columns,At,Rt),Xt=Qt.time,Zt=Qt.results.map((tn,pn)=>({color:tn.color,label:tn.label,value:tn.value,isActive:Ft===pn}));return(0,o.jsx)(Wt.o,{series:Zt,timestamp:Xt})};Uo.displayName="MultiModeGraphTooltip";const No=({dimensions:ct,activeDimensions:xt,timeZone:Dt})=>{if(xt.yAxis===null||xt.yAxis[1]===void 0||xt.xAxis===null||xt.xAxis[1]===void 0)return null;const Rt=(0,Hs.WK)(ct.xAxis,xt.xAxis[0],xt.xAxis[1]),Ft=(0,Hs.P4)(ct.xAxis,xt.xAxis[0]),At=Ft.display?(0,Js.cN)(Ft.display(Rt)):Rt,Qt=(0,Hs.P4)(ct.yAxis,xt.yAxis[0]),Xt=(0,Hs.WK)(ct.yAxis,xt.yAxis[0],xt.yAxis[1]),Zt=Qt.display,tn=Zt(Xt);return(0,o.jsx)(Wt.o,{series:[{color:tn.color,label:(0,rr.Ct)(Qt),value:(0,Js.cN)(tn)}],timestamp:At})};No.displayName="SingleModeGraphTooltip";const xi=({mode:ct=aa.$N.Single,dimensions:xt,activeDimensions:Dt,pos:Rt,timeZone:Ft})=>!Dt||!Dt.xAxis?null:ct==="single"?(0,o.jsx)(No,{dimensions:xt,activeDimensions:Dt,timeZone:Ft}):(0,o.jsx)(Uo,{dimensions:xt,activeDimensions:Dt,pos:Rt,timeZone:Ft});xi.displayName="GraphTooltip";class Ei extends g.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(xt,Dt)=>{const{onHorizontalRegionSelected:Rt}=this.props;Rt&&Rt(Dt.xaxis.from,Dt.xaxis.to)},this.onPlotHover=(xt,Dt,Rt)=>{this.setState({isTooltipVisible:!0,activeItem:Rt,pos:Dt})},this.onPlotClick=(xt,Dt,Rt)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:Rt,contextPos:Dt})},this.renderTooltip=()=>{const{children:xt,series:Dt,timeZone:Rt}=this.props,{pos:Ft,activeItem:At,isTooltipVisible:Qt}=this.state;let Xt;if(!Qt||!Ft||Dt.length===0||(g.Children.forEach(xt,ba=>{if(Xt)return;(ba&&ba.type&&(ba.type.displayName||ba.type.name))===kn.displayName&&(Xt=ba)}),!Xt))return null;const Zt=Xt.props,tn=Zt.mode||"single";if(!At&&tn==="single")return null;const pn=Zt.tooltipComponent||xi,bn=At?At.series.seriesIndex:0,vn=At?At.dataIndex:void 0,_n={xAxis:[bn,vn],yAxis:At?[At.series.seriesIndex,At.dataIndex]:null},ua={dimensions:{xAxis:(0,Hs.r4)("xAxis",Dt.map(ba=>ba.timeField)),yAxis:(0,Hs.r4)("yAxis",Dt.map(ba=>ba.valueField))},activeDimensions:_n,pos:Ft,mode:Zt.mode||aa.$N.Single,timeZone:Rt},$a=g.createElement(pn,{...ua});return g.cloneElement(Xt,{content:$a,position:{x:Ft.pageX,y:Ft.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:xt}=this.props,{contextPos:Dt,contextItem:Rt,isContextVisible:Ft}=this.state;if(!Ft||!Dt||!Rt||xt.length===0)return null;const At=Rt?Rt.series.seriesIndex:0,Qt=Rt?Rt.dataIndex:void 0,Xt={xAxis:[At,Qt],yAxis:Rt?[Rt.series.seriesIndex,Rt.dataIndex]:null},Zt={xAxis:(0,Hs.r4)("xAxis",xt.map(vn=>vn.timeField)),yAxis:(0,Hs.r4)("yAxis",xt.map(vn=>vn.valueField))},tn=()=>this.setState({isContextVisible:!1}),pn=()=>({datapoint:Rt.datapoint,dataIndex:Rt.dataIndex,series:Rt.series,seriesIndex:Rt.series.seriesIndex,pageX:Dt.pageX,pageY:Dt.pageY}),bn={x:Dt.pageX,y:Dt.pageY,onClose:tn,getContextMenuSource:pn,timeZone:this.props.timeZone,dimensions:Zt,contextDimensions:Xt};return(0,o.jsx)(co,{...bn})},this.getBarWidth=()=>{const{series:xt}=this.props;return Math.min(...xt.map(Dt=>Dt.timeStep))}}static{this.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1}}componentDidUpdate(xt,Dt){xt!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=mi()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(xt){return xt.length===0?[{show:!0,min:-1,max:1}]:(0,G.uniqBy)(xt.map(Dt=>{const Rt=Dt.yAxis?Dt.yAxis.index:1,Ft=Dt.yAxis&&Dt.yAxis.min&&!isNaN(Dt.yAxis.min)?Dt.yAxis.min:null,At=Dt.yAxis&&Dt.yAxis.tickDecimals&&!isNaN(Dt.yAxis.tickDecimals)?Dt.yAxis.tickDecimals:null;return{show:!0,index:Rt,position:Rt===1?"left":"right",min:Ft,tickDecimals:At}}),Dt=>Dt.index)}draw(){if(this.element===null)return;const{width:xt,series:Dt,timeRange:Rt,showLines:Ft,showBars:At,showPoints:Qt,isStacked:Xt,lineWidth:Zt,timeZone:tn,onHorizontalRegionSelected:pn}=this.props;if(!xt)return;const bn=xt/100,vn=Rt.from.valueOf(),_n=Rt.to.valueOf(),ua=this.getYAxes(Dt),$a={legend:{show:!1},series:{stack:Xt,lines:{show:Ft,lineWidth:Zt,zero:!1},points:{show:Qt,fill:1,fillColor:!1,radius:2},bars:{show:At,fill:1,barWidth:At?this.getBarWidth()/1.5:1,zero:!1,lineWidth:Zt},shadowSize:0},xaxis:{timezone:tn,show:!0,mode:"time",min:vn,max:_n,label:"Datetime",ticks:bn,timeformat:yi(bn,vn,_n),tickFormatter:Bo},yaxes:ua,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:pn?"x":null,color:"#666"},crosshair:{mode:"x"}};try{mi().plot(this.element,Dt.filter(ba=>ba.isVisible),$a)}catch(ba){throw console.error("Graph rendering error",ba,$a,Dt),new Error("Error rendering panel")}}render(){const{ariaLabel:xt,height:Dt,width:Rt,series:Ft}=this.props,At=Ft.length===0,Qt=this.renderTooltip(),Xt=this.renderContextMenu();return(0,o.jsxs)("div",{className:"graph-panel","aria-label":xt,children:[(0,o.jsx)("div",{className:"graph-panel__chart",ref:Zt=>this.element=Zt,style:{height:Dt,width:Rt},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),At&&(0,o.jsx)("div",{className:"datapoints-warning",children:"No data"}),Qt,Xt]})}}const lc=null,Pi=(ct,xt=!1,Dt=!1)=>{const Rt=ct.reduce((At,Qt)=>At+(Qt[1]||0),0)===0,Ft=!ct.reduce((At,Qt)=>At&&Qt[1]!==null,!0);return xt&&Ft||Dt&&Rt},jl=ct=>{const{series:xt,timeRange:Dt,width:Rt,height:Ft,showBars:At,showLines:Qt,showPoints:Xt,sortLegendBy:Zt,sortLegendDesc:tn,legendDisplayMode:pn,legendVisibility:bn,placement:vn,onSeriesToggle:_n,onToggleSort:ua,hideEmpty:$a,hideZero:ba,isStacked:ha,lineWidth:za,onHorizontalRegionSelected:ys,timeZone:ts,children:Is,ariaLabel:la}=ct,{graphContainer:Vn,wrapper:Da,legendContainer:qt}=(0,I.of)(Bl,ct.placement),fa=xt.reduce((La,xa)=>Pi(xa.data,$a,ba)?La:La.concat([{label:xa.label,color:xa.color||"",disabled:!xa.isVisible,yAxis:xa.yAxis.index,getDisplayValues:()=>xa.info||[]}]),[]);return(0,o.jsxs)("div",{className:Da,"aria-label":la,children:[(0,o.jsx)("div",{className:Vn,children:(0,o.jsx)(Ei,{series:xt,timeRange:Dt,timeZone:ts,showLines:Qt,showPoints:Xt,showBars:At,width:Rt,height:Ft,isStacked:ha,lineWidth:za,onHorizontalRegionSelected:ys,children:Is})}),bn&&(0,o.jsx)("div",{className:qt,children:(0,o.jsx)(Ee.E,{hideHorizontalTrack:!0,children:(0,o.jsx)(dn.t,{items:fa,displayMode:pn,placement:vn,sortBy:Zt,sortDesc:tn,onLabelClick:(La,xa)=>{_n&&_n(La.label,xa)},onToggleSort:ua})})})]})},Bl=(ct,xt)=>({wrapper:(0,M.css)({display:"flex",flexDirection:xt==="bottom"?"column":"row"}),graphContainer:(0,M.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,M.css)({padding:"10px 0",maxHeight:xt==="bottom"?"35%":"none"})});class uo extends g.Component{constructor(xt){super(xt),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:xt.series}}componentDidUpdate(xt){const{series:Dt}=this.props;(0,G.isEqual)(xt.series,Dt)||this.setState({hiddenSeries:[],toggledSeries:Dt})}onSeriesToggle(xt,Dt){const{series:Rt,onHiddenSeriesChanged:Ft}=this.props,{hiddenSeries:At}=this.state;if(Dt.ctrlKey||Dt.metaKey||Dt.shiftKey){const tn=At.indexOf(xt)>-1?At.filter(bn=>bn!==xt):At.concat([xt]),pn=Rt.map(bn=>({...bn,isVisible:tn.indexOf(bn.label)===-1}));this.setState({hiddenSeries:tn,toggledSeries:pn},()=>Ft?Ft(tn):void 0);return}const Qt=Rt.map(tn=>tn.label),Xt=At.length+1===Qt.length?[]:(0,G.difference)(Qt,[xt]),Zt=Rt.map(tn=>({...tn,isVisible:Xt.indexOf(tn.label)===-1}));this.setState({hiddenSeries:Xt,toggledSeries:Zt},()=>Ft?Ft(Xt):void 0)}render(){const{children:xt}=this.props,{toggledSeries:Dt}=this.state;return xt({onSeriesToggle:this.onSeriesToggle,toggledSeries:Dt})}}var fr=e(64423),Ur=e(99165),Nr=e(36638),Er=e(57866),ws=e(95004),bi=e(57852),Di=e(32899),Bs=e(36192),Pr=e(8721);const Ci={threshold:(ct,xt,Dt)=>ct+Dt,midpoint:(ct,xt,Dt)=>(ct+xt)/2,plusone:(ct,xt,Dt)=>ct+1};function Wo(ct){if(ct.frame.length===0)return ct.frame;let xt=!0,{frame:Dt,refFieldName:Rt,refFieldPseudoMax:Ft,refFieldPseudoMin:At,insertMode:Qt}=ct;Qt||(Qt=Ci.threshold);const Xt=Ko(Dt,Rt);if(Xt==null)return Dt;Xt.state={...Xt.state,nullThresholdApplied:!0};const Zt=Dt.fields.map(pn=>pn.config.custom?.insertNulls||Xt.config.interval||null),tn=new Set(Zt);if(tn.delete(null),tn.size===0)return Dt;if(tn.size===1){const pn=tn.values().next().value;if(!pn||pn<=0)return Dt;const bn=Xt.values,vn=Dt.fields.map(ua=>ua.values),_n=Ul(bn,vn,pn,At,Ft,Qt,xt);return _n===vn?Dt:{...Dt,length:_n[0].length,fields:Dt.fields.map((ua,$a)=>({...ua,values:_n[$a]}))}}return Dt}function Ul(ct,xt,Dt,Rt=null,Ft=null,At,Qt){const Xt=ct.length,Zt=[];if(Rt!=null&&Rt<ct[0]){let vn=Math.ceil((ct[0]-Rt)/Dt),_n=ct[0]-vn*Dt;for(;_n<ct[0];)Zt.push(At(_n-Dt,_n,Dt)),_n+=Dt}Zt.push(ct[0]);let tn=ct[0];for(let vn=1;vn<Xt;vn++){const _n=ct[vn];for(;_n-tn>Dt&&(Zt.push(At(tn,_n,Dt)),tn+=Dt,!!Qt););Zt.push(_n),tn=_n}if(Ft!=null&&Ft>tn)for(;tn+Dt<Ft;)Zt.push(At(tn,Ft,Dt)),tn+=Dt;const pn=Zt.length;if(pn===Xt)return xt;const bn=[];for(let vn of xt){let _n;if(vn!==ct){_n=Array(pn);for(let ua=0,$a=0;ua<pn;ua++)_n[ua]=ct[$a]===Zt[ua]?vn[$a++]:null}else _n=Zt;bn.push(_n)}return bn}function Nl(ct,xt,Dt){let Rt,Ft;for(let At=0;At<xt.length;At++)if(xt[At]==null)Ft==null&&Rt!=null&&(Ft=At);else{if(Ft!=null){if(ct[At]-Rt<Dt)for(;Ft<At;)xt[Ft++]=void 0;Ft=null}Rt=ct[At]}return xt}function Fo(ct){return ct.type===ws.PU.number&&ct.config.custom?.drawStyle===aa.GR.Bars&&!ct.config.custom?.hideFrom?.viz}function Ko(ct,xt){return ct.fields.find(Dt=>xt!=null?Dt.name===xt:Dt.type===ws.PU.time)}function Ti(ct,xt){const Dt=Ko(ct,xt);let Rt=Dt?.values;for(let Ft=0;Ft<ct.fields.length;Ft++){let At=ct.fields[Ft];if(At===Dt||Fo(At))continue;let Qt=At.config.custom?.spanNulls;typeof Qt=="number"&&Qt!==-1&&Rt&&(At.values=Nl(Rt,At.values,Qt))}return ct}function Si(ct,xt,Dt){let Rt;e:for(let Xt of ct)for(let Zt of Xt.fields)if(xt.x(Zt,Xt,ct)){Rt=Zt;break e}ct=ct.map(Xt=>Rt?.state?.nullThresholdApplied?Xt:Wo({frame:Xt,refFieldName:Rt.name,refFieldPseudoMin:Dt?.from.valueOf(),refFieldPseudoMax:Dt?.to.valueOf()}));let Ft=0;ct.forEach(Xt=>{Xt.fields.forEach(Zt=>{Fo(Zt)&&(Zt.config.custom={...Zt.config.custom,spanNulls:-1},Ft++)})});let At=1/0;Ft>1&&ct.forEach(Xt=>{if(!Xt.fields.some(Fo))return;const Zt=Rt.values;for(let tn=0;tn<Zt.length;tn++)tn>0&&(At=Math.min(At,Zt[tn]-Zt[tn-1]))});let Qt=(0,Pr.Fd)({frames:ct,joinBy:xt.x,keep:xt.y,keepOriginIndices:!0});return Qt?(Qt=Ti(Qt,Rt.name),At!==1/0&&(Qt.fields.forEach((Xt,Zt)=>{let tn=Xt.values;if(Zt===0){let pn=tn[tn.length-1];tn.push(pn+At,pn+2*At)}else Fo(Xt)?tn.push(null,null):tn.push(void 0,void 0)}),Qt.length+=2),Qt):null}function wo(ct,xt){const Rt=`${ct.min!==void 0?ct.min:"na"}-${ct.max!==void 0?ct.max:"na"}`,Ft=`${ct.custom?.axisSoftMin!==void 0?ct.custom.axisSoftMin:"na"}-${ct.custom?.axisSoftMax!==void 0?ct.custom.axisSoftMax:"na"}`,At=`${ct.custom?.axisPlacement!==void 0?ct.custom?.axisPlacement:aa.vM.Auto}`,Qt=ct.unit??fi.s,Xt=ct.custom?.scaleDistribution?Mi(ct.custom.scaleDistribution):aa.L4.Linear,Zt=ct.custom?.axisLabel?ct.custom.axisLabel:"na";return`${Qt}/${Rt}/${Ft}/${At}/${Xt}/${Zt}/${xt}`}function Mi(ct){return ct.type===aa.L4.Log?`${ct.type}${ct.log}`:ct.type}function Wl(ct,xt,Dt=[]){for(const Rt of Dt)if(typeof Rt=="function"){if(!Rt(ct,xt))return!1}else if(xt[Rt]!==ct[Rt])return!1;return!0}class br extends g.Component{constructor(xt){super(xt),this.panelContext={},this.subscription=new fr.yU,this.getTimeRange=()=>this.props.timeRange;let Dt=this.prepState(xt);Dt.alignedData=Dt.config.prepData([Dt.alignedFrame]),this.state=Dt,this.plotInstance=g.createRef()}static{this.contextType=Rn.e4}prepState(xt,Dt=!0){let Rt=null;const{frames:Ft,fields:At,preparePlotFrame:Qt}=xt,Zt=(Qt||Si)(Ft,At||{x:Nr.sJ.get(Er.Ct.firstTimeField).get({}),y:Nr.sJ.get(Er.Ct.byTypes).get(new Set([ws.PU.number,ws.PU.enum]))},xt.timeRange);if((0,Bs.uY)("GraphNG",!1,"data aligned",Zt),Zt){let tn=this.state?.config;Dt&&(tn=xt.prepConfig(Zt,this.props.frames,this.getTimeRange),(0,Bs.uY)("GraphNG",!1,"config prepared",tn)),Rt={alignedFrame:Zt,config:tn},(0,Bs.uY)("GraphNG",!1,"data prepared",Rt.alignedData)}return Rt}handleCursorUpdate(xt){const Dt=xt.payload?.point?.time,Rt=this.plotInstance.current;if(Rt&&Dt){const Ft=Rt.valToPos(Dt,"x");let At;if(Ft&&(At=(0,Bs.sw)(Rt,Rt.posToIdx(Ft))),!At||!Ft)return;Rt.setCursor({left:Ft,top:At})}}componentDidMount(){this.panelContext=this.context;const{eventBus:xt}=this.panelContext;this.subscription.add(xt.getStream(bi.b_).pipe((0,Ur.c)(50)).subscribe({next:Dt=>{xt!==Dt.origin&&this.handleCursorUpdate(Dt)}})),this.subscription.add(xt.getStream(Di.kb).pipe((0,Ur.c)(50)).subscribe({next:Dt=>this.handleCursorUpdate(Dt)})),this.subscription.add(xt.getStream(bi.ql).pipe((0,Ur.c)(50)).subscribe({next:()=>{const Dt=this.plotInstance?.current;Dt&&!Dt.cursor._lock&&Dt.setCursor({left:-10,top:-10})}}))}componentDidUpdate(xt){const{frames:Dt,structureRev:Rt,timeZone:Ft,propsToDiff:At}=this.props,Qt=!Wl(xt,this.props,At);if(Dt!==xt.frames||Qt||Ft!==xt.timeZone){let Xt=this.prepState(this.props,!1);Xt&&((this.state.config===void 0||Ft!==xt.timeZone||Rt!==xt.structureRev||!Rt||Qt)&&(Xt.config=this.props.prepConfig(Xt.alignedFrame,this.props.frames,this.getTimeRange),(0,Bs.uY)("GraphNG",!1,"config recreated",Xt.config)),Xt.alignedData=Xt.config.prepData([Xt.alignedFrame]),this.setState(Xt))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:xt,height:Dt,children:Rt,renderLegend:Ft}=this.props,{config:At,alignedFrame:Qt,alignedData:Xt}=this.state;return At?(0,o.jsx)(Xn.KU,{width:xt,height:Dt,legend:Ft(At),children:(Zt,tn)=>(0,o.jsx)(ci.Z,{config:At,data:Xt,width:Zt,height:tn,plotRef:pn=>this.plotInstance.current=pn,children:Rt?Rt(At,Qt):null})}):null}}var Oi=e(36613),Wr=e(11576),Vo=e(76637),ho=e(64394),Fr=e(84229),Ri=e(66650);const fo=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),$o=Array(53);for(let ct=0;ct<$o.length;ct++)$o[ct]=2**ct;const we=(ct,xt=1)=>ct==null?"-":ct.toFixed(xt),Te={drawStyle:aa.GR.Line,showPoints:aa.yL.Auto,axisPlacement:aa.vM.Auto},He=({frame:ct,theme:xt,timeZones:Dt,getTimeRange:Rt,sync:Ft,allFrames:At,renderers:Qt,tweakScale:Xt=tn=>tn,tweakAxis:Zt=tn=>tn})=>{const tn="__global_",pn=new li.e(Dt[0]);let bn;pn.setPrepData(la=>(bn=la[0],(0,Bs.bq)(la[0],pn.getStackingGroups())));const vn=ct.fields[0];if(!vn)return pn;const _n="x";let ua="";const $a=vn.config.custom?.axisPlacement!==aa.vM.Hidden?aa.vM.Bottom:aa.vM.Hidden,ba=vn.config.custom?.axisPlacement!==aa.vM.Hidden;if(vn.type===ws.PU.time){pn.addScale({scaleKey:_n,orientation:aa.Lt.Horizontal,direction:aa.ON.Right,isTime:!0,range:()=>{const Vn=Rt();return[Vn.from.valueOf(),Vn.to.valueOf()]}});const la=Dt.length>1?(Vn,Da)=>Da.map((qt,fa)=>fa<2?null:qt):void 0;for(let Vn=0;Vn<Dt.length;Vn++){const Da=Dt[Vn];pn.addAxis({scaleKey:_n,isTime:!0,placement:$a,show:ba,label:vn.config.custom?.axisLabel,timeZone:Da,theme:xt,grid:{show:Vn===0&&vn.config.custom?.axisGridShow},filter:la})}Dt.length>1&&pn.addHook("drawAxes",Vn=>{Vn.ctx.save(),Vn.ctx.fillStyle=xt.colors.text.primary,Vn.ctx.textAlign="left",Vn.ctx.textBaseline="bottom";let Da=0;Vn.axes.forEach(qt=>{if(qt.side===2){let fa=qt._pos+qt._size;Vn.ctx.fillText(Dt[Da],Vn.bbox.left,fa*Oi.A.pxRatio),Da++}}),Vn.ctx.restore()})}else pn.addScale({scaleKey:_n,orientation:aa.Lt.Horizontal,direction:aa.ON.Right,range:(la,Vn,Da)=>[vn.config.min??Vn,vn.config.max??Da]}),pn.addAxis({scaleKey:_n,placement:$a,show:ba,label:vn.config.custom?.axisLabel,theme:xt,grid:{show:vn.config.custom?.axisGridShow},formatValue:(la,Vn)=>(0,Js.cN)(vn.display(la,Vn))});let ha=Qt?.flatMap(la=>Object.values(la.fieldMap).filter(Vn=>la.indicesOnly.indexOf(Vn)===-1))??[],za;for(let la=1;la<ct.fields.length;la++){const Vn=ct.fields[la],Da={...Vn.config,custom:{...Te,...Vn.config.custom}},qt=Da.custom;if(Vn===vn||Vn.type!==ws.PU.number&&Vn.type!==ws.PU.enum)continue;let fa=Vn.display??we;Vn.config.custom?.stacking?.mode===aa.gs.Percent&&(fa=(0,Wr.J)({field:{...Vn,config:{...Vn.config,unit:"percentunit"}},theme:xt}));const La=wo(Da,Vn.type),xa=(0,Vo.Qi)(Vn),Qa=(0,Vo.lz)(Vn,xt).color;if(pn.addScale(Xt({scaleKey:La,orientation:aa.Lt.Vertical,direction:aa.ON.Up,distribution:qt.scaleDistribution?.type,log:qt.scaleDistribution?.log,linearThreshold:qt.scaleDistribution?.linearThreshold,min:Vn.config.min,max:Vn.config.max,softMin:qt.axisSoftMin,softMax:qt.axisSoftMax,centeredZero:qt.axisCenteredZero,range:qt.stacking?.mode===aa.gs.Percent?(ls,qs,Pn)=>(qs=qs<0?-1:0,Pn=Pn>0?1:0,[qs,Pn]):Vn.type===ws.PU.enum?(ls,qs,Pn)=>[-1,Vn.config.type.enum.text.length]:void 0,decimals:Vn.config.decimals},Vn)),ua||(ua=La),qt.axisPlacement!==aa.vM.Hidden){let ls;qt.axisColorMode===aa.Y$.Series&&(xa.isByValue&&Vn.config.custom?.gradientMode===aa.on.Scheme&&xa.id===ho.Y.Thresholds?ls=(0,Ri.pl)(1,xt,xa,Vn.config.thresholds):ls=Qa);const qs={border:{show:qt.axisBorderShow||!1,width:1/devicePixelRatio,stroke:ls||xt.colors.text.primary},ticks:{show:qt.axisBorderShow||!1,stroke:ls||xt.colors.text.primary},color:ls||xt.colors.text.primary};let Pn,cs,xs;if(fo.has(Da.unit))Pn=$o;else if(Vn.type===ws.PU.enum){let Ns=Vn.config.type.enum.text;xs=Ns.map((Qs,er)=>er),cs=Ns}pn.addAxis(Zt({scaleKey:La,label:qt.axisLabel,size:qt.axisWidth,placement:qt.axisPlacement??aa.vM.Auto,formatValue:(Ns,Qs)=>(0,Js.cN)(fa(Ns,Qs)),theme:xt,grid:{show:qt.axisGridShow},decimals:Vn.config.decimals,distr:qt.scaleDistribution?.type,splits:xs,values:cs,incrs:Pn,...qs},Vn))}const Ma=qt.drawStyle===aa.GR.Points?aa.yL.Always:qt.showPoints;let Ds=()=>null;qt.spanNulls!==!0&&(Ds=(ls,qs,Pn,cs)=>{let xs=[],Ns=ls.series[qs];if(!Pn&&cs&&cs.length){const[Qs,er]=Ns.idxs,_a=ls.data[0],yo=ls.data[qs],wa=Math.round(ls.valToPos(_a[Qs],"x",!0)),wr=Math.round(ls.valToPos(_a[er],"x",!0));cs[0][0]===wa&&xs.push(Qs);for(let tr=0;tr<cs.length;tr++){let uc=cs[tr],hc=cs[tr+1];if(hc&&uc[1]===hc[0]){let xo=ls.posToIdx(uc[1],!0);if(yo[xo]==null)for(let Eo=1;Eo<100;Eo++){if(yo[xo+Eo]!=null){xo+=Eo;break}if(yo[xo-Eo]!=null){xo-=Eo;break}}xs.push(xo)}}cs[cs.length-1][1]===wr&&xs.push(er)}return xs.length?xs:null});let{fillOpacity:Us}=qt,ir=null,Zs=null;if(Vn.state?.origin){za||(za=at(ct,At));const ls=At[Vn.state.origin.frameIndex],qs=ls?.fields[Vn.state.origin.fieldIndex],Pn=(0,rr.Ct)(qs??Vn,ls,At);if(ha.indexOf(Pn)>=0)ir=()=>null,Zs=()=>{};else if(qt.transform===aa.NU.Constant){const cs=Oi.A.paths.linear();ir=(xs,Ns)=>{const Qs=xs._data,er=Rt();let _a=[er.from.valueOf(),er.to.valueOf()],yo=Qs[Ns].find(tr=>tr!=null),wa=[yo,yo],wr=Qs.slice();return wr[0]=_a,wr[Ns]=wa,cs({...xs,_data:wr},Ns,0,1)}}if(qt.fillBelowTo){const cs=ct.fields.find(er=>qt.fillBelowTo===er.name||qt.fillBelowTo===er.config?.displayNameFromDS||qt.fillBelowTo===(0,rr.Ct)(er,ct,At)),xs=cs?(0,rr.Ct)(cs,ct,At):qt.fillBelowTo,Ns=za.get(Pn),Qs=za.get(xs);(0,G.isNumber)(Qs)&&(0,G.isNumber)(Ns)?(pn.addBand({series:[Ns,Qs],fill:void 0}),Us||(Us=35)):Us=0}}let Li;xa.id===ho.Y.Thresholds&&(Li=ls=>(0,Vo.lz)(bn.fields[ls],xt).color),pn.addSeries({pathBuilder:ir,pointsBuilder:Zs,scaleKey:La,showPoints:Ma,pointsFilter:Ds,colorMode:xa,fillOpacity:Us,theme:xt,dynamicSeriesColor:Li,drawStyle:qt.drawStyle,lineColor:qt.lineColor??Qa,lineWidth:qt.lineWidth,lineInterpolation:qt.lineInterpolation,lineStyle:qt.lineStyle,barAlignment:qt.barAlignment,barWidthFactor:qt.barWidthFactor,barMaxWidth:qt.barMaxWidth,pointSize:qt.pointSize,spanNulls:qt.spanNulls||!1,show:!qt.hideFrom?.viz,gradientMode:qt.gradientMode,thresholds:Da.thresholds,hardMin:Vn.config.min,hardMax:Vn.config.max,softMin:qt.axisSoftMin,softMax:qt.axisSoftMax,dataFrameFieldIndex:Vn.state?.origin}),qt.thresholdsStyle&&Da.thresholds&&(qt.thresholdsStyle.mode??aa.Ly.Off)!==aa.Ly.Off&&pn.addThresholds({config:qt.thresholdsStyle,thresholds:Da.thresholds,scaleKey:La,theme:xt,hardMin:Vn.config.min,hardMax:Vn.config.max,softMin:qt.axisSoftMin,softMax:qt.axisSoftMax})}let ys=(0,Bs.ro)(ct);pn.setStackingGroups(ys),Qt?.forEach(la=>{za||(za=at(ct,At));let Vn={};for(let Da in la.fieldMap){let qt=la.fieldMap[Da];Vn[Da]=za.get(qt)}la.init(pn,Vn)}),pn.scaleKeys=[_n,ua];const ts=15;let Is={dataIdx:(la,Vn,Da,qt)=>{let fa=la.data[Vn];if(fa[Da]==null){let La=null,xa=null,ln;for(ln=Da;La==null&&ln-- >0;)fa[ln]!=null&&(La=ln);for(ln=Da;xa==null&&ln++<fa.length;)fa[ln]!=null&&(xa=ln);let Qa=la.data[0],Ma=la.valToPos(qt,"x"),Ds=xa==null?1/0:la.valToPos(Qa[xa],"x"),Us=La==null?-1/0:la.valToPos(Qa[La],"x"),ir=Ma-Us,Zs=Ds-Ma;ir<=Zs?ir<=ts&&(Da=La):Zs<=ts&&(Da=xa)}return Da}};return Ft&&Ft()!==Fr.y.Off&&(Is.sync={key:tn,scales:[_n,null]}),pn.setCursor(Is),pn};function at(ct,xt){const Dt=new Map;return ct.fields.forEach((Rt,Ft)=>{const At=Rt.state?.origin;if(At){const Qt=xt[At.frameIndex]?.fields[At.fieldIndex];Qt&&Dt.set((0,rr.Ct)(Qt,xt[At.frameIndex],xt),Ft)}}),Dt}const yt=["legend","options","theme"];class Ct extends g.Component{constructor(){super(...arguments),this.prepConfig=(xt,Dt,Rt)=>{const{sync:Ft}=this.context,{theme:At,timeZone:Qt,renderers:Xt,tweakAxis:Zt,tweakScale:tn}=this.props;return He({frame:xt,theme:At,timeZones:Array.isArray(Qt)?Qt:[Qt],getTimeRange:Rt,sync:Ft,allFrames:Dt,renderers:Xt,tweakScale:tn,tweakAxis:Zt})},this.renderLegend=xt=>{const{legend:Dt,frames:Rt}=this.props;return!xt||Dt&&!Dt.showLegend||!(0,jr.t)(xt,Rt)?null:(0,o.jsx)(jr.$,{data:Rt,config:xt,...Dt})}}static{this.contextType=Rn.e4}render(){return(0,o.jsx)(br,{...this.props,prepConfig:this.prepConfig,propsToDiff:yt,renderLegend:this.renderLegend})}}const Mt=(0,I.cV)(Ct);Mt.displayName="TimeSeries";const Nt=(0,g.createContext)({}),Gt=()=>{const{data:ct,dimFields:xt,mapSeriesIndexToDataFrameFieldIndex:Dt}=(0,g.useContext)(Nt),Rt=(0,g.useCallback)(()=>{const Ft=xt.x;let At=null;for(let Qt=0;Qt<ct.fields.length;Qt++)if(Ft(ct.fields[Qt],ct,[ct])){At=ct.fields[Qt];break}return At},[ct,xt]);return{dimFields:xt,mapSeriesIndexToDataFrameFieldIndex:Dt,getXAxisField:Rt,alignedData:ct}},un=5,yn=ct=>ct!=null&&!ct.ctrlKey&&!ct.metaKey,Wn=({onZoom:ct,config:xt,withZoomY:Dt=!1})=>((0,g.useLayoutEffect)(()=>{let Rt=!1,Ft=!1;Dt&&xt.addHook("init",At=>{At.over.addEventListener("mousedown",Qt=>{if(yn(Qt)&&Qt.button===0&&Qt.shiftKey){Ft=!0,At.cursor.drag.x=!1,At.cursor.drag.y=!0;let Xt=Zt=>{At.cursor.drag.x=!0,At.cursor.drag.y=!1,document.removeEventListener("mouseup",Xt,!0)};document.addEventListener("mouseup",Xt,!0)}},!0)}),xt.addHook("setSelect",At=>{const Qt=At.scales.x.ori===0;if(yn(At.cursor.event)){if(Dt&&Ft){if(At.select.height>=un){for(let Xt in At.scales)if(Xt!=="x"){const Zt=Qt?At.posToVal(At.select.top,Xt):At.posToVal(At.select.left+At.select.width,Xt),tn=Qt?At.posToVal(At.select.top+At.select.height,Xt):At.posToVal(At.select.left,Xt);At.setScale(Xt,{min:tn,max:Zt})}Rt=!0}Ft=!1}else if(At.select.width>=un){const Xt=Qt?At.posToVal(At.select.left,"x"):At.posToVal(At.select.top+At.select.height,"x"),Zt=Qt?At.posToVal(At.select.left+At.select.width,"x"):At.posToVal(At.select.top,"x");ct({from:Xt,to:Zt}),Rt=!1}}At.setSelect({left:0,width:0,top:0,height:0},!1)}),xt.setCursor({bind:{dblclick:At=>()=>{if(!yn(At.cursor.event))return null;if(Dt&&Rt){for(let Qt in At.scales)Qt!=="x"&&At.setScale(Qt,{min:null,max:null});Rt=!1}else{let Qt=At.scales.x;const Xt=Qt.min,Zt=Qt.max,tn=(Zt-Xt)/2;ct({from:Xt-tn,to:Zt+tn})}return null}}})},[xt,ct,Dt]),null);var qn=e(1604),na=e(46635);const Kn=10,Qn=({mode:ct=aa.$N.Single,sortOrder:xt=aa.xB.None,sync:Dt,timeZone:Rt,config:Ft,renderTooltip:At,...Qt})=>{const Xt=(0,g.useRef)(),Zt=(0,I.$j)(),[tn,pn]=(0,g.useState)(null),[bn,vn]=(0,g.useState)(null),[_n,ua]=(0,g.useState)([]),[$a,ba]=(0,g.useState)(null),[ha,za]=(0,g.useState)(!1),ys=(0,qn.A)();let ts=null;const Is=(0,I.of)(va);if((0,g.useLayoutEffect)(()=>{let fa;const La=()=>{ys()&&(za(!0),Xt.current?.root.classList.add("plot-active"))},xa=()=>{ys()&&(ba(null),za(!1),Xt.current?.root.classList.remove("plot-active"))};return Ft.addHook("syncRect",(ln,Qa)=>fa=Qa),Ft.addHook("init",ln=>{Xt.current=ln,ln.over.addEventListener("mouseenter",La),ln.over.addEventListener("mouseleave",xa),ts=ln.root.closest("[tabindex]"),ts&&(ts.addEventListener("focus",La),ts.addEventListener("blur",xa)),Dt&&Dt()===Fr.y.Crosshair&&ln.root.classList.add("shared-crosshair")}),Ft.addHook("setLegend",ln=>{ys()&&(vn(ln.legend.idx),ua(ln.legend.idxs.slice()))}),Ft.addHook("setCursor",ln=>{if(!fa||!ys())return;const{x:Qa,y:Ma}=Aa(ln,fa);ba(Qa!==void 0&&Ma!==void 0?{x:Qa,y:Ma}:null)}),Ft.addHook("setSeries",(ln,Qa)=>{ys()&&pn(Qa)}),()=>{ba(null),Xt.current&&(Xt.current.over.removeEventListener("mouseleave",xa),Xt.current.over.removeEventListener("mouseenter",La),ts&&(ts.removeEventListener("focus",La),ts.removeEventListener("blur",xa)))}},[Ft,ba,za,vn,ua]),bn===null||!ha&&Dt&&Dt()===Fr.y.Crosshair)return null;let la=Qt.data.fields[0];if(!la)return null;const Vn=la.display||(0,Wr.J)({field:la,timeZone:Rt,theme:Zt});let Da=null,qt=Vn(la.values[bn]).text;if(At)Da=At(Qt.data,tn,bn);else{if(ct===aa.$N.Single&&tn!==null){const fa=Qt.data.fields[tn];if(!fa)return null;const La=_n?.[tn]??bn;qt=Vn(la.values[La]).text;const ln=(fa.display||(0,Wr.J)({field:fa,timeZone:Rt,theme:Zt}))(fa.values[La]);Da=(0,o.jsx)(Wt.o,{series:[{color:ln.color||ho.F,label:(0,rr.Ct)(fa,Qt.data,Qt.frames),value:ln?(0,Js.cN)(ln):null}],timestamp:qt})}if(ct===aa.$N.Multi){let fa=[];const La=Qt.data,xa=La.fields,ln=[];for(let Qa=0;Qa<xa.length;Qa++){const Ma=La.fields[Qa];if(!Ma||Ma===la||Ma.type===ws.PU.time||Ma.type!==ws.PU.number||Ma.config.custom?.hideFrom?.tooltip||Ma.config.custom?.hideFrom?.viz)continue;const Ds=Qt.data.fields[Qa].values[_n[Qa]],Us=Ma.display(Ds);ln.push(Ds),fa.push({color:Us.color||ho.F,label:(0,rr.Ct)(Ma,La,Qt.frames),value:Us?(0,Js.cN)(Us):null,isActive:tn===Qa})}if(xt!==aa.xB.None){const Qa=[...fa],Ma=na.sortValues(xt);fa.sort((Ds,Us)=>{const ir=Qa.indexOf(Ds),Zs=Qa.indexOf(Us);return Ma(ln[ir],ln[Zs])})}Da=(0,o.jsx)(Wt.o,{series:fa,timestamp:qt})}}return(0,o.jsx)(fe.ZL,{className:ha?Is.tooltipWrapper:void 0,children:Da&&$a&&(0,o.jsx)(Zn.o,{position:{x:$a.x,y:$a.y},offset:{x:Kn,y:Kn},children:Da})})};function ga({left:ct,top:xt},Dt){return ct===void 0||xt===void 0?!1:ct<0||ct>Dt.width||xt<0||xt>Dt.height}function Aa(ct,xt){let Dt,Rt;const Ft=ct.cursor.left||0,At=ct.cursor.top||0;if(ga(ct.cursor,xt)){const Qt=ct.posToIdx(Ft);if(At<0||At>xt.height){let Xt=(0,Bs.sw)(ct,Qt);Xt&&(Rt=xt.top+Xt,Ft>=0&&Ft<=xt.width&&(Dt=xt.left+ct.valToPos(ct.data[0][ct.posToIdx(Ft)],ct.series[0].scale)))}}else Dt=xt.left+Ft,Rt=xt.top+At;return{x:Dt,y:Rt}}const va=ct=>({tooltipWrapper:(0,M.css)({"z-index":ct.zIndex.portal+1+" !important"})});var Na=e(56887),wn=e(53926),Ea=e(97958),Os=e(30360),da=e(8255),Ja=e(75745),ns=e(35458),Xs=e(75254),Dr=e(48542);let Vs=null;function zo(){if(Vs!==null)return Vs;if(typeof document<"u"){const ct=document.createElement("div"),xt={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(xt).map(Dt=>{ct.style[Dt]=xt[Dt]}),document.body.appendChild(ct),Vs=ct.offsetWidth-ct.clientWidth,document.body.removeChild(ct)}else Vs=0;return Vs||0}var as=e(86059),fs=e(36324),ps=e(79104),ms=e(59258),Rs=e(60379),Cr=e(20720),Tr=(ct=>(ct.id="id",ct.title="title",ct.subTitle="subTitle",ct.mainStat="mainStat",ct.secondaryStat="secondaryStat",ct.source="source",ct.target="target",ct.detail="detail__",ct.arc="arc__",ct.color="color",ct))(Tr||{}),po=e(63267);function mo(ct,xt,Dt,Rt){if(ct>xt){const Ft=`[Combobox] Items exceed the recommended amount ${xt}.`;console.warn(Ft,{itemsCount:""+ct,recommendedAmount:""+xt,"aria-labelledby":Rt??"",id:Dt??""})}}var os=e(69884);let bs;const rs=(ct="dark")=>bs?bs(ct):(0,os.a)({colors:{mode:ct}}).v1,Kr=ct=>(bs=ct,()=>{bs=null});var go=e(77345),Ii=e(24726);const $s={"[":"]","{":"}","(":")"},vo="brace_match";function Fl(){return{onKeyDown(ct,xt,Dt){const{value:Rt}=xt;switch(ct.key){case"(":case"{":case"[":{const{start:{offset:Ft,key:At},end:{offset:Qt,key:Xt},focus:{offset:Zt}}=Rt.selection,tn=Rt.focusText.text;if(Rt.selection.isExpanded)return ct.preventDefault(),xt.insertTextByKey(At,Ft,ct.key).insertTextByKey(Xt,Qt+1,$s[ct.key]).moveEndBackward(1),!0;if(Zt===tn.length||tn[Zt]===" "||Object.values($s).includes(tn[Zt])){ct.preventDefault();const pn=$s[ct.key],bn={key:`${vo}-${(0,Ii.A)()}`,type:`${vo}-${pn}`,anchor:{key:At,offset:Ft,object:"point"},focus:{key:Xt,offset:Qt+1,object:"point"},object:"annotation"};return xt.insertText(ct.key).insertText(pn).addAnnotation(bn).moveBackward(1),!0}break}case")":case"}":case"]":{const Ft=Rt.anchorText.text,At=Rt.selection.anchor.offset,Qt=Ft[At],Xt=ct.key,Zt=`${vo}-${Xt}`,tn=Rt.annotations.find(pn=>pn?.type===Zt&&pn.anchor.key===Rt.anchorText.key);if(tn&&Qt===Xt&&!Rt.selection.isExpanded)return ct.preventDefault(),xt.moveFocusForward(1).removeAnnotation(tn).moveAnchorForward(1),!0;break}case"Backspace":{const Ft=Rt.anchorText.text,At=Rt.selection.anchor.offset,Qt=Ft[At-1],Xt=Ft[At];if($s[Qt]&&$s[Qt]===Xt)return ct.preventDefault(),xt.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return Dt()}}}var cc=e(16123),Wc=e(54024),Fc=e(52513),Kc=e(21266),Ai=e(59490),wc=e(91272),Vc=e(56103),dc=e(93427);const $c={SecretFormField:Q.L,FormField:s.z,Select:R,AsyncSelect:O,IndicatorsContainer:c,NoOptionsMessage:h,Input:d.p,Switch:K}},707:(ne,j,e)=>{"use strict";e.d(j,{YR:()=>g,wh:()=>v});var n=e(65307),a=e(27489),s=e(90811),d=e(62635),o=e(6219),l=e(52763),i=e(10951),c=e(51845),p=e(19050),h=e(94543),u=e(83953);const r=(0,n.VP)("explore/updateDatasourceInstance"),v=(0,l.zD)("explore/changeDatasource",async({datasource:E,exploreId:x,options:m},{getState:y,dispatch:b})=>{const D=y().user.orgId,{history:f,instance:C}=await(0,u.BE)(D,E),P=y().explore.panes[x].datasourceInstance;(0,a.rR)("explore_change_ds",{from:(P?.meta?.mixed?"mixed":P?.type)||"unknown",to:C.meta.mixed?"mixed":C.type,exploreId:x}),b(r({exploreId:x,datasourceInstance:C,history:f}));const T=y().explore.panes[x].queries,M=(0,u.dq)(C.uid,T),I=await(0,o.J6)(M);b((0,c.Fb)({exploreId:x,correlations:I.correlations||[]})),m?.importQueries&&await b((0,p.y2)(x,T,P,C)),y().explore.panes[x].isLive&&b((0,h.hO)({exploreId:x,refreshInterval:s.cC.offOption.value})),m?.importQueries&&b((0,p.Od)({exploreId:x}))}),g=(E,x)=>{if(r.match(x)){const{datasourceInstance:m,history:y}=x.payload;return(0,d._u)(E.querySubscription),{...E,datasourceInstance:m,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,i.Ez)(),queryResponse:(0,u.RA)(),queryKeys:[],history:y}}return E}},873:(ne,j,e)=>{"use strict";e.d(j,{A:()=>s});var n=e(2543),a=e.n(n);class s{constructor(i){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",i){if(i.columns)for(const c of i.columns)this.addColumn(c);if(i.rows)for(const c of i.rows)this.addRow(c)}}sort(i){i.col===null||i.col===void 0||this.columns.length<=i.col||(this.rows.sort((c,p)=>(c=c[i.col],p=p[i.col],+(c==null)-+(p==null)||+(c>p)||-(c<p))),i.desc&&this.rows.reverse(),this.columns[i.col].sort=!0,this.columns[i.col].desc=i.desc)}addColumn(i){this.columnMap[i.text]||(this.columns.push(i),this.columnMap[i.text]=i)}addRow(i){this.rows.push(i)}}function d(l,i,c){let p=!1;for(let h=0;h<l.length;h++)if(i[h]!==void 0&&c[h]!==void 0){if(i[h]!==c[h])return!1}else(i[h]===void 0||c[h]===void 0)&&(p=!0);return p}function o(l,...i){const c=l||new s;if(arguments.length===1)return c;if(arguments.length===2)return c.columns=i[0].hasOwnProperty("columns")?[...i[0].columns]:[],c.rows=i[0].hasOwnProperty("rows")?[...i[0].rows]:[],c;const p=i.filter(x=>!!x.columns),h={},u=p.slice().reduce((x,m)=>(m.columns.forEach(y=>{const{text:b}=y;h[b]===void 0&&(h[b]=x.length,x.push(y))}),x),[]),r=p.map(x=>x.columns.map(m=>h[m.text])),v=p.reduce((x,m,y)=>{const b=r[y];return m.rows.forEach(D=>{const f=[];b.forEach((C,P)=>{f[C]=D[P]}),x.push(f)}),x},[]),g={},E=v.reduce((x,m,y)=>{if(!g[y]){let b=y+1;for(;b<v.length;){const D=findIndex(v,f=>d(u,m,f),b);if(D>-1){const f=v[D];for(let C=0;C<u.length;C++)m[C]===void 0&&f[C]!==void 0&&(m[C]=f[C]);g[D]=f,b=D+1}else break}x.push(m)}return x},[]);return c.columns=u,c.rows=E,c}},882:(ne,j,e)=>{"use strict";e.d(j,{b:()=>o});var n=e(81160),a=e(41119),s=e(64761),d=e(6684);const o={id:s.F.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(i,c)=>p=>p.pipe((0,n.T)(h=>o.transformer(i,c)(h))),transformer:(i,c)=>p=>{const h=l(p);return p.length>1&&h?d.L.transformer({byField:h},c)(p):p}};function l(i){let c;for(const p of i){const{timeField:h}=(0,a.KR)(p);if(!h)return;if(!c)c=h.name;else if(c!==h.name)return}return c}},991:(ne,j,e)=>{"use strict";e.d(j,{y:()=>o});var n=e(74848),a=e(1906),s=e(92745),d=e(99887);const o=({featureState:i,tooltip:c})=>{const p=l(i);return(0,n.jsx)(d.E,{text:p.text,color:p.color,icon:p.icon,tooltip:c})};function l(i){switch(i){case a.Ay.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"};case a.Ay.beta:return{text:"Beta",icon:"rocket",color:"blue"};case a.Ay.experimental:return{text:(0,s.t)("grafana-ui.feature-badge.experimental","Experimental"),icon:"exclamation-triangle",color:"orange"};case a.Ay.preview:return{text:(0,s.t)("grafana-ui.feature-badge.preview","Preview"),icon:"rocket",color:"blue"};case a.Ay.privatePreview:return{text:(0,s.t)("grafana-ui.feature-badge.private-preview","Private preview"),icon:"rocket",color:"blue"};case a.Ay.new:return{text:(0,s.t)("grafana-ui.feature-badge.new","New!"),icon:"rocket",color:"blue"}}}},1027:(ne,j,e)=>{"use strict";e.d(j,{W:()=>a});var n=e(64761);const a={id:n.F.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:s=>d=>d,transformer:s=>d=>d}},1096:(ne,j,e)=>{"use strict";e.d(j,{s:()=>h});var n=e(74848),a=e(22803),s=e(51898),d=e(92745),o=e(63142),l=e(69076),i=e(32442),c=e(68577),p=e(49602);function h({intervals:r,onIntervalsChange:v,onAutoEnabledChange:g,onAutoMinIntervalChanged:E,onAutoCountChanged:x,autoEnabled:m,autoMinInterval:y,autoStepCount:b,inline:D=!1}){const f=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(T=>({label:`${T}`,value:T})),C=(0,o.of)(u),P=f.find(T=>T.value===b)??f[0];return(0,n.jsxs)(n.Fragment,{children:[!D&&(0,n.jsx)(i.Y,{children:(0,n.jsx)(d.x6,{i18nKey:"dashboard-scene.interval-variable-form.interval-options",children:"Interval options"})}),(0,n.jsx)(p._,{defaultValue:r,name:(0,d.t)("dashboard-scene.interval-variable-form.name-values","Values"),placeholder:"1m,10m,1h,6h,1d,7d",onBlur:v,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),(0,n.jsx)(l.c,{value:m,name:(0,d.t)("dashboard-scene.interval-variable-form.name-auto-option","Auto option"),description:(0,d.t)("dashboard-scene.interval-variable-form.description-auto-option","Dynamically calculates interval by dividing time range by the count specified"),onChange:g,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.autoEnabledCheckbox}),m&&(0,n.jsxs)("div",{className:C.autoFields,children:[(0,n.jsx)(c.v,{name:(0,d.t)("dashboard-scene.interval-variable-form.name-step-count","Step count"),description:(0,d.t)("dashboard-scene.interval-variable-form.description-step-count","How many times the current time range should be divided to calculate the value"),value:P,options:f,onChange:x,width:9,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.stepCountIntervalSelect}),(0,n.jsx)(p._,{value:y,name:(0,d.t)("dashboard-scene.interval-variable-form.name-min-interval","Min interval"),description:(0,d.t)("dashboard-scene.interval-variable-form.description-calculated-value-below-threshold","The calculated value will not go below this threshold"),placeholder:"10s",onChange:E,width:11,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.minIntervalInput})]})]})}const u=r=>({autoFields:(0,a.css)({marginTop:r.spacing(2),display:"flex",flexDirection:"column"})})},1131:(ne,j,e)=>{"use strict";e.d(j,{D:()=>W});var n=e(74848),a=e(22803),s=e(92745),d=e(43173),o=e(44248),l=e(63142),i=e(95943),c=e(57455),p=e(33143),h=e(17340),u=e(3371),r=e(1682),v=e(92119),g=e(96691),E=e(25953),x=e(6607),m=e(48492),y=e(1837),b=e(20246),D=e(93389),f=e(87308);const C=8,P=6,T=12,M=8;function I(N){const F=new Set;let G=0;function H(K){for(let w=0;w<K.state.width;w++)for(let Q=0;Q<K.state.height;Q++){const k=`${K.state.x+w},${K.state.y+Q}`;F.add(k),K.state.y+K.state.height>G&&(G=K.state.y+K.state.height)}}for(const K of N.state.children)if(H(K),K instanceof o.tI)for(const w of K.state.children)H(w);for(let K=0;K<1/0;K++){for(let w=0;w<=i.cV-C;w++){let Q=!0;for(let k=0;k<C;k++){for(let te=0;te<P;te++){const q=`${w+k},${K+te}`;if(F.has(q)){Q=!1;break}}if(!Q)break}if(Q)return B(F,{x:w,y:K,width:C,height:P},G)}if(K>G+P)break}return{x:0,y:G,width:T,height:M}}function B(N,F,G){if(F.y>=G)return F.width=T,F.height=M,F;for(let H=F.x+F.width+1;H<=i.cV;H++){let K=!0;for(let w=F.y;w<F.y+F.height;w++){const Q=`${H},${w}`;if(N.has(Q)){K=!1;break}}if(K)F.width=H-F.x;else break}for(let H=F.y+F.height+1;H<=G;H++){let K=!0;if(F.height>=20)break;for(let w=F.x;w<F.x+F.width;w++){const Q=`${w},${H}`;if(N.has(Q)){K=!1;break}}if(K)F.height=H-F.y;else break}return F}var U=e(18178);class W extends o.Bs{constructor(F){super(F),this.isDashboardLayoutManager=!0,this.descriptor=W.descriptor,this.addActivationHandler(()=>this._activationHandler())}static{this.Component=V}static{this.descriptor={get name(){return(0,s.t)("dashboard.default-layout.name","Custom")},get description(){return(0,s.t)("dashboard.default-layout.description","Position and size each panel individually")},id:"GridLayout",createFromLayout:W.createFromLayout,isGridLayout:!0,icon:"window-grid"}}serialize(){return(0,h.SW)(this)}mergeGrid(F){let G=0;for(const w of this.state.grid.state.children){const Q=(w.state.y??0)+(w.state.height??0);Q>G&&(G=Q)}const H=F instanceof W?F.state.grid:W.createFromLayout(F).state.grid,K=[...H.state.children];for(const w of K){const Q=w.state.y??0;w.setState({y:Q+G})}H.setState({children:[]});for(const w of K)w.clearParent();this.state.grid.setState({children:[...this.state.grid.state.children,...K]})}_activationHandler(){d.$.featureToggles.dashboardNewLayouts&&this._subs.add(this.subscribeToEvent(o.V$,({payload:{evt:F,panel:G}})=>(0,v.wP)(this)?.startDraggingSync(F,G))),this._subs.add(this.state.grid.subscribeToState(({children:F},{children:G})=>{F.length===G.length&&this.publishEvent(new p.su(this.state.grid),!0)}))}addPanel(F){const G=r.b4.getNextPanelId(this);if(F.setState({key:(0,v.XA)(G)}),F.clearParent(),d.$.featureToggles.dashboardNewLayouts){const H=I(this.state.grid),K=new D.U({...H,body:F,key:(0,v.ty)(G)});p.cc.addElement({addedObject:F,source:this,perform:()=>{this.state.grid.setState({children:[...this.state.grid.state.children,K]})},undo:()=>{this.state.grid.setState({children:this.state.grid.state.children.filter(w=>w!==K)})}})}else{const H=new D.U({height:v.sw,width:v.vm,x:0,y:0,body:F,key:(0,v.ty)(G)});this.state.grid.setState({children:[H,...this.state.grid.state.children]})}}pastePanel(){const F=I(this.state.grid),G=(0,m.qY)((0,v.YQ)(this),F);d.$.featureToggles.dashboardNewLayouts?p.cc.edit({description:(0,s.t)("dashboard.edit-actions.paste-panel","Paste panel"),addedObject:G.state.body,source:this,perform:()=>{this.state.grid.setState({children:[...this.state.grid.state.children,G]})},undo:()=>{this.state.grid.setState({children:this.state.grid.state.children.filter(H=>H!==G)})}}):this.state.grid.setState({children:[...this.state.grid.state.children,G]}),(0,m.G2)()}removePanel(F){const G=F.parent;if(!(G instanceof D.U))throw new Error("Trying to remove panel that is not inside a DashboardGridItem");const H=this.state.grid;let K;try{K=o.jh.getAncestor(G,o.tI)}catch{K=void 0}if(K){K.setState({children:K.state.children.filter(w=>w!==G)}),H.forceRender();return}if(!d.$.featureToggles.dashboardNewLayouts){H.setState({children:H.state.children.filter(w=>w!==G)});return}p.cc.removeElement({removedObject:G.state.body,source:this,perform:()=>H.setState({children:H.state.children.filter(w=>w!==G)}),undo:()=>H.setState({children:[...H.state.children,G]})})}duplicatePanel(F){const G=F.parent;if(!(G instanceof D.U)){console.error("Trying to duplicate a panel that is not inside a DashboardGridItem");return}let H,K,w;const Q=r.b4.getNextPanelId(this),k=this.state.grid;G instanceof D.U?(H=o.Go.cloneSceneObjectState(G.state.body.state),K=o.jh.getData(G.state.body).clone()):(H=o.Go.cloneSceneObjectState(F.state),K=o.jh.getData(F).clone()),delete K.state.data?.alertState;const te=new o.Eb({...H,$data:K,key:(0,v.XA)(Q)});if(w=new D.U({x:G.state.x,y:G.state.y,height:G.state.height,itemHeight:G.state.height,width:G.state.width,variableName:G.state.variableName,repeatDirection:G.state.repeatDirection,maxPerRow:G.state.maxPerRow,key:(0,v.ty)(Q),body:te}),!d.$.featureToggles.dashboardNewLayouts){if(G.parent instanceof o.tI){const se=G.parent;se.setState({children:[...se.state.children,w]}),k.forceRender();return}k.setState({children:[...k.state.children,w]}),this.publishEvent(new p.jO(te),!0);return}const q=G.parent instanceof o.tI?G.parent:k;p.cc.edit({description:(0,s.t)("dashboard.edit-actions.duplicate-panel","Duplicate panel"),addedObject:w.state.body,source:this,perform:()=>{const se=q.state.children.indexOf(G),re=[...q.state.children];re.splice(se+1,0,w),q.setState({children:re})},undo:()=>{q.setState({children:q.state.children.filter(se=>se!==w)})}})}duplicate(){const F=this.state.grid.state.children,G=F.find(w=>w instanceof D.U),H=[];if(F.length){let w=G?r.b4.getNextPanelId(G.state.body):1;F.forEach(Q=>{if(Q instanceof D.U){const k=Q.clone({key:void 0,body:Q.state.body.clone({key:(0,v.XA)(w)})});H.push(k),w++}else H.push(Q.clone({key:void 0}))})}return this.clone({key:void 0,grid:this.state.grid.clone({key:void 0,children:H})})}getVizPanels(){const F=[];return this.state.grid.forEachChild(G=>{if(!(G instanceof D.U)&&!(G instanceof o.tI))throw new Error("Child is not a DashboardGridItem or SceneGridRow, invalid scene");G instanceof D.U&&G.state.body instanceof o.Eb?F.push(G.state.body):G instanceof o.tI&&G.forEachChild(H=>{H instanceof D.U&&H.state.body instanceof o.Eb&&F.push(H.state.body)})}),F}addNewRow(){const F=r.b4.getNextPanelId(this),G=new o.tI({key:(0,v.XA)(F),title:(0,s.t)("dashboard-scene.default-grid-layout-manager.row.title.row-title","Row title"),actions:new U.u({}),y:0}),H=this.state.grid,K=H.state.children.findIndex(Q=>Q instanceof o.tI),w=H.state.children.splice(0,K===-1?H.state.children.length:K).map(Q=>Q.clone());return w&&G.setState({children:w}),H.setState({children:[G,...H.state.children]}),this.publishEvent(new p.jO(G),!0),G}editModeChanged(F){const G=()=>{this.state.grid.setState({isDraggable:F,isResizable:F}),(0,v.X0)(this.state.grid,!0)};if(d.$.featureToggles.dashboardNewLayouts){setTimeout(G,10);return}G()}activateRepeaters(){this.isActive||this.activate(),this.state.grid.isActive||this.state.grid.activate(),this.state.grid.forEachChild(F=>{if(F instanceof D.U&&!F.isActive){F.activate();return}if(F instanceof o.tI&&F.state.$behaviors){for(const G of F.state.$behaviors)if(G instanceof f.L&&!F.isActive){F.activate();break}F.state.children.forEach(G=>{if(G instanceof D.U&&!G.isActive){G.activate();return}})}})}getOutlineChildren(){const F=[];for(const G of this.state.grid.state.children)G instanceof D.U&&F.push(G.state.body,...G.state.repeatedPanels||[]);return F}cloneLayout(F,G){return this.clone({})}removeRow(F,G=!1){const H=this.state.grid,K=H.state.children.filter(w=>w.state.key!==F.state.key);if(!G){const w=F.state.children.map(k=>k.clone()),Q=H.state.children.findIndex(k=>k.state.key===F.state.key);K.splice(Q,0,...w)}this.publishEvent(new p.ck(F),!0),H.setState({children:K})}collapseAllRows(){this.state.grid.state.children.forEach(F=>{F instanceof o.tI&&(F.state.isCollapsed||this.state.grid.toggleRow(F))})}expandAllRows(){this.state.grid.state.children.forEach(F=>{F instanceof o.tI&&F.state.isCollapsed&&this.state.grid.toggleRow(F)})}static createFromLayout(F){const G=F.getVizPanels(),H=(0,b.DP)((0,v.YQ)(F).state.preload);return W.fromVizPanels(G,H)}static fromVizPanels(F=[],G){const H=[],w=i.cV/3;let Q=0,k=0;for(let te of F){const q=te.parent instanceof E.X?te.parent.state.variableName:void 0;te.clearParent(),H.push(new D.U({key:(0,v.ty)((0,v.Cs)(te)),x:k,y:Q,width:w,height:10,itemHeight:10,body:te,variableName:q})),k+=w,k+w>i.cV&&(k=0,Q+=10)}return new W({grid:new o.hy({children:H,isDraggable:!0,isResizable:!0,isLazy:G})})}static fromGridItems(F,G,H,K){const w=F.reduce((Q,k)=>(k.clearParent(),Q.push(k),Q),[]);return new W({grid:new o.hy({children:w,isDraggable:G,isResizable:H,isLazy:K})})}}function V({model:N}){const{children:F}=(0,o.gn)(N.state.grid,{shouldActivateOrKeepAlive:!0}),G=(0,v.MZ)(N),{isEditing:H}=G.useState(),K=(0,u.bn)(N),w=(0,l.of)(O),Q=H&&d.$.featureToggles.dashboardNewLayouts&&!K;return(0,g.MK)()?F.map(te=>(0,n.jsx)(te.Component,{model:te},te.state.key)):N.parent===G&&F.length===0?(0,n.jsx)(c.A,{dashboard:G,canCreate:!!G.state.meta.canEdit},"dashboard-empty-state"):(0,n.jsxs)("div",{className:(0,a.cx)(w.container,H&&w.containerEditing),children:[N.state.grid.Component&&(0,n.jsx)(N.state.grid.Component,{model:N.state.grid}),Q&&(0,n.jsx)("div",{className:w.actionsWrapper,children:(0,n.jsx)(x.f,{layoutManager:N})})]})}const z=o.tI.Component;o.tI.Component=R;function R({model:N}){return(0,g.MK)()?N.state.children.map(G=>(0,n.jsx)(G.Component,{model:G},G.state.key)):(0,n.jsx)(z,{model:N})}function O(N){return{container:(0,a.css)({width:"100%",display:"flex",flexGrow:1,flexDirection:"column"}),containerEditing:(0,a.css)({"> div:first-child":{flexGrow:"0 !important",minHeight:"250px"},...y.u}),actionsWrapper:(0,a.css)({position:"relative",paddingBottom:N.spacing(5)})}}},1199:(ne,j,e)=>{"use strict";e.d(j,{M:()=>i});var n=e(74848),a=e(22803),s=e(82514),d=e.n(s),o=e(84140),l=e(63142);const i=({oldValue:c,newValue:p,...h})=>{const u=(0,l.$j)(),r={variables:{dark:{diffViewerBackground:u.colors.background.canvas,diffViewerColor:u.colors.text.primary,addedBackground:(0,o.A)(u.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,o.A)(u.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,o.A)(u.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,o.A)(u.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,o.A)(u.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,o.A)(u.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:u.colors.background.primary,gutterBackgroundDark:u.colors.background.primary,highlightBackground:(0,o.A)(u.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,o.A)(u.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:u.colors.background.secondary,codeFoldBackground:u.colors.background.secondary,emptyLineBackground:u.colors.background.secondary,gutterColor:u.colors.text.disabled,addedGutterColor:u.colors.text.primary,removedGutterColor:u.colors.text.primary,codeFoldContentColor:u.colors.text.disabled,diffViewerTitleBackground:u.colors.background.secondary,diffViewerTitleColor:u.colors.text.disabled,diffViewerTitleBorderColor:u.colors.border.strong}},codeFold:{fontSize:u.typography.bodySmall.fontSize},gutter:{pre:{color:(0,o.A)(u.colors.text.disabled).setAlpha(1).toString(),opacity:.61}}};return(0,n.jsx)("div",{className:(0,a.css)({fontSize:u.typography.bodySmall.fontSize,pre:{all:"revert"}}),children:(0,n.jsx)(d(),{styles:r,oldValue:c,newValue:p,splitView:!1,compareMethod:s.DiffMethod.CSS,useDarkTheme:u.isDark,...h})})}},1302:(ne,j,e)=>{"use strict";e.d(j,{$u:()=>u,Ay:()=>E,Cj:()=>c,EC:()=>h,Y_:()=>i,dJ:()=>r,g4:()=>p,jE:()=>v,t_:()=>o});var n=e(65307),a=e(65642);const s={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,externalUserMngInfo:a.Ay.externalUserMngInfo,externalUserMngLinkName:a.Ay.externalUserMngLinkName,externalUserMngLinkUrl:a.Ay.externalUserMngLinkUrl,isLoading:!1,rolesLoading:!1},d=(0,n.Z0)({name:"users",initialState:s,reducers:{usersLoaded:(x,m)=>{const{totalCount:y,perPage:b,page:D,orgUsers:f}=m.payload,C=Math.ceil(y/b);return{...x,isLoading:!0,users:f,perPage:b,page:D,totalPages:C}},searchQueryChanged:(x,m)=>({...x,searchQuery:m.payload,page:s.page}),setUsersSearchPage:(x,m)=>({...x,page:m.payload}),pageChanged:(x,m)=>({...x,page:m.payload}),sortChanged:(x,m)=>({...x,sort:m.payload}),usersFetchBegin:x=>({...x,isLoading:!0}),usersFetchEnd:x=>({...x,isLoading:!1}),rolesFetchBegin:x=>({...x,rolesLoading:!0}),rolesFetchEnd:x=>({...x,rolesLoading:!1})}}),{searchQueryChanged:o,setUsersSearchPage:l,usersLoaded:i,usersFetchBegin:c,usersFetchEnd:p,pageChanged:h,sortChanged:u,rolesFetchBegin:r,rolesFetchEnd:v}=d.actions,E={users:d.reducer}},1404:(ne,j,e)=>{"use strict";e.d(j,{Ih:()=>a,Lr:()=>o,U7:()=>s,dr:()=>d,fE:()=>l});var n=e(39796);function a(i){const c=["refId","hide","key","queryType","datasource"];for(const p in i)if(p!=="label"&&!c.includes(p))return!1;return!0}function s(i,c,p){const h={...c,refId:(0,n.M)(i),hide:!1};return!h.datasource&&p&&(h.datasource=p),[...i,h]}function d(i){return i.indexOf("api/datasources/proxy")!==-1||i.indexOf("api/ds/query")!==-1}function o(i){return!i.match(/^http/)}function l(i){return i||void 0}},1487:(ne,j,e)=>{"use strict";e.d(j,{H:()=>s,J:()=>d});var n=e(78012);const a="grafana.alerting.previewToggles";function s(o){return n.M.getObject(a,{})[o]}function d(o,l){const i=n.M.getObject(a,{});i[o]=l,n.M.setObject(a,i)}},1506:(ne,j,e)=>{"use strict";e.d(j,{L:()=>c});var n=e(74848),a=e(22803),s=e(51898),d=e(92745),o=e(50201),l=e(89640),i=e(63142);function c({entity:h="Page"}){const u=(0,i.of)(p),r=h.toLowerCase();return(0,n.jsx)("div",{className:u.container,"data-testid":s.Tp.components.EntityNotFound.container,children:(0,n.jsx)(o.p,{message:`${h} not found`,variant:"not-found",children:(0,n.jsxs)(d.x6,{i18nKey:"entity-not-found.description",children:["We're looking but can't seem to find this ",{lowerCaseEntity:r},". Try returning"," ",(0,n.jsx)(l.Y,{href:"/",children:"home"})," or seeking help on the"," ",(0,n.jsx)(l.Y,{href:"https://community.grafana.com",external:!0,children:"community site."})]})})})}function p(h){return{container:(0,a.css)({padding:h.spacing(8,2,2,2)})}}},1625:(ne,j,e)=>{"use strict";e.d(j,{P:()=>c});var n=e(74848),a=e(22803),s=e(96540),d=e(30703),o=e(66404),l=e(41654),i=e(63142);const c=(0,s.forwardRef)(({children:h,icon:u,color:r="secondary",direction:v="row",...g},E)=>{const x=(0,i.of)(p),m=typeof g.onClick=="function",y=v==="row",b=y?"center":"flex-start",D=y?.5:0;return(0,n.jsx)("div",{ref:E,className:(0,a.cx)({[x.interactive]:m}),...g,children:(0,n.jsx)(o.E,{variant:"bodySmall",color:r,children:(0,n.jsxs)(l.B,{direction:v,alignItems:b,gap:D,wrap:"wrap",children:[u&&(0,n.jsx)(d.I,{size:"xs",name:u}),h]})})})});c.displayName="MetaText";const p=()=>({interactive:(0,a.css)({cursor:"pointer"})})},1682:(ne,j,e)=>{"use strict";e.d(j,{b4:()=>g});var n=e(44248),a=e(88632),s=e(32540),d=e(92119);function o(E){return E.state.controls?.state.timePicker}function l(E){return E.state.controls?.state.refreshPicker}function i(E){return E.state.titleItems&&Array.isArray(E.state.titleItems)?E.state.titleItems.find(m=>m instanceof s.$)??null:null}function c(E){return E.state.body.getVizPanels()}function p(E){let x=0;return n.jh.findAllObjects(E.getRoot(),m=>(m instanceof n.Eb||m instanceof n.tI)&&!m.state.repeatSourceKey).forEach(m=>{const y=(0,d.Cs)(m);y>x&&(x=y)}),x+1}function h(E){const x=n.jh.getData(E);if(!(x instanceof a.s))throw new Error("DashboardDataLayerSet not found");return x}function u(E){return(0,d.YQ)(E).state.editPane.state.selection?.getSelectionEntries().map(([,x])=>x.resolve())??[]}function r(E){const x=E.state.$behaviors?.find(m=>m instanceof n.Gg.K2);if(x instanceof n.Gg.K2)return x}function v(E){const x=(0,d.YQ)(E),m=(0,d.Cs)(E);let y=x.serializer.getElementIdForPanel(m);return y||(y=(0,d.XA)(m)),y}const g={getTimePicker:o,getRefreshPicker:l,getPanelLinks:i,getVizPanels:c,getDataLayers:h,getAllSelectedObjects:u,getCursorSync:r,getLayoutManagerFor:d.h$,getNextPanelId:p,getElementIdentifierForVizPanel:v}},1837:(ne,j,e)=>{"use strict";e.d(j,{u:()=>n});const n={"&:hover,:focus-within":{".dashboard-canvas-add-button":{opacity:1,filter:"unset"}}}},1895:(ne,j,e)=>{"use strict";e.d(j,{O5:()=>u,_y:()=>h,cc:()=>c});var n=e(75505),a=e(68143),s=e(24619),d=e(95443),o=e(52161),l=e(78467),i=e(77295);async function c(m){if(m===o.hY)return{application:"grafana",features:{rulerApiEnabled:!0}};const y=(0,o.of)(m);if(!y)throw new Error(`Cannot find data source configuration for ${m}`);const{url:b,name:D,type:f}=y;if(!b)throw new Error("The data source url cannot be empty.");if(!(0,o.cl)(f))throw new Error(`The build info request is not available for ${f}. Supported values are ${o.at.join()}.`);return p({name:D,url:b,type:f})}async function p(m){const{url:y,name:b,type:D}=m,f=D==="loki"?void 0:await v(y);if(!(f!==void 0)){if(!await g(b))throw new Error(`Unable to fetch alert rules. Is the ${b} data source properly configured?`);const M=await E(b);return{application:D==="loki"?"Loki":s.N1.Cortex,features:{rulerApiEnabled:M}}}const{features:P}=f.data;return P?{application:s.N1.Mimir,features:{rulerApiEnabled:P?.ruler_config_api==="true"}}:{application:s.N1.Prometheus,features:{rulerApiEnabled:!1}}}async function h(m){if(m===o.hY)return{lazyConfigInit:!1};const y=r(m),{url:b,type:D}=y;if(!b)throw new Error("The data source url cannot be empty.");if(D!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${D}. Only 'alertmanager' type is supported`);return await u(b)}async function u(m){try{return{lazyConfigInit:(await v(m))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function r(m){const y=(0,o.oh)(m);if(!y)throw new Error(`Cannot find data source configuration for ${m}`);return y}async function v(m){return(await(0,n.s)((0,a.AI)().fetch({url:`${m}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(b=>{if(!("status"in b&&b.status===404))throw b}))?.data}async function g(m){try{return await(0,l.sA)(m),!0}catch{return!1}}async function E(m){try{return await(0,i.Zp)(m),!0}catch(y){if(x(y))return!1;throw y}}function x(m){return(0,a.NF)(m)?m.data.message?.includes("GetRuleGroup unsupported in rule local store")||m.data.message?.includes("page not found")||m.data.message?.includes(d.UU):m instanceof Error&&m.message?.includes("404 from rules config endpoint")}},1906:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>o,Jk:()=>s,hX:()=>d});var n=e(78830),a=e(11594),s=(l=>(l.CloudAlerting="cloud-alerting",l.UnifiedAlerting="unified-alerting",l.Dashboard="dashboard",l.Explore="explore",l.Correlations="correlations",l.Unknown="unknown",l.PanelEditor="panel-editor",l.PanelViewer="panel-viewer",l))(s||{});class d extends a.Ud{constructor(){super(...arguments),this._exposedComponentConfigs=[],this._addedComponentConfigs=[],this._addedLinkConfigs=[],this._addedFunctionConfigs=[]}init(i){}setRootPage(i){return this.root=i,this}setComponentsFromLegacyExports(i){if((0,n.M)(i),this.meta&&this.meta.includes){for(const c of this.meta.includes)if(c.type===a.ib.page&&c.component&&!i[c.component]){console.warn("App Page uses unknown component: ",c.component,this.meta);continue}}}get exposedComponentConfigs(){return this._exposedComponentConfigs}get addedComponentConfigs(){return this._addedComponentConfigs}get addedLinkConfigs(){return this._addedLinkConfigs}get addedFunctionConfigs(){return this._addedFunctionConfigs}addLink(i){return this._addedLinkConfigs.push(i),this}addComponent(i){return this._addedComponentConfigs.push(i),this}addFunction(i){return this._addedFunctionConfigs.push(i),this}exposeComponent(i){return this._exposedComponentConfigs.push(i),this}}var o=(l=>(l.alpha="alpha",l.beta="beta",l.experimental="experimental",l.privatePreview="private preview",l.preview="preview",l.new="new",l))(o||{})},1972:(ne,j,e)=>{"use strict";e.d(j,{Yi:()=>i,hk:()=>l,rS:()=>c});var n=e(74848),a=e(92745),s=e(45967),d=e(34999),o=e(99887),l=(p=>(p.ContactPoint="contact point",p.Template="template",p.MuteTiming="time interval",p.AlertRule="alert rule",p.RootNotificationPolicy="root notification policy",p.AlertEnrichment="alert enrichment",p))(l||{});const i=({resource:p,...h})=>(0,n.jsx)(d.F,{title:(0,a.t)("alerting.provisioning.title-provisioned","This {{resource}} cannot be edited through the UI",{resource:p}),severity:"info",...h,children:(0,n.jsxs)(a.x6,{i18nKey:"alerting.provisioning.body-provisioned",children:["This ",{resource:p}," has been provisioned, that means it was created by config. Please contact your server admin to update this ",{resource:p},"."]})}),c=({tooltip:p,provenance:h})=>{const u=(0,n.jsx)(o.E,{text:(0,a.t)("alerting.provisioning-badge.badge.text-provisioned","Provisioned"),color:"purple"});if(p){const r=(0,n.jsxs)(a.x6,{i18nKey:"alerting.provisioning.badge-tooltip-provenance",values:{provenance:h},children:["This resource has been provisioned via ",{provenance:h}," and cannot be edited through the UI"]}),v=(0,n.jsx)(a.x6,{i18nKey:"alerting.provisioning.badge-tooltip-standard",children:"This resource has been provisioned and cannot be edited through the UI"}),g=h?r:v;return(0,n.jsx)(s.m,{content:g,children:(0,n.jsx)("span",{children:u})})}return u}},2197:(ne,j,e)=>{"use strict";e.d(j,{m:()=>u});var n=e(2543),a=e.n(n),s=e(62467),d=e(81160),o=e(69862),l=e(36638),i=e(8642);const c=(g,E)=>x=>{const m=i.h.get(g.id);if(!m)return x;const b={...m.transformation.defaultOptions??{},...g.options},f=window.__grafanaSceneContext!=null?b:v((0,n.cloneDeep)(b),P=>typeof P=="string"?E.interpolate(P):P),C=g.filter?.options?(0,l.Dq)(g.filter):void 0;return x.pipe((0,o.Z)(P=>(0,s.of)(p(P,C)).pipe(m.transformation.operator(f,E),h(P,m,C))))};function p(g,E){return E?g.filter(x=>E(x)):g}const h=(g,E,x)=>m=>m.pipe((0,d.T)(y=>{if(y===g)return y;if(x){let b=0;const D=g.filter((f,C)=>{const P=!x(f);return P&&!b&&(b=C),P});D.length&&y.splice(b,0,...D)}return y}));function u(g,E,x){const m=(0,s.of)(E);if(!g.length)return m;const y=[],b=x??{interpolate:D=>D};for(let D=0;D<g.length;D++){const f=g[D];if(r(f))y.push(f(b));else{if(f.disabled)continue;y.push(c(f,b))}}return m.pipe.apply(m,y)}function r(g){return typeof g=="function"}function v(g,E){if(Array.isArray(g))return g.map(x=>v(x,E));if(typeof g=="object"){for(const x in g)g[x]=v(g[x],E);return g}else return E(g)??g}},2218:(ne,j,e)=>{"use strict";e.d(j,{A:()=>h});var n=e(74848),a=e(96540),s=e(92745),d=e(8207),o=e(41654),l=e(24158),i=e(52161),c=e(5358);const p=a.memo(({ruleUid:u,onClose:r})=>(0,n.jsx)(d._,{title:(0,s.t)("alerting.silence-grafana-rule-drawer.title-silence-alert-rule","Silence alert rule"),subtitle:"Configure silences to stop notifications from a particular alert rule.",onClose:r,size:"md",children:(0,n.jsx)(o.B,{direction:"column",children:(0,n.jsx)(c.b9,{accessType:"instance",children:(0,n.jsx)(l.SilencesEditor,{ruleUid:u,alertManagerSourceName:i.hY,onSilenceCreated:r,onCancel:r})})})}),(u,r)=>u.ruleUid===r.ruleUid);p.displayName="SilenceGrafanaRuleDrawer";const h=p},2341:()=>{(function(ne){function j(e){e.hooks.processDatapoints.push(function(n,a,s){a.dashes.show&&n.hooks.draw.push(function(d,o){var l=d.getPlotOffset(),i=a.xaxis,c=a.yaxis;function p(v,g){var E=s.points,x=s.pointsize,m=null,y=null,b=0,D=!0,f,C;a.dashes.dashLength[0]?(f=a.dashes.dashLength[0],a.dashes.dashLength[1]?C=a.dashes.dashLength[1]:C=f):C=f=a.dashes.dashLength,o.beginPath();for(var P=x;P<E.length;P+=x){let N=function(F){var G=Math.sqrt(Math.pow(V-U,2)+Math.pow(z-W,2));if(G<=F)return{deltaX:V-U,deltaY:z-W,distance:G,remainder:F-G};var H=V>U?1:-1,K=z>W?1:-1;return{deltaX:H*Math.sqrt(Math.pow(F,2)/(1+Math.pow((z-W)/(V-U),2))),deltaY:K*Math.sqrt(Math.pow(F,2)-Math.pow(F,2)/(1+Math.pow((z-W)/(V-U),2))),distance:F,remainder:0}};var O=N,T=E[P-x],M=E[P-x+1],I=E[P],B=E[P+1];if(!(T==null||I==null)){if(M<=B&&M<c.min){if(B<c.min)continue;T=(c.min-M)/(B-M)*(I-T)+T,M=c.min}else if(B<=M&&B<c.min){if(M<c.min)continue;I=(c.min-M)/(B-M)*(I-T)+T,B=c.min}if(M>=B&&M>c.max){if(B>c.max)continue;T=(c.max-M)/(B-M)*(I-T)+T,M=c.max}else if(B>=M&&B>c.max){if(M>c.max)continue;I=(c.max-M)/(B-M)*(I-T)+T,B=c.max}if(T<=I&&T<i.min){if(I<i.min)continue;M=(i.min-T)/(I-T)*(B-M)+M,T=i.min}else if(I<=T&&I<i.min){if(T<i.min)continue;B=(i.min-T)/(I-T)*(B-M)+M,I=i.min}if(T>=I&&T>i.max){if(I>i.max)continue;M=(i.max-T)/(I-T)*(B-M)+M,T=i.max}else if(I>=T&&I>i.max){if(T>i.max)continue;B=(i.max-T)/(I-T)*(B-M)+M,I=i.max}(T!=m||M!=y)&&o.moveTo(i.p2c(T)+v,c.p2c(M)+g);var U=i.p2c(T)+v,W=c.p2c(M)+g,V=i.p2c(I)+v,z=c.p2c(B)+g,R;do R=N(b>0?b:D?f:C),(R.deltaX!=0||R.deltaY!=0)&&(D?o.lineTo(U+R.deltaX,W+R.deltaY):o.moveTo(U+R.deltaX,W+R.deltaY)),D=!D,b=R.remainder,U+=R.deltaX,W+=R.deltaY;while(R.distance>0);m=I,y=B}}o.stroke()}o.save(),o.translate(l.left,l.top),o.lineJoin="round";var h=a.dashes.lineWidth,u=a.shadowSize;if(h>0&&u>0){o.lineWidth=u,o.strokeStyle="rgba(0,0,0,0.1)";var r=Math.PI/18;p(Math.sin(r)*(h/2+u/2),Math.cos(r)*(h/2+u/2)),o.lineWidth=u/2,p(Math.sin(r)*(h/2+u/4),Math.cos(r)*(h/2+u/4))}o.lineWidth=h,o.strokeStyle=a.color,h>0&&p(0,0),o.restore()})})}ne.plot.plugins.push({init:j,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},2381:(ne,j,e)=>{"use strict";e.d(j,{A:()=>h});var n=e(74848),a=e(34743),s=e(83505),d=e(46885),o=e(96540),l=e(63142),i=e(76373),c=e(71495),p=e(15245);function h({content:u,show:r,placement:v,className:g,wrapperClassName:E,referenceElement:x,renderArrow:m,hidePopper:y,style:b,...D}){const f=(0,l.$j)(),C=(0,o.useRef)(null),P=(0,c.O)(v),T=[(0,a.cY)(8),...(0,i.getPositioningMiddleware)(P)];m&&T.push((0,a.UE)({element:C}));const{context:M,refs:I,floatingStyles:B}=(0,s.we)({open:r,placement:P,middleware:T,whileElementsMounted:d.ll,strategy:"fixed"});(0,o.useLayoutEffect)(()=>{I.setReference(x)},[x,I]);const{styles:U}=(0,s.DL)(M,{initial:()=>({opacity:0}),duration:f.transitions.duration.enteringScreen});return r?(0,n.jsx)(p.ZL,{children:(0,n.jsx)("div",{ref:I.setFloating,style:{...B,...U,...b},className:E,...D,children:(0,n.jsxs)("div",{className:g,children:[m&&(0,n.jsx)(s.ie,{fill:f.colors.border.weak,ref:C,context:M}),typeof u=="string"&&u,o.isValidElement(u)&&o.cloneElement(u),typeof u=="function"&&u({hidePopper:y})]})})}):void 0}},2401:(ne,j,e)=>{"use strict";e.d(j,{d:()=>s});var n=e(96540),a=e(41071);const s=({component:d,title:o="previous page"})=>{const l=(0,a.i)(),i=(0,n.useCallback)(()=>{l(o)},[l,o]);return(0,n.cloneElement)(d,{onClick:i})}},2505:(ne,j,e)=>{"use strict";e.d(j,{U:()=>d,m:()=>s});var n=e(11393),a=e(67350);function s(o,l,i,c){const p=o.builtIn?"grafana":l,{enable:h,hide:u,iconColor:r,name:v,builtIn:g,filter:E,mappings:x,datasource:m,target:y,snapshotData:b,type:D,placement:f,...C}=o,P={kind:"AnnotationQuery",spec:{builtIn:!!o.builtIn,name:o.name,enable:!!c?.enable||!!o.enable,hide:!!c?.hide||!!o.hide,iconColor:o.iconColor,query:{kind:"DataQuery",version:(0,n.iM)().version,group:p,spec:y||{}}}};return o.placement&&(P.spec.placement=o.placement),i&&(P.spec.query.datasource={name:i}),Object.keys(C).length>0&&(P.spec.legacyOptions=C),o.filter?.ids?.length&&(P.spec.filter=o.filter),P}function d(o){let{query:l,...i}=o.spec,c={enable:o.spec.enable,hide:o.spec.hide,iconColor:o.spec.iconColor,name:o.spec.name};o.spec.placement&&(c.placement=o.spec.placement),Object.keys(l.spec).length>0&&(c.target={...l?.spec}),o.spec.builtIn&&(c.type="dashboard",c.builtIn=1),o.spec.filter&&(c.filter=o.spec.filter),i.legacyOptions&&(c={...c,...i.legacyOptions});const p=(0,a.Ku)(l);return c.datasource=p,c}},2513:(ne,j,e)=>{"use strict";e.d(j,{$A:()=>l,Tl:()=>o,kn:()=>s,zE:()=>d});var n=e(24726),a=e(43173);const s={from:`now-${a.$.exploreDefaultTimeOffset}`,to:"now"},d=()=>(0,n.A)().slice(0,12),o={id:d(),operator:"="},l={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[o],matchesOnly:!1,criticalPathOnly:!1}},2559:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>x,J7:()=>o,NZ:()=>d,Rp:()=>h,SN:()=>c,V9:()=>l,dW:()=>r,dd:()=>u,f7:()=>g,oQ:()=>v,qx:()=>s,y3:()=>p});var n=e(65307),a=e(28105),s=(m=>(m[m.Gcom=0]="Gcom",m[m.Json=1]="Json",m))(s||{}),d=(m=>(m.DataSource="datasource",m.Constant="constant",m.LibraryPanel="libraryPanel",m))(d||{}),o=(m=>(m.New="new",m.Exists="exists",m.Different="different",m))(o||{});const l={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:a.Gu.NotStarted},i=(0,n.Z0)({name:"manageDashboards",initialState:l,reducers:{setGcomDashboard:(m,y)=>{m.dashboard={...y.payload.json,id:null},m.meta={updatedAt:y.payload.updatedAt,orgName:y.payload.orgName},m.source=0,m.state=a.Gu.Done},setJsonDashboard:(m,y)=>{m.dashboard={...y.payload,id:null},m.meta=l.meta,m.source=1,m.state=a.Gu.Done},clearDashboard:m=>{m.dashboard={},m.state=a.Gu.NotStarted},setInputs:(m,y)=>{m.inputs={dataSources:y.payload.filter(b=>b.type==="datasource"),constants:y.payload.filter(b=>b.type==="constant"),libraryPanels:m.inputs.libraryPanels||[]}},setLibraryPanelInputs:(m,y)=>{m.inputs.libraryPanels=y.payload},fetchFailed:m=>{m.dashboard={},m.state=a.Gu.Error},fetchDashboard:m=>{m.state=a.Gu.Loading}}}),{clearDashboard:c,setInputs:p,setGcomDashboard:h,setJsonDashboard:u,setLibraryPanelInputs:r,fetchFailed:v,fetchDashboard:g}=i.actions,x={importDashboard:i.reducer}},2733:(ne,j,e)=>{"use strict";e.d(j,{cd:()=>D,xw:()=>v});var n=e(2543),a=e.n(n),s=e(18700),d=e(95004),o=e(90157);function l(O){if(O.stringValue)return O.stringValue;if(O.boolValue!==void 0)return!!O.boolValue;if(O.intValue!==void 0)return Number.parseInt(String(O.intValue),10);if(O.doubleValue)return Number.parseFloat(String(O.doubleValue));if(O.arrayValue){const N=[];for(const F of O.arrayValue.values)N.push(l(F));return N}return""}function i(O){const N=[];let F="OTLPResourceNoServiceName";if(!O)return{serviceName:F,serviceTags:N};for(const G of O.attributes)G.key===SemanticResourceAttributes.SERVICE_NAME&&(F=G.value.stringValue||F),N.push({key:G.key,value:l(G.value)});return{serviceName:F,serviceTags:N}}function c(O){const N=[];if(O.attributes)for(const F of O.attributes)N.push({key:F.key,value:l(F.value)});return N}function p(O){let N;if(O.kind){const F=O.kind.toString().toLowerCase().split("_");N=F.length?F[F.length-1]:O.kind.toString()}return N}function h(O){const N=[];if(O.links)for(const F of O.links){const{traceId:G,spanId:H}=F,K=[];if(F.attributes)for(const w of F.attributes)K.push({key:w.key,value:l(w.value)});N.push({traceID:G,spanID:H,tags:K})}return N}function u(O){const N=[];if(O.events)for(const F of O.events){const G=[];if(F.attributes)for(const H of F.attributes)G.push({key:H.key,value:l(H.value)});N.push({fields:G,timestamp:F.timeUnixNano/1e6,name:F.name})}return N}function r(O,N=!1){const F=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,values:[]},{name:"spanID",type:FieldType.string,values:[]},{name:"parentSpanID",type:FieldType.string,values:[]},{name:"operationName",type:FieldType.string,values:[]},{name:"serviceName",type:FieldType.string,values:[]},{name:"kind",type:FieldType.string,values:[]},{name:"statusCode",type:FieldType.number,values:[]},{name:"statusMessage",type:FieldType.string,values:[]},{name:"instrumentationLibraryName",type:FieldType.string,values:[]},{name:"instrumentationLibraryVersion",type:FieldType.string,values:[]},{name:"traceState",type:FieldType.string,values:[]},{name:"serviceTags",type:FieldType.other,values:[]},{name:"startTime",type:FieldType.number,values:[]},{name:"duration",type:FieldType.number,values:[]},{name:"logs",type:FieldType.other,values:[]},{name:"references",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const H of O){const{serviceName:K,serviceTags:w}=i(H.resource);for(const Q of H.instrumentationLibrarySpans)for(const k of Q.spans)F.add({traceID:k.traceId,spanID:k.spanId,parentSpanID:k.parentSpanId||"",operationName:k.name||"",serviceName:K,kind:p(k),statusCode:k.status?.code,statusMessage:k.status?.message,instrumentationLibraryName:Q.instrumentationLibrary?.name,instrumentationLibraryVersion:Q.instrumentationLibrary?.version,traceState:k.traceState,serviceTags:w,startTime:k.startTimeUnixNano/1e6,duration:(k.endTimeUnixNano-k.startTimeUnixNano)/1e6,tags:c(k),logs:u(k),references:h(k)})}}catch(H){return console.error(H),{error:{message:"JSON is not valid OpenTelemetry format: "+H},data:[]}}let G=[F];return N&&G.push(...createNodeGraphFrames(F)),{data:G}}function v(O){let N={batches:[]},F={};for(let G=0;G<O.length;G++){const H=O.get(G);F[H.serviceName]||(F[H.serviceName]=N.batches.length,N.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let K=F[H.serviceName];N.batches[K].resource.attributes.length===0&&(N.batches[K].resource.attributes=E(H.serviceTags)),N.batches[K].instrumentationLibrarySpans[0].instrumentationLibrary||H.instrumentationLibraryName&&(N.batches[K].instrumentationLibrarySpans[0].instrumentationLibrary={name:H.instrumentationLibraryName,version:H.instrumentationLibraryVersion?H.instrumentationLibraryVersion:""}),N.batches[K].instrumentationLibrarySpans[0].spans.push({traceId:H.traceID.padStart(32,"0"),spanId:H.spanID,parentSpanId:H.parentSpanID||"",traceState:H.traceState||"",name:H.operationName,kind:g(H.kind),startTimeUnixNano:H.startTime*1e6,endTimeUnixNano:(H.startTime+H.duration)*1e6,attributes:H.tags?E(H.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:m(H),events:y(H.logs),links:b(H.references)})}return N}function g(O){let N;if(O)switch(O){case"server":N="SPAN_KIND_SERVER";break;case"client":N="SPAN_KIND_CLIENT";break;case"producer":N="SPAN_KIND_PRODUCER";break;case"consumer":N="SPAN_KIND_CONSUMER";break;case"internal":N="SPAN_KIND_INTERNAL";break}return N}function E(O){return O.reduce((N,F)=>[...N,{key:F.key,value:x(F)}],[])}function x(O){if(typeof O.value=="string")return{stringValue:O.value};if(typeof O.value=="boolean")return{boolValue:O.value};if(typeof O.value=="number")return O.value%1===0?{intValue:O.value}:{doubleValue:O.value};if(typeof O.value=="object"&&Array.isArray(O.value)){const N=[];for(const F of O.value)N.push(x(F));return{arrayValue:{values:N}}}return{stringValue:O.value}}function m(O){let N;return O.statusCode!==void 0&&(N={code:O.statusCode,message:O.statusMessage?O.statusMessage:""}),N}function y(O){if(!O||!O.length)return;let N=[];for(const F of O){let G={timeUnixNano:F.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:F.name||""};for(const H of F.fields)G.attributes.push({key:H.key,value:x(H)});N.push(G)}return N}function b(O){if(!O||!O.length)return;let N=[];for(const F of O){let G={traceId:F.traceID,spanId:F.spanID,attributes:[],droppedAttributesCount:0};if(F.tags?.length)for(const H of F.tags)G.attributes?.push({key:H.key,value:x(H)});N.push(G)}return N}const D="Related profiles";function f(O,N,F=!1){const G=O.data[0];if(!G)return R;const K=N?.jsonData?.tracesToProfiles;let w;if(K?.datasourceUid&&(w=getDataSourceSrv().getInstanceSettings(K.datasourceUid)),K&&w){const k=K.customQuery?K.query:void 0,te={title:D,url:"",internal:{datasourceUid:w.uid,datasourceName:w.name,query:{labelSelector:k||"{${__tags}}",groupBy:[],profileTypeId:K.profileTypeId??"",queryType:"profile",spanSelector:['${__span.tags["pyroscope.profile.id"]}'],refId:"profile"}},origin:DataLinkConfigOrigin.Datasource};G.fields.forEach(q=>{q.name==="tags"&&(q.config.links=[te])})}let Q=[...O.data];return F&&Q.push(...createNodeGraphFrames(toDataFrame(G))),{...O,data:Q}}function C(O){return{traceID:O.traceID,startTime:parseInt(O.startTimeUnixNano,10)/1e6,traceDuration:O.durationMs,traceService:O.rootServiceName||"",traceName:O.rootTraceName||""}}function P(O,N){return O.data?.filter(F=>F.name==="exemplar"&&F.meta?.dataTopic==="annotations").map(F=>{const G=F.fields.find(H=>H.name==="traceId");if(G){const H=T(N),K=G.config.links||[],w=H.filter(Q=>!K.some(k=>k.title===Q.title&&k.internal?.datasourceUid===Q.internal?.datasourceUid&&isEqual(k.internal?.query,Q.internal?.query)));G.config.links=K.length?[...K,...w]:w}return F}),O}function T(O){const N=[];return O.uid&&N.push({title:"View trace",url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:O.uid,datasourceName:O?.name??"Data source not found"}}),N}function M(O,N,F){switch(F){case SearchTableType.Spans:return U(O,N);case SearchTableType.Raw:return I(O);default:return B(O,N)}}function I(O){return[createDataFrame({name:"Raw response",refId:"raw",fields:[{name:"response",type:FieldType.string,values:[JSON.stringify(O,null,2)]}]})]}function B(O,N){const F=createDataFrame({name:"Traces",refId:"traces",fields:[{name:"traceID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:N.uid,datasourceName:N.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:FieldType.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:FieldType.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:FieldType.nestedFrames}],meta:{preferredVisualisationType:"table",uniqueRowIdFields:[0]}});return O?.length?(F.length=O.length,O.sort((G,H)=>parseInt(H?.startTimeUnixNano,10)/1e6-parseInt(G?.startTimeUnixNano,10)/1e6).forEach(G=>{const H=C(G);F.fields[0].values.push(H.traceID),F.fields[1].values.push(H.startTime),F.fields[2].values.push(H.traceService),F.fields[3].values.push(H.traceName),F.fields[4].values.push(H.traceDuration?H.traceDuration:"<1ms"),G.spanSets?F.fields[5].values.push(G.spanSets.map(K=>V(G,K,N))):G.spanSet&&F.fields[5].values.push([V(G,G.spanSet,N)])}),[F]):[F]}function U(O,N){const F={};let G=!1;O?.forEach(K=>W(K).forEach(w=>{w.attributes?.forEach(Q=>{F[Q.key]={name:Q.key,type:FieldType.string,config:{displayNameFromDS:Q.key}}}),w.spans.forEach(Q=>{Q.name&&(G=!0),Q.attributes?.forEach(k=>{F[k.key]={name:k.key,type:FieldType.string,config:{displayNameFromDS:k.key}}})})}));const H=new MutableDataFrame({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:FieldType.string,config:{custom:{hidden:!0}}},{name:"traceService",type:FieldType.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:N.uid,datasourceName:N.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:FieldType.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:FieldType.string,config:{displayNameFromDS:"Name",custom:{hidden:!G}}},...Object.values(F).sort((K,w)=>K.name.localeCompare(w.name)),{name:"duration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return!O||!O.length?[H]:(O.sort((K,w)=>parseInt(w?.startTimeUnixNano,10)/1e6-parseInt(K?.startTimeUnixNano,10)/1e6).forEach(K=>{W(K).forEach(w=>{w.spans.forEach(Q=>{H.add(z(Q,w,K))})})}),[H])}const W=O=>O.spanSets||(O.spanSet?[O.spanSet]:[]),V=(O,N,F)=>{const G={};let H=!1;N.attributes?.map(Q=>{G[Q.key]={name:Q.key,type:FieldType.string,config:{displayNameFromDS:Q.key},values:[]}}),N.spans.forEach(Q=>{Q.name&&(H=!0),Q.attributes?.forEach(k=>{G[k.key]={name:k.key,type:FieldType.string,config:{displayNameFromDS:k.key},values:[]}})});const K=new MutableDataFrame({fields:[{name:"traceIdHidden",type:FieldType.string,config:{custom:{hidden:!0}},values:[]},{name:"spanID",type:FieldType.string,values:[],config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:F.uid,datasourceName:F.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:FieldType.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:FieldType.string,values:[],config:{displayNameFromDS:"Name",custom:{hidden:!H}}},...Object.values(G).sort((Q,k)=>Q.name.localeCompare(k.name)),{name:"duration",type:FieldType.number,values:[],config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),w=createTheme();for(const Q of K.fields)Q.display=getDisplayProcessor({field:Q,theme:w});return N.spans.forEach(Q=>{K.add(z(Q,N,O))}),K};function z(O,N,F){const G=parseInt(O.startTimeUnixNano,10)/1e6,H={traceIdHidden:F.traceID,traceService:F.rootServiceName||"",traceName:F.rootTraceName||"",spanID:O.spanID,time:G,duration:parseInt(O.durationNanos,10),name:O.name};let K=[];return N.attributes&&(K=K.concat(N.attributes)),O.attributes&&(K=K.concat(O.attributes)),K.forEach(w=>{(w.value.boolValue||w.value.Value?.bool_value)&&(H[w.key]=w.value.boolValue||w.value.Value?.bool_value),(w.value.doubleValue||w.value.Value?.double_value)&&(H[w.key]=w.value.doubleValue||w.value.Value?.double_value),(w.value.intValue||w.value.Value?.int_value)&&(H[w.key]=w.value.intValue||w.value.Value?.int_value),(w.value.stringValue||w.value.Value?.string_value)&&(H[w.key]=w.value.stringValue||w.value.Value?.string_value)}),H}const R={data:[new s.k({fields:[{name:"trace",type:d.PU.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},2863:(ne,j,e)=>{"use strict";e.d(j,{d:()=>a,w:()=>s});let n;const a=d=>{n=d},s=()=>n},2869:(ne,j,e)=>{"use strict";e.d(j,{W:()=>n});var n=(a=>(a.Incident="grafana-incident-app",a.OnCall="grafana-oncall-app",a.Irm="grafana-irm-app",a.MachineLearning="grafana-ml-app",a.Labels="grafana-labels-app",a.Slo="grafana-slo-app",a))(n||{})},2874:(ne,j,e)=>{"use strict";e.d(j,{h:()=>a,z:()=>s});let n;function a(d){if(n)throw new Error("setGetObservablePluginComponents() function should only be called once, when Grafana is starting.");n=d}function s(d){if(!n)throw new Error("getObservablePluginComponents() can only be used after the Grafana instance has started.");return n(d)}},2924:(ne,j,e)=>{"use strict";e.d(j,{G2:()=>h,Ko:()=>l,P8:()=>i,Xq:()=>o,Zt:()=>s,af:()=>c,kH:()=>d,n4:()=>p});var n=e(19705),a=e(90297);const s=n.qR.enhanceEndpoints({endpoints:{getFolder:{providesTags:(u,r,v)=>u?[{type:"Folder",id:v.name}]:[]},listFolder:{providesTags:u=>u?[{type:"Folder",id:"LIST"},...u.items.map(r=>({type:"Folder",id:r.metadata?.name})).filter(Boolean)]:[{type:"Folder",id:"LIST"}]},deleteFolder:{invalidatesTags:(u,r)=>r?[]:[{type:"Folder",id:"LIST"}]}}}).injectEndpoints({endpoints:u=>({getAffectedItems:u.query({keepUnusedDataFor:0,queryFn:async({folderUIDs:r,dashboardUIDs:v},g)=>{const E={folders:r.length,dashboards:v.length,library_elements:0,alertrules:0},x=r.map(async m=>g.dispatch(n.qR.endpoints.getFolderCounts.initiate({name:m})));try{return{data:(await Promise.all(x)).reduce((b,D)=>{const{data:f,error:C}=D;if(C)throw C;const P=(0,a.a)(f?.counts??[]);return b.folders+=P.folders,b.dashboards+=P.dashboards,b.alertrules+=P.alertrules,b.library_elements+=P.library_elements,b},E)}}catch(m){return{error:m}}}})})}),{useGetFolderQuery:d,useGetFolderParentsQuery:o,useDeleteFolderMutation:l,useCreateFolderMutation:i,useUpdateFolderMutation:c,useReplaceFolderMutation:p,useGetAffectedItemsQuery:h}=s},2954:(ne,j,e)=>{"use strict";e.d(j,{A:()=>D,p:()=>c});var n=e(2543),a=e.n(n),s=e(92745),d=e(56355);const o=new d.tI({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),l=[{text:"Query",value:"query"}],i={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var c=(f=>(f.IsAbove="gt",f.IsBelow="lt",f.IsEqual="eq",f.IsNotEqual="ne",f.IsGreaterThanEqual="gte",f.IsLessThanEqual="lte",f.IsOutsideRange="outside_range",f.IsWithinRange="within_range",f.IsWithinRangeIncluded="within_range_included",f.IsOutsideRangeIncluded="outside_range_included",f.HasNoValue="no_value",f))(c||{});const p=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"eq",text:"IS EQUAL TO"},{value:"ne",text:"IS NOT EQUAL TO"},{value:"gte",text:"IS ABOVE OR EQUAL TO"},{value:"lte",text:"IS BELOW OR EQUAL TO"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"outside_range_included",text:"IS OUTSIDE RANGE INCLUDED"},{value:"within_range_included",text:"IS WITHIN RANGE INCLUDED"},{value:"no_value",text:"HAS NO VALUE"}],h=[{text:"OR",value:"or"},{text:"AND",value:"and"},{text:"LOGIC OR",value:"logic-or"}],u=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],r=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],v=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function g(f){const C=new d.tI({type:f.type,defaultParams:[]});return new d.kW(f,C)}function E(f){return f.toLowerCase().replace(/_/g,"").split(" ")[0]}function x(f){switch(E(f)){case"normal":case"ok":return{text:(0,s.t)("alerting.get-state-display-model.text.ok","OK"),iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:(0,s.t)("alerting.get-state-display-model.text.alerting","ALERTING"),iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:(0,s.t)("alerting.get-state-display-model.text.no-data","NO DATA"),iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:(0,s.t)("alerting.get-state-display-model.text.paused","PAUSED"),iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:(0,s.t)("alerting.get-state-display-model.text.pending","PENDING"),iconClass:"hourglass",stateClass:"alert-state-warning"};case"recovering":return{text:(0,s.t)("alerting.get-state-display-model.text.recovering","RECOVERING"),iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:(0,s.t)("alerting.get-state-display-model.text.firing","FIRING"),iconClass:"fire",stateClass:""};case"inactive":return{text:(0,s.t)("alerting.get-state-display-model.text.inactive","INACTIVE"),iconClass:"check",stateClass:""};case"error":return{text:(0,s.t)("alerting.get-state-display-model.text.error","ERROR"),iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:(0,s.t)("alerting.get-state-display-model.text.unknown","UNKNOWN"),iconClass:"question-circle",stateClass:".alert-state-paused"}}}function m(f,C){return(0,n.reduce)(f,(P,T)=>(T.metric!==void 0&&T.value!==void 0&&P.push(T.metric+"="+T.value),T.Metric!==void 0&&T.Value!==void 0&&P.push(T.Metric+"="+T.Value),P),[]).join(C)}function y(f){return(0,n.isArray)(f.data)?m(f.data,", "):(0,n.isArray)(f.data.evalMatches)?m(f.data.evalMatches,", "):f.data.error?"Error: "+f.data.error:""}function b(f){return(0,n.isArray)(f)?m(f,", "):(0,n.isArray)(f.evalMatches)?m(f.evalMatches,", "):f.error?"Error: "+f.error:""}const D={alertQueryDef:o,getStateDisplayModel:x,conditionTypes:l,evalFunctions:p,evalOperators:h,noDataModes:r,executionErrorModes:v,reducerTypes:u,createReducerPart:g,getAlertAnnotationInfo:y,getAlertAnnotationText:b,alertStateSortScore:i}},3023:(ne,j,e)=>{"use strict";e.d(j,{_:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({children:l,className:i,...c})=>{const p=(0,s.of)(o);return(0,n.jsx)("div",{className:(0,a.cx)(p,i),...c,children:l})},o=l=>(0,a.css)({backgroundColor:l.components.panel.background,border:`1px solid ${l.components.panel.borderColor}`,borderRadius:l.shape.radius.default})},3204:(ne,j,e)=>{"use strict";e.d(j,{l:()=>P});var n=e(2543),a=e(44248),s=e(81041);const d=()=>new s.c(new URL(e.p+e.u(7061),e.b));var o=e(66507),l=e(4506),i=e(69523),c=e(6048),p=e(49e3),h=e(21645),u=e(11534),r=e(7094),v=e(32540),g=e(25953),E=e(8835),x=e(93389),m=e(97335),y=e(97883),b=e(30643),D=e(98279),f=e(23244),C=e(37674);class P{constructor(I){this._dashboard=I}static isUpdatingPersistedState({payload:I}){const B=Object.keys(I.partialUpdate);return B.length===0?!1:!!(I.changedObject instanceof x.U||I.changedObject instanceof f.v||I.changedObject instanceof a.Eb&&(B.length>1||B[0]!=="_renderCounter")||I.changedObject instanceof a.dt&&!Object.prototype.hasOwnProperty.call(I.partialUpdate,"data")||I.changedObject instanceof a.Es&&!Object.prototype.hasOwnProperty.call(I.partialUpdate,"data")||I.changedObject instanceof v.$||I.changedObject instanceof a.WM&&(Object.prototype.hasOwnProperty.call(I.partialUpdate,"intervals")||Object.prototype.hasOwnProperty.call(I.partialUpdate,"refresh"))||I.changedObject instanceof r.u&&Object.prototype.hasOwnProperty.call(I.partialUpdate,"name")||I.changedObject instanceof a.Gg.K2||I.changedObject instanceof a.kh||I.changedObject instanceof x.U||I.changedObject instanceof a.hy||I.changedObject instanceof u.H$&&Object.keys(I.partialUpdate).some(U=>u.vk.includes(U))||I.changedObject instanceof a.JZ||I.changedObject instanceof h.x&&Object.prototype.hasOwnProperty.call(I.partialUpdate,"hideTimeControls")||I.changedObject instanceof a.Pj||I.changedObject instanceof p.g&&!Object.prototype.hasOwnProperty.call(I.partialUpdate,"data")||I.changedObject instanceof a.Gg.en||(0,C.c7)(I.changedObject)||I.changedObject instanceof y.V||I.changedObject instanceof m.o||I.changedObject instanceof D.K||I.changedObject instanceof b.V||I.changedObject instanceof E.X2||I.changedObject instanceof g.X||I.changedObject instanceof i.H||I.changedObject instanceof l.K||I.changedObject instanceof c.M||I.changedObject instanceof o.t)}detectSaveModelChanges(){const I=this._dashboard.getSaveModel(),B=this._dashboard.getInitialSaveModel(),U=typeof I=="object"?JSON.parse(JSON.stringify(I)):I,W=typeof B=="object"?JSON.parse(JSON.stringify(B)):B;this._changesWorker?.postMessage({initial:W,changed:U})}hasMetadataChanges(){return this._dashboard.state.meta.folderUid!==this._dashboard.getInitialState()?.meta.folderUid}updateIsDirty(I){I||this.hasMetadataChanges()?this._dashboard.state.isDirty||this._dashboard.setState({isDirty:!0}):this._dashboard.state.isDirty&&this._dashboard.setState({isDirty:!1})}init(){this._changesWorker=d()}startTrackingChanges(){this._changesWorker||this.init(),this._changesWorker.onmessage=B=>{this.updateIsDirty(!!B.data.hasChanges)};const I=T(this.detectSaveModelChanges.bind(this));this._changeTrackerSub=this._dashboard.subscribeToEvent(a.bZ,B=>{P.isUpdatingPersistedState(B)&&I()})}stopTrackingChanges(){this._changeTrackerSub?.unsubscribe()}terminate(){this.stopTrackingChanges(),this._changesWorker?.terminate(),this._changesWorker=void 0}}function T(M){return(0,n.debounce)(M,250)}},3260:(ne,j,e)=>{"use strict";e.d(j,{xJ:()=>K,N9:()=>k,ol:()=>B,yt:()=>U,uS:()=>Y,Xs:()=>le,mi:()=>L,Uy:()=>ee,Ce:()=>J,UX:()=>_,dx:()=>q,hS:()=>te,YS:()=>se,$Y:()=>R,V2:()=>re,pL:()=>Q,nv:()=>M,J7:()=>N});var n=e(74848),a=e(22803),s=e(2543),d=e(16817),o=e(20877),l=e(25229),i=e(5556),c=e(54092),p=e(27489),h=e(43173),u=e(22787),r=e(45229),v=e(95027),g=e(87745),E=e(3548),x=e(22465),m=e(92745),y=e(34999);const b=({pluginId:ie,extensionTitle:oe})=>(0,n.jsx)(y.F,{title:(0,m.t)("plugins.extensions.extension-error-alert-title",'Extension failed to load: "{{pluginId}}/{{extensionTitle}}"',{pluginId:ie,extensionTitle:oe}),severity:"error",children:(0,m.t)("plugins.extensions.extension-error-alert-description","Check the console for more details on the error.")});var D=e(96016);const f=({children:ie,pluginId:oe,extensionTitle:ue,log:ye=D.R,fallbackAlwaysVisible:fe=!1})=>(0,n.jsx)(x.K,{onError:(Ee,Ae)=>{ye.error(`Extension "${oe}/${ue}" failed to load.`,{message:Ee.message,componentStack:Ae.componentStack??"",digest:Ae.digest??""})},fallback:()=>re()||fe?(0,n.jsx)(b,{pluginId:oe,extensionTitle:ue}):null,children:ie});var C=e(9453);function P(ie,oe=""){return(...ue)=>{try{return ie(...ue)}catch(ye){ye instanceof Error&&console.warn(`${oe}${ye.message}`)}}}function T(ie){return async oe=>{const{title:ue,body:ye,width:fe,height:Ee}=oe;r.A.publish(new g.S8({component:M({pluginId:ie.pluginId,extensionTitle:ie.title,Component:I({title:ue,body:ye,width:fe,height:Ee,config:ie}),log:D.R})}))}}const M=({pluginId:ie,extensionTitle:oe,Component:ue,log:ye})=>Ee=>{const{error:Ae,loading:Ge,value:Fe}=(0,d.A)(()=>(0,v.x)(ie,{showErrorAlert:!1}));return Ge?null:Ae?(ye.error(`Could not fetch plugin meta information for "${ie}", aborting. (${Ae.message})`,{stack:Ae.stack??"",message:Ae.message}),null):Fe?(0,n.jsx)(o.a,{meta:Fe,children:(0,n.jsx)(f,{pluginId:ie,extensionTitle:oe,log:ye,children:(0,n.jsx)(E.i,{pluginId:ie,children:(0,n.jsx)(ue,{...N(Ee,{log:ye,source:"extension",pluginId:ie,pluginVersion:Fe.info?.version})})})})}):(ye.error(`Fetched plugin meta information is empty for "${ie}", aborting.`),null)},I=({title:ie,body:oe,width:ue,height:ye,config:fe})=>{const Ee=(0,a.css)({width:ue,height:ye});return({onDismiss:Ge})=>(0,n.jsx)(u.a,{title:ie,className:Ee,isOpen:!0,onDismiss:Ge,onClickBackdrop:Ge,children:(0,n.jsx)(f,{pluginId:fe.pluginId,extensionTitle:fe.title,fallbackAlwaysVisible:!0,log:D.R,children:(0,n.jsx)("div",{"data-plugin-sandbox":fe.pluginId,"data-testid":"plugin-sandbox-wrapper",children:(0,n.jsx)(oe,{onDismiss:Ge})})})})};function B(ie,oe=new Map){if(!ie||typeof ie!="object"||Object.isFrozen(ie))return ie;const ue=Array.isArray(ie)?[...ie]:{...ie};if(oe.has(ie))return oe.get(ie);oe.set(ie,ue);const ye=Reflect.ownKeys(ue);for(const fe of ye){const Ee=Array.isArray(ue)?ue[Number(fe)]:ue[fe];Ee&&(typeof Ee=="object"||typeof Ee=="function")&&(Array.isArray(ue)?ue[Number(fe)]=B(Ee,oe):ue[fe]=B(Ee,oe))}return Object.freeze(ue)}function U(ie,oe,ue){const ye=`${ie}${oe}${ue}`;return Array.from(ye).reduce((fe,Ee)=>Math.imul(31,fe)+Ee.charCodeAt(0)|0,0).toString()}const W=Symbol("isReadOnlyProxy"),V=Symbol("isMutationObserverProxy");class z extends Error{constructor(oe){super(oe??"Mutating a read-only proxy object"),this.name="ReadOnlyProxyError"}}function R(ie){if(!ie||typeof ie!="object"||G(ie))return ie;const oe=new WeakMap;return new Proxy(ie,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(ue,ye,fe){if(ye===W)return!0;const Ee=Reflect.get(ue,ye,fe);return(0,l.Ar)(Ee)?(0,l.KQ)(Ee):(0,s.isObject)(Ee)||(0,s.isArray)(Ee)?(oe.has(Ee)||oe.set(Ee,R(Ee)),oe.get(Ee)):Ee}})}function O(ie,oe){if(!ie||typeof ie!="object"||H(ie))return ie;const{log:ue=D.R,source:ye="extension",pluginId:fe="unknown",pluginVersion:Ee="unknown"}=oe??{},Ae=new WeakMap,Ge=re()?ue.error.bind(ue):ue.warning.bind(ue);return new Proxy(ie,{deleteProperty(Fe,Pe){return Ge(`Attempted to delete object property "${String(Pe)}" from ${ye} with id ${fe} and version ${Ee}`,{stack:new Error().stack??""}),Reflect.deleteProperty(Fe,Pe),!0},defineProperty(Fe,Pe,Ve){return ue.debug(`Attempted to define object property "${String(Pe)}" from ${ye} with id ${fe} and version ${Ee}`,{stack:new Error().stack??""}),Reflect.defineProperty(Fe,Pe,Ve),!0},set(Fe,Pe,Ve){return Ge(`Attempted to mutate object property "${String(Pe)}" from ${ye} with id ${fe} and version ${Ee}`,{stack:new Error().stack??""}),Reflect.set(Fe,Pe,Ve),!0},get(Fe,Pe,Ve){if(Pe===V)return!0;const me=Reflect.get(Fe,Pe,Ve),Se=Reflect.getOwnPropertyDescriptor(Fe,Pe);return Se&&!Se.configurable&&!Se.writable?me:(0,l.Ar)(me)?(0,l.KQ)(me):(0,s.isObject)(me)||(0,s.isArray)(me)?(Ae.has(me)||Ae.set(me,O(me,{log:ue,source:ye,pluginId:fe,pluginVersion:Ee})),Ae.get(me)):me}})}function N(ie,oe){if(!ie||typeof ie!="object")return ie;const{log:ue=D.R,source:ye="extension",pluginId:fe="unknown",pluginVersion:Ee="unknown"}=oe??{};return O((0,s.cloneDeep)(ie),{log:ue,pluginId:fe,pluginVersion:Ee,source:ye})}function F(ie){return typeof ie=="object"&&ie!==null}function G(ie){return F(ie)&&ie[W]===!0}function H(ie){return F(ie)&&ie[V]===!0}function K(ie){const oe={...ie};return oe}function w(ie){}function Q(ie,oe){return ie.length<oe?ie:`${ie.slice(0,oe-3).trimEnd()}...`}function k(ie){const oe={},ue=[];for(const fe of ie){const Ee=fe.category;if(!Ee){ue.push({text:Q(fe.title,25),href:fe.path,onClick:fe.onClick});continue}Array.isArray(oe[Ee])||(oe[Ee]=[]),oe[Ee].push({text:Q(fe.title,25),href:fe.path,onClick:fe.onClick})}const ye=Object.keys(oe).reduce((fe,Ee)=>(fe.push({text:Q(Ee,25),type:"group",subMenu:oe[Ee]}),fe),[]);return ue.length>0&&(ye.length>0&&ye.push({text:"divider",type:"divider"}),Array.prototype.push.apply(ye,ue)),ye}function te(ie,oe,ue,ye){try{const fe=oe.configure?.(ye);if(fe===void 0)return;let{title:Ee=oe.title,description:Ae=oe.description,path:Ge=oe.path,icon:Fe=oe.icon,category:Pe=oe.category,...Ve}=fe;return(0,C.lq)(fe,`The configure() function for "${oe.title}" returned a promise, skipping updates.`),(0,C.aY)({title:Ee,description:Ae},["title","description"]),Object.keys(Ve).length>0&&ue.warning(`Extension "${oe.title}", is trying to override restricted properties: ${Object.keys(Ve).join(", ")} which will be ignored.`),{title:Ee,description:Ae,path:Ge,icon:Fe,category:Pe}}catch(fe){fe instanceof Error&&ue.error(`Failed to configure link with title "${oe.title}"`,{stack:fe.stack??"",message:fe.message});return}}function q(ie,oe,ue,ye,fe){const{onClick:Ee}=ue;if(Ee)return function(Ge){try{(0,p.rR)("ui_extension_link_clicked",{pluginId:ie,extensionPointId:oe,title:ue.title,category:ue.category});const Fe={context:fe,extensionPointId:oe,openModal:T(ue),openSidebar:(Ve,me)=>{r.A.publish(new g.Am({props:me,pluginId:ie,componentTitle:Ve}))},closeSidebar:()=>{r.A.publish(new g.KU)},toggleSidebar:(Ve,me)=>{r.A.publish(new g._d({props:me,pluginId:ie,componentTitle:Ve}))}};ye.debug(`onClick '${ue.title}' at '${oe}'`);const Pe=Ee(Ge,Fe);(0,C.yL)(Pe)&&Pe.catch(Ve=>{Ve instanceof Error&&ye.error(Ve.message,{message:Ve.message,stack:Ve.stack??""})})}catch(Fe){Fe instanceof Error&&ye.error(Fe.message,{message:Fe.message,stack:Fe.stack??""})}}}function se(ie,oe,ue){return i.kM.appendQueryToUrl(oe,i.kM.toUrlParams({uel_pid:ie,uel_epid:ue}))}const re=()=>h.$.buildInfo.env==="development",Y=(ie=[])=>Object.values(h.$.apps).filter(oe=>ie.includes(oe.id)),X=ie=>ie.split("/")[0],J=ie=>Object.values(h.$.apps).filter(oe=>oe.extensions.addedLinks.some(ue=>ue.targets.includes(ie))||oe.extensions.addedComponents.some(ue=>ue.targets.includes(ie))).map(oe=>oe.id).reduce((oe,ue)=>[...oe,ue,...ae(ue)],[]),_=ie=>new Map(J(ie).map(oe=>{const ue=h.$.apps[oe];if(!(!ue||!ue.extensions.addedComponents.some(ye=>ye.targets.includes(ie))&&!ue.extensions.addedLinks.some(ye=>ye.targets.includes(ie))))return[oe,{addedComponents:ue.extensions.addedComponents.filter(ye=>ye.targets.includes(ie)),addedLinks:ue.extensions.addedLinks.filter(ye=>ye.targets.includes(ie))}]}).filter(oe=>oe!==void 0)),ee=ie=>[X(ie)].reduce((ue,ye)=>[...ue,ye,...ae(ye)],[]),ae=(ie,oe=[])=>{if(!h.$.apps[ie])return[];if(oe.includes(ie))return[];const ue=h.$.apps[ie].dependencies.extensions.exposedComponents.map(X);return ue.reduce((ye,fe)=>[...ye,...ae(fe,[...oe,ie])],ue).filter(ye=>ye!==ie)},le=()=>{const ie=["cloud-home-app"];return Object.values(h.$.apps).filter(oe=>ie.includes(oe.id))},L=()=>{const ie=J(c.SM.DashboardPanelMenu),oe=le().map(ye=>ye.id),ue=ye=>!oe.includes(ye.id);return Object.values(h.$.apps).filter(ye=>ue(ye)&&(ye.preload||ie.includes(ye.id)))}},3271:(ne,j,e)=>{"use strict";e.d(j,{c:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({direction:l="horizontal",spacing:i=2})=>{const c=(0,s.of)(o,i);return l==="vertical"?(0,n.jsx)("div",{className:c.verticalDivider}):(0,n.jsx)("hr",{className:c.horizontalDivider})};d.displayName="Divider";const o=(l,i)=>({horizontalDivider:(0,a.css)({borderTop:`1px solid ${l.colors.border.weak}`,margin:l.spacing(i,0),width:"100%"}),verticalDivider:(0,a.css)({borderRight:`1px solid ${l.colors.border.weak}`,margin:l.spacing(0,i),height:"100%"})})},3281:(ne,j,e)=>{"use strict";e.d(j,{ES:()=>l,So:()=>p,Y_:()=>i,cc:()=>o,tH:()=>d});var n=e(18600),a=e(21275),s=e(59857);function d(h){switch(h){case"never":return a.CO.never;case"onDashboardLoad":return a.CO.onDashboardLoad;case"onTimeRangeChanged":return a.CO.onTimeRangeChanged;default:return a.CO.never}}function o(h){switch(h){case"dontHide":return s.zL.dontHide;case"hideLabel":return s.zL.hideLabel;case"hideVariable":return s.zL.hideVariable;case"inControlsMenu":return s.zL.inControlsMenu;default:return s.zL.dontHide}}function l(h){switch(h){case"disabled":return a.ZG.disabled;case"numericalAsc":return a.ZG.numericalAsc;case"alphabeticalCaseInsensitiveAsc":return a.ZG.alphabeticalCaseInsensitiveAsc;case"alphabeticalCaseInsensitiveDesc":return a.ZG.alphabeticalCaseInsensitiveDesc;case"numericalDesc":return a.ZG.numericalDesc;case"naturalAsc":return a.ZG.naturalAsc;case"naturalDesc":return a.ZG.naturalDesc;case"alphabeticalAsc":return a.ZG.alphabeticalAsc;case"alphabeticalDesc":return a.ZG.alphabeticalDesc;default:return a.ZG.disabled}}function i(h){switch(h){case"Crosshair":return a.yV.Crosshair;case"Tooltip":return a.yV.Tooltip;case"Off":return a.yV.Off;default:return a.$C}}function c(h){switch(h){case"true":return n.W.True;case"false":return n.W.False;case"null":return n.W.Null;case"nan":return n.W.NaN;case"null+nan":return n.W.NullAndNaN;case"empty":return n.W.Empty;default:throw new Error(`Unknown match type: ${h}`)}}function p(h){const u=v=>{switch(v){case"absolute":return a.Ol.Absolute;case"percentage":return a.Ol.Percentage;default:return a.Ol.Absolute}},r={...h.defaults};return h.defaults.mappings&&(r.mappings=h.defaults.mappings.map(v=>{switch(v.type){case"value":return{...v,type:a.dM.ValueToText};case"range":return{...v,type:a.dM.RangeToText};case"regex":return{...v,type:a.dM.RegexToText};case"special":return{...v,options:{...v.options,match:c(v.options.match)},type:a.dM.SpecialValue};default:return v}})),h.defaults.thresholds&&(r.thresholds={...h.defaults.thresholds,mode:u(h.defaults.thresholds.mode)}),{...h,defaults:r}}},3371:(ne,j,e)=>{"use strict";e.d(j,{D1:()=>o,bn:()=>d,lv:()=>s});var n=e(44248);const a="-clone-";function s(l,i){return`${l}${a}${i}`}function d(l){let i=l;do{if("repeatSourceKey"in i.state&&i.state.repeatSourceKey)return!0;i=i.parent}while(i);return!1}function o(l,i,c){return new n.Pj({variables:[new n.xc({name:l.state.name,value:i,text:c,isMulti:l.state.isMulti,includeAll:l.state.includeAll})]})}},3431:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>o});var n=e(74848),a=e(96540),s=e(63142),d=e(45861);const o=(l,i)=>{const c=(0,a.useRef)(null),p=(0,s.of)(d.my),[h,u]=(0,a.useState)(l),[r,v]=(0,a.useState)(0),g=x=>{u(x),i&&i(x)};return[({Component:x,onClick:m,disabled:y})=>(0,n.jsx)("button",{type:"button",className:p,ref:c,disabled:y,onClick:()=>{g(!0),c&&c.current&&v(c.current.clientWidth*1.25),m?.()},children:x}),r,h,g]}},3548:(ne,j,e)=>{"use strict";e.d(j,{i:()=>l});var n=e(74848),a=e(15874),s=e(43173),d=e(58755);const o=s.$.featureToggles.restrictedPluginApis?{alertingAlertRuleFormSchema:d.aK.alertingAlertRuleFormSchema}:{};function l({children:i,pluginId:c}){return(0,n.jsx)(a.Bm,{pluginId:c,apis:o,apiAllowList:s.$.bootData.settings.pluginRestrictedAPIsAllowList,apiBlockList:s.$.bootData.settings.pluginRestrictedAPIsBlockList,children:i})}},3594:(ne,j,e)=>{"use strict";e.d(j,{R:()=>a,w:()=>n});const n=s=>Object.keys(s).reduce((d,o)=>(s[o]!==void 0&&(d[o]=s[o]),d),{}),a=s=>typeof s=="object"&&s!==null&&Object.keys(s).length===0},3642:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>C,QH:()=>m,Jd:()=>y});var n=e(74848),a=e(22803),s=e(73287),d=e(92745),o=e(31200),l=e(27489),i=e(63142),c=e(76319),p=e(44720),h=e(53593);const u=(P,T)=>({rowWrapper:(0,a.css)({position:"relative",minWidth:m,paddingRight:"5px"}),rowValue:(0,a.css)({whiteSpace:"nowrap",overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",display:"block",paddingRight:"10px","&::-webkit-scrollbar":{display:"none"},"&:before":{pointerEvents:"none",content:"''",width:"100%",height:"100%",position:"absolute",left:0,top:0,background:`linear-gradient(to right, transparent calc(100% - 25px), ${P.colors.background.primary})`}}),rowValuesWrap:(0,a.css)({paddingLeft:y,width:`calc(${T} * ${m})`,display:"flex"})}),r=({totalNumberOfValues:P,values:T,hideFieldsWithoutValues:M})=>{const I=(0,i.of)(u,P);return(0,n.jsx)("div",{role:"cell",className:I.rowValuesWrap,children:T?.map(B=>M&&(B.value===void 0||B.value===h.M)?null:(0,n.jsx)("span",{className:I.rowWrapper,children:(0,n.jsx)("span",{className:I.rowValue,children:B.value})},B.key))})},v=P=>{const T=P.isDark?"#ce9178":"#a31515",M=P.isDark?"#73bf69":"#56a64b";return{metricName:(0,a.css)({color:M}),metricValue:(0,a.css)({color:T}),expanded:(0,a.css)({display:"block",textIndent:"1em"})}},E=({value:P,index:T,length:M,isExpandedView:I})=>{const B=(0,i.of)(v),U=P.key,W=P.value;return(0,n.jsxs)("span",{className:I?B.expanded:"",children:[(0,n.jsx)("span",{className:B.metricName,children:U}),(0,n.jsx)("span",{children:"="}),(0,n.jsx)("span",{children:'"'}),(0,n.jsx)("span",{className:B.metricValue,children:W}),(0,n.jsx)("span",{children:'"'}),T<M-1&&(0,n.jsx)("span",{children:", "})]},T)},x="20px",m="80px",y="25px",b=(P,T,M)=>({rowWrapper:(0,a.css)({borderBottom:`1px solid ${P.colors.border.medium}`,display:"flex",position:"relative",paddingLeft:"22px",alignItems:M?"":"center",height:M?"":"100%"}),copyToClipboardWrapper:(0,a.css)({position:"absolute",left:0,bottom:M?"":"0",top:M?"4px":"0",margin:"auto",zIndex:1,height:"16px",width:"16px"}),rowLabelWrapWrap:(0,a.css)({position:"relative",width:`calc(100% - (${T} * ${m}) - ${y})`}),rowLabelWrap:(0,a.css)({whiteSpace:"nowrap",overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",paddingRight:x,"&::-webkit-scrollbar":{display:"none"},"&:after":{pointerEvents:"none",content:"''",width:"100%",height:"100%",position:"absolute",left:0,top:0,background:`linear-gradient(to right, transparent calc(100% - ${x}), ${P.colors.background.primary})`}})});function D(P){let T=[],M=[];for(const I in P)I in P&&P[I]&&!I.includes("Value")?T.push({key:I,value:P[I]}):I in P&&P[I]&&I.includes("Value")&&M.push({key:I,value:P[I]});return{values:M,attributeValues:T}}const C=({listItemData:P,listKey:T,totalNumberOfValues:M,valueLabels:I,isExpandedView:B})=>{const{__name__:U,...W}=P,V=(0,o.Rq)(U??""),[z,R]=(0,s.A)(),O=I?.length??M,N=(0,i.of)(b,O,B),{values:F,attributeValues:G}=D(W),H=Q=>Q==="\u221E"||Q==="Infinity"?"+Inf":Q,K=`${V?U:""}{${V?"":`"${U}", `}${G.map(Q=>`${(0,o.Nc)(Q.key)}="${H(Q.value)}"`)}}`,w=!!(I&&I?.length);return(0,n.jsxs)(n.Fragment,{children:[I!==void 0&&B&&(0,n.jsx)(p.d,{valueLabels:I,expanded:B}),(0,n.jsxs)("div",{className:N.rowWrapper,children:[(0,n.jsx)("span",{className:N.copyToClipboardWrapper,children:(0,n.jsx)(c.K,{tooltip:(0,d.t)("explore.raw-list-item.tooltip-copy-to-clipboard","Copy to clipboard"),onClick:()=>{(0,l.rR)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),R(K)},name:"copy"})}),(0,n.jsx)("span",{role:"cell",className:N.rowLabelWrapWrap,children:(0,n.jsxs)("div",{className:N.rowLabelWrap,children:[!!U&&V&&(0,n.jsx)("span",{children:U}),(0,n.jsx)("span",{children:"{"}),!V&&!!U&&U!==""&&(0,n.jsxs)("span",{children:['"',U,'"',", "]}),(0,n.jsx)("span",{children:G.map((Q,k)=>(0,n.jsx)(E,{isExpandedView:B,value:Q,index:k,length:G.length},k))}),(0,n.jsx)("span",{children:"}"})]})}),(0,n.jsx)(r,{hideFieldsWithoutValues:w,totalNumberOfValues:O,values:F})]},T)]})}},3688:(ne,j,e)=>{"use strict";e.d(j,{y:()=>n});function n(a){return"isDashboardLayoutItem"in a}},3845:(ne,j,e)=>{"use strict";e.d(j,{f:()=>ee,R:()=>_});var n=e(74848),a=e(96540),s=e(92745),d=e(43173),o=e(34999),l=e(6975),i=e(50201),c=e(41654),p=e(66404),h=e(45967),u=e(45861),r=e(74268),v=e(70327),g=e(16692),E=e(52161),x=e(77256),m=e(8207),y=e(2543),b=e(80011),D=e(31286),f=e(30703),C=e(3271),P=e(34753),T=e(1199),M=e(61371);const I=({info:ae})=>{const{createdAt:le,createdBy:L,version:ie,message:oe=""}=ae,ue=(0,b.fq)(le);return(0,n.jsxs)(s.x6,{i18nKey:"core.versionHistory.comparison.header.text",children:["Version ",{version:ie}," updated by ",{createdBy:L}," (",{ageString:ue},") ",{message:oe}]})},B=({oldSummary:ae,newSummary:le,oldVersion:L,newVersion:ie,preprocessVersion:oe=y.identity,showRestoreButton:ue=!1,onRestore:ye})=>{const fe=(0,M.G4)(oe(L),oe(ie)),Ee=Object.entries(fe).length===0,[Ae,Ge]=(0,a.useState)(Ee);return(0,n.jsxs)(c.B,{gap:2,direction:"column",children:[(0,n.jsx)(D.a,{children:(0,n.jsxs)(p.E,{variant:"h5",element:"h4",children:[(0,n.jsx)(I,{info:ae}),(0,n.jsx)(f.I,{name:"arrow-right"}),(0,n.jsx)(I,{info:le})]})}),(0,n.jsxs)(D.a,{children:[Ee&&(0,n.jsx)(i.p,{message:(0,s.t)("core.versionHistory.no-properties-changed","No relevant properties changed"),variant:"not-found",hideImage:!0,children:(0,n.jsx)(s.x6,{i18nKey:"core.versionHistory.view-json-diff",children:"View JSON diff to see all changes"})}),Object.entries(fe).map(([Fe,Pe])=>(0,n.jsx)(P.D,{diffs:Pe,title:Fe},Fe)),(0,n.jsx)(C.c,{})]}),(0,n.jsxs)(c.B,{gap:2,direction:"row",justifyContent:"space-between",children:[(0,n.jsxs)(u.$n,{variant:"secondary",onClick:()=>{Ge(!Ae)},children:[Ae&&(0,n.jsx)(s.x6,{i18nKey:"core.versionHistory.comparison.header.hide-json-diff",children:"Hide JSON diff "}),!Ae&&(0,n.jsx)(s.x6,{i18nKey:"core.versionHistory.comparison.header.show-json-diff",children:"Show JSON diff "})]}),ue&&(0,n.jsx)(u.$n,{variant:"destructive",onClick:ye,icon:"history",children:(0,n.jsxs)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore-version",children:["Restore to version ",{version:ae.version}]})})]}),Ae&&(0,n.jsx)(T.M,{oldValue:JSON.stringify(L,null,2),newValue:JSON.stringify(ie,null,2)})]})};var U=e(54148),W=e(5556),V=e(71599),z=e(44109),R=e(20437),O=e(23390),N=e(80218),F=e(94646),G=e(29609);function H(){const[ae]=(0,O.pU)();return(0,N.Yb)(async(le,L)=>{const ie=(0,G.I2)(L),oe=(0,F.mw)(ie,le);return ae.execute(ie,oe,le,{dataSourceName:E.hY,namespaceName:le.grafana_alert.namespace_uid,groupName:le.grafana_alert.rule_group})})}var K=e(21241);const w=({isOpen:ae,baseVersion:le,versionToRestore:L,ruleIdentifier:ie,onDismiss:oe,onRestoreSucess:ue,onRestoreError:ye})=>{const{result:fe}=(0,z.Ll)({ruleIdentifier:ie}),Ee=(0,U.Zp)(),[Ae,{error:Ge}]=H(),Fe=(0,s.t)("alerting.alertVersionHistory.restore-modal.title","Restore version"),Pe=(0,s.t)("alerting.alertVersionHistory.restore-modal.error","Could not restore alert rule version "),Ve=Ge?"Manually restore rule":(0,s.t)("alerting.alertVersionHistory.restore-modal.confirm","Yes, restore configuration"),me=le&&L?(0,M.G4)((0,K.L0)(le),(0,K.L0)(L)):void 0;async function Se(){if(!(!L||!fe))return Ae.execute(L,fe).then(()=>{oe(),ue()}).catch(Ue=>{ye(Ue)})}async function Qe(){if(!L||!fe)return;const Ue=(0,R.QX)({...fe,rule:L}),Ie=W.kM.renderUrl(`/alerting/${ie.uid}/edit`,{isManualRestore:!0,defaults:JSON.stringify(Ue),returnTo:window.location.pathname+window.location.search});Ee(Ie)}return(0,n.jsx)(V.u,{isOpen:ae,title:Fe,confirmText:Ve,confirmButtonVariant:Ge?"primary":"destructive",body:(0,n.jsxs)(c.B,{direction:"column",gap:2,children:[!Ge&&(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore-modal.body",children:"Are you sure you want to restore the alert rule definition to this version? All unsaved changes will be lost."}),(0,n.jsx)(p.E,{variant:"h6",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore-modal.summary",children:"Summary of changes to be applied:"})}),(0,n.jsx)("div",{children:me&&Object.entries(me).map(([Ue,Ie])=>(0,n.jsx)(P.D,{diffs:Ie,title:Ue},Ue))}),Ge&&(0,n.jsxs)(o.F,{severity:"warning",title:Pe,children:[(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore-manually",children:"Your alert rule could not be restored. This may be due to changes to other entities such as contact points, data sources etc. Please manually restore the rule version"}),(0,n.jsx)("pre",{style:{marginBottom:0},children:(0,n.jsx)("code",{children:(0,x.JZ)(Ge)})})]})]}),onConfirm:Ge?Qe:Se,onDismiss:oe})},Q=({oldVersion:ae,newVersion:le,ruleIdentifier:L,isNewLatest:ie,setShowDrawer:oe,onRestoreSuccess:ue,onRestoreError:ye,canRestore:fe})=>{const[Ee,Ae]=(0,a.useState)(!1),Ge=(0,a.useCallback)(()=>oe(!1),[oe]),Fe=(0,K.Lw)(ae),Pe=(0,K.Lw)(le);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m._,{onClose:()=>oe(!1),title:(0,s.t)("alerting.alertVersionHistory.comparing-versions","Comparing versions"),children:(0,n.jsx)(B,{oldSummary:Fe,oldVersion:ae,newSummary:Pe,newVersion:le,preprocessVersion:K.L0,showRestoreButton:ie&&fe,onRestore:()=>Ae(!0)})}),Ee&&(0,n.jsx)(w,{ruleIdentifier:L,baseVersion:le,versionToRestore:ae,isOpen:Ee,onDismiss:Ge,onRestoreSucess:ue,onRestoreError:ye})]})};var k=e(32635),te=e(99887),q=e(27594),se=e(85835),re=e(49914);const Y=20;function X({onVersionsChecked:ae,onCompareSingleVersion:le,ruleVersions:L,disableSelection:ie,checkedVersions:oe,onRestoreSuccess:ue,onRestoreError:ye,canRestore:fe}){const[Ee,Ae]=(0,a.useState)(!1),[Ge,Fe]=(0,a.useState)(),Pe=Ge?.grafana_alert?.uid??"",Ve=(0,a.useMemo)(()=>({ruleSourceName:E.hY,uid:Pe}),[Pe]),me=Ie=>{Ae(!0),Fe(Ie)},Se=()=>{Ae(!1)},Qe=(0,s.t)("alerting.alertVersionHistory.unknown","Unknown"),Ue=[{disableGrow:!0,id:"id",header:(0,s.t)("core.versionHistory.table.version","Version"),cell:({row:Ie})=>{const Re=String(Ie.original.grafana_alert.version),Ke=oe.has(String(Re??!1))??!1;return(0,n.jsx)(c.B,{direction:"row",children:(0,n.jsx)(k.S,{label:Re,checked:Ke,disabled:ie&&!Ke,onChange:()=>{ae(Re)}})})}},{id:"createdBy",header:(0,s.t)("core.versionHistory.table.updatedBy","Updated By"),disableGrow:!0,cell:({row:Ie})=>(0,n.jsx)(re.m,{user:Ie.original.grafana_alert.updated_by})},{id:"created",header:(0,s.t)("core.versionHistory.table.updated","Date"),disableGrow:!0,cell:({row:Ie})=>{const Re=Ie.original.grafana_alert.updated;return Re?(0,b.LE)(Re)+" ("+(0,b.fq)(Re)+")":Qe}},{id:"diff",disableGrow:!0,cell:({rows:Ie,row:Re})=>{const Le=Re.index===L.length-1?{}:Ie[Re.index+1]?.original,ze=Re.original,Be=(0,se.h)(Le,ze),$e=`+${Be.added}`,Ye=`-${Be.removed}`;return(0,n.jsxs)(c.B,{alignItems:"baseline",gap:.5,children:[(0,n.jsx)(p.E,{color:"success",variant:"bodySmall",children:$e}),(0,n.jsx)(p.E,{color:"error",variant:"bodySmall",children:Ye})]})}},{id:"actions",disableGrow:!0,cell:({row:Ie})=>{const Re=Ie.index===0,Ke=(0,s.t)("alerting.alertVersionHistory.compare-with-latest","Compare with latest version");return(0,n.jsxs)(c.B,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:[Re&&(0,n.jsx)(te.E,{text:(0,s.t)("alerting.alertVersionHistory.latest","Latest"),color:"blue"}),!Re&&fe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.$n,{variant:"secondary",size:"sm",icon:"code-branch",onClick:()=>{le(Ie.original)},tooltip:Ke,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.compare",children:"Compare"})}),(0,n.jsx)(u.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Ie.original.grafana_alert.version&&me(Ie.original)},children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore",children:"Restore"})})]})]})}}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.j,{pageSize:Y,columns:Ue,data:L,getRowId:Ie=>`${Ie.grafana_alert.version}`}),(0,n.jsx)(w,{ruleIdentifier:Ve,baseVersion:L[0],versionToRestore:Ge,isOpen:Ee,onDismiss:Se,onRestoreSucess:ue,onRestoreError:ye})]})}const{useGetAlertVersionHistoryQuery:J}=v.hK,_=["id","uid","updated","updated_by","version"];function ee({rule:ae}){const le=ae.grafana_alert.uid,{isLoading:L,currentData:ie=[],error:oe}=J({uid:le}),ue=(0,a.useMemo)(()=>({ruleSourceName:E.hY,uid:le}),[le]),[ye,fe]=(0,a.useState)(),[Ee,Ae]=(0,a.useState)(),[Ge,Fe]=(0,a.useState)(!1),[Pe,Ve]=(0,a.useState)(new Set),me=(0,a.useMemo)(()=>Pe.size>1,[Pe]),Se={namespace:{uid:ae.grafana_alert.namespace_uid},groupName:ae.grafana_alert.rule_group,groupOrigin:"grafana"},[Qe,Ue]=(0,g.mW)(ae,Se,g.j5.Restore),Ie=Ue&&Qe&&!!d.$.featureToggles.alertingRuleVersionHistoryRestore,Re=(0,a.useCallback)(Ye=>{(0,r.cg)({origin:Ye,latest:Ee===ie[0],oldVersion:ye?.grafana_alert.version||0,newVersion:Ee?.grafana_alert.version||0})},[ye,Ee,ie]),Ke=(0,a.useCallback)((Ye,de)=>{(0,r.XW)({origin:Ye,latest:Ee===ie[0],oldVersion:ye?.grafana_alert.version||0,newVersion:Ee?.grafana_alert.version||0,error:de})},[ye,Ee,ie]);if(oe)return(0,n.jsx)(o.F,{title:(0,s.t)("alerting.alertVersionHistory.errorloading","Failed to load alert rule versions"),children:(0,x.JZ)(oe)});if(L)return(0,n.jsx)(l._,{text:(0,s.t)("alerting.common.loading","Loading...")});if(!ie.length)return(0,r.fH)(r.le.noAlertRuleVersionsFound,{ruleUid:le}),(0,n.jsx)(i.p,{variant:"not-found",message:(0,s.t)("alerting.alertVersionHistory.noVersionsFound","No versions found for this rule")});const Le=()=>{const[Ye,de]=ie.filter(ge=>{const pe=ge.grafana_alert.version;if(!(!pe&&pe!==0))return Pe.has(String(ge.grafana_alert.version))}).sort((ge,pe)=>{const De=ge.grafana_alert.version,Me=pe.grafana_alert.version;return De===void 0||Me===void 0?0:De-Me});(0,r.Rh)({latest:de===ie[0],oldVersion:Ye?.grafana_alert.version||0,newVersion:de?.grafana_alert.version||0}),ze(Ye,de)},ze=(Ye,de)=>{fe(Ye),Ae(de),Fe(!0)};function Be(Ye){Ve(de=>{const ge=new Set(de);return ge.has(Ye)?ge.delete(Ye):ge.add(Ye),ge}),fe(void 0),Ae(void 0)}const $e=ie[0].grafana_alert.version===Ee?.grafana_alert.version;return(0,n.jsxs)(c.B,{direction:"column",gap:2,children:[(0,n.jsx)(p.E,{variant:"body",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.description",children:"Each time you edit the alert rule, a new version is created. Select two versions below and compare their differences."})}),(0,n.jsx)(c.B,{children:(0,n.jsx)(h.m,{content:(0,s.t)("core.versionHistory.comparison.select","Select two versions to start comparing"),placement:"bottom",children:(0,n.jsx)(u.$n,{type:"button",disabled:!me,onClick:Le,icon:"code-branch",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.compareVersions",children:"Compare versions"})})})}),Ge&&ye&&Ee&&(0,n.jsx)(Q,{oldVersion:ye,newVersion:Ee,ruleIdentifier:ue,isNewLatest:$e,setShowDrawer:Fe,onRestoreSuccess:()=>Re("comparison-drawer"),onRestoreError:Ye=>Ke("comparison-drawer",Ye),canRestore:Ie}),(0,n.jsx)(X,{onCompareSingleVersion:Ye=>ze(Ye,ie[0]),onVersionsChecked:Be,ruleVersions:ie,disableSelection:me,checkedVersions:Pe,onRestoreSuccess:()=>Re("version-list"),onRestoreError:Ye=>Ke("version-list",Ye),canRestore:Ie})]})}},3887:(ne,j,e)=>{"use strict";e.d(j,{MX:()=>a,sW:()=>s,v4:()=>n});const n=Symbol("receiver_status"),a=Symbol("receiver_metadata"),s=Symbol("receiver_plugin_metadata")},3936:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>o});var n=e(74848),a=e(92745),s=e(21285),d=e(18027);function o({options:l,onOptionsChange:i}){return(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"page-heading",children:(0,n.jsx)(a.x6,{i18nKey:"grafana-ui.data-source-settings.secure-socks-heading",children:"Secure Socks Proxy"})}),(0,n.jsx)("div",{className:"gf-form-group",children:(0,n.jsx)("div",{className:"gf-form-inline",children:(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)(d.I,{labelWidth:26,label:(0,a.t)("grafana-ui.data-source-settings.secure-socks-label","Enabled"),tooltip:(0,a.t)("grafana-ui.data-source-settings.secure-socks-tooltip","Connect to this datasource via the secure socks proxy."),children:(0,n.jsx)(s.K,{value:l.jsonData.enableSecureSocksProxy??!1,onChange:c=>i({...l,jsonData:{...l.jsonData,enableSecureSocksProxy:c.currentTarget.checked}})})})})})})]})}},3969:(ne,j,e)=>{"use strict";e.d(j,{l:()=>M});var n=e(74848),a=e(2543),s=e.n(a),d=e(96540),o=e(92745),l=e(45861),i=e(41654),c=e(94380),p=e(53567),h=e(90186),u=e(2218),r=e(96784),v=e(52763),g=e(16692),E=e(11018),x=e(52161),m=e(67598),y=e(77256),b=e(94646),D=e(29609),f=e(92367),C=e(63301),P=e(14050);const T=I=>window.matchMedia(`(max-width: ${I}px)`).matches,M=({compact:I,showViewButton:B,rule:U,rulesSource:W})=>{const V=(0,v.wA)(),z=!I,[R,O]=(0,p.w)(z),[N,F]=(0,d.useState)(!1),[G,H]=(0,d.useState)(!1),[K,w]=(0,d.useState)(void 0),{namespace:Q,group:k,rulerRule:te}=U,{hasActiveFilters:q}=(0,r.dI)(),se=D.p.grafana.rule(U.rulerRule)&&!!U.rulerRule.grafana_alert.provenance,[re,Y]=(0,g.mh)(U,g.j5.Update),X=re&&Y,J=[],_=I?"sm":"md",ee=(0,x.EV)(W),ae=b.UP(ee,U),le=m.HA.fromCombinedRule(U);if(B&&J.push((0,n.jsx)(l.z9,{title:(0,o.t)("alerting.rule-actions-buttons.title-view","View"),size:_,variant:"secondary",icon:"eye",href:(0,y.w$)(W,U),children:(0,n.jsx)(o.x6,{i18nKey:"common.view",children:"View"})},"view")),te&&X){const oe=b.P1(ee,Q.name,k.name,te),ue=(0,f.G)(`/alerting/${encodeURIComponent(b.$9(oe))}/edit`);J.push((0,n.jsx)(l.z9,{title:(0,o.t)("alerting.rule-actions-buttons.title-edit","Edit"),size:_,variant:"secondary",icon:"pen",href:ue,children:(0,n.jsx)(o.x6,{i18nKey:"common.edit",children:"Edit"})},"edit"))}if(!U.promRule&&!U.rulerRule)return null;const L=(0,D.xE)(U.rulerRule??U.promRule),ie=(0,a.isString)(L)&&(D.p.grafana.alertingRule(U.rulerRule)||D.R$.grafana.alertingRule(U.promRule));return(0,n.jsxs)(i.B,{gap:1,alignItems:"center",wrap:"nowrap",children:[J,(0,n.jsx)(c.A,{rulerRule:U.rulerRule,promRule:U.promRule,identifier:ae,groupIdentifier:le,handleDelete:()=>{if(U.rulerRule){const oe=b.co(le,U.rulerRule);O(oe,le)}},handleSilence:()=>F(!0),handleManageEnrichments:()=>H(!0),handleDuplicateRule:()=>w({identifier:ae,isProvisioned:se}),onPauseChange:()=>{const oe=q?void 0:h.Ys+1;V((0,E.Lc)({rulesSourceName:x.hY,limitAlerts:oe}))},buttonSize:_}),R,ie&&N&&(0,n.jsx)(u.A,{ruleUid:L,onClose:()=>F(!1)}),L&&G&&(0,n.jsx)(C.E,{ruleUid:L,onClose:()=>H(!1)}),K?.identifier&&(0,n.jsx)(P.Z,{identifier:K.identifier,isProvisioned:K.isProvisioned,onDismiss:()=>w(void 0)})]})}},3986:(ne,j,e)=>{"use strict";e.d(j,{_:()=>s});var n=e(16817),a=e(95027);function s(d){const{loading:o,error:l,value:i}=(0,n.A)(()=>(0,a.x)(d,{showErrorAlert:!1})),c=i&&!l&&!o,p=i?.enabled;return o&&!i?{loading:!0}:!c||!p?{loading:!1,installed:!1}:{loading:o,installed:!0,settings:i}}},4137:(ne,j,e)=>{"use strict";e.d(j,{Zx:()=>C,aK:()=>m});var n=e(74848),a=e(22803),s=e(96540),d=e(16817),o=e(63704),l=e(51898),i=e(92745),c=e(30703),p=e(87063),h=e(45861),u=e(92807),r=e(88559),v=e(63142),g=e(55860),E=e(82345);function x({dashboardUID:P,link:T}){const M=(0,v.of)(f),I=y({dashboardUID:P,link:T});return!I||I.length===0?(0,n.jsx)(p.W,{children:(0,n.jsx)(p.W.Item,{disabled:!0,label:(0,i.t)("dashboard.dashboard-links-menu.label-no-dashboards-found","No dashboards found")})}):(0,n.jsx)(p.W,{children:(0,n.jsx)("div",{className:M.dropdown,children:(0,n.jsx)(u.P,{maxHeight:"inherit",children:I.map((B,U)=>(0,n.jsx)(p.W.Item,{url:B.url,target:T.targetBlank?"_blank":void 0,label:B.title,testId:l.Tp.components.DashboardLinks.link,"aria-label":(0,i.t)("dashboard.dashboard-links-menu.aria-label-dashboard-name","{{dashboardName}} dashboard",{dashboardName:B.title})},`dashlinks-dropdown-item-${B.uid}-${U}`))})})})}const m=({link:P,linkInfo:T,dashboardUID:M})=>{const{title:I}=T,B=y({link:P,dashboardUID:M}),U=(0,v.of)(f);return P.asDropdown?(0,n.jsx)(r.m,{overlay:(0,n.jsx)(x,{link:P,dashboardUID:M}),children:(0,n.jsxs)(C,{"data-placement":"bottom","data-toggle":"dropdown","aria-controls":"dropdown-list","aria-haspopup":"menu",fill:"outline",variant:"secondary","data-testid":l.Tp.components.DashboardLinks.dropDown,children:[(0,n.jsx)(c.I,{"aria-hidden":!0,name:"bars",className:U.iconMargin}),(0,n.jsx)("span",{children:I})]})}):(0,n.jsx)(n.Fragment,{children:B.length>0&&B.map((W,V)=>(0,n.jsx)(C,{icon:"apps",variant:"secondary",fill:"outline",href:W.url,target:P.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":l.Tp.components.DashboardLinks.link,children:W.title},`dashlinks-list-item-${W.uid}-${V}`))})},y=({link:P,dashboardUID:T})=>{const{tags:M}=P,I=(0,d.A)(()=>b(M),[M]);return I.value?D(T,P,I.value.view):[]};async function b(P){return(0,g.S)().search({limit:100,tags:P,kind:["dashboard"]})}function D(P,T,M,I={getLinkSrv:E.mQ,sanitize:o.aj,sanitizeUrl:o.Jf}){const B=[];for(const U of M){if(U.uid===P)continue;const W=U.uid,V=I.sanitize(U.name),z=I.getLinkSrv().getLinkUrl({...T,url:U.url}),R=I.sanitizeUrl(z);B.push({uid:W,title:V,url:R})}return B}function f(P){return{iconMargin:(0,a.css)({marginRight:P.spacing(.5)}),dropdown:(0,a.css)({maxWidth:"max(30vw, 300px)",maxHeight:"70vh"}),button:(0,a.css)({color:P.colors.text.primary}),dashButton:(0,a.css)({fontSize:P.typography.bodySmall.fontSize,paddingLeft:P.spacing(1),paddingRight:P.spacing(1)})}}const C=(0,s.forwardRef)(({className:P,...T},M)=>{const I=(0,v.of)(f),B=T.href?h.z9:h.$n;return(0,n.jsx)(B,{...T,variant:"secondary",fill:"outline",className:(0,a.cx)(P,I.dashButton),ref:M})});C.displayName="DashboardLinkButton"},4268:(ne,j,e)=>{"use strict";e.d(j,{t:()=>B});var n=e(74848),a=e(96540),s=e(57852),d=e(739),o=e(64400),l=e(49256),i=e(22803),c=e(63142),p=e(12569),h=e(5585),u=e(89123);const r=({items:U,itemRenderer:W,onLabelMouseOver:V,onLabelMouseOut:z,onLabelClick:R,placement:O,className:N,readonly:F})=>{const G=(0,c.of)(v);W||(W=K=>(0,n.jsx)(u.M,{item:K,onLabelClick:R,onLabelMouseOver:V,onLabelMouseOut:z,readonly:F}));const H=K=>`${K.getItemKey?K.getItemKey():K.label}`;switch(O){case"right":{const K=(w,Q)=>(0,n.jsx)("span",{className:G.itemRight,children:W(w,Q)});return(0,n.jsx)("div",{className:(0,i.cx)(G.rightWrapper,N),children:(0,n.jsx)(h.B,{items:U,renderItem:K,getItemKey:H})})}case"bottom":default:{const K=U.filter(k=>k.yAxis===1),w=U.filter(k=>k.yAxis!==1),Q=(k,te)=>(0,n.jsx)("span",{className:G.itemBottom,children:W(k,te)});return(0,n.jsxs)("div",{className:(0,i.cx)(G.bottomWrapper,N),children:[K.length>0&&(0,n.jsx)("div",{className:G.section,children:(0,n.jsx)(p.c,{items:K,renderItem:Q,getItemKey:H})}),w.length>0&&(0,n.jsx)("div",{className:(0,i.cx)(G.section,G.sectionRight),children:(0,n.jsx)(p.c,{items:w,renderItem:Q,getItemKey:H})})]})}}};r.displayName="VizLegendList";const v=U=>{const W=(0,i.css)({paddingRight:"10px",display:"flex",fontSize:U.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:W,itemRight:(0,i.cx)(W,(0,i.css)({marginBottom:U.spacing(.5)})),rightWrapper:(0,i.css)({padding:U.spacing(.5)}),bottomWrapper:(0,i.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",padding:U.spacing(.5),gap:"15px 25px"}),section:(0,i.css)({display:"flex"}),sectionRight:(0,i.css)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};var g=e(30703),E=e(55386),x=e(92745),m=e(35484),y=e(87);const b=({item:U,onLabelClick:W,onLabelMouseOver:V,onLabelMouseOut:z,className:R,readonly:O})=>{const N=(0,c.of)(D),F=(0,a.useCallback)(K=>{V&&V(U,K)},[U,V]),G=(0,a.useCallback)(K=>{z&&z(U,K)},[U,z]),H=(0,a.useCallback)(K=>{W&&W(U,K)},[U,W]);return(0,n.jsxs)("tr",{className:(0,i.cx)(N.row,R),children:[(0,n.jsx)("td",{children:(0,n.jsxs)("span",{className:N.itemWrapper,children:[(0,n.jsx)(y.R,{color:U.color,seriesName:U.fieldName??U.label,readonly:O,lineStyle:U.lineStyle}),(0,n.jsxs)("button",{disabled:O,type:"button",title:U.label,onBlur:G,onFocus:F,onMouseOver:F,onMouseOut:G,onClick:O?void 0:H,className:(0,i.cx)(N.label,U.disabled&&N.labelDisabled),children:[U.label," ",U.yAxis===2&&(0,n.jsx)("span",{className:N.yAxisLabel,children:(0,n.jsx)(x.x6,{i18nKey:"grafana-ui.viz-legend.right-axis-indicator",children:"(right y-axis)"})})]})]})}),U.getDisplayValues&&U.getDisplayValues().map((K,w)=>(0,n.jsx)("td",{className:N.value,children:(0,E.cN)(K)},`${K.title}-${w}`))]})};b.displayName="LegendTableItem";const D=U=>{const W=(0,m.hoverColor)(U.colors.background.primary,U);return{row:(0,i.css)({label:"LegendRow",fontSize:U.v1.typography.size.sm,borderBottom:`1px solid ${U.colors.border.weak}`,td:{padding:U.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:W}}),label:(0,i.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden",userSelect:"text"}),labelDisabled:(0,i.css)({label:"LegendLabelDisabled",color:U.colors.text.disabled}),itemWrapper:(0,i.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,i.css)({textAlign:"right"}),yAxisLabel:(0,i.css)({color:U.colors.text.secondary})}},f="Name",C=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare,P=({items:U,sortBy:W,sortDesc:V,itemRenderer:z,className:R,onToggleSort:O,onLabelClick:N,onLabelMouseOver:F,onLabelMouseOut:G,readonly:H,isSortable:K})=>{const w=(0,c.of)(T),Q={};K&&(Q[f]="");for(const k of U)if(k.getDisplayValues)for(const te of k.getDisplayValues())Q[te.title??"?"]=te.description??"";if(W!=null){let k=new Map;U.forEach(q=>{if(W!==f&&q.getDisplayValues){const se=q.getDisplayValues().find(Y=>Y.title===W),re=se==null||Number.isNaN(se.numeric)?-1/0:se.numeric;k.set(q,re)}});let te=V?-1:1;W===f?U.sort((q,se)=>te*C(q.label,se.label)):U.sort((q,se)=>{const re=k.get(q)??0,Y=k.get(se)??0;return te*(re-Y)})}return z||(z=(k,te)=>(0,n.jsx)(b,{item:k,onLabelClick:N,onLabelMouseOver:F,onLabelMouseOut:G,readonly:H},`${k.label}-${te}`)),(0,n.jsxs)("table",{className:(0,i.cx)(w.table,R),children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[!K&&(0,n.jsx)("th",{}),Object.keys(Q).map(k=>(0,n.jsxs)("th",{title:Q[k],className:(0,i.cx)(w.header,O&&w.headerSortable,K&&w.nameHeader,{[w.withIcon]:W===k}),onClick:()=>{O&&O(k)},children:[k,W===k&&(0,n.jsx)(g.I,{size:"xs",name:V?"angle-down":"angle-up"})]},k))]})}),(0,n.jsx)("tbody",{children:U.map(z)})]})},T=U=>({table:(0,i.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${U.colors.border.weak}`}}),header:(0,i.css)({color:U.colors.primary.text,fontWeight:U.typography.fontWeightMedium,borderBottom:`1px solid ${U.colors.border.weak}`,padding:U.spacing(.25,1,.25,1),fontSize:U.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,i.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,i.css)({paddingRight:"4px"}),headerSortable:(0,i.css)({cursor:"pointer"})});var M=e(22940);function I(U){return U.ctrlKey||U.metaKey||U.shiftKey?l.B.AppendToSelection:l.B.ToggleSelection}function B({items:U,thresholdItems:W,mappingItems:V,displayMode:z,sortBy:R,seriesVisibilityChangeBehavior:O=M.K.Isolate,sortDesc:N,onLabelClick:F,onToggleSort:G,placement:H,className:K,itemRenderer:w,readonly:Q,isSortable:k}){const{eventBus:te,onToggleSeriesVisibility:q,onToggleLegendSort:se}=(0,o.d2)(),re=(0,a.useCallback)((_,ee)=>{te?.publish({type:s.b_.type,payload:{raw:ee,x:0,y:0,dataId:_.label}})},[te]),Y=(0,a.useCallback)((_,ee)=>{te?.publish({type:s.ql.type,payload:{raw:ee,x:0,y:0,dataId:_.label}})},[te]),X=(0,a.useCallback)((_,ee)=>{F&&F(_,ee),q&&q(_.fieldName??_.label,O===M.K.Hide?l.B.AppendToSelection:I(ee))},[q,F,O]),J=(0,a.useCallback)(_=>(0,n.jsx)(r,{className:K,placement:H,onLabelMouseOver:re,onLabelMouseOut:Y,onLabelClick:X,itemRenderer:w,readonly:Q,items:_}),[K,H,re,Y,X,w,Q]);switch(z){case d.lm.Table:return(0,n.jsx)(P,{className:K,items:U,placement:H,sortBy:R,sortDesc:N,onLabelClick:X,onToggleSort:G||se,onLabelMouseOver:re,onLabelMouseOut:Y,itemRenderer:w,readonly:Q,isSortable:k});case d.lm.List:const _=W&&W.length>1,ee=V&&V.length>0;return(0,n.jsxs)(n.Fragment,{children:[!_&&(!ee||U.length>1)&&J(U),_&&J(W),ee&&J(V)]});default:return null}}B.displayName="VizLegend"},4364:(ne,j,e)=>{"use strict";e.d(j,{r:()=>Ee});var n=e(74848),a=e(22803),s=e(96540),d=e(25229),o=e(17548),l=e(51898),i=e(92745),c=e(63142),p=e(35484),h=e(12737),u=e(30703),r=e(89640),v=e(2543),g=e(62717),E=e(45861),x=e(43243),m=e(37386),y=e(60208),b=e(13941),D=e(54314),f=e(59310),C=e(34788),P=e(44229),T=e(27228),M=e(8431);const I=Ie=>{const{timeZone:Re,fiscalYearStartMonth:Ke,timestamp:Le=Date.now(),onChangeTimeZone:ze,onChangeFiscalYearStartMonth:Be}=Ie,[$e,Ye]=(0,s.useState)(!1),[de,ge]=(0,s.useState)("tz"),pe=(0,s.useId)(),De=(0,s.useId)(),Me=(0,s.useId)(),be=(0,s.useCallback)(We=>{We&&We.stopPropagation(),Ye(!$e)},[$e,Ye]),Oe=(0,c.of)(B);if(!(0,v.isString)(Re))return null;const Ne=(0,g.QZ)(Re,Le);return Ne?(0,n.jsxs)("div",{children:[(0,n.jsxs)("section",{"aria-label":(0,i.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:Oe.container,children:[(0,n.jsxs)("div",{className:Oe.timeZoneContainer,children:[(0,n.jsxs)("div",{className:Oe.timeZone,children:[(0,n.jsx)(T.U,{title:Ne.name}),(0,n.jsx)("div",{className:Oe.spacer}),(0,n.jsx)(C.E,{info:Ne})]}),(0,n.jsx)(P.X,{timeZone:Re,timestamp:Le})]}),(0,n.jsx)("div",{className:Oe.spacer}),(0,n.jsx)(E.$n,{"data-testid":l.Tp.components.TimeZonePicker.changeTimeSettingsButton,variant:"secondary",onClick:be,size:"sm","aria-expanded":$e,"aria-controls":pe,icon:$e?"angle-up":"angle-down",children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.footer.change-settings-button",children:"Change time settings"})})]}),$e?(0,n.jsxs)("div",{className:Oe.editContainer,id:pe,children:[(0,n.jsxs)(D.U,{children:[(0,n.jsx)(y.o,{label:(0,i.t)("time-picker.footer.time-zone-option","Time zone"),active:de==="tz",onChangeTab:()=>{ge("tz")},"aria-controls":De}),(0,n.jsx)(y.o,{label:(0,i.t)("time-picker.footer.fiscal-year-option","Fiscal year"),active:de==="fy",onChangeTab:()=>{ge("fy")},"aria-controls":Me})]}),(0,n.jsx)(b.J,{className:Oe.noBackground,children:de==="tz"?(0,n.jsx)("section",{role:"tabpanel","data-testid":l.Tp.components.TimeZonePicker.containerV2,id:De,className:(0,a.cx)(Oe.timeZoneContainer,Oe.timeSettingContainer),children:(0,n.jsx)(f.U,{includeInternal:!0,onChange:We=>{be(),(0,v.isString)(We)&&ze(We)},onBlur:be,menuShouldPortal:!1})}):(0,n.jsx)("section",{role:"tabpanel","data-testid":l.Tp.components.TimeZonePicker.containerV2,id:Me,className:(0,a.cx)(Oe.timeZoneContainer,Oe.timeSettingContainer),children:(0,n.jsx)(m.D,{className:Oe.fiscalYearField,label:(0,i.t)("time-picker.footer.fiscal-year-start","Fiscal year start month"),children:(0,n.jsx)(x.G,{value:Ke??null,options:(0,M.L)(),onChange:We=>{Be&&Be(We?.value??0)}})})})})]}):null]}):null},B=Ie=>({container:(0,a.css)({borderTop:`1px solid ${Ie.colors.border.weak}`,padding:Ie.spacing(1.5),display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,a.css)({borderTop:`1px solid ${Ie.colors.border.weak}`,padding:Ie.spacing(1.5),paddingTop:0,justifyContent:"space-between",alignItems:"center"}),spacer:(0,a.css)({marginLeft:"7px"}),timeSettingContainer:(0,a.css)({paddingTop:Ie.spacing(1)}),noBackground:(0,a.css)({background:"inherit"}),fiscalYearField:(0,a.css)({marginBottom:0}),timeZoneContainer:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})});var U=e(47087),W=e(44922),V=e(80011),z=e(63527),R=e(45967),O=e(67511),N=e(62348),F=e(18828),G=e(43107),H=e(93225),K=e(59875),w=e(35621),Q=e(66630),k=e(41654);function te({onClose:Ie,onApply:Re}){return(0,n.jsxs)(k.B,{gap:2,justifyContent:"space-between",children:[(0,n.jsx)(E.$n,{variant:"secondary",onClick:Ie,children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.calendar.cancel-button",children:"Cancel"})}),(0,n.jsx)(E.$n,{onClick:Re,children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.calendar.apply-button",children:"Apply time range"})})]})}te.displayName="Footer";var q=e(76319);function se({onClose:Ie}){return(0,n.jsxs)(k.B,{justifyContent:"space-between",children:[(0,n.jsx)(U.e,{children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.calendar.select-time",children:"Select a time range"})}),(0,n.jsx)(q.K,{"data-testid":l.Tp.components.TimePicker.calendar.closeButton,tooltip:(0,i.t)("time-picker.calendar.close","Close calendar"),name:"times",variant:"secondary",onClick:Ie})]})}se.displayName="Header";const re=(Ie,Re=!1)=>({container:(0,a.css)({top:0,position:"absolute",[`${Re?"left":"right"}`]:"546px"}),modalContainer:(0,a.css)({label:"modalContainer",margin:"0 auto"}),calendar:(0,a.css)({display:"flex",flexDirection:"column",gap:Ie.spacing(1),padding:Ie.spacing(1),label:"calendar",boxShadow:Ie.shadows.z3,backgroundColor:Ie.colors.background.elevated,border:`1px solid ${Ie.colors.border.weak}`,borderRadius:Ie.shape.radius.default}),modal:(0,a.css)({label:"modal",boxShadow:Ie.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:Ie.zIndex.modal})});function Y(Ie){const Re=(0,c.$j)(),{modalBackdrop:Ke}=(0,c.of)(w.o),Le=re(Re,Ie.isReversed),{isOpen:ze,isFullscreen:Be,onClose:$e}=Ie,Ye=(0,s.createRef)(),{dialogProps:de}=(0,F.s)({"aria-label":l.Tp.components.TimePicker.calendar.label},Ye),{overlayProps:ge}=(0,H.e)({isDismissable:!0,isOpen:ze,onClose:$e},Ye),pe=!Be;if(!ze)return null;const De=(0,n.jsxs)("section",{className:Le.calendar,ref:Ye,...ge,...de,"data-testid":l.Tp.components.TimePicker.calendar.label,children:[(0,n.jsx)(se,{...Ie}),(0,n.jsx)(Q.nB,{...Ie}),pe&&(0,n.jsx)(te,{...Ie})]});return pe?(0,n.jsxs)(K.Sf,{children:[(0,n.jsx)("div",{className:Ke}),(0,n.jsx)(G.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("div",{className:Le.modal,children:(0,n.jsx)("div",{className:Le.modalContainer,children:De})})})]}):(0,n.jsx)(G.n1,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,n.jsx)("div",{className:Le.container,children:De})})}const X=(0,s.memo)(Y);Y.displayName="TimePickerCalendar";const J={default:()=>(0,i.t)("time-picker.range-content.default-error",'Please enter a past date or "{{now}}"',{now:"now"}),range:()=>(0,i.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},_=Ie=>{const{value:Re,isFullscreen:Ke=!1,timeZone:Le,onApply:ze,isReversed:Be,fiscalYearStartMonth:$e,onError:Ye,weekStart:de}=Ie,[ge,pe]=ae(Re.raw.from,Re.raw.to,Le),De=(0,c.of)(L),[Me,be]=(0,s.useState)(ge),[Oe,Ne]=(0,s.useState)(pe),[We,qe]=(0,s.useState)(!1),st=(0,s.useId)(),rt=(0,s.useId)();(0,s.useEffect)(()=>{const[tt,Ot]=ae(Re.raw.from,Re.raw.to,Le);be(tt),Ne(Ot)},[Re.raw.from,Re.raw.to,Le]);const ot=(0,s.useCallback)(tt=>{tt.preventDefault(),qe(!0)},[qe]),mt=(0,s.useCallback)(()=>{if(Oe.invalid||Me.invalid)return;const tt={from:Me.value,to:Oe.value},Ot=o.convertRawToRange(tt,Le,$e,O.d);ze(Ot)},[Me.invalid,Me.value,ze,Le,Oe.invalid,Oe.value,$e]),pt=(0,s.useCallback)((tt,Ot)=>{const[jt,wt]=ae(tt,Ot,Le);be(jt),Ne(wt)},[Le]),ke=tt=>{tt.key==="Enter"&&mt()},Ze=()=>{const tt=Re.raw,Ot=o.formatRawTimeRange(tt);navigator.clipboard.writeText(JSON.stringify(Ot))},nt=async()=>{const tt=await navigator.clipboard.readText();let Ot;try{Ot=JSON.parse(tt)}catch{Ye&&Ye(tt);return}const[jt,wt]=ae(Ot.from,Ot.to,Le);be(jt),Ne(wt)},ut=o.convertRawToRange({from:"now/fy",to:"now/fy"},Le,$e),gt=(0,n.jsx)("div",{className:De.tooltip,children:o.isFiscal(Re)?(0,n.jsx)(R.m,{content:(0,i.t)("time-picker.range-content.fiscal-year","Fiscal year: {{from}} - {{to}}",{from:ut.from.format("MMM-DD"),to:ut.to.format("MMM-DD")}),children:(0,n.jsx)(u.I,{name:"info-circle"})}):null}),ht=(0,n.jsx)(E.$n,{"aria-label":(0,i.t)("time-picker.range-content.open-input-calendar","Open calendar"),"data-testid":l.Tp.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:ot});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:De.fieldContainer,children:[(0,n.jsx)(m.D,{label:(0,i.t)("time-picker.range-content.from-input","From"),invalid:Me.invalid,error:Me.errorMessage,children:(0,n.jsx)(z.p,{id:st,onClick:tt=>tt.stopPropagation(),onChange:tt=>pt(tt.currentTarget.value,Oe.value),addonAfter:ht,onKeyDown:ke,"data-testid":l.Tp.components.TimePicker.fromField,value:Me.value})}),gt]}),(0,n.jsxs)("div",{className:De.fieldContainer,children:[(0,n.jsx)(m.D,{label:(0,i.t)("time-picker.range-content.to-input","To"),invalid:Oe.invalid,error:Oe.errorMessage,children:(0,n.jsx)(z.p,{id:rt,onClick:tt=>tt.stopPropagation(),onChange:tt=>pt(Me.value,tt.currentTarget.value),addonAfter:ht,onKeyDown:ke,"data-testid":l.Tp.components.TimePicker.toField,value:Oe.value})}),gt]}),(0,n.jsxs)("div",{className:De.buttonsContainer,children:[(0,n.jsx)(E.$n,{"data-testid":l.Tp.components.TimePicker.copyTimeRange,icon:"copy",variant:"secondary",tooltip:(0,i.t)("time-picker.copy-paste.tooltip-copy","Copy time range to clipboard"),type:"button",onClick:Ze}),(0,n.jsx)(E.$n,{"data-testid":l.Tp.components.TimePicker.pasteTimeRange,icon:"clipboard-alt",variant:"secondary",tooltip:(0,i.t)("time-picker.copy-paste.tooltip-paste","Paste time range"),type:"button",onClick:nt}),(0,n.jsx)(E.$n,{"data-testid":l.Tp.components.TimePicker.applyTimeRange,type:"button",onClick:mt,children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.range-content.apply-button",children:"Apply time range"})})]}),(0,n.jsx)(X,{isFullscreen:Ke,isOpen:We,from:(0,W.b)(Me.value,{timeZone:Le}),to:(0,W.b)(Oe.value,{timeZone:Le}),onApply:mt,onClose:()=>qe(!1),onChange:pt,timeZone:Le,isReversed:Be,weekStart:de})]})};function ee(Ie,Re,Ke){const Le={from:Ie,to:Re},ze=o.convertRawToRange(Le,Ke,void 0,O.d);return!(ze.from.isSame(ze.to)||ze.from.isBefore(ze.to))}function ae(Ie,Re,Ke){const Le=le(Ie,Ke),ze=le(Re,Ke),Be=!(0,N.f)(Le,!1,Ke),$e=!(0,N.f)(ze,!0,Ke),Ye=ee(Le,ze,Ke)&&!$e;return[{value:Le,invalid:Be||Ye,errorMessage:Ye&&!Be?J.range():J.default()},{value:ze,invalid:$e,errorMessage:J.default()}]}function le(Ie,Re){if((0,d.Ar)(Ie))return(0,V.LE)(Ie,{timeZone:Re,format:O.d});if(Ie.endsWith("Z")){const Ke=(0,W.b)(Ie);return(0,V.LE)(Ke,{timeZone:Re,format:O.d})}return Ie}function L(Ie){return{fieldContainer:(0,a.css)({display:"flex"}),buttonsContainer:(0,a.css)({display:"flex",gap:Ie.spacing(.5),marginTop:Ie.spacing(1)}),tooltip:(0,a.css)({paddingLeft:Ie.spacing(1),paddingTop:Ie.spacing(3)})}}var ie=e(44398),oe=e(27629);const ue=(Ie,Re)=>o.convertRawToRange({from:Ie.from,to:Ie.to},Re,void 0,O.d),ye=(Ie,Re)=>{const Ke=(0,V.LE)(Ie.from,{timeZone:Re,format:O.d}),Le=(0,V.LE)(Ie.to,{timeZone:Re,format:O.d});let ze=`${Ke} to ${Le}`;return(0,oe.$)("localeFormatPreference")&&(ze=o.describeTimeRange(Ie,Re)),{from:Ke,to:Le,display:ze}},fe=Ie=>{const{quickOptions:Re=[],isReversed:Ke,isFullscreen:Le,hideQuickRanges:ze,timeZone:Be,fiscalYearStartMonth:$e,value:Ye,onChange:de,history:ge,showHistory:pe,className:De,hideTimeZone:Me,onChangeTimeZone:be,onChangeFiscalYearStartMonth:Oe}=Ie,Ne=!ge?.length,We=Le&&pe||!Le&&(pe&&!Ne||!ze),qe=(0,c.of)(me,Ke,ze,We,Le),st=Pe(ge,Be),rt=Ve(Ye.raw,Re),[ot,mt]=(0,s.useState)(""),pt=Re.filter(Ze=>Ze.display.toLowerCase().includes(ot.toLowerCase())),ke=Ze=>de(ue(Ze));return(0,n.jsxs)("div",{id:"TimePickerContent",className:(0,a.cx)(qe.container,De),children:[(0,n.jsxs)("div",{className:qe.body,children:[(!Le||!ze)&&(0,n.jsxs)("div",{className:qe.rightSide,children:[(0,n.jsx)("div",{className:qe.timeRangeFilter,children:(0,n.jsx)(h.Z,{width:0,value:ot,onChange:mt,placeholder:(0,i.t)("time-picker.content.filter-placeholder","Search quick ranges")})}),(0,n.jsxs)("div",{className:qe.scrollContent,children:[!Le&&(0,n.jsx)(Ae,{...Ie,historyOptions:st}),!ze&&(0,n.jsx)(ie.l,{options:pt,onChange:ke,value:rt})]})]}),Le&&(0,n.jsx)("div",{className:qe.leftSide,children:(0,n.jsx)(Ge,{...Ie,historyOptions:st})})]}),!Me&&Le&&(0,n.jsx)(I,{timeZone:Be,fiscalYearStartMonth:$e,onChangeTimeZone:be,onChangeFiscalYearStartMonth:Oe})]})},Ee=Ie=>{const{widthOverride:Re}=Ie,Ke=(0,c.$j)(),Le=(Re||window.innerWidth)>=Ke.breakpoints.values.lg;return(0,n.jsx)(fe,{...Ie,isFullscreen:Le})},Ae=Ie=>{const{value:Re,hideQuickRanges:Ke,onChange:Le,timeZone:ze,historyOptions:Be=[],showHistory:$e,onError:Ye,weekStart:de}=Ie,ge=(0,c.of)(Se),pe=(0,d.Ar)(Re.raw.from)||(0,d.Ar)(Re.raw.to),[De,Me]=(0,s.useState)(!pe),be=Ke?!1:De,Oe=Ne=>Le(ue(Ne,ze));return(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("div",{className:ge.header,children:(0,n.jsxs)("button",{type:"button",className:ge.expandButton,onClick:()=>{Ke||Me(!be)},"data-testid":l.Tp.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!be,"aria-controls":"expanded-timerange",children:[(0,n.jsx)(U.e,{children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.absolute.title",children:"Absolute time range"})}),!Ke&&(0,n.jsx)(u.I,{name:be?"angle-down":"angle-up"})]})}),!be&&(0,n.jsxs)("div",{className:ge.body,id:"expanded-timerange",children:[(0,n.jsx)("div",{className:ge.form,children:(0,n.jsx)(_,{value:Re,onApply:Le,timeZone:ze,isFullscreen:!1,onError:Ye,weekStart:de})}),$e&&(0,n.jsx)(ie.l,{title:(0,i.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Be,onChange:Oe,placeholderEmpty:null})]})]})},Ge=Ie=>{const{onChange:Re,value:Ke,timeZone:Le,fiscalYearStartMonth:ze,isReversed:Be,historyOptions:$e,onError:Ye,weekStart:de}=Ie,ge=(0,c.of)(Qe,Ie.hideQuickRanges),pe=De=>Re(ue(De,Le));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:ge.container,children:[(0,n.jsx)("div",{className:ge.title,"data-testid":l.Tp.components.TimePicker.absoluteTimeRangeTitle,children:(0,n.jsx)(U.e,{children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.absolute.title",children:"Absolute time range"})})}),(0,n.jsx)(_,{value:Ke,timeZone:Le,fiscalYearStartMonth:ze,onApply:Re,isFullscreen:!0,isReversed:Be,onError:Ye,weekStart:de})]}),Ie.showHistory&&(0,n.jsx)("div",{className:ge.recent,children:(0,n.jsx)(ie.l,{title:(0,i.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:$e||[],onChange:pe,placeholderEmpty:(0,n.jsx)(Fe,{})})})]})},Fe=(0,s.memo)(()=>{const Ie=(0,c.of)(Ue),Re=(0,i.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return(0,n.jsxs)("div",{className:Ie.container,children:[(0,n.jsx)("div",{children:(0,n.jsx)("span",{children:Re})}),(0,n.jsx)(i.x6,{i18nKey:"time-picker.content.empty-recent-list-docs",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(r.Y,{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",external:!0,children:"Read the documentation"}),(0,n.jsx)("span",{children:" to find out more about how to enter custom time ranges."})]})})]})});function Pe(Ie,Re){return!Array.isArray(Ie)||Ie.length===0?[]:Ie.map(Ke=>ye(Ke,Re))}Fe.displayName="EmptyRecentList";const Ve=(Ie,Re)=>(0,s.useMemo)(()=>{if(o.isRelativeTimeRange(Ie))return Re.find(Ke=>Ke.from===Ie.from&&Ke.to===Ie.to)},[Ie,Re]),me=(Ie,Re,Ke,Le,ze)=>({container:(0,a.css)({background:Ie.colors.background.elevated,boxShadow:Ie.shadows.z3,width:`${ze?"546px":"262px"}`,borderRadius:Ie.shape.radius.default,border:`1px solid ${Ie.colors.border.weak}`,[`${Re?"left":"right"}`]:0,display:"flex",flexDirection:"column"}),body:(0,a.css)({display:"flex",flexDirection:"row-reverse",height:`${Le?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,a.css)({display:"flex",flexDirection:"column",borderRight:`${Re?"none":`1px solid ${Ie.colors.border.weak}`}`,width:`${Ke?"100%":"60%"}`,overflow:"auto",scrollbarWidth:"thin",order:Re?1:0}),rightSide:(0,a.css)({width:`${ze?"40%":"100%"}; !important`,borderRight:Re?`1px solid ${Ie.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,a.css)({padding:Ie.spacing(1)}),spacing:(0,a.css)({marginTop:"16px"}),scrollContent:(0,a.css)({overflowY:"auto",scrollbarWidth:"thin"})}),Se=Ie=>({header:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${Ie.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,a.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,p.getFocusStyles)(Ie)}),body:(0,a.css)({borderBottom:`1px solid ${Ie.colors.border.weak}`}),form:(0,a.css)({padding:"7px 9px 7px 9px"})}),Qe=(Ie,Re)=>({container:(0,a.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:Re?"11px":"20%"}),title:(0,a.css)({marginBottom:"11px"}),recent:(0,a.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:Ie.spacing(1)})}),Ue=Ie=>({container:(0,a.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}})})},4405:(ne,j,e)=>{"use strict";e.d(j,{a:()=>c});var n=e(49426),a=e(33239),s=e(25229);const d=100;class o{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new n.t(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const h=Date.now();this.budget=(h-this.lastUpdate)/d;const u=this.ok.getValue(),r=this.budget<=this.threshold;if(u!==r&&this.ok.next(r),this.lastUpdate=h,this.isLive&&this.ok.getValue()&&this.timeRange){let v;for(const g of this.listeners){if(!g.panel.props.isInView)continue;if(h-g.last>=g.intervalMs){if(!v){const{raw:x}=this.timeRange;v={raw:x,from:(0,s.KQ)(h-this.liveTimeOffset),to:(0,s.KQ)(h)}}g.panel.liveTimeChanged(v),g.last=h}}}}}setLiveTimeRange(h){if(this.timeRange=h,this.isLive=h?.raw?.to==="now",this.isLive){const u=a.parse(h.raw.from,!1)?.valueOf(),r=a.parse(h.raw.to,!0)?.valueOf();this.liveTimeOffset=r-u;for(const v of this.listeners)v.intervalMs=i(this.liveTimeOffset,v.panel.props.width)}}listen(h){this.listeners.push({last:this.lastUpdate,panel:h,intervalMs:i(6e4,h.props.width)})}remove(h){this.listeners=this.listeners.filter(u=>u.panel!==h)}updateInterval(h){if(!(!this.timeRange||!this.isLive)){for(const u of this.listeners)if(u.panel===h){u.intervalMs=i(this.liveTimeOffset,u.panel.props.width);return}}}}const l=300*1e3;function i(p,h){const u=Math.ceil(p/h/100)*100;return u>l?l:u}const c=new o;setInterval(c.measure,d)},4438:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>o});var n=e(96540),a=e(78012);const s="grafana.provisioning.lastBranch",d=l=>`${s}.${l}`,o=()=>{const l=(0,n.useCallback)(c=>{if(!c)return;const p=d(c);return a.M.get(p)||void 0},[]),i=(0,n.useCallback)((c,p)=>{if(!c||!p)return;const h=d(c);a.M.set(h,p)},[]);return{getLastBranch:l,setLastBranch:i}}},4476:(ne,j,e)=>{"use strict";e.d(j,{Gl:()=>b,H2:()=>g,N6:()=>f,Qi:()=>F,Sq:()=>C,TD:()=>V,UI:()=>N,Xc:()=>x,bM:()=>I,by:()=>E,hY:()=>P,j_:()=>D,kH:()=>r,sP:()=>O,td:()=>p,wD:()=>R});var n=e(84139),a=e(44922),s=e(11594),d=e(43173),o=e(62061),l=e(73427),i=e(11257),c=e(13660);function p({local:H=[],remote:K=[],instance:w=[],provisioned:Q=[],pluginErrors:k}){const te=[],q=m(k),se=new Set(K?.map(J=>J.slug)),re=new Map(H.map(J=>[J.id,J])),Y=new Map(w?.map(J=>[J.pluginSlug,J])),X=new Set(Q?.map(J=>J.slug));return H.forEach(J=>{const _=q[J.id];if(!se.has(J.id)){let ee=h(J,void 0,_);d.$.pluginAdminExternalManageEnabled&&(ee=G(ee,Y,X.has(J.id),re.has(J.id))),te.push(ee)}}),K.forEach(J=>{const _=re.get(J.slug),ee=q[J.slug];if(!(J.status===c.Uy.Deprecated&&!_)){let le=h(_,J,ee);d.$.pluginAdminExternalManageEnabled&&(le=G(le,Y,X.has(J.slug),re.has(J.slug))),te.push(le)}}),te}function h(H,K,w){return!H&&K?u(K,w):H&&!K?r(H,w):v(H,K,w)}function u(H,K){const{name:w,slug:Q,description:k,version:te,orgName:q,popularity:se,downloads:re,typeCode:Y,updatedAt:X,createdAt:J,status:_,angularDetected:ee,keywords:ae,signatureType:le,versionSignatureType:L,versionSignedByOrgName:ie,url:oe}=H,ue=!!K;return{description:k,downloads:re,id:Q,info:{logos:{small:`${d.$.appSubUrl}/api/gnet/plugins/${Q}/versions/${te}/logos/small`,large:`${d.$.appSubUrl}/api/gnet/plugins/${Q}/versions/${te}/logos/large`},keywords:ae},name:w,orgName:q,popularity:se,publishedAt:J,signature:y({remote:H,error:K}),signatureType:le||L||void 0,signatureOrg:ie,updatedAt:X,hasUpdate:!1,isPublished:!0,isInstalled:ue,isDisabled:ue,isManaged:M(Q),isPreinstalled:I(Q),isDeprecated:_===c.Uy.Deprecated,isCore:H.internal,isDev:!1,isEnterprise:_===c.Uy.Enterprise,type:Y,error:K?.errorCode,angularDetected:ee,isFullyInstalled:ue,latestVersion:H.version,url:oe}}function r(H,K){const{name:w,info:{description:Q,version:k,logos:te,updated:q,author:se,keywords:re},id:Y,dev:X,type:J,signature:_,signatureOrg:ee,signatureType:ae,hasUpdate:le,accessControl:L,angularDetected:ie}=H,oe=!!K;return{description:Q,downloads:0,id:Y,info:{logos:te,keywords:re},name:w,orgName:se.name,popularity:0,publishedAt:"",signature:y({local:H,error:K}),signatureOrg:ee,signatureType:ae,updatedAt:q,installedVersion:k,hasUpdate:le,isInstalled:!0,isDisabled:oe,isCore:_==="internal",isPublished:!1,isDeprecated:!1,isDev:!!X,isEnterprise:!1,isManaged:M(Y),isPreinstalled:I(Y),type:J,error:K?.errorCode,accessControl:L,angularDetected:ie,isFullyInstalled:!0,iam:H.iam,latestVersion:H.latestVersion}}function v(H,K,w){const Q=H?.info.version,k=K?.slug||H?.id||"",te=H?.type||K?.typeCode,q=!!w,se=K?.keywords||H?.info.keywords||[];let re={small:`/public/build/img/icn-${te}.svg`,large:`/public/build/img/icn-${te}.svg`};return K?re={small:`${d.$.appSubUrl}/api/gnet/plugins/${k}/versions/${K.version}/logos/small`,large:`${d.$.appSubUrl}/api/gnet/plugins/${k}/versions/${K.version}/logos/large`}:H&&H.info.logos&&(re=H.info.logos),{description:H?.info.description||K?.description||"",downloads:K?.downloads||0,hasUpdate:H?.hasUpdate||!1,id:k,info:{logos:re,keywords:se},isCore:!!(K?.internal||H?.signature===s.Ac.internal),isDev:!!H?.dev,isEnterprise:K?.status===c.Uy.Enterprise,isInstalled:!!H||q,isDisabled:q,isDeprecated:K?.status===c.Uy.Deprecated,isPublished:!0,isManaged:M(k),isPreinstalled:I(k),name:K?.name||H?.name||"",orgName:K?.orgName||H?.info.author.name||"",popularity:K?.popularity||0,publishedAt:K?.createdAt||"",type:te,signature:y({local:H,remote:K,error:w}),signatureOrg:H?.signatureOrg||K?.versionSignedByOrgName,signatureType:H?.signatureType||K?.versionSignatureType||K?.signatureType||void 0,updatedAt:K?.updatedAt||H?.info.updated||"",installedVersion:Q,error:w?.errorCode,accessControl:H?.accessControl,angularDetected:H?.angularDetected??K?.angularDetected,isFullyInstalled:!!H||q,iam:H?.iam,latestVersion:H?.latestVersion||K?.version||"",url:K?.url||""}}const g=H=>`${d.$.pluginCatalogURL}${H}`;var E=(H=>(H.nameAsc="nameAsc",H.nameDesc="nameDesc",H.updated="updated",H.published="published",H.downloads="downloads",H))(E||{});const x=(H,K)=>{const w={nameAsc:(Q,k)=>Q.name.localeCompare(k.name),nameDesc:(Q,k)=>k.name.localeCompare(Q.name),updated:(Q,k)=>(0,a.b)(k.updatedAt).valueOf()-(0,a.b)(Q.updatedAt).valueOf(),published:(Q,k)=>(0,a.b)(k.publishedAt).valueOf()-(0,a.b)(Q.publishedAt).valueOf(),downloads:(Q,k)=>k.downloads-Q.downloads};return w[K]?H.sort(w[K]):H};function m(H=[]){return H.reduce((K,w)=>(K[w.pluginId]=w,K),{})}function y(H){const{error:K,local:w,remote:Q}=H;if(K)switch(K.errorCode){case s.ZK.invalidSignature:return s.Ac.invalid;case s.ZK.missingSignature:return s.Ac.missing;case s.ZK.modifiedSignature:return s.Ac.modified}return w?.signature?w.signature:Q?.signatureType&&Q?.versionSignatureType?s.Ac.valid:s.Ac.missing}function b(H){if(!H)return;const[K]=H.filter(w=>!!w.isCompatible);return K}const D=()=>d.$.pluginAdminEnabled,f=(H,K,w)=>{const Q=d.$.pluginAdminExternalManageEnabled,k=l.TP.hasPermission(i.w.PluginsInstall),te=!!w;return H.type===s.QE.renderer||H.isEnterprise&&!(0,o.a)("enterprise.plugins")||H.isDev||!k&&!Q||!H.isPublished||!te||!K},C=H=>T(H.id),P=H=>T(H.slug);function T(H){const{pluginCatalogHiddenPlugins:K}=d.$;return!K.includes(H)}function M(H){const{pluginCatalogManagedPlugins:K}=d.$;return K?.includes(H)}function I(H){const{pluginCatalogPreinstalledPlugins:K}=d.$,w=K?.find(Q=>Q.id===H);return{found:!!w?.id,withVersion:!!w?.version}}function B(H){return H?.signature==="internal"}function U(H){return H.split(" - ")[0]}function W(H){return H.reduce((K,{id:w,name:Q,type:k,orgName:te,info:q})=>{const se=q.keywords?.join(" ").toLowerCase(),re=`${w} - ${Q} - ${k} - ${te} - ${se}`;return K.push(re),K},[])}function V(H,K){const w=W(H);let k=new n.A({intraMode:1,intraSub:0}).filter(w,K);return k===null?null:k.map(te=>U(w[te]))}function z(H){return!(H.isProvisioned||H.isCore||H.type===s.QE.renderer||H.isPreinstalled.withVersion||H.isManaged)}function R(H){return!(!z(H)||!H.hasUpdate||H.isUpdatingFromInstance)}function O(H){return!!(!z(H)||H.isEnterprise&&!(0,o.a)("enterprise.plugins")||!H.isPublished||H.isDisabled||!D())}function N(H){return H?H.angularDetected===!1:!1}function F(H){return H.isDisabled&&H.error===s.ZK.angular}function G(H,K,w,Q){const k=K.get(H.id);return{...H,isFullyInstalled:H.isCore?!0:(K.has(H.id)||w)&&H.isInstalled,isInstalled:K.has(H.id)||H.isInstalled,isUpdatingFromInstance:K.has(H.id)&&H.hasUpdate&&H.installedVersion!==k?.version,hasUpdate:!!(k?.version&&k?.version!==H.latestVersion),isUninstallingFromInstance:Q&&!K.has(H.id),isProvisioned:w}}},4506:(ne,j,e)=>{"use strict";e.d(j,{K:()=>r});var n=e(74848),a=e(96540),s=e(17548),d=e(92745),o=e(44248),l=e(37386),i=e(18857),c=e(33143),p=e(32603),h=e(71199),u=e(87748);class r extends o.Bs{constructor(E){super(E),this.validateIntervalRegex=/^(\d+(?:\.\d+)?)[Mwdhmsy]$/,this.addActivationHandler(()=>this._activationHandler())}static{this.Component=v}static{this.serializer={id:"ConditionalRenderingTimeRangeSize",name:"Time Range Size",deserialize:this.deserialize}}_activationHandler(){this.forEachChild(E=>{E.isActive||this._subs.add(E.activate())}),this._check(),this._subs.add(o.jh.getTimeRange(this).subscribeToState(()=>this._check()))}_check(){const E=this._evaluate();return E!==this.state.result&&(this.setState({...this.state,result:E}),(0,u.ah)(this)),E}_evaluate(){try{if(!this.validateIntervalRegex.test(this.state.value))return;const E=s.intervalToSeconds(this.state.value),x=o.jh.getTimeRange(this);return x.state.value.to.unix()-x.state.value.from.unix()<=E}catch{return}}changeValue(E){this.state.value!==E&&(this.setState({value:E}),this._check())}renderCmp(){return(0,n.jsx)(this.Component,{model:this},this.state.key)}serialize(){return{kind:"ConditionalRenderingTimeRangeSize",spec:{value:this.state.value}}}static deserialize(E){return new r({value:E.spec.value,result:void 0})}static createEmpty(){return new r({value:"7d",result:void 0})}}function v({model:g}){const{value:E}=g.useState(),[x,m]=(0,a.useState)(g.validateIntervalRegex.test(E));(0,a.useEffect)(()=>m(g.validateIntervalRegex.test(E)),[g,E]);const y=(0,a.useMemo)(()=>[{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.minutes","{{value}} minutes",{value:5}),value:"5m"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.minutes","{{value}} minutes",{value:15}),value:"15m"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.minutes","{{value}} minutes",{value:30}),value:"30m"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hour","{{value}} hour",{value:1}),value:"1h"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hours","{{value}} hours",{value:3}),value:"3h"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hours","{{value}} hours",{value:6}),value:"6h"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hours","{{value}} hours",{value:12}),value:"12h"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hours","{{value}} hours",{value:24}),value:"24h"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.days","{{value}} days",{value:2}),value:"2d"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.days","{{value}} days",{value:7}),value:"7d"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.days","{{value}} days",{value:30}),value:"30d"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.days","{{value}} days",{value:90}),value:"90d"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.months","{{value}} months",{value:6}),value:"6M"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.year","{{value}} year",{value:1}),value:"1y"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.years","{{value}} years",{value:2}),value:"2y"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.values.years","{{value}} years",{value:5}),value:"5y"}],[]),b=(0,a.useMemo)(()=>y.find(f=>f.value===E)?y:[{label:E,value:E},...y],[y,E]),D=(0,a.useCallback)(f=>{c.cc.edit({description:(0,d.t)("dashboard.edit-actions.edit-time-range-rule","Change time range rule"),source:g,perform:()=>g.changeValue(f??""),undo:()=>g.changeValue(E)})},[g,E]);return(0,n.jsx)(h.B,{info:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.info","Show or hide the {{type}} if the dashboard time range is shorter than the selected time frame.",{type:(0,p.L9)((0,u.KG)(g))}),isObjectSupported:!0,model:g,title:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.label","Time range less than"),children:(0,n.jsx)(l.D,{invalid:!x,error:(0,d.t)("dashboard.conditional-rendering.conditions.time-range-size.invalid-message","Invalid interval"),noMargin:!0,children:(0,n.jsx)(i.l6,{isClearable:!1,allowCustomValue:!0,onCreateOption:f=>D(f),value:E,options:b,onChange:({value:f})=>D(f)})})})}},4571:(ne,j,e)=>{"use strict";e.d(j,{Sp:()=>C,VP:()=>f,VN:()=>P,fn:()=>b,sU:()=>I,$l:()=>T});var n=e(41811),a=e(92745),s=e(43173),d=e(68143),o=e(36490),l=e(44248),i=e(61638);const c=i.qR.enhanceEndpoints({endpoints:{createShortUrl:B=>{const U=B.query;U&&(B.query=W=>{W.shortUrl.metadata||(W.shortUrl.metadata={});const V=W.shortUrl.metadata;return!V.name&&!V.generateName&&(V.generateName="s-"),U(W)})}}});var p=e(6890),h=e(64762),u=e(52043),r=e(8535),v=e(85618),g=e(62635);function E(){return`${window.location.protocol}//${window.location.host}${s.$.appSubUrl}`}function x(B){const U=B.metadata.name,W=B.metadata.namespace;return`${E()}/goto/${U}?orgId=${W}`}function m(B){let U=B.replace(E(),"");return U.startsWith("/")?U.substring(1,U.length):U}const y=(0,n.default)(async B=>(await(0,d.AI)().post("/api/short-urls",{path:m(B)})).url),b=async function(B){try{if(s.$.featureToggles.useKubernetesShortURLsAPI){const U=await(0,r.JD)(c.endpoints.createShortUrl.initiate({shortUrl:{apiVersion:"shorturl.grafana.app/v1alpha1",kind:"ShortURL",metadata:{},spec:{path:m(B)}}}));if("data"in U&&U.data)return x(U.data);if("error"in U){const W=(0,v.PE)(U.error);throw new Error(W||"Failed to create short URL")}throw new Error("Failed to create short URL")}else return await y(B)}catch(U){throw console.error("Error when creating shortened link: ",U),(0,r.JD)((0,p.dx)((0,h.gi)("Error generating shortened link"))),U}},D=B=>new ClipboardItem({"text/plain":b(B)}),f=async B=>{try{if(typeof ClipboardItem<"u"&&navigator.clipboard.write)await navigator.clipboard.write([D(B)]),(0,r.JD)((0,p.dx)((0,h.tZ)("Shortened link copied to clipboard")));else{const U=await b(B);(0,g.uJ)(U),(0,r.JD)((0,p.dx)((0,h.tZ)("Shortened link copied to clipboard")))}}catch(U){console.error("Error in createAndCopyShortLink:",U)}},C=async(B,U,W)=>{const V=P(B,U,W);if(U.useShortUrl)return await f(V);(0,g.uJ)(V),(0,r.JD)((0,p.dx)((0,h.tZ)((0,a.t)("link.share.copy-to-clipboard","Link copied to clipboard"))))},P=(B,U,W)=>{const V=o.Ny.getLocation(),z=l.jh.getTimeRange(W??B),R=T(U,z,W);return(0,u.u)({uid:B.state.uid,slug:B.state.meta.slug,currentQueryParams:V.search,updateQuery:R,absolute:!U.useShortUrl})},T=(B,U,W)=>{const V={};return W&&(V.viewPanel=W.getPathId()),B.useAbsoluteTimeRange&&(V.from=U.state.value.from.toISOString(),V.to=U.state.value.to.toISOString()),B.theme!=="current"&&(V.theme=B.theme),V};function M(B,U){for(let W=U.indexOf(B)-1;W>=0;W--)if(U[W].timeEpochMs>B.timeEpochMs)return U[W];return null}function I(B,U,W){const V={from:new Date(W.from).toISOString(),to:new Date(W.to).toISOString()};if(!s.$.featureToggles.logsInfiniteScrolling)return V;const z=U.filter(O=>O.dataFrame.refId===B.dataFrame.refId),R=M(B,z);return B.timeEpochMs>W.to&&!R?{from:new Date(W.from).toISOString(),to:new Date(B.timeEpochMs+1).toISOString()}:{from:new Date(W.from).toISOString(),to:new Date(R?R.timeEpochMs:W.to).toISOString()}}},4575:(ne,j,e)=>{"use strict";e.d(j,{P7:()=>g,PP:()=>o,Y7:()=>E});var n=e(16515),a=e(8934),s=e(95004),d=e(57866),o=(x=>(x.exclude="exclude",x.include="include",x))(o||{});const l={id:d.Ct.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:x=>{const y=c(new Set([x]));return(b,D,f)=>x===b.name||x===(0,n.Ct)(b,D,f)||!!(y&&y(b,D,f))},getOptionsDisplayText:x=>`Field name: ${x}`},i={id:d.Ct.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:x=>{const{names:m,mode:y="include"}=x,b=new Set(m??[]),D=c(b),f=(C,P,T)=>b.has(C.name)||b.has((0,n.Ct)(C,P,T))||!!(D&&D(C,P,T));return y==="exclude"?(C,P,T)=>!f(C,P,T):f},getOptionsDisplayText:x=>{const{names:m,mode:y}=x,b=(m??[]).join(", ");return y==="exclude"?`All except: ${b}`:`All of: ${b}`}};function c(x){let m;return window.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(x.has(s.Bc)?m=(b,D)=>!!b.labels&&b.labels?.__name__===b.name:(x.has("Time")||x.has("time"))&&(m=(b,D)=>D.meta?.typeVersion==null&&b.type===s.PU.time)),m}const p={id:d.Ct.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:x=>{const m=r(x);return(y,b,D)=>{const f=(0,n.Ct)(y,b,D);return!!m&&m.test(f)}},getOptionsDisplayText:x=>`Field name by pattern: ${x}`},h={id:d.Ct.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:x=>(m,y,b)=>y.refId===x,getOptionsDisplayText:x=>`Math all fields returned by query with reference ID: ${x}`},u={id:d.Ct.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:x=>{const m=p.get(x?.pattern||""),y=i.get({mode:"include",names:x?.names??[]});return(b,D,f)=>y(b,D,f)||m(b,D,f)},getOptionsDisplayText:x=>{const m=x?.pattern??"",y=x?.names?.join(",")??"";return`Field name by pattern: ${m} or names: ${y}`}},r=x=>{if(x)try{return(0,a.dO)(x)}catch(m){console.error(m);return}},v={id:d.jR.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:x=>{const m=(0,a.dO)(x);return y=>m.test(y.name||"")},getOptionsDisplayText:x=>`Frame name: ${x}`};function g(){return[l,p,i,u,h]}function E(){return[v]}},4590:(ne,j,e)=>{"use strict";e.d(j,{_o:()=>u});var n=e(2543),a=e.n(n),s=e(92138),d=e(5556),o=e(17548),l=e(36490),i=e(5114),c=e(18984);const p={kiosk:!0,autofitpanels:!0,orgId:!0,"_dash.hideTimePicker":!0,"_dash.hideVariables":!0,"_dash.hideLinks":!0};class h extends i.Q{constructor(){super({isPlaying:!1}),this.urls=[],this.index=0,this.numberOfLoops=0,this.locationUpdated=this.locationUpdated.bind(this)}navigateToDashboard(v=!1){const g=this.urls[this.index],E=l.Ny.getSearchObject(),x=(0,n.pickBy)(E,(b,D)=>p[D]),m=s.I.stripBaseFromUrl(g);this.index++,this.validPlaylistUrl=m,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval);const y=m+"?"+d.kM.toUrlParams(x);v?l.Ny.getHistory().replace(y):l.Ny.push(y)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}this.navigateToDashboard()}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(v){v.pathname!==this.validPlaylistUrl&&this.stop()}async start(v){this.stop(),this.startUrl=window.location.href,this.index=0,this.setState({isPlaying:!0}),this.locationListenerUnsub=l.Ny.getHistory().listen(this.locationUpdated);const g=[];if(!v.spec?.items?.length)return;this.interval=o.intervalToMs(v.spec?.interval);const E=await(0,c.qY)(v.spec?.items);for(const x of E)if(x.dashboards)for(const m of x.dashboards)g.push(m.url);g.length&&(this.urls=g,this.setState({isPlaying:!0}),this.navigateToDashboard(!0))}stop(){this.state.isPlaying&&(this.index=0,this.setState({isPlaying:!1}),this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),l.Ny.getSearchObject().kiosk&&l.Ny.partial({kiosk:null}))}}const u=new h},4604:(ne,j,e)=>{"use strict";e.d(j,{O2:()=>U,SW:()=>W,og:()=>N});var n=e(2543),a=e(53543),s=e(3594),d=e(7389),o=e(48480),l=e(5556),i=e(38036),c=e(18600),p=e(36394),h=e(57866),u=e(95004),r=e(79184),v=e(33023),g=e(78282),E=e(739),x=e(74198),m=e(83162),y=e(95943);function b(q){return Array.from(new Array(q+1),(se,re)=>re).filter(se=>q%se===0)}var D=e(77197),f=e(28998),C=e(67933),P=e(78763),T=e(18615),M=e(87963),I=e(82612),B=e(56623);a.D.setInit(m.H),a.G.setInit(m.u);const U=42;class W{constructor(se){this.dashboard=se,(0,g.l)()||(0,g.h)(new f.xq)}updateSchema(se,re){let Y,X,J,_;const ee=this.dashboard.schemaVersion,ae=[],le=re||U;if(ee!==le){if(ee<2&&le>=2&&se.services&&se.services.filter&&(this.dashboard.time=se.services.filter.time,this.dashboard.templating.list=se.services.filter.list||[]),ee<3&&le>=3,ee<4&&le>=4,ee<6&&le>=6){const L=(0,n.find)(se.pulldowns,{type:"annotations"});for(L&&(this.dashboard.annotations={list:L.annotations||[]}),Y=0;Y<this.dashboard.templating.list.length;Y++){const ie=this.dashboard.templating.list[Y];ie.datasource===void 0&&(ie.datasource=null),ie.type==="filter"&&(ie.type="query"),ie.type===void 0&&(ie.type="query"),ie.allFormat===void 0&&delete ie.allFormat}}if(ee<7&&le>=7&&se.nav&&se.nav.length&&(this.dashboard.timepicker=se.nav[0]),ee<8&&le>=8&&ae.push(L=>((0,n.each)(L.targets,ie=>{ie.fields&&ie.tags&&ie.groupBy&&(ie.rawQuery?(delete ie.fields,delete ie.fill):(ie.select=(0,n.map)(ie.fields,oe=>{const ue=[];return ue.push({type:"field",params:[oe.name]}),ue.push({type:oe.func,params:[]}),oe.mathExpr&&ue.push({type:"math",params:[oe.mathExpr]}),oe.asExpr&&ue.push({type:"alias",params:[oe.asExpr]}),ue}),delete ie.fields,(0,n.each)(ie.groupBy,oe=>{oe.type==="time"&&oe.interval&&(oe.params=[oe.interval],delete oe.interval),oe.type==="tag"&&oe.key&&(oe.params=[oe.key],delete oe.key)}),ie.fill&&(ie.groupBy.push({type:"fill",params:[ie.fill]}),delete ie.fill)))}),L)),ee<9&&le>=9,ee<10&&le>=10&&ae.push(L=>(L.type!=="table"||(0,n.each)(L.styles,ie=>{if(ie.thresholds&&ie.thresholds.length>=3){const oe=ie.thresholds;oe.shift(),ie.thresholds=oe}}),L)),ee<12&&le>=12&&(0,n.each)(this.dashboard.getVariables(),L=>{"refresh"in L&&(L.refresh&&(L.refresh=1),L.refresh||(L.refresh=0)),"hideVariable"in L&&L.hideVariable?L.hide=2:"hideLabel"in L&&L.hideLabel&&(L.hide=1)}),ee<13&&le>=13,ee<14&&le>=14&&(this.dashboard.graphTooltip=se.sharedCrosshair?1:0),ee<16&&le>=16&&this.upgradeToGridLayout(se),ee<17&&le>=17&&ae.push(L=>{if(L.minSpan){const ie=y.cV/L.minSpan,oe=b(y.cV);L.maxPerRow=oe[(0,n.findIndex)(oe,ue=>ue>ie)-1]}return delete L.minSpan,L}),ee<18&&le>=18&&ae.push(L=>(L["options-gauge"]&&(L.options=L["options-gauge"],L.options.valueOptions={unit:L.options.unit,stat:L.options.stat,decimals:L.options.decimals,prefix:L.options.prefix,suffix:L.options.suffix},L.options.thresholds&&L.options.thresholds.reverse(),delete L.options.options,delete L.options.unit,delete L.options.stat,delete L.options.decimals,delete L.options.prefix,delete L.options.suffix,delete L["options-gauge"]),L)),ee<19&&le>=19&&ae.push(L=>(L.links&&(0,n.isArray)(L.links)&&(L.links=L.links.map(R)),L)),ee<20&&le>=20){const L=ie=>({...ie,url:O(ie.url)});ae.push(ie=>(ie.options&&ie.options.dataLinks&&(0,n.isArray)(ie.options.dataLinks)&&(ie.options.dataLinks=ie.options.dataLinks.map(L)),ie.options&&ie.options.fieldOptions&&ie.options.fieldOptions.defaults&&(ie.options.fieldOptions.defaults.links&&(0,n.isArray)(ie.options.fieldOptions.defaults.links)&&(ie.options.fieldOptions.defaults.links=ie.options.fieldOptions.defaults.links.map(L)),ie.options.fieldOptions.defaults.title&&(ie.options.fieldOptions.defaults.title=O(ie.options.fieldOptions.defaults.title))),ie))}if(ee<21&&le>=21){const L=ie=>({...ie,url:ie.url.replace(/__series.labels/g,"__field.labels")});ae.push(ie=>(ie.options&&ie.options.dataLinks&&(0,n.isArray)(ie.options.dataLinks)&&(ie.options.dataLinks=ie.options.dataLinks.map(L)),ie.options&&ie.options.fieldOptions&&ie.options.fieldOptions.defaults&&ie.options.fieldOptions.defaults.links&&(0,n.isArray)(ie.options.fieldOptions.defaults.links)&&(ie.options.fieldOptions.defaults.links=ie.options.fieldOptions.defaults.links.map(L)),ie))}if(ee<22&&le>=22&&ae.push(L=>(L.type!=="table"||(0,n.each)(L.styles,ie=>{ie.align="auto"}),L)),ee<23&&le>=23)for(const L of this.dashboard.templating.list){if(!(0,C.iv)(L))continue;const{multi:ie,current:oe}=L;(0,s.R)(oe)||(L.current=(0,P.C)(oe,ie))}if(ee<24&&le>=24&&ae.push(L=>{const ie=L.type==="table";if(ie&&!L.styles)return L;const oe=L.table==="table2";if(!ie||oe)return L;if(L.type=ie?"table-old":"table",L.type==="table-old"){const ue=(0,B.p)(L);ue&&(L.autoMigrateFrom=L.type,L.type=ue)}return L}),ee<25&&le>=25,ee<26&&le>=26&&ae.push(L=>(L.type==="text2"&&(L.type="text",delete L.options.angular),L)),ee<27&&le>=27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(L=>{if(!(0,C.VO)(L))return L;const ie={...L};return ie.current={selected:!0,text:ie.query??"",value:ie.query??""},ie.options=[ie.current],ie.hide===d.zL.dontHide||ie.hide===d.zL.hideLabel?{...ie,type:"textbox"}:ie})),ee<28&&le>=28)for(const L of this.dashboard.templating.list)L.tags&&delete L.tags,L.tagsQuery&&delete L.tagsQuery,L.tagValuesQuery&&delete L.tagValuesQuery,L.useTags&&delete L.useTags;if(ee<29&&le>=29)for(const L of this.dashboard.templating.list)L.type==="query"&&(L.refresh!==1&&L.refresh!==2&&(L.refresh=1),L.options?.length&&(L.options=[]));if(ee<30&&le>=30&&(ae.push(G),ae.push(Q)),ee<31&&le>=31&&ae.push(L=>{if(L.transformations){for(const ie of L.transformations)if(ie.id===r.V.id)return F(L,r.V.id,{id:v.o.id,options:{}})}return L}),ee<32&&le>=32,ee<33&&le>=33&&ae.push(L=>{if(L.datasource=N(L.datasource,{returnDefaultAsNull:!0}),!L.targets)return L;for(const ie of L.targets){const oe=N(ie.datasource,{returnDefaultAsNull:!0});oe!=null&&(ie.datasource=oe)}return L}),ee<34&&le>=34&&(ae.push(L=>(this.migrateCloudWatchQueries(L),L)),this.migrateCloudWatchAnnotationQuery()),ee<35&&le>=35&&ae.push(k),ee<36&&le>=36){for(const ie of this.dashboard.annotations.list)ie.datasource=N(ie.datasource,{returnDefaultAsNull:!1});const L=(0,g.l)().getInstanceSettings(null);if(L){for(const ie of this.dashboard.templating.list)ie.type==="query"&&ie.datasource===null&&(ie.datasource=(0,o.p$)(L));ae.push(ie=>{if(ie.targets){let oe=!1;ie.datasource==null&&ie.targets.length>0&&(ie.datasource=(0,o.p$)(L),oe=!0);for(const ue of ie.targets)(ue.datasource==null||ue.datasource.uid==null)&&(ie.datasource?.uid!==T.uv?ue.datasource={...ie.datasource}:ue.datasource=N(ue.datasource,{returnDefaultAsNull:!1})),oe&&ue.datasource?.uid!=="__expr__"&&(ie.datasource=ue.datasource)}return ie})}}if(ee<37&&le>=37&&ae.push(L=>(L.options?.legend&&typeof L.options.legend=="object"&&(L.options.legend.displayMode==="hidden"||L.options.legend.showLegend===!1?(L.options.legend.displayMode="list",L.options.legend.showLegend=!1):L.options.legend={...L.options.legend,showLegend:!0}),L)),ee<38&&le>=38&&ae.push(L=>{if(L.type==="table"&&L.fieldConfig!==void 0){const ie=L.fieldConfig.defaults?.custom?.displayMode;if(ie!==void 0&&(L.fieldConfig.defaults.custom.cellOptions=(0,x.o7)(ie),delete L.fieldConfig.defaults.custom.displayMode),L.fieldConfig?.overrides)for(const oe of L.fieldConfig.overrides)for(let ue=0;ue<(oe.properties?.length||0);ue++){let ye=oe.properties[ue].value;oe.properties[ue].id==="custom.displayMode"&&(oe.properties[ue].id="custom.cellOptions",oe.properties[ue].value=(0,x.o7)(ye))}}return L}),ee<39&&le>=39&&ae.push(L=>(L.transformations?.forEach(ie=>{if(ie.id==="timeSeriesTable"&&ie.options!==void 0&&ie.options.refIdToStat!==void 0){let oe={};for(const[ue,ye]of Object.entries(ie.options.refIdToStat)){let fe={};fe.stat=ye,oe[ue]=fe}ie.options=oe}}),L)),ee<40&&le>=40&&typeof this.dashboard.refresh!="string"&&(this.dashboard.refresh=""),ee<41&&le>=41&&"time_options"in this.dashboard.timepicker&&delete this.dashboard.timepicker.time_options,ee<42&&le>=42&&ae.push(te),ae.length>0)for(X=0;X<this.dashboard.panels.length;X++)for(J=0;J<ae.length;J++){this.dashboard.panels[X]=ae[J].call(this,this.dashboard.panels[X]);const L=this.dashboard.panels[X].panels;if(L)for(_=0;_<L.length;_++)L[_]=ae[J].call(this,L[_])}ee<le&&(this.dashboard.schemaVersion=le)}}removeRepeatedPanels(){const se=[];for(const re of this.dashboard.panels)re.repeatPanelId||re.repeatByRow||(re.type==="row"&&Array.isArray(re.panels)&&(re.panels=re.panels.filter(Y=>!Y.repeatPanelId)),se.push(re));this.dashboard.panels=se}migrateCloudWatchQueries(se){for(const re of se.targets||[])if(H(re)&&((0,M.WB)(re),re.hasOwnProperty("statistics"))){const Y=(0,M.MA)(re,[...se.targets]);for(const X of Y)se.targets.push(X)}}migrateCloudWatchAnnotationQuery(){for(const se of this.dashboard.annotations.list)if(K(se)){const re=(0,M._I)(se);for(const Y of re)this.dashboard.annotations.list.push(Y)}}upgradeToGridLayout(se){let re=0;const Y=y.cV/12;let J=((0,n.max)((0,n.flattenDeep)((0,n.map)(se.rows,ee=>(0,n.map)(ee.panels,"id"))).filter(ee=>ee!=null))||0)+1;if(!se.rows)return;const _=(0,n.some)(se.rows,ee=>ee.collapse||ee.showTitle||ee.repeat);for(const ee of se.rows){if(ee.repeatIteration)continue;const ae=ee.height||y.bJ,le=V(ae),L={};let ie;_&&(L.id=J,L.type="row",L.title=ee.title,L.collapsed=ee.collapse,L.repeat=ee.repeat,L.panels=[],L.gridPos={x:0,y:re,w:y.cV,h:le},ie=new I.a9(L),J++,re++);const oe=new z(le,y.cV,re);for(const ue of ee.panels){ue.span=ue.span||y.o9,ue.minSpan&&(ue.minSpan=Math.min(y.cV,y.cV/12*ue.minSpan));const ye=Math.floor(ue.span)*Y,fe=ue.height?V(ue.height):le,Ee=oe.getPanelPosition(fe,ye);re=oe.yPos,ue.gridPos={x:Ee.x,y:re+Ee.y,w:ye,h:fe},oe.addPanel(ue.gridPos),delete ue.span,ie&&L.collapsed?ie.panels?.push(ue):this.dashboard.panels.push(new I.a9(ue))}ie&&this.dashboard.panels.push(ie),ie&&L.collapsed||(re+=le)}}}function V(q){return(0,n.isString)(q)&&(q=parseInt(q.replace("px",""),10)),q<y.cx&&(q=y.cx),Math.ceil(q/(y.sD+y.dU))}class z{constructor(se,re=y.cV,Y=0){this.area=new Array(re).fill(0),this.yPos=Y,this.height=se}reset(){this.area.fill(0)}addPanel(se){for(let re=se.x;re<se.x+se.w;re++)(!this.area[re]||se.y+se.h-this.yPos>this.area[re])&&(this.area[re]=se.y+se.h-this.yPos);return this.area}getPanelPosition(se,re,Y=!1){let X,J,_;for(let ee=this.area.length-1;ee>=0&&this.height-this.area[ee]>0;ee--)if(J===void 0)J=ee;else if(ee<this.area.length-1&&this.area[ee]<=this.area[ee+1])X=ee;else break;if(X!==void 0&&J!==void 0&&J-X>=re-1){const ee=(0,n.max)(this.area.slice(X));_={x:X,y:ee}}else return Y?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(se,re,!0));return _}}function R(q){let se=q.url;return!se&&q.dashboard&&(se=`dashboard/db/${D.A.slugifyForUrl(q.dashboard)}`),!se&&q.dashUri&&(se=`dashboard/${q.dashUri}`),se||(se="/"),q.keepTime&&(se=l.kM.appendQueryToUrl(se,`$${i.c.keepTime}`)),q.includeVars&&(se=l.kM.appendQueryToUrl(se,`$${i.c.includeVars}`)),q.params&&(se=l.kM.appendQueryToUrl(se,q.params)),{url:se,title:q.title,targetBlank:q.targetBlank}}function O(q){const se=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return q.replace(se,(re,Y,X,J,_,ee)=>Y?"__series.name":X?"${__series.name}":J?"__value.time":_?"__field.name":ee?"${__field.name}":re)}function N(q,se){if(se.returnDefaultAsNull&&(q==null||q==="default"))return null;if((0,o.fN)(q))return q;const re=(0,g.l)().getInstanceSettings(q);return re?(0,o.p$)(re):{uid:q||void 0}}function F(q,se,re){if(q.transformations){const Y=[];for(const X of q.transformations)Y.push(X),X.id===se&&Y.push({...re});q.transformations=Y}return q}function G(q){const se=q.fieldConfig;if(!se)return q;if(se.defaults&&se.defaults.mappings&&(se.defaults.mappings=w(se.defaults.mappings,se.defaults.thresholds)),Array.isArray(se.overrides))for(const re of se.overrides)for(const Y of re.properties)Y.id==="mappings"&&(Y.value=w(Y.value));return q}function H(q){return q.hasOwnProperty("dimensions")&&q.hasOwnProperty("namespace")&&q.hasOwnProperty("region")&&q.hasOwnProperty("metricName")}function K(q){return q.hasOwnProperty("dimensions")&&q.hasOwnProperty("namespace")&&q.hasOwnProperty("region")&&q.hasOwnProperty("prefixMatching")&&q.hasOwnProperty("statistics")}function w(q,se){if(!q)return;const re={type:c.d.ValueToText,options:{}},Y=[];for(const X of q){if(X.type&&X.options){X.type===c.d.ValueToText?re.options={...re.options,...X.options}:Y.push(X);continue}let J;const _=parseFloat(X.text);if(se&&!isNaN(_)){const ee=(0,p.yQ)(_,se.steps);ee&&ee.color&&(J=ee.color)}switch(X.type){case 1:X.value!=null&&(X.value==="null"?Y.push({type:c.d.SpecialValue,options:{match:c.W.Null,result:{text:X.text,color:J}}}):re.options[String(X.value)]={text:X.text,color:J});break;case 2:Y.push({type:c.d.RangeToText,options:{from:+X.from,to:+X.to,result:{text:X.text,color:J}}});break}}return Object.keys(re.options).length>0&&Y.unshift(re),Y}function Q(q){return(q.type==="timeseries"||q.type==="xychart"||q.type==="xychart2")&&q.options.tooltipOptions&&(q.options={...q.options,tooltip:q.options.tooltipOptions},delete q.options.tooltipOptions),q}function k(q){return q.type==="timeseries"&&q.fieldConfig?.defaults.custom?.axisPlacement===E.vM.Hidden&&(q.fieldConfig={...q.fieldConfig,overrides:[...q.fieldConfig.overrides,{matcher:{id:h.Ct.byType,options:u.PU.time},properties:[{id:"custom.axisPlacement",value:E.vM.Auto}]}]}),q}function te(q){return q.fieldConfig&&q.fieldConfig.overrides&&(q.fieldConfig.overrides=q.fieldConfig.overrides.map(se=>(se.properties&&(se.properties=se.properties.map(re=>(re.id==="custom.hideFrom"&&re.value?.viz===!0&&(re.value.tooltip=!0),re))),se))),q}},4651:(ne,j,e)=>{"use strict";e.d(j,{Cu:()=>c,HZ:()=>h,Mt:()=>p,NI:()=>l,PN:()=>u,Tz:()=>o,Uj:()=>d,iX:()=>r,uQ:()=>i,zd:()=>v});var n=e(46644),a=e(65642),s=e(2954);const d="__expr__";var o=(g=>(g.math="math",g.reduce="reduce",g.resample="resample",g.classic="classic_conditions",g.threshold="threshold",g.sql="sql",g))(o||{});const l=g=>{switch(g){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition (legacy)";case"threshold":return"Threshold";case"sql":return"SQL"}},i=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition (legacy)",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."},{value:"sql",label:"SQL",description:"Transform data using SQL. Supports MySQL syntax."}].filter(g=>g.value==="sql"?a.$W?.featureToggles?.sqlExpressions:!0),c=[{value:n.gy.min,label:"Min",description:"Get the minimum value"},{value:n.gy.max,label:"Max",description:"Get the maximum value"},{value:n.gy.mean,label:"Mean",description:"Get the average value"},{value:n.gy.median,label:"Median",description:"Get the median value"},{value:n.gy.sum,label:"Sum",description:"Get the sum of all values"},{value:n.gy.count,label:"Count",description:"Get the number of values"},{value:n.gy.last,label:"Last",description:"Get the last value"}];var p=(g=>(g.Strict="",g.ReplaceNonNumbers="replaceNN",g.DropNonNumbers="dropNN",g))(p||{});const h=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],u=[{value:n.gy.last,label:"Last",description:"Fill with the last value"},{value:n.gy.min,label:"Min",description:"Fill with the minimum value"},{value:n.gy.max,label:"Max",description:"Fill with the maximum value"},{value:n.gy.mean,label:"Mean",description:"Fill with the average value"},{value:n.gy.sum,label:"Sum",description:"Fill with the sum of all values"}],r=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],v=[{value:s.p.IsAbove,label:"Is above"},{value:s.p.IsBelow,label:"Is below"},{value:s.p.IsEqual,label:"Is equal to"},{value:s.p.IsNotEqual,label:"Is not equal to"},{value:s.p.IsGreaterThanEqual,label:"Is above or equal to"},{value:s.p.IsLessThanEqual,label:"Is below or equal to"},{value:s.p.IsWithinRange,label:"Is within range"},{value:s.p.IsOutsideRange,label:"Is outside range"},{value:s.p.IsWithinRangeIncluded,label:"Is within range included"},{value:s.p.IsOutsideRangeIncluded,label:"Is outside range included"}]},4652:(ne,j,e)=>{"use strict";e.d(j,{C:()=>c});var n=e(74848),a=e(92745),s=e(18027),d=e(97095),o=e(18857),l=e(63527),i=e(4651);const c=({labelWidth:p="auto",onChange:h,refIds:u,query:r})=>{const v=i.PN.find(b=>b.value===r.downsampler),g=i.iX.find(b=>b.value===r.upsampler),E=b=>{h({...r,window:b.target.value})},x=b=>{h({...r,expression:b.value})},m=b=>{h({...r,downsampler:b.value})},y=b=>{h({...r,upsampler:b.value})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.C,{children:(0,n.jsx)(s.I,{label:(0,a.t)("expressions.resample.label-input","Input"),labelWidth:p,children:(0,n.jsx)(o.l6,{onChange:x,options:u,value:r.expression,width:20})})}),(0,n.jsxs)(d.C,{children:[(0,n.jsx)(s.I,{label:(0,a.t)("expressions.resample.label-resample-to","Resample to"),labelWidth:p,tooltip:(0,a.t)("expressions.resample.tooltip-s-m-h","10s, 1m, 30m, 1h"),children:(0,n.jsx)(l.p,{onChange:E,value:r.window,width:15})}),(0,n.jsx)(s.I,{label:(0,a.t)("expressions.resample.label-downsample","Downsample"),children:(0,n.jsx)(o.l6,{options:i.PN,value:v,onChange:m,width:25})}),(0,n.jsx)(s.I,{label:(0,a.t)("expressions.resample.label-upsample","Upsample"),children:(0,n.jsx)(o.l6,{options:i.iX,value:g,onChange:y,width:25})})]})]})}},4735:(ne,j,e)=>{"use strict";e.d(j,{v:()=>d});var n=e(88483),a=e(41119),s=e(68125);function d(o){return new n.c(l=>{let i=0;o.forEach(c=>{const p=new FileReader;p.readAsArrayBuffer(c),p.onload=()=>{const h=p.result;if(h&&h instanceof ArrayBuffer){const r=new TextDecoder("utf-8").decode(h);if(c.type==="application/json"){const v=JSON.parse(r);l.next({dataFrames:[(0,a.Vc)(v)],file:c})}else l.next({dataFrames:(0,s.Jh)(r),file:c});++i>=o.length&&l.complete()}}})})}},4745:(ne,j,e)=>{"use strict";e.d(j,{$$:()=>f,$n:()=>a,Bc:()=>D,E5:()=>y,FL:()=>E,H$:()=>h,J9:()=>s,O6:()=>p,Ri:()=>o,Td:()=>r,bw:()=>c,cu:()=>b,hk:()=>d,iS:()=>m,ij:()=>g,o2:()=>l,sm:()=>x,vT:()=>u,z5:()=>v});const n='Invalid usage of extension point. Reason: Extension point id should be prefixed with your plugin id, e.g "myorg-foo-app/toolbar/v1". Returning an empty array of extensions.',a=(C,P)=>`Invalid usage of extension point. Reason: Extension point id should be prefixed with your plugin id, e.g "${C}/${P}".`,s=C=>`Invalid usage of extension point. Reason: Core Grafana extension point id should be prefixed with "grafana/", e.g "grafana/${C}".`,d='Invalid usage of extension point. Reason: Core Grafana extension point id should be exposed to plugins via the "PluginExtensionPoints" enum in the "grafana-data" package (/packages/grafana-data/src/types/pluginExtensions.ts).',o='Invalid usage of extension point. Reason: The extension point is not recorded in the "plugin.json" file. Extension points must be listed in the section "extensions.extensionPoints[]". Returning an empty array of extensions.',l="Title is missing.",i="Description is missing.",c='The "fn" argument is invalid, it should be a function.',p='The "configure" function is invalid. It should be a function.',h='Either "path" or "onClick" is required.',u="The component id does not match the id naming convention. Id should be prefixed with plugin id. e.g 'myorg-basic-app/my-component-id/v1'.",r="An exposed component with the same id already exists.",v='The exposed component was not recorded in the plugin.json. Exposed component extensions must be listed in the section "extensions.exposedComponents[]". Currently, this is only required in development but will be enforced also in production builds in the future.',g='Invalid usage of extension point. Reason: The exposed component is not recorded in the "plugin.json" file. Exposed components must be listed in the dependencies[] section.',E='The extension was not recorded in the plugin.json. Added component extensions must be listed in the section "extensions.addedComponents[]". Currently, this is only required in development but will be enforced also in production builds in the future.',x=`The "title" doesn't match the title recorded in plugin.json.`,m='The extension was not recorded in the plugin.json. Added link extensions must be listed in the section "extensions.addedLinks[]". Currently, this is only required in development but will be enforced also in production builds in the future.',y='The extension was not recorded in the plugin.json. Added function extensions must be listed in the section "extensions.addedFunction[]". Currently, this is only required in development but will be enforced also in production builds in the future.',b=`The "description" doesn't match the description recorded in plugin.json.`,D='The "targets" for the registered extension does not match the targets recorded in plugin.json. Currently, this is only required in development but will be enforced also in production builds in the future.',f=C=>`The app plugin with plugin id "${C}" was not found.`},4896:(ne,j,e)=>{"use strict";e.d(j,{Iu:()=>s,Iy:()=>l,QC:()=>o,nG:()=>a,zu:()=>d});var n=e(739);const a=Object.freeze({fixed:"",mode:n.RU.Field,field:""});var s=(i=>(i.Icon="img/icons/unicons",i.IOT="img/icons/iot",i.Marker="img/icons/marker",i.BG="img/bg",i))(s||{}),d=(i=>(i.Icon="icon",i.Image="image",i))(d||{}),o=(i=>(i.Folder="folder",i.URL="url",i.Upload="upload",i))(o||{}),l=(i=>(i.SMALL="small",i.NORMAL="normal",i))(l||{})},4974:(ne,j,e)=>{"use strict";e.d(j,{Dr:()=>h,K4:()=>c,i6:()=>v,zd:()=>p});var n=e(11393),a=e(25953),s=e(29425),d=e(8835),o=e(1682),l=e(92119),i=e(67350);function c(g){const{maxColumnCount:E,fillScreen:x,columnWidth:m,rowHeight:y,layout:b}=g.state,D=(0,n.kH)();return{kind:"AutoGridLayout",spec:{maxColumnCount:E,fillScreen:x===D.fillScreen?void 0:x,...u(m),...r(y),items:b.state.children.map(p)}}}function p(g){const x={kind:"AutoGridLayoutItem",spec:{element:{kind:"ElementReference",name:o.b4.getElementIdentifierForVizPanel(g.state?.body)}}},m=g.state.conditionalRendering?.serialize();return m?.spec.items.length&&(x.spec.conditionalRendering=m),g.state.variableName&&(x.spec.repeat={mode:"variable",value:g.state.variableName}),x}function h(g,E,x,m){if(g.kind!=="AutoGridLayout")throw new Error("Invalid layout kind");const y=(0,n.kH)(),{maxColumnCount:b,columnWidthMode:D,columnWidth:f,rowHeightMode:C,rowHeight:P,fillScreen:T}=g.spec,M=g.spec.items.map(U=>v(U,E,m)),I=D==="custom"?f:D,B=C==="custom"?P:C;return new d.X2({maxColumnCount:b,columnWidth:I,rowHeight:B,fillScreen:T??y.fillScreen,layout:new s.o({templateColumns:(0,d.Kf)(b??y.maxColumnCount,I??d.j),autoRows:(0,d.jo)(B??d.YL,T??!1),children:M})})}function u(g){return{columnWidthMode:typeof g=="number"?"custom":g,columnWidth:typeof g=="number"?g:void 0}}function r(g){return{rowHeightMode:typeof g=="number"?"custom":g,rowHeight:typeof g=="number"?g:void 0}}function v(g,E,x){const m=E[g.spec.element.name];if(!m)throw new Error(`Panel with uid ${g.spec.element.name} not found in the dashboard elements`);let y;return x&&(y=x()),new a.X({key:(0,l.ty)(y??m.spec.id),body:m.kind==="LibraryPanel"?(0,i.kB)(m,y):(0,i.Gl)(m,y),variableName:g.spec.repeat?.value,conditionalRendering:(0,i.Xy)(g)})}},5071:(ne,j,e)=>{"use strict";e.d(j,{s:()=>o});var n=e(96540),a=e(47925),s=e(43173),d=e(15130);const o=()=>{const l=(0,a.Pj)(void 0,{skip:!d.TP.user.isSignedIn}),i=(0,n.useMemo)(()=>l.data?.navbar?.bookmarkUrls||[],[l]);return s.$.featureToggles.pinNavItems?i:[]}},5114:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>d});var n=e(96540),a=e(13752),s=e(79104);class d{constructor(i){this._subject=new a.B,this._state=i}useState(){return o(this)}get state(){return this._state}setState(i){this._state={...this._state,...i},this._subject.next(this._state)}subscribeToState(i){return this._subject.subscribe(i)}}function o(l){const i=(0,s.C)();return(0,n.useEffect)(()=>{const c=l.subscribeToState({next:i});return()=>c.unsubscribe()},[l,i]),l.state}},5320:(ne,j,e)=>{"use strict";e.d(j,{II:()=>p});var n=e(2543),a=e(96540),s=e(92745),d=e(74440);function o(u){const r=(0,a.useRef)(0);return(0,a.useCallback)(g=>{r.current++;const E=r.current;return new Promise((x,m)=>{u(g).then(y=>{E===r.current?x(y):m(new l)}).catch(m)})},[u])}class l extends Error{constructor(){super("This result is stale and is discarded"),this.name="StaleResultError",Object.setPrototypeOf(this,new.target.prototype)}}const i=()=>Promise.resolve([]),c=200;function p(u,r){const v=typeof u=="function",g=o(v?u:i),E=(0,a.useMemo)(()=>(0,n.debounce)(V=>g(V).then(z=>{m(z),b(!1),f(!1)}).catch(z=>{z instanceof l||(f(!0),b(!1),z&&console.error("Error loading async options for Combobox",z))}),c),[g]),[x,m]=(0,a.useState)([]),[y,b]=(0,a.useState)(!1),[D,f]=(0,a.useState)(!1),[C,P]=(0,a.useState)(""),T=(0,a.useCallback)(V=>{let z=V;return r&&C&&(V.some(O=>O.value===C)||(z=z.slice(),z.unshift({label:C,value:C,description:(0,s.t)("combobox.custom-value.description","Use custom value")}))),z},[r,C]),M=(0,a.useCallback)(V=>{P(V),v&&(b(!0),E(V))},[E,v]),I=(0,a.useMemo)(()=>v?[]:u.map(d.y),[v,u]),B=(0,a.useMemo)(()=>v?x:(0,d.o)(u,I,C),[x,v,u,I,C]),[U,W]=(0,a.useMemo)(()=>{const{options:V,groupStartIndices:z}=h(B);return[T(V),z]},[B,T]);return{options:U,groupStartIndices:W,updateOptions:M,asyncLoading:y,asyncError:D}}function h(u){const r=new Map,v=new Map;for(const x of u){const m=x.group,y=r.get(m);y?y.push(x):r.set(m,[x])}if(r.size<=1)return u[0]?.group&&v.set(u[0]?.group,0),{options:u,groupStartIndices:v};const g=new Array(u.length);let E=0;for(const[x,m]of r){x&&v.set(x,E);for(const y of m)g[E++]=y}return{options:g,groupStartIndices:v}}},5358:(ne,j,e)=>{"use strict";e.d(j,{Kh:()=>y,VI:()=>E,b9:()=>g});var n=e(74848),a=e(96540),s=e(43173),d=e(36490),o=e(29043),l=e(84266),i=e(42581),c=e(93395),p=e(47215),h=e(15633),u=e(95443),r=e(52161);const v=a.createContext(void 0),g=({children:b,accessType:D,alertmanagerSourceName:f})=>{const C=d.Ny.getSearch(),P=d.Ny.partial,T=(0,c.W)(D),M=s.$.featureToggles.alertingImportAlertmanagerUI??!1,{data:I}=(0,p.f)(M?r.hY:void 0,{refetchOnFocus:!1,refetchOnReconnect:!1}),B=!!(I?.extra_config&&I.extra_config.length>0),U=a.useMemo(()=>{const Q=T.availableInternalDataSources.concat(T.availableExternalDataSources),k=M&&B?[{name:h.D,displayName:"Grafana (imported)",imgUrl:i,hasConfigurationAPI:!1,handleGrafanaManagedAlerts:!0}]:[],te=Q.find(re=>re.name===r.hY),q=Q.filter(re=>re.name!==r.hY),se=[];return te&&se.push(te),se.push(...k),se.push(...q),se},[T,M,B]),W=a.useCallback(Q=>{x(U,Q)&&(Q===r.hY?(o.A.delete(u.Oq),P({[u.DD]:void 0})):(o.A.set(u.Oq,Q),P({[u.DD]:Q})))},[U,P]),V=C.get(u.DD),z=o.A.get(u.Oq),R=r.hY;a.useEffect(()=>{V&&V!==z&&o.A.set(u.Oq,V)},[V,z]);const O=f??V??z??R,N=x(U,O)?O:void 0,F=a.useMemo(()=>N&&(0,h.b)(N)?{implementation:l.Oz.prometheus,handleGrafanaManagedAlerts:!0}:(0,r.r3)(N)?.jsonData,[N]),G=N===r.hY,H=F?y(F):!1,w={selectedAlertmanager:N,hasConfigurationAPI:G||H,isGrafanaAlertmanager:G,selectedAlertmanagerConfig:F,availableAlertManagers:U,setSelectedAlertmanager:W};return(0,n.jsx)(v.Provider,{value:w,children:b})};function E(){const b=a.useContext(v);if(b===void 0)throw new Error("useAlertmanager must be used within a AlertmanagerContext");return b}function x(b,D){return b.map(C=>C.name).includes(D)}const m=[l.Oz.mimir,l.Oz.cortex,void 0];function y(b){return m.includes(b.implementation)}},5423:(ne,j,e)=>{"use strict";e.d(j,{K:()=>d});var n=e(74848),a=e(22803),s=e(63142);function d({className:l,leftActionsSeparator:i}){const c=(0,s.of)(o);return i?(0,n.jsx)("div",{className:(0,a.cx)(l,c.leftActionsSeparator)}):(0,n.jsx)("div",{className:(0,a.cx)(l,c.line)})}const o=l=>({leftActionsSeparator:(0,a.css)({display:"flex",flexGrow:1}),line:(0,a.css)({width:1,backgroundColor:l.colors.border.medium,height:24,flexShrink:0,flexGrow:0,[l.breakpoints.down("sm")]:{display:"none"}})})},5478:(ne,j,e)=>{"use strict";e.d(j,{d:()=>o,n:()=>l});var n=e(96540),a=e(13752),s=e(92138),d=e(36490);function o(){const i=(0,n.useRef)(new a.B);return{keyboardEvents:i.current,onKeyDown:c=>{switch(c.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":case"Escape":i.current.next(c);default:}}}}function l(i,c,p){const h=(0,n.useRef)({x:0,y:-1}),[u,r]=(0,n.useState)({x:0,y:-1}),v=(0,n.useRef)();return(0,n.useEffect)(()=>{v.current=p.view.fields.url,h.current.x=0,h.current.y=-1,r({...h.current})},[p]),(0,n.useEffect)(()=>{const g=i.subscribe({next:E=>{switch(E?.code){case"ArrowDown":{h.current.y++,r({...h.current});break}case"ArrowUp":h.current.y=Math.max(0,h.current.y-1),r({...h.current});break;case"ArrowRight":{c>0&&(h.current.x=Math.min(c,h.current.x+1),r({...h.current}));break}case"ArrowLeft":{c>0&&(h.current.x=Math.max(0,h.current.x-1),r({...h.current}));break}case"Enter":if(!v.current)break;const x=h.current.x*c+h.current.y;if(x<0){h.current.x=0,h.current.y=0,r({...h.current});break}const m=v.current.values?.[x];typeof m=="string"&&d.Ny.push(s.I.stripBaseFromUrl(m))}}});return()=>g.unsubscribe()},[i,c]),u}},5556:(ne,j,e)=>{"use strict";e.d(j,{Pp:()=>u,kM:()=>h,sQ:()=>r});var n=e(25229);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function a(v,g){return g&&Object.keys(g).length>0&&(v+="?"+d(g)),v}function s(v,g){return encodeURIComponent(v).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,g?"%20":"+").replace(/[!'()*]/g,function(E){return"%"+E.charCodeAt(0).toString(16).toUpperCase()})}function d(v,g=!0){const E=[],x=/\[\]$/,m=g?(f,C)=>s(f,C):(f,C)=>encodeURIComponent(f),y=f=>Object.prototype.toString.call(f)==="[object Array]",b=(f,C)=>{C=typeof C=="function"?C():C===null||C===void 0?"":C,E[E.length]=m(f,!0)+"="+m(C,!0)},D=(f,C)=>{let P,T,M;if(f)if(y(C))for(P=0,T=C.length;P<T;P++)x.test(f)?b(f,C[P]):D(f,C[P]);else if(C&&String(C)==="[object Object]")for(M in C)D(f+"["+M+"]",C[M]);else b(f,C);else if(y(C))for(P=0,T=C.length;P<T;P++)b(C[P].name,C[P].value);else for(M in C)D(M,C[M]);return E};return D("",v).join("&")}function o(v){return d(v,!1)}function l(v,g){if(g!=null&&g!==""){const E=v.indexOf("?");E!==-1?v.length-E>1&&(v+="&"):v+="?",v+=g}return v}function i(){const g=window.location.search.substring(1).split("&"),E={};for(const x of g){const m=x.split("=");if(m.length>1){const y=decodeURIComponent(m[0]),b=decodeURIComponent(m[1]);y in E?E[y]=[...E[y],b]:E[y]=[b]}else if(m.length===1){const y=decodeURIComponent(m[0]);E[y]=!0}}return E}function c(v){const g={},E=(v||"").split("&");for(let x of E){let m,y,b;if(x&&(y=x=x.replace(/\+/g,"%20"),m=x.indexOf("="),m!==-1&&(y=x.substring(0,m),b=x.substring(m+1)),y=p(y),y!==void 0)){b=b!==void 0?p(b):!0;let D;typeof b=="string"&&b!==""?D=b==="true"||b==="false"?b==="true":b:D=b,g.hasOwnProperty(y)?Array.isArray(g[y])?g[y].push(b):g[y]=[g[y],isNaN(D)?b:D]:g[y]=isNaN(D)?b:D}}return g}function p(v){try{return decodeURIComponent(v)}catch{return}}const h={renderUrl:a,toUrlParams:d,appendQueryToUrl:l,getUrlSearchParams:i,parseKeyValue:c,serializeParams:o};function u(v,g){return g!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(v)}const r=v=>{let g=v.from;(0,n.Ar)(g)&&(g=g.valueOf().toString());let E=v.to;return(0,n.Ar)(E)&&(E=E.valueOf().toString()),{from:g,to:E}}},5585:(ne,j,e)=>{"use strict";e.d(j,{B:()=>d});var n=e(74848),a=e(96540),s=e(46559);class d extends a.PureComponent{render(){return(0,n.jsx)(s.p,{...this.props})}}},5709:(ne,j,e)=>{"use strict";e.d(j,{H:()=>u});var n=e(75816),a=e(10378),s=e(2543),d=e.n(s),o=e(75505),l=e(32899),i=e(68143),c=e(45229),p=e(74268);const h=()=>async({body:r,notificationOptions:v={},...g},E,x)=>{const{errorMessage:m,showErrorAlert:y,successMessage:b,showSuccessAlert:D}=v,{hideErrorMessage:f}=x||{};try{const C={...g,...r&&{data:r},...(0,s.isBoolean)(D)&&{showSuccessAlert:D},...(0,s.isBoolean)(y)&&{showErrorAlert:y},...b&&{showSuccessAlert:!1},...(m||f)&&{showErrorAlert:!1}},P=performance.now(),{data:T,...M}=await(0,o.s)((0,i.AI)().fetch(C));return(0,p.l$)("backendSrvBaseQuery",{loadTimeMs:performance.now()-P},{url:g.url,method:g.method??"GET",responseStatus:M.statusText}),b&&D!==!1&&c.A.emit(l.r1.alertSuccess,[b]),{data:T,meta:M}}catch(C){return m&&y!==!1&&c.A.emit(l.r1.alertError,[m]),{error:C}}},u=(0,n.xP)({reducerPath:"alertingApi",baseQuery:h(),serializeQueryArgs:r=>(0,a.lE)((0,s.omit)(r,"queryArgs.notificationOptions")),tagTypes:["AlertingConfiguration","AlertmanagerConfiguration","AlertmanagerConnectionStatus","AlertmanagerAlerts","AlertmanagerSilences","OnCallIntegrations","DataSourceSettings","GrafanaLabels","CombinedAlertRule","GrafanaRulerRule","GrafanaRulerRuleVersion","GrafanaSlo","RuleGroup","RuleNamespace","ContactPoint","ContactPointsStatus","Receiver","DeletedRules","GrafanaPrometheusGroups"],endpoints:()=>({})})},5753:(ne,j,e)=>{"use strict";e.d(j,{R:()=>s});var n=e(74848),a=e(45861);function s({link:d,buttonProps:o}){return(0,n.jsx)("a",{href:d.href,target:d.target,rel:"noreferrer",onClick:d.onClick?l=>{!(l.ctrlKey||l.metaKey||l.shiftKey)&&d.onClick&&(l.preventDefault(),d.onClick(l))}:void 0,children:(0,n.jsx)(a.$n,{icon:d.target==="_blank"?"external-link-alt":"link",variant:"primary",size:"sm",...o,children:d.title})})}},5857:(ne,j,e)=>{"use strict";e.d(j,{l6:()=>c,rE:()=>l,rL:()=>i});var n=e(74848),a=e(96540),s=e(51898),d=e(92745),o=e(43243);function l(p){return["saturday","sunday","monday"].includes(p)}function i(p){if(p&&l(p))return p;const h=window?.grafanaBootData?.user?.weekStart;return h&&l(h)?h:"monday"}const c=p=>{const{onChange:h,width:u,autoFocus:r=!1,onBlur:v,value:g,disabled:E=!1,inputId:x}=p,m=(0,a.useMemo)(()=>[{value:"",label:(0,d.t)("grafana-ui.week-start-picker.weekStarts-label-default","Default")},{value:"saturday",label:(0,d.t)("grafana-ui.week-start-picker.weekStarts-label-saturday","Saturday")},{value:"sunday",label:(0,d.t)("grafana-ui.week-start-picker.weekStarts-label-sunday","Sunday")},{value:"monday",label:(0,d.t)("grafana-ui.week-start-picker.weekStarts-label-monday","Monday")}],[]),y=(0,a.useCallback)(D=>{D&&D.value!==void 0&&h(l(D.value)?D.value:void 0)},[h]),b=(0,a.useMemo)(()=>m.find(D=>D.value===g)?.value??"",[g,m]);return(0,n.jsx)(o.G,{id:x,value:b,placeholder:s.Tp.components.WeekStartPicker.placeholder,autoFocus:r,width:u,options:m,onChange:y,onBlur:v,disabled:E})}},5929:(ne,j,e)=>{"use strict";e.d(j,{y:()=>D});var n=e(74848),a=e(96540),s=e(42941),d=e(92745),o=e(67522),l=e(15757),i=e(83953),c=e(97486),p=e(77824),h=e(72265);const u=h.sG.map(f=>({value:f,label:f[0].toUpperCase()+f.slice(1).replace(/_/," ")}));function r(f){const{graphStyle:C,onChangeGraphStyle:P}=f;return(0,n.jsx)(p.z,{size:"sm",options:u,value:C,onChange:P})}var v=e(29043);const g="grafana.explore.style.graph",E=f=>{store.set(g,f)},x=()=>y(v.A.get(g)),m="lines",y=f=>h.sG.find(P=>P===f)??m,b=20,D=({data:f,eventBus:C,height:P,width:T,timeRange:M,timeZone:I,annotations:B,onChangeTime:U,splitOpenFn:W,thresholdsConfig:V,thresholdsStyle:z,loadingState:R,statusMessage:O})=>{const[N,F]=(0,s.A)(!1),[G,H]=(0,a.useState)(x),K=(0,a.useCallback)(Q=>{(0,i.ng)(Q),H(Q)},[]),w=(0,a.useMemo)(()=>N?f:f.slice(0,b),[f,N]);return(0,n.jsx)(o.NR,{title:(0,d.t)("graph.container.title","Graph"),titleItems:[!N&&b<f.length&&(0,n.jsx)(l.m,{toggleShowAllSeries:F,info:(0,n.jsxs)(d.x6,{i18nKey:"graph.container.show-only-series",children:["Showing only ",{MAX_NUMBER_OF_TIME_SERIES:b}," series"]}),buttonLabel:(0,n.jsxs)(d.x6,{i18nKey:"graph.container.show-all-series",children:["Show all ",{length:f.length}]}),tooltip:(0,d.t)("graph.container.content","Rendering too many series in a single panel may impact performance and make data harder to read. Consider refining your queries.")},"disclaimer")].filter(Boolean),width:T,height:P,loadingState:R,statusMessage:O,actions:(0,n.jsx)(r,{graphStyle:G,onChangeGraphStyle:K}),children:(Q,k)=>(0,n.jsx)(c.k,{graphStyle:G,data:w,height:k,width:Q,timeRange:M,onChangeTime:U,timeZone:I,annotations:B,splitOpenFn:W,loadingState:R,thresholdsConfig:V,thresholdsStyle:z,eventBus:C})})}},6048:(ne,j,e)=>{"use strict";e.d(j,{M:()=>f});var n=e(74848),a=e(2543),s=e(96540),d=e(92745),o=e(44248),l=e(41654),i=e(33143),c=e(92119),p=e(66507),h=e(4506),u=e(69523),r=e(42954);const v=new r.O(()=>[u.H.serializer,p.t.serializer,h.K.serializer]);var g=e(32603),E=e(59695);const x=({objectType:P,hasVariables:T,onAdd:M})=>{const I=(0,s.useMemo)(()=>{const B=[{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.add.data","Query result"),value:"data"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.add.variable","Template variable"),value:"variable",isDisabled:!T},{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.add.time-range-size","Time range less than"),value:"timeRangeSize"}];return P!=="panel"&&B.shift(),B},[P,T]);return(0,n.jsx)(E.i,{isFullWidth:!0,size:"sm",icon:"plus",variant:"secondary",label:(0,d.t)("dashboard.conditional-rendering.conditions.group.add.button","Add rule"),options:I,onChange:B=>M(B)})};var m=e(37386),y=e(77824);const b=({value:P,onChange:T})=>{const M=(0,s.useMemo)(()=>[{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.condition.all","Match all"),value:"and"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.condition.any","Match any"),value:"or"}],[]);return(0,n.jsx)(m.D,{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.condition.label","Match rules"),noMargin:!0,children:(0,n.jsx)(y.z,{fullWidth:!0,options:M,value:P,onChange:T})})},D=({objectType:P,value:T,onChange:M})=>{const I=(0,s.useMemo)(()=>[{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.visibility.show","Show"),value:"show"},{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.visibility.hide","Hide"),value:"hide"}],[]);return(0,n.jsx)(m.D,{label:(0,d.t)("dashboard.conditional-rendering.conditions.group.visibility.label","{{type}} visibility",{type:(0,g.uT)(P)}),noMargin:!0,children:(0,n.jsx)(y.z,{fullWidth:!0,options:I,value:T,onChange:M})})};class f extends o.Bs{static{this.Component=C}constructor(T){super(T),this._shouldShow=T.visibility==="show",this._shouldMatchAll=T.condition==="and",this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.forEachChild(T=>{T.isActive||this._subs.add(T.activate())}),this.check()}check(){const T=this.state.conditions.filter(I=>I.state.result!==void 0);let M=!0;T.length>0&&(M=this._shouldMatchAll?T.every(I=>I.state.result):T.some(I=>I.state.result),this._shouldShow||(M=!M)),M!==this.state.result&&(this.setState({...this.state,result:M}),this.publishEvent(new i.N4(this),!0))}changeVisibility(T){T!==this.state.visibility&&(this._shouldShow=T==="show",this.setState({visibility:T}),this.check())}changeCondition(T){T!==this.state.condition&&(this._shouldMatchAll=T==="and",this.setState({condition:T}),this.check())}createCondition(T){switch(T){case"data":return p.t.createEmpty();case"timeRangeSize":return h.K.createEmpty();case"variable":return u.H.createEmpty(o.jh.getVariables((0,c.YQ)(this)).state.variables[0].state.name)}}addCondition(T){const M=[...this.state.conditions,T];this.setState({conditions:M,renderHidden:M.some(I=>I instanceof p.t)}),this.isActive&&!T.isActive&&T.activate(),this.check()}removeCondition(T){const M=this.state.conditions.filter(I=>I!==T);this.setState({conditions:M,renderHidden:M.some(I=>I instanceof p.t)}),this.check()}undoRemoveCondition(T,M){const I=[...this.state.conditions];I.splice(M,0,T),this.setState({conditions:I}),this.check()}removeLastCondition(){const T=[...this.state.conditions];T.pop(),this.setState({conditions:T}),this.check()}getConditionIndex(T){return this.state.conditions.findIndex(M=>M===T)}serialize(){return{kind:"ConditionalRenderingGroup",spec:{visibility:this.state.visibility,condition:this.state.condition,items:this.state.conditions.map(T=>T.serialize())}}}static createEmpty(){return new f({condition:"and",visibility:"show",conditions:[],result:!0,renderHidden:!1})}static deserialize(T){const M=T.spec.items.map(I=>v.get(I.kind).deserialize(I));return new f({condition:T.spec.condition,visibility:T.spec.visibility,conditions:M,result:!0,renderHidden:M.some(I=>I instanceof p.t)})}}function C({model:P}){const{condition:T,visibility:M,conditions:I}=P.useState(),{variables:B}=o.jh.getVariables(P).useState(),U=(0,s.useMemo)(()=>(0,g.dQ)(P.parent),[P]);return(0,n.jsxs)(l.B,{direction:"column",gap:2,children:[(0,n.jsx)(D,{objectType:U,value:M,onChange:W=>{i.cc.edit({description:(0,d.t)("dashboard.conditional-rendering.conditions.group.visibility.label","{{type}} visibility",{type:(0,g.uT)(U)}),source:P,perform:()=>P.changeVisibility(W),undo:()=>P.changeVisibility(M)})}}),I.length>1&&(0,n.jsx)(b,{value:T,onChange:W=>{i.cc.edit({description:(0,d.t)("dashboard.conditional-rendering.conditions.group.condition.label","Match rules"),source:P,perform:()=>P.changeCondition(W),undo:()=>P.changeCondition(T)})}}),I.map(W=>W.renderCmp()),(0,n.jsx)(x,{objectType:U,hasVariables:B.length>0,onAdd:({value:W,label:V})=>{const z=P.createCondition(W);i.cc.edit({description:(0,d.t)("dashboard.edit-actions.add-conditional-rule","Add {{ruleDescription}} rule",{ruleDescription:(0,a.lowerCase)(V)}),source:P,perform:()=>P.addCondition(z),undo:()=>P.removeLastCondition()})}})]})}},6079:(ne,j,e)=>{"use strict";e.d(j,{r:()=>c});var n=e(74848),a=e(92138),s=e(92745),d=e(45861),o=e(73427),l=e(26437),i=e(11257);function c({variant:p,onClick:h}){const u=o.TP.hasPermission(i.w.DataSourcesCreate),r=a.I.assureBaseUrl(l.b.DataSourcesNew);return(0,n.jsx)(d.z9,{variant:p||"primary",href:r,disabled:!u,tooltip:u?void 0:(0,s.t)("datasources.add-new-data-source-button.tooltip-no-permission","You do not have permission to configure new data sources"),onClick:h,target:"_blank",children:(0,n.jsx)(s.x6,{i18nKey:"data-source-picker.add-new-data-source",children:"Configure a new data source"})})}},6106:(ne,j,e)=>{"use strict";e.d(j,{E:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(92745),l=e(76319),i=e(34213),c=e(63142),p=e(74048),h=e(18771);const u=({cols:v,items:g,isExpandable:E=!1,onCollapse:x,onExpand:m,isExpanded:y,renderExpandedContent:b,testIdGenerator:D,pagination:f,paginationStyles:C,renderPrefixCell:P,renderPrefixHeader:T,footerRow:M,dataTestId:I})=>{const B=(0,c.of)(h.H);if((x||m||y)&&!(x&&m&&y))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((E||b)&&!(E&&b))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const U=(0,c.of)(r(v,E,!!T)),[W,V]=(0,s.useState)([]),z=H=>{y&&x&&m?y(H)?x(H):m(H):V(W.includes(H.id)?W.filter(K=>K!==H.id):[...W,H.id])},R=f?.itemsPerPage??g.length,{page:O,numberOfPages:N,onPageChange:F,pageItems:G}=(0,p.W)(g,1,R);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:U.container,"data-testid":I??"dynamic-table",children:[(0,n.jsxs)("div",{className:U.row,"data-testid":"header",children:[T&&T(),E&&(0,n.jsx)("div",{className:U.cell()}),v.map(H=>(0,n.jsx)("div",{className:U.cell(H.alignColumn),children:H.label},H.id))]}),G.map((H,K)=>{const w=y?y(H):W.includes(H.id);return(0,n.jsxs)("div",{className:U.row,"data-testid":D?.(H,K)??"row",children:[P&&P(H,K,g),E&&(0,n.jsx)("div",{className:(0,a.cx)(U.cell(),U.expandCell),children:(0,n.jsx)(l.K,{tooltip:w?(0,o.t)("alerting.dynamic-table.tooltip-collapse-row","Collapse row"):(0,o.t)("alerting.dynamic-table.tooltip-expand-row","Expand row"),"data-testid":d.Tp.components.AlertRules.toggle,name:w?"angle-down":"angle-right",onClick:()=>z(H)})}),v.map(Q=>(0,n.jsx)("div",{className:(0,a.cx)(U.cell(Q.alignColumn),U.bodyCell,Q.className),"data-column":Q.label,children:Q.renderCell(H,K)},`${H.id}-${Q.id}`)),w&&b&&(0,n.jsx)("div",{className:U.expandedContentRow,"data-testid":d.Tp.components.AlertRules.expandedContent,children:b(H,K,g)})]},`${H.id}-${K}`)}),M&&(0,n.jsx)("div",{className:(0,a.cx)(U.row,U.footerRow),children:M})]}),f&&(0,n.jsx)(i.d,{className:(0,a.cx)(B,C),currentPage:O,numberOfPages:N,onNavigate:F,hideWhenSinglePage:!0})]})},r=(v,g,E)=>{const x=v.map(m=>m.size?typeof m.size=="number"?`${m.size}fr`:m.size:"auto");return g&&x.unshift("calc(1em + 16px)"),E&&x.unshift("0"),m=>({container:(0,a.css)({border:`1px solid ${m.colors.border.weak}`,borderRadius:m.shape.radius.default,color:m.colors.text.secondary}),row:(0,a.css)({display:"grid",gridTemplateColumns:x.join(" "),gridTemplateRows:"1fr auto","&:nth-child(2n + 1)":{backgroundColor:m.colors.background.secondary},"&:nth-child(2n)":{backgroundColor:m.colors.background.primary},[m.breakpoints.down("sm")]:{gridTemplateColumns:"auto 1fr",gridTemplateAreas:"left right",padding:`0 ${m.spacing(.5)}`,"&:first-child":{display:"none"},"& > *:first-child":{display:E?"none":void 0}}}),footerRow:(0,a.css)({display:"flex",padding:m.spacing(1)}),cell:y=>(0,a.css)({display:"flex",alignItems:"center",padding:m.spacing(1),justifyContent:y||"initial",[m.breakpoints.down("sm")]:{padding:`${m.spacing(1)} 0`,gridTemplateColumns:"1fr"}}),bodyCell:(0,a.css)({overflow:"hidden",[m.breakpoints.down("sm")]:{gridColumnEnd:"right",gridColumnStart:"right","&::before":{content:"attr(data-column)",display:"block",color:m.colors.text.primary}}}),expandCell:(0,a.css)({justifyContent:"center",[m.breakpoints.down("sm")]:{alignItems:"start",gridArea:"left"}}),expandedContentRow:(0,a.css)({gridColumnEnd:x.length+1,gridColumnStart:E?3:2,gridRow:2,padding:`0 ${m.spacing(3)} 0 ${m.spacing(1)}`,position:"relative",[m.breakpoints.down("sm")]:{gridColumnStart:2,borderTop:`1px solid ${m.colors.border.strong}`,gridRow:"auto",padding:`${m.spacing(1)} 0 0 0`}})})}},6135:(ne,j,e)=>{"use strict";e.d(j,{FI:()=>n,J4:()=>a});const n="grafana_alerting";var a=(o=>(o.OnCall="oncall",o))(a||{});const s=(o,l)=>l.includes(o),d=(o,l)=>{if(!o.grafana_managed_receiver_configs)return!1;const i=o.grafana_managed_receiver_configs.length===1,c=s(o.grafana_managed_receiver_configs[0]?.settings?.url??"",l.map(p=>p.integration_url));return i&&c}},6194:(ne,j,e)=>{"use strict";e.d(j,{A2:()=>u,JE:()=>x,Nx:()=>r,Oy:()=>v,bx:()=>h,i_:()=>E,oV:()=>g});var n=e(2543),a=e.n(n),s=e(43173),d=e(44022),o=e(4651),l=e(82779),i=e(95443),c=e(52161),p=e(20437);function h(m){if(!(s.$.featureToggles.alertingQueryAndExpressionsStepMode??!1))return{...m,editorSettings:{simplifiedQueryEditor:!1,simplifiedNotificationEditor:!0}};const b=m.queries.filter(C=>!(0,d.f)(C.model)),D=m.queries.filter(C=>v(C)),f=r(b,D);return{...m,editorSettings:{simplifiedQueryEditor:f,simplifiedNotificationEditor:!0}}}function u(m){return{...m,queries:m.queries?.map(y=>{if((0,d.f)(y.model))return y;const b=y.model.datasource?.type?(0,c.cl)(y.model.datasource.type):!1,D="instant"in y.model&&y.model.instant!==void 0?y.model.instant:b;return{...y,model:{...y.model,instant:D,range:!D}}})}}function r(m,y){if(m.length!==1||y.length>2)return!1;const b=m.at(0),D=y.find(z=>z.model.type===o.Tz.reduce),f=y.find(z=>z.model.type===o.Tz.threshold),C=D?(0,l.OC)(D.model):!1,P=f?.model.conditions?.every(z=>(0,n.isEmpty)(z.unloadEvaluator))??!0,T=D&&C,M=f&&P,I=f?.model.expression===D?.refId,B=D?.model.expression===b?.refId;if(T&&B&&M&&I)return!0;const U=b?(0,p.mY)(b):!1,W=y.length===1&&f,V=f?.model.expression===b?.refId;return!!(U&&W&&M&&V)}function v(m){return(0,d.f)(m.model)}function g(m){return!(0,d.f)(m.model)}const E=m=>({...m,queries:m.queries?.map(y=>(0,n.omit)(y,"model.hide"))});function x(m){const y=[...m];return i.kl.map(D=>D.key).forEach((D,f)=>{const C=y.findIndex(P=>P.key===D);if(C===-1){const P={key:D,value:""};y.splice(f,0,P)}else C!==f&&y.splice(f,0,y.splice(C,1)[0])}),y}},6201:(ne,j,e)=>{"use strict";e.d(j,{H:()=>s,l:()=>a});let n=null;function a(d){if(n)throw new Error("User should only be set once, when Grafana is starting.");n=d}function s(){if(!n)throw new Error("User can only be used after Grafana instance has started.");return n}},6219:(ne,j,e)=>{"use strict";e.d(j,{$q:()=>g,J6:()=>v,cA:()=>h,kb:()=>m,tZ:()=>x});var n=e(75505),a=e(79609),s=e(68143),d=e(43173),o=e(78282),l=e(25992),i=e(44720),c=e(46072),p=e(52860);const h=(y,b,D)=>(y.forEach(f=>{const C=f.refId;if(!C)return;let P=D[C];if(P===void 0&&f.meta?.preferredVisualisationType==="rawPrometheus"){const M=(0,i.a)(C);P=D[M]}const T=b.filter(M=>M.source.uid===P);u(f,r(T,f))}),y),u=(y,b)=>{y.fields.forEach(D=>{D.config.links=D.config.links?.filter(f=>f.origin!==a.x0.Correlations)||[],b.map(f=>{if(f.config.field===D.name){if(f.type==="query"){const C=f.config.target||{};D.config.links.push({internal:{query:{...C,datasource:{uid:f.target.uid}},datasourceUid:f.target.uid,datasourceName:f.target.name},url:"",title:f.label||f.target.name,origin:a.x0.Correlations,meta:{transformations:f.config.transformations}})}else if(f.type==="external"){const C=f.config.target;D.config.links.push({url:C.url,title:f.label||"External URL",origin:a.x0.Correlations,meta:{transformations:f.config?.transformations}})}}})})},r=(y,b)=>y.map(D=>{if(D.source.meta?.id==="loki"&&d.$.featureToggles.lokiLogsDataplane===!0&&D.config.field==="Line"){const f=(0,c.Os)(b);f!=null&&f.bodyField.name!==void 0&&(D.config.field=f?.bodyField.name)}return D}),v=async y=>(0,n.s)((0,s.AI)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:y}})).then(p.bQ).then(p.F0),g=async(y,b)=>(0,s.AI)().post(`/api/datasources/uid/${y}/correlations`,b),E=async y=>y.datasourceInstance?.meta.mixed?await(0,o.l)().get(y.queries[0].datasource):y.datasourceInstance,x=async(y,b)=>Promise.all([E(y),E(b)]).then(D=>D[0]?.name!==void 0&&D[1]?.name!==void 0?`${D[0]?.name} to ${D[1]?.name}`:""),m=(0,l.DW)("features.correlations")},6223:(ne,j,e)=>{"use strict";e.d(j,{z:()=>i});var n=e(59511),a=e.n(n),s=e(65024),d=e.n(s),o=e(82093),l=e.n(o);const i=window.System},6262:(ne,j,e)=>{"use strict";e.d(j,{U:()=>o,Z4:()=>n,_g:()=>a,d9:()=>s,us:()=>d});var n=(l=>(l.Home="home-dashboard",l.New="new-dashboard",l.Template="template-dashboard",l.Normal="normal-dashboard",l.Provisioning="provisioning-dashboard",l.Scripted="scripted-dashboard",l.Public="public-dashboard",l.Embedded="embedded-dashboard",l.Report="report-dashboard",l))(n||{}),a=(l=>(l.NotStarted="Not started",l.Fetching="Fetching",l.Services="Services",l.Failed="Failed",l.Completed="Completed",l))(a||{}),s=(l=>(l.Full="full",l))(s||{});const d="DASHBOARD_FROM_LS_KEY";function o(l){return"redirectUri"in l}},6399:(ne,j,e)=>{"use strict";e.d(j,{e:()=>p});var n=e(74848),a=e(22803),s=e(51898),d=e(63142),o=e(75254),l=e(41479),i=e(30930),c=e(94535);const p=({children:u,links:r,style:v})=>{const g=(0,d.of)(h),E=[{items:(0,o.J)(r),label:r().length?"Data links":""}],x=E[0].items.length,m=()=>E.map((b,D)=>(0,n.jsx)(i.r,{label:b.label,children:(b.items||[]).map((f,C)=>(0,n.jsx)(c.D,{url:f.url,label:f.label,target:f.target,icon:f.icon,active:f.active,onClick:f.onClick,className:g.itemWrapper},`${b.label}-${D}-${C}}`))},`${b.label}${D}`)),y=(0,a.css)({cursor:"context-menu"});if(x>1)return(0,n.jsx)(l.n,{renderMenuItems:m,children:({openMenu:b})=>u({openMenu:b,targetClassName:y})});{const b=r()[0];return(0,n.jsx)("a",{href:b.href,onClick:b.onClick,target:b.target,title:b.title,style:{...v,overflow:"hidden",display:"flex"},"data-testid":s.Tp.components.DataLinksContextMenu.singleLink,children:u({})})}},h=u=>({itemWrapper:(0,a.css)({fontSize:12})})},6461:(ne,j,e)=>{"use strict";e.d(j,{Yz:()=>l,lX:()=>o,wm:()=>i,zE:()=>c});var n=e(30643),a=e(98279),s=e(59006),d=e(67350);function o(p){return{kind:"TabsLayout",spec:{tabs:p.state.tabs.filter(h=>!h.state.repeatSourceKey).map(l)}}}function l(p){const h=p.state.layout.serialize(),u={kind:"TabsLayoutTab",spec:{title:p.state.title,layout:h,...p.state.repeatByVariable&&{repeat:{mode:"variable",value:p.state.repeatByVariable}}}},r=p.state.conditionalRendering?.serialize();return r?.spec.items.length&&(u.spec.conditionalRendering=r),u}function i(p,h,u,r){if(p.kind!=="TabsLayout")throw new Error("Invalid layout kind");const v=p.spec.tabs.map(g=>c(g,h,u,r));return new a.K({tabs:v})}function c(p,h,u,r){const v=p.spec.layout;return new n.V({title:p.spec.title,layout:s.j.get(v.kind).deserialize(v,h,u,r),repeatByVariable:p.spec.repeat?.value,conditionalRendering:(0,d.Xy)(p)})}},6607:(ne,j,e)=>{"use strict";e.d(j,{f:()=>D});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(92745),l=e(43173),i=e(87063),c=e(45861),p=e(88559),h=e(63142),u=e(1682),r=e(23289),v=e(92119),g=e(11534),E=e(98279),x=e(74232),m=e(17084),y=e(61659),b=e(20246);function D({layoutManager:T}){const M=(0,h.of)(P),{hasCopiedPanel:I}=(0,y.x)(),{disableGrouping:B,disableTabs:U}=(0,s.useMemo)(()=>{if(l.$.featureToggles.unlimitedLayoutsNesting)return{disableGrouping:!1,disableTabs:!1};let W=T.parent;const V=[];for(;W;){if((0,x.e)(W)&&V.push(W.descriptor.id),V.length===2){W=void 0;break}W=W.parent}return V.length===2?{disableGrouping:!0,disableTabs:!0}:V.length===1&&V[0]===E.K.descriptor.id?{disableGrouping:!1,disableTabs:!0}:{disableGrouping:!1,disableTabs:!1}},[T]);return(0,n.jsxs)("div",{className:(0,a.cx)(M.addAction,"dashboard-canvas-add-button"),children:[(0,n.jsx)(c.$n,{variant:"primary",fill:"text",icon:"plus","data-testid":d.Tp.components.CanvasGridAddActions.addPanel,onClick:()=>{T.addPanel((0,v.O8)()),r.c.trackAddPanelClick()},children:(0,n.jsx)(o.x6,{i18nKey:"dashboard.canvas-actions.add-panel",children:"Add panel"})}),(0,n.jsx)(p.m,{overlay:(0,n.jsxs)(i.W,{children:[(0,n.jsx)(i.W.Item,{icon:"list-ul",label:(0,o.t)("dashboard.canvas-actions.group-into-row","Group into row"),testId:d.Tp.components.CanvasGridAddActions.addRow,onClick:()=>{(0,m.t)(T),r.c.trackGroupRowClick()}}),(0,n.jsx)(i.W.Item,{icon:"layers",testId:d.Tp.components.CanvasGridAddActions.addTab,label:(0,o.t)("dashboard.canvas-actions.group-into-tab","Group into tab"),disabled:U,description:U?(0,o.t)("dashboard.canvas-actions.disabled-nested-tabs","Tabs cannot be nested inside other tabs"):void 0,onClick:()=>{(0,m.A)(T),r.c.trackGroupTabClick()}})]}),children:(0,n.jsx)(c.$n,{variant:"primary",fill:"text",icon:"layers","data-testid":d.Tp.components.CanvasGridAddActions.groupPanels,disabled:B,tooltip:B?(0,o.t)("dashboard.canvas-actions.disabled-nested-grouping","Grouping is limited to 2 levels"):void 0,children:(0,n.jsx)(o.x6,{i18nKey:"dashboard.canvas-actions.group-panels",children:"Group panels"})})}),f(T),I&&T.pastePanel&&(0,n.jsx)(c.$n,{"data-testid":d.Tp.components.CanvasGridAddActions.pastePanel,variant:"primary",fill:"text",icon:"clipboard-alt",onClick:()=>{T.pastePanel?.(),r.c.trackPastePanelClick()},children:(0,n.jsx)(o.x6,{i18nKey:"dashboard.canvas-actions.paste-panel",children:"Paste panel"})})]})}function f(T){if(T.parent instanceof g.H$)return null;const I=u.b4.getLayoutManagerFor(T.parent),B=()=>{r.c.trackUngroupClick(),(0,b.f)(I,T)};return I instanceof E.K?(0,n.jsx)(C,{parentLayout:I,onClick:B}):null}function C({parentLayout:T,onClick:M}){const{tabs:I}=T.useState();return I.length>1?null:(0,n.jsx)(c.$n,{variant:"primary",fill:"text",icon:"layers-slash",onClick:M,"data-testid":d.Tp.components.CanvasGridAddActions.ungroup,children:(0,n.jsx)(o.x6,{i18nKey:"dashboard.canvas-actions.un-group-panels",children:"Ungroup"})})}const P=T=>({addAction:(0,a.css)({position:"absolute",padding:T.spacing(1,0),height:T.spacing(5),bottom:0,left:0,right:0,opacity:0,[T.transitions.handleMotion("no-preference","reduce")]:{transition:T.transitions.create("opacity")}})})},6684:(ne,j,e)=>{"use strict";e.d(j,{L:()=>i,W:()=>l});var n=e(81160),a=e(36638),s=e(57866),d=e(64761),o=e(8721),l=(c=>(c.outer="outer",c.inner="inner",c.outerTabular="outerTabular",c))(l||{});const i={id:d.F.joinByField,aliasIds:[d.F.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(c,p)=>h=>h.pipe((0,n.T)(u=>i.transformer(c,p)(u))),transformer:(c,p)=>{let h;return u=>{if(u.length>1){c.byField&&!h&&(h=a.sJ.get(s.Ct.byName).get(c.byField));const r=(0,o.Fd)({frames:u,joinBy:h,mode:c.mode});if(r)return r.refId=`${d.F.joinByField}-${u.map(v=>v.refId).join("-")}`,[r]}return u}}}},6844:(ne,j,e)=>{"use strict";e.d(j,{UM:()=>D,Yg:()=>h,nz:()=>b,zx:()=>v});var n=e(95004),a=e(36638),s=e(57866);const d={id:s.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:f=>{const C=f.map(P=>(0,a.NS)(P));return(P,T,M)=>{for(const I of C)if(I(P,T,M))return!0;return!1}},getOptionsDisplayText:f=>{let C="";for(const P of f){C.length>0&&(C+=" OR ");const T=a.sJ.get(P.id);C+=T.getOptionsDisplayText?T.getOptionsDisplayText(P):T.name}return C}},o={id:s.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:f=>{const C=f.map(P=>(0,a.Dq)(P));return P=>{for(const T of C)if(T(P))return!0;return!1}},getOptionsDisplayText:f=>{let C="";for(const P of f){C.length>0&&(C+=" OR ");const T=a.RE.get(P.id);C+=T.getOptionsDisplayText?T.getOptionsDisplayText(P):T.name}return C}},l={id:s.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:f=>{const C=f.map(P=>(0,a.NS)(P));return(P,T,M)=>{for(const I of C)if(!I(P,T,M))return!1;return!0}},getOptionsDisplayText:f=>{let C="";for(const P of f){C.length>0&&(C+=" AND ");const T=a.sJ.get(P.id);C+=T.getOptionsDisplayText?T.getOptionsDisplayText(P):T.name}return C}},i={id:s.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:f=>{const C=f.map(P=>(0,a.Dq)(P));return P=>{for(const T of C)if(!T(P))return!1;return!0}},getOptionsDisplayText:f=>{let C="";for(const P of f){C.length>0&&(C+=" AND ");const T=a.RE.get(P.id);C+=T.getOptionsDisplayText?T.getOptionsDisplayText(P):T.name}return C}},c={id:s.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:f=>{const C=(0,a.NS)(f);return(P,T,M)=>!C(P,T,M)},getOptionsDisplayText:f=>{const C=a.sJ.get(f.id);return"NOT "+(C.getOptionsDisplayText?C.getOptionsDisplayText(f.options):C.name)}},p={id:s.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:f=>{const C=(0,a.Dq)(f);return P=>!C(P)},getOptionsDisplayText:f=>{const C=a.RE.get(f.id);return"NOT "+(C.getOptionsDisplayText?C.getOptionsDisplayText(f.options):C.name)}},h=f=>!0,u=f=>!0,r=f=>!1,v=f=>f.type!==n.PU.time,g=f=>!1,E={id:s.cV.alwaysMatch,name:"All Fields",description:"Always Match",get:f=>h,getOptionsDisplayText:f=>"Always"},x={id:s.cV.alwaysMatch,name:"All Frames",description:"Always Match",get:f=>u,getOptionsDisplayText:f=>"Always"},m={id:s.cV.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:f=>r,getOptionsDisplayText:f=>"Never"},y={id:s.cV.neverMatch,name:"No Frames",description:"Never Match",get:f=>g,getOptionsDisplayText:f=>"Never"};function b(){return[d,l,c,E,m]}function D(){return[o,i,p,x,y]}},6890:(ne,j,e)=>{"use strict";e.d(j,{Do:()=>n.Do,Vz:()=>a.Vz,YA:()=>a.YA,dx:()=>n.dx});var n=e(12066),a=e(43550)},7075:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>i});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(45861);const i=({children:p,className:h,closeOnConfirm:u,confirmText:r="Save",confirmVariant:v="primary",disabled:g=!1,onCancel:E,onClick:x,onConfirm:m,size:y="md"})=>{const b=(0,s.useRef)(null),D=(0,s.useRef)(null),[f,C]=(0,s.useState)(!1),[P,T]=(0,s.useState)(!1),M=(0,o.of)(c);(0,s.useEffect)(()=>{f?(D.current?.focus(),T(!0)):P&&(b.current?.focus(),T(!1))},[P,f]);const I=R=>{R&&R.preventDefault(),C(!0),x?.()},B=R=>{R&&R.preventDefault(),C(!1),b.current?.focus(),E?.()},U=R=>{R&&R.preventDefault(),m?.(),u&&C(!1)},W=(0,a.cx)(h,M.mainButton,{[M.mainButtonHide]:f}),V=(0,a.cx)(M.confirmButton,{[M.confirmButtonHide]:!f}),z=(0,a.cx)(M.confirmButtonContainer,{[M.confirmButtonContainerHide]:!f});return(0,n.jsxs)("div",{className:M.container,children:[(0,n.jsx)("span",{className:W,children:typeof p=="string"?(0,n.jsx)(l.$n,{disabled:g,size:y,fill:"text",onClick:I,ref:b,children:p}):s.cloneElement(p,{disabled:g,onClick:I,ref:b})}),(0,n.jsx)("div",{className:z,children:(0,n.jsxs)("span",{className:V,children:[(0,n.jsx)(l.$n,{size:y,variant:v,onClick:U,ref:D,children:r}),(0,n.jsx)(l.$n,{size:y,fill:"text",onClick:B,children:(0,n.jsx)(d.x6,{i18nKey:"grafana-ui.confirm-button.cancel",children:"Cancel"})})]})})]})};i.displayName="ConfirmButton";const c=p=>({container:(0,a.css)({alignItems:"center",display:"flex",justifyContent:"flex-end",position:"relative"}),mainButton:(0,a.css)({opacity:1,[p.transitions.handleMotion("no-preference")]:{transition:p.transitions.create(["opacity"],{duration:p.transitions.duration.shortest,easing:p.transitions.easing.easeOut})},zIndex:2}),mainButtonHide:(0,a.css)({opacity:0,[p.transitions.handleMotion("no-preference")]:{transition:p.transitions.create(["opacity","visibility"],{duration:p.transitions.duration.shortest,easing:p.transitions.easing.easeIn})},visibility:"hidden",zIndex:0}),confirmButtonContainer:(0,a.css)({overflow:"visible",position:"absolute",pointerEvents:"all",right:0}),confirmButtonContainerHide:(0,a.css)({overflow:"hidden",pointerEvents:"none"}),confirmButton:(0,a.css)({alignItems:"flex-start",background:p.colors.background.primary,display:"flex",opacity:1,transform:"translateX(0)",[p.transitions.handleMotion("no-preference")]:{transition:p.transitions.create(["opacity","transform"],{duration:p.transitions.duration.shortest,easing:p.transitions.easing.easeOut})},zIndex:1}),confirmButtonHide:(0,a.css)({opacity:0,transform:"translateX(100%)",[p.transitions.handleMotion("no-preference")]:{transition:p.transitions.create(["opacity","transform","visibility"],{duration:p.transitions.duration.shortest,easing:p.transitions.easing.easeIn})},visibility:"hidden"})})},7078:(ne,j,e)=>{"use strict";e.d(j,{Df:()=>d,Tj:()=>l,Zn:()=>i,q7:()=>o,tw:()=>c});var n=e(22429),a=e(77731),s=e(18615);function d(p,h){return!p||!h?!1:typeof h=="string"?p.uid===h:p.uid===h.uid}function o(p){if(p){if(typeof p=="string")return`${p} - not found`;if("name"in p)return p.name;if(p.uid)return`${p.uid} - not found`}}function l(p,h,u,r=[]){return(g,E)=>{const x=g.name.toUpperCase(),m=E.name.toUpperCase();if(p&&d(g,p))return-1;if(p&&d(E,p))return 1;const y=r.includes(g.uid),b=r.includes(E.uid);if(y&&!b)return-1;if(b&&!y)return 1;if(y&&b)return x<m?-1:1;const D=h.indexOf(g.uid),f=h.indexOf(E.uid);if(D>-1&&D>f)return-1;if(f>-1&&f>D)return 1;const C=u.includes(g.uid),P=u.includes(E.uid);return C&&!P?-1:P&&!C||g.meta.builtIn&&!E.meta.builtIn?1:E.meta.builtIn&&!g.meta.builtIn||x<m?-1:1}}function i(p,h=""){return p.name.toLowerCase().includes(h.toLowerCase())}function c(p){if(!p.uid)return;const h=(0,n.UA)().getCurrent()?.uid??"";if(p.uid===s.uv)return(0,a.B1)(h);(0,a.dH)(h,p.uid)}},7094:(ne,j,e)=>{"use strict";e.d(j,{u:()=>x});var n=e(74848),a=e(16207),s=e(92745),d=e(43173),o=e(44248),l=e(41654),i=e(82612),c=e(30124),p=e(18789),h=e(92119),u=e(32540),r=e(37040),v=e(66251),g=e(93389),E=e(23244);class x extends o.Bs{static{this.LOADING_VIZ_PANEL_PLUGIN_ID="library-panel-loading-plugin"}constructor(D){super(D),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.state.isLoaded||this.loadLibraryPanelFromPanelModel()}setPanelFromLibPanel(D){if(this.state._loadedPanel?.version===D.version)return;const f=this.parent;if(!(f instanceof o.Eb))return;const C=new i.a9(D.model),P=(0,h.Cs)(f);C.id=P;const T=[];T.push(new u.$({rawLinks:C.links,menu:new u.m({$behaviors:[r.oV]})})),T.push(new v.W);let M;d.$.featureToggles.preferLibraryPanelTitle?M=C.title??f.state.title:M=f.state.title??C.title;const I={title:M,options:C.options??{},fieldConfig:C.fieldConfig,pluginId:C.type,pluginVersion:C.pluginVersion,displayMode:C.transparent?"transparent":void 0,description:C.description,titleItems:T,$data:(0,p.w)(C)};(C.timeFrom||C.timeShift)&&(I.$timeRange=new E.v({timeFrom:C.timeFrom,timeShift:C.timeShift,hideTimeOverride:C.hideTimeOverride})),f.setState(I),f.changePluginType(C.type,I.options,I.fieldConfig),this.setState({_loadedPanel:D,isLoaded:!0,name:D.name});const B=f.parent;C.repeat&&B instanceof g.U&&(B.setState({variableName:C.repeat,repeatDirection:C.repeatDirection==="h"?"h":"v",maxPerRow:C.maxPerRow,itemHeight:B.state.height??10}),B.performRepeat())}unlink(){const D=this.parent;D instanceof o.Eb&&D.setState({$behaviors:D.state.$behaviors?.filter(f=>f!==this)})}async loadLibraryPanelFromPanelModel(){let D=this.parent;if(D instanceof o.Eb)try{const f=await(0,c.Yr)(this.state.uid,!0);this.setPanelFromLibPanel(f)}catch{D.setState({_pluginLoadError:`Unable to load library panel: ${this.state.uid}`})}}}const m=new a.m(y);function y(b){return(0,n.jsx)(l.B,{direction:"column",justifyContent:"space-between",children:(0,n.jsx)(s.x6,{i18nKey:"library-panels.loading-panel-text",children:"Loading library panel"})})}o.Go.registerRuntimePanelPlugin({pluginId:x.LOADING_VIZ_PANEL_PLUGIN_ID,plugin:m})},7102:(ne,j,e)=>{"use strict";e.d(j,{F:()=>o});var n=e(2543),a=e.n(n),s=e(55386),d=e(11576);function o(l){return new Proxy({},{get:(i,c)=>{let p=l.frame.fields.find(v=>c===v.name);if(!p){const v=(0,n.toNumber)(c);p=l.frame.fields[v]}if(p||(p=l.frame.fields.find(v=>c===v.config.displayName)),p||(p=l.frame.fields.find(v=>v.labels?c===v.labels.name:!1)),!p)return;const h=p.display??(0,d.J)(),u=p.values[l.rowIndex],r=h(u);return r.toString=()=>(0,s.cN)(r),r}})}},7389:(ne,j,e)=>{"use strict";e.d(j,{CO:()=>n,ZG:()=>a,zL:()=>s});var n=(d=>(d[d.never=0]="never",d[d.onDashboardLoad=1]="onDashboardLoad",d[d.onTimeRangeChanged=2]="onTimeRangeChanged",d))(n||{}),a=(d=>(d[d.disabled=0]="disabled",d[d.alphabeticalAsc=1]="alphabeticalAsc",d[d.alphabeticalDesc=2]="alphabeticalDesc",d[d.numericalAsc=3]="numericalAsc",d[d.numericalDesc=4]="numericalDesc",d[d.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",d[d.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",d[d.naturalAsc=7]="naturalAsc",d[d.naturalDesc=8]="naturalDesc",d))(a||{}),s=(d=>(d[d.dontHide=0]="dontHide",d[d.hideLabel=1]="hideLabel",d[d.hideVariable=2]="hideVariable",d[d.inControlsMenu=3]="inControlsMenu",d))(s||{})},7498:(ne,j,e)=>{"use strict";e.d(j,{C:()=>C,S:()=>P});var n=e(65474),a=e(81160),s=e(739),d=e(41119),o=e(76190),l=e(28105),i=e(43173),c=e(44248),p=e(6890),h=e(64762),u=e(73427),r=e(47797),v=e(70327),g=e(78467),E=e(95443),x=e(52161),m=e(29609),y=e(8535),b=e(11257),D=e(24619),f=e(92119);class C extends c.VE{constructor(M){super({isEnabled:!0,...M,isHidden:!0}),this.hasAlertRules=!0,this.topic=s.QR.AlertStates,this.handleError=I=>{const B=(0,h.gi)("AlertStatesDataLayer",(0,r.q6)(I));(0,y.JD)((0,p.dx)(B))}}onEnable(){const M=c.jh.getTimeRange(this);this._timeRangeSub=M.subscribeToState(()=>{this.runWithTimeRange(M)})}onDisable(){this._timeRangeSub?.unsubscribe()}runLayer(){const M=c.jh.getTimeRange(this);this.runWithTimeRange(M)}async runWithTimeRange(M){const I=(0,f.YQ)(this),{uid:B,id:U}=I.state;if(this.querySub&&this.querySub.unsubscribe(),!this.canWork(M))return;const W=async()=>{const R=await(0,y.JD)(v.hK.endpoints.prometheusRuleNamespaces.initiate({ruleSourceName:x.hY,dashboardUid:B},{forceRefetch:!0}));if(R.error)throw new Error("Unexpected alert rules response.");return R.data},z=(0,n.H)(W()).pipe((0,a.T)(R=>(0,g.Kw)(R))).pipe((0,a.T)(R=>{this.hasAlertRules=!1;const O={};return R.forEach(N=>N.rules.forEach(F=>{if(m.R$.alertingRule(F)&&F.annotations?.[E.YH.panelID]){this.hasAlertRules=!0;const G=Number(F.annotations[E.YH.panelID]),H=P(F.state);O[G]?H===o.O.Alerting&&O[G].state!==o.O.Alerting?O[G].state=o.O.Alerting:H===o.O.Pending&&O[G].state!==o.O.Alerting&&O[G].state!==o.O.Pending&&(O[G].state=o.O.Pending):O[G]={state:H,id:Object.keys(O).length,panelId:G,dashboardId:U}}})),Object.values(O)}));this.querySub=z.subscribe({next:R=>{const O=(0,d.Vc)(R);this.publishResults({state:l.Gu.Done,series:[{...O,meta:{...O.meta,dataTopic:s.QR.AlertStates}}],timeRange:M.state.value})},error:R=>{this.handleError(R),this.publishResults({state:l.Gu.Error,series:[],errors:[{message:(0,r.q6)(R)}],timeRange:M.state.value})}})}canWork(M){const I=(0,f.YQ)(this),{uid:B}=I.state;return!(!B||i.$.publicDashboardAccessToken||M.state.value.raw.to!=="now"||this.hasAlertRules===!1||!(u.TP.hasPermission(b.w.AlertingRuleRead)&&u.TP.hasPermission(b.w.AlertingRuleExternalRead)))}}function P(T){return T===D.cF.Firing?o.O.Alerting:T===D.cF.Pending?o.O.Pending:o.O.OK}},7515:(ne,j,e)=>{"use strict";e.d(j,{a:()=>l});var n=e(74848),a=e(96540),s=e(1604),d=e(73858),o=e(16477);function l({id:i,events:c,renderEventMarker:p,mapEventToXYCoords:h,config:u}){const r=(0,a.useRef)(),[v,g]=(0,a.useState)(0),E=(0,s.A)();(0,a.useLayoutEffect)(()=>{u.addHook("init",m=>{r.current=m}),u.addHook("draw",()=>{E()&&g(m=>m+1)})},[u,g]);const x=(0,a.useMemo)(()=>{const m=[];if(!r.current||c.length===0)return m;for(let y=0;y<c.length;y++){const b=c[y];for(let D=0;D<b.length;D++){const f=h(b,D);f&&m.push((0,a.createElement)(d.p,{...f,key:`${i}-marker-${y}-${D}`},p(b,D)))}}return(0,n.jsx)(n.Fragment,{children:m})},[c,p,v]);return r.current?(0,n.jsx)(o._,{left:r.current.bbox.left/window.devicePixelRatio,top:r.current.bbox.top/window.devicePixelRatio,children:x}):null}},7542:(ne,j,e)=>{"use strict";e.d(j,{ny:()=>f,EM:()=>D,Zy:()=>b,ek:()=>C});var n=e(4213),a=e.n(n),s=e(25229),d=e(80011),o=e(64761),l=e(68125),i=e(18700),c=e(2733);function p(P){const T=P.spans.map(I=>h(I,P.processes)),M=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string},{name:"spanID",type:FieldType.string},{name:"parentSpanID",type:FieldType.string},{name:"operationName",type:FieldType.string},{name:"serviceName",type:FieldType.string},{name:"serviceTags",type:FieldType.other},{name:"startTime",type:FieldType.number},{name:"duration",type:FieldType.number},{name:"logs",type:FieldType.other},{name:"references",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other},{name:"warnings",type:FieldType.other},{name:"stackTraces",type:FieldType.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const I of T)M.add(I);return M}function h(P,T){const M=P.references?.find(I=>I.refType==="CHILD_OF")?.spanID;return{spanID:P.spanID,traceID:P.traceID,parentSpanID:M,operationName:P.operationName,startTime:P.startTime/1e3,duration:P.duration/1e3,logs:P.logs.map(I=>({...I,timestamp:I.timestamp/1e3})),tags:P.tags,warnings:P.warnings??void 0,stackTraces:P.stackTraces,references:P.references?.filter(I=>I.spanID!==M)??[],serviceName:T[P.processID].serviceName,serviceTags:T[P.processID].tags}}function u(P){let T={traceID:"",spans:[],processes:{},warnings:null},M=[];for(let I=0;I<P.length;I++){const B=P.get(I);T.traceID||(T.traceID=B.traceID),M.find(U=>U===B.serviceName)||(M.push(B.serviceName),T.processes[`p${M.length}`]={serviceName:B.serviceName,tags:B.serviceTags}),T.spans.push({traceID:B.traceID,spanID:B.spanID,duration:B.duration*1e3,references:B.parentSpanID?[{refType:"CHILD_OF",spanID:B.parentSpanID,traceID:B.traceID}]:[],flags:0,logs:B.logs.map(U=>({...U,timestamp:U.timestamp*1e3})),operationName:B.operationName,processID:Object.keys(T.processes).find(U=>T.processes[U].serviceName===B.serviceName)||"",startTime:B.startTime*1e3,tags:B.tags,warnings:B.warnings?B.warnings:null})}return{data:[T],total:0,limit:0,offset:0,errors:null}}function r(P){const T=P.map(v),M=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,values:[]},{name:"spanID",type:FieldType.string,values:[]},{name:"parentSpanID",type:FieldType.string,values:[]},{name:"operationName",type:FieldType.string,values:[]},{name:"serviceName",type:FieldType.string,values:[]},{name:"serviceTags",type:FieldType.other,values:[]},{name:"startTime",type:FieldType.number,values:[]},{name:"duration",type:FieldType.number,values:[]},{name:"logs",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const I of T)M.add(I);return M}function v(P){const T={traceID:P.traceId,spanID:P.id,parentSpanID:P.parentId,operationName:P.name,serviceName:P.localEndpoint?.serviceName||P.remoteEndpoint?.serviceName||"unknown",serviceTags:E(P),startTime:P.timestamp/1e3,duration:P.duration/1e3,logs:P.annotations?.map(g)??[],tags:Object.keys(P.tags||{}).reduce((M,I)=>I==="error"?(M.push({key:"error",value:!0}),M.push({key:"errorValue",value:P.tags.error}),M):(M.push({key:I,value:P.tags[I]}),M),[])};return P.kind&&(T.tags=[{key:"kind",value:P.kind},...T.tags??[]]),P.shared&&(T.tags=[{key:"shared",value:P.shared},...T.tags??[]]),T}function g(P){return{timestamp:P.timestamp,fields:[{key:"annotation",value:P.value}]}}function E(P){const T=P.localEndpoint||P.remoteEndpoint;return T?[x("ipv4",T.ipv4),x("ipv6",T.ipv6),x("port",T.port),x("endpointType",P.localEndpoint?"local":"remote")].filter(M=>!!M):[]}function x(P,T){if(T)return{key:P,value:T}}const m=P=>{let T=[];for(let M=0;M<P.length;M++){const I=P.get(M);T.push({traceId:I.traceID,parentId:I.parentSpanID,name:I.operationName,id:I.spanID,timestamp:I.startTime*1e3,duration:I.duration*1e3,...y(I),annotations:I.logs?.length?I.logs.map(B=>({timestamp:B.timestamp,value:B.fields[0].value})):void 0,tags:I.tags?.length?I.tags.filter(B=>B.key!=="kind"&&B.key!=="endpointType"&&B.key!=="shared").reduce((B,U)=>U.key==="error"?{...B,[U.key]:I.tags?.find(W=>W.key==="errorValue")?.value||""}:{...B,[U.key]:U.value},{}):void 0,kind:I.tags?.find(B=>B.key==="kind")?.value,shared:I.tags?.find(B=>B.key==="shared")?.value})}return T},y=P=>{const T=P.serviceTags.find(M=>M.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return P.serviceName!=="unknown"?{[T]:{serviceName:P.serviceName,ipv4:P.serviceTags.find(M=>M.key==="ipv4")?.value,ipv6:P.serviceTags.find(M=>M.key==="ipv6")?.value,port:P.serviceTags.find(M=>M.key==="port")?.value}}:void 0};function b(P,T="",M=[]){let I="";P.meta?.forEach(W=>{const V=`${W.label}: ${JSON.stringify(W.value)}
`;I=I+V}),I=I+`

`,P.rows.forEach(W=>{const V=M.length?M.map(R=>W.labels[R]??"").join(" "):W.entry,z=W.timeEpochMs+"	"+(0,s.KQ)(W.timeEpochMs).toISOString()+"	"+V+`
`;I=I+z});const B=new Blob([I],{type:"text/plain;charset=utf-8"}),U=`${T?`${T}-logs`:"Logs"}-${(0,d.LE)(new Date)}.txt`;a()(B,U)}function D(P,T,M,I=o.F.noop,B=!1){let U;if(B){const z=(0,l._O)([P],{...M,useExcelHeader:!1,delimiter:"	"}),R=new Uint16Array(Array.from("\uFEFF"+z).map(O=>O.charCodeAt(0)));U=new Blob([R],{type:"text/csv;charset=utf-16le"})}else{const z=(0,l._O)([P],M);U=new Blob([z],{type:"text/csv;charset=utf-8"})}const W=I!==o.F.noop?"-as-"+I.toLocaleLowerCase():"",V=`${T}-data${W}-${(0,d.LE)(new Date)}.csv`;a()(U,V)}function f(P,T){const M=new Blob([JSON.stringify(P)],{type:"application/json"}),I=`${T}-${(0,d.LE)(new Date)}.json`;a()(M,I)}function C(P,T){let M="otlp";switch(P.meta?.custom?.traceFormat){case"jaeger":{let I=u(new i.k(P));f(I,T),M="jaeger";break}case"zipkin":{let I=m(new i.k(P));f(I,T),M="zipkin";break}case"otlp":default:{let I=(0,c.xw)(new i.k(P));f(I,T);break}}return M}},7698:(ne,j,e)=>{"use strict";e.d(j,{K:()=>s});var n=e(739);const a="12.3.0",s={colorMode:n.yp.Value,graphMode:n.$p.Area,justifyMode:n.F8.Auto,percentChangeColorMode:n.CD.Standard,showPercentChange:!1,textMode:n.SV.Auto,wideLayout:!0}},7795:(ne,j,e)=>{"use strict";e.d(j,{Q$:()=>s,U3:()=>a,ti:()=>d});var n=(o=>(o.Builder="builder",o.Code="code",o))(n||{}),a=(o=>(o.Instant="instant",o.Range="range",o.Stream="stream",o))(a||{}),s=(o=>(o.DataSample="dataSample",o.InfiniteScroll="infiniteScroll",o.LogsSample="logsSample",o.LogsVolume="logsVolume",o))(s||{}),d=(o=>(o.Backward="backward",o.Forward="forward",o.Scan="scan",o))(d||{})},7817:(ne,j,e)=>{"use strict";e.d(j,{G:()=>W});var n=e(2543),a=e(64423),s=e(19379),d=e(80011),o=e(25229),l=e(75234),i=e(43173),c=e(8255),p=e(95943),h=e(15130),u=e(10605),r=e(54742),v=e(39167),g=e(93612),E=e(87745),x=e(73427),m=e(8535),y=e(88813),b=e(99305),D=e(75421),f=e(82612);const C=new Set(["gridPos","title","description","transparent"]);function P(R,O){const N=[],F={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:N};let G=0;const H=new Map;for(let K of O){let{id:w}=K;w||(G||(G=M([R,O])),w=G++,K={...K,id:w}),H.set(w,K)}for(const K of R){const w=H.get(K.id);if(!w){F.changed=!0,F.actions.remove.push(K.id),K.destroy();continue}if(H.delete(K.id),w===K){N.push(K),F.actions.noop.push(K.id);continue}if(K.type===w.type){const k=K.getSaveModel();let te=!0,q=!1;for(const[se,re]of Object.entries(w))if(!(0,n.isEqualWith)(re,k[se],T))if(F.changed=!0,te=!1,C.has(se))K[se]=re,q=!0;else{q=!1;break}if(te){N.push(K),F.actions.noop.push(K.id);continue}if(q){N.push(K),F.actions.update.push(K.id);continue}}K.destroy();const Q=new f.a9(w);Q.key=`${Q.id}-update-${Date.now()}`,N.push(Q),F.changed=!0,F.actions.replace.push(K.id)}for(const K of H.values())N.push(new f.a9(K)),F.changed=!0,F.actions.add.push(K.id);return F}function T(R,O){if(R==null&&(O===1/0||O===-1/0||O==null)||O==null&&(R===1/0||R===-1/0||R==null))return!0}function M(R){let O=0;for(const N of R)for(const F of N)F.id>O&&(O=F.id);return O+1}var I=e(4604);function B(R,O){return R.repeatDirection===p.HG?!1:O.gridPos.x>=R.gridPos.x+R.gridPos.w&&O.gridPos.y===R.gridPos.y}function U(R){for(const O of R)if(delete O.scopedVars,O.panels?.length)for(const N of O.panels)delete N.scopedVars}class W{constructor(O,N,F){this.timeRangeUpdatedDuringEditOrView=!1,this.originalDashboard=null,this.getVariablesFromState=F?.getVariablesFromState??g.SS,this.events=new s.o,this.id=O.id||null,this.uid=O.uid||N?.uid||null,this.revision=O.revision??void 0,this.title=O.title??"No Title",this.description=O.description,this.tags=O.tags??[],this.timezone=O.timezone??"",this.weekStart=O.weekStart??"",this.editable=O.editable!==!1,this.preload=O.preload,this.graphTooltip=O.graphTooltip||0,this.time=O.time??{from:"now-6h",to:"now"},this.timepicker=O.timepicker??{},this.liveNow=O.liveNow,this.templating=this.removeNullValuesFromVariables(this.ensureListExist(O.templating)),this.annotations=this.ensureListExist(O.annotations),this.refresh=O.refresh,this.snapshot=O.snapshot,this.schemaVersion=O.schemaVersion??0,this.fiscalYearStartMonth=O.fiscalYearStartMonth??0,this.version=O.version??0,this.links=O.links??[],this.gnetId=O.gnetId||null,this.panels=(0,n.map)(O.panels??[],G=>new f.a9(G)),this.scopeMeta=O.scopeMeta,this.originalDashboard=(0,n.cloneDeep)(O),this.originalTemplating=(0,n.cloneDeep)(this.templating),this.originalTime=(0,n.cloneDeep)(this.time),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.initMeta(N),this.updateSchema(O,F?.targetSchemaVersion),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new a.yU,this.lastRefresh=Date.now(),this.appEventsSubscription.add(x.lE.subscribe(y.og,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(x.lE.subscribe(y.BS,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(x.lE.subscribe(y.eF,this.variablesChangedInUrlHandler.bind(this)))}static{this.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEditOrView:!0,originalDashboard:!0}}addBuiltInAnnotationQuery(){this.annotations.list.some(N=>N.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:c.Mk,enable:!0,hide:!0,builtIn:1})}initMeta(O){O=O||{},O.canShare=O.canShare!==!1,O.canSave=O.canSave!==!1,O.canStar=O.canStar!==!1,O.canEdit=O.canEdit!==!1,O.canDelete=O.canDelete!==!1,O.showSettings=O.canEdit,O.canMakeEditable=O.canSave&&!this.editable,O.hasUnsavedFolderChange=!1,this.editable||(O.canEdit=!1,O.canDelete=!1,O.canSave=!1),this.meta=O}getSaveModelCloneOld(O){const N=(0,n.defaults)(O||{},{saveVariables:!0,saveTimerange:!0});let F={};for(const G in this)W.nonPersistedProperties[G]||!this.hasOwnProperty(G)||(F[G]=(0,n.cloneDeep)(this[G]));return F.templating=this.getTemplatingSaveModel(N),N.saveTimerange||(F.time=this.originalTime),F.panels=this.getPanelSaveModels(),F=(0,u.v)(F),F.getVariables=()=>F.templating.list,F}getSaveModelClone(O){const N=this.getSaveModelCloneOld(O),F=JSON.stringify(N);return JSON.parse(F)}updatePanels(O){const N=P(this.panels,O??[]);return N.changed&&(this.panels=N.panels??[],this.sortPanelsByGridPos(),this.events.publish(new E.Q$)),N}getPanelSaveModels(){return this.panels.filter(O=>this.isSnapshotTruthy()||!(O.repeatPanelId||O.repeatedByRow)).map(O=>{if(O.libraryPanel){const{id:N,title:F,libraryPanel:G,gridPos:H}=O;return{id:N,title:F,gridPos:H,libraryPanel:{uid:G.uid,name:G.name}}}return this.panelInEdit&&this.panelInEdit.id===O.id?this.panelInEdit.getSaveModel():O.getSaveModel()}).map(O=>(this.isSnapshotTruthy()||(delete O.scopedVars,O.type==="row"&&O.panels&&O.panels.length>0&&(O.panels=O.panels.filter(N=>!N.repeatPanelId).map(N=>(delete N.scopedVars,N)))),O))}getTemplatingSaveModel(O){const N=this.originalTemplating?.list??[],G=this.getVariablesFromState(this.uid).map(K=>{const w=r.B.get(K.type).getSaveModel(K,O.saveVariables);if(!O.saveVariables){const Q=N.find(({name:k,type:te})=>k===K.name&&te===K.type);if(!Q)return w;K.type==="adhoc"?w.filters=Q.filters:(w.current=Q.current,w.options=Q.options)}return w});return{list:(0,u.v)(G)}}timeRangeUpdated(O){this.events.publish(new l.sR(O)),(0,m.JD)((0,v.RK)(this.uid,O)),(this.panelInEdit||this.panelInView)&&(this.timeRangeUpdatedDuringEditOrView=!0)}startRefresh(O={refreshAll:!0,panelIds:[]}){if(this.events.publish(new l._),this.lastRefresh=Date.now(),this.panelInEdit&&(O.refreshAll||O.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}const N=this.panels.filter(F=>!this.otherPanelInFullscreen(F)&&(O.refreshAll||O.panelIds.includes(F.id)));if(!this.isSnapshot())for(const F of N)F.refreshWhenInView=!0;for(const F of N)F.refresh()}render(){this.events.publish(new E.XM);for(const O of this.panels)O.render()}panelInitialized(O){const N=O.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(O)&&!N&&O.refresh()}otherPanelInFullscreen(O){return(this.panelInEdit||this.panelInView)&&!(O.isViewing||O.isEditing)}initEditPanel(O){return(0,D.jG)().stopAutoRefresh(),this.panelInEdit=O.getEditClone(),this.timeRangeUpdatedDuringEditOrView=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,D.jG)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged()}initViewPanel(O){this.panelInView=O,this.timeRangeUpdatedDuringEditOrView=!1,O.setIsViewing(!0)}exitViewPanel(O){this.panelInView=void 0,O.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged()}refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged(){(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEditOrView)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEditOrView}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEditOrView=!1)}ensurePanelsHaveUniqueIds(){const O=new Set;let N=this.getNextPanelId();for(const F of this.panelIterator())(!F.id||O.has(F.id))&&(F.id=N++),O.add(F.id)}removeNullValuesFromVariables(O){if(!O.list.length)return O;for(const N of O.list)N.current&&(N.current.value===null||Array.isArray(N.current.value)&&N.current.value.includes(null))&&(N.current=void 0);return O}ensureListExist(O={}){return O.list??=[],O}getNextPanelId(){let O=0;for(const N of this.panelIterator())N.id>O&&(O=N.id);return O+1}*panelIterator(){for(const O of this.panels){yield O;const N=O.panels??[];for(const F of N)yield F}}forEachPanel(O){for(let N=0;N<this.panels.length;N++)O(this.panels[N],N)}getPanelById(O,N=!1){if(this.panelInEdit&&this.panelInEdit.id===O)return this.panelInEdit;if(N){for(const F of this.panelIterator())if(F.id===O)return F;return null}else return this.panels.find(F=>F.id===O)??null}canEditPanel(O){return!!(this.meta.canEdit&&O&&!O.repeatPanelId&&O.type!=="row")}canEditPanelById(O){return this.canEditPanel(this.getPanelById(O))}addPanel(O){O.id=this.getNextPanelId(),this.panels.unshift(new f.a9(O)),this.sortPanelsByGridPos(),this.events.publish(new E.Q$)}updateMeta(O){this.meta={...this.meta,...O},this.events.publish(new E.Cf)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((O,N)=>O.gridPos.y===N.gridPos.y?O.gridPos.x-N.gridPos.x:O.gridPos.y-N.gridPos.y)}clearUnsavedChanges(O,N){for(const F of this.panels)F.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0),this.originalDashboard=O,this.originalTemplating=O.templating,N.saveTimerange&&(this.originalTime=O.time)}hasUnsavedChanges(){return!!this.panels.find(N=>N.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;U(this.panels);const O=this.panels.filter(N=>(!N.repeat||N.repeatedByRow)&&N.repeatPanelId);(0,n.pull)(this.panels,...O),O.map(N=>N.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let O=0;O<this.panels.length;O++){const N=this.panels[O];N.repeat&&this.repeatPanel(N,O)}this.sortPanelsByGridPos(),this.events.publish(new E.Q$)}}cleanUpRowRepeats(O){const N=O.map(G=>G.id),F=O.filter(G=>!G.repeat&&G.repeatPanelId&&N.includes(G.repeatPanelId));(0,n.pull)(O,...F),(0,n.pull)(this.panels,...F)}processRowRepeats(O){if(this.isSnapshotTruthy()||!this.hasVariables())return;let N=O.panels??[];if(!O.collapsed){const F=this.panels.findIndex(G=>G.id===O.id);N=this.getRowPanels(F)}this.cleanUpRowRepeats(N);for(const F of N)if(F.repeat){const G=this.panels.findIndex(H=>H.id===F.id);this.repeatPanel(F,G)}}getPanelRepeatClone(O,N,F){if(N===0)return O;const G=O.getSaveModel();G.id=this.getNextPanelId();const H=new f.a9(G);return this.panels.splice(F+N,0,H),H.repeatPanelId=O.id,H.repeat=void 0,this.panelInView?.id===H.id&&(H.setIsViewing(!0),this.panelInView=H),H}getRowRepeatClone(O,N,F){if(N===0){if(!O.collapsed){const w=this.getRowPanels(F);O.panels=w}return O}const G=new f.a9(O.getSaveModel());let H,K;return O.collapsed?(H=(0,n.cloneDeep)(O.panels)??[],G.panels=H,K=F+N):(H=this.getRowPanels(F),G.panels=H.map(w=>w.getSaveModel()),K=F+(H.length+1)*N),this.panels.splice(K,0,G),this.updateRepeatedPanelIds(G),G}repeatPanel(O,N){const F=this.getPanelRepeatVariable(O);if(!F)return;if(O.type==="row"){this.repeatRow(O,N,F);return}const G=this.getSelectedVariableOptions(F),H=O.maxPerRow||4;let K=0,w=O.gridPos.y;for(let k=0;k<G.length;k++){const te=G[k];let q;q=this.getPanelRepeatClone(O,k,N),q.scopedVars??={},q.scopedVars[F.name]=te,O.repeatDirection===p.Pz?(k>0&&(w+=q.gridPos.h),q.gridPos.y=w):(q.gridPos.w=Math.max(p.cV/G.length,p.cV/H),q.gridPos.x=K,q.gridPos.y=w,K+=q.gridPos.w,K+q.gridPos.w>p.cV&&(K=0,w+=q.gridPos.h))}const Q=w-O.gridPos.y;if(Q>0){const k=N+G.length;for(const te of this.panels.slice(k))B(O,te)||(te.gridPos.y+=Q)}}repeatRow(O,N,F){const G=this.getSelectedVariableOptions(F);for(let H=0;H<G.length;H++){const K=G[H],w=this.getRowRepeatClone(O,H,N);z(w,F,K);const Q=this.getRowHeight(w),k=w.panels||[];let te;if(O.collapsed){for(const q of k)z(q,F,K),H>0&&this.updateRepeatedPanelIds(q,!0);w.gridPos.y+=H,te=N+H+1}else{const q=N+(k.length+1)*H+1;k.forEach((se,re)=>{if(z(se,F,K),H>0){const Y=new f.a9(se);this.updateRepeatedPanelIds(Y,!0),Y.gridPos.y+=Q*H,this.panels.splice(q+re,0,Y)}}),w.panels=[],w.gridPos.y+=Q*H,te=q+k.length}if(G.length>1)for(const q of this.panels.slice(te))q.gridPos.y+=Q}}updateRepeatedPanelIds(O,N){return O.repeatPanelId=O.id,O.id=this.getNextPanelId(),N?O.repeatedByRow=!0:O.repeat=void 0,O}getSelectedVariableOptions(O){let N;return(0,b.ML)(O)?N=O.options.slice(1,O.options.length):N=(0,n.filter)(O.options,{selected:!0}),N}getRowHeight(O){if(!O.panels||O.panels.length===0)return 0;if(O.collapsed)return 1;const N=(0,n.maxBy)(O.panels,({gridPos:F})=>F.y+F.h).gridPos;return N.y+N.h-O.gridPos.y}removePanel(O){this.panels=this.panels.filter(N=>N!==O),O.destroy(),this.events.publish(new E.Q$)}removeRow(O,N){(!N&&O.collapsed||N&&!O.collapsed)&&this.toggleRow(O),this.removePanel(O)}expandRows(){const O=this.panels.filter(N=>N.type==="row"&&N.collapsed);for(const N of O)this.toggleRow(N)}collapseRows(){const O=this.panels.filter(N=>N.type==="row"&&!N.collapsed);for(const N of O)this.toggleRow(N)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(O=>O.hide!==2)||this.annotations.list.some(O=>!O.hide)}getPanelInfoById(O){const N=this.panels.findIndex(F=>F.id===O);return N>=0?{panel:this.panels[N],index:N}:null}duplicatePanel(O){const N=O.getSaveModel();return N.id=this.getNextPanelId(),delete N.repeat,delete N.repeatIteration,delete N.repeatPanelId,delete N.scopedVars,N.alert&&delete N.thresholds,delete N.alert,O.gridPos.x+O.gridPos.w*2<=p.cV?N.gridPos.x+=O.gridPos.w:N.gridPos.y+=O.gridPos.h,this.addPanel(N),N}formatDate(O,N){return(0,d.LE)(O,{format:N,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const O of this.panels)O.destroy()}toggleRow(O){const N=(0,n.indexOf)(this.panels,O);if(!O.collapsed){const K=this.getRowPanels(N);(0,n.pull)(this.panels,...K),O.panels=K.map(w=>w.getSaveModel()),O.collapsed=!0,K.some(w=>w.hasChanged)&&O.configRev++,this.events.publish(new E.Q$);return}O.collapsed=!1;const F=O.panels??[],G=F.some(K=>K.repeat),H=O.repeat;if(F.length>0){const w=(F[0].gridPos.y??O.gridPos.y)-(O.gridPos.y+O.gridPos.h);let Q=N+1,k=O.gridPos.y;for(const q of F){if(H){const se=this.getPanelRepeatVariable(O);if(q.scopedVars??={},se){const re=this.getSelectedVariableOptions(se);q.scopedVars={...q.scopedVars,[se.name]:re[0]}}}q.gridPos.y??(q.gridPos.y=O.gridPos.y),q.gridPos.y-=w,this.panels.splice(Q,0,new f.a9(q)),Q+=1,k=Math.max(k,q.gridPos.y+q.gridPos.h)}const te=k-O.gridPos.y-1;for(const q of this.panels.slice(Q))q.gridPos.y+=te;O.panels=[],G&&this.processRowRepeats(O)}this.sortPanelsByGridPos(),this.events.publish(new E.Q$)}getRowPanels(O){const N=this.panels.slice(O+1),F=N.findIndex(H=>H.type==="row");return N.slice(0,F>=0?F:this.panels.length)}on(O,N){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(O,N)}off(O,N){console.log("DashboardModel.off is deprecated"),this.events.off(O,N)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(O){return(0,d.fq)(O,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:h.TP?.user?.timezone}updateSchema(O,N){new I.SW(this).updateSchema(O,N)}hasTimeChanged(){const{time:O,originalTime:N}=this;return!((0,n.isEqual)(O,N)||(0,n.isEqual)((0,o.KQ)(O?.from),(0,o.KQ)(N?.from))&&(0,n.isEqual)((0,o.KQ)(O?.to),(0,o.KQ)(N?.to)))}autoFitPanels(O,N){const F=Math.max(...this.panels.map(k=>k.gridPos.h+k.gridPos.y)),G=55;let K=O-G-20;N&&(K+=G);const w=Math.floor(K/(p.sD+p.dU)),Q=F/w;for(const k of this.panels)k.gridPos.y=Math.round(k.gridPos.y/Q)||1,k.gridPos.h=Math.round(k.gridPos.h/Q)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(E.bG)}getPanelByUrlId(O){const N=parseInt(O??"0",10),F=this.panels.filter(G=>G.collapsed);for(const G of F)G.panels?.some(K=>K.id===N)&&this.toggleRow(G);return this.getPanelById(N)}toggleLegendsForAll(){const O=this.panels.filter(V),N=O.filter(H=>H.legend.show).length,F=O.length-N,G=N>=F;for(const H of O)H.legend.show=!G,H.render()}toggleExemplarsForAll(){for(const O of this.panels)for(const N of O.targets){if(!(N.datasource&&(N.datasource.type==="prometheus"||N.datasource.type==="grafana-amazonprometheus-datasource"||N.datasource.type==="grafana-azureprometheus-datasource")))continue;const F=N;F.exemplar=!F.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(O){let N=!0;return O?N=!!this.meta.annotationsPermissions?.dashboard.canEdit:N=!!this.meta.annotationsPermissions?.organization.canEdit,(i.$.featureToggles.annotationPermissionUpdate||this.canEditDashboard())&&N}canDeleteAnnotations(O){let N=!0;return O?N=!!this.meta.annotationsPermissions?.dashboard.canDelete:N=!!this.meta.annotationsPermissions?.organization.canDelete,i.$.featureToggles.annotationPermissionUpdate?N:N&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(N=>N.builtIn===1)?.enable===!1?!1:i.$.featureToggles.annotationPermissionUpdate?!!this.meta.annotationsPermissions?.dashboard.canAdd:!!this.meta.annotationsPermissions?.dashboard.canAdd&&this.canEditDashboard()}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}canExecuteActions(){return this.canEditDashboard()}shouldUpdateDashboardPanelFromJSON(O,N){!(0,n.isEqual)(O?.gridPos,N?.gridPos)&&this.events.publish(new E.Q$)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(O){return this.getVariablesFromState(this.uid).find(N=>N.name===O.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(){const O=this.originalTemplating?.list??[],N=this.getTemplatingSaveModel({saveVariables:!0}).list;return O.length!==N.length?!1:!(0,n.isEqual)(N,O)}variablesTimeRangeProcessDoneHandler(O){const N=O.payload.variableIds.length>0;this.variablesChangedHandler(new y.og({panelIds:[],refreshAll:!0}),N)}variablesChangedHandler(O,N=!0){if(N&&this.processRepeats(),O.payload.refreshAll||(0,D.jG)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=O.payload.panelIds.filter(F=>F!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(O.payload)}variablesChangedInUrlHandler(O){this.templateVariableValueUpdated(),this.startRefresh(O.payload)}getOriginalDashboard(){return this.originalDashboard}}function V(R){return!!R.legend}function z(R,O,N){R.scopedVars??={},R.scopedVars[O.name]=N}},7895:(ne,j,e)=>{"use strict";e.d(j,{I:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(30360),o=e(51898),l=e(63142),i=e(35484),c=e(45861),p=e(30703),h=e(45967);const u=(0,s.forwardRef)(({tooltip:E,icon:x,iconSize:m,className:y,children:b,imgSrc:D,imgAlt:f,fullWidth:C,isOpen:P,narrow:T,variant:M="default",iconOnly:I,"aria-label":B,isHighlighted:U,...W},V)=>{const z=(0,l.of)(g),R=(0,a.cx)({[z.button]:!0,[z.buttonFullWidth]:C,[z.narrow]:T},z[M],y),O=(0,a.cx)({[z.content]:!0,[z.contentWithIcon]:!!x,[z.contentWithRightIcon]:P!==void 0}),N=(0,n.jsxs)("button",{ref:V,className:R,"aria-label":r(B,E),"aria-expanded":P,type:"button",...W,children:[v(x,m),D&&(0,n.jsx)("img",{className:z.img,src:D,alt:f??""}),b&&!I&&(0,n.jsx)("div",{className:O,children:b}),P===!1&&(0,n.jsx)(p.I,{name:"angle-down"}),P===!0&&(0,n.jsx)(p.I,{name:"angle-up"}),U&&(0,n.jsx)("div",{className:z.highlight})]});return E?(0,n.jsx)(h.m,{ref:V,content:E,placement:"bottom",children:N}):N});u.displayName="ToolbarButton";function r(E,x){return E||(x?o.Tp.components.PageToolbar.item(x):void 0)}function v(E,x){return E?(0,d.n6)(E)?(0,n.jsx)(p.I,{name:E,size:`${x||"lg"}`}):E:null}const g=E=>{const x=(0,c.U_)(E,"primary","solid"),m=(0,c.U_)(E,"destructive","solid"),y=(0,a.css)({color:E.colors.text.primary,background:E.colors.secondary.main,"&:hover, &:focus":{color:E.colors.text.primary,background:E.colors.secondary.shade,border:`1px solid ${E.colors.border.medium}`},"&:active":{...(0,c.vy)(E.colors.secondary,"solid")}});return{button:(0,a.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:E.spacing(E.components.height.md),padding:E.spacing(0,1),borderRadius:E.shape.radius.default,lineHeight:`${E.components.height.md*E.spacing.gridSize-2}px`,fontWeight:E.typography.fontWeightMedium,border:`1px solid ${E.colors.secondary.border}`,whiteSpace:"nowrap",[E.transitions.handleMotion("no-preference","reduce")]:{transition:E.transitions.create(["background-color","border-color","color"],{duration:E.transitions.duration.short})},[E.breakpoints.down("md")]:{width:"auto !important"},"&:focus, &:focus-visible":{...(0,i.getFocusStyles)(E),zIndex:1},"&:focus:not(:focus-visible)":(0,i.getMouseFocusStyles)(E),"&[disabled], &:disabled":{cursor:"not-allowed",opacity:E.colors.action.disabledOpacity,background:E.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:E.colors.text.disabled,background:E.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,a.css)({color:E.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover, &:focus":{color:E.colors.text.primary,background:E.colors.action.hover},"&:active":{...(0,c.vy)(E.colors.secondary,"solid")}}),canvas:y,active:(0,a.cx)(y,(0,a.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:E.shape.radius.default,backgroundImage:E.colors.gradients.brandHorizontal}})),primary:(0,a.css)(x),destructive:(0,a.css)(m),narrow:(0,a.css)({padding:E.spacing(0,.5)}),img:(0,a.css)({width:"16px",height:"16px",marginRight:E.spacing(1)}),buttonFullWidth:(0,a.css)({flexGrow:1}),content:(0,a.css)({display:"flex",flexGrow:1}),contentWithIcon:(0,a.css)({display:"none",paddingLeft:E.spacing(1),[`@media ${(0,i.mediaUp)(E.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,a.css)({paddingRight:E.spacing(.5)}),highlight:(0,a.css)({backgroundColor:E.colors.success.main,borderRadius:E.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},7923:(ne,j,e)=>{"use strict";e.d(j,{m:()=>p});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(92745),l=e(30703),i=e(76319),c=e(63142);const p=({onClick:u=s.noop,baseVersion:r=0,newVersion:v=0,isNewLatest:g=!1})=>{const E=(0,c.of)(h);return(0,n.jsxs)("h3",{className:E.header,children:[(0,n.jsx)(i.K,{name:"arrow-left",size:"xl",onClick:u,tooltip:(0,o.t)("dashboard-scene.version-history-header.tooltip-reset-version","Reset version")}),(0,n.jsxs)("span",{children:[(0,n.jsxs)(o.x6,{i18nKey:"dashboard-scene.version-history-header.compare-versions",children:["Comparing ",{baseVersion:r}," ",(0,n.jsx)(l.I,{name:"arrows-h"})," ",{newVersion:v}]})," ",g&&(0,n.jsx)("cite",{className:"muted",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.version-history-header.latest",children:"(Latest)"})})]})]})},h=u=>({header:(0,a.css)({fontSize:u.typography.h3.fontSize,display:"flex",gap:u.spacing(2),marginBottom:u.spacing(2)})})},8001:(ne,j,e)=>{"use strict";e.d(j,{dp:()=>v,m5:()=>u,zN:()=>r});var n=e(2543),a=e.n(n),s=e(49510),d=e(16126),o=e(81160),l=e(54092),i=e(96016),c=e(98533),p=e(3260);const h=E=>(0,s.z)([c.qm.addedComponentsRegistry.asObservable(),c.qm.addedLinksRegistry.asObservable()]).pipe((0,d.p)(([x,m])=>!!x&&!!m),(0,o.T)(([x,m])=>g({...E,addedComponentsRegistry:x,addedLinksRegistry:m}))),u=E=>h(E).pipe((0,o.T)(x=>x.extensions.filter(m=>m.type===l.u6.link))),r=E=>h(E).pipe((0,o.T)(x=>x.extensions.filter(m=>m.type===l.u6.component)));function v(E){let x,m;return E.addedComponentsRegistry.asObservable().subscribe(y=>{x=y}),E.addedLinksRegistry.asObservable().subscribe(y=>{m=y}),y=>g({...y,addedComponentsRegistry:x,addedLinksRegistry:m})}const g=({context:E,extensionPointId:x,limitPerPlugin:m,addedLinksRegistry:y,addedComponentsRegistry:b})=>{const D=E?(0,p.$Y)(E):{},f=[],C={};for(const T of y?.[x]??[])try{const{pluginId:M}=T;if(m&&C[M]>=m)continue;C[M]===void 0&&(C[M]=0);const I=i.R.child({pluginId:M,extensionPointId:x,path:T.path??"",title:T.title,description:T.description??"",onClick:typeof T.onClick}),B=(0,p.hS)(M,T,I,D);if(T.configure&&B===void 0)continue;const U=B?.path||T.path,W={id:(0,p.yt)(M,x,T.title),type:l.u6.link,pluginId:M,onClick:(0,p.dx)(M,x,T,I,D),icon:B?.icon||T.icon,title:B?.title||T.title,description:B?.description||T.description||"",path:(0,n.isString)(U)?(0,p.YS)(M,U,x):void 0,category:B?.category||T.category};f.push(W),C[M]+=1}catch(M){M instanceof Error&&i.R.error(M.message,{stack:M.stack??"",message:M.message})}const P=b?.[x]??[];for(const T of P){if(m&&C[T.pluginId]>=m)continue;C[T.pluginId]===void 0&&(C[T.pluginId]=0);const M=i.R.child({title:T.title,description:T.description??"",pluginId:T.pluginId}),I={id:(0,p.yt)(T.pluginId,x,T.title),type:l.u6.component,pluginId:T.pluginId,title:T.title,description:T.description??"",component:(0,p.nv)({pluginId:T.pluginId,extensionTitle:T.title,Component:T.component,log:M})};f.push(I),C[T.pluginId]+=1}return{extensions:f}}},8073:(ne,j,e)=>{"use strict";e.d(j,{H:()=>T,Z:()=>p});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(35484),i=e(43856);const c=s.createContext(null),p=({disabled:M,href:I,onClick:B,children:U,isSelected:W,isCompact:V,className:z,noMargin:R,...O})=>{const N=(0,s.useMemo)(()=>s.Children.toArray(U).some(K=>s.isValidElement(K)&&K.type===h),[U]),F=M||!B&&!I,G=B&&!M?B:void 0,H=(0,o.of)(i.i,M,F,W,V,R);return(0,n.jsx)(i.Q,{disableEvents:M,disableHover:F,isSelected:W,className:(0,a.cx)(H.container,z),noMargin:R,...O,children:(0,n.jsxs)(c.Provider,{value:{href:I,onClick:G,disabled:M,isSelected:W},children:[!N&&(0,n.jsx)(h,{}),U]})})};p.displayName="Card";const h=({children:M,className:I,"aria-label":B})=>{const U=(0,s.useContext)(c),W=(0,o.of)(u),{href:V,onClick:z,isSelected:R}=U??{href:void 0,onClick:void 0,isSelected:void 0},O=(0,d.t)("grafana-ui.card.option","option");return(0,n.jsxs)("h2",{className:(0,a.cx)(W.heading,I),children:[V?(0,n.jsx)("a",{href:V,className:W.linkHack,"aria-label":B,onClick:z,children:M}):z?(0,n.jsx)("button",{onClick:z,className:W.linkHack,"aria-label":B,type:"button",children:M}):(0,n.jsx)(n.Fragment,{children:M}),R!==void 0&&(0,n.jsx)("input",{"aria-label":O,type:"radio",checked:R,readOnly:!0})]})};h.displayName="Heading";const u=M=>({heading:(0,a.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:M.typography.size.md,letterSpacing:"inherit",lineHeight:M.typography.body.lineHeight,color:M.colors.text.primary,fontWeight:M.typography.fontWeightMedium,"& input[readonly]":{cursor:"inherit"}}),linkHack:(0,a.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:M.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,l.getFocusStyles)(M),zIndex:1}}})}),r=({children:M,className:I})=>{const B=(0,o.of)(v);return(0,n.jsx)("div",{className:(0,a.cx)(B.tagList,I),children:M})};r.displayName="Tags";const v=M=>({tagList:(0,a.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),g=({children:M,className:I})=>{const B=(0,o.of)(E),U=typeof M=="string"?"p":"div";return(0,n.jsx)(U,{className:(0,a.cx)(B.description,I),children:M})};g.displayName="Description";const E=M=>({description:(0,a.css)({width:"100%",gridArea:"Description",margin:M.spacing(1,0,0),color:M.colors.text.secondary,lineHeight:M.typography.body.lineHeight})}),x=({children:M,align:I="start",className:B})=>{const U=(0,o.of)(m);return(0,n.jsx)("div",{className:(0,a.cx)(U.media,B,(0,a.css)({alignSelf:I})),children:M})};x.displayName="Figure";const m=M=>({media:(0,a.css)({position:"relative",gridArea:"Figure",marginRight:M.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),y=(0,s.memo)(({children:M,className:I,separator:B="|"})=>{const U=(0,o.of)(b);let W=M;const V=s.Children.toArray(M).filter(Boolean);return V.length?(W=V.map((z,R)=>(0,n.jsx)("div",{className:U.metadataItem,children:z},`element_${R}`)),V.length>1&&B&&(W=V.reduce((z,R,O)=>[z,(0,n.jsx)("span",{className:U.separator,children:B},`separator_${O}`),R])),(0,n.jsx)("div",{className:(0,a.cx)(U.metadata,I),children:W})):null});y.displayName="Meta";const b=M=>({metadata:(0,a.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:M.typography.size.sm,color:M.colors.text.secondary,margin:M.spacing(.5,0,0),lineHeight:M.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,a.css)({zIndex:0}),separator:(0,a.css)({margin:`0 ${M.spacing(1)}`})}),D=({children:M,disabled:I,variant:B,className:U})=>{const W=(0,o.of)(f),z=(0,s.useContext)(c)?.disabled||I,R=B==="primary"?W.actions:W.secondaryActions;return(0,n.jsx)("div",{className:(0,a.cx)(R,U),children:s.Children.map(M,O=>s.isValidElement(O)?(0,s.cloneElement)(O,{disabled:z,...O.props}):null)})},f=M=>({actions:(0,a.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:M.spacing(1),gridArea:"Actions",marginTop:M.spacing(2)}),secondaryActions:(0,a.css)({alignSelf:"center",color:M.colors.text.secondary,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:M.spacing(1),gridArea:"Secondary",marginTop:M.spacing(2)})}),C=({children:M,disabled:I,className:B})=>(0,n.jsx)(D,{variant:"primary",disabled:I,className:B,children:M});C.displayName="Actions";const P=({children:M,disabled:I,className:B})=>(0,n.jsx)(D,{variant:"secondary",disabled:I,className:B,children:M});P.displayName="SecondaryActions";const T=M=>({inner:(0,a.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...u(M),...b(M),...E(M),...m(M),...f(M),...v(M)});p.Heading=h,p.Tags=r,p.Figure=x,p.Meta=y,p.Actions=C,p.SecondaryActions=P,p.Description=g},8095:(ne,j,e)=>{"use strict";e.d(j,{St:()=>d,dx:()=>s,nj:()=>n,uJ:()=>a});var n=(o=>(o.LiveMeasurements="measurements",o.Annotations="annotations",o.Snapshot="snapshot",o.TimeRegions="timeRegions",o.RandomWalk="randomWalk",o.List="list",o.Read="read",o.Search="search",o.SearchNext="searchNext",o))(n||{});const a={refId:"A",queryType:"randomWalk"},s={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var d=(o=>(o.Dashboard="dashboard",o.Tags="tags",o))(d||{})},8134:(ne,j,e)=>{"use strict";e.d(j,{_:()=>n});function n(s,d){return d.id===s?!0:a(s)?a(d.id):d.aliasIDs?d.aliasIDs.includes(s):!1}function a(s){return s==="prometheus"?!0:new RegExp("^grafana-[0-9a-z]+prometheus-datasource$").test(s)}},8135:(ne,j,e)=>{"use strict";e.d(j,{N:()=>s});var n=e(74848),a=e(96540);function s({includeButtonPress:d=!0,parent:o=window,useCapture:l=!1,onClick:i,children:c}){const p=(0,a.useRef)(null),h=(0,a.useCallback)(u=>{const r=p.current;(!r||u.target instanceof Node&&!r.contains(u.target))&&i()},[i]);return(0,a.useEffect)(()=>(o.addEventListener("click",h,l),d&&o.addEventListener("keyup",h,l),()=>{o.removeEventListener("click",h,l),d&&o.removeEventListener("keyup",h,l)}),[d,h,o,l]),(0,n.jsx)("div",{ref:p,children:c})}},8207:(ne,j,e)=>{"use strict";e.d(j,{_:()=>m});var n=e(74848),a=e(22803),s=e(18828),d=e(43107),o=e(93225),l=e(8772),i=e(96540),c=e(51898),p=e(92745),h=e(63142),u=e(45897),r=e(76319),v=e(41654),g=e(92807),E=e(66404);const x={sm:{width:"25vw",minWidth:384},md:{width:"50vw",minWidth:568},lg:{width:"75vw",minWidth:744}};function m({children:P,onClose:T,closeOnMaskClick:M=!0,scrollableContent:I=!0,title:B,subtitle:U,width:W,size:V="md",tabs:z}){const[R,O,N]=y(),F=(0,h.of)(f),G=(0,h.of)(C,V),H=(0,h.of)(u.l),K=i.useRef(null),{dialogProps:w,titleProps:Q}=(0,s.s)({},K),{overlayProps:k}=(0,o.e)({isDismissable:!1,isOpen:!0,onClose:T},K);D();const te=(0,n.jsx)("div",{className:F.content,children:P}),q=R??W??x[V].width,se=x[V].minWidth;return(0,n.jsx)(l.A,{open:!0,onClose:T,placement:"right",getContainer:".main-view",className:F.drawerContent,rootClassName:F.drawer,classNames:{wrapper:G},styles:{wrapper:{width:q,minWidth:se}},width:"",motion:{motionAppear:!0,motionName:F.drawerMotion},maskClassName:F.mask,maskClosable:M,maskMotion:{motionAppear:!0,motionName:F.maskMotion},children:(0,n.jsx)(d.n1,{restoreFocus:!0,contain:!0,autoFocus:!0,children:(0,n.jsxs)("div",{"aria-label":typeof B=="string"?c.Tp.components.Drawer.General.title(B):c.Tp.components.Drawer.General.title("no title"),className:F.container,...k,...w,ref:K,children:[(0,n.jsx)("div",{className:(0,a.cx)(H.dragHandleVertical,F.resizer),onMouseDown:O,onTouchStart:N}),(0,n.jsxs)("div",{className:(0,a.cx)(F.header,!!z&&F.headerWithTabs),children:[(0,n.jsx)("div",{className:F.actions,children:(0,n.jsx)(r.K,{name:"times",variant:"secondary",onClick:T,"data-testid":c.Tp.components.Drawer.General.close,tooltip:(0,p.t)("grafana-ui.drawer.close","Close")})}),typeof B=="string"?(0,n.jsxs)(v.B,{direction:"column",children:[(0,n.jsx)(E.E,{element:"h3",truncate:!0,...Q,children:B}),U&&(0,n.jsx)("div",{className:F.subtitle,"data-testid":c.Tp.components.Drawer.General.subtitle,children:U})]}):B,z&&(0,n.jsx)("div",{className:F.tabsWrapper,children:z})]}),I?(0,n.jsx)(g.P,{showScrollIndicators:!0,children:te}):te]})})})}function y(){const[P,T]=(0,i.useState)(void 0),M=(0,i.useCallback)(z=>{T(b(z.clientX))},[]),I=(0,i.useCallback)(z=>{const R=z.touches[0];T(b(R.clientX))},[]),B=(0,i.useCallback)(z=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",B)},[M]),U=(0,i.useCallback)(z=>{document.removeEventListener("touchmove",I),document.removeEventListener("touchend",U)},[I]);function W(z){z.stopPropagation(),z.preventDefault(),document.addEventListener("mousemove",M),document.addEventListener("mouseup",B)}function V(z){z.stopPropagation(),z.preventDefault(),document.addEventListener("touchmove",I),document.addEventListener("touchend",U)}return[P,W,V]}function b(P){let T=document.body.offsetWidth-(P-document.body.offsetLeft);return`${Math.min(T/document.body.clientWidth*100,98).toFixed(2)}vw`}function D(){(0,i.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const f=P=>({container:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%",position:"relative"}),drawer:(0,a.css)({top:0,".rc-drawer-content-wrapper":{boxShadow:P.shadows.z3}}),drawerContent:(0,a.css)({backgroundColor:`${P.colors.background.primary} !important`,display:"flex",overflow:"unset !important",flexDirection:"column"}),drawerMotion:(0,a.css)({"&-appear":{[P.transitions.handleMotion("no-preference")]:{transform:"translateX(100%)",transition:"none !important"},[P.transitions.handleMotion("reduce")]:{opacity:0},"&-active":{[P.transitions.handleMotion("no-preference")]:{transform:"translateX(0)",transition:`${P.transitions.create("transform")} !important`},[P.transitions.handleMotion("reduce")]:{transition:"opacity 0.2s ease-in-out",opacity:1}}}}),mask:(0,a.css)({backgroundColor:"transparent !important",position:"fixed !important","&:before":{backgroundColor:`${P.components.overlay.background} !important`,bottom:0,content:'""',left:0,position:"fixed",right:0,top:0}}),maskMotion:(0,a.css)({"&-appear":{opacity:0,"&-active":{opacity:1,[P.transitions.handleMotion("no-preference","reduce")]:{transition:P.transitions.create("opacity")}}}}),header:(0,a.css)({label:"drawer-header",flexGrow:0,padding:P.spacing(2,2,3),borderBottom:`1px solid ${P.colors.border.weak}`}),headerWithTabs:(0,a.css)({borderBottom:"none"}),actions:(0,a.css)({position:"absolute",right:P.spacing(1),top:P.spacing(1)}),subtitle:(0,a.css)({label:"drawer-subtitle",color:P.colors.text.secondary}),content:(0,a.css)({padding:P.spacing(P.components.drawer?.padding??2),height:"100%",flexGrow:1,minHeight:0}),tabsWrapper:(0,a.css)({label:"drawer-tabs",paddingLeft:P.spacing(2),margin:P.spacing(1,-1,-3,-3)}),resizer:(0,a.css)({top:0,left:P.spacing(-1),bottom:0,position:"absolute",zIndex:P.zIndex.modal})});function C(P,T){return(0,a.css)({label:`drawer-content-wrapper-${T}`,overflow:"unset !important",[P.breakpoints.down("md")]:{width:`calc(100% - ${P.spacing(2)}) !important`,minWidth:"0 !important"}})}},8255:(ne,j,e)=>{"use strict";e.d(j,{Ih:()=>m,Mk:()=>o,Tj:()=>u,UJ:()=>h,Xw:()=>l,ct:()=>p,mZ:()=>x,nO:()=>c,sg:()=>E,xj:()=>i});var n=e(2543),a=e.n(n),s=e(84140);const d=4,o="rgba(0, 211, 255, 1)",l="rgba(11, 237, 50, 1)",i="rgba(237, 46, 24, 1)",c="rgba(150, 150, 150, 1)",p="rgba(247, 149, 32, 1)",h=.09,u=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function r(y){const b=(0,n.map)(y,v),D=(0,n.sortBy)(b,["h"]),f=(0,n.chunk)(D,d),C=(0,n.map)(f,T=>(0,n.sortBy)(T,"l")),P=(0,n.flattenDeep)((0,n.zip)(...C));return(0,n.map)(P,g)}function v(y){return(0,s.A)(y).toHsl()}function g(y){return(0,s.A)(y).toHexString()}function E(y){return(0,s.A)(y).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function x(y,b){const D=(0,s.A)(y),f=D.getBrightness();return D.getAlpha()<.3?b?"rgb(247, 248, 250)":"rgb(32, 34, 38)":f>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let m=r(u)},8307:(ne,j,e)=>{"use strict";e.d(j,{B:()=>E,G:()=>x});var n=e(74848),a=e(96540),s=e(42941),d=e(16692),o=e(92745),l=e(6975),i=e(70327),c=e(77880),p=e(25149),h=e(78102);const u=({receiverName:m,decrypt:y,exportFormat:b,onClose:D})=>{const{currentData:f="",isFetching:C}=i.hK.useExportReceiverQuery({receiverName:m,decrypt:y,format:b}),P=`cp-${m}-${new Date().getTime()}`;return C?(0,n.jsx)(l._,{text:(0,o.t)("alerting.grafana-receiver-export-preview.text-loading","Loading....")}):(0,n.jsx)(c.J,{format:b,textDefinition:f,downloadFileName:P,onClose:D})},r=({onClose:m,receiverName:y,decrypt:b})=>{const[D,f]=(0,a.useState)("yaml");return(0,n.jsx)(p.m,{activeTab:D,onTabChange:f,onClose:m,formatProviders:Object.values(h.sl),children:(0,n.jsx)(u,{receiverName:y,decrypt:b,exportFormat:D,onClose:m})})},v=({decrypt:m,exportFormat:y,onClose:b})=>{const{currentData:D="",isFetching:f}=i.hK.useExportReceiversQuery({decrypt:m,format:y}),C=`contact-points-${new Date().getTime()}`;return f?(0,n.jsx)(l._,{text:(0,o.t)("alerting.grafana-receivers-export-preview.text-loading","Loading....")}):(0,n.jsx)(c.J,{format:y,textDefinition:D,downloadFileName:C,onClose:b})},g=({onClose:m,decrypt:y})=>{const[b,D]=(0,a.useState)("yaml");return(0,n.jsx)(p.m,{activeTab:b,onTabChange:D,onClose:m,formatProviders:Object.values(h.sl),children:(0,n.jsx)(v,{decrypt:y,exportFormat:b,onClose:m})})},E=Symbol("all contact points"),x=()=>{const[m,y]=(0,a.useState)(null),[b,D]=(0,s.A)(!1),[f,C]=(0,d.L7)(d.QI.DecryptSecrets),P=f&&C,T=(0,a.useCallback)(()=>{y(null),D(!1)},[D]),M=B=>{y(B),D(!0)};return[(0,a.useMemo)(()=>!m||!b?null:m===E?(0,n.jsx)(g,{decrypt:P,onClose:T}):(0,n.jsx)(r,{receiverName:m,decrypt:P,onClose:T}),[P,b,T,m]),M]}},8419:(ne,j,e)=>{"use strict";e.d(j,{p:()=>s});var n=e(32899),a=e(45229);function s(o){let l="";try{l=JSON.stringify(o,d(),2)}catch(i){i instanceof Error&&(i.toString().includes("RangeError")||i.toString().includes("allocation size overflow"))?a.A.emit(n.r1.alertError,[i.toString(),"Cannot display JSON, the object is too big."]):a.A.emit(n.r1.alertError,[i instanceof Error?i.toString():i])}return l}function d(){const o=new WeakSet;return(l,i)=>{if(l==="__dataContext"||l==="__sceneObject")return"Filtered out in JSON serialization";if(typeof i=="object"&&i!==null){if(o.has(i))return;o.add(i)}return i}}},8431:(ne,j,e)=>{"use strict";e.d(j,{L:()=>s,O:()=>a});var n=e(92745);const a=()=>[{from:"now-5m",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-5-mins","Last 5 minutes")},{from:"now-15m",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-15-mins","Last 15 minutes")},{from:"now-30m",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-30-mins","Last 30 minutes")},{from:"now-1h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-1-hour","Last 1 hour")},{from:"now-3h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-3-hours","Last 3 hours")},{from:"now-6h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-6-hours","Last 6 hours")},{from:"now-12h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-12-hours","Last 12 hours")},{from:"now-24h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-24-hours","Last 24 hours")},{from:"now-2d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-2-days","Last 2 days")},{from:"now-7d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-7-days","Last 7 days")},{from:"now-30d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-30-days","Last 30 days")},{from:"now-90d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-90-days","Last 90 days")},{from:"now-6M",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-6-months","Last 6 months")},{from:"now-1y",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-1-year","Last 1 year")},{from:"now-2y",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-2-years","Last 2 years")},{from:"now-5y",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-5-years","Last 5 years")},{from:"now-1d/d",to:"now-1d/d",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.yesterday","Yesterday")},{from:"now-2d/d",to:"now-2d/d",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.day-before-yesterday","Day before yesterday")},{from:"now-7d/d",to:"now-7d/d",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-day-last-week","This day last week")},{from:"now-1w/w",to:"now-1w/w",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-week","Previous week")},{from:"now-1M/M",to:"now-1M/M",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-month","Previous month")},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-fiscal-quarter","Previous fiscal quarter")},{from:"now-1y/y",to:"now-1y/y",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-year","Previous year")},{from:"now-1y/fy",to:"now-1y/fy",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-fiscal-year","Previous fiscal year")},{from:"now/d",to:"now/d",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.today","Today")},{from:"now/d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.today-so-far","Today so far")},{from:"now/w",to:"now/w",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-week","This week")},{from:"now/w",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-week-so-far","This week so far")},{from:"now/M",to:"now/M",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-month","This month")},{from:"now/M",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-month-so-far","This month so far")},{from:"now/y",to:"now/y",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-year","This year")},{from:"now/y",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-year-so-far","This year so far")},{from:"now/fQ",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-fiscal-quarter-so-far","This fiscal quarter so far")},{from:"now/fQ",to:"now/fQ",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-fiscal-quarter","This fiscal quarter")},{from:"now/fy",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-fiscal-year-so-far","This fiscal year so far")},{from:"now/fy",to:"now/fy",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-fiscal-year","This fiscal year")}],s=()=>[{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-january","January"),value:0},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-february","February"),value:1},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-march","March"),value:2},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-april","April"),value:3},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-may","May"),value:4},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-june","June"),value:5},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-july","July"),value:6},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-august","August"),value:7},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-september","September"),value:8},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-october","October"),value:9},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-november","November"),value:10},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-december","December"),value:11}]},8515:(ne,j,e)=>{"use strict";e.d(j,{$s:()=>l,EO:()=>o,YO:()=>d,wE:()=>s});var n=e(74848),a=e(96540);const s=a.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class d extends a.Component{constructor(c){super(c),this.showModal=(p,h)=>{this.setState({component:p,props:h})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:c.component||null,props:c.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return(0,n.jsx)(s.Provider,{value:this.state,children:this.props.children})}}const o=()=>(0,n.jsx)(s.Consumer,{children:({component:i,props:c})=>i?(0,n.jsx)(i,{...c}):null}),l=s.Consumer},8535:(ne,j,e)=>{"use strict";e.d(j,{Gu:()=>d,JD:()=>o,M_:()=>a,k3:()=>s});var n=e(74887);let a;function s(l){a=l}function d(){return!a||!a.getState?{templating:{...n.L1,lastKey:"key"}}:a.getState()}function o(l){if(!(!a||!a.getState))return a.dispatch(l)}},8642:(ne,j,e)=>{"use strict";e.d(j,{h:()=>s,m:()=>a});var n=e(42954),a=(d=>(d.Combine="combine",d.CalculateNewFields="calculateNewFields",d.CreateNewVisualization="createNewVisualization",d.Filter="filter",d.PerformSpatialOperations="performSpatialOperations",d.Reformat="reformat",d.ReorderAndRename="reorderAndRename",d))(a||{});const s=new n.O},8692:(ne,j,e)=>{"use strict";e.d(j,{C:()=>a,s:()=>n});const n=s=>s.status==="fulfilled";function a(s,d){return s in d}},8721:(ne,j,e)=>{"use strict";e.d(j,{Fd:()=>p,JI:()=>v,RC:()=>u,WO:()=>r,Yj:()=>c,fj:()=>E,g2:()=>x});var n=e(41119),a=e(95004),s=e(36638),d=e(57866),o=e(6684);function l(m){const{timeField:y}=(0,n.KR)(m[0]);if(y)return s.sJ.get(d.Ct.firstTimeField).get({});let b=[];for(const D of m[0].fields)D.type===a.PU.number&&b.push(D.name);for(let D=1;D<m.length;D++){const f=[];for(const C of m[0].fields)C.type===a.PU.number&&f.push(C.name);b=b.filter(C=>!f.includes(C))}return s.sJ.get(d.Ct.byName).get(b[0])}function i(m){return m.joinBy??l(m.frames)}function c(m,y){if(y>=0){let b=m.fields[y];b.type!==a.PU.string&&!x(b.values)&&(m=(0,n.ES)(m,y))}return m}function p(m){if(!m.frames?.length)return;const y=m.nullMode??(T=>{let M=T.config.custom?.spanNulls;return M===!0?u:M===-1?r:v});if(m.frames.length===1){let T=m.frames[0],M=T;const I=i(m);let B=M.fields.findIndex(U=>I(U,M,m.frames));if(m.keepOriginIndices&&(M={...T,fields:T.fields.map((U,W)=>{const V={...U},z={frameIndex:0,fieldIndex:W};return V.state?V.state.origin=z:V.state={origin:z},V})},B>0)){const U=M.fields[B],W=M.fields.filter((V,z)=>z!==B);W.unshift(U),M.fields=W,B=0}if(B>=0&&(M=c(M,B)),m.keep){let U=M.fields.filter((W,V)=>V===B||m.keep(W,M,m.frames));T!==M?M.fields=U:M={...T,fields:U}}return M}const b=[],D=[],f=[],C=i(m);for(let T=0;T<m.frames.length;T++){const M=m.frames[T];if(!M||!M.fields?.length)continue;const I=[u];let B,U=[];for(let V=0;V<M.fields.length;V++){const z=M.fields[V];if(z.state=z.state||{},!B&&C(z,M,m.frames))B=z;else{if(m.keep&&!m.keep(z,M,m.frames))continue;I.push(y(z));let R=z.labels??{},O=z.name;M.name&&(z.name===a.Bc?O=M.name:R.name==null&&(R={...R,name:M.name})),U.push({...z,name:O,labels:R})}m.keepOriginIndices&&(z.state.origin={frameIndex:T,fieldIndex:V})}if(!B)continue;f.length===0&&f.push(B),b.push(I);const W=[B.values];for(const V of U)W.push(V.values),f.push(V),m.keepDisplayNames||delete V.state?.displayName;D.push(W)}let P=[];return m.mode===o.W.outerTabular?P=h(D,!0):m.mode===o.W.inner?P=h(D):P=E(D,b,m.mode),{length:P[0]?P[0].length:0,fields:f.map((T,M)=>({...T,values:P[M]}))}}function h(m,y=!1){let b=m[0],D=b[0];for(let f=1;f<m.length;f++){let C=m[f],P=C[0],T={};for(let H=0;H<P.length;H++){let K=P[H],w=T[K];w==null&&(w=T[K]=[]),w.push(H)}let M=new Set,I=[],B=[],U=[],W=0;for(let H=0;H<D.length;H++){let K=D[H];if(K!=null){let w=T[K];w!=null?(U.push([H,w]),W+=w.length,y&&M.add(K)):y&&I.push(H)}else y&&I.push(H)}if(W+=I.length,y){for(let H in T)M.has(H)||B.push(...T[H]);W+=B.length}let V=Array.from({length:b.length+C.length-1},()=>`Array(${W})`).join(","),z=b.map((H,K)=>`joined[${K}][rowIdx] = ltable[${K}][lidx]`).join(";"),R=C.slice(1).map((H,K)=>`joined[${b.length+K}][rowIdx] = rtable[${K+1}][ridx]`).join(";"),O=b.map((H,K)=>`joined[${K}][rowIdx] = ${K===0?`rtable[${K}][ridx]`:"null"}`).join(";"),N=C.slice(1).map((H,K)=>`joined[${b.length+K}][rowIdx] = null`);b=new Function("matched","unmatchedLeft","unmatchedRight","ltable","rtable",`
      const joined = [${V}];

      let rowIdx = 0;

      for (let i = 0; i < matched.length; i++) {
        let [lidx, ridxs] = matched[i];

        for (let j = 0; j < ridxs.length; j++, rowIdx++) {
          let ridx = ridxs[j];
          ${z};
          ${R};
        }
      }

      for (let i = 0; i < unmatchedLeft.length; i++, rowIdx++) {
        let lidx = unmatchedLeft[i];
        ${z};
        ${N};
      }

      for (let i = 0; i < unmatchedRight.length; i++, rowIdx++) {
        let ridx = unmatchedRight[i];
        ${O};
        ${R};
      }

      return joined;
      `)(U,I,B,b,C),D=b[0]}return b}const u=0,r=1,v=2;function g(m,y,b){for(let D=0,f,C=-1;D<y.length;D++){let P=y[D];if(P>C){for(f=P-1;f>=0&&m[f]==null;)m[f--]=null;for(f=P+1;f<b&&m[f]==null;)m[C=f++]=null}}}function E(m,y,b=o.W.outer){let D=new Set;for(let T=0;T<m.length;T++){let I=m[T][0],B=I.length;for(let U=0;U<B;U++)D.add(I[U])}let f=[Array.from(D).sort((T,M)=>T-M)],C=f[0].length,P=new Map;for(let T=0;T<C;T++)P.set(f[0][T],T);for(let T=0;T<m.length;T++){let M=m[T],I=M[0];for(let B=1;B<M.length;B++){let U=M[B],W=Array(C).fill(void 0),V=y?y[T][B]:r,z=[];for(let R=0;R<U.length;R++){let O=U[R],N=P.get(I[R]);O===null?V!==u&&(W[N]=O,V===v&&z.push(N)):W[N]=O}g(W,z,C),f.push(W)}}return f}function x(m,y=50){const b=m.length;if(b<=1)return!0;let D=0,f=b-1;for(;D<=f&&m[D]==null;)D++;for(;f>=D&&m[f]==null;)f--;if(f<=D)return!0;const C=Math.max(1,Math.floor((f-D+1)/y));for(let P=m[D],T=D+C;T<=f;T+=C){const M=m[T];if(M!=null&&P!=null){if(M<=P)return!1;P=M}}return!0}},8735:(ne,j,e)=>{"use strict";e.d(j,{s:()=>p});var n=e(75505),a=e(81160),s=e(68143),d=e(43173),o=e(73427),l=e(85618);const i={create:h=>(0,s.AI)().post("/api/snapshots",h),getSnapshots:()=>(0,s.AI)().get("/api/dashboard/snapshots"),getSharingOptions:()=>(0,s.AI)().get("/api/snapshot/shared-options"),deleteSnapshot:h=>(0,s.AI)().delete("/api/snapshots/"+h),getSnapshot:async h=>{try{const u=await(0,s.AI)().get("/api/snapshots/"+h);return u.meta.canShare=!1,u}catch(u){throw u}}};class c{constructor(){this.apiVersion="dashboardsnapshot.grafana.app/v0alpha1",this.url=`/apis/${this.apiVersion}/namespaces/${(0,l.Ge)()}/dashboardsnapshots`}async create(u){return(0,s.AI)().post(this.url+"/create",u)}async getSnapshots(){return(await(0,s.AI)().get(this.url)).items.map(r=>({key:r.metadata.name,name:r.spec.title,external:r.spec.externalUrl!=null,externalUrl:r.spec.externalUrl}))}deleteSnapshot(u){return(0,s.AI)().delete(this.url+"/"+u)}async getSharingOptions(){return(0,s.AI)().get("/api/snapshot/shared-options")}async getSnapshot(u){const r={};if(!o.TP.isSignedIn){alert("TODO... need a barer token for anonymous use case");const v=`??? TODO, get anon token for snapshots (${o.TP.user?.name}) ???`;r.Authorization=`Bearer ${v}`}return(0,n.s)((0,s.AI)().fetch({url:this.url+"/"+u+"/body",method:"GET",headers:r}).pipe((0,a.T)(v=>({dashboard:v.data.dashboard,meta:{isSnapshot:!0,canSave:!1,canEdit:!1,canAdmin:!1,canStar:!1,canShare:!1,canDelete:!1,isFolder:!1,provisioned:!1}}))))}}function p(){return d.$.featureToggles.kubernetesSnapshots?new c:i}},8835:(ne,j,e)=>{"use strict";e.d(j,{j:()=>z,YL:()=>R,X2:()=>O,jo:()=>K,Kf:()=>F});var n=e(74848),a=e(92745),s=e(43173),d=e(44248),o=e(95943),l=e(33143),i=e(4974),c=e(1682),p=e(92119),h=e(93389),u=e(48492),r=e(25953),v=e(29425),g=e(22803),E=e(2543),x=e(96540),m=e(51898),y=e(63142),b=e(41654),D=e(37386),f=e(43243),C=e(63527),P=e(45861),T=e(21285),M=e(51156);function I(w){const Q=[];return Q.push(new M.v({id:"layout-auto-grid-column-options",title:(0,a.t)("dashboard-scene.get-edit-options.title.column-options","Column options"),skipField:!0,render:()=>(0,n.jsx)(B,{layoutManager:w})})),Q.push(new M.v({id:"layout-auto-grid-row-height",title:(0,a.t)("dashboard-scene.get-edit-options.title.row-height-options","Row height options"),skipField:!0,render:()=>(0,n.jsx)(U,{layoutManager:w})})),Q}function B({layoutManager:w}){const{maxColumnCount:Q,columnWidth:k}=w.useState(),[te,q]=x.useState(null),[se,re]=x.useState(!1),[Y,X]=x.useState(!1),J=(0,y.of)(W);(0,x.useEffect)(()=>{se&&te&&(te.focus(),re(!1))},[se,te]);const _=["narrow","standard","wide","custom"].map(ue=>({label:(0,E.capitalize)(ue),value:ue})),ee=typeof k=="string",ae=ee?(0,a.t)("dashboard.auto-grid.options.min-width","Min column width"):(0,a.t)("dashboard.auto-grid.options.min-width-custom","Custom min width"),le=["1","2","3","4","5","6","7","8","9","10"].map(ue=>({label:ue,value:ue})),L=ue=>{const ye=parseInt(ue.target.value,10);if(isNaN(ye)||ye<50||ye>2e3){X(!0);return}else Y&&X(!1);w.onColumnWidthChanged(ye)},ie=ue=>{ue.value==="custom"&&re(!0),w.onColumnWidthChanged(ue.value)},oe=()=>{Y&&X(!1),w.onColumnWidthChanged("standard")};return(0,n.jsxs)(b.B,{columnGap:2,rowGap:0,wrap:!0,children:[(0,n.jsx)(D.D,{label:ae,invalid:Y,error:Y?(0,a.t)("dashboard.auto-grid.options.min-width-error","A number between 50 and 2000 is required"):void 0,className:J.wideSelector,children:ee?(0,n.jsx)(f.G,{id:"min-column-width",options:_,value:k,onChange:ie,"data-testid":m.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.minColumnWidth}):(0,n.jsx)(C.p,{id:"min-column-width",defaultValue:k,onBlur:L,ref:ue=>q(ue),type:"number",min:50,max:2e3,invalid:Y,"data-testid":m.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.customMinColumnWidth,suffix:(0,n.jsx)(P.$n,{size:"sm",fill:"text",icon:"times",tooltip:(0,a.t)("dashboard.auto-grid.options.min-width-custom-clear","Back to standard min column width"),onClick:oe,"data-testid":m.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.clearCustomMinColumnWidth,children:(0,a.t)("dashboard.auto-grid.options.custom-min-width.clear","Clear")})})}),(0,n.jsx)(D.D,{label:(0,a.t)("dashboard.auto-grid.options.max-columns","Max columns"),className:J.narrowSelector,children:(0,n.jsx)(f.G,{id:"max-columns",options:le,value:String(Q),onChange:({value:ue})=>w.onMaxColumnCountChanged(parseInt(ue,10)),width:6.5,"data-testid":m.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.maxColumns})})]})}function U({layoutManager:w}){const{rowHeight:Q,fillScreen:k}=w.useState(),[te,q]=x.useState(null),[se,re]=x.useState(!1),[Y,X]=x.useState(!1),J=(0,y.of)(W);(0,x.useEffect)(()=>{se&&te&&(te.focus(),re(!1))},[se,te]);const _=["short","standard","tall","custom"].map(oe=>({label:(0,E.capitalize)(oe),value:oe})),ee=typeof Q=="string",ae=Q?(0,a.t)("dashboard.auto-grid.options.min-height","Row height"):(0,a.t)("dashboard.auto-grid.options.min-height-custom","Custom row height"),le=oe=>{const ue=parseInt(oe.target.value,10);if(isNaN(ue)||ue<50||ue>2e3){X(!0);return}else Y&&X(!1);w.onRowHeightChanged(ue)},L=oe=>{oe.value==="custom"&&re(!0),w.onRowHeightChanged(oe.value)},ie=()=>{Y&&X(!1),w.onRowHeightChanged("standard")};return(0,n.jsxs)(b.B,{columnGap:2,rowGap:0,wrap:!0,children:[(0,n.jsx)(D.D,{label:ae,invalid:Y,error:Y?(0,a.t)("dashboard.auto-grid.options.min-height-error","A number between 50 and 2000 is required"):void 0,className:J.wideSelector,children:ee?(0,n.jsx)(f.G,{id:"min-height",options:_,value:Q,onChange:L,"data-testid":m.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.rowHeight}):(0,n.jsx)(C.p,{id:"min-height",defaultValue:Q,onBlur:le,ref:oe=>q(oe),type:"number",min:50,max:2e3,invalid:Y,"data-testid":m.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.customRowHeight,suffix:(0,n.jsx)(P.$n,{size:"sm",fill:"text",icon:"times",tooltip:(0,a.t)("dashboard.auto-grid.options.min-width-custom-clear","Back to standard min column width"),onClick:ie,"data-testid":m.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.clearCustomRowHeight,children:(0,a.t)("dashboard.auto-grid.options.custom-min-height.clear","Clear")})})}),(0,n.jsx)(D.D,{label:(0,a.t)("dashboard.auto-grid.options.height-fill","Fill screen"),className:J.narrowSelector,children:(0,n.jsx)(T.K,{id:"fill-screen-toggle",value:k,onChange:()=>w.onFillScreenChanged(!k),"data-testid":m.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.fillScreen})})]})}const W=w=>({wideSelector:(0,g.css)({minWidth:w.spacing(14),flex:`1 1 ${w.spacing(14)}`}),narrowSelector:(0,g.css)({width:w.spacing(10)})}),V=3,z="standard",R="standard";class O extends d.Bs{constructor(Q){const k=Q.maxColumnCount??V,te=Q.columnWidth??z,q=Q.rowHeight??R,se=Q.fillScreen??!1;super({...Q,maxColumnCount:k,columnWidth:te,rowHeight:q,fillScreen:se,layout:Q.layout??new v.o({isDraggable:!0,templateColumns:F(k,te),autoRows:K(q,se)})}),this.isDashboardLayoutManager=!0,this.descriptor=O.descriptor}static{this.Component=N}static{this.descriptor={get name(){return(0,a.t)("dashboard.auto-grid.name","Auto grid")},get description(){return(0,a.t)("dashboard.auto-grid.description","Panels resize to fit and form uniform grids")},id:"AutoGridLayout",createFromLayout:O.createFromLayout,isGridLayout:!0,icon:"apps"}}serialize(){return(0,i.K4)(this)}getOutlineChildren(){const Q=[];for(const k of this.state.layout.state.children)Q.push(k.state.body,...k.state.repeatedPanels||[]);return Q}addPanel(Q){const k=c.b4.getNextPanelId(this);Q.setState({key:(0,p.XA)(k)}),Q.clearParent();const te=new r.X({body:Q});l.cc.addElement({addedObject:Q,source:this,perform:()=>{this.state.layout.setState({children:[...this.state.layout.state.children,te]})},undo:()=>{this.state.layout.setState({children:this.state.layout.state.children.filter(q=>q!==te)})}})}pastePanel(){const Q=(0,u.dp)((0,p.YQ)(this));s.$.featureToggles.dashboardNewLayouts?l.cc.edit({description:(0,a.t)("dashboard.edit-actions.paste-panel","Paste panel"),addedObject:Q.state.body,source:this,perform:()=>{this.state.layout.setState({children:[...this.state.layout.state.children,Q]})},undo:()=>{this.state.layout.setState({children:this.state.layout.state.children.filter(k=>k!==Q)})}}):(this.state.layout.setState({children:[...this.state.layout.state.children,Q]}),this.publishEvent(new l.jO(Q),!0)),(0,u.G2)()}removePanel(Q){const k=Q.parent;if(!(k instanceof r.X))return;const te=this.state.layout.state.children.indexOf(k);l.cc.removeElement({removedObject:Q,source:this,perform:()=>{this.state.layout.setState({children:this.state.layout.state.children.filter(q=>q!==k)})},undo:()=>{this.state.layout.setState({children:[...this.state.layout.state.children.slice(0,te),k,...this.state.layout.state.children.slice(te)]})}})}duplicate(){const Q=this.state.layout.state.children,k=[];if(Q.length){let te=c.b4.getNextPanelId(Q[0].state.body);Q.forEach(q=>{const se=q.clone({key:void 0,body:q.state.body.clone({key:(0,p.XA)(te)})});k.push(se),te++})}return this.clone({key:void 0,layout:this.state.layout.clone({key:void 0,children:k})})}mergeGrid(Q){const k=Q instanceof O?Q.state.layout:O.createFromLayout(Q).state.layout,te=[...k.state.children];k.setState({children:[]}),te.forEach(q=>{q.clearParent()}),this.state.layout.setState({children:[...this.state.layout.state.children,...te]})}duplicatePanel(Q){const k=Q.parent;if(!(k instanceof r.X)){console.error("Trying to duplicate a panel that is not inside a DashboardGridItem");return}const te=c.b4.getNextPanelId(this),q=this.state.layout,se=Q.clone({key:(0,p.XA)(te)}),re=k.clone({key:(0,p.ty)(te),body:se}),Y=q.state.children.indexOf(k),X=[...q.state.children];X.splice(Y+1,0,re),q.setState({children:X}),this.publishEvent(new l.jO(se),!0)}getVizPanels(){const Q=[];for(const k of this.state.layout.state.children)k instanceof r.X&&Q.push(k.state.body);return Q}editModeChanged(Q){this.state.layout.setState({isDraggable:Q}),(0,p.X0)(this.state.layout,!0)}cloneLayout(Q,k){return this.clone({})}getOptions(){return I(this)}onMaxColumnCountChanged(Q){this.setState({maxColumnCount:Q}),this.state.layout.setState({templateColumns:F(Q,this.state.columnWidth)})}onColumnWidthChanged(Q){Q==="custom"&&(Q=G(this.state.columnWidth)),this.setState({columnWidth:Q}),this.state.layout.setState({templateColumns:F(this.state.maxColumnCount,this.state.columnWidth)})}onFillScreenChanged(Q){this.setState({fillScreen:Q}),this.state.layout.setState({autoRows:K(this.state.rowHeight,Q)})}onRowHeightChanged(Q){Q==="custom"&&(Q=H(this.state.rowHeight)),this.setState({rowHeight:Q}),this.state.layout.setState({autoRows:K(Q,this.state.fillScreen)})}static createEmpty(){return new O({})}static createFromLayout(Q){const k=Q.getVizPanels(),te=[];for(let se of k){const re=se.parent instanceof h.U?se.parent.state.variableName:void 0;te.push(new r.X({body:se.clone(),variableName:re}))}const q=O.createEmpty();return q.state.layout.setState({children:te,isDraggable:(0,p.YQ)(Q).state.isEditing}),q}}function N({model:w}){return(0,n.jsx)(w.state.layout.Component,{model:w.state.layout})}function F(w,Q){return`repeat(auto-fit, minmax(min(max(100% / ${w} - ${o.dU}px, ${G(Q)}px), 100%), 1fr))`}function G(w){if(typeof w=="number")return w;switch(w){case"narrow":return 192;case"wide":return 768;case"custom":case"standard":default:return 448}}function H(w){if(typeof w=="number")return w;switch(w){case"short":return 168;case"tall":return 512;case"custom":case"standard":default:return 320}}function K(w,Q){const k=H(w),te=Q?"auto":`${k}px`;return`minmax(${k}px, ${te})`}},8921:(ne,j,e)=>{"use strict";e.d(j,{Ek:()=>o,To:()=>s,Zm:()=>a,ou:()=>d,qF:()=>n,qz:()=>l});const n="00000000-0000-0000-0000-000000000000",a="All",s="$__all",d="None",o="",l="var-"},9287:(ne,j,e)=>{"use strict";e.d(j,{vz:()=>o,x1:()=>d});var n=e(81160),a=e(95004),s=e(64761),d=(i=>(i.Drop="drop",i.FieldName="field",i.Label="label",i))(d||{});const o={id:s.F.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:i=>c=>c.pipe((0,n.T)(p=>!Array.isArray(p)||p.length<2?p:[l(p,i)]))};function l(i,c){let p=!0,h=i[0].length;const u=c.frameNameLabel??"frame";let r=[];for(const v of i){h!==v.length&&(p=!1,h=Math.max(h,v.length));for(const g of v.fields){const E={...g};E.state=void 0,v.name&&(c.frameNameMode==="drop"||(c.frameNameMode==="label"?(E.labels={...g.labels},E.labels[u]=v.name):!E.name||E.name===a.Bc?E.name=v.name:E.name=`${v.name} \xB7 ${g.name}`)),r.push(E)}}return p||(r=r.map(v=>{if(v.values.length===h)return v;const g=v.values.slice();return g.length=h,{...v,values:g}})),{fields:r,length:h}}},9368:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>c});var n=e(74848),a=e(22803),s=e(99887),d=e(63142),o=e(38055),l=e(56652);const i=["$",".",'"'];function c({input:x,delimiter:m=["{{","}}"]}){const y=(0,d.of)(E),[b,D]=m,f=new RegExp(`(?<before>.*?)(${b}(?<token>.*?)${D}|$)`,"gm"),C=x.split(`
`),P=[];return C.forEach((T,M)=>{Array.from(T.matchAll(f)).forEach((B,U)=>{const W=B.groups?.before,V=B.groups?.token?.trim();if(W&&P.push((0,n.jsx)("span",{children:W},`${M}-${U}-before`)),V){const z=g(V),R=z==="variable"?V:"",O=`${b} ${V} ${D}`;P.push((0,n.jsx)(h,{content:O,type:z,description:R},`${M}-${U}-token`))}}),P.push((0,n.jsx)("br",{},`${M}-newline`))}),(0,n.jsx)("span",{className:y.wrapper,children:P})}var p=(x=>(x.Variable="variable",x.Function="function",x.Keyword="keyword",x.Unknown="unknown",x))(p||{});function h({content:x,description:m,type:y}){const b=(0,d.of)(E),D=!y;return(0,n.jsx)(o.B,{placement:"top-start",disabled:D,content:(0,n.jsxs)("div",{className:b.hoverTokenItem,children:[(0,n.jsx)(s.E,{tabIndex:0,text:(0,n.jsx)(n.Fragment,{children:y}),color:"blue"})," ",m&&(0,n.jsx)("code",{children:m})]}),children:(0,n.jsx)("span",{children:(0,n.jsx)(s.E,{tabIndex:0,className:b.token,text:x,color:"blue"})})})}function u(x){return i.some(m=>x.startsWith(m))}function r(x){return l.keywords.some(m=>x.startsWith(m))}function v(x){return l.builtinFunctions.some(m=>x.startsWith(m))}function g(x){let m;return u(x)?m="variable":r(x)?m="keyword":v(x)?m="function":m="unknown",m}const E=x=>({wrapper:(0,a.css)({whiteSpace:"pre-wrap"}),token:(0,a.css)({cursor:"default",fontFamily:x.typography.fontFamilyMonospace}),popover:(0,a.css)({borderRadius:x.shape.radius.default,boxShadow:x.shadows.z3,background:x.colors.background.primary,border:`1px solid ${x.colors.border.medium}`,padding:x.spacing(1)}),hoverTokenItem:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center",gap:x.spacing(1)})})},9453:(ne,j,e)=>{"use strict";e.d(j,{Fe:()=>p,OO:()=>y,PW:()=>x,SY:()=>b,aY:()=>i,dt:()=>D,jk:()=>r,lq:()=>c,nl:()=>f,xM:()=>m,yL:()=>g});var n=e(54092),a=e(43173),s=e(4745);function d(C,P="extension is not a link extension"){if(!isPluginExtensionLink(C))throw new Error(P)}function o(C){if(!E(C))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function l(C){if(!r(C.configure))throw new Error(`Invalid extension "${C.title}". The "configure" property must be a function. Skipping the extension.`)}function i(C,P){for(const T of P)if(!v(C[T]))throw new Error(`Invalid extension "${C.title}". Property "${T}" must be a string and cannot be empty. Skipping the extension.`)}function c(C,P="The provided value is a Promise."){if(g(C))throw new Error(P)}function p({extensionPointId:C,pluginId:P,isInsidePlugin:T,isCoreGrafanaPlugin:M,log:I}){const B=C.startsWith(`${P}/`)||C.startsWith(`plugins/${P}/`);return T&&!M&&!B?(I.error(s.$n(P,C)),!1):!T&&!C.startsWith("grafana/")?(I.error(s.J9(C)),!1):!T&&!Object.values(n.SM).includes(C)&&!Object.values(n.YP).some(U=>C.match(U))?(I.error(s.hk),!1):!0}function h(C){return C.match(/.*\/v\d+$/)}function u(C){return Object.values(PluginExtensionPoints).map(P=>P.toString()).includes(C)}function r(C){return C?typeof C=="function":!0}function v(C){return typeof C=="string"&&C.length>0}function g(C){return C instanceof Promise||typeof C=="object"&&C!==null&&"then"in C&&"catch"in C}function E(C){const P=M=>typeof M=="object"&&M!==null&&"$$typeof"in M;return typeof C=="function"||(M=>P(M)&&M.$$typeof===Symbol.for("react.memo"))(C)}const x=(C,P)=>{const T=P.meta?.extensions?.extensionPoints;return!T||!T.some(M=>M.id===C)},m=(C,P)=>{const T=P.meta?.dependencies?.extensions?.exposedComponents;return!T||!T.includes(C)},y=(C,P,T)=>{const M="Could not register link extension. Reason:",I=a.$.apps[C],B=I?I.extensions.addedLinks.filter(({title:W})=>W===P.title):null;return I?!B||B.length===0?(T.error(`${M} ${s.iS}`),!0):(Array.isArray(P.targets)?P.targets:[P.targets]).every(W=>B.some(({targets:V})=>V.includes(W)))?(B.some(({description:W})=>W!==P.description)&&T.warning(s.cu),!1):(T.error(`${M} ${s.Bc}`),!0):(T.error(`${M} ${s.$$(C)}`),!0)},b=(C,P,T)=>{const M="Could not register function extension. Reason:",I=a.$.apps[C],B=I?I.extensions.addedFunctions.filter(({title:W})=>W===P.title):null;return I?!B||B.length===0?(T.error(`${M} ${s.E5}`),!0):(Array.isArray(P.targets)?P.targets:[P.targets]).every(W=>B.some(({targets:V})=>V.includes(W)))?(B.some(({description:W})=>W!==P.description)&&T.warning(s.cu),!1):(T.error(`${M} ${s.Bc}`),!0):(T.error(`${M} ${s.$$(C)}`),!0)},D=(C,P,T)=>{const M="Could not register component extension. Reason:",I=a.$.apps[C],B=I?I.extensions.addedComponents.filter(({title:W})=>W===P.title):null;return I?!B||B.length===0?(T.error(`${M} ${s.FL}`),!0):(Array.isArray(P.targets)?P.targets:[P.targets]).every(W=>B.some(({targets:V})=>V.includes(W)))?(B.some(({description:W})=>W!==P.description)&&T.warning(s.cu),!1):(T.error(`${M} ${s.Bc}`),!0):(T.error(`${M} ${s.$$(C)}`),!0)},f=(C,P,T)=>{const M="Could not register exposed component extension. Reason:",I=a.$.apps[C],B=I?I.extensions.exposedComponents.filter(({id:U})=>U===P.id):null;return I?!B||B.length===0?(T.error(`${M} ${s.z5}`),!0):B.some(({title:U})=>U!==P.title)?(T.error(`${M} ${s.sm}`),!0):(B.some(({description:U})=>U!==P.description)&&T.warning(s.cu),!1):(T.error(`${M} ${s.$$(C)}`),!0)}},9514:(ne,j,e)=>{"use strict";e.d(j,{X:()=>E});var n=e(74848),a=e(22803),s=e(96540),d=e(40996),o=e(92745),l=e(30703),i=e(45967),c=e(41654),p=e(72636),h=e(37386),u=e(63527),r=e(63142),v=e(74268),g=e(63895);const E=({onFilterChange:m,defaultQueryString:y})=>{const b=(0,r.of)(x),[D,f]=(0,s.useState)(y??"");(0,d.A)(()=>{(0,v.fH)(v.le.filterByLabel),m(D)},600,[D]);const C=(0,n.jsx)(l.I,{name:"search"});let P=!!(y&&y.length>=3);try{y?(0,g.S6)(y):P=!0}catch{P=!1}return(0,n.jsx)(h.D,{className:b.fixMargin,invalid:!P,error:P?null:"Query must use valid matcher syntax. See the examples in the help tooltip.",label:(0,n.jsx)(p.J,{children:(0,n.jsxs)(c.B,{gap:.5,alignItems:"center",children:[(0,n.jsx)("span",{children:(0,n.jsx)(o.x6,{i18nKey:"alerting.matcher-filter.search-by-label",children:"Search by label"})}),(0,n.jsx)(i.m,{content:(0,n.jsxs)("div",{children:[(0,n.jsx)(o.x6,{i18nKey:"alerting.matcher-filter.filter-alerts-using-label-querying-without-spaces",children:"Filter alerts using label querying without spaces, ex:"}),(0,n.jsx)("pre",{children:'{severity="critical", instance=~"cluster-us-.+"}'}),(0,n.jsx)(o.x6,{i18nKey:"alerting.matcher-filter.invalid-use-of-spaces",children:"Invalid use of spaces:"}),(0,n.jsx)("pre",{children:'{severity= "critical"}'}),(0,n.jsx)("pre",{children:'{severity ="critical"}'}),(0,n.jsx)(o.x6,{i18nKey:"alerting.matcher-filter.valid-use-of-spaces",children:"Valid use of spaces:"}),(0,n.jsx)("pre",{children:'{severity=" critical"}'}),(0,n.jsx)(o.x6,{i18nKey:"alerting.matcher-filter.filter-alerts-using-label-querying-without-braces",children:"Filter alerts using label querying without braces, ex:"}),(0,n.jsx)("pre",{children:'severity="critical", instance=~"cluster-us-.+"'})]}),children:(0,n.jsx)(l.I,{name:"info-circle",size:"sm"})})]})}),children:(0,n.jsx)(u.p,{placeholder:(0,o.t)("alerting.matcher-filter.search-query-input-placeholder-search","Search"),value:D,onChange:T=>f(T.currentTarget.value),"data-testid":"search-query-input",prefix:C,className:b.inputWidth})})},x=m=>({fixMargin:(0,a.css)({marginBottom:0}),inputWidth:(0,a.css)({width:340,flexGrow:0})})},9628:(ne,j,e)=>{"use strict";e.d(j,{gn:()=>s});function n(){const d=navigator.userAgent.indexOf("MSIE")>-1,o=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,i=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),c=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return d&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||o&&(c&&parseFloat(c[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||l&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(i&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function a(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function s(){return a()?"\u2318":"ctrl"}},9634:(ne,j,e)=>{"use strict";e.d(j,{J:()=>s});var n=e(44248),a=e(11909);function s(d){const{uid:o,title:l}=d.state;if(!o){console.warn("dashboardAnalyticsInitializer: Dashboard UID is missing");return}(0,n.MV)("DAI","Setting dashboard context for analytics aggregator");const i=(0,a.oc)();return i.initialize(o,l||"Untitled Dashboard"),(0,n.MV)("DAI","Dashboard analytics aggregator context set:",{uid:o,title:l}),()=>{i.destroy(),(0,n.MV)("DAI","Dashboard analytics aggregator context cleared")}}},9860:(ne,j,e)=>{"use strict";e.d(j,{w:()=>o});var n=e(74848),a=e(96540),s=e(87063),d=e(3260);function o({extensions:c,onSelect:p}){const{categorised:h,uncategorised:u}=i(c),r=u.length>0&&Object.keys(h).length>0;return(0,n.jsx)(s.W,{children:(0,n.jsxs)(n.Fragment,{children:[Object.keys(h).map(v=>(0,n.jsx)(s.W.Group,{label:(0,d.pL)(v,25),children:l(h[v],p)},v)),r&&(0,n.jsx)(s.W.Divider,{},"divider"),l(u,p)]})})}function l(c,p){return c.map(h=>(0,n.jsx)(s.W.Item,{ariaLabel:h.title,icon:h?.icon||"plug",label:(0,d.pL)(h.title,25),onClick:u=>{if(h.path)return p(h);h.onClick?.(u)}},h.id))}function i(c){return(0,a.useMemo)(()=>{const p=[],h={};for(const u of c){if(!u.category){p.push(u);continue}Array.isArray(h[u.category])||(h[u.category]=[]),h[u.category].push(u)}return{uncategorised:p,categorised:h}},[c])}},9931:(ne,j,e)=>{"use strict";e.d(j,{K:()=>n});const n="-- Dashboard --",a="dashboard"},10279:(ne,j,e)=>{"use strict";e.d(j,{L:()=>s});var n=e(95004),a=e(41119);class s{constructor(o){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=o.fields.map((l,i)=>({...l,index:i}));for(let l=0;l<o.fields.length;l++){const i=o.fields[l];if(i.type===n.PU.other){const c=(0,a.dF)(i);c&&(i.type=c)}this.fieldByType[i.type]||(this.fieldByType[i.type]=[]),this.fieldByType[i.type].push({...i,index:l}),this.fieldByName[i.name]?console.warn("Duplicate field names in DataFrame: ",i.name):this.fieldByName[i.name]={...i,index:l}}}getFields(o){if(!o)return[...this.fields];const l=this.fieldByType[o];return l?[...l]:[]}hasFieldOfType(o){const l=this.fieldByType[o];return l&&l.length>0}getFirstFieldOfType(o,l=!1){return this.fieldByType[o]?.find(p=>l||!p.config.custom?.hidden)}hasFieldNamed(o){return!!this.fieldByName[o]}hasFieldWithNameAndType(o,l){return!!this.fieldByName[o]&&this.fieldByType[l].filter(i=>i.name===o).length>0}getFieldByName(o){return this.fieldByName[o]}getFieldsByLabel(o,l){return Object.values(this.fieldByName).filter(i=>i.labels&&i.labels[o]===l)}}},10388:(ne,j,e)=>{"use strict";e.d(j,{Dd:()=>c,wi:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(43173),l=e(30703),i=e(63142);let c=()=>[{target:"_blank",id:"documentation",text:(0,d.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,d.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,d.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function p(E){return{hasReleaseNotes:!0,isBeta:E.includes("-beta")}}function h(E){const{buildInfo:x,licenseInfo:m}=o.$,y=[],b=m.stateInfo?` (${m.stateInfo})`:"";if(E||y.push({target:"_blank",id:"license",text:`${x.edition}${b}`,url:m.licenseUrl}),x.hideVersion)return y;const{hasReleaseNotes:D}=p(x.version);return y.push({target:"_blank",id:"version",text:x.versionString,url:D?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),x.hasUpdate&&y.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),y}function u(E){c=E}const r=(0,s.memo)(({customLinks:E,hideEdition:x})=>{const m=(E||c()).concat(h(x)),y=(0,i.of)(g);return(0,n.jsx)("footer",{className:y.footer,children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("ul",{className:y.list,children:m.map((b,D)=>(0,n.jsx)("li",{className:y.listItem,children:(0,n.jsx)(v,{item:b})},D))})})})});r.displayName="Footer";function v({item:E}){const x=E.url?(0,n.jsx)("a",{href:E.url,target:E.target,rel:"noopener noreferrer",id:E.id,children:E.text}):E.text;return(0,n.jsxs)(n.Fragment,{children:[E.icon&&(0,n.jsx)(l.I,{name:E.icon})," ",x]})}const g=E=>({footer:(0,a.css)({...E.typography.bodySmall,color:E.colors.text.primary,display:"block",padding:E.spacing(2,0),position:"relative",width:"98%","a:hover":{color:E.colors.text.maxContrast,textDecoration:"underline"},[E.breakpoints.down("md")]:{display:"none"}}),list:(0,a.css)({listStyle:"none"}),listItem:(0,a.css)({display:"inline-block","&:after":{content:"' | '",padding:E.spacing(0,1)},"&:last-child:after":{content:"''",paddingLeft:0}})})},10427:(ne,j,e)=>{"use strict";e.d(j,{A:()=>s});var n=e(96540);function a({children:d,shouldWrap:o,wrap:l},i){return o?(0,n.cloneElement)(l(d)):d}const s=(0,n.forwardRef)(a)},10572:(ne,j,e)=>{"use strict";window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0;async function n(){await window.__grafana_boot_data_promise,await Promise.resolve().then(e.bind(e,72358))}n().catch(a=>{console.error("Error bootstrapping Grafana",a),window.__grafana_load_failed()})},10605:(ne,j,e)=>{"use strict";e.d(j,{v:()=>s});var n=e(2543),a=e.n(n);function s(d,o){return(0,n.isArray)(d)?d.map(l=>s(l,o)):(0,n.isPlainObject)(d)?Object.keys(d).sort().reduce((l,i)=>{const c=d[i];return c!=null&&(l[i]=s(c,o)),o&&(c===1/0||c===-1/0)&&(l[i]=0),l},{}):d}},10685:(ne,j,e)=>{"use strict";e.d(j,{r:()=>i});var n=e(74848),a=e(92745),s=e(45967),d=e(45861),o=e(41654),l=e(23289);const i=({hasMore:c,canCompare:p,getVersions:h,getDiff:u,isLastPage:r})=>(0,n.jsxs)(o.B,{children:[c&&(0,n.jsx)(d.$n,{type:"button",onClick:()=>{h(!0),l.c.showMoreVersionsClicked()},variant:"secondary",disabled:r,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.versions-history-buttons.show-more-versions",children:"Show more versions"})}),(0,n.jsx)(s.m,{content:(0,a.t)("dashboard-scene.versions-history-buttons.content-select-two-versions-to-start-comparing","Select two versions to start comparing"),placement:"bottom",children:(0,n.jsx)(d.$n,{type:"button",disabled:!p,onClick:u,icon:"code-branch",children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.versions-history-buttons.compare-versions",children:"Compare versions"})})})]})},10928:(ne,j,e)=>{"use strict";e.d(j,{u:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(45861),i=e(63527),c=e(48542),p=e(76319);const h=({name:g,disabled:E,onRemove:x,autoColors:m=!0})=>{const y=(0,o.of)(u),b=(0,s.useMemo)(()=>{if(m){const{color:D,borderColor:f}=(0,c.MC)(g);return{backgroundColor:D,borderColor:f}}},[g,m]);return(0,n.jsxs)("li",{className:(0,a.cx)(y.itemStyle,!b&&y.defaultTagColor),style:b,children:[(0,n.jsx)("span",{className:y.nameStyle,children:g}),(0,n.jsx)(p.K,{name:"times",size:"lg",disabled:E,tooltip:(0,d.t)("grafana-ui.tags-input.remove","Remove tag: {{name}}",{name:g}),onClick:()=>x(g),className:y.buttonStyles})]})},u=g=>{const E=g.spacing.gridSize*3;return{itemStyle:(0,a.css)({display:"flex",gap:"3px",alignItems:"center",height:`${E}px`,lineHeight:`${E-2}px`,borderWidth:"1px",borderStyle:"solid",borderRadius:g.shape.radius.default,padding:`0 ${g.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:g.typography.size.sm,color:"#fff"}),defaultTagColor:(0,a.css)({backgroundColor:g.colors.background.secondary,borderColor:g.components.input.borderColor,color:g.colors.text.primary}),nameStyle:(0,a.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,a.css)({margin:0,"&:hover::before":{display:"none"}})}},r=(0,s.forwardRef)(({placeholder:g,tags:E=[],onChange:x,width:m,className:y,disabled:b,addOnBlur:D,invalid:f,id:C,autoColors:P=!0},T)=>{const M=g??(0,d.t)("grafana-ui.tags-input.placeholder-new-tag","New tag (enter key to add)"),[I,B]=(0,s.useState)(""),U=(0,o.of)(v),W=(0,o.$j)(),V=(0,s.useCallback)(F=>{B(F.target.value)},[]),z=F=>{x(E.filter(G=>G!==F))},R=F=>{F?.preventDefault(),E.includes(I)||x(E.concat(I)),B("")},O=()=>{D&&I&&R()},N=F=>{F.key==="Enter"&&I!==""&&R(F)};return(0,n.jsxs)("div",{className:(0,a.cx)(U.wrapper,y,m?(0,a.css)({width:W.spacing(m)}):""),children:[(0,n.jsx)(i.p,{ref:T,id:C,disabled:b,placeholder:M,onChange:V,value:I,onKeyDown:N,onBlur:O,invalid:f,suffix:(0,n.jsx)(l.$n,{fill:"text",className:U.addButtonStyle,onClick:R,size:"md",disabled:I.length<=0,children:(0,n.jsx)(d.x6,{i18nKey:"grafana-ui.tags-input.add",children:"Add"})})}),E?.length>0&&(0,n.jsx)("ul",{className:U.tags,children:E.map(F=>(0,n.jsx)(h,{name:F,onRemove:z,disabled:b,autoColors:P},F))})]})});r.displayName="TagsInput";const v=g=>({wrapper:(0,a.css)({minHeight:g.spacing(4),display:"flex",flexDirection:"column",gap:g.spacing(1),flexWrap:"wrap"}),tags:(0,a.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:g.spacing(.5)}),addButtonStyle:(0,a.css)({margin:`0 -${g.spacing(1)}`})})},10951:(ne,j,e)=>{"use strict";e.d(j,{Ez:()=>g,Oi:()=>v,Pm:()=>m,VW:()=>u});var n=e(2543),a=e.n(n),s=e(88483),d=e(44240),o=e(6276),l=e(29405),i=e(67770),c=e(28105),p=e(29043),h=e(37234);const u=[i.cF.LogsVolume,i.cF.LogsSample],r=y=>`grafana.explore.logs.enable${y}`,v=(y,b)=>{p.A.set(r(b),y?"true":"false")},g=()=>{let y={[i.cF.LogsVolume]:{enabled:!0},[i.cF.LogsSample]:{enabled:!1}};for(const b of u){if(b===i.cF.LogsSample)continue;p.A.get(r(b))==="false"&&(y[b]={enabled:!1})}return y},E=(y,b,D)=>new s.c(f=>y.subscribe(C=>{if(C.logsResult&&C.logsResult.rows&&C.logsResult.visibleRange&&C.logsResult.bucketSize!==void 0&&C.state===c.Gu.Done){const P=C.logsResult.bucketSize,T=b.map(B=>B.refId),M=(0,n.groupBy)(C.logsResult.rows,"dataFrame.refId");let I=[];T.forEach(B=>{if(M[B]?.length){const U=(0,h.J9)(M[B],P);I=[...I,...U];const W={logsVolumeType:i.Aj.Limited,absoluteRange:C.logsResult?.visibleRange,datasourceName:D,sourceQuery:b.find(V=>V.refId===B)};f.next({data:I.map(V=>{const z=V.meta?.custom||{};return{...V,meta:{custom:{...z,...W}}}}),state:C.state})}}),f.complete()}})),x=(y,b,D,f)=>{if(y===i.cF.LogsVolume)return E(b,D,f)},m=(y,b,D,f)=>{const P=y.map(({datasource:T,targets:M},I)=>{const B=(0,n.cloneDeep)(D);if(B.requestId=`${B.requestId||""}_${I}`,B.targets=M,(0,i.Nc)(T,b)){if(T.getDataProvider)return T.getDataProvider(b,B);if(T.getSupplementaryRequest){const U=T.getSupplementaryRequest(b,B);return U?b===i.cF.LogsVolume?(0,h.sg)(T,U,{targets:B.targets}):(0,h.Wr)(T,U):void 0}else return}else return x(b,f,M,T.name)}).filter(c.zz);if(P.length!==0)return P.length===1?P[0]:(0,d.h)(...P).pipe((0,l.S)((T,M)=>T.errors&&T.errors.length||M.state===c.Gu.NotStarted?T:M.state===c.Gu.Loading&&T.state===c.Gu.NotStarted?{...T,state:c.Gu.Loading}:M.state&&M.state!==c.Gu.Done?T:{...T,data:[...T.data,...M.data],state:c.Gu.Done},{data:[],state:c.Gu.NotStarted}),(0,o.d)())}},11018:(ne,j,e)=>{"use strict";e.d(j,{nO:()=>U,D3:()=>B,yo:()=>P,nV:()=>T,JH:()=>M,Lc:()=>C,mB:()=>D,eB:()=>f,uQ:()=>W,RW:()=>I});var n=e(65307),a=e(2543),s=e(25992),d=e(36490),o=e(74268),l=e(47938),i=e(91984),c=e(78767);function p(V){return(0,c.l)().forAlert(V).then(z=>z?.sort(h))}function h(V,z){const R=(F,G)=>F>G?-1:G>F?1:0,O=R(V.timeEnd,z.timeEnd);if(O)return O;const N=R(V.time,z.time);return N||R(V.id,z.id)}var u=e(55143),r=e(78467),v=e(77295),g=e(24610),E=e(52161),x=e(77256),m=e(36200),y=e(29609),b=e(15629);const D=(0,n.zD)("unifiedalerting/fetchPromRules",async({rulesSourceName:V,filter:z,limitAlerts:R,matcher:O,state:N,identifier:F},G)=>{const H=(0,o.U7)("unifiedalerting/fetchPromRules",r.sA,{dataSourceName:V,thunk:"unifiedalerting/fetchPromRules"});return await(0,m.$I)(H(V,z,R,O,N,F))}),f=(0,n.zD)("unifiedalerting/fetchRulerRules",async({rulesSourceName:V,filter:z},{dispatch:R,getState:O})=>{const{data:N}=await R(u.L.endpoints.discoverDsFeatures.initiate({rulesSourceName:V}));if(!N?.rulerConfig)return null;const F=(0,o.Ke)("unifiedalerting/fetchRulerRules",v.iy,{dataSourceName:V,thunk:"unifiedalerting/fetchRulerRules"});return await(0,m.$I)(F(N.rulerConfig,z))});function C({rulesSourceName:V,identifier:z,filter:R,limitAlerts:O,matcher:N,state:F}){return async G=>{const{data:H}=await G(u.L.endpoints.discoverDsFeatures.initiate({rulesSourceName:V}));await Promise.all([G(D({rulesSourceName:V,identifier:z,filter:R,limitAlerts:O,matcher:N,state:F})),H?.rulerConfig?G(f({rulesSourceName:V})):Promise.resolve()])}}function P(V=!1,z={}){return async(R,O)=>{const N=performance.now();await Promise.allSettled((0,E.gR)().map(async F=>{const{data:G}=await R(u.L.endpoints.discoverDsFeatures.initiate({rulesSourceName:F})),{promRules:H,rulerRules:K}=O().unifiedAlerting;if(!G)return;const w=V||!H[F]?.loading,Q=(V||!K[F]?.loading)&&!!G?.rulerConfig;await Promise.allSettled([w&&R(D({rulesSourceName:F,...z})),Q&&R(f({rulesSourceName:F}))])})),(0,s.l$)("unifiedalerting/fetchAllPromAndRulerRulesAction",{loadTimeMs:performance.now()-N})}}function T(V=!1,z={}){return async(R,O)=>{const{promRules:N}=O().unifiedAlerting;(0,E.gR)().map(F=>{(V||!N[F]?.loading)&&R(D({rulesSourceName:F,...z}))})}}const M=(0,n.zD)("unifiedalerting/fetchGrafanaAnnotations",V=>(0,m.$I)(p(V))),I=(0,n.zD)("unifiedalerting/updateAMConfig",({alertManagerSourceName:V,oldConfig:z,newConfig:R,successMessage:O,redirectPath:N,redirectSearch:F},G)=>(0,m.v5)((0,m.$I)((async()=>{const H=await G.dispatch(i.m.endpoints.getAlertmanagerConfiguration.initiate(V,{forceRefetch:!0})).unwrap(),K=(0,a.isEmpty)(H.alertmanager_config)&&(0,a.isEmpty)(H.template_files),w=JSON.stringify(H)!==JSON.stringify(z);if(!K&&w)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,l.vk)(V,(0,g.MZ)(R)),G.dispatch(i.m.util.invalidateTags(["AlertmanagerConfiguration","ContactPoint","ContactPointsStatus","Receiver"])),N){const Q=new URLSearchParams(F??"");d.Ny.push((0,x.nL)(N,V,Q))}})()),{successMessage:O})),B=(0,n.zD)("unifiedalerting/fetchAlertGroups",V=>(0,m.$I)((0,l.f4)(V))),U=(0,n.zD)("unifiedalerting/deleteAlertManagerConfig",async(V,z)=>(0,m.v5)((0,m.$I)((async()=>{await(0,l.nd)(V),await z.dispatch(i.m.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),W=(V,z)=>V.filter(R=>{const{forDuration:O}=(0,y.jg)(R,z),N=O?(0,b.P8)(O):null,F=(0,b.P8)(z);return N?N!==0&&N<F:!1})},11098:(ne,j,e)=>{"use strict";e.d(j,{A:()=>o});var n=e(74848),a=e(6975),s=e(31286);const o=({pageName:l=""})=>{const i=`Loading ${l}...`;return(0,n.jsx)(s.a,{display:"flex",alignItems:"center",direction:"column",justifyContent:"center",paddingTop:10,children:(0,n.jsx)(a._,{text:i})})}},11194:(ne,j,e)=>{"use strict";e.d(j,{cO:()=>s,gv:()=>a,zL:()=>o});var n=e(47184),a=(l=>(l.Timeseries="time_series",l.Table="table",l))(a||{});const s=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],d=l=>({label:l,value:l}),o=n.z??d},11280:(ne,j,e)=>{"use strict";e.d(j,{Bj:()=>m,H9:()=>p,PA:()=>E,Uu:()=>v,VM:()=>h,fP:()=>x,jX:()=>r,ri:()=>i,s1:()=>u,sh:()=>c,wk:()=>g});var n=e(65307),a=e(81970),s=e(53222),d=e(35231);const o=(0,n.VP)("explore/historyUpdated"),l=({updatedQuery:y,deletedId:b})=>async(D,f)=>{const C=f().explore.richHistory,P=C.map(M=>M.id===y?.id?y:M).filter(M=>M.id!==b),T=C.length-P.length;D((0,d.U2)({richHistoryResults:{richHistory:P,total:f().explore.richHistoryTotal-T}}))},i=(y,b,D,f,C)=>async(P,T)=>{const M=C?{quotaExceededError:!1,limitExceededWarning:!1,otherErrors:!1}:{quotaExceededError:!T().explore.richHistoryStorageFull,limitExceededWarning:!T().explore.richHistoryLimitExceededWarningShown},{richHistoryStorageFull:I,limitExceeded:B}=await(0,a.l0)({localOverride:y,datasource:{uid:b,name:D},queries:f,starred:!1,showNotif:M});C||(I&&P((0,d.fj)()),B&&P((0,d.D)()))},c=(y,b)=>async(D,f)=>{const C=await(0,a.oU)(y,b);D(l({updatedQuery:C}))},p=(y,b)=>async D=>{const f=await(0,a.cX)(y,b);D(l({updatedQuery:f}))},h=y=>async b=>{const D=await(0,a.NC)(y);b(l({deletedId:D}))},u=()=>async y=>{await(0,a.X1)(),y((0,d.U2)({richHistoryResults:{richHistory:[],total:0}})),y((0,d.U2)({richHistoryResults:{richHistory:[],total:0}}))},r=()=>async(y,b)=>{const D=b().explore.richHistorySearchFilters;if(D){const f=await(0,a.DI)(D);y((0,d.U2)({richHistoryResults:f}))}},v=()=>async(y,b)=>{const D=b().explore.richHistorySearchFilters,f=b().explore.richHistory;if(D&&f){const C={...D,page:(D?.page||1)+1},P=await(0,a.DI)(C),T=[...f,...P.richHistory];y((0,d.Ju)({filters:C})),y((0,d.U2)({richHistoryResults:{richHistory:T,total:P.total}}))}},g=()=>async y=>{y((0,d.Ju)({filters:void 0})),y((0,d.U2)({richHistoryResults:{richHistory:[],total:0}}))},E=()=>async(y,b)=>{let D=b().explore.richHistorySettings;D||(D=await(0,a.Gx)(),y((0,d.bZ)(D)))},x=y=>async b=>{b((0,d.bZ)(y)),await(0,a.rs)(y)},m=y=>async(b,D)=>{await b((0,d.Ju)({filters:{...y}}));const f=D().explore.richHistorySettings;(0,s.gQ)().lastUsedDataSourcesAvailable&&await b(x({...f,lastUsedDatasourceFilters:y.datasourceFilters}))}},11297:(ne,j,e)=>{"use strict";e.d(j,{$:()=>i,E:()=>l});var n=e(74848),a=e(22803),s=e(30703),d=e(48542),o=e(63142);const l=({count:c,label:p,onClick:h,removeIcon:u})=>{const{color:r}=(0,d.MC)(p),v=(0,o.of)(i),g=c!==0&&(0,n.jsx)("span",{style:{marginLeft:"3px"},children:`(${c})`});return(0,n.jsxs)("span",{className:v.badge,style:{backgroundColor:r},children:[u&&(0,n.jsx)(s.I,{onClick:h,name:"times"}),p," ",g]})},i=c=>({badge:(0,a.css)({...c.typography.bodySmall,backgroundColor:c.v1.palette.gray1,borderRadius:c.shape.radius.sm,color:c.v1.palette.white,display:"inline-block",height:"20px",lineHeight:"20px",padding:c.spacing(0,.75),verticalAlign:"baseline",whiteSpace:"nowrap","&:hover":{opacity:.85}})})},11393:(ne,j,e)=>{"use strict";e.d(j,{Bj:()=>Ht,ET:()=>Ze,FM:()=>ot,G9:()=>mt,IP:()=>Dn,Ku:()=>St,QB:()=>P,SR:()=>rt,X1:()=>ut,bt:()=>C,ft:()=>be,iM:()=>s,kH:()=>Re,l_:()=>hn,m6:()=>We,ns:()=>Ot,pK:()=>ht,t1:()=>pt,uB:()=>wt,xE:()=>Je});const n=()=>({kind:"AnnotationQuery",spec:a()}),a=()=>({query:s(),enable:!1,hide:!1,iconColor:"",name:"",builtIn:!1,placement:o}),s=()=>({kind:"DataQuery",group:"",version:"v0",spec:{}}),d=()=>({exclude:!1,ids:[]}),o="inControlsMenu",l=()=>"Off",i=()=>c(),c=()=>({kind:"Panel",spec:p()}),p=()=>({id:0,title:"",description:"",links:[],data:u(),vizConfig:D()}),h=()=>({title:"",url:""}),u=()=>({kind:"QueryGroup",spec:r()}),r=()=>({queries:[],transformations:[],queryOptions:b()}),v=()=>({kind:"PanelQuery",spec:g()}),g=()=>({query:s(),refId:"",hidden:!1}),E=()=>({kind:"",spec:x()}),x=()=>({id:"",options:{}}),m=()=>({id:""}),y=()=>"series",b=()=>({}),D=()=>({kind:"VizConfig",group:"",version:"",spec:f()}),f=()=>({options:{},fieldConfig:C()}),C=()=>({defaults:P(),overrides:[]}),P=()=>({}),T=()=>M(),M=()=>({type:"value",options:{}}),I=()=>"value",B=()=>({}),U=()=>({type:"range",options:{from:0,to:0,result:B()}}),W=()=>({type:"regex",options:{pattern:"",result:B()}}),V=()=>({type:"special",options:{match:"true",result:B()}}),z=()=>"true",R=()=>({mode:"absolute",steps:[]}),O=()=>"absolute",N=()=>({value:0,color:""}),F=()=>({mode:"thresholds"}),G=()=>"thresholds",H=()=>"min",K=()=>({type:"fetch",title:""}),w=()=>"fetch",Q=()=>({method:"GET",url:""}),k=()=>"GET",te=()=>({method:"GET",url:"",datasourceUid:""}),q=()=>({key:"",name:"",type:se}),se="string",re=()=>({id:""}),Y=()=>({kind:"LibraryPanel",spec:X()}),X=()=>({id:0,title:"",libraryPanel:J()}),J=()=>({name:"",uid:""}),_=()=>({kind:"GridLayout",spec:ee()}),ee=()=>({items:[]}),ae=()=>({kind:"GridLayoutItem",spec:le()}),le=()=>({x:0,y:0,width:0,height:0,element:L()}),L=()=>({kind:"ElementReference",name:""}),ie=()=>({mode:oe,value:""}),oe="variable",ue=()=>({kind:"RowsLayout",spec:ye()}),ye=()=>({rows:[]}),fe=()=>({kind:"RowsLayoutRow",spec:Ee()}),Ee=()=>({layout:_()}),Ae=()=>({kind:"ConditionalRenderingGroup",spec:Ge()}),Ge=()=>({visibility:"show",condition:"and",items:[]}),Fe=()=>({kind:"ConditionalRenderingVariable",spec:Pe()}),Pe=()=>({variable:"",operator:"equals",value:""}),Ve=()=>({kind:"ConditionalRenderingData",spec:me()}),me=()=>({value:!1}),Se=()=>({kind:"ConditionalRenderingTimeRangeSize",spec:Qe()}),Qe=()=>({value:""}),Ue=()=>({mode:oe,value:""}),Ie=()=>({kind:"AutoGridLayout",spec:Re()}),Re=()=>({maxColumnCount:3,columnWidthMode:"standard",rowHeightMode:"standard",fillScreen:!1,items:[]}),Ke=()=>({kind:"AutoGridLayoutItem",spec:Le()}),Le=()=>({element:L()}),ze=()=>({mode:oe,value:""}),Be=()=>({kind:"TabsLayout",spec:$e()}),$e=()=>({tabs:[]}),Ye=()=>({kind:"TabsLayoutTab",spec:de()}),de=()=>({layout:_()}),ge=()=>({mode:oe,value:""}),pe=()=>({title:"",type:"link",icon:"",tooltip:"",tags:[],asDropdown:!1,targetBlank:!1,includeVars:!1,keepTime:!1,placement:Me}),De=()=>"link",Me="inControlsMenu",be=()=>({timezone:"browser",from:"now-6h",to:"now",autoRefresh:"",autoRefreshIntervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],hideTimepicker:!1,fiscalYearStartMonth:0}),Oe=()=>({display:"Last 6 hours",from:"now-6h",to:"now"}),Ne=()=>We(),We=()=>({kind:"QueryVariable",spec:qe()}),qe=()=>({name:"",current:{text:"",value:""},hide:"dontHide",refresh:"never",skipUrlSync:!1,query:s(),regex:"",sort:"disabled",options:[],multi:!1,includeAll:!1,allowCustomValue:!0}),st=()=>({text:"",value:""}),rt=()=>"dontHide",ot=()=>"never",mt=()=>"disabled",pt=()=>({kind:"TextVariable",spec:ke()}),ke=()=>({name:"",current:{text:"",value:""},query:"",hide:"dontHide",skipUrlSync:!1}),Ze=()=>({kind:"ConstantVariable",spec:nt()}),nt=()=>({name:"",query:"",current:{text:"",value:""},hide:"dontHide",skipUrlSync:!1}),ut=()=>({kind:"DatasourceVariable",spec:gt()}),gt=()=>({name:"",pluginId:"",refresh:"never",regex:"",current:{text:"",value:""},options:[],multi:!1,includeAll:!1,hide:"dontHide",skipUrlSync:!1,allowCustomValue:!0}),ht=()=>({kind:"IntervalVariable",spec:tt()}),tt=()=>({name:"",query:"",current:{text:"",value:""},options:[],auto:!1,auto_min:"",auto_count:0,refresh:"never",hide:"dontHide",skipUrlSync:!1}),Ot=()=>({kind:"CustomVariable",spec:jt()}),jt=()=>({name:"",query:"",current:st(),options:[],multi:!1,includeAll:!1,hide:"dontHide",skipUrlSync:!1,allowCustomValue:!0}),wt=()=>({kind:"GroupByVariable",group:"",spec:Ht()}),Ht=()=>({name:"",current:{text:"",value:""},options:[],multi:!1,hide:"dontHide",skipUrlSync:!1}),hn=()=>({kind:"AdhocVariable",group:"",spec:Dn()}),Dn=()=>({name:"",baseFilters:[],filters:[],defaultKeys:[],hide:"dontHide",skipUrlSync:!1,allowCustomValue:!0}),Bn=()=>({key:"",operator:"",value:"",origin:xn}),xn="dashboard",ft=()=>({text:""}),St=()=>({kind:"SwitchVariable",spec:Tt()}),Tt=()=>({name:"",current:"false",enabledValue:"true",disabledValue:"false",hide:"dontHide",skipUrlSync:!1}),Je=()=>({annotations:[],cursorSync:"Off",editable:!0,elements:{},layout:_(),links:[],preload:!1,tags:[],timeSettings:be(),title:"",variables:[]})},11418:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>M});var n=e(75816),a=e(59553),s=e(73659);const l=(0,a.TP)("playlist.grafana.app","v0alpha1"),i=(0,n.xP)({reducerPath:"playlistAPIv0alpha1",baseQuery:(0,s.W)({baseURL:l}),endpoints:()=>({})}),c=["API Discovery","Playlist"],p=i.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:I=>({getApiResources:I.query({query:()=>({url:"/apis/playlist.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),listPlaylist:I.query({query:B=>({url:"/playlists",params:{pretty:B.pretty,allowWatchBookmarks:B.allowWatchBookmarks,continue:B.continue,fieldSelector:B.fieldSelector,labelSelector:B.labelSelector,limit:B.limit,resourceVersion:B.resourceVersion,resourceVersionMatch:B.resourceVersionMatch,sendInitialEvents:B.sendInitialEvents,timeoutSeconds:B.timeoutSeconds,watch:B.watch}}),providesTags:["Playlist"]}),createPlaylist:I.mutation({query:B=>({url:"/playlists",method:"POST",body:B.playlist,params:{pretty:B.pretty,dryRun:B.dryRun,fieldManager:B.fieldManager,fieldValidation:B.fieldValidation}}),invalidatesTags:["Playlist"]}),deletecollectionPlaylist:I.mutation({query:B=>({url:"/playlists",method:"DELETE",params:{pretty:B.pretty,continue:B.continue,dryRun:B.dryRun,fieldSelector:B.fieldSelector,gracePeriodSeconds:B.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:B.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:B.labelSelector,limit:B.limit,orphanDependents:B.orphanDependents,propagationPolicy:B.propagationPolicy,resourceVersion:B.resourceVersion,resourceVersionMatch:B.resourceVersionMatch,sendInitialEvents:B.sendInitialEvents,timeoutSeconds:B.timeoutSeconds}}),invalidatesTags:["Playlist"]}),getPlaylist:I.query({query:B=>({url:`/playlists/${B.name}`,params:{pretty:B.pretty}}),providesTags:["Playlist"]}),replacePlaylist:I.mutation({query:B=>({url:`/playlists/${B.name}`,method:"PUT",body:B.playlist,params:{pretty:B.pretty,dryRun:B.dryRun,fieldManager:B.fieldManager,fieldValidation:B.fieldValidation}}),invalidatesTags:["Playlist"]}),deletePlaylist:I.mutation({query:B=>({url:`/playlists/${B.name}`,method:"DELETE",params:{pretty:B.pretty,dryRun:B.dryRun,gracePeriodSeconds:B.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:B.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:B.orphanDependents,propagationPolicy:B.propagationPolicy}}),invalidatesTags:["Playlist"]}),updatePlaylist:I.mutation({query:B=>({url:`/playlists/${B.name}`,method:"PATCH",body:B.patch,params:{pretty:B.pretty,dryRun:B.dryRun,fieldManager:B.fieldManager,fieldValidation:B.fieldValidation,force:B.force}}),invalidatesTags:["Playlist"]}),getPlaylistStatus:I.query({query:B=>({url:`/playlists/${B.name}/status`,params:{pretty:B.pretty}}),providesTags:["Playlist"]}),replacePlaylistStatus:I.mutation({query:B=>({url:`/playlists/${B.name}/status`,method:"PUT",body:B.playlist,params:{pretty:B.pretty,dryRun:B.dryRun,fieldManager:B.fieldManager,fieldValidation:B.fieldValidation}}),invalidatesTags:["Playlist"]}),updatePlaylistStatus:I.mutation({query:B=>({url:`/playlists/${B.name}/status`,method:"PATCH",body:B.patch,params:{pretty:B.pretty,dryRun:B.dryRun,fieldManager:B.fieldManager,fieldValidation:B.fieldValidation,force:B.force}}),invalidatesTags:["Playlist"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:h,useLazyGetApiResourcesQuery:u,useListPlaylistQuery:r,useLazyListPlaylistQuery:v,useCreatePlaylistMutation:g,useDeletecollectionPlaylistMutation:E,useGetPlaylistQuery:x,useLazyGetPlaylistQuery:m,useReplacePlaylistMutation:y,useDeletePlaylistMutation:b,useUpdatePlaylistMutation:D,useGetPlaylistStatusQuery:f,useLazyGetPlaylistStatusQuery:C,useReplacePlaylistStatusMutation:P,useUpdatePlaylistStatusMutation:T}=p,M=p.enhanceEndpoints({})},11504:(ne,j,e)=>{"use strict";e.d(j,{G:()=>s});var n=e(96540),a=e(29609);function s(d){return(0,n.useMemo)(()=>(0,a.fC)(d),[d])}},11527:(ne,j,e)=>{"use strict";e.d(j,{R:()=>r,i:()=>u});var n=e(74848),a=e(22803),s=e(84783),d=e(34235),o=e(24938),l=e(25229),i=e(63142),c=e(35484),p=e(3343),h=e(30703);const u="time-of-day-picker-panel",r=({minuteStep:x=1,showHour:m=!0,showSeconds:y=!1,value:b,size:D="auto",disabled:f,disabledHours:C,disabledMinutes:P,disabledSeconds:T,id:M,placeholder:I,...B})=>{const U=(0,i.of)(E),W=B.allowEmpty??!1;return(0,n.jsx)(s.Ay,{id:M,generateConfig:d.A,locale:o.A,allowClear:W&&{clearIcon:(0,n.jsx)(h.I,{name:"times",className:U.clearIcon})},className:(0,a.cx)((0,p.lH)()[D],U.input),classNames:{popup:(0,a.cx)(U.picker,u)},defaultValue:B.allowEmpty?void 0:(0,l.AN)(),disabled:f,disabledTime:()=>({disabledHours:C,disabledMinutes:P,disabledSeconds:T}),format:v(m,y),minuteStep:x,onChange:V=>{if((0,l.u8)(V))return B.allowEmpty?B.onChange(V?(0,l.KQ)(V):void 0):B.onChange((0,l.KQ)(V))},picker:"time",placeholder:I,showNow:!1,needConfirm:!1,suffixIcon:(0,n.jsx)(g,{wrapperStyle:U.caretWrapper}),value:b&&(0,l.AN)(b)})};function v(x=!0,m=!1){const y=x?"HH:":"",b=m?":ss":"";return y+"mm"+b}const g=({wrapperStyle:x=""})=>(0,n.jsx)("div",{className:x,children:(0,n.jsx)(h.I,{name:"angle-down"})}),E=x=>{const m=x.components.input.background,y=x.colors.action.hover,b=x.shape.radius.default,D=x.components.input.borderColor;return{caretWrapper:(0,a.css)({position:"relative",top:"50%",transform:"translateY(-50%)",display:"inline-block",color:x.colors.text.secondary}),clearIcon:(0,a.css)({color:x.colors.text.secondary,"&:hover":{color:x.colors.text.maxContrast}}),picker:(0,a.css)({"&.rc-picker-dropdown":{boxShadow:"none",zIndex:x.zIndex.portal},".rc-picker-time-panel-column":{fontSize:x.typography.htmlFontSize,backgroundColor:m,color:x.colors.text.secondary,padding:"unset",overflowY:"auto",scrollbarWidth:"thin",width:x.spacing(8),li:{paddingRight:x.spacing(2),width:"auto","&.rc-picker-time-panel-cell-selected":{backgroundColor:"inherit",border:`1px solid ${x.colors.action.selectedBorder}`,borderRadius:b,color:x.colors.text.primary},"&:hover":{background:y,color:x.colors.text.primary},"&.rc-picker-time-panel-cell-disabled":{color:x.colors.action.disabledText}},".rc-picker-time-panel-cell-inner":{color:"inherit"},"&:not(:last-of-type)":{borderRight:`1px solid ${D}`}},".rc-picker-panel":{boxShadow:x.shadows.z3,backgroundColor:m,borderColor:D,borderRadius:b,overflow:"hidden"}}),input:(0,a.css)({"&.rc-picker-focused":{border:"none",".rc-picker-input":(0,c.getFocusStyles)(x)},"&.rc-picker-disabled":{".rc-picker-input":{backgroundColor:x.colors.action.disabledBackground,color:x.colors.action.disabledText,border:`1px solid ${x.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}},".rc-picker-input":{backgroundColor:m,borderRadius:b,borderColor:D,borderStyle:"solid",borderWidth:"1px",color:x.colors.text.primary,height:x.spacing(4),padding:x.spacing(0,1),input:{color:"unset",backgroundColor:"unset","&:focus":{outline:"none"},"&::placeholder":{color:x.colors.text.disabled}}},".rc-picker-clear":{alignItems:"center",display:"flex",insetInlineEnd:"unset",position:"relative"}})}}},11534:(ne,j,e)=>{"use strict";e.d(j,{H$:()=>fo,vk:()=>ho});var n=e(92138),a=e(1906),s=e(92745),d=e(36490),o=e(43173),l=e(75234),i=e(44248),c=e(45229),p=e(95943),h=e(84057),u=e(29043),r=e(10605),v=e(54767),g=e(22429),E=e(7817),x=e(82612),m=e(79718),y=e(88813),b=e(87745),D=e(75735),f=e(30643),C=e(3371),P=e(92119);function T(we){return"onDelete"in we}var M=e(73427);class I{constructor(Te){this._elements=Te,this.isEditableDashboardElement=!0}useEditPaneOptions(){return[]}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.objects","Objects"),icon:"folder",instanceName:""}}onConfirmDelete(){M.lE.publish(new b.bY({title:(0,s.t)("dashboard.edit-pane.elements.multiple-elements","Multiple elements"),text:(0,s.t)("dashboard.edit-pane.elements.multiple-elements-delete-text","Are you sure you want to delete these elements?"),onConfirm:()=>this.onDelete()}))}onDelete(){this._elements.forEach(Te=>Te.onDelete())}}var B=e(33143);class U{constructor(Te){this._isNewElement=!1,this.selectedObjects=new Map(Te),this._isMultiSelection=Te.length>1,this.isMultiSelection&&(this.sameType=this.checkSameType())}markAsNewElement(){this._isNewElement=!0}isNewElement(){return this._isNewElement}checkSameType(){const Te=this.selectedObjects.values(),He=Te.next().value?.resolve().constructor.name;if(!He)return!1;for(let at of Te??[])if(at.resolve().constructor.name!==He)return!1;return!0}hasValue(Te){return this.selectedObjects.has(Te)}removeValue(Te){this.selectedObjects.delete(Te),this.selectedObjects.size<2&&(this.sameType=void 0,this._isMultiSelection=!1)}getStateWithValue(Te,He,at){const yt=He.getRef();let Ct=[{id:Te}],Mt=[[Te,yt]];const Nt=this.getSelectionEntries()??[],Gt=Nt.map(([un])=>({id:un}));return at&&(Mt=[[Te,yt],...Nt],Ct=[{id:Te},...Gt]),{selection:Mt,contextItems:Ct}}getStateWithoutValueAt(Te){this.removeValue(Te);const He=this.getSelectionEntries()??[],at=He.map(([yt])=>({id:yt}));return{entries:He,contextItems:at}}getSelection(){return this.isMultiSelection?this.getSceneObjects():this.getFirstObject()}getSelectionEntries(){return Array.from(this.selectedObjects.entries())}getFirstObject(){return this.selectedObjects.values().next().value?.resolve()}get isMultiSelection(){return this._isMultiSelection}getSceneObjects(){return Array.from(this.selectedObjects.values()??[]).map(Te=>Te.resolve())}createSelectionElement(){const Te=this.getSceneObjects();if(Te.length===0)return;const He=(0,B.wT)(Te[0]);if(!He)return;if(Te.length===1)return He;if(this.sameType&&He.createMultiSelectedElement){const yt=Te.map(Ct=>(0,B.wT)(Ct));return He.createMultiSelectedElement(yt)}const at=[];for(const yt of Te){const Ct=(0,B.wT)(yt);Ct&&T(Ct)&&at.push(Ct)}if(at.length)return new I(at)}}class W extends i.Bs{constructor(){super({selectionContext:{enabled:!1,selected:[],onSelect:(Te,He)=>this.selectElement(Te,He),onClear:()=>this.clearSelection()},undoStack:[],redoStack:[]}),this.addActivationHandler(this.onActivate.bind(this))}setPanelEditAction(Te){this.panelEditAction=Te}onActivate(){const Te=(0,P.YQ)(this);this._subs.add(Te.subscribeToEvent(B.BF,({payload:He})=>{this.handleEditAction(He)})),this._subs.add(Te.subscribeToEvent(B.jO,({payload:He})=>{this.newObjectAddedToCanvas(He)})),this._subs.add(Te.subscribeToEvent(B.ck,({payload:He})=>{this.clearSelection()})),this._subs.add(Te.subscribeToEvent(B.su,({payload:He})=>{this.forceRender()})),this._subs.add(Te.subscribeToEvent(B.N4,({payload:He})=>{this.forceRender()})),this.panelEditAction&&(this.performPanelEditAction(this.panelEditAction),this.panelEditAction=void 0)}performPanelEditAction(Te){if(!Te.payload.source.isActive){V(Te.payload.source),setTimeout(()=>this.performPanelEditAction(Te));return}Te.payload.source.publishEvent(Te,!0)}handleEditAction(Te){this.state.redoStack.length>0&&this.setState({redoStack:[]}),this.performAction(Te),this.setState({undoStack:[...this.state.undoStack,Te]})}undoAction(){const Te=this.state.undoStack.slice(),He=Te.pop();He&&(He.undo(),He.source.publishEvent(new B.WG({source:He.source}),!0),He.addedObject&&this.clearSelection(),He.movedObject&&this.selectObject(He.movedObject,He.movedObject.state.key,{force:!0}),He.removedObject&&this.newObjectAddedToCanvas(He.removedObject),this.setState({undoStack:Te,redoStack:[...this.state.redoStack,He]}))}performAction(Te){Te.perform(),Te.source.publishEvent(new B.WG({source:Te.source}),!0),Te.addedObject&&this.newObjectAddedToCanvas(Te.addedObject),Te.movedObject&&this.selectObject(Te.movedObject,Te.movedObject.state.key,{force:!0}),Te.removedObject&&this.clearSelection()}redoAction(){const Te=this.state.redoStack.slice(),He=Te.pop();He&&(this.performAction(He),this.setState({redoStack:Te,undoStack:[...this.state.undoStack,He]}))}enableSelection(){this.setState({selectionContext:{...this.state.selectionContext,enabled:!0}})}disableSelection(){this.setState({selectionContext:{...this.state.selectionContext,selected:[],enabled:!1},selection:void 0})}selectElement(Te,He){let at=i.jh.findByKey(this,Te.id);if(at){if((0,C.bn)(at))return;this.selectObject(at,Te.id,He)}}getSelection(){return this.state.selection?.getSelection()}selectObject(Te,He,{multi:at,force:yt}={}){if(!yt){if(at){if(this.state.selection?.hasValue(He)){this.removeMultiSelectedObject(He);return}}else if(this.state.selection?.getFirstObject()===Te){this.clearSelection();return}}const Ct=this.state.selection??new U([[He,Te.getRef()]]),{selection:Mt,contextItems:Nt}=Ct.getStateWithValue(He,Te,!!at);this.updateSelection(new U(Mt),Nt)}removeMultiSelectedObject(Te){if(!this.state.selection)return;const{entries:He,contextItems:at}=this.state.selection.getStateWithoutValueAt(Te);if(He.length===0){this.clearSelection();return}this.updateSelection(new U([...He]),at)}updateSelection(Te,He){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.setState({selection:Te,selectionContext:{...this.state.selectionContext,selected:He}})}clearSelection(){this.state.selection&&this.updateSelection(void 0,[])}newObjectAddedToCanvas(Te){this.selectObject(Te,Te.state.key),this.state.selection?.markAsNewElement()}}function V(we){if(we.parent!==void 0)if(we.parent instanceof f.V){const Te=we.parent,He=we.parent.getParentLayout();He.state.currentTabSlug!==Te.getSlug()&&He.switchToTab(Te)}else V(we.parent)}var z=e(3204),R=e(74848),O=e(54314),N=e(60208),F=e(8207),G=e(30906),H=e(29646),K=e(96540),w=e(49785),Q=e(54148),k=e(32899),te=e(27489),q=e(41654),se=e(37386),re=e(63527),Y=e(87105),X=e(45861),J=e(77197),_=e(51898),ee=e(34999),ae=e(31286),le=e(32635),L=e(68143);function ie(we){return(0,L.NF)(we)&&we.data&&we.data.status==="version-mismatch"}function oe(we){return(0,L.NF)(we)&&we.data&&we.data.status==="name-exists"}function ue(we){return(0,L.NF)(we)&&we.data&&we.data.status==="plugin-dashboard"}function ye({cancelButton:we,saveButton:Te}){return o.$.featureToggles.restoreDashboards?(0,R.jsxs)(ee.F,{title:(0,s.t)("save-dashboards.name-exists.title","Dashboard name already exists"),severity:"error",children:[(0,R.jsx)("p",{children:(0,R.jsx)(s.x6,{i18nKey:"save-dashboards.name-exists.message-info",children:"A dashboard with the same name in the selected folder already exists, including recently deleted dashboards."})}),(0,R.jsx)("p",{children:(0,R.jsx)(s.x6,{i18nKey:"save-dashboards.name-exists.message-suggestion",children:"Please choose a different name or folder."})})]}):(0,R.jsxs)(ee.F,{title:(0,s.t)("dashboard-scene.name-already-exists-error.title-name-already-exists","Name already exists"),severity:"error",children:[(0,R.jsx)("p",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.name-already-exists-error.body-name-already-exists",children:"A dashboard with the same name in selected folder already exists. Would you still like to save this dashboard?"})}),(0,R.jsx)(ae.a,{paddingTop:2,children:(0,R.jsxs)(q.B,{alignItems:"center",children:[we,Te(!0)]})})]})}function fe({overwrite:we,isLoading:Te,isValid:He,onSave:at}){return(0,R.jsx)(X.$n,{disabled:!He||Te,icon:Te?"spinner":void 0,onClick:()=>at(we),variant:we?"destructive":"primary","data-testid":_.Tp.components.Drawer.DashboardSaveDrawer.saveButton,children:Te?(0,s.t)("dashboard-scene.save-button.saving","Saving..."):we?(0,s.t)("dashboard-scene.save-button.save-and-overwrite","Save and overwrite"):(0,s.t)("dashboard-scene.save-button.save","Save")})}var Ee=e(41053),Ae=e(64762),Ge=e(38206),Fe=e(15203),Pe=e(52763),Ve=e(77731),me=e(23289),Se=e(50893);function Qe(we=!1){const Te=(0,Pe.wA)(),He=(0,Ae._2)(),[at]=(0,Fe.e8)(),[yt,Ct]=(0,Ee.A)(async(Mt,Nt)=>{{let Gt=Nt.rawDashboardJSON??Mt.getSaveModel();Nt.saveAsCopy&&(Gt=Mt.getSaveAsModel({isNew:Nt.isNew,title:Nt.title,description:Nt.description,copyTags:Nt.copyTags}));const un=await at({dashboard:Gt,folderUid:Nt.folderUid,message:Nt.message,overwrite:Nt.overwrite,showErrorAlert:!1,k8s:Nt.k8s});if("error"in un)throw un.error;const yn={...un.data};if(!un.data.slug&&Mt.state.meta.slug){const na=Mt.state.meta.slug;yn.slug=na,yn.url=`${un.data.url}/${na}`}Mt.saveCompleted(Gt,yn,Nt.folderUid),c.A.publish(new b.Eu),He.success((0,s.t)("dashboard-scene.use-save-dashboard.message-dashboard-saved","Dashboard saved")),(0,Ve.ko)(yn.uid),we?me.c.dashboardCopied({name:Gt.title||"",url:yn.url}):(0,Se.gr)(!!Nt.isNew,Mt,{name:Gt.title||"",url:yn.url||"",expression_types:Mt.getExpressionTypes(Gt)});const Wn=d.Ny.getLocation(),qn=n.I.stripBaseFromUrl(yn.url);return qn!==Wn.pathname&&setTimeout(()=>{d.Ny.push({pathname:qn,search:Wn.search})}),Mt.state.meta.isStarred&&Te((0,Ge.TU)({id:yn.uid,title:Mt.state.title,url:qn})),un.data}},[Te,He]);return{state:yt,onSaveDashboard:Ct}}function Ue({dashboard:we,drawer:Te,changeInfo:He}){const{hasChanges:at,hasMigratedToV2:yt,changedSaveModel:Ct}=He,{state:Mt,onSaveDashboard:Nt}=Qe(!1),[Gt,un]=(0,K.useState)({folderUid:we.state.meta.folderUid,k8s:{...we.serializer.getK8SMetadata()}}),yn=async Qn=>{(await Nt(we,{...Gt,rawDashboardJSON:Ct,overwrite:Qn})).status==="success"&&(we.closeModal(),Te.state.onSaveSuccess?.())},Wn=(0,R.jsx)(X.$n,{variant:"secondary",onClick:()=>we.closeModal(),fill:"outline",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.cancel-button.cancel",children:"Cancel"})}),qn=Qn=>(0,R.jsx)(fe,{isValid:at,isLoading:Mt.loading,onSave:yn,overwrite:Qn}),na=Qn=>Qn&&Qn.length>500;function Kn(Qn){if(na(Gt.message)){const ga=Gt.message?.length??0;return(0,R.jsx)(ee.F,{title:(0,s.t)("save-dashboards.message-length.title","Message too long"),severity:"error",children:(0,R.jsx)("p",{children:(0,R.jsxs)(s.x6,{i18nKey:"save-dashboards.message-length.info",children:["The message is ",{messageLength:ga}," characters, which exceeds the maximum length of 500 characters. Please shorten it before saving."]})})})}return ie(Qn)?(0,R.jsxs)(ee.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.render-footer.title-someone-else-has-updated-this-dashboard","Someone else has updated this dashboard"),severity:"error",children:[(0,R.jsx)("p",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.render-footer.would-still-dashboard",children:"Would you still like to save this dashboard?"})}),(0,R.jsx)(ae.a,{paddingTop:2,children:(0,R.jsxs)(q.B,{alignItems:"center",children:[Wn,qn(!0)]})})]}):oe(Qn)?(0,R.jsx)(ye,{cancelButton:Wn,saveButton:qn}):ue(Qn)?(0,R.jsxs)(ee.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.render-footer.title-plugin-dashboard","Plugin dashboard"),severity:"error",children:[(0,R.jsx)("p",{children:(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.render-footer.body-plugin-dashboard",children:["Your changes will be lost when you update the plugin. Use ",(0,R.jsx)("strong",{children:"Save as"})," to create custom version."]})}),(0,R.jsx)(ae.a,{paddingTop:2,children:(0,R.jsxs)(q.B,{alignItems:"center",children:[Wn,qn(!0)]})})]}):(0,R.jsxs)(R.Fragment,{children:[Qn&&(0,R.jsx)(ee.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.render-footer.title-failed-to-save-dashboard","Failed to save dashboard"),severity:"error",children:(0,R.jsx)("p",{children:Qn.message})}),(0,R.jsxs)(q.B,{alignItems:"center",children:[Wn,qn(!1),!at&&(0,R.jsx)("div",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.render-footer.no-changes-to-save",children:"No changes to save"})})]})]})}return(0,R.jsxs)(q.B,{gap:2,direction:"column",children:[(0,R.jsx)(Ie,{drawer:Te,changeInfo:He}),yt&&(0,R.jsx)(ee.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.title-dashboard-drastically-changed","Dashboard irreversibly changed"),severity:"warning",children:(0,R.jsx)("p",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.body-dashboard-drastically-changed",children:"The dashboard will be saved using the new experimental Grafana dashboard schema. This action can\u2019t be reverted and could result in the irreversible loss of data. We recommend that you save this dashboard as a copy instead. If you\u2019re seeing this message in a production environment, contact Support to have the feature disabled."})})}),(0,R.jsx)(se.D,{label:(0,s.t)("dashboard-scene.save-dashboard-form.label-message","Message"),children:(0,R.jsx)(Y.f,{"aria-label":(0,s.t)("dashboard-scene.save-dashboard-form.aria-label-message","message"),value:Gt.message??"",onChange:Qn=>{un({...Gt,message:Qn.currentTarget.value})},placeholder:(0,s.t)("dashboard-scene.save-dashboard-form.placeholder-describe-changes-optional","Add a note to describe your changes (optional)."),autoFocus:!0,rows:5})}),Kn(Mt.error)]})}function Ie({drawer:we,changeInfo:Te}){const{saveVariables:He=!1,saveTimeRange:at=!1,saveRefresh:yt=!1,showVariablesWarning:Ct=!1}=we.useState(),{hasTimeChanges:Mt,hasVariableValueChanges:Nt,hasRefreshChange:Gt}=Te;return(0,R.jsxs)(q.B,{direction:"column",alignItems:"flex-start",children:[Mt&&(0,R.jsx)(le.S,{id:"save-timerange",checked:at,onChange:we.onToggleSaveTimeRange,label:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-timerange-label-update-default-time-range","Update default time range"),description:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-timerange-description-current-range-default","Will make current time range the new default"),"data-testid":_.Tp.pages.SaveDashboardModal.saveTimerange}),Gt&&(0,R.jsx)(le.S,{id:"save-refresh",label:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-refresh-label-update-default-refresh-value","Update default refresh value"),description:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-refresh-description-current-refresh-default","Will make the current refresh the new default"),checked:yt,onChange:we.onToggleSaveRefresh,"data-testid":_.Tp.pages.SaveDashboardModal.saveRefresh}),Nt&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(le.S,{id:"save-variables",label:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-variables-label-update-default-variable-values","Update default variable values"),description:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-variables-description-current-values-default","Will make the current values the new default"),checked:He,onChange:we.onToggleSaveVariables,"data-testid":_.Tp.pages.SaveDashboardModal.saveVariables}),He&&Ct&&(0,R.jsx)(ee.F,{"data-testid":_.Tp.pages.SaveDashboardModal.variablesWarningAlert,title:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.show-variables-warning-alert-title","Variable queries failed"),severity:"warning",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form-common-options.show-variables-warning-alert-body",children:"Some variables failed to load. If you keep \u201CUpdate default variable values\u201D checked, the current (failed) values will become the dashboard defaults. You can save anyway or uncheck the option to avoid storing those (failed) values."})})]})]})}var Re=e(52043),Ke=e(89223),Le=e(91555),ze=e(83793);function Be(we){const[Te,He]=(0,ze.tj)(),[at,yt]=(0,ze.XM)();return[(0,K.useCallback)(Mt=>(we?at:Te)(Mt),[Te,we,at]),we?yt:He]}var $e=e(34621),Ye=e(49314),de=e(94626),ge=e(96733),pe=e(49349),De=e(2924),Me=e(8535);async function be(we){if(!we||!o.$.featureToggles.provisioning)return{};const He=(await(0,Me.JD)(De.Zt.endpoints.getFolder.initiate({name:we})).unwrap()).metadata.annotations?.[D.Jw];return He?{k8s:{annotations:{[D.Jw]:He,[D.LH]:D.Sf.Repo}}}:{}}function Oe({defaultValues:we,dashboard:Te,drawer:He,changeInfo:at,isNew:yt,workflowOptions:Ct,readOnly:Mt,repository:Nt}){const Gt=(0,Q.Zp)(),un=(0,l.J7)(),{isDirty:yn,editPanel:Wn}=Te.useState(),[qn,na]=Be(yt?void 0:we.path),Kn=(0,w.mN)({defaultValues:we}),{handleSubmit:Qn,watch:ga,control:Aa,reset:va,register:Na}=Kn,[wn,Ea,Os]=ga(["workflow","ref","path"]);(0,K.useEffect)(()=>{va(we)},[we,va]);const da=as=>{un.publish({type:k.r1.alertError.name,payload:[(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.api-error","Error saving dashboard"),as]})},Ja=(0,K.useCallback)(as=>{const fs=n.I.assureBaseUrl((0,Re.u)({uid:as.metadata.name,slug:J.A.slugifyForUrl(as.spec.title??""),currentQueryParams:window.location.search}));Gt(fs)},[Gt]),ns=(0,K.useCallback)((as,fs,ps)=>{const ms=(0,Ye.q)({baseUrl:`${Le.mL}/${we.repo}/dashboard/preview/${fs}`,paramName:"ref",paramValue:as,repoType:ps});Gt(ms)},[Gt,we.repo]),Xs=(0,K.useCallback)(()=>{Wn?.onDiscard();const as=Te.getSaveModel(),fs=na?.data?.resource.upsert||na?.data?.resource.dryRun,ps=qe(fs);Te.saveCompleted(as,ps,we.folder?.uid),He.onClose()},[Te,we.folder?.uid,He,Wn,na?.data?.resource]),Dr=(0,K.useCallback)(as=>{if(Xs(),yt&&as?.metadata.name&&Ja(as),Ea!==Nt?.branch&&Ea){ns(Ea,Os,Nt?.type);return}d.Ny.partial({viewPanel:null,editPanel:null})},[yt,Os,Ea,Nt?.branch,Nt?.type,Xs,Ja,ns]),Vs=(0,K.useCallback)((as,fs,ps,ms)=>{Xs(),yt&&ms?.metadata?.name?Ja(ms):ns(as,fs,ps.repoType)},[yt,ns,Ja,Xs]);(0,$e.J)({folderUID:we.folder?.uid,request:na,workflow:wn,resourceType:"dashboard",repository:Nt,selectedBranch:Kn.getValues().ref,handlers:{onBranchSuccess:({ref:as,path:fs},ps,ms)=>Vs(as,fs,ps,ms),onWriteSuccess:Dr,onError:da}});const zo=async({title:as,description:fs,repo:ps,path:ms,comment:Rs,ref:Cr})=>{if(!ps||!ms){console.error("Missing required fields for saving:",{repo:ps,path:ms});return}const Tr=Rs||`Save dashboard: ${Te.state.title}`,po=Te.getSaveResource({isNew:yt,title:as,description:fs,copyTags:!0});(0,te.rR)("grafana_provisioning_dashboard_save_submitted",{workflow:wn,repositoryName:ps,repositoryType:Nt?.type??"unknown"}),qn({ref:Cr===Nt?.branch?void 0:Cr,name:ps,path:ms,message:Tr,body:po})};return(0,R.jsx)(w.Op,{...Kn,children:(0,R.jsx)("form",{onSubmit:Qn(zo),name:"save-provisioned-form",children:(0,R.jsxs)(q.B,{direction:"column",gap:2,children:[Mt&&(0,R.jsx)(ge.t,{noRepository:!1,isReadOnlyRepo:!0,readOnlyMessage:"If you have direct access to the target, copy the JSON and paste it there."}),yt&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.label-title","Title"),invalid:!!Kn.formState.errors.title,error:Kn.formState.errors.title?.message,children:(0,R.jsx)(re.p,{id:"dashboard-title",...Na("title",{required:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.title-required","Dashboard title is required"),validate:Ne})})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.label-description","Description"),invalid:!!Kn.formState.errors.description,error:Kn.formState.errors.description?.message,children:(0,R.jsx)(Y.f,{id:"dashboard-description",...Na("description")})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.label-target-folder","Target folder"),children:(0,R.jsx)(w.xI,{control:Aa,name:"folder",render:({field:{ref:as,value:fs,onChange:ps,...ms}})=>(0,R.jsx)(de.a,{onChange:async(Rs,Cr)=>{ps({uid:Rs,title:Cr}),We("folderUid",Rs);const Tr=await be(Rs);Te.setState({meta:{...Tr,folderUid:Rs}})},value:fs.uid,...ms,showAllFolders:!0})})})]}),!yt&&!Mt&&(0,R.jsx)(Ie,{drawer:He,changeInfo:at}),(0,R.jsx)(pe.x,{resourceType:"dashboard",readOnly:Mt,workflow:wn,workflowOptions:Ct,repository:Nt,isNew:yt}),(0,R.jsxs)(q.B,{gap:2,children:[(0,R.jsx)(X.$n,{variant:"secondary",onClick:He.onClose,fill:"outline",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.cancel",children:"Cancel"})}),(0,R.jsx)(X.$n,{variant:"primary",type:"submit",disabled:na.isLoading||!yn||Mt,children:na.isLoading?(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.saving","Saving..."):(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.save","Save")})]})]})})})}async function Ne(we,Te){if(we===Te.folder.title?.trim())return(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.title-same-as-folder","Dashboard name cannot be the same as the folder name");try{return await Ke.P.validateNewDashboardName(Te.folder.uid??"general",we),!0}catch(He){return He instanceof Error?He.message:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.title-validation-failed","Dashboard title validation failed.")}}function We(we,Te){if(Te==null)return;const He=new URL(window.location.href);He.searchParams.set(we,Te),window.history.replaceState({},"",He)}function qe(we){const Te=we?.metadata?.name,He=we?.spec?.title,at=J.A.slugifyForUrl(He);return{uid:Te,version:we?.metadata?.generation,id:we?.spec?.id||0,status:"success",url:n.I.assureBaseUrl((0,Re.u)({uid:Te,slug:at,currentQueryParams:""})),slug:at}}function st({drawer:we,changeInfo:Te,dashboard:He}){const{isNew:at,defaultValues:yt,workflowOptions:Ct,readOnly:Mt,repository:Nt}=(0,H.S)(He);return yt?(0,R.jsx)(Oe,{dashboard:He,drawer:we,changeInfo:Te,isNew:at,defaultValues:yt,repository:Nt,workflowOptions:Ct,readOnly:Mt}):null}var rt=e(55266);function ot(we){const He=new URLSearchParams(window.location.search).get("folderUid")||void 0,{repository:at,isInstanceManaged:yt}=(0,rt.T)({folderName:He});return o.$.featureToggles.provisioning?we.isManagedRepository()||!!at||yt:!1}var mt=e(21285),pt=e(72636),ke=e(91156);function Ze({dashboard:we,changeInfo:Te}){const{changedSaveModel:He}=Te,{register:at,handleSubmit:yt,setValue:Ct,formState:Mt,getValues:Nt,watch:Gt,trigger:un}=(0,w.mN)({mode:"onBlur",defaultValues:{title:Te.isNew?He.title:`${He.title} Copy`,description:He.description??"",folder:{uid:we.state.meta.folderUid,title:we.state.meta.folderTitle},copyTags:!1}}),{errors:yn,isValid:Wn}=Mt,qn=Gt(),{state:na,onSaveDashboard:Kn}=Qe(!1),[Qn,ga]=(0,K.useState)({}),Aa=(0,K.useRef)();(0,K.useEffect)(()=>{un("title")},[un]),(0,K.useEffect)(()=>()=>{clearTimeout(Aa.current)},[]);const va=(0,K.useCallback)(da=>{Ct("title",da.target.value,{shouldDirty:!0}),clearTimeout(Aa.current),Aa.current=setTimeout(()=>{un("title")},400)},[Ct,un]),Na=async da=>{if(clearTimeout(Aa.current),!await un("title"))return;const ns=Nt();(await Kn(we,{overwrite:da,folderUid:ns.folder.uid,rawDashboardJSON:He,saveAsCopy:!0,isNew:Te.isNew,copyTags:ns.copyTags,title:ns.title,description:ns.description})).status==="success"?we.closeModal():ga({title:ns.title,folderUid:ns.folder.uid})},wn=(0,R.jsx)(X.$n,{variant:"secondary",onClick:()=>we.closeModal(),fill:"outline",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-as-form.cancel-button.cancel",children:"Cancel"})}),Ea=da=>(0,R.jsx)(fe,{isValid:Wn,isLoading:na.loading,onSave:Na,overwrite:da});function Os(da){const Ja=qn.title.trim()===Qn.title&&qn.folder.uid===Qn.folderUid;return oe(da)&&Ja?(0,R.jsx)(ye,{cancelButton:wn,saveButton:Ea}):(0,R.jsxs)(R.Fragment,{children:[da&&Ja&&(0,R.jsx)(ee.F,{title:(0,s.t)("dashboard-scene.save-dashboard-as-form.render-footer.title-failed-to-save-dashboard","Failed to save dashboard"),severity:"error",children:da.message&&(0,R.jsx)("p",{children:da.message})}),(0,R.jsxs)(q.B,{alignItems:"center",children:[wn,Ea(!1)]})]})}return(0,R.jsx)("form",{onSubmit:yt(()=>Na(!1)),children:(0,R.jsxs)(q.B,{direction:"column",gap:2,children:[(0,R.jsx)(se.D,{noMargin:!0,label:(0,R.jsx)(nt,{onChange:Ct}),invalid:!!yn.title,error:yn.title?.message,children:(0,R.jsx)(re.p,{...at("title",{required:(0,s.t)("dashboard-scene.save-dashboard-as-form.required","Required"),validate:gt,onChange:va}),"aria-label":(0,s.t)("dashboard-scene.save-dashboard-as-form.aria-label-save-dashboard-title-field","Save dashboard title field"),"data-testid":_.Tp.components.Drawer.DashboardSaveDrawer.saveAsTitleInput})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,R.jsx)(ut,{onChange:Ct}),invalid:!!yn.description,error:yn.description?.message,children:(0,R.jsx)(Y.f,{...at("description",{required:!1}),"aria-label":(0,s.t)("dashboard-scene.save-dashboard-as-form.aria-label-save-dashboard-description-field","Save dashboard description field"),autoFocus:!0})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.save-dashboard-as-form.label-folder","Folder"),children:(0,R.jsx)(ke.d,{onChange:async(da,Ja)=>{Ct("folder",{uid:da,title:Ja});const ns=await be(da);we.setState({meta:{...ns,folderUid:da}}),un("title")},value:qn.folder?.uid})}),!Te.isNew&&(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.save-dashboard-as-form.label-copy-tags","Copy tags"),children:(0,R.jsx)(mt.d,{...at("copyTags")})}),(0,R.jsx)(ae.a,{paddingTop:2,children:Os(na.error)})]})})}function nt(we){return(0,R.jsx)(q.B,{justifyContent:"space-between",children:(0,R.jsx)(pt.J,{htmlFor:"description",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.title-field-label.title",children:"Title"})})})}function ut(we){return(0,R.jsx)(q.B,{justifyContent:"space-between",children:(0,R.jsx)(pt.J,{htmlFor:"description",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.description-label.description",children:"Description"})})})}async function gt(we,Te){if(we===Te.folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await Ke.P.validateNewDashboardName(Te.folder.uid??"general",we),!0}catch(He){return He instanceof Error?He.message:"Dashboard name is invalid"}}var ht=e(22803),tt=e(4213),Ot=e(70713),jt=e(89640),wt=e(50992),Ht=e(47931);function hn({dashboard:we,drawer:Te,changeInfo:He}){const at=(0,K.useMemo)(()=>JSON.stringify(He.changedSaveModel,null,2),[He]),yt=(0,K.useCallback)(()=>{const Ct=new Blob([at],{type:"application/json;charset=utf-8"});(0,tt.saveAs)(Ct,He.changedSaveModel.title+"-"+new Date().getTime()+".json")},[He.changedSaveModel,at]);return(0,R.jsx)("div",{className:Dn.container,children:(0,R.jsxs)(q.B,{direction:"column",gap:2,grow:1,children:[(0,R.jsxs)("div",{children:[(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.cannot-be-saved",children:"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source."}),(0,R.jsx)("br",{}),(0,R.jsx)("i",{children:(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.see-docs",children:["See"," ",(0,R.jsx)(jt.Y,{href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",external:!0,children:"documentation"})," ","for more information about provisioning."]})}),(0,R.jsx)("br",{})," ",(0,R.jsx)("br",{}),(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.file-path",values:{filePath:we.state.meta.provisionedExternalId},children:[(0,R.jsx)("strong",{children:"File path:"})," ","{{filePath}}"]})]}),(0,R.jsx)(Ie,{drawer:Te,changeInfo:He}),(0,R.jsx)("div",{className:Dn.json,children:(0,R.jsx)(Ot.Ay,{disableWidth:!0,children:({height:Ct})=>(0,R.jsx)(wt.B,{width:"100%",height:Ct,language:"json",showLineNumbers:!0,showMiniMap:at.length>100,value:at,readOnly:!0})})}),(0,R.jsx)(ae.a,{paddingTop:2,children:(0,R.jsxs)(q.B,{gap:2,children:[(0,R.jsx)(X.$n,{variant:"secondary",onClick:Te.onClose,fill:"outline",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.cancel",children:"Cancel"})}),(0,R.jsx)(Ht.b,{icon:"copy",getText:()=>at,children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.copy-json-to-clipboard",children:"Copy JSON to clipboard"})}),(0,R.jsx)(X.$n,{type:"submit",onClick:yt,children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.save-json-to-file",children:"Save JSON to file"})})]})})]})})}const Dn={container:(0,ht.css)({height:"100%",display:"flex"}),json:(0,ht.css)({flexGrow:1,maxHeight:"800px"})};class Bn extends i.Bs{constructor(){super(...arguments),this.onClose=()=>{const Te=this.state.dashboardRef.resolve(),He=Te.getDashboardChanges();Te.setState({overlay:void 0,meta:He.isNew?Te.getInitialState()?.meta:Te.state.meta})},this.onToggleSaveTimeRange=()=>{this.setState({saveTimeRange:!this.state.saveTimeRange})},this.onToggleSaveVariables=()=>{this.setState({saveVariables:!this.state.saveVariables})},this.onToggleSaveRefresh=()=>{this.setState({saveRefresh:!this.state.saveRefresh})}}static{this.Component=xn}}function xn({model:we}){const{showDiff:Te,saveAsCopy:He,saveTimeRange:at,saveVariables:yt,saveRefresh:Ct}=we.useState(),Mt=we.state.dashboardRef.resolve().getDashboardChanges(at,yt,Ct),{changedSaveModel:Nt,initialSaveModel:Gt,diffs:un,diffCount:yn,hasFolderChanges:Wn,hasMigratedToV2:qn}=Mt,na=yn+(Wn?1:0),Kn=we.state.dashboardRef.resolve(),{meta:Qn}=Kn.useState(),{provisioned:ga,folderTitle:Aa}=Qn,va=Kn.managedResourceCannotBeEdited(),Na=ot(Kn),wn=(0,R.jsxs)(O.U,{children:[(0,R.jsx)(N.o,{label:(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.label-details","Details"),active:!Te,onChangeTab:()=>we.setState({showDiff:!1})}),na>0&&!va&&(0,R.jsx)(N.o,{label:(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.label-changes","Changes"),active:Te,onChangeTab:()=>we.setState({showDiff:!0}),counter:na})]});let Ea=(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.title","Save dashboard");He?Ea=(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.title-copy","Save dashboard copy"):(ga||Na)&&(Ea=(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.title-provisioned","Provisioned dashboard"));const Os=()=>Te?(0,R.jsx)(G.l,{diff:un,oldValue:Gt,newValue:Nt,hasFolderChanges:Wn,hasMigratedToV2:qn,oldFolder:Kn.getInitialState()?.meta.folderTitle,newFolder:Aa}):Na?(0,R.jsx)(st,{dashboard:Kn,changeInfo:Mt,drawer:we}):He||Mt.isNew?(0,R.jsx)(Ze,{dashboard:Kn,changeInfo:Mt}):ga||va?(0,R.jsx)(hn,{dashboard:Kn,changeInfo:Mt,drawer:we}):(0,R.jsx)(Ue,{dashboard:Kn,changeInfo:Mt,drawer:we});return(0,R.jsx)(F._,{title:Ea,subtitle:Kn.state.title,onClose:we.onClose,tabs:wn,children:Os()})}var ft=e(60171),St=e(4604),Tt=e(95710),Je=e(17862),Pt=e(26604),Yt=e(13241),Lt=e(70030),fn=e(62265);class En{constructor(){this.elementPanelMap=new Map,this.defaultDsReferencesMap={panels:new Map,variables:new Set,annotations:new Set}}initializeElementMapping(Te){this.elementPanelMap.clear(),!(!Te||!Te.panels)&&Te.panels?.forEach(He=>{if(He.id){const at=(0,P.XA)(He.id);this.elementPanelMap.set(at,He.id)}})}getElementPanelMapping(){return this.elementPanelMap}initializeDSReferencesMapping(Te){return{}}getDSReferencesMapping(){return this.defaultDsReferencesMap}getPanelIdForElement(Te){return this.elementPanelMap.get(Te)}getElementIdForPanel(Te){for(const[at,yt]of this.elementPanelMap.entries())if(yt===Te)return at;const He=(0,P.XA)(Te);return this.elementPanelMap.set(He,Te),He}getSaveModel(Te){return(0,Lt.Uy)(Te)}getSaveAsModel(Te,He){const at=this.getSaveModel(Te);return{...at,id:null,uid:"",title:He.title||"",description:He.description||void 0,tags:He.isNew||He.copyTags?at.tags:[]}}getDashboardChangesFromScene(Te,He){const at=this.getSaveModel(Te),yt=(0,Je.Cj)(this.initialSaveModel,at,He.saveTimeRange,He.saveVariables,He.saveRefresh),Ct=Te.getInitialState()?.meta.folderUid!==Te.state.meta.folderUid;return{...yt,hasFolderChanges:Ct,hasChanges:yt.hasChanges||Ct,hasMigratedToV2:!1}}onSaveComplete(Te,He){this.initialSaveModel={...Te,id:He.id,uid:He.uid,version:He.version},this.metadata={...this.metadata,k8s:{...this.metadata?.k8s,generation:He.version}}}getK8SMetadata(){return this.metadata?.k8s}getTrackingInformation(){const Te=this.initialSaveModel?.panels?.map(yt=>yt.type)||[],He=(0,Tt.GC)(Te),at=(0,Tt.wM)(this.initialSaveModel?.templating?.list||[]);if(this.initialSaveModel)return{uid:this.initialSaveModel.uid,title:this.initialSaveModel.title,schemaVersion:this.initialSaveModel.schemaVersion,panels_count:this.initialSaveModel.panels?.length||0,settings_nowdelay:void 0,settings_livenow:!!this.initialSaveModel.liveNow,...He,...at}}getDynamicDashboardsTrackingInformation(){}getSnapshotUrl(){return this.initialSaveModel?.snapshot?.originalUrl}async makeExportableExternally(Te){const He=this.getSaveModel(Te),at=new E.G(He,void 0,{getVariablesFromState:()=>(0,Yt.E)(window.__grafanaSceneContext)});return await(0,Pt.E)(at)}}class An{constructor(){this.elementPanelMap=new Map,this.defaultDsReferencesMap={panels:new Map,variables:new Set,annotations:new Set}}getElementPanelMapping(){return this.elementPanelMap}initializeElementMapping(Te){if(this.elementPanelMap.clear(),!Te||!Te.elements)return;Object.keys(Te.elements).forEach(at=>{const yt=Te.elements[at];yt.kind==="Panel"&&this.elementPanelMap.set(at,yt.spec.id)})}initializeDSReferencesMapping(Te){if(Te===void 0||Te&&!(0,ft.aK)(Te))return;if(this.defaultDsReferencesMap={panels:new Map,variables:new Set,annotations:new Set},Object.keys(Te?.elements||{}).forEach(at=>{const yt=Te?.elements[at];if(yt?.kind==="Panel"){const Ct=yt.spec.data.spec.queries;for(const Mt of Ct)if(!Mt.spec.query.datasource?.name){const Nt=this.getElementIdForPanel(yt.spec.id);this.defaultDsReferencesMap.panels.has(Nt)||this.defaultDsReferencesMap.panels.set(Nt,new Set),this.defaultDsReferencesMap.panels.get(Nt).add(Mt.spec.refId)}}}),Te?.variables)for(const at of Te.variables)at.kind==="QueryVariable"&&!at.spec.query.datasource?.name&&this.defaultDsReferencesMap.variables.add(at.spec.name);if(Te?.annotations)for(const at of Te.annotations)at.spec.query?.datasource?.name||this.defaultDsReferencesMap.annotations.add(at.spec.name)}getDSReferencesMapping(){return this.defaultDsReferencesMap}getPanelIdForElement(Te){return this.elementPanelMap.get(Te)}getElementIdForPanel(Te){for(const[at,yt]of this.elementPanelMap.entries())if(yt===Te)return at;const He=(0,P.XA)(Te);return this.elementPanelMap.set(He,Te),He}getSaveModel(Te){return(0,fn.Xl)(Te)}getSaveAsModel(Te,He){const at=this.getSaveModel(Te);return{...at,title:He.title||"",description:He.description||"",tags:He.isNew||He.copyTags?at.tags:[]}}getDashboardChangesFromScene(Te,He){const at=this.getSaveModel(Te),yt=(0,Je.AM)(this.initialSaveModel,at,He.saveTimeRange,He.saveVariables,He.saveRefresh),Ct=Te.getInitialState()?.meta.folderUid!==Te.state.meta.folderUid,Mt=!Te.getInitialState()?.uid;return{...yt,hasFolderChanges:Ct,hasChanges:yt.hasChanges||Ct,isNew:Mt,hasMigratedToV2:!!yt.hasMigratedToV2}}onSaveComplete(Te,He){this.initialSaveModel={...Te},this.metadata&&(this.metadata={...this.metadata,generation:He.version})}getK8SMetadata(){return this.metadata}getTrackingInformation(Te){if(!this.initialSaveModel)return;const He="elements"in this.initialSaveModel?Object.values(this.initialSaveModel.elements).reduce((Ct,Mt)=>(Mt.kind!=="Panel"||Ct.push(Mt.spec.vizConfig.group),Ct),[]):[],at=(0,Tt.GC)(He),yt="variables"in this.initialSaveModel?(0,Tt.z9)(this.initialSaveModel.variables):[];return{schemaVersion:St.O2,uid:Te.state.uid,title:this.initialSaveModel.title,panels_count:He.length||0,settings_nowdelay:void 0,settings_livenow:!!this.initialSaveModel.liveNow,...at,...yt}}getDynamicDashboardsTrackingInformation(){if(!this.initialSaveModel||!(0,ft.aK)(this.initialSaveModel))return;const Te=[],He=this._parseDynamicDashboardsLayouts({autoLayoutCount:0,customGridLayoutCount:0,rowsLayoutCount:0,tabsLayoutCount:0,panelCount:0,rowCount:0,tabCount:0,maxNestingLevel:0,conditionalRenderRulesCount:0,dashStructure:Te},this.initialSaveModel.layout,0,Te);return{...He,dashStructure:JSON.stringify(He.dashStructure),templateVariableCount:this.initialSaveModel.variables?.length??0,panelsByDatasourceType:Object.values(this.initialSaveModel.elements).reduce((at,{kind:yt,spec:Ct})=>yt!=="Panel"?at:Ct.data.spec.queries.reduce((Mt,{spec:Nt})=>(Nt.query.datasource&&(Mt[Nt.query.group]=Mt[Nt.query.group]??0,Mt[Nt.query.group]++),Mt),at),{})}}getSnapshotUrl(){return this.metadata?.annotations?.[D.UL]}async makeExportableExternally(Te){return await(0,Pt.j)(this.getSaveModel(Te))}_parseDynamicDashboardsLayouts(Te,He,at,yt){switch(Te.maxNestingLevel=Math.max(Te.maxNestingLevel,at),He.kind){case"GridLayout":return Te.customGridLayoutCount++,Te.panelCount+=He.spec.items.length,yt.push(...He.spec.items.map(()=>({kind:"panel"}))),Te;case"AutoGridLayout":return Te.autoLayoutCount++,Te.panelCount+=He.spec.items.length,yt.push(...He.spec.items.map(()=>({kind:"panel"}))),Te.conditionalRenderRulesCount=He.spec.items.reduce((Nt,Gt)=>Nt+(Gt.spec.conditionalRendering?.spec?.items?.length||0),Te.conditionalRenderRulesCount),Te;case"RowsLayout":Te.rowsLayoutCount++,Te.rowCount+=He.spec.rows.length;const Ct=at+1;return He.spec.rows.reduce((Nt,Gt)=>{Nt.conditionalRenderRulesCount+=Gt.spec.conditionalRendering?.spec?.items?.length||0;const un=[];return yt.push({kind:"row",children:un}),Gt.spec.layout?this._parseDynamicDashboardsLayouts(Nt,Gt.spec.layout,Ct,un):Nt},Te);case"TabsLayout":Te.tabsLayoutCount++,Te.tabCount+=He.spec.tabs.length;const Mt=at+1;return He.spec.tabs.reduce((Nt,Gt)=>{Nt.conditionalRenderRulesCount+=Gt.spec.conditionalRendering?.spec?.items?.length||0;const un=[];return yt.push({kind:"tab",children:un}),Gt.spec.layout?this._parseDynamicDashboardsLayouts(Nt,Gt.spec.layout,Mt,un):Nt},Te);default:return Te}}}function Gn(we){return we==="v2"?new An:new En}var zn=e(4974),sa=e(17340),ta=e(67350),ra=e(65333),ea=e(19161),Un=e(64423),oa=e(19379),Ca=e(84229),ya=e(80011),Xa=e(88632),Ta=e(99392),Pa=e(33380);class pa{constructor(Te){this._scene=Te,this.events=new oa.o,this._subs=new Un.yU;const He=i.jh.getTimeRange(Te);this.formatDate=this.formatDate.bind(this),this._subs.add(He.subscribeToState((at,yt)=>{at.value!==yt.value&&this.events.publish(new l.sR(at.value))}))}get id(){return this._scene.state.id??null}get uid(){return this._scene.state.uid??null}get title(){return this._scene.state.title}get description(){return this._scene.state.description}get editable(){return this._scene.state.editable}get graphTooltip(){return this._getSyncMode()}get timepicker(){return{refresh_intervals:this._scene.state.controls.state.refreshPicker.state.intervals,hidden:this._scene.state.controls.state.hideTimeControls??!1}}get timezone(){return this.getTimezone()}get weekStart(){return i.jh.getTimeRange(this._scene).state.weekStart}get tags(){return this._scene.state.tags}get links(){return this._scene.state.links}get meta(){return this._scene.state.meta}get time(){const Te=i.jh.getTimeRange(this._scene);return{from:Te.state.from,to:Te.state.to}}get panels(){return Ua(this._scene,He=>He instanceof i.Eb).map(He=>new Pa.R(He))}get annotations(){const Te={list:[]};return this._scene.state.$data instanceof Xa.s&&(Te.list=(0,Ta.O)(this._scene.state.$data.state.annotationLayers)),Te}getTimezone(){return i.jh.getTimeRange(this._scene).getTimeZone()}sharedTooltipModeEnabled(){return this._getSyncMode()>0}sharedCrosshairModeOnly(){return this._getSyncMode()===1}_getSyncMode(){if(this._scene.state.$behaviors){for(const Te of this._scene.state.$behaviors)if(Te instanceof i.Gg.K2)return Te.state.sync}return Ca.y.Off}otherPanelInFullscreen(Te){return!1}formatDate(Te,He){return(0,ya.LE)(Te,{format:He,timeZone:this.getTimezone()})}getPanelById(Te){const He=(0,P.vL)(this._scene,(0,P.XA)(Te));return He?new Pa.R(He):null}removePanel(Te){const He=(0,P.vL)(this._scene,(0,P.XA)(Te.id));if(!He){console.error("Trying to remove a panel that was not found in scene",Te);return}this._scene.removePanel(He)}canEditAnnotations(Te){return this._scene.canEditDashboard()?Te?!!this._scene.state.meta.annotationsPermissions?.dashboard.canEdit:!!this._scene.state.meta.annotationsPermissions?.organization.canEdit:!1}panelInitialized(){}destroy(){this.events.removeAllListeners(),this._subs.unsubscribe()}hasUnsavedChanges(){return this._scene.state.isDirty}}function Ua(we,Te){let He=[];return we.forEachChild(at=>{Te(at)?He.push(at):He=He.concat(Ua(at,Te))}),He}var ma=e(1682),Ka=e(52258),Oa=e(63142);class is extends i.Bs{constructor(Te){super({...Te,jsonText:""}),this.onClose=()=>{this.state.dashboardRef.resolve().setState({overlay:void 0})},this.onSave=()=>{},this.addActivationHandler(()=>this.setState({jsonText:this.getJsonText()}))}getJsonText(){const Te=this.state.dashboardRef.resolve();return JSON.stringify((0,fn.Xl)(Te),null,2)}static{this.Component=({model:Te})=>{const{jsonText:He}=Te.useState(),at=(0,Oa.of)(Bt),yt=()=>(0,R.jsxs)("div",{className:at.wrapper,children:[(0,R.jsx)(wt.B,{width:"100%",value:He,language:"json",showLineNumbers:!0,showMiniMap:!0,containerStyles:at.codeEditor,onBlur:Ct=>Te.setState({jsonText:Ct})}),(0,R.jsx)(ae.a,{paddingTop:2,children:(0,R.jsx)(X.$n,{onClick:Te.onSave,disabled:!0,children:"Update dashboard"})})]});return(0,R.jsx)(F._,{title:"[DEV] Schema V2 editor",subtitle:"Allows editing dashboard using v2 schema. Changes are not persisted in db.",onClose:Te.onClose,children:yt()})}}}const Bt=we=>({wrapper:(0,ht.css)({display:"flex",height:"100%",flexDirection:"column",gap:we.spacing(2)}),codeEditor:(0,ht.css)({flexGrow:1})});var $t=e(24438),zt=e(7094),kt=e(3688);class mn extends i.Bs{constructor(){super(...arguments),this.onClose=()=>{(0,P.YQ)(this).closeModal()},this.onAddLibraryPanel=Te=>{const He=(0,P.YQ)(this),at=(0,P.O8)();at.setState({title:Te.model.title,hoverHeader:!Te.model.title,$behaviors:[new zt.u({uid:Te.uid,name:Te.name})]});const yt=this.state.panelToReplaceRef?.resolve();if(yt){const Ct=yt.parent;Ct&&(0,kt.y)(Ct)&&(at.setState({key:yt.state.key}),Ct.setElementBody(at))}else He.addPanel(at);this.onClose()}}static{this.Component=({model:Te})=>{const He=(0,s.t)("library-panel.add-widget.title","Add panel from panel library");return(0,R.jsx)(F._,{title:He,onClose:Te.onClose,children:(0,R.jsx)($t.j,{onClick:Te.onAddLibraryPanel,variant:$t.s.Tight,showPanelFilter:!0})})}}}var on=e(36324);function Ln(we){return"isDashboardDropTarget"in we&&we.isDashboardDropTarget===!0}class Hn extends i.Bs{constructor(){super({}),this._sourceDropTarget=null,this._lastDropTarget=null,this._pointerDistance=(0,on.b)(),this._isSelectedObject=!1,this._onPointerMove=this._onPointerMove.bind(this),this._stopDraggingSync=this._stopDraggingSync.bind(this),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){return()=>{document.body.removeEventListener("pointermove",this._onPointerMove),document.body.removeEventListener("pointerup",this._stopDraggingSync)}}startDraggingSync(Te,He){this._pointerDistance.set(Te),this._isSelectedObject=!1;const at=i.jh.findObject(He,Ln);!at||!Ln(at)||(this._sourceDropTarget=at,this._lastDropTarget=at,document.body.addEventListener("pointermove",this._onPointerMove),document.body.addEventListener("pointerup",this._stopDraggingSync),this.setState({draggingPanel:He.getRef()}))}_stopDraggingSync(Te){const He=this.state.draggingPanel?.resolve();this._sourceDropTarget!==this._lastDropTarget&&setTimeout(()=>{this._sourceDropTarget?.draggedPanelOutside?.(He),this._lastDropTarget?.draggedPanelInside?.(He)}),document.body.removeEventListener("pointermove",this._onPointerMove),document.body.removeEventListener("pointerup",this._stopDraggingSync),this.setState({draggingPanel:void 0})}_onPointerMove(Te){if(!this._isSelectedObject&&this.state.draggingPanel&&this._pointerDistance.check(Te)){this._isSelectedObject=!0;const at=this.state.draggingPanel?.resolve();this._getDashboard().state.editPane.selectObject(at,at.state.key,{force:!0,multi:!1})}const He=this._getDropTargetUnderMouse(Te)??this._sourceDropTarget;He&&He!==this._lastDropTarget&&(this._lastDropTarget?.setIsDropTarget?.(!1),this._lastDropTarget=He,He!==this._sourceDropTarget&&He.setIsDropTarget?.(!0))}_getDashboard(){if(!(this.parent instanceof fo))throw new Error("Parent is not a DashboardScene");return this.parent}_getDropTargetUnderMouse(Te){const He=document.elementsFromPoint(Te.clientX,Te.clientY);if(He.some(Mt=>Mt.getAttribute("data-dashboard-drop-target-key")===this._sourceDropTarget?.state.key))return null;const yt=He?.find(Mt=>Mt.getAttribute("data-dashboard-drop-target-key"))?.getAttribute("data-dashboard-drop-target-key");if(!yt)return null;const Ct=i.jh.findByKey(this._getDashboard(),yt);return!Ct||!Ln(Ct)?null:Ct}}var Tn=e(75683),Nn=e(69896),gn=e(13791),Zn=e(92293),kn=e(56887),it=e(94076),Wt=e(82754),Vt=e(92415),nn=e(33149),an=e(78685),Rn=e(93008),Xn=e(7895),jn=e(66404),dn=e(30703),Ra=e(92807);function Sa(we){const[Te,He]=(0,K.useState)({}),at=Gt=>{we.onChangeName&&He({isRenaming:!0,originalName:we.getEditableElementInfo().instanceName})},yt=()=>{Te.error&&we.onChangeName(Te.originalName),He({})},Ct=(0,K.useMemo)(()=>Gt=>{Gt?.focus(),Gt?.select()},[]),Mt=Gt=>{const un=we.onChangeName(Gt.target.value);un?.errorMessage?He({...Te,error:un.errorMessage}):Te.error&&He({...Te,error:void 0})},Nt=Gt=>{Gt.key==="Enter"&&yt()};return{isRenaming:Te.isRenaming,onNameDoubleClicked:at,renameInputRef:Ct,onChangeName:Mt,onInputBlur:yt,onInputKeyDown:Nt}}function Wa({editPane:we}){const Te=(0,P.YQ)(we);return(0,R.jsx)(ae.a,{padding:1,gap:0,display:"flex",direction:"column",element:"ul",role:"tree",position:"relative",children:(0,R.jsx)(gs,{sceneObject:Te,editPane:we,depth:0,index:0})})}function gs({sceneObject:we,editPane:Te,depth:He,index:at}){const yt=(0,Oa.of)(Ss),{key:Ct}=we.useState(),[Mt,Nt]=(0,K.useState)(He>0),{isSelected:Gt,onSelect:un}=(0,kn.y)(Ct),yn=(0,K.useMemo)(()=>(0,C.bn)(we),[we]),Wn=(0,K.useMemo)(()=>(0,B.wT)(we),[we]),qn=(0,s.t)("dashboard.outline.tree-item.no-title","<no title>"),na=Wn.getOutlineChildren?.()??[],Kn=Wn.getEditableElementInfo(),Qn=Kn.instanceName===""?qn:Kn.instanceName,ga=Sa(Wn),Aa=!!Wn.getOutlineChildren,va=wn=>{wn.stopPropagation(),Gt||un?.(wn),Wn.scrollIntoView?.(),me.c.outlineItemClicked({index:at,depth:He})},Na=wn=>{wn.stopPropagation(),Nt(!Mt)};return(0,R.jsxs)("li",{role:"treeitem","aria-selected":Gt,className:yt.container,onClick:va,style:{"--depth":He},children:[(0,R.jsxs)("div",{className:(0,ht.cx)(yt.row,{[yt.rowSelected]:Gt}),children:[(0,R.jsx)("div",{className:yt.indentation}),Aa&&(0,R.jsx)("button",{className:yt.angleButton,onClick:Na,"data-testid":_.Tp.components.PanelEditor.Outline.node(Qn),children:(0,R.jsx)(dn.I,{name:Mt?"angle-right":"angle-down"})}),(0,R.jsxs)("button",{className:(0,ht.cx)(yt.nodeName,{[yt.nodeNameClone]:yn}),onDoubleClick:ga.onNameDoubleClicked,"data-testid":_.Tp.components.PanelEditor.Outline.item(Qn),children:[(0,R.jsx)(dn.I,{size:"sm",name:Kn.icon}),ga.isRenaming?(0,R.jsx)("input",{ref:ga.renameInputRef,type:"text",value:Kn.instanceName,className:yt.outlineInput,onChange:ga.onChangeName,onBlur:ga.onInputBlur,onKeyDown:ga.onInputKeyDown}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(q.B,{direction:"row",gap:.5,alignItems:"center",grow:1,children:[(0,R.jsx)("span",{children:Qn}),Kn.isHidden&&(0,R.jsx)(dn.I,{name:"eye-slash",size:"sm",className:yt.hiddenIcon})]}),yn&&(0,R.jsx)("span",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard.outline.repeated-item",children:"Repeat"})})]})]})]}),Aa&&!Mt&&(0,R.jsx)("ul",{className:yt.nodeChildren,role:"group",children:na.length>0?na.map((wn,Ea)=>(0,R.jsx)(gs,{sceneObject:wn,editPane:Te,depth:He+1,index:Ea},wn.state.key)):(0,R.jsx)(jn.E,{color:"secondary",element:"li",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard.outline.tree-item.empty",children:"(empty)"})})})]})}function Ss(we){return{container:(0,ht.css)({display:"flex",gap:we.spacing(.5),flexGrow:1,flexDirection:"column",borderRadius:we.shape.radius.default,color:we.colors.text.secondary}),containerSelected:(0,ht.css)({outline:`1px dashed ${we.colors.primary.border} !important`,outlineOffset:"0px",color:we.colors.text.primary}),row:(0,ht.css)({display:"flex",gap:we.spacing(.5),borderRadius:we.shape.radius.default,"&:hover":{color:we.colors.text.primary,outline:`1px dashed ${we.colors.border.strong}`,backgroundColor:we.colors.emphasize(we.colors.background.primary,.05)}}),rowSelected:(0,ht.css)({color:we.colors.text.primary,outline:`1px dashed ${we.colors.primary.border} !important`,backgroundColor:we.colors.emphasize(we.colors.background.primary,.05)}),indentation:(0,ht.css)({marginLeft:`calc(var(--depth) * ${we.spacing(3)})`}),angleButton:(0,ht.css)({boxShadow:"none",border:"none",background:"transparent",borderRadius:we.shape.radius.default,padding:0,color:"inherit",lineHeight:0}),nodeName:(0,ht.css)({boxShadow:"none",border:"none",background:"transparent",padding:0,borderRadius:we.shape.radius.default,color:"inherit",display:"flex",flexGrow:1,alignItems:"center",gap:we.spacing(.5),overflow:"hidden","> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),hiddenIcon:(0,ht.css)({color:we.colors.text.secondary,marginLeft:we.spacing(1)}),nodeNameClone:(0,ht.css)({color:we.colors.text.secondary,cursor:"not-allowed"}),outlineInput:(0,ht.css)({border:`1px solid ${we.components.input.borderColor}`,height:we.spacing(3),borderRadius:we.shape.radius.default,"&:focus":{outline:"none",boxShadow:"none"}}),nodeChildren:(0,ht.css)({display:"flex",flexDirection:"column",position:"relative",gap:we.spacing(.5),"&::before":{content:'""',position:"absolute",width:"1px",height:"100%",pointerEvents:"none",zIndex:1,background:we.colors.border.weak,marginLeft:`calc(11px + ${we.spacing(3)} * var(--depth))`}})}}var zs=e(76319),Rr=e(88559),mr=e(87063);function So({element:we,editPane:Te}){const He=we.getEditableElementInfo(),at=(0,Oa.of)(Gs),yt=we.onCopy?.bind(we),Ct=we.onDuplicate?.bind(we),Mt=we.onDelete?.bind(we),Nt=we.onConfirmDelete?.bind(we),Gt=()=>Te.clearSelection(),un=Te.state.selection,yn=()=>{Nt?Nt():Mt&&Mt(),(0,Se.H0)(He)};return(0,R.jsxs)("div",{className:at.wrapper,children:[(0,R.jsxs)(q.B,{direction:"row",gap:.5,children:[un&&(0,R.jsx)(zs.K,{name:"arrow-left",size:"lg",onClick:Gt,tooltip:(0,s.t)("grafana.dashboard.edit-pane.go-back","Go back"),"aria-label":(0,s.t)("grafana.dashboard.edit-pane.go-back","Go back"),"data-testid":_.Tp.components.EditPaneHeader.backButton}),(0,R.jsx)(jn.E,{children:He.typeName})]}),(0,R.jsxs)(q.B,{direction:"row",gap:1,children:[we.renderActions&&we.renderActions(),(yt||Ct)&&(0,R.jsx)(Rr.m,{overlay:(0,R.jsxs)(mr.W,{children:[yt?(0,R.jsx)(mr.W.Item,{icon:"copy",label:(0,s.t)("dashboard.layout.common.copy","Copy"),onClick:yt}):null,Ct?(0,R.jsx)(mr.W.Item,{icon:"file-copy-alt",label:(0,s.t)("dashboard.layout.common.duplicate","Duplicate"),onClick:Ct}):null]}),children:(0,R.jsx)(X.$n,{tooltip:(0,s.t)("dashboard.layout.common.copy-or-duplicate","Copy or Duplicate"),tooltipPlacement:"bottom",variant:"secondary",size:"sm",icon:"copy","data-testid":_.Tp.components.EditPaneHeader.copyDropdown,children:(0,R.jsx)(dn.I,{name:"angle-down"})})}),(Mt||Nt)&&(0,R.jsx)(X.$n,{onClick:yn,size:"sm",variant:"destructive",fill:"outline",icon:"trash-alt",tooltip:(0,s.t)("dashboard.layout.common.delete","Delete"),"data-testid":_.Tp.components.EditPaneHeader.deleteButton})]})]})}function Gs(we){return{wrapper:(0,ht.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:we.spacing(1,2),borderBottom:`1px solid ${we.colors.border.weak}`})}}function _r({element:we,editPane:Te,isNewElement:He}){const at=we.useEditPaneOptions?we.useEditPaneOptions(He):[],yt=(0,Oa.of)(kr);return(0,R.jsxs)("div",{className:yt.wrapper,children:[(0,R.jsx)(So,{element:we,editPane:Te}),(0,R.jsx)(Ra.P,{showScrollIndicators:!0,children:(0,R.jsx)("div",{className:yt.categories,children:at.map(Ct=>Ct.render())})})]})}function kr(we){return{wrapper:(0,ht.css)({display:"flex",flexDirection:"column",flex:"1 1 0",height:"100%"}),categories:(0,ht.css)({display:"flex",flexDirection:"column",borderBottom:`1px solid ${we.colors.border.weak}`})}}function Yr(we,Te){return(0,K.useMemo)(()=>{if(!we){const He=(0,P.YQ)(Te);return new U([[He.state.uid,He.getRef()]]).createSelectionElement()}return we.createSelectionElement()},[we,Te])}function Jr({editPane:we,isEditPaneCollapsed:Te,onToggleCollapse:He,openOverlay:at}){const{selection:yt}=(0,i.gn)(we,{shouldActivateOrKeepAlive:!0}),Ct=(0,Oa.of)(Xr),Mt=(0,Oa.of)(X.my),Nt=Yr(yt,we),Gt=yt?.getFirstObject(),un=yt?.isNewElement()??!1,[yn,Wn]=(0,an.A)("grafana.dashboard.edit-pane.outline.collapsed",!0),[qn=.4,na]=(0,an.A)("grafana.dashboard.edit-pane.outline.size",.4),Kn=(0,Rn.h)({direction:"column",handleSize:"sm",initialSize:1-qn,dragPosition:"middle",onSizeChanged:Qn=>{na(1-Qn)}});return Nt?Te?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:Ct.expandOptionsWrapper,children:(0,R.jsx)(Xn.I,{tooltip:(0,s.t)("dashboard.edit-pane.open","Open options pane"),icon:"arrow-to-right",onClick:He,variant:"canvas",narrow:!0,className:Ct.rotate180,"aria-label":(0,s.t)("dashboard.edit-pane.open","Open options pane")})}),at&&(0,R.jsx)(nn.c,{className:Ct.overlayWrapper,defaultSize:{height:"100%",width:"300px"},children:(0,R.jsx)(_r,{element:Nt,editPane:we,isNewElement:un},Gt?.state.key)})]}):(yn?(Kn.primaryProps.style.flexGrow=1,Kn.primaryProps.style.minHeight="unset",Kn.secondaryProps.style.flexGrow=0,Kn.secondaryProps.style.minHeight="min-content"):(Kn.primaryProps.style.minHeight="unset",Kn.secondaryProps.style.minHeight="unset"),(0,R.jsx)("div",{className:Ct.wrapper,children:(0,R.jsxs)("div",{...Kn.containerProps,children:[(0,R.jsx)("div",{...Kn.primaryProps,className:(0,ht.cx)(Kn.primaryProps.className,Ct.paneContent),children:(0,R.jsx)(_r,{element:Nt,editPane:we,isNewElement:un},Gt?.state.key)}),(0,R.jsx)("div",{...Kn.splitterProps,className:(0,ht.cx)(Kn.splitterProps.className,Ct.splitter),"data-edit-pane-splitter":!0}),(0,R.jsxs)("div",{...Kn.secondaryProps,className:(0,ht.cx)(Kn.secondaryProps.className,Ct.paneContent),children:[(0,R.jsxs)("button",{type:"button",onClick:()=>{me.c.dashboardOutlineClicked(),Wn(!yn)},className:(0,ht.cx)(Mt,Ct.outlineCollapseButton),"data-testid":_.Tp.components.PanelEditor.Outline.section,children:[(0,R.jsx)(jn.E,{weight:"medium",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.dashboard-edit-pane-renderer.outline",children:"Outline"})}),(0,R.jsx)(dn.I,{name:yn?"angle-up":"angle-down"})]}),!yn&&(0,R.jsx)("div",{className:Ct.outlineContainer,children:(0,R.jsx)(Ra.P,{showScrollIndicators:!0,children:(0,R.jsx)(Wa,{editPane:we})})})]})]})})):null}function Xr(we){return{wrapper:(0,ht.css)({display:"flex",flexDirection:"column",flex:"1 1 0",marginTop:we.spacing(2),borderLeft:`1px solid ${we.colors.border.weak}`,borderTop:`1px solid ${we.colors.border.weak}`,background:we.colors.background.primary,borderTopLeftRadius:we.shape.radius.default}),overlayWrapper:(0,ht.css)({right:0,bottom:0,top:we.spacing(2),position:"absolute !important",background:we.colors.background.primary,borderLeft:`1px solid ${we.colors.border.weak}`,borderTop:`1px solid ${we.colors.border.weak}`,boxShadow:we.shadows.z3,zIndex:we.zIndex.navbarFixed,flexGrow:1}),paneContent:(0,ht.css)({overflow:"hidden",display:"flex",flexDirection:"column"}),rotate180:(0,ht.css)({rotate:"180deg"}),tabsbar:(0,ht.css)({padding:we.spacing(0,1),margin:we.spacing(.5,0)}),expandOptionsWrapper:(0,ht.css)({display:"flex",flexDirection:"column",padding:we.spacing(2,1,2,0)}),splitter:(0,ht.css)({"&::after":{background:"transparent",transform:"unset",width:"100%",height:"1px",top:"100%",left:"0"}}),outlineCollapseButton:(0,ht.css)({display:"flex",padding:we.spacing(.5,2),gap:we.spacing(1),justifyContent:"space-between",alignItems:"center",background:we.colors.background.secondary,"&:hover":{background:we.colors.action.hover}}),outlineContainer:(0,ht.css)({display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"})}}function Mo({dashboard:we,isEditing:Te,body:He,controls:at}){const yt=(0,Zn.k)(),{editPane:Ct}=we.state,Mt=(0,Oa.of)(Ys,yt??0),[Nt,Gt]=(0,B.dt)();if(!o.$.featureToggles.dashboardNewLayouts)return(0,R.jsx)(it.A,{onSetScrollRef:we.onSetScrollRef,children:(0,R.jsxs)("div",{className:Mt.canvasWrappperOld,children:[(0,R.jsx)(Vt.c,{dashboard:we}),(0,R.jsx)("div",{className:Mt.controlsWrapperSticky,children:at}),(0,R.jsx)("div",{className:Mt.body,children:He})]})});const{containerProps:un,primaryProps:yn,secondaryProps:Wn,splitterProps:qn,splitterState:na,onToggleCollapse:Kn}=(0,Wt.L)({direction:"row",dragPosition:"end",initialSize:330,handleSize:"sm",usePixels:!0,collapseBelowPixels:250,collapsed:Nt});(0,K.useEffect)(()=>{Gt(na.collapsed)},[na.collapsed,Gt]),(0,K.useEffect)(()=>{Te?Ct.enableSelection():Ct.disableSelection()},[Te,Ct]);const{selectionContext:Qn}=(0,i.gn)(Ct,{shouldActivateOrKeepAlive:!0}),ga={};Te||(yn.style.flexGrow=1,yn.style.width="100%",yn.style.minWidth="unset",ga.overflow="unset");const Aa=va=>{va&&we.onSetScrollRef(new it.X(va))};return(0,R.jsx)("div",{...un,style:ga,children:(0,R.jsxs)(kn._.Provider,{value:Qn,children:[(0,R.jsxs)("div",{...yn,className:(0,ht.cx)(yn.className,Mt.canvasWithSplitter),onPointerDown:va=>{va.shiftKey||Ct.clearSelection()},children:[(0,R.jsx)(Vt.c,{dashboard:we}),(0,R.jsx)("div",{className:(0,ht.cx)(!Te&&Mt.controlsWrapperSticky),children:at}),(0,R.jsx)("div",{className:Mt.bodyWrapper,children:(0,R.jsx)("div",{className:(0,ht.cx)(Mt.body,Te&&Mt.bodyEditing),"data-testid":_.Tp.components.DashboardEditPaneSplitter.primaryBody,ref:Aa,children:He})})]}),Te&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{...qn,className:(0,ht.cx)(qn.className,Mt.splitter),"data-edit-pane-splitter":!0}),(0,R.jsx)("div",{...Wn,className:(0,ht.cx)(Wn.className,Mt.editPane),children:(0,R.jsx)(Jr,{editPane:Ct,isEditPaneCollapsed:Nt,onToggleCollapse:Kn,openOverlay:Qn.selected.length>0})})]})]})})}function Ys(we,Te){return{canvasWrappperOld:(0,ht.css)({label:"canvas-wrapper-old",display:"flex",flexDirection:"column",flexGrow:1}),canvasWithSplitter:(0,ht.css)({overflow:"unset",display:"flex",flexDirection:"column",flexGrow:1}),canvasWithSplitterEditing:(0,ht.css)({overflow:"unset"}),bodyWrapper:(0,ht.css)({label:"body-wrapper",display:"flex",flexDirection:"column",flexGrow:1,position:"relative"}),body:(0,ht.css)({label:"body",display:"flex",flexGrow:1,gap:we.spacing(1),boxSizing:"border-box",flexDirection:"column",padding:we.spacing(.125,2,2,2)}),bodyEditing:(0,ht.css)({position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"auto",scrollbarWidth:"thin",scrollbarGutter:"stable",paddingRight:we.spacing(1)}),editPane:(0,ht.css)({flexDirection:"column"}),splitter:(0,ht.css)({"&:after":{display:"none"}}),controlsWrapperSticky:(0,ht.css)({[we.breakpoints.up("md")]:{position:"sticky",zIndex:we.zIndex.activePanel,background:we.colors.background.canvas,top:Te}})}}var gr=e(46942),Zr=e.n(gr),Ir=e(96691);const Ms="--panels-per-row";function Ha({dashboard:we,panelSearch:Te="",panelsPerRow:He}){const{body:at}=we.state,yt=(0,Oa.of)(cr),Ct=(0,K.useMemo)(()=>new js(Te),[Te]);return(0,R.jsx)("div",{className:Zr()(yt.grid,{[yt.perRow]:He!==void 0}),style:{[Ms]:He},children:(0,R.jsx)(Ir.Ob,{value:Ct,singleMatch:!1,dashboard:we,children:(0,R.jsx)(at.Component,{model:at})})})}function cr(we){return{grid:(0,ht.css)({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:we.spacing(1),gridAutoRows:"320px"}),perRow:(0,ht.css)({gridTemplateColumns:`repeat(var(${Ms}, 3), 1fr)`}),noHits:(0,ht.css)({display:"grid",placeItems:"center"})}}class js{constructor(Te){this.searchQuery=Te,this.matchFound=!1}matches(Te){const He=i.jh.interpolate(Te,this.searchQuery).toLowerCase(),yt=Te.interpolate(Te.state.title,void 0,"text").toLowerCase().includes(He);return yt&&(this.matchFound=!0),yt}}function Oo({model:we}){const{controls:Te,overlay:He,editview:at,body:yt,editPanel:Ct,viewPanel:Mt,panelSearch:Nt,panelsPerRow:Gt,isEditing:un,layoutOrchestrator:yn}=we.useState(),{type:Wn}=(0,Q.g)(),qn=(0,Q.zy)(),na=(0,K.useContext)(Nn.j),Kn=(0,Pe.d4)(wn=>wn.navIndex),Qn=we.getPageNav(qn,Kn),ga=Wn==="snapshot"?(0,h.tc)(Kn,"dashboards/snapshots",(0,h.tc)(Kn,"home")):(0,h.tc)(Kn,"dashboards/browse"),Aa=at!==void 0,va=(0,Ir.XF)(Mt);if((0,K.useMemo)(()=>{(Mt||Aa||Ct)&&we.rememberScrollPos()},[Aa,Ct,Mt,we]),(0,K.useEffect)(()=>{!Mt&&!Aa&&!Ct&&we.restoreScrollPos()},[Aa,Ct,Mt,we]),(0,K.useEffect)(()=>{if(na&&un)return na.setReadOnly(!0),()=>{na.setReadOnly(!1)}},[na,un]),at)return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(at.Component,{model:at}),He&&(0,R.jsx)(He.Component,{model:He})]});function Na(){return!Mt&&(Nt||Gt)?(0,R.jsx)(Ha,{panelSearch:Nt,panelsPerRow:Gt,dashboard:we}):va?(0,R.jsx)(Ir.Ob,{value:va,singleMatch:!0,dashboard:we,children:(0,R.jsx)(yt.Component,{model:yt})}):(0,R.jsx)(yt.Component,{model:yt})}return(0,R.jsxs)(R.Fragment,{children:[yn&&(0,R.jsx)(yn.Component,{model:yn}),(0,R.jsxs)(gn.Y,{navModel:ga,pageNav:Qn,layout:Tn.k.Custom,children:[Ct&&(0,R.jsx)(Ct.Component,{model:Ct}),!Ct&&(0,R.jsx)(Mo,{dashboard:we,isEditing:un,controls:Te&&(0,R.jsx)(Te.Component,{model:Te}),body:Na()}),He&&(0,R.jsx)(He.Component,{model:He})]})]})}var qr=e(6262),Ar=e(23656),vr=e(11257),eo=e(48480),yr=e(78282),Ro=e(49e3);class dr{constructor(Te){this._scene=Te}getKeys(){return["editIndex"]}getUrlState(){const Te=this._scene.state;return{editIndex:Te.editIndex!==void 0?String(Te.editIndex):void 0}}updateFromUrl(Te){let He={};typeof Te.editIndex=="string"?He={editIndex:Number(Te.editIndex)}:He={editIndex:void 0},Object.keys(He).length>0&&this._scene.setState(He)}}var bt=e(16817),Kt=e(16780),Ut=e(18857),Jt=e(38669),en=e(66808),sn=e(76792);const Sn="New annotation",In=({annotation:we,editIndex:Te,panels:He,onUpdate:at,onBackToList:yt,onDelete:Ct})=>{const Mt=(0,Oa.of)(On),Nt=(0,K.useMemo)(()=>we.filter?we.filter.exclude?2:1:0,[we.filter]),{value:Gt}=(0,bt.A)(()=>(0,yr.l)().get(we.datasource),[we.datasource]),un=(0,yr.l)().getInstanceSettings(we.datasource),yn=wn=>{at({...we,name:wn.currentTarget.value},Te)},Wn=wn=>{const Ea=(0,eo.p$)(wn);we.datasource?.type!==Ea.type?at({datasource:Ea,builtIn:we.builtIn,enable:we.enable,iconColor:we.iconColor,name:we.name,hide:we.hide,filter:we.filter,mappings:we.mappings,type:we.type},Te):at({...we,datasource:Ea},Te)},qn=wn=>{const Ea=wn.currentTarget;at({...we,[Ea.name]:Ea.type==="checkbox"?Ea.checked:Ea.value},Te)},na=wn=>{at({...we,iconColor:wn},Te)},Kn=wn=>{let Ea=wn.value===0?void 0:{exclude:wn.value===2,ids:we.filter?.ids??[]};at({...we,filter:Ea},Te)},Qn=wn=>{if(!Array.isArray(wn))return;const Ea={exclude:Nt===2,ids:[]};wn.forEach(Os=>Os.value&&Ea.ids.push(Os.value)),at({...we,filter:Ea},Te)},ga=()=>{Ct(Te),yt()},Aa=we.name===Sn,va=(wn,Ea)=>wn.label&&Ea.label?wn.label.toLowerCase().localeCompare(Ea.label.toLowerCase()):-1,Na=(0,K.useMemo)(()=>He.filter(wn=>o.$.panels[wn.state.pluginId]).map(wn=>({value:(0,P.Cs)(wn),label:wn.state.title??`Panel ${(0,P.Cs)(wn)}`,description:wn.state.description,imgUrl:o.$.panels[wn.state.pluginId].info.logos.small})).sort(va)??[],[He]);return(0,R.jsxs)("div",{children:[(0,R.jsxs)(Kt.n,{className:Mt.settingsForm,children:[(0,R.jsx)(se.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-name","Name"),children:(0,R.jsx)(re.p,{"data-testid":_.Tp.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Aa,value:we.name,onChange:yn})}),(0,R.jsx)(se.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-data-source","Data source"),htmlFor:"data-source-picker",children:(0,R.jsx)(sn.sk,{annotations:!0,variables:!0,current:we.datasource,onChange:Wn})}),!Gt?.meta.annotations&&(0,R.jsx)(ee.F,{title:(0,s.t)("dashboard-scene.annotation-settings-edit.title-annotation-support-source","No annotation support for this data source"),severity:"error",children:(0,R.jsx)(s.x6,{i18nKey:"errors.dashboard-settings.annotations.datasource",children:"The selected data source does not support annotations. Please select a different data source."})}),(0,R.jsx)(se.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-enabled","Enabled"),description:(0,s.t)("dashboard-scene.annotation-settings-edit.description-enabled-annotation-query-issued-every-dashboard","When enabled the annotation query is issued every dashboard refresh"),children:(0,R.jsx)(le.S,{name:"enable",id:"enable",value:we.enable,onChange:qn,"data-testid":_.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.enable})}),(0,R.jsx)(se.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-hidden","Hidden"),description:(0,s.t)("dashboard-scene.annotation-settings-edit.description-hidden","Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."),children:(0,R.jsx)(le.S,{name:"hide",id:"hide",value:we.hide,onChange:qn,"data-testid":_.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.hide})}),(0,R.jsx)(se.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-color","Color"),description:(0,s.t)("dashboard-scene.annotation-settings-edit.description-color-annotation-event-markers","Color to use for the annotation event markers"),children:(0,R.jsx)(q.B,{children:(0,R.jsx)(Jt.a,{value:we?.iconColor,onChange:na})})}),(0,R.jsx)(se.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-show-in","Show in"),"data-testid":_.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel,children:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Ut.l6,{options:ia(),value:Nt,onChange:Kn,"data-testid":_.Tp.components.Annotations.annotationsTypeInput}),Nt!==0&&(0,R.jsx)(Ut.KF,{options:Na,value:Na.filter(wn=>we.filter?.ids.includes(wn.value)),onChange:Qn,isClearable:!0,placeholder:(0,s.t)("dashboard-scene.annotation-settings-edit.placeholder-choose-panels","Choose panels"),width:100,closeMenuOnSelect:!1,className:Mt.select,"data-testid":_.Tp.components.Annotations.annotationsChoosePanelInput})]})})]}),(0,R.jsxs)(Kt.n,{children:[(0,R.jsx)("h3",{className:"page-heading",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-edit.query",children:"Query"})}),Gt?.annotations&&un&&(0,R.jsx)(en.A,{datasource:Gt,datasourceInstanceSettings:un,annotation:we,onChange:wn=>at(wn,Te)})]}),(0,R.jsxs)(q.B,{children:[!we.builtIn&&(0,R.jsx)(X.$n,{variant:"destructive",onClick:ga,"data-testid":_.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.delete,children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-edit.delete",children:"Delete"})}),(0,R.jsx)(X.$n,{variant:"secondary",onClick:yt,"data-testid":_.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.apply,children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-edit.back-to-list",children:"Back to list"})})]})]})},On=we=>({settingsForm:(0,ht.css)({maxWidth:we.spacing(60),marginBottom:we.spacing(2)}),select:(0,ht.css)({marginTop:"8px"})});var Fn=(we=>(we[we.AllPanels=0]="AllPanels",we[we.IncludePanels=1]="IncludePanels",we[we.ExcludePanels=2]="ExcludePanels",we))(Fn||{});const ia=()=>[{label:(0,s.t)("dashboard-scene.get-panel-filters.label.all-panels","All panels"),value:0,description:(0,s.t)("dashboard-scene.get-panel-filters.description.annotation-panels-support-annotations","Send the annotation data to all panels that support annotations")},{label:(0,s.t)("dashboard-scene.get-panel-filters.label.selected-panels","Selected panels"),value:1,description:(0,s.t)("dashboard-scene.get-panel-filters.description.annotations-explicitly-listed-panels","Send the annotations to the explicitly listed panels")},{label:(0,s.t)("dashboard-scene.get-panel-filters.label.all-panels-except","All panels except"),value:2,description:(0,s.t)("dashboard-scene.get-panel-filters.description.annotation-following-panels","Do not send annotation data to the following panels")}];var $n=e(44458),ca=e(50201),Ia=e(39302);const Va="Add annotation query",ka=({annotations:we,onNew:Te,onEdit:He,onMove:at,onDelete:yt})=>{const Ct=(0,Oa.of)(ss),Mt=we.length===0||we.length===1&&we[0].builtIn,Nt=un=>un.enable===!1?(0,R.jsx)("em",{className:"muted",children:(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.disabled",values:{annoName:un.name},children:["(Disabled) ","{{annoName}}"]})}):un.builtIn?(0,R.jsx)("em",{className:"muted",children:(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.built-in",values:{annoName:un.name},children:["{{annoName}}"," (Built-in)"]})}):(0,R.jsx)(R.Fragment,{children:un.name}),Gt=(0,yr.l)();return(0,R.jsxs)(q.B,{direction:"column",children:[we.length>0&&(0,R.jsx)("div",{className:Ct.table,children:(0,R.jsxs)("table",{role:"grid",className:"filter-table filter-table--hover",children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.query-name",children:"Query name"})}),(0,R.jsx)("th",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.data-source",children:"Data source"})}),(0,R.jsx)("th",{colSpan:3})]})}),(0,R.jsx)("tbody",{"data-testid":_.Tp.pages.Dashboard.Settings.Annotations.List.annotations,children:we.map((un,yn)=>(0,R.jsxs)("tr",{children:[un.builtIn?(0,R.jsx)("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>He(yn),children:(0,R.jsx)(X.$n,{size:"sm",fill:"text",variant:"secondary",children:Nt(un)})}):(0,R.jsx)("td",{role:"gridcell",className:"pointer",onClick:()=>He(yn),children:(0,R.jsx)(X.$n,{size:"sm",fill:"text",variant:"secondary",children:Nt(un)})}),(0,R.jsx)("td",{role:"gridcell",className:"pointer",onClick:()=>He(yn),children:Gt.getInstanceSettings(un.datasource)?.name||un.datasource?.uid}),(0,R.jsx)("td",{role:"gridcell",style:{width:"1%"},children:yn!==0&&(0,R.jsx)(zs.K,{name:"arrow-up",onClick:()=>at(yn,Ws.UP),tooltip:(0,s.t)("dashboard-scene.annotation-settings-list.tooltip-move-up","Move up")})}),(0,R.jsx)("td",{role:"gridcell",style:{width:"1%"},children:we.length>1&&yn!==we.length-1?(0,R.jsx)(zs.K,{name:"arrow-down",onClick:()=>at(yn,Ws.DOWN),tooltip:(0,s.t)("dashboard-scene.annotation-settings-list.tooltip-move-down","Move down")}):null}),(0,R.jsx)("td",{role:"gridcell",style:{width:"1%"},children:!un.builtIn&&(0,R.jsx)($n.e,{size:"sm",onConfirm:()=>yt(yn),"aria-label":(0,s.t)("dashboard-scene.annotation-settings-list.delete-aria-label",'Delete query with title "{{title}}"',{title:un.name})})})]},`${un.name}-${yn}`))})]})}),Mt&&(0,R.jsx)(q.B,{direction:"column",children:(0,R.jsxs)(ca.p,{variant:"call-to-action",button:(0,R.jsx)(X.$n,{"data-testid":_.Tp.components.CallToActionCard.buttonV2("Add annotation query"),icon:"comment-alt",onClick:Te,size:"lg",children:(0,R.jsx)(s.x6,{i18nKey:"annotations.empty-state.button-title",children:"Add annotation query"})}),message:(0,s.t)("annotations.empty-state.title","There are no custom annotation queries added yet"),children:[(0,R.jsx)(s.x6,{i18nKey:"annotations.empty-state.info-box-content",children:(0,R.jsx)("p",{children:"Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines and icons on all graph panels. When you hover over an annotation icon you can get event text & tags for the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or drag region). These will be stored in Grafana's annotation database."})}),(0,R.jsxs)(s.x6,{i18nKey:"annotations.empty-state.info-box-content-2",children:["Checkout the"," ",(0,R.jsx)(jt.Y,{external:!0,href:"http://docs.grafana.org/reference/annotations/",children:"Annotations documentation"})," ","for more information."]})]})}),!Mt&&(0,R.jsx)(Ia.d,{"data-testid":_.Tp.pages.Dashboard.Settings.Annotations.List.addAnnotationCTAV2,onClick:Te,children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.new-query",children:"New query"})})]})},ss=()=>({table:(0,ht.css)({width:"100%",overflowX:"auto"})});var Ws=(we=>(we[we.UP=-1]="UP",we[we.DOWN=1]="DOWN",we))(Ws||{});class ar extends i.Bs{constructor(){super(...arguments),this._urlSync=new dr(this),this.getDataSourceRefForAnnotation=()=>{const Te=(0,yr.l)().getInstanceSettings(null);if(!Te||!Te.meta.annotations){console.error("Default datasource does not support annotations");return}return(0,eo.p$)(Te)},this.onNew=async()=>{const Te={name:Sn,enable:!0,datasource:this.getDataSourceRefForAnnotation(),iconColor:"red"},He=new Ro.g({query:Te,name:Te.name,isEnabled:!!Te.enable,isHidden:!!Te.hide}),at=ma.b4.getDataLayers(this._dashboard);at.addAnnotationLayer(He),this.setState({editIndex:at.state.annotationLayers.length-1})},this.onEdit=Te=>{this.setState({editIndex:Te})},this.onBackToList=()=>{this.setState({editIndex:void 0})},this.onMove=(Te,He)=>{const at=ma.b4.getDataLayers(this._dashboard),yt=[...at.state.annotationLayers],[Ct]=yt.splice(Te,1);yt.splice(Te+He,0,Ct),at.setState({annotationLayers:yt})},this.onDelete=Te=>{const He=ma.b4.getDataLayers(this._dashboard),at=[...He.state.annotationLayers];at.splice(Te,1),He.setState({annotationLayers:at})},this.onUpdate=(Te,He)=>{const at=this.getDataLayer(He);at.setState({name:Te.name,isEnabled:!!Te.enable,isHidden:!!Te.hide,query:Te}),at.runLayer()}}static{this.Component=ur}getUrlKey(){return"annotations"}get _dashboard(){return(0,P.YQ)(this)}getDataLayer(Te){const at=ma.b4.getDataLayers(this._dashboard).state.annotationLayers[Te];if(!(at instanceof i.tV.g))throw new Error("AnnotationsDataLayer not found at index "+Te);return at}getDashboard(){return this._dashboard}}function ur({model:we}){const Te=we.getDashboard(),{annotationLayers:He}=ma.b4.getDataLayers(Te).useState(),{navModel:at,pageNav:yt}=fr(Te,we.getUrlKey()),{editIndex:Ct}=we.useState(),Mt=ma.b4.getVizPanels(Te),Nt=(0,Ta.O)(He);return Ct!=null&&Ct<He.length?(0,R.jsx)(Ps,{annotationLayer:we.getDataLayer(Ct),pageNav:yt,panels:Mt,editIndex:Ct,navModel:at,dashboard:Te,onUpdate:we.onUpdate,onBackToList:we.onBackToList,onDelete:we.onDelete}):(0,R.jsxs)(gn.Y,{navModel:at,pageNav:yt,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:Te}),(0,R.jsx)(ka,{annotations:Nt,onNew:we.onNew,onEdit:we.onEdit,onDelete:we.onDelete,onMove:we.onMove})]})}function Ps({annotationLayer:we,pageNav:Te,navModel:He,panels:at,editIndex:yt,dashboard:Ct,onUpdate:Mt,onBackToList:Nt,onDelete:Gt}){const{name:un,query:yn}=we.useState(),Wn={text:un,parentItem:Te};return(0,R.jsxs)(gn.Y,{navModel:He,pageNav:Wn,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:Ct}),(0,R.jsx)(In,{annotation:yn,editIndex:yt,panels:at,onUpdate:Mt,onBackToList:Nt,onDelete:Gt})]})}var vs=e(46635),xr=e(39468),Qi=e(88898),Xo=e(86871);class _i extends i.Bs{constructor(){super(...arguments),this._urlSync=new dr(this),this.onNewLink=()=>{this.links=[...this.links,Xo.q],this.setState({editIndex:this.links.length-1})},this.onDelete=Te=>{this.links=[...this.links.slice(0,Te),...this.links.slice(Te+1)],this.setState({editIndex:void 0})},this.onDuplicate=Te=>{this.links=[...this.links,{...Te}]},this.onOrderChange=(Te,He)=>{this.links=vs.moveItemImmutably(this.links,Te,Te+He)},this.onEdit=Te=>{this.setState({editIndex:Te})},this.onUpdateLink=Te=>{const He=this.state.editIndex;He!==void 0&&(this.links=[...this.links.slice(0,He),Te,...this.links.slice(He+1)])},this.onGoBack=()=>{this.setState({editIndex:void 0})}}static{this.Component=ki}getUrlKey(){return"links"}get dashboard(){return(0,P.YQ)(this)}get links(){return this.dashboard.state.links}set links(Te){this.dashboard.setState({links:Te})}}function ki({model:we}){const{editIndex:Te}=we.useState(),He=(0,P.YQ)(we),{links:at}=He.useState(),{navModel:yt,pageNav:Ct}=fr(He,we.getUrlKey()),Mt=Te!==void 0?at[Te]:void 0;return Mt?(0,R.jsx)(Yi,{pageNav:Ct,navModel:yt,link:Mt,dashboard:He,onChange:we.onUpdateLink,onGoBack:we.onGoBack}):(0,R.jsxs)(gn.Y,{navModel:yt,pageNav:Ct,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:He}),(0,R.jsx)(Qi.X,{links:at,onNew:we.onNewLink,onEdit:we.onEdit,onDelete:we.onDelete,onDuplicate:we.onDuplicate,onOrderChange:we.onOrderChange})]})}function Yi({pageNav:we,link:Te,navModel:He,dashboard:at,onChange:yt,onGoBack:Ct}){const Mt={text:(0,s.t)("dashboard-scene.edit-link-view.edit-link-page-nav.text.edit-link","Edit link"),parentItem:we};return(0,R.jsxs)(gn.Y,{navModel:He,pageNav:Mt,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:at}),(0,R.jsx)(xr.d,{link:Te,onUpdate:yt,onGoBack:Ct})]})}var Ji=e(10928),Zo=e(77824),to=e(74475),qo=e(56291),Xi=e(42357),Zi=e(70969),qi=e(10378),Io=e(68079),el=e(15983),tl=e(80465),nl=e(97971),ei=e(76466);function al({dashboard:we,defaultValues:Te,loadedFromRef:He,readOnly:at,isNew:yt,workflowOptions:Ct,targetFolderUID:Mt,targetFolderTitle:Nt,repository:Gt,onDismiss:un,onSuccess:yn}){const Wn=(0,w.mN)({defaultValues:Te}),{editPanel:qn}=we.useState(),{handleSubmit:na,watch:Kn}=Wn,Qn=(0,l.J7)(),[ga,Aa]=Kn(["ref","workflow"]),{data:va,isLoading:Na}=(0,ze.Kw)({name:Te.repo,path:Te.path}),{data:wn}=(0,De.kH)(Mt?{name:Mt}:qi.hT),{createBulkJob:Ea,isLoading:Os}=(0,nl.Z)(),[da,Ja]=(0,ze.tj)(),[ns,Xs]=(0,K.useState)(""),[Dr,Vs]=(0,K.useState)(),[zo,as]=(0,K.useState)(!1),[fs,ps]=(0,K.useState)(),ms=(0,Q.Zp)();(0,K.useEffect)(()=>{const os=va?.resource?.dryRun?.metadata?.annotations?.[D.Y_];if(!os||Mt===void 0)return;const bs=os.split("/").pop(),Kr=`${(0,ei.EM)({targetFolderUID:Mt,targetFolder:wn,repoName:Gt?.name,hidePrependSlash:!0})}${bs}`;Xs(Kr)},[va,wn,Mt,Nt,Gt]);const Rs=os=>{const bs=[(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.api-error","Failed to move dashboard"),os];Qn.publish({type:k.r1.alertError.name,payload:bs})},Cr=async({repo:os,path:bs,comment:rs})=>{if(!os||!Gt){Rs();return}const Kr=(0,ei.EM)({targetFolderUID:Mt,targetFolder:wn,repoName:Gt?.name});if(!Kr){Rs();return}if((0,te.rR)("grafana_provisioning_dashboard_move_submitted",{workflow:Aa,repositoryName:os,repositoryType:Gt?.type??"unknown"}),Aa==="branch"){if(!va?.resource?.file){Qn.publish({type:k.r1.alertError.name,payload:[(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.current-file-not-found","Current dashboard file could not be found")]});return}const $s=ga,vo=rs||`Move dashboard: ${we.state.title}`;try{await da({name:os,path:ns,ref:$s,message:vo,body:va.resource.file,originalPath:bs}).unwrap()}catch(Fl){Rs(Fl)}return}const Ii={action:"move",move:{ref:yt?void 0:He,targetPath:Kr,resources:[{name:we.state.meta.uid??we.state.meta.k8s?.name??"",group:"dashboard.grafana.app",kind:"Dashboard"}]}};try{const $s=await Ea(Gt,Ii);if(!$s.success){Rs();return}$s.job&&(Vs($s.job),as(!0))}catch($s){Rs($s)}},Tr=os=>{we.setState({isDirty:!1}),qn?.onDiscard();const bs=(0,Ye.q)({paramName:"new_pull_request_url",paramValue:Ja?.data?.urls?.newPullRequestURL,repoType:os.repoType});ms(bs)},po=(0,K.useCallback)(os=>{os.status==="success"&&(we.setState({isDirty:!1}),qn?.onDiscard(),ms("/dashboards")),os.status==="error"&&os.error&&ps(os.error)},[we,qn,ms]);(0,$e.J)({request:Ja,workflow:Aa,resourceType:"dashboard",repository:Gt,selectedBranch:ga||He,successMessage:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.success-message","Dashboard moved successfully"),handlers:{onBranchSuccess:(os,bs)=>Tr(bs),onDismiss:un,onError:Rs}});const mo=Os||Ja.isLoading;return(0,R.jsx)(F._,{title:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.drawer-title","Move Provisioned Dashboard"),subtitle:we.state.title,onClose:un,children:zo&&Dr?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(tl.Y,{error:fs}),(0,R.jsx)(el.A,{watch:Dr,jobType:"move",onStatusChange:po})]}):(0,R.jsx)(w.Op,{...Wn,children:(0,R.jsx)("form",{onSubmit:na(Cr),children:(0,R.jsxs)(q.B,{direction:"column",gap:2,children:[at&&(0,R.jsx)(ee.F,{title:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.title-this-repository-is-read-only","This repository is read only"),children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.move-provisioned-dashboard-form.move-read-only-message",children:"This dashboard cannot be moved directly from Grafana because the repository is read-only. To move this dashboard, please move the file in your Git repository."})}),Na&&(0,R.jsxs)(q.B,{alignItems:"center",gap:2,children:[(0,R.jsx)(Io.y,{}),(0,R.jsx)("div",{children:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.loading-dashboard-data","Loading dashboard data")})]}),va?.errors?.length&&va.errors.length>0&&(0,R.jsx)(ee.F,{title:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.file-load-error","Error loading dashboard"),severity:"error",children:va.errors.map((os,bs)=>(0,R.jsx)("div",{children:os},bs))}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.target-path-label","Target path"),children:(0,R.jsx)(re.p,{readOnly:!0,value:ns})}),(0,R.jsx)(pe.x,{resourceType:"dashboard",isNew:yt,readOnly:at,workflow:Aa,workflowOptions:Ct,repository:Gt}),(0,R.jsxs)(q.B,{gap:2,children:[(0,R.jsx)(X.$n,{variant:"secondary",onClick:un,fill:"outline",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.move-provisioned-dashboard-form.cancel-action",children:"Cancel"})}),(0,R.jsx)(X.$n,{variant:"primary",type:"submit",disabled:mo||at||Na||!va?.resource?.file,children:mo?(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.moving","Moving..."):(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.move-action","Move dashboard")})]})]})})})})}function sl({dashboard:we,targetFolderUID:Te,targetFolderTitle:He,onDismiss:at,onSuccess:yt}){const{defaultValues:Ct,loadedFromRef:Mt,readOnly:Nt,workflowOptions:Gt,isNew:un,repository:yn}=(0,H.S)(we);return Ct?(0,R.jsx)(al,{dashboard:we,defaultValues:Ct,loadedFromRef:Mt,readOnly:Nt,repository:yn,isNew:un,workflowOptions:Gt,targetFolderUID:Te,targetFolderTitle:He,onDismiss:at,onSuccess:yt}):null}var sr=e(75570),rl=e(75080);class ol extends i.Bs{constructor(){super(...arguments),this.onTitleChange=Te=>{this._dashboard.setState({title:Te})},this.onDescriptionChange=Te=>{this._dashboard.setState({description:Te})},this.onTagsChange=Te=>{this._dashboard.setState({tags:Te})},this.onFolderChange=async(Te,He)=>{const at={...this._dashboard.state.meta,folderUid:Te||this._dashboard.state.meta.folderUid,folderTitle:He||this._dashboard.state.meta.folderTitle};at.folderUid&&await(0,sr.Q)(at.folderUid),this._dashboard.setState({meta:at})},this.onEditableChange=Te=>{this._dashboard.setState({editable:Te})},this.onTimeZoneChange=Te=>{this.getTimeRange().setState({timeZone:Te})},this.onWeekStartChange=Te=>{this.getTimeRange().setState({weekStart:Te})},this.onRefreshIntervalChange=Te=>{this.getRefreshPicker()?.setState({intervals:Te})},this.onNowDelayChange=Te=>{this.getTimeRange()?.setState({UNSAFE_nowDelay:Te})},this.onHideTimePickerChange=Te=>{this.getDashboardControls()?.setState({hideTimeControls:Te})},this.onLiveNowChange=Te=>{try{const He=this.getLiveNowTimer();Te?He.enable():He.disable()}catch(He){console.error(He)}},this.onTooltipChange=Te=>{this.getCursorSync()?.setState({sync:Te})},this.onPreloadChange=Te=>{this._dashboard.setState({preload:Te})},this.onDeleteDashboard=()=>{},this.onProvisionedFolderChange=async(Te,He)=>{Te!==this._dashboard.state.meta.folderUid&&this.setState({showMoveModal:!0,moveModalProps:{targetFolderUID:Te,targetFolderTitle:He}})},this.onMoveModalDismiss=()=>{this.setState({showMoveModal:!1,moveModalProps:void 0})},this.onMoveSuccess=(Te,He)=>{const at={...this._dashboard.state.meta,folderUid:Te,folderTitle:He};this._dashboard.setState({meta:at}),this.onMoveModalDismiss()}}get _dashboard(){return(0,P.YQ)(this)}getUrlKey(){return"settings"}getDashboard(){return this._dashboard}getTimeRange(){return i.jh.getTimeRange(this._dashboard)}getRefreshPicker(){return this.getDashboardControls().state.refreshPicker}getCursorSync(){return ma.b4.getCursorSync(this._dashboard)}getLiveNowTimer(){const Te=i.jh.findObject(this._dashboard,He=>He instanceof i.Gg.en);if(Te instanceof i.Gg.en)return Te;throw new Error("LiveNowTimer could not be found")}getDashboardControls(){return this._dashboard.state.controls}static{this.Component=il}}function il({model:we}){const Te=we.getDashboard(),{navModel:He,pageNav:at}=fr(Te,we.getUrlKey()),{title:yt,description:Ct,tags:Mt,meta:Nt,editable:Gt}=Te.useState(),{showMoveModal:un,moveModalProps:yn}=we.useState(),{sync:Wn}=we.getCursorSync()?.useState()||{},{timeZone:qn,weekStart:na,UNSAFE_nowDelay:Kn}=we.getTimeRange().useState(),{intervals:Qn}=we.getRefreshPicker().useState(),{hideTimeControls:ga}=we.getDashboardControls().useState(),{enabled:Aa}=we.getLiveNowTimer().useState(),va=[{label:(0,s.t)("dashboard-scene.general-settings-edit-view.editable_options.label.editable","Editable"),value:!0},{label:(0,s.t)("dashboard-scene.general-settings-edit-view.editable_options.label.readonly","Read-only"),value:!1}],Na=[{value:0,label:(0,s.t)("dashboard-scene.general-settings-edit-view.graph_tooltip_options.label.default","Default")},{value:1,label:(0,s.t)("dashboard-scene.general-settings-edit-view.graph_tooltip_options.label.shared-crosshair","Shared crosshair")},{value:2,label:(0,s.t)("dashboard-scene.general-settings-edit-view.graph_tooltip_options.label.shared-tooltip","Shared tooltip")}];return(0,R.jsxs)(gn.Y,{navModel:He,pageNav:at,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:Te}),(0,R.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,R.jsxs)(ae.a,{display:"flex",direction:"column",gap:2,marginBottom:5,children:[(0,R.jsx)(se.D,{noMargin:!0,label:(0,R.jsxs)(q.B,{justifyContent:"space-between",children:[(0,R.jsx)(pt.J,{htmlFor:"title-input",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-settings.general.title-label",children:"Title"})}),o.$.featureToggles.dashgpt&&(0,R.jsx)(Zi.Z,{onGenerate:wn=>we.onTitleChange(wn)})]}),children:(0,R.jsx)(re.p,{id:"title-input",name:"title",value:yt,onChange:wn=>we.onTitleChange(wn.target.value)})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,R.jsxs)(q.B,{justifyContent:"space-between",children:[(0,R.jsx)(pt.J,{htmlFor:"description-input",children:(0,s.t)("dashboard-settings.general.description-label","Description")}),o.$.featureToggles.dashgpt&&(0,R.jsx)(Xi.V,{onGenerate:wn=>we.onDescriptionChange(wn)})]}),children:(0,R.jsx)(Y.f,{id:"description-input",name:"description",value:Ct,onChange:wn=>we.onDescriptionChange(wn.target.value)})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.tags-label","Tags"),children:(0,R.jsx)(Ji.u,{id:"tags-input",tags:Mt,onChange:we.onTagsChange,width:40})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.folder-label","Folder"),children:(0,R.jsx)(de.a,{value:Nt.folderUid,onChange:Te.isManagedRepository()?we.onProvisionedFolderChange:we.onFolderChange,repositoryName:Te.getManagerIdentity(),excludeUIDs:Nt?.folderUid?[Nt.folderUid]:void 0})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.editable-label","Editable"),description:(0,s.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect"),children:(0,R.jsx)(Zo.z,{value:Gt,options:va,onChange:we.onEditableChange})})]}),(0,R.jsx)(qo.p,{onTimeZoneChange:we.onTimeZoneChange,onWeekStartChange:we.onWeekStartChange,onRefreshIntervalChange:we.onRefreshIntervalChange,onNowDelayChange:we.onNowDelayChange,onHideTimePickerChange:we.onHideTimePickerChange,onLiveNowChange:we.onLiveNowChange,refreshIntervals:Qn,timePickerHidden:ga,nowDelay:Kn||"",liveNow:Aa,timezone:qn||"",weekStart:na}),(0,R.jsx)(to.M,{label:(0,s.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0,children:(0,R.jsxs)(q.B,{direction:"column",gap:2,children:[(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,s.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"),children:(0,R.jsx)(Zo.z,{onChange:we.onTooltipChange,options:Na,value:Wn})}),(0,R.jsx)(se.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.panels-preload-label","Preload panels"),description:(0,s.t)("dashboard-settings.general.panels-preload-description","When enabled all panels will start loading as soon as the dashboard has been loaded."),children:(0,R.jsx)(mt.d,{id:"preload-panels-dashboards-toggle",value:Te.state.preload,onChange:wn=>we.onPreloadChange(wn.currentTarget.checked)})})]})}),(0,R.jsx)(ae.a,{marginTop:3,children:Nt.canDelete&&(0,R.jsx)(rl.c,{dashboard:Te})})]}),un&&yn&&(0,R.jsx)(sl,{dashboard:Te,targetFolderUID:yn.targetFolderUID,targetFolderTitle:yn.targetFolderTitle,onDismiss:we.onMoveModalDismiss,onSuccess:we.onMoveSuccess})]})}var ll=e(13956),no=e(8419),ao=e(31119);class hr extends i.Bs{constructor(Te){super({...Te,jsonText:""}),this.onCodeEditorBlur=He=>{this.setState({jsonText:He})},this.onSaveSuccess=async He=>{const at=JSON.parse(this.state.jsonText),yt=this.getDashboard(),Ct=(0,ft.aK)(at);let Mt;if(Ct){const Nt=await(0,ll.n)("v2").getDashboardDTO(He.uid);Mt=(0,ao.dj)(Nt);const Gt=i.Go.cloneSceneObjectState(Mt.state,{key:yt.state.key});yt.pauseTrackingChanges(),yt.setInitialSaveModel(Nt.spec,Nt.metadata),yt.setState(Gt)}else{at.version=He.version,Mt=(0,ra.wM)({dashboard:at,meta:yt.state.meta});const Nt=i.Go.cloneSceneObjectState(Mt.state,{key:yt.state.key});yt.pauseTrackingChanges(),yt.setInitialSaveModel(at,yt.state.meta),yt.setState(Nt)}this.setState({jsonText:this.getJsonText()}),yt.resumeTrackingChanges()},this.addActivationHandler(()=>this.setState({jsonText:this.getJsonText()}))}getUrlKey(){return"json-model"}getDashboard(){return(0,P.YQ)(this)}getSaveModel(){return this.getDashboard().getSaveModel()}getJsonText(){const Te=this.getSaveModel();return(0,no.p)(Te)}static{this.Component=cl}}function cl({model:we}){const{state:Te,onSaveDashboard:He}=Qe(!1),[at,yt]=(0,K.useState)(!1),Ct=we.getDashboard(),{navModel:Mt,pageNav:Nt}=fr(Ct,we.getUrlKey()),Gt=Ct.useState().meta.canSave,{jsonText:un}=we.useState(),yn=async Qn=>{const ga=await He(Ct,{folderUid:Ct.state.meta.folderUid,overwrite:Qn,rawDashboardJSON:JSON.parse(we.state.jsonText),k8s:Ct.state.meta.k8s});yt(!0),ga.status==="success"?(await we.onSaveSuccess(ga),yt(!1)):yt(!0)},Wn=Qn=>(0,R.jsx)(X.$n,{type:"submit",onClick:()=>{yn(Qn)},variant:Qn?"destructive":"primary",children:Qn?(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.json-model-edit-view.save-and-overwrite",children:"'Save and overwrite'"}):(0,R.jsx)(s.x6,{i18nKey:"dashboard-settings.json-editor.save-button",children:"Save changes"})}),qn=(0,R.jsx)(X.$n,{variant:"secondary",onClick:()=>yt(!1),fill:"outline",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.json-model-edit-view.cancel-button.cancel",children:"Cancel"})}),na=(0,Oa.of)(dl);function Kn(Qn){if(Qn&&at){if(ie(Qn))return(0,R.jsxs)(ee.F,{title:(0,s.t)("dashboard-scene.json-model-edit-view.render-save-button-and-error.title-someone-else-has-updated-this-dashboard","Someone else has updated this dashboard"),severity:"error",children:[(0,R.jsx)("p",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.json-model-edit-view.render-save-button-and-error.would-still-dashboard",children:"Would you still like to save this dashboard?"})}),(0,R.jsx)(ae.a,{paddingTop:2,children:(0,R.jsxs)(q.B,{alignItems:"center",children:[qn,Wn(!0)]})})]});if(oe(Qn))return(0,R.jsx)(ye,{saveButton:Wn,cancelButton:qn});if(ue(Qn))return(0,R.jsxs)(ee.F,{title:(0,s.t)("dashboard-scene.json-model-edit-view.render-save-button-and-error.title-plugin-dashboard","Plugin dashboard"),severity:"error",children:[(0,R.jsx)("p",{children:(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.json-model-edit-view.render-save-button-and-error.body-plugin-dashboard",children:["Your changes will be lost when you update the plugin. Use ",(0,R.jsx)("strong",{children:"Save as"})," to create custom version."]})}),(0,R.jsx)(ae.a,{paddingTop:2,children:(0,R.jsx)(q.B,{alignItems:"center",children:Wn(!0)})})]})}return(0,R.jsxs)(R.Fragment,{children:[Qn&&at&&(0,R.jsx)(ee.F,{title:(0,s.t)("dashboard-scene.json-model-edit-view.render-save-button-and-error.title-failed-to-save-dashboard","Failed to save dashboard"),severity:"error",children:(0,R.jsx)("p",{children:Qn.message})}),(0,R.jsx)(q.B,{alignItems:"center",children:Wn(!1)})]})}return(0,R.jsxs)(gn.Y,{navModel:Mt,pageNav:Nt,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:Ct}),(0,R.jsxs)("div",{className:na.wrapper,children:[(0,R.jsx)(s.x6,{i18nKey:"dashboard-settings.json-editor.subtitle",children:"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."}),(0,R.jsx)(wt.B,{width:"100%",value:un,language:"json",showLineNumbers:!0,showMiniMap:!0,containerStyles:na.codeEditor,onBlur:we.onCodeEditorBlur}),Gt&&(0,R.jsx)(ae.a,{paddingTop:2,children:Kn(Te.error)})]})]})}const dl=we=>({wrapper:(0,ht.css)({display:"flex",height:"100%",flexDirection:"column",gap:we.spacing(2)}),codeEditor:(0,ht.css)({flexGrow:1})});var ul=e(34517);class so extends i.Bs{static{this.Component=hl}get _dashboard(){return(0,P.YQ)(this)}getUrlKey(){return"permissions"}getDashboard(){return this._dashboard}}function hl({model:we}){const Te=we.getDashboard(),{uid:He}=Te.useState(),{navModel:at,pageNav:yt}=fr(Te,we.getUrlKey()),Ct=M.TP.hasPermission(vr.w.DashboardsPermissionsWrite);return(0,R.jsxs)(gn.Y,{navModel:at,pageNav:yt,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:Te}),(0,R.jsx)(ul.x,{resource:"dashboards",resourceId:He??"",canSetPermissions:Ct})]})}var ro=e(62635),ti=e(47969);const oo=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function fl(we){return we.map(Te=>({id:Te.state.name,label:`${Te.state.name}`}))}function pl(we,Te){return we.filter(He=>Te.some(at=>at.from===He.id||at.to===He.id))}const ml=we=>{const Te=[];for(const He of we)for(const at of we){if(He===at)continue;He.variableDependency?.hasDependencyOn(at.state.name)&&Te.push({from:He.state.name,to:at.state.name})}return Te};function gl(we,Te){if(!Te)return[];let He=[];for(const at of we){const yt=at.state.name,Ct=(0,ti.Jx)(yt,{key:"model",value:Te},{});Object.keys(Ct).length&&He.push({variable:at,tree:Ct})}return He}function ni(we){const Te=[];for(const He of we){const{variable:at,tree:yt}=He,Ct={variable:at,nodes:[{id:"dashboard",label:(0,s.t)("dashboard-scene.transform-usages-to-network.result.label.dashboard","dashboard")}],edges:[],showGraph:!1};Te.push(ai(Ct,{id:"dashboard",value:yt}))}return Te}const ai=(we,Te)=>{const{id:He,value:at}=Te,{nodes:yt,edges:Ct}=we;if(at&&typeof at=="string"){const Mt=`${Te.id}-${at}`;return yt.push({id:Mt,label:at}),Ct.push({from:Mt,to:He}),we}if(Ao(at)){const Mt=Object.keys(at);for(const Nt of Mt){const Gt=`${Te.id}-${Nt}`;yt.push({id:Gt,label:Nt}),Ct.push({from:Gt,to:He}),we=ai(we,{id:Gt,value:at[Nt]})}return we}return we},vl=(we,Te)=>{const He=Te.find(at=>at.variable.state.name===we);return He&&Ao(He.tree)?si(He.tree):0},si=we=>Object.values(we).reduce((He,at)=>typeof at=="object"?He+si(at):He+1,0);async function Fa(we,Te){return new Promise((He,at)=>{setTimeout(()=>{try{const yt=Ya(we,Te);He(ni(yt))}catch(yt){at(yt)}},200)})}function Ya(we,Te){if(!Te)return[];let He=[];const at=yl(we,Te);for(const yt of at){const Ct=(0,ti.Jx)(yt,{key:"model",value:Te},{});Object.keys(Ct).length&&He.push({variable:yt,tree:Ct})}return He}const yl=(we,Te)=>{oo.lastIndex=0;const He=[],yt=(0,ro.MA)(Te,2).match(oo);if(!yt)return He;for(const Ct of yt){if(!Ct||Ct.indexOf("$__")!==-1||Ct.indexOf("${__")!==-1||Ct.indexOf("$hashKey")!==-1)continue;const Mt=xl(Ct);we.some(Nt=>Nt.state.name===Mt)||He.find(Nt=>Nt===Mt)||Mt&&He.push(Mt)}return He};function xl(we){const Te=ri(we);if(!Te)return;const He=Te.slice(1).find(at=>at!==void 0);if(!(He in{}))return He}const ri=we=>(oo.lastIndex=0,oo.exec(we));function Ao(we){return typeof we=="object"&&we!==null&&!Array.isArray(we)}var oi=e(75505),ii=e(59857),io=e(8515),lo=e(71599),Lo=e(6975),El=e(29),Pl=e(32442),Lr=e(25379),Za=e(49602),bl=e(18387),Dl=e(73829),Cl=e(68577),Fs=e(37674);function li({onChange:we,type:Te}){const He=(0,K.useMemo)(()=>(0,Fs.B$)(),[]),at=(0,K.useMemo)(()=>He.find(yt=>yt.value===Te)??He[0],[He,Te]);return(0,R.jsx)(Cl.v,{name:(0,s.t)("dashboard-scene.variable-type-select.name-variable-type","Variable type"),value:at,options:He,onChange:we,testId:_.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}function Tl({variable:we,onTypeChange:Te,onGoBack:He,onDelete:at}){const yt=(0,Oa.of)(ci),[Ct,Mt]=(0,K.useState)(),{name:Nt,type:Gt,label:un,description:yn,hide:Wn}=we.useState(),qn=(0,Fs.bZ)(Gt)?(0,Fs.CD)(Gt):void 0,[na,Kn]=(0,Ee.A)(async()=>{await(0,oi.s)(we.validateAndUpdate())},[we]),Qn=da=>{da.value&&Te(da.value)},ga=(0,K.useCallback)(da=>{const Ja=(0,Fs.c$)(we,da.currentTarget.value);Ja.errorMessage!==Ct&&Mt(Ja.errorMessage)},[we,Ct]),Aa=da=>{Ct||we.setState({name:da.currentTarget.value})},va=da=>we.setState({label:da.currentTarget.value}),Na=da=>we.setState({description:da.currentTarget.value}),wn=da=>we.setState({hide:da}),Ea=(0,Fs.n_)(we),Os=da=>()=>{(0,te.rR)("Delete variable"),at(Nt),da()};return(0,R.jsxs)("form",{"aria-label":(0,s.t)("dashboard-scene.variable-editor-form.aria-label-variable-editor-form","Variable editor form"),children:[(0,R.jsx)(li,{onChange:Qn,type:Gt}),(0,R.jsx)(Pl.Y,{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-form.general",children:"General"})}),(0,R.jsx)(Za._,{name:(0,s.t)("dashboard-scene.variable-editor-form.name-name","Name"),description:(0,s.t)("dashboard-scene.variable-editor-form.description-template-variable-characters","The name of the template variable. (Max. 50 characters)"),placeholder:(0,s.t)("dashboard-scene.variable-editor-form.placeholder-variable-name","Variable name"),defaultValue:Nt??"",onChange:ga,onBlur:Aa,testId:_.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Dl.M.MaxSize,required:!0,invalid:!!Ct,error:Ct}),(0,R.jsx)(Za._,{name:(0,s.t)("dashboard-scene.variable-editor-form.name-label","Label"),description:(0,s.t)("dashboard-scene.variable-editor-form.description-optional-display-name","Optional display name"),placeholder:(0,s.t)("dashboard-scene.variable-editor-form.placeholder-label-name","Label name"),defaultValue:un??"",onBlur:va,testId:_.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),(0,R.jsx)(Lr.Z,{name:(0,s.t)("dashboard-scene.variable-editor-form.name-description","Description"),defaultValue:yn??"",placeholder:(0,s.t)("dashboard-scene.variable-editor-form.placeholder-descriptive-text","Descriptive text"),onBlur:Na,width:52}),(0,R.jsx)(El.D,{onChange:wn,hide:Wn||ii.rw.hide,type:Gt}),qn&&(0,R.jsx)(qn,{variable:we,onRunQuery:Kn}),Ea&&(0,R.jsx)(bl.j,{options:we.getOptionsForSelect(!1)}),(0,R.jsx)("div",{className:yt.buttonContainer,children:(0,R.jsxs)(q.B,{gap:2,children:[(0,R.jsx)(io.$s,{children:({showModal:da,hideModal:Ja})=>(0,R.jsx)(X.$n,{variant:"destructive",fill:"outline",onClick:()=>{da(lo.u,{title:(0,s.t)("dashboard-scene.variable-editor-form.title.delete-variable","Delete variable"),body:`Are you sure you want to delete: ${Nt}?`,confirmText:(0,s.t)("dashboard-scene.variable-editor-form.confirmText.delete-variable","Delete variable"),onConfirm:Os(Ja),onDismiss:Ja,isOpen:!0})},children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-form.delete",children:"Delete"})})}),(0,R.jsx)(X.$n,{variant:"secondary","data-testid":_.Tp.pages.Dashboard.Settings.Variables.Edit.General.applyButton,onClick:He,children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-form.back-to-list",children:"Back to list"})}),Ea&&(0,R.jsx)(X.$n,{disabled:na.loading,variant:"secondary","data-testid":_.Tp.pages.Dashboard.Settings.Variables.Edit.General.submitButton,onClick:Kn,children:na.loading?(0,R.jsx)(Lo._,{className:yt.loadingPlaceHolder,text:(0,s.t)("dashboard-scene.variable-editor-form.text-running-query","Running query...")}):(0,s.t)("dashbaord-scene.variable-editor-form.run-query","Run query")})]})})]})}const ci=we=>({buttonContainer:(0,ht.css)({marginTop:we.spacing(2)}),loadingPlaceHolder:(0,ht.css)({marginBottom:0})});var jr=e(89332),di=e(84500),ui=e(27690);const Sl=({variables:we})=>{const Te=(0,K.useMemo)(()=>fl(we),[we]),He=(0,K.useMemo)(()=>ml(we),[we]);return He.length?(0,R.jsx)(ui.i,{show:!1,title:(0,s.t)("dashboards.settings.variables.dependencies.title","Dependencies"),nodes:pl(Te,He),edges:He,children:({showModal:at})=>(0,R.jsx)(X.$n,{onClick:()=>{(0,te.rR)("Show variable dependencies"),at()},icon:"channel-add",variant:"secondary",children:(0,R.jsx)(s.x6,{i18nKey:"dashboards.settings.variables.dependencies.button",children:"Show dependencies"})})}):null};var jo=e(45967);const hi=({id:we,usages:Te,isAdhoc:He})=>{const at=(0,K.useMemo)(()=>Te.find(Ct=>(typeof Ct.variable=="string"?Ct.variable:Ct.variable.state.name)===we),[Te,we]);if(Te.length===0||He||!at)return null;const yt=at.nodes.map(Ct=>Ct.label.includes(`$${we}`)?{...Ct,color:"#FB7E81"}:Ct);return(0,R.jsx)(ui.i,{show:!1,title:(0,s.t)("dashboard-scene.variable-usages-button.title-show-usages","Showing usages for: {{variableId}}",{variableId:`$${we}`}),nodes:yt,edges:at.edges,children:({showModal:Ct})=>(0,R.jsx)(zs.K,{onClick:()=>{(0,te.rR)("Show variable usages"),Ct()},name:"code-branch",tooltip:(0,s.t)("dashboard-scene.variable-usages-button.tooltip-show-usages","Show usages")})})};function Ml({index:we,variable:Te,usageTree:He,usagesNetwork:at,onEdit:yt,onDuplicate:Ct,onDelete:Mt}){const Nt=(0,Oa.$j)(),Gt=(0,Oa.of)(pi),un=(0,Fs.Ao)(Te),yn=Te.state,Wn=yn.name,na=vl(Wn,He)>0||yn.type==="adhoc",[Kn,Qn]=(0,K.useState)(!1),ga=va=>()=>{Qn(va)},Aa=()=>{(0,te.rR)("Delete variable"),Mt(Wn)};return(0,R.jsx)(jr.sx,{draggableId:JSON.stringify(Wn),index:we,children:(va,Na)=>(0,R.jsxs)("tr",{ref:va.innerRef,...va.draggableProps,style:{userSelect:Na.isDragging?"none":"auto",background:Na.isDragging?Nt.colors.background.secondary:void 0,...va.draggableProps.style},children:[(0,R.jsx)("td",{role:"gridcell",className:Gt.column,children:(0,R.jsx)(X.$n,{size:"xs",fill:"text",onClick:wn=>{wn.preventDefault(),yt(Wn)},className:Gt.nameLink,"data-testid":_.Tp.pages.Dashboard.Settings.Variables.List.tableRowNameFields(yn.name),children:yn.name})}),(0,R.jsx)("td",{role:"gridcell",className:Gt.definitionColumn,onClick:wn=>{wn.preventDefault(),yt(Wn)},"data-testid":_.Tp.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(yn.name),children:un}),(0,R.jsx)("td",{role:"gridcell",className:Gt.column,children:(0,R.jsxs)("div",{className:Gt.icons,children:[(0,R.jsx)(fi,{passed:na}),(0,R.jsx)(hi,{id:yn.name,isAdhoc:yn.type==="adhoc",usages:at}),(0,R.jsx)(zs.K,{onClick:wn=>{wn.preventDefault(),(0,te.rR)("Duplicate variable"),Ct(Wn)},name:"copy",tooltip:(0,s.t)("dashboard-scene.variable-editor-list-row.tooltip-duplicate-variable","Duplicate variable"),"data-testid":_.Tp.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(yn.name)}),(0,R.jsx)(zs.K,{onClick:wn=>{wn.preventDefault(),Qn(!0)},name:"trash-alt",tooltip:(0,s.t)("dashboard-scene.variable-editor-list-row.tooltip-remove-variable","Remove variable"),"data-testid":_.Tp.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(yn.name)}),(0,R.jsx)(lo.u,{isOpen:Kn,title:(0,s.t)("dashboard-scene.variable-editor-list-row.title-delete-variable","Delete variable"),body:(0,s.t)("dashboard-scene.variable-editor-list-row.body-delete-variable","Are you sure you want to delete: {{variable}}?",{variable:yn.name}),confirmText:(0,s.t)("dashboard-scene.variable-editor-list-row.confirmText-delete-variable","Delete variable"),onConfirm:Aa,onDismiss:ga(!1)}),(0,R.jsx)("div",{...va.dragHandleProps,className:Gt.dragHandle,children:(0,R.jsx)(dn.I,{name:"draggabledots",size:"lg"})})]})})]})})}function fi({passed:we}){const Te=(0,Oa.of)(pi);return we?(0,R.jsx)(jo.m,{content:(0,s.t)("dashboard-scene.variable-check-indicator.content-variable-referenced-other-variables-dashboard","This variable is referenced by other variables or dashboard."),children:(0,R.jsx)(dn.I,{name:"check",className:Te.iconPassed,"aria-label":(0,s.t)("dashboard-scene.variable-check-indicator.aria-label-variable-referenced-other-variables-dashboard","This variable is referenced by other variables or dashboard.")})}):(0,R.jsx)(jo.m,{content:(0,s.t)("dashboard-scene.variable-check-indicator.content-variable-not-referenced-other-variables-dashboard","This variable is not referenced by other variables or dashboard."),children:(0,R.jsx)(dn.I,{name:"exclamation-triangle",className:Te.iconFailed,"aria-label":(0,s.t)("dashboard-scene.variable-check-indicator.aria-label-variable-referenced-dashboard","This variable is not referenced by any variable or dashboard.")})})}function pi(we){return{dragHandle:(0,ht.css)({cursor:"grab",marginLeft:we.spacing(1)}),column:(0,ht.css)({width:"1%"}),nameLink:(0,ht.css)({cursor:"pointer",color:we.colors.primary.text}),definitionColumn:(0,ht.css)({width:"100%",maxWidth:"200px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),iconPassed:(0,ht.css)({color:we.v1.palette.greenBase,marginRight:we.spacing(2)}),iconFailed:(0,ht.css)({color:we.v1.palette.orange,marginRight:we.spacing(2)}),icons:(0,ht.css)({display:"flex",gap:we.spacing(2),alignItems:"center"})}}function Ol({variables:we,usages:Te,usagesNetwork:He,onChangeOrder:at,onDelete:yt,onDuplicate:Ct,onAdd:Mt,onEdit:Nt}){const Gt=(0,Oa.of)(Il),un=qn=>{!qn.destination||!qn.source||((0,te.rR)("Variable drag and drop"),at(qn.source.index,qn.destination.index))},yn=()=>{Mt(),me.c.addVariableButtonClicked({source:"settings_pane"})};return we.filter(di.Ru).length<=0?(0,R.jsx)(Rl,{onAdd:yn}):(0,R.jsxs)(q.B,{direction:"column",gap:3,children:[(0,R.jsxs)("table",{className:Zr()("filter-table","filter-table--hover",Gt.tableContainer),"data-testid":_.Tp.pages.Dashboard.Settings.Variables.List.table,role:"grid",children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-list.variable",children:"Variable"})}),(0,R.jsx)("th",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-list.definition",children:"Definition"})}),(0,R.jsx)("th",{colSpan:5})]})}),(0,R.jsx)(jr.JY,{onDragEnd:un,children:(0,R.jsx)(jr.gL,{droppableId:"variables-list",direction:"vertical",children:qn=>(0,R.jsxs)("tbody",{ref:qn.innerRef,...qn.droppableProps,children:[we.map((na,Kn)=>{if(!(0,di.Ru)(na))return null;const Qn=na.state;return(0,R.jsx)(Ml,{index:Kn,variable:na,onDelete:yt,onDuplicate:Ct,onEdit:Nt,usageTree:Te,usagesNetwork:He},`${Qn.name}-${Kn}`)}),qn.placeholder]})})})]}),(0,R.jsxs)(q.B,{children:[(0,R.jsx)(Sl,{variables:we}),(0,R.jsx)(X.$n,{"data-testid":_.Tp.pages.Dashboard.Settings.Variables.List.newButton,onClick:yn,icon:"plus",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-list.new-variable",children:"New variable"})})]})]})}function Rl({onAdd:we}){return(0,R.jsx)(q.B,{direction:"column",children:(0,R.jsxs)(ca.p,{variant:"call-to-action",button:(0,R.jsx)(X.$n,{"data-testid":_.Tp.components.CallToActionCard.buttonV2("Add variable"),icon:"calculator-alt",onClick:we,size:"lg",children:(0,R.jsx)(s.x6,{i18nKey:"variables.empty-state.button-title",children:"Add variable"})}),message:(0,s.t)("variables.empty-state.title","There are no variables added yet"),children:[(0,R.jsx)("p",{children:(0,R.jsx)(s.x6,{i18nKey:"variables.empty-state.info-box-content",children:"Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server or sensor names in your metric queries you can use variables in their place. Variables are shown as list boxes at the top of the dashboard. These drop-down lists make it easy to change the data being displayed in your dashboard."})}),(0,R.jsxs)(s.x6,{i18nKey:"variables.empty-state.info-box-content-2",children:["Check out the"," ",(0,R.jsx)(jt.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/variables/",children:"Templates and variables documentation"})," ","for more information."]})]})})}const Il=()=>({tableContainer:(0,ht.css)({overflow:"auto"})}),Al=1e3;function mi({variables:we,dashboard:Te}){const[He,at]=(0,K.useState)(!1),[yt,Ct]=(0,K.useState)(0),Mt=(0,Oa.of)(co);(0,K.useEffect)(()=>Ct(Wn=>Wn+1),[we,Te]);const[{loading:Nt,value:Gt},un]=(0,Ee.A)(async()=>{const Wn=Date.now(),qn=await Fa(we,Te),Kn=Date.now()-Wn;return Kn>=Al&&(0,te.rR)("Slow unknown variables expansion",{elapsed:Kn}),Ct(0),qn},[we,Te]),yn=Wn=>{Wn&&((0,te.rR)("Unknown variables section expanded"),yt>0&&un()),at(Wn)};return(0,R.jsx)("div",{className:Mt.container,children:(0,R.jsx)(to.M,{label:(0,R.jsx)(Hs,{}),isOpen:He,onToggle:yn,children:Nt||!Gt?(0,R.jsx)(q.B,{justifyContent:"center",direction:"column",children:(0,R.jsxs)(q.B,{justifyContent:"center",children:[(0,R.jsx)("span",{children:(0,R.jsx)(s.x6,{i18nKey:"variables.unknown-table.loading",children:"Loading..."})}),(0,R.jsx)(Io.y,{})]})}):Gt.length>0?(0,R.jsx)(gi,{usages:Gt}):(0,R.jsx)(aa,{})})})}function Hs(){const we=(0,Oa.of)(co);return(0,R.jsxs)("h5",{children:[(0,R.jsx)(s.x6,{i18nKey:"variables.unknown-table.renamed-or-missing-variables",children:"Renamed or missing variables"}),(0,R.jsx)(jo.m,{content:(0,s.t)("variables.unknown-table.tooltip-renamed-or-missing-variables","Click to expand a list with all variable references that have been renamed or are missing from the dashboard."),children:(0,R.jsx)(dn.I,{name:"info-circle",className:we.infoIcon})})]})}function aa(){return(0,R.jsx)("span",{children:(0,R.jsx)(s.x6,{i18nKey:"variables.unknown-table.no-unknowns",children:"No renamed or missing variables found."})})}function gi({usages:we}){const Te=(0,Oa.of)(co);return(0,R.jsxs)("table",{className:"filter-table filter-table--hover",children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{children:(0,R.jsx)(s.x6,{i18nKey:"variables.unknown-table.variable",children:"Variable"})}),(0,R.jsx)("th",{colSpan:5})]})}),(0,R.jsx)("tbody",{children:we.map(He=>{const at=typeof He.variable=="string"?He.variable:He.variable.state.name;return(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:Te.firstColumn,children:(0,R.jsx)("span",{children:at})}),(0,R.jsx)("td",{className:Te.defaultColumn}),(0,R.jsx)("td",{className:Te.defaultColumn}),(0,R.jsx)("td",{className:Te.defaultColumn}),(0,R.jsx)("td",{className:Te.lastColumn,children:(0,R.jsx)(hi,{id:at,usages:we,isAdhoc:!1})})]},at)})})]})}const co=we=>({container:(0,ht.css)({marginTop:we.spacing(4),paddingTop:we.spacing(4)}),infoIcon:(0,ht.css)({marginLeft:we.spacing(1)}),defaultColumn:(0,ht.css)({width:"1%"}),firstColumn:(0,ht.css)({width:"1%",verticalAlign:"top",color:we.colors.text.maxContrast}),lastColumn:(0,ht.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",textAlign:"right"})});class Br extends i.Bs{constructor(){super(...arguments),this._urlSync=new dr(this),this.getVariableIndex=Te=>this.getVariables().findIndex(at=>at.state.name===Te),this.replaceEditVariable=Te=>{const He=this.state.editIndex??-1,{variables:at}=this.getVariableSet().state;if(!at[He]){console.error("Variable not found");return}const Ct=[...at.slice(0,He),Te,...at.slice(He+1)];this.getVariableSet().setState({variables:Ct})},this.onDelete=Te=>{const He=this.getVariableIndex(Te),{variables:at}=this.getVariableSet().state;if(He===-1){console.error("Variable not found");return}const yt=[...at.slice(0,He),...at.slice(He+1)];this.getVariableSet().setState({variables:yt}),this.setState({editIndex:void 0})},this.onDuplicated=Te=>{const He=this.getVariableIndex(Te),at=this.getVariableSet().state.variables;if(He===-1){console.error("Variable not found");return}const yt=at[He];let Ct=0,Mt=`copy_of_${yt.state.name}`;for(;at.some(un=>un.state.name===Mt);)Ct++,Mt=`copy_of_${yt.state.name}_${Ct}`;const Nt=yt.clone(yt.state);Nt.setState({name:Mt});const Gt=[...at.slice(0,He+1),Nt,...at.slice(He+1)];this.getVariableSet().setState({variables:Gt})},this.onOrderChanged=(Te,He)=>{const at=this.getVariableSet().state.variables;if(!this.getVariableSet())return;if(Te<0||Te>=at.length||He<0||He>=at.length){console.error("Invalid index");return}const yt=[...at],Ct=yt.splice(Te,1);yt.splice(He,0,Ct[0]),this.getVariableSet().setState({variables:yt})},this.onEdit=Te=>{const He=this.getVariableIndex(Te);if(He===-1){console.error("Variable not found");return}this.setState({editIndex:He})},this.onAdd=()=>{const Te=this.getVariables(),He=Te.length,at=(0,Fs.kh)(Te);this.getVariableSet().setState({variables:[...this.getVariables(),at]}),this.setState({editIndex:He})},this.onTypeChange=Te=>{const He=this.state.editIndex??-1,{variables:at}=this.getVariableSet().state,yt=at[He];if(!yt){console.error("Variable not found");return}const{name:Ct,label:Mt}=yt.state,Nt=(0,Fs.No)(Te,{name:Ct,label:Mt});this.replaceEditVariable(Nt)},this.onGoBack=()=>{this.setState({editIndex:void 0})},this.onValidateVariableName=(Te,He)=>{let at=null;Fs.cH.test(Te)||(at="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Fs.mJ.test(Te)||(at="Only word characters are allowed in variable names");const yt=this.getVariableSet().getByName(Te)?.state;return yt&&yt.key!==He&&(at="Variable with the same name already exists"),at?[!0,at]:[!1,null]},this.getSaveModel=()=>(0,Lt.Uy)(this.getDashboard()),this.getUsages=()=>{const Te=this.getSaveModel();return gl(this.getVariables(),Te)},this.getUsagesNetwork=()=>{const Te=this.getUsages();return ni(Te)}}static{this.Component=Ks}getUrlKey(){return"variables"}getDashboard(){return(0,P.YQ)(this)}getVariableSet(){return i.jh.getVariables(this.getDashboard())}getVariables(){return this.getVariableSet().state.variables}}function Ks({model:we}){const Te=we.getDashboard(),{navModel:He,pageNav:at}=fr(Te,we.getUrlKey()),{onDelete:yt,onDuplicated:Ct,onOrderChanged:Mt,onEdit:Nt,onTypeChange:Gt,onGoBack:un,onAdd:yn}=we,{variables:Wn}=we.getVariableSet().useState(),{editIndex:qn}=we.useState(),na=(0,K.useMemo)(()=>we.getUsagesNetwork(),[we]),Kn=(0,K.useMemo)(()=>we.getUsages(),[we]),Qn=we.getSaveModel();if(qn!==void 0&&Wn[qn]){const ga=Wn[qn];if(ga)return(0,R.jsx)(Js,{variable:ga,onTypeChange:Gt,onGoBack:un,pageNav:at,navModel:He,dashboard:Te,onDelete:yt})}return(0,R.jsxs)(gn.Y,{navModel:He,pageNav:at,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:Te}),(0,R.jsx)(Ol,{variables:Wn,usages:Kn,usagesNetwork:na,onDelete:yt,onDuplicate:Ct,onChangeOrder:Mt,onAdd:yn,onEdit:Nt}),(0,R.jsx)(mi,{variables:Wn,dashboard:Qn})]})}function Js({variable:we,pageNav:Te,navModel:He,dashboard:at,onTypeChange:yt,onGoBack:Ct,onDelete:Mt}){const{name:Nt}=we.useState(),Gt={text:Nt,parentItem:Te};return(0,R.jsxs)(gn.Y,{navModel:He,pageNav:Gt,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:at}),(0,R.jsx)(Tl,{variable:we,onTypeChange:yt,onGoBack:Ct,onDelete:Mt},we.state.key)]})}var rr=e(10685),or=e(34753),Ll=e(1199);const vi=({hideModal:we,onRestore:Te,version:He})=>{const at=(0,Ae._2)(),yt=async()=>{await Te(He)?(at.success("Dashboard restored",`Restored from version ${He.version}`),me.c.versionRestoreClicked({version:He.version,confirm:!0})):at.error("Dashboard restore failed",`Failed to restore from version ${He.version}`),we()};return(0,R.jsx)(lo.u,{isOpen:!0,title:(0,s.t)("dashboard-scene.revert-dashboard-modal.title-restore-version","Restore version"),icon:"history",onDismiss:we,onConfirm:yt,body:(0,R.jsx)("p",{children:(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.revert-dashboard-modal.body-restore-version",values:{version:He.version},children:["Are you sure you want to restore the dashboard to version ","{{version}}","? All unsaved changes will be lost."]})}),confirmText:(0,s.t)("dashboard-scene.revert-dashboard-modal.confirmText-restore-version","Yes, restore to version {{version}}",{version:He.version})})};var Bo=e(61371);const yi=({baseInfo:we,newInfo:Te,diffData:He,isNewLatest:at,onRestore:yt})=>{const Ct=(0,Bo.G4)(He.lhs,He.rhs),Mt=(0,Oa.of)(Uo);return(0,R.jsxs)(q.B,{direction:"column",gap:1,children:[(0,R.jsxs)(q.B,{justifyContent:"space-between",alignItems:"center",children:[(0,R.jsxs)(q.B,{alignItems:"center",children:[(0,R.jsxs)("span",{className:(0,ht.cx)(Mt.versionInfo,Mt.noMarginBottom),children:[(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.version-history-comparison.old-version-updated",values:{version:we.version,editor:we.createdBy,timeAgo:we.ageString},children:[(0,R.jsxs)("strong",{children:["Version ","{{version}}"]})," updated by ","{{editor}}"," ","{{timeAgo}}"]}),we.message]}),(0,R.jsx)(dn.I,{name:"arrow-right",size:"sm"}),(0,R.jsxs)("span",{className:Mt.versionInfo,children:[(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.version-history-comparison.new-version-updated",values:{version:Te.version,editor:Te.createdBy,timeAgo:Te.ageString},children:[(0,R.jsxs)("strong",{children:["Version ","{{version}}"]})," updated by ","{{editor}}"," ","{{timeAgo}}"]}),Te.message]})]}),at&&(0,R.jsx)(io.$s,{children:({showModal:Nt,hideModal:Gt})=>(0,R.jsx)(X.$n,{variant:"destructive",icon:"history",onClick:()=>{Nt(vi,{version:we,onRestore:yt,hideModal:Gt})},children:(0,R.jsxs)(s.x6,{i18nKey:"dashboard-scene.version-history.comparison.button-restore",values:{version:we.version},children:["Restore to version ","{{version}}"]})})})]}),Object.entries(Ct).map(([Nt,Gt])=>(0,R.jsx)(or.D,{diffs:Gt,title:Nt},Nt)),(0,R.jsx)(ae.a,{paddingTop:2,children:(0,R.jsx)(to.M,{isOpen:!1,label:(0,s.t)("dashboard-scene.version-history-comparison.label-view-json-diff","View JSON diff"),children:(0,R.jsx)(Ll.M,{oldValue:JSON.stringify(He.lhs,null,2),newValue:JSON.stringify(He.rhs,null,2)})})})]})},Uo=we=>({versionInfo:(0,ht.css)({color:we.colors.text.secondary,fontSize:we.typography.bodySmall.fontSize}),noMarginBottom:(0,ht.css)({marginBottom:0})});var No=e(7923),xi=e(94018);const Ei=({versions:we,canCompare:Te,onCheck:He,onRestore:at})=>{const yt=(0,Oa.of)(lc);return(0,R.jsx)("div",{className:yt.margin,children:(0,R.jsxs)("table",{className:(0,ht.cx)("filter-table",yt.table),children:[(0,R.jsx)("thead",{children:(0,R.jsxs)("tr",{children:[(0,R.jsx)("th",{className:"width-4"}),(0,R.jsx)("th",{className:"width-4",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.version",children:"Version"})}),(0,R.jsx)("th",{className:"width-14",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.date",children:"Date"})}),(0,R.jsx)("th",{className:"width-10",children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.updated-by",children:"Updated by"})}),(0,R.jsx)("th",{children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.notes",children:"Notes"})}),(0,R.jsx)("th",{})]})}),(0,R.jsx)("tbody",{children:we.map((Ct,Mt)=>(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{children:(0,R.jsx)(le.S,{"aria-label":(0,s.t)("dashboard-scene.version-history-table.aria-label-toggle-selection","Toggle selection of version {{version}}",{version:Ct.version}),className:(0,ht.css)({display:"inline"}),checked:Ct.checked,onChange:Nt=>He(Nt,Ct.id),disabled:!Ct.checked&&Te})}),(0,R.jsx)("td",{children:Ct.version}),(0,R.jsx)("td",{children:Ct.createdDateString}),(0,R.jsx)("td",{children:Ct.createdBy}),(0,R.jsx)("td",{children:Ct.message}),(0,R.jsx)("td",{className:"text-right",children:Mt===0?(0,R.jsx)(xi.v,{name:(0,s.t)("dashboard-scene.version-history-table.name-latest","Latest"),colorIndex:17}):(0,R.jsx)(io.$s,{children:({showModal:Nt,hideModal:Gt})=>(0,R.jsx)(X.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Nt(vi,{version:Ct,hideModal:Gt,onRestore:at}),me.c.versionRestoreClicked({version:Ct.version,index:Mt,confirm:!1,version_date:Ct.created})},children:(0,R.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.restore",children:"Restore"})})})})]},Ct.id))})]})})};function lc(we){return{margin:(0,ht.css)({marginBottom:we.spacing(4)}),table:(0,ht.css)({td:{whiteSpace:"normal !important"}})}}const Pi=10;class jl extends i.Bs{constructor(Te){super({...Te,versions:[],isLoading:!0,isAppending:!0,viewMode:"list",isNewLatest:!1,diffData:{lhs:"",rhs:""}}),this._limit=Pi,this._start=0,this._continueToken="",this.fetchVersions=(He=!1)=>{const at=this._dashboard.state.uid;if(!at)return;this.setState({isAppending:He});const yt=this._continueToken?{limit:this._limit,start:this._start,continueToken:this._continueToken}:{limit:this._limit,start:this._start};ea.w.getHistoryList(at,yt).then(Ct=>{this.setState({isLoading:!1,versions:[...He?this.state.versions??[]:[],...this.decorateVersions(Ct.versions)]}),this._start+=this._limit,this._continueToken=Ct.continueToken??""}).catch(Ct=>console.log(Ct)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const He=this.versions.filter(Gt=>Gt.checked),[at,yt]=He,Ct=at.version===this._dashboard.state.version;if(this.setState({isLoading:!0}),!this._dashboard.state.uid)return;let Mt=await ea.w.getDashboardVersion(this._dashboard.state.uid,yt.id),Nt=await ea.w.getDashboardVersion(this._dashboard.state.uid,at.id);this.setState({baseInfo:yt,isLoading:!1,isNewLatest:Ct,newInfo:at,viewMode:"compare",diffData:{lhs:Mt.data,rhs:Nt.data}})},this.reset=()=>{this._continueToken="",this.setState({baseInfo:void 0,diffData:{lhs:"",rhs:""},isNewLatest:!1,newInfo:void 0,versions:this.versions.map(He=>({...He,checked:!1})),viewMode:"list"})},this.onCheck=(He,at)=>{this.setState({versions:this.versions.map(yt=>yt.id===at?{...yt,checked:He.currentTarget.checked}:yt)})},this.addActivationHandler(()=>{this.fetchVersions()})}static{this.Component=Bl}get _dashboard(){return(0,P.YQ)(this)}get diffData(){return this.state.diffData??{lhs:"",rhs:""}}get versions(){return this.state.versions??[]}get limit(){return this._limit}get start(){return this._start}get continueToken(){return this._continueToken}getUrlKey(){return"versions"}getDashboard(){return this._dashboard}getTimeRange(){return i.jh.getTimeRange(this._dashboard)}decorateVersions(Te){const He=this.getTimeRange().getTimeZone();return Te.map(at=>({...at,createdDateString:(0,ya.LE)(at.created,{timeZone:He}),ageString:(0,ya.fq)(at.created,{timeZone:He}),checked:!1}))}}function Bl({model:we}){const Te=we.getDashboard(),{isLoading:He,isAppending:at,viewMode:yt,baseInfo:Ct,newInfo:Mt,isNewLatest:Nt}=we.useState(),{navModel:Gt,pageNav:un}=fr(Te,we.getUrlKey()),yn=we.versions.filter(ga=>ga.checked).length===2,Wn=we.versions.length>1,qn=we.versions.length>=we.limit;let na=we.versions.find(ga=>ga.version===1)||we.versions.length%we.limit!==0||we.continueToken==="";const Kn=(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(No.m,{onClick:we.reset,baseVersion:Ct?.version,newVersion:Mt?.version,isNewLatest:Nt}),He?(0,R.jsx)(uo,{msg:"Fetching changes\u2026"}):(0,R.jsx)(yi,{newInfo:Mt,baseInfo:Ct,isNewLatest:Nt,diffData:we.diffData,onRestore:Te.onRestore})]}),Qn=(0,R.jsxs)(R.Fragment,{children:[He?(0,R.jsx)(uo,{msg:"Fetching history list\u2026"}):(0,R.jsx)(Ei,{versions:we.versions,onCheck:we.onCheck,canCompare:yn,onRestore:Te.onRestore}),at&&(0,R.jsx)(uo,{msg:"Fetching more entries\u2026"}),Wn&&(0,R.jsx)(rr.r,{hasMore:qn,canCompare:yn,getVersions:we.fetchVersions,getDiff:we.getDiff,isLastPage:!!na})]});return(0,R.jsxs)(gn.Y,{navModel:Gt,pageNav:un,layout:Tn.k.Standard,children:[(0,R.jsx)(Vt.c,{dashboard:Te}),yt==="compare"?Kn:Qn]})}const uo=({msg:we})=>(0,R.jsxs)(q.B,{children:[(0,R.jsx)(Io.y,{}),(0,R.jsx)("em",{children:we})]});function fr(we,Te){const He=(0,Q.zy)(),at=(0,Pe.d4)(Nt=>Nt.navIndex),yt=(0,h.tc)(at,"dashboards/browse"),Ct=we.getPageNav(He,at),Mt={text:(0,s.t)("dashboard-scene.use-dashboard-edit-page-nav.page-nav.text.settings","Settings"),url:n.I.getUrlForPartial(He,{editview:"settings",editIndex:null}),children:[],parentItem:Ct};return we.state.meta.canEdit&&(Mt.children.push({text:(0,s.t)("dashboard-settings.general.title","General"),url:n.I.getUrlForPartial(He,{editview:"settings",editIndex:null}),active:Te==="settings"}),Mt.children.push({text:(0,s.t)("dashboard-settings.annotations.title","Annotations"),url:n.I.getUrlForPartial(He,{editview:"annotations",editIndex:null}),active:Te==="annotations"}),Mt.children.push({text:(0,s.t)("dashboard-settings.variables.title","Variables"),url:n.I.getUrlForPartial(He,{editview:"variables",editIndex:null}),active:Te==="variables"}),Mt.children.push({text:(0,s.t)("dashboard-settings.links.title","Links"),url:n.I.getUrlForPartial(He,{editview:"links",editIndex:null}),active:Te==="links"})),we.state.uid&&we.state.meta.canSave&&Mt.children.push({text:(0,s.t)("dashboard-settings.versions.title","Versions"),url:n.I.getUrlForPartial(He,{editview:"versions",editIndex:null}),active:Te==="versions"}),we.state.uid&&we.state.meta.canAdmin&&M.TP.hasPermission(vr.w.DashboardsPermissionsRead)&&Mt.children.push({text:(0,s.t)("dashboard-settings.permissions.title","Permissions"),url:n.I.getUrlForPartial(He,{editview:"permissions",editIndex:null}),active:Te==="permissions"}),Mt.children.push({text:(0,s.t)("dashboard-settings.json-editor.title","JSON Model"),url:n.I.getUrlForPartial(He,{editview:"json-model",editIndex:null}),active:Te==="json-model"}),{navModel:yt,pageNav:Mt}}function Ur(we){switch(we){case"annotations":return new ar({});case"variables":return new Br({});case"links":return new _i({});case"versions":return new jl({});case"json-model":return new hr({});case"permissions":return new so({});case"settings":default:return new ol({})}}var Nr=e(49072),Er=e(1131);class ws{constructor(Te){this._scene=Te}getKeys(){return["inspect","viewPanel","editPanel","editview","autofitpanels","kiosk","shareView"]}getUrlState(){const Te=this._scene.state;return{autofitpanels:this.getAutoFitPanels(),viewPanel:Te.viewPanel,editview:Te.editview?.getUrlKey(),editPanel:Te.editPanel?.getUrlKey()||void 0,kiosk:Te.kioskMode===qr.d9.Full?"true":void 0,shareView:Te.shareView,orgId:M.TP.user.orgId.toString()}}getAutoFitPanels(){if(this._scene.state.body instanceof Er.D)return this._scene.state.body.state.grid.state.UNSAFE_fitPanels?"true":void 0}updateFromUrl(Te){const{viewPanel:He,isEditing:at,editPanel:yt,shareView:Ct}=this._scene.state,Mt={};if(typeof Te.editview=="string"&&this._scene.canEditDashboard()?(Mt.editview=Ur(Te.editview),at||(this._scene.state.editable?setTimeout(()=>this._scene.onEnterEditMode()):Mt.editview=void 0)):Te.hasOwnProperty("editview")&&(Mt.editview=void 0),typeof Te.viewPanel=="string"?Mt.viewPanel=Te.viewPanel:He&&Te.viewPanel===null&&(Mt.viewPanel=void 0),typeof Te.editPanel=="string"){const Gt=(0,P.Uv)(this._scene,Te.editPanel);if(!Gt){console.warn(`Panel ${Te.editPanel} not found`);return}this._scene.state.viewPanel&&(Mt.viewPanel=void 0),at||this._scene.onEnterEditMode();const un=(0,P.iL)(Gt);if(un&&!un?.state.isLoaded){this._waitForLibPanelToLoadBeforeEnteringPanelEdit(Gt,un);return}Mt.editPanel=(0,Ar.L)(Gt)}else yt&&Te.editPanel===null&&(Mt.editPanel=void 0);typeof Te.shareView=="string"?(Mt.shareView=Te.shareView,Mt.overlay=new Nr.j({shareView:Te.shareView})):Ct&&Te.shareView===null&&(Mt.overlay=void 0,Mt.shareView=void 0);const Nt=this._scene.state.body;if(Nt instanceof Er.D){const Gt=typeof Te.autofitpanels=="string";!!Nt.state.grid.state.UNSAFE_fitPanels!==Gt&&Nt.state.grid.setState({UNSAFE_fitPanels:Gt})}typeof Te.kiosk=="string"&&(Te.kiosk==="true"||Te.kiosk==="")&&(Mt.kioskMode=qr.d9.Full),Object.keys(Mt).length>0&&this._scene.setState(Mt)}_waitForLibPanelToLoadBeforeEnteringPanelEdit(Te,He){const at=He.subscribeToState(yt=>{yt.isLoaded&&(this._scene.setState({editPanel:(0,Ar.L)(Te)}),at.unsubscribe())})}}var bi=e(57852),Di=e(12469);class Bs{constructor(){this._binds=[]}addBinding(Te){Di.R.bind(Te.key,He=>{He.preventDefault(),He.stopPropagation(),He.returnValue=!1,Te.onTrigger()},Te.type??"keydown"),this._binds.push({...Te,type:Te.type??"keydown"})}removeAll(){this._binds.forEach(Te=>{Di.R.unbind(Te.key,Te.type)}),this._binds=[]}}var Pr=e(15130),Ci=e(26689),Wo=e(58662),Ul=e(60249);function Nl(we,Te){/^\d+$/.test(Te)&&(Te=(0,P.XA)(parseInt(Te,10)));const He=i.jh.findObject(we,at=>at instanceof i.Eb?Te===at.getPathId():!1);if(He){if(He instanceof i.Eb)return He;throw new Error(`Found panel with key ${Te} but it was not a VizPanel`)}return null}function Fo(we){return we.includes(PATH_ID_SEPARATOR)}var Ko=e(22079),Ti=e(37040);function Si(we){const Te=new Bs;let He=null;const at=we.canEditDashboard(),yt=c.A.subscribe(bi.Tp,Mt=>{typeof Mt.payload.panelId=="string"&&(He=Mt.payload.panelId)});function Ct(Mt,Nt){return()=>{if(He==null)return;const Gt=Nl(Mt,He);if(Gt){Nt(Gt);return}}}return Te.addBinding({key:"v",onTrigger:Ct(we,Mt=>{we.state.viewPanel?d.Ny.partial({viewPanel:void 0}):d.Ny.partial({viewPanel:Mt.getPathId(),editPanel:void 0})})}),Te.addBinding({key:"p u",onTrigger:Ct(we,async Mt=>{const Nt=new Nr.j({shareView:Wo.wr.link,panelRef:Mt.getRef()});we.showModal(Nt)})}),Te.addBinding({key:"p e",onTrigger:Ct(we,async Mt=>{const Nt=new Nr.j({shareView:Wo.wr.embed,panelRef:Mt.getRef()});we.showModal(Nt)})}),Pr.TP.isSignedIn&&o.$.snapshotEnabled&&Pr.TP.hasPermission(vr.w.SnapshotsCreate)&&Te.addBinding({key:"p s",onTrigger:Ct(we,async Mt=>{const Nt=new Nr.j({shareView:Wo.wr.snapshot,panelRef:Mt.getRef()});we.showModal(Nt)})}),Te.addBinding({key:"i",onTrigger:Ct(we,async Mt=>{we.showModal(new Ul.C({panelRef:Mt.getRef(),currentTab:Ci.q.Data}))})}),Te.addBinding({key:"p x",onTrigger:Ct(we,async Mt=>{const Nt=await(0,Ko.Lp)(Mt);Nt&&d.Ny.push(Nt)})}),Te.addBinding({key:"p l",onTrigger:Ct(we,Ti.vR)}),Te.addBinding({key:"d r",onTrigger:()=>i.jh.getTimeRange(we).onRefresh()}),Te.addBinding({key:"t z",onTrigger:()=>{wo(we)}}),Te.addBinding({key:"ctrl+z",onTrigger:()=>{wo(we)}}),Te.addBinding({key:"t a",onTrigger:()=>{ma.b4.getTimePicker(we)?.toAbsolute()}}),Te.addBinding({key:"t left",onTrigger:()=>{Mi(we,"left")}}),Te.addBinding({key:"t right",onTrigger:()=>{Mi(we,"right")}}),Te.addBinding({key:"mod+o",onTrigger:()=>{const Mt=we.state.$behaviors?.find(Nt=>Nt instanceof i.Gg.K2);if(Mt instanceof i.Gg.K2){const Gt=(Mt.state.sync+1)%3;Mt.setState({sync:Gt}),c.A.publish(new k.Tq),i.jh.getTimeRange(we).onRefresh()}}}),at&&(Te.addBinding({key:"e",onTrigger:Ct(we,async Mt=>{if(Mt.getRoot()instanceof fo){const Gt=(0,P.Cs)(Mt);if(we.state.editPanel)d.Ny.push(n.I.getUrlForPartial(d.Ny.getLocation(),{editPanel:void 0}));else{const un=n.I.stripBaseFromUrl((0,Ko.e0)(Gt));d.Ny.push(un)}}})}),Te.addBinding({key:"d s",onTrigger:we.onOpenSettings}),Te.addBinding({key:"mod+s",onTrigger:()=>we.openSaveDrawer({})}),Te.addBinding({key:"p r",onTrigger:Ct(we,Mt=>{we.state.isEditing&&(0,Ti.MI)(we,Mt)})}),Te.addBinding({key:"p d",onTrigger:Ct(we,Mt=>{we.state.isEditing&&we.duplicatePanel(Mt)})}),Te.addBinding({key:"d shift+c",onTrigger:()=>{we.state.body instanceof Er.D&&we.state.body.collapseAllRows()}}),Te.addBinding({key:"d shift+e",onTrigger:()=>{we.state.body instanceof Er.D&&we.state.body.expandAllRows()}})),()=>{Te.removeAll(),yt.unsubscribe()}}function wo(we){ma.b4.getTimePicker(we)?.onZoom()}function Mi(we,Te){const He=ma.b4.getTimePicker(we);He&&(Te==="left"&&He.onMoveBackward(),Te==="right"&&He.onMoveForward())}var Wl=e(25953),br=e(93389),Oi=e(17084),Wr=e(48492),Vo=e(20246);const ho=["title","description","tags","editable","graphTooltip","links","meta","preload"],Fr="systemPanelFilterVar",Ri="systemDynamicRowSizeVar";class fo extends i.Bs{constructor(Te,He="v1"){super({title:(0,s.t)("dashboard-scene.dashboard-scene.title.dashboard","Dashboard"),meta:{},editable:!0,$timeRange:Te.$timeRange??new i.JZ({}),body:Te.body??Er.D.fromVizPanels([],(0,Vo.DP)(Te.preload)),links:Te.links??[],...Te,editPane:new W,layoutOrchestrator:new Hn}),this._urlSync=new ws(this),this._variableDependency=new $o(this),this._renderBeforeActivation=!0,this.onEnterEditMode=()=>{this._initialState=i.Go.cloneSceneObjectState(this.state),this._initialUrlState=d.Ny.getLocation(),this.setState({isEditing:!0}),this.state.body.editModeChanged?.(!0),this._changeTracker.startTrackingChanges()},this.onRestore=async at=>{let yt=await ea.w.restoreDashboard(at.uid,at.id);if(!Number.isInteger(yt.version))return!1;const Ct={dashboard:new E.G(at.data),meta:this.state.meta},Mt=(0,ra.wM)(Ct),Nt=i.Go.cloneSceneObjectState(Mt.state);return Nt.version=yt.version,this.setState(Nt),this.exitEditMode({skipConfirm:!0,restoreInitialState:!1}),!0},this.onOpenSettings=()=>{d.Ny.partial({editview:"settings"})},this.getSnapshotUrl=()=>this.serializer.getSnapshotUrl(),this.onSetScrollRef=at=>{this._scrollRef=at},this.serializer=Gn(He==="v2"?"v2":"v1"),this._changeTracker=new z.l(this),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=Oo}_activationHandler(){let Te=window.__grafanaSceneContext;const He=d.Ny.getLocation().pathname==="/dashboard/new";window.__grafanaSceneContext=this,this._initializePanelSearch(),this.state.isEditing&&(this._initialUrlState=d.Ny.getLocation(),this._changeTracker.startTrackingChanges()),He&&(this.onEnterEditMode(),this.setState({isDirty:!0})),!this.state.meta.isEmbedded&&this.state.uid&&m.t.watch(this.state.uid);let at=()=>{};o.$.publicDashboardAccessToken||(at=Si(this));const yt=new pa(this);return(0,g.UA)().setCurrent(yt),()=>{window.__grafanaSceneContext=Te,at(),this._changeTracker.terminate(),yt.destroy(),m.t.leave()}}_initializePanelSearch(){const Te=i.jh.lookupVariable(Fr,this)?.getValue();typeof Te=="string"&&this.setState({panelSearch:Te});const He=i.jh.lookupVariable(Ri,this)?.getValue();if(typeof He=="string"){const at=Number.parseInt(He,10);this.setState({panelsPerRow:Number.isInteger(at)?at:void 0})}}saveCompleted(Te,He,at){this.serializer.onSaveComplete(Te,He),this._changeTracker.stopTrackingChanges(),this.setState({version:He.version,isDirty:!1,uid:He.uid,id:He.id,meta:{...this.state.meta,uid:He.uid,url:He.url,slug:He.slug,folderUid:at,version:He.version},overlay:void 0}),this.state.editPanel?.dashboardSaved(),this._initialState=i.Go.cloneSceneObjectState(this.state),this._initialUrlState=d.Ny.getLocation(),this._changeTracker.startTrackingChanges()}exitEditMode({skipConfirm:Te,restoreInitialState:He}){if(!this.canDiscard()){console.error("Trying to discard back to a state that does not exist, initialState undefined");return}if(!this.state.isDirty||Te||!(0,P.dQ)(this)||this.managedResourceCannotBeEdited()){this.exitEditModeConfirmed(He||this.state.isDirty);return}c.A.publish(new b.bY({title:(0,s.t)("dashboard-scene.dashboard-scene.title.discard-changes-to-dashboard","Discard changes to dashboard?"),text:"You have unsaved changes to this dashboard. Are you sure you want to discard them?",icon:"trash-alt",yesText:"Discard",onConfirm:()=>{this.exitEditModeConfirmed()}}))}exitEditModeConfirmed(Te=!0){this._changeTracker.stopTrackingChanges();const He=n.I.getUrlForPartial(this._initialUrlState,{editPanel:null,editview:null,inspect:null,inspectTab:null,shareView:null});d.Ny.replace(n.I.stripBaseFromUrl(He)),Te?this.setState({...this._initialState,isEditing:!1}):this.setState({isEditing:!1}),this.state.editPanel&&this.state.editPanel.onDiscard(),this.state.body.editModeChanged?.(!1)}canDiscard(){return this._initialState!==void 0}pauseTrackingChanges(){this._changeTracker.stopTrackingChanges()}resumeTrackingChanges(){this._changeTracker.startTrackingChanges()}openSaveDrawer({saveAsCopy:Te,onSaveSuccess:He}){this.state.isEditing&&this.setState({overlay:new Bn({dashboardRef:this.getRef(),saveAsCopy:Te,onSaveSuccess:He,showVariablesWarning:this.hasVariableErrors()})})}openV2SchemaEditor(){this.setState({overlay:new is({dashboardRef:this.getRef()})})}getPageNav(Te,He){const{meta:at,viewPanel:yt,editPanel:Ct,title:Mt,uid:Nt}=this.state,Gt=!Nt;let un={text:Mt,url:(0,Re.u)({uid:Nt,slug:at.slug,currentQueryParams:Te.search,updateQuery:{viewPanel:null,inspect:null,editview:null,editPanel:null,tab:null,shareView:null},isHomeDashboard:!at.url&&!at.slug&&!Gt&&!at.isSnapshot,isSnapshot:at.isSnapshot})};const{folderUid:yn}=at;if(yn){const Wn=(0,h.tc)(He,`folder-dashboards-${yn}`).main;Wn.id!=="not-found"&&(un={...un,parentItem:Wn})}return yt&&(un={text:(0,s.t)("dashboard-scene.dashboard-scene.text.view-panel","View panel"),parentItem:un,url:n.I.getUrlForPartial(d.Ny.getLocation(),{viewPanel:yt,editPanel:void 0})}),Ct&&(un={text:(0,s.t)("dashboard-scene.dashboard-scene.text.edit-panel","Edit panel"),parentItem:un}),un}getInitialState(){return this._initialState}addPanel(Te){this.state.isEditing||this.onEnterEditMode(),this.state.body.addPanel(Te)}createLibraryPanel(Te,He){const at=Te.clone({$behaviors:[new zt.u({uid:He.uid,name:He.name})]}),yt=Te.parent;if(!(yt instanceof br.U))throw new Error("Trying to replace a panel that doesn't have a parent grid item");yt.setState({body:at})}duplicatePanel(Te){(0,P.h$)(Te).duplicatePanel?.(Te)}copyPanel(Te){if(o.$.featureToggles.dashboardNewLayouts){const yt=Te.parent;if(yt instanceof Wl.X){const Ct=(0,ta.V6)(yt,this),Mt=(0,zn.zd)(yt);(0,Wr.G2)(),u.A.set(p.tH,JSON.stringify({elements:Ct,gridItem:Mt}))}else if(yt instanceof br.U){const Ct=(0,ta.V6)(yt,this),Mt=(0,sa.i2)(yt);(0,Wr.G2)(),u.A.set(p.tH,JSON.stringify({elements:Ct,gridItem:Mt}))}else throw console.error("Trying to copy a panel that is not DashboardGridItem child"),new Error("Trying to copy a panel that is not DashboardGridItem child");return}if(!Te.parent)return;let He=Te.parent;if(!(He instanceof br.U))throw console.error("Trying to copy a panel that is not DashboardGridItem child"),new Error("Trying to copy a panel that is not DashboardGridItem child");const at=(0,Lt.ZB)(He);(0,Wr.G2)(),u.A.set(p.tH,JSON.stringify(at))}pastePanel(){const Te=u.A.get(p.tH),He=JSON.parse(Te),at=new x.a9(He),Ct=(0,ra.tt)(at).state.body;this.addPanel(Ct),u.A.delete(p.tH)}removePanel(Te){(0,P.h$)(Te).removePanel?.(Te)}unlinkLibraryPanel(Te){if(!Te.parent)return;const He=Te.parent;if(!(He instanceof br.U)){console.error("Trying to unlink a lib panel in a layout that is not DashboardGridItem");return}He.state.body.setState({$behaviors:void 0})}showModal(Te){this.setState({overlay:Te})}closeModal(){this.setState({overlay:void 0})}async onStarDashboard(Te){const{meta:He,uid:at}=this.state;if(Te=Te??!!He.isStarred,!!at)try{const yt=await(0,g.UA)().starDashboard(at,Te);this.setState({meta:{...He,isStarred:yt}})}catch(yt){console.error("Failed to star dashboard",yt)}}onShowAddLibraryPanelDrawer(Te){this.setState({overlay:new mn({panelToReplaceRef:Te})})}onCreateNewRow(){return(0,Oi.t)(this.state.body)}onCreateNewPanel(){const Te=(0,v.Sr)(),He=(0,P.O8)();return Te.attachProfilerToPanel(He),this.addPanel(He),He}switchLayout(Te,He){const at=this.state.body,yt=()=>this.setState({body:Te}),Ct=()=>this.setState({body:at});He?yt():B.cc.edit({description:(0,s.t)("dashboard.edit-actions.switch-layout","Switch layout"),source:this,perform:yt,undo:Ct})}getLayout(){return this.state.body}enrichDataRequest(Te){const He=(0,P.YQ)(Te);let at=(0,P.xz)(Te);He.state.isEditing&&He.state.editPanel&&(at=He.state.editPanel.state.panelRef.resolve());let yt=0;return at&&at.state.key&&((0,C.bn)(at)?yt=(0,Ka.t)(at.getPathId()):yt=(0,P.Cs)(at)),{app:a.Jk.Dashboard,dashboardUID:this.state.uid,panelId:yt,panelName:at?.state?.title,panelPluginId:at?.state.pluginId,dashboardTitle:this.state.title}}canEditDashboard(){const{meta:Te}=this.state;return!!(Te.canEdit||Te.canMakeEditable||o.$.viewersCanEdit)}getInitialSaveModel(){return this.serializer.initialSaveModel}setInitialSaveModel(Te,He,at){this.serializer.initializeElementMapping(Te),this.serializer.initializeDSReferencesMapping(Te);const yt=(0,r.v)(Te);this.serializer.initialSaveModel=yt,this.serializer.metadata=He,this.serializer.apiVersion=at}getTrackingInformation(){return this.serializer.getTrackingInformation(this)}getDynamicDashboardsTrackingInformation(){return this.serializer.getDynamicDashboardsTrackingInformation(this)}async onDashboardDelete(){this.setState({isDirty:!1}),d.Ny.replace("/")}getDashboardPanels(){return ma.b4.getVizPanels(this)}getExpressionTypes(Te){const He=Te??this.getSaveModel(),at=new Set;if("panels"in He&&He.panels){for(const yt of He.panels)if(!(!("targets"in yt)||!yt.targets?.length))for(const Ct of yt.targets){const Mt=Ct?.datasource&&typeof Ct.datasource=="object"&&"uid"in Ct.datasource?Ct.datasource.uid:void 0,Nt=Ct?.type;Mt==="__expr__"&&typeof Nt=="string"&&Nt&&at.add(Nt)}}if("elements"in He&&He.elements)for(const yt of Object.values(He.elements)){if(yt.kind!=="Panel")continue;const Ct=yt.spec.data?.spec?.queries;if(Array.isArray(Ct))for(const Mt of Ct){const Nt=Mt?.spec?.query;if(!Nt||typeof Nt!="object")continue;const Gt=Nt.datasource,un=Gt&&typeof Gt=="object"&&"name"in Gt?Gt.name:void 0,yn=Nt.spec,Wn=yn&&typeof yn=="object"&&"type"in yn?yn.type:void 0;un==="__expr__"&&typeof Wn=="string"&&Wn&&at.add(Wn)}}return at.size>0?Array.from(at):void 0}rememberScrollPos(){this._prevScrollPos=this._scrollRef?.scrollTop}restoreScrollPos(){this._prevScrollPos!==void 0&&this._scrollRef?.scrollTo(0,this._prevScrollPos)}getSaveModel(){return this.serializer.getSaveModel(this)}getSaveResource(Te){const{meta:He}=this.state,at=this.getSaveAsModel(Te);return{apiVersion:`dashboard.grafana.app/${this.serializer instanceof An?"v2beta1":"v1beta1"}`,kind:"Dashboard",metadata:{...He.k8s,name:He.uid??He.k8s?.name,generateName:Te.isNew?"d":void 0},spec:at}}getSaveAsModel(Te){return this.serializer.getSaveAsModel(this,Te)}getDashboardChanges(Te,He,at){return this.serializer.getDashboardChangesFromScene(this,{saveTimeRange:Te,saveVariables:He,saveRefresh:at})}getManagerKind(){return this.state.meta.k8s?.annotations?.[D.LH]}getManagerIdentity(){return this.state.meta.k8s?.annotations?.[D.Jw]}isManaged(){return!!this.getManagerKind()}isManagedRepository(){return o.$.featureToggles.provisioning?this.getManagerKind()===D.Sf.Repo:!1}managedResourceCannotBeEdited(){return this.isManaged()&&!this.isManagedRepository()&&!this.state.meta.k8s?.annotations?.[D.Ms]}getPath(){return this.state.meta.k8s?.annotations?.[D.Y_]}hasVariableErrors(){return!!this.state.$variables?.state.variables.find(Te=>!!Te.state.error)}}class $o{constructor(Te){this._dashboard=Te,this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(){return!1}variableUpdateCompleted(Te,He){if(He&&(c.A.publish(new y.og({refreshAll:!0,panelIds:[]})),this._dashboard.publishEvent(new l._)),Te.state.name===Fr){const at=Te.getValue();typeof at=="string"&&this._dashboard.setState({panelSearch:at})}else if(Te.state.name===Ri){const at=Te.getValue();if(typeof at=="string"){const yt=Number.parseInt(at,10);this._dashboard.setState({panelsPerRow:Number.isInteger(yt)?yt:void 0})}}}}},11576:(ne,j,e)=>{"use strict";e.d(j,{H:()=>g,J:()=>r});var n=e(2543),a=e.n(n),s=e(41119),d=e(25229),o=e(44922),l=e(95004),i=e(13227),c=e(35987),p=e(55386),h=e(79118);const u={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function r(x){if(!x||(0,n.isEmpty)(x)||!x.field)return v;const m=x.field,y=m.config??{},{palette:b}=x.theme.visualization;let D=y.unit,f=!!(D&&(u[D]||D.startsWith("time:"))),C=!1;if(m.type===l.PU.time&&!f){if(D="dateTimeAsSystem",f=!0,m.values&&m.values.length>1){let V=m.values[0],z=m.values[m.values.length-1];typeof V=="string"?(V=(0,o.b)(V).unix(),z=(0,o.b)(z).unix()):(V/=1e3,z/=1e3),C=Math.abs(z-V)<60}}else m.type===l.PU.boolean?(0,p.j9)(D)||(D="bool"):!D&&m.type===l.PU.string&&(D="string");const P=D?.startsWith("currency"),T=(0,p.j9)(D),M=m.type===l.PU.number,B=!f&&!P&&!T&&!(D==="locale")&&M&&y.decimals==null,U=(0,p.j_)(D||"none"),W=(0,h.jc)(m,x.theme);return(V,z)=>{const{mappings:R}=y,O=D==="string";f&&typeof V=="string"&&(V=(0,d.yT)(V).valueOf());let N=O?NaN:(0,i.t)(V),F,G,H,K,w,Q;if(R&&R.length>0){const te=(0,c.Zz)(R,V);te&&(te.text!=null&&(F=te.text),te.color!=null&&(K=x.theme.visualization.getColorByName(te.color)),te.icon!=null&&(w=te.icon))}else if(m.type===l.PU.enum){if(V==null)return{text:"",numeric:NaN};const te=+V;if(y&&y.type&&y.type.enum){const{text:q,color:se}=y.type.enum;if(F=q?q[te]:`${V}`,K=se?se[te]:void 0,K==null){const re=b[te%b.length];K=x.theme.visualization.getColorByName(re)}}}if(!Number.isNaN(N)){if(F==null&&!(0,n.isBoolean)(V)){let te;if(B&&z!=null){te=U(N,z,null,x.timeZone,C);const q=+te.text;Number.isNaN(q)||(te.text=q+"")}else te=U(N,y.decimals,null,x.timeZone,C);F=te.text,H=te.suffix,G=te.prefix}if(K==null){const te=W(N);K=te.color,Q=te.percent}}if(F==null&&(0,n.isArray)(V)&&(F=(0,n.join)(V,", ")),F==null&&(F=(0,n.toString)(V),F||(y.noValue?F=y.noValue:F="")),!K){const te=W(-1/0);K=te.color,Q=te.percent}const k={text:F,numeric:N,prefix:G,suffix:H,color:K};return w!=null&&(k.icon=w),Q!=null&&(k.percent=Q),k}}function v(x){return{text:(0,n.toString)(x),numeric:(0,i.t)(x)}}function g(){return x=>({text:(0,s.oE)(x)==="other"?`${JSON.stringify(x,E())}`:`${x}`,numeric:null})}const E=()=>{const x=new WeakSet;return(m,y)=>{if(typeof y=="object"&&y!==null){if(x.has(y))return;x.add(y)}return y}}},11909:(ne,j,e)=>{"use strict";e.d(j,{iL:()=>i,oc:()=>c});var n=e(27489),a=e(25992),s=e(13543),d=e(22051);class o{constructor(){this.panelMetrics=new Map,this.dashboardUID="",this.dashboardTitle="",this.onDashboardInteractionStart=h=>{this.clearMetrics()},this.onDashboardInteractionMilestone=h=>{},this.onDashboardInteractionComplete=h=>{this.sendAnalyticsReport(h)},this.onPanelOperationStart=h=>{this.ensurePanelExists(h.panelKey,h.panelId,h.pluginId,h.pluginVersion)},this.onPanelOperationComplete=h=>{const u=this.panelMetrics.get(h.panelKey);if(!u){console.warn("Panel not found for operation completion:",h.panelKey);return}const r=h.duration||0;switch(h.operation){case"fieldConfig":u.totalFieldConfigTime+=r,u.fieldConfigOperations.push({duration:r,timestamp:h.timestamp});break;case"transform":u.totalTransformationTime+=r,u.transformationOperations.push({duration:r,timestamp:h.timestamp,transformationId:h.metadata.transformationId,success:h.metadata.success});break;case"query":u.totalQueryTime+=r,u.queryOperations.push({duration:r,timestamp:h.timestamp,queryType:h.metadata.queryType});break;case"render":u.totalRenderTime+=r,u.renderOperations.push({duration:r,timestamp:h.timestamp});break;case"plugin-load":u.pluginLoadTime+=r;break}},this.onQueryStart=h=>{},this.onQueryComplete=h=>{}}initialize(h,u){this.panelMetrics.clear(),this.dashboardUID=h,this.dashboardTitle=u}destroy(){this.panelMetrics.clear(),this.dashboardUID="",this.dashboardTitle=""}clearMetrics(){this.panelMetrics.clear()}getPanelMetrics(){return Array.from(this.panelMetrics.values())}ensurePanelExists(h,u,r,v){let g=this.panelMetrics.get(h);return g||(g={panelId:u,panelKey:h,pluginId:r,pluginVersion:v,totalQueryTime:0,totalFieldConfigTime:0,totalTransformationTime:0,totalRenderTime:0,pluginLoadTime:0,queryOperations:[],fieldConfigOperations:[],transformationOperations:[],renderOperations:[]},this.panelMetrics.set(h,g)),g}sendAnalyticsReport(h){const u={duration:h.duration||0,networkDuration:h.networkDuration||0,startTs:h.timestamp,endTs:h.timestamp+(h.duration||0),timeSinceBoot:performance.measure("time_since_boot","frontend_boot_js_done_time_seconds").duration,longFramesCount:h.longFramesCount,longFramesTotalTime:h.longFramesTotalTime,...(0,d.Mb)()},r=this.getPanelMetrics();this.logDashboardAnalyticsEvent(h,u,r),(0,n.rR)("dashboard_render",{interactionType:h.interactionType,uid:this.dashboardUID,...u}),(0,a.l$)("dashboard_render",u,{interactionType:h.interactionType,dashboard:this.dashboardUID,title:this.dashboardTitle})}logDashboardAnalyticsEvent(h,u,r){const v=r?.length||0,g=v?`${v} panels analyzed`:"No panel metrics",E=r?.filter(x=>x.totalQueryTime+x.totalTransformationTime+x.totalRenderTime+x.totalFieldConfigTime+x.pluginLoadTime>s.NR).length||0;(0,d.zk)("DAA",`[ANALYTICS] ${h.interactionType} | ${g}${E>0?` | ${E} slow panels \u26A0\uFE0F`:""}`),(0,d.hM)("DAA","\u{1F4CA} Dashboard (ms):",{duration:Math.round((h.duration||0)*10)/10,network:Math.round((h.networkDuration||0)*10)/10,interactionType:h.interactionType,slowPanels:E}),(0,d.hM)("DAA","\u{1F4C8} Analytics payload:",u),r&&r.length>0&&r.forEach(x=>{const m=x.totalQueryTime+x.totalTransformationTime+x.totalRenderTime+x.totalFieldConfigTime+x.pluginLoadTime,y=m>s.NR,b=y?" \u26A0\uFE0F SLOW":"";(0,d.zk)("DAA",`\u{1F3A8} Panel ${x.pluginId}-${x.panelId}: ${m.toFixed(1)}ms total${b}`),(0,d.hM)("DAA","\u{1F527} Plugin:",{id:x.pluginId,version:x.pluginVersion||"unknown",panelId:x.panelId,panelKey:x.panelKey}),(0,d.hM)("DAA","\u26A1 Performance (ms):",{totalTime:Math.round(m*10)/10,isSlowPanel:y,breakdown:{query:Math.round(x.totalQueryTime*10)/10,transform:Math.round(x.totalTransformationTime*10)/10,render:Math.round(x.totalRenderTime*10)/10,fieldConfig:Math.round(x.totalFieldConfigTime*10)/10,pluginLoad:Math.round(x.pluginLoadTime*10)/10}}),x.queryOperations.length>0&&(0,d.hM)("DAA","\u{1F4CA} Queries:",{count:x.queryOperations.length,details:x.queryOperations.map((D,f)=>({operation:f+1,duration:Math.round(D.duration*10)/10,timestamp:D.timestamp,queryType:D.queryType||"unknown"}))}),x.transformationOperations.length>0&&(0,d.hM)("DAA","\u{1F504} Transformations:",{count:x.transformationOperations.length,details:x.transformationOperations.map((D,f)=>({operation:f+1,duration:Math.round(D.duration*10)/10,timestamp:D.timestamp,transformationId:D.transformationId||"unknown",success:D.success!==!1}))}),x.renderOperations.length>0&&(0,d.hM)("DAA","\u{1F3A8} Renders:",{count:x.renderOperations.length,details:x.renderOperations.map((D,f)=>({operation:f+1,duration:Math.round(D.duration*10)/10,timestamp:D.timestamp}))}),x.fieldConfigOperations.length>0&&(0,d.hM)("DAA","\u2699\uFE0F FieldConfigs:",{count:x.fieldConfigOperations.length,details:x.fieldConfigOperations.map((D,f)=>({operation:f+1,duration:Math.round(D.duration*10)/10,timestamp:D.timestamp}))}),(0,d.KR)()}),(0,d.KR)()}}let l=null;function i(){return l||(l=new o,(0,d.Iz)(l,"DAA")),l}function c(){return i()}},11940:(ne,j,e)=>{"use strict";e.d(j,{w:()=>o,y:()=>d});var n=e(55143),a=e(52161);const{useDiscoverDsFeaturesQuery:s}=n.L;function d(l){const i=(0,a.EV)(l),{currentData:c}=s({rulesSourceName:i});return{hasRuler:!!c?.rulerConfig,rulerConfig:c?.rulerConfig}}function o(l){const{currentData:i}=s({uid:l});return{hasRuler:!!i?.rulerConfig,rulerConfig:i?.rulerConfig}}},11968:(ne,j,e)=>{"use strict";e.d(j,{U:()=>l});var n=e(44248),a=e(29043),s=e(7817),d=e(6262),o=e(65333);function l(i){const c=a.A.getObject(d.us);if(c){const p=new s.G(c.dashboard);for(const h of p.panels){const u=(0,o.tt)(h);i.addPanel(u.state.body)}if(c.dashboard.time){const h=new n.JZ({from:c.dashboard.time.from,to:c.dashboard.time.to}),u=i.state.$timeRange;u&&u.setState({value:h.state.value,from:h.state.from,to:h.state.to})}}a.A.delete(d.us)}},12048:(ne,j,e)=>{"use strict";e.d(j,{b:()=>h});var n=e(5805),a=e(92745),s=e(68143),d=e(64762),o=e(30124);async function l(u,r){const v=i(u),g=await p(v,r);return c(u,g),g}function i(u){let{scopedVars:r,...v}=u.getSaveModel();return v={libraryPanel:{name:u.title,uid:void 0},...v},v}function c(u,r){u.restoreModel({...r.model,configRev:0,libraryPanel:r,title:u.title}),u.hasSavedPanelEditChange=!0,u.refresh()}function p(u,r){return u.libraryPanel?u.libraryPanel&&u.libraryPanel.uid===""?(0,o.d7)(u,r):(0,o.jc)(u):Promise.reject()}const h=()=>{const u=(0,d._2)(),[r,v]=(0,n.default)(async(g,E)=>{try{const x=await l(g,E);return u.success((0,a.t)("library-panels.save.success","Library panel saved")),x}catch(x){throw(0,s.NF)(x)&&(x.isHandled=!0,u.error((0,a.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:x.message??x.data.message}))),x}},[]);return{state:r,saveLibraryPanel:v}}},12066:(ne,j,e)=>{"use strict";e.d(j,{$K:()=>E,Do:()=>h,XC:()=>r,XR:()=>u,dx:()=>p,fX:()=>b,g5:()=>g,oF:()=>v,qN:()=>y});var n=e(65307),a=e(25508),s=e(96221);const d=25,o="notifications",l=`${o}/lastRead`,i={byId:P(),lastRead:Number.parseInt(window.localStorage.getItem(l)??`${Date.now()}`,10)},c=(0,n.Z0)({name:"appNotifications",initialState:i,reducers:{notifyApp:(M,{payload:I})=>{Object.values(M.byId).some(B=>D(I,B)&&B.showing)||(M.byId[I.id]=I,T(M.byId))},hideAppNotification:(M,{payload:I})=>{I in M.byId&&(M.byId[I].showing=!1,T(M.byId))},clearNotification:(M,{payload:I})=>{delete M.byId[I],T(M.byId)},clearAllNotifications:M=>{M.byId={},T(M.byId)},readAllNotifications:(M,{payload:I})=>{M.lastRead=I}}}),{notifyApp:p,hideAppNotification:h,clearNotification:u,clearAllNotifications:r,readAllNotifications:v}=c.actions,g=c.reducer,E=M=>M.lastRead,x=M=>M.byId,m=(0,a.Mz)(x,M=>Object.values(M).sort((I,B)=>B.timestamp-I.timestamp)),y=(0,a.Mz)(m,M=>M.filter(f)),b=(0,a.Mz)(x,M=>Object.values(M).filter(I=>I.showing));function D(M,I){return M.icon===I.icon&&M.severity===I.severity&&M.text===I.text&&M.title===I.title}function f(M){return M.severity===s.Qd.Warning||M.severity===s.Qd.Error}function C(M){return typeof M=="object"&&M!==null&&"id"in M&&"icon"in M&&"title"in M&&"text"in M}function P(){const M=window.localStorage.getItem(o);if(!M)return{};const I=JSON.parse(M);return Object.values(I).every(B=>C(B))?I:{}}function T(M){const I=Object.values(M).filter(f).sort((B,U)=>U.timestamp-B.timestamp).slice(0,d).reduce((B,U)=>(B[U.id]={id:U.id,severity:U.severity,icon:U.icon,title:U.title,text:U.text,traceId:U.traceId,timestamp:U.timestamp,showing:!1},B),{});try{window.localStorage.setItem(o,JSON.stringify(I))}catch(B){console.error("Unable to persist notifications to local storage"),console.error(B)}}},12161:(ne,j,e)=>{"use strict";e.d(j,{l:()=>d});var n=e(74848),a=e(92745),s=e(71599);const d=({isOpen:o,onConfirm:l,onDismiss:i})=>(0,n.jsx)(s.u,{title:(0,a.t)("dashboard-scene.unlink-modal.title-really-unlink-panel","Do you really want to unlink this panel?"),icon:"question-circle",body:(0,a.t)("dashboard-scene.unlink-modal.body-unlink-panel","If you unlink this panel, you will be able to edit it without affecting any other dashboards. However, once you make a change you will not be able to revert to its original reusable panel."),confirmText:(0,a.t)("dashboard-scene.unlink-modal.confirmText-yes-unlink","Yes, unlink"),onConfirm:()=>{l(),i()},onDismiss:i,isOpen:o})},12173:(ne,j,e)=>{"use strict";e.d(j,{A:()=>h});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(96540),l=e(84140),i=e(63142),c=e(63527);const p=(0,o.forwardRef)(({color:v,onChange:g,isClearable:E=!1,onClick:x,onBlur:m,disabled:y,buttonAriaLabel:b,...D},f)=>{const[C,P]=(0,o.useState)(v),[T,M]=(0,o.useState)(v),I=(0,o.useMemo)(()=>(0,s.debounce)(g,100),[]);(0,o.useEffect)(()=>{const W=(0,l.A)(v);W.isValid()&&v!==T&&(P(W.toString()),M(v))},[v,T]);const B=W=>{const{value:V}=W.currentTarget;if(P(V),V===""&&E){I(V);return}const z=(0,l.A)(V);z.isValid()&&I(z.toString())},U=W=>{(0,l.A)(C).isValid()||P(v),m?.(W)};return(0,n.jsx)(c.p,{...D,value:C,onChange:B,disabled:y,onClick:x,onBlur:U,addonBefore:(0,n.jsx)(u,{onClick:x,ariaLabel:b,disabled:y,color:v}),ref:f})});p.displayName="ColorInput";const h=p,u=({color:v,onClick:g,disabled:E,ariaLabel:x})=>{const m=(0,i.of)(r);return(0,n.jsx)("button",{type:"button",onClick:g,"aria-label":x,disabled:E||!g,className:(0,a.cx)(m,(0,a.css)({backgroundColor:v}))})},r=v=>(0,a.css)({height:"100%",width:`${v.spacing.gridSize*4}px`,borderRadius:`${v.shape.radius.default} 0 0 ${v.shape.radius.default}`,border:`1px solid ${v.colors.border.medium}`})},12241:(ne,j,e)=>{"use strict";e.d(j,{S:()=>E,V:()=>x});var n=e(38809),a=e(64394),s=e(83340),d=e(95004),o=e(92745),l=e(739),i=e(81082),c=e(44017),p=e(45013),h=e(99555),u=e(17914),r=e(32471),v=e(76548),g=e(99709);const E={drawStyle:l.GR.Line,lineInterpolation:l.dx.Linear,lineWidth:1,fillOpacity:0,gradientMode:l.on.None,barAlignment:l.Nj.Center,barWidthFactor:.6,stacking:{mode:l.gs.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1,showValues:!1};function x(m,y=!0){const b=(0,h.P)(),D=[(0,o.t)("timeseries.config.get-graph-field-config.category-graph-styles","Graph styles")];return{standardOptions:{[s.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:a.Y.PaletteClassic}},[s.uo.Links]:{settings:{showOneClick:!0}},[s.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:f=>{f.addRadio({path:"drawStyle",name:(0,o.t)("timeseries.config.get-graph-field-config.name-style","Style"),category:D,defaultValue:m.drawStyle,settings:{options:b.drawStyle}}).addRadio({path:"lineInterpolation",name:(0,o.t)("timeseries.config.get-graph-field-config.name-line-interpolation","Line interpolation"),category:D,defaultValue:m.lineInterpolation,settings:{options:b.lineInterpolation},showIf:C=>C.drawStyle===l.GR.Line}).addRadio({path:"barAlignment",name:(0,o.t)("timeseries.config.get-graph-field-config.name-bar-alignment","Bar alignment"),category:D,defaultValue:m.barAlignment,settings:{options:b.barAlignment},showIf:C=>C.drawStyle===l.GR.Bars}).addSliderInput({path:"barWidthFactor",name:(0,o.t)("timeseries.config.get-graph-field-config.name-bar-width-factor","Bar width factor"),category:D,defaultValue:m.barWidthFactor,settings:{min:.1,max:1,step:.1,ariaLabelForHandle:(0,o.t)("timeseries.config.get-graph-field-config.aria-label-bar-width-factor","Bar width factor")},showIf:C=>C.drawStyle===l.GR.Bars}).addSliderInput({path:"lineWidth",name:(0,o.t)("timeseries.config.get-graph-field-config.name-line-width","Line width"),category:D,defaultValue:m.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:(0,o.t)("timeseries.config.get-graph-field-config.aria-label-line-width","Line width")},showIf:C=>C.drawStyle!==l.GR.Points}).addSliderInput({path:"fillOpacity",name:(0,o.t)("timeseries.config.get-graph-field-config.name-fill-opacity","Fill opacity"),category:D,defaultValue:m.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:(0,o.t)("timeseries.config.get-graph-field-config.aria-label-fill-opacity","Fill opacity")},showIf:C=>C.drawStyle!==l.GR.Points}).addRadio({path:"gradientMode",name:(0,o.t)("timeseries.config.get-graph-field-config.name-gradient-mode","Gradient mode"),category:D,defaultValue:b.fillGradient[0].value,settings:{options:b.fillGradient},showIf:C=>C.drawStyle!==l.GR.Points}).addFieldNamePicker({path:"fillBelowTo",name:(0,o.t)("timeseries.config.get-graph-field-config.name-fill-below-to","Fill below to"),category:D,hideFromDefaults:!0,settings:{filter:C=>C.type===d.PU.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:(0,o.t)("timeseries.config.get-graph-field-config.name-line-style","Line style"),category:D,showIf:C=>C.drawStyle===l.GR.Line,editor:r.F,override:r.F,process:n.hS,shouldApply:C=>C.type===d.PU.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:(0,o.t)("timeseries.config.get-graph-field-config.name-connect-nulls","Connect null values"),category:D,defaultValue:!1,editor:v.e,override:v.e,showIf:C=>C.drawStyle===l.GR.Line,shouldApply:C=>C.type!==d.PU.time,process:n.hS,settings:{isTime:y}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:(0,o.t)("timeseries.config.get-graph-field-config.name-disconnect-values","Disconnect values"),category:D,defaultValue:!1,editor:u.Z,override:u.Z,showIf:C=>C.drawStyle===l.GR.Line,shouldApply:C=>C.type!==d.PU.time,process:n.hS,settings:{isTime:y}}).addRadio({path:"showPoints",name:(0,o.t)("timeseries.config.get-graph-field-config.name-show-points","Show points"),category:D,defaultValue:b.showPoints[0].value,settings:{options:b.showPoints},showIf:C=>C.drawStyle!==l.GR.Points}).addBooleanSwitch({path:"showValues",name:(0,o.t)("timeseries.config.get-graph-field-config.name-show-values","Show values"),category:D,defaultValue:!1,showIf:C=>C.showPoints!==l.yL.Never||C.drawStyle===l.GR.Points}).addSliderInput({path:"pointSize",name:(0,o.t)("timeseries.config.get-graph-field-config.name-point-size","Point size"),category:D,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:(0,o.t)("timeseries.config.get-graph-field-config.aria-label-point-size","Point size")},showIf:C=>C.showPoints!==l.yL.Never||C.drawStyle===l.GR.Points}),i.I(f,m.stacking,D),f.addSelect({category:D,name:(0,o.t)("timeseries.config.get-graph-field-config.name-transform","Transform"),path:"transform",settings:{options:[{label:(0,o.t)("timeseries.config.get-graph-field-config.transform-options.label-constant","Constant"),value:l.NU.Constant,description:(0,o.t)("timeseries.config.get-graph-field-config.transform-options.description-constant","The first value will be shown as a constant line")},{label:(0,o.t)("timeseries.config.get-graph-field-config.transform-options.label-style","Negative Y"),value:l.NU.NegativeY,description:(0,o.t)("timeseries.config.get-graph-field-config.transform-options.description-style","Flip the results to negative values on the y axis")}],isClearable:!0},hideFromDefaults:!0}),c.rg(f,m),p.e(f),f.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:(0,o.t)("timeseries.config.get-graph-field-config.name-show-thresholds","Show thresholds"),category:[(0,o.t)("timeseries.config.get-graph-field-config.category-thresholds","Thresholds")],defaultValue:{mode:l.Ly.Off},settings:{options:b.thresholdsDisplayModes},editor:g.D,override:g.D,process:n.hS,shouldApply:()=>!0})}}}},12282:(ne,j,e)=>{"use strict";e.d(j,{HD:()=>s,Q$:()=>n.Q$,U3:()=>n.U3,ie:()=>d,ti:()=>n.ti});var n=e(7795),a=(o=>(o.Stream="streams",o.Vector="vector",o.Matrix="matrix",o))(a||{}),s=(o=>(o.Indexed="I",o.StructuredMetadata="S",o.Parsed="P",o))(s||{}),d=(o=>(o[o.LabelNames=0]="LabelNames",o[o.LabelValues=1]="LabelValues",o))(d||{})},12434:(ne,j,e)=>{"use strict";e.d(j,{F7:()=>p,Xe:()=>l,yk:()=>c});var n=e(4571),a=e(58662),s=e(29043),d=e(23289);const o={useAbsoluteTimeRange:!0,useShortUrl:!0,theme:"current"},l=async(h,u)=>{const{useAbsoluteTimeRange:r,useShortUrl:v,theme:g}=c();return d.c.shareLinkCopied({currentTimeRange:r,theme:g,shortenURL:v,shareResource:(0,a.hD)(u?.getRef())}),await(0,n.Sp)(h,{useAbsoluteTimeRange:r,theme:g,useShortUrl:v})},i="grafana.dashboard.link.shareConfiguration";function c(){return s.A.exists(i)&&s.A.getObject(i)||o}function p(h){s.A.setObject(i,h)}},12469:(ne,j,e)=>{"use strict";e.d(j,{R:()=>y});let n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},o=null;for(let b=1;b<20;++b)n[111+b]="f"+b;for(let b=0;b<=9;++b)n[b+96]=b.toString();function l(b){if(b.type==="keypress"){let D=String.fromCharCode(b.which);return b.shiftKey||(D=D.toLowerCase()),D}return n[b.which]?n[b.which]:a[b.which]?a[b.which]:String.fromCharCode(b.which).toLowerCase()}function i(b,D){return b.sort().join(",")===D.sort().join(",")}function c(b){let D=[];return b.shiftKey&&D.push("shift"),b.altKey&&D.push("alt"),b.ctrlKey&&D.push("ctrl"),b.metaKey&&D.push("meta"),D}function p(b){if(b.preventDefault){b.preventDefault();return}b.returnValue=!1}function h(b){if(b.stopPropagation){b.stopPropagation();return}b.cancelBubble=!0}function u(b){return b==="shift"||b==="ctrl"||b==="alt"||b==="meta"}function r(){if(!o){o={};for(let b in n){const D=parseInt(b,10);D>95&&D<112||n.hasOwnProperty(b)&&(o[n[b]]=b)}}return o}function v(b,D,f){return f||(f=r()[b]?"keydown":"keypress"),f==="keypress"&&D.length&&(f="keydown"),f}function g(b){return b==="+"?["+"]:(b=b.replace(/\+{2}/g,"+plus"),b.split("+"))}function E(b,D){let f,C,P,T=[];for(f=g(b),P=0;P<f.length;++P)C=f[P],d[C]&&(C=d[C]),D&&D!=="keypress"&&s[C]&&(C=s[C],T.push("shift")),u(C)&&T.push(C);if(!C)throw new Error("Unable to get key");return D=v(C,T,D),{key:C,modifiers:T,action:D}}function x(b,D){return b===null||b===document?!1:b===D?!0:x(b.parentNode,D)}class m{constructor(D){this._callbacks={},this._directMap={},this._sequenceLevels={},this._resetTimer=void 0,this._ignoreNextKeyup=!1,this._ignoreNextKeypress=!1,this._nextExpectedAction=!1,this._globalCallbacks={},this._resetSequences=f=>{f=f||{};let C=!1,P;for(P in this._sequenceLevels){if(f[P]){C=!0;continue}this._sequenceLevels[P]=0}C||(this._nextExpectedAction=!1)},this._getMatches=(f,C,P,T,M,I)=>{let B,U,W=[],V=P.type;if(!this._callbacks[f])return[];for(V==="keyup"&&u(f)&&(C=[f]),B=0;B<this._callbacks[f].length;++B)if(U=this._callbacks[f][B],!(!T&&U.seq&&this._sequenceLevels[U.seq]!==U.level)&&V===U.action&&(V==="keypress"&&!P.metaKey&&!P.ctrlKey||i(C,U.modifiers))){let z=!T&&U.combo===M,R=T&&U.seq===T&&U.level===I;(z||R)&&this._callbacks[f].splice(B,1),W.push(U)}return W},this._fireCallback=(f,C,P,T)=>{const M=C.target||C.srcElement;M&&M instanceof HTMLElement&&this.stopCallback(C,M,P,T)||f(C,P)===!1&&(p(C),h(C))},this._handleKey=(f,C,P)=>{let T=this._getMatches(f,C,P),M,I={},B=0,U=!1;for(M=0;M<T.length;++M)T[M].seq&&(B=Math.max(B,T[M].level??0));for(M=0;M<T.length;++M){const V=T[M].seq;if(V){if(T[M].level!==B)continue;U=!0,I[V]=1,this._fireCallback(T[M].callback,P,T[M].combo,V);const z=V.lastIndexOf(f),R=V.slice(0,z);for(const[O,N]of Object.entries(this._sequenceLevels))N>0&&O.startsWith(R)&&(I[O]=1);continue}U||this._fireCallback(T[M].callback,P,T[M].combo)}for(const V of this._callbacks[f]??[])V.action===P.type&&V.seq&&V.level===0&&(I[V.seq]=1);let W=P.type==="keypress"&&this._ignoreNextKeypress;P.type===this._nextExpectedAction&&!u(f)&&!W&&this._resetSequences(I),this._ignoreNextKeypress=U&&P.type==="keydown"},this._handleKeyEvent=f=>{if(!(f instanceof KeyboardEvent))throw new Error("Didn't get a KeyboardEvent");const C=f;if(C.repeat)return;typeof C.which!="number"&&(C.which=C.keyCode);let P=l(C);if(P){if(C.type==="keyup"&&this._ignoreNextKeyup===P){this._ignoreNextKeyup=!1;return}this.handleKey(P,c(C),C)}},this._resetSequenceTimer=()=>{clearTimeout(this._resetTimer),this._resetTimer=setTimeout(this._resetSequences,1e3)},this._bindSequence=(f,C,P,T)=>{this._sequenceLevels[f]=0;const M=B=>()=>{this._nextExpectedAction=B,++this._sequenceLevels[f],this._resetSequenceTimer()},I=B=>{this._fireCallback(P,B,f),T!=="keyup"&&(this._ignoreNextKeyup=l(B)),this._resetSequenceTimer()};for(let B=0;B<C.length;++B){let W=B+1===C.length?I:M(T||E(C[B+1]).action);this._bindSingle(C[B],W,T,f,B)}},this._bindSingle=(f,C,P,T,M)=>{this._directMap[f+":"+P]=C,f=f.replace(/\s+/g," ");let I=f.split(" "),B;if(I.length>1){this._bindSequence(f,I,C,P);return}B=E(f,P),this._callbacks[B.key]=this._callbacks[B.key]||[];const U={type:B.action,metaKey:!1,ctrlKey:!1};this._getMatches(B.key,B.modifiers,U,T,f,M);const W={callback:C,modifiers:B.modifiers,action:B.action,seq:T,level:M,combo:f};this._callbacks[B.key][T?"unshift":"push"](W)},this._bindMultiple=(f,C,P)=>{for(let T=0;T<f.length;++T)this._bindSingle(f[T],C,P)},this.bind=(f,C,P)=>{let T=this;return f=f instanceof Array?f:[f],this._bindMultiple(f,C,P),T},this.unbind=(f,C)=>this.bind(f,function(){},C),this.bindGlobal=(f,C,P)=>{if(this.bind(f,C,P),f instanceof Array){for(let T=0;T<f.length;T++)this._globalCallbacks[f[T]]=!0;return}this._globalCallbacks[f]=!0},this.unbindGlobal=(f,C)=>{if(this.unbind(f,C),f instanceof Array){for(let P=0;P<f.length;P++)this._globalCallbacks[f[P]]=!1;return}this._globalCallbacks[f]=!1},this.trigger=(f,C)=>{let P=this;return P._directMap[f+":"+C]&&P._directMap[f+":"+C]({},f),P},this.reset=()=>(this._callbacks={},this._directMap={},this),this.stopCallback=(f,C,P,T)=>{if(this._globalCallbacks[P]||T&&this._globalCallbacks[T]||(" "+C.className+" ").indexOf(" mousetrap ")>-1||x(C,this.target))return!1;if("composedPath"in f&&typeof f.composedPath=="function"){let M=f.composedPath()[0];M!==f.target&&M instanceof HTMLElement&&(C=M)}return!!(C.tagName==="INPUT"||C.tagName==="SELECT"||C.tagName==="TEXTAREA"||"isContentEditable"in C&&C.isContentEditable)},this.handleKey=(...f)=>this._handleKey(...f),this.addKeycodes=f=>{for(let C in f)f.hasOwnProperty(C)&&(n[C]=f[C]);o=null},this.target=D,this.target.addEventListener("keypress",f=>{f instanceof KeyboardEvent&&this._handleKeyEvent(f)}),this.target.addEventListener("keydown",f=>{f instanceof KeyboardEvent&&this._handleKeyEvent(f)}),this.target.addEventListener("keyup",f=>{f instanceof KeyboardEvent&&this._handleKeyEvent(f)})}}const y=new m(document)},12507:(ne,j,e)=>{"use strict";e.d(j,{c:()=>o});var n=e(74848),a=e(27594),s=e(41654);const d=()=>[{id:"resource",header:"Resource",cell:({row:{original:l}})=>l.kind},{id:"created",header:"Created",cell:({row:{original:l}})=>l.create?.toString()||"-"},{id:"deleted",header:"Deleted",cell:({row:{original:l}})=>l.delete?.toString()||"-"},{id:"updated",header:"Updated",cell:({row:{original:l}})=>l.update?.toString()||"-"},{id:"unchanged",header:"Unchanged",cell:({row:{original:l}})=>l.noop?.toString()||"-"},{id:"errors",header:"Errors",cell:({row:{original:l}})=>l.error?.toString()||"-"},{id:"total",header:"Total",cell:({row:{original:l}})=>((l.create||0)+(l.delete||0)+(l.update||0)+(l.noop||0)+(l.error||0)).toString()}];function o({summary:l}){return(0,n.jsx)(s.B,{direction:"column",gap:2,children:(0,n.jsx)(a.j,{data:l,columns:d(),getRowId:i=>i.kind||"",pageSize:10})})}},12569:(ne,j,e)=>{"use strict";e.d(j,{c:()=>d});var n=e(74848),a=e(96540),s=e(46559);class d extends a.PureComponent{render(){return(0,n.jsx)(s.p,{inline:!0,...this.props})}}},12594:(ne,j,e)=>{"use strict";e.d(j,{P:()=>o});var n=e(74848),a=e(22803),s=e(63142),d=e(30703);const o=({children:i,horizontal:c,className:p})=>{const h=(0,s.of)(l),u=(0,a.cx)(c?h.horizontal:h.vertical,p);return(0,n.jsxs)("div",{role:"alert",className:u,children:[(0,n.jsx)(d.I,{className:h.fieldValidationMessageIcon,name:"exclamation-triangle"}),i]})},l=i=>{const c=`
      font-size: ${i.typography.size.sm};
      font-weight: ${i.typography.fontWeightMedium};
      padding: ${i.spacing(.5,1)};
      color: ${i.colors.error.contrastText};
      background: ${i.colors.error.main};
      border-radius: ${i.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${i.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,a.css)(c,{margin:i.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${i.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,a.css)(c,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,a.css)({marginRight:i.spacing()})}}},12737:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>p});var n=e(74848),a=e(96540),s=e(8934),d=e(92745);function o(...h){const u=a.useRef(null);return a.useEffect(()=>{h.forEach(r=>{r&&(typeof r=="function"?r(u.current):r.current=u.current)})},[h]),u}var l=e(45861),i=e(30703),c=e(63527);const p=(0,a.forwardRef)(({value:h,width:u,onChange:r,escapeRegex:v=!0,...g},E)=>{const x=(0,a.useRef)(null),m=o(E,x),y=h!==""?(0,n.jsx)(l.$n,{icon:"times",fill:"text",size:"sm",onClick:b=>{x.current?.focus(),r(""),b.stopPropagation()},children:(0,n.jsx)(d.x6,{i18nKey:"grafana-ui.filter-input.clear",children:"Clear"})}):null;return(0,n.jsx)(c.p,{prefix:(0,n.jsx)(i.I,{name:"search"}),suffix:y,width:u,type:"text",value:v?(0,s.xb)(h??""):h,onChange:b=>r(v?(0,s.jD)(b.currentTarget.value):b.currentTarget.value),...g,ref:m})});p.displayName="FilterInput"},12770:(ne,j,e)=>{"use strict";e.d(j,{g:()=>l});var n=e(15130),a=e(55143),s=e(54),d=e(29609),o=e(18404);function l(i,c){const{currentData:p,isLoading:h,error:u}=a.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:i}),r=c&&d.p.grafana.rule(c)?c.grafana_alert.namespace_uid:void 0,v=(0,s.Wd)(i),{folder:g,loading:E}=(0,o.a)(r);if(u)return{isEditable:!1,isRemovable:!1,loading:!1,isRulerAvailable:!1,error:u};if(!c)return{isEditable:!1,isRemovable:!1,loading:!1};if(d.p.grafana.rule(c)){if(!r)throw new Error(`Rule ${c.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!g)return{isRulerAvailable:!0,isEditable:!1,isRemovable:!1,loading:E};const b=n.TP.hasPermissionInMetadata(v.update,g),D=n.TP.hasPermissionInMetadata(v.delete,g);return{isRulerAvailable:!0,isEditable:b,isRemovable:D,loading:E||h}}const x=!!p?.rulerConfig,m=n.TP.hasPermission(v.update),y=n.TP.hasPermission(v.delete);return{isRulerAvailable:x,isEditable:m&&x,isRemovable:y&&x,loading:h}}},12810:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>u,a:()=>r});var n=e(32017),a=e.n(n),s=e(47078),d=e.n(s),o=e(92745),l=e(65642);const i=v=>d()(v,{isEqual:a()}),c=l.$W.featureToggles.localeFormatPreference,p=i((v,g)=>{try{return new Intl.DateTimeFormat(v,g)}catch{return new Intl.DateTimeFormat("en-US",g)}}),h=i((v,g)=>new Intl.DurationFormat(v,g)),u=i((v,g={})=>{if(typeof v=="string")return u(new Date(v),g);const E=c?l.$W.regionalFormat:(0,o.Z0)();return p(E,g).format(v)}),r=i((v,g={})=>{const E=c?l.$W.regionalFormat:(0,o.Z0)();return h(E,g).format(v)})},12823:(ne,j,e)=>{"use strict";e.d(j,{b:()=>s,k:()=>a});var n=e(42954),a=(d=>(d.Add="+",d.Subtract="-",d.Divide="/",d.Multiply="*",d))(a||{});const s=new n.O(()=>[{id:"+",name:"Add",operation:(d,o)=>d+o,binaryOperationID:"+"},{id:"-",name:"Subtract",operation:(d,o)=>d-o,binaryOperationID:"-"},{id:"*",name:"Multiply",operation:(d,o)=>d*o,binaryOperationID:"*"},{id:"/",name:"Divide",operation:(d,o)=>d/o,binaryOperationID:"/"}])},12965:(ne,j,e)=>{"use strict";e.d(j,{p:()=>i});var n=e(74848),a=e(96540),s=e(55386),d=e(92745),o=e(64913);function l(c){return`Custom unit: ${c}`}class i extends a.PureComponent{constructor(){super(...arguments),this.onChange=p=>{this.props.onChange(p.value)}}render(){const{value:p,width:h,id:u}=this.props;let r;const g=(0,s.Ke)().map(E=>{const x=E.submenu.map(m=>{const y={label:m.text,value:m.value};return m.value===p&&(r=y),y});return{label:E.text,value:E.text,items:x}});return p&&!r&&(r={value:p,label:p}),(0,n.jsx)(o.v,{id:u,width:h,initialValue:r&&r.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:l,options:g,placeholder:(0,d.t)("grafana-ui.unit-picker.placeholder","Choose"),isClearable:!0,onSelect:this.props.onChange})}}},12991:(ne,j,e)=>{"use strict";e.d(j,{f:()=>o,g:()=>d});var n=e(74848),a=e(5423),s=e(22429);function d(l,i){const c=[];let p="";for(const h of l)h.condition&&(h.group&&p&&p!==h.group&&c.push((0,n.jsx)(a.K,{},`${h.group}-separator`)),c.push((0,n.jsx)(h.component,{dashboard:i},h.key)),p=h.group);return c}function o(l,i,c){const p=(0,s.UA)().getCurrent();return l.reduce((h,u)=>{const r={dashboard:p};return u.show(r)&&h.push({key:h.length.toString(),group:i,condition:c,component:()=>(0,n.jsx)(u.component,{...r})}),h},[])}},13227:(ne,j,e)=>{"use strict";e.d(j,{t:()=>s});var n=e(2543),a=e.n(n);function s(d){return typeof d=="number"?d:d===""||d===null||d===void 0||Array.isArray(d)?NaN:typeof d=="boolean"?d?1:0:(0,n.toNumber)(d)}},13241:(ne,j,e)=>{"use strict";e.d(j,{E:()=>s});var n=e(44248),a=e(84500);function s(d){const o=n.jh.getVariables(d);return(0,a.CN)(o,!0)}},13409:(ne,j,e)=>{"use strict";e.d(j,{h:()=>p,q:()=>h});var n=e(74848),a=e(22803),s=e(95382),d=e(96540),o=e(84140),l=e(51898),i=e(92745),c=e(63142),p=(r=>(r.Small="small",r.Large="large",r))(p||{});const h=d.forwardRef(({color:r,label:v,variant:g="small",isSelected:E,"aria-label":x,...m},y)=>{const b=(0,c.$j)(),{isFocusVisible:D,focusProps:f}=(0,s.o)(),C=u(b,g,r,D,E),P=!!v,T=x||v;return(0,n.jsxs)("div",{ref:y,className:C.wrapper,"data-testid":l.Tp.components.ColorSwatch.name,...m,children:[P&&(0,n.jsx)("span",{className:C.label,children:v}),(0,n.jsx)("button",{className:C.swatch,...f,"aria-label":T?(0,i.t)("grafana-ui.color-swatch.aria-label-selected-color","{{colorLabel}} color",{colorLabel:T}):(0,i.t)("grafana-ui.color-swatch.aria-label-default","Pick a color"),type:"button"})]})}),u=(r,v,g,E,x)=>{const m=(0,o.A)(g),b=v==="small"?"16px":"32px";let D="none";return m.getAlpha()<.1&&(D=`2px solid ${r.colors.border.medium}`),{wrapper:(0,a.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,a.css)({marginRight:r.spacing(1)}),swatch:(0,a.css)({width:b,height:b,background:`${g}`,border:D,borderRadius:r.shape.radius.circle,outlineOffset:"1px",outline:E?`2px solid  ${r.colors.primary.main}`:"none",boxShadow:x?`inset 0 0 0 2px ${g}, inset 0 0 0 4px ${r.colors.getContrastText(g)}`:"none",[r.transitions.handleMotion("no-preference")]:{transition:r.transitions.create(["transform"],{duration:r.transitions.duration.short})},"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};h.displayName="ColorSwatch"},13477:(ne,j,e)=>{"use strict";e.d(j,{O:()=>a});var n=e(78193);function a(s){const d="${"+s.value+"}",o=s.value===s.label?s.origin:`${s.label} / ${s.origin}`;return{label:d,kind:n.q.Property,detail:o,documentation:s.documentation}}},13543:(ne,j,e)=>{"use strict";e.d(j,{NR:()=>s,l9:()=>a,wz:()=>n});const n={PANEL_QUERY_START:(d,o)=>o?`scenes.panel.query.start.${d}.${o}`:`scenes.panel.query.start.${d}`,PANEL_QUERY_END:(d,o)=>o?`scenes.panel.query.end.${d}.${o}`:`scenes.panel.query.end.${d}`,PANEL_PLUGIN_LOAD_START:(d,o)=>o?`scenes.panel.pluginLoad.start.${d}.${o}`:`scenes.panel.pluginLoad.start.${d}`,PANEL_PLUGIN_LOAD_END:(d,o)=>o?`scenes.panel.pluginLoad.end.${d}.${o}`:`scenes.panel.pluginLoad.end.${d}`,PANEL_FIELD_CONFIG_START:(d,o)=>o?`scenes.panel.fieldConfig.start.${d}.${o}`:`scenes.panel.fieldConfig.start.${d}`,PANEL_FIELD_CONFIG_END:(d,o)=>o?`scenes.panel.fieldConfig.end.${d}.${o}`:`scenes.panel.fieldConfig.end.${d}`,PANEL_RENDER_START:(d,o)=>o?`scenes.panel.render.start.${d}.${o}`:`scenes.panel.render.start.${d}`,PANEL_RENDER_END:(d,o)=>o?`scenes.panel.render.end.${d}.${o}`:`scenes.panel.render.end.${d}`,PANEL_TRANSFORM_START:(d,o,l)=>l?`scenes.panel.transform.start.${d}.${o}.${l}`:`scenes.panel.transform.start.${d}.${o}`,PANEL_TRANSFORM_END:(d,o,l)=>l?`scenes.panel.transform.end.${d}.${o}.${l}`:`scenes.panel.transform.end.${d}.${o}`,PANEL_TRANSFORM_ERROR:(d,o,l)=>l?`scenes.panel.transform.error.${d}.${o}.${l}`:`scenes.panel.transform.error.${d}.${o}`,DASHBOARD_INTERACTION_START:d=>`scenes.dashboard.interaction.start.${d}`,DASHBOARD_INTERACTION_END:d=>`scenes.dashboard.interaction.end.${d}`,DASHBOARD_MILESTONE:(d,o)=>`scenes.dashboard.milestone.${o}.${d}`,QUERY_START:(d,o)=>`scenes.query.start.${d}.${o}`,QUERY_END:(d,o)=>`scenes.query.end.${d}.${o}`},a={PANEL_QUERY:(d,o)=>o?`scenes.panel.query.duration.${d}.${o}`:`scenes.panel.query.duration.${d}`,PANEL_PLUGIN_LOAD:(d,o)=>o?`scenes.panel.pluginLoad.duration.${d}.${o}`:`scenes.panel.pluginLoad.duration.${d}`,PANEL_FIELD_CONFIG:(d,o)=>o?`scenes.panel.fieldConfig.duration.${d}.${o}`:`scenes.panel.fieldConfig.duration.${d}`,PANEL_RENDER:(d,o)=>o?`scenes.panel.render.duration.${d}.${o}`:`scenes.panel.render.duration.${d}`,PANEL_TRANSFORM:(d,o,l)=>l?`scenes.panel.transform.duration.${d}.${o}.${l}`:`scenes.panel.transform.duration.${d}.${o}`,DASHBOARD_INTERACTION:d=>`scenes.dashboard.interaction.duration.${d}`,QUERY:(d,o)=>`scenes.query.duration.${d}.${o}`},s=500},13572:(ne,j,e)=>{"use strict";e.d(j,{J:()=>g});var n=e(92745),a=e(739),s=e(44017),d=e(74848),o=e(96540),l=e(79609),i=e(2863),c=e(41654),p=e(77824),h=e(17200),u=e(72598),r=e(16553);const v=({value:E,onChange:x,item:m})=>{const[y,b]=(0,o.useState)(!1),D=(0,o.useRef)(0),f=[{label:(0,n.t)("transformers.axis-editor.mode-options.label.size","Size"),value:a.J1.Size,description:(0,n.t)("transformers.axis-editor.mode-options.description.split-the-buckets-based-on-size","Split the buckets based on size")},{label:(0,n.t)("transformers.axis-editor.mode-options.label.count","Count"),value:a.J1.Count,description:(0,n.t)("transformers.axis-editor.mode-options.description.split-the-buckets-based-on-count","Split the buckets based on count")}],C=[{label:(0,n.t)("transformers.axis-editor.log-mode-options.label.split","Split"),value:a.J1.Size,description:(0,n.t)("transformers.axis-editor.log-mode-options.description.split-the-buckets-based-on-size","Split the buckets based on size")}],P=m.settings?.allowInterval??!1,T=({mode:B,scale:U,value:W=""})=>{let V=!0;B!==a.J1.Count&&(P?W!==""&&(0,r.Fv)(W)===void 0&&(V=!1):V=(0,u.N_)(W)),b(!V),x({mode:B,scale:U,value:W})},I=(0,i.w)().getVariables().map(B=>({value:B.name,label:B.label||B.name,origin:l.$0.Template}));return(0,d.jsxs)(c.B,{children:[(0,d.jsx)(p.z,{value:E?.mode||a.J1.Size,options:E?.scale?.type===a.L4.Log?C:f,onChange:B=>{D.current++,T({...E,value:"",mode:B})}}),(0,d.jsx)(h.y,{invalid:y,error:"Value needs to be an integer or a variable",value:E?.value??"",placeholder:(0,n.t)("transformers.axis-editor.placeholder-auto","Auto"),onChange:B=>{T({...E,value:B})},suggestions:I},D.current)]})};function g(E,x,m,y){x.addCustomEditor({id:"xBuckets",path:`${E}xBuckets`,name:(0,n.t)("transformers.calculate-heatmap.add-heatmap-calculation-options.name-x-bucket","X Bucket"),editor:v,category:y,defaultValue:{mode:a.J1.Size},settings:{allowInterval:!0}}),x.addCustomEditor({id:"yBuckets",path:`${E}yBuckets`,name:(0,n.t)("transformers.calculate-heatmap.add-heatmap-calculation-options.name-y-bucket","Y Bucket"),editor:v,category:y,defaultValue:{mode:a.J1.Size}}),x.addCustomEditor({id:"yBuckets-scale",path:`${E}yBuckets.scale`,name:(0,n.t)("transformers.calculate-heatmap.add-heatmap-calculation-options.name-y-bucket-scale","Y Bucket scale"),category:y,editor:s.W1,defaultValue:{type:a.L4.Linear}})}},13640:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>C,EC:()=>b,FW:()=>E,G3:()=>c,L5:()=>f,QM:()=>l,Yh:()=>x,aD:()=>p,c3:()=>D,ch:()=>i,dJ:()=>h,ew:()=>y,jE:()=>u,zh:()=>m});var n=e(65307),a=e(92654);const s={serviceAccount:{},isLoading:!0,tokens:[]},d=(0,n.Z0)({name:"serviceaccount",initialState:s,reducers:{serviceAccountFetchBegin:P=>({...P,isLoading:!0}),serviceAccountFetchEnd:P=>({...P,isLoading:!1}),serviceAccountLoaded:(P,T)=>({...P,serviceAccount:T.payload,isLoading:!1}),serviceAccountTokensLoaded:(P,T)=>({...P,tokens:T.payload,isLoading:!1}),rolesFetchBegin:P=>({...P,rolesLoading:!0}),rolesFetchEnd:P=>({...P,rolesLoading:!1})}}),o=d.reducer,{serviceAccountLoaded:l,serviceAccountTokensLoaded:i,serviceAccountFetchBegin:c,serviceAccountFetchEnd:p,rolesFetchBegin:h,rolesFetchEnd:u}=d.actions,r={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:a.i.All},v=(0,n.Z0)({name:"serviceaccounts",initialState:r,reducers:{serviceAccountsFetched:(P,T)=>{const{totalCount:M,perPage:I,...B}=T.payload,U=Math.ceil(M/I);return{...P,...B,totalPages:U,perPage:I,showPaging:U>1,isLoading:!1}},serviceAccountsFetchBegin:P=>({...P,isLoading:!0}),serviceAccountsFetchEnd:P=>({...P,isLoading:!1}),acOptionsLoaded:(P,T)=>({...P,roleOptions:T.payload}),queryChanged:(P,T)=>({...P,query:T.payload,page:0}),pageChanged:(P,T)=>({...P,page:T.payload}),stateFilterChanged:(P,T)=>({...P,serviceAccountStateFilter:T.payload})}}),g=v.reducer,{serviceAccountsFetchBegin:E,serviceAccountsFetchEnd:x,serviceAccountsFetched:m,acOptionsLoaded:y,pageChanged:b,stateFilterChanged:D,queryChanged:f}=v.actions,C={serviceAccountProfile:o,serviceAccounts:g}},13660:(ne,j,e)=>{"use strict";e.d(j,{IZ:()=>i,Ip:()=>a,LZ:()=>l,Uy:()=>s,og:()=>o,u8:()=>d,vk:()=>n});var n=(c=>(c.Home="plugins-home",c.Browse="plugins-browse",c.Details="plugins-details",c))(n||{}),a=(c=>(c.app="apps",c.datasource="database",c.panel="credit-card",c.renderer="capture",c))(a||{}),s=(c=>(c.Deleted="deleted",c.Active="active",c.Pending="pending",c.Deprecated="deprecated",c.Enterprise="enterprise",c))(s||{}),d=(c=>(c.INSTALL="INSTALL",c.UNINSTALL="UNINSTALL",c.UPDATE="UPDATE",c.REINSTALL="REINSTALL",c.DOWNGRADE="DOWNGRADE",c))(d||{}),o=(c=>(c.OVERVIEW="Overview",c.VERSIONS="Version history",c.CONFIG="Config",c.DASHBOARDS="Dashboards",c.USAGE="Usage",c.IAM="IAM",c.CHANGELOG="Changelog",c.PLUGINDETAILS="Plugin details",c.DATASOURCE_CONNECTIONS="Data source connections",c.SCREENSHOTS="Screenshots",c))(o||{}),l=(c=>(c.OVERVIEW="overview",c.VERSIONS="version-history",c.CONFIG="config",c.DASHBOARDS="dashboards",c.USAGE="usage",c.IAM="iam",c.CHANGELOG="changelog",c.PLUGINDETAILS="right-panel",c.DATASOURCE_CONNECTIONS="datasource-connections",c.SCREENSHOTS="screenshots",c))(l||{}),i=(c=>(c.Pending="Pending",c.Fulfilled="Fulfilled",c.Rejected="Rejected",c))(i||{})},13791:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>H});var n=e(74848),a=e(22803),s=e(96540),d=e(75683),o=e(63142),l=e(27963),i=e(94076),c=e(11098);const p=({isLoading:w,children:Q,className:k})=>{let te=k?(0,n.jsx)("div",{className:k,children:Q}):Q;return(0,n.jsx)(n.Fragment,{children:w?(0,n.jsx)(c.A,{}):te})};function h({info:w}){const Q=(0,o.of)(u);return(0,n.jsx)("div",{className:Q.container,children:w.map((k,te)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("div",{className:Q.infoItem,children:[(0,n.jsx)("div",{className:Q.label,children:k.label}),k.value]}),te+1<w.length&&(0,n.jsx)("div",{"data-testid":"page-info-separator",className:Q.separator})]},te))})}const u=w=>({container:(0,a.css)({display:"flex",flexDirection:"row",gap:w.spacing(1.5),overflow:"auto"}),infoItem:(0,a.css)({...w.typography.bodySmall,display:"flex",flexDirection:"column",gap:w.spacing(.5)}),label:(0,a.css)({color:w.colors.text.secondary}),separator:(0,a.css)({borderLeft:`1px solid ${w.colors.border.weak}`})});var r=e(92745),v=e(68143),g=e(66404),E=e(76319),x=e(37386),m=e(63527);const y=({value:w,onEdit:Q})=>{const k=(0,o.of)(b),[te,q]=(0,s.useState)(w),[se,re]=(0,s.useState)(!1),[Y,X]=(0,s.useState)(!1),[J,_]=(0,s.useState)();(0,s.useEffect)(()=>{q(w)},[w]);const ee=(0,s.useCallback)(async ae=>{const le=ae.currentTarget.value;if(!le)_("Please enter a title");else if(le===w)_(void 0),re(!1);else{X(!0);try{await Q(le),_(void 0),re(!1)}catch(L){(0,v.NF)(L)?_(L.data.message):L instanceof Error&&_(L.message)}X(!1)}},[Q,w]);return se?(0,n.jsx)("div",{className:k.inputContainer,children:(0,n.jsx)(x.D,{className:k.field,loading:Y,invalid:!!J,error:J,children:(0,n.jsx)(m.p,{className:k.input,defaultValue:te,onKeyDown:ae=>{ae.key==="Enter"&&ee(ae)},autoFocus:!0,onBlur:ee,onChange:ae=>q(ae.currentTarget.value),onFocus:()=>re(!0)})})}):(0,n.jsx)("div",{className:k.textContainer,children:(0,n.jsxs)("div",{className:k.textWrapper,children:[(0,n.jsx)(g.E,{element:"h1",truncate:!0,children:te}),(0,n.jsx)(E.K,{name:"pen",size:"lg",tooltip:(0,r.t)("page.editable-title.edit-tooltip","Edit title"),onClick:()=>re(!0)})]})})};y.displayName="EditableTitle";const b=w=>({textContainer:(0,a.css)({minWidth:0}),field:(0,a.css)({flex:1,left:`calc(-${w.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,a.css)({input:{...w.typography.h1}}),inputContainer:(0,a.css)({display:"flex",flex:1}),textWrapper:(0,a.css)({alignItems:"center",display:"flex",gap:w.spacing(1),height:w.spacing(w.components.height.md)})});function D({navItem:w,renderTitle:Q,actions:k,info:te,subTitle:q,onEditTitle:se}){const re=(0,o.of)(f),Y=q??w.subTitle,X=se?(0,n.jsx)(y,{value:w.text,onEdit:se}):(0,n.jsxs)("div",{className:re.title,children:[w.img&&(0,n.jsx)("img",{className:re.img,src:w.img,alt:`logo for ${w.text}`}),Q?Q(w.text):(0,n.jsx)("h1",{children:w.text})]});return(0,n.jsxs)("div",{className:re.pageHeader,children:[(0,n.jsxs)("div",{className:re.topRow,children:[(0,n.jsxs)("div",{className:re.titleInfoContainer,children:[X,te&&(0,n.jsx)(h,{info:te})]}),(0,n.jsx)("div",{className:re.actions,children:k})]}),Y&&(0,n.jsx)("div",{className:re.subTitle,children:Y})]})}const f=w=>({topRow:(0,a.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:w.spacing(1,3)}),title:(0,a.css)({display:"flex",flexDirection:"row",maxWidth:"100%",flex:1,h1:{marginBottom:0}}),actions:(0,a.css)({display:"flex",flexDirection:"row",gap:w.spacing(1)}),titleInfoContainer:(0,a.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:w.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,a.css)({label:"page-header",display:"flex",flexDirection:"column",gap:w.spacing(1),marginBottom:w.spacing(2)}),subTitle:(0,a.css)({position:"relative",color:w.colors.text.secondary}),img:(0,a.css)({width:"32px",height:"32px",marginRight:w.spacing(2)})});var C=e(54314),P=e(30360),T=e(60208);function M({navItem:w}){const Q=(0,o.of)(I);return(0,n.jsx)("div",{className:Q.tabsWrapper,children:(0,n.jsx)(C.U,{children:w.children.map((k,te)=>{const q=k.icon?(0,P.Uo)(k.icon):void 0;return!k.hideFromTabs&&(0,n.jsx)(T.o,{label:k.text,active:k.active,icon:q,counter:k.tabCounter,href:k.url,suffix:k.tabSuffix,onChangeTab:k.onClick},`${k.url}-${te}`)})})})}const I=w=>({tabsWrapper:(0,a.css)({paddingBottom:w.spacing(3)})});var B=e(25508),U=e(84057),W=e(8535),V=e(52763);function z(w,Q){if(Q)return Q;if(w&&W.M_)return(0,V.d4)((0,B.Mz)(R,k=>(0,U.tc)(k,w??"home")))}function R(w){return w.navIndex}var O=e(43550),N=e(92948),F=e(18607);function G(w,Q){const k=(0,V.d4)(te=>te.navIndex)?.[O.Id];(0,s.useEffect)(()=>{const te=(w?.node!==w?.main?w?.node:w?.main)??{text:"Grafana"},q=(0,F.Z)(te,Q,k).map(se=>se.text).reverse();q[q.length-1]=N.M.AppTitle,document.title=q.join(" - ")},[k,w,Q])}const H=({navId:w,navModel:Q,pageNav:k,renderTitle:te,onEditTitle:q,actions:se,subTitle:re,children:Y,className:X,info:J,layout:_=d.k.Standard,onSetScrollRef:ee,...ae})=>{const le=(0,o.of)(K),L=z(w,Q),{chrome:ie}=(0,l.Il)();G(L,k);const oe=k??L?.node;return(0,s.useLayoutEffect)(()=>{L&&ie.update({sectionNav:L,pageNav:k,layout:_})},[L,k,ie,_]),(0,n.jsxs)("div",{className:(0,a.cx)(le.wrapper,X),...ae,children:[_===d.k.Standard&&(0,n.jsx)(i.A,{divId:"page-scrollbar",onSetScrollRef:ee,children:(0,n.jsxs)("div",{className:le.pageInner,children:[oe&&(0,n.jsx)(D,{actions:se,onEditTitle:q,navItem:oe,renderTitle:te,info:J,subTitle:re}),k&&k.children&&(0,n.jsx)(M,{navItem:k}),(0,n.jsx)("div",{className:le.pageContent,children:Y})]})}),_===d.k.Canvas&&(0,n.jsx)(i.A,{divId:"page-scrollbar",onSetScrollRef:ee,children:(0,n.jsx)("div",{className:le.canvasContent,children:Y})}),_===d.k.Custom&&Y]})};H.Contents=p;const K=w=>({wrapper:(0,a.css)({label:"page-wrapper",display:"flex",flex:"1 1 0",flexDirection:"column",position:"relative"}),pageContent:(0,a.css)({label:"page-content",flexGrow:1}),primaryBg:(0,a.css)({background:w.colors.background.primary}),pageInner:(0,a.css)({label:"page-inner",padding:w.spacing(2),borderBottom:"none",background:w.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:w.spacing(0,0,0,0),[w.breakpoints.up("md")]:{padding:w.spacing(4)}}),canvasContent:(0,a.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:w.spacing(2),flexBasis:"100%",flexGrow:1})})},13941:(ne,j,e)=>{"use strict";e.d(j,{J:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({children:l,className:i,...c})=>{const p=(0,s.of)(o);return(0,n.jsx)("div",{...c,className:(0,a.cx)(p.tabContent,i),children:l})},o=l=>({tabContent:(0,a.css)({background:l.colors.background.primary})})},13943:(ne,j,e)=>{"use strict";e.d(j,{x:()=>l});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(43990);const l=(0,s.forwardRef)((c,p)=>{const{alignItems:h,children:u,gap:r,rowGap:v,columnGap:g,columns:E,minColumnWidth:x,...m}=c,y=(0,d.of)(i,r,v,g,E,x,h);return(0,n.jsx)("div",{ref:p,...m,className:y.grid,children:u})});l.displayName="Grid";const i=(c,p,h,u,r,v,g)=>({grid:(0,a.css)([{display:"grid"},(0,o.Y)(c,p,E=>({gap:c.spacing(E)})),(0,o.Y)(c,h,E=>({rowGap:c.spacing(E)})),(0,o.Y)(c,u,E=>({columnGap:c.spacing(E)})),v&&(0,o.Y)(c,v,E=>({gridTemplateColumns:`repeat(auto-fill, minmax(${c.spacing(E)}, 1fr))`})),r&&(0,o.Y)(c,r,E=>({gridTemplateColumns:`repeat(${E}, 1fr)`})),(0,o.Y)(c,g,E=>({alignItems:E}))])})},13956:(ne,j,e)=>{"use strict";e.d(j,{n:()=>E});var n=e(66402),a=e(95407),s=e(60171),d=e(45173),o=e(99828);class l{constructor(){this.v1Client=new d.P,this.v2Client=new o.L}async getDashboardDTO(m){try{return await this.v1Client.getDashboardDTO(m)}catch(y){if(y instanceof a.P&&(0,s.Y)(y.data.storedVersion))return await this.v2Client.getDashboardDTO(m);throw y}}async saveDashboard(m){if((0,s.mi)(m))return await this.v2Client.saveDashboard(m);if((0,s.rL)(m))return await this.v1Client.saveDashboard(m);throw new Error("Invalid dashboard command")}async deleteDashboard(m,y){return await this.v1Client.deleteDashboard(m,y)}async listDeletedDashboards(m){const y=await this.v1Client.listDeletedDashboards(m),b=y.items.filter(C=>!(0,s.QX)(C,["v2"]));if(b.length===y.items.length)return y;const D=await this.v2Client.listDeletedDashboards(m),f=D.items.filter(C=>!(0,s.QX)(C,["v0","v1"]));return{...D,items:[...b,...f].filter(n.N)}}async restoreDashboard(m){if((0,s.aK)(m.spec)&&(0,n.N)(m))return await this.v2Client.restoreDashboard(m);if((0,n.N)(m))return await this.v1Client.restoreDashboard(m);throw new Error("Invalid dashboard resource for restore operation")}}var i=e(32899),c=e(92745),p=e(68143),h=e(45229),u=e(79718);class r{constructor(){}saveDashboard(m){return u.t.ignoreNextSave(),(0,p.AI)().post("/api/dashboards/db/",{dashboard:m.dashboard,message:m.message??"",overwrite:m.overwrite??!1,folderUid:m.folderUid})}deleteDashboard(m,y){return(0,p.AI)().delete(`/api/dashboards/uid/${m}`,void 0,{showSuccessAlert:y,validatePath:!0})}async getDashboardDTO(m,y){const b=await(0,p.AI)().get(`/api/dashboards/uid/${m}`,y,void 0,{validatePath:!0});if(b.meta.isFolder)throw h.A.emit(i.r1.alertError,["Dashboard not found"]),{status:404,config:{url:`/api/dashboards/uid/${m}`},data:{message:(0,c.t)("dashboard.legacy-dashboard-api.fetch-error.message.dashboard-not-found","Dashboard not found")}};return b}listDeletedDashboards(m){return Promise.resolve({apiVersion:"v1",kind:"List",metadata:{resourceVersion:"0"},items:[]})}restoreDashboard(m){return Promise.reject(new Error("Restore functionality not supported in legacy API"))}}let v;function g(x){throw new Error("dashboardAPI can be only overridden in test environment")}function E(x){const m=(0,s.GV)(x);if(v||(v={legacy:new r,v1:new d.P,v2:new o.L,unified:new l}),!v[m])throw new Error(`Unknown Dashboard API version: ${m}`);return v[m]}},14050:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>c});var n=e(74848),a=e(96540),s=e(54148),d=e(92745),o=e(71599),l=e(45861),i=e(94646);function c({identifier:h,isProvisioned:u,redirectTo:r=!1,onDismiss:v}){const g=(0,s.zy)(),[E,x]=(0,a.useState)(u?"confirm":"redirect");if(E==="redirect"){const m=i.$9(h),y=g.pathname+g.search,b=new URLSearchParams({copyFrom:m,returnTo:r?y:""});return(0,n.jsx)(s.C5,{to:"/alerting/new?"+b.toString(),replace:!1})}return(0,n.jsx)(o.u,{isOpen:E==="confirm",title:(0,d.t)("alerting.redirect-to-clone-rule.title-copy-provisioned-alert-rule","Copy provisioned alert rule"),body:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsxs)(d.x6,{i18nKey:"alerting.redirect-to-clone-rule.body-not-provisioned",children:["The new rule will ",(0,n.jsx)("strong",{children:"not"})," be marked as a provisioned rule."]})}),(0,n.jsx)("p",{children:(0,n.jsx)(d.x6,{i18nKey:"alerting.redirect-to-clone-rule.body-evaluation-group",children:"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI."})})]}),confirmText:(0,d.t)("alerting.redirect-to-clone-rule.confirmText-copy","Copy"),onConfirm:()=>x("redirect"),onDismiss:v})}const p=(0,a.forwardRef)(({text:h,ruleIdentifier:u,isProvisioned:r,className:v},g)=>{const[E,x]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.$n,{title:(0,d.t)("alerting.clone-rule-button.title-copy","Copy"),className:v,size:"sm",variant:"secondary",icon:"copy",onClick:()=>x(!0),ref:g,children:h},"clone"),E&&(0,n.jsx)(c,{identifier:u,isProvisioned:r,onDismiss:()=>x(!1)})]})});p.displayName="CloneRuleButton"},14099:(ne,j,e)=>{"use strict";e.d(j,{I:()=>a});var n=e(92745);function a(s,d){const o=[(0,n.t)("grafana-ui.builder.text.category-text-size","Text size")];d.withTitle&&s.addNumberInput({path:"text.titleSize",category:o,name:(0,n.t)("grafana-ui.builder.text.name-title","Title"),settings:{placeholder:(0,n.t)("grafana-ui.builder.text.placeholder-title","Auto"),integer:!1,min:1,max:200},defaultValue:void 0}),d.withValue!==!1&&s.addNumberInput({path:"text.valueSize",category:o,name:(0,n.t)("grafana-ui.builder.text.name-value","Value"),settings:{placeholder:(0,n.t)("grafana-ui.builder.text.placeholder-value","Auto"),integer:!1,min:1,max:200},defaultValue:void 0}),d.withPercentChange&&s.addNumberInput({path:"text.percentSize",category:o,name:(0,n.t)("grafana-ui.builder.text.name-percent-change","Percent change"),settings:{placeholder:(0,n.t)("grafana-ui.builder.text.placeholder-percent-change","Auto"),integer:!1,min:1,max:200},defaultValue:void 0})}},14226:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>n});const n=(a,s)=>{a.key==="Tab"||a.altKey||a.ctrlKey||a.metaKey||(a.stopPropagation(),a.key==="Escape"&&s())}},14252:(ne,j,e)=>{"use strict";e.d(j,{BN:()=>c,kx:()=>p,sd:()=>i});var n=e(96540),a=e(24705),s=e(92745),d=e(78282),o=e(26689),l=e(61215);const i=h=>(0,a.A)(async()=>c(h),[h]).value;async function c(h){const u=h?.request?.targets||[];if(h&&h.series&&u.length){for(const r of h.series)if(r.meta&&r.meta.custom){const v=await(0,d.l)().get(u[0].datasource);if(v&&v.components?.MetadataInspector)return v}}}const p=(h,u,r,v,g)=>(0,n.useMemo)(()=>{const E=[];return(0,l.$)(r)&&(E.push({label:(0,s.t)("dashboard.inspect.data-tab","Data"),value:o.q.Data}),E.push({label:(0,s.t)("dashboard.inspect.stats-tab","Stats"),value:o.q.Stats})),g&&E.push({label:(0,s.t)("dashboard.inspect.meta-tab","Meta data"),value:o.q.Meta}),E.push({label:(0,s.t)("dashboard.inspect.json-tab","JSON"),value:o.q.JSON}),v&&E.push({label:(0,s.t)("dashboard.inspect.error-tab","Error"),value:o.q.Error}),u.meta.canEdit&&(0,l.$)(r)&&E.push({label:(0,s.t)("dashboard.inspect.query-tab","Query"),value:o.q.Query}),E},[r,g,u,v])},14477:(ne,j,e)=>{"use strict";e.d(j,{a:()=>a,e:()=>s});var n=e(74848);let a=({message:d})=>(0,n.jsxs)("div",{children:["Unable to render data: ",d,"."]});function s(d){a=d}},14613:(ne,j,e)=>{"use strict";e.d(j,{u:()=>n});var n=(a=>(a.id="id",a.title="title",a.subTitle="subtitle",a.mainStat="mainstat",a.secondaryStat="secondarystat",a.arc="arc__",a.icon="icon",a.color="color",a.source="source",a.target="target",a.detail="detail__",a.nodeRadius="noderadius",a.thickness="thickness",a.highlighted="highlighted",a.strokeDasharray="strokedasharray",a.fixedX="fixedx",a.fixedY="fixedy",a.isInstrumented="isinstrumented",a))(n||{})},14658:(ne,j,e)=>{"use strict";e.d(j,{IQ:()=>i,Ve:()=>l,WB:()=>d,c3:()=>o});var n=e(95027),a=e(98060);const s={};function d({path:h,version:u,loadingStrategy:r}){const v=c(h);v&&!s[v]&&(s[v]={version:encodeURI(u),loadingStrategy:r})}function o(h){const u=h;s[u]&&delete s[u],(0,n.o)(h)}function l(h,u=a.x8){const r=p(h);if(!r)return`${h}?_cache=${u}`;const g=s[r]?.version||u;return`${h}?_cache=${g}`}function i(h){const u=p(h);if(u)return s[u]}function c(h){const u=h.match(a.wZ);if(u)return u[1];const r=h.match(a.OW);return r?r[1]:null}function p(h){const u=Object.keys(s).find(r=>h.includes(r));if(u)return u}},15083:(ne,j,e)=>{"use strict";e.d(j,{F:()=>s,c:()=>a});var n=e(51388);function a(d,o){let[l]=d,[i]=o,c=l.length,p=l[0],h=l[c-1],u=i.length,r=i[0],v=i[u-1],g;if(c)if(u){if(r>h)g=d.map((E,x)=>d[x].concat(o[x]));else if(v<p)g=o.map((E,x)=>o[x].concat(d[x]));else if(r<=p&&v>=h)g=o;else if(r>p&&v<h){let E=(0,n.Ls)(r,l);E=l[E]<r?E+1:E;let x=(0,n.Ls)(v,l);x=l[x]>v?x-1:x,g=d.map((m,y)=>d[y].slice(0,E).concat(o[y]).concat(d[y].slice(x+1)))}else if(r>=p){let E=(0,n.Ls)(r,l);E=l[E]<r?E-1:E,g=d.map((x,m)=>d[m].slice(0,E).concat(o[m]))}else if(v>=p){let E=(0,n.Ls)(v,l);E=l[E]<v?E:E+1,g=o.map((x,m)=>o[m].concat(d[m].slice(E)))}}else g=d;else u?g=o:g=[[]];return g}function s(d,o,l){let[i,...c]=d,p,h;return i[0]<o&&(p=(0,n.Ls)(o,i),i[p]<o&&p++),i[i.length-1]>l&&(h=(0,n.Ls)(l,i),i[h]>l&&h--),(p!=null||h!=null)&&(i=i.slice(p??0,h),c=c.map(u=>u.slice(p??0,h))),[i,...c]}},15203:(ne,j,e)=>{"use strict";e.d(j,{G2:()=>V,Ko:()=>B,Vc:()=>G,aF:()=>O,cU:()=>M,e8:()=>H,h5:()=>U,iB:()=>K,kH:()=>z,lv:()=>N,tk:()=>F,vR:()=>w,vZ:()=>I,vd:()=>W});var n=e(75816),a=e(59553),s=e(73659),d=e(85594),o=e(92138),l=e(32899),i=e(92745),c=e(68143),p=e(43173),h=e(36490),u=e(90297),r=e(45229),v=e(73427),g=e(38206),E=e(75735),x=e(13956),m=e(60171),y=e(79718),b=e(8535),D=e(32215),f=e(42361),C=e(44220),P=e(68528),T=e(27044);const M=(0,n.xP)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:(0,s.W)({baseURL:"/api"}),endpoints:k=>({listFolders:k.query({providesTags:te=>te&&te.length>0?te.map(q=>({type:"getFolder",id:q.uid})):[{type:"getFolder",id:"EMPTY_RESULT"}],query:({parentUid:te,limit:q,page:se,permission:re})=>({url:"/folders",params:{parentUid:te,limit:q,page:se,permission:re}})}),getFolder:k.query({providesTags:(te,q,se)=>[{type:"getFolder",id:se}],query:te=>({url:`/folders/${te}`,params:{accesscontrol:!0}})}),newFolder:k.mutation({invalidatesTags:["getFolder"],query:({title:te,parentUid:q})=>({method:"POST",url:"/folders",body:{title:te,parentUid:q}}),onQueryStarted:({parentUid:te},{queryFulfilled:q,dispatch:se})=>{q.then(async({data:re})=>{se((0,C.bw)({parentUID:te,pageSize:T.md}))})}}),saveFolder:k.mutation({invalidatesTags:["getFolder"],query:({uid:te,title:q,version:se})=>({method:"PUT",url:`/folders/${te}`,body:{title:q,version:se}}),onQueryStarted:({parentUid:te},{queryFulfilled:q,dispatch:se})=>{q.then(()=>{se((0,C.bw)({parentUID:te,pageSize:T.md}))})}}),moveFolder:k.mutation({invalidatesTags:["getFolder"],query:({folderUID:te,destinationUID:q})=>({url:`/folders/${te}/move`,method:"POST",body:{parentUID:q}}),onQueryStarted:({folderUID:te,destinationUID:q},{queryFulfilled:se,dispatch:re})=>{se.then(()=>{re((0,C.Zw)([te])),re((0,C.bw)({parentUID:q,pageSize:T.md}))})}}),deleteFolder:k.mutation({invalidatesTags:["getFolder"],query:({uid:te})=>({url:`/folders/${te}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:te},{queryFulfilled:q,dispatch:se})=>{q.then(()=>{se((0,C.bw)({parentUID:te,pageSize:T.md}))})}}),getAffectedItems:k.query({keepUnusedDataFor:0,queryFn:async({folderUIDs:te,dashboardUIDs:q})=>{try{const se=te.map(X=>(0,c.AI)().get(`/api/folders/${X}/counts`)),re=await Promise.all(se),Y={folders:te.length,dashboards:q.length,library_elements:0,alertrules:0};for(const X of re)Y.folders+=X.folder,Y.dashboards+=X.dashboard,Y.alertrules+=X.alertrule,Y.library_elements+=X.librarypanel;return{data:Y}}catch(se){return{error:se}}}}),moveDashboards:k.mutation({invalidatesTags:["getFolder"],queryFn:async({dashboardUIDs:te,destinationUID:q},se,re,Y)=>{for(const X of te){const J=await(0,x.n)().getDashboardDTO(X),_=(0,m.HG)(J)?J.spec:J.dashboard,ee=(0,m.HG)(J)?J.metadata:void 0;if(p.$.featureToggles.provisioning&&(0,P.j)(J)){r.A.publish({type:l.r1.alertWarning.name,payload:["Cannot move provisioned dashboard"]});continue}await(0,x.n)().saveDashboard({dashboard:_,folderUid:q,overwrite:!1,message:"",k8s:ee})}return{data:void 0}},onQueryStarted:({destinationUID:te,dashboardUIDs:q},{queryFulfilled:se,dispatch:re})=>{se.then(()=>{re((0,C.bw)({parentUID:te,pageSize:T.md})),re((0,C.Zw)(q))})}}),moveFolders:k.mutation({invalidatesTags:["getFolder"],queryFn:async({folderUIDs:te,destinationUID:q},se,re,Y)=>{for(const X of te)await(0,u.x)(b.JD,X,{warning:(0,i.t)("folders.api.folder-move-error-provisioned","Cannot move provisioned folder. To move it, move it in the repository and synchronise to apply the changes.")})||await Y({url:`/folders/${X}/move`,method:"POST",body:{parentUID:q}});return{data:void 0}},onQueryStarted:({destinationUID:te,folderUIDs:q},{queryFulfilled:se,dispatch:re})=>{se.then(()=>{re((0,C.bw)({parentUID:te,pageSize:T.md})),re((0,C.Zw)(q))})}}),deleteFolders:k.mutation({invalidatesTags:["getFolder"],queryFn:async({folderUIDs:te},q,se,re)=>{for(const Y of te)await(0,u.x)(b.JD,Y)||await re({url:`/folders/${Y}`,method:"DELETE",params:{forceDeleteRules:!1}});return{data:void 0}},onQueryStarted:({folderUIDs:te},{queryFulfilled:q,dispatch:se})=>{q.then(()=>{se((0,C.Zw)(te)),f.v.clear()})}}),deleteDashboards:k.mutation({invalidatesTags:["getFolder"],queryFn:async({dashboardUIDs:te})=>{const q=(0,D.sP)();for(const se of te){if(p.$.featureToggles.provisioning){const re=await(0,x.n)().getDashboardDTO(se);if((0,P.j)(re)){r.A.publish({type:l.r1.alertWarning.name,payload:["Cannot delete provisioned dashboard. To remove it, delete it from the repository and synchronise to apply the changes."]});continue}}await(0,x.n)().deleteDashboard(se,!0),q.clearDashboardCache(),q.removeSceneCache(se),f.v.clear(),p.$.featureToggles.kubernetesDashboards&&r.A.publish({type:l.r1.alertSuccess.name,payload:["Dashboard deleted"]})}return{data:void 0}},onQueryStarted:({dashboardUIDs:te},{queryFulfilled:q,getState:se})=>{q.then(()=>{(0,b.JD)((0,C.Zw)(te)),(0,b.JD)(d.qR.util.invalidateTags(["dashboardStars"]));for(const re of te)(0,b.JD)((0,g.ci)({id:re,title:"",url:"",isStarred:!1}))})}}),saveDashboard:k.mutation({queryFn:async te=>{try{if((0,m.mi)(te))return{data:await(0,x.n)("v2").saveDashboard(te)};if((0,m.rL)(te))return{data:await(0,x.n)().saveDashboard(te)};throw new Error("Invalid dashboard version")}catch(q){return(0,a.ss)(q)}},onQueryStarted:({folderUid:te},{queryFulfilled:q,dispatch:se})=>{y.t.ignoreNextSave(),q.then(async()=>{await v.TP.fetchUserPermissions(),se((0,C.bw)({parentUID:te,pageSize:T.md}))})}}),importDashboard:k.mutation({query:({dashboard:te,overwrite:q,inputs:se,folderUid:re})=>({method:"POST",url:"/dashboards/import",body:{dashboard:te,overwrite:q,inputs:se,folderUid:re}}),onQueryStarted:async({dashboard:te,folderUid:q},{queryFulfilled:se,dispatch:re})=>{let Y;if(te.uid)try{const X=await(0,x.n)().getDashboardDTO(te.uid);Y=(0,m.HG)(X)?X.metadata?.name:X.meta?.folderUid}catch(X){(0,c.NF)(X)&&(X.status!==404?console.error("Error fetching dashboard",X):X.isHandled=!0)}se.then(async X=>{re((0,C.bw)({parentUID:q,pageSize:T.md})),Y&&Y!==q&&re((0,C.bw)({parentUID:Y,pageSize:T.md}));const J=o.I.stripBaseFromUrl(X.data.importedUrl);h.Ny.push(J)})}}),listDeletedDashboards:k.query({providesTags:["getFolder"],queryFn:async()=>{try{return{data:await(0,x.n)().listDeletedDashboards({})}}catch(te){return(0,a.ss)(te)}}}),restoreDashboard:k.mutation({invalidatesTags:["getFolder"],queryFn:async({dashboard:te})=>{try{const se=await(0,x.n)().restoreDashboard(te),re=se.spec.title||"",Y=se.metadata?.annotations?.[E.ew];return(0,b.JD)((0,C.bw)({parentUID:Y,pageSize:T.md})),{data:{name:re}}}catch(q){return(0,a.ss)(q)}}})})}),{endpoints:I,useDeleteFolderMutation:B,useDeleteFoldersMutation:U,useDeleteDashboardsMutation:W,useGetAffectedItemsQuery:V,useGetFolderQuery:z,useLazyGetFolderQuery:R,useMoveFolderMutation:O,useMoveDashboardsMutation:N,useMoveFoldersMutation:F,useNewFolderMutation:G,useSaveDashboardMutation:H,useSaveFolderMutation:K,useRestoreDashboardMutation:w,useListDeletedDashboardsQuery:Q}=M},15356:(ne,j,e)=>{"use strict";e.d(j,{f:()=>p});var n=e(74848),a=e(96540),s=e(87063),d=e(94535),o=e(92807),l=e(7895),i=e(88559);const c=h=>{const{className:u,options:r,value:v,onChange:g,narrow:E,variant:x,root:m,...y}=h,[b,D]=(0,a.useState)(!1),f=()=>(0,n.jsx)(s.W,{tabIndex:-1,onClose:()=>D(!1),children:(0,n.jsx)(o.P,{maxHeight:"100vh",children:r.map(C=>(0,n.jsx)(d.D,{label:C.label??String(C.value),onClick:()=>g(C),active:C.value===v?.value,ariaChecked:C.value===v?.value,ariaLabel:C.ariaLabel||C.label,disabled:C.isDisabled,component:C.component,role:"menuitemradio"},`${C.value}`))})});return(0,n.jsx)(i.m,{root:m,overlay:f,placement:"bottom-end",children:(0,n.jsx)(l.I,{className:u,isOpen:b,narrow:E,variant:x,...y,children:v?.label||(v?.value!=null?String(v?.value):null)})})};c.displayName="ButtonSelect";const p=(0,a.memo)(c)},15518:(ne,j,e)=>{"use strict";e.d(j,{BD:()=>o,FS:()=>i,NF:()=>p,Xm:()=>l});var n=e(65307),a=e(2543),s=e.n(a),d=e(48442);const o=(0,n.VP)("receiver/add"),l=(0,n.VP)("receiver/update"),i=(0,n.VP)("receiver/delete"),c={alertmanager_config:{},template_files:{}},p=(0,n.vy)(c,h=>{h.addCase(o,(u,{payload:r})=>{const v=u.alertmanager_config.receivers=u.alertmanager_config.receivers??[];if(v.some(E=>E.name===r.name))throw new Error(`Duplicate receiver name ${r.name}`);v.push(r)}).addCase(l,(u,{payload:r})=>{const{name:v,receiver:g}=r,E=v!==g.name,x=u.alertmanager_config.receivers??[],m=x.findIndex(D=>D.name===v);if(!(m>-1))throw new Error(`Expected receiver ${v} to exist, but did not find it in the config`);if(E&&x.some(f=>f.name===g.name))throw new Error(`Duplicate receiver name ${g.name}`);x[m]=g;const b=u.alertmanager_config.route;b&&E&&(u.alertmanager_config.route=(0,d.Wn)(b,v,g.name))}).addCase(i,(u,{payload:r})=>{(0,a.remove)(u.alertmanager_config.receivers??[],v=>v.name===r)})})},15629:(ne,j,e)=>{"use strict";e.d(j,{M9:()=>p,P1:()=>a,P8:()=>u,TN:()=>o,an:()=>h,mo:()=>r,sc:()=>d,yl:()=>v});var n=e(72649);function a(g){const E=g.match(/(\d+)(\w+)/);if(E)return[Number(E[1]),E[2]];throw new Error(`Invalid interval description: ${g}`)}function s(g){const{sec:E,count:x}=rangeUtil.describeInterval(g);return E*x}const d=Object.entries(n.y).map(([g,E])=>({label:g[0].toUpperCase()+g.slice(1),value:E}));function o(g){try{return p(g),!0}catch{return!1}}const l={ms:1,s:1e3,m:60*1e3,h:3600*1e3,d:1440*60*1e3,w:10080*60*1e3,y:365*24*60*60*1e3},i=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),c=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(n.y).join(", ")}`);function p(g){let E=g;const x=[];function m(b){const D=i.exec(b),f=D?.groups?.value&&D?.groups?.type;if(!D||!f)throw c;D&&D.groups?.value&&D.groups?.type&&(E=E.replace(D[0],""),x.push([Number(D.groups.value),D.groups.type])),E&&m(E)}if(m(g),!x.length)throw c;return x.reduce((b,[D,f])=>{const C=D*l[f];return b+C},0)}function h(g){const E=Math.floor(g/1e3),x=Math.floor(E/60),m=Math.floor(x/60),y=Math.floor(m/24),b=Math.floor(y/7),D=Math.floor(y/365);return g===0?"0s":[[D,"y"],[b%52,"w"],[y%365-7*(b%52),"d"],[m%24,"h"],[x%60,"m"],[E%60,"s"],[g%1e3,"ms"]].filter(([C])=>C>0).map(([C,P])=>C+P).join("")}const u=g=>{try{return p(g)}catch{return 0}},r=g=>g.includes("0001-01-01T00");function v(g){return g%(1e3*60*60)===0?g/(1e3*60*60)+"h":g%(1e3*60)===0?g/(1e3*60)+"m":g%1e3===0?g/1e3+"s":g.toFixed()+"ms"}},15633:(ne,j,e)=>{"use strict";e.d(j,{D:()=>n,b:()=>a});const n="~grafana-with-extra-config";function a(s){return s===n}},15757:(ne,j,e)=>{"use strict";e.d(j,{m:()=>i});var n=e(74848),a=e(22803),s=e(30703),d=e(45967),o=e(45861),l=e(63142);function i(p){const{toggleShowAllSeries:h,info:u,tooltip:r,buttonLabel:v}=p,g=(0,l.of)(c);return(0,n.jsxs)("div",{className:g.disclaimer,children:[(0,n.jsxs)("span",{className:g.warningMessage,children:[(0,n.jsx)(s.I,{name:"exclamation-triangle","aria-hidden":"true"}),u]}),(0,n.jsx)(d.m,{content:r,children:(0,n.jsx)(o.$n,{variant:"secondary",size:"sm",onClick:h,children:v})})]},"disclaimer")}const c=p=>({disclaimer:(0,a.css)({label:"series-disclaimer",display:"flex",alignItems:"center",gap:p.spacing(1)}),warningMessage:(0,a.css)({display:"flex",alignItems:"center",gap:p.spacing(.5),color:p.colors.warning.main,fontSize:p.typography.bodySmall.fontSize})})},15759:(ne,j,e)=>{"use strict";e.d(j,{l:()=>n});function n(a){return"switchLayout"in a}},15840:(ne,j,e)=>{"use strict";e.d(j,{J:()=>l});var n=e(74848),a=e(22803),s=e(92745),d=e(76319),o=e(63142);const l=({onClick:c,"aria-label":p,style:h})=>{const u=(0,o.of)(i);return(0,n.jsx)(d.K,{"aria-label":p??"Close",className:u,name:"times",onClick:c,style:h,tooltip:(0,s.t)("close-button.tooltip","Close")})},i=c=>(0,a.css)({position:"absolute",right:c.spacing(.5),top:c.spacing(1)})},15874:(ne,j,e)=>{"use strict";e.d(j,{Bm:()=>d,Iu:()=>o,gz:()=>s});var n=e(74848),a=e(96540);const s=(0,a.createContext)({});function d(l){const{children:i,pluginId:c,apis:p,apiAllowList:h,apiBlockList:u}=l,r=(0,a.useMemo)(()=>{const v={};for(const g of Object.keys(p)){if(h&&h[g]&&(h[g].includes(c)||h[g].some(E=>E instanceof RegExp&&E.test(c)))){v[g]=p[g];continue}(!h||Object.keys(h).length===0)&&u&&u[g]&&!(u[g].includes(c)||u[g].some(E=>E instanceof RegExp&&E.test(c)))&&(v[g]=p[g])}return v},[p,h,u,c]);return(0,n.jsx)(s.Provider,{value:r,children:i})}function o(){const l=(0,a.useContext)(s);if(!l)throw new Error("useRestrictedGrafanaApis() can only be used inside a plugin context (The `RestrictedGrafanaApisContext` is not available).");return l}},15983:(ne,j,e)=>{"use strict";e.d(j,{A:()=>P});var n=e(74848),a=e(92745),s=e(41654),d=e(68079),o=e(66404),l=e(83793),i=e(96540),c=e(89599),p=e(45861);function h({urls:T,jobType:M}){const I=T?.newPullRequestURL,B=T?.compareURL,U=T?.sourceURL;return M==="sync"?null:(0,n.jsxs)(s.B,{children:[(0,n.jsx)(p.z9,{href:U,icon:"external-link-alt",variant:"secondary",target:"_blank",children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.repository-link.delete-or-move-job.view-branch",children:"View branch"})}),(0,n.jsx)(p.z9,{href:B,icon:"external-link-alt",variant:"secondary",target:"_blank",children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.repository-link.delete-or-move-job.compare-branch",children:"Compare branch"})}),(0,n.jsx)(p.z9,{href:I,icon:"external-link-alt",variant:"secondary",target:"_blank",children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.repository-link.delete-or-move-job.open-pull-request",children:"Open pull request"})})]})}var u=e(10378),r=e(89640),v=e(92784);function g({name:T,jobType:M}){const I=(0,l.Sw)(T?{name:T}:u.hT),B=I.data;if(!B||I.isLoading)return null;const U=(0,v.ar)(B.spec?.github);return M==="sync"?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.E,{children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.repository-link.grafana-repository-synced",children:"Your resources are now in your external storage and provisioned into your instance. From now on, your instance and the external storage will be synchronized."})}),U&&(0,n.jsx)(s.B,{direction:"row",gap:2,children:(0,n.jsx)(r.Y,{href:U,external:!0,children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.repository-link.sync-job.view-repository",children:"View repository"})})})]}):(0,n.jsx)(n.Fragment,{children:U&&(0,n.jsx)(s.B,{direction:"row",gap:2,children:(0,n.jsx)(p.z9,{href:U,icon:"external-link-alt",variant:"secondary",target:"_blank",children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.repository-link.delete-or-move-job.view-repository",children:"View repository"})})})})}var E=e(22803),x=e(63142);const m=({progress:T,topBottomSpacing:M})=>{const I=(0,x.of)(y,M),B=(0,i.useRef)(0),U=T!==void 0&&T>B.current;return(0,i.useEffect)(()=>{T!==void 0&&(B.current=T)},[T]),T===void 0?null:(0,n.jsx)("div",{className:I.container,"aria-label":(0,a.t)("provisioning.shared.progress-bar.aria-label","Progress Bar"),role:"progressbar","aria-valuenow":T,"aria-valuemin":0,"aria-valuemax":100,children:(0,n.jsx)("div",{className:U?I.fillerAnimated:I.filler,style:{width:`${T}%`}})})},y=(T,M=2)=>({container:(0,E.css)({height:"10px",width:"400px",backgroundColor:T.colors.background.secondary,borderRadius:T.shape.radius.pill,overflow:"hidden",margin:T.spacing(M,0)}),filler:(0,E.css)({height:"100%",background:T.colors.success.text}),fillerAnimated:(0,E.css)({height:"100%",background:T.colors.success.text,[T.transitions.handleMotion("no-preference","reduce")]:{transition:"width 0.5s ease-in-out"}})}),b=m;var D=e(12507);function f({jobType:T,job:M,isFinishedJob:I=!1,onStatusChange:B}){const U=(0,i.useRef)(!1),{state:W,message:V,progress:z,summary:R,errors:O}=M?.status||{},N=M?.metadata?.labels?.["provisioning.grafana.app/repository"],F=M?.status?.url?.newPullRequestURL;return(0,i.useEffect)(()=>{if(W)switch(W){case"success":B?.({status:"success"});break;case"warning":U.current||(B?.({status:"warning",warning:{title:(0,a.t)("provisioning.job-status.status.title-warning-running-job","Job completed with warnings"),message:O?.length?O:V}}),U.current=!0);break;case"error":U.current||(B?.({status:"error",error:{title:(0,a.t)("provisioning.job-status.status.title-error-running-job","Error running job"),message:O?.length?O:V}}),U.current=!0);break;case"working":case"pending":B?.({status:"running"});break;default:break}},[W,V,O,B]),M?.status?(0,n.jsx)(s.B,{direction:"column",gap:2,children:(0,n.jsxs)(s.B,{direction:"column",gap:2,children:[["working","pending"].includes(W??"")&&(0,n.jsxs)(s.B,{direction:"column",alignItems:"center",children:[(0,n.jsxs)(s.B,{direction:"row",alignItems:"center",justifyContent:"center",gap:2,children:[(0,n.jsx)(d.y,{size:24}),(0,n.jsx)(o.E,{element:"h3",variant:"h5",color:"secondary",children:V??W??(0,a.t)("provisioning.job-status.starting","Starting...")})]}),(0,n.jsx)(b,{progress:z??0})]}),I&&R&&(0,n.jsxs)(s.B,{direction:"column",gap:2,children:[(0,n.jsx)(o.E,{variant:"h3",children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.job-status.summary",children:"Summary"})}),(0,n.jsx)(D.c,{summary:R})]}),W==="success"?F?(0,n.jsx)(h,{urls:M.status?.url,jobType:T}):(0,n.jsx)(g,{name:N,jobType:T}):(0,n.jsx)(c.a,{label:(0,a.t)("provisioning.job-status.label-view-details","View details"),isOpen:!1,children:(0,n.jsx)("pre",{children:JSON.stringify(M,null,2)})})]})}):null}function C({jobUid:T,repositoryName:M,jobType:I,onStatusChange:B}){const U=(0,i.useRef)(!1),W=(0,l.$9)({name:M,uid:T}),V=U.current&&W.isError,z=W.data;return(0,i.useEffect)(()=>{const R=!z&&!U.current&&!W.isFetching;let O;if(R&&(U.current=!0,O=setTimeout(()=>{W.refetch()},1e3)),V){B?.({status:"error",error:{title:(0,a.t)("provisioning.job-status.no-job-found","No job found"),message:(0,a.t)("provisioning.job-status.no-job-found-message","The job may have been deleted or could not be retrieved. Cancel the current process and start again.")}});return}if(W.isSuccess&&z?.status){const{state:N,message:F,errors:G}=z.status;N==="error"?B?.({status:"error",error:{title:(0,a.t)("provisioning.job-status.status.title-error-running-job","Error running job"),message:G?.length?G:F}}):N==="success"?B?.({status:"success",success:{title:(0,a.t)("provisioning.job-status.status.title-success-running-job","Job completed successfully")}}):N==="warning"&&B?.({status:"warning",warning:{title:(0,a.t)("provisioning.job-status.status.title-warning-running-job","Job completed with warnings"),message:G?.length?G:F}})}return()=>{O&&clearTimeout(O)}},[W,z,B,V]),!z||W.isLoading||W.isFetching?(0,n.jsxs)(s.B,{direction:"row",alignItems:"center",justifyContent:"center",gap:2,children:[(0,n.jsx)(d.y,{size:24}),(0,n.jsx)(o.E,{element:"h4",color:"secondary",children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.job-status.loading-finished-job",children:"Loading finished job..."})})]}):(0,n.jsx)(f,{job:z,isFinishedJob:!0,onStatusChange:B,jobType:I})}function P({jobType:T,watch:M,onStatusChange:I}){const B=(0,l.L3)({fieldSelector:`metadata.name=${M.metadata?.name}`,watch:!0}),U=B?.data?.items?.[0],W=M.metadata?.labels?.["provisioning.grafana.app/repository"],z=!B.isUninitialized&&!B.isLoading&&!U&&!!W;return B.isLoading?(0,n.jsxs)(s.B,{direction:"row",alignItems:"center",justifyContent:"center",gap:2,children:[(0,n.jsx)(d.y,{size:24}),(0,n.jsx)(o.E,{element:"h4",color:"secondary",children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.job-status.starting",children:"Starting..."})})]}):B.isError?(I?.({status:"error",error:{title:(0,a.t)("provisioning.job-status.title.error-fetching-active-job","Error fetching active job")}}),null):U?(0,n.jsx)(f,{job:U,isFinishedJob:!1,onStatusChange:I,jobType:T}):z?(0,n.jsx)(C,{jobUid:M.metadata?.uid,repositoryName:W,onStatusChange:I,jobType:T}):(0,n.jsxs)(s.B,{direction:"row",alignItems:"center",justifyContent:"center",gap:2,children:[(0,n.jsx)(d.y,{size:24}),(0,n.jsx)(o.E,{element:"h4",weight:"bold",children:(0,n.jsx)(a.x6,{i18nKey:"provisioning.job-status.starting",children:"Starting..."})})]})}},16001:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>m});var n=e(74848),a=e(96540),s=e(51898),d=e(92745),o=e(43173),l=e(36490),i=e(87063),c=e(73427),p=e(11257),h=e(24313),u=e(58662),r=e(23289);const v=s.Tp.pages.Dashboard.DashNav.newShareButton.menu;let g=[];function E(y){g.push(y)}function x(){g=[]}function m({dashboard:y,panel:b}){const D=P=>{l.Ny.partial({shareView:P})},f=(0,a.useCallback)(()=>{const P=[];return P.push({shareId:u.wr.link,testId:v.shareInternally,icon:"building",label:(0,d.t)("share-dashboard.menu.share-internally-title","Share internally"),renderCondition:!0,onClick:()=>D(u.wr.link)}),P.push({shareId:u.wr.publicDashboard,testId:v.shareExternally,icon:"share-alt",label:(0,d.t)("share-dashboard.menu.share-externally-title","Share externally"),renderCondition:!b&&(0,h.iR)(),onClick:()=>{D(u.wr.publicDashboard)}}),P.push({shareId:u.wr.snapshot,testId:v.shareSnapshot,icon:"camera",label:(0,d.t)("share-dashboard.menu.share-snapshot-title","Share snapshot"),renderCondition:c.TP.isSignedIn&&o.$.snapshotEnabled&&c.TP.hasPermission(p.w.SnapshotsCreate),onClick:()=>{D(u.wr.snapshot)}}),g.forEach(T=>P.push(T)),P.filter(T=>T.renderCondition)},[b]),C=P=>{r.c.sharingCategoryClicked({item:P.shareId,shareResource:(0,u.hD)(b?.getRef())}),P.onClick(y)};return(0,n.jsx)(i.W,{"data-testid":v.container,children:f().map(P=>(0,n.jsxs)(a.Fragment,{children:[P.renderDividerAbove&&(0,n.jsx)(i.W.Divider,{}),(0,n.jsx)(i.W.Item,{testId:P.testId,label:P.label,icon:P.icon,description:P.description,component:P.component,className:P.className,onClick:()=>C(P)})]},P.shareId))})}},16123:(ne,j,e)=>{"use strict";e.d(j,{v:()=>n});function n(){return{onKeyDown(a,s,d){const o=s.value;if(o.selection.isExpanded)return d();if(a.key==="k"&&a.ctrlKey){a.preventDefault();const l=o.anchorText.text,i=o.selection.anchor.offset,p=l.length-i;return s.deleteForward(p),!0}return d()}}}},16194:(ne,j,e)=>{"use strict";e.d(j,{S:()=>s,X:()=>d});var n=e(74848),a=e(66404);const s=({content:o})=>(0,n.jsx)(a.E,{color:"primary",children:o}),d=({content:o})=>(0,n.jsx)(a.E,{variant:"code",children:o})},16200:(ne,j,e)=>{"use strict";e.d(j,{n:()=>K,C:()=>H});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(45861),l=e(66404),i=e(59243),c=e(41654),p=e(68079),h=e(45967),u=e(92745),r=e(34999),v=e(63527),g=e(30703),E=e(89640),x=e(76319);const m=({currentPage:Q,numberOfPages:k,onNavigate:te,hideWhenSinglePage:q,className:se})=>{const re=(0,d.of)(y);return q&&k<=1?null:(0,n.jsxs)("div",{className:(0,a.cx)(re.wrapper,se),children:[(0,n.jsx)(x.K,{name:"angle-left",size:"md",tooltip:(0,u.t)("dashboard.minimalistic-pagination.tooltip-previous","Previous"),onClick:()=>te(Q-1),disabled:Q===1}),(0,n.jsxs)(u.x6,{i18nKey:"dashboard.minimalistic-pagination.page-count",children:[{currentPage:Q}," of ",{numberOfPages:k}]}),(0,n.jsx)(x.K,{name:"angle-right",size:"md",tooltip:(0,u.t)("dashboard.minimalistic-pagination.tooltip-next","Next"),onClick:()=>te(Q+1),disabled:Q===k})]})},y=Q=>({wrapper:(0,a.css)({display:"flex",flexDirection:"row",gap:16,userSelect:"none"})}),b=({history:Q,index:k,onNavigate:te})=>{const q=(0,d.of)(D),se=Q.length;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:q.contentWrapper,children:(0,n.jsx)(l.E,{element:"p",color:"secondary",children:Q[k-1]})}),(0,n.jsx)(m,{currentPage:k,numberOfPages:se,onNavigate:te,hideWhenSinglePage:!1,className:q.paginationWrapper})]})},D=Q=>({paginationWrapper:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:15}),contentWrapper:(0,a.css)({display:"flex",flexBasis:"100%",flexGrow:3,whiteSpace:"pre-wrap",maxHeight:110,overflowY:"scroll",backgroundColor:Q.colors.background.secondary,border:`1px solid ${Q.colors.border.weak}`,padding:Q.spacing(1),minHeight:60})});var f=e(66769);const C=({onSuggestionClick:Q,isGenerating:k})=>{const te=(0,d.of)(P);return(0,n.jsxs)("div",{className:te.quickSuggestionsWrapper,children:[(0,n.jsx)(o.$n,{onClick:()=>Q(f.HG.Shorter),size:"sm",variant:"secondary",icon:"paragraph",disabled:k,children:f.HG.Shorter}),(0,n.jsx)(o.$n,{onClick:()=>Q(f.HG.MoreDescriptive),size:"sm",variant:"secondary",icon:"document-layout-left",disabled:k,children:f.HG.MoreDescriptive}),(0,n.jsx)(o.$n,{onClick:()=>Q(f.HG.Regenerate),icon:"sync",size:"sm",variant:"secondary",disabled:k,children:"Regenerate"})]})},P=Q=>({quickSuggestionsWrapper:(0,a.css)({display:"flex",flexDirection:"row",gap:8})});var T=e(16817),M=e(87056),I=e(25992),B=e(64762);const U=(0,I.DW)("features.dashboards.genai");var W=(Q=>(Q.IDLE="idle",Q.GENERATING="generating",Q.COMPLETED="completed",Q))(W||{});const V=1e4,z={model:f.ys,temperature:1,timeout:V};function R(Q=z){const{model:k,temperature:te,onResponse:q,timeout:se}={...z,...Q},[re,Y]=(0,s.useState)([]),[X,J]=(0,s.useState)(""),[_,ee]=(0,s.useState)("idle"),[ae,le]=(0,s.useState)(),{error:L}=(0,B._2)();let ie="";const oe=(0,s.useCallback)(Ge=>{ee("idle"),Y([]),le(Ge),L("Failed to generate content using LLM","Please try again or if the problem persists, contact your organization admin."),console.error(Ge),U.logError(Ge,{messages:JSON.stringify(re),model:k,temperature:String(te)})},[re,k,te,L]);(0,s.useEffect)(()=>{re.length>0&&J("")},[re]);const{error:ue,value:ye}=(0,T.A)(async()=>await(0,f.QX)(),[f.QX]),{error:fe,value:Ee}=(0,T.A)(async()=>{if(!ye||!re.length)return{enabled:ye};ee("generating"),le(void 0);const Ge=M.qH({model:k,temperature:te,messages:re}).pipe(M.qA());return{enabled:ye,stream:Ge.subscribe({next:Fe=>{ie=Fe},error:oe,complete:()=>{J(ie),ee("completed"),q?.(ie),Y([]),le(void 0)}})}},[re,ye]);(0,s.useEffect)(()=>()=>{Ee?.stream?.unsubscribe()},[Ee]);const Ae=(0,s.useCallback)(()=>{Ee?.stream?.unsubscribe(),ee("idle"),le(void 0),Y([])},[Ee]);return(0,s.useEffect)(()=>{let Ge;return _==="generating"&&X===""&&(Ge=setTimeout(()=>{oe(new Error(`LLM stream timed out after ${se}ms`))},se)),()=>{clearTimeout(Ge)}},[_,X,oe,se]),(fe||ue)&&le(fe||ue),{setMessages:Y,stopGeneration:Ae,messages:re,reply:X,streamStatus:_,error:ae,value:Ee}}var O=e(37680);const N=.5,F=({eventTrackingSrc:Q,history:k,messages:te,onApplySuggestion:q,updateHistory:se,timeout:re})=>{const Y=(0,d.of)(G),[X,J]=(0,s.useState)(1),[_,ee]=(0,s.useState)(""),ae=(0,s.useRef)(te);ae.current=te;const le=(0,s.useCallback)(Re=>{se((0,f.Kb)(Re))},[se]),{setMessages:L,stopGeneration:ie,reply:oe,streamStatus:ue,error:ye}=R({model:f.ys,temperature:N,onResponse:le,timeout:re}),fe=(Re,Ke)=>(0,O.XX)(Q,Re,Ke),Ee=Re=>{Pe(Re),fe(O.KR.customFeedback,{customFeedback:Re})},Ae=()=>{ie(),oe&&le(oe)},Ge=()=>{q(k[X-1])},Fe=Re=>{J(Re),fe(Re>X?O.KR.backHistoryItem:O.KR.forwardHistoryItem)},Pe=Re=>{L(()=>[...ae.current,...(0,f.To)(k[X-1],Re)]),Re in f.HG&&fe(O.KR.quickFeedback,{quickFeedbackItem:Re})},Ve=Re=>Re.key==="Enter"&&Ee(_),me=Re=>ee(Re.currentTarget.value),Se=()=>Ee(_),Qe=()=>fe(O.KR.linkToDocs),Ue=ue===W.GENERATING,Ie=ye&&!Ue;return(0,n.jsxs)("div",{className:Y.container,children:[Ie&&(0,n.jsx)(r.F,{title:"",children:(0,n.jsx)(c.B,{direction:"column",children:(0,n.jsx)("p",{children:(0,n.jsx)(u.x6,{i18nKey:"gen-ai.incomplete-request-error",children:"Sorry, I was unable to complete your request. Please try again."})})})}),(0,n.jsx)(b,{history:k,index:X,onNavigate:Fe}),(0,n.jsx)("div",{className:Y.actionButtons,children:(0,n.jsx)(C,{onSuggestionClick:Pe,isGenerating:Ue})}),(0,n.jsx)(v.p,{placeholder:(0,u.t)("dashboard.gen-aihistory.placeholder-tell-ai-what-to-do-next","Tell AI what to do next..."),suffix:(0,n.jsx)(o.$n,{icon:"enter",variant:"secondary",fill:"text","aria-label":(0,u.t)("dashboard.gen-aihistory.aria-label-send-custom-feedback","Send custom feedback"),onClick:Se,disabled:!_,children:(0,n.jsx)(u.x6,{i18nKey:"gen-ai.send-custom-feedback",children:"Send"})}),value:_,onChange:me,onKeyDown:Ve}),(0,n.jsx)("div",{className:Y.applySuggestion,children:(0,n.jsx)(c.B,{justifyContent:"flex-end",direction:"row",children:Ue?(0,n.jsx)(o.$n,{icon:"fa fa-spinner",onClick:Ae,children:H}):(0,n.jsx)(o.$n,{icon:"check",onClick:Ge,children:(0,n.jsx)(u.x6,{i18nKey:"gen-ai.apply-suggestion",children:"Apply"})})})}),(0,n.jsxs)("div",{className:Y.footer,children:[(0,n.jsx)(g.I,{name:"exclamation-circle",className:Y.infoColor}),(0,n.jsx)(l.E,{variant:"bodySmall",color:"secondary",children:(0,n.jsxs)(u.x6,{i18nKey:"dashboard.gen-aihistory.footer-text",children:["This content is AI-generated using the"," ",(0,n.jsx)(E.Y,{variant:"bodySmall",inline:!0,href:"https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/llm-plugin/",external:!0,onClick:Qe,children:"Grafana LLM plugin"})]})})]})]})},G=Q=>({container:(0,a.css)({display:"flex",flexDirection:"column",width:520,maxHeight:350,paddingBottom:25}),applySuggestion:(0,a.css)({paddingTop:Q.spacing(2)}),actions:(0,a.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),footer:(0,a.css)({position:"absolute",bottom:0,left:0,width:"100%",display:"flex",flexDirection:"row",margin:0,padding:Q.spacing(1),paddingLeft:Q.spacing(2),alignItems:"center",gap:Q.spacing(1),borderTop:`1px solid ${Q.colors.border.weak}`,marginTop:Q.spacing(2)}),infoColor:(0,a.css)({color:Q.colors.info.main}),actionButtons:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"24px 0 8px 0"})}),H="Stop generating",K=({text:Q="Auto-generate",toggleTipTitle:k="",onClick:te,model:q=f.ys,messages:se,onGenerate:re,temperature:Y=1,eventTrackingSrc:X,disabled:J,tooltip:_,onHistoryChange:ee,timeout:ae=V})=>{const le=(0,d.of)(w),[L,ie]=(0,s.useState)([]),oe=(0,s.useCallback)(ge=>{ie(pe=>[ge,...pe]),ee?.([ge,...L])},[ee,L]),ue=(0,s.useCallback)(ge=>{const pe=(0,f.Kb)(ge);re(pe),oe(pe)},[re,oe]),{setMessages:ye,stopGeneration:fe,value:Ee,error:Ae,streamStatus:Ge}=R({model:q,temperature:Y,onResponse:ue,timeout:ae}),[Fe,Pe]=(0,s.useState)(!1),Ve=L.length>0,me=!Ve,Se=Ge===W.GENERATING,Qe=J||Ee&&!Ee.enabled&&!Ae,Ue=(0,s.useCallback)(ge=>(0,O.XX)(X,ge),[X]),Ie=Ae||_?void 0:!1,Re=Ae?"Failed to generate content using LLM. Please try again or if the problem persists, contact your organization admin.":_||"",Ke=ge=>{Ge===W.GENERATING?fe():Ve?Pe(!0):(te?.(ge),ye(Ye()));const pe=Ae?O.KR.erroredRetryButton:Se?O.KR.stopGenerationButton:me?O.KR.autoGenerateButton:O.KR.improveButton;Ue(pe)};if(!Ee?.enabled)return null;const Le=ge=>{Ue(O.KR.applySuggestion),re(ge),Pe(!1)},ze=()=>{if(!Se)return Ae||Ee&&!Ee.enabled?"exclamation-circle":"ai"},Be=()=>{let ge=Q;return Ae&&(ge="Retry"),Se&&(ge=H),Ve&&(ge="Improve"),ge},$e=(0,n.jsx)(o.$n,{icon:ze(),onClick:Ke,fill:"text",size:"sm",disabled:Qe,variant:Ae?"destructive":"primary",children:Be()}),Ye=()=>typeof se=="function"?se():se,de=()=>{if(Ve){const ge=(0,n.jsx)(l.E,{element:"p",children:k});return(0,n.jsx)(i.G,{title:ge,content:(0,n.jsx)(F,{history:L,messages:Ye(),onApplySuggestion:Le,updateHistory:oe,eventTrackingSrc:X,timeout:ae}),placement:"left-start",fitContent:!0,show:Fe,onClose:()=>Pe(!1),onOpen:()=>Pe(!0),children:$e})}return $e};return(0,n.jsxs)(c.B,{direction:"row",gap:.5,alignItems:"center",children:[Se&&(0,n.jsx)(p.y,{size:"sm",className:le.spinner}),me?(0,n.jsx)(h.m,{show:Ie,interactive:!0,content:Re,children:$e}):de()]})},w=Q=>({spinner:(0,a.css)({color:Q.colors.text.link})})},16203:(ne,j,e)=>{"use strict";e.d(j,{a:()=>i});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(63142),l=e(45450);function i({name:p,id:h,options:u,value:r,onChange:v,className:g,disabled:E,disabledOptions:x=[]}){const m=(0,o.of)(c),y=h??(0,s.uniqueId)("radiogroup-list-");return(0,n.jsx)("div",{id:h,className:(0,a.cx)(m.container,g),role:"radiogroup",children:u.map((b,D)=>{const f=`${y}-${D}`,C=r&&r===b.value,P=E||x.some(M=>M===b.value),T=()=>v&&b.value&&v(b.value);return(0,n.jsx)(l.J,{id:f,name:p,label:b.label,description:b.description,checked:C,value:b.value,disabled:P,onChange:T},D)})})}const c=p=>({container:(0,a.css)({display:"grid",gap:p.spacing(1)})})},16207:(ne,j,e)=>{"use strict";e.d(j,{m:()=>c});var n=e(2543),a=e.n(n),s=e(76803),d=e(11594),o=e(52205),l=e(37615),i=e(37297);class c extends d.Ud{constructor(h){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new s.K,this.dataSupport={annotations:!1,alertStates:!1},this.panel=h}get defaults(){let h=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const u=new o.pv;this.optionsSupplier(u,{data:[]});for(const r of u.getItems())r.defaultValue!=null&&(0,n.set)(h,r.path,r.defaultValue)}return h}get fieldConfigDefaults(){const h=this._fieldConfigDefaults.defaults;h.custom={};for(const u of this.fieldConfigRegistry.list())u.defaultValue!==void 0&&(0,n.set)(h,u.id,u.defaultValue);return{defaults:{...h},overrides:this._fieldConfigDefaults.overrides}}setDefaults(h){return(0,l.l)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=h,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(h){return(0,l.l)("PanelPlugin","setEditor","setPanelOptions"),this.editor=h,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(h,u){return this.onPanelMigration=h,this.shouldMigrate=u,this}setPanelChangeHandler(h){return this.onPanelTypeChanged=h,this}setPanelOptions(h){return this.optionsSupplier=h,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(h){return this.dataSupport={...this.dataSupport,...h},this}useFieldConfig(h={}){return this._initConfigRegistry=()=>(0,i.O)(h,this.meta.name),this}setSuggestionsSupplier(h){return this.suggestionsSupplier=h,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(h){return this.meta.id===h}}},16310:(ne,j,e)=>{"use strict";e.d(j,{i:()=>Ee,o:()=>Ae});var n=e(2543),a=e(65474),s=e(62467),d=e(44240),o=e(81160),l=e(77154),i=e(28105),c=e(38619),p=e(18700),h=e(88673),u=e(36580),r=e(2863),v=e(33184),g=e(78282),E=e(78767),x=e(4604),m=e(22429),y=e(74848),b=e(22803),D=e(96540),f=e(63142),C=e(16780),P=e(37386),T=e(18857),M=e(21285),I=e(93732),B=e(8095),U=e(95093),W=e.n(U),V=e(62717),z=e(25229),R=e(92745),O=e(59310),N=e(45861),F=e(41654),G=e(11527),H=e(63527),K=e(27228),w=e(44229);const Q=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((Ge,Fe)=>({label:Ge,value:Fe+1})),k=({value:Ge,onChange:Fe})=>{const Pe=(0,f.of)(te),Ve=Date.now(),me=(0,V.QZ)(Ge.timezone??"utc",Ve),Se=(0,m.UA)().getCurrent()?.getTimezone()===Ge.timezone,[Qe,Ue]=(0,D.useState)(!1),Ie=()=>{Ue(!Qe)},Re=Oe=>{if(!Oe)return;const Ne=W()();if(Oe){const We=Oe.split(":");Ne.set("hour",parseInt(We[0],10)),Ne.set("minute",parseInt(We[1],10))}return Ne},Ke=()=>{let Oe="Everyday";return Ge.fromDayOfWeek&&!Ge.toDayOfWeek&&(Oe=Q[Ge.fromDayOfWeek-1].label),Oe},Le=()=>{const Oe=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(K.U,{title:me?.name}),(0,y.jsx)(w.X,{timeZone:Ge.timezone,timestamp:Ve})]});return Se?(0,y.jsxs)(y.Fragment,{children:["Dashboard timezone (",Oe,")"]}):Oe},ze=(Oe,Ne)=>{const We=Oe?Oe.format("HH:mm"):void 0;Fe(Ne==="from"?{...Ge,from:We}:{...Ge,to:We})},Be=Oe=>{Fe({...Ge,timezone:Oe})},$e=Oe=>{Fe({...Ge,mode:Oe})},Ye=Oe=>{Fe({...Ge,cronExpr:Oe})},de=Oe=>{Fe({...Ge,duration:Oe})},ge=Oe=>{const Ne=Oe?Oe.value:void 0,We=Oe?Ge.toDayOfWeek:void 0;Fe({...Ge,fromDayOfWeek:Ne,toDayOfWeek:We})},pe=Oe=>{Fe({...Ge,toDayOfWeek:Oe?Oe.value:void 0})},De=()=>Qe?(0,y.jsx)(O.U,{value:Ge.timezone,includeInternal:!0,onChange:Oe=>Be(Oe),onBlur:()=>Ue(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):(0,y.jsxs)("div",{className:Pe.timezoneContainer,children:[(0,y.jsx)("div",{className:Pe.timezone,children:Le()}),(0,y.jsx)(N.$n,{variant:"secondary",onClick:Ie,size:"sm",children:"Change timezone"})]}),Me=Re(Ge.from),be=Re(Ge.to);return(0,y.jsxs)(C.n,{className:Pe.wrapper,children:[(0,y.jsx)(P.D,{label:(0,R.t)("dashboard-settings.time-regions.advanced-label","Advanced"),description:(0,y.jsxs)(y.Fragment,{children:[(0,R.t)("dashboard-settings.time-regions.advanced-description-use","Use "),(0,y.jsx)("a",{href:"https://crontab.run/",target:"_blank",rel:"noreferrer",children:(0,R.t)("dashboard-settings.time-regions.advanced-description-cron","Cron syntax")}),(0,R.t)("dashboard-settings.time-regions.advanced-description-rest"," to define a recurrence schedule and duration")]}),children:(0,y.jsx)(M.d,{id:"time-regions-adanced-mode-toggle",value:Ge.mode==="cron",onChange:Oe=>$e(Oe.currentTarget.checked?"cron":null)})}),Ge.mode==null&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(P.D,{label:"From",children:(0,y.jsxs)(F.B,{gap:.5,children:[(0,y.jsx)(T.l6,{options:Q,isClearable:!0,placeholder:"Everyday",value:Ge.fromDayOfWeek??null,onChange:Oe=>ge(Oe),width:20}),(0,y.jsx)(G.R,{value:(0,z.Ar)(Me)?Me:void 0,onChange:Oe=>ze(Oe&&(0,z.AN)(Oe),"from"),allowEmpty:!0,placeholder:"HH:mm",size:"sm"})]})}),(0,y.jsx)(P.D,{label:"To",children:(0,y.jsxs)(F.B,{gap:.5,children:[(Ge.fromDayOfWeek||Ge.toDayOfWeek)&&(0,y.jsx)(T.l6,{options:Q,isClearable:!0,placeholder:Ke(),value:Ge.toDayOfWeek??null,onChange:Oe=>pe(Oe),width:20}),(0,y.jsx)(G.R,{value:(0,z.Ar)(be)?be:void 0,onChange:Oe=>ze(Oe&&(0,z.AN)(Oe),"to"),allowEmpty:!0,placeholder:"HH:mm",size:"sm"})]})})]}),Ge.mode==="cron"&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(P.D,{label:"Cron expression",children:(0,y.jsx)(H.p,{onChange:Oe=>Ye(Oe.target.value),value:Ge.cronExpr,placeholder:"0 9 * * 1-5",width:40})}),(0,y.jsx)(P.D,{label:"Duration",children:(0,y.jsx)(H.p,{onChange:Oe=>de(Oe.target.value),value:Ge.duration,placeholder:"8h",width:40})})]}),(0,y.jsx)(P.D,{label:"Timezone",children:De()})]})},te=Ge=>({wrapper:(0,b.css)({maxWidth:Ge.spacing(60),marginBottom:Ge.spacing(2)}),timezoneContainer:(0,b.css)({padding:"5px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:"12px"}),timezone:(0,b.css)({marginRight:"5px"})}),q="Enabling this returns annotations that match any of the tags specified below",se=(0,y.jsx)("div",{children:"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."}),re=[{label:"Dashboard",value:B.St.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:B.St.Tags,description:"This will fetch any annotation events that match the tags filter"}],Y=[{label:"Annotations & Alerts",value:B.nj.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:B.nj.TimeRegions,description:"Configure a repeating time region"}],X=[10,50,100,200,300,500,1e3,2e3].map(Ge=>({label:String(Ge),value:Ge}));function J({query:Ge,onChange:Fe}){const Pe=Ge,{limit:Ve,matchAny:me,tags:Se,type:Qe,queryType:Ue}=Pe;let Ie=Ue??B.nj.Annotations;const Re=(0,D.useMemo)(()=>(0,m.UA)().dashboard?.getTimezone(),[]),Ke=(0,f.of)(_),Le=ge=>Fe({...Pe,type:ge.value}),ze=ge=>Fe({...Pe,limit:ge.value}),Be=ge=>Fe({...Pe,matchAny:ge.target.checked}),$e=ge=>Fe({...Pe,tags:ge}),Ye=ge=>{const pe={...Pe,queryType:ge.value};pe.queryType===B.nj.TimeRegions?pe.timeRegion||(pe.timeRegion={timezone:Re}):delete pe.timeRegion,Fe(pe)},de=ge=>{Fe({...Pe,timeRegion:ge})};return(0,y.jsxs)(C.n,{className:Ke.container,children:[(0,y.jsx)(P.D,{label:"Query type",children:(0,y.jsx)(T.l6,{inputId:"grafana-annotations__query-type",options:Y,value:Ie,onChange:Ye})}),Ie===B.nj.Annotations&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(P.D,{label:"Filter by",children:(0,y.jsx)(T.l6,{inputId:"grafana-annotations__filter-by",options:re,value:Qe,onChange:Le})}),(0,y.jsx)(P.D,{label:"Max limit",children:(0,y.jsx)(T.l6,{inputId:"grafana-annotations__limit",width:16,options:X,value:Ve,onChange:ze})}),Qe===B.St.Tags&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(P.D,{label:"Match any",description:q,children:(0,y.jsx)(M.d,{id:"grafana-annotations__match-any",value:me,onChange:Be})}),(0,y.jsx)(P.D,{label:"Tags",description:se,children:(0,y.jsx)(I.$,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:$e,tagOptions:(0,E.l)().tags,tags:Se??[]})})]})]}),Ie===B.nj.TimeRegions&&Pe.timeRegion&&(0,y.jsx)(k,{value:Pe.timeRegion,onChange:de})]})}const _=Ge=>({container:(0,b.css)({maxWidth:Ge.spacing(60),marginBottom:Ge.spacing(2)})});var ee=e(95004),ae=e(14465),le=e(74529);const L=24*3600;function ie(Ge,Fe,Pe,Ve,me,Se){let Qe=Ve-Ge;Qe<0&&(Qe+=7);let Ue=Fe*3600+Pe*60,Ie=me*3600+Se*60,Re=0;return Qe===0&&Ie<Ue?Re=7*L-(Ue-Ie):Re=Qe*L-Ue+Ie,Re}function oe(Ge,Fe,Pe,Ve){if(Ge==null&&Fe==null)return;const me={cronExpr:"",duration:0},Se=Ge==null&&Pe==null,Qe=Ge!=null&&Fe==null&&Ve==null;Fe??="00:00";let[Ue,Ie]=Fe.split(":").map(Be=>+Be);me.cronExpr=`${Ie} ${Ue} * * ${Ge??"*"}`,Ge??=1,Pe??=Ge,Qe&&(Ve="00:00",Pe+=Pe===7?-6:1),Ve??=Fe;let[Re,Ke]=Ve.split(":").map(Be=>+Be),Le=Ue*3600+Ie*60,ze=Re*3600+Ke*60;return Se&&ze<Le&&(Pe+=Pe===7?-6:1),me.duration=ie(Ge,Ue,Ie,Pe,Re,Ke),me}function ue(Ge,Fe){const Pe=[];let Ve="",me=0,{fromDayOfWeek:Se,from:Qe,toDayOfWeek:Ue,to:Ie,duration:Re=""}=Ge;if(Ge.mode==="cron")Ve=Ge.cronExpr??"",me=(0,le.WT)((0,le.E9)(Re));else{Qe=Qe===""?void 0:Qe,Ie=Ie===""?void 0:Ie;const Ke=oe(Se,Qe,Ue,Ie);Ke!=null&&(Ve=Ke.cronExpr,me=Ke.duration*1e3)}if(Ve==="")return[];try{let Ke=Ge.timezone==="browser"?void 0:Ge.timezone==="utc"?"Etc/UTC":Ge.timezone,Le=new ae.l4(Ve,{timezone:Ke}),ze=new Date(Fe.from.valueOf()-me),Be=Fe.to.valueOf(),$e=Le.nextRun(ze);for(;$e!=null;){let Ye=+$e;if(Ye>Be)break;Pe.push({from:Ye,to:Ye+me}),$e=Le.nextRun($e)}}catch(Ke){console.error(Ke)}return Pe}function ye(Ge,Fe,Pe){const{mode:Ve,duration:me,cronExpr:Se,from:Qe,fromDayOfWeek:Ue}=Fe,Ie=Ve==null&&(Ue!=null||Qe!=null),Re=Ve==="cron"&&Se!=null&&me!=null;if(Ie||Re){const Ke=ue(Fe,Pe);if(Ke.length>0)return{fields:[{name:"time",type:ee.PU.time,values:Ke.map(ze=>ze.from),config:{}},{name:"timeEnd",type:ee.PU.time,values:Ke.map(ze=>ze.to),config:{}},{name:"text",type:ee.PU.string,values:Array(Ke.length).fill(Ge),config:{}}],length:Ke.length}}}let fe=100;class Ee extends u.iy{constructor(Fe){super(Fe),this.annotations={QueryEditor:J,prepareAnnotation(Pe){return Pe.target=Pe.target??{type:Pe.type??B.St.Dashboard,limit:Pe.limit??100,tags:Pe.tags??[],matchAny:Pe.matchAny??!1},Pe},prepareQuery(Pe){let Ve;if((0,n.isString)(Pe.datasource)){const Qe=(0,x.og)(Pe.datasource,{returnDefaultAsNull:!1});Qe&&(Ve=Qe)}else Ve=Pe.datasource;const{filter:me,...Se}=Pe;return{...Se,refId:Pe.name,queryType:B.nj.Annotations,datasource:Ve}}}}getDefaultQuery(){return{queryType:B.nj.RandomWalk}}query(Fe){const Pe=[],Ve=[],me=(0,r.w)();for(const Se of Fe.targets){if(Se.queryType===B.nj.Annotations)return(0,a.H)(this.getAnnotations({range:Fe.range,rangeRaw:Fe.range.raw,annotation:Se,dashboard:(0,m.UA)().getCurrent()}));if(!Se.hide){if(Se.queryType===B.nj.Snapshot){Pe.push((0,s.of)({data:(Se.snapshot??[]).map(Qe=>(0,l.or)(Qe)),state:i.Gu.Done}));continue}if(Se.queryType===B.nj.TimeRegions){const Qe=ye("",Se.timeRegion,Fe.range);Pe.push((0,s.of)({data:Qe?[Qe]:[],state:i.Gu.Done}));continue}if(Se.queryType===B.nj.LiveMeasurements){let Qe=me.replace(Se.channel,Fe.scopedVars);const{filter:Ue}=Se,Ie=(0,c.DG)(Qe);if(!(0,c.aj)(Ie))continue;const Re={maxLength:Fe.maxDataPoints??500};Se.buffer?(Re.maxDelta=Se.buffer,Re.maxLength=Re.maxLength*2):Fe.rangeRaw?.to==="now"&&(Re.maxDelta=Fe.range.to.valueOf()-Fe.range.from.valueOf()),Pe.push((0,v.oF)().getDataStream({key:`${Fe.requestId}.${fe++}`,addr:Ie,filter:Ue,buffer:Re}))}else Se.queryType||(Se.queryType=B.nj.RandomWalk),Ve.push(Se)}}return Ve.length&&Pe.push(super.query({...Fe,targets:Ve})),Pe.length?Pe.length===1?Pe[0]:(0,d.h)(...Pe):(0,s.of)()}listFiles(Fe,Pe){return this.query({targets:[{refId:"A",queryType:B.nj.List,path:Fe}],maxDataPoints:Pe}).pipe((0,o.T)(Ve=>{const me=Ve.data[0]??new p.k;return new h.R(me)}))}metricFindQuery(){return Promise.resolve([])}async getAnnotations(Fe){const Pe=Fe.annotation.target;if(Pe?.queryType===B.nj.TimeRegions){const Ue=ye(Fe.annotation.name,Pe.timeRegion,Fe.range);return Promise.resolve({data:Ue?[Ue]:[]})}const Ve=Fe.annotation,me=Ve.target,Se={from:Fe.range.from.valueOf(),to:Fe.range.to.valueOf(),limit:me.limit,tags:me.tags,matchAny:me.matchAny};if(me.type===B.St.Dashboard){if(!Fe.dashboard?.uid)return Promise.resolve({data:[]});Se.dashboardUID=Fe.dashboard.uid,delete Se.tags}else{if(!Array.isArray(me.tags)||me.tags.length===0)return Promise.resolve({data:[]});const Ue=(0,r.w)(),Ie="__delimiter__",Re=[];for(const Ke of Se.tags){const Le=Ue.replace(Ke,{},ze=>typeof ze=="string"?ze:ze.join(Ie));for(const ze of Le.split(Ie))Re.push(ze)}Se.tags=Re}return{data:[await(0,E.l)().query(Se,`grafana-data-source-annotations-${Ve.name}-${Fe.dashboard?.uid}`)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Ae(){return await(0,g.l)().get("-- Grafana --")}},16477:(ne,j,e)=>{"use strict";e.d(j,{_:()=>d});var n=e(74848),a=e(22803),s=e(96540);const d=({children:o,left:l,top:i})=>{const c=(0,s.useMemo)(()=>(0,a.css)({position:"absolute",overflow:"visible",left:`${l}px`,top:`${i}px`}),[l,i]);return(0,n.jsx)("div",{className:c,children:o})}},16515:(ne,j,e)=>{"use strict";e.d(j,{Ct:()=>i,Fm:()=>o,Ri:()=>d,fk:()=>p,j2:()=>l});var n=e(36638),a=e(95004),s=e(71642);function d(u,r){if(u.name)return u.name;const v=[];for(const g of u.fields)if(g.type!==a.PU.time){if(v.length>1)break;v.push(i(g,u))}return v.length===1?v[0]:r===void 0&&u.fields.length>0?u.fields.filter(g=>g.type!==a.PU.time).map(g=>i(g,u)).join(", "):u.refId?`Series (${u.refId})`:`Series (${r})`}function o(u){u.forEach(r=>{r.fields.forEach(v=>{i(v,r,u)})})}function l(u,r){u.forEach(v=>{v.fields.forEach(g=>{const E={legend:!1,tooltip:!1,viz:!1,...r.defaults.custom?.hideFrom},x=g.config.custom?.hideFrom;r.overrides.forEach(m=>{if("__systemRef"in m)return;if((0,n.NS)(m.matcher)(g,v,u))for(const b of m.properties)b.id==="custom.hideFrom"&&Object.assign(E,b.value)}),g.state={...g.state,hideFrom:{...x}},g.config.custom.hideFrom=E})})}function i(u,r,v){const g=u.state?.displayName,E=!!(v&&v.length>1);if(g&&E===u.state?.multipleFrames)return g;const x=c(u,r,v);return u.state=u.state||{},u.state.displayName=x,u.state.multipleFrames=E,x}function c(u,r,v){const g=u.config?.displayName&&u.config?.displayName.length,E=!!r?.meta?.timeCompare?.isTimeShiftQuery;let x=g?u.config.displayName:u.name;if(g)return E?`${x} (comparison)`:x;if(r&&u.config?.displayNameFromDS)return E?`${u.config.displayNameFromDS} (comparison)`:u.config.displayNameFromDS;if(u.type===a.PU.time&&!u.labels)return x??a.LE;let m=[],y=!1;if(v&&v.length>1){for(let f=1;f<v.length;f++)if(v[f].name!==v[f-1].name){y=!0;break}}let b=!1,D=!1;if(y&&r?.name&&(m.push(r.name),b=!0),u.name&&u.name!==a.Bc&&m.push(u.name),u.labels&&r){let f=h(v??[r]);if(f)u.labels[f]&&(m.push(u.labels[f]),D=!0);else{let C=(0,s.h6)(u.labels);C&&(m.push(C),D=!0)}}return r&&!b&&!D&&u.name===a.Bc&&r.name&&r.name.length>0&&(m.push(r.name),b=!0),m.length?x=m.join(" "):u.name?x=u.name:x=a.Bc,x===u.name&&(x=p(u,r)),E&&(x=`${x} (comparison)`),x}function p(u,r){let v=0,g=!1;if(r)for(let E=0;E<r.fields.length;E++){const x=r.fields[E];if(u===x){if(g=!0,v>0){v++;break}}else if(u.name===x.name&&(v++,g))break}return v?`${u.name} ${v}`:u.name}function h(u){let r=null;for(let v=0;v<u.length;v++){const g=u[v];for(const E of g.fields)if(E.labels){for(const x in E.labels)if(r===null)r=x;else if(x!==r)return null}}return r}},16553:(ne,j,e)=>{"use strict";e.d(j,{Fv:()=>f,eO:()=>g,q_:()=>D});var n=e(79243),a=e(74529),s=e(72598);const{abs:d,pow:o}=Math,l=new Map;function i(C,P,T,M){let I=[],B=M.map(n.E);for(let U=P;U<T;U++){let W=d(U),V=(0,n.h)(o(C,U),W);for(let z=0;z<M.length;z++){let R=M[z]*V,O=(R>=0&&U>=0?0:W)+(U>=B[z]?0:B[z]),N=(0,n.h)(R,O);I.push(N),l.set(N,O)}}return I}const c=C=>C%1===0,p=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],h=i(10,-16,0,p),u=i(10,0,16,p),r=u.filter(c),v=h.concat(u),g=h.concat(r),E=1*1e3,x=60*E,m=60*x,y=24*m,b=365*y,D=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,E,2*E,4*E,5*E,10*E,15*E,20*E,30*E,x,2*x,4*x,5*x,10*x,15*x,20*x,30*x,m,2*m,4*m,6*m,8*m,12*m,18*m,y,2*y,3*y,4*y,5*y,6*y,7*y,10*y,15*y,30*y,45*y,60*y,90*y,180*y,b,2*b,3*b,4*b,5*b,6*b,7*b,8*b,9*b,10*b],f=C=>{if((0,s.N_)(C)){const T=Number.parseInt(C,10);return Number.isNaN(T)?void 0:T}else{if((0,a.di)(C))return(0,a.WT)((0,a.E9)(C));{const M=C.match(/(\d+)ms$/i);if(M){const I=Number.parseInt(M[1],10);return Number.isNaN(I)?void 0:I}else return}}}},16591:(ne,j,e)=>{"use strict";e.d(j,{L:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({children:l,className:i})=>{const c=(0,s.of)(o);return(0,n.jsx)("div",{className:(0,a.cx)(c.wrapper,i),children:l})},o=l=>({wrapper:(0,a.css)({backgroundColor:l.components.panel.background,border:`solid 1px ${l.components.input.borderColor}`,borderRadius:l.shape.radius.default,padding:l.spacing(.5,1),fontFamily:l.typography.fontFamilyMonospace})})},16608:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>d,Sx:()=>l,LR:()=>o});var n=e(75816),a=e(73659);const d=(0,n.xP)({reducerPath:"legacyUserAPI",baseQuery:(0,a.W)({baseURL:"/api"}),endpoints:()=>({})}).injectEndpoints({endpoints:i=>({unstarDashboardByUid:i.mutation({query:c=>({url:`/user/stars/dashboard/uid/${c.dashboardUid}`,method:"DELETE"})}),starDashboardByUid:i.mutation({query:c=>({url:`/user/stars/dashboard/uid/${c.dashboardUid}`,method:"POST"})})}),overrideExisting:!1}),{useUnstarDashboardByUidMutation:o,useStarDashboardByUidMutation:l}=d},16692:(ne,j,e)=>{"use strict";e.d(j,{$m:()=>y,Ej:()=>M,Es:()=>F,Gy:()=>W,Hl:()=>w,L7:()=>K,M6:()=>G,QI:()=>x,RY:()=>b,aw:()=>P,e2:()=>T,hT:()=>N,iI:()=>H,j5:()=>m,mW:()=>U,mh:()=>I});var n=e(96540),a=e(15130),s=e(76070),d=e(66513),o=e(88114),l=e(18404),i=e(84266),c=e(11257),p=e(91984),h=e(5358),u=e(54),r=e(67598),v=e(77256),g=e(29609),E=e(12770),x=(Y=>(Y.ViewExternalConfiguration="view-external-configuration",Y.UpdateExternalConfiguration="update-external-configuration",Y.CreateContactPoint="create-contact-point",Y.ViewContactPoint="view-contact-point",Y.UpdateContactPoint="edit-contact-points",Y.DeleteContactPoint="delete-contact-point",Y.ExportContactPoint="export-contact-point",Y.CreateNotificationTemplate="create-notification-template",Y.ViewNotificationTemplate="view-notification-template",Y.UpdateNotificationTemplate="edit-notification-template",Y.DeleteNotificationTemplate="delete-notification-template",Y.DecryptSecrets="decrypt-secrets",Y.CreateNotificationPolicy="create-notification-policy",Y.ViewNotificationPolicyTree="view-notification-policy-tree",Y.UpdateNotificationPolicyTree="update-notification-policy-tree",Y.DeleteNotificationPolicy="delete-notification-policy",Y.ExportNotificationPolicies="export-notification-policies",Y.ViewAutogeneratedPolicyTree="view-autogenerated-policy-tree",Y.CreateSilence="create-silence",Y.ViewSilence="view-silence",Y.UpdateSilence="update-silence",Y.PreviewSilencedInstances="preview-silenced-alerts",Y.ViewTimeInterval="view-time-interval",Y.CreateTimeInterval="create-time-interval",Y.UpdateTimeInterval="update-time-interval",Y.DeleteTimeInterval="delete-time-interval",Y.ExportTimeIntervals="export-time-intervals",Y.ViewAlertGroups="view-alert-groups",Y))(x||{}),m=(Y=>(Y.Duplicate="duplicate-alert-rule",Y.View="view-alert-rule",Y.Update="update-alert-rule",Y.Delete="delete-alert-rule",Y.Explore="explore-alert-rule",Y.Silence="silence-alert-rule",Y.ModifyExport="modify-export-rule",Y.Pause="pause-alert-rule",Y.Restore="restore-alert-rule",Y.DeletePermanently="delete-alert-rule-permanently",Y))(m||{}),y=(Y=>(Y.Pause="pause-folder",Y.Delete="delete-folder",Y))(y||{}),b=(Y=>(Y.CreateAlertRule="create-alert-rule",Y.ViewAlertRule="view-alert-rule",Y.UpdateAlertRule="update-alert-rule",Y.DeleteAlertRule="delete-alert-rule",Y.ExportGrafanaManagedRules="export-grafana-managed-rules",Y.ReadConfigurationStatus="read-configuration-status",Y.CreateExternalAlertRule="create-external-alert-rule",Y.ViewExternalAlertRule="view-external-alert-rule",Y.UpdateExternalAlertRule="update-external-alert-rule",Y.DeleteExternalAlertRule="delete-external-alert-rule",Y))(b||{});const D=!0,f=!1,C=()=>({"pause-folder":[D,(0,v.qc)()],"delete-folder":[D,(0,v.qc)()]}),P=Y=>C()[Y],T=()=>({"create-alert-rule":re(D,c.w.AlertingRuleCreate),"view-alert-rule":re(D,c.w.AlertingRuleRead),"update-alert-rule":re(D,c.w.AlertingRuleUpdate),"delete-alert-rule":re(D,c.w.AlertingRuleDelete),"export-grafana-managed-rules":re(D,c.w.AlertingRuleRead),"read-configuration-status":[D,a.TP.hasPermission(c.w.AlertingInstanceRead)||a.TP.hasPermission(c.w.AlertingNotificationsRead)],"create-external-alert-rule":re(D,c.w.AlertingRuleExternalWrite),"view-external-alert-rule":re(D,c.w.AlertingRuleExternalRead),"update-external-alert-rule":re(D,c.w.AlertingRuleExternalWrite),"delete-external-alert-rule":re(D,c.w.AlertingRuleExternalWrite)}),M=Y=>T()[Y];function I(Y,X){const J=V(Y);return(0,n.useMemo)(()=>J[X],[J,X])}function B(Y,X){const J=V(Y);return useMemo(()=>X.map(_=>J[_]),[J,X])}function U(Y,X,J){const _=z(Y,X);return(0,n.useMemo)(()=>_[J],[_,J])}function W(Y,X,J){const _=z(Y,X);return(0,n.useMemo)(()=>J.map(ee=>_[ee]),[_,J])}function V(Y){const X=(0,n.useMemo)(()=>r.HA.fromCombinedRule(Y),[Y]);return z(Y.rulerRule,X)}function z(Y,X){const J=(0,r.rO)(X),{isEditable:_,isRemovable:ee,isRulerAvailable:ae=!1,loading:le}=(0,E.g)(J,Y),[L,ie]=M("export-grafana-managed-rules"),oe=k(Y);return(0,n.useMemo)(()=>{const ye=Y?(0,g.Nv)(Y):!1,fe=!1,Ee=g.p.grafana.rule(Y),Ae=(0,g.Tm)(Y),Ge=ye||fe||Ae,Fe=le?f:ae,Pe=Ge?f:Fe,Ve=Ae?f:Fe,me=(0,u.Wd)(J);return{"duplicate-alert-rule":re(Ve,me.create),"view-alert-rule":re(D,me.read),"update-alert-rule":[Pe,_??!1],"delete-alert-rule":[Pe,ee??!1],"explore-alert-rule":re(D,c.w.DataSourcesExplore),"silence-alert-rule":oe,"modify-export-rule":[Ee,ie],"pause-alert-rule":[Pe&&Ee,_??!1],"restore-alert-rule":[Pe&&Ee,_??!1],"delete-alert-rule-permanently":[Pe&&Ee,(ee&&(0,v.qc)())??!1]}},[Y,le,ae,J,_,ee,oe,ie])}function R(Y){const{isEditable:X,isRemovable:J,loading:_}=O(Y),[ee,ae]=M("export-grafana-managed-rules"),le=q(),L=te(Y?.folderUid);return(0,n.useMemo)(()=>{const oe=Y?(0,g.bL)(Y):!1,ue=!1,ye=g.R$.grafana.alertingRule(Y),fe=(0,g.Tm)(Y),Ee=oe||ue||fe,Ae=_?f:D,Ge=Ee?f:Ae,Fe=fe?f:Ae,Pe=(0,u.Wd)("grafana");return{"duplicate-alert-rule":re(Fe,Pe.create),"view-alert-rule":re(D,Pe.read),"update-alert-rule":[Ge,X??!1],"delete-alert-rule":[Ge,J??!1],"explore-alert-rule":re(D,c.w.DataSourcesExplore),"silence-alert-rule":[le,L&&ye],"modify-export-rule":[ye,ae],"pause-alert-rule":[Ge&&ye,X??!1],"restore-alert-rule":[Ge&&ye,X??!1],"delete-alert-rule-permanently":[Ge&&ye,(J&&(0,v.qc)())??!1]}},[Y,_,X,J,L,ae,le])}function O(Y){const X=Y?.folderUid,{folder:J,loading:_}=(0,l.a)(X);return(0,n.useMemo)(()=>{if(!Y||!X)return{isEditable:!1,isRemovable:!1,loading:!1};if(!J)return{isEditable:!1,isRemovable:!1,loading:_};const ee=(0,u.Wd)("grafana"),ae=a.TP.hasPermissionInMetadata(ee.update,J),le=a.TP.hasPermissionInMetadata(ee.delete,J);return{isEditable:ae,isRemovable:le,loading:_}},[Y,X,J,_])}const N=Symbol("ability-skip-token");function F(Y,X){const J=R(Y===N?void 0:Y);return(0,n.useMemo)(()=>J[X],[J,X])}function G(Y,X){const J=R(Y===N?void 0:Y);return(0,n.useMemo)(()=>X.map(_=>J[_]),[J,X])}function H(){const{selectedAlertmanager:Y,hasConfigurationAPI:X,isGrafanaAlertmanager:J}=(0,h.VI)(),_=(0,u.lV)(Y),ee=(0,u.jy)(Y);return{"view-external-configuration":re(D,c.w.AlertingNotificationsExternalRead),"update-external-configuration":re(X,c.w.AlertingNotificationsExternalWrite),"create-contact-point":re(X,_.create,...J?[c.w.AlertingReceiversCreate]:[]),"view-contact-point":re(D,_.read,...J?s.PE:[]),"edit-contact-points":re(X,_.update,...J?[c.w.AlertingReceiversWrite]:[]),"delete-contact-point":re(X,_.delete,...J?[c.w.AlertingReceiversWrite]:[]),"export-contact-point":[J,J],"create-notification-template":re(X,_.create,...J?[c.w.AlertingTemplatesWrite]:[]),"view-notification-template":re(D,_.read,...J?[c.w.AlertingTemplatesRead]:[]),"edit-notification-template":re(X,_.update,...J?[c.w.AlertingTemplatesWrite]:[]),"delete-notification-template":re(X,_.delete),"create-notification-policy":re(X,_.create,...J?o.nv:[]),"view-notification-policy-tree":re(D,_.read,...J?o.rw:[]),"update-notification-policy-tree":re(X,_.update,...J?o.nv:[]),"delete-notification-policy":re(X,_.delete,...J?o.nv:[]),"export-notification-policies":re(J,_.read),"decrypt-secrets":re(J,_.provisioning.readSecrets),"view-autogenerated-policy-tree":[J,(0,v.qc)()],"create-silence":re(D,ee.create),"view-silence":re(D,ee.read),"update-silence":re(D,ee.update),"preview-silenced-alerts":re(D,ee.read),"create-time-interval":re(X,_.create,...J?d.Zr:[]),"view-time-interval":re(D,_.read,...J?d.xK:[]),"update-time-interval":re(X,_.update,...J?d.Zr:[]),"delete-time-interval":re(X,_.delete,...J?d.Zr:[]),"export-time-intervals":re(J,_.read),"view-alert-groups":re(D,ee.read)}}function K(Y){const X=H();return(0,n.useMemo)(()=>X[Y],[X,Y])}function w(Y){const X=H();return(0,n.useMemo)(()=>Y.map(J=>X[J]),[X,Y])}const{useGetGrafanaAlertingConfigurationStatusQuery:Q}=p.m;function k(Y){const X=g.p.grafana.rule(Y)?Y.grafana_alert.namespace_uid:void 0,{loading:J,folder:_}=(0,l.a)(X),ee=Y&&g.p.grafana.rule(Y),ae=g.p.grafana.recordingRule(Y),le=q(),L=te(X);return Y?!ee||ae||J||!_?[!1,!1]:[le,L]:[!1,!1]}function te(Y){const J=se(Y)[c.w.AlertingSilenceCreate]??!1;return a.TP.hasPermission(c.w.AlertingInstanceCreate)||J}function q(){const{currentData:Y,isLoading:X}=Q(void 0),J=Y?.alertmanagersChoice===i.nA.External,_=Y?.alertmanagersChoice===i.nA.All;return X?!1:!J||_}function se(Y){const{folder:X}=(0,l.a)(Y);return X?.accessControl??{}}const re=(Y,...X)=>[Y,X.some(J=>J&&a.TP.hasPermission(J))]},16780:(ne,j,e)=>{"use strict";e.d(j,{n:()=>o});var n=e(74848),a=e(22803),s=e(63142),d=e(53487);const o=({label:i,children:c,className:p,...h})=>{const u=(0,s.of)(l);return(0,n.jsxs)("fieldset",{className:(0,a.cx)(u.wrapper,p),...h,children:[i&&(0,n.jsx)(d.s,{children:i}),c]})},l=i=>({wrapper:(0,a.css)({marginBottom:i.spacing(4),"&:last-child":{marginBottom:0}})})},16880:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>s,QB:()=>d});var n=e(739);const a="12.3.0",s={alignValue:"left",mergeValues:!0,perPage:20,rowHeight:.9,showValue:n.yL.Auto},d={fillOpacity:70,lineWidth:0}},16900:(ne,j,e)=>{"use strict";e.d(j,{y:()=>Zn});var n=e(78830),a=e(11594),s=e(94644),d=e(1906),o=e(43173),l=e(41097),i=e(98533),c=e(37640),p=e(57002),h=e(92745);const u=async()=>await Promise.all([e.e(5074),e.e(5198),e.e(3766)]).then(e.bind(e,45198)),r=async()=>await e.e(9473).then(e.bind(e,39473)),v=async()=>await Promise.all([e.e(5074),e.e(8393),e.e(6260),e.e(1717)]).then(e.bind(e,96260)),g=async()=>await e.e(747).then(e.bind(e,90400)),E=async()=>await e.e(3648).then(e.bind(e,16919)),x=async()=>await e.e(9404).then(e.bind(e,21965)),m=async()=>await e.e(2513).then(e.bind(e,95637)),y=async()=>await Promise.all([e.e(5074),e.e(8393),e.e(9546)]).then(e.bind(e,68935)),b=async()=>await Promise.all([e.e(5074),e.e(4737)]).then(e.bind(e,30876)),D=async()=>await e.e(3375).then(e.bind(e,12915)),f=async()=>await e.e(4979).then(e.bind(e,80537)),C=async()=>await Promise.all([e.e(8706),e.e(4224),e.e(3124)]).then(e.bind(e,24131)),P=async()=>await e.e(3851).then(e.bind(e,62493)),T=async()=>await Promise.all([e.e(4224),e.e(5065),e.e(7033),e.e(3090)]).then(e.bind(e,80959)),M=async()=>await e.e(8995).then(e.bind(e,61369)),I=async()=>await Promise.all([e.e(2218),e.e(5939)]).then(e.bind(e,42218)),B=async()=>await Promise.all([e.e(3326),e.e(2770)]).then(e.bind(e,54952)),U=async()=>await Promise.all([e.e(407),e.e(5995),e.e(4814),e.e(5686)]).then(e.bind(e,27281)),W=async()=>await e.e(7517).then(e.bind(e,71843)),V=async()=>await e.e(9142).then(e.bind(e,38627)),z=async()=>await Promise.all([e.e(4224),e.e(323)]).then(e.bind(e,65672)),R=async()=>await Promise.all([e.e(1142),e.e(5413)]).then(e.bind(e,8149)),O=async()=>await Promise.all([e.e(407),e.e(5995),e.e(4814),e.e(8813),e.e(3688),e.e(7691),e.e(7884)]).then(e.bind(e,87691)),N=async()=>await e.e(4940).then(e.bind(e,71786)),F=async()=>await e.e(6105).then(e.bind(e,96894)),G=async()=>await e.e(1965).then(e.bind(e,75663)),H=async()=>await Promise.all([e.e(8706),e.e(4224),e.e(5065),e.e(6199)]).then(e.bind(e,56502)),K=async()=>await Promise.all([e.e(8706),e.e(4224),e.e(5065),e.e(8259)]).then(e.bind(e,24181)),w=async()=>await Promise.all([e.e(1142),e.e(3525)]).then(e.bind(e,69194)),Q=async()=>await e.e(404).then(e.bind(e,16373)),k=async()=>await Promise.all([e.e(4224),e.e(5065),e.e(7033),e.e(563)]).then(e.bind(e,55569)),te=async()=>await Promise.all([e.e(407),e.e(5995),e.e(4814),e.e(8813),e.e(4301)]).then(e.bind(e,3627)),q=async()=>await Promise.all([e.e(4224),e.e(7033),e.e(2666)]).then(e.bind(e,96827)),se=async()=>await e.e(8463).then(e.bind(e,21369)),re=async()=>await Promise.all([e.e(8706),e.e(3326),e.e(3474),e.e(8530),e.e(8271),e.e(190)]).then(e.bind(e,38271)),Y=async()=>await Promise.all([e.e(8530),e.e(7523)]).then(e.bind(e,12382)),X=async()=>await Promise.all([e.e(348),e.e(5594)]).then(e.bind(e,64406)),J=async()=>await Promise.all([e.e(4224),e.e(3326),e.e(407),e.e(5995),e.e(5065),e.e(348),e.e(5857)]).then(e.bind(e,17933)),_=async()=>await Promise.all([e.e(3474),e.e(9147),e.e(7317)]).then(e.bind(e,39053)),ee=async()=>await e.e(4013).then(e.bind(e,98450)),le={"core:plugin/cloudwatch":u,"core:plugin/dashboard":r,"core:plugin/elasticsearch":v,"core:plugin/opentsdb":g,"core:plugin/grafana":E,"core:plugin/influxdb":x,"core:plugin/mixed":m,"core:plugin/prometheus":y,"core:plugin/alertmanager":b,"core:plugin/text":Q,"core:plugin/timeseries":k,"core:plugin/trend":q,"core:plugin/state-timeline":H,"core:plugin/status-history":K,"core:plugin/candlestick":T,"core:plugin/xychart":X,"core:plugin/geomap":re,"core:plugin/canvas":Y,"core:plugin/dashlist":M,"core:plugin/alertlist":D,"core:plugin/annolist":f,"core:plugin/heatmap":J,"core:plugin/table":w,"core:plugin/news":N,"core:plugin/live":R,"core:plugin/stat":G,"core:plugin/datagrid":I,"core:plugin/debug":B,"core:plugin/flamegraph":U,"core:plugin/gettingstarted":V,"core:plugin/gauge":o.$.featureToggles.newGauge?ee:W,"core:plugin/piechart":F,"core:plugin/bargauge":P,"core:plugin/barchart":C,"core:plugin/logs":O,"core:plugin/traces":te,"core:plugin/welcome":se,"core:plugin/nodeGraph":_,"core:plugin/histogram":z,"core:plugin/radialbar":ee};var L=e(14658),ie=e(6223),oe=e(61844),ue=e(44436),ye=e(48307),fe=e(44326),Ee=e(52060);function Ae(it){const Wt=new URL(window.location.href),Vt=new URL(it);return Wt.host===Vt.host}async function Ge(it,Wt){let Vt="";if(Ae(it)?(Vt=await(await fetch(it)).text(),Vt=(0,Ee.N)({url:it,source:Vt,transformSourceMapURL:!0,transformAssets:!1})):(0,oe.OD)(it)&&(Vt=await(await fetch(it)).text(),Vt=(0,Ee.N)({url:it,source:Vt,transformSourceMapURL:!0,transformAssets:!0})),Vt.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");Vt=Ve(Vt),Wt.evaluate(Vt)}async function Fe(it){if((0,oe.OD)(it.module)){const Wt=it.module;let nn=await(await fetch(Wt)).text();if(!Pe(nn,it.moduleHash))throw new Error("Invalid SRI for plugin module file");return nn=(0,Ee.N)({url:Wt,source:nn,transformSourceMapURL:!0,transformAssets:!0}),nn}else{let Wt=(0,oe.Av)(it.module);const Vt=(0,L.Ve)(Wt);let an=await(await fetch(Vt)).text();if(!Pe(an,it.moduleHash))throw new Error("Invalid SRI for plugin module file");return an=(0,Ee.N)({url:Vt,source:an,transformSourceMapURL:!0,transformAssets:!1}),an=Ve(an),an}}async function Pe(it,Wt){if(!o.$.featureToggles.pluginsSriChecks||!Wt||Wt.length===0)return!0;const[Vt,nn]=Wt.split("-"),an=Vt.replace("sha","SHA-"),Xn=new TextEncoder().encode(it),jn=await crypto.subtle.digest(an,Xn),dn=btoa(String.fromCharCode(...new Uint8Array(jn)));return`${Vt}-${dn}`===Wt}function Ve(it){return it.replace(/window\.location/gi,"window.locationSandbox")}function me(it){it.evaluate(`${fe.V.toString()};${fe.V.name}()`)}function Se(it){for(const Wt of Object.values(o.$.datasources))if(Wt.type===it)return Wt.meta;for(const Wt of Object.values(o.$.panels))if(Wt.id===it)return Wt;for(const Wt of Object.values(o.$.apps))if(Wt.id===it)return{id:it,type:a.QE.app,module:Wt.path,moduleHash:Wt.moduleHash};throw new Error(`Could not find plugin ${it}`)}var Qe=e(99418),Ue=e(2543);const Ie=["iframe"];var Re=e(7077),Ke=e(28848),Le=e.n(Ke),ze=e(48592),Be=e(96540),$e=e(25992);function Ye(it){return!!it&&typeof it=="object"&&it?.hasOwnProperty("plugin")}function de(it){throw new Error(`Unexpected object: ${it}. This should never happen.`)}const ge=(0,$e.DW)("sandbox");function pe(it){return it instanceof Be.Component}function De(it,Wt){ge.logWarning(it,Wt)}function Me(it,Wt){ge.logError(it,Wt)}function be(it,Wt){ge.logInfo(it,Wt)}function Oe(it){return it?.constructor?.name==="RegExp"}function Ne(it){return it&&(Oe(it)&&(0,Re.U)(it)?new RegExp(it):Array.isArray(it)?it.map(Ne):typeof it=="object"?Object.keys(it).reduce((Wt,Vt)=>(Reflect.set(Wt,Vt,Ne(Reflect.get(it,Vt))),Wt),{}):it)}function We(it){return it&&((0,Re.U)(it)?(0,Ue.cloneDeep)(it):Array.isArray(it)?it.map(We):typeof it=="object"?Object.keys(it).reduce((Wt,Vt)=>(Reflect.set(Wt,Vt,We(Reflect.get(it,Vt))),Wt),{}):it)}const qe=Symbol.for("@@SANDBOX_LIVE_VALUE");function st(it,Wt){const Vt=Reflect.get(it,"nodeName");if(Vt==="body"||it===document.body)return document.body;if(Vt==="head"||it===document.head||it===document.documentElement)return it;if(Ie.includes(Vt))throw De("<"+Vt+"> is not allowed in sandboxed plugins",{pluginId:Wt,param:Vt}),new Error("<"+Vt+"> is not allowed in sandboxed plugins");if(nt(it,Wt)||it.parentNode===document.body||it.closest("#reactRoot")===null)return it;const nn=document.createElement(Vt);return nn.dataset.grafanaPluginSandboxElement="true",nn}function rt(it){if(typeof it=="object"&&it instanceof Element)try{return it.nodeName!==void 0}catch{return!1}return!1}function ot(it){const Wt=Reflect.get(it,"style");Object.hasOwn(Wt,qe)||Reflect.defineProperty(Wt,qe,{})}function mt(it){it&&(Array.isArray(it)?(it.forEach(mt),pt(it)):typeof it=="object"&&(Object.values(it).forEach(mt),pt(it)))}function pt(it){if(it)return Object.hasOwn(it,qe)||Reflect.defineProperty(it,qe,{}),it}function ke(it){it&&(Object.hasOwn(it,qe)||((0,Re.U)(it)&&!(it instanceof Function)&&(pe(it)||it instanceof s.mA||it instanceof ze.f5)?Reflect.defineProperty(it,qe,{}):it===Le().languages&&Object.defineProperty(it,qe,{})))}function Ze(it){return Object.hasOwn(it,qe)}function nt(it,Wt){return!document.contains(it)||it.closest(`[data-plugin-sandbox=${Wt}]`)!==null}let ut;function gt(){return ut||(ut=document.createElement("div"),ut.setAttribute("id","grafana-plugin-sandbox-body"),ut.setAttribute("data-plugin-sandbox","true"),ut.dataset.pluginSandbox="sandboxed-plugin",ut.style.width="100%",ut.style.height="0%",ut.style.overflow="hidden",ut.style.top="0",ut.style.left="0",document.body.appendChild(ut)),ut}let ht=!1;function tt(){ht||(ht=!0,jt(),Ot())}function Ot(){const it=Worker.prototype.postMessage;Object.defineProperty(Worker.prototype,"postMessage",{value:function(...Wt){return it.apply(this,We(Wt))}})}function jt(){const it=window.history.replaceState;Object.defineProperty(window.history,"replaceState",{value:function(...Wt){let Vt=Wt;try{Vt=(0,Ue.cloneDeep)(Wt)}catch(nn){De("Error cloning args in window.history.replaceState",{error:String(nn)})}return Reflect.apply(it,this,Vt)},writable:!0,configurable:!0,enumerable:!1})}const wt=new Map,Ht=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function hn(){return wt.size===0&&(Bn(wt),xn(wt),ft(wt),Pt(wt),Je(wt),St(wt),Tt(wt),Yt(wt),Lt(wt),fn(wt),En(wt),Gn(wt)),wt}function Dn(it,Wt){return De(`Plugin ${Wt.id} tried to set a sandboxed property`,{pluginId:Wt.id,attrOrMethod:String(it),entity:"window"}),()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function Bn(it){const Wt=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const nn of Wt){const an=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,nn);if(an){let Rn=function(Xn,jn){const dn=jn.id;return De(`Plugin ${dn} tried to access iframe.${nn}`,{pluginId:dn,attrOrMethod:nn,entity:"iframe"}),()=>{throw new Error("iframe."+nn+" is not allowed in sandboxed plugins")}};var Vt=Rn;an.value&&it.set(an.value,Rn),an.set&&it.set(an.set,Rn),an.get&&it.set(an.get,Rn)}}}function xn(it){const Wt=Object.getOwnPropertyDescriptor(window,"console");if(Wt?.value){let nn=function(an,Rn){const Xn=Rn.id;function jn(...dn){console.log(`[plugin ${Xn}]`,...dn)}return{log:jn,warn:jn,error:jn,info:jn,debug:jn,table:jn}};var Vt=nn;it.set(Wt.value,nn)}Wt?.set&&it.set(Wt.set,Dn)}function ft(it){function Wt(nn,an){const Rn=an.id;return De(`Plugin ${Rn} accessed window.alert`,{pluginId:Rn,attrOrMethod:"alert",entity:"window"}),function(...Xn){console.log(`[plugin ${Rn}]`,...Xn)}}const Vt=Object.getOwnPropertyDescriptor(window,"alert");Vt?.value&&it.set(Vt.value,Wt),Vt?.set&&it.set(Vt.set,Dn)}function St(it){function Wt(nn,an){const Rn=an.id;return function(...jn){for(let dn=0;dn<jn.length;dn++){const Ra=jn[dn],Sa=String(Ra||"").toLowerCase();for(const Wa of Ie)if(Sa.includes("<"+Wa))throw De(`Plugin ${Rn} tried to set ${Wa} in innerHTML`,{pluginId:Rn,attrOrMethod:"innerHTML",param:Wa,entity:"HTMLElement"}),new Error("<"+Wa+"> is not allowed in sandboxed plugins");Sa.match(/onerror|onload|onsuccess|onbeforeunload/)&&(De(`Plugin ${Rn} tried to set forbidden attribute in innerHTML`,{pluginId:Rn,attrOrMethod:"innerHTML",param:Ra,entity:"HTMLElement"}),jn[dn]=Qe.A.sanitize(jn[dn]))}if((0,Ue.isFunction)(nn))return nn.apply(this,jn)}}const Vt=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const nn of Vt)nn?.set&&it.set(nn.set,Wt),nn?.value&&it.set(nn.value,Wt)}function Tt(it){function Wt(nn,an){const Rn=an.id;return function(jn,dn){if(jn&&Ie.includes(jn))return De(`Plugin ${Rn} tried to create ${jn}`,{pluginId:Rn,attrOrMethod:"createElement",param:jn,entity:"document"}),document.createDocumentFragment();if((0,Ue.isFunction)(nn))return nn.apply(this,[jn,dn])}}const Vt=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");Vt?.value&&it.set(Vt.value,Wt)}function Je(it){function Wt(Rn,Xn){const jn=Xn.id;return function(Ra,Sa){const Wa=Ra?.nodeName?.toLowerCase()||"";if(Ra&&Ie.includes(Wa))return De(`Plugin ${jn} tried to insert ${Wa}`,{pluginId:jn,attrOrMethod:"insertChild",param:Wa,entity:"HTMLElement"}),document.createDocumentFragment();if((0,Ue.isFunction)(Rn))return Rn.call(this,Ra,Sa)}}function Vt(Rn,Xn){const jn=Xn.id;return function(Ra,Sa){const Wa=Sa?.nodeName?.toLowerCase()||"";if(Sa&&Ie.includes(Wa))return De(`Plugin ${jn} tried to insert ${Wa}`,{pluginId:jn,attrOrMethod:"insertAdjacentElement",param:Wa,entity:"HTMLElement"}),document.createDocumentFragment();if((0,Ue.isFunction)(Rn))return Rn.call(this,Ra,Sa)}}const nn=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const Rn of nn)Rn?.value&&it.set(Rn.set,Wt);const an=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");an?.value&&it.set(an.set,Vt)}function Pt(it){function Wt(Rn,Xn){const jn=Xn.id;return function(...Ra){let Sa=Ra;const Wa=Ra?.filter(gs=>!Ie.includes(gs.nodeName.toLowerCase()));Sa=Wa,Sa.length!==Wa.length&&De(`Plugin ${jn} tried to append fobiddenElements`,{pluginId:jn,attrOrMethod:"append",param:Ra?.filter(gs=>Ie.includes(gs.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,Ue.isFunction)(Rn)&&Rn.apply(this,Sa)}}function Vt(Rn,Xn,jn){const dn=Xn.id;return function(Sa){const Wa=Sa?.nodeName?.toLowerCase()||"";if(Sa&&Ie.includes(Wa))return De(`Plugin ${dn} tried to append ${Wa}`,{pluginId:dn,attrOrMethod:"appendChild",param:Wa,entity:"HTMLElement"}),document.createDocumentFragment();if(jn&&Sa&&Wa==="script"&&Sa instanceof HTMLScriptElement){Ge(Sa.src,jn).then(()=>{Sa.onload?.call(Sa,new Event("load"))}).catch(gs=>{Sa.onerror?.call(Sa,new ErrorEvent("error",{error:gs}))});return}if((0,Ue.isFunction)(Rn))return Rn.call(this,Sa)}}const nn=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const Rn of nn)Rn?.value&&it.set(Rn.value,Wt);const an=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");an?.value&&it.set(an.value,Vt)}function Yt(it){const Wt=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function Vt(nn){return function(...Rn){try{const Xn=(0,Ue.cloneDeep)(Rn);(0,Ue.isFunction)(nn)&&nn.apply(this,Xn)}catch{throw new Error("postMessage arguments are invalid objects")}}}Wt?.value&&it.set(Wt.value,Vt)}function Lt(it){const Wt=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");Wt?.get&&it.set(Wt.get,()=>()=>window);const Vt=["write"];for(const nn of Vt){const an=Object.getOwnPropertyDescriptor(Document.prototype,nn);an?.set&&it.set(an.set,Dn),an?.value&&it.set(an.value,Dn)}}async function fn(it){const Wt=Reflect.get(window,"monaco");if(!Wt||Object.hasOwn(Wt,Ht))return;const Vt=Wt.languages.setMonarchTokensProvider;function nn(){return function(...an){return an.length!==2?Vt.apply(Wt,an):Vt.call(Wt,an[0],Ne(an[1]))}}it.set(Wt.languages.setMonarchTokensProvider,nn),Reflect.set(Wt,Ht,{})}async function En(it){const Wt=Object.getOwnPropertyDescriptor(window,"postMessage");function Vt(nn){return function(...Rn){try{const Xn=(0,Ue.cloneDeep)(Rn);(0,Ue.isFunction)(nn)&&nn.apply(this,Xn)}catch{throw new Error("postMessage arguments are invalid objects")}}}Wt?.value&&it.set(Wt.value,Vt)}function An(it){fn(wt)}function Gn(it){function Wt(Vt){return(0,Ue.isFunction)(Vt)?function(...nn){const an=Vt.apply(this,nn);return mt(an),an}:Vt}it.set(Ue.cloneDeep,Wt)}var zn=e(72331),sa=e(74848);async function ta(it,Wt){if(!Ye(it))return it;const Vt=await Promise.resolve(it.plugin);if(Reflect.has(Vt,"panel")&&Reflect.set(Vt,"panel",ra(Reflect.get(Vt,"panel"),Wt)),Reflect.has(Vt,"components")){const nn=Reflect.get(Vt,"components");Object.entries(nn).forEach(([an,Rn])=>{Reflect.set(nn,an,ra(Rn,Wt))}),Reflect.set(Vt,"components",nn)}if(Reflect.has(Vt,"root")&&Reflect.set(Vt,"root",ra(Reflect.get(Vt,"root"),Wt)),Reflect.has(Vt,"addedComponentConfigs")){const nn=Reflect.get(Vt,"addedComponentConfigs");for(const an of nn)Reflect.has(an,"component")&&Reflect.set(an,"component",ra(Reflect.get(an,"component"),Wt));Reflect.set(Vt,"addedComponentConfigs",nn)}if(Reflect.has(Vt,"exposedComponentConfigs")){const nn=Reflect.get(Vt,"exposedComponentConfigs");for(const an of nn)Reflect.has(an,"component")&&Reflect.set(an,"component",ra(Reflect.get(an,"component"),Wt));Reflect.set(Vt,"exposedComponentConfigs",nn)}if(Reflect.has(Vt,"configPages")){const nn=Reflect.get(Vt,"configPages")??[];for(const[an,Rn]of Object.entries(nn))!Rn.body||!(0,Ue.isFunction)(Rn.body)||Reflect.set(nn,an,{...Rn,body:ra(Rn.body,Wt)});Reflect.set(Vt,"configPages",nn)}return it}const ra=(it,Wt)=>{const Vt=Be.memo(nn=>(0,sa.jsx)("div",{"data-plugin-sandbox":Wt.id,style:{height:Wt.type===a.QE.app||Wt.type===a.QE.panel?"100%":"auto"},children:(0,sa.jsx)(it,{...nn})}));return Vt.displayName=`GrafanaSandbox(${it.displayName||it.name||"Component"})`,Vt},ea=new Map,Un={};async function oa({pluginId:it}){tt();try{const Wt=Se(it);return ea.has(it)||ea.set(it,Ca(Wt)),ea.get(it)}catch(Wt){const Vt=new Error(`Could not import plugin ${it} inside sandbox: `+Wt);throw Me(Vt,{pluginId:it,error:String(Wt)}),Vt}}async function Ca(it){return be("Loading with sandbox",{pluginId:it.id}),new Promise(async(Wt,Vt)=>{const nn=hn();let an;function Rn(jn){if(rt(jn)){const Sa=st(jn,it.id);return ot(Sa),Sa}else ke(jn);const dn=nn.get(jn);if(dn)return dn(jn,it,an);const Ra=An(jn);return Ra||jn}an=(0,ue.A)(window,{distortionCallback:Rn,defaultPolicy:ye.G,liveTargetCallback:Ze,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,setImmediate:function(jn,...dn){return setTimeout(jn,0,...dn)},get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get jQuery(){return Reflect.get(window,"jQuery")},get $(){return Reflect.get(window,"jQuery")},get grafanaBootData(){if(Un[it.id+"-grafanaBootData"]||(Un[it.id+"-grafanaBootData"]=!0,be("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:it.id,guessedPluginName:it.id,parent:"window",packageName:"window",key:"grafanaBootData"})),o.$.buildInfo.env==="development")throw new Error(`Error in ${it.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${it.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),o.$.bootData},async define(jn,dn,Ra){let Sa,Wa;Array.isArray(jn)?(Sa=jn,Wa=dn):(Sa=dn,Wa=Ra);try{const gs=await ya(Sa,it),Ss=Wa.apply(null,gs),zs=await ta(Ss,it);Wt(zs)}catch(gs){const Ss=new Error(`Could not execute plugin's define ${it.id}: `+gs);Me(Ss,{pluginId:it.id,error:String(gs)}),Vt(Ss)}}})}),me(an);let Xn="";try{Xn=await Fe(it)}catch(jn){const dn=new Error(`Could not load plugin code ${it.id}: `+jn);Me(dn,{pluginId:it.id,error:String(jn)}),Vt(dn)}try{an.evaluate(Xn)}catch(jn){const dn=new Error(`Could not run plugin ${it.id} inside sandbox: `+jn);Me(dn,{pluginId:it.id,error:String(jn)}),Vt(dn)}})}async function ya(it,Wt){const Vt={},nn={id:Wt.id,uri:Wt.module,exports:Vt},an=[];for(const Rn of it){let Xn=zn.s.get(Rn);if(typeof Xn=="function"&&(Xn=await Xn()),Xn?.__useDefault&&(Xn=Xn.default),Rn==="module"&&(Xn=nn),Rn==="exports"&&(Xn=Vt),!Xn){const jn=new Error(`[sandbox] Could not resolve dependency ${Rn}`);throw Me(jn,{pluginId:Wt.id,dependency:Rn,error:String(jn)}),jn}an.push(Xn)}return an}var Xa=e(73427),Ta=e(59253),Pa=e(95027);let pa=is;function Ua(it){pa=it}async function ma({pluginId:it}){return await Ka({pluginId:it})?pa({pluginId:it}):!1}async function Ka({pluginId:it}){return!o.$.featureToggles.pluginsFrontendSandbox||window.location.search.includes("nosandbox")&&o.$.buildInfo.env==="development"||!Xa.TP.isSignedIn?!1:Oa({pluginId:it})}async function Oa({pluginId:it}){try{const Wt=await(0,Pa.x)(it,{showErrorAlert:!1});return Wt.signatureType!==a.kv.grafana&&Wt.signature!=="internal"}catch{try{const Vt=await(0,Ta.CB)(it);return Vt.signatureType!==a.kv.grafana&&Vt.signature!=="internal"}catch{return!1}}}async function is({pluginId:it}){return!!o.$.enableFrontendSandboxForPlugins?.includes(it)}async function Bt({resolvedLanguage:it,fallbackLanguage:Wt,pluginId:Vt,translations:nn}){const an=nn[it],Rn=nn[Wt],Xn=an??Rn;if(!Xn){console.warn(`Could not find any translation for plugin ${Vt}`,{resolvedLanguage:it,fallbackLanguage:Wt});return}try{const jn=await ie.z.import((0,oe.Av)(Xn));if(!jn.default){console.warn(`Could not find default export for plugin ${Vt}`,{resolvedLanguage:it,fallbackLanguage:Wt,path:Xn});return}const dn=an?it:Wt;(0,h.eI)(dn,Vt,jn.default)}catch(jn){console.warn(`Could not load translation for plugin ${Vt}`,{resolvedLanguage:it,fallbackLanguage:Wt,error:jn,path:Xn})}}async function $t({path:it,pluginId:Wt,loadingStrategy:Vt,version:nn,moduleHash:an,translations:Rn}){nn&&(0,L.WB)({path:it,version:nn,loadingStrategy:Vt}),Rn&&await Bt({resolvedLanguage:(0,h.Ph)(),fallbackLanguage:p.Nm,pluginId:Wt,translations:Rn});const Xn=le[it];if(Xn)return typeof Xn=="function"?await Xn():Xn;const jn=(0,oe.Av)(it);if(o.$.featureToggles.pluginsSriChecks){const dn=System.resolve(jn),Ra=System.getImportMap().integrity;an&&Ra&&!Ra[dn]&&ie.z.addImportMap({integrity:{[dn]:an}})}return await ma({pluginId:Wt})?oa({pluginId:Wt}):ie.z.import(jn).catch(dn=>{let Ra=new Error("Could not load plugin",{cause:dn});throw console.error(Ra),c.z4.logError(Ra,{path:it,pluginId:Wt,pluginVersion:nn??"",expectedHash:an??"",loadingStrategy:Vt.toString(),sriChecksEnabled:String(!!o.$.featureToggles.pluginsSriChecks),originalErrorMessage:dn.originalErr?.message||"",originalErrorStack:dn.originalErr?.stack||"",systemJSOriginalErr:dn.originalErr?.message||""}),Ra})}const zt=it=>{(0,n.M)(it);const Wt=it.loadingStrategy??a.xf.fetch;return{path:it.module,version:it.info?.version,loadingStrategy:Wt,pluginId:it.id,moduleHash:it.moduleHash,translations:it.translations}},kt=async(it,Wt)=>{try{const Vt=await Wt;if(Vt.plugin){const nn=await Vt.plugin;return nn.meta=it,Tn.set(it.id,nn),nn}throw(0,n.M)(Vt),new Error("missing export: plugin")}catch(Vt){return console.warn("Error loading panel plugin: "+it.id,Vt),(0,l.W)(it,Vt)}},mn=async(it,Wt)=>{const Vt=await Wt;if(Vt.plugin){const nn=Vt.plugin;return nn.meta=it,Tn.set(it.id,nn),nn}if(Vt.Datasource){const nn=new s.tD(Vt.Datasource);return nn.setComponentsFromLegacyExports(Vt),nn.meta=it,Tn.set(it.id,nn),nn}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")},on=async(it,Wt)=>{const Vt=await Wt,{plugin:nn=new d.hX}=Vt;return nn.init(it),nn.meta=it,nn.setComponentsFromLegacyExports(Vt),i.eY.register({pluginId:it.id,configs:nn.exposedComponentConfigs||[]}),i.a9.register({pluginId:it.id,configs:nn.addedComponentConfigs||[]}),i.lQ.register({pluginId:it.id,configs:nn.addedLinkConfigs||[]}),i.rH.register({pluginId:it.id,configs:nn.addedFunctionConfigs||[]}),Tn.set(it.id,nn),nn},Ln=new Map,Hn=it=>{const Wt=Ln.get(it.id);if(Wt)return Wt;throw new Error(`Trying to get unknown plugin type ${it.type} from cache for plugin ${it.id}`)},Tn=new Map,Nn=it=>{const Wt=Tn.get(it);if(Wt)return Wt},gn=(it,Wt,Vt=zt)=>{const nn=Nn(it.id);if(nn)return c.z4.logDebug("Retrieving plugin from cache",{path:it.module,pluginId:it.id,pluginVersion:it.info?.version??"",expectedHash:it.moduleHash??"",loadingStrategy:it.loadingStrategy??a.xf.fetch,sriChecksEnabled:String(!!o.$.featureToggles.pluginsSriChecks)}),Promise.resolve(nn);if(Ln.has(it.id))return c.z4.logDebug("Retrieving plugin from inflight plugin load request",{path:it.module,pluginId:it.id,pluginVersion:it.info?.version??"",expectedHash:it.moduleHash??"",loadingStrategy:it.loadingStrategy??a.xf.fetch,sriChecksEnabled:String(!!o.$.featureToggles.pluginsSriChecks)}),Hn(it);const an=Vt(it),Rn=$t(an),Xn=Wt(it,Rn);return Ln.set(it.id,Xn),Hn(it)},Zn={importPanel:it=>gn(it,kt),importDataSource:it=>gn(it,mn),importApp:it=>gn(it,on),getPanel:it=>Nn(it)},kn=()=>{Ln.clear(),Tn.clear()}},17084:(ne,j,e)=>{"use strict";e.d(j,{A:()=>i,t:()=>c});var n=e(43173),a=e(33143),s=e(1131),d=e(97883),o=e(98279),l=e(15759);function i(p){const h=p.parent;if(!(0,l.l)(h))throw new Error("Parent layout is not a LayoutParent");if(p instanceof o.K)return p.addNewTab();const u=o.K.createEmpty();u.state.tabs[0].setState({layout:p.clone()}),h.switchLayout(u);const r=u.state.tabs[0];return p.publishEvent(new a.jO(r),!0),r}function c(p){if(!n.$.featureToggles.dashboardNewLayouts){if(p instanceof s.D)return p.addNewRow();throw new Error("New dashboard layouts feature not enabled but new layout found")}if(p instanceof d.V)return p.addNewRow();if(p instanceof o.K){const v=p.getCurrentTab();if(!v)throw new Error("Could find currently active tab");return c(v.state.layout)}const h=p.parent;if(!(0,l.l)(h))throw new Error("Parent layout is not a LayoutParent");const u=d.V.createFromLayout(h.getLayout());h.switchLayout(u);const r=u.state.rows[0];return p.publishEvent(new a.jO(r),!0),r}},17097:(ne,j,e)=>{"use strict";e.d(j,{ET:()=>B,FC:()=>D,Ft:()=>z,KJ:()=>C,Mc:()=>P,ZY:()=>M,d7:()=>T,iU:()=>f,nk:()=>U});var n=e(2543),a=e.n(n),s=e(33239),d=e(17548),o=e(25229),l=e(32899),i=e(92745),c=e(2863),p=e(45229),h=e(65642),u=e(95943),r=e(29043),v=e(47192),g=e(82612),E=e(12161),x=e(43652),m=e(87390),y=e(8535),b=e(87745);const D=(R,O,N)=>{if(N!==!1){const F=O.alert?"YES":void 0;p.A.publish(new b.bY({title:(0,i.t)("dashboard.remove-panel.title.remove-panel","Remove panel"),text:(0,i.t)("dashboard.remove-panel.text.remove-panel","Are you sure you want to remove this panel?"),icon:"trash-alt",confirmText:F,yesText:"Remove",onConfirm:()=>D(R,O,!1)}));return}R.removePanel(O),(0,y.JD)((0,m.O6)(O.key))},f=(R,O)=>{R.duplicatePanel(O)},C=R=>{let O=R;R instanceof g.a9&&(O=R.getSaveModel()),r.A.set(u.tH,JSON.stringify(O)),p.A.emit(l.r1.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},P=(R,O)=>{p.A.publish(new b.S8({component:v.Zy,props:{dashboard:R,panel:O}}))},T=(R,O)=>{p.A.publish(new b.S8({component:x.o,props:{panel:O,initialFolderUid:R.meta.folderUid,isOpen:!0}}))},M=R=>{p.A.publish(new b.S8({component:E.l,props:{onConfirm:()=>R.unlinkLibraryPanel(),isOpen:!0}}))},I=R=>{R.refresh()},B=R=>{const O={...R.options};O.legend.showLegend===!0?O.legend.showLegend=!1:O.legend.showLegend=!0,R.updateOptions(O)};function U(R,O){const N={timeInfo:"",timeRange:O};if(R.timeFrom){const F=(0,c.w)().replace(R.timeFrom,R.scopedVars),G=d.describeTextRange(F);if(G.invalid)return N.timeInfo="invalid time override",N;if((0,n.isString)(O.raw.from)){const H=(0,o.AN)(O.from).tz(),K=(0,o.AN)(O.to).tz(),w=s.parse(G.from,void 0,H);N.timeInfo=G.display,N.timeRange={from:w,to:s.parse(G.to,void 0,K),raw:{from:G.from,to:G.to}}}}if(R.timeShift){const F=(0,c.w)().replace(R.timeShift,R.scopedVars);if(d.describeTextRange(F).invalid)return N.timeInfo="invalid timeshift",N;const H="-"+F;N.timeInfo+=" timeshift "+H;const K=s.parseDateMath(H,N.timeRange.from,!1),w=s.parseDateMath(H,N.timeRange.to,!0);N.timeRange={from:K,to:w,raw:{from:K,to:w}}}return R.hideTimeOverride&&(N.timeInfo=""),N}function W(R){const N=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return R.maxDataPoints?R.maxDataPoints:Math.ceil(N*(R.gridPos.w/24))}function V(R,O){const N=R.plugin&&R.plugin.noPadding?0:config.theme.panelPadding*2,F=R.hasTitle()?config.theme.panelHeaderHeight:0;return O-F-N-PANEL_BORDER}function z(R){for(const N of R.panelIterator())N.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},17200:(ne,j,e)=>{"use strict";e.d(j,{c:()=>x,y:()=>y});var n=e(74848),a=e(22803),s=e(83505),d=e(46885),o=e(96540),l=e(76373),i=e(15245),c=e(92807),p=e(12594),h=e(63527),u=e(87105),r=e(63142),v=e(81563);const g=(D,f)=>D-f*Math.floor(D/f),E=8;var x=(D=>(D.InputElement="input",D.TextAreaElement="textarea",D))(x||{});const m=(D,f)=>({suggestionsWrapper:(0,a.css)({boxShadow:D.shadows.z2}),errorTooltip:(0,a.css)({position:"absolute",top:f+E+"px",zIndex:D.zIndex.tooltip}),inputWrapper:(0,a.css)({position:"relative"})}),y=({value:D="",onChange:f,suggestions:C,placeholder:P,error:T,invalid:M,type:I="input",style:B,autoFocus:U=!1})=>{const[W,V]=(0,o.useState)(!1),[z,R]=(0,o.useState)(0),[O,N]=(0,o.useState)(D.toString()),F=(0,o.useRef)(null),[G,H]=(0,o.useState)(0),[K,w]=(0,o.useState)(0),[Q,k]=(0,o.useState)(0),te="bottom-start",q=(0,r.$j)(),se=m(q,K),re=(0,o.useRef)();(0,o.useEffect)(()=>{F.current?.scrollTo(0,G)},[G]);const Y=l.getPositioningMiddleware(te),{refs:X,floatingStyles:J}=(0,s.we)({open:W,placement:te,onOpenChange:V,middleware:Y,whileElementsMounted:d.ll,strategy:"fixed"}),_=(0,o.useCallback)(ue=>{X.setReference(ue),re.current=ue},[X]),ee=(0,o.useRef)(null);(0,o.useEffect)(()=>{H(b(ee.current,z))},[z]);const ae=o.useCallback((ue,ye=re.current)=>{const fe=ye.selectionStart,Ee=ye.value;Ee[Q-1]==="$"?ye.value=Ee.slice(0,Q)+ue.value+Ee.slice(fe):ye.value=Ee.slice(0,Q)+`\${${ue.value}}`+Ee.slice(fe),N(ye.value),V(!1),R(0),f(ye.value)},[f,Q]),le=o.useCallback(ue=>{if(!W){if(ue.key==="$"||ue.key===" "&&ue.ctrlKey){k(re.current.selectionStart||0),V(!0);return}return}switch(ue.key){case"Backspace":case"Escape":case"ArrowLeft":case"ArrowRight":return V(!1),R(0);case"Enter":return ue.preventDefault(),ae(C[z]);case"ArrowDown":case"ArrowUp":ue.preventDefault();const ye=ue.key==="ArrowDown"?1:-1;return R(fe=>g(fe+ye,C.length));default:return}},[W,C,z,ae]),L=o.useCallback(ue=>{N(ue.currentTarget.value)},[]),ie=o.useCallback(ue=>{f(ue.currentTarget.value)},[f]);(0,o.useEffect)(()=>{w(re.current.clientHeight)},[]);const oe={placeholder:P,invalid:M,value:O,onChange:L,onBlur:ie,onKeyDown:le};return(0,n.jsxs)("div",{className:se.inputWrapper,style:B??{},children:[W&&(0,n.jsx)(i.ZL,{children:(0,n.jsx)("div",{ref:X.setFloating,style:J,className:se.suggestionsWrapper,children:(0,n.jsx)(c.P,{maxHeight:"300px",onScroll:ue=>H(ue.currentTarget.scrollTop??0),ref:F,children:(0,n.jsx)(v.k,{activeRef:ee,suggestions:C,onSuggestionSelect:ae,onClose:()=>V(!1),activeIndex:z})})})}),M&&T&&(0,n.jsx)("div",{className:se.errorTooltip,children:(0,n.jsx)(p.P,{children:T})}),I==="input"?(0,n.jsx)(h.p,{...oe,ref:_,autoFocus:U}):(0,n.jsx)(u.f,{...oe,ref:_,autoFocus:U,rows:5})]})};y.displayName="SuggestionsInput";function b(D,f){return(D?.clientHeight??0)*f}},17305:(ne,j,e)=>{"use strict";e.d(j,{T:()=>c});var n=e(74848),a=e(16817),s=e(92745),d=e(45967),o=e(99887),l=e(58851),i=e(95027);function c({pluginId:p,size:h="md"}){const{value:u,loading:r}=(0,a.A)(()=>(0,i.x)(p));if(r||!u)return null;const v=u.info.logos?.small,g=u.name,E=(0,l.cs)(h),x=v?(0,n.jsx)("img",{src:v,alt:g,height:E}):(0,n.jsx)(o.E,{text:p,color:"orange"});return(0,n.jsx)(d.m,{content:(0,s.t)("alerting.plugin-origin-badge.tooltip-managed-by-plugin","This rule is managed by the {{pluginName}} plugin",{pluginName:g}),children:x})}},17340:(ne,j,e)=>{"use strict";e.d(j,{SW:()=>c,i2:()=>u,v2:()=>p,ve:()=>E});var n=e(44248),a=e(93389),s=e(1131),d=e(20246),o=e(1682),l=e(92119),i=e(67350);function c(x,m){return{kind:"GridLayout",spec:{items:h(x,m)}}}function p(x,m,y,b){if(x.kind!=="GridLayout")throw new Error("Invalid layout kind");return new s.D({grid:new n.hy({isLazy:(0,d.DP)(y),children:v(x,m,b)})})}function h(x,m){let y=[];for(const b of x.state.grid.state.children)b instanceof a.U&&(b.state.variableName?y=y.concat(r(b,m)):y.push(u(b)));return y}function u(x,m){let y,b=0,D=0,f=0,C=0,P=x;if(!(P.state.body instanceof n.Eb))throw new Error("DashboardGridItem body expected to be VizPanel");C=(P.state.variableName?P.state.itemHeight:P.state.height)??0,b=P.state.x??0,D=P.state.y??0,f=P.state.width??0;const T=P.state.variableName;let M=o.b4.getElementIdentifierForVizPanel(P.state.body);if(y={kind:"GridLayoutItem",spec:{x:b,y:m??D,width:f,height:C,element:{kind:"ElementReference",name:M}}},T){const I={mode:"variable",value:T};P.state.maxPerRow&&(I.maxPerRow=P.getMaxPerRow()),P.state.repeatDirection&&(I.direction=P.getRepeatDirection()),y.spec.repeat=I}if(!y)throw new Error("Unsupported grid item type");return y}function r(x,m=!1){if(m){if(x.state.body instanceof n.Eb&&(0,l.ME)(x.state.body))return[];if(x.state.repeatedPanels){const{h:y,w:b,columnCount:D}=(0,l.bR)(x);return x.state.repeatedPanels.map((C,P)=>{let T=0,M=0;x.state.repeatDirection==="v"?(T=x.state.x,M=P*y):(T=P%D*b,M=x.state.y+Math.floor(P/D)*y);const I={x:T,y:M,w:b,h:y};return{kind:"GridLayoutItem",spec:{x:I.x,y:I.y,width:I.w,height:I.h,repeat:{mode:"variable",value:x.state.variableName,maxPerRow:x.getMaxPerRow(),direction:x.state.repeatDirection},element:{kind:"ElementReference",name:C.state.key}}}})}return[]}else return[u(x)]}function v(x,m,y){return x.spec.items.map(D=>{if(D.kind==="GridLayoutItem")return E(D,m,y);throw new Error(`Unknown layout element kind: ${D.kind}`)})}function g(x,m,y,b){let D;return m.kind==="Panel"?D=(0,i.Gl)(m,b):D=(0,i.kB)(m,b),new a.U({key:`grid-item-${b??m.spec.id}`,x:x.x,y:y??x.y,width:x.repeat?.direction==="h"?24:x.width,height:x.height,itemHeight:x.height,body:D,variableName:x.repeat?.value,repeatDirection:x.repeat?.direction,maxPerRow:x.repeat?.maxPerRow})}function E(x,m,y){const b=m[x.spec.element.name];if(!b)throw new Error(`Panel with uid ${x.spec.element.name} not found in the dashboard elements`);let D;return y&&(D=y()),g(x.spec,b,void 0,D)}},17349:(ne,j,e)=>{"use strict";e.d(j,{X:()=>a});var n=e(11257);const a=[n.w.AlertingTemplatesRead,n.w.AlertingTemplatesWrite,n.w.AlertingTemplatesDelete]},17503:(ne,j,e)=>{"use strict";e.d(j,{S1:()=>c,Vh:()=>u,aH:()=>d,dK:()=>r,hF:()=>l,jq:()=>o,t9:()=>p,tP:()=>i,uY:()=>h});var n=e(95004),a=e(41119);const s=100;function d(v){if(v.fields.length<2)return!1;const g=v.fields.find(x=>x.type===n.PU.number);let E=!1;for(const x of v.fields)if(l(x)){E=!0;break}return E&&g!==void 0}function o(v){return!v.find(g=>!d(g))}function l(v){if(v.type!==n.PU.time)return!1;let g=null,E=v.values.length>s?s:v.values.length;for(let x=0;x<E;x++){const m=v.values[x];if(g===null||m!==null&&m>g)g=m;else return!1}return!0}function i(v){for(let g=0;g<v.length;g++){const E=(0,a.KR)(v[g]);if(E.timeField!==void 0&&E.timeIndex!==void 0)return!0}return!1}function c(v){return v.fields.some(g=>g.type===n.PU.time)}function p(v,g){if(v.meta?.uniqueRowIdFields!==void 0)return v.meta.uniqueRowIdFields.map(E=>v.fields[E].values[g]).join("-")}function h(v,g){if(g instanceof Array)for(let E=0;E<g.length;E++)v.fields[E].values.push(g[E]);else for(const E of v.fields)E.values.push(g[E.name]);try{v.length++}catch{}}function u(v,g,E){v.fields.forEach(x=>{x.type===n.PU.time&&(x.values=x.values.map(m=>g<0?m-g:m+g)),x.config={...x.config??{},custom:{...x.config?.custom??{},timeCompare:{diffMs:g,isTimeShiftQuery:!0}}},(x.type===n.PU.number||x.type===n.PU.boolean||x.type===n.PU.enum)&&(x.config.custom={...x.config.custom??{},lineStyle:{fill:"dash",dash:[1,5,4,5]}})})}function r(v,g,E){const x=v.refId;if(!x||!x.endsWith("-compare"))return!1;const m=x.replace("-compare",""),y=g.find(P=>P.refId===m&&!P.meta?.timeCompare?.isTimeShiftQuery);if(!y)return!1;const b=v.fields.find(P=>P.type===n.PU.time),D=y.fields.find(P=>P.type===n.PU.time);if(!b?.values.length||!D?.values.length)return!1;const f=b.values.find(P=>P!=null),C=D.values.find(P=>P!=null);return f==null||C==null?!1:f<E.from.valueOf()}},17564:(ne,j,e)=>{"use strict";e.d(j,{S:()=>n});function n(a){return"instanceSettings"in a&&"meta"in a}},17621:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>p,jl:()=>l});var n=e(65307),a=e(15203);const s={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1},d=(h,u)=>({...h,...u.payload,hasChanged:!1}),o=(0,n.Z0)({name:"folder",initialState:s,reducers:{loadFolder:d,setFolderTitle:(h,u)=>({...h,title:u.payload,hasChanged:u.payload.trim().length>0})},extraReducers:h=>{h.addMatcher(a.vZ.getFolder.matchFulfilled,d)}}),{loadFolder:l,setFolderTitle:i}=o.actions,p={folder:o.reducer}},17732:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>v});var n=e(74848),a=e(96540),s=e(16817),d=e(40996),o=e(92745),l=e(30703),i=e(22787),c=e(45861),p=e(63527),h=e(63142),u=e(30124),r=e(37666);const v=({libraryPanel:g,isUnsavedPrompt:E,onDismiss:x,onConfirm:m,onDiscard:y})=>{const[b,D]=(0,a.useState)(""),f=(0,s.A)(async()=>{const B=await(0,u.xV)(g.state.uid);return B&&B.length>0?B.map(U=>U.name):[]},[g.state.uid]),[C,P]=(0,a.useState)([]);(0,d.A)(()=>f.value?P(f.value.filter(B=>B.toLowerCase().includes(b.toLowerCase()))):P([]),300,[f.value,b]);const T=(0,h.of)(r.o),M=(0,a.useCallback)(()=>{y()},[y]),I=E?"Unsaved library panel changes":"Save library panel";return(0,n.jsx)(i.a,{title:I,onDismiss:x,isOpen:!0,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:T.textInfo,children:(0,n.jsxs)(o.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.affected-dashboards",count:g.state._loadedPanel?.meta?.connectedDashboards,children:["This update will affect ",(0,n.jsxs)("strong",{children:["{{count}}"," dashboards."]})," The following dashboards using the panel will be affected:"]})}),(0,n.jsx)(p.p,{className:T.dashboardSearch,prefix:(0,n.jsx)(l.I,{name:"search"}),placeholder:(0,o.t)("dashboard-scene.save-library-viz-panel-modal.placeholder-search-affected-dashboards","Search affected dashboards"),value:b,onChange:B=>D(B.currentTarget.value)}),f.loading?(0,n.jsx)("p",{children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.loading-connected-dashboards",children:"Loading connected dashboards..."})}):(0,n.jsxs)("table",{className:T.myTable,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("th",{children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.dashboard-name",children:"Dashboard name"})})})}),(0,n.jsx)("tbody",{children:C.map((B,U)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:B})},`dashrow-${U}`))})]}),(0,n.jsxs)(i.a.ButtonRow,{children:[(0,n.jsx)(c.$n,{variant:"secondary",onClick:x,fill:"outline",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.cancel",children:"Cancel"})}),E&&(0,n.jsx)(c.$n,{variant:"destructive",onClick:M,children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.discard",children:"Discard"})}),(0,n.jsx)(c.$n,{onClick:()=>{m()},children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.update-all",children:"Update all"})})]})]})})}},17752:(ne,j,e)=>{"use strict";e.d(j,{BC:()=>p,DW:()=>l,Eo:()=>u,FN:()=>o,NY:()=>h,T7:()=>c,nS:()=>a,sJ:()=>i,wf:()=>d,y8:()=>r});var n=e(65307);const a={id:"",isValid:!0,errors:{},name:"",extended:null},s=(0,n.Z0)({name:"templating/editor",initialState:a,reducers:{variableEditorMounted:(v,g)=>{v.name=g.payload.name,v.id=g.payload.id},variableEditorUnMounted:(v,g)=>a,changeVariableNameSucceeded:(v,g)=>{v.name=g.payload.data.newName,delete v.errors.name,v.isValid=Object.keys(v.errors).length===0},changeVariableNameFailed:(v,g)=>{v.name=g.payload.newName,v.errors.name=g.payload.errorText,v.isValid=Object.keys(v.errors).length===0},addVariableEditorError:(v,g)=>{v.errors[g.payload.errorProp]=g.payload.errorText,v.isValid=Object.keys(v.errors).length===0},removeVariableEditorError:(v,g)=>{delete v.errors[g.payload.errorProp],v.isValid=Object.keys(v.errors).length===0},changeVariableEditorExtended:(v,g)=>{v.extended={...v.extended,...g.payload}},cleanEditorState:()=>a}}),d=s.reducer,{changeVariableNameSucceeded:o,changeVariableNameFailed:l,variableEditorMounted:i,variableEditorUnMounted:c,changeVariableEditorExtended:p,addVariableEditorError:h,removeVariableEditorError:u,cleanEditorState:r}=s.actions},17788:(ne,j,e)=>{"use strict";e.d(j,{Gq:()=>o,zf:()=>l});var n=e(5556),a=e(43173),s=e(36490);const d="grafana.dashboard.preservedUrlFiltersState";function o(i){const c=window.sessionStorage.getItem(d);if(c){const p=new URLSearchParams(c),h=s.Ny.getSearch(),u=new URLSearchParams;p.forEach((v,g)=>{(!h.has(g)||h.get(g)==="")&&h.append(g,v)}),h.forEach((v,g)=>{v!==""&&u.append(g,v)});for(const v of Array.from(u.keys()))v.startsWith("var-")&&(i.state.$variables?.getByName(v.replace("var-",""))||u.delete(v));const r=u.toString();r&&s.Ny.replace({search:r})}}function l(i,c){if(!a.$.featureToggles.preserveDashboardStateWhenNavigating||!c)return;const p={};i.forEach((r,v)=>{p[v]=r});const h=Object.fromEntries(Object.entries(p).filter(([r])=>r.startsWith("var-")||r==="from"||r==="to"||r==="timezone")),u=Object.fromEntries(Object.entries(h).filter(([r,v])=>!(Array.isArray(v)&&v.length===0)));Object.keys(u).length>0?window.sessionStorage.setItem(d,n.kM.renderUrl("",u)):window.sessionStorage.removeItem(d)}},17862:(ne,j,e)=>{"use strict";e.d(j,{AM:()=>c,Cj:()=>h,yO:()=>E});var n=e(50803),a=e(60171),s=e(84500),d=e(61371);function o(x,m){try{let y=x;for(const b of m)y=y[b];return y}catch{return}}function l(x,m){return typeof x==typeof m&&(typeof x=="string"&&x===m||Array.isArray(x)&&x.length===m.length&&x.every((y,b)=>y===m[b]))}function i(x,m){return x===m||x&&m&&x.selected===m.selected&&l(x.text,m.text)&&l(x.value,m.value)}function c(x,m,y,b,D){const f=p(x),C=m,P=u(C.timeSettings,f.timeSettings),T=v(C,f,b),M=C.timeSettings.autoRefresh!==f.timeSettings.autoRefresh;y||(C.timeSettings.from=f.timeSettings.from,C.timeSettings.to=f.timeSettings.to),D||(C.timeSettings.autoRefresh=f.timeSettings.autoRefresh);const I=(0,d.G4)(x,C),B=Object.values(I).reduce((U,W)=>U+W.length,0);return{changedSaveModel:C,initialSaveModel:f,diffs:I,diffCount:B,hasChanges:B>0,hasTimeChanges:P,hasVariableValueChanges:T,hasRefreshChange:M,hasMigratedToV2:!(0,a.aK)(x)}}function p(x){if((0,a.aK)(x))return x;const m={dashboard:x,meta:{}};return n.Op.ensureV2Response(m).spec}function h(x,m,y,b,D){const f=x,C=m,P=u(C.time,f.time),T=g(C,f,b),M=C.refresh!==f.refresh;y||(C.time=f.time),D||(C.refresh=f.refresh);const I=(0,d.G4)(f,C),B=Object.values(I).reduce((U,W)=>U+W.length,0);return{changedSaveModel:C,initialSaveModel:f,diffs:I,diffCount:B,hasChanges:B>0,hasTimeChanges:P,isNew:C.version===0,hasVariableValueChanges:T,hasRefreshChange:M}}function u(x={},m={}){return x.from!==m.from||x.to!==m.to}function r(x,m){if(x===void 0&&m===void 0)return console.warn("Adhoc variable filter property is undefined"),!0;if(x===void 0&&m!==void 0||m===void 0&&x!==void 0)return console.warn("Adhoc variable filter property is undefined"),!1;if(x?.length!==m?.length)return!1;for(let y=0;y<(x?.length??0);y++){const b=x?.[y],D=m?.[y];if(b?.key!==D?.key||b?.operator!==D?.operator||b?.value!==D?.value)return!1}return!0}function v(x,m,y){const b=m.variables??[],D=x.variables??[];let f=!1;for(const C of D){const P=I=>I.kind==="QueryVariable"||I.kind==="CustomVariable"||I.kind==="DatasourceVariable"||I.kind==="ConstantVariable"||I.kind==="IntervalVariable"||I.kind==="TextVariable"||I.kind==="GroupByVariable",T=I=>I.kind==="QueryVariable"||I.kind==="CustomVariable"||I.kind==="DatasourceVariable"||I.kind==="IntervalVariable"||I.kind==="GroupByVariable",M=b.find(({spec:I,kind:B})=>I.name===C.spec.name&&B===C.kind);M&&((P(C)&&P(M)&&!i(C.spec.current,M.spec.current)||C.kind==="AdhocVariable"&&M.kind==="AdhocVariable"&&!r(C.spec.filters,M.spec.filters))&&(f=!0),y||(C.kind==="AdhocVariable"?C.spec.filters=M.spec.filters:C.kind==="TextVariable"&&(C.spec.query=M.spec.query),C.kind!=="AdhocVariable"&&(P(C)&&P(M)&&(C.spec.current=M.spec.current),T(C)&&T(M)&&(C.spec.options=M.spec.options))))}return f}function g(x,m,y){const b=m.templating?.list??[],D=x.templating?.list??[];let f=!1;for(const C of D){const P=b.find(({name:T,type:M})=>T===C.name&&M===C.type);if(P&&(P.current&&delete P.current.selected,i(C.current,P.current)?C.type==="adhoc"&&!r((0,s.Gs)(C?.filters),(0,s.Gs)(P?.filters))&&(f=!0):f=!0,!y)){const T=C;T.type==="adhoc"?T.filters=P.filters:T.type==="textbox"&&(T.query=P.query),T.type!=="adhoc"&&(C.current=P.current,C.options=P.options)}}return f}function E(x,m){const y=(0,d.G4)(m,x),b=Object.values(y).reduce((D,f)=>D+f.length,0);return{changedSaveModel:x,initialSaveModel:m,diffs:y,diffCount:b,hasChanges:b>0}}},17914:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>l});var n=e(74848),a=e(92745),s=e(41654),d=e(77824),o=e(44580);const l=({value:i,onChange:c,item:p})=>{const h=[{label:(0,a.t)("timeseries.insert-nulls-editor.disconnect-options.label-never","Never"),value:!1},{label:(0,a.t)("timeseries.insert-nulls-editor.disconnect-options.label-threshold","Threshold"),value:36e5}],u=typeof i=="number";return h[1].value=u?i:36e5,(0,n.jsxs)(s.B,{children:[(0,n.jsx)(d.z,{value:i,options:h,onChange:c}),u&&(0,n.jsx)(o.g,{value:i,onChange:c,inputPrefix:o.F.GreaterThan,isTime:p.settings?.isTime??!1})]})}},18027:(ne,j,e)=>{"use strict";e.d(j,{I:()=>c});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(44019),l=e(12594),i=e(79233);const c=({children:h,label:u,tooltip:r,labelWidth:v="auto",invalid:g,loading:E,disabled:x,required:m,className:y,htmlFor:b,grow:D,shrink:f,error:C,transparent:P,interactive:T,validationMessageHorizontalOverflow:M,...I})=>{const B=(0,d.$j)(),U=p(B,D,f),W=b??(0,o.getChildId)(h),V=typeof u=="string"?(0,n.jsx)(i.c,{interactive:T,width:v,tooltip:r,htmlFor:W,transparent:P,children:`${u}${m?" *":""}`}):u;return(0,n.jsxs)("div",{className:(0,a.cx)(U.container,y),...I,children:[V,(0,n.jsxs)("div",{className:U.childContainer,children:[(0,s.cloneElement)(h,{invalid:g,disabled:x,loading:E}),g&&C&&(0,n.jsx)("div",{className:(0,a.cx)(U.fieldValidationWrapper,{[U.validationMessageHorizontalOverflow]:!!M}),children:(0,n.jsx)(l.P,{children:C})})]})]})};c.displayName="InlineField";const p=(h,u,r)=>({container:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${u?1:0} ${r?1:0} auto`,margin:`0 ${h.spacing(.5)} ${h.spacing(.5)} 0`}),childContainer:(0,a.css)({flex:`${u?1:0} ${r?1:0} auto`}),fieldValidationWrapper:(0,a.css)({marginTop:h.spacing(.5)}),validationMessageHorizontalOverflow:(0,a.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},18030:(ne,j,e)=>{"use strict";e.d(j,{F:()=>s});var n=e(62467),a=e(92511);class s{canWork({dashboard:o}){return o?.annotations?.list?.some(l=>l.enable&&!!l.snapshotData)}work(o){if(!this.canWork(o))return(0,a.$)();const l=this.getAnnotationsFromSnapshot(o.dashboard);return(0,n.of)({annotations:l,alertStates:[]})}getAnnotationsFromSnapshot(o){return(o?.annotations?.list?.filter(p=>p.enable)).filter(p=>!!p.snapshotData).reduce((p,h)=>p.concat((0,a.G9)(h,h.snapshotData)),[])}getAnnotationsInSnapshot(o,l){const i=this.getAnnotationsFromSnapshot(o);return(0,a.FK)(i,l)}}},18105:(ne,j,e)=>{"use strict";e.d(j,{N:()=>r,RH:()=>x});var n=e(74848),a=e(22803),s=e(96540),d=e(36638),o=e(57866),l=e(46644),i=e(92745),c=e(739),p=e(63142),h=e(63527),u=e(18857);const r=[{label:"==",value:c.zT.EQ},{label:"!=",value:c.zT.NEQ},{label:">",value:c.zT.GT},{label:">=",value:c.zT.GTE},{label:"<",value:c.zT.LT},{label:"<=",value:c.zT.LTE}];function v(m){return m===l.gy.allIsNull||m===l.gy.allIsZero}const g=({options:m,onChange:y})=>{const b=(0,p.of)(E),D=(0,s.useMemo)(()=>l.AS.selectOptions([m?.reducer]),[m?.reducer]),f=(0,s.useCallback)(I=>y({...m,reducer:I.value}),[m,y]),C=(0,s.useCallback)(I=>y({...m,op:I.value}),[m,y]),P=(0,s.useCallback)(I=>{const B=I.currentTarget.valueAsNumber;return y({...m,value:B})},[m,y]),T=m??{},M=v(T.reducer);return(0,n.jsxs)("div",{className:b.spot,children:[(0,n.jsx)(u.l6,{value:D.current,options:D.options,onChange:f,placeholder:(0,i.t)("grafana-ui.field-value-matcher.select-field-placeholder","Select field reducer")}),T.reducer&&!M&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.l6,{value:r.find(I=>I.value===T.op),options:r,onChange:C,"aria-label":(0,i.t)("grafana-ui.field-value-matcher.operator-label","Comparison operator"),width:19}),(0,n.jsx)(h.p,{type:"number",value:T.value,onChange:P})]})]})},E=m=>({spot:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),x=()=>({id:o.Ct.byValue,component:g,matcher:d.sJ.get(o.Ct.byValue),name:(0,i.t)("grafana-ui.matchers-ui.name-fields-with-value","Fields with values"),description:(0,i.t)("grafana-ui.matchers-ui.description-fields-with-value","Set properties for fields with reducer condition"),optionsToLabel:m=>`${m?.reducer} ${m?.op} ${m?.value}`})},18178:(ne,j,e)=>{"use strict";e.d(j,{u:()=>R});var n=e(92745),a=e(44248),s=e(45229),d=e(87745),o=e(1131),l=e(87308),i=e(74848),c=e(22803),p=e(96540),h=e(63142),u=e(30703),r=e(9931),v=e(18615),g=e(92119),E=e(93389),x=e(8515),m=e(22787),y=e(49785),b=e(51898),D=e(37386),f=e(63527),C=e(34999),P=e(89640),T=e(45861),M=e(31819);const I=({repeat:O,title:N,sceneContext:F,isUsingDashboardDS:G,onUpdate:H,onCancel:K})=>{const[w,Q]=(0,p.useState)(O),k=(0,p.useCallback)(re=>Q(re),[Q]),{handleSubmit:te,register:q}=(0,y.mN)({defaultValues:{title:N}}),se=re=>{H(re.title,w)};return(0,i.jsxs)("form",{onSubmit:te(se),children:[(0,i.jsx)(D.D,{label:(0,n.t)("dashboard.default-layout.row-options.form.title","Title"),children:(0,i.jsx)(f.p,{...q("title"),type:"text"})}),(0,i.jsx)(D.D,{label:(0,n.t)("dashboard.default-layout.row-options.form.repeat-for.label","Repeat for"),children:(0,i.jsx)(M.U,{sceneContext:F,repeat:w,onChange:k})}),G&&(0,i.jsx)(C.F,{"data-testid":b.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:(0,i.jsxs)(n.x6,{i18nKey:"dashboard.default-layout.row-options.form.repeat-for.warning.text",children:["Panels in this row use the ",{SHARED_DASHBOARD_QUERY:r.K}," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."]})}),(0,i.jsx)(P.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows",children:(0,i.jsx)(n.x6,{i18nKey:"dashboard.default-layout.row-options.form.repeat-for.learn-more",children:"Learn more"})})]})}),(0,i.jsxs)(m.a.ButtonRow,{children:[(0,i.jsx)(T.$n,{type:"button",variant:"secondary",onClick:K,fill:"outline",children:(0,i.jsx)(n.x6,{i18nKey:"dashboard.default-layout.row-options.form.cancel",children:"Cancel"})}),(0,i.jsx)(T.$n,{type:"submit",children:(0,i.jsx)(n.x6,{i18nKey:"dashboard.default-layout.row-options.form.update",children:"Update"})})]})]})},B=({repeat:O,title:N,parent:F,onDismiss:G,onUpdate:H,isUsingDashboardDS:K})=>{const w=(0,h.of)(U);return(0,i.jsx)(m.a,{isOpen:!0,title:(0,n.t)("dashboard.default-layout.row-options.modal.title","Row options"),onDismiss:G,className:w.modal,children:(0,i.jsx)(I,{sceneContext:F,repeat:O,title:N,onCancel:G,onUpdate:H,isUsingDashboardDS:K})})},U=()=>({modal:(0,c.css)({label:"RowOptionsModal",width:"500px"})}),W=({repeat:O,title:N,parent:F,onUpdate:G,isUsingDashboardDS:H})=>(0,i.jsx)(x.$s,{children:({showModal:K,hideModal:w})=>(0,i.jsx)("button",{type:"button",className:"pointer","aria-label":(0,n.t)("dashboard.default-layout.row-options.button.label","Row options"),onClick:()=>{K(B,{title:N,repeat:O,parent:F,onDismiss:w,onUpdate:(Q,k)=>{G(Q,k),w()},isUsingDashboardDS:H})},children:(0,i.jsx)(u.I,{name:"cog"})})});W.displayName="RowOptionsButton";function V({model:O}){const N=O.getParent(),{title:F,children:G}=N.useState(),H=(0,g.MZ)(O),{meta:K,isEditing:w}=(0,g.TN)(O),Q=(0,h.of)(z),k=(0,p.useMemo)(()=>G.some(q=>{if(!(q instanceof E.U))return!1;if(q.state.body instanceof a.Eb){const se=(0,g.un)(q.state.body);return se?.state.datasource?.uid===r.K||se?.state.datasource?.uid===v.uv&&se?.state.queries.some(re=>re.datasource?.uid===r.K)}return!1}),[G]),te=N.state.$behaviors?.find(q=>q instanceof l.L);return(0,i.jsx)(i.Fragment,{children:K.canEdit&&w&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:Q.rowActions,children:[(0,i.jsx)(W,{title:F,repeat:te instanceof l.L?te.state.variableName:void 0,parent:H,onUpdate:(q,se)=>O.onUpdate(q,se),isUsingDashboardDS:k}),(0,i.jsx)("button",{type:"button",onClick:()=>O.onDelete(),"aria-label":(0,n.t)("dashboard.default-layout.row-actions.delete","Delete row"),children:(0,i.jsx)(u.I,{name:"trash-alt"})})]})})})}const z=O=>({rowActions:(0,c.css)({color:O.colors.text.secondary,lineHeight:"27px",button:{color:O.colors.text.secondary,paddingLeft:O.spacing(2),background:"transparent",border:"none","&:hover":{color:O.colors.text.maxContrast}}})});class R extends a.Bs{static{this.Component=V}getParent(){if(!(this.parent instanceof a.tI))throw new Error("RowActions must have a SceneGridRow parent");return this.parent}removeRow(N){a.jh.getAncestor(this,o.D).removeRow(this.getParent(),N)}onUpdate(N,F){const G=this.getParent();let H;if(G.state.$behaviors)for(let K of G.state.$behaviors)K instanceof l.L&&(H=K);N!==G.state.title&&G.setState({title:N}),F?(H&&H.removeBehavior(),H=new l.L({variableName:F}),G.setState({$behaviors:[...G.state.$behaviors??[],H]})):H?.removeBehavior()}onDelete(){s.A.publish(new d.bY({title:(0,n.t)("dashboard.default-layout.row-actions.modal.title","Delete row"),text:(0,n.t)("dashboard.default-layout.row-actions.modal.text","Are you sure you want to remove this row and all its panels?"),altActionText:(0,n.t)("dashboard.default-layout.row-actions.modal.alt-action","Delete row only"),icon:"trash-alt",onConfirm:()=>this.removeRow(!0),onAltAction:()=>this.removeRow()}))}}},18203:(ne,j,e)=>{"use strict";e.d(j,{z:()=>v});var n=e(74848),a=e(22803),s=e(92745),d=e(30703),o=e(59243),l=e(89640),i=e(41654),c=e(18027),p=e(79233),h=e(87105),u=e(63142);const r="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",v=({labelWidth:m,onChange:y,query:b,onRunQuery:D})=>{const f=T=>{y({...b,expression:T.target.value})},C=(0,u.of)(E),P=()=>{b.expression&&D()};return(0,n.jsx)(i.B,{children:(0,n.jsx)(c.I,{label:(0,n.jsx)(p.c,{width:"auto",children:(0,n.jsx)(o.G,{fitContent:!0,content:(0,n.jsxs)("div",{className:C.documentationContainer,children:[(0,n.jsx)("div",{children:(0,n.jsxs)(s.x6,{i18nKey:"expressions.math.run-math-operations",values:{refExample:"${refId}",ref1:"$A",ref2:"$B",ref3:"$C",example:"$A + $B"},children:["Run math operations on one or more queries. You reference the query by ","{{refExample}}"," ie."," ","{{ref1}}",", ","{{ref2}}",", ","{{ref3}}","etc.",(0,n.jsx)("br",{}),"Example: ",(0,n.jsx)("code",{children:"{{example}}"})]})}),(0,n.jsx)("header",{className:C.documentationHeader,children:(0,n.jsx)(s.x6,{i18nKey:"expressions.math.available-math-functions",children:"Available math functions"})}),(0,n.jsxs)("div",{className:C.documentationFunctions,children:[(0,n.jsx)(g,{name:"abs",description:(0,s.t)("expression.math.description-abs","Returns the absolute value of its argument which can be a number or a series")}),(0,n.jsx)(g,{name:"is_inf",description:(0,s.t)("expression.math.description-is-inf","Returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values.")}),(0,n.jsx)(g,{name:"is_nan",description:(0,s.t)("expression.math.description-is-nan","Returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values.")}),(0,n.jsx)(g,{name:"is_null",description:(0,s.t)("expression.math.description-is-null","Returns 1 for null values and 0 for other values. It's able to operate on series or scalar values.")}),(0,n.jsx)(g,{name:"is_number",description:(0,s.t)("expression.math.description-is-number","Returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values.")}),(0,n.jsx)(g,{name:"log",description:(0,s.t)("expression.math.description-log","Returns the natural logarithm of its argument, which can be a number or a series")}),(0,n.jsx)(g,{name:"inf, infn, nan, and null",description:(0,s.t)("expression.math.description-inf-nan-null","The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name.")}),(0,n.jsx)(g,{name:"round",description:(0,s.t)("expression.math.description-round","Returns a rounded integer value. It's able to operate on series or escalar values.")}),(0,n.jsx)(g,{name:"ceil",description:(0,s.t)("expression.math.description-ceil","Rounds the number up to the nearest integer value. It's able to operate on series or escalar values.")}),(0,n.jsx)(g,{name:"floor",description:(0,s.t)("expression.math.description-floor","Rounds the number down to the nearest integer value. It's able to operate on series or escalar values.")})]})]}),title:(0,n.jsxs)(i.B,{gap:1,direction:"row",children:[(0,n.jsx)(d.I,{name:"book-open"})," ",(0,n.jsx)(s.x6,{i18nKey:"expressions.math.tooltip-title",children:"Math operator"})]}),footer:(0,n.jsx)("div",{children:(0,n.jsxs)(s.x6,{i18nKey:"expressions.math.tooltip-footer",children:["See our additional documentation on"," ",(0,n.jsx)(l.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",children:"Math expressions"}),"."]})}),closeButton:!0,placement:"bottom-start",children:(0,n.jsxs)("div",{className:C.info,children:[(0,n.jsx)(s.x6,{i18nKey:"expressions.math.tooltip-trigger",children:"Expression"})," ",(0,n.jsx)(d.I,{name:"info-circle"})]})})}),labelWidth:m,grow:!0,shrink:!0,children:(0,n.jsx)(h.f,{value:b.expression,onChange:f,rows:1,placeholder:r,onBlur:P,style:{minWidth:250,lineHeight:"26px",minHeight:32}})})})},g=({name:m,description:y})=>{const b=(0,u.of)(x);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:b.name,children:m}),(0,n.jsx)("span",{className:b.description,children:y})]})},E=m=>({documentationHeader:(0,a.css)({fontSize:m.typography.h5.fontSize,fontWeight:m.typography.h5.fontWeight}),documentationContainer:(0,a.css)({display:"flex",flex:1,flexDirection:"column",gap:m.spacing(2),padding:m.spacing(1,2)}),documentationFunctions:(0,a.css)({display:"grid",gridTemplateColumns:"max-content auto",columnGap:m.spacing(2)}),info:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",gap:m.spacing(1)})}),x=m=>({name:(0,a.css)({fontWeight:m.typography.fontWeightBold}),description:(0,a.css)({fontSize:m.typography.bodySmall.fontSize,color:m.colors.text.disabled})})},18387:(ne,j,e)=>{"use strict";e.d(j,{j:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(92745),l=e(45861),i=e(66404),c=e(79233),p=e(97095),h=e(63142);const u=({options:v})=>{const[g,E]=(0,s.useState)(20),[x,m]=(0,s.useState)([]),y=(0,s.useCallback)(D=>{D.preventDefault(),E(g+20)},[g,E]),b=(0,h.of)(r);return(0,s.useEffect)(()=>m(v.slice(0,g)),[g,v]),x.length?(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"},children:[(0,n.jsx)(i.E,{variant:"bodySmall",weight:"medium",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.variable-values-preview.preview-of-values",children:"Preview of values"})}),(0,n.jsx)(p.C,{children:x.map((D,f)=>(0,n.jsx)(p.C,{className:b.optionContainer,children:(0,n.jsx)(c.c,{"data-testid":d.Tp.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption,children:(0,n.jsx)("div",{className:b.label,children:D.label})})},`${D.value}-${f}`))}),v.length>g&&(0,n.jsx)(p.C,{className:b.optionContainer,children:(0,n.jsx)(l.$n,{onClick:y,variant:"secondary",size:"sm",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.variable-values-preview.show-more",children:"Show more"})})})]}):null};u.displayName="VariableValuesPreview";function r(v){return{wrapper:(0,a.css)({display:"flex",flexDirection:"column",marginTop:v.spacing(2)}),optionContainer:(0,a.css)({marginLeft:v.spacing(.5),marginBottom:v.spacing(.5)}),label:(0,a.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}},18404:(ne,j,e)=>{"use strict";e.d(j,{W:()=>s,a:()=>a});var n=e(62779);function a(o){const l=(0,n.u$)(o);return{loading:l.isLoading,folder:l.data}}function s({title:o,parents:l}){return l&&l?.length?[...l.map(i=>i.title),o].map(d).join("/"):d(o)}function d(o){return o.replaceAll("/","\\/")}},18548:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>M,Bs:()=>u,C_:()=>E,E1:()=>i,Gc:()=>p,IJ:()=>y,Ks:()=>b,QZ:()=>f,TN:()=>l,Tk:()=>x,UP:()=>P,eB:()=>v,f$:()=>h,gZ:()=>c,jz:()=>o,lg:()=>C,qR:()=>D,rb:()=>g});var n=e(65307),a=e(78479),s=e(92745);const d={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:a.R.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},o=(0,n.VP)("dataSources/dataSourceLoaded"),l=(0,n.VP)("dataSources/dataSourcesLoad"),i=(0,n.VP)("dataSources/dataSourcesLoaded"),c=(0,n.VP)("dataSources/dataSourceMetaLoaded"),p=(0,n.VP)("dataSources/dataSourcePluginsLoad"),h=(0,n.VP)("dataSources/dataSourcePluginsLoaded"),u=(0,n.VP)("dataSources/setDataSourcesSearchQuery"),r=(0,n.VP)("dataSources/setDataSourcesLayoutMode"),v=(0,n.VP)("dataSources/setDataSourceTypeSearchQuery"),g=(0,n.VP)("dataSources/setDataSourceName"),E=(0,n.VP)("dataSources/setIsDefault"),x=(0,n.VP)("dataSources/setIsSortAscending"),m=(I=d,B)=>l.match(B)?{...I,isLoadingDataSources:!0}:i.match(B)?{...I,isLoadingDataSources:!1,dataSources:B.payload,dataSourcesCount:B.payload.length}:o.match(B)?{...I,dataSource:B.payload}:u.match(B)?{...I,searchQuery:B.payload}:r.match(B)?{...I,layoutMode:B.payload}:p.match(B)?{...I,plugins:[],isLoadingDataSourcePlugins:!0}:h.match(B)?{...I,plugins:B.payload.plugins,categories:B.payload.categories,isLoadingDataSourcePlugins:!1}:v.match(B)?{...I,dataSourceTypeSearchQuery:B.payload}:c.match(B)?{...I,dataSourceMeta:B.payload}:g.match(B)?{...I,dataSource:{...I.dataSource,name:B.payload}}:E.match(B)?{...I,dataSource:{...I.dataSource,isDefault:B.payload}}:x.match(B)?{...I,isSortAscending:B.payload}:I,y={testingStatus:{},loadError:null,loading:!0,plugin:null},b=(0,n.VP)("dataSourceSettings/initDataSourceSettingsSucceeded"),D=(0,n.VP)("dataSourceSettings/initDataSourceSettingsFailed"),f=(0,n.VP)("dataSourceSettings/testDataSourceStarting"),C=(0,n.VP)("dataSourceSettings/testDataSourceSucceeded"),P=(0,n.VP)("dataSourceSettings/testDataSourceFailed"),M={dataSources:m,dataSourceSettings:(I=y,B)=>b.match(B)?{...I,plugin:B.payload,loadError:null,loading:!1}:D.match(B)?{...I,plugin:null,loadError:B.payload.message,loading:!1}:f.match(B)?{...I,testingStatus:{message:(0,s.t)("datasources.data-source-settings-reducer.message.testing-could-couple-minutes","Testing... this could take up to a couple of minutes"),status:"info"}}:C.match(B)?{...I,testingStatus:{status:B.payload?.status,message:B.payload?.message,details:B.payload?.details}}:P.match(B)?{...I,testingStatus:{status:"error",message:B.payload?.message,details:B.payload?.details}}:I}},18552:(ne,j,e)=>{"use strict";e.d(j,{r:()=>p});var n=e(74848),a=e(16817),s=e(92745),d=e(30703),o=e(18857),l=e(99090),i=e(55860);const c=()=>(0,i.S)().getSortOptions();function p({onChange:h,value:u,placeholder:r,filter:v,getSortOptions:g,isClearable:E,disabled:x}){const m=(0,a.A)(async()=>{const b=await(g??c)();return v?b.filter(D=>v.includes(D.value)):b},[g,v]);if(m.loading)return null;const y=!!(u?.includes("desc")||u?.startsWith("-"));return(0,n.jsx)(o.l6,{width:28,onChange:h,value:m.value?.find(b=>b.value===u)??null,options:m.value,"aria-label":(0,s.t)("sort-picker.select-aria-label","Sort"),placeholder:r??`Sort (Default ${l.r4.label})`,prefix:(0,n.jsx)(d.I,{name:y?"sort-amount-down":"sort-amount-up"}),isClearable:E,disabled:x},u)}},18600:(ne,j,e)=>{"use strict";e.d(j,{W:()=>a,d:()=>n});var n=(s=>(s.ValueToText="value",s.RangeToText="range",s.RegexToText="regex",s.SpecialValue="special",s))(n||{}),a=(s=>(s.True="true",s.False="false",s.Null="null",s.NaN="nan",s.NullAndNaN="null+nan",s.Empty="empty",s))(a||{})},18607:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>n});function n(a,s,d,o){const l=[];let i=!1,c;function p(h,u=!1){if(i)return;const r=h.url?.split("?")??["",""];let v=r[0];const g=new URLSearchParams(r[1]);if(g.has("editview")&&(v+=`?editview=${g.get("editview")}`),d&&v===d.url){o||l.unshift({text:d.text,href:h.url??""}),i=!0;return}const E=v.length>0&&c===v;if(c=v,!h.hideFromBreadcrumbs&&!(u&&E)){const m=h.children?.findIndex(y=>y.active)??-1;if(m>0){const y=h.children?.[m];y&&l.unshift({text:y.text,href:y.url??""})}l.unshift({text:h.text,href:h.url??""})}h.parentItem&&p(h.parentItem)}return s&&p(s),p(a,!0),l}},18615:(ne,j,e)=>{"use strict";e.d(j,{N8:()=>f,bG:()=>b,qM:()=>D,uv:()=>y});var n=e(2543),a=e.n(n),s=e(45650),d=e(65474),o=e(62467),l=e(66847),i=e(81160),c=e(93031),p=e(69862),h=e(71030),u=e(9084),r=e(94644),v=e(28105),g=e(78282),E=e(2863),x=e(97534),m=e(9931);const y="-- Mixed --",b="mixed-",D=(P,T)=>`${b}${P}-${T||""}`;class f extends r.mA{constructor(T){super(T)}query(T){const M=T.targets.filter(U=>U.datasource?.uid!==y);if(!M.length)return(0,o.of)({data:[]});const I=(0,n.groupBy)(M,"datasource.uid"),B=[];for(const U in I)U===m.K?I[U].forEach(W=>{B.push(...this.getBatchesForQueries([W],T))}):B.push(...this.getBatchesForQueries(I[U],T));return B.length?this.batchQueries(B,T):(0,o.of)({data:[]})}getBatchesForQueries(T,M){const I=T[0].datasource,B=[],U=(0,E.w)().replace(I?.uid,M.scopedVars,(W,V)=>{if(!Array.isArray(W))return W;for(const z of W){if(z==="default")continue;const R=(0,g.l)().getInstanceSettings(z);B.push({datasource:(0,g.l)().get(z),queries:(0,n.cloneDeep)(T),scopedVars:{...M.scopedVars,[V.name]:{value:z,text:R?.name}}})}return""});return U!==""&&B.push({datasource:(0,g.l)().get(U),queries:(0,n.cloneDeep)(T),scopedVars:{...M.scopedVars}}),B}batchQueries(T,M){const I=T.filter(this.isQueryable).map((B,U)=>(0,d.H)(B.datasource).pipe((0,p.Z)(W=>{const V=(0,n.cloneDeep)(M);return V.requestId=D(U,V.requestId),V.targets=B.queries,V.scopedVars=B.scopedVars,(0,d.H)(W.query(V)).pipe((0,i.T)(z=>({...z,data:z.data||[],state:v.Gu.Loading,key:D(U,z.key)})),(0,u.$)(),(0,l.W)(z=>(z=(0,x.u)(z),z.message=`${W.name}: ${z.message}`,(0,o.of)([{data:[],state:v.Gu.Error,error:z,key:D(U,V.requestId)}]))))})));return(0,s.p)(I).pipe(C(),(0,i.T)(this.finalizeResponses),(0,c.U)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(T){return T&&Array.isArray(T.queries)&&T.queries.length>0}finalizeResponses(T){const{length:M}=T;if(M===0)return T;const I=T.find(B=>B.state===v.Gu.Error);return I?T.push(I):T[M-1].state=v.Gu.Done,T}}function C(){return(0,h.T)((P,T)=>T.reduce((M,I)=>(M.push.apply(M,I),M),P),[])}},18667:(ne,j,e)=>{"use strict";e.d(j,{K:()=>c});var n=e(2543),a=e.n(n),s=e(96540),d=e(64423),o=e(99165),l=e(57852),i=e(32899);const c=({config:p,eventBus:h,frame:u})=>{const r=(0,s.useRef)(u);return r.current=u,(0,s.useLayoutEffect)(()=>{let v=null;const g={point:{time:null},data:r.current};p.addHook("init",C=>{v=C});let E=null;p.addHook("setSeries",(C,P)=>{E=P}),p.addHook("setLegend",()=>{if(!(v.cursor.event==null)){let P=v.cursor.idxs.find(T=>T!=null);if(P==null)f();else{let T=P,M=E,I=v.data[0]??v.data[1][0];g.point.time=I[T],g.rowIndex=T??void 0,g.columnIndex=M??void 0,g.data=r.current;let B=v.cursor.top;g.point.panelRelY=B===0?.001:B>0?B/v.rect.height:1,D()}}});function x(C){const P=C.payload?.point?.time;if(P){const T=v.valToPos(P,"x");v.setCursor({left:T,top:v.rect.height/2})}}const m=new d.yU,y=new l.b_(g).setTags(["uplot"]),b=new l.ql().setTags(["uplot"]);let D=(0,n.throttle)(()=>{h.publish(y)},100),f=(0,n.throttle)(()=>{h.publish(b)},100);return m.add(h.getStream(l.b_).subscribe({next:C=>{h===C.origin||C.tags?.has("uplot")||x(C)}})),m.add(h.getStream(i.kb).subscribe({next:C=>x(C)})),m.add(h.getStream(l.ql).pipe((0,o.c)(50)).subscribe({next:C=>{h===C.origin||C.tags?.has("uplot")||v.cursor._lock||v.setCursor({left:-10,top:-10})}})),()=>{m.unsubscribe()}},[p]),null}},18700:(ne,j,e)=>{"use strict";e.d(j,{p:()=>l,k:()=>i});var n=e(2543),a=e(95004),s=e(41119);function d(c,p){return p.type||(p.name==="time"||p.name==="Time"?p.type=a.PU.time:p.type=(0,s.HW)(c)),p.type===a.PU.number?h=>parseFloat(h):p.type===a.PU.boolean?h=>!(h[0]==="F"||h[0]==="f"||h[0]==="0"):h=>h}var o=e(96453);const l=void 0;class i extends o.F{constructor(p,h){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=h||(u=>u??[]),p){const{name:u,refId:r,meta:v,fields:g}=p;if(u&&(this.name=u),r&&(this.refId=r),v&&(this.meta=v),g)for(const E of g)this.addField(E)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(p,h){return this.addField({name:h||"",type:(0,s.HW)(p)})}addField(p,h){let u;p.values&&(u=p.values);let r=p.type;!r&&(p.name==="time"||p.name==="Time")?r=a.PU.time:(!r&&u&&u.length&&(r=(0,s.HW)(u[0])),r||(r=a.PU.other));let v=p.name;v||(v=`Field ${this.fields.length+1}`);const g={...p,name:v,type:r,config:p.config||{},values:this.creator(u)};if(r===a.PU.other&&(r=(0,s.dF)(g),r&&(g.type=r)),this.fields.push(g),this.first=this.fields[0].values,h)for(;g.values.length<h;)g.values.push(l);else this.validate();return g}validate(){const p=this.fields.reduce((h,u)=>Math.max(h,u.values.length),0);for(const h of this.fields)for(;h.values.length!==p;)h.values.push(l)}setParser(p,h){return this.parsers||(this.parsers=new Map),this.parsers.set(p,h),h}parseValue(p,h){let u=this.parsers?.get(p);return u||(u=this.setParser(p,d(h,p))),u(h)}appendRow(p){for(let h=this.fields.length;h<p.length;h++)this.addField({name:`Field ${h+1}`,type:(0,s.HW)(p[h])});if(this.length<1)for(let h=0;h<this.fields.length;h++){const u=this.fields[h];(!u.type||u.type===a.PU.other)&&(u.type=(0,s.HW)(p[h]))}for(let h=0;h<this.fields.length;h++){const u=this.fields[h];let r=p[h];u.type!==a.PU.string&&(0,n.isString)(r)&&(r=this.parseValue(u,r)),u.values.push(r)}}push(...p){for(const h of p)this.add(h);return this.length}reverse(){for(const p of this.fields)p.values.reverse();return this}add(p){const h=p;for(const u of this.fields){let r=h[u.name];u.type!==a.PU.string&&(0,n.isString)(r)&&(r=this.parseValue(u,r)),r===void 0&&(r=l),u.values.push(r)}}set(p,h){if(p>this.length)throw new Error("Unable to set value beyond current length");const u=h||{};for(const r of this.fields)r.values[p]=u[r.name]}get(p){const h={};for(const u of this.fields)h[u.name]=u.values[p];return h}toJSON(){return(0,s.Kl)(this)}}},18771:(ne,j,e)=>{"use strict";e.d(j,{H:()=>a});var n=e(22803);const a=s=>(0,n.css)({float:"none",display:"flex",justifyContent:"flex-start",margin:s.spacing(2,0)})},18789:(ne,j,e)=>{"use strict";e.d(j,{w:()=>d});var n=e(43173),a=e(44248),s=e(36605);function d(o){if(!o.targets?.length||n.$.panels[o.type]?.skipDataQuery)return;let l;return l=new a.dt({datasource:o.datasource??void 0,queries:o.targets,maxDataPoints:o.maxDataPoints??void 0,maxDataPointsFromWidth:!0,cacheTimeout:o.cacheTimeout,queryCachingTTL:o.queryCachingTTL,minInterval:o.interval??void 0,dataLayerFilter:{panelId:o.id},$behaviors:[new s.L({})]}),new a.Es({$data:l,transformations:o.transformations||[]})}},18832:(ne,j,e)=>{"use strict";e.d(j,{C:()=>a,o:()=>s});var n=e(92745);function a(d){switch(d){case"home":return(0,n.t)("nav.home.title","Home");case"home-setup-guide":return(0,n.t)("nav.setup-guide.title","Getting started guide");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import dashboard");case"alert":return(0,n.t)("nav.create-alert.title","New alert rule");case"bookmarks":return(0,n.t)("nav.bookmarks.title","Bookmarks");case"bookmarks-empty":return(0,n.t)("nav.bookmarks-empty.title","Bookmark pages for them to appear here");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"reports":return(0,n.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,n.t)("nav.shared-dashboard.title","Shared dashboards");case"dashboards/recently-deleted":return(0,n.t)("nav.recently-deleted.title","Recently deleted");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"drilldown":return(0,n.t)("nav.drilldown.title","Drilldown");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,n.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alerting-upgrade":return(0,n.t)("nav.alerting-upgrade.title","Alerting upgrade");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"alert-list-legacy":return(0,n.t)("nav.alert-list-legacy.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Active notifications");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Settings");case"alerts/recently-deleted":return(0,n.t)("nav.alerts-recently-deleted.title","Recently deleted");case"cfg":return(0,n.t)("nav.config.title","Administration");case"cfg/general":return(0,n.t)("nav.config-general.title","General");case"cfg/plugins":return(0,n.t)("nav.config-plugins.title","Plugins and data");case"cfg/access":return(0,n.t)("nav.config-access.title","Users and access");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"authentication":return(0,n.t)("nav.authentication.title","Authentication");case"licensing":return(0,n.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,n.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return(0,n.t)("nav.org-settings.title","Default preferences");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,n.t)("nav.global-users.title","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"migrate-to-cloud":return(0,n.t)("nav.migrate-to-cloud.title","Migrate to Grafana Cloud");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,n.t)("nav.monitoring.title","Observability");case"infrastructure":return(0,n.t)("nav.infrastructure.title","Infrastructure");case"frontend":return(0,n.t)("nav.frontend.title","Frontend");case"apps":return(0,n.t)("nav.apps.title","More apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"testing-and-synthetics":return(0,n.t)("nav.testing-and-synthetics.title","Testing & synthetics");case"plugin-page-grafana-incident-app":return(0,n.t)("nav.incidents.title","Incident");case"plugin-page-grafana-ml-app":return(0,n.t)("nav.machine-learning.title","AI & machine learning");case"plugin-page-grafana-slo-app":return(0,n.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,n.t)("nav.k6.title","Performance");case"plugin-page-grafana-k8s-app":return(0,n.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-dbo11y-app":return(0,n.t)("nav.databases.title","Database");case"plugin-page-grafana-app-observability-app":return(0,n.t)("nav.application.title","Application");case"plugin-page-grafana-pyroscope-app":return(0,n.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,n.t)("nav.frontend-app.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,n.t)("nav.synthetics.title","Synthetics");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,n.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,n.t)("nav.add-new-connections.title","Add new connection");case"standalone-plugin-page-/connections/collector":return(0,n.t)("nav.collector.title","Collector");case"connections-datasources":return(0,n.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,n.t)("nav.integrations.title","Integrations");case"standalone-plugin-page-/connections/connect-data":return(0,n.t)("nav.connect-data.title","Connect data");case"standalone-plugin-page-/connections/private-data-source-connections":return(0,n.t)("nav.private-data-source-connections.title","Private data source connect");case"plugin-page-grafana-detect-app":return(0,n.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,n.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function s(d){switch(d){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,n.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards and panels");case"dashboards/public":(0,n.t)("nav.shared-dashboard.subtitle","Manage your organization's externally shared dashboards");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"dashboards/recently-deleted":return(0,n.t)("nav.recently-deleted.subtitle","Deleted dashboards are kept for up to 12 months or until the history limit of 1000 dashboards is reached.");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alerting-upgrade":return(0,n.t)("nav.alerting-upgrade.subtitle","Upgrade your existing legacy alerts and notification channels to the new Grafana Alerting");case"alerting-admin":return(0,n.t)("nav.alerting-admin.subtitle","Manage Alertmanager configurations and enable receiving Grafana-managed alerts");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts with active notifications");case"alerts/recently-deleted":return(0,n.t)("nav.alerts-recently-deleted.subtitle","See recently deleted alert rules");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"groupsync":return(0,n.t)("nav.groupsync.subtitle","Manage mappings of Identity Provider groups to Grafana Roles");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"migrate-to-cloud":return(0,n.t)("nav.migrate-to-cloud.subtitle","Copy resources from your self-managed installation to a cloud stack");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"cfg/general":return(0,n.t)("nav.config-general.subtitle","Manage default preferences and settings across Grafana");case"cfg/plugins":return(0,n.t)("nav.config-plugins.subtitle","Install plugins and define the relationships between data");case"cfg/access":return(0,n.t)("nav.config-access.subtitle","Configure access for individual users, teams, and service accounts");case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Out-of-the-box observability solutions");case"infrastructure":return(0,n.t)("nav.infrastructure.subtitle","Understand your infrastructure's health");case"frontend":return(0,n.t)("nav.frontend.subtitle","Gain real user monitoring insights");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"testing-and-synthetics":return(0,n.t)("nav.testing-and-synthetics.subtitle","Optimize performance with k6 and Synthetic Monitoring insights");case"connections-add-new-connection":return(0,n.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,n.t)("nav.data-sources.subtitle","View and manage your connected data source connections");case"connections-private-data-source-connections":return(0,n.t)("nav.private-data-source-connections.subtitle","Query data that lives within a secured network without opening the network to inbound traffic from Grafana Cloud. Learn more in our docs.");case"plugin-page-grafana-ml-app":return(0,n.t)("nav.machine-learning.subtitle","Explore AI and machine learning features");default:return}}},18984:(ne,j,e)=>{"use strict";e.d(j,{GM:()=>p,aV:()=>c,qY:()=>i});var n=e(75505),a=e(88673),s=e(43173),d=e(16310),o=e(8095),l=e(55860);async function i(h){let u=0;if(!h?.length)return[];const r=[];for(const E of h){const x={query:"*",kind:["dashboard"],limit:1e3};switch(E.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":x.uid=[E.value];break;case"dashboard_by_tag":x.tags=[E.value];break}r.push({refId:`${u++}`,queryType:o.nj.Search,search:x})}if(!s.$.featureToggles.panelTitleSearch){const E=(0,l.S)(),x=[];for(let m=0;m<r.length;m++){const y=(await E.search(r[m].search)).view;x.push({...h[m],dashboards:y.map(b=>({...b}))})}return x}const v=await(0,d.o)(),g=await(0,n.s)(v.query({targets:r}));if(g.data.length!==h.length)throw new Error("unexpected result size");return h.map((E,x)=>{const m=new a.R(g.data[x]);return{...E,dashboards:m.map(y=>({...y}))}})}function c(){return{apiVersion:"playlist.grafana.app/v0alpha1",kind:"Playlist",spec:{items:[],interval:"5m",title:""},metadata:{name:""},status:{}}}function p(h,u){return u?.length?(u=u.toLowerCase(),h.filter(r=>r.spec?.title.toLowerCase().includes(u))):h}},19050:(ne,j,e)=>{"use strict";e.d(j,{_0:()=>We,He:()=>wt,hS:()=>qe,bO:()=>ot,IL:()=>Ht,rR:()=>De,y2:()=>mt,Az:()=>hn,PD:()=>pt,JQ:()=>Bn,S6:()=>ut,Od:()=>nt,GI:()=>jt,q9:()=>be,h1:()=>Ve,qk:()=>pe,Rk:()=>Ot,h9:()=>de,TO:()=>Dn});var n=e(65307),a=e(32017),s=e.n(a),d=e(2543),o=e(49510),l=e(62467),i=e(58307),c=e(69862),p=e(99165),h=e(28105),u=e(46933),r=e(25229),v=e(67770),g=e(94644),E=e(76732),x=e(39443),m=e(95004);function y(ft,St){const Tt=b({data:ft.series},{data:St.series}).data;return{...ft,series:Tt}}function b(ft,St){if(!ft)return T(St);St.data.forEach(Yt=>{const Lt=ft.data.find(fn=>I(fn,Yt));if(!Lt){ft.data.push(M(Yt));return}D(Lt,Yt)});const Tt=[...ft.errors??[],...St.errors??[]];Tt.length>0&&(ft.errors=Tt);const Je=ft.error??St.error;Je!=null&&(ft.error=Je);const Pt=[...ft.traceIds??[],...St.traceIds??[]];return Pt.length>0&&(ft.traceIds=Pt),ft}function D(ft,St){const Tt=Math.max(ft.fields.length,St.fields.length);for(let Je=0;Je<Tt;Je++){if(!ft.fields[Je])continue;const Pt=f(ft.fields[Je],St.fields,Je);if(Pt&&(ft.fields[Je].values=[].concat.apply(Pt.values,ft.fields[Je].values),Pt.nanos)){const Yt=ft.fields[Je].nanos?.slice()||[];ft.fields[Je].nanos=St.fields[Je].nanos?.concat(Yt)}}ft.length+=St.length,ft.meta={...ft.meta,stats:P(ft.meta?.stats??[],St.meta?.stats??[])}}function f(ft,St,Tt){const Je=St.filter(Pt=>Pt.name===ft.name);return Je.length===1?Je[0]:ft.labels?Je.find(Pt=>(0,E.ab)(ft.labels??{},Pt.labels??{})):St[Tt]}const C="Summary: total bytes processed";function P(ft,St){const Tt=ft.find(Yt=>Yt.displayName===C),Je=St.find(Yt=>Yt.displayName===C);if(Je!=null&&Tt!=null)return[{value:Je.value+Tt.value,displayName:C,unit:Tt.unit}];const Pt=Je??Tt;return Pt!=null?[Pt]:[]}function T(ft){return{...ft,data:ft.data.map(M)}}function M(ft){return{...ft,fields:ft.fields.map(St=>({...St,values:St.values}))}}function I(ft,St){if(ft.refId!==St.refId||ft.name!==St.name)return!1;const Tt=ft.meta?.type,Je=St.meta?.type;if(Tt!==Je)return!1;if(Tt===x.m.TimeSeriesMulti){const Lt=ft.fields.find(En=>En.type===m.PU.number),fn=St.fields.find(En=>En.type===m.PU.number);return Lt===void 0||fn===void 0?!1:(0,E.ab)(Lt.labels??{},fn.labels??{})}const Pt=ft.meta?.custom?.frameType,Yt=St.meta?.custom?.frameType;return Pt==="LabeledTimeValues"&&Yt==="LabeledTimeValues"?!0:Pt===Yt}var B=e(78282),U=e(43173),W=e(62635),V=e(23237),z=e(6219),R=e(28998),O=e(34984),N=e(12282),F=e(18615),G=e(52763),H=e(6890),K=e(64762),w=e(71393),Q=e(81160),k=e(11576),te=e(79609),q=e(52645),se=e(41119),re=e(37234),Y=e(74746),X=e(92391);const J=ft=>{const St=[],Tt=[],Je=[],Pt=[],Yt=[],Lt=[],fn=[],En=[];for(const An of ft.series){if(ue(An)){En.push(An);continue}switch(An.meta?.preferredVisualisationType){case"logs":Pt.push(An);break;case"graph":St.push(An);break;case"trace":Yt.push(An);break;case"table":Tt.push(An);break;case"rawPrometheus":Je.push(An);break;case"nodeGraph":Lt.push(An);break;case"flamegraph":fn.push(An);break;default:oe(An)&&St.push(An),Tt.push(An)}}return{...ft,graphFrames:St,tableFrames:Tt,logsFrames:Pt,traceFrames:Yt,nodeGraphFrames:Lt,customFrames:En,flameGraphFrames:fn,rawPrometheusFrames:Je,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},_=({showCorrelationEditorLinks:ft,queries:St,correlations:Tt,defaultTargetDatasource:Je})=>Pt=>{if(ft&&Je)for(const Yt of Pt.series)for(const Lt of Yt.fields){Lt.config.links=[],Lt.display=Lt.display||(0,k.H)();const fn={};Yt.fields.map(En=>{fn[`${En.name}`]=`\${__data.fields.['${En.name}']}`}),Lt.config.links.push({url:"",origin:te.x0.ExploreCorrelationsEditor,title:`Correlate with ${Lt.name}`,internal:{datasourceUid:Je.uid,datasourceName:Je.name,query:{datasource:{uid:Je.uid}}},meta:{correlationData:{resultField:Lt.name,vars:fn,origVars:fn}}})}else if(St?.length&&Tt?.length){const Yt=(0,d.mapValues)((0,d.groupBy)(St,"refId"),"0.datasource.uid");(0,z.cA)(Pt.series,Tt,Yt)}return Pt},ee=ft=>ft.graphFrames.length?{...ft,graphResult:ft.graphFrames}:{...ft,graphResult:null},ae=ft=>{if(ft.tableFrames.length===0)return(0,l.of)({...ft,tableResult:null});ft.tableFrames.sort((Pt,Yt)=>{const Lt=Pt.refId,fn=Yt.refId;return Lt>fn?1:Lt<fn?-1:0});const St=ft.tableFrames.every(Pt=>oe(Pt)),Tt={interpolate:Pt=>Pt};return(St?(0,l.of)(ft.tableFrames).pipe(q.c.joinByFieldTransformer.operator({},Tt)):(0,l.of)(ft.tableFrames).pipe(q.c.mergeTransformer.operator({},Tt))).pipe((0,Q.T)(Pt=>{for(const Yt of Pt)for(const Lt of Yt.fields)Lt.display=Lt.display??(0,k.J)({field:Lt,theme:U.$.theme2,timeZone:ft.request?.timezone??"browser"});return{...ft,tableResult:Pt}}))},le=ft=>{const St=ft.rawPrometheusFrames;if(!St||St.length===0)return(0,l.of)({...ft,tableResult:null});St.sort((Yt,Lt)=>{const fn=Yt.refId,En=Lt.refId;return fn>En?1:fn<En?-1:0});const Tt=St.every(Yt=>oe(Yt)),Je={interpolate:Yt=>Yt};return(Tt?(0,l.of)(St).pipe(q.c.joinByFieldTransformer.operator({},Je)):(0,l.of)(St).pipe(q.c.mergeTransformer.operator({},Je))).pipe((0,Q.T)(Yt=>{const Lt=Yt[0];for(const fn of Lt.fields)fn.display=fn.display??(0,k.J)({field:fn,theme:U.$.theme2,timeZone:ft.request?.timezone??"browser"});return{...ft,rawPrometheusResult:Lt}}))},L=(ft={})=>St=>{if(St.logsFrames.length===0)return{...St,logsResult:null};const Tt=St.request?.intervalMs,Je=(0,re.HT)(St.logsFrames,Tt,ft.absoluteRange,ft.queries,ft.deduplicate),Pt=(0,W.uE)(ft.refreshInterval),Yt=(0,Y.zy)(Je,Pt),Lt=Yt.rows,fn=Yt.series,En={...Yt,rows:Lt,series:fn};return{...St,logsResult:En}};function ie(ft,St,Tt,Je,Pt,Yt,Lt){return(0,l.of)(ft).pipe((0,Q.T)(fn=>(0,se.N$)(fn,St)),(0,Q.T)(_({defaultTargetDatasource:Lt,showCorrelationEditorLinks:Yt,queries:Je,correlations:Pt})),(0,Q.T)(J),(0,Q.T)(ee),(0,Q.T)(Tt),(0,c.Z)(le),(0,c.Z)(ae))}function oe(ft){const St=(0,d.groupBy)(ft.fields,Tt=>Tt.type);return!!(Object.keys(St).length===2&&St[m.PU.time]?.length===1&&St[m.PU.number])}function ue(ft){return ft.meta?.preferredVisualisationPluginId?(0,X.oZ)(ft.meta?.preferredVisualisationPluginId):!1}var ye=e(10951),fe=e(80763),Ee=e(51845),Ae=e(11280),Ge=e(35231),Fe=e(94543),Pe=e(83953);const Ve=ft=>St=>{const Tt=St.explore.panes[ft];return Tt&&Tt.queryResponse?Tt.queryResponse.state===h.Gu.Loading||Tt.queryResponse.state===h.Gu.Streaming:!1},me=(0,n.VP)("explore/addQueryRow"),Se=(0,n.VP)("explore/changeQueries"),Qe=(0,n.VP)("explore/cancelQueries"),Ue=(0,n.VP)("explore/queriesImported"),Ie=(0,n.VP)("explore/queryStoreSubscription"),Re=(0,n.VP)("explore/setSupplementaryQueryEnabledAction"),Ke=(0,n.VP)("explore/storeSupplementaryQueryDataProviderAction"),Le=(0,n.VP)("explore/cleanSupplementaryQueryDataProviderAction"),ze=(0,n.VP)("explore/cleanSupplementaryQueryAction"),Be=(0,n.VP)("explore/storeSupplementaryQueryDataSubscriptionAction"),$e=(0,n.VP)("explore/updateSupplementaryQueryDataAction"),Ye=(0,n.VP)("explore/queryStreamUpdated"),de=(0,n.VP)("explore/setQueries"),ge=(0,n.VP)("changeLoadingState"),pe=(0,n.VP)("explore/setPausedState"),De=(0,n.VP)("explore/clearLogs"),Me=(0,n.VP)("explore/scanStart"),be=(0,n.VP)("explore/scanStop"),Oe=(0,n.VP)("explore/addResultsToCache"),Ne=(0,n.VP)("explore/clearCache");function We(ft,St){return async(Tt,Je)=>{const Pt=Je().explore.panes[ft];let Yt;Pt.datasourceInstance?.meta.mixed?Yt=(0,d.findLast)(Pt.queries,fn=>!!fn.datasource)?.datasource||void 0:Yt=Pt.datasourceInstance?.getRef();const Lt=await(0,W.Ll)(Pt.queries,St,Yt);Tt(me({exploreId:ft,index:St,query:Lt}))}}function qe(ft){return(St,Tt)=>{St(be({exploreId:ft})),St(Qe({exploreId:ft}));const Je=Tt().explore.panes[ft].supplementaryQueries;for(const Pt of ye.VW)St(Le({exploreId:ft,type:Pt})),Je[Pt]?.data?.state!==h.Gu.Done&&St(ze({exploreId:ft,type:Pt}))}}const st=(ft,St)=>{const Tt=ft.getRef();return St.map(Je=>({...Je,datasource:Tt}))},rt=async(ft,St,Tt)=>{let Je=[];if(St.meta?.id===ft.meta?.id)Je=Tt;else if((0,u.Ee)(St)&&(0,u.FL)(ft)){const Pt=await St.exportToAbstractQueries(Tt);Je=await ft.importFromAbstractQueries(Pt)}else ft.importQueries&&(Je=await ft.importQueries(Tt,St));return st(ft,Je)},ot=(0,G.zD)("explore/changeQueries",async({queries:ft,exploreId:St,options:Tt},{getState:Je,dispatch:Pt})=>{let Yt=!1;const Lt=Je().explore.panes[St].queries,fn=Je().explore.panes[St].datasourceInstance?.uid,En=Je().explore.correlationEditorDetails,An=En?.editorMode||!1;!(Object.keys(Je().explore.panes)[0]===St)&&An&&!En?.queryEditorDirty&&Pt((0,Ge.am)({queryEditorDirty:!0}));for(const zn of ft)for(const sa of Lt){if(zn.refId===sa.refId&&zn.datasource?.type!==sa.datasource?.type&&!Tt?.skipAutoImport){const ta=await(0,B.l)().get(sa.datasource),ra=await(0,B.l)().get({uid:zn.datasource?.uid});await Pt(mt(St,Lt,ta,ra,zn.refId)),Yt=!0}if(fn===F.uv&&zn.refId===sa.refId&&zn.datasource?.uid!==sa.datasource?.uid){const ta=(0,Pe.dq)(F.uv,ft),ra=await(0,z.J6)(ta);Pt((0,Ee.Fb)({exploreId:St,correlations:ra.correlations||[]}))}}Yt||Pt(Se({queries:ft,exploreId:St})),ft.length<Lt.length&&Pt(nt({exploreId:St}))}),mt=(ft,St,Tt,Je,Pt)=>async Yt=>{if(!Tt){Yt(Ue({exploreId:ft,queries:St}));return}let Lt=St;if(Je.uid===F.uv)Lt=St.map(En=>({...En,datasource:Tt.getRef()}));else if(Tt.uid===F.uv){const En=(0,d.groupBy)(St,Gn=>Gn.datasource?.uid),An=await Promise.all(Object.keys(En).map(async Gn=>{const zn=await(0,B.l)().get({uid:Gn});return await rt(Je,zn,En[Gn])}));Lt=(0,d.flatten)(An.filter(Gn=>Gn.length>0))}else{let En=St;if(Pt!==void 0){const An=St.find(Gn=>Gn.refId===Pt);An&&(En=[An])}Lt=await rt(Je,Tt,En)}let fn=await(0,W.di)(Lt,Je.getRef());if(Pt!==void 0){Lt.length===0&&(Lt=[await(0,W.Ll)([],void 0,Je.getRef())]);const En=St.findIndex(Gn=>Gn.refId===Pt),An={...fn[0],refId:St[En].refId};fn=[...St],fn[En]=An}return Yt(Ue({exploreId:ft,queries:fn})),fn};function pt(ft,St,Tt){return async(Je,Pt)=>{const Yt=Pt().explore.panes[ft],{queries:Lt}=Yt,En=(await Promise.all(Lt.map(An=>Tt({...An},St)))).map((An,Gn)=>(0,W.eF)(An,Lt,Gn));Je(de({exploreId:ft,queries:En})),St.preventSubmit||Je(nt({exploreId:ft}))}}function ke(ft,St){if(!(ft.filterQuery&&!ft.filterQuery(St)))return St}async function Ze(ft,St,Tt,Je){const Yt=(await Promise.all(Je.map(async Lt=>{if(Lt.datasource?.uid===Tt.uid)return ke(Tt,Lt);{const fn=await(0,R.tR)().get(Lt.datasource);return ke(fn,Lt)}}))).filter(Lt=>!!Lt);Yt.length>0&&(ft((0,Ae.ri)(!0,Tt.uid,Tt.name,Yt,U.$.queryHistoryEnabled)),U.$.queryHistoryEnabled&&ft((0,Ae.ri)(!1,Tt.uid,Tt.name,Yt,!1)),await ft((0,Ae.jX)()))}const nt=(0,G.zD)("explore/runQueries",async({exploreId:ft,preserveCache:St},{dispatch:Tt,getState:Je})=>{Je().explore?.panes[ft]?.scanning||Tt(qe(ft));const{defaultCorrelationEditorDatasource:Pt,scopedVars:Yt,showCorrelationEditorLinks:Lt}=await(0,Pe.aj)(Je(),ft),fn=(0,fe.M)(ft);Tt((0,Fe.JA)({exploreId:ft})),St!==!0&&Tt(Ht(ft));const An=Je().explore.panes[ft],{datasourceInstance:Gn,containerWidth:zn,isLive:sa,range:ta,scanning:ra,queryResponse:ea,querySubscription:Un,refreshInterval:oa,absoluteRange:Ca,cache:ya,supplementaryQueries:Xa}=An;let Ta,Pa;const pa=An.queries.map(ma=>({...ma,datasource:ma.datasource||Gn?.getRef()}));Gn!=null&&Ze(Tt,Je().explore,Gn,pa);const Ua=(0,Pe.rk)(ya,Ca);if(Ua)Ta=(0,o.z)([(0,l.of)(Ua),fn]).pipe((0,c.Z)(([ma,Ka])=>ie(ma,ea,L({absoluteRange:Ca,refreshInterval:oa,queries:pa}),pa,Ka,Lt,Pt))),Pa=Ta.subscribe(ma=>{Tt(Ye({exploreId:ft,response:ma}))});else{if(!(0,W.zT)(pa)||!Gn)return;const ma=Gn?.interval;(0,W._u)(Un);const Ka={minInterval:ma,maxDataPoints:zn,liveStreaming:sa},Oa=(0,O.O)(Je().user),is=(0,W.bI)(ft,pa,Ka,ta,ra,Oa,Yt);if(Tt(ge({exploreId:ft,loadingState:h.Gu.Loading})),Ta=(0,o.z)([(0,w.BN)(Gn,is.request).pipe(sa?(0,p.c)(500):i.D),fn]).pipe((0,c.Z)(([Bt,$t])=>ie(Bt,ea,L({absoluteRange:Ca,refreshInterval:oa,queries:pa}),pa,$t,Lt,Pt))),Pa=Ta.subscribe({next(Bt){const $t=Je().explore.panes[ft];if(Tt(Ye({exploreId:ft,response:Bt})),$t.scanning)if(console.log(Bt.series),Bt.state===h.Gu.Done&&Bt.series.length===0){const zt=(0,V.Wb)(-1,$t.range);Tt((0,Fe.JA)({exploreId:ft,absoluteRange:zt})),Tt(nt({exploreId:ft}))}else(Bt.series[0]?.length>0||Bt.state===h.Gu.Done)&&Tt(be({exploreId:ft}))},error(Bt){Tt((0,H.dx)((0,K.gi)("Query processing error",Bt))),Tt(ge({exploreId:ft,loadingState:h.Gu.Error})),console.error(Bt)},complete(){Je().explore.panes[ft].queryResponse.state===h.Gu.Loading&&Tt(ge({exploreId:ft,loadingState:h.Gu.Done}))}}),sa)for(const Bt of ye.VW)Tt(Le({exploreId:ft,type:Bt})),Tt(ze({exploreId:ft,type:Bt}));else Tt(ht({exploreId:ft,datasourceInstance:Gn,transaction:is,newQuerySource:Ta,supplementaryQueries:Xa,queries:pa,absoluteRange:Ca}))}Tt(Ie({exploreId:ft,querySubscription:Pa}))}),ut=(0,G.zD)("explore/runLoadMoreQueries",async({exploreId:ft,absoluteRange:St},{dispatch:Tt,getState:Je})=>{Tt(qe(ft));const{datasourceInstance:Pt,containerWidth:Yt,queryResponse:Lt}=Je().explore.panes[ft],{defaultCorrelationEditorDatasource:fn,scopedVars:En,showCorrelationEditorLinks:An}=await(0,Pe.aj)(Je(),ft),Gn=(0,fe.M)(ft);let zn;const sa=Lt.logsResult?.queries||[],ta=Lt.logsFrames.map(ya=>ya.refId),ra=sa.filter(ya=>ta.includes(ya.refId)).map(ya=>({...ya,datasource:ya.datasource||Pt?.getRef(),refId:ya.refId,supportingQueryType:N.Q$.InfiniteScroll}));if(!(0,W.zT)(ra)||!Pt)return;const ea={minInterval:Pt?.interval,maxDataPoints:Yt},Un=(0,O.O)(Je().user),oa=(0,W.zq)(Un,{from:(0,r.oZ)(Un,St.from),to:(0,r.oZ)(Un,St.to)},(0,O.q)(Je().user)),Ca=(0,W.bI)(ft,ra,ea,oa,!1,Un,En);Tt(ge({exploreId:ft,loadingState:h.Gu.Loading})),zn=(0,o.z)([(0,w.BN)(Pt,Ca.request),Gn]).pipe((0,c.Z)(([ya,Xa])=>ya.state!==h.Gu.Done?(0,l.of)({...Lt,state:h.Gu.Loading}):ie(y(Lt,ya),Lt,L({absoluteRange:St,queries:sa,deduplicate:!0}),ra,Xa,An,fn))),zn.subscribe({next(ya){Tt(Ye({exploreId:ft,response:ya}))},error(ya){Tt((0,H.dx)((0,K.gi)("Query processing error",ya))),Tt(ge({exploreId:ft,loadingState:h.Gu.Error})),console.error(ya)},complete(){Tt(ge({exploreId:ft,loadingState:h.Gu.Done}))}})}),gt=async(ft,St)=>{const Tt=ft.filter(Pt=>Pt.datasource?.uid!==F.uv),Je=(0,d.groupBy)(Tt,"datasource.uid");return await Promise.all(Object.values(Je).map(async Pt=>({datasource:await(0,B.l)().get(Pt[0].datasource,St),targets:Pt})))},ht=(0,G.zD)("explore/handleSupplementaryQueries",async({datasourceInstance:ft,exploreId:St,transaction:Tt,newQuerySource:Je,supplementaryQueries:Pt,queries:Yt,absoluteRange:Lt},{dispatch:fn})=>{let En;ft.meta.mixed?En=await gt(Tt.request.targets,Tt.request.scopedVars):En=[{datasource:ft,targets:Tt.request.targets}];for(const An of ye.VW){const Gn=(0,ye.Pm)(En,An,{...Tt.request,requestId:`${Tt.request.requestId}_${(0,d.snakeCase)(An)}`},Je);Gn?(fn(Ke({exploreId:St,type:An,dataProvider:Gn})),tt(Pt[An].data,Yt,Lt)||(fn(ze({exploreId:St,type:An})),Pt[An].enabled&&fn(hn(St,An)))):fn(Le({exploreId:St,type:An}))}});function tt(ft,St,Tt){if(!ft)return!1;const Je=(0,d.zipObject)((0,d.map)(St,"refId"),St),Pt=(0,d.mapValues)((0,d.groupBy)(ft.data.map(En=>En.meta?.custom?.sourceQuery),"refId"),d.head),Yt=ft.data.every(En=>En.meta?.custom?.logsVolumeType===v.Aj.FullRange),Lt=s()(Je,Pt),fn=ft.data.every(En=>{const An=En.meta?.custom?.absoluteRange;return An?An&&An.from<=Tt.from&&Tt.to<=An.to:!0});return Yt&&Lt&&fn}function Ot(ft,St){return(Tt,Je)=>{const Pt=Je().explore.panes[ft].queries,Yt=St.map((Lt,fn)=>(0,W.eF)(Lt,Pt,fn));Tt(de({exploreId:ft,queries:Yt})),Tt(nt({exploreId:ft}))}}function jt(ft){return(St,Tt)=>{St(Me({exploreId:ft}));const Je=(0,V.Wb)(-1,Tt().explore.panes[ft].range);St((0,Fe.JA)({exploreId:ft,absoluteRange:Je})),St(nt({exploreId:ft}))}}function wt(ft){return(St,Tt)=>{const Je=Tt().explore.panes[ft].queryResponse,Pt=Tt().explore.panes[ft].absoluteRange,Yt=(0,Pe.O2)(Pt);Je.state===h.Gu.Done&&St(Oe({exploreId:ft,cacheKey:Yt,queryResponse:Je}))}}function Ht(ft){return(St,Tt)=>{St(Ne({exploreId:ft}))}}function hn(ft,St){return(Tt,Je)=>{const{supplementaryQueries:Pt}=Je().explore.panes[ft],Yt=Pt[St].dataProvider;if(Yt){const Lt=Yt.subscribe({next:fn=>{Tt($e({exploreId:ft,type:St,data:fn}))}});Tt(Be({exploreId:ft,type:St,dataSubscription:Lt}))}}}function Dn(ft,St,Tt){return(Je,Pt)=>{Je(Re({exploreId:ft,enabled:St,type:Tt})),(0,ye.Oi)(St,Tt),St&&Je(hn(ft,Tt))}}const Bn=(ft,St)=>{if(me.match(St)){const{queries:Tt}=ft,{index:Je,query:Pt}=St.payload,Yt=[...Tt.slice(0,Je+1),{...Pt},...Tt.slice(Je+1)];return{...ft,queries:Yt,queryKeys:(0,W.dY)(Yt)}}if(Se.match(St)){const{queries:Tt}=St.payload;return{...ft,queries:Tt}}if(Qe.match(St))return(0,W._u)(ft.querySubscription),{...ft,...ft.queryResponse?{queryResponse:{...ft.queryResponse,state:h.Gu.Done}}:{}};if(de.match(St)){const{queries:Tt}=St.payload;return{...ft,queries:Tt.slice(),queryKeys:(0,W.dY)(Tt)}}if(Ie.match(St)){const{querySubscription:Tt}=St.payload;return{...ft,querySubscription:Tt}}if(Re.match(St)){const{enabled:Tt,type:Je}=St.payload,{supplementaryQueries:Pt}=ft,Yt=Pt[Je].dataSubscription;!Tt&&Yt&&Yt.unsubscribe();const Lt={...Pt,[Je]:{...Pt[Je],enabled:Tt,data:void 0}};return{...ft,supplementaryQueries:Lt}}if(Ke.match(St)){const{dataProvider:Tt,type:Je}=St.payload,{supplementaryQueries:Pt}=ft,Yt=Pt[Je];Yt?.dataSubscription&&Yt.dataSubscription.unsubscribe();const Lt={...Pt,[Je]:{...Yt,dataProvider:Tt,dataSubscription:void 0}};return{...ft,supplementaryQueries:Lt}}if(Le.match(St)){const{type:Tt}=St.payload,{supplementaryQueries:Je}=ft,Pt=Je[Tt];Pt?.dataSubscription&&Pt.dataSubscription.unsubscribe();const Yt={...Je,[Tt]:{...Pt,dataProvider:void 0,dataSubscription:void 0}};return{...ft,supplementaryQueries:Yt}}if(ze.match(St)){const{type:Tt}=St.payload,{supplementaryQueries:Je}=ft,Pt={...Je,[Tt]:{...Je[Tt],data:void 0}};return{...ft,supplementaryQueries:Pt}}if(Be.match(St)){const{dataSubscription:Tt,type:Je}=St.payload,{supplementaryQueries:Pt}=ft,Yt={...Pt,[Je]:{...Pt[Je],dataSubscription:Tt}};return{...ft,supplementaryQueries:Yt}}if($e.match(St)){let{data:Tt,type:Je}=St.payload;const{supplementaryQueries:Pt}=ft,Yt={...Pt,[Je]:{...Pt[Je],data:Tt}};return{...ft,supplementaryQueries:Yt}}if(Ye.match(St))return xn(ft,St);if(Ue.match(St)){const{queries:Tt}=St.payload;return{...ft,queries:Tt,queryKeys:(0,W.dY)(Tt)}}if(ge.match(St)){const{loadingState:Tt}=St.payload;return{...ft,queryResponse:{...ft.queryResponse,state:Tt}}}if(pe.match(St)){const{isPaused:Tt}=St.payload;return{...ft,isPaused:Tt}}if(Me.match(St))return{...ft,scanning:!0};if(be.match(St))return{...ft,scanning:!1,scanRange:void 0};if(Oe.match(St)){const{cache:Je}=ft,{queryResponse:Pt,cacheKey:Yt}=St.payload;let Lt=[...Je];return Lt.some(En=>En.key===Yt)||(Lt=[{key:Yt,value:Pt},...Lt].slice(0,5)),{...ft,cache:Lt}}if(Ne.match(St))return{...ft,cache:[]};if(De.match(St)){if(!ft.logsResult)return{...ft,clearedAtIndex:null};if(ft.queryResponse.state===h.Gu.Loading)return{...ft,clearedAtIndex:null,logsResult:{...ft.logsResult,rows:[]}};const Tt=ft.clearedAtIndex?ft.clearedAtIndex+ft.logsResult.rows.length:ft.logsResult.rows.length-1;return{...ft,clearedAtIndex:Tt,logsResult:{...ft.logsResult,rows:[]}}}return ft},xn=(ft,St)=>{const{response:Tt}=St.payload,{request:Je,error:Pt,graphResult:Yt,logsResult:Lt,tableResult:fn,rawPrometheusResult:En,traceFrames:An,nodeGraphFrames:Gn,flameGraphFrames:zn,rawPrometheusFrames:sa,customFrames:ta}=Tt;return Pt&&(Pt.type===g.v2.Timeout||Pt.type===g.v2.Cancelled)?{...ft}:Je?{...ft,queryResponse:Tt,graphResult:Yt,tableResult:fn,rawPrometheusResult:En,logsResult:ft.isLive&&Lt?{...Lt,rows:(0,Pe.pg)(ft.clearedAtIndex,Lt.rows)}:Lt,showLogs:!!Lt,showMetrics:!!Yt,showTable:!!fn?.length,showTrace:!!An.length,showNodeGraph:!!Gn.length,showRawPrometheus:!!sa.length,showFlameGraph:!!zn.length,showCustom:!!ta?.length,clearedAtIndex:ft.isLive?ft.clearedAtIndex:null}:{...ft}}},19161:(ne,j,e)=>{"use strict";e.d(j,{w:()=>s});var n=e(68143);class a{getHistoryList(o,l){return typeof o!="string"?Promise.resolve([]):(0,n.AI)().get(`api/dashboards/uid/${o}/versions`,l)}getDashboardVersion(o,l){return typeof o!="string"?Promise.resolve({}):(0,n.AI)().get(`api/dashboards/uid/${o}/versions/${l}`)}restoreDashboard(o,l){if(typeof o!="string")return Promise.resolve({});const i=`api/dashboards/uid/${o}/restore`;return(0,n.AI)().post(i,{version:l})}}const s=new a},19538:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(ne){var j=function(){var i,c,p,h,u,r,v=function(C,P){i=P,c=C.getPlaceholder(),p=C.getOptions(),h=p.series.gauges,u=C.getData(),r=e(h.debug)};v.prototype.calculateLayout=function(){var C=c.width(),P=c.height(),T=Math.min(u.length,h.layout.columns),M=Math.ceil(u.length/T),I=h.layout.margin,B=h.layout.hMargin,U=h.layout.vMargin,W=(C-I*2-B*(T-1))/T,V=(P-I*2-U*(M-1))/M;if(h.layout.square){var z=Math.min(W,V);W=z,V=z}g(h,W);var R=h.cell.margin,O=0,N=0;h.label.show&&(O=h.label.margin,N=h.label.font.size);var F=0,G=0;h.value.show&&(F=h.value.margin,G=h.value.font.size);var H=0;h.threshold.show&&(H=h.threshold.width);var K=0,w=0;h.threshold.label.show&&(K=h.threshold.label.margin,w=h.threshold.label.font.size);for(var Q=W/2-R-H-K*2-w,k=h.gauge.startAngle,te=h.gauge.endAngle,q=(te-k)/100,se=-1,re=k;re<te;re+=q)se=Math.max(se,Math.sin(s(re)));se=Math.max(se,Math.sin(s(te)));var Y=(V-R*2-O*2-N)/(1+se);Y*se<F+G/2&&(Y=V-R*2-O*2-N-F-G/2);var X=Y-K*2-w-H,J=Math.min(Q,X),_=h.gauge.width;_>=J&&(_=Math.max(3,J/3));var ee=K*2+w+H+J,ae=Math.max(ee*(1+se),ee+F+G/2);return{canvasWidth:C,canvasHeight:P,margin:I,hMargin:B,vMargin:U,columns:T,rows:M,cellWidth:W,cellHeight:V,cellMargin:R,labelMargin:O,labelFontSize:N,valueMargin:F,valueFontSize:G,width:_,radius:J,thresholdWidth:H,thresholdLabelMargin:K,thresholdLabelFontSize:w,gaugeOuterHeight:ae}};function g(C,P){C.gauge.width==="auto"&&(C.gauge.width=Math.max(5,P/8)),C.label.margin==="auto"&&(C.label.margin=Math.max(1,P/20)),C.label.font.size==="auto"&&(C.label.font.size=Math.max(5,P/8)),C.value.margin==="auto"&&(C.value.margin=Math.max(1,P/30)),C.value.font.size==="auto"&&(C.value.font.size=Math.max(5,P/9)),C.threshold.width==="auto"&&(C.threshold.width=Math.max(3,P/100)),C.threshold.label.margin==="auto"&&(C.threshold.label.margin=Math.max(3,P/40)),C.threshold.label.font.size==="auto"&&(C.threshold.label.font.size=Math.max(5,P/15))}v.prototype.calculateAutoValues=g,v.prototype.calculateCellLayout=function(C,P,T){var M=n(P.columns,T),I=a(P.columns,T),B=P.margin+(P.cellWidth+P.hMargin)*M,U=P.margin+(P.cellHeight+P.vMargin)*I,W=B+P.cellWidth/2,V=U+P.cellMargin+P.labelMargin*2+P.labelFontSize+P.thresholdWidth+P.thresholdLabelFontSize+P.thresholdLabelMargin*2+P.radius,z=P.cellHeight-P.cellMargin*2-P.labelMargin*2-P.labelFontSize-P.gaugeOuterHeight,R=0;return C.cell.vAlign==="middle"?R=z/2:C.cell.vAlign==="bottom"&&(R=z),V+=R,{col:M,row:I,x:B,y:U,offsetY:R,cellWidth:P.cellWidth,cellHeight:P.cellHeight,cellMargin:P.cellMargin,cx:W,cy:V}},v.prototype.drawBackground=function(C){h.frame.show&&(i.save(),i.strokeStyle=p.grid.borderColor,i.lineWidth=p.grid.borderWidth,i.strokeRect(0,0,C.canvasWidth,C.canvasHeight),p.grid.backgroundColor&&(i.fillStyle=p.grid.backgroundColor,i.fillRect(0,0,C.canvasWidth,C.canvasHeight)),i.restore())},v.prototype.drawCellBackground=function(C,P){i.save(),C.cell.border&&C.cell.border.show&&C.cell.border.color&&C.cell.border.width&&(i.strokeStyle=C.cell.border.color,i.lineWidth=C.cell.border.width,i.strokeRect(P.x,P.y,P.cellWidth,P.cellHeight)),C.cell.background&&C.cell.background.color&&(i.fillStyle=C.cell.background.color,i.fillRect(P.x,P.y,P.cellWidth,P.cellHeight)),i.restore()},v.prototype.drawGauge=function(C,P,T,M,I){var B=C.gauge.shadow.show?C.gauge.shadow.blur:0,U=m(C,I),W=E(C,P,I);b(T.cx,T.cy,P.radius,P.width,s(C.gauge.startAngle),s(C.gauge.endAngle),C.gauge.border.color,C.gauge.border.width,C.gauge.background.color,B),b(T.cx,T.cy,P.radius-1,P.width-2,s(W.a1),s(W.a2),U,1,U,B),C.gauge.neutralValue!=null&&x(C,P,T,U)};function E(C,P,T){let M={};var I=C.gauge.neutralValue;return I!=null?T<I?(M.a1=y(C,P,T),M.a2=y(C,P,I)):(M.a1=y(C,P,I),M.a2=y(C,P,T)):(M.a1=C.gauge.startAngle,M.a2=y(C,P,T)),M}function x(C,P,T,M){var I=(C.gauge.max-C.gauge.min)/600;d(i,T.cx,T.cy,P.radius-2,P.width-4,s(y(C,P,C.gauge.neutralValue-I)),s(y(C,P,C.gauge.neutralValue+I)),M,2,C.gauge.background.color)}function m(C,P){for(var T,M=0;M<C.threshold.values.length;M++){var I=C.threshold.values[M];if(T=I.color,P<I.value)break}return T}function y(C,P,T){var M=C.gauge.startAngle+(C.gauge.endAngle-C.gauge.startAngle)*((T-C.gauge.min)/(C.gauge.max-C.gauge.min));return M<C.gauge.startAngle?M=C.gauge.startAngle:M>C.gauge.endAngle&&(M=C.gauge.endAngle),M}v.prototype.drawThreshold=function(C,P,T){for(var M=C.gauge.startAngle,I=0;I<C.threshold.values.length;I++){var B=C.threshold.values[I];c1=B.color,a2=y(C,P,B.value),d(i,T.cx,T.cy,P.radius+P.thresholdWidth,P.thresholdWidth-2,s(M),s(a2),c1,1,c1),M=a2}};function b(C,P,T,M,I,B,U,W,V,z){I!==B&&(i.save(),d(i,C,P,T,M,I,B,U,W,V),z&&(d(i,C,P,T,M,I,B),i.clip(),i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=10,i.shadowColor="gray",d(i,C,P,T+1,M+2,I,B,U,1)),i.restore())}v.prototype.drawLable=function(C,P,T,M,I){f(T.cx,T.y+T.cellMargin+P.labelMargin+T.offsetY,"flotGaugeLabel"+M,C.label.formatter?C.label.formatter(I.label,I.data[0][1]):text,C.label)},v.prototype.drawValue=function(C,P,T,M,I){f(T.cx,T.cy-C.value.font.size/2,"flotGaugeValue"+M,C.value.formatter?C.value.formatter(I.label,I.data[0][1]):text,C.value)},v.prototype.drawThresholdValues=function(C,P,T,M){D(C,P,T,"Min"+M,C.gauge.min,C.gauge.startAngle),D(C,P,T,"Max"+M,C.gauge.max,C.gauge.endAngle);for(var I=0;I<C.threshold.values.length;I++){var B=C.threshold.values[I];if(B.value>C.gauge.min&&B.value<C.gauge.max){var U=y(C,P,B.value);D(C,P,T,M+"_"+I,B.value,U)}}var W=C.gauge.neutralValue;W!=null&&W>C.gauge.min&&W<C.gauge.max&&D(C,P,T,"Neutral"+M,W,y(C,P,W))};function D(C,P,T,M,I,B){f(T.cx+(P.thresholdLabelMargin+P.thresholdLabelFontSize/2+P.radius)*Math.cos(s(B)),T.cy+(P.thresholdLabelMargin+P.thresholdLabelFontSize/2+P.radius)*Math.sin(s(B)),"flotGaugeThresholdValue"+M,C.threshold.label.formatter?C.threshold.label.formatter(I):I,C.threshold.label,B)}function f(C,P,T,M,I,B){var U=ne(c).find("#"+T),W=U.length;W||(U=ne("<span></span>"),U.attr("id",T),U.attr("class","flot-temp-elem"),c.append(U)),U.css("position","absolute"),U.css("top",P+"px"),U.css("white-space","nowrap"),I.font.size&&U.css("font-size",I.font.size+"px"),I.font.family&&U.css("font-family",I.font.family),I.color&&U.css("color",I.color),I.background.color&&U.css("background-color",I.background.color),I.background.opacity&&U.css("opacity",I.background.opacity),U.text(M),U.css("left",C+"px"),U.css("left",parseInt(U.css("left"))-U.width()/2+"px"),!W&&B&&(U.css("top",parseInt(U.css("top"))-U.height()/2+"px"),U.css("transform","rotate("+(180*B+90)+"deg)"))}return v}();function e(i){return typeof Logger<"u"?new Logger(i):null}function n(i,c){return c%i}function a(i,c){return Math.floor(c/i)}function s(i){return i*Math.PI}function d(i,c,p,h,u,r,v,g,E,x){if(r!==v){var m=!1;i.save(),i.beginPath(),i.arc(c,p,h,r,v,m),i.lineTo(c+(h-u)*Math.cos(v),p+(h-u)*Math.sin(v)),i.arc(c,p,h-u,v,r,!m),i.closePath(),E&&(i.lineWidth=E),g&&(i.strokeStyle=g,i.stroke()),x&&(i.fillStyle=x,i.fill()),i.restore()}}function o(i){i.hooks.processOptions.push(function(c,p){var h=e(p.series.gauges.debug);p.series.gauges.show&&(p.grid.show=!1,p.legend.show=!1);var u=p.series.gauges.threshold.values;u.sort(function(r,v){return r.value<v.value?-1:r.value>v.value?1:0})}),i.hooks.draw.push(function(c,p){var h=c.getOptions(),u=h.series.gauges,r=e(u.debug);if(u.show){var v=c.getData();if(!(!v||!v.length)){var g=new j(c,p),E=g.calculateLayout();u.debug.layout,g.drawBackground(E);for(var x=0;x<v.length;x++){var m=v[x],y=ne.extend({},u,m.gauges);m.gauges&&g.calculateAutoValues(y,E.cellWidth);var b=g.calculateCellLayout(y,E,x);g.drawCellBackground(y,b),y.debug.layout,y.label.show&&g.drawLable(y,E,b,x,m),g.drawGauge(y,E,b,m.label,m.data[0][1]),y.threshold.show&&g.drawThreshold(y,E,b),y.threshold.label.show&&g.drawThresholdValues(y,E,b,x),y.value.show&&g.drawValue(y,E,b,x,m)}}}})}var l={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(i,c){return i}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(i,c){return parseInt(c)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(i){return i}},values:[]}}}};ne.plot.plugins.push({init:o,options:l,name:"gauge",version:"1.1.0"})})(jQuery)},19705:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>W});var n=e(75816),a=e(59553),s=e(73659);const l=(0,a.TP)("folder.grafana.app","v1beta1"),i=(0,n.xP)({reducerPath:"folderAPIv1beta1",baseQuery:(0,s.W)({baseURL:l}),endpoints:()=>({})}),c=["API Discovery","Folder"],p=i.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:V=>({getApiResources:V.query({query:()=>({url:"/apis/folder.grafana.app/v1beta1/"}),providesTags:["API Discovery"]}),listFolder:V.query({query:z=>({url:"/folders",params:{pretty:z.pretty,allowWatchBookmarks:z.allowWatchBookmarks,continue:z.continue,fieldSelector:z.fieldSelector,labelSelector:z.labelSelector,limit:z.limit,resourceVersion:z.resourceVersion,resourceVersionMatch:z.resourceVersionMatch,sendInitialEvents:z.sendInitialEvents,timeoutSeconds:z.timeoutSeconds,watch:z.watch}}),providesTags:["Folder"]}),createFolder:V.mutation({query:z=>({url:"/folders",method:"POST",body:z.folder,params:{pretty:z.pretty,dryRun:z.dryRun,fieldManager:z.fieldManager,fieldValidation:z.fieldValidation}}),invalidatesTags:["Folder"]}),deletecollectionFolder:V.mutation({query:z=>({url:"/folders",method:"DELETE",params:{pretty:z.pretty,continue:z.continue,dryRun:z.dryRun,fieldSelector:z.fieldSelector,gracePeriodSeconds:z.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:z.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:z.labelSelector,limit:z.limit,orphanDependents:z.orphanDependents,propagationPolicy:z.propagationPolicy,resourceVersion:z.resourceVersion,resourceVersionMatch:z.resourceVersionMatch,sendInitialEvents:z.sendInitialEvents,timeoutSeconds:z.timeoutSeconds}}),invalidatesTags:["Folder"]}),getFolder:V.query({query:z=>({url:`/folders/${z.name}`,params:{pretty:z.pretty}}),providesTags:["Folder"]}),replaceFolder:V.mutation({query:z=>({url:`/folders/${z.name}`,method:"PUT",body:z.folder,params:{pretty:z.pretty,dryRun:z.dryRun,fieldManager:z.fieldManager,fieldValidation:z.fieldValidation}}),invalidatesTags:["Folder"]}),deleteFolder:V.mutation({query:z=>({url:`/folders/${z.name}`,method:"DELETE",params:{pretty:z.pretty,dryRun:z.dryRun,gracePeriodSeconds:z.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:z.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:z.orphanDependents,propagationPolicy:z.propagationPolicy}}),invalidatesTags:["Folder"]}),updateFolder:V.mutation({query:z=>({url:`/folders/${z.name}`,method:"PATCH",body:z.patch,params:{pretty:z.pretty,dryRun:z.dryRun,fieldManager:z.fieldManager,fieldValidation:z.fieldValidation,force:z.force}}),invalidatesTags:["Folder"]}),getFolderAccess:V.query({query:z=>({url:`/folders/${z.name}/access`}),providesTags:["Folder"]}),getFolderChildren:V.query({query:z=>({url:`/folders/${z.name}/children`}),providesTags:["Folder"]}),getFolderCounts:V.query({query:z=>({url:`/folders/${z.name}/counts`}),providesTags:["Folder"]}),getFolderParents:V.query({query:z=>({url:`/folders/${z.name}/parents`}),providesTags:["Folder"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:h,useLazyGetApiResourcesQuery:u,useListFolderQuery:r,useLazyListFolderQuery:v,useCreateFolderMutation:g,useDeletecollectionFolderMutation:E,useGetFolderQuery:x,useLazyGetFolderQuery:m,useReplaceFolderMutation:y,useDeleteFolderMutation:b,useUpdateFolderMutation:D,useGetFolderAccessQuery:f,useLazyGetFolderAccessQuery:C,useGetFolderChildrenQuery:P,useLazyGetFolderChildrenQuery:T,useGetFolderCountsQuery:M,useLazyGetFolderCountsQuery:I,useGetFolderParentsQuery:B,useLazyGetFolderParentsQuery:U}=p,W=p.enhanceEndpoints({})},19753:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>i});var n=e(74848),a=e(2543),s=e.n(a),d=e(96540),o=e(37386),l=e(63527);class i extends d.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=d.createRef(),this.updateValue=()=>{const p=this.inputRef.current?.value;let h=!1,u="";const r=this.props.min,v=this.props.max;let g=p!==""?Number(p):void 0;g&&!Number.isNaN(g)&&(r!=null&&g<r?(u=r.toString(),h=!0):v!=null&&g>v?(u=v.toString(),h=!0):u=p??"",this.setState({text:u,inputCorrected:h})),h&&this.updateValueDebounced(),!Number.isNaN(g)&&g!==this.props.value&&this.props.onChange(g)},this.updateValueDebounced=(0,a.debounce)(this.updateValue,500),this.onChange=p=>{this.setState({text:p.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=p=>{p.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(p){if(this.props.value!==p.value){const h=isNaN(this.props.value)?"":`${this.props.value}`;h!==this.state.text&&this.setState({text:h})}}renderInput(){return(0,n.jsx)(l.p,{type:"number",id:this.props.id,ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:p}=this.state;if(p){let h="",{min:u,max:r}=this.props;return r==null?u!=null&&(h=`< ${u}`):u!=null?h=`${u} < > ${r}`:h=`> ${r}`,(0,n.jsx)(o.D,{invalid:p,error:`Out of range ${h}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"},children:this.renderInput()})}return this.renderInput()}}},20012:(ne,j,e)=>{"use strict";e.d(j,{$:()=>d,D:()=>s});var n=e(739),a=e(59427);function s(o){return!o||typeof o!="string"?"":o.indexOf(":/")>0?o:`${window.__grafana_public_path__}build/${o}`}function d(o,l){const i=l.mode??n.q_.Fixed;if(i===n.q_.Fixed){const h=s(l.fixed);return{isAssumed:!h,fixed:h,value:()=>h,get:u=>h}}const c=(0,a.UI)(o,l.field);if(!c)return{isAssumed:!0,fixed:"",value:()=>"",get:u=>""};if(i===n.q_.Mapping){const h=u=>s(`${u}`);return{field:c,get:u=>h(c.values[u]),value:()=>h((0,a.sB)(c))}}const p=h=>{if(typeof h!="string")return"";let u=h;if(c&&c.display){const r=c.display(h);r.icon&&(u=r.icon)}return s(u)};return{field:c,get:h=>p(c.values[h]),value:()=>p((0,a.sB)(c))}}},20018:(ne,j,e)=>{"use strict";e.d(j,{N:()=>a});var n=e(65307);const a=(0,n.VP)("core/cleanUpState")},20246:(ne,j,e)=>{"use strict";e.d(j,{$Y:()=>h,BK:()=>l,DP:()=>c,f:()=>i,lv:()=>p,z4:()=>o});var n=e(96540),a=e(73427),s=e(15759);function d(u){let r=u.parent;for(;r;){if(isDashboardLayoutManager(r))return r;r=r.parent}return null}function o({autoFocus:u}={}){const r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{r.current&&u&&setTimeout(()=>r.current?.focus(),200)},[u]),r}function l(u,r){const v=u??"";if(r.has(v)){const g=v.match(/^(.*?)(\d+)$/);if(g){const E=g[1],x=parseInt(g[2],10);let m=`${E}${x+1}`;for(;r.has(m);){const y=parseInt(m.match(/\d+$/)[0],10)+1;m=`${E}${y}`}return m}else{let E=1,x=`${v} ${E}`;for(;r.has(x);)E++,x=`${v} ${E}`;return x}}return v}function i(u,r,v){const g=u.parent;(0,s.l)(g)&&(r.clearParent(),g.switchLayout(r,v))}function c(u){return!(u||a.TP.user&&a.TP.user.authenticatedBy==="render")}var p=(u=>(u.AutoGridLayout="AutoGridLayout",u.GridLayout="GridLayout",u))(p||{});function h(u){switch(u){case"AutoGridLayout":return"AutoGridLayout";case"GridLayout":return"GridLayout";default:return}}},20386:(ne,j,e)=>{"use strict";e.d(j,{c:()=>s,t:()=>a});var n=e(99885);function a(d,o,l){if(!l.trim())return d;const i=d.map(o);return(0,n.X)(i,l).map(p=>d[p])}function s(d,o){if(!o.trim())return!0;const l=[d];return(0,n.X)(l,o).length>0}},20437:(ne,j,e)=>{"use strict";e.d(j,{Bu:()=>re,J6:()=>k,Os:()=>D,Q8:()=>b,QX:()=>z,Qk:()=>O,XI:()=>N,Z9:()=>M,l1:()=>f,mY:()=>Y,mp:()=>Q,qO:()=>F,zQ:()=>R});var n=e(39796),a=e(17548),s=e(22592),d=e(43173),o=e(78282),l=e(36580),i=e(44248),c=e(92119),p=e(4651),h=e(2954),u=e(84523),r=e(6194),v=e(67817),g=e(95443),E=e(52161),x=e(77256),m=e(29609),y=e(15629);const b="grafana.alerting.manualRouting",D="grafana.alerting.simplifiedQueryEditor";function f(X){const{name:J,expression:_,forTime:ee,forTimeUnit:ae,keepFiringForTime:le,keepFiringForTimeUnit:L,type:ie}=X,oe=(0,x.Sl)(I(X.annotations)),ue=(0,x.Sl)(B(X.labels));if(ie===v.Z.cloudAlerting){let ye;return le&&L&&(ye=`${le}${L}`),{alert:J,for:`${ee}${ae}`,keep_firing_for:ye,annotations:oe,labels:ue,expr:_}}else if(ie===v.Z.cloudRecording)return{record:J,labels:ue,expr:_};throw new Error(`unexpected rule type: ${ie}`)}function C(X,J){const _=[...(0,x.KT)(X||{})];return J&&_.push({key:"",value:""}),_}function P(X,J){if(J?.grafana?.selectedContactPoint&&X)return{receiver:J?.grafana?.selectedContactPoint,mute_time_intervals:J?.grafana?.muteTimeIntervals,active_time_intervals:J?.grafana?.activeTimeIntervals,group_by:J?.grafana?.overrideGrouping?J?.grafana?.groupBy:void 0,group_wait:J?.grafana?.overrideTimings&&J?.grafana?.groupWaitValue?J?.grafana?.groupWaitValue:void 0,group_interval:J?.grafana?.overrideTimings&&J?.grafana?.groupIntervalValue?J?.grafana?.groupIntervalValue:void 0,repeat_interval:J?.grafana?.overrideTimings&&J?.grafana?.repeatIntervalValue?J?.grafana?.repeatIntervalValue:void 0}}function T(X){return{simplified_query_and_expressions_section:X.simplifiedQueryEditor,simplified_notifications_section:X.simplifiedNotificationEditor}}function M(X){const{name:J,condition:_,noDataState:ee,execErrState:ae,evaluateFor:le,keepFiringFor:L,queries:ie,isPaused:oe,contactPoints:ue,manualRouting:ye,type:fe,metric:Ee,targetDatasourceUid:Ae,missingSeriesEvalsToResolve:Ge}=X;if(!_)throw new Error("You cannot create an alert rule without specifying the alert condition");const Fe=P(ye,ue),Pe=X.editorSettings?{editor_settings:T(X.editorSettings)}:void 0,Ve=(0,x.Sl)(I(X.annotations)),me=(0,x.Sl)(B(X.labels)),Se=(0,m.Mu)(fe),Qe=(0,m.pq)(fe);if(Se)return{grafana_alert:{title:J,condition:_,data:ie.map(q),is_paused:!!oe,no_data_state:ee,exec_err_state:ae,notification_settings:Fe,metadata:Pe,missing_series_evals_to_resolve:Ge?Number(Ge):0},annotations:Ve,labels:me,for:le,keep_firing_for:L};if(Qe)return{grafana_alert:{title:J,condition:_,data:ie.map(q),is_paused:!!oe,record:{metric:Ee??J,from:_,target_datasource_uid:Ae}},annotations:Ve,labels:me};throw new Error(`Failed to convert form values to Grafana rule: unknown type ${fe}`)}const I=X=>X.map(U).filter(({key:J,value:_})=>!!J&&!!_),B=X=>X.map(U).filter(({key:J})=>!!J),U=({key:X,value:J})=>({key:X.trim(),value:J.trim()});function W(X){const J=X.notification_settings?{selectedContactPoint:X.notification_settings.receiver,muteTimeIntervals:X.notification_settings.mute_time_intervals??[],activeTimeIntervals:X.notification_settings.active_time_intervals??[],overrideGrouping:Array.isArray(X.notification_settings.group_by)&&X.notification_settings.group_by.length>0,overrideTimings:[X.notification_settings.group_wait,X.notification_settings.group_interval,X.notification_settings.repeat_interval].some(Boolean),groupBy:X.notification_settings.group_by||[],groupWaitValue:X.notification_settings.group_wait||"",groupIntervalValue:X.notification_settings.group_interval||"",repeatIntervalValue:X.notification_settings.repeat_interval||""}:void 0;return J?{[E.hY]:J}:void 0}function V(X){if(d.$.featureToggles.alertingQueryAndExpressionsStepMode)return X.metadata?.editor_settings?{simplifiedQueryEditor:X.metadata.editor_settings.simplified_query_and_expressions_section,simplifiedNotificationEditor:X.metadata.editor_settings.simplified_notifications_section}:{simplifiedQueryEditor:!1,simplifiedNotificationEditor:!!X.notification_settings}}function z(X){const{ruleSourceName:J,namespace:_,group:ee,rule:ae}=X,le=m.p.grafana.recordingRule(ae),L=(0,u.IJ)(le?v.Z.grafanaRecording:void 0);if((0,E.z2)(J))if(le){const ie=ae.grafana_alert;return{...L,name:ie.title,type:v.Z.grafanaRecording,group:ee.name,evaluateEvery:ee.interval||L.evaluateEvery,queries:ie.data,condition:ie.condition,annotations:(0,r.JE)(C(ae.annotations,!1)),labels:C(ae.labels,!0),folder:{title:_,uid:ie.namespace_uid},isPaused:ie.is_paused,metric:ie.record?.metric,targetDatasourceUid:ie.record?.target_datasource_uid||L.targetDatasourceUid}}else if(m.p.grafana.rule(ae)){const ie=ae.grafana_alert,oe=W(ie);if(ie.no_data_state!==void 0&&ie.exec_err_state!==void 0)return{...L,name:ie.title,type:v.Z.grafana,group:ee.name,evaluateEvery:ee.interval||L.evaluateEvery,evaluateFor:ae.for||"0",keepFiringFor:ae.keep_firing_for||"0",noDataState:ie.no_data_state,execErrState:ie.exec_err_state,queries:ie.data,condition:ie.condition,annotations:(0,r.JE)(C(ae.annotations,!1)),labels:C(ae.labels,!0),folder:{title:_,uid:ie.namespace_uid},isPaused:ie.is_paused,contactPoints:oe,manualRouting:!!oe,editorSettings:V(ie),missingSeriesEvalsToResolve:ie.missing_series_evals_to_resolve};throw new Error("Unexpected type of rule for grafana rules source")}else throw new Error("Unexpected type of rule for grafana rules source");else if(m.p.dataSource.alertingRule(ae)){const oe={refId:"A",datasourceUid:(0,o.l)().getInstanceSettings(J)?.uid??"",queryType:"",relativeTimeRange:(0,s.Cn)(),expr:ae.expr,model:{refId:"A",hide:!1,expr:ae.expr}},ue=O(ae);return{...L,...ue,queries:[oe],annotations:(0,r.JE)(C(ae.annotations,!1)),type:v.Z.cloudAlerting,dataSourceName:J,namespace:_,group:ee.name}}else if(m.p.dataSource.recordingRule(ae)){const ie=N(ae);return{...L,...ie,type:v.Z.cloudRecording,dataSourceName:J,namespace:_,group:ee.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function R(X,J){const _=m.p.grafana.recordingRule(X),ee=(0,u.IJ)(_?v.Z.grafanaRecording:void 0),ae=X.grafana_alert,le=X.for,L=X.keep_firing_for,ie=X.annotations,oe=X.labels,ue={...ee,name:ae.title,queries:ae.data,condition:ae.condition,annotations:(0,r.JE)(C(ie,!1)),labels:C(oe,!0),folder:{title:J,uid:ae.namespace_uid},isPaused:ae.is_paused};if(m.p.grafana.recordingRule(X))return{...ue,type:v.Z.grafanaRecording,group:ae.rule_group,metric:ae.record?.metric};const ye=W(ae);if(ae.no_data_state!==void 0&&ae.exec_err_state!==void 0)return{...ue,type:v.Z.grafana,group:ae.rule_group,evaluateFor:le||"0",keepFiringFor:L||"0",noDataState:ae.no_data_state,execErrState:ae.exec_err_state,contactPoints:ye,manualRouting:!!ye,editorSettings:V(ae)};throw new Error("Unexpected type of rule for grafana rules source")}function O(X){const J=(0,u.IJ)(),[_,ee]=X.for?(0,y.P1)(X.for):[0,"s"],[ae,le]=X.keep_firing_for?(0,y.P1)(X.keep_firing_for):[J.keepFiringForTime,J.keepFiringForTimeUnit];return{name:X.alert,expression:X.expr,forTime:_,forTimeUnit:ee,keepFiringForTime:ae,keepFiringForTimeUnit:le,annotations:C(X.annotations,!1),labels:C(X.labels,!0)}}function N(X){return{name:X.record,expression:X.expr,labels:C(X.labels,!0)}}const F=(X=!1)=>{const J=(0,E.y9)();if(!J)return[...X?K("A"):H("A","B")];const _=(0,s.Cn)(),ee=X?K("B"):H("B","C"),ae=J?(0,E.cl)(J.type):!1;return[{refId:"A",datasourceUid:J.uid,queryType:"",relativeTimeRange:_,model:{refId:"A",instant:ae?!0:void 0}},...ee]},G=X=>{const J=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:X[0]?.uid||"",queryType:"",relativeTimeRange:J,model:{refId:"A"}}]},H=(...X)=>{const J=X[0],_=X[1],ee={refId:X[0],type:p.Tz.reduce,datasource:{uid:p.Uj,type:l.dR.type},conditions:[{type:"query",evaluator:{params:[],type:h.p.IsAbove},operator:{type:"and"},query:{params:[J]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},ae={refId:_,type:p.Tz.threshold,datasource:{uid:p.Uj,type:l.dR.type},conditions:[{type:"query",evaluator:{params:[0],type:h.p.IsAbove},operator:{type:"and"},query:{params:[_]},reducer:{params:[],type:"last"}}],expression:J};return[{refId:J,datasourceUid:p.Uj,queryType:"",model:ee},{refId:_,datasourceUid:p.Uj,queryType:"",model:ae}]},K=X=>{const J={refId:X,type:p.Tz.reduce,datasource:{uid:p.Uj,type:l.dR.type},conditions:[{type:"query",evaluator:{params:[],type:h.p.IsAbove},operator:{type:"and"},query:{params:[X]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"};return[{refId:X,datasourceUid:p.Uj,queryType:"",model:J}]},w=async(X,J,_,ee,ae,le)=>{const L=[];for(const ie of X){const oe=await(0,o.l)().get(ie.datasource?.uid?ie.datasource:ee),ue={uid:oe.uid,type:oe.type},ye=a.relativeToTimeRange(J),{interval:fe,intervalMs:Ee}=te(ye,le??oe.interval,ae),Ae={__interval:{text:fe,value:fe},__interval_ms:{text:Ee,value:Ee},..._},Ge=oe.interpolateVariablesInQueries?oe.interpolateVariablesInQueries([ie],Ae)[0]:ie;if(ue.uid===p.Uj){const Fe={refId:Ge.refId,queryType:"",relativeTimeRange:J,datasourceUid:p.Uj,model:Ge};L.push(Fe)}else{const Fe=(0,o.l)().getInstanceSettings(ue);if(Fe&&Fe.meta.alerting){const Pe={refId:Ge.refId,queryType:Ge.queryType??"",relativeTimeRange:J,datasourceUid:Fe.uid,model:{...Ge,maxDataPoints:ae,intervalMs:Ee}};L.push(Pe)}}}return L},Q=async(X,J)=>{const{targets:_}=X;if(!X.id||!J.uid)return;const ee=a.timeRangeToRelative(a.convertRawToRange(J.time)),ae=await w(_,ee,X.scopedVars||{},X.datasource??void 0,X.maxDataPoints??void 0,X.interval??void 0);if(!ae.length||!ae.find(ue=>ue.datasourceUid!==p.Uj))return;if(!ae.find(ue=>ue.datasourceUid===p.Uj)){const[ue,ye]=H((0,n.M)(ae),"-");ae.push(ue);const[fe,Ee]=H(ue.refId,(0,n.M)(ae));ae.push(Ee)}const{folderTitle:le,folderUid:L}=J.meta,ie=L&&le?{kind:"folder",uid:L,title:le}:void 0;return{type:v.Z.grafana,folder:ie,queries:ae,name:X.title,condition:ae[ae.length-1].refId,annotations:[{key:g.YH.dashboardUID,value:J.uid},{key:g.YH.panelID,value:String(X.id)}]}},k=async X=>{if(!X.state.key)return;const J=i.jh.getTimeRange(X),_=(0,c.un)(X);if(!_)return;const{queries:ee,datasource:ae,maxDataPoints:le,minInterval:L}=_.state,ie=(0,c.YQ)(X);if(!ie||!ie.state.uid)return;const oe=await w(ee,a.timeRangeToRelative(a.convertRawToRange(J.state.value.raw)),{__sceneObject:{value:X}},ae,le,L);if(!oe.length||!oe.find(Ae=>Ae.datasourceUid!==p.Uj))return;if(!oe.find(Ae=>Ae.datasourceUid===p.Uj)){const[Ae,Ge]=H((0,n.M)(oe),"-");oe.push(Ae);const[Fe,Pe]=H(Ae.refId,(0,n.M)(oe));oe.push(Pe)}const{folderTitle:ue,folderUid:ye}=ie.state.meta,fe=ye&&ue?{kind:"folder",uid:ye,title:ue}:void 0;return{type:v.Z.grafana,folder:fe,queries:oe,name:X.state.title,condition:oe[oe.length-1].refId,annotations:[{key:g.YH.dashboardUID,value:ie.state.uid},{key:g.YH.panelID,value:String((0,c.Cs)(X))}]}};function te(X,J,_){return _?a.calculateInterval(X,_,J):J&&a.intervalToMs(J)>1e3?{interval:J,intervalMs:a.intervalToMs(J)}:{interval:"1s",intervalMs:1e3}}function q(X){const J=X.model;return se(J)&&J.instant&&J.range?{...X,model:{...J,range:!0,instant:!1}}:X}function se(X){return"expr"in X&&"instant"in X&&"range"in X}function re(X){return"expr"in X}function Y(X){const J=X.datasourceUid??X.model.datasource?.uid;if(!J)return;const _=(0,o.l)().getInstanceSettings(J)?.type;if(!_||!(0,E.cl)(_))return;const{model:ee}=X,ae="instant"in ee&&ee.instant!==void 0?ee.instant:!0,le="queryType"in ee&&ee.queryType!==void 0?ee.queryType==="instant":!0;return(0,E.bS)(_)?ae:le}},20443:(ne,j,e)=>{"use strict";e.d(j,{DY:()=>C,Mk:()=>m,QM:()=>g,Rg:()=>h,SJ:()=>x,YE:()=>E,Yl:()=>r,gY:()=>y,hH:()=>D,ie:()=>b});var n=e(84266),a=e(24610),s=e(52161),d=e(63895),o=e(67923),l=e(15629);const i=(P,T)=>Object.entries(P??{}).reduce((M,[I,B])=>[...M,{name:I,value:B,operator:T?n.ho.regex:n.ho.equal}],[]),c=P=>P.value,p=P=>(P??[]).map(c),h={name:"",value:"",operator:n.ho.equal},u=["grafana_folder","alertname"],r=[{label:"grafana_folder",value:"grafana_folder",isFixed:!0},{label:"alertname",value:"alertname",isFixed:!0},{label:"Disable (...)",value:"..."}],v={id:"",overrideGrouping:!1,groupBy:u,object_matchers:[],routes:[],continue:!1,receiver:"",overrideTimings:!1,groupWaitValue:"",groupIntervalValue:"",repeatIntervalValue:"",muteTimeIntervals:[],activeTimeIntervals:[]};function g(P,T="0"){const M=(0,o.KR)(P),I=P.routes??[];return{id:`${T}-${M}`,...P,routes:I.map((B,U)=>g(B,`${T}-${U}`))}}const E=P=>{if(!P)return v;const T=P.id;if(Object.keys(P).length===0)return{...v,id:T};const M=[];P.routes?.forEach(U=>{const W=E(U);M.push(W)});const I=P.object_matchers?.map(U=>({name:U[0],operator:U[1],value:U[2]}))??[],B=P.matchers?.flatMap(U=>(0,d.So)(U).flatMap(a.MU)).map(({name:U,operator:W,value:V})=>({name:(0,d.Ig)(U),operator:W,value:(0,d.Ig)(V)}))??[];return{id:T,object_matchers:[...B,...I,...i(P.match,!1),...i(P.match_re,!0)],continue:P.continue??!1,receiver:P.receiver??"",overrideGrouping:Array.isArray(P.group_by)&&P.group_by.length>0,groupBy:P.group_by??void 0,overrideTimings:[P.group_wait,P.group_interval,P.repeat_interval].some(Boolean),groupWaitValue:P.group_wait??"",groupIntervalValue:P.group_interval??"",repeatIntervalValue:P.repeat_interval??"",routes:M,muteTimeIntervals:P.mute_time_intervals??[],activeTimeIntervals:P.active_time_intervals??[]}},x=(P,T,M)=>{const I=(0,o.eM)(T.id??"",M),{overrideGrouping:B,groupBy:U,overrideTimings:W,groupWaitValue:V,groupIntervalValue:z,repeatIntervalValue:R,receiver:O}=T,N=void 0,F=B?U:N,H=W&&V?V:N,w=W&&z?z:N,k=W&&R?R:N,te=T.object_matchers?.filter(re=>re.name&&re.operator&&re.value!==null&&re.value!==void 0).map(({name:re,operator:Y,value:X})=>[re,Y,X]),q=T.routes?.map(re=>x(P,re,M)),se={...I??{},continue:T.continue,group_by:F,object_matchers:te,match:void 0,match_re:void 0,group_wait:H,group_interval:w,repeat_interval:k,routes:q,mute_time_intervals:T.muteTimeIntervals,active_time_intervals:T.activeTimeIntervals,receiver:O};return P!==s.hY?(se.matchers=T.object_matchers?.map(d.b2),se.object_matchers=void 0):(se.object_matchers=(0,d.J$)(se),se.matchers=void 0),T.receiver&&(se.receiver=T.receiver),se},m=P=>({label:P,value:P}),y=P=>(P??[]).map(m),b=P=>P?p(P):[];function D(P){return!P||P.length===0?!0:(0,l.TN)(P)||"Invalid duration format. Must be {number}{time_unit}"}const f=P=>P.map(T=>{const[M,I,B]=T;return`${M}${I}${B}`}),C=(P,T="")=>{if(P.length===0)return!0;const M=D(P),I=D(T);if(M!==!0)return M;if(I!==!0)return I;const B=(0,l.P8)(P),U=(0,l.P8)(T);return U!==0&&B<U?"Repeat interval should be higher or equal to Group interval":!0}},20662:(ne,j,e)=>{"use strict";e.d(j,{z:()=>d});var n=e(74848),a=e(96540);function s(o,l){const i=[];return o.forEach(c=>{i.push(c.start,c.end+1)}),i[0]!==0&&i.unshift(0),i[i.length-1]!==l&&i.push(l),i}const d=o=>{let{highlightParts:l,text:i,highlightClassName:c}=o;if(!l?.length)return null;let p=[],h=s(l,i.length),u=l[0].start===0;for(let r=1;r<h.length;r++){let v=h[r-1],g=h[r];p.push((0,a.createElement)(u?"mark":"span",{key:r-1,className:u?c:void 0},i.substring(v,g))),u=!u}return(0,n.jsx)("div",{children:p})}},20718:(ne,j,e)=>{"use strict";e.d(j,{Jr:()=>h,K6:()=>i,Kl:()=>v,Qb:()=>d,i6:()=>l,pF:()=>c,qq:()=>u,st:()=>p,vC:()=>r});var n=e(25508),a=e(2543),s=e.n(a);const d=g=>g.explore.panes,o=g=>g.explore,l=g=>g.explore.richHistorySettings,i=(0,n.Mz)(d,Object.entries),c=(0,n.Mz)(i,g=>g.length>1),p=(0,n.Mz)(i,g=>g.some(E=>E[1].correlationEditorHelperData!==void 0)),h=g=>(0,n.Mz)(d,E=>Object.keys(E)[0]===g),u=g=>(0,n.Mz)(d,E=>E[g]),r=(0,n.Mz)(o,g=>g.correlationEditorDetails),v=(0,n.Mz)(i,g=>{const E=g.map(([y,b])=>{const D=[b?.datasourceInstance?.getRef()],f=b?.queries.map(P=>P.datasource)||[],C=[...D,...f].filter(P=>!!P);if(!(C===void 0||C.length===0))return{exploreId:y,datasources:(0,a.uniqBy)(C,P=>P.uid)}}).filter(y=>!!y),m=(0,a.uniqBy)((0,a.flatten)(E.map(y=>y.datasources)),y=>y.uid).map(y=>{let b=[];return E.forEach(D=>{D.datasources.some(f=>f.uid===y.uid)&&b.push(D.exploreId)}),{datasource:y,exploreIds:b}});return{exploreToDS:E,dsToExplore:m}})},20720:(ne,j,e)=>{"use strict";e.d(j,{h:()=>n});function n(a,s,d){}},20806:(ne,j,e)=>{"use strict";e.d(j,{s:()=>c});var n=e(74848),a=e(92138),s=e(92745),d=e(36490),o=e(22787),l=e(45861),i=e(41654);function c(p){const{onDismiss:h,path:u,title:r}=p,v=()=>{e.g.open(a.I.assureBaseUrl(u),"_blank"),h()},g=()=>d.Ny.push(u);return(0,n.jsxs)(o.a,{title:r,isOpen:!0,onDismiss:h,children:[(0,n.jsx)(i.B,{direction:"column",gap:1,children:(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"explore.confirm-navigation-modal.new-tab",children:"Do you want to proceed in the current tab or open a new tab?"})})}),(0,n.jsxs)(o.a.ButtonRow,{children:[(0,n.jsx)(l.$n,{onClick:h,fill:"outline",variant:"secondary",children:(0,n.jsx)(s.x6,{i18nKey:"explore.confirm-navigation-modal.cancel",children:"Cancel"})}),(0,n.jsx)(l.$n,{type:"submit",variant:"secondary",onClick:v,icon:"external-link-alt",children:(0,n.jsx)(s.x6,{i18nKey:"explore.confirm-navigation-modal.open-in-new-tab",children:"Open in new tab"})}),(0,n.jsx)(l.$n,{type:"submit",variant:"primary",onClick:g,icon:"apps",children:(0,n.jsx)(s.x6,{i18nKey:"explore.confirm-navigation-modal.open",children:"Open"})})]})]})}},20877:(ne,j,e)=>{"use strict";e.d(j,{a:()=>s});var n=e(74848),a=e(79450);function s(d){const{children:o,...l}=d;return(0,n.jsx)(a.b.Provider,{value:l,children:o})}},20941:(ne,j,e)=>{"use strict";e.d(j,{N:()=>l});var n=e(74848),a=e(96540),s=e(35557),d=e(63704),o=e(92138);const l=(0,a.forwardRef)(({href:i,children:c,...p},h)=>{const u=o.I.stripBaseFromUrl(d.sQ.sanitizeUrl(i??""));return(0,n.jsx)(s.Link,{ref:h,to:u,...p,children:c})});l.displayName="Link"},20962:(ne,j,e)=>{"use strict";e.d(j,{l:()=>d});var n=e(96540),a=e(54148),s=e(36490);function d(){const{search:o}=(0,a.zy)(),l=(0,n.useMemo)(()=>new URLSearchParams(o),[o]),i=(0,n.useCallback)((c,p)=>{s.Ny.partial(c,p)},[]);return[l,i]}},21103:(ne,j,e)=>{"use strict";e.d(j,{F:()=>v});var n=e(74848),a=e(22803),s=e(17437),d=e(69156),o=e(96540),l=e(92745),i=e(63142),c=e(5994);const p=g=>{const{value:E,children:x,visible:m,placement:y,tipFormatter:b,...D}=g,f=(0,o.useRef)(null),C=(0,o.useRef)(null),P=(0,i.of)(h);function T(){C.current!==null&&cancelAnimationFrame(C.current)}function M(){C.current=requestAnimationFrame(()=>{f.current?.forceAlign()})}return(0,o.useEffect)(()=>(m?M():T(),T),[E,m]),(0,n.jsx)(c.A,{overlayClassName:P.tooltip,placement:y,overlay:b??E,overlayInnerStyle:{minHeight:"auto"},ref:f,visible:m,...D,children:x})},h=g=>({tooltip:(0,a.css)({position:"absolute",display:"block",visibility:"visible",fontSize:g.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:g.zIndex.tooltip})}),u=p;var r=e(91302);const v=({min:g,max:E,onChange:x,onAfterChange:m,orientation:y="horizontal",reverse:b,step:D,formatTooltipResult:f,value:C,tooltipAlwaysVisible:P=!0})=>{const T=(0,o.useCallback)(V=>{x?.(typeof V=="number"?[V,V]:V)},[x]),M=(0,o.useCallback)(V=>{m?.(typeof V=="number"?[V,V]:V)},[m]),I=y==="horizontal",B=(0,i.of)(r.$,I),U=(0,l.t)("grafana-ui.range-slider.drag-handle-aria-label","Use arrow keys to change the value"),W=(V,z)=>(0,n.jsx)(u,{value:z.value,visible:P||z.dragging,tipFormatter:f?()=>f(z.value):void 0,placement:I?"top":"right",children:V});return(0,n.jsxs)("div",{className:(0,a.cx)(B.container,B.slider),children:[(0,n.jsx)(s.Global,{styles:B.tooltip}),(0,n.jsx)(d.A,{min:g,max:E,step:D,defaultValue:C,range:!0,onChange:T,onChangeComplete:M,vertical:!I,reverse:b,handleRender:W,ariaLabelForHandle:U})]})};v.displayName="RangeSlider"},21133:(ne,j,e)=>{"use strict";e.d(j,{T:()=>i});var n=e(22803),a=e(58851);const s=(0,n.keyframes)({"0%":{opacity:0,transformOrigin:"0% 0%",transform:"scaleY(0.8)"},"100%":{opacity:1,transformOrigin:"0% 0%",transform:"scaleY(1)"}}),d=(0,n.keyframes)({"0%":{opacity:1,transformOrigin:"0% 0%",transform:"scaleY(1)"},"100%":{opacity:0,transformOrigin:"0% 0%",transform:"scaleY(0.8)"}}),o=(0,n.keyframes)({"0%":{opacity:0,transformOrigin:"0% 100%",transform:"scaleY(0.8)"},"100%":{opacity:1,transformOrigin:"0% 100%",transform:"scaleY(1)"}}),l=(0,n.keyframes)({"0%":{opacity:1,transformOrigin:"0% 100%",transform:"scaleY(1)"},"100%":{opacity:0,transformOrigin:"0% 100%",transform:"scaleY(0.8)"}}),i=c=>{const p=(0,a.hO)("angle-right");return{dropdown:(0,n.css)({"&.rc-cascader-dropdown":{position:"absolute",zIndex:9999,"&-hidden":{display:"none"}},".rc-cascader":{"&-menus":{overflow:"hidden",background:c.colors.background.elevated,border:"none",borderRadius:c.shape.radius.default,boxShadow:c.shadows.z3,whiteSpace:"nowrap","&.slide-up-enter, &.slide-up-appear":{animationDuration:"0.3s",animationFillMode:"both",transformOrigin:"0 0",opacity:0,animationTimingFunction:"cubic-bezier(0.08, 0.82, 0.17, 1)",animationPlayState:"paused"},"&.slide-up-enter.slide-up-enter-active.rc-cascader-menus-placement, &.slide-up-appear.slide-up-appear-active.rc-cascader-menus-placement":{"&-bottomLeft":{animationName:s,animationPlayState:"running"},"&-topLeft":{animationName:o,animationPlayState:"running"}},"&.slide-up-leave":{animationDuration:"0.3s",animationFillMode:"both",transformOrigin:"0 0",opacity:1,animationTimingFunction:"cubic-bezier(0.6, 0.04, 0.98, 0.34)",animationPlayState:"paused","&.slide-up-leave-active.rc-cascader-menus-placement":{"&-bottomLeft":{animationName:d,animationPlayState:"running"},"&-topLeft":{animationName:l,animationPlayState:"running"}}}},"&-menu":{display:"inline-block",maxWidth:"50vw",height:"192px",listStyle:"none",margin:0,padding:c.spacing(.5),borderRight:`1px solid ${c.colors.border.weak}`,overflow:"auto","&:last-child":{borderRight:0},"&-item":{height:c.spacing(4),lineHeight:c.spacing(4),padding:c.spacing(0,4,0,2),borderRadius:c.shape.radius.default,cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",transition:"all 0.3s ease",position:"relative","&:hover":{background:c.colors.action.hover},"&-disabled":{cursor:"not-allowed",color:c.colors.text.disabled,"&:hover":{background:"transparent"},"&:after":{position:"absolute",right:"12px",content:"'loading'",color:c.colors.text.disabled,fontStyle:"italic"}},"&-active":{color:c.colors.text.maxContrast,background:c.colors.background.secondary,"&:hover":{background:c.colors.action.hover}},"&-expand":{position:"relative","&:after":{background:c.colors.text.primary,content:"''",height:c.spacing(3),mask:`url(${p})`,maskType:"luminance",position:"absolute",right:0,top:c.spacing(.5),width:c.spacing(3)}}}}}})}}},21234:(ne,j,e)=>{"use strict";e.d(j,{I:()=>o});var n=e(74848),a=e(22803),s=e(8073),d=e(63142);function o({description:i,text:c,url:p}){const h=(0,d.of)(l);return(0,n.jsxs)(s.Z,{noMargin:!0,className:h.card,href:p,children:[(0,n.jsx)(s.Z.Heading,{children:c}),(0,n.jsx)(s.Z.Description,{className:h.description,children:i})]})}const l=i=>({card:(0,a.css)({gridTemplateRows:"1fr 0 2fr"}),description:(0,a.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})})},21241:(ne,j,e)=>{"use strict";e.d(j,{J8:()=>s,L0:()=>d,Lw:()=>o});var n=e(92745),a=e(3845);const s=()=>{const l={name:(0,n.t)("alerting.alertVersionHistory.provisioning","Provisioning"),tooltipContent:(0,n.t)("alerting.alertVersionHistory.provisioning-change-description","Version update was made via provisioning"),badgeColor:"purple"};return{__alerting__:{name:(0,n.t)("alerting.alertVersionHistory.alerting","Alerting"),tooltipContent:(0,n.t)("alerting.alertVersionHistory.alerting-change-description","This update was made by the alerting system due to other changes. For example, when renaming a contact point that is used for simplified routing, this will update affected rules"),badgeColor:"orange",icon:"bell"},service:l,__provisioning__:l}};function d(l){const{grafana_alert:i,...c}=l,p={for:(0,n.t)("alerting.alertVersionHistory.pendingPeriod","Pending period"),annotations:(0,n.t)("alerting.alertVersionHistory.annotations","Annotations"),labels:(0,n.t)("alerting.alertVersionHistory.labels","Labels")},h={title:(0,n.t)("alerting.alertVersionHistory.name","Name"),namespace_uid:(0,n.t)("alerting.alertVersionHistory.namespace_uid","Folder UID"),data:(0,n.t)("alerting.alertVersionHistory.queryAndAlertCondition","Query and alert condition"),notification_settings:(0,n.t)("alerting.alertVersionHistory.contactPointRouting","Contact point routing"),no_data_state:(0,n.t)("alerting.alertVersionHistory.noDataState","Alert state when no data"),exec_err_state:(0,n.t)("alerting.alertVersionHistory.execErrorState","Alert state when execution error"),is_paused:(0,n.t)("alerting.alertVersionHistory.paused","Paused state"),rule_group:(0,n.t)("alerting.alertVersionHistory.rule_group","Rule group"),condition:(0,n.t)("alerting.alertVersionHistory.condition","Alert condition"),intervalSeconds:(0,n.t)("alerting.alertVersionHistory.intervalSeconds","Evaluation interval")},u=Object.entries(c).reduce((v,[g,E])=>{const m=p[g]||g;return{...v,[m]:E}},{}),r=Object.entries(i).reduce((v,[g,E])=>{const x=g;if(a.R.includes(x))return v;const m=h[x]||g;return{...v,[m]:E}},{});return{...u,...r}}function o(l){const i=(0,n.t)("alerting.alertVersionHistory.unknown","Unknown"),c=s(),p=(()=>{const h=l?.grafana_alert.updated_by,u=h?.uid,r=h?.name;return h?u&&c[u]?c[u].name:r||(u?(0,n.t)("alerting.alertVersionHistory.user-id","User ID {{uid}}",{uid:u}):i):i})();return{createdAt:l.grafana_alert.updated||i,createdBy:p,version:l.grafana_alert.version||i}}},21253:(ne,j,e)=>{"use strict";e.d(j,{G:()=>p});var n=e(74848),a=e(22803),s=e(17437),d=e(69156),o=e(96540),l=e(63142),i=e(91302),c=e(19753);const p=({value:r,onChange:v,item:g,id:E})=>{const x=(0,o.useRef)(null),{settings:m}=g,y=m?.min||0,b=m?.max||100,D=m?.step,f=m?.marks||{[y]:y,[b]:b},C=m?.included,P=m?.ariaLabelForHandle,T=75,M=!0,I=(0,l.$j)(),[B,U]=(0,o.useState)(r??y),[W,V]=(0,o.useState)(T);(0,o.useEffect)(()=>{r!=null&&r!==B&&U(r)},[r,B]),(0,o.useEffect)(()=>{const G=getComputedStyle(x.current),H=G.getPropertyValue("font-weight")||"normal",K=G.getPropertyValue("font-size")||"16px",w=G.getPropertyValue("font-family")||"Arial",Q="0",k=4,te=8,q=Math.max((b+(D||0)).toString().length,(b-(D||0)).toString().length)+k,se=Q.repeat(q),re=h(se,`${H} ${K} ${w}`);re&&V(re+te*2)},[b,D]);const z=(0,o.useCallback)(G=>{const H=typeof G=="number"?G:G[0];U(H),v&&v(H)},[U,v]),R=(0,o.useCallback)(G=>{let H=G;(Number.isNaN(H)||!H)&&(H=0),U(H),v&&v(H)},[v]),O=(0,i.$)(I,M,!!f),N=u(I,W),F=M?[]:[O.sliderInputVertical];return(0,n.jsxs)("div",{className:(0,a.cx)(O.container,O.slider),children:[(0,n.jsx)(s.Global,{styles:O.slider}),(0,n.jsxs)("div",{className:(0,a.cx)(O.sliderInput,...F),children:[(0,n.jsx)(d.A,{min:y,max:b,step:D,defaultValue:r,value:B,onChange:z,vertical:!M,reverse:!1,ariaLabelForHandle:P,marks:f,included:C}),(0,n.jsx)("span",{className:N.numberInputWrapper,ref:x,children:(0,n.jsx)(c.Q,{id:E,value:B,onChange:R,max:b,min:y,step:D})})]})]})};function h(r,v){const E=document.createElement("canvas").getContext("2d");return E?(E.font=v,E.measureText(r).width):null}const u=(r,v)=>({numberInputWrapper:(0,a.css)({marginLeft:r.spacing(3),maxHeight:"32px",maxWidth:v,minWidth:v,overflow:"visible",width:"100%"})})},21266:(ne,j,e)=>{"use strict";e.d(j,{O:()=>a});function n(s){let d=s.length-s.trimLeft().length;if(d){let o=s[0];for(;--d;)o+=s[0];return o}return""}function a(){return{onKeyDown(s,d,o){const l=d.value;if(l.selection.isExpanded)return o();if(s.key==="Enter"){s.preventDefault();const{startBlock:i}=l,c=i.text,p=n(c);return d.splitBlock().insertText(p).focus()}return o()}}}},21275:(ne,j,e)=>{"use strict";e.d(j,{$C:()=>f,CO:()=>l,GW:()=>I,OA:()=>C,Ol:()=>E,QB:()=>M,WL:()=>y,Yb:()=>v,Ye:()=>B,ZG:()=>c,aD:()=>s,bf:()=>d,bt:()=>P,dM:()=>m,lt:()=>b,rw:()=>o,ss:()=>T,yV:()=>D});const n={tags:[]},a={exclude:!1,ids:[]},s={list:[]},d={builtIn:0,enable:!0,hide:!1},o={allowCustomValue:!0,includeAll:!1,multi:!1,options:[],skipUrlSync:!1,staticOptions:[]};var l=(U=>(U[U.never=0]="never",U[U.onDashboardLoad=1]="onDashboardLoad",U[U.onTimeRangeChanged=2]="onTimeRangeChanged",U))(l||{}),i=(U=>(U[U.dontHide=0]="dontHide",U[U.hideLabel=1]="hideLabel",U[U.hideVariable=2]="hideVariable",U[U.inControlsMenu=3]="inControlsMenu",U))(i||{}),c=(U=>(U[U.alphabeticalAsc=1]="alphabeticalAsc",U[U.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",U[U.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",U[U.alphabeticalDesc=2]="alphabeticalDesc",U[U.disabled=0]="disabled",U[U.naturalAsc=7]="naturalAsc",U[U.naturalDesc=8]="naturalDesc",U[U.numericalAsc=3]="numericalAsc",U[U.numericalDesc=4]="numericalDesc",U))(c||{});const p={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1},h={headers:[],queryParams:[]},u={headers:[],queryParams:[]},r={variables:[]};var v=(U=>(U.ContinuousBlPu="continuous-BlPu",U.ContinuousBlYlRd="continuous-BlYlRd",U.ContinuousBlues="continuous-blues",U.ContinuousGrYlRd="continuous-GrYlRd",U.ContinuousGreens="continuous-greens",U.ContinuousPurples="continuous-purples",U.ContinuousRdYlGr="continuous-RdYlGr",U.ContinuousReds="continuous-reds",U.ContinuousYlBl="continuous-YlBl",U.ContinuousYlRd="continuous-YlRd",U.Fixed="fixed",U.PaletteClassic="palette-classic",U.PaletteClassicByName="palette-classic-by-name",U.Shades="shades",U.Thresholds="thresholds",U))(v||{});const g={h:9,w:12,x:0,y:0};var E=(U=>(U.Absolute="absolute",U.Percentage="percentage",U))(E||{});const x={steps:[]};var m=(U=>(U.RangeToText="range",U.RegexToText="regex",U.SpecialValue="special",U.ValueToText="value",U))(m||{}),y=(U=>(U.Empty="empty",U.False="false",U.NaN="nan",U.Null="null",U.NullAndNan="null+nan",U.True="true",U))(y||{});const b={hidden:!1,quick_ranges:[],refresh_intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]};var D=(U=>(U[U.Crosshair=1]="Crosshair",U[U.Off=0]="Off",U[U.Tooltip=2]="Tooltip",U))(D||{});const f=0,C={links:[],repeatDirection:"h",targets:[],transformations:[],transparent:!1},P={overrides:[]},T={id:""},M={actions:[],links:[],mappings:[]},I={collapsed:!1,panels:[]},B={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:42,tags:[],timezone:"browser"}},21285:(ne,j,e)=>{"use strict";e.d(j,{K:()=>u,d:()=>h});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(96540),l=e(37615),i=e(63142),c=e(35484),p=e(30703);const h=(0,o.forwardRef)(({value:v,checked:g,onChange:E,id:x,label:m,disabled:y,invalid:b=!1,...D},f)=>{g&&(0,l.l)("Switch","checked prop","value");const C=(0,i.of)(r),P=(0,o.useRef)(x||(0,s.uniqueId)("switch-"));return(0,n.jsxs)("div",{className:(0,a.cx)(C.switch,b&&C.invalid),children:[(0,n.jsx)("input",{type:"checkbox",role:"switch",disabled:y,checked:v,onChange:T=>{!y&&E?.(T)},id:P.current,...D,ref:f}),(0,n.jsx)("label",{htmlFor:P.current,"aria-label":m,children:(0,n.jsx)(p.I,{name:"check",size:"xs"})})]})});h.displayName="Switch";const u=(0,o.forwardRef)(({transparent:v,className:g,showLabel:E,label:x,value:m,id:y,invalid:b,...D},f)=>{const C=(0,i.of)(r,v);return(0,n.jsxs)("div",{className:(0,a.cx)(C.inlineContainer,g,D.disabled&&C.disabled,b&&C.invalid),children:[E&&(0,n.jsx)("label",{htmlFor:y,className:(0,a.cx)(C.inlineLabel,m&&C.inlineLabelEnabled,"inline-switch-label"),children:x}),(0,n.jsx)(h,{...D,id:y,label:x,ref:f,value:m})]})});u.displayName="Switch";const r=(v,g)=>({switch:(0,a.css)({width:v.spacing(4),height:v.spacing(2),position:"relative",lineHeight:1,input:{height:"100%",width:"100% !important",opacity:0,zIndex:-1e3,position:"absolute","&:checked + label":{background:v.colors.primary.main,borderColor:v.colors.primary.main,"&:hover":{background:v.colors.primary.shade},svg:{transform:`translate3d(${v.spacing(2.25)}, -50%, 0)`,background:v.colors.primary.contrastText,color:v.colors.primary.main}},"&:disabled + label":{background:v.colors.action.disabledBackground,borderColor:v.colors.border.weak,cursor:"not-allowed",svg:{background:v.colors.text.disabled}},"&:disabled:checked + label":{background:v.colors.primary.transparent,svg:{color:v.colors.primary.contrastText}},"&:focus + label, &:focus-visible + label":(0,c.getFocusStyles)(v),"&:focus:not(:focus-visible) + label":(0,c.getMouseFocusStyles)(v)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:v.shape.radius.pill,background:v.components.input.background,border:`1px solid ${v.components.input.borderColor}`,[v.transitions.handleMotion("no-preference")]:{transition:"all 0.3s ease"},"&:hover":{borderColor:v.components.input.borderHover},svg:{position:"absolute",display:"block",color:"transparent",width:v.spacing(1.5),height:v.spacing(1.5),borderRadius:v.shape.radius.circle,background:v.colors.text.secondary,boxShadow:v.shadows.z1,left:0,top:"50%",transform:`translate3d(${v.spacing(.25)}, -50%, 0)`,[v.transitions.handleMotion("no-preference")]:{transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)"},"@media (forced-colors: active)":{border:`1px solid ${v.colors.primary.contrastText}`}}}}),inlineContainer:(0,a.css)({padding:v.spacing(0,1),height:v.spacing(v.components.height.md),display:"inline-flex",alignItems:"center",background:g?"transparent":v.components.input.background,border:`1px solid ${g?"transparent":v.components.input.borderColor}`,borderRadius:v.shape.radius.default,"&:hover":{border:`1px solid ${g?"transparent":v.components.input.borderHover}`,".inline-switch-label":{color:v.colors.text.primary}}}),disabled:(0,a.css)({backgroundColor:g?"transparent":"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:`1px solid ${g?"transparent":"rgba(204, 204, 220, 0.04)"}`}),inlineLabel:(0,a.css)({cursor:"pointer",paddingRight:v.spacing(1),color:v.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,a.css)({color:v.colors.text.primary}),invalid:(0,a.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${v.colors.error.border}`}})})},21348:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>d,j:()=>o});var n=e(74848),a=e(22803);const d={animationName:(0,a.keyframes)({"0%":{opacity:0},"100%":{opacity:1}}),animationDelay:"100ms",animationTimingFunction:"ease-in",animationDuration:"100ms",animationFillMode:"backwards"},o=(l,i)=>Object.assign(l,{Skeleton:p=>(0,n.jsx)(i,{...p,rootProps:{style:d}})})},21539:(ne,j,e)=>{"use strict";e.d(j,{i:()=>s});var n=e(74848);function a(d){return d<20?.9:d<26?.8:.6}const s=({value:d,className:o,style:l,...i})=>{const c=(d.prefix??"").length>0,p=(d.suffix??"").length>0;let h;if(l&&typeof l.fontSize=="number"&&!Number.isNaN(l.fontSize)){const u=l.fontSize,r=a(u);h={fontSize:u*r}}return(0,n.jsx)("div",{className:o,style:l,...i,children:(0,n.jsxs)("div",{children:[c&&(0,n.jsx)("span",{children:d.prefix}),(0,n.jsx)("span",{children:d.text}),p&&(0,n.jsx)("span",{style:h,children:d.suffix})]})})};s.displayName="FormattedDisplayValue"},21645:(ne,j,e)=>{"use strict";e.d(j,{x:()=>re});var n=e(74848),a=e(22803),s=e(7389),d=e(51898),o=e(44248),l=e(63142),i=e(31286),c=e(41654),p=e(92745),h=e(21285);function u({panelEditor:_}){const{tableView:ee,dataPane:ae}=_.useState();return(0,n.jsx)(n.Fragment,{children:ae&&(0,n.jsx)(h.K,{label:(0,p.t)("dashboard-scene.panel-edit-controls.table-view-label-table-view","Table view"),showLabel:!0,id:"table-view",value:!!ee,onClick:_.onToggleTableView,"aria-label":(0,p.t)("dashboard-scene.panel-edit-controls.table-view-aria-label-toggletableview","Toggle table view"),"data-testid":d.Tp.components.PanelEditor.toggleTableView})})}var r=e(92119),v=e(59857),g=e(88559),E=e(7895),x=e(87063),m=e(88632),y=e(63704),b=e(94535),D=e(45967),f=e(4137),C=e(82345),P=e(86871);function T({link:_,dashboardUID:ee,inMenu:ae}){const le=(0,C.mQ)().getAnchorInfo(_);if(_.type==="dashboards")return(0,n.jsx)(f.aK,{link:_,linkInfo:le,dashboardUID:ee});const L=P.G[_.icon],ie=ae?(0,n.jsx)(b.D,{icon:L,url:(0,y.Jf)(le.href),label:le.title,target:_.targetBlank?"_blank":void 0,"data-testid":d.Tp.components.DashboardLinks.link}):(0,n.jsx)(f.Zx,{icon:L,href:(0,y.Jf)(le.href),target:_.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":d.Tp.components.DashboardLinks.link,children:le.title});return(0,n.jsx)("div",{"data-testid":d.Tp.components.DashboardLinks.container,children:_.tooltip?(0,n.jsx)(D.m,{content:le.tooltip,children:ie}):ie})}var M=e(85343),I=e(43173),B=e(56887),U=e(96540),W=e(45861),V=e(34440),z=e(23289);function R({dashboard:_}){const{isEditing:ee}=_.useState(),ae=(0,U.useCallback)(le=>{le.stopPropagation(),(0,V.I)(_),z.c.addVariableButtonClicked({source:"variable_controls"})},[_]);return ee?(0,n.jsx)(W.$n,{icon:"plus",variant:"primary",fill:"text",onPointerDown:ae,children:(0,n.jsx)(p.x6,{i18nKey:"dashboard-scene.variable-controls.add-variable",children:"Add"})}):null}function O({dashboard:_}){const{variables:ee}=o.jh.getVariables(_).useState();return(0,n.jsxs)(n.Fragment,{children:[ee.filter(ae=>ae.state.hide!==s.zL.inControlsMenu).map(ae=>(0,n.jsx)(N,{variable:ae},ae.state.key)),I.$.featureToggles.dashboardNewLayouts?(0,n.jsx)(R,{dashboard:_}):null]})}function N({variable:_,inMenu:ee}){const ae=(0,o.gn)(_,{shouldActivateOrKeepAlive:!0}),{isSelected:le,onSelect:L,isSelectable:ie}=(0,B.y)(_.state.key),oe=(0,l.of)(G);if(ae.hide===s.zL.hideVariable)return _.UNSAFE_renderAsHidden?(0,n.jsx)(_.Component,{model:_}):null;const ue=ye=>{if(ie){if(ye.target instanceof Element&&!ye.target.closest("label")){ye.stopPropagation();return}ie&&L&&(ye.stopPropagation(),L(ye))}};return ee&&o.Go.isSwitchVariable(_)?(0,n.jsxs)("div",{className:oe.switchMenuContainer,"data-testid":d.Tp.pages.Dashboard.SubMenu.submenuItem,children:[(0,n.jsx)("div",{className:oe.switchControl,children:(0,n.jsx)(_.Component,{model:_})}),(0,n.jsx)(F,{variable:_,layout:"vertical",className:oe.switchLabel})]}):ee?(0,n.jsxs)("div",{className:oe.verticalContainer,"data-testid":d.Tp.pages.Dashboard.SubMenu.submenuItem,children:[(0,n.jsx)(F,{variable:_,layout:"vertical"}),(0,n.jsx)(_.Component,{model:_})]}):(0,n.jsxs)("div",{className:(0,a.cx)(oe.container,le&&"dashboard-selected-element",ie&&!le&&"dashboard-selectable-element"),onPointerDown:ue,"data-testid":d.Tp.pages.Dashboard.SubMenu.submenuItem,children:[(0,n.jsx)(F,{variable:_,className:(0,a.cx)(ie&&oe.labelSelectable)}),(0,n.jsx)(_.Component,{model:_})]})}function F({variable:_,className:ee,layout:ae}){const{state:le}=_;if(_.state.hide===s.zL.hideLabel)return null;const L=le.label||le.name,ie=`var-${le.key}`;return(0,n.jsx)(o.Zx,{htmlFor:ie,isLoading:le.loading,onCancel:()=>_.onCancel?.(),label:L,error:le.error,layout:ae??"horizontal",description:le.description??void 0,className:ee})}const G=_=>({container:(0,a.css)({display:"flex","> :nth-child(2)":(0,a.css)({borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset"})}),verticalContainer:(0,a.css)({display:"flex",flexDirection:"column"}),switchMenuContainer:(0,a.css)({display:"flex",alignItems:"center",gap:_.spacing(1)}),switchControl:(0,a.css)({"& > div":{border:"none",background:"transparent",paddingRight:_.spacing(.5),height:_.spacing(2)}}),switchLabel:(0,a.css)({marginTop:0,marginBottom:0}),labelWrapper:(0,a.css)({display:"flex",alignItems:"center"}),labelSelectable:(0,a.css)({cursor:"pointer"})}),H="Dashboard controls menu",K="Dashboard controls";function w({dashboard:_}){const{links:ee,uid:ae}=_.useState(),le=ee.filter(ye=>ye.placement==="inControlsMenu"&&ye.type!=="dashboards"),L=o.jh.getVariables(_).useState().variables.filter(ye=>ye.state.hide===v.zL.inControlsMenu),ie=o.jh.getData(_).useState(),ue=((0,m.r)(ie)?ie.annotationLayers:[]).filter(ye=>ye.state.placement==="inControlsMenu");return L.length===0&&le.length===0&&ue.length===0||!ae?null:(0,n.jsx)(g.m,{placement:"bottom-end",overlay:(0,n.jsx)(Q,{variables:L,links:le,annotationLayers:ue,dashboardUID:ae}),children:(0,n.jsx)(E.I,{"aria-label":(0,p.t)("dashboard.controls.menu.aria-label",H),title:(0,p.t)("dashboard.controls.menu.title",K),icon:"ellipsis-v",iconSize:"md",narrow:!0,variant:"canvas"})})}function Q({variables:_,links:ee,annotationLayers:ae,dashboardUID:le}){const L=(0,l.of)(te);return(0,n.jsxs)(i.a,{minWidth:32,borderColor:"weak",borderStyle:"solid",boxShadow:"z3",display:"flex",direction:"column",borderRadius:"default",backgroundColor:"primary",padding:1.5,gap:.5,onClick:ie=>{ie.stopPropagation()},children:[_.map((ie,oe)=>(0,n.jsx)("div",{className:(0,a.cx)({[L.variableItem]:oe>0}),children:(0,n.jsx)(N,{variable:ie,inMenu:!0})},ie.state.key)),ae.length>0&&ae.map((ie,oe)=>(0,n.jsx)("div",{className:(0,a.cx)(oe>0&&L.variableItem),children:(0,n.jsx)(M.L,{layer:ie,inMenu:!0})},ie.state.key)),ee.length>0&&(0,n.jsxs)(n.Fragment,{children:[(_.length>0||ae.length>0)&&(0,n.jsx)(k,{}),ee.map((ie,oe)=>(0,n.jsx)("div",{children:(0,n.jsx)(T,{link:ie,dashboardUID:le,inMenu:!0})},`${ie.title}-${oe}`))]})]})}function k(){const _=(0,l.of)(te);return(0,n.jsx)("div",{className:_.divider,children:(0,n.jsx)(x.W.Divider,{})})}const te=_=>({divider:(0,a.css)({marginTop:_.spacing(2),padding:_.spacing(0,.5)}),variableItem:(0,a.css)({marginTop:_.spacing(2)})});function q({dashboard:_}){const ee=o.jh.getData(_).useState(),ae=le=>le.state.placement===void 0;return(0,m.r)(ee)?(0,n.jsx)(n.Fragment,{children:ee.annotationLayers.filter(ae).map(le=>(0,n.jsx)(M.L,{layer:le},le.state.key))}):null}function se({links:_,dashboard:ee}){o.jh.getTimeRange(ee).useState();const ae=ee.state.uid;return!_||!ae?null:(0,n.jsx)(n.Fragment,{children:_.filter(le=>le.placement===void 0).map((le,L)=>(0,n.jsx)(T,{link:le,dashboardUID:ae},`${le.title}-$${L}`))})}class re extends o.Bs{constructor(ee){super({timePicker:ee.timePicker??new o.KE({}),refreshPicker:ee.refreshPicker??new o.WM({}),...ee}),this._variableDependency=new o.Sh(this,{onAnyVariableChanged:this._onAnyVariableChanged.bind(this)}),this._urlSync=new o.So(this,{keys:["_dash.hideTimePicker","_dash.hideVariables","_dash.hideLinks","_dash.hideDashboardControls"]}),this.addActivationHandler(()=>{let ae;return this.state.hideTimeControls&&(ae=this.state.refreshPicker.activate()),()=>{ae&&ae()}})}static{this.Component=Y}getUrlState(){return{}}updateFromUrl(ee){const{hideTimeControls:ae,hideVariableControls:le,hideLinksControls:L,hideDashboardControls:ie}=this.state,oe=ue=>ee[ue]==="true"||ee[ue]==="";!ae&&oe("_dash.hideTimePicker")&&this.setState({hideTimeControls:!0}),!le&&oe("_dash.hideVariables")&&this.setState({hideVariableControls:!0}),!L&&oe("_dash.hideLinks")&&this.setState({hideLinksControls:!0}),!ie&&oe("_dash.hideDashboardControls")&&this.setState({hideDashboardControls:!0})}_onAnyVariableChanged(){(0,r.YQ)(this).state.links?.length>0&&this.forceRender()}hasDashboardControls(){const ee=(0,r.YQ)(this),{links:ae}=ee.state,le=o.jh.getVariables(ee)?.state.variables.some(ie=>ie.state.hide===s.zL.inControlsMenu),L=ae.some(ie=>ie.placement==="inControlsMenu");return le||L}hasControls(){const ee=o.jh.getVariables(this)?.state.variables.some(ye=>ye.state.hide!==s.zL.hideVariable),ae=o.jh.getDataLayers(this).some(ye=>ye.state.isEnabled&&!ye.state.isHidden),le=(0,r.YQ)(this).state.links?.length>0,L=this.state.hideLinksControls||!le,ie=this.state.hideVariableControls||!ae&&!ee,oe=this.state.hideTimeControls,ue=this.state.hideDashboardControls||!this.hasDashboardControls();return!(ie&&L&&oe&&ue)}}function Y({model:_}){const{refreshPicker:ee,timePicker:ae,hideTimeControls:le,hideVariableControls:L,hideLinksControls:ie,hideDashboardControls:oe}=_.useState(),ue=(0,r.YQ)(_),{links:ye,editPanel:fe}=ue.useState(),Ee=(0,l.of)(J),Ae=window.location.search.includes("scene-debugger");return _.hasControls()?(0,n.jsxs)("div",{"data-testid":d.Tp.pages.Dashboard.Controls,className:(0,a.cx)(Ee.controls,fe&&Ee.controlsPanelEdit),children:[(0,n.jsxs)(c.B,{grow:1,wrap:"wrap",children:[!L&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O,{dashboard:ue}),(0,n.jsx)(q,{dashboard:ue})]}),(0,n.jsx)(i.a,{grow:1}),!ie&&!fe&&(0,n.jsx)(se,{links:ye,dashboard:ue}),fe&&(0,n.jsx)(u,{panelEditor:fe})]}),!le&&(0,n.jsxs)("div",{className:(0,a.cx)(Ee.timeControls,fe&&Ee.timeControlsWrap),children:[(0,n.jsx)(ae.Component,{model:ae}),(0,n.jsx)(ee.Component,{model:ee})]}),!oe&&_.hasDashboardControls()&&(0,n.jsx)(c.B,{children:(0,n.jsx)(w,{dashboard:ue})}),Ae&&(0,n.jsx)(o.or,{scene:_},"scene-debugger")]}):(0,n.jsx)(i.a,{padding:1,children:X(ue)})}function X(_){const{variables:ee}=o.jh.getVariables(_).useState(),ae=ee.filter(le=>le.UNSAFE_renderAsHidden);return ae&&ae.length>0?(0,n.jsx)(n.Fragment,{children:ae.map(le=>(0,n.jsx)(le.Component,{model:le},le.state.key))}):null}function J(_){return{controls:(0,a.css)({display:"flex",alignItems:"flex-start",flex:"100%",gap:_.spacing(1),padding:_.spacing(2),flexDirection:"row",flexWrap:"nowrap",position:"relative",width:"100%",marginLeft:"auto",[_.breakpoints.down("sm")]:{flexDirection:"column-reverse",alignItems:"stretch"}}),controlsPanelEdit:(0,a.css)({flexWrap:"wrap-reverse",paddingRight:0}),embedded:(0,a.css)({background:"unset",position:"unset"}),timeControls:(0,a.css)({display:"flex",justifyContent:"flex-end",gap:_.spacing(1)}),timeControlsWrap:(0,a.css)({flexWrap:"wrap",marginLeft:"auto"})}}},21764:(ne,j,e)=>{"use strict";e.d(j,{S:()=>a});var n=e(23265);function a({dashboardUID:s,panelId:d,poll:o=!1}){const{result:l,loading:i,error:c}=(0,n.kU)(s,d,o);return{rules:l?l.flatMap(h=>h.groups).flatMap(h=>h.rules):[],errors:c?[c]:[],loading:i}}},21834:(ne,j,e)=>{"use strict";e.d(j,{nE:()=>s,r6:()=>a,xB:()=>n});var n=(d=>(d[d.AlphaAsc=1]="AlphaAsc",d[d.AlphaDesc=2]="AlphaDesc",d[d.Importance=3]="Importance",d[d.TimeAsc=4]="TimeAsc",d[d.TimeDesc=5]="TimeDesc",d))(n||{}),a=(d=>(d.Default="default",d.Custom="custom",d))(a||{}),s=(d=>(d.List="list",d.Stat="stat",d))(s||{})},22051:(ne,j,e)=>{"use strict";e.d(j,{Iz:()=>s,KR:()=>p,Mb:()=>o,Yz:()=>h,hM:()=>c,xf:()=>u,zk:()=>i});var n=e(78012),a=e(44248);function s(r,v){a.oY.getScenePerformanceTracker().addObserver(r),(0,a.MV)(v,"Initialized globally and registered as performance observer")}function d(r){return"memory"in r}function o(){return d(performance)?{totalJSHeapSize:performance.memory?.totalJSHeapSize||0,usedJSHeapSize:performance.memory?.usedJSHeapSize||0,jsHeapSizeLimit:performance.memory?.jsHeapSizeLimit||0}:{totalJSHeapSize:0,usedJSHeapSize:0,jsHeapSizeLimit:0}}function l(){return typeof window<"u"?n.M.get("grafana.debug.sceneProfiling")==="true":!1}function i(r,v){l()&&console.groupCollapsed(`${r}: ${v}`)}function c(r,v,g){l()&&(g?console.log(v,g):console.log(v))}function p(){l()&&console.groupEnd()}function h(r,v){try{typeof performance<"u"&&performance.mark&&(v!==void 0?performance.mark(r,{startTime:v}):performance.mark(r))}catch(g){console.error(`\u274C Failed to create performance mark: ${r}`,{timestamp:v,error:g})}}function u(r,v,g){try{typeof performance<"u"&&performance.measure&&(g?performance.measure(r,v,g):performance.measure(r,v))}catch(E){console.error(`\u274C Failed to create performance measure: ${r}`,{startMark:v,endMark:g,error:E})}}},22055:(ne,j,e)=>{"use strict";e.d(j,{t:()=>c});var n=e(74848),a=e(22429),s=e(16200),d=e(37680),o=e(66769);const i=`You are an expert in creating Grafana Panels.
You will be given the title and description of the dashboard the panel is in as well as the JSON for the panel.
Your goal is to write a descriptive and concise panel description.
The panel description is meant to explain the purpose of the panel, not just its attributes.
Do not refer to the panel; simply describe its purpose.
There should be no numbers in the description except for thresholds.
The description should be, at most, 200 characters.`,c=({onGenerate:h,panel:u})=>(0,n.jsx)(s.n,{messages:()=>p(u),onGenerate:h,eventTrackingSrc:d.ec.panelDescription,toggleTipTitle:"Improve your panel description"});function p(h){const u=(0,a.UA)().getCurrent(),r=(0,o.hn)(h);return[{content:i,role:o.Xh.system},{content:`The panel is part of a dashboard with the title: ${u.title}
The panel is part of a dashboard with the description: ${u.description}
This is the JSON which defines the panel: ${r}`,role:o.Xh.user}]}},22079:(ne,j,e)=>{"use strict";e.d(j,{Lp:()=>p,e0:()=>c});var n=e(92138),a=e(36490),s=e(44248),d=e(73427),o=e(62635),l=e(92119);function i(h){return locationUtil.getUrlForPartial(locationService.getLocation(),{viewPanel:h.getPathId(),editPanel:void 0})}function c(h){return n.I.getUrlForPartial(a.Ny.getLocation(),{editPanel:h,viewPanel:void 0})}function p(h){const u=h.getPlugin(),r=(0,l.un)(h);if(!d.TP.hasAccessToExplore()||u?.meta.skipDataQuery||!r)return Promise.resolve(void 0);const v=s.jh.getTimeRange(h);return(0,o.Xe)({queries:r.state.queries,dsRef:r.state.datasource,timeRange:v.state.value,scopedVars:{__sceneObject:{value:h}},adhocFilters:r.state.data?.request?.filters})}},22099:(ne,j,e)=>{"use strict";e.d(j,{CP:()=>l,DG:()=>d,RC:()=>i,aR:()=>o});var n=e(74848),a=e(96540),s=e(54092);function d(c){return c?c.type===s.u6.link&&("path"in c||"onClick"in c):!1}function o(c){return c?c.type===s.u6.component&&"component"in c:!1}function l({props:c,components:p,limit:h,pluginId:u}){if(!p.length)return null;const r=[];for(const v of p){const{meta:g}=v;if(!(u&&typeof u=="string"&&u!==g.pluginId)&&!(u&&Array.isArray(u)&&!u.includes(g.pluginId))&&!(u instanceof RegExp&&!u.test(g.pluginId))){if(h===void 0){r.push(v);continue}if(a.createElement(v,c)!==null&&r.push(v),r.length>=h)break}}return r}function i({props:c,components:p,limit:h,pluginId:u}){const r=l({props:c,components:p,limit:h,pluginId:u});return r?.length?(0,n.jsx)(n.Fragment,{children:r.map(v=>(0,n.jsx)(v,{...c},v.meta.id))}):null}},22175:(ne,j,e)=>{"use strict";e.d(j,{$7:()=>V,R4:()=>B,dF:()=>I,dJ:()=>W,m:()=>M,yH:()=>P});var n=e(74848),a=e(96540),s=e(1906),d=e(51898),o=e(92745),l=e(43173),i=e(96822),c=e(63527),p=e(21285),h=e(87105),u=e(22055),r=e(76623),v=e(25797),g=e(51156),E=e(82345),x=e(33143),m=e(20246),y=e(23244),b=e(3688),D=e(70030),f=e(1682),C=e(92119);function P(z){const R=new v.C({title:(0,o.t)("dashboard-scene.get-panel-frame-options.descriptor.title.panel-options","Panel options"),id:"Panel options",isOpenDefault:!0}),O=f.b4.getPanelLinks(z),N=O?.state.rawLinks??[],F=(0,C.YQ)(z),G=z.parent;return R.addItem(new g.v({title:(0,o.t)("dashboard-scene.get-panel-frame-options.title.title","Title"),id:"panel-frame-options-title",value:z.state.title,popularRank:1,render:function(K){return(0,n.jsx)(M,{id:K.props.id,panel:z})},addon:l.$.featureToggles.dashgpt&&(0,n.jsx)(r.h,{onGenerate:H=>W(z,H),panel:(0,D.Z6)(z),dashboard:(0,D.Uy)(F)})})).addItem(new g.v({title:(0,o.t)("dashboard-scene.get-panel-frame-options.title.description","Description"),id:"panel-frame-options-description",value:z.state.description,render:function(K){return(0,n.jsx)(I,{id:K.props.id,panel:z})},addon:l.$.featureToggles.dashgpt&&(0,n.jsx)(u.t,{onGenerate:H=>z.setState({description:H}),panel:(0,D.Z6)(z)})})).addItem(new g.v({title:(0,o.t)("dashboard-scene.get-panel-frame-options.title.transparent-background","Transparent background"),id:"panel-frame-options-transparent-bg",render:function(K){return(0,n.jsx)(B,{id:K.props.id,panel:z})}})).addCategory(new v.C({title:(0,o.t)("dashboard-scene.get-panel-frame-options.title.panel-links","Panel links"),id:"Panel links",isOpenDefault:!1,itemsCount:N?.length}).addItem(new g.v({title:(0,o.t)("dashboard-scene.get-panel-frame-options.title.panel-links","Panel links"),id:"panel-frame-options-panel-links",render:()=>(0,n.jsx)(T,{panelLinks:O??void 0})}))),(0,b.y)(G)&&G.getOptions?.().forEach(H=>R.addCategory(H)),R}function T({panelLinks:z}){const{rawLinks:R}=z?z.useState():{rawLinks:[]};return(0,n.jsx)(i.e,{links:R,onChange:O=>z?.setState({rawLinks:O}),getSuggestions:E.Fq,data:[]})}function M({panel:z,isNewElement:R,id:O}){const{title:N}=z.useState(),F=z.getPanelContext().app!==s.Jk.PanelEditor,[G,H]=a.useState(z.state.title);let K=(0,m.z4)({autoFocus:F&&R});return(0,n.jsx)(c.p,{ref:K,"data-testid":d.Tp.components.PanelEditor.OptionsPane.fieldInput("Title"),id:O,value:N,onFocus:()=>H(N),onBlur:()=>W(z,N,G),onChange:w=>U(z,w.currentTarget.value)})}function I({panel:z,id:R}){const{description:O}=z.useState(),[N,F]=a.useState(z.state.description);return(0,n.jsx)(h.f,{id:R,value:O,onChange:G=>z.setState({description:G.currentTarget.value}),onFocus:()=>F(z.state.description),onBlur:()=>{x.cc.edit({description:(0,o.t)("dashboard.edit-actions.panel-description","Change panel description"),source:z,perform:()=>z.setState({description:O}),undo:()=>z.setState({description:N})})}})}function B({panel:z,id:R}){const{displayMode:O="default"}=z.useState(),N=()=>{const F=O==="default"?"transparent":"default";x.cc.edit({description:(0,o.t)("dashboard.edit-actions.panel-background","Change panel background"),source:z,perform:()=>z.setState({displayMode:F}),undo:()=>z.setState({displayMode:O})})};return(0,n.jsx)(p.d,{value:O==="transparent",id:R,onChange:N})}function U(z,R){z.setState({title:R,hoverHeader:V(R,z.state.$timeRange)})}function W(z,R,O=z.state.title){R!==O&&x.cc.edit({description:(0,o.t)("dashboard.edit-actions.panel-title","Change panel title"),source:z,perform:()=>U(z,R),undo:()=>U(z,O)})}function V(z,R){return!(z!==""||R instanceof y.v&&!R.state.hideTimeOverride&&(R.state.timeFrom||R.state.timeShift))}},22429:(ne,j,e)=>{"use strict";e.d(j,{UA:()=>r});var n=e(32899),a=e(92745),s=e(45229),d=e(83873),o=e(13956),l=e(87745),i=e(7817),c=e(17097);class p{constructor(){this.onRemovePanel=g=>{const E=this.getCurrent();E&&(0,c.FC)(E,E.getPanelById(g),!0)},s.l.subscribe(l.Vz,g=>this.onRemovePanel(g.payload))}create(g,E){return new i.G(g,E)}setCurrent(g){this.dashboard=g}getCurrent(){return this.dashboard}saveJSONDashboard(g){const E=JSON.parse(g);return(0,o.n)().saveDashboard({dashboard:E,folderUid:this.dashboard?.meta.folderUid||E.folderUid,message:(0,a.t)("dashboard.dashboard-srv.message.edit-dashboard-json","Edit Dashboard JSON"),k8s:this.dashboard?.meta.k8s})}saveDashboard(g,E){return(0,o.n)().saveDashboard({message:g.message,folderUid:g.folderUid,dashboard:g.dashboard.getSaveModelClone(),showErrorAlert:E?.showErrorAlert})}starDashboard(g,E){const x=(0,d.AI)(),m={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+g,method:E?"DELETE":"POST"};return x.request(m).then(()=>{const y=!E;this.dashboard?.uid===g&&(this.dashboard.meta.isStarred=y);const b=y?(0,a.t)("notifications.starred-dashboard","Dashboard starred"):(0,a.t)("notifications.unstarred-dashboard","Dashboard unstarred");return s.l.emit(n.r1.alertSuccess,[b]),y})}}let h;function u(v){h=v}function r(){return h||(h=new p),h}},22465:(ne,j,e)=>{"use strict";e.d(j,{K:()=>d});var n=e(74848),a=e(96540),s=e(79450);class d extends a.Component{static{this.contextType=s.b}constructor(l){super(l),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(l){return{hasError:!0,error:l,errorInfo:null}}componentDidCatch(l,i){this.props.onError?this.props.onError(l,i):console.error(`Plugin "${this.context?.meta.id}" failed to load:`,l,i),this.setState({error:l,errorInfo:i})}render(){const l=this.props.fallback;return this.state.hasError?l?(0,n.jsx)(l,{error:this.state.error,errorInfo:this.state.errorInfo}):null:this.props.children}}},22628:(ne,j,e)=>{"use strict";e.d(j,{DM:()=>d,T:()=>s,a3:()=>n,rh:()=>a});const n="grafana.com/provenance",a="none";var s=(o=>(o.Provenance="grafana.com/provenance",o.InUseRoutes="grafana.com/inUse/routes",o.InUseRules="grafana.com/inUse/rules",o.AccessWrite="grafana.com/access/canWrite",o.AccessAdmin="grafana.com/access/canAdmin",o.AccessDelete="grafana.com/access/canDelete",o))(s||{});const d="user-defined"},22658:(ne,j,e)=>{"use strict";e.d(j,{O:()=>m});var n=e(2543);function a(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function s(y){return!!y&&typeof y==="object"}function d(y){if(y===void 0)return"";if(y===null||typeof y=="object"&&!y.constructor)return"Object";const D=/function ([^(]*)/.exec(y.constructor.toString());return D&&D.length>1?D[1]:""}function o(y){return y===null?"null":typeof y}function l(y,b){const D=o(y);return D==="null"||D==="undefined"?D:(D==="string"&&(b='"'+a(b)+'"'),D==="function"?y.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":b)}let i="";function c(y){return s(y)?(i=d(y),Array.isArray(y)&&(i+="["+y.length+"]")):i=l(y,y.toString()),i}function p(y){return`json-formatter-${y}`}function h(y,b,D){const f=document.createElement(y);return b&&f.classList.add(p(b)),D!==void 0&&(D instanceof Node?f.appendChild(D):f.appendChild(document.createTextNode(String(D)))),f}const u=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,r=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,v=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,g=10,E=typeof window<"u"&&window.requestAnimationFrame||(y=>(y(),0)),x={animateOpen:!0,animateClose:!0};class m{constructor(b,D=1,f=x,C){this.json=b,this.open=D,this.config=f,this.key=C,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(b){this._isOpen=b}get isDate(){return this.type==="string"&&(u.test(this.json)||v.test(this.json)||r.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return s(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return d(this.json)}get type(){return o(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(b=>b||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(p("open")))}openAtDepth(b=1){b<0||(this.open=b,this.isOpen=b!==0,this.element&&(this.removeChildren(!1),b===0?this.element.classList.remove(p("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(p("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,n.isNumber)(this.json[0])||(0,n.isNumber)(this.json[1]))}renderArray(){const b=h("span");return b.appendChild(h("span","bracket","[")),this.isNumberArray()?(this.json.forEach((D,f)=>{f>0&&b.appendChild(h("span","array-comma",",")),b.appendChild(h("span","number",D))}),this.skipChildren=!0):b.appendChild(h("span","number",this.json.length)),b.appendChild(h("span","bracket","]")),b}render(b=!1){this.element=h("div","row");const D=h("a","toggler-link"),f=h("span","toggler");if(this.isObject&&D.appendChild(f),this.hasKey&&D.appendChild(h("span","key",`${this.key}:`)),this.isObject){const P=h("span","value"),T=h("span"),M=h("span","constructor-name",this.constructorName);if(T.appendChild(M),this.isArray){const I=this.renderArray();T.appendChild(I)}P.appendChild(T),D.appendChild(P)}else{const P=this.isUrl?h("a"):h("span");P.classList.add(p(this.type)),this.isDate&&P.classList.add(p("date")),this.isUrl&&(P.classList.add(p("url")),P.setAttribute("href",this.json));const T=l(this.json,this.json);P.appendChild(document.createTextNode(T)),D.appendChild(P)}const C=h("div","children");return this.isObject&&C.classList.add(p("object")),this.isArray&&C.classList.add(p("array")),this.isEmpty&&C.classList.add(p("empty")),this.config&&this.config.theme&&this.element.classList.add(p(this.config.theme)),this.isOpen&&this.element.classList.add(p("open")),b||this.element.appendChild(D),this.skipChildren?D.removeChild(f):this.element.appendChild(C),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&D.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(b=!1){const D=this.element&&this.element.querySelector(`div.${p("children")}`);if(!(!D||this.isEmpty))if(b){let f=0;const C=()=>{const P=this.keys[f],T=new m(this.json[P],this.open-1,this.config,P);D.appendChild(T.render()),f+=1,f<this.keys.length&&(f>g?C():E(C))};E(C)}else this.keys.forEach(f=>{const C=new m(this.json[f],this.open-1,this.config,f);D.appendChild(C.render())})}removeChildren(b=!1){const D=this.element&&this.element.querySelector(`div.${p("children")}`);if(b){let f=0;const C=()=>{D&&D.children.length&&(D.removeChild(D.children[0]),f+=1,f>g?C():E(C))};E(C)}else D&&(D.innerHTML="")}}},22747:(ne,j,e)=>{"use strict";e.d(j,{H:()=>i,j:()=>p});var n=e(77154),a=e(45229),s=e(52161),d=e(4735),o=e(87745),l=e(8095);function i(h,u){return new Promise(r=>{if(h.datasource?.uid===s.vv){c(u,h),r(!0);return}a.A.publish(new o.bY({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{c(u,h),r(!0)},onDismiss:()=>{r(!1)}}))})}function c(h,u){const r=h.map(g=>(0,n.Nw)(g)),v={refId:"A",queryType:l.nj.Snapshot,snapshot:r,datasource:{uid:s.vv}};u.updateQueries({dataSource:{uid:s.vv},queries:[v]}),u.refresh()}function p(h){return(u,r,v)=>{(0,d.v)(u).subscribe(async g=>{const E=[];g.dataFrames.forEach(x=>{const m=(0,n.Nw)(x);E.push(m)}),h({...l.dx,snapshot:E,file:g.file},r)})}}},22787:(ne,j,e)=>{"use strict";e.d(j,{a:()=>g});var n=e(74848),a=e(22803),s=e(18828),d=e(43107),o=e(93225),l=e(59875),i=e(96540),c=e(92745),p=e(63142),h=e(76319),u=e(41654),r=e(53428),v=e(35621);function g(m){const{title:y,ariaLabel:b,children:D,isOpen:f=!1,closeOnEscape:C=!0,closeOnBackdropClick:P=!0,className:T,contentClassName:M,onDismiss:I,onClickBackdrop:B,trapFocus:U=!0}=m,W=(0,p.of)(v.o),V=(0,i.useRef)(null),{overlayProps:z,underlayProps:R}=(0,o.e)({isKeyboardDismissDisabled:!C,isOpen:f,onClose:I},V),{dialogProps:O,titleProps:N}=(0,s.s)({"aria-label":b},V);if(!f)return null;const F=(0,a.cx)(W.modalHeader,typeof y!="string"&&W.modalHeaderWithTabs);return(0,n.jsxs)(l.Sf,{children:[(0,n.jsx)("div",{role:"presentation",className:W.modalBackdrop,onClick:B||(P?I:void 0),...R}),(0,n.jsx)(d.n1,{contain:U,autoFocus:!0,restoreFocus:!0,children:(0,n.jsxs)("div",{className:(0,a.cx)(W.modal,T),ref:V,...z,...O,children:[(0,n.jsxs)("div",{className:F,children:[typeof y=="string"&&(0,n.jsx)(x,{...m,title:y,id:N.id}),typeof y!="string"&&y,(0,n.jsx)("div",{className:W.modalHeaderClose,children:(0,n.jsx)(h.K,{name:"times",size:"xl",onClick:I,"aria-label":(0,c.t)("grafana-ui.modal.close-tooltip","Close")})})]}),(0,n.jsx)("div",{className:(0,a.cx)(W.modalContent,M),children:D})]})})]})}function E({leftItems:m,children:y}){const b=(0,p.of)(v.o);return m?(0,n.jsx)("div",{className:b.modalButtonRow,children:(0,n.jsxs)(u.B,{justifyContent:"space-between",children:[(0,n.jsx)(u.B,{justifyContent:"flex-start",gap:2,children:m}),(0,n.jsx)(u.B,{justifyContent:"flex-end",gap:2,children:y})]})}):(0,n.jsx)("div",{className:b.modalButtonRow,children:(0,n.jsx)(u.B,{justifyContent:"flex-end",gap:2,wrap:"wrap",children:y})})}g.ButtonRow=E;function x({icon:m,iconTooltip:y,title:b,id:D}){return(0,n.jsx)(r.r,{icon:m,iconTooltip:y,title:b,id:D})}},22940:(ne,j,e)=>{"use strict";e.d(j,{K:()=>n});var n=(a=>(a[a.Isolate=0]="Isolate",a[a.Hide=1]="Hide",a))(n||{})},22971:(ne,j,e)=>{"use strict";e.d(j,{sF:()=>_,ZI:()=>oe});var n=e(74848),a=e(22803),s=e(96540),d=e(70255),o=e(92745),l=e(63142),i=e(34213),c=e(45967),p=e(95943),h=e(70327),u=e(55143),r=e(74869),v=e(80218),g=e(23265),E=e(11940),x=e(74048),m=e(98127),y=e(17305),b=e(76267),D=e(95443),f=e(52161),C=e(29609),P=e(6106),T=e(57487),M=e(1972),I=e(40360),B=e(9368),U=e(3969),W=e(43173),V=e(30703),z=e(182);function R({rule:ye}){const fe=(0,l.of)(O),Ee=C.p.grafana.rule(ye.rulerRule);return(0,s.useMemo)(()=>Ee?(0,z.qf)(ye.group.interval).exceedsLimit:!1,[ye.group.interval,Ee])?(0,n.jsx)(c.m,{theme:"error",content:(0,n.jsx)("div",{children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.rule-config-status.tooltip-min-interval",values:{minInterval:W.$.unifiedAlerting.minInterval,ruleInterval:ye.group.interval},children:["A minimum evaluation interval of ",(0,n.jsx)("span",{className:fe.globalLimitValue,children:"{{minInterval}}"})," has been configured in Grafana and will be used instead of the ","{{ruleInterval}}"," interval configured for the Rule Group."]})}),children:(0,n.jsx)(V.I,{name:"stopwatch-slash",className:fe.icon})}):null}function O(ye){return{globalLimitValue:(0,a.css)({fontWeight:ye.typography.fontWeightBold}),icon:(0,a.css)({fill:ye.colors.warning.text})}}var N=e(90186),F=e(69715);const G=({rule:ye})=>{const fe=(0,l.of)(H);return(0,F.lf)(ye.health)?(0,n.jsx)(c.m,{theme:"error",content:ye.lastError||"No error message provided.",children:(0,n.jsxs)("div",{className:fe.warn,children:[(0,n.jsx)(V.I,{name:"exclamation-triangle"}),(0,n.jsx)("span",{children:(0,n.jsx)(o.x6,{i18nKey:"alerting.rule-health.error",children:"error"})})]})}):(0,n.jsx)(n.Fragment,{children:ye.health})},H=ye=>({warn:(0,a.css)({display:"inline-flex",flexDirection:"row",alignItems:"center",gap:ye.spacing(1),color:ye.colors.warning.text})});var K=e(74529),w=e(41654),Q=e(68079),k=e(24619),te=e(67834),q=e(65420);const se=({rule:ye,isDeleting:fe,isCreating:Ee,isPaused:Ae})=>{const Ge=(0,l.of)(re),{promRule:Fe,rulerRule:Pe}=ye,Ve=()=>Ae&&C.p.grafana.recordingRule(Pe)?(0,n.jsx)(c.m,{content:(0,o.t)("alerting.rule-state.recording-rule-state.content-recording-rule-evaluation-is-currently-paused","Recording rule evaluation is currently paused"),placement:"top",children:(0,n.jsxs)(te.O,{state:"warning",children:[(0,n.jsx)(V.I,{name:"pause",size:"xs"}),(0,n.jsx)(o.x6,{i18nKey:"alerting.rule-state.paused",children:"Paused"})]})}):(0,n.jsx)(o.x6,{i18nKey:"alerting.rule-state.recording-rule",children:"Recording rule"}),me=(0,s.useMemo)(()=>{if(C.R$.alertingRule(Fe)&&Fe.alerts?.length&&Fe.state!==k.cF.Inactive){const Se=Fe.activeAt?new Date(Fe.activeAt):(0,C.Om)(Fe);if(Se)return(0,n.jsxs)("span",{title:String(Se),className:Ge.for,children:[(0,n.jsxs)(o.x6,{i18nKey:"alerting.rule-state.for",values:{duration:(0,K.dU)({start:Se,end:new Date},!1)},children:["for ","{{duration}}"]})," "]})}return null},[Fe,Ge]);return fe?(0,n.jsxs)(w.B,{gap:1,children:[(0,n.jsx)(Q.y,{}),(0,n.jsx)(o.x6,{i18nKey:"alerting.rule-state.deleting",children:"Deleting"})]}):Ee?(0,n.jsxs)(w.B,{gap:1,children:[(0,n.jsx)(Q.y,{}),(0,n.jsx)(o.x6,{i18nKey:"alerting.rule-state.creating",children:"Creating"})]}):C.R$.alertingRule(Fe)?(0,n.jsxs)(w.B,{gap:1,children:[(0,n.jsx)(q.C,{state:Fe.state,isPaused:Ae}),!Ae&&me]}):Fe&&C.R$.recordingRule(Fe)?(0,n.jsx)(Ve,{}):(0,n.jsx)(o.x6,{i18nKey:"alerting.rule-state.na",children:"n/a"})},re=ye=>({for:(0,a.css)({fontSize:ye.typography.bodySmall.fontSize,color:ye.colors.text.secondary,whiteSpace:"nowrap",paddingTop:"2px"})}),Y=(0,r.wS)(),{useLazyGetRuleGroupForNamespaceQuery:X}=h.hK,{useLazyDiscoverDsFeaturesQuery:J}=u.L,_=({rules:ye,className:fe,showGuidelines:Ee=!1,emptyMessage:Ae="No rules found.",showGroupColumn:Ge=!1,showSummaryColumn:Fe=!1,showNextEvaluationColumn:Pe=!1})=>{const Ve=(0,l.of)(ae),me=(0,a.cx)(Ve.wrapper,fe,{[Ve.wrapperMargin]:Ee}),{pageItems:Se,page:Qe,numberOfPages:Ue,onPageChange:Ie}=(0,x.W)(ye,1,p.FG),{result:Re,status:Ke}=ee(Se),Le=Ke==="loading",ze=(0,s.useMemo)(()=>Re.map((Ye,de)=>({id:`${Ye.namespace.name}-${Ye.group.name}-${Ye.name}-${de}`,data:Ye})),[Re]),Be=le(Fe,Ge,Pe,Le);if(!Se.length)return(0,n.jsx)("div",{className:(0,a.cx)(me,Ve.emptyMessage),children:Ae});const $e=Ee?T.B:P.E;return(0,n.jsxs)("div",{className:me,"data-testid":"rules-table",children:[(0,n.jsx)($e,{cols:Be,isExpandable:!0,items:ze,renderExpandedContent:({data:Ye})=>(0,n.jsx)(N.DI,{rule:Ye})}),(0,n.jsx)(i.d,{currentPage:Qe,numberOfPages:Ue,onNavigate:Ie,hideWhenSinglePage:!0,className:Ve.pagination})]})};function ee(ye){const[fe]=X(),[Ee]=J(),[Ae,Ge]=(0,v.Yb)(async()=>Promise.all(ye.map(async Pe=>{const Ve=await Ee({rulesSourceName:(0,f.EV)(Pe.namespace.rulesSource)},!0).unwrap();if(Ve.rulerConfig&&Pe.namespace.rulesSource!==f.hY){const me=await fe({namespace:Pe.namespace.name,group:Pe.group.name,rulerConfig:Ve.rulerConfig},!0).unwrap();(0,g.yh)(Pe,me)}return Pe})),ye);return(0,s.useEffect)(()=>{Y?Ae.execute():Ae.reset()},[ye,Ae]),Ge}const ae=ye=>({wrapperMargin:(0,a.css)({[ye.breakpoints.up("md")]:{marginLeft:"36px"}}),emptyMessage:(0,a.css)({padding:ye.spacing(1)}),wrapper:(0,a.css)({width:"auto",borderRadius:ye.shape.radius.default}),skeletonWrapper:(0,a.css)({flex:1}),pagination:(0,a.css)({display:"flex",margin:0,paddingTop:ye.spacing(1),paddingBottom:ye.spacing(.25),justifyContent:"center",borderLeft:`1px solid ${ye.colors.border.medium}`,borderRight:`1px solid ${ye.colors.border.medium}`,borderBottom:`1px solid ${ye.colors.border.medium}`,float:"none"})});function le(ye,fe,Ee,Ae){return(0,s.useMemo)(()=>{const Ge=[{id:"state",label:(0,o.t)("alerting.use-columns.columns.label.state","State"),renderCell:({data:Fe})=>(0,n.jsx)(L,{rule:Fe}),size:"165px"},{id:"name",label:(0,o.t)("alerting.use-columns.columns.label.name","Name"),renderCell:({data:Fe})=>Fe.name,size:Ee?4:5},{id:"metadata",label:"",renderCell:({data:Fe})=>{const{promRule:Pe,rulerRule:Ve}=Fe,me=(0,C.uo)(Pe??Ve);return me?(0,n.jsx)(y.T,{pluginId:me.pluginId}):C.p.grafana.rule(Ve)&&Ve.grafana_alert.provenance?(0,n.jsx)(M.rS,{}):null},size:"100px"},{id:"warnings",label:"",renderCell:({data:Fe})=>(0,n.jsx)(R,{rule:Fe}),size:"45px"},{id:"health",label:(0,o.t)("alerting.use-columns.columns.label.health","Health"),renderCell:({data:{promRule:Fe,group:Pe}})=>Fe?(0,n.jsx)(G,{rule:Fe}):null,size:"75px"}];return ye&&Ge.push({id:"summary",label:(0,o.t)("alerting.use-columns.label.summary","Summary"),renderCell:({data:Fe})=>(0,n.jsx)(B.Y,{input:Fe.annotations[D.YH.summary]??""}),size:Ee?4:5}),Ee&&Ge.push({id:"nextEvaluation",label:(0,o.t)("alerting.use-columns.label.next-evaluation","Next evaluation"),renderCell:({data:Fe})=>{const Pe=(0,b.CN)(Fe.promRule?.lastEvaluation,Fe.group.interval);return Pe&&(0,n.jsx)(c.m,{placement:"top",content:`${Pe?.fullDate}`,theme:"info",children:(0,n.jsx)("span",{children:Pe?.humanized})})},size:2}),fe&&Ge.push({id:"group",label:(0,o.t)("alerting.use-columns.label.group","Group"),renderCell:({data:Fe})=>{const{namespace:Pe,group:Ve}=Fe;return Ve.name==="default"?(0,n.jsx)(I.c,{namespace:Pe.name}):(0,n.jsx)(I.c,{namespace:Pe.name,group:Ve.name})},size:5}),Ge.push({id:"actions",label:(0,o.t)("alerting.use-columns.label.actions","Actions"),renderCell:({data:Fe})=>(0,n.jsx)(ie,{rule:Fe,isLoadingRuler:Ae}),size:"215px"}),Ge},[Ee,ye,fe,Ae])}function L({rule:ye}){const{isDeleting:fe,isCreating:Ee,isPaused:Ae}=ue(ye);return(0,n.jsx)(se,{rule:ye,isDeleting:fe,isCreating:Ee,isPaused:Ae})}function ie({rule:ye,isLoadingRuler:fe}){const Ee=(0,l.of)(ae),{isDeleting:Ae,isCreating:Ge}=ue(ye);return fe?(0,n.jsx)(d.A,{containerClassName:Ee.skeletonWrapper}):(0,n.jsx)(U.l,{compact:!0,showViewButton:!Ae&&!Ge,rule:ye,rulesSource:ye.namespace.rulesSource})}function oe(ye){const fe=(0,m.$)(Ge=>Ge.rulerRules),Ee=(0,f.EV)(ye);return!!fe[Ee]?.result}function ue(ye){const fe=ye.namespace.rulesSource,Ee=oe(fe),{hasRuler:Ae}=(0,E.y)(fe),{promRule:Ge,rulerRule:Fe}=ye;if(Y&&!C.p.grafana.rule(Fe))return{isDeleting:!1,isCreating:!1,isPaused:!1};const Pe=!!(Ae&&Ee&&Ge&&!Fe),Ve=!!(Ae&&Ee&&Fe&&!Ge),me=C.p.grafana.rule(Fe)&&(0,C.hC)(Fe);return{isDeleting:Pe,isCreating:Ve,isPaused:me}}},23117:(ne,j,e)=>{"use strict";e.d(j,{d:()=>s,m:()=>a});class n{constructor(){this.extraRenderActions=[],this.keyedScopedExtraRenderActions=new Map}addExtraRenderAction(o){this.extraRenderActions=this.extraRenderActions.concat(o)}addKeyedExtraRenderAction(o,l){this.keyedScopedExtraRenderActions.set(o,l)}getAllExtraRenderAction(){return this.extraRenderActions}getScopedExtraRenderAction(o){return Array.from(this.keyedScopedExtraRenderActions,i=>i[1]).filter(i=>i.scope===o).map(i=>i.queryActionComponent)}}const a=new n,s=new n},23130:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>l});const n="12.3.0";var a=(i=>(i.Donut="donut",i.Pie="pie",i))(a||{}),s=(i=>(i.Name="name",i.Percent="percent",i.Value="value",i))(s||{}),d=(i=>(i.Percent="percent",i.Value="value",i))(d||{});const o={values:[]},l={displayLabels:[]}},23207:(ne,j,e)=>{"use strict";e.d(j,{G:()=>H});var n=e(74848),a=e(85891),s=e(73628),d=e(96540),o=e(92745),l=e(22787),i=e(45861),c=e(22803),p=e(63142),h=e(50275),u=e(37386),r=e(21285),v=e(97095),g=e(18027),E=e(77824),x=e(35427),m=e(17200),y=e(41654),b=e(63527),D=e(43243),f=e(76319);const C=({value:K,onChange:w})=>{const[Q,k]=(0,d.useState)(""),[te,q]=(0,d.useState)(""),[se,re]=(0,d.useState)(a.VR.String),Y=L=>{k(L)},X=L=>{q(L)},J=L=>{re(L.value)},_=()=>{let L;K?L=K.filter(ie=>ie.key!==Q):L=[],L.push({key:Q,name:te,type:se}),L.sort((ie,oe)=>ie.key.localeCompare(oe.key)),w(L),k(""),q(""),re(a.VR.String)},ee=L=>()=>{const ie=K.filter(oe=>oe.key!==L);w(ie)},ae=te===""||Q==="",le=[{label:"string",value:a.VR.String}];return(0,n.jsxs)("div",{children:[(0,n.jsxs)(y.B,{direction:"row",children:[(0,n.jsx)(b.p,{value:Q,onChange:L=>Y(L.currentTarget.value),placeholder:(0,o.t)("actions.params-editor.placeholder-key","Key"),width:300}),(0,n.jsx)(b.p,{value:te,onChange:L=>X(L.currentTarget.value),placeholder:(0,o.t)("actions.params-editor.placeholder-name","Name"),width:300}),(0,n.jsx)(D.G,{value:se,onChange:J,placeholder:(0,o.t)("actions.variables-editor.placeholder-type","Type"),options:le,maxWidth:100,minWidth:10,width:"auto"}),(0,n.jsx)(f.K,{"aria-label":(0,o.t)("actions.params-editor.aria-label-add","Add"),name:"plus-circle",onClick:()=>_(),disabled:ae})]}),(0,n.jsx)(y.B,{direction:"column",children:K.map(L=>(0,n.jsxs)(y.B,{direction:"row",children:[(0,n.jsx)(b.p,{disabled:!0,value:L.key,width:300}),(0,n.jsx)(b.p,{disabled:!0,value:L.name,width:300}),(0,n.jsx)(b.p,{disabled:!0,value:L.type,width:100}),(0,n.jsx)(f.K,{"aria-label":(0,o.t)("actions.params-editor.aria-label-delete","Delete"),onClick:ee(L.key),name:"trash-alt"})]},L.key))})]})};var P=e(78282),T=e(43173),M=e(18857),I=e(73163);const B="direct",U=()=>(0,P.l)().getList({filter:w=>w.type===I.AL}),W=({actionType:K,datasourceUid:w,onChange:Q})=>{const k=(0,d.useMemo)(()=>{const re=[{label:(0,o.t)("grafana-ui.action-editor.modal.connection-direct-label","Direct from browser"),value:B,description:(0,o.t)("grafana-ui.action-editor.modal.connection-direct-description","Make request directly from browser"),icon:"adjust-circle"}];return T.$.featureToggles.vizActionsAuth&&U().forEach(X=>{re.push({label:X.name,value:X.uid,imgUrl:X.meta.info.logos.small})}),re},[]),te=()=>K===a.X2.Fetch?B:K===a.X2.Infinity&&w?w:B,q=re=>{if(re===B)Q(B);else{const X=U().find(J=>J.uid===re);X?Q(X):console.error("ConnectionPicker: Could not find datasource with UID:",re)}},se=te();return(0,n.jsx)(M.l6,{value:se,options:k,onChange:re=>q(re.value),placeholder:(0,o.t)("grafana-ui.action-editor.modal.connection-placeholder","Select connection")})},V=({value:K,onChange:w,suggestions:Q,contentTypeHeader:k=!1})=>{const te=(0,p.of)(z),q=K.find(([fe,Ee])=>fe==="Content-Type"),[se,re]=(0,d.useState)(""),[Y,X]=(0,d.useState)(""),[J,_]=(0,d.useState)("");(0,d.useEffect)(()=>{J!==""?_(J):q&&_(q[1])},[J,q]);const[ee,ae]=(0,d.useState)(Math.random().toString()),le=fe=>{X(fe)},L=fe=>{re(fe)},ie=fe=>()=>{const Ee=K.filter(Ae=>Ae[0]!==fe);w(Ee)},oe=fe=>{let Ee;K?Ee=K.filter(Ae=>Ae[0]!==(fe?fe[0]:se)):Ee=[],Ee.push(fe??[se,Y]),Ee.sort((Ae,Ge)=>Ae[0].localeCompare(Ge[0])),w(Ee),re(""),X(""),ae(Math.random().toString())},ue=fe=>{_(fe),oe(["Content-Type",fe])},ye=se===""||Y==="";return(0,n.jsxs)("div",{children:[(0,n.jsxs)(y.B,{direction:"row",children:[(0,n.jsx)(m.y,{value:se,onChange:L,suggestions:Q,placeholder:(0,o.t)("actions.params-editor.placeholder-key","Key"),style:{width:332}}),(0,n.jsx)(m.y,{value:Y,onChange:le,suggestions:Q,placeholder:(0,o.t)("actions.params-editor.placeholder-value","Value"),style:{width:332}}),(0,n.jsx)(f.K,{"aria-label":(0,o.t)("actions.params-editor.aria-label-add","Add"),name:"plus-circle",onClick:()=>oe(),disabled:ye})]},ee),(0,n.jsx)(y.B,{direction:"column",children:Array.from(K.filter(fe=>fe[0]!=="Content-Type")||[]).map(fe=>(0,n.jsxs)(y.B,{direction:"row",children:[(0,n.jsx)(b.p,{disabled:!0,value:fe[0]}),(0,n.jsx)(b.p,{disabled:!0,value:fe[1]}),(0,n.jsx)(f.K,{"aria-label":(0,o.t)("actions.params-editor.aria-label-delete","Delete"),onClick:ie(fe[0]),name:"trash-alt"})]},fe[0]))}),k&&(0,n.jsx)("div",{className:te.extraHeader,children:(0,n.jsxs)(y.B,{direction:"row",children:[(0,n.jsx)(b.p,{value:"Content-Type",disabled:!0}),(0,n.jsx)(M.l6,{onChange:fe=>ue(fe.value),options:a.Ur,value:J})]})})]})},z=K=>({extraHeader:(0,c.css)({marginTop:K.spacing(1),marginBottom:K.spacing(1),maxWidth:673})}),R=13,O={method:a.DO.POST,url:"",body:"{}",queryParams:[],headers:[["Content-Type","application/json"]]},N=(0,d.memo)(({index:K,value:w,onChange:Q,suggestions:k,showOneClick:te})=>{const q=(0,p.of)(F),se=(0,p.$j)(),re=()=>w.type===a.X2.Infinity?w[a.X2.Infinity]||{...O,datasourceUid:""}:w[a.X2.Fetch]||O,Y=Fe=>{const Pe=w.type===a.X2.Infinity?a.X2.Infinity:a.X2.Fetch,Ve=re(),me={...Ve,...Fe,...w.type===a.X2.Infinity&&{datasourceUid:Ve.datasourceUid||""}};Q(K,{...w,[Pe]:me})},X=Fe=>Pe=>{Y({[Fe]:Pe})},J=Fe=>{Q(K,{...w,title:Fe})},_=Fe=>{Q(K,{...w,confirmation:Fe})},ee=Fe=>{Q(K,{...w,variables:Fe})},ae=()=>{Q(K,{...w,oneClick:!w.oneClick})},le=X("url"),L=X("body"),ie=X("method"),oe=X("queryParams"),ue=X("headers"),ye=Fe=>{Q(K,{...w,style:{...w.style,backgroundColor:Fe}})},fe=Fe=>{const Pe={title:w.title,confirmation:w.confirmation,oneClick:w.oneClick,variables:w.variables,style:w.style};typeof Fe=="string"?Q(K,{...Pe,type:a.X2.Fetch,[a.X2.Fetch]:re()}):Q(K,{...Pe,type:a.X2.Infinity,[a.X2.Infinity]:{...re(),datasourceUid:Fe.uid}})},Ee=(Fe="{}")=>{try{const Pe=JSON.parse(Fe);return(0,n.jsx)(h.B,{json:Pe})}catch(Pe){return Pe instanceof Error?`Invalid JSON provided: ${Pe.message}`:"Invalid JSON provided"}},Ae=re(),Ge=Ae.method!==a.DO.GET&&Ae.headers?.some(([Fe,Pe])=>Fe==="Content-Type"&&Pe==="application/json");return(0,n.jsxs)("div",{className:q.listItem,children:[(0,n.jsx)(u.D,{label:(0,o.t)("grafana-ui.action-editor.modal.action-title","Title"),className:q.inputField,children:(0,n.jsx)(m.y,{value:w.title,onChange:J,suggestions:k,autoFocus:w.title==="",placeholder:(0,o.t)("grafana-ui.action-editor.modal.action-title-placeholder","Action title")})}),(0,n.jsx)(u.D,{label:(0,o.t)("grafana-ui.viz-tooltip.actions-confirmation-label","Confirmation message"),description:(0,o.t)("grafana-ui.viz-tooltip.actions-confirmation-message","Provide a descriptive prompt to confirm or cancel the action."),className:q.inputField,children:(0,n.jsx)(m.y,{value:w.confirmation,onChange:_,suggestions:k,placeholder:(0,o.t)("grafana-ui.viz-tooltip.actions-confirmation-input-placeholder","Are you sure you want to {{ actionTitle }}?",{actionTitle:w.title||"... "})})}),te&&(0,n.jsx)(u.D,{label:(0,o.t)("grafana-ui.data-link-inline-editor.one-click","One click"),description:(0,o.t)("grafana-ui.action-editor.modal.one-click-description","Only one link or action can have one click enabled at a time"),children:(0,n.jsx)(r.d,{value:w.oneClick||!1,onChange:ae})}),(0,n.jsx)(v.C,{children:(0,n.jsx)(g.I,{label:(0,o.t)("grafana-ui.action-editor.modal.connection","Connection"),labelWidth:R,children:(0,n.jsx)(W,{actionType:w.type,datasourceUid:w?.[a.X2.Infinity]?.datasourceUid,onChange:fe})})}),(0,n.jsx)(v.C,{children:(0,n.jsx)(g.I,{label:(0,o.t)("grafana-ui.action-editor.modal.action-method","Method"),labelWidth:R,children:(0,n.jsx)(E.z,{value:Ae.method,options:a.ki,onChange:ie,fullWidth:!0})})}),(0,n.jsx)(v.C,{children:(0,n.jsx)(g.I,{label:(0,o.t)("actions.action-editor.label-url","URL"),labelWidth:R,grow:!0,children:(0,n.jsx)(m.y,{value:Ae.url,onChange:le,suggestions:k,placeholder:(0,o.t)("actions.action-editor.placeholder-url","URL")})})}),(0,n.jsx)(u.D,{label:(0,o.t)("grafana-ui.action-editor.modal.action-variables","Variables"),className:q.fieldGap,noMargin:!0,children:(0,n.jsx)(C,{onChange:ee,value:w.variables??[]})}),(0,n.jsx)(u.D,{label:(0,o.t)("grafana-ui.action-editor.modal.action-query-params","Query parameters"),className:q.fieldGap,children:(0,n.jsx)(V,{value:Ae.queryParams??[],onChange:oe,suggestions:k})}),(0,n.jsx)(u.D,{label:(0,o.t)("actions.action-editor.label-headers","Headers"),children:(0,n.jsx)(V,{value:Ae.headers??[],onChange:ue,suggestions:k,contentTypeHeader:!0})}),Ae.method!==a.DO.GET&&(0,n.jsx)(u.D,{label:(0,o.t)("grafana-ui.action-editor.modal.action-body","Body"),className:q.inputField,children:(0,n.jsx)(m.y,{value:Ae.body,onChange:L,suggestions:k,type:m.c.TextAreaElement})}),Ge&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),Ee(Ae.body)]}),(0,n.jsx)(u.D,{label:(0,o.t)("grafana-ui.action-editor.button.style","Button style"),style:{marginTop:"8px"},children:(0,n.jsx)(g.I,{label:(0,o.t)("actions.action-editor.button.style.background-color","Color"),labelWidth:R,className:q.colorPicker,children:(0,n.jsx)(x.sk,{color:w?.style?.backgroundColor||se.colors.secondary.main,onChange:ye})})})]})}),F=K=>({listItem:(0,c.css)({marginBottom:K.spacing()}),infoText:(0,c.css)({paddingBottom:K.spacing(2),marginLeft:"66px",color:K.colors.text.secondary}),fieldGap:(0,c.css)({marginTop:K.spacing(2)}),inputField:(0,c.css)({marginRight:4}),colorPicker:(0,c.css)({display:"flex",alignItems:"center"})});N.displayName="ActionEditor";const G=({action:K,index:w,onSave:Q,onCancel:k,getSuggestions:te,showOneClick:q})=>{const[se,re]=(0,d.useState)(K),Y=se.title.trim()===""||!se[se.type]?.url?.trim()||se.type===a.X2.Infinity&&!se[a.X2.Infinity]?.datasourceUid;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{value:se,index:w,onChange:(X,J)=>{re(J)},suggestions:te(),showOneClick:q}),(0,n.jsxs)(l.a.ButtonRow,{children:[(0,n.jsx)(i.$n,{variant:"secondary",onClick:()=>k(w),fill:"outline",children:(0,n.jsx)(o.x6,{i18nKey:"action-editor.modal.cancel-button",children:"Cancel"})}),(0,n.jsx)(i.$n,{onClick:()=>{Q(w,se)},disabled:Y,children:(0,n.jsx)(o.x6,{i18nKey:"action-editor.modal.save-button",children:"Save"})})]})]})},H=({actions:K,getSuggestions:w,showOneClick:Q=!1,...k})=>(0,n.jsx)(s.J,{type:"action",items:K,...k,children:(te,q,se,re)=>(0,n.jsx)(G,{index:q,action:te??a.mx,data:k.data,onSave:se,onCancel:re,getSuggestions:w,showOneClick:Q})})},23237:(ne,j,e)=>{"use strict";e.d(j,{EX:()=>i,Wb:()=>d,Zk:()=>o,zG:()=>l});var n=e(2543),a=e.n(n),s=e(25229);const d=(c,p)=>{const h={from:(0,s.yT)(p.from),to:(0,s.yT)(p.to)},u=(h.to.valueOf()-h.from.valueOf())/2;let r,v;return c===-1?(r=h.to.valueOf()-u,v=h.from.valueOf()-u):c===1?(r=h.to.valueOf()+u,v=h.from.valueOf()+u,r>Date.now()&&h.to.valueOf()<Date.now()&&(r=Date.now(),v=h.from.valueOf())):(r=h.to.valueOf(),v=h.from.valueOf()),{from:v,to:r}},o=(c,p)=>{const h=c.to.valueOf()-c.from.valueOf(),u=c.to.valueOf()-h/2,r=h===0?3e4:h*p,v=u+r/2;return{from:u-r/2,to:v}};async function l(){const c=await navigator.clipboard.readText();let p;try{return p=JSON.parse(c),!p.from||!p.to?{range:c,isError:!0}:{range:p,isError:!1}}catch{return{range:c,isError:!0}}}const i=c=>(0,n.isString)(c)&&c.includes("Z")?(0,s.KQ)(c).utc():c},23244:(ne,j,e)=>{"use strict";e.d(j,{v:()=>P});var n=e(74848),a=e(22803),s=e(2543),d=e(22592),o=e(17548),l=e(33239),i=e(43173),c=e(44248),p=e(63142),h=e(45967),u=e(91867),r=e(67522),v=e(41654),g=e(30703),E=e(92119),x=e(90856),m=e(62467),y=e(25229);const b=(I,B)=>{const U=B.timeRange.from.diff(I.timeRange.from);return B.series.forEach(W=>{W.refId=D(W.refId||""),W.meta={...W.meta,timeCompare:{diffMs:U,isTimeShiftQuery:!0}}}),(0,m.of)(B)},D=I=>`${I}-compare`,f="__previousPeriod";function C(I,B){let U,W;if(B){if(B===f){const V=I.to.diff(I.from);U=(0,y.KQ)(I.from).subtract(V),W=(0,y.KQ)(I.to).subtract(V)}else U=(0,y.KQ)(I.from).subtract(o.intervalToMs(B)),W=(0,y.KQ)(I.to).subtract(o.intervalToMs(B));return{from:U,to:W,raw:{from:U,to:W}}}}class P extends c.XQ{constructor(B={}){super({...B,from:"now-6h",to:"now",value:(0,d.E2)()}),this._variableDependency=new c.Sh(this,{statePaths:["timeFrom","timeShift"]}),this.onOpenSettings=()=>{const U=this.parent,W=(0,E.YQ)(this);U instanceof c.Eb&&W.showModal(new x.s({panelRef:U.getRef()}))},this.addActivationHandler(()=>this._onActivate())}static{this.Component=T}_onActivate(){this._subs.add(this.subscribeToState(U=>{const{timeInfo:W,timeRange:V}=this.getTimeOverride(this.getAncestorTimeRange().state.value);U.timeInfo!==W&&this.setState({timeInfo:W,value:V})}));const{timeRange:B}=this.getTimeOverride(this.getAncestorTimeRange().state.value);this.setState({value:B,from:B.raw.from.toString(),to:B.raw.to.toString()})}ancestorTimeRangeChanged(B){if(this.state.timeFrom&&this.state.zoomBehavior==="dashboard")return;const U=this.getTimeOverride(B.value);this.setState({value:U.timeRange,timeInfo:U.timeInfo})}getExtraQueries(B){const U=[],W=C(B.range,this.state.compareWith);if(!W)return U;const V=B.targets.filter(z=>z.timeRangeCompare!==!1);return V.length&&U.push({req:{...B,targets:V,range:W},processor:b}),U}shouldRerun(B,U,W){return B.compareWith!==U.compareWith&&W.find(V=>V.timeRangeCompare!==!1)!==void 0}getTimeOverride(B){const{timeFrom:U,timeShift:W,compareWith:V}=this.state,z=[],R={timeInfo:"",timeRange:B};if(U){const O=c.jh.interpolate(this,this.state.timeFrom),N=o.describeTextRange(O);if(N.invalid)return R.timeInfo="invalid time override",R;if(o.isRelativeTimeRange(B.raw)){const F=this.getTimeZone();R.timeRange={from:l.parse(N.from,void 0,F),to:l.parse(N.to,void 0,F),raw:{from:N.from,to:N.to}},z.push(N.display)}}if(W){const O=c.jh.interpolate(this,this.state.timeShift);if(o.describeTextRange(O).invalid)return R.timeInfo="invalid timeshift",R;const F="-"+O;z.push("timeshift "+F);const G=l.parseDateMath(F,R.timeRange.from,!1),H=l.parseDateMath(F,R.timeRange.to,!0);if(!G||!H)return R.timeInfo="invalid timeshift",R;R.timeRange={from:G,to:H,raw:{from:G,to:H}}}if(V){const O=x.r.find(F=>F.value===V),N=O?`compared to ${O.label.toLowerCase()}`:"";z.push(N)}return R.timeInfo=(0,s.capitalize)(z.join(" + ")),R}}function T({model:I}){const{timeInfo:B,hideTimeOverride:U}=I.useState(),W=(0,p.of)(M);if(!B||U)return null;const V=i.$.featureToggles.panelTimeSettings?I.onOpenSettings:void 0;return(0,n.jsx)(h.m,{content:(0,n.jsx)(u.xS,{timeRange:I.state.value,timeZone:I.getTimeZone()}),children:(0,n.jsx)(r.NR.TitleItem,{className:W.timeshift,onClick:V,children:(0,n.jsxs)(v.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(g.I,{name:"clock-nine",size:"sm"}),(0,n.jsx)("div",{children:B})]})})})}const M=I=>({timeshift:(0,a.css)({color:I.colors.text.link,gap:I.spacing(.5),whiteSpace:"nowrap"})})},23265:(ne,j,e)=>{"use strict";e.d(j,{Jr:()=>y,NW:()=>P,O6:()=>E,Tj:()=>T,Ug:()=>C,dy:()=>v,gt:()=>g,kU:()=>V,yh:()=>x});var n=e(2543),a=e.n(n),s=e(96540),d=e(86791),o=e(24619),l=e(70327),i=e(55143),c=e(95443),p=e(52161),h=e(94646),u=e(29609),r=e(98127);function v(R,O){const N=(0,r.$)(K=>K.promRules),F=(0,r.$)(K=>K.rulerRules),G=(0,s.useRef)({}),H=(0,s.useMemo)(()=>{if(R){const K=(0,p.Zw)(R);if(!K)throw new Error(`Unknown rules source: ${R}`);return[K]}return(0,p.lS)()},[R]);return(0,s.useMemo)(()=>H.map(K=>{const w=(0,p.Eb)(K)?K.name:K,Q=F[w]?.result;let k=N[w]?.result;w===p.hY&&O&&(k=O);const te=G.current[w];if(te&&te.promRules===k&&te.rulerRules===Q)return te.result;const q={};Object.entries(Q||{}).forEach(([re,Y])=>{const X={rulesSource:K,name:re,groups:[]};u.p.grafana.rule(Y[0].rules[0])&&(X.uid=Y[0].rules[0].grafana_alert.namespace_uid),q[re]=X,D(X,Y)}),k?.forEach(({name:re,groups:Y})=>{const X=q[re]=q[re]||{rulesSource:K,name:re,groups:[]};f(X,Y)});const se=Object.values(q);return G.current[w]={promRules:k,rulerRules:Q,result:se},se}).flat(),[N,F,H,O])}function g(R,O,N){const F={};return Object.entries(N||{}).forEach(([G,H])=>{const K={rulesSource:R,name:G,groups:[]};F[G]=K,D(K,H)}),O?.forEach(({name:G,groups:H})=>{const K=F[G]=F[G]||{rulesSource:R,name:G,groups:[]};f(K,H)}),Object.values(F)}function E(R,O,N){const F={rulesSource:R,name:O.name,groups:[]};return D(F,N),f(F,O.groups),F.groups.forEach(G=>{G.rules=G.rules.filter(H=>H.promRule)}),F}function x(R,O){if(!R.promRule)return;const F=O.rules.map(H=>B(H,R.namespace,R.group)).reduce((H,K)=>{const w=H.get(z(K));return w?w.push(K):H.set(z(K),[K]),H},new Map),G=U(R.promRule,F,R.namespace.rulesSource);G&&(R.rulerRule=G.rulerRule,R.query=G.query,R.labels=G.labels,R.annotations=G.annotations)}function m(R,O,N){return D(R,N),f(R,O),R}function y(R){return R.map(O=>{const N={...O,groups:[]};return N.groups.push({name:"default",rules:b(O.groups.flatMap(F=>F.rules)),totals:M(O.groups)}),N})}function b(R){return R.sort((O,N)=>O.name.localeCompare(N.name))}function D(R,O=[]){R.groups=O.map(N=>{const F=N.rules.filter(K=>u.p.any.recordingRule(K)).length,G=N.rules.filter(K=>u.p.grafana.alertingRule(K)&&(0,u.hC)(K)).length,H={name:N.name,interval:N.interval,source_tenants:N.source_tenants,rules:[],totals:{paused:G,recording:F}};return H.rules=N.rules.map(K=>B(K,R,H)),H})}function f(R,O){const N=new Map;R.groups.forEach(F=>N.set(F.name,F)),O.forEach(F=>{let G=N.get(F.name);G||(G={name:F.name,rules:[],totals:T(F)},R.groups.push(G),N.set(F.name,G)),G.totals={...G.totals,...T(F)};const H=new Map;G.rules.forEach(K=>{const w=H.get(z(K));w?w.push(K):H.set(z(K),[K])}),(F.rules??[]).forEach(K=>{const w=U(K,H,R.rulesSource);w?(w.promRule=K,w.instanceTotals=u.R$.alertingRule(K)?C(K):{},w.filteredInstanceTotals=u.R$.alertingRule(K)?P(K):{}):G.rules.push(I(K,R,G))})})}function C(R){const O=(0,n.countBy)(R.alerts,"state");if(R.totals){const{normal:N,...F}=R.totals;return{...F,inactive:N}}return{alerting:O[d.$7.Alerting]||O.firing,pending:O[d.$7.Pending],recovering:O[d.$7.Recovering],inactive:O[d.$7.Normal],nodata:O[d.$7.NoData],error:O[d.$7.Error]||O.err||void 0}}function P(R){if(R.totalsFiltered){const{normal:O,...N}=R.totalsFiltered;return{...N,inactive:O}}return{}}function T(R){if(R.totals){const{firing:G,...H}=R.totals;return{...H,alerting:G}}const O=(0,n.countBy)(R.rules,G=>u.R$.alertingRule(G)&&G.state),N=(0,n.countBy)(R.rules,G=>G.health),F=R.rules.filter(G=>u.R$.recordingRule(G)).length;return{alerting:O[o.cF.Firing],error:N.error,nodata:N.nodata,inactive:O[o.cF.Inactive],pending:O[o.cF.Pending],recovering:O[o.cF.Recovering],recording:F}}function M(R){const O={};return R.forEach(N=>{const F=N.totals;Object.entries(F).forEach(([G,H])=>{O[G]||(O[G]=0),H!=null&&(O[G]+=H)})}),O}function I(R,O,N){return{name:R.name,query:R.query,labels:R.labels||{},annotations:u.R$.alertingRule(R)?(0,u.Rh)(R):{},promRule:R,namespace:O,group:N,instanceTotals:u.R$.alertingRule(R)?C(R):{},filteredInstanceTotals:u.R$.alertingRule(R)?P(R):{}}}function B(R,O,N){const F={labels:R.labels||{},rulerRule:R,namespace:O,group:N,instanceTotals:{},filteredInstanceTotals:{},uid:u.p.grafana.rule(R)?R.grafana_alert.uid:void 0};return u.p.dataSource.alertingRule(R)?{...F,name:R.alert,query:R.expr,annotations:R.annotations||{}}:u.p.dataSource.recordingRule(R)?{...F,name:R.record,query:R.expr,annotations:{}}:{...F,name:R.grafana_alert.title,query:"",annotations:R.annotations||{}}}function U(R,O,N){const F=z(R),G=O.get(F);if(!G)return;if((0,p.z2)(N))return G[0];const H=G.find(w=>!w.promRule&&W(w,R,!0));if(H)return H;const K=G.find(w=>!w.promRule&&W(w,R,!1));if(K)return K}function W(R,O,N=!0){const F=u.R$.alertingRule(O)?(0,u.Rh)(O):{},G=O.labels??{},H=N?(0,h.h1)(O.query):"",K=R.annotations,w=R.labels,Q=N?(0,h.h1)(R.query):"";return R.name===O.name?(0,n.isEqual)([Q,w,K],[H,G,F]):!1}function V(R,O,N){const F=!R,{currentData:G,isLoading:H,error:K}=l.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:p.hY,dashboardUid:R??void 0,panelId:O},{skip:F,pollingInterval:N?c.HH:void 0}),{currentData:w,isLoading:Q,error:k}=l.hK.endpoints.rulerRules.useQuery({rulerConfig:i.b,filter:{dashboardUID:R??void 0,panelId:O}},{pollingInterval:N?c.HH:void 0,skip:F}),te=(0,s.useRef)({}),q=(0,p.Zw)(p.hY),se=(0,s.useMemo)(()=>{if(!q)return[];const re=te.current[p.hY];if(re&&re.promRules===G&&re.rulerRules===w)return re.result;const Y={};Object.entries(w||{}).forEach(([J,_])=>{const ee={rulesSource:q,name:J,groups:[]};u.p.grafana.rule(_[0].rules[0])&&(ee.uid=_[0].rules[0].grafana_alert.namespace_uid),Y[J]=ee,D(ee,_)}),G?.forEach(({name:J,groups:_})=>{const ee=Y[J]=Y[J]||{rulesSource:q,name:J,groups:[]};f(ee,_)});const X=Object.values(Y);return te.current[p.hY]={promRules:G,rulerRules:w,result:X},X},[G,w,q]);return{loading:H||Q,error:K??k,result:se}}function z(R){return R.uid?R.uid??"":R.name}},23289:(ne,j,e)=>{"use strict";e.d(j,{c:()=>d});var n=e(43173),a=e(27489);let s=!1;const d={dashboardInitialized:i=>{o("init_dashboard_completed",i)},dashboardCopied:i=>{(0,a.rR)("grafana_dashboard_copied",i)},dashboardCreatedOrSaved:(i,c)=>{o(i?"created":"saved",c,"grafana_dashboard")},editButtonClicked:i=>{o("edit_button_clicked",i)},exitEditButtonClicked:()=>{o("exit_edit_button_clicked")},dashboardOutlineClicked:()=>{o("outline_clicked")},outlineItemClicked:i=>{o("outline_item_clicked",i)},addVariableButtonClicked:i=>{o("add_variable_button_clicked",i)},trackAddPanelClick(){o("edit_action_clicked",{item:"add_panel"})},trackGroupRowClick(){o("edit_action_clicked",{item:"group_row"})},trackGroupTabClick(){o("edit_action_clicked",{item:"group_tab"})},trackUngroupClick(){o("edit_action_clicked",{item:"ungroup"})},trackPastePanelClick(){o("edit_action_clicked",{item:"paste_panel"})},trackRemoveRowClick(){o("edit_action_clicked",{item:"remove_row"})},trackRemoveTabClick(){o("edit_action_clicked",{item:"remove_tab"})},panelLinkClicked:i=>{o("panelheader_datalink_clicked",i)},panelStatusMessageClicked:i=>{o("panelheader_statusmessage_clicked",i)},panelCancelQueryClicked:i=>{o("panelheader_cancelquery_clicked",i)},toolbarFavoritesClick:()=>{o("toolbar_actions_clicked",{item:"favorites"})},toolbarSettingsClick:()=>{o("toolbar_actions_clicked",{item:"settings"})},toolbarShareClick:()=>{o("toolbar_actions_clicked",{item:"share"})},toolbarShareDropdownClick:()=>{o("toolbar_actions_clicked",{item:"share_dropdown"})},toolbarAddClick:()=>{o("toolbar_actions_clicked",{item:"add"})},sharingCategoryClicked:i=>{l("sharing_category_clicked",i)},shareLinkCopied:i=>{l("sharing_link_copy_clicked",i)},embedSnippetCopy:i=>{l("sharing_embed_copy_clicked",i)},generatePanelImageClicked:i=>{l("sharing_link_generate_image_clicked",i)},downloadPanelImageClicked:i=>{l("sharing_link_download_image_clicked",i)},publishSnapshotClicked:i=>{l("sharing_snapshot_publish_clicked",i)},publishSnapshotLocalClicked:i=>{l("sharing_snapshot_local_clicked",i)},exportDownloadJsonClicked:i=>{l("sharing_export_download_json_clicked",i)},exportCopyJsonClicked:i=>{l("sharing_export_copy_json_clicked",i)},exportSaveJsonClicked:i=>{l("sharing_export_save_json_clicked",i)},exportViewJsonClicked:i=>{l("sharing_export_view_json_clicked",i)},generatePublicDashboardUrlClicked:i=>{l("sharing_public_generate_url_clicked",i)},revokePublicDashboardEmailClicked:i=>{l("sharing_public_email_revoke_clicked",i)},resendPublicDashboardEmailClicked:i=>{l("sharing_public_email_resend_clicked",i)},publicDashboardEmailInviteClicked:i=>{l("sharing_public_email_invite_clicked",i)},publicDashboardShareTypeChange:i=>{l("sharing_public_can_view_clicked",i)},publicDashboardTimeSelectionChanged:i=>{l("sharing_public_time_picker_clicked",i)},publicDashboardAnnotationsSelectionChanged:i=>{l("sharing_public_annotations_clicked",i)},publicDashboardUrlCopied:i=>{l("sharing_public_copy_url_clicked",i)},publicDashboardPauseSharingClicked:i=>{l("sharing_public_pause_clicked",i)},revokePublicDashboardClicked:i=>{l("sharing_public_revoke_clicked",i)},emptyDashboardButtonClicked:i=>{o("emptydashboard_clicked",i)},toolbarAddButtonClicked:i=>{o("toolbar_add_clicked",i)},setScenesContext:()=>(s=!0,()=>{s=!1}),versionRestoreClicked:i=>{o("version_restore_clicked",i)},showMoreVersionsClicked:()=>{o("show_more_versions_clicked")},generateDashboardImageClicked:i=>{o("dashboard_image_generated",i)},downloadDashboardImageClicked:i=>{o("dashboard_image_downloaded",i)},copyImageUrlClicked:i=>{o("dashboard_image_url_copied",i)}},o=(i,c,p="dashboards")=>{const h=s?{scenesView:!0}:{},u=n.$.featureToggles?.dashboardNewLayouts??!1;c?(0,a.rR)(`${p}_${i}`,{...c,...h,isDynamicDashboard:u}):(0,a.rR)(`${p}_${i}`,{isDynamicDashboard:u})},l=(i,c)=>{const p=s?{scenesView:!0}:{};c?(0,a.rR)(`dashboards_${i}`,{...c,...p}):(0,a.rR)(`dashboards_${i}`)}},23390:(ne,j,e)=>{"use strict";e.d(j,{d:()=>u,pU:()=>r});var n=e(1932),a=e(2543),s=e.n(a),d=e(92745),o=e(70327),l=e(96137),i=e(29609),c=e(80218),p=e(75756),h=e(71639);function u(){const[E]=(0,h.D)(),[x]=o.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),m=(0,d.t)("alerting.rules.add-rule.success","Rule added successfully");return(0,c.Yb)(async(y,b,D)=>{const{namespaceName:f}=y,C=(0,l.Qn)({rule:b,interval:D,groupName:y.groupName}),{newRuleGroupDefinition:P,rulerConfig:T}=await E(y,[C]);return x({rulerConfig:T,namespace:f,payload:P,notificationOptions:{successMessage:m}}).unwrap()})}function r(){const[E]=(0,h.D)(),[x]=v(),[m]=o.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),y=(0,d.t)("alerting.rules.update-rule.success","Rule updated successfully");return(0,c.Yb)(async(b,D,f,C,P)=>{const{namespaceName:T}=b,M=g(D,f),I=(0,a.isEqual)(b,C);if(C&&!I)return x.execute(b,C,D,f,P);const B=(0,l.Wu)({identifier:D,rule:M}),{newRuleGroupDefinition:U,rulerConfig:W}=await E(b,[B]);return m({rulerConfig:W,namespace:T,payload:U,notificationOptions:{successMessage:y}}).unwrap()})}function v(){const[E]=(0,h.D)(),[x]=(0,p.Y)(),[m]=o.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),y=(0,d.t)("alerting.rules.update-rule.success","Rule updated successfully");return(0,c.Yb)(async(b,D,f,C,P)=>{const T=g(f,C),M=(0,l.Qn)({rule:T,interval:P}),{newRuleGroupDefinition:I,rulerConfig:B}=await E(D,[M]),U=await m({rulerConfig:B,namespace:D.namespaceName,payload:I,notificationOptions:{successMessage:y}}).unwrap();return(0,i.A4)(f)||await x.execute(b,f),U})}function g(E,x){const m=(0,i.A4)(E);return(0,n.jM)(x,y=>{const b=i.p.grafana.rule(y);m&&b&&(y.grafana_alert.uid=E.uid)})}},23414:(ne,j,e)=>{"use strict";e.d(j,{Zj:()=>m,pi:()=>p,zH:()=>x});var n=e(79243),a=e(55386),s=e(5421),d=e(80011),o=e(739),l=e(53568),i=e(62748),c=e(42073);const p=12,h=150,u=30,r=15,v=40,g=18,E=8;class x extends i.R{merge(P){this.props.size=(0,c.Y)("max",this.props.size,P.size),this.props.label||(this.props.label=P.label),this.props.placement===o.vM.Auto&&(this.props.placement=P.placement)}getConfig(){let{scaleKey:P,label:T,show:M=!0,placement:I=o.vM.Auto,grid:B={show:!0},ticks:U,space:W,filter:V,gap:z=5,formatValue:R,splits:O,values:N,incrs:F,isTime:G,timeZone:H,theme:K,tickLabelRotation:w,size:Q,color:k,border:te,decimals:q,distr:se=o.L4.Linear}=this.props;const re=`${p}px ${K.typography.fontFamily}`,Y=K.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,a.j9)(P)&&(O=[0,1]),q===0&&se===o.L4.Linear&&(V=(J,_)=>_.map(ee=>Number.isInteger(ee)?ee:null));let X={scale:P,show:M,stroke:k??K.colors.text.primary,side:f(I),font:re,size:Q??((J,_,ee)=>D(J,_,ee)),rotate:w,gap:z,labelGap:0,grid:{show:B.show,stroke:Y,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:te?.show?k??K.colors.text.primary:Y,width:1/devicePixelRatio,size:4},U),splits:O,values:N,space:W??((J,_,ee,ae,le)=>b(J,_,ee,ae,le,R)),filter:V,incrs:F};return te?.show&&(X.border={stroke:k??K.colors.text.primary,width:1/devicePixelRatio,...te}),T!=null&&T.length>0&&(X.label=T,X.labelSize=p+E,X.labelFont=re,X.labelGap=E),N?X.values=N:R?X.values=(J,_,ee,ae,le)=>{let L=(0,n.E)((0,n.h)(le,6));return _.map(ie=>ie==null?null:R(ie,L>0?L:void 0))}:G&&(X.values=y),X.timeZone=H,X}}const m={second:1e3,minute:60*1e3,hour:3600*1e3,day:1440*60*1e3,month:672*60*60*1e3,year:365*24*60*60*1e3};function y(C,P,T,M,I){const B=C.axes[T],U="timeZone"in B&&typeof B.timeZone=="string"?B.timeZone:void 0,W=C.scales.x,V=(W?.max??0)-(W?.min??0),z=Math.round(m.year/m.day)*m.day,R=Math.round(I/m.day)*m.day;let O=s.WC.interval.year;return I<m.second?O=s.WC.interval.millisecond:I<=m.minute?O=s.WC.interval.second:V<=m.day?O=s.WC.interval.minute:I<=m.day?O=s.WC.interval.hour:V<m.year?O=s.WC.interval.day:R===z?O=s.WC.interval.year:I<=m.year&&(O=s.WC.interval.month),P.map(N=>N==null?"":(0,d.LE)(N,{format:O,timeZone:U}))}function b(C,P,T,M,I,B){const U=C.axes[P],W=C.scales[U.scale];if(U.side!==2||!W)return I<=h?r:u;const V=I/v,z=(M-T)/V,R=Math.max(Math.abs(T),Math.abs(M));let O="";if(W.time)O=y(C,[R],P,v,z)[0];else if(B!=null)O=B(R);else return v;return(0,l.kD)(O,p).width+g}function D(C,P,T){const M=C.axes[T];let I=M.ticks.size;if(M.side===2)I+=M.gap+p;else if(P?.length){let B=P.reduce((W,V)=>Math.max(W,(0,l.kD)(V,p).width),0);const U=Math.min(C.width*.4,B);I+=M.gap+M.labelGap+U}return Math.ceil(I)}function f(C){switch(C){case o.vM.Top:return 0;case o.vM.Right:return 1;case o.vM.Bottom:return 2;case o.vM.Left:}return 3}},23656:(ne,j,e)=>{"use strict";e.d(j,{L:()=>is});var n=e(2543),a=e(92745),s=e(36490),d=e(43173),o=e(44248),l=e(68373),i=e(77731),c=e(30124),p=e(33143),h=e(3204),u=e(17862),r=e(29700),v=e(93389),g=e(3688),E=e(70030),x=e(92119);class m extends o.Bs{constructor($t){super({source:$t.source,data:$t.source.resolve().state.data}),this.addActivationHandler(()=>{this._subs.add(this.state.source.resolve().subscribeToState((zt,kt)=>{zt.data!==kt.data&&this.setState({data:zt.data})}))})}setContainerWidth($t){this.state.source.resolve().setContainerWidth?.($t)}isDataReadyToDisplay(){return this.state.source.resolve().isDataReadyToDisplay?.()??!0}cancelQuery(){this.state.source.resolve().cancelQuery?.()}getResultsStream(){return this.state.source.resolve().getResultsStream()}}var y=e(74848),b=e(22803),D=e(51898),f=e(63142),C=e(54314),P=e(92807),T=e(13941),M=e(32881),I=e(65642),B=e(73427),U=e(54),W=e(52161),V=e(34999),z=e(6975),R=e(60208),O=e(22971),N=e(21764),F=e(77256),G=e(54148),H=e(16817),K=e(5556),w=e(25992),Q=e(45861),k=e(74268),te=e(20437);const q=({panel:Bt,className:$t})=>{const zt=(0,G.zy)(),{loading:kt,value:mn}=(0,H.A)(()=>(0,te.J6)(Bt),[Bt]);if(kt)return(0,y.jsx)(Q.$n,{disabled:!0,children:(0,y.jsx)(a.x6,{i18nKey:"dashboard-scene.scenes-new-rule-from-panel-button.new-alert-rule",children:"New alert rule"})});if(!mn)return(0,y.jsx)(V.F,{severity:"info",title:(0,a.t)("dashboard-scene.scenes-new-rule-from-panel-button.title-no-alerting-capable-query-found","No alerting capable query found"),children:(0,y.jsx)(a.x6,{i18nKey:"dashboard-scene.scenes-new-rule-from-panel-button.body-no-alerting-capable-query-found",children:"Cannot create alerts from this panel because no query to an alerting capable datasource is found."})});const on=async()=>{(0,w.fH)(k.le.alertRuleFromPanel);const Ln=await(0,te.J6)(Bt),Hn=K.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(Ln),returnTo:zt.pathname+zt.search});s.Ny.push(Hn)};return(0,y.jsx)(Q.$n,{icon:"bell",onClick:on,className:$t,"data-testid":"create-alert-rule-button",children:(0,y.jsx)(a.x6,{i18nKey:"dashboard-scene.scenes-new-rule-from-panel-button.new-alert-rule",children:"New alert rule"})})};var se=(Bt=>(Bt.Queries="queries",Bt.Transformations="transformations",Bt.Alert="alert",Bt))(se||{});class re extends o.Bs{constructor(){super(...arguments),this.tabId=se.Alert}static{this.Component=Y}renderTab($t){return(0,y.jsx)(J,{model:this,...$t},this.getTabLabel())}getTabLabel(){return(0,a.t)("dashboard-scene.panel-data-alerting-tab.tab-label","Alert")}getDashboardUID(){return this.getDashboard().state.uid}getDashboard(){return(0,x.YQ)(this)}getLegacyPanelId(){return(0,x.Cs)(this.state.panelRef.resolve())}getCanCreateRules(){const $t=(0,U.Wd)("grafana");return d.$.unifiedAlerting&&this.getDashboard().state.meta.canSave&&B.TP.hasPermission($t.create)}}function Y({model:Bt}){const $t=(0,f.of)(X),{errors:zt,loading:kt,rules:mn}=(0,N.S)({dashboardUID:Bt.getDashboardUID(),panelId:Bt.getLegacyPanelId()}),on=zt.length?(0,y.jsx)(V.F,{title:(0,a.t)("dashboard-scene.panel-data-alerting-tab-rendered.alert.title-errors-loading-rules","Errors loading rules"),severity:"error",children:zt.map((gn,Zn)=>(0,y.jsx)("div",{children:(0,y.jsxs)(a.x6,{i18nKey:"dashboard-scene.panel-data-alerting-tab-rendered.error-failed-to-load",values:{errorToDisplay:(0,F.JZ)(gn)},children:["Failed to load Grafana rules state: ","{{errorToDisplay}}"]})},Zn))}):null;if(kt&&!mn.length)return(0,y.jsxs)(y.Fragment,{children:[on,(0,y.jsx)(z._,{text:(0,a.t)("dashboard-scene.panel-data-alerting-tab-rendered.text-loading-rules","Loading rules...")})]});const Ln=Bt.state.panelRef.resolve(),Hn=Bt.getCanCreateRules();if(mn.length)return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(O.sF,{rules:mn}),Hn&&(0,y.jsx)(q,{className:$t.newButton,panel:Ln})]});const Tn=!Bt.getDashboardUID(),Nn=Bt.getDashboard();return(0,y.jsxs)("div",{className:$t.noRulesWrapper,children:[!Tn&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:(0,y.jsx)(a.x6,{i18nKey:"dashboard.panel-edit.alerting-tab.no-rules",children:"There are no alert rules linked to this panel."})}),Hn&&(0,y.jsx)(q,{panel:Ln})]}),Tn&&!!Nn.state.meta.canSave&&(0,y.jsx)(V.F,{severity:"info",title:(0,a.t)("dashboard-scene.panel-data-alerting-tab-rendered.title-dashboard-not-saved","Dashboard not saved"),children:(0,y.jsx)(a.x6,{i18nKey:"dashboard.panel-edit.alerting-tab.dashboard-not-saved",children:"Dashboard must be saved before alerts can be added."})})]})}const X=Bt=>({newButton:(0,b.css)({marginTop:Bt.spacing(3)}),noRulesWrapper:(0,b.css)({margin:Bt.spacing(2),backgroundColor:Bt.colors.background.secondary,padding:Bt.spacing(3)})});function J(Bt){const{model:$t}=Bt,{rules:zt}=(0,N.S)({dashboardUID:$t.getDashboardUID(),panelId:$t.getLegacyPanelId(),poll:!1});return(0,y.jsx)(R.o,{label:$t.getTabLabel(),icon:"bell",counter:zt.length,active:Bt.active,onChangeTab:Bt.onChangeTab})}var _=e(48480),ee=e(1906),ae=e(78282),le=e(41654),L=e(1404),ie=e(7078),oe=e(29328),ue=e(52900),ye=e(82779),fe=e(26689),Ee=e(23117),Ae=e(65966),Ge=e(32154),Fe=e(57204),Pe=e(73601),Ve=e(18615),me=e(30419),Se=e(4651),Qe=e(28998),Ue=e(60249),Ie=e(23244),Re=e(22175);class Ke extends o.Bs{constructor($t){super($t),this.tabId=se.Queries,this.onOpenInspector=()=>{(0,x.YQ)(this).showModal(new Ue.C({panelRef:this.state.panelRef,currentTab:fe.q.Query}))},this.onChangeDataSource=async(zt,kt)=>{const{dsSettings:mn}=this.state,on=this.queryRunner,Ln=mn?await(0,ae.l)().get({uid:mn.uid}):void 0,Hn=await(0,ae.l)().get({uid:zt.uid}),Tn=on.state.queries,Nn=kt||await(0,Fe.y)(Hn,zt.uid,Tn,Ln);on.setState({datasource:(0,_.p$)(zt),queries:Nn}),kt&&on.runQueries(),this.loadDataSource()},this.onQueryOptionsChange=zt=>{const kt=this.state.panelRef.resolve(),mn=this.queryRunner,on={},Ln={};zt.maxDataPoints!==mn.state.maxDataPoints&&(on.maxDataPoints=zt.maxDataPoints??void 0),zt.minInterval!==mn.state.minInterval&&(on.minInterval=zt.minInterval??void 0);const Hn=zt.timeRange?.from??void 0,Tn=zt.timeRange?.shift??void 0,Nn=zt.timeRange?.hide;Hn!==void 0||Tn!==void 0?(Ln.$timeRange=new Ie.v({timeFrom:Hn,timeShift:Tn,hideTimeOverride:Nn}),Ln.hoverHeader=(0,Re.$7)(kt.state.title,Ln.$timeRange)):(Ln.$timeRange=void 0,Ln.hoverHeader=(0,Re.$7)(kt.state.title,void 0)),zt.cacheTimeout!==mn?.state.cacheTimeout&&(on.cacheTimeout=zt.cacheTimeout),zt.queryCachingTTL!==mn?.state.queryCachingTTL&&(on.queryCachingTTL=zt.queryCachingTTL),kt.setState(Ln),mn.setState(on),mn.runQueries()},this.onQueriesChange=zt=>{this.queryRunner.setState({queries:zt})},this.onRunQueries=()=>{this.queryRunner.runQueries()},this.addQueryClick=()=>{const zt=this.getQueries();this.onQueriesChange((0,L.U7)(zt,this.newQuery()))},this.onAddQuery=zt=>{const kt=this.getQueries(),mn=this.state.dsSettings;this.onQueriesChange((0,L.U7)(kt,zt,mn?(0,_.p$)(mn):{type:void 0,uid:void 0}))},this.onAddExpressionOfType=zt=>{const kt=this.getQueries(),on={...oe.Ex.newQuery(),type:zt},Ln=(0,ye.rV)(on);this.onQueriesChange((0,L.U7)(kt,Ln))},this.updateDatasourceIfNeeded=async zt=>{const{datasource:kt}=this.state;if(kt?.uid!==zt.uid){const on=(0,Qe.tR)().getInstanceSettings(zt);on&&await this.onChangeDataSource(on)}},this.addActivationHandler(()=>this.onActivate())}static{this.Component=Le}getTabLabel(){return(0,a.t)("dashboard-scene.panel-data-queries-tab.tab-label","Queries")}getItemsCount(){return this.getQueries().length}renderTab($t){return(0,y.jsx)(ze,{model:this,...$t},this.getTabLabel())}onActivate(){this.loadDataSource()}async loadDataSource(){if(!this.state.panelRef.resolve().state.$data)return;let kt=this.queryRunner.state.datasource;try{let mn,on;if(kt)mn=await(0,ae.l)().get(kt),on=(0,ae.l)().getInstanceSettings(kt);else{const Hn=(0,x.YQ)(this).state.uid??"",Tn=(0,i.CW)(Hn);Tn?.datasourceUid!==null&&(on=(0,ae.l)().getInstanceSettings({uid:Tn?.datasourceUid}),on&&(mn=await(0,ae.l)().get({uid:Tn?.datasourceUid,type:on.type}),this.queryRunner.setState({datasource:{...(0,_.p$)(on),uid:Tn?.datasourceUid}})))}mn&&on&&(this.setState({datasource:mn,dsSettings:on}),(0,ie.tw)((0,_.p$)(on)||{default:!0}))}catch(mn){const on=await(0,ae.l)().get(d.$.defaultDatasource),Ln=(0,ae.l)().getInstanceSettings(d.$.defaultDatasource);on&&Ln&&(this.setState({datasource:on,dsSettings:Ln}),this.queryRunner.setState({datasource:(0,_.p$)(Ln)})),console.error(mn)}}buildQueryOptions(){const $t=this.state.panelRef.resolve(),zt=(0,x.un)($t),kt=o.jh.getTimeRange($t);let mn={from:void 0,shift:void 0,hide:void 0};kt instanceof Ie.v&&(mn={from:kt.state.timeFrom,shift:kt.state.timeShift,hide:kt.state.hideTimeOverride});let on=zt.state.queries;const Ln=this.state.dsSettings;return{cacheTimeout:Ln?.meta.queryOptions?.cacheTimeout?zt.state.cacheTimeout:void 0,queryCachingTTL:Ln?.cachingConfig?.enabled?zt.state.queryCachingTTL:void 0,dataSource:{default:Ln?.isDefault,...Ln?(0,_.p$)(Ln):{type:void 0,uid:void 0}},queries:on,maxDataPoints:zt.state.maxDataPoints,minInterval:zt.state.minInterval,timeRange:mn}}getQueries(){return this.queryRunner.state.queries}newQuery(){const{dsSettings:$t,datasource:zt}=this.state;let kt;return $t?.meta.mixed?zt?.meta.mixed?kt=(0,ae.l)().getInstanceSettings(d.$.defaultDatasource):kt=zt:kt=$t,{...zt?.getDefaultQuery?.(ee.Jk.PanelEditor),datasource:{uid:kt?.uid,type:kt?.type}}}isExpressionsSupported($t){return($t.meta.backend||$t.meta.alerting||$t.meta.mixed)===!0}renderExtraActions(){return Ee.m.getAllExtraRenderAction().map(($t,zt)=>$t({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:zt})).filter(Boolean)}get queryRunner(){return(0,x.un)(this.state.panelRef.resolve())}}function Le({model:Bt}){const{datasource:$t,dsSettings:zt}=Bt.useState(),{data:kt,queries:mn}=Bt.queryRunner.useState(),{openDrawer:on,queryLibraryEnabled:Ln}=(0,me.Y)();if(!$t||!zt||!kt)return null;const Hn=!(0,Pe.k)(zt.name),Tn=async Nn=>{const gn=mn.map(kn=>kn.datasource?kn:{...kn,datasource:$t.getRef()}),Zn=(0,L.U7)(gn,Nn);if(Bt.onQueriesChange(Zn),Nn.datasource?.uid){const Wt={uid:new Set(Zn.map(Vt=>Vt.datasource?.uid).filter(Vt=>Vt!==Se.Uj)).size>1?Ve.uv:Nn.datasource.uid};await Bt.updateDatasourceIfNeeded(Wt)}};return(0,y.jsxs)("div",{"data-testid":D.Tp.components.QueryTab.content,children:[(0,y.jsx)(Ge.K,{data:kt,dsSettings:zt,dataSource:$t,options:Bt.buildQueryOptions(),onDataSourceChange:Bt.onChangeDataSource,onOptionsChange:Bt.onQueryOptionsChange,onOpenQueryInspector:Bt.onOpenInspector}),(0,y.jsx)(Ae.L,{data:kt,queries:mn,dsSettings:zt,onAddQuery:Bt.onAddQuery,onQueriesChange:Bt.onQueriesChange,onRunQueries:Bt.onRunQueries,onUpdateDatasources:Ln?Bt.updateDatasourceIfNeeded:void 0,app:ee.Jk.PanelEditor}),(0,y.jsxs)(le.B,{gap:2,children:[Hn&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Q.$n,{icon:"plus",onClick:Bt.addQueryClick,variant:"secondary","data-testid":D.Tp.components.QueryTab.addQuery,children:(0,y.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-data-queries-tab-rendered.add-query",children:"Add query"})}),Ln&&(0,y.jsx)(Q.$n,{icon:"plus",onClick:()=>on({onSelectQuery:Tn,options:{context:ee.Jk.PanelEditor}}),variant:"secondary","data-testid":D.Tp.components.QueryTab.addQueryFromLibrary,children:(0,y.jsx)(a.x6,{i18nKey:"dashboards.panel-queries.add-from-saved-queries",children:"Add from saved queries"})})]}),d.$.expressionsEnabled&&Bt.isExpressionsSupported(zt)&&(0,y.jsx)(ue.m,{handleOnSelect:Bt.onAddExpressionOfType,children:(0,y.jsx)(Q.$n,{icon:"plus",variant:"secondary","data-testid":D.Tp.components.QueryTab.addExpression,children:(0,y.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-data-queries-tab-rendered.expression",children:"Expression\xA0"})})}),Bt.renderExtraActions()]})]})}function ze(Bt){const{model:$t}=Bt,zt=$t.queryRunner.useState();return(0,y.jsx)(R.o,{label:$t.getTabLabel(),icon:"database",counter:zt.queries.length,active:Bt.active,onChangeTab:Bt.onChangeTab})}var Be=e(89332),$e=e(96540),Ye=e(93256),de=e(71599),ge=e(47350),pe=e(80849),De=e(8642),Me=e(76319),be=e(76808),Oe=e(34176);function Ne(Bt){const{isOpen:$t,series:zt,onClose:kt,onTransformationAdd:mn}=Bt,[on,Ln]=(0,$e.useState)({search:"",showIllustrations:!0}),Hn=it=>Ln({...on,search:it.currentTarget.value}),Tn=it=>Ln({...on,showIllustrations:it}),Nn=it=>Ln({...on,selectedFilter:it}),gn=(0,$e.useMemo)(()=>De.h.list().sort((it,Wt)=>it.name>Wt.name?1:Wt.name>it.name?-1:0),[]),Zn=gn.filter(it=>{if(on.selectedFilter&&on.selectedFilter!==Oe.e&&!it.categories?.has(on.selectedFilter))return!1;const Wt=on.search.toLocaleLowerCase(),Vt=it.name.toLocaleLowerCase().includes(Wt)||it.description?.toLocaleLowerCase().includes(Wt),nn=it.tags?.size?Array.from(it.tags).some(an=>an.toLocaleLowerCase().includes(Wt)):!1;return Vt||nn}),kn=(0,y.jsxs)(y.Fragment,{children:[Zn.length," / ",gn.length," \xA0\xA0",(0,y.jsx)(Me.K,{name:"times",onClick:()=>{Ln({...on,search:""})},tooltip:(0,a.t)("dashboard-scene.transformations-drawer.search-box-suffix.tooltip-clear-search","Clear search")})]});if($t)return(0,y.jsx)(be.R,{data:zt,onTransformationAdd:mn,xforms:Zn,search:on.search,noTransforms:!1,suffix:on.search!==""?kn:(0,y.jsx)(y.Fragment,{}),selectedFilter:on.selectedFilter,onSearchChange:Hn,onSearchKeyDown:()=>{},showIllustrations:on.showIllustrations,onShowIllustrationsChange:Tn,onSelectedFilterChange:Nn,onClose:kt})}class We extends o.Bs{constructor(){super(...arguments),this.tabId=se.Transformations}static{this.Component=qe}getTabLabel(){return(0,a.t)("dashboard-scene.panel-data-transformations-tab.tab-label","Transformations")}renderTab($t){return(0,y.jsx)(ot,{model:this,...$t},this.getTabLabel())}getQueryRunner(){return(0,x.un)(this.state.panelRef.resolve())}getDataTransformer(){const $t=this.state.panelRef.resolve().state.$data;if(!$t||!($t instanceof o.Es))throw new Error("Could not find SceneDataTransformer for panel");return $t}onChangeTransformations($t){const zt=this.getDataTransformer();zt.setState({transformations:$t}),zt.reprocessTransformations()}}function qe({model:Bt}){const $t=(0,f.of)(rt),zt=Bt.getQueryRunner().useState(),{data:kt,transformations:mn}=Bt.getDataTransformer().useState(),on=mn,[Ln,Hn]=(0,$e.useState)(!1),[Tn,Nn]=(0,$e.useState)(!1),gn=()=>Hn(!0),Zn=()=>Hn(!1);if(!kt||!zt.data)return;const kn=(0,y.jsx)(Ne,{onClose:Zn,onTransformationAdd:it=>{it.value!==void 0&&(Bt.onChangeTransformations([...on,{id:it.value,options:{}}]),Zn())},isOpen:Ln,series:kt.series});return on.length<1?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(pe.p,{onShowPicker:gn}),kn]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(st,{data:zt.data,transformations:on,model:Bt}),(0,y.jsxs)(Ye.e,{children:[(0,y.jsx)(Q.$n,{icon:"plus",variant:"secondary",onClick:gn,"data-testid":D.Tp.components.Transforms.addTransformationButton,children:(0,y.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-data-transformations-tab-rendered.add-another-transformation",children:"Add another transformation"})}),(0,y.jsx)(Q.$n,{"data-testid":D.Tp.components.Transforms.removeAllTransformationsButton,className:$t.removeAll,icon:"times",variant:"secondary",onClick:()=>Nn(!0),children:(0,y.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-data-transformations-tab-rendered.delete-all-transformations",children:"Delete all transformations"})})]}),(0,y.jsx)(de.u,{isOpen:Tn,title:(0,a.t)("dashboard-scene.panel-data-transformations-tab-rendered.title-delete-all-transformations","Delete all transformations?"),body:(0,a.t)("dashboard-scene.panel-data-transformations-tab-rendered.body-delete-all-transformations","By deleting all transformations, you will go back to the main selection screen."),confirmText:(0,a.t)("dashboard-scene.panel-data-transformations-tab-rendered.confirmText-delete-all","Delete all"),onConfirm:()=>{Bt.onChangeTransformations([]),Nn(!1)},onDismiss:()=>Nn(!1)}),kn]})}function st({transformations:Bt,model:$t,data:zt}){const kt=Bt.map((on,Ln)=>({id:`${Ln} - ${on.id}`,transformation:on})),mn=on=>{if(!on||!on.destination)return;const Ln=on.source.index,Hn=on.destination.index;if(Ln===Hn)return;const Tn=Array.from(kt),[Nn]=Tn.splice(Ln,1);Tn.splice(Hn,0,Nn),$t.onChangeTransformations(Tn.map(gn=>gn.transformation))};return(0,y.jsx)(Be.JY,{onDragEnd:mn,children:(0,y.jsx)(Be.gL,{droppableId:"transformations-list",direction:"vertical",children:on=>(0,y.jsxs)("div",{ref:on.innerRef,...on.droppableProps,children:[(0,y.jsx)(ge.A,{onChange:(Ln,Hn)=>{const Tn=Bt.slice();Tn[Ln]=Hn,$t.onChangeTransformations(Tn)},onRemove:Ln=>{const Hn=Bt.slice();Hn.splice(Ln,1),$t.onChangeTransformations(Hn)},configs:kt,data:zt}),on.placeholder]})})})}const rt=Bt=>({removeAll:(0,b.css)({marginLeft:Bt.spacing(2)})});function ot(Bt){const{model:$t}=Bt,zt=$t.getDataTransformer().useState();return(0,y.jsx)(R.o,{label:$t.getTabLabel(),icon:"process",counter:zt.transformations.length,active:Bt.active,onChangeTab:Bt.onChangeTab})}class mt extends o.Bs{constructor(){super(...arguments),this._urlSync=new o.So(this,{keys:["tab"]}),this.onChangeTab=$t=>{this.setState({tab:$t.tabId})}}static{this.Component=pt}static createFor($t){const zt=$t.getRef(),kt=[new Ke({panelRef:zt}),new We({panelRef:zt})];return ke($t.state.pluginId)&&kt.push(new re({panelRef:zt})),new mt({panelRef:zt,tabs:kt,tab:se.Queries})}getUrlState(){return{tab:this.state.tab}}updateFromUrl($t){$t.tab&&typeof $t.tab=="string"&&this.setState({tab:$t.tab})}}function pt({model:Bt}){const{tab:$t,tabs:zt}=Bt.useState(),kt=(0,f.of)(Ze);if(!zt||!zt.length)return;const mn=zt.find(on=>on.tabId===$t);return(0,y.jsxs)("div",{className:kt.dataPane,"data-testid":D.Tp.components.PanelEditor.DataPane.content,children:[(0,y.jsx)(C.U,{hideBorder:!0,className:kt.tabsBar,children:zt.map(on=>on.renderTab({active:on.tabId===$t,onChangeTab:()=>Bt.onChangeTab(on)}))}),(0,y.jsx)("div",{className:kt.tabBorder,children:(0,y.jsx)(P.P,{children:(0,y.jsx)(T.J,{className:kt.tabContent,children:(0,y.jsx)(M.mc,{children:mn&&(0,y.jsx)(mn.Component,{model:mn})})})})})]})}function ke(Bt){const{unifiedAlertingEnabled:$t=!1}=(0,I.zj)(),zt=B.TP.hasPermission((0,U.Wd)(W.hY).read);return $t&&zt?Bt==="graph"||Bt==="timeseries":!1}function Ze(Bt){return{dataPane:(0,b.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0,height:"100%",width:"100%"}),tabBorder:(0,b.css)({background:Bt.colors.background.primary,border:`1px solid ${Bt.colors.border.weak}`,borderLeft:"none",borderBottom:"none",borderTopRightRadius:Bt.shape.radius.default,flexGrow:1,overflow:"hidden"}),tabContent:(0,b.css)({padding:Bt.spacing(2),height:"100%"}),tabsBar:(0,b.css)({flexShrink:0,paddingLeft:Bt.spacing(2)})}}var nt=e(7895),ut=e(68079),gt=e(92415),ht=e(12161),tt=e(17732),Ot=e(82754),jt=e(49045);const wt="(max-height: 540px)";function Ht(){return(0,jt.A)(wt)}function hn({model:Bt}){const $t=(0,x.YQ)(Bt),{optionsPane:zt}=Bt.useState(),kt=(0,f.of)(xn),[mn,on]=(0,p.dt)(),Ln=Ht(),{containerProps:Hn,primaryProps:Tn,secondaryProps:Nn,splitterProps:gn,splitterState:Zn,onToggleCollapse:kn}=(0,Ot.L)({direction:"row",dragPosition:"end",initialSize:330,usePixels:!0,collapsed:mn,collapseBelowPixels:250,disabled:Ln});return(0,$e.useEffect)(()=>{on(Zn.collapsed)},[Zn.collapsed,on]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(gt.c,{dashboard:$t}),(0,y.jsxs)("div",{...Hn,className:(0,b.cx)(Hn.className,kt.content),"data-testid":D.Tp.components.PanelEditor.General.content,children:[(0,y.jsx)("div",{...Tn,className:(0,b.cx)(Tn.className,kt.body),children:(0,y.jsx)(Dn,{model:Bt})}),(0,y.jsx)("div",{...gn}),(0,y.jsxs)("div",{...Nn,className:(0,b.cx)(Nn.className,kt.optionsPane),children:[Zn.collapsed&&(0,y.jsx)("div",{className:kt.expandOptionsWrapper,children:(0,y.jsx)(nt.I,{tooltip:(0,a.t)("dashboard-scene.panel-editor-renderer.tooltip-open-options-pane","Open options pane"),icon:"arrow-to-right",onClick:kn,variant:"canvas",className:kt.rotate180,"aria-label":(0,a.t)("dashboard-scene.panel-editor-renderer.aria-label-open-options-pane","Open options pane")})}),!Zn.collapsed&&zt&&(0,y.jsx)(zt.Component,{model:zt}),!Zn.collapsed&&!zt&&(0,y.jsx)(ut.y,{})]})]})]})}function Dn({model:Bt}){const $t=(0,x.YQ)(Bt),{dataPane:zt,showLibraryPanelSaveModal:kt,showLibraryPanelUnlinkModal:mn,tableView:on}=Bt.useState(),Ln=Bt.getPanel(),Hn=(0,x.iL)(Ln),{controls:Tn}=$t.useState(),Nn=(0,f.of)(xn),gn=Ht(),{containerProps:Zn,primaryProps:kn,secondaryProps:it,splitterProps:Wt,splitterState:Vt,onToggleCollapse:nn}=(0,Ot.L)({direction:"column",dragPosition:"start",initialSize:.5,collapseBelowPixels:150,disabled:gn});return Zn.className=(0,b.cx)(Zn.className,Nn.container),!zt&&!gn&&(kn.style.flexGrow=1),(0,y.jsxs)("div",{className:(0,b.cx)(Nn.pageContainer,Tn&&Nn.pageContainerWithControls),children:[Tn&&(0,y.jsx)("div",{className:Nn.controlsWrapper,children:(0,y.jsx)(Tn.Component,{model:Tn})}),(0,y.jsxs)("div",{...Zn,children:[(0,y.jsx)("div",{...kn,className:(0,b.cx)(kn.className,gn&&Nn.fixedSizeViz),children:(0,y.jsx)(Bn,{panel:Ln,tableView:on})}),kt&&Hn&&(0,y.jsx)(tt.Z,{libraryPanel:Hn,onDismiss:Bt.onDismissLibraryPanelSaveModal,onConfirm:Bt.onConfirmSaveLibraryPanel,onDiscard:Bt.onDiscard}),mn&&Hn&&(0,y.jsx)(ht.l,{onDismiss:Bt.onDismissUnlinkLibraryPanelModal,onConfirm:Bt.onConfirmUnlinkLibraryPanel,isOpen:!0}),zt&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{...Wt}),(0,y.jsxs)("div",{...it,className:(0,b.cx)(it.className,gn&&Nn.fullSizeEditor),children:[Vt.collapsed&&(0,y.jsx)("div",{className:Nn.expandDataPane,children:(0,y.jsx)(Q.$n,{tooltip:(0,a.t)("dashboard-scene.viz-and-data-pane.tooltip-open-query-pane","Open query pane"),icon:"arrow-to-right",onClick:nn,variant:"secondary",size:"sm",className:Nn.openDataPaneButton,"aria-label":(0,a.t)("dashboard-scene.viz-and-data-pane.aria-label-open-query-pane","Open query pane")})}),!Vt.collapsed&&(0,y.jsx)(zt.Component,{model:zt})]})]})]})]})}function Bn({panel:Bt,tableView:$t}){const zt=(0,f.of)(xn),kt=$t??Bt;return(0,y.jsx)("div",{className:zt.vizWrapper,children:(0,y.jsx)(kt.Component,{model:kt})})}function xn(Bt){const $t="@media "+wt;return{pageContainer:(0,b.css)({display:"grid",gridTemplateAreas:`
        "panels"`,gridTemplateColumns:"1fr",gridTemplateRows:"1fr",height:"100%",[$t]:{gridTemplateColumns:"100%"}}),pageContainerWithControls:(0,b.css)({gridTemplateAreas:`
        "controls"
        "panels"`,gridTemplateRows:"auto 1fr"}),container:(0,b.css)({gridArea:"panels",height:"100%"}),canvasContent:(0,b.css)({label:"canvas-content",display:"flex",flexDirection:"column",flexBasis:"100%",flexGrow:1,minHeight:0,width:"100%"}),content:(0,b.css)({position:"absolute",width:"100%",height:"100%",overflow:"unset",[$t]:{height:"auto",display:"grid",gridTemplateColumns:"minmax(470px, 1fr) 330px",gridTemplateRows:"1fr",gap:Bt.spacing(1),position:"static",width:"100%"}}),body:(0,b.css)({label:"body",flexGrow:1,display:"flex",flexDirection:"column",minHeight:0}),optionsPane:(0,b.css)({flexDirection:"column",borderLeft:`1px solid ${Bt.colors.border.weak}`,background:Bt.colors.background.primary,marginTop:Bt.spacing(2),borderTop:`1px solid ${Bt.colors.border.weak}`,borderTopLeftRadius:Bt.shape.radius.default}),expandOptionsWrapper:(0,b.css)({display:"flex",flexDirection:"column",padding:Bt.spacing(2,1)}),expandDataPane:(0,b.css)({display:"flex",flexDirection:"row",padding:Bt.spacing(1),borderTop:`1px solid ${Bt.colors.border.weak}`,borderRight:`1px solid ${Bt.colors.border.weak}`,background:Bt.colors.background.primary,flexGrow:1,justifyContent:"space-around"}),rotate180:(0,b.css)({rotate:"180deg"}),controlsWrapper:(0,b.css)({display:"flex",flexDirection:"column",flexGrow:0,gridArea:"controls"}),openDataPaneButton:(0,b.css)({width:Bt.spacing(8),justifyContent:"center",svg:{rotate:"-90deg"}}),vizWrapper:(0,b.css)({height:"100%",width:"100%",paddingLeft:Bt.spacing(2)}),fixedSizeViz:(0,b.css)({height:"100vh"}),fullSizeEditor:(0,b.css)({height:"max-content"})}}var ft=e(42941),St=e(69168),Tt=e(27489),Je=e(37386),Pt=e(12737),Yt=e(41097),Lt=e(52193),fn=e(25531),En=e(56424),An=e(7094);const Gn=$e.memo(({panel:Bt,searchQuery:$t,listMode:zt,data:kt})=>{const{options:mn,fieldConfig:on,_pluginInstanceState:Ln}=Bt.useState(),Hn=(0,$e.useMemo)(()=>(0,Re.yH)(Bt),[Bt]),Tn=(0,$e.useMemo)(()=>{const it=Bt.getPlugin();if(it)return(0,En.Z4)({panel:Bt,data:kt,plugin:it,eventBus:Bt.getPanelContext().eventBus,instanceState:Ln})},[kt,Bt,mn,on,Ln]),Nn=(0,$e.useMemo)(()=>{if(Bt instanceof o.Eb&&(0,x.ME)(Bt)){const it=(0,x.iL)(Bt);return it instanceof An.u?(0,En.tN)(it):void 0}},[Bt]),gn=(0,$e.useMemo)(()=>(0,fn.v)(on,Bt.getPlugin()?.fieldConfigRegistry,kt?.series??[],$t,it=>{Bt.onFieldConfigChange(it,!0)}),[kt,$t,Bt,on]),Zn=$t.length>0,kn=[];if(Zn)kn.push((0,l.Po)([Hn,...Nn?[Nn]:[],...Tn??[]],gn,$t));else switch(zt){case l.gs.All:Nn&&kn.push(Nn.render()),kn.push(Hn.render());for(const it of Tn??[])kn.push(it.render());for(const it of gn)kn.push(it.render());break;case l.gs.Overrides:for(const it of gn)kn.push(it.render());default:break}return kn});Gn.displayName="PanelOptions";var zn=e(78685),sa=e(77824),ta=e(95943),ra=e(62667),ea=e(82472),Un=e(72165),oa=e(33380);const Ca="dashboards_panel_plugin_picker_clicked",ya={TOGGLE_DROPDOWN:"toggle_panel_plugin_picker",SELECT_PANEL_PLUGIN:"select_panel_plugin",CHANGE_TAB:"change_tab",SEARCH:"search"};function Xa({panel:Bt,data:$t,onChange:zt,onClose:kt}){const mn=(0,f.of)(Ta),[on,Ln]=(0,$e.useState)(""),Hn=(0,$e.useMemo)(()=>(0,n.debounce)((an,Rn)=>{an&&(0,Tt.rR)(Ca,{item:ya.SEARCH,query:an,result_count:Rn,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"})},300),[]),Tn=an=>{Ln(an)},Nn=ta.wV,gn=ra.__.Visualizations,Zn=(0,$e.useMemo)(()=>new oa.R(Bt),[Bt]),kn=(0,$e.useMemo)(()=>new Set([ra.__.Visualizations,ra.__.Suggestions]),[]),[it,Wt]=(0,zn.A)(Nn,gn),Vt=an=>{(0,Tt.rR)(Ca,{item:ya.CHANGE_TAB,tab:ra.__[an],creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"}),Wt(an)};(0,$e.useEffect)(()=>{it&&!kn.has(it)&&Wt(gn)},[gn,it,Wt,kn]);const nn=[{label:(0,a.t)("dashboard-scene.panel-viz-type-picker.radio-options.label.visualizations","Visualizations"),value:ra.__.Visualizations},{label:(0,a.t)("dashboard-scene.panel-viz-type-picker.radio-options.label.suggestions","Suggestions"),value:ra.__.Suggestions}];return(0,y.jsxs)("div",{className:mn.wrapper,children:[(0,y.jsxs)("div",{className:mn.searchRow,children:[(0,y.jsx)(Pt.Z,{className:mn.filter,value:on,onChange:Tn,autoFocus:!0,placeholder:(0,a.t)("dashboard-scene.panel-viz-type-picker.placeholder-search-for","Search for...")}),(0,y.jsx)(Q.$n,{"aria-label":(0,a.t)("dashboard-scene.panel-viz-type-picker.title-close","Close"),variant:"secondary",icon:"angle-up",className:mn.closeButton,"data-testid":D.Tp.components.PanelEditor.toggleVizPicker,onClick:kt})]}),(0,y.jsx)(Je.D,{className:mn.customFieldMargin,children:(0,y.jsx)(sa.z,{options:nn,value:it,onChange:Vt,fullWidth:!0})}),(0,y.jsxs)(P.P,{children:[it===ra.__.Visualizations&&(0,y.jsx)(Un.G,{pluginId:Bt.state.pluginId,searchQuery:on,trackSearch:Hn,onChange:zt}),it===ra.__.Suggestions&&(0,y.jsx)(ea.a,{onChange:zt,trackSearch:Hn,searchQuery:on,panel:Zn,data:$t})]})]})}const Ta=Bt=>({wrapper:(0,b.css)({display:"flex",flexDirection:"column",flexGrow:1,padding:Bt.spacing(2,1),height:"100%",gap:Bt.spacing(2),border:`1px solid ${Bt.colors.border.weak}`,borderRight:"none",borderBottom:"none",borderTopLeftRadius:Bt.shape.radius.default}),searchRow:(0,b.css)({display:"flex",marginBottom:Bt.spacing(1)}),closeButton:(0,b.css)({marginLeft:Bt.spacing(1)}),customFieldMargin:(0,b.css)({marginBottom:Bt.spacing(1)}),filter:(0,b.css)({minHeight:Bt.spacing(4)})});class Pa extends o.Bs{constructor(){super(...arguments),this._cachedPluginOptions={},this.onToggleVizPicker=()=>{(0,Tt.rR)(Ca,{item:ya.TOGGLE_DROPDOWN,open:!this.state.isVizPickerOpen}),this.setState({isVizPickerOpen:!this.state.isVizPickerOpen})},this.onChangePanelPlugin=$t=>{const zt=this.state.panelRef.resolve(),{options:kt,fieldConfig:mn,pluginId:on}=zt.state,Ln=$t.pluginId;(0,Tt.rR)(Ca,{item:ya.SELECT_PANEL_PLUGIN,plugin_id:Ln});let Hn={defaults:{...mn.defaults,custom:{}},overrides:(0,St.aW)(mn.overrides,St.nx)};this._cachedPluginOptions[on]={options:kt,fieldConfig:mn};const Tn=this._cachedPluginOptions[Ln]?.options,Nn=this._cachedPluginOptions[Ln]?.fieldConfig;if(Nn&&(Hn=(0,St.H9)(Hn,Nn)),zt.changePluginType(Ln,Tn,Hn),$t.options&&zt.onOptionsChange($t.options,!0),$t.fieldConfig){const gn={...$t.fieldConfig,overrides:Hn.overrides};zt.onFieldConfigChange(gn,!0)}this.onToggleVizPicker()},this.onSetSearchQuery=$t=>{this.setState({searchQuery:$t})},this.onSetListMode=$t=>{this.setState({listMode:$t})},this.onOpenPanelJSON=$t=>{s.Ny.partial({inspect:$t.state.key,inspectTab:"json"})}}getOptionRadioFilters(){return[{label:l.gs.All,value:l.gs.All},{label:l.gs.Overrides,value:l.gs.Overrides}]}static{this.Component=pa}}function pa({model:Bt}){const{isVizPickerOpen:$t,searchQuery:zt,listMode:kt,panelRef:mn}=Bt.useState(),on=mn.resolve(),{pluginId:Ln}=on.useState(),{data:Hn}=o.jh.getData(on).useState(),Tn=(0,f.of)(Ua),gn=!(zt.length>0)&&!on.getPlugin()?.fieldConfigRegistry.isEmpty(),[Zn,kn]=(0,ft.A)(!1),it=kt===l.gs.Overrides,Wt=Ht();return(0,y.jsxs)(y.Fragment,{children:[!$t&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:Tn.top,children:[(0,y.jsx)(Je.D,{label:(0,a.t)("dashboard.panel-edit.visualization-button-label","Visualization"),noMargin:!0,children:(0,y.jsxs)(le.B,{gap:1,children:[(0,y.jsx)(ma,{pluginId:Ln,onOpen:Bt.onToggleVizPicker}),(0,y.jsx)(Q.$n,{icon:"search",variant:"secondary",onClick:kn,tooltip:(0,a.t)("dashboard.panel-edit.visualization-button-tooltip","Search options")}),gn&&(0,y.jsx)(nt.I,{icon:"filter",tooltip:(0,a.t)("dashboard.panel-edit.only-overrides-button-tooltip","Show only overrides"),variant:it?"active":"canvas",onClick:()=>{Bt.onSetListMode(it?l.gs.All:l.gs.Overrides)}})]})}),Zn&&(0,y.jsx)(Pt.Z,{className:Tn.searchOptions,value:zt,placeholder:(0,a.t)("dashboard.panel-edit.placeholder-search-options","Search options"),onChange:Bt.onSetSearchQuery,autoFocus:!0,onBlur:()=>{zt.length===0&&kn(!1)}})]}),(0,y.jsx)(P.P,{minHeight:Wt?"max-content":0,children:(0,y.jsx)(Gn,{panel:on,searchQuery:zt,listMode:kt,data:Hn})})]}),$t&&(0,y.jsx)(Xa,{panel:on,onChange:Bt.onChangePanelPlugin,onClose:Bt.onToggleVizPicker,data:Hn})]})}function Ua(Bt){return{top:(0,b.css)({display:"flex",flexDirection:"column",padding:Bt.spacing(1,2,2,2),gap:Bt.spacing(2)}),searchOptions:(0,b.css)({minHeight:Bt.spacing(4)}),searchWrapper:(0,b.css)({padding:Bt.spacing(2,2,2,0)}),rotateIcon:(0,b.css)({rotate:"180deg"})}}function ma({pluginId:Bt,onOpen:$t}){const zt=(0,f.of)(Ka);let kt=(0,$e.useMemo)(()=>(0,Lt.A4)().filter(mn=>mn.id===Bt)[0],[Bt]);return kt||(kt=(0,Yt.$)(`Panel plugin not found (${Bt})`,!0).meta),(0,y.jsx)(nt.I,{className:zt.vizButton,tooltip:(0,a.t)("dashboard-scene.visualization-button.tooltip-click-to-change-visualization","Click to change visualization"),imgSrc:kt.info.logos.small,onClick:$t,"data-testid":D.Tp.components.PanelEditor.toggleVizPicker,"aria-label":(0,a.t)("dashboard-scene.visualization-button.aria-label-change-visualization","Change visualization"),variant:"canvas",isOpen:!1,fullWidth:!0,children:kt.name})}function Ka(Bt){return{vizButton:(0,b.css)({textAlign:"left"})}}class Oa extends o.Bs{constructor($t){super($t),this._changesHaveBeenMade=!1,this.debounceSaveModelDiff=!0,this.onDiscard=()=>{this.setState({isDirty:!1});const mn=this.state.panelRef.resolve();this.state.isNewPanel?(0,x.YQ)(this).removePanel(mn):this._layoutItem.setState(this._layoutItemState),s.Ny.partial({editPanel:null})},this.onSaveLibraryPanel=()=>{this.setState({showLibraryPanelSaveModal:!0})},this.onConfirmSaveLibraryPanel=()=>{(0,c.DW)(this.state.panelRef.resolve()),this.setState({isDirty:!1}),s.Ny.partial({editPanel:null})},this.onDismissLibraryPanelSaveModal=()=>{this.setState({showLibraryPanelSaveModal:!1})},this.onUnlinkLibraryPanel=()=>{this.setState({showLibraryPanelUnlinkModal:!0})},this.onDismissUnlinkLibraryPanelModal=()=>{this.setState({showLibraryPanelUnlinkModal:!1})},this.onConfirmUnlinkLibraryPanel=()=>{const mn=(0,x.iL)(this.getPanel());mn&&(mn.unlink(),this.setState({showLibraryPanelUnlinkModal:!1}))},this.onToggleTableView=()=>{if(this.state.tableView){this.setState({tableView:void 0});return}const on=this.state.panelRef.resolve().state.$data;on&&this.setState({tableView:o.d0.table().setTitle("").setOption("showTypeIcons",!0).setOption("showHeader",!0).setData(new m({source:on.getRef()})).build()})};const kt=this.state.panelRef.resolve().parent;if(!kt||!(0,g.y)(kt))throw new Error("Panel must have a parent of type DashboardLayoutItem");this._layoutItem=kt,this.setOriginalState(this.state.panelRef),this.addActivationHandler(this._activationHandler.bind(this))}static{this.Component=hn}_activationHandler(){const $t=this.state.panelRef.resolve();$t.state.pluginId===r.r&&$t.changePluginType("timeseries"),this._subs.add(this._layoutItem.subscribeToEvent(p.BF,({payload:mn})=>{mn.perform()}));const zt=(0,x.sf)($t),kt=$t.state.headerActions;return kt&&(Array.isArray(kt)?kt:[kt]).forEach(mn=>{(0,o.mY)(mn)&&mn.activate()}),this.waitForPlugin(),()=>{this.commitChanges(),zt&&zt()}}commitChanges(){if(!this.state.isDirty&&!this._changesHaveBeenMade)return;const $t=this._layoutItem,zt=$t.state,kt=this._layoutItemState;if(this._layoutItem instanceof v.U&&!d.$.featureToggles.dashboardNewLayouts){this._layoutItem.handleEditChange();return}const mn=new p.BF({description:(0,a.t)("dashboard.edit-actions.panel-edit","Panel changes"),source:this._layoutItem,perform:()=>{$t.state!==zt&&$t.setState(zt)},undo:()=>$t.setState(kt)});(0,x.YQ)(this).state.editPane.setPanelEditAction(mn)}waitForPlugin($t=0){const zt=this.getPanel(),kt=zt.getPlugin();if(!kt||kt.meta.id!==zt.state.pluginId){$t<100?setTimeout(()=>this.waitForPlugin($t+1),$t*10):this.setState({pluginLoadErrror:"Failed to load panel plugin"});return}this.gotPanelPlugin(kt)}setOriginalState($t){const zt=$t.resolve();this._originalSaveModel=(0,E.Z6)(zt),this._layoutItemState=o.Go.cloneSceneObjectState(this._layoutItem.state)}_setupChangeDetection(){const $t=this.state.panelRef.resolve(),zt=()=>{const{hasChanges:on}=(0,u.yO)(this._originalSaveModel,(0,E.Z6)($t));this.setState({isDirty:on})},kt=this.debounceSaveModelDiff?(0,n.debounce)(zt,250):zt,mn=on=>{h.l.isUpdatingPersistedState(on)&&kt()};this._subs.add(this._layoutItem.subscribeToEvent(o.bZ,mn))}getPanel(){return this.state.panelRef?.resolve()}gotPanelPlugin($t){const zt=this.getPanel();this.state.isInitializing?(this.setOriginalState(this.state.panelRef),this._setupChangeDetection(),this._updateDataPane($t),this._subs.add(zt.subscribeToState((kt,mn)=>{kt.pluginId!==mn.pluginId&&this.waitForPlugin()})),this.setState({optionsPane:new Pa({panelRef:this.state.panelRef,searchQuery:"",listMode:l.gs.All}),isInitializing:!1})):this._updateDataPane($t)}_updateDataPane($t){const zt=$t.meta.skipDataQuery,kt=this.state.panelRef.resolve();if(zt&&(this.state.dataPane&&(s.Ny.partial({tab:null},!0),this.setState({dataPane:void 0})),kt.state.$data&&kt.setState({$data:void 0})),!zt){if(!this.state.dataPane){const mn=mt.createFor(this.getPanel());this.setState({dataPane:mn}),this.publishEvent(new o.sU(mn),!0)}if(!kt.state.$data){let mn=(0,i.CW)((0,x.YQ)(this).state.uid)?.datasourceUid;mn||(mn=d.$.defaultDatasource),kt.setState({$data:new o.Es({$data:new o.dt({datasource:{uid:mn},queries:[{refId:"A"}]}),transformations:[]})})}}}getUrlKey(){return this.getPanelId().toString()}getPanelId(){return(0,x.Cs)(this.state.panelRef.resolve())}getPageNav($t,zt){const kt=(0,x.YQ)(this);return{text:(0,a.t)("dashboard-scene.panel-editor.text.edit-panel","Edit panel"),parentItem:kt.getPageNav($t,zt)}}dashboardSaved(){this.setOriginalState(this.state.panelRef),this.setState({isDirty:!1}),this._changesHaveBeenMade=!0}}function is(Bt,$t=!1){return new Oa({isInitializing:!0,panelRef:Bt.getRef(),isNewPanel:$t})}},23659:(ne,j,e)=>{"use strict";e.d(j,{L:()=>i});var n=e(74848),a=e(2543),s=e.n(a),d=e(92745),o=e(45861),l=e(94959);const i=({label:c="Password",labelWidth:p,inputWidth:h=12,onReset:u,isConfigured:r,tooltip:v,placeholder:g="Password",interactive:E,...x})=>(0,n.jsx)(l.z,{label:c,tooltip:v,interactive:E,labelWidth:p,inputEl:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",className:`gf-form-input width-${h}`,disabled:!0,value:"configured",...(0,a.omit)(x,"value")}),(0,n.jsx)(o.$n,{onClick:u,variant:"secondary",type:"button",children:(0,n.jsx)(d.x6,{i18nKey:"grafana-ui.secret-form-field.reset",children:"Reset"})})]}):(0,n.jsx)("input",{type:"password",className:`gf-form-input width-${h}`,placeholder:g,...x})});i.displayName="SecretFormField"},23675:(ne,j,e)=>{"use strict";e.d(j,{d:()=>l});var n=e(74848),a=e(51898),s=e(92745),d=e(32442),o=e(49602);function l({onChange:i,constantValue:c}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.constant-variable-form.constant-options",children:"Constant options"})}),(0,n.jsx)(o._,{defaultValue:c,name:"Value",placeholder:(0,s.t)("dashboard-scene.constant-variable-form.placeholder-your-metric-prefix","Your metric prefix"),onBlur:i,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30})]})}},24158:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{SilencesEditor:()=>Ee,default:()=>Fe});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(49785),l=e(54148),i=e(40996),c=e(74529),p=e(25229),h=e(92745),u=e(68143),r=e(36490),v=e(6975),g=e(34999),E=e(63142),x=e(16780),m=e(37386),y=e(63527),b=e(87105),D=e(41654),f=e(45861),C=e(62421),P=e(95443),T=e(52161),M=e(84266),I=e(15130),B=e(16692),U=e(5358),W=e(24610),V=e(77256),z=e(88547),R=e(36826),O=e(35526),N=e(3271),F=e(18857),G=e(76319),H=e(70327);const K=({className:Pe,required:Ve,ruleUid:me})=>{const Se=(0,E.of)(w),Qe=(0,o.xW)(),{control:Ue,register:Ie,formState:{errors:Re}}=Qe,{fields:Ke=[],append:Le,remove:ze}=(0,o.jz)({name:"matchers"}),[Be,{data:$e}]=H.hK.endpoints.getAlertRule.useLazyQuery();return(0,d.useEffect)(()=>{me&&Be({uid:me})},[Be,me]),(0,n.jsx)("div",{className:Pe,children:(0,n.jsx)(m.D,{label:(0,h.t)("alerting.matchers-field.label-refine-affected-alerts","Refine affected alerts"),required:Ve,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:(0,a.cx)(Se.matchers,Se.indent),children:[$e&&(0,n.jsxs)("div",{children:[(0,n.jsx)(m.D,{label:(0,h.t)("alerting.matchers-field.label-alert-rule","Alert rule"),disabled:!0,children:(0,n.jsx)(y.p,{id:"alert-rule-name",defaultValue:$e.grafana_alert.title,disabled:!0})}),(0,n.jsx)(N.c,{})]}),Ke.map((Ye,de)=>(0,n.jsxs)("div",{className:Se.row,"data-testid":"matcher",children:[(0,n.jsx)(m.D,{label:(0,h.t)("alerting.matchers-field.label-label","Label"),invalid:!!Re?.matchers?.[de]?.name,error:Re?.matchers?.[de]?.name?.message,children:(0,n.jsx)(y.p,{...Ie(`matchers.${de}.name`,{required:{value:Ve,message:(0,h.t)("alerting.matchers-field.message.required","Required.")}}),defaultValue:Ye.name,placeholder:(0,h.t)("alerting.matchers-field.placeholder-label","label"),id:`matcher-${de}-label`})}),(0,n.jsx)(m.D,{label:(0,h.t)("alerting.matchers-field.label-operator","Operator"),children:(0,n.jsx)(o.xI,{control:Ue,render:({field:{onChange:ge,ref:pe,...De}})=>(0,n.jsx)(F.l6,{...De,onChange:Me=>ge(Me.value),className:Se.matcherOptions,options:W.xH,"aria-label":(0,h.t)("alerting.matchers-field.aria-label-operator","operator"),id:`matcher-${de}-operator`}),defaultValue:Ye.operator||W.xH[0].value,name:`matchers.${de}.operator`,rules:{required:{value:Ve,message:(0,h.t)("alerting.matchers-field.message.required","Required.")}}})}),(0,n.jsx)(m.D,{label:(0,h.t)("alerting.matchers-field.label-value","Value"),invalid:!!Re?.matchers?.[de]?.value,error:Re?.matchers?.[de]?.value?.message,children:(0,n.jsx)(y.p,{...Ie(`matchers.${de}.value`,{required:{value:Ve,message:(0,h.t)("alerting.matchers-field.message.required","Required.")}}),defaultValue:Ye.value,placeholder:(0,h.t)("alerting.matchers-field.placeholder-value","value"),id:`matcher-${de}-value`})}),(Ke.length>1||!Ve)&&(0,n.jsx)(G.K,{"aria-label":(0,h.t)("alerting.matchers-field.aria-label-remove-matcher","Remove matcher"),className:Se.removeButton,name:"trash-alt",onClick:()=>ze(de),children:(0,n.jsx)(h.x6,{i18nKey:"alerting.matchers-field.remove",children:"Remove"})})]},`${Ye.id}`))]}),(0,n.jsx)(f.$n,{className:Se.indent,tooltip:(0,h.t)("alerting.matchers-field.tooltip-refine-which-alert-instances-silenced-selecting","Refine which alert instances are silenced by selecting label matchers"),type:"button",icon:"plus",variant:"secondary",onClick:()=>{const Ye={name:"",value:"",operator:M.ho.equal};Le(Ye)},children:(0,n.jsx)(h.x6,{i18nKey:"alerting.matchers-field.add-matcher",children:"Add matcher"})})]})})})},w=Pe=>({wrapper:(0,a.css)({marginTop:Pe.spacing(2)}),row:(0,a.css)({marginTop:Pe.spacing(1),display:"flex",alignItems:"flex-start",flexDirection:"row",backgroundColor:Pe.colors.background.secondary,padding:`${Pe.spacing(1)} ${Pe.spacing(1)} 0 ${Pe.spacing(1)}`,"& > * + *":{marginLeft:Pe.spacing(2)}}),removeButton:(0,a.css)({marginLeft:Pe.spacing(1),marginTop:Pe.spacing(2.5)}),matcherOptions:(0,a.css)({minWidth:"140px"}),matchers:(0,a.css)({maxWidth:`${Pe.breakpoints.values.sm}px`,margin:`${Pe.spacing(1)} 0`,paddingTop:Pe.spacing(.5)}),indent:(0,a.css)({marginLeft:Pe.spacing(2)})}),Q=K;var k=e(56265);const te=()=>{const{control:Pe,getValues:Ve}=(0,o.xW)(),{field:{onChange:me,value:Se},fieldState:{invalid:Qe}}=(0,o.as)({name:"startsAt",control:Pe,rules:{validate:Ye=>Ve().endsAt>Ye}}),{field:{onChange:Ue,value:Ie},fieldState:{invalid:Re}}=(0,o.as)({name:"endsAt",control:Pe,rules:{validate:Ye=>Ve().startsAt<Ye}}),{field:{onChange:Ke,value:Le}}=(0,o.as)({name:"timeZone",control:Pe}),ze=Qe||Re,Be=(0,p.KQ)(Se),$e=(0,p.KQ)(Ie);return(0,n.jsx)(m.D,{className:q.timeRange,label:(0,h.t)("alerting.silence-period.label-silence-start-and-end","Silence start and end"),error:ze?"To is before or the same as from":"",invalid:ze,children:(0,n.jsx)(k.b,{value:{from:Be,to:$e,raw:{from:Be,to:$e}},timeZone:Le,onChange:Ye=>{me((0,p.KQ)(Ye.from)),Ue((0,p.KQ)(Ye.to))},onChangeTimeZone:Ye=>Ke(Ye),hideTimeZone:!1,hideQuickRanges:!0,placeholder:(0,h.t)("alerting.silence-period.placeholder-select-time-range","Select time range")})})},q={timeRange:(0,a.css)({width:"400px"})};var se=e(45214),re=e(93374),Y=e(45967),X=e(30703),J=e(99887),_=e(91984),ee=e(15629),ae=e(6106),le=e(83903);const L=(Pe,Ve,me)=>{const[Se,Qe]=(0,d.useState)();(0,i.A)(Pe,Ve,[Se]),(0,se.A)(()=>{Qe(me)},[me])},ie=({amSourceName:Pe,matchers:Ve,ruleUid:me})=>{const Se=[...me?[{name:P.kW,value:me,operator:M.ho.equal}]:[],...Ve].map(W.Wc),Qe=_.m.endpoints.getAlertmanagerAlerts.useLazyQuery,Ue=(0,E.of)(ue),Ie=oe(),Re=me||Ve.some(Ye=>Ye.value&&Ye.name),[Ke,{currentData:Le=[],isFetching:ze,isError:Be}]=Qe();if(L(()=>{Re&&Ke({amSourceName:Pe,filter:{matchers:Se}})},500,[Pe,Se]),Be)return(0,n.jsx)(g.F,{title:(0,h.t)("alerting.silenced-instances-preview.title-preview-not-available","Preview not available"),severity:"error",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.silenced-instances-preview.error-generating-preview",children:"Error occurred when generating preview of affected alerts. Are your matchers valid?"})});const $e=Le.map(Ye=>({id:Ye.fingerprint,data:Ye}));return(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:Ue.title,children:[(0,n.jsx)(h.x6,{i18nKey:"alerting.silences.affected-instances",children:"Affected alert instances"}),(0,n.jsx)(Y.m,{content:(0,n.jsxs)("div",{children:[(0,n.jsx)(h.x6,{i18nKey:"alerting.silences.preview-affected-instances",children:"Preview the alert instances affected by this silence."}),(0,n.jsx)("br",{}),(0,n.jsx)(h.x6,{i18nKey:"alerting.silences.only-firing-instances",children:"Only alert instances in the firing state are displayed."})]}),children:(0,n.jsxs)("span",{children:["\xA0",(0,n.jsx)(X.I,{name:"info-circle",size:"sm"})]})}),$e.length>0?(0,n.jsx)(J.E,{className:Ue.badge,color:"blue",text:$e.length}):null]}),!Re&&(0,n.jsx)("span",{children:(0,n.jsx)(h.x6,{i18nKey:"alerting.silenced-instances-preview.valid-matcher-affected-alerts",children:"Add a valid matcher to see affected alerts"})}),ze&&(0,n.jsx)(v._,{text:(0,h.t)("alerting.silenced-instances-preview.text-loading-affected-alert-rule-instances","Loading affected alert rule instances...")}),!ze&&!Be&&Re&&(0,n.jsx)("div",{className:Ue.table,children:$e.length>0?(0,n.jsx)(ae.E,{items:$e,isExpandable:!1,cols:Ie,pagination:{itemsPerPage:10}}):(0,n.jsx)("span",{children:(0,n.jsx)(h.x6,{i18nKey:"alerting.silenced-instances-preview.no-firing-alert-instances-found",children:"No firing alert instances found"})})})]})};function oe(){const Pe=(0,E.of)(ue);return[{id:"state",label:(0,h.t)("alerting.use-columns.label.state","State"),renderCell:function({data:me}){return(0,n.jsx)(le.y,{state:me.status.state})},size:"120px",className:Pe.stateColumn},{id:"labels",label:(0,h.t)("alerting.use-columns.label.labels","Labels"),renderCell:function({data:me}){return(0,n.jsx)(re.m,{labels:me.labels,size:"sm"})},size:"auto"},{id:"created",label:(0,h.t)("alerting.use-columns.label.created","Created"),renderCell:function({data:me}){return(0,n.jsx)(n.Fragment,{children:(0,ee.mo)(me.startsAt)?"-":(0,p.KQ)(me.startsAt).format("YYYY-MM-DD HH:mm:ss")})},size:"180px"}]}const ue=Pe=>({table:(0,a.css)({maxWidth:`${Pe.breakpoints.values.lg}px`}),moreMatches:(0,a.css)({marginTop:Pe.spacing(1)}),title:(0,a.css)({display:"flex",alignItems:"center"}),badge:(0,a.css)({marginLeft:Pe.spacing(1)}),stateColumn:(0,a.css)({display:"flex",alignItems:"center"})});var ye=e(39947);const fe=()=>{const{id:Pe=""}=(0,l.g)(),{selectedAlertmanager:Ve=""}=(0,U.VI)(),{data:me,isLoading:Se,error:Qe}=C.F.endpoints.getSilence.useQuery({id:Pe,datasourceUid:(0,T.w5)(Ve),ruleMetadata:!0,accessControl:!0}),Ue=me?.matchers?.find(ze=>ze.name===P.kW)?.value,Ie=Ve===T.hY,Re=(0,d.useMemo)(()=>{if(!me)return;const ze=me.matchers?.filter(Be=>Be.name!==P.kW);return(0,ye.Ee)({...me,matchers:ze})},[me]);return Pe&&Se?(0,n.jsx)(v._,{text:(0,h.t)("alerting.existing-silence-editor.text-loading-existing-silence-information","Loading existing silence information...")}):(0,u.NF)(Qe)&&Qe.status===404?(0,n.jsx)(g.F,{title:(0,h.t)("alerting.existing-silence-editor.title-silence-not-found",'Existing silence "{{silenceId}}" not found',{silenceId:Pe}),severity:"warning"}):(Ie?me?.accessControl?.write:!0)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.e,{currentAlertmanager:Ve}),(0,n.jsx)(Ee,{ruleUid:Ue,formValues:Re,alertManagerSourceName:Ve})]}):(0,n.jsx)(g.F,{title:(0,h.t)("alerting.existing-silence-editor.title-permission-editrecreate-silence","You do not have permission to edit/recreate this silence"),severity:"error"})},Ee=({formValues:Pe=(0,ye.Di)(),alertManagerSourceName:Ve,onSilenceCreated:me,onCancel:Se,ruleUid:Qe})=>{const[Ue,Ie]=(0,B.L7)(B.QI.PreviewSilencedInstances),Re=Ue&&Ie,[Ke,{isLoading:Le}]=C.F.endpoints.createSilence.useMutation(),ze=(0,o.mN)({defaultValues:Pe}),Be=(0,E.of)(Ae),{register:$e,handleSubmit:Ye,formState:de,watch:ge,setValue:pe,clearErrors:De}=ze,[Me,be,Oe,Ne]=ge(["duration","startsAt","endsAt","matchers"]),We=()=>{r.Ny.push((0,V.nL)("/alerting/silences",Ve))},qe=me||We,st=Se||We,rt=async ke=>{const{id:Ze,startsAt:nt,endsAt:ut,comment:gt,createdBy:ht,matchers:tt}=ke;Qe&&tt.push({name:P.kW,value:Qe,operator:M.ho.equal});const Ot=tt.map(W.Wc).filter(wt=>wt.name&&wt.value),jt=(0,s.pickBy)({id:Ze,startsAt:nt,endsAt:ut,comment:gt,createdBy:ht,matchers:Ot},wt=>!!wt);await Ke({datasourceUid:(0,T.w5)(Ve),payload:jt}).unwrap().then(wt=>{qe?.(wt)})},[ot,mt]=(0,d.useState)(Me);(0,i.A)(()=>{if((0,c.vd)(be)&&(0,c.vd)(Oe))if(Me!==ot)pe("endsAt",(0,p.KQ)((0,c.Ri)(new Date(be),(0,c.E9)(Me))).toISOString()),mt(Me);else{const ke=new Date(be).valueOf();if(new Date(Oe).valueOf()>ke){const nt=(0,c.dU)({start:new Date(be),end:new Date(Oe)});pe("duration",nt),mt(nt)}}},700,[De,Me,Oe,ot,pe,be]);const pt=!!(I.TP.user.isSignedIn&&I.TP.user.name);return(0,n.jsx)(o.Op,{...ze,children:(0,n.jsxs)("form",{onSubmit:Ye(rt),children:[(0,n.jsxs)(x.n,{className:Be.formContainer,children:[(0,n.jsxs)("div",{className:Be.silencePeriod,children:[(0,n.jsx)(te,{}),(0,n.jsx)(m.D,{label:(0,h.t)("alerting.silences-editor.label-duration","Duration"),invalid:!!de.errors.duration,error:de.errors.duration&&(de.errors.duration.type==="required"?"Required field":de.errors.duration.message),children:(0,n.jsx)(y.p,{...$e("duration",{validate:ke=>Object.keys((0,c.E9)(ke)).length===0?"Invalid duration. Valid example: 1d 4h (Available units: y, M, w, d, h, m, s)":void 0}),id:"duration"})})]}),(0,n.jsx)(Q,{required:!Qe,ruleUid:Qe}),(0,n.jsx)(m.D,{label:(0,h.t)("alerting.silences-editor.label-comment","Comment"),required:!0,error:de.errors.comment?.message,invalid:!!de.errors.comment,children:(0,n.jsx)(b.f,{...$e("comment",{required:{value:!0,message:(0,h.t)("alerting.silences-editor.message.required","Required.")}}),rows:5,placeholder:(0,h.t)("alerting.silences-editor.comment-placeholder-details-about-the-silence","Details about the silence"),id:"comment"})}),!pt&&(0,n.jsx)(m.D,{label:(0,h.t)("alerting.silences-editor.label-created-by","Created By"),required:!0,error:de.errors.createdBy?.message,invalid:!!de.errors.createdBy,children:(0,n.jsx)(y.p,{...$e("createdBy",{required:{value:!0,message:(0,h.t)("alerting.silences-editor.message.required","Required.")}}),placeholder:(0,h.t)("alerting.silences-editor.placeholder-whos-creating-the-silence","Who's creating the silence")})}),Re&&(0,n.jsx)(ie,{amSourceName:Ve,matchers:Ne,ruleUid:Qe})]}),(0,n.jsxs)(D.B,{gap:1,children:[Le&&(0,n.jsx)(f.$n,{disabled:!0,icon:"spinner",variant:"primary",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.silences-editor.saving",children:"Saving..."})}),!Le&&(0,n.jsx)(f.$n,{type:"submit",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.silences-editor.save-silence",children:"Save silence"})}),(0,n.jsx)(f.z9,{onClick:st,variant:"secondary",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})})]})]})})},Ae=Pe=>({formContainer:(0,a.css)({maxWidth:Pe.breakpoints.values.md}),alertRule:(0,a.css)({paddingBottom:Pe.spacing(2)}),silencePeriod:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:Pe.spacing(1),maxWidth:Pe.breakpoints.values.sm,paddingTop:Pe.spacing(2)})});function Ge(){const Pe={id:"silence-edit",text:(0,h.t)("alerting.existing-silence-editor-page.page-nav.text.edit-silence","Edit silence"),subTitle:"Recreate existing silence to stop notifications from a particular alert rule"};return(0,n.jsx)(R.y,{navId:"silences",pageNav:Pe,accessType:"instance",children:(0,n.jsx)(fe,{})})}const Fe=(0,z.S)(Ge)},24209:(ne,j,e)=>{"use strict";e.d(j,{D:()=>g});var n=e(74848),a=e(96540),s=e(92745),d=e(47931),o=e(45861),l=e(41654),i=e(72636),c=e(37386),p=e(21285),h=e(87105),u=e(23289),r=e(29216),v=e(58662);function g({panelId:E,timeFrom:x,dashboard:m,range:y,onCancelClick:b,buildIframe:D=v.CF}){const[f,C]=(0,a.useState)(!0),[P,T]=(0,a.useState)("current"),[M,I]=(0,a.useState)("");(0,a.useEffect)(()=>{const z=D(f,m.uid,P,E,x,y);I(z)},[P,f,m,E,x,y,D]);const B=z=>{I(z.currentTarget.value)},U=()=>{C(z=>!z)},W=z=>{T(z)},V=(0,n.jsx)(d.b,{icon:"copy",variant:"primary",getText:()=>M,onClipboardCopy:()=>{u.c.embedSnippetCopy({currentTimeRange:f,theme:P,shareResource:(0,v.hD)(E)})},children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.embed.copy",children:"Copy to clipboard"})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.embed.info",children:"Generate HTML for embedding an iframe with this panel"})}),(0,n.jsx)(c.D,{children:(0,n.jsxs)(l.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(p.d,{label:(0,s.t)("share-modal.embed.time-range","Lock time range"),id:"share-current-time-range",value:f,onChange:U}),(0,n.jsx)(i.J,{description:(0,s.t)("embed.share.time-range-description","Change the current relative time range to an absolute time range"),children:(0,n.jsx)(s.x6,{i18nKey:"embed.share.time-range-label",children:"Lock time range"})})]})}),(0,n.jsx)(r.w,{selectedTheme:P,onChange:W}),(0,n.jsx)(c.D,{label:(0,s.t)("share-modal.embed.html","Embed HTML"),description:(0,s.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the users viewing that page need to be signed into Grafana for the graph to load."),children:(0,n.jsx)(h.f,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:M,onChange:B})}),(0,n.jsxs)(l.B,{gap:1,justifyContent:"start",children:[V,(0,n.jsx)(o.$n,{variant:"secondary",fill:"outline",onClick:b,children:(0,n.jsx)(s.x6,{i18nKey:"snapshot.share.cancel-button",children:"Cancel"})})]})]})}},24313:(ne,j,e)=>{"use strict";e.d(j,{AY:()=>x,Xo:()=>c,_A:()=>u,_l:()=>g,gN:()=>v,iR:()=>E,kD:()=>p,lI:()=>h,mL:()=>r});var n=e(43173),a=e(62061),s=e(36580),d=e(65642),o=e(28998),l=e(58662),i=e(35143),c=(m=>(m.PUBLIC="public",m.EMAIL="email",m))(c||{});const p=m=>m.length>0,h=m=>m?.uid!==""&&m?.uid!==void 0,u=async m=>{let y=new Set;for(const b of m)for(const D of b.targets){const f=D?.datasource?.type;f&&(i.z.has(f)&&await(0,o.tR)().get(D.datasource)instanceof s.iy||y.add(f))}return Array.from(y).sort()},r=m=>`${(0,d.zj)().appUrl}public-dashboards/${m}`,v=(m,y)=>`/d/${m}/${y}?shareView=${l.wr.publicDashboard}`,g=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,E=()=>n.$.publicDashboardsEnabled,x=()=>E()&&!!n.$.featureToggles.publicDashboardsEmailSharing&&(0,a.a)("publicDashboardsEmailSharing")},24343:(ne,j,e)=>{"use strict";e.d(j,{X:()=>Se});var n=e(74848),a=e(96540),s=e(32885),d=e(46644),o=e(95004),l=e(17503),i=e(36638),c=e(51898),p=e(92745),h=e(739),u=e(63142),r=e(52718),v=e(34213),g=e(64780);function E(Qe,Ue){(0,a.useEffect)(()=>{if(Qe.current&&Ue.current){const Ie=Qe.current.querySelector(".track-vertical"),Re=Ue.current.firstChild;Re&&Ie&&(Ie.remove(),Re instanceof HTMLElement&&(Re.querySelector(":scope > .track-vertical")?.remove(),Re.append(Ie)))}})}function x(Qe,Ue,Ie,Re){const Ke=JSON.stringify(Object.keys(Qe.expanded));(0,a.useEffect)(()=>{let Le=0;Re||(Number.isFinite(Qe.lastExpandedOrCollapsedIndex)&&(Le=Qe.lastExpandedOrCollapsedIndex),Le=Qe.pageIndex===0?Le-1:Le-Qe.pageIndex-Qe.pageIndex*Qe.pageSize),Ue.current?.resetAfterIndex(Math.max(Le,0))},[Qe.lastExpandedOrCollapsedIndex,Qe.pageSize,Qe.pageIndex,Ue,Ie,Ke,Re])}var m=e(16515);function y({onColumnResize:Qe,onSortByChange:Ue,data:Ie}){return(0,a.useCallback)((Re,Ke)=>{switch(Ke.type){case"columnDoneResizing":if(Qe){const ze=Re.columnResizing?.headerIdWidths?.[0]?.[0],Be=parseInt(ze,10),$e=Math.round(Re.columnResizing.columnWidths?.[ze]),Ye=Ie.fields?.[Be];if(!Ye)return Re;const de=(0,m.Ct)(Ye,Ie);Qe(de,$e)}case"toggleSortBy":if(Ue){const Le=[];for(const ze of Re.sortBy){const Be=Ie.fields[parseInt(ze.id,10)];Be&&Le.push({displayName:(0,m.Ct)(Be,Ie),desc:ze.desc})}Ue(Le)}case"toggleRowExpanded":if(Ke.id)return{...Re,lastExpandedOrCollapsedIndex:parseInt(Ke.id,10)}}return Re},[Ie,Qe,Ue])}function b(Qe,Ue){const Ie={};if(Qe){Ie.sortBy=[];for(const Re of Qe)for(const Ke of Ue)Ke.Header===Re.displayName&&Ie.sortBy.push({id:Ke.id,desc:Re.desc})}return Ie}var D=e(74198),f=e(74533),C=e(97958),P=e(30703),T=e(22803),M=e(2381),I=e(97222),B=e(55386),U=e(15356),W=e(12737),V=e(32635),z=e(72636),R=e(41654);const O=28,N=O*5,F={Contains:{label:"Contains",value:"Contains",description:"Contains"},"=":{label:"=",value:"=",description:"Equals"},"!=":{label:"!=",value:"!=",description:"Not equals"},">":{label:">",value:">",description:"Greater"},">=":{label:">=",value:">=",description:"Greater or Equal"},"<":{label:"<",value:"<",description:"Less"},"<=":{label:"<=",value:"<=",description:"Less or Equal"},Expression:{label:"Expression",value:"Expression",description:'Bool Expression (Char $ represents the column value in the expression, e.g. "$ >= 10 && $ <= 12")'}},G=Object.values(F),H=F.Contains,K=F.Expression,w=Qe=>{if(Qe=Qe.trim().replace(/\\/g,""),/^(\d{4}-\d{2}-\d{2}|\d{4}\/\d{2}\/\d{2})/.test(Qe)){const Re=new Date(Qe);if(!isNaN(Re.getTime())){const Ke=(0,B.j_)("dateTimeAsIso");return(0,B.cN)(Ke(Re.getTime()))}}const Ue=parseFloat(Qe);if(!isNaN(Ue))return Ue;const Ie=Qe.toLowerCase();return Ie==="true"||Ie==="false"?Ie==="true":Qe},Q=({options:Qe,values:Ue,caseSensitive:Ie,showOperators:Re,onChange:Ke,searchFilter:Le,setSearchFilter:ze,operator:Be,setOperator:$e})=>{const Ye=(0,a.useMemo)(()=>new RegExp(Le,Ie?void 0:"i"),[Le,Ie]),de=(0,a.useMemo)(()=>Qe.filter(ot=>{if(!Re||!Le||Be.value===H.value)return ot.label===void 0?!1:Ye.test(ot.label);if(Be.value===K.value){if(ot.value===void 0)return!1;try{const mt=Le.replace(/\\/g,""),pt=new Function("$",`'use strict'; return ${mt};`),ke=w(ot.value);return pt(ke)}catch{}return!1}else{if(ot.value===void 0)return!1;const mt=w(ot.value),pt=w(Le);switch(Be.value){case"=":return mt===pt;case"!=":return mt!==pt;case">":return mt>pt;case">=":return mt>=pt;case"<":return mt<pt;case"<=":return mt<=pt}return!1}}),[Qe,Ye,Re,Be,Le]),ge=(0,a.useMemo)(()=>de.filter(ot=>Ue.includes(ot)),[de,Ue]),pe=(0,a.useMemo)(()=>de.length===ge.length,[de,ge]),De=(0,a.useMemo)(()=>ge.length>0&&de.length>ge.length,[de,ge]),Me=(0,a.useMemo)(()=>ge.length?`${ge.length} selected`:"Select all",[ge]),be=(0,a.useMemo)(()=>de.length!==ge.length?"Add all displayed values to the filter":"Remove all displayed values from the filter",[de,ge]),Oe=(0,u.of)(te),We=(0,u.$j)().spacing.gridSize,qe=(0,a.useMemo)(()=>Math.min(de.length*O,N)+We,[We,de.length]),st=(0,a.useCallback)(ot=>mt=>{const pt=mt.currentTarget.checked?Ue.concat(ot):Ue.filter(ke=>ke.value!==ot.value);Ke(pt)},[Ke,Ue]),rt=(0,a.useCallback)(()=>{if(de.length===ge.length){const ot=Ue.filter(mt=>!de.includes(mt));Ke(ot)}else{const ot=[...new Set([...Ue,...de])];Ke(ot)}},[Ke,Ue,de,ge]);return(0,n.jsxs)(R.B,{direction:"column",gap:.25,children:[!Re&&(0,n.jsx)(W.Z,{placeholder:(0,p.t)("grafana-ui.table.filter-placeholder","Filter values"),onChange:ze,value:Le}),Re&&(0,n.jsxs)(R.B,{direction:"row",gap:0,children:[(0,n.jsx)(U.f,{variant:"canvas",options:G,onChange:$e,value:Be,tooltip:Be.description}),(0,n.jsx)(W.Z,{placeholder:(0,p.t)("grafana-ui.table.filter-placeholder","Filter values"),onChange:ze,value:Le})]}),de.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.Y1,{height:qe,itemCount:de.length,itemSize:O,itemData:{items:de,values:ge,onCheckedChanged:st,className:Oe.filterListRow},width:"100%",className:Oe.filterList,children:k}),(0,n.jsxs)(R.B,{direction:"column",gap:.25,children:[(0,n.jsx)("div",{className:(0,T.cx)(Oe.selectDivider)}),(0,n.jsx)("div",{className:(0,T.cx)(Oe.filterListRow),children:(0,n.jsx)(V.S,{value:pe,indeterminate:De,label:Me,description:be,onChange:rt})})]})]}):(0,n.jsx)(z.J,{className:Oe.noValuesLabel,children:(0,n.jsx)(p.x6,{i18nKey:"grafana-ui.table.no-values-label",children:"No values"})})]})};function k({index:Qe,style:Ue,data:{onCheckedChanged:Ie,items:Re,values:Ke,className:Le}}){const ze=Re[Qe],{value:Be,label:$e}=ze,Ye=Ke.find(de=>de.value===Be)!==void 0;return(0,n.jsx)("div",{className:Le,style:Ue,title:$e,children:(0,n.jsx)(V.S,{value:Ye,label:$e,onChange:Ie(ze)})})}const te=Qe=>({filterList:(0,T.css)({label:"filterList"}),filterListRow:(0,T.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:Qe.spacing(.5),":hover":{backgroundColor:Qe.colors.action.hover}}),selectDivider:(0,T.css)({label:"selectDivider",width:"100%",borderTop:`1px solid ${Qe.colors.border.medium}`,padding:Qe.spacing(.5,2)}),noValuesLabel:(0,T.css)({paddingTop:Qe.spacing(1)})});var q=e(45861),se=e(8135),re=e(76319);const Y=({column:{preFilteredRows:Qe,filterValue:Ue,setFilter:Ie},onClose:Re,field:Ke,searchFilter:Le,setSearchFilter:ze,operator:Be,setOperator:$e})=>{const Ye=(0,u.$j)(),de=(0,a.useMemo)(()=>(0,D.MY)(Qe,Ke),[Qe,Ke]),ge=(0,a.useMemo)(()=>(0,D.Yz)(de),[de]),pe=(0,a.useMemo)(()=>(0,D.Sj)(ge,Ue),[ge,Ue]),[De,Me]=(0,a.useState)(pe),[be,Oe]=(0,a.useState)(!1),Ne=(0,a.useCallback)(ot=>Re(),[Re]),We=(0,a.useCallback)(ot=>{const mt=De.length?De:void 0;Ie(mt),Re()},[Ie,De,Re]),qe=(0,a.useCallback)(ot=>{Ie(void 0),Re()},[Ie,Re]),st=(0,a.useMemo)(()=>Ue!==void 0,[Ue]),rt=(0,u.of)(X);return(0,n.jsx)(se.N,{onClick:Ne,useCapture:!0,children:(0,n.jsx)("div",{className:(0,T.cx)(rt.filterContainer),onClick:J,children:(0,n.jsxs)(R.B,{direction:"column",gap:3,children:[(0,n.jsxs)(R.B,{direction:"column",gap:.5,children:[(0,n.jsxs)(R.B,{justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(z.J,{className:rt.label,children:(0,n.jsx)(p.x6,{i18nKey:"grafana-ui.table.filter-popup-heading",children:"Filter by values:"})}),(0,n.jsx)(re.K,{name:"text-fields",tooltip:(0,p.t)("grafana-ui.table.filter-popup-match-case","Match case"),style:{color:be?Ye.colors.text.link:Ye.colors.text.disabled},onClick:()=>{Oe(ot=>!ot)}})]}),(0,n.jsx)("div",{className:(0,T.cx)(rt.listDivider)}),(0,n.jsx)(Q,{onChange:Me,values:De,options:ge,caseSensitive:be,showOperators:!0,searchFilter:Le,setSearchFilter:ze,operator:Be,setOperator:$e})]}),(0,n.jsxs)(R.B,{gap:3,children:[(0,n.jsxs)(R.B,{children:[(0,n.jsx)(q.$n,{size:"sm",onClick:We,children:(0,n.jsx)(p.x6,{i18nKey:"grafana-ui.table.filter-popup-apply",children:"Ok"})}),(0,n.jsx)(q.$n,{size:"sm",variant:"secondary",onClick:Ne,children:(0,n.jsx)(p.x6,{i18nKey:"grafana-ui.table.filter-popup-cancel",children:"Cancel"})})]}),st&&(0,n.jsx)(R.B,{children:(0,n.jsx)(q.$n,{fill:"text",size:"sm",onClick:qe,children:(0,n.jsx)(p.x6,{i18nKey:"grafana-ui.table.filter-popup-clear",children:"Clear filter"})})})]})]})})})},X=Qe=>({filterContainer:(0,T.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:Qe.colors.background.primary,border:`1px solid ${Qe.colors.border.weak}`,padding:Qe.spacing(2),boxShadow:Qe.shadows.z3,borderRadius:Qe.shape.radius.default}),listDivider:(0,T.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${Qe.colors.border.medium}`,padding:Qe.spacing(.5,2)}),label:(0,T.css)({marginBottom:0})}),J=Qe=>{Qe.stopPropagation()},_=({column:Qe,field:Ue,tableStyles:Ie})=>{const Re=(0,a.useRef)(null),[Ke,Le]=(0,a.useState)(!1),ze=(0,u.of)(ee),Be=(0,a.useMemo)(()=>!!Qe.filterValue,[Qe.filterValue]),$e=(0,a.useCallback)(()=>Le(!0),[Le]),Ye=(0,a.useCallback)(()=>Le(!1),[Le]),[de,ge]=(0,a.useState)(""),[pe,De]=(0,a.useState)(H);return!Ue||!Ue.config.custom?.filterable?null:(0,n.jsxs)("button",{className:(0,T.cx)(Ie.headerFilter,Be?ze.filterIconEnabled:ze.filterIconDisabled),ref:Re,type:"button",onClick:$e,children:[(0,n.jsx)(P.I,{name:"filter"}),Ke&&Re.current&&(0,n.jsx)(M.A,{content:(0,n.jsx)(Y,{column:Qe,tableStyles:Ie,field:Ue,onClose:Ye,searchFilter:de,setSearchFilter:ge,operator:pe,setOperator:De}),placement:"bottom-start",referenceElement:Re.current,show:!0})]})},ee=Qe=>({filterIconEnabled:(0,T.css)({label:"filterIconEnabled",color:Qe.colors.primary.text}),filterIconDisabled:(0,T.css)({label:"filterIconDisabled",color:Qe.colors.text.disabled})}),ae=Qe=>{const{headerGroups:Ue,showTypeIcons:Ie,tableStyles:Re}=Qe,Ke=c.Tp.components.Panels.Visualization.Table;return(0,n.jsx)("div",{role:"rowgroup",className:Re.headerRow,children:Ue.map(Le=>{const{key:ze,...Be}=Le.getHeaderGroupProps();return(0,a.createElement)("div",{className:Re.thead,...Be,key:ze,"aria-label":Ke.header,role:"row"},Le.headers.map(($e,Ye)=>le($e,Re,Ie)))})})};function le(Qe,Ue,Ie){const{key:Re,...Ke}=Qe.getHeaderProps(),Le=Qe.field??null,ze=Le?.config.custom;Qe.canResize&&(Ke.style.userSelect=Qe.isResizing?"none":"auto"),Ke.style.position="absolute",Ke.style.justifyContent=Qe.justifyContent,Ke.style.left=Qe.totalLeft;let Be=Qe.render("Header"),$e=Qe.canSort&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{...Qe.getSortByToggleProps(),className:Ue.headerCellLabel,children:[Ie&&(0,n.jsx)(P.I,{name:(0,C.SS)(Le),title:Le?.type,size:"sm",className:Ue.typeIcon}),(0,n.jsx)("div",{children:Be}),Qe.isSorted&&(Qe.isSortedDesc?(0,n.jsx)(P.I,{size:"lg",name:"arrow-down",className:Ue.sortIcon}):(0,n.jsx)(P.I,{name:"arrow-up",size:"lg",className:Ue.sortIcon}))]}),Qe.canFilter&&(0,n.jsx)(_,{column:Qe,tableStyles:Ue,field:Le})]});return $e&&ze?.headerComponent?$e=(0,n.jsx)(ze.headerComponent,{field:Le,defaultContent:$e}):ze?.headerComponent&&(Be=(0,n.jsx)(ze.headerComponent,{field:Le,defaultContent:Be})),(0,n.jsxs)("div",{className:Ue.headerCell,...Ke,role:"columnheader",children:[Qe.canSort&&$e,!Qe.canSort&&Be,!Qe.canSort&&Qe.canFilter&&(0,n.jsx)(_,{column:Qe,tableStyles:Ue,field:Le}),Qe.canResize&&(0,n.jsx)("div",{...Qe.getResizerProps(),className:Ue.resizeHandle})]},Re)}var L=e(64423),ie=e(56978),oe=e(57852),ue=e(64400),ye=e(28533);function fe({tableStyles:Qe,nestedData:Ue,rowIndex:Ie,width:Re,cellHeight:Ke}){const Le=Ue.values,ze=[],Be=(0,u.$j)(),$e=(0,u.of)(Ee);let Ye=Qe.rowHeight+Be.spacing.gridSize;return Le[Ie].forEach((de,ge)=>{const pe=!!de.meta?.custom?.noHeader,De=Qe.rowHeight*(de.length+(pe?0:1)),Me={height:De,paddingLeft:D.jV,position:"absolute",top:Ye,backgroundColor:Be.colors.background.primary,color:Be.colors.text.primary};Ye+=De+Be.spacing.gridSize,ze.push((0,n.jsx)("div",{style:Me,children:(0,n.jsx)(Se,{data:de,width:Re-D.jV,height:Qe.rowHeight*(de.length+1),noHeader:pe,cellHeight:Ke})},`subTable_${Ie}_${ge}`))}),(0,n.jsx)("div",{className:$e.subTables,children:ze})}const Ee=Qe=>({subTables:(0,T.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:Qe.spacing(5),left:Qe.spacing(1),bottom:Qe.spacing(2),background:Qe.colors.border.medium}})});function Ae(Qe,Ue,Ie){return Qe.values[Ue].reduce((Le,ze)=>{if(ze.length){const Be=!!ze.meta?.custom?.noHeader;return Le+Ie.rowHeight*(ze.length+(Be?0:1))+8}return Le},Ie.rowHeight)??Ie.rowHeight}const Ge=Qe=>{const{data:Ue,rows:Ie,headerHeight:Re,footerPaginationEnabled:Ke,rowHeight:Le,itemCount:ze,pageIndex:Be,tableState:$e,prepareRow:Ye,onCellFilterAdded:de,width:ge,cellHeight:pe=h.qM.Sm,timeRange:De,tableStyles:Me,nestedDataField:be,listHeight:Oe,listRef:Ne,enableSharedCrosshair:We=!1,initialRowIndex:qe=void 0,headerGroups:st,longestField:rt,textWrapField:ot,getActions:mt,replaceVariables:pt,setInspectCell:ke}=Qe,[Ze,nt]=(0,a.useState)(qe);qe===void 0&&Ze!==void 0&&nt(void 0);const ut=(0,u.$j)(),gt=(0,ue.d2)();let ht=null;window.OffscreenCanvas!==void 0&&(ht=new OffscreenCanvas(256,1024).getContext("2d")),ht!=null&&(ht.font=`${ut.typography.fontSize}px ${ut.typography.body.fontFamily}`);const tt=(0,a.useMemo)(()=>{const Tt=Ue.fields.find(Je=>Je.type===o.PU.time);return Tt?(0,D.HY)(Tt):0},[Ue]),Ot=(0,a.useCallback)((Tt,Je)=>{if(!gt||!We)return;const Pt=Je.fields.find(Yt=>Yt.type===o.PU.time);Pt&&gt.eventBus.publish(new oe.b_({point:{time:Pt.values[Tt]}}))},[We,gt]),jt=(0,a.useCallback)(()=>{!gt||!We||gt.eventBus.publish(new oe.ql)},[We,gt]),wt=(0,a.useCallback)(Tt=>{if(Tt.payload.point?.time&&Tt.payload.rowIndex!==void 0){const Je=Ue.fields.find(fn=>fn.type===o.PU.time),Pt=Je.values[Tt.payload.rowIndex],Yt=Tt.payload.point.time;if((0,D.Iy)(Yt,Pt,tt)){nt(Tt.payload.rowIndex);return}const Lt=Je.values.findIndex(fn=>(0,D.Iy)(Yt,fn,tt));if(Lt!==-1){nt(Lt);return}nt(void 0)}},[Ue.fields,tt]);(0,a.useEffect)(()=>{if(!gt||!We||!(0,l.S1)(Ue)||Ke)return;const Tt=new L.yU;return Tt.add(gt.eventBus.getStream(oe.b_).pipe((0,ie.B)(250)).subscribe({next:Je=>{gt.eventBus!==Je.origin&&wt(Je)}})),Tt.add(gt.eventBus.getStream(oe.ql).pipe((0,ie.B)(250)).subscribe({next:Je=>{gt.eventBus!==Je.origin&&nt(void 0)}})),()=>{Tt.unsubscribe()}},[Ue,We,Ke,wt,gt]);let Ht;if(Ze!==void 0){const Tt=Ie.findIndex(Je=>Je.index===Ze);Tt!==-1&&(Ht=Re+(Tt-1)*Le)}const hn=(0,a.useCallback)(Tt=>$e.pageIndex*$e.pageSize+Tt,[$e.pageIndex,$e.pageSize]);let Dn,Bn;for(const Tt of Ue.fields){const Je=Tt.config.custom;Je!==void 0&&Je.cellOptions!==void 0&&Je.cellOptions.type===h.ob.ColorBackground&&Je.cellOptions.applyToRow&&(Dn=Yt=>{const Lt=Tt.display(Tt.values.get(Yt));return(0,D.HW)(Me.theme,Je.cellOptions,Lt)}),ot!==void 0?Bn=ot:rt!==void 0&&(Bn=rt)}const xn=(0,a.useCallback)(({index:Tt,style:Je,rowHighlightIndex:Pt})=>{const Yt=hn(Tt),Lt=Ie[Yt];let fn={};Ye(Lt);const En=$e.expanded[Lt.id]?(0,T.css)({"&:hover":{background:"inherit"}}):{},An=be&&$e.expanded[Lt.id];if(Pt!==void 0&&Lt.index===Pt&&(Je={...Je,backgroundColor:ut.components.table.rowSelected},fn={"aria-selected":"true"}),Dn){const{bgColor:sa,textColor:ta}=Dn(Lt.index);Je.background=sa,Je.color=ta,Je.borderLeft=`2px solid ${sa}`}if(Bn){const ta=Ue.fields.filter(Un=>!Un.config.custom?.hidden).findIndex(Un=>Un.name===Bn.name),ra=ut.typography.body.lineHeight*ut.typography.fontSize,ea=(0,D.M2)(Bn.values[Lt.index],st[0].headers[ta],ht,ra,Me.rowHeight,Me.cellPadding);Je.height=ea.height}const{key:Gn,...zn}=Lt.getRowProps({style:Je,...fn});return(0,n.jsxs)("div",{...zn,className:(0,T.cx)(Me.row,En),onMouseEnter:()=>Ot(Lt.index,Ue),onMouseLeave:jt,children:[An&&(0,n.jsx)(fe,{nestedData:be,tableStyles:Me,rowIndex:Lt.index,width:ge,cellHeight:pe}),Lt.cells.map((sa,ta)=>(0,n.jsx)(ye.n,{tableStyles:Me,cell:sa,onCellFilterAdded:de,columnIndex:ta,columnCount:Lt.cells.length,timeRange:De,frame:Ue,rowStyled:Dn!==void 0,rowExpanded:An,textWrapped:Bn!==void 0,height:Number(Je.height)-1,getActions:mt,replaceVariables:pt,setInspectCell:ke},ta))]},Gn)},[hn,Ie,Ye,$e.expanded,be,Dn,Bn,Me,jt,ge,pe,ut.components.table.rowSelected,ut.typography.body.lineHeight,ut.typography.fontSize,Ue,st,ht,Ot,de,De,mt,pt,ke]),ft=Tt=>{const Je=hn(Tt),Pt=Ie[Je];if($e.expanded[Pt.id]&&be)return Ae(be,Pt.index,Me);if(Bn){const Lt=Ue.fields.filter(En=>!En.config.custom?.hidden).findIndex(En=>En.name===Bn.name),fn=ut.typography.fontSize*ut.typography.body.lineHeight;return(0,D.M2)(Bn.values[Pt.index],st[0].headers[Lt],ht,fn,Me.rowHeight,Me.cellPadding).height}return Me.rowHeight},St=Tt=>{const{scrollTop:Je}=Tt.currentTarget;Ne.current!==null&&Ne.current.scrollTo(Je)};return(0,a.useEffect)(()=>{Ne.current&&Ne.current.resetAfterIndex(0)},[Ie,Ne]),(0,n.jsx)(r.A,{onScroll:St,hideHorizontalTrack:!0,scrollTop:Ht,children:(0,n.jsx)(I._m,{height:Oe,itemCount:ze,itemSize:ft,width:"100%",ref:Ne,style:{overflow:void 0},children:({index:Tt,style:Je})=>xn({index:Tt,style:Je,rowHighlightIndex:Ze})},`${Le}${Be}`)})};var Fe=e(59692);const Pe=150,Ve=36,me="No data",Se=(0,a.memo)(Qe=>{const{ariaLabel:Ue,data:Ie,height:Re,onCellFilterAdded:Ke,onColumnResize:Le,width:ze,columnMinWidth:Be=Pe,noHeader:$e,resizable:Ye=!0,initialSortBy:de,footerOptions:ge,showTypeIcons:pe,footerValues:De,enablePagination:Me,cellHeight:be=h.qM.Sm,timeRange:Oe,enableSharedCrosshair:Ne=!1,initialRowIndex:We=void 0,fieldConfig:qe,getActions:st,replaceVariables:rt}=Qe,ot=(0,a.useRef)(null),mt=(0,a.useRef)(null),pt=(0,a.useRef)(null),ke=(0,u.$j)(),Ze=(0,Fe.k)(ke,be),nt=$e?0:Ze.rowHeight,[ut,gt]=(0,a.useState)(De),ht=qe?.defaults?.noValue??me,[tt,Ot]=(0,a.useState)(null),jt=(0,a.useMemo)(()=>{const pa=Ve;let Ua=0;if(!ut)return 0;for(const ma of ut)Array.isArray(ma)&&ma.length>Ua&&(Ua=ma.length);return Ua>1?pa*Ua:pa},[ut]),wt=(0,a.useMemo)(()=>Ie.fields.length?Array(Ie.length).fill(0):[],[Ie]),Ht=!!(ge?.countRows&&ge.reducer&&ge.reducer.length&&ge.reducer[0]===d.gy.count),hn=Ie.fields.find(pa=>pa.type===o.PU.nestedFrames),Dn=hn!==void 0,Bn=(0,a.useMemo)(()=>(0,D.GH)(Ie,ze,Be,Dn,ut,Ht),[Ie,ze,Be,Dn,ut,Ht]),xn=(0,a.useRef)(),ft=y({onColumnResize:Le,onSortByChange:pa=>{xn.current(!1),Qe.onSortByChange&&Qe.onSortByChange(pa)},data:Ie}),St=!!Ie.meta?.uniqueRowIdFields?.length,Tt=(0,a.useMemo)(()=>{const pa={columns:Bn,data:wt,disableResizing:!Ye,stateReducer:ft,autoResetPage:!1,initialState:b(de,Bn),autoResetFilters:!1,sortTypes:{number:D.Ok,"alphanumeric-insensitive":D.IM}};return St&&(pa.getRowId=(Ua,ma)=>(0,l.t9)(Ie,ma),pa.autoResetExpanded=!1),pa},[de,Bn,wt,Ye,ft,St,Ie]),{getTableProps:Je,headerGroups:Pt,footerGroups:Yt,rows:Lt,prepareRow:fn,totalColumnsWidth:En,page:An,state:Gn,gotoPage:zn,setPageSize:sa,pageOptions:ta,toggleAllRowsExpanded:ra}=(0,s.useTable)(Tt,s.useFilters,s.useSortBy,s.useAbsoluteLayout,s.useResizeColumns,s.useExpanded,s.usePagination),ea=Gn;xn.current=ra,(0,a.useEffect)(()=>{ge||gt(De)},[De,ge]),(0,a.useEffect)(()=>{if(!ge)return;if(!ge.show){gt(void 0);return}if(Ht){const Ua=[];Ua[0]=Lt.length.toString()??Ie.length.toString(),gt(Ua);return}const pa=(0,D.Ux)(Pt[0].headers,(0,D.XX)(Lt),ge,ke);gt(pa)},[ge,ke,Gn.filters,Ie]);let Un=Re-(nt+jt);Me&&(Un-=Ze.cellHeight);const oa=Math.round(Un/Ze.rowHeight)-1;(0,a.useEffect)(()=>{oa<=0||sa(oa)},[oa,sa]),(0,a.useEffect)(()=>{Ie.length/oa<Gn.pageIndex&&zn(0)},[Ie]),x(ea,ot,Ie,St),E(pt,mt);const Ca=(0,a.useCallback)(pa=>{zn(pa-1)},[zn]),ya=Me?An.length:Lt.length;let Xa=null;if(Me){const pa=Gn.pageIndex*Gn.pageSize+1;let Ua=pa+Gn.pageSize-1;const ma=ze<550;Ua>Ie.length&&(Ua=Ie.length);const Ka=Lt.length,Oa=Ua<Lt.length?Ua:Lt.length;Xa=(0,n.jsxs)("div",{className:Ze.paginationWrapper,children:[(0,n.jsx)(v.d,{currentPage:Gn.pageIndex+1,numberOfPages:ta.length,showSmallVersion:ma,onNavigate:Ca}),ma?null:(0,n.jsx)("div",{className:Ze.paginationSummary,children:(0,n.jsxs)(p.x6,{i18nKey:"grafana-ui.table.pagination-summary",children:[{itemsRangeStart:pa}," - ",{displayedEnd:Oa}," of ",{numRows:Ka}," rows"]})})]})}const Ta=qe?(0,D.O4)(qe,Ie):void 0;let Pa;return qe!==void 0&&Ie.fields.forEach(pa=>{qe.overrides.forEach(Ua=>{if((0,i.NS)(Ua.matcher)(pa,Ie,[Ie]))for(const Ka of Ua.properties)Ka.id==="custom.cellOptions"&&Ka.value.wrapText&&(Pa=pa)})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{...Je(),className:Ze.table,"aria-label":Ue,role:"table",ref:mt,style:{width:ze,height:Re},children:[(0,n.jsx)(r.E,{hideVerticalTrack:!0,children:(0,n.jsxs)("div",{className:Ze.tableContentWrapper(En),children:[!$e&&(0,n.jsx)(ae,{headerGroups:Pt,showTypeIcons:pe,tableStyles:Ze}),ya>0?(0,n.jsx)("div",{"data-testid":c.Tp.components.Panels.Visualization.Table.body,ref:pt,children:(0,n.jsx)(Ge,{headerGroups:Pt,data:Ie,rows:Lt,width:ze,cellHeight:be,headerHeight:nt,rowHeight:Ze.rowHeight,itemCount:ya,pageIndex:Gn.pageIndex,listHeight:Un,listRef:ot,tableState:Gn,prepareRow:fn,timeRange:Oe,onCellFilterAdded:Ke,nestedDataField:hn,tableStyles:Ze,footerPaginationEnabled:!!Me,enableSharedCrosshair:Ne,initialRowIndex:We,longestField:Ta,textWrapField:Pa,getActions:st,replaceVariables:rt,setInspectCell:Ot})}):(0,n.jsx)("div",{style:{height:Re-nt,width:ze},className:Ze.noData,children:ht}),ut&&(0,n.jsx)(f.u,{isPaginationVisible:!!Me,footerValues:ut,footerGroups:Yt,totalColumnsWidth:En,tableStyles:Ze})]})}),Xa]}),tt!==null&&(0,n.jsx)(g.s,{mode:tt.mode,value:tt.value,onDismiss:()=>{Ot(null)}})]})});Se.displayName="Table"},24381:(ne,j,e)=>{"use strict";e.d(j,{Xb:()=>s,c4:()=>o,d9:()=>d,w_:()=>i,yd:()=>l});var n=e(65307),a=e(28105);const s={loadingState:a.Gu.Loading,libraryPanels:[],totalCount:0,perPage:40,page:1,numberOfPages:0,currentPanelId:void 0},d=(0,n.VP)("libraryPanels/view/initSearch"),o=(0,n.VP)("libraryPanels/view/searchCompleted"),l=(0,n.VP)("libraryPanels/view/changePage"),i=(c,p)=>{if(d.match(p))return{...c,loadingState:a.Gu.Loading};if(o.match(p)){const{libraryPanels:h,page:u,perPage:r,totalCount:v}=p.payload,g=Math.ceil(v/r);return{...c,libraryPanels:h,perPage:r,totalCount:v,loadingState:a.Gu.Done,numberOfPages:g,page:u>g?u-1:u}}return l.match(p)?{...c,page:p.payload.page}:c}},24438:(ne,j,e)=>{"use strict";e.d(j,{j:()=>y,s:()=>m});var n=e(74848),a=e(22803),s=e(96540),d=e(40996),o=e(92745),l=e(63142),i=e(41654),c=e(12737),p=e(70683),h=e(55860);function u({onChange:C}){const[P,T]=(0,s.useState)([]),M=(0,s.useCallback)(I=>{const B=I.filter(U=>!!U.value).map(U=>U.value);C(B),T(I)},[C]);return(0,n.jsx)(p.f,{prefixIcon:"filter",minWidth:40,width:"auto",options:r,value:P,onChange:M,isClearable:!0,placeholder:(0,o.t)("folder-filter.select-placeholder","Filter by folder"),"aria-label":(0,o.t)("folder-filter.select-aria-label","Folder filter")})}async function r(C){const M=(await(0,h.S)().search({query:C,kind:["folder"],limit:100,permission:"view"})).view.map(I=>({label:I.name,value:I.uid}));return(!C||"dashboards".includes(C.toLowerCase()))&&M.unshift({label:"Dashboards",value:"general"}),M}var v=e(92100),g=e(18552),E=e(95943),x=e(90232),m=(C=>(C.Tight="tight",C.Spacious="spacious",C))(m||{});const y=({onClick:C,variant:P="spacious",currentPanelId:T,currentFolderUID:M,perPage:I=E.FG,showPanelFilter:B=!1,showFolderFilter:U=!1,showSort:W=!1,showSecondaryActions:V=!1})=>{const z=(0,l.of)(b,P),[R,O]=(0,s.useState)(""),[N,F]=(0,s.useState)("");(0,d.A)(()=>F(R),200,[R]);const[G,H]=(0,s.useState)({}),[K,w]=(0,s.useState)(M?[M]:[]),[Q,k]=(0,s.useState)([]),te=W||B||U,q=P==="tight"?3:.5;return(0,n.jsx)("div",{className:z.container,children:(0,n.jsxs)(i.B,{direction:"column",gap:q,children:[(0,n.jsxs)("div",{className:(0,a.cx)(z.gridContainer,{[z.tightLayout]:P==="tight"}),children:[(0,n.jsx)("div",{className:z.filterInputWrapper,children:(0,n.jsx)(c.Z,{value:R,onChange:O,placeholder:(0,o.t)("library-panels.library-panels-search.placeholder-search-by-name-or-description","Search by name, description or folder name"),width:0,escapeRegex:!1})}),te&&(0,n.jsx)(D,{showSort:W,showPanelFilter:B,showFolderFilter:U,onSortChange:H,onFolderFilterChange:w,onPanelFilterChange:k,sortDirection:G.value,variant:P})]}),(0,n.jsx)("div",{className:z.libraryPanelsView,children:(0,n.jsx)(x.y,{onClickCard:C,searchString:N,sortDirection:G.value,panelFilter:Q,folderFilter:K,currentPanelId:T,showSecondaryActions:V,perPage:I})})]})})};function b(C,P){return{filterInputWrapper:(0,a.css)({flexGrow:P==="tight"?1:"initial"}),container:(0,a.css)({width:"100%",overflowY:"auto",padding:C.spacing(1)}),libraryPanelsView:(0,a.css)({width:"100%"}),gridContainer:(0,a.css)({display:"flex",flexDirection:"column",width:"100%",columnGap:C.spacing(1),rowGap:C.spacing(1),paddingBottom:C.spacing(2)}),tightLayout:(0,a.css)({flexDirection:"row",rowGap:C.spacing(1)})}}const D=(0,s.memo)(({variant:C="spacious",showSort:P,showPanelFilter:T,showFolderFilter:M,sortDirection:I,onSortChange:B,onFolderFilterChange:U,onPanelFilterChange:W})=>{const V=(0,l.of)(f),z=(0,s.useCallback)(O=>W(O.map(N=>N.id)),[W]),R=(0,s.useCallback)(O=>U(O),[U]);return(0,n.jsxs)("div",{className:(0,a.cx)(V.container,{[V.containerTight]:C==="tight"}),children:[P&&(0,n.jsx)(g.r,{value:I,onChange:B,filter:["alpha-asc","alpha-desc"]}),(M||T)&&(0,n.jsxs)("div",{className:(0,a.cx)(V.filterContainer,{[V.filterContainerTight]:C==="tight"}),children:[M&&(0,n.jsx)(u,{onChange:R}),T&&(0,n.jsx)(v.$,{onChange:z})]})]})});D.displayName="SearchControls";function f(C){return{container:(0,a.css)({display:"flex",gap:C.spacing(1),flexGrow:1,flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),containerTight:(0,a.css)({flexGrow:"initial",flexDirection:"column",justifyContent:"normal"}),filterContainer:(0,a.css)({display:"flex",flexDirection:"row",gap:C.spacing(1)}),filterContainerTight:(0,a.css)({flexDirection:"column",marginLeft:"initial"})}}},24610:(ne,j,e)=>{"use strict";e.d(j,{MZ:()=>v,EU:()=>M,VE:()=>I,UL:()=>R,$P:()=>O,Dm:()=>V,uH:()=>z,mP:()=>N,Av:()=>T,xH:()=>C,Wc:()=>D,MU:()=>b,NL:()=>P,MN:()=>m,_n:()=>g,$m:()=>E,LF:()=>W});var n=e(2543),a=e(38388);function s(F,G){const H=o(F,G),K=G.map((w,Q)=>({labelIndex:Q,match:!1,matcher:null}));return F.forEach(w=>{const Q=G.findIndex(k=>d(w,k));Q>-1&&(K[Q].match=!0,K[Q].matcher=w)}),{matches:H,details:K}}function d(F,G){const[H,K]=G,{label:w,type:Q,value:k}=F;if(H!==w)return!1;const te=i[Q];return te(K,k)}function o(F,G){for(const H of F)if(!l(H,G))return!1;return!0}function l(F,G){const{label:H,type:K,value:w}=F;let Q="";const k=Object.fromEntries(G)[H];k&&(Q=k);const te=i[K];try{return te(Q,w)}catch{return!1}}const i={"=":(F,G)=>F===G,"!=":(F,G)=>F!==G,"=~":(F,G)=>{const H=(0,a.bQ)(`^(?:${G})$`);return new RegExp(H.cleaned,H.flags).test(F)},"!~":(F,G)=>{const H=(0,a.bQ)(`^(?:${G})$`);return!new RegExp(H.cleaned,H.flags).test(F)}};var c=e(84266),p=e(182),h=e(52161),u=e(39659),r=e(63895);function v(F){return F.alertmanager_config.receivers||(F.alertmanager_config.receivers=[{name:"default "}]),F.alertmanager_config.route||(F.alertmanager_config.route={receiver:F.alertmanager_config.receivers[0].name}),F.template_files||(F.template_files={}),F}function g(F,G){return{...G,mute_time_intervals:G.mute_time_intervals?.filter(K=>K!==F)??[],active_time_intervals:G.active_time_intervals?.filter(K=>K!==F)??[],routes:G.routes?.map(K=>g(F,K))}}function E(F,G,H){return{...H,mute_time_intervals:H.mute_time_intervals?.map(K=>K===G?F:K),active_time_intervals:H.active_time_intervals?.map(K=>K===G?F:K),routes:H.routes?.map(K=>E(F,G,K))}}function x(F){return F.map(([G,H,K])=>[G,H,unquoteWithUnescape(K)])}function m(F){return F.isEqual?F.isRegex?c.ho.regex:c.ho.equal:F.isRegex?c.ho.notRegex:c.ho.notEqual}function y(F){switch(F){case c.ho.equal:return{isEqual:!0,isRegex:!1};case c.ho.notEqual:return{isEqual:!1,isRegex:!1};case c.ho.regex:return{isEqual:!0,isRegex:!0};case c.ho.notRegex:return{isEqual:!1,isRegex:!0}}}function b(F){return{name:F.name,value:F.value,operator:m(F)}}function D(F){return{name:F.name,value:F.value,...y(F.operator)}}function f(F){return`{ ${F.map(b).reduce((K,w)=>{const Q=`${w.name}${w.operator}"${w.value}"`;return K?`${K}, ${Q}`:Q},"")} }`}const C=[{label:c.ho.equal,description:"Equals",value:c.ho.equal},{label:c.ho.notEqual,description:"Does not equal",value:c.ho.notEqual},{label:c.ho.regex,description:"Matches regex",value:c.ho.regex},{label:c.ho.notRegex,description:"Does not match regex",value:c.ho.notRegex}];function P(F){const G=m(F);return[F.name,G,F.value]}function T(F,G){const H=(0,u.Dd)(F),K=G.map(P).map(r.iX);return o(K,H)}function M(...F){const G=F.map(r.Zc).flat(),H=(0,n.uniqWith)(G,n.isEqual);return f(H)}function I(F){return F===h.hY?"default":"unquote"}function B(){return getAllDataSources().filter(F=>F.type===DataSourceType.Alertmanager)}function U(F){return B().find(G=>F===G.uid)}function W(F){const{times:G,weekdays:H,days_of_month:K,months:w,years:Q,location:k}=F,te=V(G,k),q=z(H),se=R(K),re=O(w),Y=N(Q);return[te,q,se,re,Y].join(", ")}function V(F,G){return"Times: "+(F?F?.map(({start_time:H,end_time:K})=>`${H} - ${K} [${G??"UTC"}]`).join(" and "):"All")}function z(F){return"Weekdays: "+(F?.map(G=>{if(G.includes(":"))return G.split(":").map(H=>{const K=H.slice(0,3);return K[0].toLocaleUpperCase()+K.slice(1)}).join("-");{const H=G.slice(0,3);return H[0].toLocaleUpperCase()+H.slice(1)}}).join(", ")??"All")}function R(F){return"Days of the month: "+(F?.join(", ")??"All")}function O(F){return"Months: "+(F?.join(", ")??"All")}function N(F){return"Years: "+(F?.join(", ")??"All")}},24619:(ne,j,e)=>{"use strict";e.d(j,{$k:()=>l,Gi:()=>a,JS:()=>c,N1:()=>p,Q8:()=>h,Si:()=>s,cF:()=>n,lh:()=>i,qr:()=>o,s1:()=>d});var n=(u=>(u.Firing="firing",u.Inactive="inactive",u.Pending="pending",u.Recovering="recovering",u.Unknown="unknown",u))(n||{}),a=(u=>(u.Normal="Normal",u.Alerting="Alerting",u.Pending="Pending",u.Recovering="Recovering",u.NoData="NoData",u.Error="Error",u))(a||{});function s(u){return Object.values(n).includes(u)}function d(u){return Object.values(a).some(r=>r===u)}function o(u){const r=Object.values(n);return u!=null&&!r.includes(u)}function l(u){const r=u.match(/\((.*?)\)/);return r?r[1]:""}function i(u){return o(u)?u.split(" ")[0]:u}var c=(u=>(u.Alerting="alerting",u.Recording="recording",u))(c||{}),p=(u=>(u.Cortex="Cortex",u.Mimir="Mimir",u.Prometheus="Prometheus",u.Thanos="Thanos",u))(p||{}),h=(u=>(u.Alerting="Alerting",u.NoData="NoData",u.KeepLast="KeepLast",u.OK="OK",u.Error="Error",u))(h||{})},24898:(ne,j,e)=>{"use strict";e.d(j,{_:()=>o});var n=e(74848),a=e(2543),s=e.n(a),d=e(16692);const o=({actions:u,children:r})=>{const v=(0,a.filter)(u,p),g=(0,a.filter)(u,h);return v.length?(0,n.jsx)(l,{actions:v,children:r}):g.length?(0,n.jsx)(i,{actions:g,children:r}):null},l=({actions:u,children:r})=>{const v=(0,d.iI)();return c(v,u)?(0,n.jsx)(n.Fragment,{children:r}):null},i=({actions:u,children:r})=>{const v=(0,d.e2)();return c(v,u)?(0,n.jsx)(n.Fragment,{children:r}):null};function c(u,r){return(0,a.chain)(u).pick(r).values().value().some(([v,g])=>g===!0)}function p(u){return Object.values(d.QI).includes(u)}function h(u){return Object.values(d.RY).includes(u)}},24961:(ne,j,e)=>{"use strict";e.d(j,{z8:()=>se,yz:()=>X});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(25229),l=e(92745),i=e(63142),c=e(41654),p=e(30703),h=e(66404),u=e(45967),r=e(16194),v=e(87063),g=e(89640),E=e(45861),x=e(88559),m=e(10427),y=e(8307),b=e(28141),D=e(5358),f=e(22628),C=e(56476),P=e(16692),T=e(92367),M=e(27691),I=e(1972),B=e(49779),U=e(99887);const W=()=>(0,n.jsx)(U.E,{text:(0,l.t)("alerting.unused-contact-point-badge.text-unused","Unused"),"aria-label":(0,l.t)("alerting.unused-contact-point-badge.aria-label-unused","unused"),color:"orange",icon:"exclamation-triangle",tooltip:(0,l.t)("alerting.unused-contact-point-badge.tooltip-unused","This contact point is not used in any notification policy or alert rule")});var V=e(66056);const z=({contactPoint:ee,onDelete:ae})=>{const{name:le,id:L,provisioned:ie,policies:oe=[]}=ee,ue=(0,i.of)(R),[ye,fe]=(0,d.useState)(!1),{selectedAlertmanager:Ee}=(0,D.VI)(),Ae=(0,C.dM)(Ee),[Ge,Fe]=(0,P.L7)(P.QI.ExportContactPoint),[Pe,Ve]=(0,P.L7)(P.QI.UpdateContactPoint),[me,Se]=(0,P.L7)(P.QI.UpdateContactPoint),[Qe,Ue]=(0,y.G)(),Ie=(0,V.T8)(Ee,ee),Re=oe.filter(qe=>qe.route.type!=="auto-generated"),Ke=(0,C.gw)(ee,f.T.InUseRoutes),Le=Ae?Number(Ke):oe.length,ze=Ae?Number(Ke):Re.length,Be=Number((0,C.gw)(ee,f.T.InUseRules))||0,$e=Ae?!!(Le||Be):oe.length>0,Ye=Ae?(0,C.Au)(ee):Ve,ge=Pe&&Ye&&!ie,pe=Ae?(0,C.zl)(ee):Se,Me=me&&pe&&(!ie&&!ze&&!Be),be=[];if(Ie&&be.push((0,n.jsx)(d.Fragment,{children:(0,n.jsx)(v.W.Item,{icon:"unlock",label:(0,l.t)("alerting.contact-point-header.label-manage-permissions","Manage permissions"),onClick:()=>fe(!0)})},"manage-permissions")),Ge&&be.push((0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(v.W.Item,{icon:"download-alt",label:(0,l.t)("alerting.contact-point-header.export-label-export","Export"),ariaLabel:(0,l.t)("alerting.contact-point-header.export-ariaLabel-export","Export"),disabled:!Fe,"data-testid":"export",onClick:()=>Ue(le)}),(0,n.jsx)(v.W.Divider,{})]},"export-contact-point")),me){const qe=(0,l.t)("alerting.contact-points.delete-reasons.no-permissions","You do not have the required permission to delete this contact point"),st=(0,l.t)("alerting.contact-points.delete-reasons.provisioned","Contact point is provisioned and cannot be deleted via the UI"),rt=(0,l.t)("alerting.contact-points.delete-reasons.policies","Contact point is referenced by one or more notification policies"),ot=(0,l.t)("alerting.contact-points.delete-reasons.rules","Contact point is referenced by one or more alert rules"),mt=[pe?"":qe,ie?st:"",ze>0?rt:"",Be?ot:""].filter(Boolean),pt=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.x6,{i18nKey:"alerting.contact-points.delete-reasons.heading",children:"Contact point cannot be deleted for the following reasons:"}),(0,n.jsx)("br",{}),mt.map(ke=>(0,n.jsx)("li",{children:ke},ke))]});be.push((0,n.jsx)(m.A,{shouldWrap:!Me,wrap:ke=>(0,n.jsx)(u.m,{content:pt,placement:"top",children:(0,n.jsx)("span",{children:ke})}),children:(0,n.jsx)(v.W.Item,{label:(0,l.t)("alerting.contact-point-header.label-delete","Delete"),ariaLabel:(0,l.t)("alerting.contact-point-header.ariaLabel-delete","Delete"),icon:"trash-alt",destructive:!0,disabled:!Me,onClick:()=>ae(ee)})},"delete-contact-point"))}const Oe=(0,l.t)("alerting.contact-points.used-by","Used by {{ count }} notification policy",{count:Le}),Ne=(0,l.t)("alerting.contact-points.used-by-rules","Used by {{ count }} alert rule",{count:Be}),We=L||le;return(0,n.jsxs)("div",{className:ue.headerWrapper,children:[(0,n.jsxs)(c.B,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsx)(c.B,{alignItems:"center",gap:1,minWidth:0,children:(0,n.jsx)(h.E,{element:"h2",variant:"body",weight:"medium",truncate:!0,children:le})}),Le>0&&(0,n.jsx)(g.Y,{href:(0,T.G)("/alerting/routes",{contactPoint:le}),variant:"bodySmall",color:"primary",inline:!1,children:Oe}),Be>0&&(0,n.jsx)(g.Y,{href:(0,T.G)("/alerting/list",{search:`contactPoint:"${le}"`}),variant:"bodySmall",color:"primary",inline:!1,children:Ne}),ie&&(0,n.jsx)(I.rS,{tooltip:!0,provenance:(0,C.gw)(ee,f.T.Provenance)}),!$e&&(0,n.jsx)(W,{}),(0,n.jsx)(B.h,{}),(0,n.jsx)(E.z9,{tooltipPlacement:"top",tooltip:ie?(0,l.t)("alerting.contact-point-header.tooltip-provisioned-contact-points","Provisioned contact points cannot be edited in the UI"):void 0,variant:"secondary",size:"sm",icon:ge?"pen":"eye",type:"button","data-testid":`${ge?"edit":"view"}-action`,href:`/alerting/notifications/receivers/${encodeURIComponent(We)}/edit`,children:ge?(0,l.t)("alerting.contact-point-header.button-edit","Edit"):(0,l.t)("alerting.contact-point-header.button-view","View")}),be.length>0&&(0,n.jsx)(x.m,{overlay:(0,n.jsx)(v.W,{children:be}),children:(0,n.jsx)(M.A,{"aria-label":(0,l.t)("alerting.contact-point-header.aria-label-more-actions",'More actions for contact point "{{contactPointName}}"',{contactPointName:ee.name})})})]}),Qe,ye&&(0,n.jsx)(b.v,{resource:"receivers",resourceId:ee.id,resourceName:ee.name,onClose:()=>fe(!1)})]})},R=ee=>({headerWrapper:(0,a.css)({background:`${ee.colors.background.secondary}`,padding:`${ee.spacing(1)} ${ee.spacing(1.5)}`,borderBottom:`solid 1px ${ee.colors.border.weak}`,borderTopLeftRadius:`${ee.shape.radius.default}`,borderTopRightRadius:`${ee.shape.radius.default}`})});var O=e(22787),N=e(77256);const F=ee=>{const[ae,le]=(0,d.useState)(!1),[L,ie]=(0,d.useState)(),[oe,ue]=(0,d.useState)(),[ye,fe]=(0,d.useState)(!1),Ee=(0,d.useCallback)(()=>{ye||(ie(void 0),le(!1),ue(void 0))},[ye]),Ae=(0,d.useCallback)(({name:Pe,resourceVersion:Ve})=>{ie({name:Pe,resourceVersion:Ve}),le(!0),ue(void 0)},[]),Ge=(0,d.useCallback)(()=>{L&&(fe(!0),ee(L).then(()=>le(!1)).catch(ue).finally(()=>{fe(!1)}))},[ee,L]);return[(0,d.useMemo)(()=>oe?(0,n.jsx)(G,{isOpen:ae,onDismiss:Ee,error:oe}):(0,n.jsxs)(O.a,{isOpen:ae,onDismiss:Ee,closeOnBackdropClick:!ye,closeOnEscape:!ye,title:(0,l.t)("alerting.use-delete-contact-point-modal.modal-element.title-delete-contact-point","Delete contact point"),children:[(0,n.jsx)("p",{children:(0,n.jsx)(l.x6,{i18nKey:"alerting.use-delete-contact-point-modal.modal-element.deleting-contact-point-permanently-remove",children:"Deleting this contact point will permanently remove it."})}),(0,n.jsx)("p",{children:(0,n.jsx)(l.x6,{i18nKey:"alerting.use-delete-contact-point-modal.modal-element.delete-contact-point",children:"Are you sure you want to delete this contact point?"})}),(0,n.jsxs)(O.a.ButtonRow,{children:[(0,n.jsx)(E.$n,{type:"button",variant:"destructive",onClick:Ge,disabled:ye,children:ye?(0,l.t)("alerting.use-delete-contact-point-modal.deleting","Deleting..."):(0,l.t)("alerting.use-delete-contact-point-modal.delete-confirm","Yes, delete contact point")}),(0,n.jsx)(E.$n,{type:"button",variant:"secondary",onClick:Ee,disabled:ye,children:(0,n.jsx)(l.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})})]})]}),[oe,Ee,Ge,ye,ae]),Ae,Ee]},G=({isOpen:ee,onDismiss:ae,error:le})=>(0,n.jsxs)(O.a,{isOpen:ee,onDismiss:ae,closeOnBackdropClick:!0,closeOnEscape:!0,title:(0,l.t)("alerting.error-modal.title-something-went-wrong","Something went wrong"),children:[(0,n.jsx)("p",{children:(0,n.jsx)(l.x6,{i18nKey:"alerting.error-modal.failed-to-update-your-configuration",children:"Failed to update your configuration:"})}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,N.JZ)(le)})})]});var H=e(97507);const K={pagerduty:"PagerDuty",pushover:"Pushover",slack:"Slack",opsgenie:"OpsGenie",webhook:"Webhook",victorops:"VictorOps",wechat:"WeChat",discord:"Discord",webex:"Cisco Webex Teams",sns:"Amazon SNS",telegram:"Telegram",msteams:"Microsoft Teams"},w={discord:"discord",email:"envelope",googlechat:"google-hangouts-alt",hipchat:"hipchat",line:"line",pagerduty:"pagerduty",slack:"slack",teams:"microsoft",telegram:"telegram-alt",webhook:"link",sns:"amazon"};var Q=e(1625);const k=({metadata:{icon:ee,title:ae,externalUrl:le,warning:L}})=>{const ie=(0,i.of)(te);return(0,n.jsxs)(c.B,{alignItems:"center",gap:.5,children:[(0,n.jsxs)(c.B,{direction:"row",alignItems:"center",gap:.5,children:[L?(0,n.jsx)(u.m,{content:L,theme:"error",children:(0,n.jsx)(p.I,{name:"exclamation-triangle",className:ie.warnIcon})}):(0,n.jsx)("img",{src:ee,alt:ae,height:"16px"}),(0,n.jsx)("span",{children:ae})]}),le&&(0,n.jsx)(E.z9,{"aria-label":(0,l.t)("alerting.receiver-metadata-badge.aria-label-open-external-link","Open external link"),icon:"external-link-alt",href:le,target:"_blank",variant:"secondary",size:"sm"})]})},te=ee=>({warnIcon:(0,a.css)({fill:ee.colors.warning.text})});var q=e(3887);const se=({contactPoint:ee})=>{const{grafana_managed_receiver_configs:ae}=ee,le=(0,i.of)(_),{selectedAlertmanager:L}=(0,D.VI)(),[ie]=(0,H.$x)({alertmanager:L}),[oe,ue]=F(ie.execute),ye=ae.some(fe=>!!fe[q.MX]);return(0,n.jsxs)("div",{className:le.contactPointWrapper,"data-testid":"contact-point",children:[(0,n.jsxs)(c.B,{direction:"column",gap:0,children:[(0,n.jsx)(z,{contactPoint:ee,onDelete:fe=>ue({name:fe.id||fe.name,resourceVersion:fe.metadata?.resourceVersion})}),ye?(0,n.jsx)("div",{children:ae.map((fe,Ee)=>{const Ae=fe[q.v4],Ge=fe[q.MX],Fe=!fe.disableResolveMessage,Pe=fe[q.sW],Ve=Ge.name+Ee;return(0,n.jsx)(re,{name:Ge.name,type:fe.type,description:(0,V.aM)(fe),diagnostics:Ae,pluginMetadata:Pe,sendingResolved:Fe},Ve)})}):(0,n.jsx)("div",{className:le.integrationWrapper,children:(0,n.jsx)(X,{receivers:ae})})]}),oe]})},re=ee=>{const{name:ae,type:le,description:L,diagnostics:ie,pluginMetadata:oe,sendingResolved:ue=!0}=ee,ye=(0,i.of)(_),fe=ie!==void 0;return(0,n.jsx)("div",{className:ye.integrationWrapper,children:(0,n.jsxs)(c.B,{direction:"column",gap:.5,children:[(0,n.jsx)(Y,{name:ae,type:le,description:L,pluginMetadata:oe}),fe&&(0,n.jsx)(J,{diagnostics:ie,sendingResolved:ue})]})})};function Y(ee){const{name:ae,type:le,description:L,pluginMetadata:ie}=ee,oe=w[le];return(0,n.jsxs)(c.B,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsxs)(c.B,{direction:"row",alignItems:"center",gap:.5,children:[oe&&(0,n.jsx)(p.I,{name:oe}),ie?(0,n.jsx)(k,{metadata:ie}):(0,n.jsx)(h.E,{variant:"body",color:"primary",children:ae})]}),L&&(0,n.jsx)(h.E,{variant:"bodySmall",color:"secondary",children:L})]})}const X=({receivers:ee,limit:ae})=>{const le=ae??Number.MAX_VALUE,L=(0,s.groupBy)(ee,ye=>ye.type),ie=(0,s.size)(L),oe=Object.entries(L).slice(0,le),ue=ie-le;return(0,n.jsx)(c.B,{direction:"column",gap:0,children:(0,n.jsxs)(c.B,{direction:"row",alignItems:"center",gap:1,children:[oe.length===0&&(0,n.jsx)(Q.P,{color:"warning",icon:"exclamation-triangle",children:(0,n.jsx)(l.x6,{i18nKey:"alerting.contact-points.no-integrations",children:"No integrations configured"})}),oe.map(([ye,fe],Ee)=>{const Ae=w[ye],Ge=K[ye]??(0,s.upperFirst)(ye),Fe=(0,s.size)(L)-1===Ee,Pe=fe[0];return(0,n.jsxs)(d.Fragment,{children:[(0,n.jsxs)(c.B,{direction:"row",alignItems:"center",gap:.5,children:[Pe[q.sW]?.icon&&(0,n.jsx)("img",{width:"14px",src:Pe[q.sW]?.icon,alt:Pe[q.sW]?.title}),Ae&&(0,n.jsx)(p.I,{name:Ae}),(0,n.jsxs)("span",{children:[Ge,fe.length>1&&` (${fe.length})`]})]}),!Fe&&"\u22C5"]},ye)}),ue>0&&(0,n.jsx)("span",{children:`+${ue} more`})]})})},J=({diagnostics:ee,sendingResolved:ae})=>{const le=(0,i.of)(_),L=!!ee.lastNotifyAttemptError,ie=(0,o.KQ)(ee.lastNotifyAttempt),oe=ee.lastNotifyAttemptDuration,ue=ie.isValid();return(0,n.jsx)("div",{className:le.metadataRow,children:(0,n.jsx)(c.B,{direction:"row",gap:1,children:L?(0,n.jsx)(Q.P,{color:"error",icon:"exclamation-circle",children:(0,n.jsx)(u.m,{content:ee.lastNotifyAttemptError,children:(0,n.jsx)("span",{children:(0,n.jsx)(l.x6,{i18nKey:"alerting.contact-points.last-delivery-failed",children:"Last delivery attempt failed"})})})}):(0,n.jsxs)(n.Fragment,{children:[ue&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Q.P,{icon:"clock-nine",children:[(0,n.jsx)(l.x6,{i18nKey:"alerting.contact-points.last-delivery-attempt",children:"Last delivery attempt"}),(0,n.jsx)(u.m,{content:ie.toLocaleString(),children:(0,n.jsx)("span",{children:(0,n.jsx)(h.E,{color:"primary",children:ie.locale("en").fromNow()})})})]}),(0,n.jsx)(Q.P,{icon:"stopwatch",children:(0,n.jsxs)(l.x6,{i18nKey:"alerting.contact-points.delivery-duration",children:["Last delivery took ",(0,n.jsx)(r.S,{content:oe})]})})]}),!ue&&(0,n.jsx)(Q.P,{icon:"clock-nine",children:(0,n.jsx)(l.x6,{i18nKey:"alerting.contact-points.no-delivery-attempts",children:"No delivery attempts"})}),!ae&&(0,n.jsx)(Q.P,{icon:"info-circle",children:(0,n.jsxs)(l.x6,{i18nKey:"alerting.contact-points.only-firing",children:["Delivering ",(0,n.jsx)(h.E,{color:"primary",children:"only firing"})," notifications"]})})]})})})},_=ee=>({contactPointWrapper:(0,a.css)({borderRadius:ee.shape.radius.default,border:`solid 1px ${ee.colors.border.weak}`,borderBottom:"none"}),integrationWrapper:(0,a.css)({position:"relative",background:`${ee.colors.background.primary}`,padding:`${ee.spacing(1)} ${ee.spacing(1.5)}`,borderBottom:`solid 1px ${ee.colors.border.weak}`}),metadataRow:(0,a.css)({borderBottomLeftRadius:`${ee.shape.radius.default}`,borderBottomRightRadius:`${ee.shape.radius.default}`}),noIntegrationsContainer:(0,a.css)({paddingTop:`${ee.spacing(1.5)}`,paddingLeft:`${ee.spacing(1.5)}`})})},25076:(ne,j,e)=>{"use strict";e.d(j,{l:()=>a,r:()=>s});let n;function a(d){n=d}function s(){return n}},25149:(ne,j,e)=>{"use strict";e.d(j,{m:()=>o});var n=e(74848),a=e(92745),s=e(8207),d=e(29855);function o({activeTab:l,onTabChange:i,children:c,onClose:p,formatProviders:h,title:u="Export"}){const r=Object.values(h).map(g=>({label:g.name,value:g.exportFormat})),v=h.length>1?(0,a.t)("alerting.export.subtitle.formats","Select the format and download the file or copy the contents to clipboard"):(0,a.t)("alerting.export.subtitle.one-format","Download the file or copy the contents to clipboard");return(0,n.jsx)(s._,{title:u,subtitle:v,tabs:(0,n.jsx)(d.sb,{tabs:r,setActiveTab:i,activeTab:l}),onClose:p,size:"md",children:c})}},25157:(ne,j,e)=>{"use strict";e.d(j,{fP:()=>le,Ay:()=>ie});var n=e(74848),a=e(96540),s=e(22803),d=e(71468),o=e(54148),l=e(63704),i=e(92745),c=e(36490),p=e(79104),h=e(71599),u=e(93256),r=e(7895),v=e(8515),g=e(36219),E=e(6890),x=e(43707),m=e(5423),y=e(65642),b=e(64762),D=e(73427),f=e(94232),C=e(38206),P=e(43550),T=e(51898),M=e(88559),I=e(45861),B=e(30703),U=e(87063),W=e(77731),V=e(23289),z=e(52763),R=e(37918);const N=({dashboard:ue})=>{const ye=(0,a.useMemo)(()=>(0,W._u)(),[]),fe=(0,z.wA)(),Ee=(0,z.d4)(Ae=>Ae.dashboard.initialDatasource);return(0,n.jsxs)(U.W,{children:[(0,n.jsx)(U.W.Item,{testId:T.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,i.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const Ae=(0,W.OK)(ue,Ee);V.c.toolbarAddButtonClicked({item:"add_visualization"}),c.Ny.partial({editPanel:Ae}),fe((0,R.Ub)(void 0))}},"add-visualisation"),(0,n.jsx)(U.W.Item,{testId:T.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,i.t)("dashboard.add-menu.row","Row"),onClick:()=>{V.c.toolbarAddButtonClicked({item:"add_row"}),(0,W.SD)(ue)}},"add-row"),(0,n.jsx)(U.W.Item,{testId:T.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,i.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{V.c.toolbarAddButtonClicked({item:"import_from_library"}),(0,W.s3)(ue)}},"add-panel-lib"),(0,n.jsx)(U.W.Item,{testId:T.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,i.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{V.c.toolbarAddButtonClicked({item:"paste_panel"}),(0,W.no)(ue,ye)},disabled:!ye},"add-panel-clipboard")]})},G=({dashboard:ue,onToolbarAddMenuOpen:ye})=>{const[fe,Ee]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{fe&&ye&&ye()},[fe,ye]),(0,n.jsx)(M.m,{overlay:()=>(0,n.jsx)(N,{dashboard:ue}),placement:"bottom",offset:[0,6],onVisibleChange:Ee,children:(0,n.jsxs)(I.$n,{variant:"secondary",size:"sm",fill:"outline","data-testid":T.Tp.components.PageToolbar.itemButton("Add button"),children:[(0,n.jsx)(i.x6,{i18nKey:"dashboard.toolbar.add",children:"Add"}),(0,n.jsx)(B.I,{name:fe?"angle-up":"angle-down",size:"lg"})]})})};var H=e(37010),K=e(22429),w=e(98036),Q=e(4590),k=e(69289),te=e(87745),q=e(75541),se=e(34339),re=e(74618),Y=e(58662);const X=({dashboard:ue})=>(0,n.jsx)(I.$n,{"data-testid":T.Tp.pages.Dashboard.DashNav.shareButton,variant:"primary",size:"sm",onClick:()=>{V.c.toolbarShareClick(),c.Ny.partial({shareView:Y.wr.link})},children:(0,n.jsx)(i.x6,{i18nKey:"dashboard.toolbar.share-button",children:"Share"})}),J={removeNavIndex:P.Im,setStarred:C.ci,updateTimeZoneForSession:k.Cj,updateNavIndex:E.Vz},_=ue=>({navIndex:ue.navIndex}),ee=(0,d.connect)(_,J);function ae(ue){registerDynamicDashNavAction("left",ue)}function le(ue){(0,q.Y)("right",ue)}const L=(0,a.memo)(ue=>{(0,o.zy)();const ye=(0,p.C)();(0,f.u)(ue.dashboard.events,te.Cf);const fe=ue.dashboard.snapshot?.originalUrl??"",Ee=()=>{window.location.href=l.sQ.sanitizeUrl(ue.dashboard.snapshot.originalUrl)},Ae=(0,b._2)(),Ge=()=>{try{const ze=new URL(l.sQ.sanitizeUrl(fe),y.Ay.appUrl),Be=new URL(y.Ay.appUrl);ze.host!==Be.host?D.lE.publish(new te.S8({component:h.u,props:{title:(0,i.t)("dashboard.dash-nav.on-open-snapshot-original.title.proceed-to-external-site","Proceed to external site?"),modalClass:oe,body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["This link connects to an external website at"," ",(0,n.jsx)("code",{children:fe})]}),(0,n.jsx)("p",{children:"Are you sure you'd like to proceed?"})]}),confirmVariant:"primary",confirmText:(0,i.t)("dashboard.dash-nav.on-open-snapshot-original.confirmText.proceed","Proceed"),onConfirm:Ee}})):Ee()}catch(ze){Ae.error("Invalid URL",ze instanceof Error?ze.message:void 0)}},Fe=()=>{V.c.toolbarFavoritesClick();const ze=(0,K.UA)(),{dashboard:Be,navIndex:$e,removeNavIndex:Ye,setStarred:de,updateNavIndex:ge}=ue;ze.starDashboard(Be.uid,!!Be.meta.isStarred).then(pe=>{de({id:Be.uid,title:Be.title,url:Be.meta.url??"",isStarred:pe});const De=$e.starred;if(pe)De.children?.push({id:C.L1+Be.uid,text:Be.title,url:Be.meta.url??"",parentItem:De});else{Ye(C.L1+Be.uid);const Me=De.children?.findIndex(be=>be.id===C.L1+Be.uid);Me&&De.children?.splice(Me,1)}ge(De),Be.meta.isStarred=pe,ye()})},Pe=()=>{V.c.toolbarSettingsClick(),c.Ny.partial({editview:"settings"})},Ve=()=>{Q._o.prev()},me=()=>{Q._o.next()},Se=()=>{Q._o.stop(),ye()},Qe=(ze,Be)=>{ze.map(($e,Ye)=>{const de=$e.component,ge=(0,a.createElement)(de,{...ue,key:`button-custom-${Ye}`});typeof $e.index=="number"?Be.splice($e.index,0,ge):Be.push(ge)})},Ue=()=>Q._o.state.isPlaying,Ie=()=>{const ze=y.Ay.buildInfo.env==="development",{dashboard:Be,kioskMode:$e}=ue,{canStar:Ye,isStarred:de}=Be.meta,ge=[];if($e||Ue())return[];if(Ye){let pe=de?(0,i.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,i.t)("dashboard.toolbar.mark-favorite","Mark as favorite");ge.push((0,n.jsx)(se._,{tooltip:pe,icon:de?"favorite":"star",iconType:de?"mono":"default",iconSize:"lg",onClick:Fe},"button-star"))}return Be.uid&&ge.push((0,n.jsx)(w.u,{uid:Be.uid},"public-dashboard-badge")),ze&&y.Ay.featureToggles.dashboardScene&&ge.push((0,n.jsx)(se._,{tooltip:(0,i.t)("dashboard.dash-nav.render-left-actions.tooltip-view-as-scene","View as Scene"),icon:"apps",onClick:()=>{c.Ny.partial({scenes:!0})}},"button-scenes")),Qe(q.C.left,ge),ge},Re=()=>(0,n.jsxs)(u.e,{children:[(0,n.jsx)(r.I,{tooltip:(0,i.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Ve,narrow:!0}),(0,n.jsx)(r.I,{onClick:Se,children:(0,n.jsx)(i.x6,{i18nKey:"dashboard.toolbar.playlist-stop",children:"Stop playlist"})}),(0,n.jsx)(r.I,{tooltip:(0,i.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:me,narrow:!0})]},"playlist-buttons"),Ke=()=>{const{dashboard:ze,updateTimeZoneForSession:Be,hideTimePicker:$e}=ue;return $e?null:(0,n.jsx)(re.$,{dashboard:ze,onChangeTimeZone:Be},"time-controls")},Le=()=>{const{dashboard:ze,isFullscreen:Be,hideTimePicker:$e}=ue,{canSave:Ye,canEdit:de,showSettings:ge,canShare:pe}=ze.meta,{snapshot:De}=ze,Me=De&&De.originalUrl,be=[];return Ue()?[Re(),Ke()]:(Me&&be.push((0,n.jsx)(r.I,{tooltip:(0,i.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:Ge,icon:"link"},"button-snapshot")),Ye&&!Be&&be.push((0,n.jsx)(v.$s,{children:({showModal:Oe,hideModal:Ne})=>(0,n.jsx)(r.I,{tooltip:(0,i.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Oe(H.$,{dashboard:ze,onDismiss:Ne})}})},"button-save")),Qe(q.C.right,be),ge&&be.push((0,n.jsx)(r.I,{tooltip:(0,i.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Pe},"button-settings")),de&&!Be&&be.push((0,n.jsx)(G,{onToolbarAddMenuOpen:V.c.toolbarAddClick,dashboard:ze},"panel-add-dropdown")),pe&&be.push((0,n.jsx)(X,{dashboard:ze},"button-share")),$e||be.push((0,n.jsx)(m.K,{},"toolbar-separator")),be.push(Ke()),be)};return(0,n.jsx)(x.H,{actions:(0,n.jsxs)(n.Fragment,{children:[Ie(),(0,n.jsx)(m.K,{leftActionsSeparator:!0}),(0,n.jsx)(g.U,{alignment:"right",children:Le()})]})})});L.displayName="DashNav";const ie=ee(L),oe=(0,s.css)({width:"max-content",maxWidth:"80vw"})},25206:(ne,j,e)=>{"use strict";e.d(j,{AA:()=>u,D$:()=>c,E2:()=>p,MK:()=>o,qZ:()=>h,xt:()=>i});var n=e(65307),a=e(88813),s=e(93612),d=e(96120);const o={...a.Vg,type:"adhoc",datasource:null,filters:[]},l=(0,n.Z0)({name:"templating/adhoc",initialState:d.j,reducers:{filterAdded:(r,v)=>{const g=(0,s.Fs)(r,v.payload.id);g.type==="adhoc"&&g.filters.push(v.payload.data)},filterRemoved:(r,v)=>{const g=(0,s.Fs)(r,v.payload.id);if(g.type!=="adhoc")return;const E=v.payload.data;g.filters.splice(E,1)},filterUpdated:(r,v)=>{const g=(0,s.Fs)(r,v.payload.id);if(g.type!=="adhoc")return;const{filter:E,index:x}=v.payload.data;g.filters[x]=E},filtersRestored:(r,v)=>{const g=(0,s.Fs)(r,v.payload.id);g.type==="adhoc"&&(g.filters=v.payload.data)}}}),{filterAdded:i,filterRemoved:c,filterUpdated:p,filtersRestored:h}=l.actions,u=l.reducer},25240:(ne,j,e)=>{"use strict";e.d(j,{S5:()=>o,k0:()=>s});var n=e(60379),a=e(20720);function s(l,i=!1){return new Promise(c=>{const p=document.createElement("script");p.onload=c,p.src=l,p.async=i,document.head.appendChild(p)})}const d=(0,n.h)("EchoSrv"),o=d.logger;(0,a.h)("echo",void 0,d)},25260:(ne,j,e)=>{"use strict";e.d(j,{_:()=>v,l:()=>h});var n=e(81160),a=e(41119),s=e(16515),d=e(95004),o=e(79319),l=e(46644),i=e(47433),c=e(64761),p=e(91146);const h=!0,u=2;var r=(b=>(b.aggregate="aggregate",b.groupBy="groupby",b))(r||{});const v={id:c.F.groupToNestedTable,name:"Group to nested tables",description:"Group data by a field value and create nested tables with the grouped data",defaultOptions:{showSubframeHeaders:h,fields:{}},isApplicable:b=>(0,p.f)(b)>=u?o.M.Applicable:o.M.NotApplicable,isApplicableDescription:b=>{const D=(0,p.f)(b);return`The Group to nested table transformation requires a series with at least ${u} fields to work. The maximum number of fields found on a series is ${D}`},operator:b=>D=>D.pipe((0,n.T)(f=>{if(!Object.keys(b.fields).find(T=>b.fields[T].operation==="groupby"))return f;const P=[];for(const T of f){const M=T.fields.filter(W=>E(W,b));if(M.length===0)continue;const I=(0,i.Y2)(T,M),B=(0,i.Ce)(M,I),U=y(I,b);for(let W=0;W<T.fields.length;W++){const V=T.fields[W];if(!x(V,b))continue;const z=(0,s.Ct)(V),R=b.fields[z].aggregations,O={};I.forEach(N=>{const F=N[z],G=(0,l.Nw)({field:F,reducers:R});for(const H of R)Array.isArray(O[H])||(O[H]=[]),O[H].push(G[H])});for(const N of R){const F={name:`${z} (${N})`,values:O[N],type:d.PU.other,config:{}};F.type=m(N,V,F),B.push(F)}}B.push({config:{},name:"__nestedFrames",type:d.PU.nestedFrames,values:U}),P.push({fields:B,length:I.size})}return P}))};function g(b,D,f){return{meta:{custom:{noHeader:!(f.showSubframeHeaders===void 0?h:f.showSubframeHeaders)}},length:D,fields:b}}const E=(b,D)=>{const f=(0,s.Ct)(b);return D?.fields[f]?.operation==="groupby"},x=(b,D)=>{const f=(0,s.Ct)(b);return D?.fields[f]?.operation==="aggregate"&&Array.isArray(D?.fields[f].aggregations)&&D?.fields[f].aggregations.length>0},m=(b,D,f)=>{switch(b){case l.gy.allIsNull:return d.PU.boolean;case l.gy.last:case l.gy.lastNotNull:case l.gy.first:case l.gy.firstNotNull:return D.type;default:return(0,a.dF)(f)??d.PU.string}};function y(b,D){const f=[];for(const[,C]of b){const P=[];for(const[T,M]of Object.entries(C)){const I=D.fields[T];(I===void 0||I.aggregations===void 0||I.operation==="aggregate"&&I.aggregations.length===0||I.operation===null||I.operation===void 0)&&P.push(M)}P.length>0?f.push([g(P,P[0].values.length,D)]):f.push([g([],0,D)])}return f}},25274:(ne,j,e)=>{"use strict";e.d(j,{JD:()=>i,Kj:()=>l,YW:()=>d,oF:()=>s,oG:()=>c,xG:()=>o});var n=e(47184),a=e(36656);function s(p){return`SELECT ${p.map(u=>{let r="";return u.name&&u.alias?r+=`${u.name}(${u.parameters?.map(v=>`${v.name}`)}) AS ${u.alias}`:u.name?r+=`${u.name}(${u.parameters?.map(v=>`${v.name}`)})`:u.alias?r+=`${u.parameters?.map(v=>`${v.name}`)} AS ${u.alias}`:r+=`${u.parameters?.map(v=>`${v.name}`)}`,r}).join(", ")} `}const d=p=>{if(!p)return!1;const h=p.some(r=>r.parameters?.length||r.parameters?.some(v=>v.name)),u=p.some(r=>r.name);return h||u};function o(p){return{type:a._.GroupBy,property:{type:a.D.String,name:p}}}function l(p){return{type:a._.Property,property:{type:a.D.String,name:p}}}function i(p){return{type:a._.Function,name:p,parameters:[]}}function c(p){return p?.name?(0,n.z)(p.name):null}},25346:(ne,j,e)=>{"use strict";e.d(j,{K:()=>a});const n="12.3.0",a={showImage:!0}},25379:(ne,j,e)=>{"use strict";e.d(j,{$:()=>c,Z:()=>i});var n=e(74848),a=e(22803),s=e(92145),d=e(37386),o=e(87105),l=e(63142);function i({value:p,defaultValue:h,name:u,description:r,placeholder:v,onChange:g,onBlur:E,ariaLabel:x,required:m,width:y,testId:b}){const D=(0,l.of)(c),f=(0,s.Bi)();return(0,n.jsx)(d.D,{label:u,description:r,htmlFor:f,children:(0,n.jsx)(o.f,{id:f,rows:2,value:p,defaultValue:h,onChange:g,onBlur:E,placeholder:v,required:m,"aria-label":x,cols:y,className:D.textarea,"data-testid":b})})}function c(p){return{textarea:(0,a.css)({whiteSpace:"pre-wrap",minHeight:p.spacing(4),height:"auto",overflow:"auto",padding:`${p.spacing(.75)} ${p.spacing(1)}`,width:"inherit",[p.breakpoints.down("sm")]:{width:"100%"}})}}},25460:(ne,j,e)=>{"use strict";e.d(j,{N:()=>d});var n=e(74848),a=e(22803),s=e(63142);function d(){const l=(0,s.of)(o);return(0,n.jsx)("div",{className:l.divider})}const o=l=>({divider:(0,a.css)({height:1,backgroundColor:l.colors.border.weak,margin:l.spacing(.5,0)})})},25531:(ne,j,e)=>{"use strict";e.d(j,{v:()=>U});var n=e(74848),a=e(22803),s=e(2543),d=e(36638),o=e(83340),l=e(92745),i=e(63152),c=e(59695),p=e(63142),h=e(82345),u=e(96540),r=e(23257),v=e.n(r),g=e(41654),E=e(72636),x=e(72489),m=e(76319),y=e(37386),b=e(74098);const D=({property:R,context:O,registry:N,onChange:F,onRemove:G,isSystemOverride:H,searchQuery:K})=>{const w=(0,p.of)(f),Q=N?.getIfExists(R.id),k=(0,u.useId)();if(!Q)return null;const te=Array.isArray(R.value)||R.id===o.uo.Thresholds||R.id===o.uo.Links||R.id===o.uo.Mappings,q=Q.category?.filter(Y=>Y!==Q.name);let se;const re=(Y=!0,X=!1)=>(J=!1)=>(0,n.jsxs)(g.B,{justifyContent:"space-between",children:[(0,n.jsxs)(E.J,{category:q,description:Y?Q.description:void 0,htmlFor:k,children:[(0,n.jsx)(v(),{textToHighlight:Q.name,searchWords:[K],highlightClassName:"search-fragment-highlight"}),!J&&X&&Q.getItemsCount&&(0,n.jsx)(x.p,{value:Q.getItemsCount(R.value)})]}),!H&&(0,n.jsx)("div",{children:(0,n.jsx)(m.K,{name:"times",onClick:G,tooltip:(0,l.t)("dashboard.dynamic-config-value-editor.render-label.tooltip-remove-property","Remove property")})})]});return te?se=(0,n.jsx)(b.D,{id:Q.name,renderTitle:re(!1,!0),className:(0,a.css)({paddingLeft:0,paddingRight:0}),isNested:!0,isOpenDefault:R.value!==void 0,children:(0,n.jsx)(Q.override,{value:R.value,onChange:Y=>{F(Y)},item:Q,context:O})}):se=(0,n.jsx)("div",{children:(0,n.jsx)(y.D,{label:re()(),description:Q.description,children:(0,n.jsx)(Q.override,{value:R.value,onChange:Y=>{F(Y)},item:Q,context:O,id:k})})}),(0,n.jsx)("div",{className:(0,a.cx)(te&&w.collapsibleOverrideEditor,!te&&"dynamicConfigValueEditor--nonCollapsible"),children:se})},f=R=>({collapsibleOverrideEditor:(0,a.css)({label:"collapsibleOverrideEditor","& + .dynamicConfigValueEditor--nonCollapsible":{marginTop:R.spacing(1)}})});var C=e(25797),P=e(51156),T=e(45861),M=e(30703);const I=({isExpanded:R,registry:O,matcherUi:N,overrideName:F,override:G,onOverrideRemove:H})=>{const K=(0,p.of)(B),Q=G.properties.map(te=>O.getIfExists(te.id)).filter(te=>!!te).map(te=>te?.name).join(", "),k=N.optionsToLabel(G.matcher.options);return(0,n.jsxs)("div",{children:[(0,n.jsxs)(g.B,{justifyContent:"space-between",children:[(0,n.jsx)("div",{children:F}),(0,n.jsx)(T.$n,{variant:"secondary",fill:"text",icon:"trash-alt",onClick:H,tooltip:(0,l.t)("dashboard.override-category-title.tooltip-remove-override","Remove override"),"aria-label":(0,l.t)("dashboard.override-category-title.aria-label-remove-override","Remove override")})]}),!R&&(0,n.jsx)("div",{className:K.overrideDetails,children:(0,n.jsxs)("div",{className:K.options,title:k,children:[k," ",(0,n.jsx)(M.I,{name:"angle-right"})," ",Q]})})]})};I.displayName="OverrideTitle";const B=R=>({matcherUi:(0,a.css)({padding:R.spacing(1)}),propertyPickerWrapper:(0,a.css)({marginTop:R.spacing(2)}),overrideDetails:(0,a.css)({fontSize:R.typography.bodySmall.fontSize,color:R.colors.text.secondary,fontWeight:R.typography.fontWeightRegular}),options:(0,a.css)({overflow:"hidden",paddingRight:R.spacing(4)}),unknownLabel:(0,a.css)({marginBottom:0})});function U(R,O,N,F,G){const H=[],K=R;if(!O||O.isEmpty())return[];const w=(q,se)=>{let re=(0,s.cloneDeep)(K.overrides);re[q]=se,G({...K,overrides:re})},Q=q=>{let se=(0,s.cloneDeep)(K.overrides);se.splice(q,1),G({...K,overrides:se})},k=q=>{const se=d.sJ.get(q.value);se&&G({...K,overrides:[...K.overrides,{matcher:{id:se.id,options:se.defaultOptions},properties:[]}]})},te={data:N,getSuggestions:q=>(0,h.Hf)(N,q),isOverride:!0};for(let q=0;q<K.overrides.length;q++){const se=K.overrides[q],re=(0,l.t)("dashboard.get-field-override-categories.override-name","Override {{overrideNum}}",{overrideNum:q+1}),Y=`panel-options-override-${q}`,X=i.g.get(se.matcher.id),J=W(O),_=(0,o.Ow)(se),ee=se.properties.length===0,ae=new C.C({title:re,id:Y,forceOpen:ee,renderTitle:function(ue){return(0,n.jsx)(I,{override:se,isExpanded:ue,registry:O,overrideName:re,matcherUi:X,onOverrideRemove:()=>Q(q)})}}),le=oe=>{w(q,{...se,matcher:{...se.matcher,options:oe}})},L=(oe,ue)=>{const ye=O.get(ue.value),fe={id:ye.id,value:ye.defaultValue},Ee=oe.properties??[];Ee.push(fe),w(q,{...oe,properties:Ee})},ie=`${Y}-matcher`;ae.addItem(new P.v({id:ie,title:X.name,render:function(){return(0,n.jsx)(X.component,{id:ie,matcher:X.matcher,data:N??[],options:se.matcher.options,onChange:le})}}));for(let oe=0;oe<se.properties.length;oe++){const ue=se.properties[oe];if(!O.getIfExists(ue.id))continue;const fe=Ge=>{w(q,{...se,properties:se.properties.map((Fe,Pe)=>Pe===oe?{...Fe,value:Ge}:Fe)})},Ee=()=>{w(q,{...se,properties:se.properties.filter((Ge,Fe)=>Fe!==oe)})},Ae=`${Y}-property-${ue.id}`;ae.addItem(new P.v({skipField:!0,id:Ae,render:function(){return(0,n.jsx)(D,{isSystemOverride:_,onChange:fe,onRemove:Ee,property:ue,registry:O,context:te,searchQuery:F},Ae)}}))}!_&&se.matcher.options&&ae.addItem(new P.v({skipField:!0,id:`${Y}-add-button`,render:function(){return(0,n.jsx)(c.i,{label:(0,l.t)("dashboard.get-field-override-categories.label-add-override-property","Add override property"),variant:"secondary",isFullWidth:!0,icon:"plus",menuPlacement:"auto",options:J,onChange:ue=>L(se,ue)},"Add override property")}})),H.push(ae)}return H.push(new C.C({title:(0,l.t)("dashboard.get-field-override-categories.title.add-button","add button"),id:"add button",customRender:function(){return(0,n.jsx)(V,{children:(0,n.jsx)(c.i,{icon:"plus",label:(0,l.t)("dashboard.get-field-override-categories.label-add-field-override","Add field override"),variant:"secondary",menuPlacement:"auto",isFullWidth:!0,size:"md",options:i.g.list().filter(se=>!se.excludeFromPicker).map(se=>({label:se.name,value:se.id,description:se.description})),onChange:se=>k(se)})},"Add override")}})),H}function W(R){return R.list().filter(O=>!O.hideFromOverrides).map(O=>{let N=O.name;return O.category&&(N=[...O.category,O.name].join(" > ")),{label:N,value:O.id,description:O.description}})}function V({children:R}){const O=(0,p.of)(z);return(0,n.jsx)("div",{className:O,children:R})}function z(R){return(0,a.css)({borderTop:`1px solid ${R.colors.border.weak}`,padding:`${R.spacing(2)}`,display:"flex"})}},25797:(ne,j,e)=>{"use strict";e.d(j,{C:()=>d});var n=e(74848),a=e(31286),s=e(74098);class d{constructor(l){this.props=l,this.items=[],this.categories=[]}addItem(l){return l.parent=this,this.items.push(l),this}addCategory(l){return l.props.isNested=!0,l.parent=this,this.categories.push(l),this}getCategory(l){let i=this.categories.find(c=>c.props.id===l);return i||(i=new d({title:l,id:l}),this.addCategory(i)),i}render(l){return this.props.customRender?this.props.customRender():this.props.title===""?(0,n.jsx)(a.a,{padding:2,paddingBottom:1,children:this.items.map(i=>i.render(l))},this.props.title):(0,n.jsxs)(s.D,{...this.props,children:[this.items.map(i=>i.render(l)),this.categories.map(i=>i.render(l))]},this.props.title)}}},25953:(ne,j,e)=>{"use strict";e.d(j,{X:()=>I});var n=e(2543),a=e(96540),s=e(44248),d=e(6048),o=e(33143),l=e(3371),i=e(92119),c=e(41667),p=e(74848),h=e(92745),u=e(25797),r=e(51156),v=e(31819),g=e(78725);function E(B){const U=new u.C({title:(0,h.t)("dashboard.auto-grid.item-options.repeat.title","Repeat options"),id:"repeat-options",isOpenDefault:!1}).addItem(new r.v({title:(0,h.t)("dashboard.auto-grid.item-options.repeat.variable.title","Repeat by variable"),id:"auto-grid-repeat-by-variable",description:(0,h.t)("dashboard.auto-grid.item-options.repeat.variable.description","Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard."),render:V=>(0,p.jsx)(x,{id:V.props.id,item:B})})),W=(0,g.h)(B.state.conditionalRendering);return[U,W]}function x({item:B,id:U}){const{variableName:W}=B.useState();return(0,p.jsx)(v.U,{id:U,sceneContext:B,repeat:W,onChange:V=>{o.cc.edit({description:(0,h.t)("dashboard.edit-actions.panel-repeat-variable","Panel repeat by"),source:B,perform:()=>B.setRepeatByVariable(V),undo:()=>B.setRepeatByVariable(W)})}})}var m=e(22803),y=e(63142),b=e(86292),D=e(96691),f=e(20246),C=e(39242);function P({model:B}){const{body:U,repeatedPanels:W=[],key:V}=B.useState(),{draggingKey:z}=B.getParentGrid().useState(),{isEditing:R,preload:O}=(0,i.TN)(B),[N,F,G,H]=(0,b.H)(B),K=(0,y.of)(T),w=(0,D.MK)(),Q=(0,a.useMemo)(()=>(0,f.DP)(O),[O]),k=(0,a.useMemo)(()=>(0,a.memo)(({item:se,addDndContainer:re,isDragged:Y,isDragging:X,isRepeat:J=!1})=>N&&!R&&!H?null:(0,p.jsxs)("div",{...re?{ref:B.containerRef,"data-auto-grid-item-drop-target":X?V:void 0}:{},className:(0,m.cx)(N&&!R&&K.hidden),children:[Y&&(0,p.jsx)("div",{className:K.draggedPlaceholder}),Q&&(!N||!H)?(0,p.jsxs)(s.w1,{className:(0,m.cx)(F,K.wrapper,Y&&!J&&K.draggedWrapper,Y&&J&&K.draggedRepeatWrapper),children:[(0,p.jsx)(se.Component,{model:se}),G]},se.state.key):(0,p.jsxs)("div",{className:(0,m.cx)(F,K.wrapper,Y&&!J&&K.draggedWrapper,Y&&J&&K.draggedRepeatWrapper),children:[(0,p.jsx)(se.Component,{model:se}),G]})]})),[F,G,Q,V,B.containerRef,K,N,R,H]);if(w)return(0,D.mN)(w,[U,...W]);const te=!!z,q=z===V;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(k,{item:U,addDndContainer:!0,isDragged:q,isDragging:te},U.state.key),W.map(se=>(0,p.jsx)(k,{item:se,addDndContainer:!1,isDragged:q,isDragging:te,isRepeat:!0},se.state.key))]})}const T=B=>({wrapper:(0,m.css)({width:"100%",height:"100%",position:"relative"}),draggedWrapper:(0,m.css)({position:"absolute",zIndex:1e3,top:`var(${C.hM})`,left:`var(${C.PS})`,width:`var(${C.MS})`,height:`var(${C.PP})`,opacity:.8}),draggedRepeatWrapper:(0,m.css)({visibility:"hidden"}),draggedPlaceholder:(0,m.css)({width:"100%",height:"100%",boxShadow:`0 0 ${B.spacing(.5)} ${B.colors.primary.border}`,background:`${B.colors.primary.transparent}`,zIndex:-1}),hidden:(0,m.css)({display:"none"})});var M=e(29425);class I extends s.Bs{constructor(U){super({...U,conditionalRendering:U?.conditionalRendering??d.M.createEmpty()}),this._variableDependency=new s.Sh(this,{variableNames:this.state.variableName?[this.state.variableName]:[],onVariableUpdateCompleted:()=>this.performRepeat()}),this.isDashboardLayoutItem=!0,this.containerRef=a.createRef(),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=P}_activationHandler(){this.state.variableName&&this.performRepeat(),this._subs.add(this.subscribeToEvent(o.WG,()=>this.handleEditChange()));const U=this.state.conditionalRendering?.activate();return()=>{U&&U()}}getOptions(){return E(this)}setElementBody(U){this.setState({body:U})}performRepeat(){if(!this.state.variableName||s.jh.hasVariableDependencyInLoadingState(this))return;const U=s.jh.lookupVariable(this.state.variableName,this)??new s.yP({name:"_____default_sys_repeat_var_____",options:[],value:"",text:"",query:"A"});if(!(U instanceof s.n8)){console.error("DashboardGridItem: Variable is not a MultiValueVariable");return}const{values:W,texts:V}=(0,i.a7)(U);if((0,n.isEqual)(this._prevRepeatValues,W))return;const z=this.state.body,R=[],O={values:[""],texts:U.hasAllValue()?["All"]:["None"]},N=W.length?W:O.values,F=V.length?V:O.texts;for(let G=0;G<N.length;G++){const K=G===0?z:z.clone({key:(0,l.lv)(z.state.key,G),repeatSourceKey:z.state.key});K.setState({$variables:(0,l.D1)(U,N[G],F[G])}),G>0&&R.push(K)}this.setState({repeatedPanels:R}),this._prevRepeatValues=W}getPanelCount(){return(this.state.repeatedPanels?.length??0)+1}setRepeatByVariable(U){const W={variableName:U};U||(W.repeatedPanels=void 0),this.state.body.state.$variables&&this.state.body.setState({$variables:void 0}),this._variableDependency.setVariableNames(U?[U]:[]),this.setState(W),this.performRepeat()}getParentGrid(){if(!(this.parent instanceof M.o))throw new Error("Parent is not a AutoGridLayout");return this.parent}getBoundingBox(){const U=this.containerRef.current.getBoundingClientRect();return{width:U.width,height:U.height,top:this.containerRef.current.offsetTop,left:this.containerRef.current.offsetLeft}}handleEditChange(){this._prevRepeatValues=void 0,this.performRepeat()}scrollIntoView(){(0,c.d)(this,this.containerRef)}}},25992:(ne,j,e)=>{"use strict";e.d(j,{DW:()=>p,FF:()=>o,MD:()=>l,fH:()=>d,l$:()=>c,vV:()=>i});var n=e(32631),a=e(37930),s=e(43173);function d(h,u){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushLog([h],{level:a.$b.INFO,context:u})}function o(h,u){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushLog([h],{level:a.$b.WARN,context:u})}function l(h,u){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushLog([h],{level:a.$b.DEBUG,context:u})}function i(h,u){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushError(h,{context:u})}function c(h,u,r){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushMeasurement({type:h,values:u},{context:r})}function p(h,u){const r=v=>({source:h,...u,...v});return{logDebug:(v,g)=>l(v,r(g)),logInfo:(v,g)=>d(v,r(g)),logWarning:(v,g)=>o(v,r(g)),logError:(v,g)=>i(v,r(g)),logMeasurement:(v,g,E)=>c(v,g,r(E))}}},26051:(ne,j,e)=>{"use strict";e.d(j,{f:()=>d});var n=e(74848),a=e(17548),s=e(92745);function d({relativeTimeRange:o}){const l=a.secondsToHms(o.from),i=o.to??0,c=!i||i<=0,p=c?"now":a.secondsToHms(i);return c?(0,n.jsxs)(s.x6,{i18nKey:"alerting.rule-time-range-label.relative",values:{from:l},children:[(0,n.jsx)("code",{children:"{{from}}"})," to now"]}):(0,n.jsxs)(s.x6,{i18nKey:"alerting.rule-time-range-label.relative-with-to",values:{from:l,to:p},children:[(0,n.jsx)("code",{children:"{{from}}"})," to ",(0,n.jsx)("code",{children:"{{to}}"})]})}},26332:(ne,j,e)=>{"use strict";e.d(j,{Km:()=>o,P4:()=>s,WK:()=>d,g6:()=>a,r4:()=>n,xB:()=>l});const n=(i,c)=>({name:i,columns:c}),a=i=>i.columns,s=(i,c)=>i.columns[c],d=(i,c,p)=>i.columns[c].values[p],o=(i,c,p)=>i.columns.map(h=>h.values[p]),l=(i,c)=>i[c]},26437:(ne,j,e)=>{"use strict";e.d(j,{b:()=>a,q:()=>n});const n="connections",a={Base:`/${n}`,DataSources:`/${n}/datasources`,DataSourcesNew:`/${n}/datasources/new`,DataSourcesEdit:`/${n}/datasources/edit/:uid`,DataSourcesDashboards:`/${n}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${n}/add-new-connection`,DataSourcesDetails:`/${n}/datasources/:id`,ConnectDataOutdated:`/${n}/connect-data`,YourConnectionsOutdated:`/${n}/your-connections`}},26604:(ne,j,e)=>{"use strict";e.d(j,{E:()=>x,j:()=>y});var n=e(2543),a=e.n(n),s=e(7389),d=e(78282),o=e(6890),l=e(65642),i=e(64762),c=e(50803),p=e(30124),h=e(99305),u=e(8535),r=e(75515),v=e(97583),g=e(67933);function E(b){return!!(b.libraryPanel?.name&&b.libraryPanel?.uid)}async function x(b){b.cleanUpRepeats();const D=b.getSaveModelCloneOld();D.id=null,b.processRepeats();const f=[],C={},P={},T={},M=new Map;for(const V of D.getVariables())T[V.name]=V;const I={},B=(V,z)=>{if(V.datasource===void 0){V.datasource=z;return}let R=V.datasource,O=null;const N=R?.uid,F=N&&(0,h.t4)(N);let G;return F&&(G=F[1]||F[2]||F[4],O=T[G],O&&O.current&&(R=O.current.value)),(0,d.l)().get(R).then(H=>{if(H.meta?.builtIn)return;C["datasource"+H.meta?.id]={type:"datasource",id:H.meta.id,name:H.meta.name,version:H.meta.info.version||"1.0.0"};const K=V.libraryPanel,w=K?"-for-library-panel":"";let Q="DS_"+H.name.replace(" ","_").toUpperCase()+w.toUpperCase();const k="${"+Q+"}";if(P[Q]={name:Q,label:H.name,description:"",type:"datasource",pluginId:H.meta?.id,pluginName:H.meta?.name,usage:P[Q]?.usage},K){const te=P[Q]?.usage?.libraryPanels||[];te.push({name:K.name,uid:K.uid}),P[Q].usage={libraryPanels:te}}if(O&&G){I[G]="${"+Q+"}";return}V.datasource={type:H.meta.id,uid:k}})},U=async V=>{if(V.type!=="row"){if(await B(V),V.targets)for(const R of V.targets)await B(R,V.datasource);const z=l.Ay.panels[V.type];z&&(C["panel"+z.id]={type:"panel",id:z.id,name:z.name,version:z.info.version})}},W=async V=>{if((0,r.X)(V)){const{name:z,uid:R}=V.libraryPanel;let O=V.libraryPanel.model;O||(O=(await(0,p.Yr)(R,!0)).model),await B(O);const{gridPos:N,id:F,...G}=O;M.has(R)||M.set(R,{name:z,uid:R,kind:v.i.Panel,model:G})}};try{for(const R of D.panels)if(await U(R),R.collapsed!==void 0&&R.collapsed===!0&&R.panels)for(const O of R.panels)await U(O);for(const R of D.getVariables())if(R.type==="query")await B(R),R.options=[],R.current={},R.refresh=R.refresh!==s.CO.never?R.refresh:s.CO.onDashboardLoad;else if(R.type==="datasource"){const O=I[R.name];O?R.current={text:"",value:O,selected:!0}:R.current={}}else R.type==="adhoc"&&await B(R);for(const R of D.annotations.list)await B(R);C.grafana={type:"grafana",id:"grafana",name:"Grafana",version:l.Ay.buildInfo.version};for(const R of D.panels)if(await W(R),R.collapsed!==void 0&&R.collapsed===!0&&R.panels)for(const O of R.panels)await W(O);(0,n.each)(P,R=>{f.push(R)});for(const R of D.getVariables())if((0,g.VO)(R)){const O="VAR_"+R.name.replace(" ","_").toUpperCase();f.push({name:O,type:"constant",label:R.label||R.name,value:R.query,description:""}),R.query="${"+O+"}",R.current={value:R.query,text:R.query,selected:!1},R.options=[R.current]}const V=[...M.entries()].reduce((R,[O,N])=>(R[O]=N,R),{}),z=(0,n.defaults)({__inputs:f,__elements:V,__requires:(0,n.sortBy)(C,["id"])},D);for(let R=0;R<z.panels.length;R++){const O=z.panels[R];E(O)&&(z.panels[R]={gridPos:O.gridPos,id:O.id,libraryPanel:{uid:O.libraryPanel.uid,name:O.libraryPanel.name}})}return z}catch(V){return console.error("Export failed:",V),{error:V}}}async function m(b){const{libraryPanel:D,id:f,title:C}=b.spec;try{const T=(await(0,p.Yr)(D.uid,!0)).model,M=(0,c.Ln)(T);return M.spec.id=f,M}catch(P){console.error(`Failed to load library panel ${D.uid}:`,P);const T=P instanceof Error?P.message:"Unknown error";return(0,u.JD)((0,o.dx)((0,i.gi)(`Unable to load library panel "${D.name}": ${T}. It will appear as a placeholder in the export.`))),{kind:"Panel",spec:{id:f,title:C||`Library Panel: ${D.name}`,description:"",links:[],data:{kind:"QueryGroup",spec:{queries:[],transformations:[],queryOptions:{}}},vizConfig:{kind:"VizConfig",group:"text",version:"",spec:{options:{content:`**Library Panel Load Error**

Unable to load library panel: ${D.name} (${D.uid})

Error: ${P instanceof Error?P.message:"Unknown error"}`,mode:"markdown"},fieldConfig:{defaults:{},overrides:[]}}}}}}}async function y(b,D=!1){const f={},C=b.variables.filter(M=>M.kind==="DatasourceVariable");for(const M of b.variables)f[M.spec.name]=M.spec;const P=M=>{const I=M.query?.datasource?.name;if(I?.startsWith("${")&&I?.endsWith("}")){const B=I.slice(2,-1);if(C.find(W=>W.spec.name===B))return}M.query&&(M.query.datasource=void 0)},T=M=>{if(M.spec.data.spec.queries)for(const I of M.spec.data.spec.queries)P(I.spec)};try{const M=b.elements;for(const[I,B]of Object.entries(M))if(B.kind==="Panel")T(B);else if(B.kind==="LibraryPanel"&&D){const U=await m(B);T(U),M[I]=U}for(const I of b.variables)I.kind==="QueryVariable"?(P(I.spec),I.spec.options=[],I.spec.current={text:"",value:""}):I.kind==="DatasourceVariable"&&(I.spec.current={text:"",value:""});for(const I of b.annotations)P(I.spec);return b}catch(M){return console.error("Export failed:",M),{error:M}}}},26689:(ne,j,e)=>{"use strict";e.d(j,{q:()=>n});var n=(a=>(a.Data="data",a.Meta="meta",a.Error="error",a.Stats="stats",a.JSON="json",a.Query="query",a.Help="help",a))(n||{})},26987:(ne,j,e)=>{"use strict";e.d(j,{e:()=>a});var n=e(49785);const a=n.xI},27044:(ne,j,e)=>{"use strict";e.d(j,{aw:()=>h,md:()=>c,uT:()=>p});var n=e(68143),a=e(99090),s=e(55860),d=e(93854),o=e(11257),l=e(73427),i=e(62963);const c=50;async function p(u,r,v=1,g=c){const E=(0,n.AI)();let x=[];return l.TP.hasPermission(o.w.FoldersRead)&&(x=await E.get("/api/folders",{parentUid:u,page:v,limit:g})),x.map(m=>({kind:"folder",uid:m.uid,title:m.title,parentTitle:r,parentUID:u,managedBy:m.managedBy,url:(0,i.I2)(m.uid)?void 0:(0,i._0)(m.uid)}))}async function h(u,r=1,v=c){const E=await(0,s.S)().search({kind:["dashboard"],query:"*",location:u||"general",from:(r-1)*v,limit:v,offset:(r-1)*v});return E.view.map(x=>{const m=(0,d.hI)(x,E.view);return m.parentUID===a.TF&&(m.parentUID=void 0),m})}},27074:(ne,j,e)=>{"use strict";e.d(j,{l:()=>u});var n=e(74848),a=e(22803),s=e(73287),d=e(92745),o=e(27489),l=e(76319),i=e(50992),c=e(37386),p=e(63142),h=e(52308);function u({rawSql:v,datasourceType:g}){const[E,x]=(0,s.A)(),m=(0,p.of)(r),y=D=>{x(D),(0,o.rR)("grafana_sql_preview_copied",{datasource:g})},b=(0,n.jsxs)("div",{className:m.labelWrapper,children:[(0,n.jsx)("span",{className:m.label,children:(0,n.jsx)(d.x6,{i18nKey:"grafana-sql.components.preview.label-element.preview",children:"Preview"})}),(0,n.jsx)(l.K,{tooltip:(0,d.t)("grafana-sql.components.preview.label-element.tooltip-copy-to-clipboard","Copy to clipboard"),onClick:()=>y(v),name:"copy"})]});return(0,n.jsx)(c.D,{label:b,className:m.grow,children:(0,n.jsx)(i.B,{language:"sql",height:80,value:(0,h.s)(v),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1})})}function r(v){return{grow:(0,a.css)({flexGrow:1}),label:(0,a.css)({fontSize:12,fontWeight:v.typography.fontWeightMedium}),labelWrapper:(0,a.css)({display:"flex",justifyContent:"space-between",paddingBottom:v.spacing(.5)})}}},27104:(ne,j,e)=>{"use strict";e.d(j,{$T:()=>v,$u:()=>i,Ay:()=>x,EC:()=>l,L5:()=>o,Q9:()=>d,dJ:()=>c,jE:()=>p,tC:()=>g});var n=e(65307);const a={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},s=(0,n.Z0)({name:"teams",initialState:a,reducers:{teamsLoaded:(m,y)=>{const{totalCount:b,perPage:D,...f}=y.payload,C=Math.ceil(b/D);return{...m,...f,totalPages:C,perPage:D,hasFetched:!0}},queryChanged:(m,y)=>({...m,page:1,query:y.payload}),pageChanged:(m,y)=>({...m,page:y.payload}),sortChanged:(m,y)=>({...m,sort:y.payload,page:1}),rolesFetchBegin:m=>({...m,rolesLoading:!0}),rolesFetchEnd:m=>({...m,rolesLoading:!1})}}),{teamsLoaded:d,queryChanged:o,pageChanged:l,sortChanged:i,rolesFetchBegin:c,rolesFetchEnd:p}=s.actions,h=s.reducer,u={team:{},members:[],groups:[]},r=(0,n.Z0)({name:"team",initialState:u,reducers:{teamLoaded:(m,y)=>({...m,team:y.payload}),teamGroupsLoaded:(m,y)=>({...m,groups:y.payload})}}),{teamLoaded:v,teamGroupsLoaded:g}=r.actions,E=r.reducer,x={teams:h,team:E}},27160:(ne,j,e)=>{"use strict";e.d(j,{W:()=>v});var n=e(74848),a=e(96540),s=e(92745),d=e(43173),o=e(31286),l=e(77824),i=e(25797),c=e(51156),p=e(98279),h=e(15759),u=e(94850);function r({layoutManager:g}){const E=g.descriptor.isGridLayout,x=u._.list().filter(f=>f.isGridLayout===E),m=(0,a.useMemo)(()=>{if(d.$.featureToggles.unlimitedLayoutsNesting)return!1;let f=g.parent;for(;f;){if(f instanceof p.K)return!0;f=f.parent}return!1},[g]),y=(0,a.useCallback)(f=>{const C=g.parent;C&&(0,h.l)(C)&&C.switchLayout(f.createFromLayout(g))},[g]),b=[],D=x.map(f=>{let C=f.description;return m&&f.id===p.K.descriptor.id&&(C=(0,s.t)("dashboard.canvas-actions.disabled-nested-tabs","Tabs cannot be nested inside other tabs"),b.push(f)),{value:f,label:f.name,icon:f.icon,description:C,ariaLabel:`layout-selection-option-${f.name}`}});return(0,n.jsx)(o.a,{paddingBottom:2,display:"flex",grow:1,alignItems:"center",children:(0,n.jsx)(l.z,{fullWidth:!0,value:g.descriptor,options:D,onChange:y,disabledOptions:b})})}function v(g){return(0,a.useMemo)(()=>{const E=g.descriptor.isGridLayout,x=new i.C({title:(0,s.t)("dashboard.layout.common.group-layout","Group layout"),id:"dash-group-layout",isOpenDefault:!1}),m=new i.C({title:(0,s.t)("dashboard.layout.common.panel-layout","Panel layout"),id:"dash-grid-layout",isOpenDefault:!1});if(m.addItem(new c.v({title:"",id:"dash-grid-layout-option",skipField:!0,render:()=>(0,n.jsx)(r,{layoutManager:g})})),E?x.props.disabledText=(0,s.t)("dashboard.layout.common.group-layout-disabled","No groups exists on this level"):(x.addItem(new c.v({title:"",id:"dash-group-layout-option",skipField:!0,render:()=>(0,n.jsx)(r,{layoutManager:g})})),m.props.disabledText=(0,s.t)("dashboard.layout.common.panel-layout-disabled","Select a row or tab to change panel layout options")),g.getOptions)for(const y of g.getOptions())m.addItem(y);return[x,m]},[g])}},27164:(ne,j,e)=>{"use strict";e.d(j,{Dv:()=>s,RU:()=>n,n9:()=>a});function n(d){return new Set(["equals","not-equals","one-of","not-one-of"]).has(d)}const a={"=":"equals","!=":"not-equals","=~":"regex-match","!~":"regex-not-match","=|":"one-of","!=|":"not-one-of"},s=Object.fromEntries(Object.entries(a).map(([d,o])=>[o,d]))},27228:(ne,j,e)=>{"use strict";e.d(j,{U:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({title:l})=>{const i=(0,s.of)(o);return l?(0,n.jsx)("span",{className:i.title,children:l}):null},o=l=>({title:(0,a.css)({fontWeight:l.typography.fontWeightRegular,textOverflow:"ellipsis"})})},27282:(ne,j,e)=>{"use strict";e.d(j,{K:()=>W});var n=e(74848),a=e(22803),s=e(83505),d=e(46885),o=e(18828),l=e(43107),i=e(93225),c=e(96540),p=e(93581),h=e(49045),u=e(60188),r=e(25229),v=e(80011),g=e(51898),E=e(92745),x=e(63142),m=e(76373),y=e(45861),b=e(18027),D=e(30703),f=e(63527),C=e(41654),P=e(35621),T=e(15245),M=e(11527),I=e(66630),B=e(62348),U=e(41e3);const W=({date:O,maxDate:N,minDate:F,label:G,onChange:H,disabledHours:K,disabledMinutes:w,disabledSeconds:Q,timeZone:k,showSeconds:te=!0,clearable:q=!1})=>{const[se,re]=(0,c.useState)(!1),Y=(0,c.useRef)(null),{overlayProps:X,underlayProps:J}=(0,i.e)({onClose:()=>re(!1),isDismissable:!0,isOpen:se,shouldCloseOnInteractOutside:Ae=>{const Ge=document.getElementsByClassName(M.i)[0];return!(Ge&&Ge.contains(Ae))}},Y),{dialogProps:_}=(0,o.s)({},Y),ee=(0,x.$j)(),{modalBackdrop:ae}=(0,x.of)(P.o),le=(0,h.A)(`(min-width: ${ee.breakpoints.values.lg}px)`),L="bottom-start",ie=(0,x.of)(R),oe=(0,m.getPositioningMiddleware)(L),{refs:ue,floatingStyles:ye}=(0,s.we)({open:se,placement:L,onOpenChange:re,middleware:oe,whileElementsMounted:d.ll,strategy:"fixed"}),fe=(0,c.useCallback)(Ae=>{re(!1),H(Ae)},[H]),Ee=(0,c.useCallback)(Ae=>{Ae.preventDefault(),re(!0)},[re]);return(0,n.jsxs)("div",{"data-testid":"date-time-picker",style:{position:"relative"},children:[(0,n.jsx)(V,{date:O,onChange:H,isFullscreen:le,onOpen:Ee,label:G,ref:ue.setReference,showSeconds:te,clearable:q,timeZone:k}),se?le?(0,n.jsx)(T.ZL,{children:(0,n.jsx)(l.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("div",{ref:Y,...X,..._,children:(0,n.jsx)(z,{date:O,onChange:fe,isFullscreen:!0,onClose:()=>re(!1),maxDate:N,minDate:F,ref:ue.setFloating,style:ye,showSeconds:te,disabledHours:K,disabledMinutes:w,disabledSeconds:Q,timeZone:k})})})}):(0,n.jsxs)(T.ZL,{children:[(0,n.jsx)("div",{className:ae,...J}),(0,n.jsx)(l.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("div",{ref:Y,...X,..._,children:(0,n.jsx)("div",{className:ie.modal,children:(0,n.jsx)(z,{date:O,maxDate:N,minDate:F,onChange:fe,isFullscreen:!1,onClose:()=>re(!1),showSeconds:te,disabledHours:K,disabledMinutes:w,disabledSeconds:Q,timeZone:k})})})})]}):null]})},V=c.forwardRef(({date:O,label:N,onChange:F,onOpen:G,timeZone:H,showSeconds:K=!0,clearable:w=!1},Q)=>{const k=(0,x.of)(R),te=K?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[q,se]=(0,c.useState)(()=>({value:O?(0,v.LE)(O,{timeZone:H}):w?"":(0,v.LE)((0,r.KQ)(),{timeZone:H}),invalid:!1}));(0,c.useEffect)(()=>{if(O){const _=(0,v.LE)(O,{format:te,timeZone:H});se({invalid:!(0,B.f)(_),value:(0,r.Ar)(O)?_:O})}},[O,te,H]);const re=(0,c.useCallback)(_=>{const ee=!(0,B.f)(_.currentTarget.value);se({value:_.currentTarget.value,invalid:ee})},[]),Y=(0,c.useCallback)(()=>{if(!q.invalid&&q.value){const _=(0,r.oZ)((0,u.O)({timeZone:H}),q.value);F(_)}},[q,F,H]),X=(0,c.useCallback)(()=>{se({value:"",invalid:!1}),F()},[F]),J=(0,n.jsx)(y.$n,{"aria-label":(0,E.t)("grafana-ui.date-time-picker.calendar-icon-label","Time picker"),icon:"calendar-alt",variant:"secondary",onClick:G});return(0,n.jsx)(b.I,{label:N,invalid:!!(q.value&&q.invalid),className:k.field,children:(0,n.jsx)(f.p,{onChange:re,addonAfter:J,value:q.value,onBlur:Y,"data-testid":g.XF.DateTimePicker.input,placeholder:(0,E.t)("grafana-ui.date-time-picker.select-placeholder","Select date/time"),ref:Q,suffix:w&&q.value&&(0,n.jsx)(D.I,{name:"times",className:k.clearIcon,onClick:X})})})});V.displayName="DateTimeInput";const z=c.forwardRef(({date:O,onClose:N,onChange:F,isFullscreen:G,maxDate:H,minDate:K,style:w,showSeconds:Q=!0,disabledHours:k,disabledMinutes:te,disabledSeconds:q,timeZone:se},re)=>{const Y=(0,x.of)(I.h2),X=(0,x.of)(R),[J,_]=(0,c.useState)(()=>O&&O.isValid()?(0,r.oZ)((0,u.O)({timeZone:se}),O):(0,r.oZ)((0,u.O)({timeZone:se}),new Date)),[ee,ae]=(0,c.useState)(()=>O&&O.isValid()?(0,U.Q)(O.toDate(),(0,u.O)({timeZone:se})):(0,U.Q)(new Date,(0,u.O)({timeZone:se}))),le=(0,c.useCallback)(oe=>{oe&&!Array.isArray(oe)&&ae(oe)},[]),L=(0,c.useCallback)(oe=>{_(oe)},[]),ie=()=>{const oe=(0,r.KQ)(J);oe.set("date",ee.getDate()),oe.set("month",ee.getMonth()),oe.set("year",ee.getFullYear()),F(oe)};return(0,n.jsxs)("div",{className:(0,a.cx)(X.container,{[X.fullScreen]:G}),style:w,ref:re,children:[(0,n.jsx)(p.Ay,{next2Label:null,prev2Label:null,value:ee,nextLabel:(0,n.jsx)(D.I,{name:"angle-right"}),nextAriaLabel:(0,E.t)("grafana-ui.date-time-picker.next-label","Next month"),prevLabel:(0,n.jsx)(D.I,{name:"angle-left"}),prevAriaLabel:(0,E.t)("grafana-ui.date-time-picker.previous-label","Previous month"),onChange:le,locale:"en",className:Y.body,tileClassName:Y.title,maxDate:H,minDate:K}),(0,n.jsx)("div",{className:X.time,children:(0,n.jsx)(M.R,{showSeconds:Q,onChange:L,value:J,disabledHours:k,disabledMinutes:te,disabledSeconds:q})}),(0,n.jsxs)(C.B,{children:[(0,n.jsx)(y.$n,{type:"button",onClick:ie,children:(0,n.jsx)(E.x6,{i18nKey:"grafana-ui.date-time-picker.apply",children:"Apply"})}),(0,n.jsx)(y.$n,{variant:"secondary",type:"button",onClick:N,children:(0,n.jsx)(E.x6,{i18nKey:"grafana-ui.date-time-picker.cancel",children:"Cancel"})})]})]})});z.displayName="DateTimeCalendar";const R=O=>({container:(0,a.css)({padding:O.spacing(1),border:`1px ${O.colors.border.weak} solid`,borderRadius:O.shape.radius.default,backgroundColor:O.colors.background.primary,zIndex:O.zIndex.modal}),fullScreen:(0,a.css)({position:"absolute"}),time:(0,a.css)({marginBottom:O.spacing(2)}),modal:(0,a.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:O.zIndex.modal,maxWidth:"280px"}),clearIcon:(0,a.css)({cursor:"pointer"}),field:(0,a.css)({marginBottom:0,width:"100%"})})},27321:(ne,j,e)=>{"use strict";e.d(j,{F:()=>l});var n=e(10378),a=e(90382),s=e(43173),d=e(83793),o=e(73427);function l(i){const c=o.TP.user.orgRole===a.X.None,p=!s.$.featureToggles.provisioning||c,h=(0,d.F9)(i||p?n.hT:void 0);return i||(i=h.data),i?.items?.some(u=>u.target==="instance")}},27359:(ne,j,e)=>{"use strict";e.d(j,{I:()=>d,f:()=>s});var n=e(95004),a=e(41119);class s{constructor(c,p){return this.fields=[],this.length=0,d(c,p)}}function d(i,c){const p={fields:[],length:i.length};if(!i?.length)return p;if(c){if(!l(i))throw new Error("source is not an array of objects");for(const u of c)p.fields.push(o(u,i.map(r=>r&&r[u])));return p}if(i.find(u=>u)===null)return p;if(l(i)){const u=i.find(r=>r);p.fields=Object.keys(u||{}).map(r=>o(r,i.map(v=>v&&v[r])))}else p.fields.push(o(n.Bc,i));return p}function o(i,c){const p={name:i,config:{},values:c,type:n.PU.other};return p.type=(0,a.dF)(p)??n.PU.other,p}function l(i){const c=i.find(p=>p);return i.length>0&&typeof c=="object"}},27489:(ne,j,e)=>{"use strict";e.d(j,{G$:()=>d,Jy:()=>o,Xp:()=>i,rR:()=>l});var n=e(43173),a=e(36490),s=e(78646);const d=c=>{(0,s.x$)().addEvent({type:s.on.MetaAnalytics,payload:c})},o=()=>{const c=a.Ny.getLocation(),p=`${n.$.appSubUrl??""}${c.pathname}${c.search}${c.hash}`;(0,s.x$)().addEvent({type:s.on.Pageview,payload:{page:p}})},l=(c,p)=>{n.$.reportingStaticContext&&n.$.reportingStaticContext instanceof Object&&(p={...p,...n.$.reportingStaticContext}),(0,s.x$)().addEvent({type:s.on.Interaction,payload:{interactionName:c,properties:p}})},i=(c,p,h)=>{(0,s.x$)().addEvent({type:s.on.ExperimentView,payload:{experimentId:c,experimentGroup:p,experimentVariant:h}})}},27594:(ne,j,e)=>{"use strict";e.d(j,{j:()=>b});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(32885),l=e(28105),i=e(63142),c=e(30703),p=e(34213),h=e(45967),u=e(92745),r=e(76319);const v=(0,a.css)({display:"flex",alignItems:"center",height:"100%"});function g({row:P,__rowID:T}){return(0,n.jsx)("div",{className:v,children:(0,n.jsx)(r.K,{tooltip:(0,u.t)("grafana-ui.interactive-table.expand-row-tooltip","Toggle row expanded"),"aria-controls":T,name:P.isExpanded?"angle-down":"angle-right","aria-expanded":P.isExpanded,...P.getToggleRowExpandedProps(),size:"lg"})})}function E({isAllRowsExpanded:P,toggleAllRowsExpanded:T}){return(0,n.jsx)("div",{className:v,children:(0,n.jsx)(r.K,{"aria-label":P?(0,u.t)("grafana-ui.interactive-table.aria-label-collapse-all","Collapse all rows"):(0,u.t)("grafana-ui.interactive-table.aria-label-expand-all","Expand all rows"),name:P?"table-collapse-all":"table-expand-all",onClick:()=>T(),size:"lg",tooltip:P?(0,u.t)("grafana-ui.interactive-table.tooltip-collapse-all","Collapse all rows"):(0,u.t)("grafana-ui.interactive-table.tooltip-expand-all","Expand all rows"),variant:"secondary"})})}const x="__expander";function m(P,T=!1){return[{id:x,Cell:g,...T&&{Header:E},disableSortBy:!0,width:0},...P.map(M=>({id:M.id,accessor:M.id,Header:M.header||(()=>null),sortType:M.sortType||"alphanumeric",disableSortBy:!M.sortType,width:M.disableGrow?0:void 0,visible:M.visible,...M.cell&&{Cell:M.cell}}))]}const y=P=>{const T=P.colors.emphasize(P.colors.background.primary,.03);return{container:(0,a.css)({display:"flex",gap:P.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),cell:(0,a.css)({padding:P.spacing(1),minWidth:P.spacing(3)}),table:(0,a.css)({borderRadius:P.shape.radius.default,width:"100%"}),disableGrow:(0,a.css)({width:0}),header:(0,a.css)({borderBottom:`1px solid ${P.colors.border.weak}`,minWidth:P.spacing(3),"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:P.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:P.spacing(2.5),textAlign:"left",fontWeight:P.typography.fontWeightMedium}}),row:(0,a.css)({label:"row",borderBottom:`1px solid ${P.colors.border.weak}`,"&:hover":{backgroundColor:T},"&:last-child":{borderBottom:0}}),expandedRow:(0,a.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentCell:(0,a.css)({borderBottom:`1px solid ${P.colors.border.weak}`,position:"relative",padding:P.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:P.spacing(2),background:P.colors.border.medium}}),expandedContentRow:(0,a.css)({label:"expanded-row-content"}),sortableHeader:(0,a.css)({"&&":{padding:0}})}};function b({className:P,columns:T,data:M,getRowId:I,headerTooltips:B,pageSize:U=0,renderExpandedRow:W,showExpandAll:V=!1,fetchData:z,initialSortBy:R=[]}){const O=(0,i.of)(y),N=(0,d.useMemo)(()=>m(T,V),[T,V]),F=D(),G=(0,d.useCallback)(Y=>`${F}-${Y.id}`.replace(/\s/g,""),[F]),H=[o.useSortBy,o.useExpanded],K=M.length>U,w=U>0;w&&H.push(o.usePagination);const Q=(0,o.useTable)({columns:N,data:M,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!z,getRowId:I,initialState:{hiddenColumns:[!W&&x,...N.filter(Y=>!(!Y.visible||Y.visible(M))).map(Y=>Y.id).filter(l.zz)].filter(l.zz),sortBy:R}},...H),{getTableProps:k,getTableBodyProps:te,headerGroups:q,prepareRow:se}=Q,{sortBy:re}=Q.state;return(0,d.useEffect)(()=>{z&&z({sortBy:re})},[re,z]),(0,d.useEffect)(()=>{w&&Q.setPageSize(U)},[w,U,Q.setPageSize,Q]),(0,n.jsxs)("div",{className:O.container,children:[(0,n.jsxs)("table",{...k(),className:(0,a.cx)(O.table,P),children:[(0,n.jsx)("thead",{children:q.map(Y=>{const{key:X,...J}=Y.getHeaderGroupProps();return(0,n.jsx)("tr",{...J,children:Y.headers.map(_=>{const{key:ee,...ae}=_.getHeaderProps(),le=B?.[_.id];return(0,n.jsx)("th",{className:(0,a.cx)(O.header,{[O.disableGrow]:_.width===0,[O.sortableHeader]:_.canSort}),...ae,..._.isSorted&&{"aria-sort":_.isSortedDesc?"descending":"ascending"},children:(0,n.jsx)(C,{column:_,headerTooltip:le})},ee)})},X)})}),(0,n.jsx)("tbody",{...te(),children:(w?Q.page:Q.rows).map(Y=>{se(Y);const{key:X,...J}=Y.getRowProps(),_=G(Y),ee=Y.isExpanded;return(0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)("tr",{...J,className:(0,a.cx)(O.row,ee&&O.expandedRow),children:Y.cells.map(ae=>{const{key:le,...L}=ae.getCellProps();return(0,n.jsx)("td",{className:O.cell,...L,children:ae.render("Cell",{__rowID:_})},le)})}),ee&&W&&(0,n.jsx)("tr",{...J,id:_,className:O.expandedContentRow,children:(0,n.jsx)("td",{className:O.expandedContentCell,colSpan:Y.cells.length,children:W(Y.original)})})]},X)})})]}),w&&K&&(0,n.jsx)("span",{children:(0,n.jsx)(p.d,{currentPage:Q.state.pageIndex+1,numberOfPages:Q.pageOptions.length,onNavigate:Y=>Q.gotoPage(Y-1)})})]})}const D=()=>(0,d.useMemo)(()=>(0,s.uniqueId)("InteractiveTable"),[]),f=P=>({sortIcon:(0,a.css)({position:"absolute",top:P.spacing(1)}),headerTooltipIcon:(0,a.css)({marginLeft:P.spacing(.5)})});function C({column:{canSort:P,render:T,isSorted:M,isSortedDesc:I,getSortByToggleProps:B},headerTooltip:U}){const W=(0,i.of)(f),{onClick:V}=B(),z=(0,n.jsxs)(n.Fragment,{children:[T("Header"),U&&(0,n.jsx)(h.m,{theme:"info-alt",content:U.content,placement:"top-end",children:(0,n.jsx)(c.I,{className:W.headerTooltipIcon,name:U.iconName||"info-circle","data-testid":"header-tooltip-icon"})}),M&&(0,n.jsx)("span",{"aria-hidden":"true",className:W.sortIcon,children:(0,n.jsx)(c.I,{name:I?"angle-down":"angle-up"})})]});return P?(0,n.jsx)("button",{type:"button",onClick:V,children:z}):z}},27629:(ne,j,e)=>{"use strict";e.d(j,{$:()=>n});function n(a,s=!1){return window.grafanaBootData?.settings.featureToggles[a]??s}},27690:(ne,j,e)=>{"use strict";e.d(j,{i:()=>i});var n=e(74848),a=e(96540),s=e(22787);const d=({nodes:c,edges:p,direction:h,width:u,height:r})=>{const v=(0,a.useRef)(null),g=(0,a.useRef)(null);return(0,a.useEffect)(()=>{(async()=>{const x=await Promise.all([e.e(9020),e.e(502)]).then(e.bind(e,33450)),m=await e.e(9020).then(e.bind(e,22172)),y={nodes:o(m,c),edges:l(m,p)},b={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:h??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};g.current&&(v.current=new x.Network(g.current,y,b))})()},[h,p,c]),(0,n.jsx)("div",{children:(0,n.jsx)("div",{ref:g,style:{width:u??"100%",height:r??"60vh"}})})};function o(c,p){const h=p.map(u=>({...u,shape:"box"}));return new c.DataSet(h)}function l(c,p){const h=p.map(u=>({...u,arrows:"to",dashes:!0}));return new c.DataSet(h)}function i({edges:c,nodes:p,show:h,title:u,children:r}){const[v,g]=(0,a.useState)(h),E=(0,a.useCallback)(()=>g(!0),[g]),x=(0,a.useCallback)(()=>g(!1),[g]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.a,{isOpen:v,title:u,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:x,onDismiss:x,children:(0,n.jsx)(d,{nodes:p,edges:c})}),r({showModal:E})]})}},27691:(ne,j,e)=>{"use strict";e.d(j,{A:()=>c});var n=e(74848),a=e(96540),s=e(92745),d=e(30703),o=e(45861),l=e(41654);const c=(0,a.forwardRef)(function(h,u){return(0,n.jsx)(o.$n,{variant:"secondary",size:"sm",type:"button","aria-label":h.title??(0,s.t)("alerting.more-button.aria-label","More"),ref:u,...h,children:(0,n.jsxs)(l.B,{direction:"row",alignItems:"center",gap:0,children:[h.title??(0,n.jsx)(s.x6,{i18nKey:"alerting.more-button.button-text",children:"More"}),(0,n.jsx)(d.I,{name:"angle-down"})]})})})},27838:(ne,j,e)=>{"use strict";e.d(j,{H:()=>g});var n=e(74848),a=e(92745),s=e(41654),d=e(31286),o=e(66404),l=e(96540),i=e(45967),c=e(30703),p=e(27594);const h=({groups:E})=>{const x=(0,l.useMemo)(()=>E,[E]),m=(0,l.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:y=>y.value&&y.row.original.orgRole?y.value:""},{id:"orgRole",header:"Role",cell:y=>y.value||(0,n.jsxs)(s.B,{alignItems:"center",wrap:!0,children:[(0,n.jsx)(a.x6,{i18nKey:"admin.ldap-user-groups.no-org-found",children:"No match"}),(0,n.jsx)(i.m,{content:(0,a.t)("admin.ldap-user-groups.columns.content-no-matching-organizations-found","No matching organizations found"),children:(0,n.jsx)(c.I,{name:"info-circle"})})]})}],[]);return(0,n.jsx)(p.j,{headerTooltips:{orgName:{content:"Only the first match for an Organization will be used",iconName:"info-circle"}},columns:m,data:x,getRowId:y=>y.orgId+y.orgRole+y.groupDN})},u=({info:E})=>{const x=(0,l.useMemo)(()=>[{id:"userInfo",header:"User Information",disableGrow:!0},{id:"ldapValue"},{id:"cfgAttrValue",header:"LDAP attribute"}],[]),m=(0,l.useMemo)(()=>[{userInfo:"First name",ldapValue:E.name.ldapValue,cfgAttrValue:E.name.cfgAttrValue},{userInfo:"Surname",ldapValue:E.surname.ldapValue,cfgAttrValue:E.surname.cfgAttrValue},{userInfo:"Username",ldapValue:E.login.ldapValue,cfgAttrValue:E.login.cfgAttrValue},{userInfo:"Email",ldapValue:E.email.ldapValue,cfgAttrValue:E.email.cfgAttrValue}],[E]);return(0,n.jsx)(p.j,{columns:x,data:m,getRowId:y=>y.userInfo})},r=({permissions:E})=>{const x=(0,l.useMemo)(()=>[{id:"permission",header:"Permissions",disableGrow:!0},{id:"value"}],[]),m=(0,l.useMemo)(()=>[{permission:"Grafana admin",value:E.isGrafanaAdmin?(0,n.jsxs)(a.x6,{i18nKey:"admin.ldap-permissions.admin",children:[(0,n.jsx)(c.I,{name:"shield"})," Yes"]}):"No"},{permission:"Status",value:E.isDisabled?(0,n.jsxs)(a.x6,{i18nKey:"admin.ldap-permissions.inactive",children:[(0,n.jsx)(c.I,{name:"times"})," Inactive"]}):(0,n.jsxs)(a.x6,{i18nKey:"admin.ldap-permissions.active",children:[(0,n.jsx)(c.I,{name:"check"})," Active"]})}],[E]);return(0,n.jsx)(p.j,{data:m,columns:x,getRowId:y=>y.permission})},v=({teams:E})=>{const x=(0,l.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:({row:{original:{orgName:m}}})=>(0,n.jsx)(n.Fragment,{children:m||"No matching teams found"})},{id:"teamName",header:"Team",cell:({row:{original:{teamName:m,orgName:y}}})=>m&&y?m:""}],[]);return(0,n.jsx)(p.j,{data:E,columns:x,getRowId:m=>m.teamName})},g=({ldapUser:E})=>(0,n.jsxs)(s.B,{direction:"column",gap:4,children:[(0,n.jsx)(u,{info:E.info}),(0,n.jsx)(r,{permissions:E.permissions}),E.roles&&E.roles.length>0&&(0,n.jsx)(h,{groups:E.roles}),E.teams&&E.teams.length>0?(0,n.jsx)(v,{teams:E.teams}):(0,n.jsx)(d.a,{children:(0,n.jsx)(o.E,{children:(0,n.jsx)(a.x6,{i18nKey:"admin.ldap-user-info.no-team",children:"No teams found via LDAP"})})})]})},27963:(ne,j,e)=>{"use strict";e.d(j,{Il:()=>d,YE:()=>s,iQ:()=>l,ni:()=>o});var n=e(96540),a=e(36490);const s=(0,n.createContext)(void 0);function d(){const i=(0,n.useContext)(s);if(!i)throw new Error("No GrafanaContext found");return i}function o(){const{chrome:i}=d();return(0,n.useCallback)((c,p)=>{const{pathname:h,search:u}=a.Ny.getLocation();i.setReturnToPrevious({title:c,href:p??h+u})},[i])}function l(){const{chrome:i}=d();return[i.useState().megaMenuOpen,i.setMegaMenuOpen]}},28105:(ne,j,e)=>{"use strict";e.d(j,{Gu:()=>n,Gv:()=>l,Nx:()=>a,UW:()=>s,zz:()=>d});var n=(i=>(i.NotStarted="NotStarted",i.Loading="Loading",i.Streaming="Streaming",i.Done="Done",i.Error="Error",i))(n||{});const a=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var s=(i=>(i.Null="null",i.Ignore="connected",i.AsZero="null as zero",i))(s||{});const d=i=>!!i;function o(i){return i}function l(i){return typeof i=="object"&&i!==null?!0:!1}},28141:(ne,j,e)=>{"use strict";e.d(j,{k:()=>p,v:()=>i});var n=e(74848),a=e(96540),s=e(92745),d=e(8207),o=e(45861),l=e(34517);const i=({resourceName:h,title:u,onClose:r,...v})=>{const g=(0,s.t)("alerting.manage-permissions.title","Manage permissions");return(0,n.jsx)(d._,{onClose:r,title:u||g,subtitle:h,children:(0,n.jsx)(l.x,{...v,canSetPermissions:!0})})},c=({onClick:h})=>(0,n.jsx)(o.$n,{variant:"secondary",onClick:h,icon:"unlock",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.manage-permissions.button",children:"Manage permissions"})}),p=({resource:h,resourceId:u,resourceName:r,title:v,renderButton:g})=>{const[E,x]=(0,a.useState)(!1),m=()=>x(!1),y=()=>x(!0);return(0,n.jsxs)(n.Fragment,{children:[g?g({onClick:y}):(0,n.jsx)(c,{onClick:y}),E&&(0,n.jsx)(i,{resource:h,resourceId:u,resourceName:r,title:v,onClose:m})]})}},28337:(ne,j,e)=>{"use strict";e.d(j,{AZ:()=>u,OG:()=>i,TX:()=>c,ZV:()=>h,ov:()=>p});var n=e(74848),a=e(96540);const s=(0,a.createContext)(void 0),d=(0,a.createContext)(void 0),o=(0,a.createContext)(void 0),l=(0,a.createContext)(void 0);function i(){const r=(0,a.useContext)(s);if(!r)throw new Error("No `AddedLinksRegistryContext` found.");return r}function c(){const r=(0,a.useContext)(d);if(!r)throw new Error("No `AddedComponentsRegistryContext` found.");return r}function p(){const r=(0,a.useContext)(o);if(!r)throw new Error("No `AddedFunctionsRegistry` found.");return r}function h(){const r=(0,a.useContext)(l);if(!r)throw new Error("No `ExposedComponentsRegistryContext` found.");return r}const u=({registries:r,children:v})=>(0,n.jsx)(s.Provider,{value:r.addedLinksRegistry,children:(0,n.jsx)(d.Provider,{value:r.addedComponentsRegistry,children:(0,n.jsx)(o.Provider,{value:r.addedFunctionsRegistry,children:(0,n.jsx)(l.Provider,{value:r.exposedComponentsRegistry,children:v})})})})},28390:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{default:()=>y,defaultPageNav:()=>x});var n=e(74848),a=e(96540),s=e(54148),d=e(92745),o=e(68143),l=e(34999),i=e(1506),c=e(36826),p=e(54552),h=e(69715),u=e(44109),r=e(77256),v=e(94646),g=e(88547);const E=()=>{const b=(0,s.g)(),D=(0,v.uE)(b),[f]=(0,h.P5)(),P=f===h.gQ.Instances?void 0:0,T=(0,a.useMemo)(()=>{if(!D)throw new Error("Rule ID is required");return(0,v.qg)(D,!0)},[D]),{loading:M,error:I,result:B}=(0,u.ZU)({ruleIdentifier:T,limitAlerts:P});return I?(0,n.jsx)(c.d,{pageNav:x,navId:"alert-list",children:(0,n.jsx)(m,{error:I})}):M?(0,n.jsx)(c.d,{pageNav:x,navId:"alert-list",isLoading:!0}):B?(0,n.jsx)(p.K,{identifier:T,rule:B,children:(0,n.jsx)(h.Ay,{})}):!B&&!M?(0,n.jsx)(c.d,{pageNav:x,navId:"alert-list",children:(0,n.jsx)(i.L,{entity:"Rule"})}):null},x={id:"alert-rule-view",text:""};function m({error:b}){return(0,o.NF)(b)&&b.status===404?(0,n.jsx)(i.L,{entity:"Rule"}):(0,n.jsx)(l.F,{title:(0,d.t)("alerting.rule-viewer.error-loading","Something went wrong loading the rule"),children:(0,r.JZ)(b)})}const y=(0,g.S)(E)},28405:(ne,j,e)=>{"use strict";e.d(j,{h:()=>d});var n=e(74848),a=e(3986);const s=({children:o,plugin:l,loadingComponent:i,notInstalledFallback:c})=>{const{loading:p,installed:h}=usePluginBridge(l);return p?i??null:h?jsx(Fragment,{children:o}):c??null};function d(o,l,i){const c=new URLSearchParams(i).toString();return`/a/${o}${l}`+(c?"?"+c:"")}},28473:(ne,j,e)=>{"use strict";e.d(j,{i:()=>n});function n(a){const d=a.lastIndexOf("."),o=a.substring(d),l=a.substring(0,d);return l.length<16?a:`${l.substring(0,16)}...${o}`}},28533:(ne,j,e)=>{"use strict";e.d(j,{n:()=>a});var n=e(74848);const a=({cell:s,tableStyles:d,onCellFilterAdded:o,timeRange:l,userProps:i,frame:c,rowStyled:p,rowExpanded:h,textWrapped:u,height:r,getActions:v,replaceVariables:g,setInspectCell:E})=>{const x=s.getCellProps(),m=s.column.field;if(!m?.display)return null;if(x.style){x.style.wordBreak="break-word",x.style.minWidth=x.style.width;const D=s.column.justifyContent;D==="flex-end"&&!m.config.unit?(x.style.textAlign="right",x.style.direction="rtl",x.style.unicodeBidi="plaintext"):x.style.justifyContent=D}let y=(typeof s.column.width=="number"?s.column.width:24)-d.cellPadding*2;const b=v?v(c,m,s.row.index,g):[];return(0,n.jsx)(n.Fragment,{children:s.render("Cell",{field:m,tableStyles:d,onCellFilterAdded:o,cellProps:x,innerWidth:y,timeRange:l,userProps:i,frame:c,rowStyled:p,rowExpanded:h,textWrapped:u,height:r,actions:b,setInspectCell:E})})}},28799:(ne,j,e)=>{"use strict";e.d(j,{u:()=>m});var n=e(74848),a=e(16817),s=e(51898),d=e(92745),o=e(78282),l=e(89640),i=e(37386),c=e(66698),p=e(52847),h=e(76792),u=e(38681),r=e(56620),v=e(83501),g=e(70977),E=e(32442),x=e(25379);function m({datasource:y,onDataSourceChange:b,query:D,onQueryChange:f,onLegacyQueryChange:C,timeRange:P,regex:T,onRegExChange:M,sort:I,onSortChange:B,refresh:U,onRefreshChange:W,isMulti:V,onMultiChange:z,allowCustomValue:R,onAllowCustomValueChange:O,includeAll:N,onIncludeAllChange:F,allValue:G,onAllValueChange:H,staticOptions:K,staticOptionsOrder:w,onStaticOptionsChange:Q,onStaticOptionsOrderChange:k}){const{value:te}=(0,a.A)(async()=>{const re=await(0,o.l)().get(y??""),Y=await(0,u.y)(re),X=re?.variables?.getDefaultQuery?.();if(!D&&X){const J=typeof X=="string"?X:{...X,refId:X.refId??"A"};f(J)}return{datasource:re,VariableQueryEditor:Y}},[y]),{datasource:q,VariableQueryEditor:se}=te??{};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Y,{children:(0,n.jsx)(d.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.query-options",children:"Query options"})}),(0,n.jsx)(i.D,{label:(0,d.t)("dashboard-scene.query-variable-editor-form.label-data-source","Data source"),htmlFor:"data-source-picker",children:(0,n.jsx)(h.sk,{current:y,onChange:b,variables:!0,width:30})}),q&&se&&(0,n.jsx)(c.w,{onQueryChange:f,onLegacyQueryChange:C,datasource:q,query:D,VariableQueryEditor:se,timeRange:P}),(0,n.jsx)(x.Z,{defaultValue:T??"",name:(0,d.t)("dashboard-scene.query-variable-editor-form.name-regex","Regex"),description:(0,n.jsxs)("div",{children:[(0,n.jsx)(d.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.description-optional",children:"Optional, if you want to extract part of a series name or metric node segment."}),(0,n.jsx)("br",{}),(0,n.jsxs)(d.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.description-examples",children:["Named capture groups can be used to separate the display text and value (",(0,n.jsx)(l.Y,{href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",external:!0,children:"see examples"}),")."]})]}),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onBlur:M,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),(0,n.jsx)(v.z,{testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,onChange:B,sort:I}),(0,n.jsx)(r.U,{testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelectV2,onChange:W,refresh:U}),Q&&k&&(0,n.jsx)(g.f,{staticOptions:K,staticOptionsOrder:w,onStaticOptionsChange:Q,onStaticOptionsOrderChange:k}),(0,n.jsx)(E.Y,{children:(0,n.jsx)(d.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.selection-options",children:"Selection options"})}),(0,n.jsx)(p.B,{multi:!!V,includeAll:!!N,allowCustomValue:R,allValue:G,onMultiChange:z,onIncludeAllChange:F,onAllValueChange:H,onAllowCustomValueChange:O})]})}},28807:(ne,j,e)=>{"use strict";e.d(j,{E:()=>o});var n=e(55386),a=e(95004),s=e(739),d=e(59427);function o(i,c){const p=c.field?(0,d.UI)(i,c.field):i?.fields.find(h=>h.type===a.PU.string);return l(p,c)}function l(i,c){let p=c.fixed;const h=c.mode??s.RU.Fixed;if(h===s.RU.Fixed)return{isAssumed:!p,fixed:p,value:()=>p,get:r=>p};if(h===s.RU.Template){const r=v=>`TEMPLATE[${c.fixed} // ${v}]`;return i?{field:i,get:v=>r(i.values[v]),value:()=>r((0,d.sB)(i))}:(p=r(""),{isAssumed:!0,fixed:p,value:()=>p,get:v=>p})}if(!i)return{isAssumed:!0,fixed:p,value:()=>p,get:r=>p};let u=r=>(0,n.cN)(i.display(r));return{field:i,get:r=>u(i.values[r]),value:()=>u((0,d.sB)(i))}}},28845:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>O,oJ:()=>z,Pi:()=>C,$U:()=>R});var n=e(75816),a=e(59553),s=e(73659);const l=(0,a.TP)("preferences.grafana.app","v1alpha1"),i=(0,n.xP)({reducerPath:"preferencesAPIv1alpha1",baseQuery:(0,s.W)({baseURL:l}),endpoints:()=>({})}),c=["API Discovery","Preferences","Stars"],p=i.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:N=>({getApiResources:N.query({query:()=>({url:"/apis/preferences.grafana.app/v1alpha1/"}),providesTags:["API Discovery"]}),listPreferences:N.query({query:F=>({url:"/preferences",params:{pretty:F.pretty,allowWatchBookmarks:F.allowWatchBookmarks,continue:F.continue,fieldSelector:F.fieldSelector,labelSelector:F.labelSelector,limit:F.limit,resourceVersion:F.resourceVersion,resourceVersionMatch:F.resourceVersionMatch,sendInitialEvents:F.sendInitialEvents,timeoutSeconds:F.timeoutSeconds,watch:F.watch}}),providesTags:["Preferences"]}),createPreferences:N.mutation({query:F=>({url:"/preferences",method:"POST",body:F.preferences,params:{pretty:F.pretty,dryRun:F.dryRun,fieldManager:F.fieldManager,fieldValidation:F.fieldValidation}}),invalidatesTags:["Preferences"]}),mergedPreferences:N.query({query:()=>({url:"/preferences/merged"}),providesTags:["Preferences"]}),getPreferences:N.query({query:F=>({url:`/preferences/${F.name}`,params:{pretty:F.pretty}}),providesTags:["Preferences"]}),replacePreferences:N.mutation({query:F=>({url:`/preferences/${F.name}`,method:"PUT",body:F.preferences,params:{pretty:F.pretty,dryRun:F.dryRun,fieldManager:F.fieldManager,fieldValidation:F.fieldValidation}}),invalidatesTags:["Preferences"]}),deletePreferences:N.mutation({query:F=>({url:`/preferences/${F.name}`,method:"DELETE",params:{pretty:F.pretty,dryRun:F.dryRun,gracePeriodSeconds:F.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:F.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:F.orphanDependents,propagationPolicy:F.propagationPolicy}}),invalidatesTags:["Preferences"]}),updatePreferences:N.mutation({query:F=>({url:`/preferences/${F.name}`,method:"PATCH",body:F.patch,params:{pretty:F.pretty,dryRun:F.dryRun,fieldManager:F.fieldManager,fieldValidation:F.fieldValidation,force:F.force}}),invalidatesTags:["Preferences"]}),listStars:N.query({query:F=>({url:"/stars",params:{pretty:F.pretty,allowWatchBookmarks:F.allowWatchBookmarks,continue:F.continue,fieldSelector:F.fieldSelector,labelSelector:F.labelSelector,limit:F.limit,resourceVersion:F.resourceVersion,resourceVersionMatch:F.resourceVersionMatch,sendInitialEvents:F.sendInitialEvents,timeoutSeconds:F.timeoutSeconds,watch:F.watch}}),providesTags:["Stars"]}),createStars:N.mutation({query:F=>({url:"/stars",method:"POST",body:F.stars,params:{pretty:F.pretty,dryRun:F.dryRun,fieldManager:F.fieldManager,fieldValidation:F.fieldValidation}}),invalidatesTags:["Stars"]}),deletecollectionStars:N.mutation({query:F=>({url:"/stars",method:"DELETE",params:{pretty:F.pretty,continue:F.continue,dryRun:F.dryRun,fieldSelector:F.fieldSelector,gracePeriodSeconds:F.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:F.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:F.labelSelector,limit:F.limit,orphanDependents:F.orphanDependents,propagationPolicy:F.propagationPolicy,resourceVersion:F.resourceVersion,resourceVersionMatch:F.resourceVersionMatch,sendInitialEvents:F.sendInitialEvents,timeoutSeconds:F.timeoutSeconds}}),invalidatesTags:["Stars"]}),getStars:N.query({query:F=>({url:`/stars/${F.name}`,params:{pretty:F.pretty}}),providesTags:["Stars"]}),replaceStars:N.mutation({query:F=>({url:`/stars/${F.name}`,method:"PUT",body:F.stars,params:{pretty:F.pretty,dryRun:F.dryRun,fieldManager:F.fieldManager,fieldValidation:F.fieldValidation}}),invalidatesTags:["Stars"]}),deleteStars:N.mutation({query:F=>({url:`/stars/${F.name}`,method:"DELETE",params:{pretty:F.pretty,dryRun:F.dryRun,gracePeriodSeconds:F.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:F.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:F.orphanDependents,propagationPolicy:F.propagationPolicy}}),invalidatesTags:["Stars"]}),updateStars:N.mutation({query:F=>({url:`/stars/${F.name}`,method:"PATCH",body:F.patch,params:{pretty:F.pretty,dryRun:F.dryRun,fieldManager:F.fieldManager,fieldValidation:F.fieldValidation,force:F.force}}),invalidatesTags:["Stars"]}),addStar:N.mutation({query:F=>({url:`/stars/${F.name}/update/${F.group}/${F.kind}/${F.id}`,method:"PUT"}),invalidatesTags:["Stars"]}),removeStar:N.mutation({query:F=>({url:`/stars/${F.name}/update/${F.group}/${F.kind}/${F.id}`,method:"DELETE"}),invalidatesTags:["Stars"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:h,useLazyGetApiResourcesQuery:u,useListPreferencesQuery:r,useLazyListPreferencesQuery:v,useCreatePreferencesMutation:g,useMergedPreferencesQuery:E,useLazyMergedPreferencesQuery:x,useGetPreferencesQuery:m,useLazyGetPreferencesQuery:y,useReplacePreferencesMutation:b,useDeletePreferencesMutation:D,useUpdatePreferencesMutation:f,useListStarsQuery:C,useLazyListStarsQuery:P,useCreateStarsMutation:T,useDeletecollectionStarsMutation:M,useGetStarsQuery:I,useLazyGetStarsQuery:B,useReplaceStarsMutation:U,useDeleteStarsMutation:W,useUpdateStarsMutation:V,useAddStarMutation:z,useRemoveStarMutation:R}=p,O=p.enhanceEndpoints({})},28882:(ne,j,e)=>{"use strict";e.d(j,{f:()=>n});var n=(a=>(a[a.Transformations=0]="Transformations",a[a.FieldConfig=1]="FieldConfig",a[a.FieldConfigOverrides=2]="FieldConfigOverrides",a))(n||{})},28998:(ne,j,e)=>{"use strict";e.d(j,{tR:()=>b,xq:()=>E});var n=e(8134),a=e(32899),s=e(94644),d=e(28105),o=e(68143),l=e(78282),i=e(2863),c=e(36580),p=e(55315),h=e(45229),u=e(65642),r=e(29328),v=e(4651),g=e(16900);class E{constructor(f=(0,i.w)()){this.templateSrv=f,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.runtimeDataSources={},this.defaultName=""}init(f,C){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=f,this.defaultName=C;for(const P of Object.values(f))P.uid||(P.uid=P.name),this.settingsMapByUid[P.uid]=P,this.settingsMapById[P.id]=P;for(const P of Object.values(this.runtimeDataSources))this.datasources[P.uid]=P,this.settingsMapByUid[P.uid]=P.instanceSettings;this.datasources[c.dR.type]=r.Ex,this.datasources[v.Uj]=r.Ex,this.settingsMapByUid[c.dR.uid]=r.$i,this.settingsMapByUid[v.Uj]=r.$i}registerRuntimeDataSource(f){if(this.runtimeDataSources[f.dataSource.uid])throw new Error(`A runtime data source with uid ${f.dataSource.uid} has already been registered`);if(this.settingsMapByUid[f.dataSource.uid])throw new Error(`A data source with uid ${f.dataSource.uid} has already been registered`);this.runtimeDataSources[f.dataSource.uid]=f.dataSource,this.datasources[f.dataSource.uid]=f.dataSource,this.settingsMapByUid[f.dataSource.uid]=f.dataSource.instanceSettings}getDataSourceSettingsByUid(f){return this.settingsMapByUid[f]}getInstanceSettings(f,C){let P=x(f);if((0,c.s9)(P))return r.$i;if(P==="default"||P==null){if(y(f)&&f.type){const T=this.findDatasourceByType(f.type);if(T)return T}return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName]}if(P[0]==="$"){const T=this.templateSrv.replace(P,C,m);let M;return T==="default"?M=this.settingsMapByName[this.defaultName]:M=this.settingsMapByUid[T]??this.settingsMapByName[T],M?{...M,isDefault:!1,name:P,uid:P,rawRef:{type:M.type,uid:M.uid}}:void 0}return this.settingsMapByUid[P]??this.settingsMapByName[P]??this.settingsMapById[P]}get(f,C){let P=x(f);if(!P){if(y(f)&&f.type){const M=this.findDatasourceByType(f.type);return M?this.get(M.uid):Promise.reject("no datasource of type")}return this.get(this.defaultName)}if((0,c.s9)(f))return Promise.resolve(this.datasources[v.Uj]);const T=this.settingsMapByName[P];return T&&(P=T.uid),this.datasources[P]?Promise.resolve(this.datasources[P]):(P=this.templateSrv.replace(P,C,m),P==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[P]?Promise.resolve(this.datasources[P]):this.loadDatasource(P))}findDatasourceByType(f){const C=this.getList({type:f});if(C?.length)return C.find(P=>P.isDefault)??C[0]}async loadDatasource(f){if(this.datasources[f])return Promise.resolve(this.datasources[f]);const C=this.getInstanceSettings(f);if(!C)return Promise.reject({message:`Datasource ${f} was not found`});try{const P=await g.y.importDataSource(C.meta);if(this.datasources[f])return this.datasources[f];const T=new P.DataSourceClass(C);if(T.components=P.components,T.userStorage||(T.userStorage=new p.X(C.type)),!(T instanceof s.mA)){const M=T;M.name=C.name,M.id=C.id,M.type=C.type,M.meta=C.meta,M.uid=C.uid,M.getRef=s.mA.prototype.getRef}return this.datasources[f]=T,this.datasources[T.uid]=T,T}catch(P){return P instanceof Error&&h.A.emit(a.r1.alertError,[C.name+" plugin failed",P.toString()]),Promise.reject({message:`Datasource: ${f} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(f={}){const C=Object.values(this.settingsMapByName).filter(T=>{if(T.meta.id==="grafana"||T.meta.id==="mixed"||T.meta.id==="dashboard"||f.metrics&&!T.meta.metrics||f.tracing&&!T.meta.tracing||f.logs&&T.meta.category!=="logging"&&!T.meta.logs||f.annotations&&!T.meta.annotations||f.alerting&&!T.meta.alerting||f.pluginId&&!(0,n._)(f.pluginId,T.meta)||f.filter&&!f.filter(T))return!1;if(f.type){if(Array.isArray(f.type)){if(!f.type.includes(T.type))return!1}else if(!(T.type===f.type||T.meta.aliasIDs?.includes(f.type)))return!1}return!(!f.all&&T.meta.metrics!==!0&&T.meta.annotations!==!0&&T.meta.tracing!==!0&&T.meta.logs!==!0&&T.meta.alerting!==!0)});if(f.variables)for(const T of this.templateSrv.getVariables()){if(T.type!=="datasource")continue;let M=T.current.value==="default"?this.defaultName:T.current.value;Array.isArray(M)&&(M=M[0]);const I=!Array.isArray(M)&&(this.settingsMapByName[M]||this.settingsMapByUid[M]);if(I){const B=`\${${T.name}}`;C.push({...I,isDefault:!1,name:B,uid:B})}}const P=C.sort((T,M)=>T.name.toLowerCase()>M.name.toLowerCase()?1:T.name.toLowerCase()<M.name.toLowerCase()?-1:0);if(!f.pluginId&&!f.alerting){if(f.mixed){const T=this.getInstanceSettings("-- Mixed --");T&&C.push(T)}if(f.dashboard){const T=this.getInstanceSettings("-- Dashboard --");T&&C.push(T)}if(!f.tracing){const T=this.getInstanceSettings("-- Grafana --");T&&f.filter?.(T)!==!1&&C.push(T)}}return P}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(f=>({name:f.name,value:f.name,meta:f.meta}))}getMetricSources(f){return this.getList({metrics:!0,variables:!f?.skipVariables}).map(C=>({name:C.name,value:C.name,meta:C.meta}))}async reload(){const f=await(0,o.AI)().get("/api/frontend/settings");u.Ay.datasources=f.datasources,u.Ay.defaultDatasource=f.defaultDatasource,this.init(f.datasources,f.defaultDatasource)}}function x(D){return(0,c.s9)(D)?c.dR.uid:typeof D=="string"?D:D?.uid}function m(D){return Array.isArray(D)?D[0]:D}const y=D=>!!(D&&(0,d.Gv)(D)&&"type"in D),b=()=>(0,l.l)()},29043:(ne,j,e)=>{"use strict";e.d(j,{A:()=>a});var n=e(78012);const a=n.M},29216:(ne,j,e)=>{"use strict";e.d(j,{w:()=>o});var n=e(74848),a=e(92745),s=e(37386),d=e(77824);const o=({selectedTheme:l="current",onChange:i,description:c})=>{const p=[{label:(0,a.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,a.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,a.t)("share-modal.theme-picker.light","Light"),value:"light"}];return(0,n.jsx)(s.D,{label:(0,a.t)("share-modal.theme-picker.field-name","Theme"),description:c,children:(0,n.jsx)(d.z,{options:p,value:l,onChange:i})})}},29246:(ne,j,e)=>{"use strict";e.d(j,{x:()=>a});var n=e(11594);function a(s){return s&&s!==n.Ac.valid&&s!==n.Ac.internal}},29328:(ne,j,e)=>{"use strict";e.d(j,{Ex:()=>H,$i:()=>G});var n=e(65474),a=e(69862),s=e(75505),d=e(81160),o=e(11594),l=e(36580),i=e(2863),c=e(78282),p=e(68143),h=e(38866),u=e(19729),r=e(74848),v=e(22803),g=e(96540),E=e(92745),x=e(27489),m=e(63142),y=e(18027),b=e(45861),D=e(76319),f=e(91073),C=e(52900),P=e(18203),T=e(89931),M=e(4652),I=e(87767),B=e(38610),U=e(4651),W=e(82779);const V=15,z=K=>{const w=U.uQ.find(({value:Q})=>Q===K)?.description;switch(K){case U.Tz.sql:return(0,r.jsx)(E.x6,{i18nKey:"expressions.expression-query-editor.helper-text-sql",children:'Run MySQL-dialect SQL against the tables returned from your data sources. Data source queries (ie "A", "B") are available as tables and referenced by query-name. Fields are available as columns, as returned from the data source.'});default:return w??""}};function R(){const K=(0,g.useRef)({}),w=(0,g.useCallback)(k=>{switch(k){case U.Tz.math:case U.Tz.reduce:case U.Tz.resample:case U.Tz.threshold:case U.Tz.sql:return K.current[k];case U.Tz.classic:return}},[]),Q=(0,g.useCallback)((k,te)=>{switch(k){case U.Tz.math:K.current.math=te;break;case U.Tz.reduce:case U.Tz.resample:case U.Tz.threshold:K.current.reduce=te,K.current.resample=te,K.current.threshold=te;break;case U.Tz.sql:K.current.sql=te}},[]);return{getCachedExpression:w,setCachedExpression:Q}}function O(K){const{query:w,queries:Q,onRunQuery:k,onChange:te,app:q}=K,{getCachedExpression:se,setCachedExpression:re}=R(),Y=(0,m.of)(N),X=(0,g.useRef)(w.expression),J=(0,g.useRef)(!1);(0,g.useEffect)(()=>{w.type&&!J.current&&!X.current&&((0,x.rR)("dashboards_expression_interaction",{action:"add_expression",expression_type:w.type,context:"panel_query_section"}),J.current=!0)},[w.type,w.refId]),(0,g.useEffect)(()=>{re(w.type,w.expression)},[w.expression,w.type,re]);const _=(0,g.useCallback)(le=>{const L=se(le),ie=(0,W.rV)({...w,type:le});te({...ie,expression:L??ie.expression})},[w,te,se]),ee=()=>{const le=Q.filter(L=>w.refId!==L.refId).map(L=>({value:L.refId,label:L.refId}));switch(w.type){case U.Tz.math:return(0,r.jsx)(P.z,{onChange:te,query:w,labelWidth:V,onRunQuery:k});case U.Tz.reduce:return(0,r.jsx)(T.Z,{refIds:le,onChange:te,labelWidth:V,query:w,app:q});case U.Tz.resample:return(0,r.jsx)(M.C,{query:w,labelWidth:V,onChange:te,refIds:le});case U.Tz.classic:return(0,r.jsx)(f.z,{onChange:te,query:w,refIds:le});case U.Tz.threshold:return(0,r.jsx)(B.O,{onChange:te,query:w,labelWidth:V,refIds:le});case U.Tz.sql:return(0,r.jsx)(I.k,{onChange:te,query:w,refIds:le,queries:Q,metadata:K,onRunQuery:k})}},ae=z(w.type);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:Y.operationRow,children:[(0,r.jsx)(y.I,{label:(0,E.t)("expressions.expression-query-editor.label-operation","Operation"),labelWidth:V,children:(0,r.jsx)(C.m,{handleOnSelect:_,children:(0,r.jsx)(b.$n,{fill:"outline",icon:"angle-down",iconPlacement:"right",variant:"secondary",children:U.uQ.find(({value:le})=>le===w.type)?.label})})}),ae&&(0,r.jsx)(D.K,{className:Y.infoIcon,name:"info-circle",tooltip:ae})]}),ee()]})}const N=K=>({operationRow:(0,v.css)({display:"flex",alignItems:"center",gap:K.spacing(1)}),infoIcon:(0,v.css)({marginBottom:K.spacing(.5)})});class F extends l.iy{constructor(w){super(w),this.instanceSettings=w}applyTemplateVariables(w,Q){const k=(0,i.w)();return{...w,expression:k.replace(w.expression,Q),window:k.replace(w.window,Q)}}getCollapsedText(w){return`Expression: ${w.type}`}query(w){let Q=w.targets.map(async te=>{const q=await(0,c.l)().get(te.datasource);return q.interpolateVariablesInQueries?q?.interpolateVariablesInQueries([te],w.scopedVars,w.filters)[0]:te});return(0,n.H)(Promise.all(Q)).pipe((0,a.Z)(te=>super.query({...w,targets:te})))}newQuery(w){return{refId:"--",datasource:l.dR,type:w?.type??U.Tz.math,...w}}runMetaSQLExprQuery(w,Q,k){const te=w.refId||"meta",q={window:"",hide:!1,expression:w.rawSql,datasource:l.dR,refId:te,type:U.Tz.sql};return(0,s.s)((0,p.AI)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:Q.from.valueOf().toString(),to:Q.to.valueOf().toString(),queries:[...k,q]},requestId:te}).pipe((0,d.T)(se=>(0,h.bE)(se,k).data[0]??{fields:[]})))}}const G={id:-100,uid:U.Uj,name:l.dR.name,type:l.dR.type,access:"proxy",meta:{baseUrl:"",module:"",type:o.QE.datasource,name:l.dR.type,id:l.dR.type,info:{author:{name:"Grafana Labs"},logos:{small:u,large:u},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},H=new F(G);H.meta={id:l.dR.type,info:{logos:{small:u,large:u}}},H.components={QueryEditor:O}},29425:(ne,j,e)=>{"use strict";e.d(j,{o:()=>x});var n=e(96540),a=e(44248),s=e(3371),d=e(92119),o=e(25953),l=e(74848),i=e(22803),c=e(63142),p=e(96691),h=e(6607),u=e(1837),r=e(8835);function v({model:m}){const{children:y,isHidden:b}=m.useState(),D=(0,c.of)(g,m.state),{layoutOrchestrator:f,isEditing:C}=(0,d.TN)(m),P=a.jh.getAncestor(m,r.X2),{fillScreen:T}=P.useState(),M=(0,p.MK)();if(b||!f)return null;const I=!(0,s.bn)(m)&&C;return M?y.map(B=>(0,l.jsx)(B.Component,{model:B},B.state.key)):(0,l.jsxs)("div",{className:(0,i.cx)(D.container,T&&D.containerFillScreen,C&&D.containerEditing),ref:m.containerRef,children:[y.map(B=>(0,l.jsx)(B.Component,{model:B},B.state.key)),I&&(0,l.jsx)(h.f,{layoutManager:P})]})}const g=(m,y)=>({container:(0,i.css)({display:"grid",position:"relative",gridTemplateColumns:y.templateColumns,gridTemplateRows:y.templateRows||"unset",gridAutoRows:y.autoRows||"unset",rowGap:m.spacing(y.rowGap??1),columnGap:m.spacing(y.columnGap??1),justifyItems:y.justifyItems||"unset",alignItems:y.alignItems||"unset",justifyContent:y.justifyContent||"unset",[m.breakpoints.down("md")]:y.md?{gridTemplateRows:y.md.templateRows,gridTemplateColumns:y.md.templateColumns,rowGap:y.md.rowGap?m.spacing(y.md.rowGap??1):void 0,columnGap:y.md.columnGap?m.spacing(y.md.rowGap??1):void 0,justifyItems:y.md.justifyItems,alignItems:y.md.alignItems,justifyContent:y.md.justifyContent}:void 0,...u.u}),containerFillScreen:(0,i.css)({flexGrow:1}),containerEditing:(0,i.css)({paddingBottom:m.spacing(5),position:"relative"})});var E=e(39242);class x extends a.Bs{constructor(y){super({rowGap:1,columnGap:1,templateColumns:"repeat(auto-fit, minmax(400px, 1fr))",autoRows:y.autoRows??"320px",children:y.children??[],...y}),this.containerRef=(0,n.createRef)(),this._draggedGridItem=null,this._initialGridItemPosition=null,this._onDragStart=this._onDragStart.bind(this),this._onDragEnd=this._onDragEnd.bind(this),this._onDrag=this._onDrag.bind(this),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=v}_activationHandler(){return()=>{this._resetPanelPositionAndSize(),document.body.removeEventListener("pointermove",this._onDrag),document.body.removeEventListener("pointerup",this._onDragEnd),document.body.classList.remove("dashboard-draggable-transparent-selection")}}isDraggable(){return(0,s.bn)(this)?!1:this.state.isDraggable??!1}getDragClass(){return`grid-drag-handle-${this.state.key}`}getDragClassCancel(){return"grid-drag-cancel"}getDragHooks(){return{onDragStart:this._onDragStart}}_canDrag(y){return!this.isDraggable()||!(y.target instanceof Element)?!1:!!y.target.closest(`.${this.getDragClass()}`)&&!y.target.closest(`.${this.getDragClassCancel()}`)}_onDragStart(y,b){if(!this._canDrag(y))return;if(y.preventDefault(),y.stopPropagation(),!(b.parent instanceof o.X))throw new Error("Dragging wrong item");this._draggedGridItem=b.parent;const{top:D,left:f,width:C,height:P}=this._draggedGridItem.getBoundingBox();this._initialGridItemPosition={pageX:y.pageX,pageY:y.pageY,top:D,left:f},this._updatePanelSize(C,P),this._updatePanelPosition(D,f),this.setState({draggingKey:this._draggedGridItem.state.key}),document.body.addEventListener("pointermove",this._onDrag),document.body.addEventListener("pointerup",this._onDragEnd),document.body.classList.add("dashboard-draggable-transparent-selection"),(0,d.wP)(this)?.startDraggingSync(y,b)}_onDragEnd(){window.getSelection()?.removeAllRanges(),this._draggedGridItem=null,this._initialGridItemPosition=null,this._resetPanelPositionAndSize(),this.setState({draggingKey:void 0}),document.body.removeEventListener("pointermove",this._onDrag),document.body.removeEventListener("pointerup",this._onDragEnd),document.body.classList.remove("dashboard-draggable-transparent-selection")}_onDrag(y){if(!this._draggedGridItem||!this._initialGridItemPosition){this._onDragEnd();return}this._updatePanelPosition(this._initialGridItemPosition.top+(y.pageY-this._initialGridItemPosition.pageY),this._initialGridItemPosition.left+(y.pageX-this._initialGridItemPosition.pageX));const b=document.elementsFromPoint(y.clientX,y.clientY)?.find(D=>{const f=D.getAttribute("data-auto-grid-item-drop-target");return!!f&&f!==this._draggedGridItem.state.key})?.getAttribute("data-auto-grid-item-drop-target");b&&this._onDragOverItem(b)}_onDragOverItem(y){const b=[...this.state.children],D=b.findIndex(C=>C===this._draggedGridItem),f=b.findIndex(C=>C.state.key===y);D===-1||f===-1||(b.splice(D,1),b.splice(f,0,this._draggedGridItem),this.setState({children:b}))}_updatePanelPosition(y,b){this._setContainerStyle(E.hM,`${y}px`),this._setContainerStyle(E.PS,`${b}px`)}_updatePanelSize(y,b){this._setContainerStyle(E.MS,`${Math.floor(y)}px`),this._setContainerStyle(E.PP,`${Math.floor(b)}px`)}_resetPanelPositionAndSize(){this._removeContainerStyle(E.hM),this._removeContainerStyle(E.PS),this._removeContainerStyle(E.MS),this._removeContainerStyle(E.PP)}_setContainerStyle(y,b){this.containerRef.current?.style.setProperty(y,b)}_removeContainerStyle(y){this.containerRef.current?.style.removeProperty(y)}}},29442:(ne,j,e)=>{"use strict";e.d(j,{Mo:()=>o,PP:()=>i,TN:()=>l,tx:()=>d});var n=e(39187),a=e(94646),s=e(92367);const d=(p,h)=>{const u=new URLSearchParams([["search",p.map(([r,v])=>`${r}:"${v}"`).join(" ")]]);return(0,s.G)("/alerting/list",u,{skipSubPath:h?.skipSubPath})},o=(p={},h)=>(0,s.G)("/alerting/list",p,{skipSubPath:h?.skipSubPath}),l={detailsPageLink:(p,h,u,r)=>{const v=r?.includeReturnTo?{returnTo:(0,n.w)()}:{};return(0,s.G)(`/alerting/${p}/namespaces/${encodeURIComponent(h)}/groups/${encodeURIComponent(u)}/view`,v)},detailsPageLinkFromGroupIdentifier:p=>{const{groupOrigin:h,namespace:u,groupName:r}=p;return h==="grafana"?l.detailsPageLink("grafana",u.uid,r):l.detailsPageLink(p.rulesSource.uid,u.name,r)},editPageLink:(p,h,u,r)=>{const v=r?.includeReturnTo?{returnTo:(0,n.w)()}:{};return(0,s.G)(`/alerting/${p}/namespaces/${encodeURIComponent(h)}/groups/${encodeURIComponent(u)}/edit`,v,{skipSubPath:r?.skipSubPath})},newAlertRuleLink:(p,h,u)=>{const r=(0,n.w)(),v=JSON.stringify({folder:{title:p,uid:h},group:u});return(0,s.G)("/alerting/new",{defaults:v,returnTo:r})},newRecordingRuleLink:(p,h,u)=>{const r=(0,n.w)(),v=JSON.stringify({folder:{title:p,uid:h},group:u});return(0,s.G)("/alerting/new/grafana-recording",{defaults:v,returnTo:r})}},i={detailsPageLink:(p,h,u,r)=>(0,s.G)(`/alerting/${encodeURIComponent(p)}/${encodeURIComponent((0,a.$9)(h))}/view`,u,{skipSubPath:r?.skipSubPath})},c={viewLink:(p,h)=>(0,s.G)("/alerting/routes",{queryString:p.map(u=>u.join("")).join(","),alertmanager:h??"grafana"})}},29609:(ne,j,e)=>{"use strict";e.d(j,{$7:()=>B,A4:()=>U,BL:()=>Ve,H2:()=>Se,I2:()=>Ee,KC:()=>H,Mj:()=>z,Mu:()=>Fe,Nv:()=>O,O9:()=>ue,OF:()=>me,Om:()=>le,R$:()=>M,RI:()=>I,Rh:()=>k,TU:()=>J,Tm:()=>re,Wy:()=>ee,X4:()=>W,XI:()=>Y,YN:()=>L,aw:()=>R,bL:()=>N,dS:()=>_,f6:()=>G,fC:()=>K,hC:()=>E,j_:()=>Ae,jg:()=>oe,nf:()=>V,oI:()=>F,p:()=>T,pq:()=>Pe,qz:()=>ie,s_:()=>Ue,uo:()=>te,vE:()=>Qe,x6:()=>b,xE:()=>Ie});var n=e(2543),a=e.n(n),s=e(76190),d=e(43173),o=e(24619),l=e(56369),i=e(67817),c=e(95443),p=e(52161),h=e(39659),u=e(15629);function r(Re){return typeof Re=="object"&&"grafana_alert"in Re}function v(Re){return r(Re)&&!g(Re)}function g(Re){return r(Re)&&"record"in Re.grafana_alert}function E(Re){return!!Re.grafana_alert.is_paused}function x(Re){return typeof Re=="object"&&"alert"in Re}function m(Re){return typeof Re=="object"&&!r(Re)}function y(Re){return typeof Re=="object"&&"record"in Re}function b(Re){return Re.rules.every(Ke=>m(Ke))}function D(Re){return typeof Re=="object"&&Re.type===o.JS.Alerting}function f(Re){return typeof Re=="object"&&Re.type===o.JS.Recording}function C(Re){return D(Re)&&"folderUid"in Re&&"uid"in Re}function P(Re){return f(Re)&&"folderUid"in Re&&"uid"in Re}const T={grafana:{rule:r,alertingRule:v,recordingRule:g},dataSource:{rule:m,alertingRule:x,recordingRule:y},any:{rule:Re=>m(Re)||r(Re),recordingRule:Re=>y(Re)||g(Re),alertingRule:Re=>x(Re)||v(Re)}},M={rule:Re=>D(Re)||f(Re),alertingRule:D,recordingRule:f,grafana:{rule:Re=>C(Re)||P(Re),alertingRule:C,recordingRule:P}};function I(Re){return JSON.stringify(Re.labels)}function B(Re){return Re.error&&Re.error?.message?.includes(c.UU)}function U(Re){return"uid"in Re}function W(Re){return"rulerRuleHash"in Re}function V(Re){return Object.values(o.JS).includes(Re)}function z(Re){return"ruleHash"in Re}function R(Re){return U(Re)||W(Re)}function O(Re){return r(Re)&&!!Re.grafana_alert.provenance}function N(Re){return M.grafana.rule(Re)&&!!Re.provenance}function F(Re){return Re.rules.some(Ke=>O(Ke))}function G(Re){switch(Re){case"ok":return l.Jc.Ok;case"nodata":return l.Jc.NoData;case"error":case"err":return l.Jc.Error;case"unknown":return l.Jc.Unknown;default:return}}function H(Re){if(Re==="grafana")return l.Eg.Grafana;if(Re==="datasource")return l.Eg.DataSource}function K(Re){if(!T.any.recordingRule(Re.rulerRule)){if(x(Re.rulerRule))return Re.rulerRule.for;if(D(Re.promRule)){const Ke=(Re.promRule.duration??0)*1e3;return(0,u.an)(Ke)}}}function w(Re){return T.any.alertingRule(Re)?Re.for:void 0}function Q(Re){if(!T.any.recordingRule(Re.rulerRule)&&v(Re.rulerRule))return Re.rulerRule.keep_firing_for}function k(Re){return Re?.annotations??{}}function te(Re){if(!Re)return;const Ke=Re.labels?.[h.lL];if(!Ke)return;const Le=Ke.match(/^plugin\/(?<pluginId>.+)$/);if(!Le?.groups)return;const ze=Le.groups.pluginId;if(q(ze))return{pluginId:ze}}function q(Re){return!!d.$.apps[Re]}function se(Re){return Re.rules.some(Ke=>re(Ke))}function re(Re){return!!te(Re)}function Y(Re){return Re===o.cF.Inactive?"Normal":(0,n.capitalize)(Re)}const X=Re=>Re.reduce((Ke,{dataSourceName:Le,name:ze,groups:Be})=>(Be.forEach(({name:$e,rules:Ye})=>{Ye.forEach(de=>{D(de)&&Ke.push({dataSourceName:Le,namespaceName:ze,groupName:$e,rule:de})})}),Ke),[]),J=Re=>D(Re.promRule)?Re.promRule:null,_=Re=>Re.reduce((Ke,{rulesSource:Le,name:ze,groups:Be})=>(Be.forEach(({name:$e,rules:Ye})=>{Ye.forEach(de=>{de.promRule&&D(de.promRule)&&Ke.push({dataSourceName:(0,p.EV)(Le),namespaceName:ze,groupName:$e,...de,namespace:{...de.namespace,uid:de.promRule.folderUid}})})}),Ke),[]);function ee(Re){let Ke;return Object.values(s.O).includes(Re)?Ke=Re:Ke=(0,o.lh)(Re),ae[Ke]}const ae={[o.cF.Inactive]:"good",[o.cF.Firing]:"bad",[o.cF.Pending]:"warning",[o.cF.Recovering]:"warning",[o.Gi.Alerting]:"bad",[o.Gi.Error]:"bad",[o.Gi.NoData]:"info",[o.Gi.Normal]:"good",[o.Gi.Pending]:"warning",[o.Gi.Recovering]:"warning",[s.O.NoData]:"info",[s.O.Paused]:"warning",[s.O.Alerting]:"bad",[s.O.OK]:"good",[s.O.Unknown]:"info"};function le(Re){return Re?.alerts?Re.alerts.reduce((Ke,Le)=>{const ze=(0,o.lh)(Le.state)!==o.Gi.Normal;if(Le.activeAt&&ze){const Be=new Date(Le.activeAt);if(Ke===null||Ke.getTime()>Be.getTime())return Be}return Ke},null):null}function L(Re){return Array.isArray(Re.source_tenants)}function ie(Re){return T.grafana.rule(Re)?Re.grafana_alert.title:T.dataSource.alertingRule(Re)?Re.alert:T.dataSource.recordingRule(Re)?Re.record:""}const oe=(Re,Ke)=>{const Le={alertName:"",forDuration:"0s",evaluationsToFire:0};return r(Re)?{alertName:Re.grafana_alert.title,forDuration:Re.for,evaluationsToFire:Re.for?ue(Re.for,Ke):null}:x(Re)?{alertName:Re.alert,forDuration:Re.for??"0s",evaluationsToFire:ue(Re.for??"0s",Ke)}:Le},ue=(Re,Ke)=>{const Le=(0,u.P8)(Ke),ze=(0,u.P8)(Re);return ze===0&&Le!==0?1:Le===0||ze/Le<1?0:Math.ceil(ze/Le)+1};function ye(Re,Ke){return Re===0?1:Ke===0||Re/Ke<1?0:Math.ceil(Re/Ke)+1}function fe(Re){const Ke=isGrafanaRulesSource(Re.namespace.rulesSource)?Re.namespace.rulesSource:Re.namespace.rulesSource.name,Le=r(Re.rulerRule)?Re.rulerRule.grafana_alert.namespace_uid:Re.namespace.name;return{dataSourceName:Ke,namespaceName:Le,groupName:Re.group.name}}function Ee(Re){const Ke=Re.ruleSourceName,Le=r(Re.rule)?Re.rule.grafana_alert.namespace_uid:Re.namespace,ze=Re.group.name;return{dataSourceName:Ke,namespaceName:Le,groupName:ze}}function Ae(Re){const Ke=Re.dataSourceName,Le=Re.folder?.uid??Re.namespace,ze=Re.group;if(!Ke)throw new Error("no datasource name in form values");return{dataSourceName:Ke,namespaceName:Le,groupName:ze}}function Ge(Re){return isGrafanaRulesSource(Re)?Re:Re.name}function Fe(Re){return Re===i.Z.grafana}function Pe(Re){return Re===i.Z.grafanaRecording}function Ve(Re){return Re===i.Z.cloudAlerting}function me(Re){return Re===i.Z.cloudRecording}function Se(Re){return Fe(Re)||Pe(Re)}function Qe(Re){return Pe(Re)||me(Re)}function Ue(Re){return Ve(Re)||me(Re)}function Ie(Re){if(!Re)return;let Ke;return"grafana_alert"in Re&&T.grafana.rule(Re)?Ke=Re.grafana_alert.uid:"uid"in Re&&M.grafana.rule(Re)&&(Ke=Re.uid),Ke}},29646:(ne,j,e)=>{"use strict";e.d(j,{S:()=>h});var n=e(96540),a=e(74101),s=e(75735),d=e(55266),o=e(45942),l=e(76701);function i({timestamp:u,pathFromAnnotation:r,slug:v,folderPath:g=""}){let E="";if(r){const m=r.indexOf("#");return m>0?r.substring(0,m):r}return E=`${v||`new-dashboard-${u}`}.json`,g?`${g}/${E}`:E}var c=e(43385);function p({meta:u,defaultTitle:r,defaultDescription:v,loadedFromRef:g}){const E=u.k8s?.annotations,x=E?.[s.LH],m=E?.[s.Jw],y=E?.[s.Y_],{repository:b,folder:D,isLoading:f}=(0,d.T)({name:x==="repo"?m:void 0,folderName:u.folderUid}),C=(0,c.g)(),P=D?.metadata?.annotations?.[s.Y_],T=i({timestamp:C,pathFromAnnotation:y,slug:u.slug,folderPath:P}),M=(0,l.r)(b,g);return f||!b?null:{values:{ref:M==="branch"?`dashboard/${C}`:b?.branch??"",path:T,repo:m||b?.name||"",comment:"",folder:{uid:u.folderUid,title:""},title:r,description:v??"",workflow:(0,l.r)(b,g)},isNew:!u.k8s?.name,repository:b}}function h(u){const{meta:r,title:v,description:g}=u.useState(),[E]=(0,a.z)(),[x,m]=(0,n.useState)(!1),y=E.get("ref")??void 0,b=p({meta:r,defaultTitle:v,defaultDescription:g,loadedFromRef:y});if(!b)return{isReady:!1,isLoading:x,setIsLoading:m,defaultValues:null,repository:void 0,loadedFromRef:y,workflowOptions:[],isNew:!1,readOnly:!0};const{values:D,isNew:f,repository:C}=b,P=(0,l.a)(C);return{isReady:!0,defaultValues:D,repository:C,loadedFromRef:y,workflowOptions:P,isNew:f,readOnly:(0,o.li)(C),isLoading:x,setIsLoading:m}}},29662:(ne,j,e)=>{"use strict";e.d(j,{VV:()=>o,Yj:()=>l,dK:()=>c});var n=e(2543),a=e.n(n),s=e(22480),d=e(57002);const o="grafana",l=s.Y.map(p=>{const h=p.code===d.wi?d.Nm:p.code;return{...p,loader:{[o]:()=>e(7170)(`./${h}/grafana.json`)}}});{const p=e(55905);if(p.keys().includes("app/extensions/locales/localeExtensions")){const{LOCALE_EXTENSIONS:h,ENTERPRISE_I18N_NAMESPACE:u}=p("app/extensions/locales/localeExtensions");for(const r of l){const v=h[r.code];v&&(r.loader[u]=v)}}}const i=l.map(p=>p.code),c=(0,n.uniq)(l.flatMap(p=>Object.keys(p.loader)))},29700:(ne,j,e)=>{"use strict";e.d(j,{r:()=>E});var n=e(74848),a=e(96540),s=e(16207),d=e(92745),o=e(36490),l=e(44248),i=e(87063),c=e(45861),p=e(93256),h=e(31286),u=e(41654),r=e(88559),v=e(92119),g=e(11534);const E="__unconfigured-panel",x=new s.m(m);function m(y){const[b,D]=(0,a.useState)(!1),f=(0,a.useCallback)(M=>{D(M)},[]),C=()=>{o.Ny.partial({editPanel:y.id})},P=()=>{const M=window.__grafanaSceneContext;if(!(M instanceof g.H$))throw new Error("DashboardScene not found");const I=(0,v.vL)(M,(0,v.XA)(y.id));if(!I)throw new Error("Panel not found");M.onShowAddLibraryPanelDrawer(I.getRef())},T=()=>(0,n.jsxs)(i.W,{children:[(0,n.jsx)(i.W.Item,{icon:"pen",label:(0,d.t)("dashboard.new-panel.menu-open-panel-editor","Configure"),onClick:C}),(0,n.jsx)(i.W.Item,{icon:"library-panel",label:(0,d.t)("dashboard.new-panel.menu-use-library-panel","Use library panel"),onClick:P})]});return(0,n.jsx)(u.B,{direction:"row",alignItems:"center",height:"100%",justifyContent:"center",children:(0,n.jsx)(h.a,{paddingBottom:2,children:(0,n.jsxs)(p.e,{children:[(0,n.jsx)(c.$n,{icon:"sliders-v-alt",onClick:C,children:(0,n.jsx)(d.x6,{i18nKey:"dashboard.new-panel.configure-button",children:"Configure"})}),(0,n.jsx)(r.m,{overlay:T,placement:"bottom-end",onVisibleChange:f,children:(0,n.jsx)(c.$n,{"aria-label":(0,d.t)("dashboard.new-panel.configure-button-menu","Toggle menu"),icon:b?"angle-up":"angle-down"})})]})})})}l.Go.registerRuntimePanelPlugin({pluginId:E,plugin:x})},29855:(ne,j,e)=>{"use strict";e.d(j,{G_:()=>D,sb:()=>f});var n=e(74848),a=e(22803),s=e(20382),d=e(96540),o=e(49785),l=e(70713),i=e(92745),c=e(30703),p=e(45967),h=e(50992),u=e(54314),r=e(60208),v=e(8207),g=e(45861),E=e(89640),x=e(63142),m=e(20437),y=e(29609);const b=[{label:"Yaml",value:"yaml"}],D=({onClose:B})=>{const[U,W]=(0,d.useState)("yaml"),{setValue:V}=(0,o.xW)(),z=(0,x.of)(I),R=O=>{for(const N in O)V(N,O[N]);B()};return(0,n.jsx)(v._,{title:(0,i.t)("alerting.rule-inspector.title-inspect-alert-rule","Inspect Alert rule"),subtitle:(0,n.jsx)("div",{className:z.subtitle,children:(0,n.jsx)(f,{tabs:b,setActiveTab:W,activeTab:U})}),onClose:B,children:U==="yaml"&&(0,n.jsx)(C,{onSubmit:R})})};function f({tabs:B,activeTab:U,setActiveTab:W}){return(0,n.jsx)(u.U,{children:B.map((V,z)=>(0,n.jsx)(r.o,{label:V.label,value:V.value,onChangeTab:()=>W(V.value),active:U===V.value},`${V.value}-${z}`))})}const C=({onSubmit:B})=>{const U=(0,x.of)(M),{getValues:W}=(0,o.xW)(),V=(0,m.l1)(W()),[z,R]=(0,d.useState)((0,s.Bh)(V)),O=()=>{const N=(0,s.Hh)(z),F=W(),G=T(N);B({...F,...G})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:U.applyButton,children:[(0,n.jsx)(g.$n,{type:"button",onClick:O,children:(0,n.jsx)(i.x6,{i18nKey:"alerting.inspector-yaml-tab.apply",children:"Apply"})}),(0,n.jsx)(p.m,{content:(0,n.jsx)(P,{}),theme:"info",placement:"left-start",interactive:!0,children:(0,n.jsx)(c.I,{name:"exclamation-triangle",size:"xl"})})]}),(0,n.jsx)("div",{className:U.content,children:(0,n.jsx)(l.Ay,{disableWidth:!0,children:({height:N})=>(0,n.jsx)(h.B,{width:"100%",height:N,language:"yaml",value:z,onBlur:R,monacoOptions:{minimap:{enabled:!1}}})})})]})};function P(){return(0,n.jsx)("div",{children:(0,n.jsxs)(i.x6,{i18nKey:"alerting.yaml-content-info.body",children:["The YAML content in the editor only contains alert rule configuration ",(0,n.jsx)("br",{}),"To configure Prometheus, you need to provide the rest of the"," ",(0,n.jsx)(E.Y,{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",external:!0,children:"configuration file content."})]})})}function T(B){return y.p.dataSource.alertingRule(B)?(0,m.Qk)(B):y.p.dataSource.recordingRule(B)?(0,m.XI)(B):{}}const M=B=>({content:(0,a.css)({flexGrow:1,height:"100%",paddingBottom:"16px",marginBottom:B.spacing(2)}),applyButton:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:0,marginBottom:B.spacing(2)})}),I=()=>({subtitle:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between"})})},30054:(ne,j,e)=>{"use strict";e.d(j,{n:()=>r});var n=e(41053),a=e(88673);function s(v){const E=new DOMParser().parseFromString(v,"text/xml");return{items:Array.from(E.querySelectorAll("entry")).map(m=>({title:i(m,"title"),link:m.querySelector("link")?.getAttribute("href")??"",content:i(m,"content"),pubDate:i(m,"published"),ogImage:m.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function d(v){const E=new DOMParser().parseFromString(v,"text/xml");return{items:Array.from(E.querySelectorAll("item")).map(m=>({title:i(m,"title"),link:i(m,"link"),content:i(m,"description"),pubDate:i(m,"pubDate"),ogImage:m.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function o(v){return await(await fetch(v)).text()}function l(v){return new DOMParser().parseFromString(v,"text/xml").querySelector("feed")!==null}function i(v,g){return v.querySelector(g)?.textContent??""}async function c(v){const g=await o(v);return l(g)?s(g):d(g)}var p=e(25229),h=e(95004);function u(v){const g=[],E=[],x=[],m=[],y=[];for(const b of v.items){const D=(0,p.KQ)(b.pubDate);try{if(g.push(D.valueOf()),E.push(b.title),x.push(b.link),y.push(b.ogImage),b.content){const f=b.content.replace(/<\/?[^>]+(>|$)/g,"");m.push(f)}}catch(f){console.warn("Error reading news item:",f,b)}}return{fields:[{name:"date",type:h.PU.time,config:{displayName:"Date"},values:g},{name:"title",type:h.PU.string,config:{},values:E},{name:"link",type:h.PU.string,config:{},values:x},{name:"content",type:h.PU.string,config:{},values:m},{name:"ogImage",type:h.PU.string,config:{},values:y}],length:g.length}}function r(v){const[g,E]=(0,n.A)(async()=>{const x=await c(v),m=u(x);return new a.R(m)},[v],{loading:!0});return{state:g,getNews:E}}},30124:(ne,j,e)=>{"use strict";e.d(j,{DW:()=>D,GN:()=>x,Yr:()=>u,d7:()=>v,dq:()=>h,e9:()=>r,h4:()=>E,jc:()=>g,xV:()=>m});var n=e(75505),a=e(59857),s=e(7817),d=e(93389),o=e(70030),l=e(92119),i=e(55860),c=e(83873),p=e(97583);async function h({searchString:f="",perPage:C=100,page:P=1,excludeUid:T="",sortDirection:M="",typeFilter:I=[],folderFilterUIDs:B=[],signal:U}={}){const W=new URLSearchParams;return W.append("searchString",f),W.append("sortDirection",M),W.append("typeFilter",I.join(",")),W.append("folderFilterUIDs",B.join(",")),W.append("excludeUid",T),W.append("perPage",C.toString(10)),W.append("page",P.toString(10)),W.append("kind",p.i.Panel.toString(10)),(await(0,n.s)((0,c.AI)().fetch({method:"GET",url:`/api/library-elements?${W.toString()}`,abortSignal:U,showErrorAlert:!1}))).data.result}async function u(f,C=!1){const P=await(0,n.s)((0,c.AI)().fetch({method:"GET",url:`/api/library-elements/${f}`,showSuccessAlert:!C,showErrorAlert:!C})),{result:T}=P.data,M=new s.G({...a.Ye,schemaVersion:35,panels:[T.model]}),{scopedVars:I,...B}=M.panels[0].getSaveModel();return delete B.gridPos,delete B.id,delete B.libraryPanel,M.destroy(),{...T,model:B}}async function r(f){const{result:C}=await(0,c.AI)().get(`/api/library-elements/name/${f}`,void 0,void 0,{validatePath:!0});return C}async function v(f,C){const{result:P}=await(0,c.AI)().post("/api/library-elements",{folderUid:C,name:f.libraryPanel.name,model:f,kind:p.i.Panel});return P}async function g(f){const{libraryPanel:C,...P}=f,{uid:T,name:M,version:I,folderUid:B}=C,U=p.i.Panel,{result:W}=await(0,c.AI)().patch(`/api/library-elements/${T}`,{folderUid:B,name:M,model:P,version:I,kind:U});return W}function E(f){return(0,c.AI)().delete(`/api/library-elements/${f}`)}async function x(f){const{result:C}=await(0,c.AI)().get(`/api/library-elements/${f}/connections`);return C}async function m(f){const C=await x(f);return C.length===0?null:(await(0,i.S)().search({uid:C.map(T=>T.connectionUid)})).view.toArray()}function y(f){const C=(0,l.iL)(f),{uid:P,name:T,_loadedPanel:M}=C.state;let I=f.parent;if(!I||!(I instanceof d.U))throw new Error("Trying to save a library panel that does not have a DashboardGridItem parent");return{...M,uid:P,name:T,type:f.state.pluginId,model:(0,o.Z6)(f.clone({$behaviors:void 0}),{x:I.state.x??0,y:I.state.y??0,w:I.state.width??0,h:I.state.height??0},!1,I),kind:p.i.Panel,version:M?.version||0}}async function b(f){const{uid:C,folderUid:P,name:T,model:M,version:I,kind:B}=y(f),{result:U}=await(0,c.AI)().patch(`/api/library-elements/${C}`,{folderUid:P,name:T,model:M,version:I,kind:B});return U}async function D(f){const C=await b(f),P=(0,l.iL)(f);if(!P)throw new Error("Could not find library panel behavior for panel");P.setPanelFromLibPanel(C)}},30362:(ne,j,e)=>{"use strict";e.d(j,{A6:()=>x,J0:()=>g,Vp:()=>v,Wk:()=>y,m0:()=>E,n0:()=>b});var n=e(96540),a=e(92745),s=e(43173),d=e(27489),o=e(95943),l=e(43550),i=e(87745),c=e(45229),p=e(10388),h=e(47981),u=e(89409);const r=()=>{c.A.publish(new i.S8({component:h.N}))},v=D=>{let f=D.children||[];return D.id!=="help"?D:{...D,subTitle:s.$.buildInfo.versionString,children:[...f,...(0,p.Dd)(),...m(),{id:"keyboard-shortcuts",text:(0,a.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:r}]}},g=(D,f,C=!1)=>{const P={...D},T=P.onClick;let M;return P.isNew?M="item":C&&(M="ancestor"),P.onClick=()=>{(0,d.rR)("grafana_navigation_item_clicked",{path:P.url??P.id,menuIsDocked:f,itemIsBookmarked:!!(s.$.featureToggles.pinNavItems&&P?.parentItem?.id==="bookmarks"),bookmarkToggleOn:!!s.$.featureToggles.pinNavItems,isNew:M}),T?.()},P.children&&(P.children=P.children.map(I=>g(I,f,M!==void 0))),P},E=(D,f)=>!!D.children?.some(C=>C===f?!0:E(C,f)),x=(D,f,C)=>{const{id:P,parentItem:T}=f;if(C==="/")return D.find(I=>I.id===l.Id);if(f.id==="profile")return;for(const I of D){const B=!!(I.id&&I.id===P),U=I.text===f.text&&I.url===f.url;if(B||U)return I;if(I.children){const W=x(I.children,f);if(W)return W}}const M=D[0]?.parentItem?.id==="bookmarks";if(T&&!M)return x(D,T)};function m(){const{buildInfo:D,licenseInfo:f}=s.$,C=f.stateInfo?` (${f.stateInfo})`:"",P=[];return P.push({target:"_blank",id:"version",text:`${D.edition}${C}`,url:f.licenseUrl,icon:"external-link-alt"}),D.hasUpdate&&P.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),P}function y(D,f){for(const C of D){if(C.url===f)return C;if(C.children?.length){const P=y(C.children,f);if(P)return P}}return null}function b(D,f){(0,n.useEffect)(()=>{D?document.getElementById(u.iL)?.focus():document.getElementById(o.Ut)?.focus()},[D]),(0,n.useEffect)(()=>{f?document.getElementById(u.t3)?.focus():document.getElementById(o.Ut)?.focus()},[f])}},30419:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>d});var n=e(96540),a=(o=>(o.ALL="all",o.FAVORITES="favorites",o.RECENT="history",o.FEEDBACK="feedback",o))(a||{});const s=(0,n.createContext)({openDrawer:()=>{},closeDrawer:()=>{},isDrawerOpen:!1,setNewQuery:()=>{},onSave:()=>{},renderSavedQueryButtons:()=>null,renderQueryLibraryEditingHeader:()=>null,queryLibraryEnabled:!1,context:"unknown",triggerAnalyticsEvent:()=>{},onSelectQuery:()=>{},onFavorite:()=>{},onUnfavorite:()=>{},userFavorites:{},isEditingQuery:!1,setIsEditingQuery:()=>{},onAddHistoryQueryToLibrary:()=>{},activeTab:a.ALL,setActiveTab:()=>{},onTabChange:()=>{},highlightedQuery:void 0,newQuery:void 0,activeDatasources:[],setCloseGuard:()=>{}});function d(){return(0,n.useContext)(s)}},30643:(ne,j,e)=>{"use strict";e.d(j,{V:()=>K});var n=e(96540),a=e(92745),s=e(44248),d=e(95943),o=e(73427),l=e(29043),i=e(77197),c=e(87745),p=e(6048),h=e(6461),u=e(67350),r=e(92119),v=e(8835),g=e(48492),E=e(41667),x=e(74848),m=e(51898),y=e(37386),b=e(63527),D=e(34999),f=e(89640),C=e(25797),P=e(51156),T=e(31819),M=e(9931),I=e(18615),B=e(78725),U=e(33143),W=e(27160),V=e(20246);function z(w){const Q=this,{layout:k}=Q.useState(),te=(0,n.useMemo)(()=>new C.C({title:"",id:"tab-item-options"}).addItem(new P.v({title:(0,a.t)("dashboard.tabs-layout.tab-options.title-option","Title"),id:"tab-options-title",render:X=>(0,x.jsx)(R,{id:X.props.id,tab:Q,isNewElement:w})})),[w,Q]),q=(0,n.useMemo)(()=>new C.C({title:(0,a.t)("dashboard.tabs-layout.tab-options.repeat.title","Repeat options"),id:"repeat-options",isOpenDefault:!1}).addItem(new P.v({title:(0,a.t)("dashboard.tabs-layout.tab-options.repeat.variable.title","Repeat by variable"),id:"tab-options-repeat-variable",description:(0,a.t)("dashboard.tabs-layout.tab-options.repeat.variable.description","Repeat this tab for each value in the selected variable."),render:X=>(0,x.jsx)(O,{id:X.props.id,tab:Q})})),[Q]),se=(0,W.W)(k),re=[te,...se,q],Y=(0,n.useMemo)(()=>(0,B.h)(Q.state.conditionalRendering),[Q]);return Y&&re.push(Y),re}function R({tab:w,isNewElement:Q,id:k}){const{title:te}=w.useState(),q=(0,n.useRef)(""),se=(0,V.z4)({autoFocus:Q}),re=w.hasUniqueTitle();return(0,x.jsx)(y.D,{invalid:!re,error:re?void 0:(0,a.t)("dashboard.tabs-layout.tab-options.title-not-unique","Title should be unique"),children:(0,x.jsx)(b.p,{id:k,ref:se,title:(0,a.t)("dashboard.tabs-layout.tab-options.title-option","Title"),value:te,onFocus:()=>q.current=te||"",onBlur:()=>N(w,te||"",q.current||""),onChange:Y=>w.onChangeTitle(Y.currentTarget.value),"data-testid":m.Tp.components.PanelEditor.ElementEditPane.TabsLayout.titleInput})})}function O({tab:w,id:Q}){const{layout:k}=w.useState(),te=(0,r.MZ)(w),q=k.getVizPanels().some(se=>{const re=(0,r.un)(se);return re?.state.datasource?.uid===M.K||re?.state.datasource?.uid===I.uv&&re?.state.queries.some(Y=>Y.datasource?.uid===M.K)});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.U,{id:Q,sceneContext:te,repeat:w.state.repeatByVariable,onChange:se=>w.onChangeRepeat(se)}),q?(0,x.jsxs)(D.F,{"data-testid":m.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0,children:[(0,x.jsx)("p",{children:(0,x.jsxs)(a.x6,{i18nKey:"dashboard.tabs-layout.tab.repeat.warning",children:["Panels in this tab use the ",{SHARED_DASHBOARD_QUERY:M.K}," data source. These panels will reference the panel in the original tab, not the ones in the repeated tabs."]})}),(0,x.jsx)(f.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-tabs",children:(0,x.jsx)(a.x6,{i18nKey:"dashboard.tabs-layout.tab.repeat.learn-more",children:"Learn more"})})]}):void 0]})}function N(w,Q,k){Q!==k&&U.cc.edit({description:(0,a.t)("dashboard.edit-actions.tab-title","Change tab title"),source:w,perform:()=>w.onChangeTitle(Q),undo:()=>w.onChangeTitle(k)})}var F=e(83058);class G{constructor(Q){this._tabs=Q,this.isEditableDashboardElement=!0}getEditableElementInfo(){return{typeName:(0,a.t)("dashboard.edit-pane.elements.tabs","Tabs"),icon:"folder",instanceName:""}}useEditPaneOptions(){return[]}getTabs(){return this._tabs}onDelete(){this._tabs.forEach(Q=>Q.onDelete())}}var H=e(98279);class K extends s.Bs{constructor(Q){super({...Q,title:Q?.title??(0,a.t)("dashboard.tabs-layout.tab.new","New tab"),layout:Q?.layout??v.X2.createEmpty(),conditionalRendering:Q?.conditionalRendering??p.M.createEmpty()}),this._variableDependency=new s.Sh(this,{statePaths:["title"]}),this.isEditableDashboardElement=!0,this.isDashboardDropTarget=!0,this.containerRef=n.createRef(),this.useEditPaneOptions=z.bind(this),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=F.O}_activationHandler(){const Q=this.state.conditionalRendering?.activate();return()=>{Q&&Q()}}getEditableElementInfo(){return{typeName:(0,a.t)("dashboard.edit-pane.elements.tab","Tab"),instanceName:s.jh.interpolate(this,this.state.title,void 0,"text"),icon:"layers"}}getOutlineChildren(){return this.state.layout.getOutlineChildren()}getLayout(){return this.state.layout}getSlug(){return i.A.slugifyForUrl(s.jh.interpolate(this,this.state.title??"Tab"))}switchLayout(Q){this.setState({layout:Q})}onDelete(){this.getParentLayout().removeTab(this)}onConfirmDelete(){const Q=this.getParentLayout();if(Q.shouldUngroup()){Q.removeTab(this);return}if(this.getLayout().getVizPanels().length===0){this.onDelete();return}o.lE.publish(new c.bY({title:(0,a.t)("dashboard.tabs-layout.delete-tab-title","Delete tab?"),text:(0,a.t)("dashboard.tabs-layout.delete-tab-text","Deleting this tab will also remove all panels. Are you sure you want to continue?"),yesText:(0,a.t)("dashboard.tabs-layout.delete-tab-yes","Delete"),onConfirm:()=>{this.onDelete()}}))}serialize(){return(0,h.Yz)(this)}onCopy(){const Q=(0,u.IC)(this.getLayout(),(0,r.YQ)(this));(0,g.G2)(),l.A.set(d.Gk,JSON.stringify({elements:Q,tab:this.serialize()}))}createMultiSelectedElement(Q){return new G(Q.filter(k=>k instanceof K))}onDuplicate(){this.getParentLayout().duplicateTab(this)}duplicate(){return this.clone({key:void 0,layout:this.getLayout().duplicate()})}onChangeTitle(Q){this.setState({title:Q});const k=this.getSlug();this.getParentLayout().setState({currentTabSlug:k})}onChangeName(Q){this.onChangeTitle(Q)}onChangeRepeat(Q){Q?this.setState({repeatByVariable:Q}):this.setState({repeatedTabs:void 0,$variables:void 0,repeatByVariable:void 0})}setIsDropTarget(Q){!!this.state.isDropTarget!==Q&&this.setState({isDropTarget:Q})}draggedPanelOutside(Q){this.getLayout().removePanel?.(Q),this.setIsDropTarget(!1)}draggedPanelInside(Q){Q.clearParent(),this.getLayout().addPanel(Q),this.setIsDropTarget(!1);const k=this.getParentLayout();k.state.currentTabSlug!==this.getSlug()&&k.setState({currentTabSlug:this.getSlug()})}getParentLayout(){return s.jh.getAncestor(this,H.K)}scrollIntoView(){const Q=this.getParentLayout();Q.getCurrentTab()!==this&&Q.switchToTab(this),(0,E.d)(this,this.containerRef)}hasUniqueTitle(){return!this.getParentLayout().duplicateTitles().has(this.state.title)}}},30868:(ne,j,e)=>{"use strict";e.d(j,{y:()=>h});var n=e(74848),a=e(55494),s=e(63704),d=e(24726);const o=2,l=5,i=g=>{const E=g.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return E?E[0]:null},c=g=>g.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[o],p=g=>{let E=c(g);if(!E){E=`x${(0,d.A)()}`;const m=g.indexOf("<svg")+l;g=g.substring(0,m)+`id="${E}" `+g.substring(m)}let x=i(g);if(x){let m=x.replace(/(#(.*?))?\./g,`#${E} .`);g=g.replace(x,m)}return g},h=g=>{const{cleanStyle:E,...x}=g;return(0,n.jsx)(a.default,{...x,cacheRequests:!0,preProcessor:E?v:r})};let u=new Map;function r(g){let E=u.get(g);return E||(E=s.sQ.sanitizeSVGContent(g),u.set(g,E)),E}function v(g){let E=u.get(g);return E||(E=s.sQ.sanitizeSVGContent(g),E.indexOf('<style type="text/css">')>-1&&(E=p(E)),u.set(g,E)),E}},30906:(ne,j,e)=>{"use strict";e.d(j,{l:()=>h});var n=e(74848),a=e(16817),s=e(92745),d=e(34999),o=e(68079),l=e(31286),i=e(41654),c=e(34753),p=e(1199);const h=({diff:u,oldValue:r,newValue:v,hasFolderChanges:g,oldFolder:E,newFolder:x,hasMigratedToV2:m})=>{const y=(0,a.A)(async()=>{const D=JSON.stringify(r??{},null,2),f=JSON.stringify(v??{},null,2);let C;const P=[];let T=0;if(u)for(const[M,I]of Object.entries(u)){const B=(0,n.jsx)(c.D,{diffs:I,title:M},M);M==="schemaVersion"?C=B:P.push(B),T+=I.length}return{schemaChange:C,diffs:P,count:T,showDiffs:T<15,jsonView:(0,n.jsx)(p.M,{oldValue:D,newValue:f})}},[u,r,v]),{value:b}=y;return(0,n.jsxs)(i.B,{direction:"column",gap:1,children:[m&&(0,n.jsx)(l.a,{paddingTop:1,children:(0,n.jsx)(d.F,{title:(0,s.t)("dashboard.save-dashboard-diff.title-because-dashboard-migrated-grafana-format","The diff is hard to read because the dashboard has been migrated to the new Grafana dashboard format"),severity:"info"})}),g&&(0,n.jsx)(c.D,{diffs:[{op:"replace",value:x,originalValue:E,path:[],startLineNumber:0,endLineNumber:0}],title:(0,s.t)("dashboard.save-dashboard-diff.title-folder","folder")},"folder"),(!b||!r)&&(0,n.jsx)(o.y,{}),b&&b.count>=1?(0,n.jsxs)(n.Fragment,{children:[!m&&b&&b.schemaChange&&b.schemaChange,b&&b.showDiffs&&b.diffs,(0,n.jsxs)(l.a,{paddingTop:1,children:[(0,n.jsx)("h4",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-diff.full-json-diff",children:"Full JSON diff"})}),b.jsonView]})]}):(0,n.jsx)(l.a,{paddingTop:1,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-diff.no-changes-in-the-dashboard-json",children:"No changes in the dashboard JSON"})})]})}},30930:(ne,j,e)=>{"use strict";e.d(j,{r:()=>l});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(63142);const l=({label:c,ariaLabel:p,children:h})=>{const u=(0,o.of)(i),r=`group-label-${(0,s.uniqueId)()}`;return(0,n.jsxs)("div",{role:"group","aria-labelledby":!p&&c?r:void 0,"aria-label":p,children:[c&&(0,n.jsx)("label",{id:r,className:u.groupLabel,"aria-hidden":!0,children:c}),h]})};l.displayName="MenuGroup";const i=c=>({groupLabel:(0,a.css)({color:c.colors.text.secondary,fontSize:c.typography.size.sm,padding:c.spacing(.5,1)})})},31114:(ne,j,e)=>{"use strict";e.d(j,{Gu:()=>s,gB:()=>a});var n=e(739);const a={align:"auto",inspect:!1,wrapHeaderText:!1,cellOptions:{type:n.ob.Auto}};var s=(d=>(d.NotStarted="NotStarted",d.Loading="Loading",d.Streaming="Streaming",d.Done="Done",d.Error="Error",d))(s||{})},31119:(ne,j,e)=>{"use strict";e.d(j,{dj:()=>B});var n=e(2543),a=e.n(n),s=e(43173),d=e(78282),o=e(44248),l=e(11393),i=e(8255),c=e(75735),p=e(54767),h=e(11968),u=e(9634),r=e(49e3),v=e(21645),g=e(88632),E=e(88499),x=e(44804),m=e(11534),y=e(92119),b=e(2505),D=e(39557),f=e(59006),C=e(67350),P=e(65333),T=e(3281),M=e(39508);const I="default";function B(K){const{spec:w,metadata:Q,apiVersion:k}=K,te=H(w);te&&w.annotations.unshift(te);const q=w.annotations.map(ie=>{const oe=(0,b.U)(ie),ue={key:(0,n.uniqueId)("annotations-"),query:oe,name:ie.spec.name,isEnabled:!!ie.spec.enable,isHidden:!!ie.spec.hide,placement:ie.spec.placement};return new r.g(ue)}),se=!!w.editable,re=K.access.canSave!==!1;let Y;Q.labels?.[c.Y5]&&(Y=parseInt(Q.labels[c.Y5],10));const X={canShare:K.access.canShare!==!1,canSave:re,canStar:K.access.canStar!==!1,canEdit:K.access.canEdit!==!1,canDelete:K.access.canDelete!==!1,canAdmin:K.access.canAdmin!==!1,url:K.access.url,slug:K.access.slug,annotationsPermissions:K.access.annotationsPermissions,created:Q.creationTimestamp,createdBy:Q.annotations?.[c.hc],updated:Q.annotations?.[c.xU],updatedBy:Q.annotations?.[c.Qu],folderUid:Q.annotations?.[c.ew],isSnapshot:!!Q.annotations?.[c.qw],isEmbedded:!!Q.annotations?.[c.IC],showSettings:!!K.access.canEdit,canMakeEditable:re&&!se,hasUnsavedFolderChange:!1,version:Q.generation,k8s:Q};se||(X.canEdit=!1,X.canDelete=!1,X.canSave=!1);const J=f.j.get(w.layout.kind).deserialize(w.layout,w.elements,w.preload),_=(0,p.Bp)(Q.name,w.title),ee=s.$.dashboardPerformanceMetrics.findIndex(ie=>ie==="*"||ie===Q.name)!==-1,ae=new o.Gg.Hf({enableProfiling:ee},_),le=new o.Gg.lN({enableInteractionTracking:ee,onInteractionComplete:(0,p.tJ)(Q.name,w.title)},_),L=new m.H$({description:w.description,editable:w.editable,preload:w.preload,id:Y,isDirty:!1,links:w.links,meta:X,tags:w.tags,title:w.title,uid:Q.name,version:Q.generation,body:J,$timeRange:new o.JZ({from:w.timeSettings.from,to:w.timeSettings.to,fiscalYearStartMonth:w.timeSettings.fiscalYearStartMonth,timeZone:w.timeSettings.timezone,weekStart:w.timeSettings.weekStart,UNSAFE_nowDelay:w.timeSettings.nowDelay}),$variables:U(w,X.isSnapshot??!1),$behaviors:[new o.Gg.K2({sync:(0,T.Y_)(w.cursorSync)}),ae,le,E.M,P.A2,new o.Gg.en({enabled:w.liveNow}),h.U,new x.s({reloadOnParamsChange:s.$.featureToggles.reloadDashboardsOnParamsChange&&!1,uid:Y?.toString()}),...ee?[u.J]:[]],$data:new g.s({annotationLayers:q}),controls:new v.x({timePicker:new o.KE({quickRanges:w.timeSettings.quickRanges,defaultQuickRanges:s.$.quickRanges}),refreshPicker:new o.WM({refresh:w.timeSettings.autoRefresh,intervals:w.timeSettings.autoRefreshIntervals,withText:!0}),hideTimeControls:w.timeSettings.hideTimepicker})},"v2");return L.setInitialSaveModel(K.spec,K.metadata,k),(0,p.xb)(L,Q.name),L}function U(K,w){let Q;return w?Q=O(K):Q=W(K),Q}function W(K){const w=K.variables.map(Q=>{try{return V(Q)}catch(k){return console.error(k),null}}).filter(Q=>!!Q);return s.$.featureToggles.scopeFilters&&!s.$.publicDashboardAccessToken&&w.push(new o.Kg({enable:!0})),new o.Pj({variables:w})}function V(K){const w={name:K.spec.name,label:K.spec.label,description:K.spec.description};if(K.kind===(0,l.l_)().kind){const Q=(0,C.DG)({type:K.group,uid:K.datasource?.name},K.group);return new o.H9({...w,description:K.spec.description,skipUrlSync:K.spec.skipUrlSync,hide:(0,T.cc)(K.spec.hide),datasource:Q,applyMode:"auto",filters:K.spec.filters??[],baseFilters:K.spec.baseFilters??[],defaultKeys:K.spec.defaultKeys,useQueriesAsFilterForOptions:!0,layout:s.$.featureToggles.newFiltersUI?"combobox":void 0,supportsMultiValueOperators:!!(0,d.l)().getInstanceSettings(Q)?.meta.multiValueFilterOperators})}if(K.kind===(0,l.ns)().kind)return new o.yP({...w,value:K.spec.current?.value??"",text:K.spec.current?.text??"",query:K.spec.query,isMulti:K.spec.multi,allValue:K.spec.allValue||void 0,includeAll:K.spec.includeAll,defaultToAll:!!K.spec.includeAll,skipUrlSync:K.spec.skipUrlSync,hide:(0,T.cc)(K.spec.hide)});if(K.kind===(0,l.m6)().kind)return new o.fS({...w,value:K.spec.current?.value??"",text:K.spec.current?.text??"",query:z(K),datasource:(0,C.Kq)(K),sort:(0,T.ES)(K.spec.sort),refresh:(0,T.tH)(K.spec.refresh),regex:K.spec.regex,allValue:K.spec.allValue||void 0,includeAll:K.spec.includeAll,defaultToAll:!!K.spec.includeAll,isMulti:K.spec.multi,skipUrlSync:K.spec.skipUrlSync,hide:(0,T.cc)(K.spec.hide),definition:K.spec.definition});if(K.kind===(0,l.X1)().kind)return new o.mI({...w,value:K.spec.current?.value??"",text:K.spec.current?.text??"",regex:K.spec.regex,pluginId:K.spec.pluginId,allValue:K.spec.allValue||void 0,includeAll:K.spec.includeAll,defaultToAll:!!K.spec.includeAll,skipUrlSync:K.spec.skipUrlSync,isMulti:K.spec.multi,hide:(0,T.cc)(K.spec.hide),defaultOptionEnabled:K.spec.current?.value===I&&K.spec.current?.text==="default"});if(K.kind===(0,l.pK)().kind){const Q=(0,y.Sm)(K.spec.query),k=R(K,Q);return new o.Yj({...w,value:k,intervals:Q,autoEnabled:K.spec.auto,autoStepCount:K.spec.auto_count,autoMinInterval:K.spec.auto_min,refresh:(0,T.tH)(K.spec.refresh),skipUrlSync:K.spec.skipUrlSync,hide:(0,T.cc)(K.spec.hide)})}else{if(K.kind===(0,l.ET)().kind)return new o.x0({...w,value:K.spec.query,skipUrlSync:K.spec.skipUrlSync,hide:(0,T.cc)(K.spec.hide)});if(K.kind===(0,l.t1)().kind){let Q;return K?.spec.current?.value?typeof K.spec.current.value=="string"?Q=K.spec.current.value:Q=K.spec.current.value[0]:Q=K.spec.query,new o.TS({...w,value:Q,skipUrlSync:K.spec.skipUrlSync,hide:(0,T.cc)(K.spec.hide)})}else if(s.$.featureToggles.groupByVariable&&K.kind===(0,l.uB)().kind){const Q=(0,C.DG)({type:K.group,uid:K.datasource?.name},K.group);return new o.ZG({...w,datasource:Q,value:K.spec.current?.value||[],text:K.spec.current?.text||[],skipUrlSync:K.spec.skipUrlSync,isMulti:K.spec.multi,hide:(0,T.cc)(K.spec.hide),defaultOptions:K.options})}else{if(K.kind===(0,l.Ku)().kind)return new o.HV({...w,value:K.spec.current??"false",enabledValue:K.spec.enabledValue??"true",disabledValue:K.spec.disabledValue??"false",skipUrlSync:K.spec.skipUrlSync,hide:(0,T.cc)(K.spec.hide)});throw new Error(`Scenes: Unsupported variable type ${K.kind}`)}}}function z(K){return M.sB in K.spec.query.spec?K.spec.query.spec[M.sB]??"":{...K.spec.query.spec,refId:K.spec.query.spec.refId??"A"}}function R(K,w){const Q=Array.isArray(K.spec.current.value)?K.spec.current.value[0]:K.spec.current.value;return Q.startsWith("$__auto_interval_")?"$__auto":w.includes(Q)?Q:w[0]}function O(K){const w=K.variables.map(Q=>{try{if(Q.kind==="AdhocVariable"){const k=(0,C.DG)({type:Q.group,uid:Q.datasource?.name},Q.group);return new o.H9({name:Q.spec.name,label:Q.spec.label,readOnly:!0,description:Q.spec.description,skipUrlSync:Q.spec.skipUrlSync,hide:(0,T.cc)(Q.spec.hide),datasource:k,applyMode:"auto",filters:Q.spec.filters??[],baseFilters:Q.spec.baseFilters??[],defaultKeys:Q.spec.defaultKeys,useQueriesAsFilterForOptions:!0,layout:s.$.featureToggles.newFiltersUI?"combobox":void 0,supportsMultiValueOperators:!!(0,d.l)().getInstanceSettings(k)?.meta.multiValueFilterOperators})}return N(Q)}catch(k){return console.error(k),null}}).filter(Q=>!!Q);return new o.Pj({variables:w})}function N(K){let w,Q;if(K.kind==="IntervalVariable"){const k=(0,y.Sm)(K.spec.query),te=R(K,k);return w=new D.B({name:K.spec.name,label:K.spec.label,description:K.spec.description,value:te,text:te,hide:(0,T.cc)(K.spec.hide)}),w}return K.kind==="ConstantVariable"||K.kind==="AdhocVariable"?Q={value:"",text:""}:K.kind==="SwitchVariable"?Q={value:K.spec.current??"false",text:K.spec.current??"false"}:Q={value:K.spec.current?.value??"",text:K.spec.current?.text??""},w=new D.B({name:K.spec.name,label:K.spec.label,description:K.spec.description,value:Q?.value??"",text:Q?.text??"",hide:(0,T.cc)(K.spec.hide)}),w}function F(K,w){return K.elements[w].kind==="Panel"?K.elements[w]:void 0}function G(K,w){return K.elements[w].kind==="LibraryPanel"?K.elements[w]:void 0}function H(K){return K.annotations.some(k=>k.spec.builtIn)?void 0:{kind:"AnnotationQuery",spec:{query:{kind:"DataQuery",version:(0,l.iM)().version,group:"grafana",datasource:{name:"-- Grafana --"},spec:{}},name:"Annotations & Alerts",iconColor:i.Mk,enable:!0,hide:!0,builtIn:!0}}}},31200:(ne,j,e)=>{"use strict";e.d(j,{$H:()=>a,Nc:()=>n,Rq:()=>s,p0:()=>l});const n=i=>i===""||s(i)?i:`"${i}"`,a=i=>{if(s(i))return i;let p="U__";for(let h=0;h<i.length;h++){const u=i[h],r=i.codePointAt(h);u==="_"?p+="__":r!==void 0&&d(u,h)?p+=u:r===void 0||!o(r)?p+="_FFFD_":(p+="_",p+=r.toString(16),p+="_"),r!==void 0&&r>65535&&h++}return p},s=i=>{if(i.length===0)return!1;for(let c=0;c<i.length;c++){const p=i[c];if(!d(p,c))return!1}return!0},d=(i,c)=>{const p=i.codePointAt(0);return p===void 0?!1:p>=97&&p<=122||p>=65&&p<=90||p===95||p===58||p>=48&&p<=57&&c>0},o=i=>i>=0&&i<=1114111,l=i=>{const c=[],p=/(=~|!=|!~|=)/;let h="",u="",r=!1,v="";const g=()=>{const E=v.match(p);if(E){const x=E[0];[h,u]=v.split(x),c.push(`${n(h.trim())}${x}"${u.slice(1,-1)}"`)}};for(const E of i)E==='"'&&v[v.length-1]!=="\\"?(r=!r,v+=E):E===","&&!r?(g(),v=""):v+=E;return v&&g(),c.join(",")}},31210:(ne,j,e)=>{"use strict";e.d(j,{r:()=>c});var n=e(74848),a=e(96540),s=e(92745),d=e(63142),o=e(45861),l=e(71599),i=e(81538);function c({action:p,...h}){const u=(0,d.$j)(),r=p.style.backgroundColor||u.colors.secondary.main,v=u.colors.getContrastText(r),[g,E]=(0,a.useState)(!1),[x,m]=(0,a.useState)(!1),[y,b]=(0,a.useState)({}),D=p.variables&&p.variables.length>0,f=()=>{D?m(!0):E(!0)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.$n,{variant:"primary",size:"sm",onClick:f,...h,style:{width:"fit-content",backgroundColor:r,color:v},children:p.title}),D&&x&&(0,n.jsx)(i.b,{onDismiss:()=>m(!1),action:p,onShowConfirm:()=>E(!0),variables:y,setVariables:b}),g&&(0,n.jsx)(l.u,{isOpen:!0,title:(0,s.t)("grafana-ui.action-editor.button.confirm-action","Confirm action"),body:p.confirmation(y),confirmText:(0,s.t)("grafana-ui.action-editor.button.confirm","Confirm"),confirmButtonVariant:"primary",onConfirm:()=>{E(!1),p.onClick(new MouseEvent("click"),null,y)},onDismiss:()=>{E(!1)}})]})}},31221:()=>{(function(ne){var j={series:{stack:null}};function e(n){function a(d,o){for(var l=null,i=0;i<o.length&&d!=o[i];++i)o[i].stack==d.stack&&(l=o[i]);return l}function s(d,o,l){if(!(o.stack==null||o.stack===!1)){var i=a(o,d.getData());if(i){for(var c=l.pointsize,p=l.points,h=i.datapoints.pointsize,u=i.datapoints.points,r=[],v,g,E,x,m,y,b=o.lines.show,D=o.bars.horizontal,f=c>2&&(D?l.format[2].x:l.format[2].y),C=b&&o.lines.steps,P=D?1:0,T=D?0:1,M=0,I=0,B,U;!(M>=p.length&&I>=u.length);){if(B=r.length,M<p.length&&p[M]==null){for(U=0;U<c;++U)r.push(p[M+U]);M+=c}else if(M>=p.length){for(U=0;U<c;++U)r.push(u[I+U]);f&&(r[B+2]=u[I+T]),I+=h}else if(I>=u.length){for(U=0;U<c;++U)r.push(p[M+U]);M+=c}else if(I<u.length&&u[I]==null)I+=h;else{if(v=p[M+P],g=p[M+T],x=u[I+P],m=u[I+T],y=0,v==x){for(U=0;U<c;++U)r.push(p[M+U]);r[B+T]+=m,y=m,M+=c,I+=h}else if(v>x){if(M==0){for(U=0;U<c;++U)r.push(u[I+U]);y=m}if(M>0&&p[M-c]!=null){for(E=0,r.push(x),r.push(E+m),U=2;U<c;++U)r.push(p[M+U]);y=m}I+=h}else{for(U=0;U<c;++U)r.push(p[M+U]);I>0&&u[I-h]!=null&&(y=0),r[B+T]+=y,M+=c}fromgap=!1,B!=r.length&&f&&(r[B+2]=y)}if(C&&B!=r.length&&B>0&&r[B]!=null&&r[B]!=r[B-c]&&r[B+1]!=r[B-c+1]){for(U=0;U<c;++U)r[B+c+U]=r[B+U];r[B+1]=r[B-c+1]}}l.points=r}}}n.hooks.processDatapoints.push(s)}ne.plot.plugins.push({init:e,options:j,name:"stack",version:"1.2"})})(jQuery)},31595:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>s});var n=e(96540),a=e(79450);function s(){const d=(0,n.useContext)(a.b);return d||null}},31819:(ne,j,e)=>{"use strict";e.d(j,{G:()=>p,U:()=>h});var n=e(74848),a=e(96540),s=e(92745),d=e(44248),o=e(18857),l=e(43243),i=e(52763),c=e(93612);const p=({repeat:u,onChange:r,id:v})=>{const g=(0,i.d4)(m=>(0,c.SS)((0,c.y7)(m),m)),E=(0,a.useMemo)(()=>{const m=g.map(y=>({label:y.name,value:y.name}));return m.length===0&&m.unshift({label:(0,s.t)("dashboard.repeat-row-select.variable-options.label.no-template-variables-found","No template variables found"),value:null}),m.unshift({label:(0,s.t)("dashboard.repeat-row-select.variable-options.label.disable-repeating","Disable repeating"),value:null}),m},[g]),x=(0,a.useCallback)(m=>r(m.value),[r]);return(0,n.jsx)(o.l6,{inputId:v,value:u,onChange:x,options:E})},h=({sceneContext:u,repeat:r,id:v,onChange:g})=>{const x=(0,a.useMemo)(()=>d.jh.getVariables(u.getRoot()),[u]).useState().variables,m=(0,a.useMemo)(()=>{const D=x.map(f=>({label:f.state.name,value:f.state.name}));return D.unshift({label:(0,s.t)("dashboard.repeat-row-select2.variable-options.label.disable-repeating","Disable repeating"),value:""}),D},[x]),y=(0,a.useCallback)(D=>D&&g(D.value),[g]),b=!r&&m.length<=1;return(0,n.jsx)(l.G,{id:v,value:r,onChange:y,options:m,disabled:b,placeholder:b?(0,s.t)("dashboard.repeat-row-select2.variable-options.label.no-template-variables-found","No template variables found"):(0,s.t)("dashboard.repeat-row-select2.placeholder","Choose")})}},31937:(ne,j,e)=>{"use strict";e.d(j,{UH:()=>i,k9:()=>p,vn:()=>h});var n=e(96540),a=e(43173),s=e(69896),d=e(27963),o=e(51702),l=e(58449);function i(){const{chrome:u}=(0,d.Il)(),r=u.state.getValue(),v=(0,s.b)(),g=(0,o.i)("xl"),[E,x]=(0,n.useState)(c(r,v?.state.enabled,g));return(0,n.useEffect)(()=>{const m=u.state.subscribe(y=>{const b=c(y,v?.state.enabled,g);b!==E&&x(b)});return()=>m.unsubscribe()},[u,E,v,g]),E}function c(u,r=!1,v){return u.kioskMode||u.chromeless?0:r?2:u.actions?u.megaMenuDocked||!a.$.featureToggles.dashboardScene?2:v&&a.$.featureToggles.unifiedNavbars?1:2:1}function p(){const u=i(),{isOpen:r}=(0,l.sA)();return r?0:u*h()}function h(){return 40}},32154:(ne,j,e)=>{"use strict";e.d(j,{g:()=>q,K:()=>re});var n=e(74848),a=e(22803),s=e(96540),d=e(28105),o=e(22592),l=e(48480),i=e(1906),c=e(51898),p=e(92745),h=e(78282),u=e(36490),r=e(41654),v=e(45861),g=e(92807),E=e(22787),x=e(65240),m=e(51115),y=e(16817),b=e(67458),D=e(68143),f=e(6975);function C({pluginId:X}){const{value:J,loading:_,error:ee}=(0,y.A)(async()=>(0,D.AI)().get(`/api/plugins/${X}/markdown/query_help`),[]),ae=(0,b.G)(J);return _?(0,n.jsx)(f._,{text:(0,p.t)("plugins.plugin-help.loading","Loading help...")}):ee?(0,n.jsx)("h3",{children:(0,n.jsx)(p.x6,{i18nKey:"plugins.plugin-help.error",children:"An error occurred when loading help."})}):J===""?(0,n.jsx)("h3",{children:(0,n.jsx)(p.x6,{i18nKey:"plugins.plugin-help.not-found",children:"No query help could be found."})}):(0,n.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:ae}})}var P=e(65642),T=e(83873),M=e(1404),I=e(41776),B=e(76792),U=e(29328),W=e(73601),V=e(57204),z=e(23117),R=e(65966),O=e(17548),N=e(63142),F=e(79233),G=e(63527),H=e(21285),K=e(85348);const w=s.memo(({options:X,dataSource:J,data:_,onChange:ee})=>{const[ae,le]=(0,s.useState)(X.timeRange?.from||""),[L,ie]=(0,s.useState)(X.timeRange?.shift||""),[oe,ue]=(0,s.useState)(X.timeRange?.hide??!1),[ye,fe]=(0,s.useState)(!1),[Ee,Ae]=(0,s.useState)(!0),[Ge,Fe]=(0,s.useState)(!0),Pe=(0,N.of)(te),Ve=(0,s.useCallback)(De=>{le(De.target.value)},[]),me=(0,s.useCallback)(De=>{ie(De.target.value)},[]),Se=(0,s.useCallback)(De=>{const Me=k(De.target.value),be=Q(Me);be&&X.timeRange?.from!==Me&&ee({...X,timeRange:{...X.timeRange??{},from:Me}}),Ae(be)},[ee,X]),Qe=(0,s.useCallback)(De=>{const Me=k(De.target.value),be=Q(Me);be&&X.timeRange?.shift!==Me&&ee({...X,timeRange:{...X.timeRange??{},shift:Me}}),Fe(be)},[ee,X]),Ue=(0,s.useCallback)(()=>{const De=!oe;ue(De),ee({...X,timeRange:{...X.timeRange??{},hide:De}})},[ee,X,oe]),Ie=(0,s.useCallback)(De=>{ee({...X,cacheTimeout:k(De.target.value)})},[ee,X]),Re=(0,s.useCallback)(De=>{let Me=parseInt(De.target.value,10);(isNaN(Me)||Me===0)&&(Me=null),ee({...X,queryCachingTTL:Me})},[ee,X]),Ke=(0,s.useCallback)(De=>{let Me=parseInt(De.currentTarget.value,10);(isNaN(Me)||Me===0)&&(Me=null),Me!==X.maxDataPoints&&ee({...X,maxDataPoints:Me})},[ee,X]),Le=(0,s.useCallback)(De=>{const Me=k(De.target.value);Me!==X.minInterval&&ee({...X,minInterval:Me})},[ee,X]),ze=(0,s.useCallback)(()=>{fe(!0)},[]),Be=(0,s.useCallback)(()=>{fe(!1)},[]),$e=()=>{const De=`If your time series store has a query cache this option can override the default cache timeout. Specify a
    numeric value in seconds.`;return J.meta.queryOptions?.cacheTimeout?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.c,{tooltip:De,htmlFor:"cache-timeout-id",children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.render-cache-timeout-option.cache-timeout",children:"Cache timeout"})}),(0,n.jsx)(G.p,{id:"cache-timeout-id",type:"text",placeholder:"60",spellCheck:!1,onBlur:Ie,defaultValue:X.cacheTimeout??""})]}):null},Ye=()=>{const De="Cache time-to-live: How long results from this queries in this panel will be cached, in milliseconds. Defaults to the TTL in the caching configuration for this datasource.";return J.cachingConfig?.enabled?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.c,{tooltip:De,children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.render-query-caching-ttloption.cache-ttl",children:"Cache TTL"})}),(0,n.jsx)(G.p,{type:"number",placeholder:`${J.cachingConfig.TTLMs}`,spellCheck:!1,onBlur:Re,defaultValue:X.queryCachingTTL??void 0})]}):null},de=()=>{const De=_.request?.maxDataPoints,Me=X.maxDataPoints??"",be=Me==="";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.c,{htmlFor:"max-data-points-input",tooltip:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.render-max-data-points-option.max-data-points-tooltip",children:"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer."}),children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.render-max-data-points-option.max-data-points",children:"Max data points"})}),(0,n.jsx)(G.p,{id:"max-data-points-input",type:"number",placeholder:`${De}`,spellCheck:!1,onBlur:Ke,defaultValue:Me}),be&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:(0,a.cx)(Pe.noSquish,Pe.operator),children:"="}),(0,n.jsx)("span",{className:(0,a.cx)(Pe.noSquish,Pe.left),children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.render-max-data-points-option.width-of-panel",children:"Width of panel"})})]})]})},ge=()=>{const De=_.request?.interval,Me=J.interval??"No limit";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.c,{className:Pe.firstColumn,tooltip:(0,n.jsxs)(p.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.min-interval-tooltip",children:["A lower limit for the interval. Recommended to be set to write frequency, for example ",(0,n.jsx)("code",{children:"1m"})," if your data is written every minute. Default value can be set in data source settings for most data sources."]}),htmlFor:"min-interval-input",children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.min-interval",children:"Min interval"})}),(0,n.jsx)(G.p,{id:"min-interval-input",type:"text",placeholder:`${Me}`,spellCheck:!1,onBlur:Le,defaultValue:X.minInterval??""}),(0,n.jsx)(F.c,{className:Pe.firstColumn,tooltip:(0,n.jsxs)(p.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.interval-tooltip",children:["The evaluated interval that is sent to data source and is used in ",(0,n.jsx)("code",{children:"$__interval"})," and"," ",(0,n.jsx)("code",{children:"$__interval_ms"}),". This value is not exactly equal to ",(0,n.jsx)("code",{children:"Time range / max data points"}),", it will approximate a series of magic number."]}),children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.interval",children:"Interval"})}),(0,n.jsx)("span",{className:Pe.noSquish,children:De}),(0,n.jsx)("span",{className:(0,a.cx)(Pe.noSquish,Pe.operator),children:"="}),(0,n.jsx)("span",{className:(0,a.cx)(Pe.noSquish,Pe.left),children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.time-range-max-data-points",children:"Time range / max data points"})})]})},pe=()=>{if(ye)return;let De=X.maxDataPoints??"";De===""&&_.request&&(De=`auto = ${_.request.maxDataPoints}`);const Me=_.request?.interval??X.minInterval;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:Pe.collapsedText,children:(0,n.jsxs)(p.x6,{i18nKey:"query.query-group-options-editor.collapsed-max-data-points",children:["MD = ",{mdDesc:De}]})}),(0,n.jsx)("span",{className:Pe.collapsedText,children:(0,n.jsxs)(p.x6,{i18nKey:"query.query-group-options-editor.collapsed-interval",children:["Interval = ",{intervalDesc:Me}]})})]})};return(0,n.jsx)(K.u,{id:"Query options",index:0,title:(0,p.t)("query.query-group-options-editor.Query options-title-query-options","Query options"),headerElement:pe(),isOpen:ye,onOpen:ze,onClose:Be,children:(0,n.jsxs)("div",{className:Pe.grid,children:[de(),ge(),$e(),Ye(),(0,n.jsx)(F.c,{htmlFor:"relative-time-input",tooltip:(0,n.jsxs)(p.x6,{i18nKey:"query.query-group-options-editor.relative-time-tooltip",values:{relativeFrom:"now-5m",relativeTo:"5m",variable:"$_relativeTime"},children:["Overrides the relative time range for individual panels, which causes them to be different than what is selected in the dashboard time picker in the top-right corner of the dashboard. For example to configure the Last 5 minutes the Relative time should be ",(0,n.jsx)("code",{children:"{{relativeFrom}}"})," and"," ",(0,n.jsx)("code",{children:"{{relativeTo}}"}),", or variables like ",(0,n.jsx)("code",{children:"{{variable}}"}),"."]}),children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.relative-time",children:"Relative time"})}),(0,n.jsx)(G.p,{id:"relative-time-input",type:"text",placeholder:"1h",onChange:Ve,onBlur:Se,invalid:!Ee,value:ae}),(0,n.jsx)(F.c,{htmlFor:"time-shift-input",className:Pe.firstColumn,tooltip:(0,n.jsxs)(p.x6,{i18nKey:"query.query-group-options-editor.time-shift-tooltip",values:{relativeFrom:"now-1h",relativeTo:"1h",variable:"$_timeShift"},children:["Overrides the time range for individual panels by shifting its start and end relative to the time picker. For example to configure the Last 1h the Time shift should be ",(0,n.jsx)("code",{children:"{{relativeFrom}}"})," and"," ",(0,n.jsx)("code",{children:"{{relativeTo}}"}),", or variables like ",(0,n.jsx)("code",{children:"{{variable}}"}),"."]}),children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.time-shift",children:"Time shift"})}),(0,n.jsx)(G.p,{id:"time-shift-input",type:"text",placeholder:"1h",onChange:me,onBlur:Qe,invalid:!Ge,value:L}),(L||ae)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.c,{htmlFor:"hide-time-info-switch",className:Pe.firstColumn,children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-options-editor.hide-time-info",children:"Hide time info"})}),(0,n.jsx)(H.K,{id:"hide-time-info-switch",className:Pe.left,value:oe,onChange:Ue})]})]})})});w.displayName="QueryGroupOptionsEditor";function Q(X){return!X||O.isValidTimeSpan(X)}function k(X){return X===""?null:X}function te(X){return{grid:(0,a.css)({display:"grid",gridTemplateColumns:"auto minmax(5em, 1fr) auto 1fr",gap:X.spacing(.5),gridAutoRows:X.spacing(4),whiteSpace:"nowrap"}),firstColumn:(0,a.css)({gridColumn:1}),collapsedText:(0,a.css)({marginLeft:X.spacing(2),fontSize:X.typography.size.sm,color:X.colors.text.secondary}),noSquish:(0,a.css)({display:"flex",alignItems:"center",padding:X.spacing(0,1),fontWeight:X.typography.fontWeightMedium,fontSize:X.typography.size.sm,backgroundColor:X.colors.background.secondary,borderRadius:X.shape.radius.default}),left:(0,a.css)({justifySelf:"left"}),operator:(0,a.css)({color:X.v1.palette.orange})}}class q extends s.PureComponent{constructor(){super(...arguments),this.backendSrv=T.IB,this.dataSourceSrv=(0,h.l)(),this.querySubscription=null,this.state={isDataSourceModalOpen:!!u.Ny.getSearchObject().firstPanel,isLoadingHelp:!1,helpContent:null,isPickerOpen:!1,isHelpOpen:!1,queries:[],data:{state:d.Gu.NotStarted,series:[],timeRange:(0,o.E2)()}},this.onChangeDataSource=async(J,_)=>{const{dsSettings:ee}=this.state,ae=ee?await(0,h.l)().get(ee.uid):void 0,le=await(0,h.l)().get(J.uid),L=_||await(0,V.y)(le,J.uid,this.state.queries,ae),ie=await this.dataSourceSrv.get(J.name);this.onChange({queries:L,dataSource:{name:J.name,uid:J.uid,...(0,l.p$)(J)}}),this.setState({queries:L,dataSource:ie,dsSettings:J}),_&&this.props.onRunQueries()},this.onAddQueryClick=()=>{const{queries:J}=this.state;this.onQueriesChange((0,M.U7)(J,this.newQuery())),this.onScrollBottom()},this.onAddExpressionClick=()=>{this.onQueriesChange((0,M.U7)(this.state.queries,U.Ex.newQuery())),this.onScrollBottom()},this.onScrollBottom=()=>{setTimeout(()=>{this.state.scrollElement&&this.state.scrollElement.scrollTo({top:1e4})},20)},this.onUpdateAndRun=J=>{this.props.onOptionsChange(J),this.props.onRunQueries()},this.onOpenHelp=()=>{this.setState({isHelpOpen:!0})},this.onCloseHelp=()=>{this.setState({isHelpOpen:!1})},this.onCloseDataSourceModal=()=>{this.setState({isDataSourceModalOpen:!1})},this.onAddQuery=J=>{const{dsSettings:_,queries:ee}=this.state;this.onQueriesChange((0,M.U7)(ee,J,_?(0,l.p$)(_):{type:void 0,uid:void 0})),this.onScrollBottom()},this.onQueriesChange=J=>{this.onChange({queries:J}),this.setState({queries:J})},this.setScrollRef=J=>{this.setState({scrollElement:J})}}async componentDidMount(){const{options:J,queryRunner:_}=this.props;this.querySubscription=_.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:ee=>this.onPanelDataUpdate(ee)}),this.setNewQueriesAndDatasource(J)}componentWillUnmount(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}async componentDidUpdate(){const{options:J}=this.props,_=await(0,h.l)().get(J.dataSource);this.state.dataSource&&_.uid!==this.state.dataSource?.uid&&this.setNewQueriesAndDatasource(J)}async setNewQueriesAndDatasource(J){try{const _=await this.dataSourceSrv.get(J.dataSource),ee=this.dataSourceSrv.getInstanceSettings(J.dataSource),ae=await this.dataSourceSrv.get(),le=_.getRef(),L=J.queries.map(ie=>({...(0,M.Ih)(ie)&&_?.getDefaultQuery?.(i.Jk.PanelEditor),datasource:le,...ie}));this.setState({queries:L,dataSource:_,dsSettings:ee,defaultDataSource:ae})}catch(_){console.error("failed to load data source",_)}}onPanelDataUpdate(J){this.setState({data:J})}newQuery(){const{dsSettings:J,defaultDataSource:_}=this.state,ee=J&&!J.meta.mixed?(0,l.p$)(J):_?_.getRef():{type:void 0,uid:void 0};return{...this.state.dataSource?.getDefaultQuery?.(i.Jk.PanelEditor),datasource:ee}}onChange(J){this.props.onOptionsChange({...this.props.options,...J})}renderTopSection(J){const{onOpenQueryInspector:_,options:ee}=this.props,{dataSource:ae,data:le,dsSettings:L}=this.state;return!L||!ae?null:(0,n.jsx)(re,{data:le,dataSource:ae,options:ee,dsSettings:L,onOptionsChange:this.onUpdateAndRun,onDataSourceChange:this.onChangeDataSource,onOpenQueryInspector:_})}renderQueries(J){const{onRunQueries:_}=this.props,{data:ee,queries:ae}=this.state;return(0,n.jsx)("div",{"aria-label":c.Tp.components.QueryTab.content,children:(0,n.jsx)(R.L,{queries:ae,dsSettings:J,onQueriesChange:this.onQueriesChange,onAddQuery:this.onAddQuery,onRunQueries:_,data:ee})})}isExpressionsSupported(J){return(J.meta.backend||J.meta.alerting||J.meta.mixed)===!0}renderExtraActions(){return z.m.getAllExtraRenderAction().map((J,_)=>J({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:_})).filter(Boolean)}renderAddQueryRow(J,_){const ee=!(0,W.k)(J.name);return(0,n.jsxs)(r.B,{gap:2,alignItems:"flex-start",children:[ee&&(0,n.jsx)(v.$n,{icon:"plus",onClick:this.onAddQueryClick,variant:"secondary","data-testid":c.Tp.components.QueryTab.addQuery,children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group.add-query",children:"Add query"})}),P.Ay.expressionsEnabled&&this.isExpressionsSupported(J)&&(0,n.jsx)(v.$n,{icon:"plus",onClick:this.onAddExpressionClick,variant:"secondary",className:_.expressionButton,"data-testid":"query-tab-add-expression",children:(0,n.jsx)("span",{children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group.expression",children:"Expression"})})}),this.renderExtraActions()]})}render(){const{isHelpOpen:J,dsSettings:_}=this.state,ee=se();return(0,n.jsx)(g.P,{minHeight:"100%",ref:this.setScrollRef,children:(0,n.jsxs)("div",{className:ee.innerWrapper,children:[this.renderTopSection(ee),_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:ee.queriesWrapper,children:this.renderQueries(_)}),this.renderAddQueryRow(_,ee),J&&(0,n.jsx)(E.a,{title:(0,p.t)("query.query-group.title-data-source-help","Data source help"),isOpen:!0,onDismiss:this.onCloseHelp,children:(0,n.jsx)(C,{pluginId:_.meta.id})})]})]})})}}const se=(0,x.N)(()=>{const{theme:X}=P.Ay;return{innerWrapper:(0,a.css)({display:"flex",flexDirection:"column",padding:X.spacing.md}),dataSourceRow:(0,a.css)({display:"flex",marginBottom:X.spacing.md}),dataSourceRowItem:(0,a.css)({marginRight:X.spacing.inlineFormMargin}),dataSourceRowItemOptions:(0,a.css)({flexGrow:1,marginRight:X.spacing.inlineFormMargin}),queriesWrapper:(0,a.css)({paddingBottom:"16px"}),expressionWrapper:(0,a.css)({}),expressionButton:(0,a.css)({marginRight:X.spacing.sm})}});function re({dataSource:X,options:J,data:_,dsSettings:ee,onDataSourceChange:ae,onOptionsChange:le,onOpenQueryInspector:L}){const ie=se(),[oe,ue]=(0,s.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{"data-testid":c.Tp.components.QueryTab.queryGroupTopSection,children:(0,n.jsxs)("div",{className:ie.dataSourceRow,children:[(0,n.jsx)(m.I,{htmlFor:"data-source-picker",width:"auto",children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-top-section.data-source",children:"Data source"})}),(0,n.jsx)("div",{className:ie.dataSourceRowItem,children:(0,n.jsx)(Y,{options:J,onChange:async(ye,fe)=>await ae?.(ye,fe),isDataSourceModalOpen:!!u.Ny.getSearchObject().firstPanel})}),X&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:ie.dataSourceRowItem,children:(0,n.jsx)(v.$n,{variant:"secondary",icon:"question-circle",tooltip:(0,p.t)("query.query-group-top-section.query-tab-help-button-title-open-data-source-help","Open data source help"),onClick:()=>ue(!0),"data-testid":"query-tab-help-button"})}),(0,n.jsx)("div",{className:ie.dataSourceRowItemOptions,children:(0,n.jsx)(w,{options:J,dataSource:X,data:_,onChange:ye=>{le?.(ye)}})}),L&&(0,n.jsx)("div",{className:ie.dataSourceRowItem,children:(0,n.jsx)(v.$n,{variant:"secondary",onClick:L,"aria-label":c.Tp.components.QueryTab.queryInspectorButton,children:(0,n.jsx)(p.x6,{i18nKey:"query.query-group-top-section.query-inspector",children:"Query inspector"})})})]})]})}),oe&&(0,n.jsx)(E.a,{title:(0,p.t)("query.query-group-top-section.title-data-source-help","Data source help"),isOpen:!0,onDismiss:()=>ue(!1),children:(0,n.jsx)(C,{pluginId:ee.meta.id})})]})}function Y({options:X,onChange:J,..._}){const[ee,ae]=(0,s.useState)(!!_.isDataSourceModalOpen);(0,s.useEffect)(()=>{u.Ny.getSearchObject().firstPanel&&u.Ny.partial({firstPanel:null},!0)},[]);const le={metrics:!0,mixed:!0,dashboard:!0,variables:!0,current:X.dataSource,uploadFile:!0,onChange:async(L,ie)=>{await J(L,ie),ae(!1)}};return(0,n.jsxs)(n.Fragment,{children:[ee&&(0,n.jsx)(I.p,{...le,onDismiss:()=>ae(!1)}),(0,n.jsx)(B.sk,{...le})]})}},32157:(ne,j,e)=>{"use strict";e.d(j,{Wj:()=>h,rV:()=>p});var n=e(81160),a=e(41119),s=e(16515),d=e(95004),o=e(46644),l=e(36638),i=e(6844),c=e(64761),p=(x=>(x.SeriesToRows="seriesToRows",x.ReduceFields="reduceFields",x))(p||{});const h={id:c.F.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[o.gy.max]},operator:x=>m=>m.pipe((0,n.T)(y=>{if(!x?.reducers?.length)return y;const b=x.fields?(0,l.NS)(x.fields):x.includeTimeField&&x.mode==="reduceFields"?i.Yg:i.zx;if(x.mode==="reduceFields")return g(y,b,x.reducers);const D=u(y,b,x.reducers,x.labelsToFields);return D?[{...D,refId:`${c.F.reduce}-${y.map(f=>f.refId).join("-")}`}]:[]}))};function u(x,m,y,b){const D=o.AS.list(y),f=D.map(T=>T.id),C=[],P=b?r(x):[];for(const T of x){const M=T.fields.filter(z=>m(z,T,x)),I=M.length,B=[],U=new Array(I);B.push({name:"Field",type:d.PU.string,values:U,config:{}});const W={};if(b)for(const z of P)W[z]=new Array(I),B.push({name:z,type:d.PU.string,values:W[z],config:{}});const V={};for(const z of D)V[z.id]=new Array(I),B.push({name:z.name,type:d.PU.other,values:V[z.id],config:{}});for(let z=0;z<M.length;z++){const R=M[z],O=(0,o.Nw)({field:R,reducers:f});if(b){if(U[z]=R.name,R.labels)for(const N in R.labels)W[N][z]=R.labels[N]}else U[z]=(0,s.Ct)(R,T,x);for(const N of D){const F=O[N.id];F===null?V[N.id][z]=NaN:V[N.id][z]=F}}for(const z of B)if(z.type===d.PU.other){const R=(0,a.dF)(z);R&&(z.type=R)}C.push({...T,fields:B,length:I})}return v(C)}function r(x){const m=new Set;for(const y of x)for(const b of y.fields)if(b.labels)for(const D of Object.keys(b.labels))m.add(D);return[...m]}function v(x){if(!x?.length)return;const m=x[0];for(let y=1;y<x.length;y++){const b=x[y];for(let D=0;D<m.fields.length;D++){const f=m.fields[D];for(let C=0;C<b.fields.length;C++){const P=b.fields[C],T=D===0&&C===0,M=f.type===P.type&&f.name===P.name;if(T||M){const I=f.values,B=P.values;f.values=I.concat(B)}}}}return m.name=void 0,m.length=m.fields[0].values.length,m}function g(x,m,y){const D=o.AS.list(y).map(C=>C.id),f=[];for(const C of x){const P=[];for(const T of C.fields)if(m(T,C,x)){const M=(0,o.Nw)({field:T,reducers:D});for(const I of D){const B=M[I],U={...T,labels:{...T.labels},type:E(I,T),values:[B],state:void 0};D.length>1&&(U.labels||(U.labels={}),U.labels.reducer=o.AS.get(I).name),P.push(U)}}P.length&&f.push({...C,fields:P,length:1})}return f}function E(x,m){switch(x){case o.gy.allValues:case o.gy.uniqueValues:return d.PU.other;case o.gy.first:case o.gy.firstNotNull:case o.gy.last:case o.gy.lastNotNull:return m.type;default:return d.PU.number}}},32176:()=>{(function(ne){var j={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(p,h){return h*Math.floor(p/h)}function n(p,h,u,r){if(typeof p.strftime=="function")return p.strftime(h);var v=function(f,C){return f=""+f,C=""+(C??"0"),f.length==1?C+f:f},g=[],E=!1,x=p.getHours(),m=x<12;u==null&&(u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),r==null&&(r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var y;x>12?y=x-12:x==0?y=12:y=x;for(var b=0;b<h.length;++b){var D=h.charAt(b);if(E){switch(D){case"a":D=""+r[p.getDay()];break;case"b":D=""+u[p.getMonth()];break;case"d":D=v(p.getDate(),"");break;case"e":D=v(p.getDate()," ");break;case"h":case"H":D=v(x);break;case"I":D=v(y);break;case"l":D=v(y," ");break;case"m":D=v(p.getMonth()+1,"");break;case"M":D=v(p.getMinutes());break;case"q":D=""+(Math.floor(p.getMonth()/3)+1);break;case"S":D=v(p.getSeconds());break;case"y":D=v(p.getFullYear()%100);break;case"Y":D=""+p.getFullYear();break;case"p":D=m?"am":"pm";break;case"P":D=m?"AM":"PM";break;case"w":D=""+p.getDay();break}g.push(D),E=!1}else D=="%"?E=!0:g.push(D)}return g.join("")}function a(p){function h(g,E,x,m){g[E]=function(){return x[m].apply(x,arguments)}}var u={date:p};p.strftime!=null&&h(u,"strftime",p,"strftime"),h(u,"getTime",p,"getTime"),h(u,"setTime",p,"setTime");for(var r=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],v=0;v<r.length;v++)h(u,"get"+r[v],p,"getUTC"+r[v]),h(u,"set"+r[v],p,"setUTC"+r[v]);return u}function s(p,h){if(h.timezone=="browser")return new Date(p);if(!h.timezone||h.timezone=="utc")return a(new Date(p));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var u=new timezoneJS.Date;return u.setTimezone(h.timezone),u.setTime(p),u}else return a(new Date(p))}var d={second:1e3,minute:60*1e3,hour:3600*1e3,day:1440*60*1e3,month:720*60*60*1e3,quarter:2160*60*60*1e3,year:365.2425*24*60*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],l=o.concat([[3,"month"],[6,"month"],[1,"year"]]),i=o.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function c(p){p.hooks.processOptions.push(function(h,u){ne.each(h.getAxes(),function(r,v){var g=v.options;g.mode=="time"&&(v.tickGenerator=function(E){var x=[],m=s(E.min,g),y=0,b=g.tickSize&&g.tickSize[1]==="quarter"||g.minTickSize&&g.minTickSize[1]==="quarter"?i:l;g.minTickSize!=null&&(typeof g.tickSize=="number"?y=g.tickSize:y=g.minTickSize[0]*d[g.minTickSize[1]]);for(var D=0;D<b.length-1&&!(E.delta<(b[D][0]*d[b[D][1]]+b[D+1][0]*d[b[D+1][1]])/2&&b[D][0]*d[b[D][1]]>=y);++D);var f=b[D][0],C=b[D][1];if(C=="year"){if(g.minTickSize!=null&&g.minTickSize[1]=="year")f=Math.floor(g.minTickSize[0]);else{var P=Math.pow(10,Math.floor(Math.log(E.delta/d.year)/Math.LN10)),T=E.delta/d.year/P;T<1.5?f=1:T<3?f=2:T<7.5?f=5:f=10,f*=P}f<1&&(f=1)}E.tickSize=g.tickSize||[f,C];var M=E.tickSize[0];C=E.tickSize[1];var I=M*d[C];C=="second"?m.setSeconds(e(m.getSeconds(),M)):C=="minute"?m.setMinutes(e(m.getMinutes(),M)):C=="hour"?m.setHours(e(m.getHours(),M)):C=="month"?m.setMonth(e(m.getMonth(),M)):C=="quarter"?m.setMonth(3*e(m.getMonth()/3,M)):C=="year"&&m.setFullYear(e(m.getFullYear(),M)),m.setMilliseconds(0),I>=d.minute&&m.setSeconds(0),I>=d.hour&&m.setMinutes(0),I>=d.day&&m.setHours(0),I>=d.day*4&&m.setDate(1),I>=d.month*2&&m.setMonth(e(m.getMonth(),3)),I>=d.quarter*2&&m.setMonth(e(m.getMonth(),6)),I>=d.year&&m.setMonth(0);var B=0,U=Number.NaN,W;do if(W=U,U=m.getTime(),x.push(U),C=="month"||C=="quarter")if(M<1){m.setDate(1);var V=m.getTime();m.setMonth(m.getMonth()+(C=="quarter"?3:1));var z=m.getTime();m.setTime(U+B*d.hour+(z-V)*M),B=m.getHours(),m.setHours(0)}else m.setMonth(m.getMonth()+M*(C=="quarter"?3:1));else C=="year"?m.setFullYear(m.getFullYear()+M):m.setTime(U+I);while(U<E.max&&U!=W);return x},v.tickFormatter=function(E,x){var m=s(E,x.options);if(g.timeformat!=null)return n(m,g.timeformat,g.monthNames,g.dayNames);var y=x.options.tickSize&&x.options.tickSize[1]=="quarter"||x.options.minTickSize&&x.options.minTickSize[1]=="quarter",b=x.tickSize[0]*d[x.tickSize[1]],D=x.max-x.min,f=g.twelveHourClock?" %p":"",C=g.twelveHourClock?"%I":"%H",P;b<d.minute?P=C+":%M:%S"+f:b<d.day?D<2*d.day?P=C+":%M"+f:P="%b %d "+C+":%M"+f:b<d.month?P="%b %d":y&&b<d.quarter||!y&&b<d.year?D<d.year?P="%b":P="%b %Y":y&&b<d.year?D<d.year?P="Q%q":P="Q%q %Y":P="%Y";var T=n(m,P,g.monthNames,g.dayNames);return T})})})}ne.plot.plugins.push({init:c,options:j,name:"time",version:"1.0"}),ne.plot.formatDate=n})(jQuery)},32215:(ne,j,e)=>{"use strict";e.d(j,{m6:()=>w,sP:()=>re});var n=e(92138),a=e(92745),s=e(68143),d=e(36490),o=e(43173),l=e(78282),i=e(44248),c=e(83793),p=e(5114),h=e(47797),u=e(37268),r=e(75735),v=e(50803),g=e(95407),E=e(60171),x=e(11909),m=e(48600),y=e(54767),b=e(22429),D=e(13543),f=e(22051);class C{constructor(){this.panelGroupsOpen=new Set,this.onDashboardInteractionStart=X=>{const J=D.wz.DASHBOARD_INTERACTION_START(X.operationId);(0,f.Yz)(J,X.timestamp);const _=X.metadata?.dashboardTitle||"Unknown Dashboard";(0,i.MV)("SPL",`[DASHBOARD] ${X.interactionType} started: ${_}`)},this.onDashboardInteractionMilestone=X=>{const J=X.milestone||"unknown",_=D.wz.DASHBOARD_MILESTONE(X.operationId,J);(0,f.Yz)(_,X.timestamp)},this.onDashboardInteractionComplete=X=>{const J=D.wz.DASHBOARD_INTERACTION_END(X.operationId),_=D.wz.DASHBOARD_INTERACTION_START(X.operationId),ee=D.l9.DASHBOARD_INTERACTION(X.operationId);(0,f.Yz)(J,X.timestamp),(0,f.xf)(ee,_,J),this.panelGroupsOpen.clear()},this.onPanelOperationStart=X=>{this.createStandardizedPanelMark(X,"start"),this.panelGroupsOpen.add(X.panelKey)},this.onPanelOperationComplete=X=>{this.createStandardizedPanelMark(X,"end"),this.createStandardizedPanelMeasure(X);const J=(X.duration||0).toFixed(1),_=(X.duration||0)>D.NR?" \u26A0\uFE0F SLOW":"";let ee=X.operation;X.operation==="query"&&(ee=`${X.operation} [${X.metadata.queryId}]`),(0,i.MV)("SPL",`[PANEL] ${X.pluginId}-${X.panelId} ${ee}: ${J}ms${_}`)},this.onQueryStart=X=>{const J=D.wz.QUERY_START(X.origin,X.queryId);(0,f.Yz)(J,X.timestamp)},this.onQueryComplete=X=>{const J=D.wz.QUERY_END(X.origin,X.queryId),_=D.wz.QUERY_START(X.origin,X.queryId),ee=D.l9.QUERY(X.origin,X.queryId);(0,f.Yz)(J,X.timestamp),(0,f.xf)(ee,_,J);const ae=(X.duration||0).toFixed(1),le=(X.duration||0)>D.NR?" \u26A0\uFE0F SLOW":"",L=X.queryType.replace(/^(getDataSource\/|AnnotationsDataLayer\/)/,"");(0,i.MV)("SPL",`[QUERY ${X.origin}] ${L} [${X.queryId}]: ${ae}ms${le}`)}}initialize(){(0,i.MV)("SPL","Performance logger ready")}destroy(){this.panelGroupsOpen.clear(),(0,i.MV)("SPL","Performance logger state cleared")}createStandardizedPanelMark(X,J){const{operation:_,panelKey:ee,operationId:ae}=X;switch(_){case"query":const le=J==="start"?D.wz.PANEL_QUERY_START(ee,ae):D.wz.PANEL_QUERY_END(ee,ae);(0,f.Yz)(le,X.timestamp);break;case"plugin-load":const L=J==="start"?D.wz.PANEL_PLUGIN_LOAD_START(ee,ae):D.wz.PANEL_PLUGIN_LOAD_END(ee,ae);(0,f.Yz)(L,X.timestamp);break;case"fieldConfig":const ie=J==="start"?D.wz.PANEL_FIELD_CONFIG_START(ee,ae):D.wz.PANEL_FIELD_CONFIG_END(ee,ae);(0,f.Yz)(ie,X.timestamp);break;case"render":const oe=J==="start"?D.wz.PANEL_RENDER_START(ee,ae):D.wz.PANEL_RENDER_END(ee,ae);(0,f.Yz)(oe,X.timestamp);break;case"transform":const ue=X.metadata.transformationId;if(J==="start")(0,f.Yz)(D.wz.PANEL_TRANSFORM_START(ee,ue,ae),X.timestamp);else{const fe=X.metadata.error||X.metadata.success===!1?D.wz.PANEL_TRANSFORM_ERROR(ee,ue,ae):D.wz.PANEL_TRANSFORM_END(ee,ue,ae);(0,f.Yz)(fe,X.timestamp)}break;default:break}}createStandardizedPanelMeasure(X){const{operation:J,panelKey:_,operationId:ee}=X;switch(J){case"query":const ae=D.wz.PANEL_QUERY_START(_,ee),le=D.wz.PANEL_QUERY_END(_,ee),L=D.l9.PANEL_QUERY(_,ee);(0,f.xf)(L,ae,le);break;case"plugin-load":const ie=D.wz.PANEL_PLUGIN_LOAD_START(_,ee),oe=D.wz.PANEL_PLUGIN_LOAD_END(_,ee),ue=D.l9.PANEL_PLUGIN_LOAD(_,ee);(0,f.xf)(ue,ie,oe);break;case"fieldConfig":const ye=D.wz.PANEL_FIELD_CONFIG_START(_,ee),fe=D.wz.PANEL_FIELD_CONFIG_END(_,ee),Ee=D.l9.PANEL_FIELD_CONFIG(_,ee);(0,f.xf)(Ee,ye,fe);break;case"render":const Ae=D.wz.PANEL_RENDER_START(_,ee),Ge=D.wz.PANEL_RENDER_END(_,ee),Fe=D.l9.PANEL_RENDER(_,ee);(0,f.xf)(Fe,Ae,Ge);break;case"transform":const Pe=X.metadata.transformationId,Ve=D.wz.PANEL_TRANSFORM_START(_,Pe,ee),Se=X.metadata.error||X.metadata.success===!1?D.wz.PANEL_TRANSFORM_ERROR(_,Pe,ee):D.wz.PANEL_TRANSFORM_END(_,Pe,ee),Qe=D.l9.PANEL_TRANSFORM(_,Pe,ee);(0,f.xf)(Qe,Ve,Se);break;default:break}}}let P=null;function T(){return P||(P=new C,P.initialize(),(0,f.Iz)(P,"SPL")),P}function M(){return T()}var I=e(83127),B=e(50893),U=e(4590),W=e(8535),V=e(6262),z=e(84019),R=e(31119),O=e(65333),N=e(17788),F=e(75570);function G(){T(),(0,x.iL)()}const H=500,K="loadDashboardScene",w="__grafana_home_uid__";class Q extends p.Q{constructor(){super(...arguments),this.cache={}}getCache(){return this.cache}async fetchHomeDashboard(){const X=await(0,s.AI)().get("/api/dashboards/home");if((0,V.U)(X)){const J=n.I.stripBaseFromUrl(X.redirectUri);return d.Ny.replace(J),null}return(0,E.aK)(X.dashboard)&&(X.dashboard=(0,v.Sb)(X.dashboard,{name:"",generation:0,resourceVersion:"0",creationTimestamp:""})),X?.meta&&(X.meta.canSave=!1,X.meta.canShare=!1,X.meta.canStar=!1),X}async loadHomeDashboard(){const X=await this.fetchHomeDashboard();return X?(0,O.wM)(X):null}async loadSnapshot(X){try{const J=await this.loadSnapshotScene(X);this.setState({dashboard:J,isLoading:!1})}catch(J){const _=(0,h.do)(J),ee=(0,h.q6)(J),ae=(0,h.rE)(J);if(this.setState({isLoading:!1,loadError:{status:_,message:ee,messageId:ae}}),J instanceof g.P)throw J}}async loadProvisioningDashboard(X,J){const ee=new URLSearchParams(window.location.search).get("ref")??void 0,ae=async le=>{const L=await(0,W.JD)(c.PP.endpoints.getRepositoryFilesWithPath.initiate({name:X,path:J,ref:le}));if(L&&"error"in L)throw L.error;const ie=structuredClone(L.data),oe=ie.resource.dryRun;return oe?oe.apiVersion.startsWith("dashboard.grafana.app")?this.processDashboardFromProvisioning(X,J,oe,{file:ie.path??"",ref:le,repo:X}):Promise.reject("unexpected resource type: "+oe.apiVersion):Promise.reject("failed to read provisioned dashboard")};try{return await ae(ee)}catch(le){if(ee&&(0,s.NF)(le)&&le.status===404)return await ae(void 0);throw le}}processDashboardFromProvisioning(X,J,_,ee){if(_.apiVersion.split("/")[1]==="v2beta1")return{..._,kind:"DashboardWithAccessInfo",access:{canStar:!1,isSnapshot:!1,canShare:!1,canDelete:!0,canSave:!0,canEdit:!0}};let ae=_.metadata.annotations;ae||(_.metadata.annotations={}),ae[r.LH]="repo",ae[r.Jw]=X,ae[r.Y_]=ee.ref?J+"#"+ee.ref:J;const le={..._.spec,version:_.metadata.generation||0};return{meta:{canStar:!1,isSnapshot:!1,canShare:!1,canDelete:!0,canSave:!0,canEdit:!0,k8s:_.metadata,provisioning:ee},dashboard:le}}async loadDashboard(X){try{(0,u.jn)(K);const J=await this.loadScene(X);if(!J)return;o.$.featureToggles.preserveDashboardStateWhenNavigating&&X.uid&&(0,N.Gq)(J),this.setState({dashboard:J,isLoading:!1});const _=(0,u.zw)(K),ee=i.jh.getQueryController(J);(0,B.Dd)(J,_?.duration),o.$.dashboardPerformanceMetrics.findIndex(le=>le==="*"||le===X.uid)!==-1&&G(),ee?.startProfile("dashboard_view"),X.route!==V.Z4.New&&(0,I.B)({meta:J.state.meta,uid:J.state.uid,title:J.state.title,id:J.state.id})}catch(J){const _=(0,h.do)(J),ee=(0,h.q6)(J),ae=(0,h.rE)(J);if(this.setState({isLoading:!1,loadError:{status:_,message:ee,messageId:ae}}),(0,s.NF)(J)||console.error("Error loading dashboard:",J),J instanceof g.P)throw J}}async loadScene(X){if(this.setState({dashboard:void 0,isLoading:!0}),X.route===V.Z4.Home)return await this.loadHomeDashboard();const J=await this.fetchDashboard(X);return J?this.transformResponseToScene(J,X):null}getDashboardFromCache(X){const J=this.dashboardCache;return J&&J.cacheKey===X&&Date.now()-J?.ts<H?J.dashboard:null}clearState(){(0,b.UA)().setCurrent(void 0),this.setState({dashboard:void 0,loadError:void 0,isLoading:!1,panelEditor:void 0})}setDashboardCache(X,J){this.dashboardCache={dashboard:J,ts:Date.now(),cacheKey:X}}clearDashboardCache(){this.dashboardCache=void 0}getSceneFromCache(X){return this.cache[X]}setSceneCache(X,J){this.cache[X]=J}removeSceneCache(X){delete this.cache[X]}clearSceneCache(){this.cache={}}}class k extends Q{transformResponseToScene(X,J){const _=this.getSceneFromCache(J.uid);if(_&&_.state.version===X?.dashboard.version&&_.state.meta.created===X?.meta.created)return(0,y.Sr)().setMetadata({dashboardUID:_.state.uid,dashboardTitle:_.state.title}),_;if(X?.dashboard){const ee=(0,O.wM)(X);return o.$.featureToggles.dashboardLibrary&&J.route===V.Z4.Template&&(ee.setInitialSaveModel(X.dashboard,X.meta),ee.onEnterEditMode(),ee.setState({isDirty:!0})),J.uid&&this.setSceneCache(J.uid,ee),ee}throw new Error("Dashboard not found")}async loadSnapshotScene(X){const J=await m.np.loadSnapshot(X);if(J?.dashboard){if((0,E.aK)(J.dashboard))throw new g.P("v2beta1","Using legacy snapshot API to get a V2 dashboard");return(0,O.wM)(J)}throw new Error("Snapshot not found")}async loadTemplateDashboard(){const X=new URLSearchParams(window.location.search),J=X.get("datasource"),_=X.get("pluginId"),ee=X.get("path");if(!J||!_||!ee)throw new Error("Missing required parameters for template dashboard");if(!(0,l.l)().getInstanceSettings(J))throw new Error(`Datasource "${J}" not found. Please check your datasource configuration.`);const le={pluginId:_,path:ee,overwrite:!0,inputs:[{name:"*",type:"datasource",pluginId:_,value:J}]};return{dashboard:{...await(0,s.AI)().post("/api/dashboards/interpolate",le),uid:"",version:0,id:null},meta:{canSave:!0,canEdit:!0,canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""}}}async fetchDashboard({type:X,slug:J,uid:_,route:ee,urlFolderUid:ae}){const le=ee===V.Z4.Home?w:_,L=this.getDashboardFromCache(le);if(L)return L;let ie;try{switch(ee){case V.Z4.Home:const oe=await this.fetchHomeDashboard();if(!oe)return null;ie=oe;break;case V.Z4.New:ie=await(0,z.X)(ae);break;case V.Z4.Template:ie=await this.loadTemplateDashboard();break;case V.Z4.Provisioning:return this.loadProvisioningDashboard(J||"",_);case V.Z4.Public:{const ue=await m.np.loadDashboard("public","",_);if((0,E.aK)(ue.dashboard))throw new g.P("v2beta1","Using legacy public dashboard API to get a V2 dashboard");return ue}default:if(o.$.featureToggles.reloadDashboardsOnParamsChange){const ue=(0,F.h)();ie=await m.np.loadDashboard(X||"db",J||"",_,ue)}else ie=await m.np.loadDashboard(X||"db",J||"",_);ee===V.Z4.Embedded&&(ie.meta.isEmbedded=!0)}if(ie.meta.url&&ee===V.Z4.Normal&&!U._o.state.isPlaying){const oe=n.I.stripBaseFromUrl(ie.meta.url),ue=d.Ny.getLocation().pathname;oe!==ue&&(d.Ny.replace({...d.Ny.getLocation(),pathname:oe}),console.log("not correct url correcting",oe,ue))}ie.meta.folderUid&&await(0,F.Q)(ie.meta.folderUid),this.setDashboardCache(le,ie)}catch(oe){if((0,s.NF)(oe)&&oe.cancelled)return null;throw oe}return ie}async reloadDashboard(X){const J=this.state.dashboard;if(!J||!J.state.uid)return;const _=J.state.uid;try{this.setState({isLoading:!0});const ee=await m.np.loadDashboard("db",J.state.meta.slug,_,X),ae=this.getSceneFromCache(_);if(ae&&ae.state.version===ee?.dashboard.version&&ae.state.version===this.state.dashboard?.state.version){this.setState({isLoading:!1});return}if(!ee?.dashboard){this.setState({isLoading:!1,loadError:{status:404,message:(0,a.t)("dashboard-scene.dashboard-scene-page-state-manager.message.dashboard-not-found","Dashboard not found")}});return}const le=(0,O.wM)(ee);o.$.featureToggles.preserveDashboardStateWhenNavigating&&_&&(0,N.Gq)(le),this.setSceneCache(_,le),this.setState({dashboard:le,isLoading:!1})}catch(ee){const ae=(0,h.do)(ee),le=(0,h.q6)(ee);if(this.setState({isLoading:!1,loadError:{message:le,status:ae}}),ee instanceof g.P)throw ee}}}class te extends Q{constructor(){super(...arguments),this.dashboardLoader=new m.t0}async loadSnapshotScene(X){const J=await this.dashboardLoader.loadSnapshot(X),_=(0,v.q)(J);if(_.spec)return(0,R.dj)(_);throw new Error("Snapshot not found")}transformResponseToScene(X,J){const _=this.getSceneFromCache(J.uid);if(_&&_.state.version===X?.metadata.generation)return(0,y.Sr)().setMetadata({dashboardUID:_.state.uid,dashboardTitle:_.state.title}),_;if(X){const ee=(0,R.dj)(X);return J.uid&&this.setSceneCache(J.uid,ee),ee}throw new Error("Dashboard not found")}async fetchDashboard({type:X,slug:J,uid:_,route:ee,urlFolderUid:ae}){const le=ee===V.Z4.Home?w:_,L=this.getDashboardFromCache(le);if(L)return L;let ie;try{switch(ee){case V.Z4.New:ie=await(0,z.V)(ae);break;case V.Z4.Provisioning:return await this.loadProvisioningDashboard(J||"",_);case V.Z4.Public:return await this.dashboardLoader.loadDashboard("public","",_);default:ie=await this.dashboardLoader.loadDashboard(X||"db",J||"",_),ee===V.Z4.Embedded&&(ie.metadata.annotations=ie.metadata.annotations||{},ie.metadata.annotations[r.IC]="embedded")}if(ie.access.url&&ee===V.Z4.Normal&&!U._o.state.isPlaying){const oe=n.I.stripBaseFromUrl(ie.access.url),ue=d.Ny.getLocation().pathname;oe!==ue&&(d.Ny.replace({...d.Ny.getLocation(),pathname:oe}),console.log("not correct url correcting",oe,ue))}ie.metadata.annotations?.[r.ew]&&await(0,F.Q)(ie.metadata.annotations?.[r.ew]),this.setDashboardCache(le,ie)}catch(oe){if((0,s.NF)(oe)&&oe.cancelled)return null;throw oe}return ie}async reloadDashboard(X){const J=this.state.dashboard;if(!J||!J.state.uid)return;const _=J.state.uid;try{this.setState({isLoading:!0});const ee=await this.dashboardLoader.loadDashboard("db",J.state.meta.slug,_,X),ae=this.getSceneFromCache(_);if(ae&&ae.state.version===ee?.metadata.generation&&ae.state.version===this.state.dashboard?.state.version){this.setState({isLoading:!1});return}if(!ee?.spec){this.setState({isLoading:!1,loadError:{status:404,message:(0,a.t)("dashboard-scene.dashboard-scene-page-state-manager-v2.message.dashboard-not-found","Dashboard not found")}});return}const le=(0,R.dj)(ee);o.$.featureToggles.preserveDashboardStateWhenNavigating&&_&&(0,N.Gq)(le),this.setSceneCache(_,le),this.setState({dashboard:le,isLoading:!1})}catch(ee){const ae=(0,h.do)(ee),le=(0,h.q6)(ee);if(this.setState({isLoading:!1,loadError:{message:le,status:ae}}),ee instanceof g.P)throw ee}}}class q extends Q{constructor(X){super(X),this.v1Manager=new k(X),this.v2Manager=new te(X),this.activeManager=this.v1Manager}async withVersionHandling(X){try{return await X(this.activeManager)}catch(J){if(J instanceof g.P){const _=(0,E.Y)(J.data.storedVersion)?this.v2Manager:this.v1Manager;return this.activeManager=_,await X(_)}else throw J}finally{this.setState(this.activeManager.state)}}async fetchDashboard(X){return this.withVersionHandling(J=>J.fetchDashboard(X))}async reloadDashboard(X){return this.withVersionHandling(J=>J.reloadDashboard.call(this,X))}getDashboardFromCache(X){return this.activeManager.getDashboardFromCache(X)}transformResponseToScene(X,J){return X?(0,E.HG)(X)?(this.activeManager=this.v2Manager,this.v2Manager.transformResponseToScene(X,J)):this.v1Manager.transformResponseToScene(X,J):null}async loadSnapshotScene(X){try{return await this.v1Manager.loadSnapshotScene(X)}catch(J){if(J instanceof g.P&&(0,E.Y)(J.data.storedVersion))return await this.v2Manager.loadSnapshotScene(X);throw new Error("Snapshot not found")}}async loadSnapshot(X){return this.withVersionHandling(J=>J.loadSnapshot.call(this,X))}clearDashboardCache(){this.v1Manager.clearDashboardCache(),this.v2Manager.clearDashboardCache()}clearSceneCache(){this.v1Manager.clearSceneCache(),this.v2Manager.clearSceneCache(),this.cache={}}getSceneFromCache(X){return this.activeManager.getSceneFromCache(X)}setSceneCache(X,J){this.activeManager.setSceneCache(X,J)}removeSceneCache(X){this.v1Manager.removeSceneCache(X),this.v2Manager.removeSceneCache(X)}getCache(){return this.activeManager.getCache()}setDashboardCache(X,J){(0,E.HG)(J)?this.v2Manager.setDashboardCache(X,J):this.v1Manager.setDashboardCache(X,J)}async loadDashboard(X){if(X.route===V.Z4.New){const J=o.$.featureToggles.dashboardNewLayouts?"v2":"v1";this.setActiveManager(J)}return this.withVersionHandling(J=>J.loadDashboard.call(this,X))}setActiveManager(X){X==="v1"?this.activeManager=this.v1Manager:this.activeManager=this.v2Manager}resetActiveManager(){this.setActiveManager("v1")}}const se={v1:void 0,v2:void 0,unified:void 0};function re(Y){return Y==="v1"?(se.v1||(se.v1=new k({})),se.v1):Y==="v2"?(se.v2||(se.v2=new te({})),se.v2):(se.unified||(se.unified=new q({})),se.unified)}},32334:(ne,j,e)=>{"use strict";e.d(j,{C1:()=>l,FH:()=>i});var n=e(75816),a=e(59553),s=e(73659);const l=(0,a.TP)("dashboard.grafana.app","v0alpha1"),i=(0,n.xP)({reducerPath:"dashboardAPIv0alpha1",baseQuery:(0,s.W)({baseURL:l}),endpoints:()=>({})})},32380:(ne,j,e)=>{"use strict";e.d(j,{nm:()=>ae,Dh:()=>J});var n=e(39741),a=e(13752),s=e(64423),d=e(44240),o=e(39697),l=e(81160),i=e(67791),c=e(93031),p=e(71030),h=e(69850),u=e(1005),r=e(65961),v=e(75234),g=e(2543);function E(le){let L=[];const ie=(0,g.partition)(le,"id"),oe=(0,g.groupBy)(ie[0],"id");return L=(0,g.map)(oe,ue=>ue.length>1&&!(0,g.every)(ue,x)?(0,g.find)(ue,ye=>ye.eventType!=="panel-alert"):(0,g.head)(ue)),L=(0,g.concat)(L,ie[1]),L}function x(le){return le.eventType==="panel-alert"}var m=e(75421),y=e(62467),b=e(65474),D=e(66847),f=e(69862),C=e(16126),P=e(43173),T=e(78282),M=e(42942),I=e(87745),B=e(87033),U=e(92511);class W{canRun(L){return L?!!(!L.annotationQuery||L.annotations):!1}run({annotation:L,datasource:ie,dashboard:oe,range:ue}){if(!this.canRun(ie))return(0,y.of)([]);const ye={};return(0,B.b)({dashboard:oe,range:ue,panel:ye},ie,L).pipe((0,l.T)(fe=>fe.events??[]),(0,D.W)(U.SD))}}var V=e(90696);class z{canRun(L){return L?(0,V.E7)(L)?!0:!!(L.annotationQuery&&!L.annotations):!1}run({annotation:L,datasource:ie,dashboard:oe,range:ue}){if(!this.canRun(ie))return(0,y.of)([]);if(ie?.annotationQuery===void 0)return console.warn("datasource does not have an annotation query"),(0,y.of)([]);const ye=ie.annotationQuery({range:ue,rangeRaw:ue.raw,annotation:L,dashboard:oe});return ye===void 0?(console.warn("datasource does not have an annotation query"),(0,y.of)([])):(0,b.H)(ye).pipe((0,D.W)(U.SD))}}class R{constructor(L=[new z,new W]){this.runners=L}canWork({dashboard:L}){return!!L.annotations.list.find(R.getAnnotationsToProcessFilter)}work(L){if(!this.canWork(L))return(0,U.$)();const{dashboard:ie,range:oe}=L;let ue=ie.annotations.list.filter(R.getAnnotationsToProcessFilter);P.$.publicDashboardAccessToken&&ue.length>0&&(ue=[ue[0]]);const ye=ue.map(fe=>{let Ee;if(P.$.publicDashboardAccessToken){const Ae=new M.X;Ee=(0,y.of)(Ae).pipe((0,D.W)(U.H0))}else Ee=(0,b.H)((0,T.l)().get(fe.datasource)).pipe((0,D.W)(U.H0));return Ee.pipe((0,f.Z)(Ae=>{const Ge=this.runners.find(Fe=>Fe.canRun(Ae));return Ge?(ie.events.publish(new I.xc(fe)),Ge.run({annotation:fe,datasource:Ae,dashboard:ie,range:oe}).pipe((0,i.Q)(J().cancellations().pipe((0,C.p)(Fe=>Fe===fe))),(0,l.T)(Fe=>(ie.snapshot&&(fe.snapshotData=(0,g.cloneDeep)(Fe)),P.$.publicDashboardAccessToken?Fe:(0,U.G9)(fe,Fe))),(0,h.j)(()=>{ie.events.publish(new I.yj(fe))}))):(0,y.of)([])}))});return(0,d.h)(ye).pipe((0,c.U)(),(0,p.T)((fe,Ee)=>fe.concat(Ee)),(0,l.T)(fe=>({annotations:fe,alertStates:[]})))}static getAnnotationsToProcessFilter(L){return L.enable&&!L.snapshotData}}var O=e(18030),N=e(76190),F=e(15130),G=e(70327),H=e(78467),K=e(95443),w=e(52161),Q=e(29609),k=e(7498),te=e(8535),q=e(11257);class se{constructor(){this.hasAlertRules={}}canWork({dashboard:L,range:ie}){return!(!L.uid||P.$.publicDashboardAccessToken||ie.raw.to!=="now"||this.hasAlertRules[L.uid]===!1||!(F.TP.hasPermission(q.w.AlertingRuleRead)&&F.TP.hasPermission(q.w.AlertingRuleExternalRead)))}work(L){if(!this.canWork(L))return(0,U.$)();const{dashboard:ie}=L,oe=async()=>(await(0,te.JD)(G.hK.endpoints.prometheusRuleNamespaces.initiate({ruleSourceName:w.hY,dashboardUid:ie.uid},{forceRefetch:!0}))).data;return(0,b.H)(oe()).pipe((0,l.T)(ye=>(0,H.Kw)(ye))).pipe((0,l.T)(ye=>{this.hasAlertRules[ie.uid]=!1;const fe={};return ye.forEach(Ee=>Ee.rules.forEach(Ae=>{if(Q.R$.alertingRule(Ae)&&Ae.annotations&&Ae.annotations[K.YH.panelID]){this.hasAlertRules[ie.uid]=!0;const Ge=Number(Ae.annotations[K.YH.panelID]),Fe=(0,k.S)(Ae.state);fe[Ge]?Fe===N.O.Alerting&&fe[Ge].state!==N.O.Alerting?fe[Ge].state=N.O.Alerting:Fe===N.O.Pending&&fe[Ge].state!==N.O.Alerting&&fe[Ge].state!==N.O.Pending&&(fe[Ge].state=N.O.Pending):fe[Ge]={state:Fe,id:Object.keys(fe).length,panelId:Ge,dashboardId:ie.id}}})),{alertStates:Object.values(fe),annotations:[]}}),(0,D.W)(U.Zr))}}class re{constructor(L,ie=(0,m.jG)(),oe=[new se,new O.F,new R]){this.dashboard=L,this.timeSrv=ie,this.workers=oe,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new n.m(1),this.runs=new a.B,this.cancellationStream=new a.B,this.runsSubscription=this.runs.subscribe(ue=>this.executeRun(ue)),this.eventsSubscription=L.events.subscribe(v._,ue=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(L){this.runs.next(L)}getResult(L){return this.results.asObservable().pipe((0,l.T)(ie=>{const oe=(0,U.FK)(ie.annotations,L),ue=ie.alertStates.find(ye=>!!L&&ye.panelId===L);return{annotations:E(oe),alertState:ue}}))}executeRun(L){const oe=this.workers.filter(Ae=>Ae.canWork(L)).map(Ae=>Ae.work(L)),ue=new s.yU,ye=(0,d.h)(oe).pipe((0,i.Q)(this.runs.asObservable()),(0,c.U)(),(0,p.T)((Ae,Ge)=>(Ae.annotations=Ae.annotations.concat(Ge.annotations),Ae.alertStates=Ae.alertStates.concat(Ge.alertStates),Ae)),(0,h.j)(()=>{ue.unsubscribe()}),(0,u.u)()),fe=new s.yU,Ee=(0,o.O)(200).pipe((0,r.u)({annotations:[],alertStates:[]}),(0,i.Q)(ye),(0,h.j)(()=>{fe.unsubscribe()}));fe.add(Ee.subscribe(Ae=>{this.results.next(Ae)})),ue.add(ye.subscribe(Ae=>{this.results.next(Ae)}))}cancel(L){this.cancellationStream.next(L)}cancellations(){return this.cancellationStream.asObservable().pipe((0,u.u)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let Y;function X(le){Y&&Y.destroy(),Y=le}function J(){if(!Y)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return Y}let _;function ee(le){_=le}function ae(le){_||(_=({dashboard:ie,timeSrv:oe,workers:ue})=>new re(ie,oe,ue));const L=_(le);return X(L),L}},32442:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>o});var n=e(74848),a=e(22803),s=e(53487),d=e(63142);function o({className:i,...c}){const p=(0,d.of)(l);return(0,n.jsx)(s.s,{...c,className:(0,a.cx)(p.legend,i)})}function l(i){return{legend:(0,a.css)({marginTop:i.spacing(3),marginBottom:i.spacing(1)})}}},32471:(ne,j,e)=>{"use strict";e.d(j,{F:()=>h});var n=e(74848),a=e(96540),s=e(92745),d=e(76319),o=e(41654),l=e(18857),i=e(77824);const c=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(r=>({label:r,value:r})),p=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(r=>({label:r,value:r})),h=({value:r,onChange:v})=>{const g=[{label:(0,s.t)("timeseries.line-style-editor.line-fill-options.label-solid","Solid"),value:"solid"},{label:(0,s.t)("timeseries.line-style-editor.line-fill-options.label-dash","Dash"),value:"dash"},{label:(0,s.t)("timeseries.line-style-editor.line-fill-options.label-dots","Dots"),value:"dot"}],E=(0,a.useMemo)(()=>r?.fill==="dash"?c:p,[r]),x=(0,a.useMemo)(()=>{if(!r?.dash?.length)return E[0];const m=r.dash?.join(", "),y=E.find(b=>b.value===m);return y||{label:m,value:m}},[r,E]);return(0,n.jsxs)(o.B,{wrap:!0,alignItems:"flex-end",children:[(0,n.jsx)(i.z,{value:r?.fill||"solid",options:g,onChange:m=>{let y;m==="dot"?y=u(p[0].value):m==="dash"&&(y=u(c[0].value)),v({...r,fill:m,dash:y})}}),r?.fill&&r?.fill!=="solid"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.l6,{allowCustomValue:!0,options:E,value:x,width:20,onChange:m=>{v({...r,dash:u(m.value??"")})},formatCreateLabel:m=>`Segments: ${u(m).join(", ")}`}),(0,n.jsxs)("div",{children:["\xA0",(0,n.jsx)("a",{title:(0,s.t)("timeseries.line-style-editor.title-the-input-expects-a-segment-list","The input expects a segment list"),href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer",children:(0,n.jsx)(d.K,{name:"question-circle",tooltip:(0,s.t)("timeseries.line-style-editor.tooltip-help","Help")})})]})]})]})};function u(r){const v=[];for(const g of r.split(/(?:,| )+/)){const E=Number.parseInt(g,10);isNaN(E)||v.push(E)}return v}},32540:(ne,j,e)=>{"use strict";e.d(j,{$:()=>h,m:()=>r});var n=e(74848),a=e(92745),s=e(44248),d=e(30703),o=e(67522),l=e(87063),i=e(7895),c=e(88559),p=e(37040);class h extends s.Bs{constructor(){super(...arguments),this._variableDependency=new s.Sh(this,{onAnyVariableChanged:()=>{this.state.rawLinks&&this.state.rawLinks.length>0&&this.forceRender()}})}static{this.Component=u}}function u({model:g}){const{menu:E,rawLinks:x}=g.useState();if(s.jh.getTimeRange(g).useState(),!(g.parent instanceof s.Eb))throw new Error("VizPanelLinks must be a child of VizPanel");if(!x||x.length===0)return null;if(x.length===1){const m=(0,p.eQ)(g.parent)[0];return(0,n.jsx)(o.NR.TitleItem,{href:m.href,onClick:m.onClick,target:m.target,title:m.title,children:(0,n.jsx)(d.I,{name:"external-link-alt",size:"md"})})}return(0,n.jsx)(c.m,{overlay:()=>(0,n.jsx)(E.Component,{model:E},E.state.key),children:(0,n.jsx)(i.I,{icon:"external-link-alt",iconSize:"md","aria-label":(0,a.t)("dashboard-scene.viz-panel-links-renderer.aria-label-panel-links","Panel links")})})}class r extends s.Bs{static{this.Component=v}}function v({model:g}){const{links:E}=g.useState();return E?(0,n.jsx)(l.W,{children:E?.map((x,m)=>(0,n.jsx)(l.W.Item,{label:x.title,url:x.href,target:x.target,onClick:x.onClick},m))}):null}},32550:(ne,j,e)=>{"use strict";e.d(j,{$:()=>u,A:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(7612),o=e(65229),l=e(84140),i=e(6773),c=e(63142),p=e(12173);const h=({color:v,onChange:g})=>{const[E,x]=(0,s.useState)(v);(0,o.A)(D=>{g(i.MV.asHexString(m.visualization.getColorByName(D)))},500,[E]);const m=(0,c.$j)(),y=(0,c.of)(u),b=(0,s.useMemo)(()=>E.startsWith("rgba")?E:(0,l.A)(m.visualization.getColorByName(v)).toRgbString(),[E,m,v]);return(0,n.jsxs)("div",{className:y.wrapper,children:[(0,n.jsx)(d.p9,{className:y.root,color:b,onChange:x}),(0,n.jsx)(p.A,{theme:m,color:b,onChange:x,className:y.colorInput})]})},u=v=>({wrapper:(0,a.css)({flexGrow:1}),root:(0,a.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${v.shape.radius.default} ${v.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${v.shape.radius.default} ${v.shape.radius.default}`},"&__alpha, &__hue":{height:v.spacing(2),position:"relative"},"&__pointer":{height:v.spacing(2),width:v.spacing(2)}}}),colorInput:(0,a.css)({marginTop:v.spacing(2)})}),r=h},32581:(ne,j,e)=>{"use strict";e.d(j,{O:()=>l,p:()=>i});var n=e(74848),a=e(46942),s=e.n(a),d=e(96540),o=e(75745),l=(c=>(c.Invalid="invalid",c.Valid="valid",c))(l||{});class i extends d.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=p=>h=>{const u=(0,o.tf)(h.target.value,p);this.setState(r=>({...r,error:u?u[0]:null}))},this.populateEventPropsWithStatus=(p,h)=>{const u={...p};return h&&Object.keys(o.Pw).forEach(r=>{((0,o.K)(r,h)||p[r])&&(u[r]=async v=>{v.persist(),(0,o.K)(r,h)&&await this.validatorAsync(h[r]).apply(this,[v]),p[r]&&p[r].apply(null,[v,this.status])})}),u}}static{this.defaultProps={className:""}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:p,className:h,hideErrorMessage:u,inputRef:r,...v}=this.props,{error:g}=this.state,E=s()("gf-form-input",{invalid:this.isInvalid},h),x=this.populateEventPropsWithStatus(v,p);return(0,n.jsxs)("div",{style:{flexGrow:1},children:[(0,n.jsx)("input",{...x,ref:r,className:E}),g&&!u&&(0,n.jsx)("span",{children:g})]})}}},32603:(ne,j,e)=>{"use strict";e.d(j,{L9:()=>h,dQ:()=>u,uT:()=>p});var n=e(2543),a=e.n(n),s=e(92745),d=e(25953),o=e(97335),l=e(30643);const i={get panel(){return(0,s.t)("dashboard.edit-pane.elements.panel","Panel")},get row(){return(0,s.t)("dashboard.edit-pane.elements.row","Row")},get tab(){return(0,s.t)("dashboard.edit-pane.elements.tab","Tab")},get element(){return(0,s.t)("dashboard.edit-pane.elements.element","Element")}},c={get panel(){return(0,n.lowerCase)((0,s.t)("dashboard.edit-pane.elements.panel","Panel"))},get row(){return(0,n.lowerCase)((0,s.t)("dashboard.edit-pane.elements.row","Row"))},get tab(){return(0,n.lowerCase)((0,s.t)("dashboard.edit-pane.elements.tab","Tab"))},get element(){return(0,n.lowerCase)((0,s.t)("dashboard.edit-pane.elements.element","Element"))}};function p(r){return i[r]??(0,n.capitalize)(r)}function h(r){return c[r]??r}function u(r){if(r){if(r instanceof d.X)return"panel";if(r instanceof o.o)return"row";if(r instanceof l.V)return"tab"}else return"element";return"element"}},32635:(ne,j,e)=>{"use strict";e.d(j,{S:()=>i});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(35484),l=e(72636);const i=s.forwardRef(({label:p,description:h,value:u,htmlValue:r,onChange:v,disabled:g,className:E,indeterminate:x,invalid:m,...y},b)=>{const D=(0,s.useCallback)(C=>{v&&v(C)},[v]),f=(0,d.of)(c,m);return(0,n.jsxs)("label",{className:(0,a.cx)(f.wrapper,E),children:[(0,n.jsxs)("div",{className:f.checkboxWrapper,children:[(0,n.jsx)("input",{type:"checkbox",className:(0,a.cx)(f.input,x&&f.inputIndeterminate),checked:u,disabled:g,onChange:D,value:r,...y,ref:C=>{C&&x&&(C.indeterminate=!0),b&&(typeof b=="function"?b(C):b.current=C)}}),(0,n.jsx)("span",{className:f.checkmark})]}),p&&(0,n.jsx)("span",{className:f.label,children:p}),h&&(0,n.jsx)("span",{className:f.description,children:h})]})}),c=(p,h=!1)=>{const u=(0,l.f)(p),r=2,v=1,g=E=>h?p.colors.error.border:E;return{wrapper:(0,a.css)({display:"inline-grid",alignItems:"center",columnGap:p.spacing(v),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,a.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,o.getFocusStyles)(p),"&:focus:not(:focus-visible) + span":(0,o.getMouseFocusStyles)(p),"&:checked + span":{background:p.colors.primary.main,border:`1px solid ${g(p.colors.primary.main)}`,"&:hover":{background:p.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:p.spacing(.5),top:0,width:p.spacing(.75),height:p.spacing(1.5),border:`solid ${p.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:p.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${g(p.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:p.colors.action.disabledBackground},"&:after":{borderColor:p.colors.action.disabledText}}}),inputIndeterminate:(0,a.css)({"&:indeterminate + span":{border:`1px solid ${g(p.colors.primary.main)}`,background:p.colors.primary.main,"&:hover":{background:p.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${p.colors.primary.contrastText}`,backgroundColor:p.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:p.colors.action.disabledBackground,border:`1px solid ${g(p.colors.error.transparent)}`,"&:after":{borderColor:p.colors.action.disabledText}}}),checkboxWrapper:(0,a.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,a.css)({position:"relative",zIndex:2,display:"inline-block",width:p.spacing(r),height:p.spacing(r),borderRadius:p.shape.radius.sm,background:p.components.input.background,border:`1px solid ${g(p.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:g(p.components.input.borderHover)}}),label:(0,a.cx)(u.label,(0,a.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:p.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,a.cx)(u.description,(0,a.css)({gridColumnStart:2,gridRowStart:2,lineHeight:p.typography.bodySmall.lineHeight,marginTop:0,zIndex:1}))}};i.displayName="Checkbox"},32881:(ne,j,e)=>{"use strict";e.d(j,{Gy:()=>i,gW:()=>c,mc:()=>p});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=(v=>(v[v.Horizontal=0]="Horizontal",v[v.Vertical=1]="Vertical",v))(o||{});const l=({children:v,orientation:g=0,spacing:E="sm",justify:x="flex-start",align:m="normal",wrap:y=!1,width:b="100%",height:D="100%",...f})=>{const C=(0,d.of)(h,g,E,x,m,y);return(0,n.jsx)("div",{className:C.layout,style:{width:b,height:D},...f,children:s.Children.toArray(v).filter(Boolean).map((P,T)=>(0,n.jsx)("div",{className:C.childWrapper,children:P},T))})},i=({children:v,spacing:g,justify:E,align:x="center",wrap:m,width:y,height:b})=>(0,n.jsx)(l,{spacing:g,justify:E,orientation:0,align:x,width:y,height:b,wrap:m,children:v}),c=({children:v,spacing:g,justify:E,align:x,width:m,height:y})=>(0,n.jsx)(l,{spacing:g,justify:E,orientation:1,align:x,width:m,height:y,children:v}),p=({children:v,padding:g,margin:E,grow:x,shrink:m})=>{const y=(0,d.of)(r,g,E);return(0,n.jsx)("div",{className:(0,a.cx)(y.wrapper,x!==void 0&&(0,a.css)({flexGrow:x}),m!==void 0&&(0,a.css)({flexShrink:m})),children:v})},h=(v,g,E,x,m,y)=>{const b=E!=="none"?v.spacing(u[E]):0,D=g===0&&!y||g===1?0:`-${b}`,f=g===1?"vertical-group":"horizontal-group";return{layout:(0,a.css)({label:f,display:"flex",flexDirection:g===1?"column":"row",flexWrap:y?"wrap":"nowrap",justifyContent:x,alignItems:m,height:"100%",maxWidth:"100%",marginBottom:D}),childWrapper:(0,a.css)({label:"layoutChildrenWrapper",marginBottom:g===0&&!y?0:b,marginRight:g===0?b:0,display:"flex",alignItems:m,"&:last-child":{marginBottom:g===1?0:void 0,marginRight:g===0?0:void 0}})}},u={none:0,xs:.5,sm:1,md:2,lg:3},r=(v,g,E)=>{const x=g&&g!=="none"&&v.spacing(u[g])||0,m=E&&E!=="none"&&v.spacing(u[E])||0;return{wrapper:(0,a.css)({label:"container",margin:m,padding:x})}}},32899:(ne,j,e)=>{"use strict";e.d(j,{Tq:()=>l,ee:()=>d,kb:()=>o,r1:()=>s});var n=e(36819),a=e(68388);const s={alertSuccess:(0,n.R)("alert-success"),alertWarning:(0,n.R)("alert-warning"),alertError:(0,n.R)("alert-error"),alertInfo:(0,n.R)("alert-info")},d={refresh:(0,n.R)("refresh"),componentDidMount:(0,n.R)("component-did-mount"),dataReceived:(0,n.R)("data-received"),dataError:(0,n.R)("data-error"),dataFramesReceived:(0,n.R)("data-frames-received"),dataSnapshotLoad:(0,n.R)("data-snapshot-load"),editModeInitialized:(0,n.R)("init-edit-mode"),initPanelActions:(0,n.R)("init-panel-actions"),initialized:(0,n.R)("panel-initialized"),panelTeardown:(0,n.R)("panel-teardown"),render:(0,n.R)("render")};class o extends a.x{static{this.type="graph-hover"}}class l extends a.a{constructor(){super(...arguments),this.payload={point:{}}}static{this.type="graph-hover-clear"}}},33005:(ne,j,e)=>{"use strict";e.d(j,{A:()=>a,S:()=>s});let n;function a(d){if(n)throw new Error("setPluginComponentHook() function should only be called once, when Grafana is starting.");n=d}function s(d){if(!n)throw new Error("setPluginComponentHook(options) can only be used after the Grafana instance has started.");return n(d)}},33023:(ne,j,e)=>{"use strict";e.d(j,{o:()=>i});var n=e(2543),a=e.n(n),s=e(81160),d=e(18700),o=e(79319),l=e(64761);const i={id:l.F.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},isApplicable:g=>g.length>1?o.M.Applicable:o.M.NotApplicable,isApplicableDescription:g=>`The merge transformation requires at least 2 data series to work. There is currently ${g.length} data series.`,operator:g=>E=>E.pipe((0,s.T)(x=>{if(!Array.isArray(x)||x.length<=1)return x;const m=x.filter(I=>I.fields.length>0);if(m.length===0)return[x[0]];const y=new Set,b={},D=[],f=new d.k({refId:`${l.F.merge}-${m.map(I=>I.refId).join("-")}`,fields:[]});for(let I=0;I<m.length;I++){const B=m[I];for(let U=0;U<B.fields.length;U++){const W=B.fields[U];y.has(W.name)||(f.addField(c(W)),y.add(W.name)),b[W.name]=b[W.name]||{},b[W.name][I]=U,m.length-1===I&&r(b,W,m)&&D.push(W.name)}}if(D.length===0)return x;const C={},P=[],T=p(m,b,D),M=h(m,y,b);for(let I=0;I<m.length;I++){const B=m[I];for(let U=0;U<B.length;U++){const W=T(I,U),V=M(I,U);if(!Array.isArray(C[W])){C[W]=[V],P.push(v(W,C));continue}let z=!1;C[W]=C[W].map(R=>u(R,V)?(z=!0,{...R,...V}):R),z||(C[W].push(V),P.push(v(W,C)))}}for(const I of P){const B=C[I.key][I.index];B&&f.add(B)}return[f]}))},c=g=>({...(0,n.omit)(g,["values","state","labels","config"]),values:[],config:{...(0,n.omit)(g.config,"displayName")}}),p=(g,E,x)=>{const m=x.reduce((y,b)=>Object.keys(E[b]).reduce((D,f)=>(D[f]=D[f]||[],D[f].push(E[b][f]),D),y),{});return(y,b)=>m[y].reduce((D,f)=>D+g[y].fields[f].values[b],"")},h=(g,E,x)=>(m,y)=>{const b={},D=Array.from(E);for(const f of D){const C=x[f];if(!C)continue;const P=C[m];if(typeof P!="number")continue;const T=g[m];if(!T||!T.fields)continue;const M=T.fields[P];!M||!M.values||(b[f]=M.values[y])}return b},u=(g,E)=>{let x=!0;for(const m in E)if(!(typeof g[m]>"u")&&g[m]!==null&&g[m]!==E[m]){x=!1;break}return x},r=(g,E,x)=>Object.keys(g[E.name]).length===x.length,v=(g,E)=>({key:g,index:E[g].length-1})},33033:(ne,j,e)=>{"use strict";e.d(j,{D:()=>l});var n=e(74848),a=e(96540),s=e(53568),d=e(74660),o=e(63527);const l=a.forwardRef((p,h)=>{const{defaultValue:u="",minWidth:r=10,maxWidth:v,onCommitChange:g,onChange:E,onKeyDown:x,onBlur:m,value:y,placeholder:b,...D}=p,[f,C]=c(y,E),P=f??u,T=(0,a.useMemo)(()=>{const M=P||b||"",I=typeof M=="string"?M:M.toString();return i(I,r,v)},[b,P,r,v]);return(0,n.jsx)(d.W.Provider,{value:!0,children:(0,n.jsx)(o.p,{"data-testid":"autosize-input",...D,placeholder:b,ref:h,value:P.toString(),onChange:M=>{E&&E(M),C(M.currentTarget.value)},width:T,onBlur:M=>{m?m(M):g&&g(M)},onKeyDown:M=>{x?x(M):M.key==="Enter"&&g&&g(M)}})})});function i(p,h,u){if(!p)return h;const v=(0,s.kD)(p.toString(),14).width/8+3;return h&&v<h?h:u&&v>u?u:v}l.displayName="AutoSizeInput";function c(p,h){const u=p!==void 0&&h!==void 0,r=(0,a.useRef)(u),v=(0,a.useRef)(!1);u!==r.current&&!v.current&&(console.warn("An AutoSizeInput is changing from an uncontrolled to a controlled input. If you want to control the input, the empty value should be an empty string."),v.current=!0);const[g,E]=a.useState(p);(0,a.useEffect)(()=>{r.current||E(p)},[p]);const x=(0,a.useCallback)(y=>{r.current||E(y)},[]);return[r.current?p:g,x]}},33143:(ne,j,e)=>{"use strict";e.d(j,{N4:()=>qe,BF:()=>st,WG:()=>rt,jO:()=>Oe,ck:()=>Ne,su:()=>We,cc:()=>ot,wT:()=>be,JU:()=>pt,dt:()=>Me});var n=e(88544),a=e(68388),s=e(92745),d=e(44248),o=e(11534),l=e(74848),i=e(96540),c=e(51898),p=e(63527),h=e(34999),u=e(89640),r=e(25797),v=e(51156),g=e(31819),E=e(9931),x=e(18615),m=e(92119),y=e(1131),b=e(87308);function D(ke){const Ze=(0,i.useMemo)(()=>new r.C({title:(0,s.t)("dashboard.default-layout.row-options.title","Row options"),id:"row-options",isOpenDefault:!0}).addItem(new v.v({title:(0,s.t)("dashboard.default-layout.row-options.form.title","Title"),id:"row-options-title",render:()=>(0,l.jsx)(C,{row:ke})})),[ke]),nt=(0,i.useMemo)(()=>{const ut=(0,m.YQ)(ke);return new r.C({title:(0,s.t)("dashboard.default-layout.row-options.repeat.title","Repeat options"),id:"row-repeat-options",isOpenDefault:!0}).addItem(new v.v({title:(0,s.t)("dashboard.default-layout.row-options.repeat.variable.title","Variable"),id:"row-options-repeat-variable",render:()=>(0,l.jsx)(P,{row:ke,dashboard:ut})}))},[ke]);return[Ze,nt]}class f{constructor(Ze){this._row=Ze,this.isEditableDashboardElement=!0,this.useEditPaneOptions=D.bind(this,this._row)}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.row","Row"),instanceName:d.jh.interpolate(this._row,this._row.state.title,void 0,"text"),icon:"list-ul"}}getOutlineChildren(){return this._row.state.children}onDelete(){const Ze=(0,m.h$)(this._row);Ze instanceof y.D&&Ze.removeRow(this._row)}}function C({row:ke,id:Ze}){const{title:nt}=ke.useState();return(0,l.jsx)(p.p,{id:Ze,value:nt,onChange:ut=>ke.setState({title:ut.currentTarget.value})})}function P({row:ke,dashboard:Ze,id:nt}){const{$behaviors:ut,children:gt}=ke.useState();let ht=ut?.find(jt=>jt instanceof b.L);const Ot=(0,i.useMemo)(()=>gt.reduce((jt,wt)=>[...jt,...d.jh.findDescendents(wt,d.Eb)],[]),[gt]).some(jt=>{const wt=(0,m.un)(jt);return wt?.state.datasource?.uid===E.K||wt?.state.datasource?.uid===x.uv&&wt?.state.queries.some(Ht=>Ht.datasource?.uid===E.K)});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.U,{id:nt,sceneContext:Ze,repeat:ht?.state.variableName,onChange:jt=>{jt?(ht?.removeBehavior(),ht=new b.L({variableName:jt}),ke.setState({$behaviors:[...ke.state.$behaviors??[],ht]})):ht?.removeBehavior()}}),Ot?(0,l.jsxs)(h.F,{"data-testid":c.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0,children:[(0,l.jsx)("p",{children:(0,l.jsxs)(s.x6,{i18nKey:"dashboard.default-layout.row-options.form.repeat-for.warning.text",children:["Panels in this row use the ",{SHARED_DASHBOARD_QUERY:E.K}," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."]})}),(0,l.jsx)(u.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows",children:(0,l.jsx)(s.x6,{i18nKey:"dashboard.default-layout.row-options.form.repeat-for.learn-more",children:"Learn more"})})]}):void 0]})}var T=e(95395);function M(ke){return"isEditableDashboardElement"in ke}var I=e(31286),B=e(41654);function U(){const ke=this.variable,Ze=(0,i.useId)(),nt=(0,i.useId)();return(0,i.useMemo)(()=>{const ut=new r.C({title:"",id:Ze});return ut.addItem(new v.v({title:"",id:nt,skipField:!0,render:()=>(0,l.jsx)(I.a,{paddingBottom:1,children:(0,l.jsx)(B.B,{children:(0,l.jsxs)(B.B,{children:[(0,l.jsxs)("span",{children:["$",ke.state.name]}),(0,l.jsx)("span",{children:"="}),(0,l.jsx)("span",{children:ke.getValueText()})]})})})})),[ut]},[Ze,nt,ke])}class W{constructor(Ze){this.variable=Ze,this.isEditableDashboardElement=!0,this.useEditPaneOptions=U.bind(this)}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.local-variable","Local variable"),icon:"dollar-alt",instanceName:`\xA0$${this.variable.state.name} = ${this.variable.getValueText()}`,isHidden:!0}}}var V=e(34440),z=e(7389),R=e(36490),O=e(37386),N=e(87105),F=e(45861),G=e(20246),H=e(29),K=e(37674),w=e(21285);function Q(ke){const Ze=(0,i.useId)(),nt=(0,i.useId)(),ut=(0,i.useId)(),gt=(0,i.useId)();return(0,i.useMemo)(()=>new r.C({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.category","Selection options"),id:"selection-options-category",isOpenDefault:!0}).addItem(new v.v({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.multi-value","Multi-value"),id:Ze,render:ht=>(0,l.jsx)(k,{id:ht.props.id,variable:ke})})).addItem(new v.v({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.include-all","Include All value"),id:nt,description:(0,s.t)("dashboard.edit-pane.variable.selection-options.include-all-description","Enables a single option that represent all values"),render:ht=>(0,l.jsx)(te,{id:ht.props.id,variable:ke})})).addItem(new v.v({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.custom-all-value","Custom all value"),id:ut,description:(0,s.t)("dashboard.edit-pane.variable.selection-options.custom-all-value-description","A wildcard regex or other value to represent All"),useShowIf:()=>ke.useState().includeAll??!1,render:ht=>(0,l.jsx)(se,{id:ht.props.id,variable:ke})})).addItem(new v.v({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.allow-custom-values","Allow custom values"),id:gt,description:(0,s.t)("dashboard.edit-pane.variable.selection-options.allow-custom-values-description","Enables users to enter values"),render:ht=>(0,l.jsx)(q,{id:ht.props.id,variable:ke})})),[gt,ut,nt,Ze,ke])}function k({variable:ke,id:Ze}){const{isMulti:nt}=ke.useState();return(0,l.jsx)(w.d,{id:Ze,value:nt,onChange:ut=>ke.setState({isMulti:ut.currentTarget.checked})})}function te({variable:ke,id:Ze}){const{includeAll:nt}=ke.useState();return(0,l.jsx)(w.d,{id:Ze,value:nt,onChange:ut=>ke.setState({includeAll:ut.currentTarget.checked})})}function q({variable:ke,id:Ze}){const{allowCustomValue:nt}=ke.useState();return(0,l.jsx)(w.d,{id:Ze,value:nt,onChange:ut=>ke.setState({allowCustomValue:ut.currentTarget.checked})})}function se({variable:ke,id:Ze}){const{allValue:nt}=ke.useState(),ut=(0,i.useRef)(null),gt=(0,i.useCallback)(ht=>{const tt=ht.currentTarget.value;tt!==ke.state.allValue&&(ke.setState({allValue:tt}),ke.hasAllValue()&&ke.publishEvent(new d.oh(ke),!0))},[ke]);return(0,l.jsx)(p.p,{id:Ze,ref:ut,defaultValue:nt??"",onBlur:gt})}function re(ke){const Ze=this.variable,nt=(0,i.useId)(),ut=(0,i.useId)(),gt=(0,i.useId)(),ht=(0,i.useId)(),tt=(0,i.useId)();if(Ze instanceof d.xc)return L(Ze);const jt=[(0,i.useMemo)(()=>new r.C({title:"",id:nt}).addItem(new v.v({title:"",id:ut,skipField:!0,render:()=>(0,l.jsx)(X,{variable:Ze,isNewElement:ke})})).addItem(new v.v({title:(0,s.t)("dashboard.edit-pane.variable.label","Label"),id:gt,description:(0,s.t)("dashboard.edit-pane.variable.label-description","Optional display name"),render:()=>(0,l.jsx)(J,{variable:Ze})})).addItem(new v.v({title:(0,s.t)("dashboard.edit-pane.variable.description","Description"),id:ht,render:()=>(0,l.jsx)(_,{variable:Ze})})).addItem(new v.v({title:"",id:tt,skipField:!0,render:()=>(0,l.jsx)(ee,{variable:Ze})})),[nt,ut,gt,ht,tt,Ze,ke])],wt=ae(Ze);return jt.push(wt),Ze instanceof d.n8&&jt.push(Q(Ze)),jt}class Y{constructor(Ze){this.variable=Ze,this.isEditableDashboardElement=!0,this.typeName="Variable",this.useEditPaneOptions=re.bind(this)}getEditableElementInfo(){if(this.variable instanceof d.xc)return{typeName:(0,s.t)("dashboard.edit-pane.elements.local-variable","Local variable"),icon:"dollar-alt",instanceName:this.variable.state.name,isHidden:!0};const Ze=(0,K.IO)(this.variable.state.type);return{typeName:(0,s.t)("dashboard.edit-pane.elements.variable","{{type}} variable",{type:Ze.name}),icon:"dollar-alt",instanceName:this.variable.state.name,isHidden:this.variable.state.hide===z.zL.hideVariable}}onDelete(){const Ze=this.variable.parent;Ze instanceof d.Pj&&ot.removeVariable({source:Ze,removedObject:this.variable})}onChangeName(Ze){this.variable.setState({name:Ze});const nt=(0,K.c$)(this.variable,Ze);if(nt.errorMessage)return nt}}function X({variable:ke,isNewElement:Ze}){const{name:nt}=ke.useState(),ut=(0,G.z4)({autoFocus:Ze}),[gt,ht]=(0,i.useState)(),tt=(0,i.useId)(),Ot=wt=>{const Ht=(0,K.c$)(ke,wt.currentTarget.value);Ht.errorMessage!==gt&&ht(Ht.errorMessage),ke.setState({name:wt.currentTarget.value})},jt=(0,i.useRef)(nt);return(0,l.jsx)(O.D,{label:(0,s.t)("dashboard.edit-pane.variable.name","Name"),invalid:!!gt,error:gt,children:(0,l.jsx)(p.p,{id:tt,ref:ut,value:nt,onFocus:()=>{jt.current=nt},onChange:Ot,onBlur:wt=>{const hn=jt.current===nt||pt(wt);if(gt){ht(void 0),ke.setState({name:jt.current});return}hn||ot.changeVariableName({source:ke,oldValue:jt.current,newValue:nt})},"data-testid":c.Tp.components.PanelEditor.ElementEditPane.variableNameInput,required:!0})})}function J({variable:ke,id:Ze}){const{label:nt}=ke.useState(),ut=(0,i.useRef)(nt??"");return(0,l.jsx)(p.p,{id:Ze,value:nt,onFocus:()=>{ut.current=nt??""},onChange:gt=>ke.setState({label:gt.currentTarget.value}),onBlur:gt=>{ut.current===gt.currentTarget.value||pt(gt)||ot.changeVariableLabel({source:ke,oldValue:ut.current,newValue:gt.currentTarget.value})},"data-testid":c.Tp.components.PanelEditor.ElementEditPane.variableLabelInput})}function _({variable:ke,id:Ze}){const{description:nt}=ke.useState(),ut=(0,i.useRef)(nt??"");return(0,l.jsx)(N.f,{id:Ze,value:nt??"",placeholder:(0,s.t)("dashboard.edit-pane.variable.description-placeholder","Descriptive text"),onFocus:()=>{ut.current=nt??""},onChange:gt=>ke.setState({description:gt.currentTarget.value}),onBlur:gt=>{ut.current===gt.currentTarget.value||pt(gt)||ot.changeVariableDescription({source:ke,oldValue:ut.current,newValue:gt.currentTarget.value})}})}function ee({variable:ke}){const{hide:Ze=z.zL.dontHide}=ke.useState(),nt=ut=>{ot.changeVariableHideValue({source:ke,oldValue:Ze,newValue:ut})};return(0,l.jsx)(H.D,{hide:Ze,type:ke.state.type,onChange:nt})}function ae(ke){const Ze=(0,i.useId)();return(0,i.useMemo)(()=>{const nt=(0,K.IO)(ke.state.type),ut=(0,s.t)("dashboard.edit-pane.variable.type-category","{{type}} options",{type:nt.name}),gt=new r.C({title:ut,id:"variable-type",isOpenDefault:!0});return nt.getOptions?nt.getOptions(ke).forEach(tt=>gt.addItem(tt)):gt.addItem(new v.v({title:"",id:Ze,skipField:!0,render:()=>(0,l.jsx)(le,{variable:ke})})),gt},[Ze,ke])}function le({variable:ke}){const Ze=()=>{const nt=ke.parent;if(!(nt instanceof d.Pj))return;const ut=nt.state.variables.indexOf(ke);R.Ny.partial({editview:"variables",editIndex:ut})};return(0,l.jsx)(I.a,{display:"flex",direction:"column",paddingBottom:1,children:(0,l.jsx)(F.$n,{tooltip:(0,s.t)("dashboard.edit-pane.variable.open-editor-tooltip","For more variable options open variable editor"),onClick:Ze,size:"sm",fullWidth:!0,children:(0,l.jsx)(s.x6,{i18nKey:"dashboard.edit-pane.variable.open-editor",children:"Open variable editor"})})})}function L(ke){const Ze=(0,i.useId)(),nt=(0,i.useId)();return(0,i.useMemo)(()=>{const ut=new r.C({title:"",id:Ze});return ut.addItem(new v.v({title:"",id:nt,skipField:!0,render:()=>(0,l.jsx)(I.a,{paddingBottom:1,children:(0,l.jsx)(B.B,{children:(0,l.jsxs)(B.B,{children:[(0,l.jsxs)("span",{children:["$",ke.state.name]}),(0,l.jsx)("span",{children:"="}),(0,l.jsx)("span",{children:ke.getValueText()})]})})})})),[ut]},[nt,Ze,ke])}var ie=e(22803),oe=e(63142),ue=e(66404),ye=e(23289);function fe(ke){const Ze=(0,i.useId)();return[(0,i.useMemo)(()=>new r.C({title:"",id:"variables"}).addItem(new v.v({title:"",id:Ze,skipField:!0,render:()=>(0,l.jsx)(Ae,{set:ke})})),[ke,Ze])]}class Ee{constructor(Ze){this.set=Ze,this.isEditableDashboardElement=!0,this.typeName="Variable",this.useEditPaneOptions=fe.bind(this,this.set)}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.variable-set","Variables"),icon:"x",instanceName:(0,s.t)("dashboard.edit-pane.elements.variable-set","Variables")}}getOutlineChildren(){return this.set.state.variables}}function Ae({set:ke}){const{variables:Ze}=ke.useState(),nt=(0,oe.of)(Ge),ut=ke.parent instanceof o.H$,gt=(0,i.useCallback)(tt=>{const{editPane:Ot}=(0,m.YQ)(ke).state;Ot.selectObject(tt,tt.state.key)},[ke]),ht=(0,i.useCallback)(()=>{(0,V.I)((0,m.YQ)(ke)),ye.c.addVariableButtonClicked({source:"edit_pane"})},[ke]);return(0,l.jsxs)(B.B,{direction:"column",gap:0,children:[Ze.map(tt=>(0,l.jsxs)("div",{className:nt.variableItem,onClick:()=>gt(tt),children:[(0,l.jsxs)(ue.E,{children:["$",tt.state.name]}),(0,l.jsx)(B.B,{direction:"row",gap:1,alignItems:"center",children:(0,l.jsx)(F.$n,{variant:"primary",size:"sm",fill:"outline",children:(0,l.jsx)(s.x6,{i18nKey:"dashboard.edit-pane.variables.select-variable",children:"Select"})})})]},tt.state.name)),ut&&(0,l.jsx)(I.a,{paddingBottom:1,display:"flex",children:(0,l.jsx)(F.$n,{fullWidth:!0,icon:"plus",size:"sm",variant:"secondary",onClick:ht,"data-testid":c.Tp.components.PanelEditor.ElementEditPane.addVariableButton,children:(0,l.jsx)(s.x6,{i18nKey:"dashboard.edit-pane.variables.add-variable",children:"Add variable"})})})]})}function Ge(ke){return{variableItem:(0,ie.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:ke.spacing(1),padding:ke.spacing(.5),borderRadius:ke.shape.radius.default,cursor:"pointer",[ke.transitions.handleMotion("no-preference","reduce")]:{transition:ke.transitions.create(["color"],{duration:ke.transitions.duration.short})},"&:last-child":{marginBottom:ke.spacing(2)},button:{visibility:"hidden"},"&:hover":{color:ke.colors.text.link,button:{visibility:"visible"}}})}}var Fe=e(27160),Pe=e(30703);const Ve=({dashboard:ke})=>(0,l.jsx)(F.$n,{size:"sm",variant:"secondary",tooltip:(0,s.t)("dashboard.toolbar.new.edit-dashboard-v2-schema.tooltip","Edit dashboard v2 schema"),icon:(0,l.jsx)(Pe.I,{name:"brackets-curly",size:"lg",type:"default"}),onClick:()=>ke.openV2SchemaEditor()});function me(ke){const{body:Ze}=ke.useState(),nt=(0,i.useId)(),ut=(0,i.useId)(),gt=(0,i.useMemo)(()=>new r.C({title:"",id:"dashboard-options"}).addItem(new v.v({title:(0,s.t)("dashboard.options.title-option","Title"),id:nt,render:()=>(0,l.jsx)(Qe,{id:nt,dashboard:ke})})).addItem(new v.v({title:(0,s.t)("dashboard.options.description","Description"),id:ut,render:()=>(0,l.jsx)(Ue,{id:ut,dashboard:ke})})),[ke,ut,nt]),ht=(0,Fe.W)(Ze);return[gt,...ht]}class Se{constructor(Ze){this.dashboard=Ze,this.isEditableDashboardElement=!0,this.useEditPaneOptions=me.bind(this,this.dashboard)}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.dashboard","Dashboard"),icon:"apps",instanceName:(0,s.t)("dashboard.edit-pane.elements.dashboard","Dashboard")}}getOutlineChildren(){const{$variables:Ze,body:nt}=this.dashboard.state;return[Ze,...nt.getOutlineChildren()]}renderActions(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Ve,{dashboard:this.dashboard}),(0,l.jsx)(F.$n,{variant:"secondary",size:"sm",onClick:()=>this.dashboard.onOpenSettings(),tooltip:(0,s.t)("dashboard.toolbar.dashboard-settings.tooltip","Dashboard settings"),icon:"sliders-v-alt",iconPlacement:"right",children:(0,l.jsx)(s.x6,{i18nKey:"dashboard.actions.open-settings",children:"Settings"})})]})}}function Qe({dashboard:ke,id:Ze}){const{title:nt}=ke.useState(),ut=(0,i.useRef)("");return(0,l.jsx)(p.p,{id:Ze,value:nt,onChange:gt=>{ke.setState({title:gt.currentTarget.value})},onFocus:gt=>{ut.current=gt.currentTarget.value},onBlur:gt=>{ut.current===gt.currentTarget.value||pt(gt)||ot.changeTitle({source:ke,oldValue:ut.current,newValue:gt.currentTarget.value})}})}function Ue({dashboard:ke,id:Ze}){const{description:nt}=ke.useState(),ut=(0,i.useRef)("");return(0,l.jsx)(N.f,{id:Ze,value:nt,onChange:gt=>ke.setState({description:gt.currentTarget.value}),onFocus:gt=>{ut.current=gt.currentTarget.value},onBlur:gt=>{ut.current===gt.currentTarget.value||pt(gt)||ot.changeDescription({source:ke,oldValue:ut.current,newValue:gt.currentTarget.value})}})}var Ie=e(73427),Re=e(87745),Ke=e(22175),Le=e(25953),ze=e(93389),Be=e(3688),$e=e(1682),Ye=e(24726);class de{constructor(Ze){this._panels=Ze,this.isEditableDashboardElement=!0,this.key=(0,Ye.A)()}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.panels","Panels"),icon:"folder",instanceName:""}}useEditPaneOptions(){return[new r.C({title:"",id:""})]}onConfirmDelete(){Ie.lE.publish(new Re.bY({title:(0,s.t)("dashboard.edit-pane.elements.multiple-panels","Multiple panels"),text:(0,s.t)("dashboard.edit-pane.elements.multiple-panels-delete-text","Are you sure you want to delete these panels? All queries will be removed."),onConfirm:()=>this.onDelete()}))}onDelete(){this._panels.forEach(Ze=>{Ze.onDelete()})}}function ge(ke){const Ze=this.panel,nt=Ze.parent,ut=(0,i.useId)(),gt=(0,i.useId)(),ht=(0,i.useId)(),tt=(0,i.useId)(),Ot=(0,i.useMemo)(()=>new r.C({title:"",id:"panel-options"}).addItem(new v.v({title:"",id:ut,render:()=>(0,l.jsx)(De,{panel:this.panel})})).addItem(new v.v({title:(0,s.t)("dashboard.viz-panel.options.title-option","Title"),id:gt,value:Ze.state.title,popularRank:1,render:wt=>(0,l.jsx)(Ke.m,{id:wt.props.id,panel:Ze,isNewElement:ke})})).addItem(new v.v({title:(0,s.t)("dashboard.viz-panel.options.description","Description"),id:ht,value:Ze.state.description,render:wt=>(0,l.jsx)(Ke.dF,{id:wt.props.id,panel:Ze})})).addItem(new v.v({title:(0,s.t)("dashboard.viz-panel.options.transparent-background","Transparent background"),id:tt,render:wt=>(0,l.jsx)(Ke.R4,{id:wt.props.id,panel:Ze})})),[ut,gt,Ze,ht,tt,ke]),jt=(0,i.useMemo)(()=>(0,Be.y)(nt)&&nt.getOptions?nt.getOptions():[],[nt]);return[Ot,...jt]}class pe{constructor(Ze){this.panel=Ze,this.isEditableDashboardElement=!0,this.typeName="Panel",this.useEditPaneOptions=ge.bind(this)}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.panel","Panel"),icon:"chart-line",instanceName:d.jh.interpolate(this.panel,this.panel.state.title,void 0,"text")}}onDelete(){$e.b4.getLayoutManagerFor(this.panel).removePanel?.(this.panel)}onConfirmDelete(){Ie.lE.publish(new Re.bY({title:(0,s.t)("dashboard.viz-panel.delete-panel-title","Delete panel?"),text:(0,s.t)("dashboard.viz-panel.delete-panel-text","Deleting this panel will also remove all queries. Are you sure you want to continue?"),yesText:(0,s.t)("dashboard.viz-panel.delete-panel-yes","Delete"),onConfirm:()=>{this.onDelete()}}))}onDuplicate(){$e.b4.getLayoutManagerFor(this.panel).duplicatePanel?.(this.panel)}onCopy(){(0,m.YQ)(this.panel).copyPanel(this.panel)}onChangeName(Ze){(0,Ke.dJ)(this.panel,Ze)}createMultiSelectedElement(Ze){return new de(Ze)}scrollIntoView(){(this.panel.parent instanceof Le.X||this.panel.parent instanceof ze.U)&&this.panel.parent.scrollIntoView()}}const De=({panel:ke})=>(0,l.jsx)(B.B,{alignItems:"center",width:"100%",children:(0,l.jsx)(F.$n,{onClick:()=>{R.Ny.partial({editPanel:(0,m.Cs)(ke)})},icon:"sliders-v-alt",fullWidth:!0,size:"sm",tooltip:(0,s.t)("dashboard.viz-panel.options.configure-button-tooltip","Edit queries and visualization options"),children:(0,l.jsx)(s.x6,{i18nKey:"dashboard.new-panel.configure-button",children:"Configure"})})});function Me(){return(0,n.A)("grafana.dashboards.edit-pane.isCollapsed",!1)}function be(ke){if(ke){if(M(ke))return ke;if(ke instanceof d.Eb)return new pe(ke);if(ke instanceof d.tI)return new f(ke);if(ke instanceof o.H$)return new Se(ke);if(ke instanceof d.Pj)return new Ee(ke);if(ke instanceof d.xc)return new W(ke);if((0,K.VD)(ke))return new Y(ke);if(ke instanceof V.mG)return new V.gp(ke)}}class Oe extends a.x{static{this.type="new-object-added-to-canvas"}}class Ne extends a.x{static{this.type="object-removed-from-canvas"}}class We extends a.x{static{this.type="objects-reordered-on-canvas"}}class qe extends a.x{static{this.type="conditional-rendering-changed"}}class st extends a.x{static{this.type="dashboard-edit-action"}}class rt extends a.x{static{this.type="dashboard-state-changed"}}const ot={edit(ke){ke.source.publishEvent(new st(ke),!0)},addElement(ke){const{addedObject:Ze,source:nt,perform:ut,undo:gt}=ke,ht=be(Ze);if(!ht)throw new Error("Added object is not an editable element");const tt=ht.getEditableElementInfo().typeName;ot.edit({description:(0,s.t)("dashboard.edit-actions.add","Add {{typeName}}",{typeName:tt}),addedObject:Ze,source:nt,perform:ut,undo:gt})},removeElement(ke){const{removedObject:Ze,source:nt,perform:ut,undo:gt}=ke,ht=be(Ze);if(!ht)throw new Error("Removed object is not an editable element");const tt=ht.getEditableElementInfo().typeName;ot.edit({description:(0,s.t)("dashboard.edit-actions.remove","Remove {{typeName}}",{typeName:tt}),removedObject:Ze,source:nt,perform:ut,undo:gt})},changeTitle:mt({description:(0,s.t)("dashboard.title.action","Change dashboard title"),prop:"title"}),changeDescription:mt({description:(0,s.t)("dashboard.description.action","Change dashboard description"),prop:"description"}),addVariable({source:ke,addedObject:Ze}){const nt=[...ke.state.variables??[]];ot.addElement({source:ke,addedObject:Ze,perform(){ke.setState({variables:[...nt,Ze]})},undo(){ke.setState({variables:[...nt]})}})},removeVariable({source:ke,removedObject:Ze}){const nt=[...ke.state.variables];ot.removeElement({source:ke,removedObject:Ze,perform(){ke.setState({variables:nt.filter(ut=>ut!==Ze)})},undo(){ke.setState({variables:nt})}})},changeVariableName:mt({description:(0,s.t)("dashboard.variable.name.action","Change variable name"),prop:"name"}),changeVariableLabel:mt({description:(0,s.t)("dashboard.variable.label.action","Change variable label"),prop:"label"}),changeVariableDescription:mt({description:(0,s.t)("dashboard.variable.description.action","Change variable description"),prop:"description"}),changeVariableHideValue:mt({description:(0,s.t)("dashboard.variable.hide.action","Change variable hide option"),prop:"hide"}),moveElement(ke){const{movedObject:Ze,source:nt,perform:ut,undo:gt}=ke,ht=be(Ze);if(!ht)throw new Error("Moved object is not an editable element");const tt=ht.getEditableElementInfo().typeName;ot.edit({description:(0,s.t)("dashboard.edit-actions.move","Move {{typeName}}",{typeName:tt}),movedObject:Ze,source:nt,perform:ut,undo:gt})}};function mt({description:ke,prop:Ze}){return({source:nt,oldValue:ut,newValue:gt})=>{ot.edit({description:ke,source:nt,perform:()=>{nt.setState({[Ze]:gt})},undo:()=>{nt.setState({[Ze]:ut})}})}}function pt(ke){return ke.relatedTarget&&(ke.relatedTarget.id===T.Qk||ke.relatedTarget.id===T.aS)}},33184:(ne,j,e)=>{"use strict";e.d(j,{Kh:()=>n.Kh,S8:()=>s,oF:()=>d});var n=e(51388);let a;const s=o=>{a=o},d=()=>a},33352:(ne,j,e)=>{"use strict";e.d(j,{S:()=>i});var n=e(74848),a=e(2543),s=e(96540),d=e(38919);const o=(p,h,u,r)=>{const v=l(p,h,r),g=l(h,p,r),E=Math.max(v,g);let x=Math.floor(p/E),m=Math.ceil(r/x);x=Math.ceil(r/m);const y=x-(x*m-r),b=p/y-u+u/y;return{width:p/x-u+u/x,height:h/m-u+u/m,widthOnLastRow:b,xCount:x,yCount:m}};function l(p,h,u){const r=Math.ceil(Math.sqrt(u*p/h));return Math.floor(r*h/p)*r<u?h/Math.ceil(r*h/p):p/r}class i extends s.PureComponent{static{this.defaultProps={itemSpacing:8}}constructor(h){super(h),this.state={values:h.getValues()}}componentDidUpdate(h){const{renderCounter:u,source:r}=this.props;(u!==h.renderCounter||r!==h.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:h,width:u,height:r}=this.props;return h===d.wV.Auto?u>r?d.wV.Vertical:d.wV.Horizontal:h}renderGrid(){const{renderValue:h,height:u,width:r,itemSpacing:v,getAlignmentFactors:g,orientation:E}=this.props,{values:x}=this.state,m=o(r,u,v,x.length),y=g?g(x,m.width,m.height):{};let b=0,D=0,f=[];for(let C=0;C<x.length;C++){const P=x[C],M=D===m.yCount-1?m.widthOnLastRow:m.width,I=m.height,B=b*M+v*b,U=D*I+v*D,W={position:"absolute",left:B,top:U,width:`${M}px`,height:`${I}px`};f.push((0,n.jsx)("div",{style:W,children:h({value:P,width:M,height:I,alignmentFactors:y,orientation:E,count:x.length})},C)),b++,b===m.xCount&&(b=0,D++)}return(0,n.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:f})}render(){const{renderValue:h,height:u,width:r,itemSpacing:v,getAlignmentFactors:g,autoGrid:E,orientation:x,maxVizHeight:m,minVizWidth:y,minVizHeight:b}=this.props,{values:D}=this.state;if(E&&x===d.wV.Auto)return this.renderGrid();const f={display:"flex"},C={display:"flex",overflow:`${y?"auto":"hidden"} ${b?"auto":"hidden"}`};let P=u,T=r;const M=this.getOrientation();switch(M){case d.wV.Horizontal:const B=(u+v)/D.length-v;C.flexDirection="column",C.height=`${u}px`,C.overflowX="hidden",C.scrollbarWidth="thin",f.marginBottom=`${v}px`,T=r,P=(0,a.clamp)(B,b??0,m??B);break;case d.wV.Vertical:C.flexDirection="row",C.justifyContent="space-between",C.overflowY="hidden",f.marginRight=`${v}px`,P=u,T=Math.max(r/D.length-v+v/D.length,y??0)}f.width=`${T}px`,f.height=`${P}px`;const I=g?g(D,T,P):{};return(0,n.jsx)("div",{style:C,children:D.map((B,U)=>(0,n.jsx)("div",{style:c(f,U,D.length),children:h({value:B,width:T,height:P,alignmentFactors:I,orientation:M,count:D.length})},U))})}}function c(p,h,u){return h===u-1?{...p,marginRight:0,marginBottom:0}:p}},33380:(ne,j,e)=>{"use strict";e.d(j,{R:()=>s});var n=e(44248),a=e(92119);class s{constructor(o){this._vizPanel=o}get id(){const o=(0,a.Cs)(this._vizPanel);return isNaN(o)?(console.error("VizPanel key could not be translated to a legacy numeric panel id",this._vizPanel),0):o}get description(){return this._vizPanel.state.description}get type(){return this._vizPanel.state.pluginId}get title(){return this._vizPanel.state.title}get transformations(){return this._vizPanel.state.$data instanceof n.Es?this._vizPanel.state.$data.state.transformations:[]}get targets(){const o=(0,a.un)(this._vizPanel);return o?o.state.queries:[]}get datasource(){return(0,a.un)(this._vizPanel)?.state.datasource}get options(){return this._vizPanel.state.options}get fieldConfig(){return this._vizPanel.state.fieldConfig}get pluginVersion(){return this._vizPanel.state.pluginVersion}}},33553:(ne,j,e)=>{"use strict";e.d(j,{O:()=>n});var n=(a=>(a.Absolute="absolute",a.Percentage="percentage",a))(n||{})},33604:(ne,j,e)=>{"use strict";e.d(j,{R:()=>a,f:()=>s});let n;function a(d){if(n)throw new Error("setPluginComponentsHook() function should only be called once, when Grafana is starting.");n=d}function s(d){if(!n)throw new Error("setPluginComponentsHook(options) can only be used after the Grafana instance has started.");return n(d)}},33605:(ne,j,e)=>{"use strict";e.d(j,{A:()=>n});const n="__GRAFANA_INTERNAL_MULTICOMBOBOX_ALL_OPTION__"},33707:(ne,j,e)=>{"use strict";e.d(j,{U:()=>a,W:()=>s});let n;function a(d){if(n)throw new Error("setUsePluginFunctionsHook() function should only be called once, when Grafana is starting.");n=d}function s(d){if(!n)throw new Error("usePluginFunctions(options) can only be used after the Grafana instance has started.");return n(d)}},33749:(ne,j,e)=>{"use strict";e.d(j,{fX:()=>s,nB:()=>a,n_:()=>n,p6:()=>d});var n=(o=>(o.DashboardView="dashboard-view",o.DataRequest="data-request",o))(n||{});const a=o=>!!o.payload.page,s=o=>!!o.payload.interactionName,d=o=>!!o.payload.experimentId},33985:(ne,j,e)=>{"use strict";e.d(j,{t:()=>n});const n=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]},33998:(ne,j,e)=>{"use strict";e.d(j,{LQ:()=>c,g2:()=>l,j2:()=>p,jX:()=>h});var n=e(2543),a=e.n(n),s=e(92745),d=e(68143),o=e(77256);const l="alerting.notifications.conflict",i="alerting.notifications.routes.conflictingMatchers";function c(u){const r=(0,o.E2)(u);return r?{[l]:p(r),[i]:(0,s.t)("alerting.policies.update-errors.routes.conflictingMatchers","Cannot add or update route: matchers conflict with an external routing tree if we merged matchers {{-matchers}}. This would make the route unreachable.",{matchers:u.data.details?.causes?.map(g=>g.message).join(", ")??(0,s.t)("alerting.policies.update-errors.routes.unknownMatchers","<unknown matchers>")})}[r]:u.data.message}function p(u){return{[l]:(0,s.t)("alerting.policies.update-errors.conflict","The notification policy tree has been updated by another user.")}[u]}function h(u){return(0,d.NF)(u)&&(0,n.get)(u.data,"kind")==="Status"&&(0,n.get)(u.data,"status")==="Failure"}},34107:(ne,j,e)=>{"use strict";e.d(j,{S:()=>i});var n=e(74848),a=e(2543),s=e.n(a),d=e(96540),o=e(46644),l=e(18857);class i extends d.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:p,allowMultiple:h,defaultStat:u,onChange:r}=this.props,v=o.AS.list(p);if(v.length!==p.length){const g=v.map(x=>x.id),E=(0,a.difference)(p,g);console.warn("Unknown stats",E,p),r(v.map(x=>x.id))}!h&&p.length>1&&(console.warn("Removing extra stat",p),r([p[0]])),u&&p.length<1&&r([u])},this.onSelectionChange=p=>{const{onChange:h}=this.props;Array.isArray(p)?h(p.map(u=>u.value)):h(p&&p.value?[p.value]:[])}}static{this.defaultProps={allowMultiple:!1}}componentDidMount(){this.checkInput()}componentDidUpdate(p){this.checkInput()}render(){const{stats:p,allowMultiple:h,defaultStat:u,placeholder:r,className:v,menuPlacement:g,width:E,inputId:x,filterOptions:m}=this.props,y=o.AS.selectOptions(p,m);return(0,n.jsx)(l.l6,{value:y.current,className:v,isClearable:!u,isMulti:h,width:E,isSearchable:!0,options:y.options,placeholder:r,onChange:this.onSelectionChange,menuPlacement:g,inputId:x})}}},34176:(ne,j,e)=>{"use strict";e.d(j,{o:()=>K,e:()=>G});var n=e(74848),a=e(89332),s=e(96540),d=e(8642),o=e(51898),l=e(92745),i=e(27489),c=e(76319),p=e(45861),h=e(71599),u=e(93256),r=e(92807),v=e(32881),g=e(63142),E=e(65642),x=e(80849),m=e(36490),y=e(41654),b=e(62667);function D({message:w}){const Q=(0,s.useCallback)(()=>{m.Ny.partial({tab:b.M8.Query})},[]);return(0,n.jsx)("div",{style:{marginTop:"100px"},children:(0,n.jsx)(y.B,{direction:"row",justifyContent:"center",children:(0,n.jsxs)(y.B,{direction:"column",gap:2,children:[(0,n.jsx)("h2",{children:w}),(0,n.jsx)("div",{children:(0,n.jsx)(p.$n,{size:"md",variant:"secondary",icon:"arrow-left",onClick:Q,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.panel-not-supported.go-back-to-queries",children:"Go back to Queries"})})})]})})})}var f=e(47350),C=e(22803),P=e(66615),T=e(28882),M=e(34999),I=e(63527),B=e(8073);const U={[T.f.Transformations]:"https://grafana.com/docs/grafana/latest/panels/transformations",[T.f.FieldConfig]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/",[T.f.FieldConfigOverrides]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/#override-a-field"},W=w=>U[w];var V=e(85622);const z="dashboard.components.TransformationEditor.featureInfoBox.isDismissed";function R(w){const{noTransforms:Q,search:k,xforms:te,onSearchChange:q,onSearchKeyDown:se,onTransformationAdd:re,suffix:Y}=w;return(0,n.jsxs)(y.B,{direction:"column",children:[Q&&(0,n.jsx)(v.mc,{grow:1,children:(0,n.jsx)(P.b,{storageKey:z,defaultValue:!1,children:(X,J)=>X?null:(0,n.jsxs)(M.F,{title:(0,l.t)("dashboard.transformation-picker.title-transformations","Transformations"),severity:"info",onRemove:()=>{J(!0)},children:[(0,n.jsxs)("p",{children:[(0,n.jsx)(l.x6,{i18nKey:"dashboard.transformation-picker.info",children:"Transformations allow you to join, calculate, re-order, hide, and rename your query results before they are visualized."}),(0,n.jsx)("br",{}),(0,n.jsx)(l.x6,{i18nKey:"dashboard.transformation-picker.info-graph-not-suitable",children:"Many transforms are not suitable if you're using the Graph visualization, as it currently only supports time series data."}),(0,n.jsx)("br",{}),(0,n.jsxs)(l.x6,{i18nKey:"dashboard.transformation-picker.info-switch-to-table",children:["It can help to switch to the Table visualization to understand what a transformation is doing."," "]})]}),(0,n.jsx)("a",{href:W(T.f.Transformations),className:"external-link",target:"_blank",rel:"noreferrer",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.transformation-picker.read-more",children:"Read more"})})]})})}),(0,n.jsx)(I.p,{"data-testid":o.Tp.components.Transforms.searchInput,value:k??"",autoFocus:!Q,placeholder:(0,l.t)("dashboard.transformation-picker.placeholder-search-for-transformation","Search for transformation"),onChange:q,onKeyDown:se,suffix:Y}),te.map(X=>(0,n.jsx)(O,{transform:X,onClick:()=>{re({value:X.id})}},X.name))]})}function O({transform:w,onClick:Q}){const k=(0,g.of)(N);return(0,n.jsxs)(B.Z,{noMargin:!0,className:k.card,"data-testid":o.Tp.components.TransformTab.newTransform(w.name),onClick:Q,children:[(0,n.jsx)(B.Z.Heading,{children:w.name}),(0,n.jsx)(B.Z.Description,{children:w.description}),w.state&&(0,n.jsx)(B.Z.Tags,{children:(0,n.jsx)(V.p,{state:w.state})})]})}function N(w){return{card:(0,C.css)({margin:"0",padding:`${w.spacing(1)}`})}}var F=e(76808);const G="viewAll";class H extends s.PureComponent{constructor(Q){super(Q),this.onSearchChange=q=>{this.setState({search:q.target.value})},this.onSearchKeyDown=q=>{if(q.key==="Enter"){const{search:se}=this.state;if(se){const re=se.toLowerCase(),Y=d.h.list().filter(X=>(X.name+X.description).toLowerCase().indexOf(re)>=0);Y.length>0&&this.onTransformationAdd({value:Y[0].id})}}else q.keyCode===27&&(this.setState({search:"",showPicker:!1}),q.stopPropagation())},this.getTransformationNextId=q=>{const{transformations:se}=this.state;let re=0;const Y=se.filter(X=>X.id.startsWith(q)).map(X=>X.id);return Y.length!==0&&(re=Math.max(...Y.map(X=>parseInt(X.match(/\d+/)[0],10)))+1),`${q}-${re}`},this.onTransformationAdd=q=>{let se="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(se="transformations_redesign_"+se),(0,i.rR)(se,{action:"add",transformationId:q.value});const{transformations:re}=this.state,Y=this.getTransformationNextId(q.value);this.setState({search:"",showPicker:!1}),this.onChange([...re,{id:Y,transformation:{id:q.value,options:{}}}])},this.onTransformationChange=(q,se)=>{const{transformations:re}=this.state,Y=Array.from(re);let X="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(X="transformations_redesign_"+X),(0,i.rR)(X,{action:"change",transformationId:Y[q].transformation.id}),Y[q].transformation=se,this.onChange(Y)},this.onTransformationRemove=q=>{const{transformations:se}=this.state,re=Array.from(se);let Y="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(Y="transformations_redesign_"+Y),(0,i.rR)(Y,{action:"remove",transformationId:re[q].transformation.id}),re.splice(q,1),this.onChange(re)},this.onTransformationRemoveAll=()=>{this.onChange([]),this.setState({showRemoveAllModal:!1})},this.onDragEnd=q=>{const{transformations:se}=this.state;if(!q||!q.destination)return;const re=q.source.index,Y=q.destination.index;if(re===Y)return;const X=Array.from(se),[J]=X.splice(re,1);X.splice(Y,0,J),this.onChange(X)},this.renderEmptyMessage=()=>(0,n.jsx)(x.p,{onShowPicker:()=>{this.setState({showPicker:!0})}}),this.renderTransformationEditors=()=>{const{data:q,transformations:se}=this.state;return(0,n.jsx)(a.JY,{onDragEnd:this.onDragEnd,children:(0,n.jsx)(a.gL,{droppableId:"transformations-list",direction:"vertical",children:re=>(0,n.jsxs)("div",{ref:re.innerRef,...re.droppableProps,children:[(0,n.jsx)(f.A,{configs:se,data:q,onRemove:this.onTransformationRemove,onChange:this.onTransformationChange}),re.placeholder]})})})};const k=Q.panel.transformations||[],te=this.buildTransformationIds(k);this.state={transformations:k.map((q,se)=>({transformation:q,id:te[se]})),data:{series:[]},search:"",selectedFilter:G,showIllustrations:!0},this.ref=(0,s.createRef)()}buildTransformationIds(Q){const k={},te=[];for(let q=0;q<Q.length;q++){const se=Q[q];k[se.id]===void 0?k[se.id]=0:k[se.id]+=1,te.push(`${Q[q].id}-${k[Q[q].id]}`)}return te}componentDidMount(){this.subscription=this.props.panel.getQueryRunner().getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:Q=>this.setState({data:Q})})}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(Q,k){if(E.Ay.featureToggles.transformationsRedesign){const q=!(k.transformations.length>0)||k.showPicker,re=!(this.state.transformations.length>0)||this.state.showPicker;if(q!==re){const Y=Math.random()/2;this.setState({scrollTop:re?Y:Number.MAX_SAFE_INTEGER})}}k.scrollTop!==this.state.scrollTop&&this.ref.current?.scrollTo({top:this.state.scrollTop})}onChange(Q){this.setState({transformations:Q}),this.props.panel.setTransformations(Q.map(k=>k.transformation))}renderTransformsPicker(){let{showPicker:Q}=this.state;const{transformations:k,search:te}=this.state,{transformationsRedesign:q}=E.Ay.featureToggles,se=!k?.length,re=k.length>0;let Y=null,X=d.h.list().sort((ae,le)=>ae.name>le.name?1:le.name>ae.name?-1:0);if(!q&&se&&(Q=!0),this.state.selectedFilter!==G&&(X=X.filter(ae=>ae.categories&&this.state.selectedFilter&&ae.categories.has(this.state.selectedFilter))),te){const ae=te.toLowerCase(),le=X.filter(L=>(L.name+L.description).toLowerCase().indexOf(ae)>=0);Y=(0,n.jsxs)(n.Fragment,{children:[le.length," / ",X.length," \xA0\xA0",(0,n.jsx)(c.K,{name:"times",onClick:()=>{this.setState({search:""})},tooltip:(0,l.t)("dashboard.un-themed-transformations-editor.tooltip-clear-search","Clear search")})]}),X=le}!Y&&Q&&!se&&(Y=(0,n.jsx)(c.K,{name:"times",onClick:()=>{this.setState({showPicker:!1})},tooltip:(0,l.t)("dashboard.un-themed-transformations-editor.tooltip-close-picker","Close picker")}));let J=null,_=null;q?(J=(0,n.jsx)(F.R,{noTransforms:se,search:te,suffix:Y,xforms:X,onClose:()=>this.setState({showPicker:!1}),onSelectedFilterChange:ae=>this.setState({selectedFilter:ae}),onShowIllustrationsChange:ae=>this.setState({showIllustrations:ae}),onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd,data:this.state.data.series,selectedFilter:this.state.selectedFilter,showIllustrations:this.state.showIllustrations}),_=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.$n,{icon:"times",variant:"secondary",onClick:()=>this.setState({showRemoveAllModal:!0}),style:{marginLeft:this.props.theme.spacing.md},children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.un-themed-transformations-editor.delete-all-transformations",children:"Delete all transformations"})}),(0,n.jsx)(h.u,{isOpen:!!this.state.showRemoveAllModal,title:(0,l.t)("dashboard.un-themed-transformations-editor.title-delete-all-transformations","Delete all transformations?"),body:(0,l.t)("dashboard.un-theme-transformations-editor.body-delete-all-transformations","By deleting all transformations, you will go back to the main selection screen."),confirmText:(0,l.t)("dashboard.un-themed-transformations-editor.confirmText-delete-all","Delete all"),onConfirm:()=>this.onTransformationRemoveAll(),onDismiss:()=>this.setState({showRemoveAllModal:!1})})]})):J=(0,n.jsx)(R,{noTransforms:se,search:te,suffix:Y,xforms:X,onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd});const ee=(0,n.jsxs)(u.e,{children:[(0,n.jsx)(p.$n,{icon:"plus",variant:"secondary",onClick:()=>{this.setState({showPicker:!0})},"data-testid":o.Tp.components.Transforms.addTransformationButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.un-themed-transformations-editor.actions.add-another-transformation",children:"Add another transformation"})}),_]});return(0,n.jsxs)(n.Fragment,{children:[Q&&J,q&&re&&ee||!q&&!Q&&re&&ee]})}render(){const{panel:{alert:Q}}=this.props,{transformations:k}=this.state,te=k.length>0;if(Q){const q=te?"Transformations can't be used on a panel with alerts":"Transformations can't be used on a panel with existing alerts";return(0,n.jsx)(D,{message:q})}return(0,n.jsx)(r.P,{ref:this.ref,minHeight:"100%",children:(0,n.jsx)(v.mc,{padding:"lg",children:(0,n.jsxs)("div",{"data-testid":o.Tp.components.TransformTab.content,children:[!te&&E.Ay.featureToggles.transformationsRedesign&&this.renderEmptyMessage(),te&&this.renderTransformationEditors(),this.renderTransformsPicker()]})})})}}const K=(0,g.SL)(H)},34213:(ne,j,e)=>{"use strict";e.d(j,{d:()=>c});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(45861),i=e(30703);const c=({currentPage:h,numberOfPages:u,onNavigate:r,hideWhenSinglePage:v,showSmallVersion:g,className:E})=>{const x=(0,o.of)(p),m=g?1:8,y=(0,s.useMemo)(()=>{const f=[...new Array(u).keys()],C=u>m,P=(T,M)=>(0,n.jsx)("li",{className:x.item,children:(0,n.jsx)(l.$n,{size:"sm",variant:M,onClick:()=>r(T),children:T})},T);return f.reduce((T,M)=>{const I=M+1,B=I===h?"primary":"secondary",U=m,W=u-m+1,V=W-U,z=I===1||I===u,R=V>-1&&h>=U&&h<=W,O=g?1:3,N=g?0:2;return C?z||h<U&&I<U||V>=0&&h>W&&I>W||V<0&&h>=U&&I>W||R&&I>=h-N&&I<=h+N?T.push(P(I,B)):(I===U&&h<U||I===W&&h>W||R&&(I===h-O||I===h+O))&&T.push((0,n.jsx)("li",{className:x.item,children:(0,n.jsx)(i.I,{className:x.ellipsis,name:"ellipsis-v","data-testid":"pagination-ellipsis-icon"})},I)):T.push(P(I,B)),T},[])},[h,u,r,m,g,x.ellipsis,x.item]);if(v&&u<=1)return null;const b=(0,d.t)("grafana-ui.pagination.previous-page","previous page"),D=(0,d.t)("grafana-ui.pagination.next-page","next page");return(0,n.jsx)("div",{className:(0,a.cx)(x.container,E),role:"navigation",children:(0,n.jsxs)("ol",{children:[(0,n.jsx)("li",{className:x.item,children:(0,n.jsx)(l.$n,{"aria-label":b,size:"sm",variant:"secondary",onClick:()=>r(h-1),disabled:h===1,children:(0,n.jsx)(i.I,{name:"angle-left"})})}),y,(0,n.jsx)("li",{className:x.item,children:(0,n.jsx)(l.$n,{"aria-label":D,size:"sm",variant:"secondary",onClick:()=>r(h+1),disabled:h===u,children:(0,n.jsx)(i.I,{name:"angle-right"})})})]})})},p=()=>({container:(0,a.css)({float:"right"}),item:(0,a.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,a.css)({transform:"rotate(90deg)"})})},34273:(ne,j,e)=>{"use strict";e.d(j,{W:()=>s});var n=e(95004);function a(){const d="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyz",l=d.length,i=new Map;return c=>{const p=i.get(c);if(p!=null)return p;const h=[...c].map(u=>u.toLowerCase()&&u!==u.toUpperCase()?o.charAt(Math.floor(Math.random()*l)):u.toUpperCase()&&u!==u.toUpperCase()?d.charAt(Math.floor(Math.random()*l)):u).join("");return i.set(c,h),h}}function s(d,o){if(!(o.labels||o.names||o.values))return d;const l=new Set(["time","value","exemplar","traceid","id","uid","uuid","__name__","le","name"]),i=a();return d.map(c=>{let{schema:p,data:h}=c;if(p&&h){if(o.labels){for(const u of p.fields)if(u.labels){const r={};for(const[v,g]of Object.entries(u.labels))r[v]=i(g);u.labels=r}}if(o.names)for(const u of p.fields)u.name?.length&&!l.has(u.name.toLowerCase())&&(u.name=i(u.name));o.values&&p.fields.forEach((u,r)=>{if(u.type===n.PU.string&&h){const v=h.values[r].map(g=>i(String(g)));h.values[r]=v}})}return{schema:p,data:h}})}},34339:(ne,j,e)=>{"use strict";e.d(j,{_:()=>o});var n=e(74848),a=e(22803),s=e(76319),d=e(63142);const o=({icon:i,iconType:c,iconSize:p,tooltip:h,onClick:u,children:r})=>{const v=(0,d.of)(l);return(0,n.jsxs)("div",{className:v.noBorderContainer,children:[i&&(0,n.jsx)(s.K,{name:i,size:p,iconType:c,tooltip:h,tooltipPlacement:"bottom",onClick:u}),r]})},l=i=>({noBorderContainer:(0,a.css)({padding:`0 ${i.spacing(.5)}`,display:"flex"})})},34343:(ne,j,e)=>{"use strict";e.d(j,{m:()=>l});var n=e(74848),a=e(22803),s=e(63142),d=e(45861),o=e(30703);const l=({label:c,selected:p,onClick:h,icon:u="check"})=>{const r=(0,s.of)(i),v=(0,s.of)(d.my);return(0,n.jsxs)("button",{type:"button",className:(0,a.cx)(v,r.wrapper,p&&r.selected),onClick:h,children:[(0,n.jsx)("span",{children:c}),p&&(0,n.jsx)(o.I,{name:u,className:r.icon,"data-testid":"filter-pill-icon"})]})},i=c=>({wrapper:(0,a.css)({background:c.colors.background.secondary,borderRadius:c.shape.radius.pill,padding:c.spacing(0,2),fontSize:c.typography.bodySmall.fontSize,fontWeight:c.typography.fontWeightMedium,lineHeight:c.typography.bodySmall.lineHeight,color:c.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${c.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:c.colors.action.hover,color:c.colors.text.primary}}),selected:(0,a.css)({color:c.colors.text.primary,background:c.colors.action.selected,"&:hover":{background:c.colors.action.focus}}),icon:(0,a.css)({marginLeft:c.spacing(.5)})})},34440:(ne,j,e)=>{"use strict";e.d(j,{I:()=>E,gp:()=>y,mG:()=>x});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(92745),l=e(44248),i=e(31286),c=e(41654),p=e(8073),h=e(63142),u=e(25797),r=e(51156),v=e(33143),g=e(37674);function E(f){const C=new x({dashboardRef:f.getRef()});f.state.editPane.selectObject(C,C.state.key,{force:!0,multi:!1})}class x extends l.Bs{}function m(f){const C=(0,s.useId)();return[(0,s.useMemo)(()=>new u.C({title:"",id:"variables"}).addItem(new r.v({title:"",id:C,skipField:!0,render:()=>(0,n.jsx)(b,{variableAdd:f})})),[f,C])]}class y{constructor(C){this.variableAdd=C,this.isEditableDashboardElement=!0,this.typeName="Variable",this.useEditPaneOptions=m.bind(this,this.variableAdd)}getEditableElementInfo(){return{typeName:(0,o.t)("dashboard.edit-pane.elements.variable-set","Variables"),icon:"x",instanceName:(0,o.t)("dashboard.edit-pane.elements.variable-set","Variables")}}}function b({variableAdd:f}){const C=(0,s.useMemo)(()=>(0,g.B$)(),[]),P=(0,h.of)(D),T=(0,s.useCallback)(M=>{const I=f.state.dashboardRef.resolve(),B=l.jh.getVariables(I);if(!(B instanceof l.Pj))return;const U=(0,g.No)(M,{name:(0,g.e_)(M,B.state.variables??[])});v.cc.addVariable({source:B,addedObject:U}),I.state.editPane.selectObject(U,U.state.key,{force:!0,multi:!1})},[f]);return(0,n.jsxs)(c.B,{direction:"column",gap:0,children:[(0,n.jsx)(i.a,{paddingBottom:1,display:"flex",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard.edit-pane.variables.select-type",children:"Choose variable type"})}),(0,n.jsx)(c.B,{direction:"column",gap:1,children:C.map(M=>(0,n.jsxs)(p.Z,{noMargin:!0,isCompact:!0,onClick:()=>T(M.value),title:(0,o.t)("dashboard.edit-pane.variables.select-type-card-tooltip","Click to select type"),"data-testid":d.Tp.components.PanelEditor.ElementEditPane.variableType(M.value),children:[(0,n.jsx)(p.Z.Heading,{children:M.label}),(0,n.jsx)(p.Z.Description,{className:P.cardDescription,children:M.description})]},M.value))})]})}function D(f){return{cardDescription:(0,a.css)({fontSize:f.typography.bodySmall.fontSize,marginTop:f.spacing(0)})}}},34455:(ne,j,e)=>{"use strict";e.d(j,{A:()=>a,C:()=>n});function n(s){return{...s,fields:s.fields.map(d=>{const o=Number(d.config.noValue);return Number.isNaN(o)?d:a(d,o)})}}function a(s,d){const o=s.values.slice();for(let l=0;l<o.length;l++)o[l]===null&&(o[l]=d);return{...s,values:o}}},34517:(ne,j,e)=>{"use strict";e.d(j,{x:()=>K});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(5805),l=e(92745),i=e(63142),c=e(6975),p=e(31286),h=e(66404),u=e(45861),r=e(63722),v=e(83873),g=e(78059),E=e(90382),x=e(41654),m=e(18857),y=e(15840),b=e(76459),D=e.n(b),f=e(68143);const C=({className:Y,onSelected:X,inputId:J})=>{const[_,ee]=(0,d.useState)(!1),ae=(0,d.useMemo)(()=>D()(async le=>(ee(!0),(0,s.isNil)(le)&&(le=""),(0,f.AI)().get(`/api/serviceaccounts/search?query=${le}&perpage=100`).then(L=>L.serviceAccounts.map(ie=>({id:ie.id,uid:ie.uid,value:ie,label:ie.login,imgUrl:ie.avatarUrl,login:ie.login}))).finally(()=>{ee(!1)})),300,{leading:!0}),[]);return(0,n.jsx)("div",{className:"service-account-picker","data-testid":"serviceAccountPicker",children:(0,n.jsx)(m.DW,{isClearable:!0,className:Y,inputId:J,isLoading:_,defaultOptions:!0,loadOptions:ae,onChange:X,placeholder:(0,l.t)("service-account-picker.select-placeholder","Start typing to search for service accounts"),noOptionsMessage:(0,l.t)("service-account-picker.noOptionsMessage-no-service-accounts-found","No service accounts found"),"aria-label":(0,l.t)("service-account-picker.select-aria-label","Service account picker")})})};class P extends d.Component{constructor(X){super(X),this.search=D()(async J=>(this.setState({isLoading:!0}),(0,s.isNil)(J)&&(J=""),(0,f.AI)().get(`/api/teams/search?perpage=100&page=1&query=${J}`).then(_=>{const ee=_.teams.map(ae=>({value:ae,label:ae.name,imgUrl:ae.avatarUrl}));return this.setState({isLoading:!1}),ee})),300,{leading:!0}),this.state={isLoading:!1}}componentDidMount(){const{teamId:X}=this.props;X&&(0,f.AI)().get(`/api/teams/${X}`).then(J=>{this.setState({value:{value:J,label:J.name,imgUrl:J.avatarUrl}})})}render(){const{onSelected:X,className:J}=this.props,{isLoading:_,value:ee}=this.state;return(0,n.jsx)("div",{className:"user-picker","data-testid":"teamPicker",children:(0,n.jsx)(m.DW,{isLoading:_,defaultOptions:!0,loadOptions:this.search,value:ee,onChange:X,className:J,placeholder:(0,l.t)("team-picker.select-placeholder","Select a team"),noOptionsMessage:(0,l.t)("team-picker.noOptionsMessage-no-teams-found","No teams found"),"aria-label":(0,l.t)("team-picker.select-aria-label","Team picker")})})}}const T=({className:Y,onSelected:X,inputId:J})=>{const[_,ee]=(0,d.useState)(!1),ae=(0,d.useMemo)(()=>D()(async le=>(ee(!0),(0,s.isNil)(le)&&(le=""),(0,f.AI)().get(`/api/org/users/lookup?query=${le}&limit=100`).then(L=>L.map(ie=>({id:ie.userId,uid:ie.uid,value:ie,label:ie.login,imgUrl:ie.avatarUrl,login:ie.login}))).finally(()=>{ee(!1)})),300,{leading:!0}),[]);return(0,n.jsx)("div",{className:"user-picker","data-testid":"userPicker",children:(0,n.jsx)(m.DW,{isClearable:!0,className:Y,inputId:J,isLoading:_,defaultOptions:!0,loadOptions:ae,onChange:X,placeholder:(0,l.t)("user-picker.select-placeholder","Start typing to search for user"),noOptionsMessage:(0,l.t)("user-picker.noOptionsMessage-no-users-found","No users found"),"aria-label":(0,l.t)("user-picker.select-aria-label","User picker")})})};var M=(Y=>(Y.None="None",Y.Team="Team",Y.User="User",Y.ServiceAccount="ServiceAccount",Y.BuiltInRole="builtInRole",Y))(M||{});const I=({title:Y=(0,l.t)("access-control.add-permission.title","Add permission for"),permissions:X,assignments:J,onAdd:_,onCancel:ee})=>{const[ae,le]=(0,d.useState)(M.None),[L,ie]=(0,d.useState)(""),[oe,ue]=(0,d.useState)(""),[ye,fe]=(0,d.useState)(""),[Ee,Ae]=(0,d.useState)(""),Ge=(0,d.useMemo)(()=>{const Pe=[];return J.users&&Pe.push({value:M.User,label:(0,l.t)("access-control.add-permission.user-label","User")}),J.serviceAccounts&&Pe.push({value:M.ServiceAccount,label:(0,l.t)("access-control.add-permission.serviceaccount-label","Service Account")}),J.teams&&Pe.push({value:M.Team,label:(0,l.t)("access-control.add-permission.team-label","Team")}),J.builtInRoles&&Pe.push({value:M.BuiltInRole,label:(0,l.t)("access-control.add-permission.role-label","Role")}),Pe},[J]);(0,d.useEffect)(()=>{X.length>0&&Ae(X[0])},[X]);const Fe=()=>ae===M.Team&&L||ae===M.User&&oe||ae===M.ServiceAccount&&oe||M.BuiltInRole&&E.X.hasOwnProperty(ye);return(0,n.jsxs)("div",{className:"cta-form","aria-label":(0,l.t)("access-control.add-permission.permissions-aria-label","Permissions slider"),children:[(0,n.jsx)(y.J,{onClick:ee}),(0,n.jsx)("h5",{children:Y}),(0,n.jsx)("form",{name:"addPermission",onSubmit:Pe=>{Pe.preventDefault(),_({userUid:oe,teamUid:L,builtInRole:ye,permission:Ee,target:ae})},children:(0,n.jsxs)(x.B,{gap:1,direction:"row",children:[(0,n.jsx)(m.l6,{"aria-label":(0,l.t)("access-control.add-permission.role-select-aria-label","Role to add new permission to"),value:ae,options:Ge,onChange:Pe=>le(Pe.value),disabled:Ge.length===0,width:"auto"}),ae===M.User&&(0,n.jsx)(T,{onSelected:Pe=>ue(Pe?.value?.uid||"")}),ae===M.ServiceAccount&&(0,n.jsx)(C,{onSelected:Pe=>ue(Pe?.value?.uid||"")}),ae===M.Team&&(0,n.jsx)(P,{onSelected:Pe=>ie(Pe.value?.uid||"")}),ae===M.BuiltInRole&&(0,n.jsx)(m.l6,{"aria-label":(0,l.t)("access-control.add-permission.built-in-aria-label","Built-in role picker"),options:Object.values(E.X).filter(Pe=>Pe!==E.X.None).map(Pe=>({value:Pe,label:Pe})),onChange:Pe=>fe(Pe.value||""),width:"auto"}),(0,n.jsx)(m.l6,{"aria-label":(0,l.t)("access-control.add-permission.level-aria-label","Permission level"),width:"auto",value:X.find(Pe=>Pe===Ee),options:X.map(Pe=>({label:Pe,value:Pe})),onChange:Pe=>Ae(Pe.value||"")}),(0,n.jsx)(u.$n,{type:"submit",disabled:!Fe(),children:(0,n.jsx)(l.x6,{i18nKey:"access-control.add-permissions.save",children:"Save"})})]})})]})};var B=e(45967),U=e(30703);const W=({item:Y,permissionLevels:X,canSet:J,onRemove:_,onChange:ee})=>{const ae=(0,i.of)(N);return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:V(Y)}),(0,n.jsx)("td",{children:R(Y)}),(0,n.jsx)("td",{children:Y.isInherited&&(0,n.jsx)("em",{className:ae.inherited,children:(0,n.jsx)(l.x6,{i18nKey:"access-control.permission-list-item.inherited",children:"Inherited from folder"})})}),(0,n.jsx)("td",{children:(0,n.jsx)(m.l6,{disabled:!J||!Y.isManaged,onChange:le=>ee(Y,le.value),value:X.find(le=>le===Y.permission),options:X.map(le=>({value:le,label:le}))})}),(0,n.jsx)("td",{children:Y.warning?(0,n.jsx)(B.m,{content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.a,{marginBottom:1,children:Y.warning}),O(Y)]}),children:(0,n.jsx)(U.I,{name:"exclamation-triangle",className:ae.warning})}):(0,n.jsx)(B.m,{content:O(Y),children:(0,n.jsx)(U.I,{name:"info-circle"})})}),(0,n.jsx)("td",{children:Y.isManaged?(0,n.jsx)(u.$n,{size:"sm",icon:"times",variant:"destructive",disabled:!J,onClick:()=>_(Y),"aria-label":(0,l.t)("access-control.permission-list-item.remove-aria-label","Remove permission for {{identifier}}",{identifier:z(Y)})}):(0,n.jsx)(B.m,{content:Y.isInherited?(0,l.t)("access-control.permission-list-item.tooltip-inherited-permission","Inherited permission"):(0,l.t)("access-control.permission-list-item.tooltip-provisioned-permission","Provisioned permission"),children:(0,n.jsx)(u.$n,{size:"sm",icon:"lock","aria-label":(0,l.t)("access-control.permission-list-item.locked-aria-label","Locked permission indicator")})})})]})},V=Y=>Y.teamId?(0,n.jsx)("img",{className:"filter-table__avatar",src:Y.teamAvatarUrl,alt:`Avatar for team ${Y.teamId}`}):Y.userId?(0,n.jsx)("img",{className:"filter-table__avatar",src:Y.userAvatarUrl,alt:`Avatar for user ${Y.userId}`}):(0,n.jsx)(U.I,{size:"xl",name:"shield"}),z=Y=>Y.userId?Y.userLogin:Y.teamId?Y.team:Y.builtInRole,R=Y=>Y.userId?(0,n.jsxs)("span",{children:[Y.userLogin," "]},"name"):Y.teamId?(0,n.jsxs)("span",{children:[Y.team," "]},"name"):Y.builtInRole?(0,n.jsxs)("span",{children:[Y.builtInRole," "]},"name"):(0,n.jsx)("span",{},"name"),O=Y=>`Actions: ${[...new Set(Y.actions)].sort().join(" ")}`,N=Y=>({warning:(0,a.css)({color:Y.colors.warning.main}),inherited:(0,a.css)({color:Y.colors.text.secondary,flexWrap:"nowrap"})}),F=({title:Y,items:X,compareKey:J,permissionLevels:_,canSet:ee,onRemove:ae,onChange:le})=>{const L=(0,d.useMemo)(()=>{const ie={};for(let oe of X){const ue=oe[J];if(!ie[ue]){ie[ue]=oe;continue}if(oe.actions.length>ie[ue].actions.length){ie[ue]=oe;continue}oe.actions.length===ie[ue].actions.length&&ie[ue].isManaged&&!oe.isManaged&&(ie[ue]=oe)}return Object.keys(ie).map(oe=>ie[oe])},[X,J]);return L.length===0?null:(0,n.jsx)("div",{children:(0,n.jsxs)("table",{className:"filter-table gf-form-group",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{width:"1%"}}),(0,n.jsx)("th",{children:Y}),(0,n.jsx)("th",{style:{width:"1%"}}),(0,n.jsx)("th",{style:{width:"40%"},children:(0,n.jsx)(l.x6,{i18nKey:"access-control.permission-list.permission",children:"Permission"})}),(0,n.jsx)("th",{style:{width:"1%"}}),(0,n.jsx)("th",{style:{width:"1%"}})]})}),(0,n.jsx)("tbody",{children:L.map((ie,oe)=>(0,n.jsx)(W,{item:ie,onRemove:ae,onChange:le,canSet:ee,permissionLevels:_},`${oe}-${ie.userId}`))})]})})},G="",H={permissions:[],assignments:{teams:!1,users:!1,serviceAccounts:!1,builtInRoles:!1}},K=({buttonLabel:Y=(0,l.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:X=(0,l.t)("access-control.permissions.no-permissions","There are no permissions"),resource:J,resourceId:_,canSetPermissions:ee,addPermissionTitle:ae,getWarnings:le,epilogue:L})=>{const ie=(0,i.of)(re),[oe,ue]=(0,d.useState)(!1),[ye,fe]=(0,d.useState)(H),[Ee,Ae]=(0,o.default)(async()=>{let Le=await Q(J,_);return le&&(Le=le(Le)),Le},[J,_,le]);(0,d.useEffect)(()=>{w(J).then(Le=>(fe(Le),Ae()))},[J,Ae]);const Ge=Le=>{let ze=null;Le.target===M.User||Le.target===M.ServiceAccount?ze=k(J,_,Le.userUid,Le.permission):Le.target===M.Team?ze=te(J,_,Le.teamUid,Le.permission):Le.target===M.BuiltInRole&&(ze=q(J,_,Le.builtInRole,Le.permission)),ze!==null&&ze.then(Ae)},Fe=Le=>{let ze=null;Le.userUid?ze=k(J,_,Le.userUid,G):Le.teamUid?ze=te(J,_,Le.teamUid,G):Le.builtInRole&&(ze=q(J,_,Le.builtInRole,G)),ze!==null&&ze.then(Ae)},Pe=(Le,ze)=>{console.log("onChange",Le,ze),Le.permission!==ze&&(Le.userUid||Le.isServiceAccount?Ge({permission:ze,userUid:Le.userUid,target:M.User}):Le.teamUid?Ge({permission:ze,teamUid:Le.teamUid,target:M.Team}):Le.builtInRole&&Ge({permission:ze,builtInRole:Le.builtInRole,target:M.BuiltInRole}))},Ve=(0,d.useMemo)(()=>(0,s.sortBy)((Ee.value||[]).filter(Le=>Le.teamId),["team","isManaged"]),[Ee.value]),me=(0,d.useMemo)(()=>(0,s.sortBy)((Ee.value||[]).filter(Le=>Le.userId&&!Le.isServiceAccount),["userLogin","isManaged"]),[Ee.value]),Se=(0,d.useMemo)(()=>(0,s.sortBy)((Ee.value||[]).filter(Le=>Le.userId&&Le.isServiceAccount),["userLogin","isManaged"]),[Ee.value]),Qe=(0,d.useMemo)(()=>(0,s.sortBy)((Ee.value||[]).filter(Le=>Le.builtInRole),["builtInRole","isManaged"]),[Ee.value]),Ue=(0,l.t)("access-control.permissions.role","Role"),Ie=(0,l.t)("access-control.permissions.user","User"),Re=(0,l.t)("access-control.permissions.serviceaccount","Service Account"),Ke=(0,l.t)("access-control.permissions.team","Team");return Ee.loading?(0,n.jsx)(c._,{text:(0,l.t)("access-control.permissions.loading","Loading permissions...")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[ee&&J==="folders"&&(0,n.jsxs)(p.a,{paddingBottom:2,children:[(0,n.jsx)(l.x6,{i18nKey:"access-control.permissions.permissions-change-warning",children:"This will change permissions for this folder and all its descendants. In total, this will affect:"}),(0,n.jsx)(g.x,{selectedItems:{folder:{[_]:!0},dashboard:{},panel:{},$all:!1}})]}),Ee.value?.length===0&&(0,n.jsx)(p.a,{children:(0,n.jsx)(h.E,{children:X})}),(0,n.jsx)(F,{title:Ue,items:Qe,compareKey:"builtInRole",permissionLevels:ye.permissions,onChange:Pe,onRemove:Fe,canSet:ee}),(0,n.jsx)(F,{title:Ie,items:me,compareKey:"userLogin",permissionLevels:ye.permissions,onChange:Pe,onRemove:Fe,canSet:ee}),(0,n.jsx)(F,{title:Re,items:Se,compareKey:"userLogin",permissionLevels:ye.permissions,onChange:Pe,onRemove:Fe,canSet:ee}),(0,n.jsx)(F,{title:Ke,items:Ve,compareKey:"team",permissionLevels:ye.permissions,onChange:Pe,onRemove:Fe,canSet:ee}),ee&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.$n,{className:ie.addPermissionButton,variant:"primary",onClick:()=>ue(!0),icon:"plus",children:Y},"add-permission"),(0,n.jsx)(r.a,{in:oe,children:(0,n.jsx)(I,{title:ae,onAdd:Ge,permissions:ye.permissions,assignments:ye.assignments,onCancel:()=>ue(!1)})})]})]}),L&&L(Ee.value||[])]})},w=async Y=>{try{return await(0,v.AI)().get(`/api/access-control/${Y}/description`)}catch(X){return console.error("failed to load resource description: ",X),H}},Q=(Y,X)=>(0,v.AI)().get(`/api/access-control/${Y}/${X}`),k=(Y,X,J,_)=>se(Y,X,"users",J,_),te=(Y,X,J,_)=>se(Y,X,"teams",J,_),q=(Y,X,J,_)=>se(Y,X,"builtInRoles",J,_),se=(Y,X,J,_,ee)=>(0,v.AI)().post(`/api/access-control/${Y}/${X}/${J}/${_}`,{permission:ee}),re=Y=>({breakdown:(0,a.css)({...Y.typography.bodySmall,color:Y.colors.text.secondary,marginBottom:Y.spacing(2)}),addPermissionButton:(0,a.css)({marginBottom:Y.spacing(2)})})},34621:(ne,j,e)=>{"use strict";e.d(j,{J:()=>p});var n=e(96540),a=e(32899),s=e(92745),d=e(75234),o=e(27044),l=e(44220),i=e(52763),c=e(4438);function p({folderUID:u,request:r,workflow:v,handlers:g,successMessage:E,repository:x,resourceType:m,selectedBranch:y}){const b=(0,i.wA)(),D=(0,n.useRef)(!1),{setLastBranch:f}=(0,c.Y)();(0,n.useEffect)(()=>{const P={repoType:x?.type||"git",resourceType:m,workflow:v};if(r.isLoading&&(D.current=!1),r.isError){D.current=!0,g.onError?.(r.error,P);return}if(r.isSuccess&&r.data&&!D.current){D.current=!0;const{ref:T,path:M,urls:I,resource:B}=r.data,U=B.upsert;v==="branch"&&T?f(x?.name,T):v==="write"&&f(x?.name,y||x?.branch);const W=E||h(P);if((0,d.J7)().publish({type:a.r1.alertSuccess.name,payload:[W]}),v==="branch"&&g.onBranchSuccess&&T&&M){const V={ref:T,path:M,urls:I};g.onBranchSuccess?.(V,P,U)}v==="write"&&g.onWriteSuccess&&(u&&b((0,l.bw)({parentUID:u||x?.name,pageSize:o.md})),g.onWriteSuccess(U)),g.onDismiss?.()}},[r,v,g,E,x,m,u,b,y,f])}function h(u){const{resourceType:r}=u;switch(r){case"dashboard":return(0,s.t)("provisioned-resource-request-handler-dashboard","Dashboard saved successfully");case"folder":return(0,s.t)("provisioned-resource-request-handler-folder","Folder created successfully");default:return(0,s.t)("provisioned-resource-request-handler","Resource saved successfully")}}},34624:(ne,j,e)=>{"use strict";e.d(j,{K:()=>a,P:()=>s});var n=e(92745);const a=()=>({isOpen:!0,level:0,item:{kind:"folder",title:(0,n.t)("browse-dashboards.folder-picker.root-title","Dashboards"),uid:""}}),s=({title:d,managedBy:o,uid:l})=>({isOpen:!0,level:0,item:{kind:"folder",title:d||"",uid:l||"",managedBy:o}})},34734:(ne,j,e)=>{"use strict";e.d(j,{B9:()=>o,OP:()=>n,PP:()=>u,RT:()=>c,SM:()=>v,Sd:()=>i,_N:()=>h,bS:()=>y,fP:()=>g,fo:()=>d,gs:()=>x,h2:()=>m,k1:()=>s,mk:()=>r,o6:()=>a,qb:()=>p,v9:()=>l,vk:()=>E});const n=1e4,a=1e3,s=30,d=25,o="grafana.datasources.prometheus.browser.labels",l=/^$|^\d+(ms|[Mwdhmsy])$/,i=/(\d+)(.+)/,c=/^(0|[1-9]\d*)(\.\d+)?(e\+?\d+)?$/,p="{}",h=4e4,u=1e3,r='{__name__!=""}',v="__name__",g="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",E="Value is not valid, you can use only numbers or leave it empty to use default limit or set 0 to have no limit.",x="-Instant",m=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels","suggestions"],y="none"},34753:(ne,j,e)=>{"use strict";e.d(j,{D:()=>r});var n=e(74848),a=e(22803),s=e(2543),d=e(63142),o=e(30703);const l=({diff:g})=>{const E=(0,d.of)(i),x=!(0,s.isUndefined)(g.originalValue)&&!(0,s.isArray)(g.originalValue)&&!(0,s.isObject)(g.originalValue),m=!(0,s.isUndefined)(g.value)&&!(0,s.isArray)(g.value)&&!(0,s.isObject)(g.value);return(0,n.jsxs)(n.Fragment,{children:[x&&(0,n.jsx)("span",{className:E,children:String(g.originalValue)}),x&&m?(0,n.jsx)(o.I,{name:"arrow-right"}):null,m&&(0,n.jsx)("span",{className:E,children:String(g.value)})]})},i=g=>(0,a.css)({backgroundColor:g.colors.action.hover,borderRadius:g.shape.radius.default,color:g.colors.text.primary,fontSize:g.typography.body.fontSize,margin:g.spacing(0,.5),padding:g.spacing(.25,.5)});var c=e(61371);const p={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0,endLineNumber:0},h=({diff:g,title:E})=>{const x=(0,d.of)(u);return g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.I,{type:"mono",name:"circle",className:x[g.op],size:"xs"})," ",(0,n.jsx)("span",{className:x.embolden,children:E})," ",(0,n.jsx)("span",{children:(0,c.Fl)(g,g.path?.length>1)})," ",(0,n.jsx)(l,{diff:g})]}):(0,n.jsxs)("div",{className:x.withoutDiff,children:[(0,n.jsx)(o.I,{type:"mono",name:"circle",className:x.replace,size:"xs"})," ",(0,n.jsx)("span",{className:x.embolden,children:E})," ",(0,n.jsx)("span",{children:(0,c.Fl)(p,!1)})]})},u=g=>({embolden:(0,a.css)({fontWeight:g.typography.fontWeightBold}),add:(0,a.css)({color:g.colors.success.main}),replace:(0,a.css)({color:g.colors.warning.main}),move:(0,a.css)({color:g.colors.warning.main}),copy:(0,a.css)({color:g.colors.success.main}),_get:(0,a.css)({color:g.colors.success.main}),test:(0,a.css)({color:g.colors.success.main}),remove:(0,a.css)({color:g.colors.error.main}),withoutDiff:(0,a.css)({marginBottom:g.spacing(1)})}),r=({diffs:g,title:E})=>{const x=(0,d.of)(v);return g.length===1?(0,n.jsx)("div",{className:x.container,"data-testid":"diffGroup",children:(0,n.jsx)(h,{title:E,diff:g[0]})}):(0,n.jsxs)("div",{className:x.container,"data-testid":"diffGroup",children:[(0,n.jsx)(h,{title:E}),(0,n.jsx)("ul",{className:x.list,children:g.map((m,y)=>(0,n.jsxs)("li",{className:x.listItem,children:[(0,n.jsx)("span",{children:(0,c.Fl)(m)})," ",(0,n.jsx)(l,{diff:m})]},`${(0,s.last)(m.path)}__${y}`))})]})},v=g=>({container:(0,a.css)({}),list:(0,a.css)({marginLeft:g.spacing(4)}),listItem:(0,a.css)({marginBottom:g.spacing(1),"&:last-child":{marginBottom:0}})})},34788:(ne,j,e)=>{"use strict";e.d(j,{E:()=>o});var n=e(74848),a=e(22803),s=e(96540),d=e(63142);const o=({info:c})=>{const p=(0,d.of)(i),h=l(c);return c?(0,n.jsx)("div",{className:p.description,children:h}):null},l=c=>(0,s.useMemo)(()=>{const p=[];if(!c)return"";if(c.name==="Europe/Simferopol")return"Ukraine, EEST";if(c.countries.length>0){const h=c.countries[0];p.push(h.name)}return c.abbreviation&&p.push(c.abbreviation),p.join(", ")},[c]),i=c=>({description:(0,a.css)({fontWeight:"normal",fontSize:c.typography.size.sm,color:c.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},34984:(ne,j,e)=>{"use strict";e.d(j,{O:()=>n,q:()=>a});const n=s=>s.timeZone,a=s=>s.fiscalYearStartMonth},34999:(ne,j,e)=>{"use strict";e.d(j,{F:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(92745),l=e(63142),i=e(45861),c=e(30703),p=e(31286),h=e(66404);const u=s.forwardRef(({title:g,onRemove:E,children:x,buttonContent:m,elevated:y,bottomSpacing:b,topSpacing:D,className:f,severity:C="error",...P},T)=>{const M=(0,l.$j)(),B=v(M,C,!!g,y,b,D),U={error:"alert",warning:"alert",info:"status",success:"status"},W=P.role||U[C],V=P["aria-label"]||g,z=(0,o.t)("grafana-ui.alert.close-button","Close alert");return(0,n.jsx)("div",{ref:T,className:(0,a.cx)(B.wrapper,f),role:W,"aria-label":V,...P,children:(0,n.jsxs)(p.a,{"data-testid":d.Tp.components.Alert.alertV2(C),display:"flex",backgroundColor:C,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:C,alignItems:"stretch",boxShadow:y?"z3":void 0,children:[(0,n.jsx)(p.a,{paddingTop:1,paddingRight:2,children:(0,n.jsx)("div",{className:B.icon,children:(0,n.jsx)(c.I,{size:"xl",name:r(C)})})}),(0,n.jsxs)(p.a,{paddingY:1,grow:1,children:[(0,n.jsx)(h.E,{color:"primary",weight:"medium",children:g}),x&&(0,n.jsx)("div",{className:B.content,children:x})]}),E&&!m&&(0,n.jsx)("div",{className:B.close,children:(0,n.jsx)(i.$n,{"aria-label":z,icon:"times",onClick:E,type:"button",fill:"text",variant:"secondary"})}),E&&m&&(0,n.jsx)(p.a,{marginLeft:1,display:"flex",alignItems:"center",children:(0,n.jsx)(i.$n,{"aria-label":z,variant:"secondary",onClick:E,type:"button",children:m})})]})})});u.displayName="Alert";const r=g=>{switch(g){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},v=(g,E,x,m,y,b)=>{const D=g.colors[E];return{wrapper:(0,a.css)({flexGrow:1,marginBottom:g.spacing(y??2),marginTop:g.spacing(b??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:g.colors.background.primary,zIndex:-1}}),icon:(0,a.css)({color:D.text,position:"relative",top:"-1px"}),content:(0,a.css)({color:g.colors.text.primary,paddingTop:x?g.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,a.css)({position:"relative",color:g.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},35137:(ne,j,e)=>{"use strict";e.d(j,{$:()=>s});var n=e(74848),a=e(31286);const s=({v:d=0,h:o=0,layout:l})=>(0,n.jsx)(a.a,{paddingRight:o,paddingBottom:d,display:l==="inline"?"inline-block":"block"})},35143:(ne,j,e)=>{"use strict";e.d(j,{z:()=>n});const n=new Set(["__expr__","aggregations-io-datasource","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","arabian9ts-mux-datasource","axiomhq-axiom-datasource","cloudwatch","cnos-cnosdb-datasource","criblcloud-search-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","factry-historian-datasource","fiskaly-surrealdb-datasource","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-adobeanalytics-datasource","grafana-amazonprometheus-datasource","grafana-athena-datasource","grafana-aurora-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-azurecosmosdb-datasource","grafana-bigquery-datasource","grafana-catchpoint-datasource","grafana-clickhouse-datasource","grafana-cloudflare-datasource","grafana-cockroachdb-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-dynamodb-datasource","grafana-dynatrace-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-pagerduty-datasource","grafana-postgresql-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-sumologic-datasource","grafana-surrealdb-datasource","grafana-testdata-datasource","grafana-timestream-datasource","grafana-vercel-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","grafana-yugabyte-datasource","grafana-zendesk-datasource","graphite","gridprotectionalliance-osisoftpi-datasource","hadesarchitect-cassandra-datasource","ibm-aql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","manassehzhou-maxcompute-datasource","maormil-rabbitmq-datasource","marcusolsson-csv-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","oci-metrics-datasource","opentsdb","parseable-parseable-datasource","prometheus","questdb-questdb-datasource","quickwit-quickwit-datasource","redis-datasource","retrodaredevil-wildgraphql-datasource","stackdriver","tdengine-datasource","trino-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","victoriametrics-logs-datasource","victoriametrics-metrics-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"])},35195:(ne,j,e)=>{"use strict";e.d(j,{t:()=>l});var n=e(74848),a=e(51898),s=e(92745),d=e(34999);const o=a.Tp.pages.ShareDashboardModal.PublicDashboard,l=({mode:i})=>{const c=(0,s.t)("public-dashboard.share-externally.no-upsert-perm-alert-title","You don\u2019t have permission to {{ action }} a shared dashboard",{action:i});return(0,n.jsx)(d.F,{severity:"warning",title:c,"data-testid":o.NoUpsertPermissionsWarningAlert,bottomSpacing:0,children:(0,n.jsxs)(s.x6,{i18nKey:"public-dashboard.share-externally.no-upsert-perm-alert-desc",children:["Contact your admin to get permission to ",{action:i}," shared dashboards"]})})}},35222:(ne,j,e)=>{"use strict";e.d(j,{A:()=>l});var n=e(74848),a=e(22803),s=e(70255),d=e(63527),o=e(63142);function l(){const c=(0,o.of)(i);return(0,n.jsx)("div",{className:c.wrapper,children:(0,n.jsx)("div",{className:c.inputWrapper,children:(0,n.jsx)("button",{type:"button",className:c.fakeInput,"aria-disabled":!0,children:(0,n.jsx)(s.A,{width:100})})})})}const i=c=>{const p=(0,d.n)({theme:c});return{wrapper:p.wrapper,inputWrapper:p.inputWrapper,fakeInput:(0,a.css)([p.input,{textAlign:"left"}])}}},35231:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>O,D:()=>m,J8:()=>P,JA:()=>C,Ju:()=>b,U2:()=>E,Ve:()=>M,am:()=>U,bZ:()=>y,fj:()=>x,nD:()=>D,ow:()=>W,qz:()=>g,tP:()=>f,ve:()=>I});var n=e(65307),a=e(2543),s=e.n(a),d=e(19379),o=e(92138),l=e(36490),i=e(62635),c=e(59373),p=e(52763),h=e(80144),u=e(2513),r=e(51845),v=e(83953);const g=(0,n.VP)("explore/syncTimes"),E=(0,n.VP)("explore/richHistoryUpdated"),x=(0,n.VP)("explore/richHistoryStorageFullAction"),m=(0,n.VP)("explore/richHistoryLimitExceededAction"),y=(0,n.VP)("explore/richHistorySettingsUpdated"),b=(0,n.VP)("explore/richHistorySearchFiltersUpdatedAction"),D=(0,n.VP)("explore/splitSizeUpdateAction"),f=(0,n.VP)("explore/maximizePaneAction"),C=(0,n.VP)("explore/evenPaneResizeAction"),P=(0,n.VP)("explore/splitClose"),T=(0,n.VP)("explore/setPaneState"),M=(0,n.VP)("explore/clearPanes"),I=(0,p.zD)("explore/splitOpen",async(N,{getState:F,dispatch:G})=>{const H=Object.values(F().explore.panes)[0],K=N?.queries??H?.queries??[];Object.keys(F().explore.panes).forEach((k,te)=>{te>=1&&G(P(k))});const w=N?.range||H?.range.raw||u.kn;let Q=(0,i.o$)();for(;F().explore.panes[Q];)Q=(0,i.o$)();await G(B({exploreId:Q,datasource:N?.datasourceUid||H?.datasourceInstance?.getRef(),queries:(0,h.v)(K),range:w,panelsState:N?.panelsState||H?.panelsState,correlationHelperData:N?.correlationHelperData,eventBridge:new d.o,compact:!!N?.compact})),H?.range&&await G(g({syncedTimes:(0,a.isEqual)(H.range.raw,w)}))}),B=(0,p.zD)("explore/createNewSplitOpen",async(N,{dispatch:F})=>{await F((0,r.Gd)(N))}),U=(0,n.VP)("explore/changeCorrelationEditorDetails"),W=(N,F)=>async G=>{const{timeRange:H,getExploreUrl:K,openInNewWindow:w}=F,Q=await K({queries:N.targets,dsRef:N.datasource,scopedVars:N.scopedVars,timeRange:H,adhocFilters:(0,c.w)().getAdhocFilters(N.datasource?.uid??"",!0)});if(w&&Q){w(Q);return}l.Ny.push(o.I.stripBaseFromUrl(Q))},V=()=>(0,v.HZ)(),z={syncedTimes:!1,panes:{},correlationEditorDetails:{editorMode:!1,correlationDirty:!1,queryEditorDirty:!1,isExiting:!1},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,richHistory:[]},O={explore:(N=z,F)=>{if(P.match(F)){const{[F.payload]:H,...K}={...N.panes};return{...N,panes:K,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(D.match(F)){const{largerExploreId:H}=F.payload;return{...N,largerExploreId:H,maxedExploreId:void 0,evenSplitPanes:H===void 0}}if(f.match(F)){const{exploreId:H}=F.payload;return{...N,largerExploreId:H,maxedExploreId:H,evenSplitPanes:!1}}if(C.match(F))return{...N,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(g.match(F))return{...N,syncedTimes:F.payload.syncedTimes};if(x.match(F))return{...N,richHistoryStorageFull:!0};if(m.match(F))return{...N,richHistoryLimitExceededWarningShown:!0};if(y.match(F)){const H=F.payload;return{...N,richHistorySettings:H}}if(E.match(F)){const{richHistory:H,total:K}=F.payload.richHistoryResults;return{...N,richHistory:H,richHistoryTotal:K}}if(b.match(F)){const H=F.payload.filters;return{...N,richHistorySearchFilters:H}}if(B.pending.match(F))return{...N,panes:{...N.panes,[F.meta.arg.exploreId]:V()}};if(r.Gd?.pending.match(F)){const H=Object.entries(N.panes),K=H.slice(0,F.meta.arg.position),w=H.slice(K.length),Q=[...K,[F.meta.arg.exploreId,V()],...w].reduce((k,[te,q])=>({...k,[te]:q}),{});return{...N,panes:Q}}if(M.match(F))return{...N,panes:{}};if(U.match(F)){const{editorMode:H,label:K,description:w,canSave:Q,correlationDirty:k,queryEditorDirty:te,isExiting:q,postConfirmAction:se,transformations:re}=F.payload;return{...N,correlationEditorDetails:{editorMode:!!(H??N.correlationEditorDetails?.editorMode),canSave:!!(Q??N.correlationEditorDetails?.canSave),label:K??N.correlationEditorDetails?.label,description:w??N.correlationEditorDetails?.description,transformations:re??N.correlationEditorDetails?.transformations,correlationDirty:!!(k??N.correlationEditorDetails?.correlationDirty),queryEditorDirty:!!(te??N.correlationEditorDetails?.queryEditorDirty),isExiting:!!(q??N.correlationEditorDetails?.isExiting),postConfirmAction:se}}}const G=F.payload?.exploreId;return typeof G=="string"?{...N,panes:Object.entries(N.panes).reduce((H,[K,w])=>({...H,[K]:K===G?(0,r.LJ)(w,F):w}),{})}:N}}},35307:(ne,j,e)=>{"use strict";e.d(j,{m:()=>g});var n=e(74848),a=e(96540),s=e(60519),d=e(60188),o=e(69168),l=e(20877),i=e(92745),c=e(2863),p=e(36303),h=e(63142),u=e(73427),r=e(92391);const v={defaults:{},overrides:[]};function g(x){const{pluginId:m,data:y,timeZone:b=(0,d.O)(),options:D={},width:f,height:C,title:P,onOptionsChange:T=()=>{},onChangeTimeRange:M=()=>{},onFieldConfigChange:I=()=>{},fieldConfig:B=v}=x,U=(0,h.$j)(),W=(0,c.w)(),V=(0,a.useMemo)(()=>W.replace.bind(W),[W]),[z,R]=(0,a.useState)((0,r.PY)(m)),[O,N]=(0,a.useState)(),F=E(z,D,B),G=(0,s.rJ)(z,F?.fieldConfig,y,b,U,V);if((0,a.useEffect)(()=>{z&&z.hasPluginId(m)||(0,r.TV)(m).then(K=>R(K)).catch(K=>{N(K.message)})},[m,z]),O)return(0,n.jsx)("div",{children:(0,n.jsxs)(i.x6,{i18nKey:"panel.panel-renderer.failed-to-load-plugin",children:["Failed to load plugin: ",{error:O}]})});if(!z||!z.hasPluginId(m))return(0,n.jsx)("div",{children:(0,n.jsx)(i.x6,{i18nKey:"panel.panel-renderer.loading-plugin-panel",children:"Loading plugin panel..."})});if(!z.panel)return(0,n.jsx)("div",{children:(0,n.jsx)(i.x6,{i18nKey:"panel.panel-renderer.no-panel-component",children:"Seems like the plugin you are trying to load does not have a panel component."})});if(!G)return(0,n.jsx)("div",{children:(0,n.jsx)(i.x6,{i18nKey:"panel.panel-renderer.no-panel-data",children:"No panel data"})});const H=z.panel;return(0,n.jsx)(p.Xw,{boundaryName:"panel-renderer",dependencies:[z,y],children:(0,n.jsx)(l.a,{meta:z.meta,children:(0,n.jsx)(H,{id:1,data:G,title:P,timeRange:G.timeRange,timeZone:b,options:F.options,fieldConfig:B,transparent:!1,width:f,height:C,renderCounter:0,replaceVariables:K=>K,onOptionsChange:T,onFieldConfigChange:I,onChangeTimeRange:M,eventBus:u.lE})})})}function E(x,m,y){return(0,a.useMemo)(()=>{if(x)return(0,o.F)({plugin:x,currentOptions:m,currentFieldConfig:y,isAfterPluginChange:!1})},[x,y,m])}},35427:(ne,j,e)=>{"use strict";e.d(j,{Dp:()=>g,sk:()=>v});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(65240),l=e(14226),i=e(2381),c=e(43533),p=e(89772),h=e(13409),u=e(57339);const r=(x,m="ColorPicker")=>class extends s.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,s.createRef)()}static{this.displayName=m}render(){const{theme:b,children:D,onChange:f,color:C,id:P}=this.props,T=E(b),M=s.createElement(x,{...this.props,children:null,onChange:f});return(0,n.jsx)(c.I,{content:M,hideAfter:300,children:(I,B,U)=>(0,n.jsxs)(n.Fragment,{children:[this.pickerTriggerRef.current&&(0,n.jsx)(i.A,{...U,referenceElement:this.pickerTriggerRef.current,wrapperClassName:T.colorPicker,onMouseLeave:B,onMouseEnter:I,onKeyDown:W=>(0,l.Q)(W,B)}),D?D({ref:this.pickerTriggerRef,showColorPicker:I,hideColorPicker:B}):(0,n.jsx)(h.q,{id:P,ref:this.pickerTriggerRef,onClick:I,onMouseLeave:B,color:b.visualization.getColorByName(C||"#000000"),"aria-label":C})]})})}},v=(0,d.cV)(r(p.$,"ColorPicker")),g=(0,d.cV)(r(u.o,"SeriesColorPicker")),E=(0,o.N)(x=>({colorPicker:(0,a.css)({position:"absolute",zIndex:x.zIndex.tooltip,color:x.colors.text.primary,maxWidth:"400px",fontSize:x.typography.size.sm,maxHeight:"100vh",overflow:"auto"})}))},35458:(ne,j,e)=>{"use strict";e.d(j,{dF:()=>s,mO:()=>d,yx:()=>a});var n=e(82611);const a={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},s=(o,l)=>{const i=o.split(`
`).map(p=>n.Block.create({type:"code_line",nodes:[n.Text.create(p)]})),c=n.Block.create({data:{syntax:l},type:"code_block",nodes:i});return n.Document.create({nodes:[c]})},d=(o,l)=>{const i=s(o,l);return n.Value.create({document:i})}},35479:(ne,j,e)=>{"use strict";e.d(j,{x:()=>s});var n=e(94777),a=e(18700);class s extends a.k{constructor(o){super(void 0,l=>new n.$({...o,buffer:l}))}}},35526:(ne,j,e)=>{"use strict";e.d(j,{e:()=>u});var n=e(74848),a=e(22803),s=e(92745),d=e(34999),o=e(63142),l=e(84266),i=e(91984),c=e(16692),p=e(15633),h=e(52161);function u({currentAlertmanager:E}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{currentAlertmanager:E}),(0,n.jsx)(v,{currentAlertmanager:E})]})}function r({currentAlertmanager:E}){const x=(0,o.of)(g),m=E!==h.hY,[y,b]=(0,c.Ej)(c.RY.ReadConfigurationStatus),D=y&&b,{currentData:f}=i.m.endpoints.getGrafanaAlertingConfigurationStatus.useQuery(void 0,{skip:m||!D});if(!(f?.alertmanagersChoice&&[l.nA.External,l.nA.All].includes(f?.alertmanagersChoice))||m)return null;const P=f.numExternalAlertmanagers>0;return f.alertmanagersChoice===l.nA.External?(0,n.jsxs)(d.F,{title:(0,s.t)("alerting.grafana-alertmanager-delivery-warning.title-grafana-alerts-delivered-alertmanager","Grafana alerts are not delivered to Grafana Alertmanager"),children:[(0,n.jsx)(s.x6,{i18nKey:"alerting.grafana-alertmanager-delivery-warning.configuration-changes-external",children:"Grafana is configured to send alerts to external Alertmanagers only. Changing Grafana Alertmanager configuration will not affect delivery of your alerts."}),(0,n.jsx)("div",{className:x.adminHint,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.grafana-alertmanager-delivery-warning.admin-hint-external",children:"To change your Alertmanager setup, go to the Alerting Admin page. If you do not have access, contact your Administrator."})})]}):f.alertmanagersChoice===l.nA.All&&P?(0,n.jsxs)(d.F,{title:(0,s.t)("alerting.grafana-alertmanager-delivery-warning.title-you-have-additional-alertmanagers-to-configure","You have additional Alertmanagers to configure"),severity:"warning",children:[(0,n.jsx)(s.x6,{i18nKey:"alerting.grafana-alertmanager-delivery-warning.configuration-changes-all",children:"Ensure you make configuration changes in the correct Alertmanagers; both internal and external. Changing one will not affect the others."}),(0,n.jsx)("div",{className:x.adminHint,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.grafana-alertmanager-delivery-warning.admin-hint-all",children:"To change your Alertmanager setup, go to the Alerting Admin page. If you do not have access, contact your Administrator."})})]}):null}function v({currentAlertmanager:E}){return E&&(0,p.b)(E)?(0,n.jsx)(d.F,{title:(0,s.t)("alerting.alert-manager-picker.extra-config-warning.title","Imported configuration"),children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alert-manager-picker.extra-config-warning.content",children:"This shows the merged configuration of Grafana alertmanager with imported configurations. This merged view is read-only in the UI."})}):null}const g=E=>({adminHint:(0,a.css)({fontSize:E.typography.bodySmall.fontSize,fontWeight:E.typography.bodySmall.fontWeight})})},35621:(ne,j,e)=>{"use strict";e.d(j,{o:()=>a});var n=e(22803);const a=s=>({modal:(0,n.css)({position:"fixed",zIndex:s.zIndex.modal,background:s.colors.background.primary,boxShadow:s.shadows.z3,borderRadius:s.shape.radius.lg,border:`1px solid ${s.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column","@media (max-height: 750px)":{maxHeight:"100%",top:"50%",transform:"translateY(-50%)"}}),modalBackdrop:(0,n.css)({position:"fixed",zIndex:s.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:s.components.overlay.background}),modalHeader:(0,n.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:s.spacing(1,2,0,2),[s.breakpoints.down("sm")]:{margin:s.spacing(0,1,0,1)}}),modalHeaderWithTabs:(0,n.css)({borderBottom:`1px solid ${s.colors.border.weak}`}),modalHeaderTitle:(0,n.css)({fontSize:s.typography.size.lg,margin:s.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,n.css)({marginRight:s.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,n.css)({height:"100%",display:"flex",alignItems:"center",color:s.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,n.css)({overflow:"auto",padding:s.spacing(3,3,0,3),marginBottom:s.spacing(3),scrollbarWidth:"thin",width:"100%",[s.breakpoints.down("sm")]:{padding:s.spacing(1,2,0,2),marginBottom:s.spacing(2)}}),modalButtonRow:(0,n.css)({background:s.colors.background.primary,position:"sticky",bottom:0,paddingTop:s.spacing(2),paddingBottom:s.spacing(.5),zIndex:1})})},35718:(ne,j,e)=>{"use strict";e.d(j,{C:()=>p});var n=e(57852),a=e(1906),s=e(43173),d=e(78282),o=e(44248),l=e(78767),i=e(1682),c=e(92119);function p(g,E){const x=(0,c.YQ)(g);E.app=x.state.editPanel?a.Jk.PanelEditor:a.Jk.Dashboard,x.subscribeToState(m=>{m.editPanel?E.app=a.Jk.PanelEditor:E.app=a.Jk.Dashboard}),E.canAddAnnotations=()=>{const m=(0,c.YQ)(g);return!h(m)||!s.$.featureToggles.annotationPermissionUpdate&&!m.canEditDashboard()?!1:!!m.state.meta.annotationsPermissions?.dashboard.canAdd},E.canEditAnnotations=m=>{const y=(0,c.YQ)(g);return!s.$.featureToggles.annotationPermissionUpdate&&!y.canEditDashboard()?!1:m?!!y.state.meta.annotationsPermissions?.dashboard.canEdit:!!y.state.meta.annotationsPermissions?.organization.canEdit},E.canDeleteAnnotations=m=>{const y=(0,c.YQ)(g);return!s.$.featureToggles.annotationPermissionUpdate&&!y.canEditDashboard()?!1:m?!!y.state.meta.annotationsPermissions?.dashboard.canDelete:!!y.state.meta.annotationsPermissions?.organization.canDelete},E.onAnnotationCreate=async m=>{const y=(0,c.YQ)(g),b=m.from!==m.to,D={dashboardUID:y.state.uid,panelId:(0,c.Cs)(g),isRegion:b,time:m.from,timeEnd:b?m.to:0,tags:m.tags,text:m.description};await(0,l.l)().save(D),u(y),E.eventBus.publish(new n.We(D))},E.onAnnotationUpdate=async m=>{const y=(0,c.YQ)(g),b=m.from!==m.to,D={id:m.id,dashboardUID:y.state.uid,panelId:(0,c.Cs)(g),isRegion:b,time:m.from,timeEnd:b?m.to:0,tags:m.tags,text:m.description};await(0,l.l)().update(D),u(y),E.eventBus.publish(new n.We(D))},E.onAnnotationDelete=async m=>{await(0,l.l)().delete({id:m}),u((0,c.YQ)(g)),E.eventBus.publish(new n.We({id:m}))},E.onAddAdHocFilter=m=>{const y=(0,c.YQ)(g),b=(0,c.un)(g);if(!b)return;const D=r(y,b.state.datasource);v(D,m)},E.canExecuteActions=()=>(0,c.YQ)(g).canEditDashboard(),E.onUpdateData=m=>Promise.resolve(!0)}function h(g){const E=i.b4.getDataLayers(g);for(const x of E.state.annotationLayers)if(x instanceof o.tV.g&&x.state.isEnabled&&x.state.query.builtIn)return x}function u(g){const E=h(g);E&&E.runLayer()}function r(g,E){const x=o.jh.getVariables(g);for(const y of x.state.variables)if(o.Go.isAdHocVariable(y)){const b=y.state.datasource;if(b===E||b?.uid===E?.uid)return y}const m=new o.H9({name:"Filters",datasource:E,supportsMultiValueOperators:!!(0,d.l)().getInstanceSettings(E)?.meta.multiValueFilterOperators,useQueriesAsFilterForOptions:!0,layout:s.$.featureToggles.newFiltersUI?"combobox":void 0});return x.setState({variables:[...x.state.variables,m]}),m}function v(g,E){const x=g.state.filters.findIndex(m=>m.key===E.key&&m.value===E.value&&m.operator!==E.operator);if(x>=0){const m=g.state.filters.slice();m.splice(x,1,E),g.updateFilters(m);return}g.updateFilters([...g.state.filters,E])}},35748:(ne,j,e)=>{"use strict";e.d(j,{Uz:()=>l,n6:()=>i});var n=e(92745);const a=["by","group_left","group_right","ignoring","on","offset","without"],s=null,d=()=>[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-acos","calculates the arccosine of all elements in {{argument}}",{argument:"v"})},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-acosh","calculates the inverse hyperbolic cosine of all elements in {{argument}}",{argument:"v"})},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-asin","calculates the arcsine of all elements in {{argument}}",{argument:"v"})},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-asinh","calculates the inverse hyperbolic sine of all elements in {{argument}}",{argument:"v"})},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-atan","calculates the arctangent of all elements in {{argument}}",{argument:"v"})},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-atanh","calculates the inverse hyperbolic tangent of all elements in {{argument}}",{argument:"v"})},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-cos","calculates the cosine of all elements in {{argument}}",{argument:"v"})},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-cosh","calculates the hyperbolic cosine of all elements in {{argument}}",{argument:"v"})},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-sin","calculates the sine of all elements in {{argument}}",{argument:"v"})},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-sinh","calculates the hyperbolic sine of all elements in {{argument}}",{argument:"v"})},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-tan","calculates the tangent of all elements in {{argument}}",{argument:"v"})},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-tanh","calculates the hyperbolic tangent of all elements in {{argument}}",{argument:"v"})}],o=()=>[{label:"sum",insertText:"sum",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-sum","Calculate sum over dimensions")},{label:"min",insertText:"min",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-min","Select minimum over dimensions")},{label:"max",insertText:"max",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-max","Select maximum over dimensions")},{label:"avg",insertText:"avg",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-avg","Calculate the average over dimensions")},{label:"group",insertText:"group",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-group","All values in the resulting vector are 1")},{label:"stddev",insertText:"stddev",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-stddev","Calculate population standard deviation over dimensions")},{label:"stdvar",insertText:"stdvar",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-stdvar","Calculate population standard variance over dimensions")},{label:"count",insertText:"count",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-count","Count number of elements in the vector")},{label:"count_values",insertText:"count_values",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-count-values","Count number of elements with the same value")},{label:"bottomk",insertText:"bottomk",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-bottomk","Smallest k elements by sample value")},{label:"topk",insertText:"topk",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-topk","Largest k elements by sample value")},{label:"quantile",insertText:"quantile",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-quantile","Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions")}],l=()=>[...o(),...d(),{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-abs","Returns the input vector with all sample values converted to their absolute value.")},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-absent","Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination.")},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-absent-over-time","Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements.")},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-ceil","Rounds the sample values of all elements in `v` up to the nearest integer.")},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-changes","For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector.")},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-clamp","Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`.")},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-clamp-max","Clamps the sample values of all elements in `v` to have an upper limit of `max`.")},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-clamp-min","Clamps the sample values of all elements in `v` to have a lower limit of `min`.")},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-count-scalar","Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause.")},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-deg","Converts radians to degrees for all elements in v")},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-day-of-month","Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31.")},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-day-of-week","Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc.")},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-day-of-year","Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years.")},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-days-in-month","Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31.")},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-delta","Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers.")},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-deriv","Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression.")},{insertText:"double_exponential_smoothing",label:"double_exponential_smoothing",detail:"double_exponential_smoothing(v range-vector, sf scalar, tf scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-double-exponential-smoothing","Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1.")},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-drop-common-labels","Drops all labels that have the same name and value across all series in the input vector.")},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-exp","Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`")},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-floor","Rounds the sample values of all elements in `v` down to the nearest integer.")},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-quantile","Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels.")},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-holt-winters","Renamed as double_exponential_smoothing in prometheus v3.x. For prometheus versions equal and greater than v3.0 please use double_exponential_smoothing. \n\nProduces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1.")},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-hour","Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23.")},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-idelta","Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels.")},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-increase","Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments.")},{insertText:"info",label:"info",detail:"info(v instant-vector, [data-label-selector instant-vector])",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-info","Returns latest details and metadata about a group of metrics, such as their labels and current values, without doing any calculations")},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-irate","Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for.")},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-label-join","For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function.")},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-label-replace","For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged.")},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-ln","Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`")},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-log2","Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`.")},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-log10","Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`.")},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-minute","Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59.")},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-month","Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc.")},{insertText:"pi",label:"pi",detail:"pi()",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-pi","Returns pi")},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-predict-linear","Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression.")},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-rad","Converts degrees to radians for all elements in v")},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-rate","Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period.")},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-resets","For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset.")},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-round","Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction.")},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-scalar","Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`.")},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sgn","Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero.")},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sort","Returns vector elements sorted by their sample values, in ascending order.")},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sort-desc","Returns vector elements sorted by their sample values, in descending order.")},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sqrt","Calculates the square root of all elements in `v`.")},{insertText:"time",label:"time",detail:"time()",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-time","Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated.")},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-timestamp","Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC.")},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-vector","Returns the scalar `s` as a vector with no labels.")},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-year","Returns the year for each of the given times in UTC.")},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-avg-over-time","The average value of all points in the specified interval.")},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-min-over-time","The minimum value of all points in the specified interval.")},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-max-over-time","The maximum value of all points in the specified interval.")},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sum-over-time","The sum of all values in the specified interval.")},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-count-over-time","The count of all values in the specified interval.")},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-quantile-over-time","The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval.")},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-stddev-over-time","The population standard deviation of the values in the specified interval.")},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-stdvar-over-time","The population standard variance of the values in the specified interval.")},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-last-over-time","The most recent point value in specified interval.")},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-present-over-time","The value 1 for any series in the specified interval.")},{insertText:"histogram_avg",label:"histogram_avg",detail:"histogram_avg(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-avg","Returns the arithmetic average of observed values stored in a native histogram. Samples that are not native histograms are ignored and do not show up in the returned vector.")},{insertText:"histogram_count",label:"histogram_count",detail:"histogram_count(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-count","Returns the count of observations stored in a native histogram.")},{insertText:"histogram_sum",label:"histogram_sum",detail:"histogram_sum(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-sum","Returns the sum of observations stored in a native histogram.")},{insertText:"histogram_fraction",label:"histogram_fraction",detail:"histogram_fraction(lower scalar, upper scalar, v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-fraction","Returns the estimated fraction of observations between the provided lower and upper values.")},{insertText:"histogram_stddev",label:"histogram_stddev",detail:"histogram_stddev(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-stddev","Returns the estimated standard deviation of observations in a native histogram, based on the geometric mean of the buckets where the observations lie.")},{insertText:"histogram_stdvar",label:"histogram_stdvar",detail:"histogram_stdvar(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-stdvar","Returns the estimated standard variance of observations in a native histogram.")}],i={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${l().map(c=>c.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${a.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},35814:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>n});function n(a){return new Proxy(a,{apply(s,d,o){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(s,o,d.constructor)}})}},35886:(ne,j,e)=>{"use strict";e.d(j,{N1:()=>o,W1:()=>s});var n=e(99090);const a=l=>l?!!(l.query||l.tag?.length>0||l.starred||l.sort):!1,s=()=>{const l=n.G3+".";for(let i=0;i<window.localStorage.length;i++){const c=window.localStorage.key(i);c?.startsWith(l)&&window.localStorage.removeItem(c)}},d=(l="General")=>`${SECTION_STORAGE_KEY}.${l.toLowerCase()}`,o=l=>{const i=Object.entries(l).reduce((c,[p,h])=>{if(h){if(p==="tag"&&!Array.isArray(h))return{...c,tag:[h]}}else return c;return{...c,[p]:h}},{});if(l.folder){const c=`folder:${l.folder}`;return{...i,query:`${c} ${(i.query??"").replace(c,"")}`}}return{...i}}},35987:(ne,j,e)=>{"use strict";e.d(j,{An:()=>l,Zz:()=>d,bh:()=>i});var n=e(36394),a=e(8934),s=e(18600);function d(p,h){for(const u of p)switch(u.type){case s.d.ValueToText:if(h==null)continue;const r=u.options[h];if(r)return r;break;case s.d.RangeToText:if(h==null)continue;const v=parseFloat(h);if(isNaN(v))continue;const g=u.options.from??-1/0;if(!isNaN(g)&&v<g)continue;const x=u.options.to??1/0;if(!isNaN(x)&&v>x)continue;return u.options.result;case s.d.RegexToText:if(h==null||typeof h!="string")continue;const y=(0,a.dO)(u.options.pattern);if(h.match(y)){const b={...u.options.result};return b.text!=null&&(b.text=h.replace(y,u.options.result.text||"")),b}case s.d.SpecialValue:switch(u.options.match){case s.W.Null:{if(h==null)return u.options.result;break}case s.W.NaN:{if(typeof h=="number"&&isNaN(h))return u.options.result;break}case s.W.NullAndNaN:{if(typeof h=="number"&&isNaN(h)||h==null)return u.options.result;break}case s.W.True:{if(h===!0||h==="true")return u.options.result;break}case s.W.False:{if(h===!1||h==="false")return u.options.result;break}case s.W.Empty:{if(h==="")return u.options.result;break}}}return null}function o(p){return(typeof p=="number"||typeof p=="string"&&p.trim()!=="")&&!isNaN(p)}var l=(p=>(p[p.ValueToText=1]="ValueToText",p[p.RangeToText=2]="RangeToText",p))(l||{});function i(p,h){const u=[];let r=p.mappingType;if(p.mappingType||(p.valueMaps&&p.valueMaps.length?r=1:p.rangeMaps&&p.rangeMaps.length&&(r=2)),r===1)for(let v=0;v<p.valueMaps.length;v++){const g=p.valueMaps[v];u.push(c({...g,id:v,type:s.d.ValueToText},p.fieldConfig?.defaults?.thresholds||h))}else if(r===2)for(let v=0;v<p.rangeMaps.length;v++){const g=p.rangeMaps[v];u.push(c({...g,id:v,type:s.d.RangeToText},p.fieldConfig?.defaults?.thresholds||h))}return u}function c(p,h){const u={type:s.d.ValueToText,options:{}},r=[];let v;const g=parseFloat(p.text);if(h&&!isNaN(g)){const E=(0,n.yQ)(g,h.steps);E&&E.color&&(v=E.color)}switch(p.type){case 1:case s.d.ValueToText:p.value!=null&&(p.value==="null"?r.push({type:s.d.SpecialValue,options:{match:s.W.Null,result:{text:p.text,color:v}}}):u.options[String(p.value)]={text:p.text,color:v});break;case 2:case s.d.RangeToText:p.from==="null"||p.to==="null"?r.push({type:s.d.SpecialValue,options:{match:s.W.Null,result:{text:p.text,color:v}}}):r.push({type:s.d.RangeToText,options:{from:+p.from,to:+p.to,result:{text:p.text,color:v}}});break}return Object.keys(u.options).length>0&&r.unshift(u),r[0]}},36100:(ne,j,e)=>{"use strict";e.d(j,{Zi:()=>a,mc:()=>n});const n="=",a="!="},36192:(ne,j,e)=>{"use strict";e.d(j,{NN:()=>c,Tz:()=>h,UO:()=>x,bq:()=>r,ro:()=>u,sw:()=>v,uY:()=>y});var n=e(11576),a=e(46644),s=e(739),d=e(20720),o=e(60379),l=e(70332);const i=(b,D,f)=>{let C=D%2?f[0]||f[2]:f[1]||f[3];return f[D]||!C?0:8},c={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[i,i,i,i],series:[],hooks:{}};var p=(b=>(b[b.Pos=1]="Pos",b[b.Neg=-1]="Neg",b))(p||{});function h(b){let D=[],{series:f,dir:C}=b,P=f.length-1,T=f.slice().reverse();return T.forEach((M,I)=>{if(I!==P){let B=T[I+1];D.push({series:[M,B],dir:-1*C})}}),D}function u(b){let D=new Map;return b.fields.forEach(({config:f,values:C,type:P},T)=>{if(T===0)return;let{custom:M}=f;if(M==null||M.hideFrom?.viz)return;let{stacking:I}=M;if(I==null)return;let{mode:B,group:U}=I;if(B===s.gs.None)return;let W=M.transform,V=g(W,C),z=M.drawStyle,R=z===s.GR.Bars?M.barAlignment:z===s.GR.Line?M.lineInterpolation:null,O=`${V}|${B}|${U}|${(0,l.M)(f,P)}|${z}|${R}`,N=D.get(O);N==null&&(N={series:[],dir:V},D.set(O,N)),N.series.push(T)}),[...D.values()]}function r(b,D,f){let C=Array(b.fields.length),P=D.length,T=b.length,M=P>0?Array(T).fill(0):[],I=P>0?Array(T).fill(!1):[],B=Array.from({length:P},()=>M.slice()),U=Array.from({length:P},()=>I.slice());if(D.forEach((W,V)=>{let z=U[V];W.series.forEach(R=>{let O=b.fields[R];if(O.config.custom?.hideFrom?.viz)return;let N=O.values;for(let F=0;F<T;F++)N[F]!=null&&(z[F]=!0)})}),b.fields.forEach((W,V)=>{let z=W.values;if(V===0){C[V]=z;return}let{custom:R}=W.config;if(!R||R.hideFrom?.viz){C[V]=z;return}if(R.transform===s.NU.Constant){let N=z.findIndex(G=>G!=null),F=z[N];z=Array(z.length).fill(void 0),z[N]=F}else if(z=z.slice(),R.transform===s.NU.NegativeY)for(let N=0;N<z.length;N++)z[N]!=null&&(z[N]*=-1);let O=R.stacking?.mode;if(!O||O===s.gs.None)C[V]=z;else{let N=D.findIndex(K=>K.series.indexOf(V)>-1),F=B[N],G=U[N],H=C[V]=Array(T);for(let K=0;K<T;K++){let w=z[K];w!=null?H[K]=F[K]+=w:H[K]=G[K]?F[K]:w}}}),f){let W=C.map((V,z)=>{let R=D.findIndex(O=>O.series.indexOf(z)>-1);return R!==-1?B[R]:V});f({totals:W})}return b.fields.forEach((W,V)=>{if(V===0||W.config.custom?.hideFrom?.viz)return;if(W.config.custom?.stacking?.mode===s.gs.Percent){let R=D.findIndex(G=>G.series.indexOf(V)>-1),O=B[R],N=D[R],F=C[V];for(let G=0;G<T;G++){let H=F[G];H!=null&&(F[G]=O[G]===0?0:N.dir*(H/O[G]))}}}),C}function v(b,D){let f,C=1,P=1,T=b.data[1][D],M=b.data[1][D];for(let I=1;I<b.data.length;I++){const U=b.data[I][D];U!=null&&(T==null?T=U:U>T&&(T=b.data[I][D],C=I),M==null?M=U:U<M&&(M=b.data[I][D],P=I))}return M==null&&T==null?f=void 0:M!=null&&T!=null?f=(b.valToPos(M,b.series[P].scale)+b.valToPos(T,b.series[C].scale))/2:f=b.valToPos(M||T,b.series[C||P].scale),f!==void 0&&f<0&&(f=b.bbox.height/devicePixelRatio),f}function g(b,D){const f=E(D);return b===s.NU.NegativeY?f?1:-1:f?-1:1}function E(b,D=100){const f=b.length;if(f===0)return!1;let C=0,P=f-1;for(;C<=P&&b[C]==null;)C++;for(;P>=C&&b[P]==null;)P--;let T=0,M=0;if(P>=C){const I=Math.max(1,Math.floor((P-C+1)/D));for(let B=C;B<=P;B+=I){const U=b[B];U!=null&&typeof U=="number"&&(U<0||Object.is(U,-0)?T++:U>0&&M++)}if(T>M)return!0}return!1}const x=(b,D,f)=>{if(!b?.length)return[];const C=I=>I==null?"-":I.toFixed(1),P=D.display??C;let T=null;const M=(0,a.Nw)({field:D,reducers:b});return b.map(I=>{const B=a.AS.get(I);let U=P;return B.id===a.gy.diffperc&&(U=(0,n.J)({field:{...D,config:{...D.config,unit:"percent"}},theme:f})),(B.id===a.gy.count||B.id===a.gy.changeCount||B.id===a.gy.distinctCount)&&(T||(T=(0,n.J)({field:{...D,config:{...D.config,unit:"none"}},theme:f})),U=T),{...U(M[I]),title:B.name,description:B.description}})},m=(0,o.h)("uPlot"),y=m.logger;(0,d.h)("graphng",void 0,m)},36200:(ne,j,e)=>{"use strict";e.d(j,{$I:()=>u,BU:()=>f,CZ:()=>g,J7:()=>p,ML:()=>C,Vf:()=>b,Xw:()=>h,jA:()=>i,p0:()=>E,t4:()=>D,v5:()=>r});var n=e(65307),a=e(32899),s=e(68143),d=e(73427),o=e(74268),l=e(77256);const i=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function c(P,T=i,M){if(P.pending.match(M))return{result:T.result,loading:!0,error:T.error,dispatched:!0,requestId:M.meta.requestId};if(P.fulfilled.match(M)){if(T.requestId===void 0||T.requestId===M.meta.requestId)return{...T,result:M.payload,loading:!1,error:void 0}}else if(P.rejected.match(M)&&T.requestId===M.meta.requestId)return{...T,loading:!1,error:M.error};return T}function p(P,T){return(0,n.Z0)({name:P,initialState:i,reducers:{},extraReducers:M=>M.addDefaultCase((I,B)=>c(T,I,B))})}function h(P,T,M){return(0,n.Z0)({name:P,initialState:{},reducers:{},extraReducers:I=>I.addDefaultCase((B,U)=>{if((0,n.$S)(T)(U)){const W=U,V=M(W.meta.arg);return{...B,[V]:c(T,B[V],W)}}return B})})}function u(P){return P.catch(T=>{throw{message:g(T),code:T.statusCode}})}function r(P,T){return P.then(M=>(T.successMessage&&d.lE.emit(a.r1.alertSuccess,[T.successMessage]),M)).catch(M=>{const I=g(M);throw d.lE.emit(a.r1.alertError,[`${T.errorMessage??"Error"}: ${I}`]),M})}const v="Unknown Error";function g(P){if((0,s.NF)(P))if(P.data?.message){let T=P.data?.message;return typeof P.data?.error=="string"&&(T+=`; ${P.data.error}`),T}else{if(Array.isArray(P.data)&&P.data.length&&P.data[0]?.message)return P.data.map(T=>T?.message).filter(T=>!!T).join(" ");if(P.statusText)return P.statusText}return(0,l.u7)(P)?P.message:((0,o.fH)(o.le.unknownMessageFromError,{error:JSON.stringify(P)}),v)}function E(P){return Object.values(P).every(x)}function x(P){return P.dispatched&&!P.loading}function m(P){return Object.values(P).every(y)}function y(P){return P.dispatched&&!P.loading&&!P.error}function b(P){return Object.values(P).some(C)}function D(P){return Object.values(P).some(T=>T.dispatched)}function f(P){return Object.values(P).some(y)}function C(P){return P?P.dispatched&&P.loading:!1}},36219:(ne,j,e)=>{"use strict";e.d(j,{U:()=>u});var n=e(74848),a=e(22803),s=e(18828),d=e(43107),o=e(93225),l=e(96540),i=e(92745),c=e(63142),p=e(15245),h=e(7895);const u=(0,l.forwardRef)(({alignment:v="left",className:g,children:E,...x},m)=>{const y=l.Children.toArray(E).filter(z=>z!=null),[b,D]=(0,l.useState)(Array(y.length).fill(!1)),f=(0,l.useRef)(null),[C,P]=(0,l.useState)(!1),T=(0,l.useRef)(null),M=(0,l.createRef)(),{overlayProps:I}=(0,o.e)({onClose:()=>P(!1),isDismissable:!0,isOpen:C,shouldCloseOnInteractOutside:z=>{const R=(0,p.gF)();return!T.current?.contains(z)&&!R.contains(z)}},M),{dialogProps:B}=(0,s.s)({},M),U=(0,c.$j)(),W=v==="left"?b.indexOf(!1)-1:b.length,V=r(U,W,v);return(0,l.useLayoutEffect)(()=>{const z=new IntersectionObserver(R=>{R.forEach(O=>{if(O.target instanceof HTMLElement&&O.target.parentNode){const N=Array.prototype.indexOf.call(O.target.parentNode.children,O.target);D(F=>{const G=[...F];return G[N]=O.isIntersecting,G})}})},{threshold:1,root:f.current});return f.current&&Array.from(f.current.children).forEach(R=>{R instanceof HTMLElement&&R!==T.current&&z.observe(R)}),()=>z.disconnect()},[E]),(0,n.jsxs)("div",{ref:f,className:(0,a.cx)(V.container,g),...x,children:[y.map((z,R)=>(0,n.jsx)("div",{style:{order:R,visibility:b[R]?"visible":"hidden"},className:V.childWrapper,children:z},R)),b.includes(!1)&&(0,n.jsxs)("div",{ref:T,className:V.overflowButton,children:[(0,n.jsx)(h.I,{variant:C?"active":"default",tooltip:(0,i.t)("grafana-ui.toolbar-button-row.show-more","Show more items"),onClick:()=>P(!C),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),C&&(0,n.jsx)(d.n1,{contain:!0,autoFocus:!0,children:(0,n.jsx)("div",{className:V.overflowItems,ref:M,...I,...B,children:y.map((z,R)=>!b[R]&&z)})})]})]})});u.displayName="ToolbarButtonRow";const r=(v,g,E)=>({overflowButton:(0,a.css)({order:g}),overflowItems:(0,a.css)({alignItems:"center",backgroundColor:v.colors.background.primary,borderRadius:v.shape.radius.default,boxShadow:v.shadows.z2,display:"flex",flexWrap:"wrap",gap:v.spacing(1),marginTop:v.spacing(1),maxWidth:"80vw",padding:v.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:v.zIndex.dropdown}),container:(0,a.css)({alignItems:"center",display:"flex",gap:v.spacing(1),justifyContent:E==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,a.css)({alignItems:"center",display:"flex",gap:v.spacing(1)})})},36303:(ne,j,e)=>{"use strict";e.d(j,{Xc:()=>p,Xw:()=>c,tH:()=>i});var n=e(74848),a=e(96540),s=e(32631),d=e(92745),o=e(34999),l=e(56297);class i extends a.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(u,r){this.props.errorLogger?this.props.errorLogger(u):s.P?.api?.pushError(u,{context:{type:"boundary",source:this.props.boundaryName??"unknown"}}),this.setState({error:u,errorInfo:r}),this.props.onError&&this.props.onError(u)}componentDidUpdate(u){const{dependencies:r,onRecover:v}=this.props;if(this.state.error&&r&&u.dependencies){for(let g=0;g<r.length;g++)if(r[g]!==u.dependencies[g]){this.setState({error:null,errorInfo:null}),v&&v();break}}}render(){const{children:u}=this.props,{error:r,errorInfo:v}=this.state;return u({error:r,errorInfo:v})}}const c=(0,a.memo)(({title:h,children:u,style:r="alertbox",dependencies:v,errorLogger:g,boundaryName:E})=>{const x=h??(0,d.t)("grafana-ui.error-boundary.title","An unexpected error happened");return(0,n.jsx)(i,{dependencies:v,errorLogger:g,boundaryName:E,children:({error:m,errorInfo:y})=>y?r==="alertbox"?(0,n.jsx)(o.F,{title:x,children:(0,n.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[m&&m.toString(),(0,n.jsx)("br",{}),y.componentStack]})}):(0,n.jsx)(l.D,{title:x,error:m,errorInfo:y}):u})});c.displayName="ErrorBoundaryAlert";function p(h,u={}){const r=v=>(0,n.jsx)(c,{...u,children:(0,n.jsx)(h,{...v})});return r.displayName="WithErrorBoundary",r}},36324:(ne,j,e)=>{"use strict";e.d(j,{C:()=>s,b:()=>a});var n=e(96540);function a(l=10){let i={x:0,y:0};return{set:h=>{i=d(h)},check:(h,u=l)=>o(i,d(h),u)}}function s(l=10){const i=n.useRef({x:0,y:0}),c=(0,n.useCallback)(h=>{i.current=d(h)},[]),p=(0,n.useCallback)((h,u=l)=>o(i.current,d(h),u),[l]);return(0,n.useMemo)(()=>({set:c,check:p}),[c,p])}function d(l){return{x:l.clientX,y:l.clientY}}function o(l,i,c){return Math.hypot(l.x-i.x,l.y-i.y)>c}},36394:(ne,j,e)=>{"use strict";e.d(j,{QS:()=>s,RU:()=>l,k5:()=>o,yQ:()=>d});var n=e(64394),a=e(33553);const s={value:0,color:n.F};function d(i,c){if(!c||c.length===0)return s;let p=c[0];for(const h of c)if(i>=h.value)p=h;else break;return p}function o(i,c,p){const{thresholds:h}=i.config;return h?.mode===a.O.Percentage?d(p*100,h?.steps):d(c,h?.steps)}function l(i){return i.sort((c,p)=>c.value-p.value)}},36490:(ne,j,e)=>{"use strict";e.d(j,{K9:()=>h,Lc:()=>E,Ny:()=>r,SE:()=>u,_K:()=>y,at:()=>m,vG:()=>v});var n=e(74848),a=e(53554),s=e(96540),d=e(49426),o=e(5556),l=e(37615),i=e(60379),c=e(20720),p=e(43173);class h{constructor(D){this.history=D||a.zR({basename:p.$.appSubUrl??"/"}),this.locationObservable=new d.t(this.history.location),this.history.listen(f=>{this.locationObservable.next(f)}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getLocationObservable(){return this.locationObservable.asObservable()}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(D,f){const C=this.history.location,P=this.getSearchObject();for(const M in D)D[M]===null||D[M]===void 0?delete P[M]:P[M]=D[M];const T=o.kM.renderUrl(C.pathname,P);f?this.history.replace(T,this.history.location.state):this.history.push(T,this.history.location.state)}push(D){this.history.push(D)}replace(D){this.history.replace(D)}reload(){const D=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:D?D+1:1}})}getLocation(){return this.history.location}getSearchObject(){return u(this.history.location.search)}update(D){if((0,l.l)("LocationSrv","update","partial, push or replace"),D.partial&&D.query)this.partial(D.query,D.partial);else{const f={pathname:D.path};D.query&&(f.search=o.kM.toUrlParams(D.query)),D.replace?this.replace(f):this.push(f)}}}function u(b){let D=typeof b=="number"?String(b):b;return D.length>0?D.startsWith("?")?o.kM.parseKeyValue(D.substring(1)):o.kM.parseKeyValue(D):{}}let r=new h;const v=b=>{throw new Error("locationService can be only overriden in test environment")},g=(0,i.h)("Router"),E=g.logger;(0,c.h)("location",r,g);const x=s.createContext(void 0);function m(){const b=(0,s.useContext)(x);if(!b)throw new Error("useLocationService must be used within a LocationServiceProvider");return b}const y=({service:b,children:D})=>(0,n.jsx)(x.Provider,{value:b,children:D})},36580:(ne,j,e)=>{"use strict";e.d(j,{iy:()=>I,dR:()=>f,b1:()=>P,VQ:()=>T,s9:()=>C});var n=e(62467),a=e(75505),s=e(44240),d=e(63720),o=e(66847),l=e(94644),i=e(48480),c=e(1906),p=e(38619),h=e(77154),u=e(35814),r=e(27489),v=e(43173),g=e(78282),E=e(68143),x=e(33184),m=e(51388),y=e(38866);function b(W){const{intervalMs:V,maxDataPoints:z,requestId:R,panelId:O,queryCachingTTL:N,range:{from:F,to:G}}=W;if(!W.targets.length)return(0,n.of)({data:[]});const H={intervalMs:V,maxDataPoints:z,queryCachingTTL:N,timeRange:{from:F.valueOf().toString(),to:G.valueOf().toString(),timezone:W.timezone}};return(0,E.AI)().fetch({url:`/api/public/dashboards/${v.$.publicDashboardAccessToken}/panels/${O}/query`,method:"POST",data:H,requestId:R}).pipe((0,d.n)(K=>(0,n.of)((0,y.bE)(K,W.targets))),(0,o.W)(K=>(0,n.of)((0,y.bE)(K))))}var D=e(55315);const f=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function C(W){if(!W)return!1;const V=typeof W=="string"?W:W.type;return V===f.type||V===f.name||V==="-100"}class P extends Error{constructor(V,z){super(V),this.details=z,this.name="HealthCheckError"}}var T=(W=>(W.Unknown="UNKNOWN",W.OK="OK",W.Error="ERROR",W))(T||{}),M=(W=>(W.PluginID="X-Plugin-Id",W.DatasourceUID="X-Datasource-Uid",W.DashboardUID="X-Dashboard-Uid",W.PanelID="X-Panel-Id",W.PanelPluginId="X-Panel-Plugin-Id",W.QueryGroupID="X-Query-Group-Id",W.FromExpression="X-Grafana-From-Expr",W.SkipQueryCache="X-Cache-Skip",W.DashboardTitle="X-Dashboard-Title",W.PanelTitle="X-Panel-Title",W))(M||{});class I extends l.mA{constructor(V){super(V),this.streamOptionsProvider=U,this.userStorage=new D.X(V.type)}query(V){if(v.$.publicDashboardAccessToken)return b(V);const{intervalMs:z,maxDataPoints:R,queryCachingTTL:O,range:N,requestId:F,hideFromInspector:G=!1}=V;let H=V.targets,K=!1;const w=new Set,Q=new Set,k=H.map(re=>{let Y=this.getRef(),X=this.id,J=!0;if(C(re.datasource))return K=!0,{...re,datasource:f};if(re.datasource){const _=(0,g.l)().getInstanceSettings(re.datasource,V.scopedVars);if(!_)throw new Error(`Unknown Datasource: ${JSON.stringify(re.datasource)}`);const ee=_.rawRef??(0,i.p$)(_),ae=_.id;(ee.uid!==Y.uid||X!==ae)&&(Y=ee,X=ae,J=!1)}return Y.type?.length&&w.add(Y.type),Y.uid?.length&&Q.add(Y.uid),{...J?this.applyTemplateVariables(re,V.scopedVars,V.filters):re,datasource:Y,datasourceId:X,intervalMs:z,maxDataPoints:R,queryCachingTTL:O}});if(!k.length)return(0,n.of)({data:[]});const te={queries:k,from:N?.from.valueOf().toString(),to:N?.to.valueOf().toString()},q=V.headers??{};q["X-Plugin-Id"]=Array.from(w).join(", "),q["X-Datasource-Uid"]=Array.from(Q).join(", ");let se="/api/ds/query?ds_type="+this.type;return v.$.featureToggles.queryServiceFromExplore&&V.app===c.Jk.Explore&&(se=`/apis/query.grafana.app/v0alpha1/namespaces/${v.$.namespace}/query?ds_type=${this.type}`),v.$.featureToggles.queryServiceFromUI&&(se=`/apis/query.grafana.app/v0alpha1/namespaces/${v.$.namespace}/query?ds_type=${this.type}`),K&&(q["X-Grafana-From-Expr"]="true",se+="&expression=true"),F&&(se+=`&requestId=${F}`),V.dashboardUID&&(q["X-Dashboard-Uid"]=V.dashboardUID,V.dashboardTitle&&(q["X-Dashboard-Title"]=V.dashboardTitle),V.panelId&&(q["X-Panel-Id"]=`${V.panelId}`),V.panelName&&(q["X-Panel-Title"]=V.panelName)),V.panelPluginId&&(q["X-Panel-Plugin-Id"]=`${V.panelPluginId}`),V.queryGroupId&&(q["X-Query-Group-Id"]=`${V.queryGroupId}`),V.skipQueryCache&&(q["X-Cache-Skip"]="true"),(0,E.AI)().fetch({url:se,method:"POST",data:te,requestId:F,hideFromInspector:G,headers:q}).pipe((0,d.n)(re=>{const Y=(0,y.bE)(re,k);return Y.data?.length&&Y.data.find(X=>X.meta?.channel)?B(Y,V,this.streamOptionsProvider):(0,n.of)(Y)}),(0,o.W)(re=>(0,n.of)((0,y.bE)(re))))}getRequestHeaders(){const V={};return V["X-Plugin-Id"]=this.type,V["X-Datasource-Uid"]=this.uid,V}interpolateVariablesInQueries(V,z,R){return V.map(O=>this.applyTemplateVariables(O,z,R))}applyTemplateVariables(V,z,R){return V}async getResource(V,z,R){const O=this.getRequestHeaders();return(await(0,a.s)((0,E.AI)().fetch({...R,method:"GET",headers:R?.headers?{...R.headers,...O}:O,params:z??R?.params,url:`/api/datasources/uid/${this.uid}/resources/${V}`}))).data}async postResource(V,z,R){const O=this.getRequestHeaders();return(await(0,a.s)((0,E.AI)().fetch({...R,method:"POST",headers:R?.headers?{...R.headers,...O}:O,data:z??{...z},url:`/api/datasources/uid/${this.uid}/resources/${V}`}))).data}async callHealthCheck(){return(0,a.s)((0,E.AI)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(V=>V.data).catch(V=>{let z={plugin_id:this.meta?.id||"",plugin_version:this.meta?.info?.version||"",datasource_healthcheck_status:V?.data?.status||"error",datasource_healthcheck_message:V?.data?.message||""};return(0,r.rR)("datasource_health_check_completed",z),V.data})}async testDatasource(){return this.callHealthCheck().then(V=>V.status==="OK"?{status:"success",message:V.message}:Promise.reject({status:"error",message:V.message,error:new P(V.message,V.details)}))}}function B(W,V,z){const R=(0,x.oF)();if(!R)return(0,n.of)(W);const O=[],N=[];for(const F of W.data){const G=(0,p.DG)(F.meta?.channel);if(G){const H=F;N.push(R.getDataStream({addr:G,buffer:z(V,H),frame:(0,h.Nw)(F)}))}else O.push(F)}return O.length&&N.push((0,n.of)({...W,data:O})),N.length===1?N[0]:(0,s.h)(...N)}const U=(W,V)=>{const z={maxLength:W.maxDataPoints??500,action:m.Kh.Append};return W.rangeRaw?.to==="now"&&(z.maxDelta=W.range.to.valueOf()-W.range.from.valueOf()),z};I=(0,u.Y)(I)},36605:(ne,j,e)=>{"use strict";e.d(j,{L:()=>o});var n=e(44248),a=e(9931),s=e(18615),d=e(92119);class o extends n.Bs{constructor(i){super(i),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){const i=this.parent;let c,p,h;if(!(i instanceof n.dt))throw new Error("DashboardDatasourceBehaviour must be attached to a SceneQueryRunner");if(!this.containsDashboardDSQueries(i))return;try{h=(0,d.YQ)(i)}catch{return}const u=i.state.queries.find(y=>y.panelId!==void 0);if(!u)return;const r=u.panelId,v=(0,d.XA)(r),g=(0,d.vL)(h,v);if(!(g instanceof n.Eb))return;const E=(0,d.iL)(g);if(E&&!E.state.isLoaded){c=E.subscribeToState(y=>{this.handleLibPanelStateUpdates(y,i,g)});return}const x=(0,d.un)(g);if(!x)throw new Error("Could not find SceneQueryRunner for panel");const m=x.parent;return m instanceof n.Es&&m.state.transformations.length&&(p=m.subscribeToState((y,b)=>{y.data!==b.data&&i.runQueries()})),this.prevRequestId&&this.prevRequestId!==x.state.data?.request?.requestId&&i.runQueries(),()=>{this.prevRequestId=x?.state.data?.request?.requestId,c&&c.unsubscribe(),p&&p.unsubscribe()}}containsDashboardDSQueries(i){return i.state.datasource?.uid===a.K?!0:i.state.datasource?.uid===s.uv&&i.state.queries.some(c=>c.datasource?.uid===a.K)}handleLibPanelStateUpdates(i,c,p){if(i&&i?.isLoaded){if(!((0,d.un)(p)instanceof n.dt))throw new Error("Could not find SceneQueryRunner for library panel");c.runQueries()}}}},36638:(ne,j,e)=>{"use strict";e.d(j,{sJ:()=>Q,RE:()=>k,NS:()=>q,Dq:()=>se,kK:()=>re,hI:()=>te});var n=e(42954),a=e(95004),s=e(57866);const d={id:s.Ct.byType,name:"Field Type",description:"match based on the field type",defaultOptions:a.PU.number,get:Y=>(X,J,_)=>Y===X.type,getOptionsDisplayText:Y=>`Field type: ${Y}`},o={id:s.Ct.byTypes,name:"Field Type",description:"match based on the field types",defaultOptions:new Set,get:Y=>(X,J,_)=>Y.has(X.type),getOptionsDisplayText:Y=>`Field types: ${[...Y].join(" | ")}`},l={id:s.Ct.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>d.get(a.PU.number),getOptionsDisplayText:()=>"Numeric Fields"},i={id:s.Ct.time,name:"Time Fields",description:"Fields with type time",get:()=>d.get(a.PU.time),getOptionsDisplayText:()=>"Time Fields"};function c(){return[d,o,l,i]}var p=e(739),h=e(46644),u=e(53685);function r(Y){return Y===h.gy.allIsNull||Y===h.gy.allIsZero}const v={id:s.Ct.byValue,name:"By value (reducer)",description:"Reduce a field to a single value and test for inclusion",defaultOptions:{reducer:h.gy.allIsZero,op:p.zT.GTE,value:0},get:Y=>{if(!Y||!Y.reducer)return()=>!1;let{reducer:X,op:J,value:_}=Y;const ee=r(X);return J||(J=p.zT.EQ),(ae,le,L)=>{const ie=(0,h.Nw)({field:ae,reducers:[X]})[X];return ee?!!ie:(0,u.c)(ie,J,_)}},getOptionsDisplayText:Y=>`By value (${Y.reducer})`};var g=e(4575),E=e(6844),x=e(8934);const m={id:s.jR.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:Y=>{let X=null;if((0,x.AP)(Y))try{X=(0,x.dO)(Y)}catch(J){J instanceof Error&&console.warn(J.message)}else if(Y.includes("|")){const J=Y.split("|").map(x.jD).join("|");X=new RegExp(`^(?:${J})$`)}return J=>X?.test(J.refId||"")??J.refId===Y},getOptionsDisplayText:Y=>`RefID: ${Y}`};function y(){return[m]}const b={id:s.Ct.first,name:"First Field",description:"The first field in the frame",get:Y=>(X,J,_)=>X===J.fields[0],getOptionsDisplayText:()=>"First field"},D={id:s.Ct.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:Y=>(X,J,_)=>X.type===a.PU.time&&X===J.fields.find(ee=>ee.type===a.PU.time),getOptionsDisplayText:()=>"First time field"};function f(){return[b,D]}const C={id:s.Js.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:Y=>(X,J)=>J.values[X]==Y.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},P={id:s.Js.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:Y=>(X,J)=>J.values[X]!=Y.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},T=()=>[C,P],M={id:s.Js.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(Y,X)=>X.values[Y]==null,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},I={id:s.Js.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(Y,X)=>X.values[Y]!=null,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},B=()=>[M,I],U={id:s.Js.greater,name:"Is greater",description:"Match when field value is greater than option.",get:Y=>(X,J)=>{const _=J.values[X];return isNaN(_)?!1:_>Y.value},getOptionsDisplayText:Y=>`Matches all rows where field value is greater than: ${Y.value}.`,isApplicable:Y=>Y.type===a.PU.number,getDefaultOptions:()=>({value:0})},W={id:s.Js.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is greater than or equal to option.",get:Y=>(X,J)=>{const _=J.values[X];return isNaN(_)?!1:_>=Y.value},getOptionsDisplayText:Y=>`Matches all rows where field value is greater than or equal to: ${Y.value}.`,isApplicable:Y=>Y.type===a.PU.number,getDefaultOptions:()=>({value:0})},V={id:s.Js.lower,name:"Is lower",description:"Match when field value is lower than option.",get:Y=>(X,J)=>{const _=J.values[X];return isNaN(_)?!1:_<Y.value},getOptionsDisplayText:Y=>`Matches all rows where field value is lower than: ${Y.value}.`,isApplicable:Y=>Y.type===a.PU.number,getDefaultOptions:()=>({value:0})},z={id:s.Js.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:Y=>(X,J)=>{const _=J.values[X];return isNaN(_)?!1:_<=Y.value},getOptionsDisplayText:Y=>`Matches all rows where field value is lower or equal than: ${Y.value}.`,isApplicable:Y=>Y.type===a.PU.number,getDefaultOptions:()=>({value:0})},R=()=>[U,W,V,z],O={id:s.Js.between,name:"Is between",description:"Match when field value is between given option values.",get:Y=>(X,J)=>{const _=J.values[X];if(isNaN(_))return!1;const ee=typeof Y.from!="number"?parseInt(Y.from,10):Y.from,ae=typeof Y.to!="number"?parseInt(Y.to,10):Y.to;return _>ee&&_<ae},getOptionsDisplayText:Y=>`Matches all rows where field value is between ${Y.from} and ${Y.to}.`,isApplicable:Y=>Y.type===a.PU.number||Y.type===a.PU.time,getDefaultOptions:Y=>Y.type===a.PU.time?{from:"$__from",to:"$__to"}:{from:0,to:100}},N=()=>[O],F={id:s.Js.regex,name:"Regex",description:"Match when field value is matching regex.",get:Y=>{const X=new RegExp(Y.value);return(J,_)=>{const ee=_.values[J];return X.test(ee)}},getOptionsDisplayText:Y=>`Matches all rows where field value is matching regex: ${Y.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},G=()=>[F],H={id:s.Js.substring,name:"Contains substring",description:"Match where value for given field is a substring to options value.",get:Y=>(X,J)=>{const _=J.values[X];return _&&Y.value&&typeof _=="string"&&_.toLowerCase().includes(Y.value.toLowerCase())||Y.value===""},getOptionsDisplayText:()=>"Matches all rows where field is similar to the value.",isApplicable:Y=>Y.type===a.PU.string,getDefaultOptions:()=>({value:""})},K={id:s.Js.notSubstring,name:"Does not contain substring",description:"Match where value for given field is not a substring to options value.",get:Y=>(X,J)=>{const _=J.values[X];return typeof _=="string"&&Y.value&&_&&Y.value!==""&&!_.toLowerCase().includes(Y.value.toLowerCase())},getOptionsDisplayText:()=>"Matches all rows where field is not similar to the value.",isApplicable:Y=>Y.type===a.PU.string,getDefaultOptions:()=>({value:""})},w=()=>[H,K],Q=new n.O(()=>[...(0,E.nz)(),...c(),...(0,g.P7)(),...f(),v]),k=new n.O(()=>[...(0,E.UM)(),...(0,g.Y7)(),...y()]),te=new n.O(()=>[...B(),...R(),...T(),...w(),...N(),...G()]);function q(Y){const X=Q.get(Y.id);if(!X)throw new Error("Unknown field matcher: "+Y.id);return X.get(Y.options)}function se(Y){const X=k.get(Y.id);if(!X)throw new Error("Unknown frame matcher: "+Y.id);return X.get(Y.options)}function re(Y){const X=te.get(Y.id);if(!X)throw new Error("Unknown value matcher: "+Y.id);return X.get(Y.options)}},36656:(ne,j,e)=>{"use strict";e.d(j,{D:()=>n,_:()=>a});var n=(s=>(s.String="string",s))(n||{}),a=(s=>(s.Property="property",s.Operator="operator",s.Or="or",s.And="and",s.GroupBy="groupBy",s.Function="function",s.FunctionParameter="functionParameter",s))(a||{})},36819:(ne,j,e)=>{"use strict";e.d(j,{R:()=>a});const n=new Set;function a(s){if(n.has(s))throw new Error(`There is already an event defined with type '${s}'`);return n.add(s),{name:s}}},36826:(ne,j,e)=>{"use strict";e.d(j,{d:()=>C,y:()=>P});var n=e(74848),a=e(87586),s=e(13791),d=e(5358),o=e(22803),l=e(96540),i=e(92745),c=e(63142),p=e(18027),h=e(18857),u=e(72508),r=e(15633),v=e(52161);function g(I){return I.name===v.hY?"Grafana":I.displayName||I.name}const E=({disabled:I=!1})=>{const B=(0,c.of)(x),{selectedAlertmanager:U,availableAlertManagers:W,setSelectedAlertmanager:V}=(0,d.VI)(),z=(0,l.useMemo)(()=>{const N=W.find(K=>K.name===v.hY),F=W.find(K=>(0,r.b)(K.name)),G=W.filter(K=>K.name!==v.hY&&!(0,r.b)(K.name)),H=[];return N&&H.push({label:g(N),value:N.name,imgUrl:N.imgUrl,meta:N.meta}),F&&H.push({label:g(F),value:F.name,imgUrl:F.imgUrl,meta:F.meta}),G.length>0&&H.push({label:(0,i.t)("alerting.alert-manager-picker.external-alertmanagers-group","External Alertmanagers"),options:G.map(K=>({label:g(K),value:K.name,imgUrl:K.imgUrl,meta:K.meta}))}),H},[W]),R=I||z.length===1,O=R?"Alertmanager":"Choose Alertmanager";return(0,n.jsx)(p.I,{className:B.field,label:O,disabled:R,"data-testid":"alertmanager-picker",children:(0,n.jsx)(h.l6,{"aria-label":O,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:N=>{N?.value&&V(N.value)},options:z,noOptionsMessage:(0,i.t)("alerting.alert-manager-picker.noOptionsMessage-no-datasources-found","No datasources found"),value:U,getOptionLabel:N=>N.label,components:{Option:m}})})},x=I=>({field:(0,o.css)({margin:0}),optionContent:(0,o.css)({display:"flex",alignItems:"center",gap:I.spacing(1),whiteSpace:"pre-line"})}),m=I=>{const B=(0,c.of)(x);return(0,n.jsx)(u.o5,{...I,renderOptionLabel:({label:U})=>(0,n.jsx)("div",{className:B.optionContent,children:U})})};var y=e(34999);const b=()=>(0,n.jsx)(y.F,{title:(0,i.t)("alerting.no-alert-managers-available.title-no-alertmanager-found","No Alertmanager found"),severity:"warning",children:(0,n.jsx)(i.x6,{i18nKey:"alerting.no-alert-managers-available.body-no-alertmanager-found",children:"We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager."})}),D=()=>(0,n.jsx)(y.F,{title:(0,i.t)("alerting.other-alert-managers-available.title-selected-alertmanager-not-found","Selected Alertmanager not found."),severity:"warning",children:(0,n.jsx)(i.x6,{i18nKey:"alerting.other-alert-managers-available.body-selected-alertmanager-not-found",children:"The selected Alertmanager no longer exists or you may not have permission to access it. You can select a different Alertmanager from the dropdown."})}),f=({availableAlertManagers:I})=>{const B=I.length>0;return(0,n.jsx)("div",{children:B?(0,n.jsx)(D,{}):(0,n.jsx)(b,{})})},C=({children:I,isLoading:B,...U})=>(0,n.jsx)(s.Y,{...U,children:(0,n.jsx)(s.Y.Contents,{isLoading:B,children:I})}),P=({children:I,accessType:B,...U})=>{const W=T();return(0,n.jsx)(d.b9,{accessType:B,children:(0,n.jsx)(C,{...U,actions:(0,n.jsx)(E,{disabled:W}),children:(0,n.jsx)(M,{children:I})})})};function T(){const I=(0,a.A)();return["/edit","/new"].some(U=>I?.pathname?.includes(U))}const M=({children:I})=>{const{availableAlertManagers:B,selectedAlertmanager:U}=(0,d.VI)();return U?(0,n.jsx)(n.Fragment,{children:I}):(0,n.jsx)(f,{availableAlertManagers:B})}},37010:(ne,j,e)=>{"use strict";e.d(j,{$:()=>ze});var n=e(74848),a=e(96540),s=e(92745),d=e(68143),o=e(43173),l=e(8207),i=e(54314),c=e(60208),p=e(61371),h=e(22803),u=e(16817),r=e(63142),v=e(34999),g=e(83873);function E({dashboard:Be}){const $e=(0,r.of)(x),{loading:Ye,value:de,error:ge}=(0,u.A)(async()=>{const De=Be.getSaveModelCloneOld();return g.IB.validateDashboard(De).catch(be=>{if(be.status>=500)throw be;return be.data})},[Be]);let pe;if(Ye)pe=(0,n.jsx)(v.F,{severity:"info",title:(0,s.t)("dashboard.dashboard-validation.title-checking-dashboard-validity","Checking dashboard validity")});else if(de)de.isValid||(pe=(0,n.jsxs)(v.F,{severity:"warning",title:(0,s.t)("dashboard.dashboard-validation.title-dashboard-failed-schema-validation","Dashboard failed schema validation"),children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.dashboard-validation.body-dashboard-failed-schema-validation",children:"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"})}),(0,n.jsx)("div",{className:$e.error,children:de.message})]}));else{const De=ge?.message??"Unknown error";pe=(0,n.jsx)(v.F,{severity:"info",title:(0,s.t)("dashboard.dashboard-validation.title-error-checking-dashboard-validity","Error checking dashboard validity"),children:(0,n.jsx)("p",{className:$e.error,children:De})})}return pe?(0,n.jsx)("div",{className:$e.root,children:pe}):null}const x=Be=>({root:(0,h.css)({marginTop:Be.spacing(1)}),error:(0,h.css)({fontFamily:Be.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),m=E;var y=e(30906),b=e(71599),D=e(22787),f=e(45861),C=e(78159),P=e(2543),T=e(41053),M=e(92138),I=e(36490),B=e(45229),U=e(64762),W=e(38206),V=e(15203),z=e(23289),R=e(87745),O=e(52763),N=e(77731),F=e(95710);const G=async(Be,$e,Ye,de)=>{const ge=await de({dashboard:Be,folderUid:$e.folderUid??Ye.meta.folderUid??Be.meta?.folderUid,message:$e.message,overwrite:$e.overwrite,k8s:Ye.meta.k8s});if("error"in ge)throw ge.error;return ge.data},H=(Be=!1)=>{const $e=(0,O.wA)(),Ye=(0,U._2)(),[de]=(0,V.e8)(),[ge,pe]=(0,T.A)(async(De,Me,be)=>{try{const Oe=await G(De,Me,be,de);be.version=Oe.version,De=(0,P.cloneDeep)(De),De.version=Oe.version,be.clearUnsavedChanges(De,Me),B.A.publish(new R.Eu),Ye.success((0,s.t)("dashboard.save-dashboard.message-dashboard-saved","Dashboard saved")),(0,N.ko)(Oe.uid),Be?z.c.dashboardCopied({name:be.title||"",url:Oe.url}):(0,F.ic)(!!be.id,{name:be.title,url:Oe.url});const Ne=I.Ny.getLocation().pathname,We=M.I.stripBaseFromUrl(Oe.url);return We!==Ne&&Oe.url&&setTimeout(()=>I.Ny.replace(We)),be.meta.isStarred&&$e((0,W.TU)({id:be.uid,title:be.title,url:We})),Oe}catch(Oe){throw Oe instanceof Error&&Ye.error(Oe.message??"Error saving dashboard"),Oe}},[$e,Ye]);return{state:ge,onDashboardSave:pe}},K=({dashboard:Be,dashboardSaveModel:$e,error:Ye,onDismiss:de,setErrorIsHandled:ge})=>{const{onDashboardSave:pe}=H(),De=o.$.featureToggles.restoreDashboards;return(0,n.jsxs)(n.Fragment,{children:[Ye.data&&Ye.data.status==="version-mismatch"&&(0,n.jsx)(b.u,{isOpen:!0,title:(0,s.t)("dashboard.save-dashboard-error-proxy.title-version-mismatch","Conflict"),body:(0,n.jsx)("div",{children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard.save-dashboard-error-proxy.body-version-mismatch",children:["Someone else has updated this dashboard",(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:"Would you still like to save this dashboard?"})]})}),confirmText:(0,s.t)("dashboard.save-dashboard-error-proxy.confirmText-save-and-overwrite","Save and overwrite"),onConfirm:async()=>{await pe($e,{overwrite:!0},Be),de()},onDismiss:de}),Ye.data&&Ye.data.status==="name-exists"&&(0,n.jsx)(n.Fragment,{children:De?(0,n.jsxs)(D.a,{isOpen:!0,title:(0,s.t)("save-dashboards.name-exists.title","Dashboard name already exists"),onDismiss:de,children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"save-dashboards.name-exists.message-info",children:"A dashboard with the same name in the selected folder already exists, including recently deleted dashboards."})}),(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"save-dashboards.name-exists.message-suggestion",children:"Please choose a different name or folder."})})]}):(0,n.jsx)(b.u,{isOpen:!0,title:(0,s.t)("dashboard.save-dashboard-error-proxy.title-name-exists","Conflict"),body:(0,n.jsx)("div",{children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard.save-dashboard-error-proxy.body-name-exists",children:["A dashboard with the same name in selected folder already exists.",(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:"Would you still like to save this dashboard?"})]})}),confirmText:(0,s.t)("dashboard.save-dashboard-error-proxy.confirmText-save-and-overwrite","Save and overwrite"),onConfirm:async()=>{await pe($e,{overwrite:!0},Be),de()},onDismiss:de})}),Ye.data&&Ye.data.status==="plugin-dashboard"&&(0,n.jsx)(w,{dashboard:Be,onDismiss:()=>{ge(!0),de()}})]})},w=({onDismiss:Be,dashboard:$e})=>{const{onDashboardSave:Ye}=H(),de=(0,r.of)(k);return(0,n.jsxs)(D.a,{className:de.modal,title:(0,s.t)("dashboard.confirm-plugin-dashboard-save-modal.title-plugin-dashboard","Plugin dashboard"),icon:"copy",isOpen:!0,onDismiss:Be,children:[(0,n.jsx)("div",{className:de.modalText,children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard.confirm-plugin-dashboard-save-modal.body-plugin-dashboard",children:["Your changes will be lost when you update the plugin.",(0,n.jsx)("br",{}),(0,n.jsxs)("small",{children:["Use ",(0,n.jsx)("strong",{children:"Save As"})," to create custom version."]})]})}),(0,n.jsxs)(D.a.ButtonRow,{children:[(0,n.jsx)(f.$n,{variant:"secondary",onClick:Be,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.confirm-plugin-dashboard-save-modal.cancel",children:"Cancel"})}),(0,n.jsx)(C.m,{onClick:Be,dashboard:$e,onSaveSuccess:Be}),(0,n.jsx)(f.$n,{variant:"destructive",onClick:async()=>{await Ye($e.getSaveModelClone(),{overwrite:!0},$e),Be()},children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.confirm-plugin-dashboard-save-modal.overwrite",children:"Overwrite"})})]})]})},Q=Be=>{switch(Be){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},k=Be=>({modal:(0,h.css)({width:"500px"}),modalText:(0,h.css)({fontSize:Be.typography.h4.fontSize,color:Be.colors.text.primary,marginBottom:Be.spacing(4),paddingTop:Be.spacing(2)}),modalButtonRow:(0,h.css)({marginBottom:"14px","a, button":{marginRight:Be.spacing(2)}})});var te=e(50426),q=e(26987),se=e(37386),re=e(41654),Y=e(72636),X=e(63527),J=e(87105),_=e(21285),ee=e(91156),ae=e(89223),le=e(42357),L=e(70969);const ie=Be=>{const $e=Be.getSaveModelClone();return $e.id=null,$e.uid="",$e.title+=" Copy",$e.editable=!0,Be.id>0&&$e.panels&&$e.panels.forEach(Ye=>{Ye.type==="graph"&&Ye.alert&&delete Ye.thresholds,delete Ye.alert}),$e},oe=({dashboard:Be,isLoading:$e,isNew:Ye,onSubmit:de,onCancel:ge,onSuccess:pe})=>{const De={title:Ye?Be.title:`${Be.title} Copy`,description:Be.description,$folder:{uid:Be.meta.folderUid,title:Be.meta.folderTitle},copyTags:!1},Me=be=>async Oe=>{if(Oe&&Oe===be().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await ae.P.validateNewDashboardName(be().$folder.uid??"general",Oe),!0}catch(Ne){return Ne instanceof Error?Ne.message:"Dashboard name is invalid"}};return(0,n.jsx)(te.l,{defaultValues:De,onSubmit:async be=>{if(!de)return;const Oe=ie(Be);Oe.title=be.title,Oe.description=be.description,!Ye&&!be.copyTags&&(Oe.tags=[]),(await de(Oe,{folderUid:be.$folder.uid},Be)).status==="success"&&pe()},children:({register:be,control:Oe,errors:Ne,getValues:We})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.e,{render:({field:{ref:qe,...st}})=>(0,n.jsx)(se.D,{label:(0,n.jsxs)(re.B,{justifyContent:"space-between",children:[(0,n.jsx)(Y.J,{htmlFor:"title",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-as-form.title",children:"Title"})}),o.$.featureToggles.dashgpt&&Ye&&(0,n.jsx)(L.Z,{onGenerate:rt=>st.onChange(rt)})]}),invalid:!!Ne.title,error:Ne.title?.message,children:(0,n.jsx)(X.p,{...st,onChange:rt=>st.onChange(rt.target.value),"aria-label":(0,s.t)("dashboard.save-dashboard-as-form.aria-label-save-dashboard-title-field","Save dashboard title field"),autoFocus:!0})}),control:Oe,name:"title",rules:{validate:Me(We)}}),(0,n.jsx)(q.e,{render:({field:{ref:qe,...st}})=>(0,n.jsx)(se.D,{label:(0,n.jsxs)(re.B,{justifyContent:"space-between",children:[(0,n.jsx)(Y.J,{htmlFor:"description",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-as-form.description",children:"Description"})}),o.$.featureToggles.dashgpt&&Ye&&(0,n.jsx)(le.V,{onGenerate:rt=>st.onChange(rt)})]}),invalid:!!Ne.description,error:Ne.description?.message,children:(0,n.jsx)(J.f,{...st,onChange:rt=>st.onChange(rt.target.value),"aria-label":(0,s.t)("dashboard.save-dashboard-as-form.aria-label-save-dashboard-description-field","Save dashboard description field"),autoFocus:!0})}),control:Oe,name:"description"}),(0,n.jsx)(se.D,{label:(0,s.t)("dashboard.save-dashboard-as-form.label-folder","Folder"),children:(0,n.jsx)(q.e,{render:({field:{ref:qe,...st}})=>(0,n.jsx)(ee.d,{...st,onChange:(rt,ot)=>st.onChange({uid:rt,title:ot}),value:st.value?.uid}),control:Oe,name:"$folder"})}),!Ye&&(0,n.jsx)(se.D,{label:(0,s.t)("dashboard.save-dashboard-as-form.label-copy-tags","Copy tags"),children:(0,n.jsx)(_.d,{...be("copyTags")})}),(0,n.jsxs)(re.B,{children:[(0,n.jsx)(f.$n,{type:"button",variant:"secondary",onClick:ge,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-as-form.cancel",children:"Cancel"})}),(0,n.jsx)(f.$n,{disabled:$e,type:"submit","aria-label":(0,s.t)("dashboard.save-dashboard-as-form.aria-label-save-dashboard-button","Save dashboard button"),children:$e?(0,s.t)("dashboard.save-dashboard-as-form.saving","Saving..."):(0,s.t)("dashboard.save-dashboard-as-form.save","Save")})]})]})})};var ue=e(51898),ye=e(32635),fe=e(87056),Ee=e(16200),Ae=e(37680),Ge=e(66769);const Fe=["You are an expert in Grafana Dashboards","Your goal is to write a description of the changes for a dashboard to display to the user","You will be given human-readable diffs with most irrelevant lines filtered out"].join(`.
`),Pe=["Respond only with the diff description, which is meant to be loaded directly into the application for the user.",'If there are no substantial user or migration changes, the correct description is "Minor changes only"',`If there are too many changes of either kind, and those changes have a message saying 'too long', the correct response for that section is "Too many changes to auto-summarize"`,"In a diff, lines beginning with - are removed, and lines beginning with + are added.","Lines with neither + nor - are included for context. Be careful not to mark them as added or removed if they do not start with + or -.","If a line is changed, it will show a previous version removed and a new version added","When referring to panel changes, use the panel title","When using panel title, wrap it with double quotes","When the panel changes position, just mention that the panel has changed position","When an entire panel is added or removed, use the panel title and only say it was added or removed and disregard the rest of the changes for that panel","Group together similar changes into one line when multiple panels are affected","Refer to templating elements as variables","Try to make the response as short as possible"].join(`.
`),Ve=({dashboard:Be,onGenerate:$e,disabled:Ye})=>{const de=(0,a.useCallback)(()=>me(Be),[Be]);return(0,n.jsx)(Ee.n,{messages:de,onGenerate:$e,temperature:0,model:fe.Kx.BASE,eventTrackingSrc:Ae.ec.dashboardChanges,toggleTipTitle:"Improve your dashboard changes summary",disabled:Ye})};function me(Be){let{userChanges:$e,migrationChanges:Ye}=(0,Ge.Yy)(Be);return $e.length>8e3&&($e="User changes were too long, fill in the user changes section with 'User changes too long to auto-summarize'"),Ye.split(`
`).length<10?Ye="No significant migration changes":Ye.length>8e3&&(Ye="Migration changes were too long, fill in the migration changes section with 'Migration changes too long to auto-summarize'"),[{content:Fe,role:Ge.Xh.system},{content:`Summarize the following user changes diff under "User changes":
${$e}`,role:Ge.Xh.system},{content:`Be sure to only include substantial user changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Do not include "User Changes" section if there are no substantial user changes to report.`,role:Ge.Xh.system},{content:`Summarize the following migration changes diff under "Migration changes":
${Ye}`,role:Ge.Xh.system},{content:`Be sure to only include substantial migration changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Ignore any threshold step changes or templating list changes.
Ignore other changes and do not include them in the summary. Do not include "Migration Changes" section if there are no substantial migration changes to report.
If there are substantial migration changes, add "Some autogenerated changes are included to update the dashboard to the latest valid schema version" at the end.`,role:Ge.Xh.system},{content:Pe,role:Ge.Xh.system}]}const Se=({dashboard:Be,isLoading:$e,saveModel:Ye,options:de,onSubmit:ge,onCancel:pe,onSuccess:De,onOptionsChange:Me})=>{const be=(0,a.useMemo)(()=>Be.hasTimeChanged(),[Be]),Oe=(0,a.useMemo)(()=>Be.hasVariablesChanged(),[Be]),[Ne,We]=(0,a.useState)(!1),[qe,st]=(0,a.useState)(de.message),rt=(0,r.of)(Qe);return(0,n.jsx)("form",{onSubmit:async ot=>{if(ot.preventDefault(),!ge)return;We(!0),de={...de,message:qe},(await ge(Ye.clone,de,Be)).status==="success"?De():We(!1)},style:{maxWidth:600},children:(0,n.jsxs)(re.B,{gap:2,direction:"column",alignItems:"flex-start",children:[be&&(0,n.jsx)(ye.S,{checked:!!de.saveTimerange,onChange:()=>Me({...de,saveTimerange:!de.saveTimerange}),label:(0,s.t)("dashboard.save-dashboard-form.label-current-range-dashboard-default","Save current time range as dashboard default"),"aria-label":ue.Tp.pages.SaveDashboardModal.saveTimerange}),Oe&&(0,n.jsx)(ye.S,{checked:!!de.saveVariables,onChange:()=>Me({...de,saveVariables:!de.saveVariables}),label:(0,s.t)("dashboard.save-dashboard-form.label-current-variable-values-dashboard-default","Save current variable values as dashboard default"),"aria-label":ue.Tp.pages.SaveDashboardModal.saveVariables}),(0,n.jsxs)("div",{className:rt.message,children:[o.$.featureToggles.aiGeneratedDashboardChanges&&(0,n.jsx)(Ve,{dashboard:Be,onGenerate:ot=>{Me({...de,message:ot}),st(ot)},disabled:!Ye.hasChanges}),(0,n.jsx)(J.f,{value:qe,onChange:ot=>{Me({...de,message:ot.currentTarget.value}),st(ot.currentTarget.value)},placeholder:(0,s.t)("dashboard.save-dashboard-form.placeholder-describe-changes","Add a note to describe your changes."),autoFocus:!0,rows:5})]}),(0,n.jsxs)(re.B,{alignItems:"center",children:[(0,n.jsx)(f.$n,{variant:"secondary",onClick:pe,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-form.cancel",children:"Cancel"})}),(0,n.jsx)(f.$n,{type:"submit",disabled:!Ye.hasChanges||$e,icon:Ne?"spinner":void 0,"aria-label":ue.Tp.pages.SaveDashboardModal.save,children:$e?(0,s.t)("dashboard.save-dashboard-form.saving","Saving..."):(0,s.t)("dashboard.save-dashboard-form.save","Save")}),!Ye.hasChanges&&(0,n.jsx)("div",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-form.no-changes-to-save",children:"No changes to save"})})]})]})})};function Qe(Be){return{message:(0,h.css)({display:"flex",alignItems:"end",flexDirection:"column",width:"100%"})}}var Ue=e(4213),Ie=e(89640),Re=e(47931);const Ke=({dashboard:Be,onCancel:$e})=>{const[Ye,de]=(0,a.useState)(()=>{const pe=Be.getSaveModelClone();return delete pe.id,JSON.stringify(pe,null,2)}),ge=(0,a.useCallback)(()=>{const pe=new Blob([Ye],{type:"application/json;charset=utf-8"});(0,Ue.saveAs)(pe,Be.title+"-"+new Date().getTime()+".json")},[Be.title,Ye]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(re.B,{direction:"column",gap:2,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.cannot-be-saved",children:"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source."}),(0,n.jsx)("br",{}),(0,n.jsx)("i",{children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.see-docs",children:["See"," ",(0,n.jsx)(Ie.Y,{href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",external:!0,children:"documentation"})," ","for more information about provisioning."]})}),(0,n.jsx)("br",{})," ",(0,n.jsx)("br",{}),(0,n.jsxs)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.file-path",values:{filePath:Be.meta.provisionedExternalId},children:[(0,n.jsx)("strong",{children:"File path:"})," ","{{filePath}}"]})]}),(0,n.jsx)(J.f,{spellCheck:!1,value:Ye,onChange:pe=>{de(pe.currentTarget.value)},className:Le.json}),(0,n.jsxs)(re.B,{children:[(0,n.jsx)(f.$n,{variant:"secondary",onClick:$e,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.cancel",children:"Cancel"})}),(0,n.jsx)(Re.b,{icon:"copy",getText:()=>Ye,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.copy-json-to-clipboard",children:"Copy JSON to clipboard"})}),(0,n.jsx)(f.$n,{type:"submit",onClick:ge,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.save-json-to-file",children:"Save JSON to file"})})]})]})})},Le={json:(0,h.css)({height:"400px",width:"100%",overflow:"auto",resize:"none",fontFamily:"monospace"})},ze=({dashboard:Be,onDismiss:$e,onSaveSuccess:Ye,isCopy:de})=>{const[ge,pe]=(0,a.useState)({}),De=Be.getOriginalDashboard(),Me=Be.meta.provisioned,be=Be.version===0,Oe=!!Be.meta.hasUnsavedFolderChange,[Ne,We]=(0,a.useState)(!1),qe=(0,a.useMemo)(()=>{const nt=Be.getSaveModelClone({saveTimerange:!!ge.saveTimerange,saveVariables:!!ge.saveVariables});if(!De)return{clone:nt,diff:{},diffCount:0,hasChanges:!1};const ut=(0,p.G4)(De,nt);let gt=0;for(const ht of Object.values(ut))gt+=ht.length;return{clone:nt,diff:ut,diffCount:gt,hasChanges:(gt>0||Oe)&&!be}},[Be,De,ge,be,Oe]),[st,rt]=(0,a.useState)(!1),{state:ot,onDashboardSave:mt}=H(de),pt=Ye?()=>{$e(),Ye()}:$e,ke=()=>st?(0,n.jsx)(y.l,{diff:qe.diff,oldValue:De,newValue:qe.clone}):be||de?(0,n.jsx)(oe,{dashboard:Be,isLoading:ot.loading,onCancel:$e,onSuccess:pt,onSubmit:mt,isNew:be}):Me?(0,n.jsx)(Ke,{dashboard:Be,onCancel:$e,onSuccess:pt}):(0,n.jsx)(Se,{dashboard:Be,isLoading:ot.loading,saveModel:qe,onCancel:$e,onSuccess:pt,onSubmit:mt,options:ge,onOptionsChange:pe});if(ot.error&&!Ne&&(0,d.NF)(ot.error)&&Q(ot.error.data.status))return(0,n.jsx)(K,{error:ot.error,dashboard:Be,dashboardSaveModel:qe.clone,onDismiss:$e,setErrorIsHandled:We});let Ze=(0,s.t)("dashboard.save-dashboard-drawer.title","Save dashboard");return de?Ze=(0,s.t)("dashboard.save-dashboard-drawer.title-copy","Save dashboard copy"):Me&&(Ze=(0,s.t)("dashboard.save-dashboard-drawer.title-provisioned","Provisioned dashboard")),(0,n.jsxs)(l._,{title:Ze,onClose:$e,subtitle:Be.title,tabs:(0,n.jsxs)(i.U,{children:[(0,n.jsx)(c.o,{label:(0,s.t)("dashboard.save-dashboard-drawer.label-details","Details"),active:!st,onChangeTab:()=>rt(!1)}),qe.hasChanges&&(0,n.jsx)(c.o,{label:(0,s.t)("dashboard.save-dashboard-drawer.label-changes","Changes"),active:st,onChangeTab:()=>rt(!0),counter:qe.diffCount})]}),children:[ke(),o.$.featureToggles.showDashboardValidationWarnings&&(0,n.jsx)(m,{dashboard:Be})]})}},37040:(ne,j,e)=>{"use strict";e.d(j,{eQ:()=>re,MI:()=>X,oV:()=>se,_i:()=>k,vR:()=>_});var n=e(92138),a=e(54092),s=e(60188),d=e(5556),o=e(92745),l=e(36490),i=e(43173),c=e(44248),p=e(45229),h=e(64762),u=e(12066),r=e(15130),v=e(47797),g=e(54),E=e(20437),x=e(58662),m=e(26689),y=e(302),b=e(8001),D=e(98533),f=e(3260),C=e(8535),P=e(11257),T=e(87745),M=e(60249),I=e(49072),B=e(3371),U=e(23289),W=e(22079),V=e(92119),z=e(11534),R=e(32540),O=e(74848),N=e(12161);class F extends c.Bs{constructor(){super(...arguments),this.onDismiss=()=>{(0,V.YQ)(this).closeModal()},this.onConfirm=()=>{const le=(0,V.YQ)(this);le.unlinkLibraryPanel(this.state.panelRef.resolve()),le.closeModal()}}static{this.Component=G}}function G({model:ae}){return(0,O.jsx)(N.l,{isOpen:!0,onConfirm:()=>{ae.onConfirm(),ae.onDismiss()},onDismiss:ae.onDismiss})}var H=e(90856);let K;function w(){return K||(K=(0,b.dp)(D.qm),K)}const Q="metrics-drilldown";function k(ae){(async()=>{const L=ae.parent,ie=L.getPlugin(),oe=[],ue=[],ye=(0,V.YQ)(L),{isEmbedded:fe}=ye.state.meta,Ee=await te(L),Ae=(0,B.bn)(L);if(fe){Ee&&ae.setState({items:[Ee]});return}const Ge=!!ye.state.editPanel;Ge||oe.push({text:(0,o.t)("panel.header-menu.view","View"),iconClassName:"eye",shortcut:"v",href:n.I.getUrlForPartial(l.Ny.getLocation(),{viewPanel:L.getPathId(),editPanel:void 0})}),ye.canEditDashboard()&&ye.state.editable&&!Ae&&!Ge&&oe.push({text:(0,o.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",shortcut:"e",href:(0,W.e0)((0,V.Cs)(L))});const Fe=[];Fe.push({text:(0,o.t)("share-panel.menu.share-link-title","Share link"),iconClassName:"link",shortcut:"p u",onClick:()=>{U.c.sharingCategoryClicked({item:x.wr.link,shareResource:(0,x.hD)(L?.getRef())});const me=new I.j({shareView:x.wr.link,panelRef:L.getRef()});ye.showModal(me)}}),Fe.push({text:(0,o.t)("share-panel.menu.share-embed-title","Share embed"),iconClassName:"arrow",shortcut:"p e",onClick:()=>{U.c.sharingCategoryClicked({item:x.wr.embed,shareResource:(0,x.hD)(L.getRef())});const me=new I.j({shareView:x.wr.embed,panelRef:L.getRef()});ye.showModal(me)}}),r.TP.isSignedIn&&i.$.snapshotEnabled&&r.TP.hasPermission(P.w.SnapshotsCreate)&&Fe.push({text:(0,o.t)("share-panel.menu.share-snapshot-title","Share snapshot"),iconClassName:"camera",shortcut:"p s",onClick:()=>{U.c.sharingCategoryClicked({item:x.wr.snapshot,shareResource:(0,x.hD)(L.getRef())});const me=new I.j({shareView:x.wr.snapshot,panelRef:L.getRef()});ye.showModal(me)}}),oe.push({type:"submenu",text:(0,o.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",subMenu:Fe,onClick:me=>{me.preventDefault()}}),ye.state.isEditing&&!Ae&&!Ge&&ue.push({text:(0,o.t)("panel.header-menu.duplicate","Duplicate"),iconClassName:"file-copy-alt",onClick:()=>{ye.duplicatePanel(L)},shortcut:"p d"}),Ge||ue.push({text:(0,o.t)("panel.header-menu.copy","Copy"),iconClassName:"copy",onClick:()=>{ye.copyPanel(L)}}),ye.state.isEditing&&!Ae&&!Ge&&((0,V.ME)(L)?(ue.push({text:(0,o.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),iconClassName:"link-broken",onClick:()=>{ye.showModal(new F({panelRef:L.getRef()}))}}),ue.push({text:(0,o.t)("panel.header-menu.replace-library-panel","Replace library panel"),iconClassName:"library-panel",onClick:()=>{ye.onShowAddLibraryPanelDrawer(L.getRef())}})):ue.push({text:(0,o.t)("share-panel.menu.new-library-panel-title","New library panel"),iconClassName:"plus-square",onClick:()=>{const me=new I.j({shareView:x.wr.libraryPanel,panelRef:L.getRef()});ye.showModal(me)}})),(0,g.q0)()&&ue.push({text:(0,o.t)("panel.header-menu.new-alert-rule","New alert rule"),iconClassName:"bell",onClick:me=>J(L)}),ee(L.state.options)&&!Ge&&ue.push({text:L.state.options.legend.showLegend?(0,o.t)("panel.header-menu.hide-legend","Hide legend"):(0,o.t)("panel.header-menu.show-legend","Show legend"),iconClassName:L.state.options.legend.showLegend?"legend-hide":"legend-show",onClick:me=>{me.preventDefault(),_(L)},shortcut:"p l"}),ye.canEditDashboard()&&ie&&!ie.meta.skipDataQuery&&!Ae&&ue.push({text:(0,o.t)("panel.header-menu.get-help","Get help"),iconClassName:"question-circle",onClick:me=>{me.preventDefault(),ye.showModal(new M.C({panelRef:L.getRef(),currentTab:m.q.Help}))}}),Ee&&oe.push(Ee),oe.push(q(ie,L,ye)),i.$.featureToggles.panelTimeSettings&&oe.push({text:(0,o.t)("panel.header-menu.time-settings","Time settings"),iconClassName:"clock-nine",onClick:me=>{me.preventDefault(),ye.showModal(new H.s({panelRef:L.getRef()}))}}),w();const{extensions:Ve}=K({extensionPointId:a.SM.DashboardPanelMenu,context:Y(L,ye),limitPerPlugin:3});if(Ve.length>0&&!ye.state.isEditing){const me=Ve.filter(Ue=>Ue.type===a.u6.link),[Se,Qe]=me.reduce(([Ue,Ie],Re)=>(Re.category===Q?Ue.push(Re):Ie.push(Re),[Ue,Ie]),[[],[]]);Se.length>0&&oe.push({text:(0,o.t)("dashboard-scene.panel-menu-behavior.async-func.text.metrics-drilldown","Metrics drilldown"),iconClassName:"code-branch",type:"submenu",subMenu:(0,f.N9)(Se)}),Qe.length>0&&oe.push({text:(0,o.t)("dashboard-scene.panel-menu-behavior.async-func.text.extensions","Extensions"),iconClassName:"plug",type:"submenu",subMenu:(0,f.N9)(Qe)})}ue.length&&oe.push({type:"submenu",text:(0,o.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:ue,onClick:me=>{me.preventDefault()}}),ye.state.isEditing&&!Ae&&!Ge&&(oe.push({text:"",type:"divider"}),oe.push({text:(0,o.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:()=>{X(ye,L)},shortcut:"p r"})),ae.setState({items:oe})})()}async function te(ae){const le=await(0,W.Lp)(ae);if(le)return{text:(0,o.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",shortcut:"p x",href:le}}function q(ae,le,L){const ie=[];return ae&&!ae.meta.skipDataQuery&&(ie.push({text:(0,o.t)("panel.header-menu.inspect-data","Data"),onClick:oe=>{oe.preventDefault(),L.showModal(new M.C({panelRef:le.getRef(),currentTab:m.q.Data}))}}),L instanceof z.H$&&L.state.meta.canEdit&&ie.push({text:(0,o.t)("panel.header-menu.query","Query"),onClick:oe=>{oe.preventDefault(),L.showModal(new M.C({panelRef:le.getRef(),currentTab:m.q.Query}))}})),ie.push({text:(0,o.t)("panel.header-menu.inspect-json","Panel JSON"),onClick:oe=>{oe.preventDefault(),L.showModal(new M.C({panelRef:le.getRef(),currentTab:m.q.JSON}))}}),{text:(0,o.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",shortcut:"i",onClick:oe=>{oe.isDefaultPrevented()||L.showModal(new M.C({panelRef:le.getRef(),currentTab:m.q.Data}))},subMenu:ie.length>0?ie:void 0}}function se(ae){if(!(ae.parent instanceof R.$))throw new Error("parent of VizPanelLinksMenu must be VizPanelLinks");const le=ae.parent.parent;if(!(le instanceof c.Eb))throw new Error("parent of VizPanelLinks must be VizPanel");ae.setState({links:re(le)})}function re(ae){const le=(oe,ue)=>c.jh.interpolate(ae,oe,ue),L=(0,y.CH)(ae,le);if(!L)return[];const ie=L.getLinks(le);return ie.map(oe=>({...oe,onClick:(ye,fe)=>{U.c.panelLinkClicked({has_multiple_links:ie.length>1}),oe.onClick?.(ye,fe)}}))}function Y(ae,le){const L=c.jh.getTimeRange(ae);let ie=(0,V.un)(ae);const oe=ie?.state.queries,ue=(0,V.Cs)(ae);let ye={};return ae.state.$variables&&ae.state.$variables.state.variables.forEach(fe=>{fe instanceof c.xc&&(ye={...ye,[fe.state.name]:{value:fe.getValue(),text:fe.getValueText()}})}),{id:ue,pluginId:ae.state.pluginId,title:ae.state.title,timeRange:L.state.value.raw,timeZone:(0,s.O)({timeZone:L.getTimeZone()}),dashboard:{uid:le.state.uid,title:le.state.title,tags:le.state.tags||[]},targets:oe,scopedVars:ye,data:ie?.state.data}}function X(ae,le){p.A.publish(new T.bY({title:(0,o.t)("dashboard-scene.on-remove-panel.title.remove-panel","Remove panel"),text:(0,o.t)("dashboard-scene.on-remove-panel.text.remove-panel","Are you sure you want to remove this panel?"),icon:"trash-alt",yesText:"Remove",onConfirm:()=>ae.removePanel(le)}))}const J=async ae=>{try{const le=await(0,E.J6)(ae),L=d.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(le),returnTo:window.location.pathname+window.location.search});l.Ny.push(L)}catch(le){const L=`Error getting rule values from the panel: ${(0,v.q6)(le)}`;(0,C.JD)((0,u.dx)((0,h.gi)(L)));return}};function _(ae){const le=ae.state.options;ee(le)&&typeof le.legend.showLegend=="boolean"&&ae.onOptionsChange({legend:{showLegend:!le.legend.showLegend}})}function ee(ae){return ae!=null&&typeof ae=="object"&&"legend"in ae}},37168:(ne,j,e)=>{"use strict";e.d(j,{X:()=>k,v:()=>te});var n=e(74848),a=e(84057),s=e(65307),d=e(96540),o=e(54148),l=e(20877),i=e(90382),c=e(32899),p=e(11594),h=e(92745),u=e(43173),r=e(36490),v=e(56297),g=e(34999),E=e(13791),x=e(11098),m=e(1506),y=e(27963),b=e(73427);function D(q){return console.error(q),C("Exception thrown","See console for details")}function f(){return C("Page not found","404 Error")}function C(q,se){const re={text:q,subTitle:se,icon:"exclamation-triangle"};return{node:re,main:re}}var P=e(47797),T=e(28337),M=e(16900),I=e(95027),B=e(37640),U=e(22465),W=e(70715),V=e(3548);const z={loading:!0,loadingError:!1,pluginNav:null,plugin:null};function R({pluginId:q,pluginNavSection:se}){const{pluginId:re=""}=(0,o.g)();q=q||re;const Y=(0,T.OG)(),X=(0,T.TX)(),J=(0,T.ZV)(),_=(0,T.ov)(),ee=(0,o.zy)(),[ae,le]=(0,d.useReducer)(O.reducer,z),L=u.$.appSubUrl+ee.pathname+ee.search,{plugin:ie,loading:oe,loadingError:ue,pluginNav:ye}=ae,fe=(0,B.Wy)(L,se),Ee=(0,d.useMemo)(()=>(0,r.SE)(ee.search),[ee.search]),Ae=(0,d.useMemo)(()=>(0,W.S)(fe),[fe]),Ge=(0,y.Il)();(0,d.useEffect)(()=>{N(q,le)},[q]);const Fe=(0,d.useCallback)(Se=>le(O.actions.changeNav(Se)),[]);if(!ie||q!==ie.meta.id){const Se=Ge.chrome.state.getValue().layout;return(0,n.jsxs)(E.Y,{navModel:fe,pageNav:{text:""},layout:Se,children:[oe&&(0,n.jsx)(x.A,{}),!oe&&ue&&(0,n.jsx)(m.L,{entity:"App"})]})}if(!ie.root)return(0,n.jsx)(E.Y,{navModel:fe??C("Plugin load error"),children:(0,n.jsx)("div",{children:(0,n.jsx)(h.x6,{i18nKey:"plugins.app-root-page.no-root-app-page-component-found",children:"No root app page component found"})})});const Pe=ie.root&&(0,n.jsx)(l.a,{meta:ie.meta,children:(0,n.jsx)(U.K,{fallback:({error:Se,errorInfo:Qe})=>(0,n.jsx)(v.D,{title:(0,h.t)("plugins.app-root-page.error-loading-plugin","Plugin failed to load"),error:Se,errorInfo:Qe}),children:(0,n.jsx)(V.i,{pluginId:q,children:(0,n.jsx)(T.AZ,{registries:{addedLinksRegistry:Y.readOnly(),addedComponentsRegistry:X.readOnly(),exposedComponentsRegistry:J.readOnly(),addedFunctionsRegistry:_.readOnly()},children:(0,n.jsx)(ie.root,{meta:ie.meta,basename:ee.pathname,onNavChanged:Fe,query:Ee,path:ee.pathname})})})})}),Ve=()=>{if(!ie.meta?.includes)return!0;const Se=ie.meta?.includes.find(Ue=>Ue.path===ee.pathname);if(!Se)return!0;if(Se?.action)return b.TP.hasPermission(Se.action);if(b.TP.isGrafanaAdmin||b.TP.user.orgRole===i.X.Admin)return!0;const Qe=Se?.role||"";return!Qe||b.TP.isEditor&&Qe===i.X.Viewer?!0:b.TP.hasRole(Qe)},me=()=>(0,n.jsx)(g.F,{severity:"warning",title:(0,h.t)("plugins.app-root-page.access-denied.title-access-denied","Access denied"),children:(0,n.jsx)(h.x6,{i18nKey:"plugins.app-root-page.access-denied.permission",children:"You do not have permission to see this page."})});return Ve()?ye?(0,n.jsx)(n.Fragment,{children:fe?(0,n.jsx)(E.Y,{navModel:fe,pageNav:ye?.node,children:(0,n.jsx)(E.Y.Contents,{isLoading:oe,children:Pe})}):(0,n.jsx)(E.Y,{children:Pe})}):(0,n.jsx)(W.A.Provider,{value:Ae,children:Pe}):(0,n.jsx)(me,{})}const O=(0,s.Z0)({name:"prom-builder-container",initialState:z,reducers:{setState:(q,se)=>{Object.assign(q,se.payload)},changeNav:(q,se)=>{let re=se.payload;re&&re.node.children&&(re={...re,node:{...re.main,hideFromBreadcrumbs:!0}}),q.pluginNav=re}}});async function N(q,se){try{const re=await(0,I.x)(q).then(Y=>{const X=F(Y);return X?(b.lE.emit(c.r1.alertError,[X]),se(O.actions.setState({pluginNav:C(X)})),null):M.y.importApp(Y)});se(O.actions.setState({plugin:re,loading:!1,loadingError:!1,pluginNav:null}))}catch(re){se(O.actions.setState({plugin:null,loading:!1,loadingError:!0,pluginNav:f()}));const Y=re instanceof Error?re:new Error((0,P.q6)(re));B.z4.logError(Y),console.error(Y)}}function F(q){return q?q.type!==p.QE.app?"Plugin must be an app":q.enabled?null:"Application Not Enabled":"Unknown Plugin"}const G=R;var H=e(8535);const K=q=>"pluginId"in q&&"id"in q,w=q=>q.startsWith("standalone-plugin-page-/");function Q(q){const se=(0,a.rH)(q),re=`/a/${q.pluginId}`,Y=w(q.id)&&q.url||re,X=w(q.id)&&!q.url?.startsWith("/a/");return{path:`${Y}/*`,sensitive:X,component:()=>(0,n.jsx)(G,{pluginId:q.pluginId,pluginNavSection:se})}}function k(){const q=(0,H.Gu)(),{navIndex:se}=q;return[...Object.values(se).filter(K).map(Q),{path:"/a/:pluginId/*",component:()=>(0,n.jsx)(G,{pluginNavSection:se.home})}]}function te(q){const se=(0,H.Gu)(),{navIndex:re}=se,Y=Object.values(re).filter(K).find(X=>X.pluginId===q);return Y?Q(Y):{path:"/a/:pluginId/*",component:()=>(0,n.jsx)(G,{pluginNavSection:re.home})}}},37234:(ne,j,e)=>{"use strict";e.d(j,{yR:()=>U,cZ:()=>V,HT:()=>k,M0:()=>K,f8:()=>ie,J9:()=>w,Wr:()=>le,sg:()=>ae});var n=e(88838),a=e(2543),s=e(88483),d=e(50832),o=e(65474),l=e(67770),i=e(739),c=e(41119),p=e(10279),h=e(95004),u=e(64394),r=e(25229),v=e(71642),g=e(63704),E=e(80011),x=e(17548),m=e(28105),y=e(50204),b=e(92745),D=e(43173),f=e(8255),C=e(65642);function P(oe,ue){return C.Ay.bootData?.user?.lightTheme?ue:oe}var T=e(12282),M=e(46072),I=e(74746);const B="Line limit",U="Common labels",W="Total lines",V={[l.$b.critical]:f.Tj[7],[l.$b.error]:f.Tj[4],[l.$b.warning]:f.Tj[1],[l.$b.info]:f.Tj[0],[l.$b.debug]:f.Tj[5],[l.$b.trace]:f.Tj[2],[l.$b.unknown]:P("#8e8e8e","#bdc4cd")},z=1,R=1e3*z,O=60*R,N=60*O,F=24*N,G=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function H(oe,ue,ye){switch(ye){case i.fY.exact:return oe.entry.replace(G,"")===ue.entry.replace(G,"");case i.fY.numbers:return oe.entry.replace(/\d/g,"")===ue.entry.replace(/\d/g,"");case i.fY.signature:return oe.entry.replace(/\w/g,"")===ue.entry.replace(/\w/g,"");default:return!1}}function K(oe,ue){return ue===i.fY.none?oe:oe.reduce((ye,fe,Ee)=>{const Ae=ye[ye.length-1];return Ee>0&&H(fe,Ae,ue)?Ae.duplicates++:ye.push({...fe,duplicates:0}),ye},[])}function w(oe,ue){const ye={},fe=[];for(const Ee of oe){let Ae=ye[Ee.logLevel];Ae||(ye[Ee.logLevel]=Ae={lastTs:null,datapoints:[],target:Ee.logLevel,color:V[Ee.logLevel]},fe.push(Ae));const Ge=Math.floor(Ee.timeEpochMs/ue)*ue;Ge===Ae.lastTs?Ae.datapoints[Ae.datapoints.length-1][0]++:(Ae.datapoints.push([1,Ge]),Ae.lastTs=Ge);for(const Fe of fe)Fe!==Ae&&Fe.lastTs!==Ge&&(Fe.datapoints.push([0,Ge]),Fe.lastTs=Ge)}return fe.map((Ee,Ae)=>{Ee.datapoints.sort((Ve,me)=>Ve[1]-me[1]);const Ge=(0,c.Vc)(Ee),Pe=new p.L(Ge).getFirstFieldOfType(h.PU.number);return Ge.fields[Pe.index].config.min=0,Ge.fields[Pe.index].config.decimals=0,Ge.fields[Pe.index].config.color={mode:u.Y.Fixed,fixedColor:Ee.color},Ge.fields[Pe.index].config.custom={drawStyle:i.GR.Bars,barAlignment:i.Nj.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:Ee.color,pointColor:Ee.color,fillColor:Ee.color,lineWidth:0,fillOpacity:100,stacking:{mode:i.gs.Normal,group:"A"}},Ge})}function Q(oe){return oe.fields.some(ue=>ue.type===h.PU.time)&&oe.fields.some(ue=>ue.type===h.PU.string)}function k(oe,ue,ye,fe,Ee){const{logSeries:Ae}=q(oe),Ge=re(Ae,fe,!!Ee);if(Ge){if(Ge.queries=fe,ue&&Ge.rows.length>0){const Fe=Ge.rows.sort(I.M1),{visibleRange:Pe,bucketSize:Ve,visibleRangeMs:me,requestedRangeMs:Se}=te(Fe,ue,ye);Ge.visibleRange=Pe,Ge.bucketSize=Ve,Ge.series=w(Fe,Ve),Ge.meta&&(Ge.meta=Y(Ge,me,Se))}else Ge.series=[];return Ge}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:fe}}function te(oe,ue,ye,fe=20,Ee=1e3){let Ae=ye,Ge=ue,Fe=Math.max(Ge*fe,Ee),Pe,Ve;if(ye){const me=oe[0].timeEpochMs,Se=oe[oe.length-1].timeEpochMs,Qe=me<Se?me:Se,Ue=ye.to-Qe;if(Ve=ye.to-ye.from,Pe=Math.abs(me-Se),Pe>0){const Ie=Ue/Ve;Ge*=Ie,Fe=Math.max(Math.ceil(Ge*fe),Ee),Ae={from:Math.floor(Qe/Fe)*Fe,to:ye.to}}else Pe=1}return{bucketSize:Fe,visibleRange:Ae,visibleRangeMs:Pe,requestedRangeMs:Ve}}function q(oe){const ue=[],ye=[];for(const fe of oe){if(Q(fe)||!fe.fields.length){ye.push(fe);continue}fe.length>0&&ue.push(fe)}return{logSeries:ye,metricSeries:ue}}function se(oe,ue,ye){const fe=oe.values[ye],Ae=(0,r.yT)(fe).valueOf();if(ue)return{ts:fe,timeEpochMs:Ae,timeEpochNs:ue.values[ye]};if(oe.nanos!==void 0){const Ge=oe.nanos[ye].toString().padStart(6,"0"),Fe=`${Ae}${Ge}`;return{ts:fe,timeEpochMs:Ae,timeEpochNs:Fe}}return{ts:fe,timeEpochMs:Ae,timeEpochNs:Ae+"000000"}}function re(oe,ue=[],ye=!1){if(oe.length===0)return;const fe=[];let Ee=[];const Ae=oe.filter(Be=>Be.fields.length);Ae.length&&Ae.forEach(Be=>{const $e=(0,M.Os)(Be);if($e!=null){const Ye=$e.getLogFrameLabelsAsLabels()??void 0,de={rawFrame:Be,logsFrame:$e,frameLabels:Ye};Ee.push(de),Ye&&Ye.length>0&&fe.push(Ye)}});const Ge=fe.flat(),Fe=Ge.length>0?(0,v.yO)(Ge):{};let Pe=[],Ve=!1;const me=(0,I.kA)();for(const Be of Ee){const{logsFrame:$e,rawFrame:Ye,frameLabels:de}=Be,{timeField:ge,timeNanosecondField:pe,bodyField:De,severityField:Me,idField:be}=$e;for(let Oe=0;Oe<Ye.length;Oe++){const{ts:Ne,timeEpochMs:We,timeEpochNs:qe}=se(ge,pe??void 0,Oe),st=De.values[Oe]??"",rt=typeof st=="string"?st:JSON.stringify(st),ot=g.sQ.hasAnsiCodes(rt),mt=!!rt.match(/\\n|\\t|\\r/),pt=Ye.meta?.custom?.searchWords??Ye.meta?.searchWords??[],ke=ot?n.Ay.strip(rt):rt,Ze=de?.[Oe],nt=(0,v.s6)(Ze,Fe);Object.keys(nt).length>0&&(Ve=!0);let ut=l.$b.unknown;const gt=Me&&Me.values[Oe]||(Ze?.level??Ze?.detected_level);typeof gt=="number"||typeof gt=="string"?ut=(0,I.EK)(gt):ut=(0,I.XM)(ke);const ht=ue.find(wt=>wt.refId===Ye.refId)?.datasource,tt=ht?.type,Ot=ht?.uid,jt={entryFieldIndex:De.index,rowIndex:Oe,dataFrame:Ye,logLevel:ut,timeFromNow:(0,E.fq)(Ne),timeEpochMs:We,timeEpochNs:qe,timeLocal:(0,E.LE)(Ne,{timeZone:"browser"}),timeUtc:(0,E.LE)(Ne,{timeZone:"utc"}),uniqueLabels:nt,hasAnsi:ot,hasUnescapedContent:mt,searchWords:pt,entry:ke,raw:rt,labels:Ze||{},uid:`${Ye.refId}_${be?be.values[Oe]:Oe.toString()}`,datasourceType:tt,datasourceUid:Ot};be!==null&&(jt.rowId=be.values[Oe]),!(ye&&me(jt))&&Pe.push(jt)}}const Se=[],Ue=oe.filter(Be=>Be?.meta?.custom?.limit??Be?.meta?.limit).reduce((Be,$e)=>(Be[$e.refId??""]=$e.meta?.custom?.limit??$e.meta?.limit??0,Be),{}),Ie=Object.values(Ue).reduce((Be,$e)=>Be+=$e,0);Ie>0&&Se.push({label:B,value:Ie,kind:l.tG.Number});const Re=oe.reduce((Be,$e)=>Be+=$e.meta?.custom?.total,0);Re>0&&Se.push({label:W,value:Re,kind:l.tG.Number});let Ke=0;const Le={};let ze=!1;for(const Be of oe){const $e=Be.meta?.custom?.lokiQueryStatKey,{refId:Ye}=Be;if(!ze&&Be.meta?.custom?.error&&(Se.push({label:"",value:Be.meta?.custom.error,kind:l.tG.Error}),ze=!0),Ye&&!Le[Ye]){if($e&&Be.meta?.stats){const de=Be.meta.stats.find(ge=>ge.displayName===$e);de&&(Ke+=de.value)}Le[Ye]=!0}}if(Ke>0){const{text:Be,suffix:$e}=(0,y.rT)("B")(Ke);Se.push({label:(0,b.t)("logs.log-series-to-logs-model.label.total-bytes-processed","Total bytes processed"),value:`${Be} ${$e}`,kind:l.tG.String})}return(0,a.size)(Fe)>0&&Se.push({label:U,value:Fe,kind:l.tG.LabelsMap}),{hasUniqueLabels:Ve,meta:Se,rows:Pe}}function Y(oe,ue,ye){if(!oe.meta)return[];let fe=[...oe.meta];const Ee=fe.findIndex(Ge=>Ge.label===B),Ae=Ee>=0&&fe[Ee]?.value;if(Ae&&typeof Ae=="number"&&Ae>0){let Ge;if(Ae===oe.rows.length&&ue&&ye){if(Ge=`${Ae} reached`,!oe.queries?.some(Pe=>"direction"in Pe&&Pe.direction===T.ti.Scan)){const Pe=(ue/ye*100).toFixed(2);Ge=`${Ae} lines shown \u2014 ${Pe}% (${x.msRangeToTimeString(ue)}) of ${x.msRangeToTimeString(ye)}`}}else{const Fe=D.$.featureToggles.logsInfiniteScrolling?"displayed":"returned";Ge=`${oe.rows.length} ${oe.rows.length>1?"lines":"line"} ${Fe}`}fe[Ee]={label:"",value:Ge,kind:l.tG.String}}return fe}function X(oe,ue){const ye=ue&&oe===l.$b.unknown?"logs":oe,fe=V[oe];return{displayNameFromDS:ye,color:{mode:u.Y.Fixed,fixedColor:fe},custom:{drawStyle:i.GR.Bars,barAlignment:i.Nj.Center,lineColor:fe,pointColor:fe,fillColor:fe,lineWidth:0,fillOpacity:100,stacking:{mode:i.gs.Normal,group:"A"}}}}const J=(oe,ue,ye)=>(oe.fields=oe.fields.map(fe=>(fe.type===h.PU.number&&(fe.config={...fe.config,...X(ue(oe),ye)}),fe)),oe);function _(oe){let ue;try{ue=new p.L(oe).getFirstFieldOfType(h.PU.number)}catch{}return ue?.labels?ee(ue.labels):l.$b.unknown}function ee(oe){const ue=oe.level??oe.detected_level??oe.lvl??oe.loglevel??"";return ue?(0,I.EK)(ue):l.$b.unknown}function ae(oe,ue,ye){const fe=ue.range,Ee=ye.targets,Ae=_,Ge=fe.to.valueOf()-fe.from.valueOf(),Fe=L(ue.scopedVars,Ge);return ue.interval=Fe.interval,ue.scopedVars.__interval={value:Fe.interval,text:Fe.interval},Fe.intervalMs!==void 0&&(ue.intervalMs=Fe.intervalMs,ue.scopedVars.__interval_ms={value:Fe.intervalMs,text:Fe.intervalMs}),ue.hideFromInspector=!0,new s.c(Pe=>{let Ve=[];Pe.next({state:m.Gu.Loading,error:void 0,data:[]});const me=oe.query(ue),Qe=((0,d.A)(me)?me:(0,o.H)(me)).subscribe({complete:()=>{Pe.complete()},next:Ue=>{const{error:Ie}=Ue;if(Ie!==void 0)Pe.next({state:m.Gu.Error,error:Ie,data:Ue.data}),Pe.error(Ie);else{const Re=(0,a.groupBy)(Ue.data,"refId");Ve=Ue.data.map(Ke=>{if(Ke.meta?.dataTopic===i.QR.Annotations)return Ke;let Le=Ke.refId||"";Le.startsWith("log-volume-")&&(Le=Le.substr(11));const ze={logsVolumeType:l.Aj.FullRange,absoluteRange:{from:fe.from.valueOf(),to:fe.to.valueOf()},datasourceName:oe.name,sourceQuery:Ee.find(Be=>Be.refId===Le)};return Ke.meta={...Ke.meta,custom:{...Ke.meta?.custom,...ze}},J(Ke,Ae,Re[Ke.refId].length===1)}),Pe.next({state:Ue.state,error:void 0,data:Ve})}},error:Ue=>{Pe.next({state:m.Gu.Error,error:Ue,data:[]}),Pe.error(Ue)}});return()=>{Qe?.unsubscribe()}})}function le(oe,ue){return ue.hideFromInspector=!0,new s.c(ye=>{let fe=[];ye.next({state:m.Gu.Loading,error:void 0,data:[]});const Ee=oe.query(ue),Ge=((0,d.A)(Ee)?Ee:(0,o.H)(Ee)).subscribe({complete:()=>{ye.next({state:m.Gu.Done,error:void 0,data:fe}),ye.complete()},next:Fe=>{const{error:Pe}=Fe;Pe!==void 0?(ye.next({state:m.Gu.Error,error:Pe,data:[]}),ye.error(Pe)):fe=Fe.data.map(Ve=>{const me=(0,c.Vc)(Ve),{timeIndex:Se}=(0,c.KR)(me);return(0,c.ES)(me,Se)})},error:Fe=>{ye.next({state:m.Gu.Error,error:Fe,data:[]}),ye.error(Fe)}});return()=>{Ge?.unsubscribe()}})}function L(oe,ue){if(oe.__interval_ms){let ye=oe.__interval_ms.value,fe="";return ue<R*5?(ye=z,fe="1ms"):ye>N?(ye=F,fe="1d"):ye>O?(ye=N,fe="1h"):ye>R?(ye=O,fe="1m"):(ye=R,fe="1s"),{interval:fe,intervalMs:ye}}else return{interval:"$__interval"}}function ie(oe){const ue=oe.dataFrame;return ue.length===0||ue.length<=oe.rowIndex?null:(0,c.EI)({fields:ue.fields.map(fe=>({...fe,values:[fe.values[oe.rowIndex]]})),refId:ue.refId})}},37235:(ne,j,e)=>{"use strict";e.d(j,{j:()=>c});var n=e(74848),a=e(22803),s=e(92745),d=e(94959),o=e(30703),l=e(45967),i=e(45558);const c=({dataSourceConfig:p,onChange:h})=>{const u=p.secureJsonFields&&p.secureJsonFields.tlsCACert,r=p.secureJsonFields&&p.secureJsonFields.tlsClientCert,v=p.secureJsonFields&&p.secureJsonFields.tlsClientKey,g=p.jsonData&&p.jsonData.serverName,E=D=>f=>{f.preventDefault();const C={...p.secureJsonFields};C[D]=!1,h({...p,secureJsonFields:C})},x=D=>f=>{const C={...p.secureJsonData};C[D]=f.currentTarget.value,h({...p,secureJsonData:C})},m=D=>{const f={...p.jsonData,serverName:D.currentTarget.value};h({...p,jsonData:f})},y="-----BEGIN CERTIFICATE-----";return(0,n.jsxs)("div",{className:"gf-form-group",children:[(0,n.jsxs)("div",{className:(0,a.cx)("gf-form",(0,a.css)({alignItems:"baseline"})),children:[(0,n.jsx)("h6",{children:(0,n.jsx)(s.x6,{i18nKey:"grafana-ui.data-source-settings.tls-heading",children:"TLS/SSL Auth Details"})}),(0,n.jsx)(l.m,{placement:"right-end",content:(0,s.t)("grafana-ui.data-source-settings.tls-tooltip","TLS/SSL Certs are encrypted and stored in the Grafana database."),theme:"info",children:(0,n.jsx)(o.I,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})})]}),(0,n.jsxs)("div",{children:[p.jsonData.tlsAuthWithCACert&&(0,n.jsx)(i.K,{hasCert:!!u,onChange:x("tlsCACert"),placeholder:(0,s.t)("grafana-ui.data-source-settings.tls-certification-placeholder","Begins with {{certificateBeginsWith}}",{certificateBeginsWith:y}),label:(0,s.t)("grafana-ui.data-source-settings.tls-certification-label","CA Cert"),onClick:E("tlsCACert")}),p.jsonData.tlsAuth&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)(d.z,{label:(0,s.t)("grafana-ui.data-source-settings.tls-server-name-label","ServerName"),labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:g&&p.jsonData.serverName,onChange:m})}),(0,n.jsx)(i.K,{hasCert:!!r,label:(0,s.t)("grafana-ui.data-source-settings.tls-client-certification-label","Client Cert"),onChange:x("tlsClientCert"),placeholder:(0,s.t)("grafana-ui.data-source-settings.tls-certification-placeholder","Begins with {{certificateBeginsWith}}",{certificateBeginsWith:y}),onClick:E("tlsClientCert")}),(0,n.jsx)(i.K,{hasCert:!!v,label:(0,s.t)("grafana-ui.data-source-settings.tls-client-key-label","Client Key"),placeholder:(0,s.t)("grafana-ui.data-source-settings.tls-client-key-placeholder","Begins with {{privateKeyBeginsWith}}",{privateKeyBeginsWith:"-----BEGIN RSA PRIVATE KEY-----"}),onChange:x("tlsClientKey"),onClick:E("tlsClientKey")})]})]})]})}},37256:(ne,j,e)=>{"use strict";e.d(j,{JC:()=>I,JJ:()=>y,LR:()=>m,NJ:()=>U,aU:()=>D,ai:()=>T,h9:()=>B,mj:()=>x,nT:()=>M,t5:()=>b,y7:()=>W});var n=e(65307),a=e(75505),s=e(45650),d=e(65474),o=e(62467),l=e(66847),i=e(12974),c=e(68143),p=e(43173),h=e(92391),u=e(14658),r=e(59253),v=e(95256),g=e(4476),E=e(13660);const x=(0,n.zD)(`${v.fu}/fetchAll`,async(z,R)=>{try{R.dispatch({type:`${v.fu}/fetchLocal/pending`}),R.dispatch({type:`${v.fu}/fetchRemote/pending`});const O=p.$.pluginAdminExternalManageEnabled?(0,d.H)((0,r.Ap)()):(0,o.of)(void 0),N=p.$.pluginAdminExternalManageEnabled?(0,d.H)((0,r.XP)()):(0,o.of)(void 0),F=500,G=(0,d.H)((0,r.Bj)()),H=(0,d.H)((0,r.Gd)()),K=(0,d.H)((0,r.T_)()).pipe((0,l.W)(w=>(R.dispatch({type:`${v.fu}/fetchRemote/rejected`}),console.error(w),(0,o.of)([]))));return(0,s.p)({local:H,remote:K,instance:O,provisioned:N,pluginErrors:G}).pipe((0,i.w)({each:F,with:()=>(K.subscribe(async w=>{if(R.dispatch({type:`${v.fu}/fetchRemote/fulfilled`}),w.length>0){const Q=await(0,a.s)(H),k=await(0,a.s)(O),te=await(0,a.s)(N),q=await(0,a.s)(G);R.dispatch(D((0,g.td)({local:Q,remote:w,instance:k,provisioned:te,pluginErrors:q})))}}),(0,s.p)({local:H,instance:O,provisioned:N,pluginErrors:G}))})).subscribe(({local:w,remote:Q,instance:k,provisioned:te,pluginErrors:q})=>{w&&Q?(R.dispatch({type:`${v.fu}/fetchLocal/fulfilled`}),R.dispatch({type:`${v.fu}/fetchRemote/fulfilled`}),R.dispatch(D((0,g.td)({local:w,remote:Q,instance:k,provisioned:te,pluginErrors:q})))):w&&(R.dispatch({type:`${v.fu}/fetchLocal/fulfilled`}),R.dispatch(D((0,g.td)({local:w,pluginErrors:q}))))},w=>(console.log(w),R.dispatch({type:`${v.fu}/fetchLocal/rejected`}),R.dispatch({type:`${v.fu}/fetchRemote/rejected`}),R.rejectWithValue("Unknown error."))),null}catch{return R.rejectWithValue("Unknown error.")}}),m=(0,n.zD)(`${v.fu}/fetchAllLocal`,async(z,R)=>{try{return(await(0,r.Gd)()).map(N=>(0,g.kH)(N))}catch{return R.rejectWithValue("Unknown error.")}}),y=(0,n.zD)(`${v.fu}/fetchRemotePlugins`,async(z,R)=>{try{return await(0,r.T_)()}catch(O){return(0,c.NF)(O)&&(O.isHandled=!0),R.rejectWithValue([])}}),b=(0,n.zD)(`${v.fu}/fetchDetails`,async(z,R)=>{try{const O=await(0,r.CB)(z);return{id:z,changes:{details:O}}}catch{return R.rejectWithValue("Unknown error.")}}),D=(0,n.VP)(`${v.fu}/addPlugins`),f=(0,n.VP)(`${v.fu}/addLocalPlugins`),C=(0,n.VP)(`${v.fu}/addLocalPlugins`),P=(0,n.VP)(`${v.fu}/addLocalPlugins`),T=(0,n.zD)(`${v.fu}/install`,async({id:z,version:R,installType:O=E.u8.INSTALL},N)=>{const F={isInstalled:!0,installedVersion:R};O===E.u8.UPDATE&&(F.hasUpdate=!1),O===E.u8.DOWNGRADE&&(F.hasUpdate=!0);try{return await(0,r.xZ)(z,R),await V(),O!==E.u8.INSTALL&&(0,u.c3)(z),{id:z,changes:F}}catch(G){return console.error(G),(0,c.NF)(G)?(G.data.id=z,N.rejectWithValue(G.data)):N.rejectWithValue("Unknown error.")}}),M=(0,n.zD)(`${v.fu}/install`,async()=>({})),I=(0,n.zD)(`${v.fu}/uninstall`,async(z,R)=>{try{return await(0,r.cu)(z),await V(),(0,u.c3)(z),{id:z,changes:{isInstalled:!1,installedVersion:void 0,isFullyInstalled:!1}}}catch(O){return console.error(O),R.rejectWithValue("Unknown error.")}}),B=(0,n.zD)(`${v.fu}/loadPluginDashboards`,async(z,R)=>{const F=`api/plugins/${R.getState().dataSources.dataSource.type}/dashboards`;return(0,c.AI)().get(F)}),U=(0,n.VP)(`${v.fu}/panelPluginLoaded`),W=z=>async(R,O)=>{let N=O().plugins.panels[z];return N||(N=await(0,h.TV)(z),O().plugins.panels[z]||R(U(N))),N};function V(){return(0,c.AI)().get("/api/frontend/settings").then(z=>{p.$.panels=z.panels})}},37268:(ne,j,e)=>{"use strict";e.d(j,{W3:()=>l,jn:()=>d,zw:()=>o});var n=e(78646);const a=(i,c)=>{(0,n.x$)().addEvent({type:n.on.Performance,payload:{name:i,value:c}})},s=i=>faro?.api?.pushError(i);function d(i){if(!(!performance||!performance.mark))try{performance.mark(`${i}_started`)}catch(c){console.error(`[Metrics] Failed to startMeasure ${i}`,c)}}function o(i){if(!(!performance||!performance.mark))try{const c=`${i}_started`,p=`${i}_completed`,h=`${i}_measured`;performance.mark(p);const u=performance.measure(h,c,p);return a(`${i}_ms`,u.duration),performance.clearMarks(c),performance.clearMarks(p),performance.clearMeasures(h),u}catch(c){console.error(`[Metrics] Failed to stopMeasure ${i}`,c);return}}function l(i,c="",p=""){const h=performance.getEntriesByName(i).at(0);if(h){const u=h.name.replace(/-/g,"_");a(`${c}${u}${p}`,Math.round(h.startTime)/1e3)}}},37297:(ne,j,e)=>{"use strict";e.d(j,{O:()=>d});var n=e(76803),a=e(53543),s=e(52205);function d(l={},i){const c=new n.K,p=a.G.list(),h={};if(l.useCustomConfig){const u=new s.bk;l.useCustomConfig(u);for(const r of u.getRegistry().list())if(r.isCustom=!0,r.id="custom."+r.id,o(r,p)){const v=h[r.category[0]]??[];v.push(r),h[r.category[0]]=v}else c.register(r)}for(let u of p){const r=u.id;if(!(l.disableStandardOptions&&l.disableStandardOptions.indexOf(r)>-1)){if(l.standardOptions){const v=l.standardOptions[r]?.hideFromDefaults,g=l.standardOptions[r]?.defaultValue,E=l.standardOptions[r]?.settings;v!==void 0&&(u={...u,hideFromDefaults:v}),g&&(u={...u,defaultValue:g}),E&&(u={...u,settings:u.settings?{...u.settings,...E}:E})}if(c.register(u),u.category&&h[u.category[0]])for(let v of h[u.category[0]])c.register(v)}}for(const u of c.list())if(u.path.indexOf("[")>0)throw new Error(`[${i}] Field config paths do not support arrays: ${u.id}`);return c}function o(l,i){return!!i.find(c=>l.category&&c.category&&l.category[0]===c.category[0])}},37386:(ne,j,e)=>{"use strict";e.d(j,{D:()=>c});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(44019),l=e(12594),i=e(72636);const c=s.forwardRef(({label:u,description:r,horizontal:v,invalid:g,loading:E,disabled:x,required:m,error:y,children:b,className:D,validationMessageHorizontalOverflow:f,htmlFor:C,noMargin:P,...T},M)=>{const I=(0,d.of)(h,P),B=C??(0,o.getChildId)(b),U=typeof u=="string"?(0,n.jsx)(i.J,{htmlFor:B,description:r,children:`${u}${m?" *":""}`}):u,W=p({invalid:g,disabled:x,loading:E});return(0,n.jsxs)("div",{className:(0,a.cx)(I.field,v&&I.fieldHorizontal,D),...T,children:[U,(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{ref:M,children:s.cloneElement(b,W)}),g&&y&&!v&&(0,n.jsx)("div",{className:(0,a.cx)(I.fieldValidationWrapper,{[I.validationMessageHorizontalOverflow]:!!f}),children:(0,n.jsx)(l.P,{children:y})})]}),g&&y&&v&&(0,n.jsx)("div",{className:(0,a.cx)(I.fieldValidationWrapper,I.fieldValidationWrapperHorizontal,{[I.validationMessageHorizontalOverflow]:!!f}),children:(0,n.jsx)(l.P,{children:y})})]})});c.displayName="Field";function p(u){for(const r in u)u[r]===void 0&&delete u[r];return u}const h=(u,r)=>({field:(0,a.css)({display:"flex",flexDirection:"column",marginBottom:u.spacing(r?0:2)}),fieldHorizontal:(0,a.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,a.css)({marginTop:u.spacing(.5)}),fieldValidationWrapperHorizontal:(0,a.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,a.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},37640:(ne,j,e)=>{"use strict";e.d(j,{W3:()=>l,Wy:()=>i,z4:()=>c});var n=e(11594),a=e(25992),s=e(92391),d=e(16900),o=e(95027);async function l(p){const h=await(0,o.x)(p);let u;if(h.type===n.QE.app&&(u=await d.y.importApp(h)),h.type===n.QE.datasource&&(u=await d.y.importDataSource(h)),h.type===n.QE.panel&&(u=await(0,s.Kk)(h)),h.type===n.QE.renderer&&(u={meta:h}),!u)throw new Error("Unknown Plugin type: "+h.type);return u}function i(p,h){if(!h)return;const u=10;let r={...h},v;function g(x,m){return!m.startsWith(x.url??"")||v&&(v.url?.length??0)>(x.url?.length??0)?x:(v&&(v.active=!1),v={...x,active:!0},v)}function E(x,m=0){if(m>u)return x;if(x.children){const y=x.children.map(b=>E(b,m+1));return{...g(x,p),children:y}}return g(x,p)}return r.children=(r?.children??[]).map(x=>E(x)),{main:r,node:v??r}}const c=(0,a.DW)("features.plugins")},37658:(ne,j,e)=>{"use strict";e.d(j,{L:()=>h});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(21348),i=e(94018);const c=(0,s.memo)((0,s.forwardRef)(({displayMax:v,tags:g,icon:E,onClick:x,className:m,getAriaLabel:y,getColorIndex:b},D)=>{const f=(0,o.$j)(),C=r(f,!!(v&&v>0)),P=g.length,T=v?g.slice(0,v):g;return(0,n.jsxs)("ul",{className:(0,a.cx)(C.wrapper,m),"aria-label":(0,d.t)("grafana-ui.tags.list-label","Tags"),ref:D,children:[T.map((M,I)=>(0,n.jsx)("li",{className:C.li,children:(0,n.jsx)(i.v,{name:M,icon:E,onClick:x,"aria-label":y?.(M,I),"data-tag-id":I,colorIndex:b?.(M,I)})},M)),v&&v>0&&P-v>0&&(0,n.jsx)("li",{className:C.li,children:(0,n.jsxs)("span",{className:C.moreTagsLabel,children:["+ ",P-v]})})]})}));c.displayName="TagList";const p=({rootProps:v})=>{const g=(0,o.of)(u);return(0,n.jsxs)("div",{className:g.container,...v,children:[(0,n.jsx)(i.v.Skeleton,{}),(0,n.jsx)(i.v.Skeleton,{})]})},h=(0,l.j)(c,p),u=v=>({container:(0,a.css)({display:"flex",gap:v.spacing(1)})}),r=(v,g)=>({wrapper:(0,a.css)({position:"relative",alignItems:g?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:g?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,a.css)({color:v.colors.text.secondary,fontSize:v.typography.size.sm}),li:(0,a.css)({listStyle:"none"})})},37666:(ne,j,e)=>{"use strict";e.d(j,{o:()=>a});var n=e(22803);function a(s){return{myTable:(0,n.css)({maxHeight:"204px",overflowY:"auto",marginTop:"11px",marginBottom:"28px",borderRadius:s.shape.radius.default,border:`1px solid ${s.colors.action.hover}`,background:s.colors.background.primary,color:s.colors.text.secondary,fontSize:s.typography.h6.fontSize,width:"100%",thead:{color:"#538ade",fontSize:s.typography.bodySmall.fontSize},"th, td":{padding:"6px 13px",height:s.spacing(4)},"tbody > tr:nth-child(odd)":{background:s.colors.background.secondary}}),noteTextbox:(0,n.css)({marginBottom:s.spacing(4)}),textInfo:(0,n.css)({color:s.colors.text.secondary,fontSize:s.typography.size.sm}),dashboardSearch:(0,n.css)({marginTop:s.spacing(2)}),modal:(0,n.css)({width:"500px"}),modalText:(0,n.css)({fontSize:s.typography.h4.fontSize,color:s.colors.text.primary,marginBottom:s.spacing(4),paddingTop:s.spacing(2)})}}},37672:(ne,j,e)=>{"use strict";e.d(j,{s:()=>h});var n=e(74848),a=e(22803),s=e(46942),d=e.n(s),o=e(51898),l=e(92745),i=e(34999),c=e(63142);const p=o.Tp.pages.ShareDashboardModal.PublicDashboard,h=({unsupportedDataSources:r})=>{const v=(0,c.of)(u);return(0,n.jsxs)(i.F,{severity:"warning",title:(0,l.t)("public-dashboard.modal-alerts.unsupported-data-source-alert-title","Unsupported data sources"),"data-testid":p.UnsupportedDataSourcesWarningAlert,bottomSpacing:0,children:[(0,n.jsx)("p",{className:v.unsupportedDataSourceDescription,children:(0,n.jsxs)(l.x6,{i18nKey:"public-dashboard.share-externally.unsupported-data-source-alert-desc",children:["There are data sources in this dashboard that are unsupported for shared dashboards. Panels that use these data sources may not function properly: ",{unsupportedDataSources:r},"."]})}),(0,n.jsx)("a",{href:"https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/shared-dashboards/#supported-data-sources",target:"blank",className:d()("text-link",v.unsupportedDataSourceDescription),children:(0,n.jsx)(l.x6,{i18nKey:"public-dashboard.modal-alerts.unsupport-data-source-alert-readmore-link",children:"Read more about supported data sources"})})]})},u=r=>({unsupportedDataSourceDescription:(0,a.css)({color:r.colors.text.secondary,marginBottom:r.spacing(1)})})},37674:(ne,j,e)=>{"use strict";e.d(j,{cH:()=>ut,mJ:()=>gt,Ao:()=>pt,IO:()=>Oe,e_:()=>ot,e4:()=>ke,kh:()=>rt,CD:()=>qe,No:()=>st,B$:()=>We,n_:()=>mt,bZ:()=>Me,VD:()=>Ze,c7:()=>nt,c$:()=>ht});var n=e(2543),a=e(92745),s=e(43173),d=e(78282),o=e(44248),l=e(59857),i=e(92119),c=e(74848),p=e(16817),h=e(48480),u=e(51156),r=e(99584);function v(tt){const{variable:Ot}=tt,{datasource:jt,defaultKeys:wt,allowCustomValue:Ht}=Ot.useState(),{value:hn}=(0,p.A)(async()=>await(0,d.l)().get(jt),[jt]),Dn=hn?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters.",Bn=St=>{const Tt=(0,h.p$)(St);Ot.setState({datasource:Tt,supportsMultiValueOperators:St.meta.multiValueFilterOperators})},xn=St=>{Ot.setState({defaultKeys:St})},ft=St=>{Ot.setState({allowCustomValue:St.currentTarget.checked})};return(0,c.jsx)(r.Q,{datasource:jt??void 0,infoText:Dn,allowCustomValue:Ht,onDataSourceChange:Bn,defaultKeys:wt,onDefaultKeysChange:xn,onAllowCustomValueChange:ft,inline:tt.inline,datasourceSupported:!!hn?.getTagKeys})}function g(tt){return tt instanceof o.H9?[new u.v({id:`variable-${tt.state.name}-value`,render:()=>(0,c.jsx)(v,{variable:tt,onRunQuery:n.noop,inline:!0})})]:(console.warn("getAdHocFilterOptions: variable is not an AdHocFiltersVariable"),[])}var E=e(75505),x=e(63527),m=e(23675);function y({variable:tt}){const{value:Ot}=tt.useState(),jt=wt=>{tt.setState({value:wt.currentTarget.value})};return(0,c.jsx)(m.d,{constantValue:Ot.toString(),onChange:jt})}function b(tt){return tt instanceof o.x0?[new u.v({title:(0,a.t)("dashboard-scene.constant-variable-form.label-value","Value"),id:"constant-variable-value",render:Ot=>(0,c.jsx)(D,{id:Ot.props.id,variable:tt})})]:(console.warn("getConstantVariableOptions: variable is not a ConstantVariable"),[])}function D({variable:tt,id:Ot}){const{value:jt}=tt.useState(),wt=async Ht=>{tt.setState({value:Ht.currentTarget.value}),await(0,E.s)(tt.validateAndUpdate())};return(0,c.jsx)(x.p,{id:Ot,defaultValue:jt.toString(),onBlur:wt,placeholder:(0,a.t)("dashboard-scene.constant-variable-form.placeholder-your-metric-prefix","Your metric prefix")})}var f=e(96540),C=e(70430),P=e(51898),T=e(31286),M=e(45861),I=e(22787),B=e(41654),U=e(47730),W=e(58228);const V=(0,f.forwardRef)(function({variable:tt},Ot){const{query:jt}=tt.useState(),wt=tt.transformCsvStringToOptions(jt,!1).map(({label:xn,value:ft})=>({value:ft,label:ft===xn?"":xn})),Ht=(0,f.useCallback)(xn=>String(xn).trim().replaceAll(",","\\,"),[]),hn=(0,f.useCallback)(xn=>!xn.label||xn.label===xn.value?Ht(xn.value):`${Ht(xn.label)} : ${Ht(String(xn.value))}`,[Ht]),Dn=(0,f.useCallback)(xn=>xn.map(hn).join(", "),[hn]),Bn=(0,f.useCallback)(async xn=>{tt.setState({query:Dn(xn)}),await(0,E.s)(tt.validateAndUpdate())},[tt,Dn]);return(0,c.jsx)(W.b,{options:wt,onChange:Bn,ref:Ot,isInModal:!0})});V.displayName="ValuesBuilder";var z=e(18387);function R({variable:tt}){return tt.useState(),mt(tt)?(0,c.jsx)(z.j,{options:tt.getOptionsForSelect(!1)}):null}function O({variable:tt,isOpen:Ot,onClose:jt}){const wt=(0,f.useRef)(null),Ht=(0,f.useCallback)(()=>wt.current?.addItem(),[]);return(0,c.jsxs)(I.a,{title:(0,a.t)("dashboard.edit-pane.variable.custom-options.modal-title","Custom Variable"),isOpen:Ot,onDismiss:jt,children:[(0,c.jsxs)(B.B,{direction:"column",gap:2,children:[(0,c.jsx)(V,{variable:tt,ref:wt}),(0,c.jsx)(R,{variable:tt})]}),(0,c.jsx)(I.a.ButtonRow,{leftItems:(0,c.jsx)(U.k,{onAdd:Ht}),children:(0,c.jsx)(M.$n,{variant:"secondary",fill:"outline",onClick:jt,"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.CustomVariable.closeButton,children:(0,c.jsx)(a.x6,{i18nKey:"dashboard.edit-pane.variable.custom-options.close",children:"Close"})})})]})}function N({variable:tt}){const[Ot,jt]=(0,f.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(T.a,{display:"flex",direction:"column",paddingBottom:1,children:(0,c.jsx)(M.$n,{tooltip:(0,a.t)("dashboard.edit-pane.variable.open-editor-tooltip","For more variable options open variable editor"),onClick:()=>jt(!0),size:"sm",fullWidth:!0,"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.CustomVariable.optionsOpenButton,children:(0,c.jsx)(a.x6,{i18nKey:"dashboard.edit-pane.variable.open-editor",children:"Open variable editor"})})}),(0,c.jsx)(O,{variable:tt,isOpen:Ot,onClose:()=>jt(!1)})]})}function F({variable:tt,onRunQuery:Ot}){const{query:jt,isMulti:wt,allValue:Ht,includeAll:hn,allowCustomValue:Dn}=tt.useState(),Bn=(0,f.useCallback)(Je=>{tt.setState({isMulti:Je.currentTarget.checked})},[tt]),xn=(0,f.useCallback)(Je=>{tt.setState({includeAll:Je.currentTarget.checked})},[tt]),ft=(0,f.useCallback)(Je=>{tt.setState({query:Je.currentTarget.value}),Ot()},[tt,Ot]),St=(0,f.useCallback)(Je=>{tt.setState({allValue:Je.currentTarget.value})},[tt]),Tt=(0,f.useCallback)(Je=>{tt.setState({allowCustomValue:Je.currentTarget.checked})},[tt]);return(0,c.jsx)(C.w,{query:jt??"",multi:!!wt,allValue:Ht??"",includeAll:!!hn,allowCustomValue:Dn,onMultiChange:Bn,onIncludeAllChange:xn,onQueryChange:ft,onAllValueChange:St,onAllowCustomValueChange:Tt})}function G(tt){return tt instanceof CustomVariable?[new OptionsPaneItemDescriptor({title:t("dashboard.edit-pane.variable.custom-options.values","Values separated by comma"),id:"custom-variable-values",render:({props:Ot})=>jsx(PaneItem,{id:Ot.id,variable:tt})})]:[]}function H(tt){return tt instanceof o.yP?[new u.v({title:(0,a.t)("dashboard.edit-pane.variable.custom-options.values","Values separated by comma"),id:"custom-variable-values",render:({props:Ot})=>(0,c.jsx)(N,{id:Ot.id,variable:tt})})]:[]}var K=e(43243),w=e(42272);function Q({variable:tt,onRunQuery:Ot}){const{pluginId:jt,regex:wt,isMulti:Ht,allValue:hn,includeAll:Dn,allowCustomValue:Bn}=tt.useState(),xn=ke(),ft=Lt=>{tt.setState({pluginId:Lt.value}),Ot()},St=Lt=>{tt.setState({regex:Lt.currentTarget.value}),Ot()},Tt=Lt=>{tt.setState({isMulti:Lt.currentTarget.checked})},Je=Lt=>{tt.setState({includeAll:Lt.currentTarget.checked})},Pt=Lt=>{tt.setState({allValue:Lt.currentTarget.value})},Yt=Lt=>{tt.setState({allowCustomValue:Lt.currentTarget.checked})};return(0,c.jsx)(w.y,{query:jt,regex:wt,multi:Ht||!1,allValue:hn,includeAll:Dn||!1,optionTypes:xn,allowCustomValue:Bn,onChange:ft,onRegExBlur:St,onMultiChange:Tt,onIncludeAllChange:Je,onAllValueChange:Pt,onAllowCustomValueChange:Yt})}function k(tt){return tt instanceof o.mI?[new u.v({title:(0,a.t)("dashboard.edit-pane.variable.datasource-options.type","Type"),id:"datasource-options-type",render:({props:Ot})=>(0,c.jsx)(te,{id:Ot.id,variable:tt})}),new u.v({title:(0,a.t)("dashboard.edit-pane.variable.datasource-options.name-filter","Name filter"),id:"datasource-options-name-filter",description:(0,a.t)("dashboard.edit-pane.variable.datasource-options.name-filter-description","Regex filter for which data source instances to include. Leave empty for all."),render:({props:Ot})=>(0,c.jsx)(q,{id:Ot.id,variable:tt})})]:[]}function te({variable:tt,id:Ot}){const{pluginId:jt}=tt.useState(),wt=ke(),Ht=async hn=>{tt.setState({pluginId:hn.value}),await(0,E.s)(tt.validateAndUpdate())};return(0,c.jsx)(K.G,{id:Ot,options:wt,value:jt,onChange:Ht,placeholder:(0,a.t)("dashboard.edit-pane.variable.datasource-options.type-placeholder","Choose data source type"),"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect})}function q({variable:tt,id:Ot}){const{regex:jt}=tt.useState(),wt=async Ht=>{tt.setState({regex:Ht.currentTarget.value}),await(0,E.s)(tt.validateAndUpdate())};return(0,c.jsx)(x.p,{id:Ot,defaultValue:jt,onBlur:wt,"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.nameFilter,placeholder:(0,a.t)("dashboard.edit-pane.variable.datasource-options.name-filter-placeholder","Example: /^prod/")})}var se=e(68125),re=e(30048),Y=e(34999),X=e(37386),J=e(21285),_=e(50992),ee=e(76792),ae=e(69076),le=e(32442);function L({datasource:tt,defaultOptions:Ot,infoText:jt,onDataSourceChange:wt,onDefaultOptionsChange:Ht,allowCustomValue:hn,onAllowCustomValueChange:Dn,inline:Bn,datasourceSupported:xn}){const ft=(0,f.useCallback)(St=>{const Tt=(0,se.Jh)(`key,value
`+St)[0],Je=[];for(let Pt=0;Pt<Tt.length;Pt++)Je.push({text:Tt.fields[0].values[Pt],value:Tt.fields[1].values[Pt]});Ht(Je)},[Ht]);return(0,c.jsxs)(c.Fragment,{children:[!Bn&&(0,c.jsx)(le.Y,{children:(0,c.jsx)(a.x6,{i18nKey:"dashboard-scene.group-by-variable-form.group-by-options",children:"Group by options"})}),(0,c.jsx)(T.a,{marginBottom:2,children:(0,c.jsx)(re.c,{label:(0,a.t)("dashboard-scene.group-by-variable-form.label-data-source","Data source"),htmlFor:"data-source-picker",tooltip:jt,children:(0,c.jsx)(ee.sk,{current:tt,onChange:wt,width:30,variables:!0,noDefault:!0})})}),xn?null:(0,c.jsx)(Y.F,{title:(0,a.t)("dashboard-scene.group-by-variable-form.alert-not-supported","This data source does not support group by variables"),severity:"warning","data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.infoText}),xn&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(X.D,{label:(0,a.t)("dashboard-scene.group-by-variable-form.label-use-static-group-by-dimensions","Use static group dimensions"),description:(0,a.t)("dashboard-scene.group-by-variable-form.description-provide-dimensions-as-csv-dimension-name-dimension-id","Provide dimensions as CSV: {{name}}, {{value}}",{name:"dimensionName",value:"dimensionId"}),children:(0,c.jsx)(J.d,{"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.modeToggle,value:Ot!==void 0,onChange:St=>{Ht(Ot===void 0?[]:void 0)}})}),Ot!==void 0&&(0,c.jsx)(_.B,{height:300,language:"csv",value:Ot.map(St=>`${St.text},${St.value}`).join(`
`),onBlur:ft,onSave:ft,showMiniMap:!1,showLineNumbers:!0})]}),xn&&!Bn&&Dn&&(0,c.jsx)(ae.c,{value:hn,name:(0,a.t)("dashboard-scene.group-by-variable-form.name-allow-custom-values","Allow custom values"),description:(0,a.t)("dashboard-scene.group-by-variable-form.description-enables-users-custom-values","Enables users to add custom values to the list"),onChange:Dn,testId:P.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsAllowCustomValueSwitch})]})}function ie(tt){const{variable:Ot,onRunQuery:jt,inline:wt}=tt,{datasource:Ht,defaultOptions:hn,allowCustomValue:Dn=!0}=Ot.useState(),{value:Bn}=(0,p.A)(async()=>await(0,d.l)().get(Ht),[Ot.state]),xn=Bn?.getTagKeys!==void 0,ft=xn?"Group by dimensions are applied automatically to all queries that target this data source":"This data source does not support group by variable yet.",St=async Pt=>{const Yt=(0,h.p$)(Pt);Ot.setState({datasource:Yt}),jt()},Tt=async Pt=>{Ot.setState({defaultOptions:Pt}),jt()},Je=Pt=>{Ot.setState({allowCustomValue:Pt.currentTarget.checked})};return(0,c.jsx)(L,{defaultOptions:hn,datasource:Ht??void 0,infoText:Ht?ft:void 0,onDataSourceChange:St,onDefaultOptionsChange:Tt,allowCustomValue:Dn,onAllowCustomValueChange:Je,inline:wt,datasourceSupported:xn})}function oe(tt){return tt instanceof o.ZG?[new u.v({id:`variable-${tt.state.name}-value`,render:()=>(0,c.jsx)(ie,{variable:tt,onRunQuery:n.noop,inline:!0})})]:(console.warn("getAdHocFilterOptions: variable is not an AdHocFiltersVariable"),[])}var ue=e(1096);function ye({variable:tt,onRunQuery:Ot,inline:jt}){const{intervals:wt,autoStepCount:Ht,autoEnabled:hn,autoMinInterval:Dn,value:Bn}=tt.useState(),xn=(0,i.bx)(wt),ft=Pt=>{const Yt=(0,i.Sm)(Pt.currentTarget.value),Lt=Yt.includes(Bn)?Bn:Yt[0];tt.setState({intervals:Yt,value:Lt}),Ot()},St=Pt=>{tt.setState({autoStepCount:Pt.value})},Tt=Pt=>{tt.setState({autoEnabled:Pt.target.checked})},Je=Pt=>{tt.setState({autoMinInterval:Pt.currentTarget.value})};return(0,c.jsx)(ue.s,{intervals:xn,autoStepCount:Ht,autoEnabled:hn,onAutoCountChanged:St,onIntervalsChange:ft,onAutoEnabledChange:Tt,onAutoMinIntervalChanged:Je,autoMinInterval:Dn,inline:jt})}function fe(tt){return tt instanceof o.Yj?[new u.v({id:`variable-${tt.state.name}-value`,render:()=>(0,c.jsx)(ye,{variable:tt,onRunQuery:n.noop,inline:!0})})]:(console.warn("getIntervalVariableOptions: variable is not an IntervalVariable"),[])}var Ee=e(89640),Ae=e(66698),Ge=e(38681),Fe=e(56620),Pe=e(83501),Ve=e(70977),me=e(28799),Se=e(25379);function Qe({variable:tt,onRunQuery:Ot}){const{datasource:jt,regex:wt,sort:Ht,refresh:hn,isMulti:Dn,includeAll:Bn,allValue:xn,query:ft,allowCustomValue:St,staticOptions:Tt,staticOptionsOrder:Je}=tt.useState(),{value:Pt}=o.jh.getTimeRange(tt).useState(),Yt=Un=>{tt.setState({regex:Un.currentTarget.value})},Lt=Un=>{tt.setState({sort:Un.value})},fn=Un=>{tt.setState({refresh:Un})},En=Un=>{tt.setState({isMulti:Un.currentTarget.checked})},An=Un=>{tt.setState({includeAll:Un.currentTarget.checked})},Gn=Un=>{tt.setState({allValue:Un.currentTarget.value})},zn=Un=>{tt.setState({allowCustomValue:Un.currentTarget.checked})},sa=Un=>{const oa=(0,h.p$)(Un);if((tt.state.datasource?.type||"")!==oa.type){tt.setState({datasource:oa,query:"",definition:""});return}tt.setState({datasource:oa})},ta=Un=>{tt.setState({query:Un,definition:Ke(Un)}),Ot()},ra=Un=>{Ot(),tt.setState({staticOptions:Un})},ea=Un=>{Ot(),tt.setState({staticOptionsOrder:Un})};return(0,c.jsx)(me.u,{datasource:jt??void 0,onDataSourceChange:sa,query:ft,onQueryChange:ta,onLegacyQueryChange:ta,timeRange:Pt,regex:wt,onRegExChange:Yt,sort:Ht,onSortChange:Lt,refresh:hn,onRefreshChange:fn,isMulti:!!Dn,onMultiChange:En,includeAll:!!Bn,onIncludeAllChange:An,allValue:xn??"",onAllValueChange:Gn,allowCustomValue:St,onAllowCustomValueChange:zn,staticOptions:Tt,staticOptionsOrder:Je,onStaticOptionsChange:ra,onStaticOptionsOrderChange:ea})}function Ue(tt){return tt instanceof o.fS?[new u.v({id:`variable-${tt.state.name}-value`,render:()=>(0,c.jsx)(Ie,{variable:tt})})]:(console.warn("getQueryVariableOptions: variable is not a QueryVariable"),[])}function Ie({variable:tt}){const[Ot,jt]=(0,f.useState)(!1),wt=()=>{tt.refreshOptions()};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(T.a,{display:"flex",direction:"column",paddingBottom:1,children:(0,c.jsx)(M.$n,{tooltip:(0,a.t)("dashboard.edit-pane.variable.open-editor-tooltip","For more variable options open variable editor"),onClick:()=>jt(!0),size:"sm",fullWidth:!0,"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsOpenButton,children:(0,c.jsx)(a.x6,{i18nKey:"dashboard.edit-pane.variable.open-editor",children:"Open variable editor"})})}),(0,c.jsxs)(I.a,{title:(0,a.t)("dashboard.edit-pane.variable.query-options.modal-title","Query Variable"),isOpen:Ot,onDismiss:()=>jt(!1),children:[(0,c.jsx)(Re,{variable:tt}),(0,c.jsxs)(I.a.ButtonRow,{children:[(0,c.jsx)(M.$n,{variant:"primary",fill:"outline",onClick:wt,"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.previewButton,children:(0,c.jsx)(a.x6,{i18nKey:"dashboard.edit-pane.variable.query-options.preview",children:"Preview"})}),(0,c.jsx)(M.$n,{variant:"secondary",fill:"outline",onClick:()=>jt(!1),"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.closeButton,children:(0,c.jsx)(a.x6,{i18nKey:"dashboard.edit-pane.variable.query-options.close",children:"Close"})})]})]})]})}function Re({variable:tt}){const{datasource:Ot,sort:jt,refresh:wt,query:Ht,regex:hn,staticOptions:Dn,staticOptionsOrder:Bn}=tt.useState(),{value:xn}=o.jh.getTimeRange(tt).useState(),{value:ft}=(0,p.A)(async()=>{const zn=await(0,d.l)().get(Ot??""),sa=await(0,Ge.y)(zn),ta=zn?.variables?.getDefaultQuery?.();if(!Ht&&ta){const ra=typeof ta=="string"?ta:{...ta,refId:ta.refId??"A"};Pt(ra)}return{datasource:zn,VariableQueryEditor:sa}},[Ot]),{datasource:St,VariableQueryEditor:Tt}=ft??{},Je=zn=>{const sa=(0,h.p$)(zn);if((tt.state.datasource?.type||"")!==sa.type){tt.setState({datasource:sa,query:"",definition:""});return}tt.setState({datasource:sa})},Pt=zn=>{tt.setState({query:zn,definition:Ke(zn)})},Yt=zn=>{tt.setState({regex:zn.currentTarget.value})},Lt=zn=>{tt.setState({sort:zn.value})},fn=zn=>{tt.setState({refresh:zn})},En=zn=>{tt.setState({staticOptions:zn})},An=zn=>{tt.setState({staticOptionsOrder:zn})},Gn=mt(tt);return(0,c.jsxs)("div",{"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.editor,children:[(0,c.jsx)(X.D,{label:(0,a.t)("dashboard-scene.query-variable-editor-form.label-target-data-source","Target data source"),htmlFor:"data-source-picker",noMargin:!0,children:(0,c.jsx)(ee.sk,{current:St,onChange:Je,variables:!0,width:30})}),St&&Tt&&(0,c.jsx)(Ae.w,{onQueryChange:Pt,onLegacyQueryChange:Pt,datasource:St,query:Ht,VariableQueryEditor:Tt,timeRange:xn}),(0,c.jsx)(Se.Z,{defaultValue:hn??"",name:(0,a.t)("dashboard-scene.query-variable-editor-form.name-regex","Regex"),description:(0,c.jsxs)("div",{children:[(0,c.jsx)(a.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.description-optional",children:"Optional, if you want to extract part of a series name or metric node segment."}),(0,c.jsx)("br",{}),(0,c.jsxs)(a.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.description-examples",children:["Named capture groups can be used to separate the display text and value (",(0,c.jsx)(Ee.Y,{href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",external:!0,children:"see examples"}),")."]})]}),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onBlur:Yt,testId:P.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),(0,c.jsx)(Pe.z,{testId:P.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,onChange:Lt,sort:jt}),(0,c.jsx)(Fe.U,{testId:P.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelectV2,onChange:fn,refresh:wt}),En&&An&&(0,c.jsx)(Ve.f,{staticOptions:Dn,staticOptionsOrder:Bn,onStaticOptionsChange:En,onStaticOptionsOrderChange:An}),Gn&&(0,c.jsx)(z.j,{options:tt.getOptionsForSelect(!1)})]})}function Ke(tt){return typeof tt=="string"?tt:tt.hasOwnProperty("query")&&typeof tt.query=="string"?tt.query:""}const Le=[{label:"True / False",value:"boolean"},{label:"1 / 0",value:"number"},{label:"Yes / No",value:"string"},{label:"Custom",value:"custom"}];function ze({enabledValue:tt,disabledValue:Ot,onEnabledValueChange:jt,onDisabledValueChange:wt}){const Ht=Be(tt,Ot),[hn,Dn]=(0,f.useState)(Ht==="custom"),[Bn,xn]=(0,f.useState)(!1),[ft,St]=(0,f.useState)(!1),Tt=(0,a.t)("dashboard-scene.switch-variable-form.same-values-error","Enabled and disabled values cannot be the same"),Je=Lt=>{if(Lt?.value)switch(xn(!1),St(!1),Lt.value){case"boolean":jt("true"),wt("false"),Dn(!1);break;case"number":jt("1"),wt("0"),Dn(!1);break;case"string":jt("yes"),wt("no"),Dn(!1);break;case"custom":Dn(!0);break}},Pt=Lt=>{const fn=Lt===Ot;xn(fn),St(!1),fn||jt(Lt)},Yt=Lt=>{const fn=Lt===tt;St(fn),xn(!1),fn||wt(Lt)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(le.Y,{children:(0,c.jsx)(a.x6,{i18nKey:"dashboard-scene.switch-variable-form.switch-options",children:"Switch options"})}),(0,c.jsxs)(B.B,{gap:2,direction:"column",children:[(0,c.jsx)(X.D,{noMargin:!0,label:(0,a.t)("dashboard-scene.switch-variable-form.value-pair-type","Value pair type"),description:(0,a.t)("dashboard-scene.switch-variable-form.value-pair-type-description","Choose the type of values for the switch states"),children:(0,c.jsx)(K.G,{width:40,value:hn?"custom":Ht,options:Le,onChange:Je,"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.SwitchVariable.valuePairTypeSelect})}),hn&&(0,c.jsxs)(B.B,{gap:2,direction:"column",children:[(0,c.jsx)(X.D,{noMargin:!0,label:(0,a.t)("dashboard-scene.switch-variable-form.enabled-value","Enabled value"),description:(0,a.t)("dashboard-scene.switch-variable-form.enabled-value-description","Value when switch is enabled"),error:Bn&&Tt,invalid:Bn,children:(0,c.jsx)(x.p,{width:40,defaultValue:tt,onChange:Lt=>{Pt(Lt.currentTarget.value)},placeholder:(0,a.t)("dashboard-scene.switch-variable-form.enabled-value-placeholder","e.g. On, Enabled, Active"),"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.SwitchVariable.enabledValueInput})}),(0,c.jsx)(X.D,{noMargin:!0,label:(0,a.t)("dashboard-scene.switch-variable-form.disabled-value","Disabled value"),description:(0,a.t)("dashboard-scene.switch-variable-form.disabled-value-description","Value when switch is disabled"),error:ft&&Tt,invalid:ft,children:(0,c.jsx)(x.p,{width:40,defaultValue:Ot,onChange:Lt=>Yt(Lt.currentTarget.value),placeholder:(0,a.t)("dashboard-scene.switch-variable-form.disabled-value-placeholder","e.g. Off, Disabled, Inactive"),"data-testid":P.Tp.pages.Dashboard.Settings.Variables.Edit.SwitchVariable.disabledValueInput})})]})]})]})}function Be(tt,Ot){return tt==="true"&&Ot==="false"?"boolean":tt==="1"&&Ot==="0"?"number":tt==="yes"&&Ot==="no"?"string":"custom"}function $e({variable:tt}){const{value:Ot,enabledValue:jt,disabledValue:wt}=tt.useState(),Ht=Dn=>{Ot===jt?tt.setState({enabledValue:Dn,value:Dn}):tt.setState({enabledValue:Dn})},hn=Dn=>{Ot===wt?tt.setState({disabledValue:Dn,value:Dn}):tt.setState({disabledValue:Dn})};return(0,c.jsx)(ze,{enabledValue:jt,disabledValue:wt,onEnabledValueChange:Ht,onDisabledValueChange:hn})}function Ye(tt){return tt instanceof o.HV?[new u.v({id:`variable-${tt.state.name}-value`,render:()=>(0,c.jsx)($e,{variable:tt})})]:(console.warn("getSwitchVariableOptions: variable is not a SwitchVariable"),[])}var de=e(49602);function ge({defaultValue:tt,value:Ot,onChange:jt,onBlur:wt,inline:Ht}){return(0,c.jsxs)(c.Fragment,{children:[!Ht&&(0,c.jsx)(le.Y,{children:(0,c.jsx)(a.x6,{i18nKey:"dashboard-scene.text-box-variable-form.text-options",children:"Text options"})}),(0,c.jsx)(de._,{value:Ot,defaultValue:tt,name:Ht?void 0:(0,a.t)("dashboard-scene.text-box-variable.name-default-value","Default value"),placeholder:(0,a.t)("dashboard-scene.text-box-variable-form.placeholder-default-value-if-any","(optional)"),onChange:jt,onBlur:wt,width:30,testId:P.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2})]})}function pe({variable:tt,inline:Ot}){const{value:jt}=tt.useState(),wt=Ht=>{tt.setState({value:Ht.currentTarget.value})};return(0,c.jsx)(ge,{defaultValue:jt,onBlur:wt,inline:Ot})}function De(tt){return tt instanceof o.TS?[new u.v({title:(0,a.t)("dashboard-scene.textbox-variable-form.label-value","Value"),id:`variable-${tt.state.name}-value`,render:()=>(0,c.jsx)(pe,{onChange:n.noop,variable:tt,inline:!0})})]:(console.warn("getTextBoxVariableOptions: variable is not a TextBoxVariable"),[])}function Me(tt){return tt!=="system"}const be=()=>({custom:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.custom","Custom"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.values-are-static-and-defined-manually","Values are static and defined manually"),editor:F,getOptions:H},query:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.query","Query"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.values-fetched-source-query","Values are fetched from a data source query"),editor:Qe,getOptions:Ue},constant:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.constant","Constant"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.hidden-constant-variable","A hidden constant variable, useful for metric prefixes in dashboards you want to share"),editor:y,getOptions:b},interval:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.interval","Interval"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.values-timespans","Values are timespans, ex 1m, 1h, 1d"),editor:ye,getOptions:fe},datasource:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.data-source","Data source"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.dynamically-switch-source-multiple-panels","Dynamically switch the data source for multiple panels"),editor:Q,getOptions:k},adhoc:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.ad-hoc-filters","Ad hoc filters"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.add-keyvalue-filters-on-the-fly","Add key/value filters on the fly"),editor:v,getOptions:g},groupby:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.group-by","Group by"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.group","Add keys to group by on the fly"),editor:ie,getOptions:oe},textbox:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.textbox","Textbox"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.users-enter-arbitrary-strings-textbox","Users can enter any arbitrary strings in a textbox"),editor:pe,getOptions:De},switch:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.switch","Switch"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.users-enter-arbitrary-strings-switch","A variable that can be toggled on and off"),editor:$e,getOptions:Ye}});function Oe(tt){const jt=be()[tt];if(!jt)throw new Error(`Variable type ${tt} not found`);return jt}const Ne=["query","custom","textbox","constant","datasource","interval","adhoc","switch","groupby"];function We(){const tt=be(),Ot=Ne.map(jt=>({label:tt[jt].name,value:jt,description:tt[jt].description}));return s.$.featureToggles.groupByVariable?Ot:Ot.filter(jt=>jt.value!=="groupby")}function qe(tt){return be()[tt].editor}function st(tt,Ot){switch(tt){case"custom":return new o.yP(Ot);case"query":return new o.fS(Ot);case"constant":return new o.x0({...Ot,hide:l.zL.hideVariable});case"interval":return new o.Yj(Ot);case"datasource":return new o.mI(Ot);case"adhoc":return new o.H9({...Ot,layout:s.$.featureToggles.newFiltersUI?"combobox":void 0});case"groupby":return new o.ZG(Ot);case"textbox":return new o.TS(Ot);case"switch":return new o.HV(Ot)}}function rt(tt){const jt=ot("query",tt);return new o.fS({name:jt})}function ot(tt,Ot){let jt=0,wt=`${tt}${jt}`;for(;Ot.find(Ht=>Ht.state.name===wt);)wt=`${tt}${++jt}`;return wt}function mt(tt){return"options"in tt.state||"intervals"in tt.state}function pt(tt){let Ot="";return tt instanceof o.fS?Ot=tt.state.definition||(typeof tt.state.query=="string"?tt.state.query:""):tt instanceof o.mI?Ot=String(tt.state.pluginId):tt instanceof o.yP?Ot=tt.state.query:tt instanceof o.Yj?Ot=(0,i.bx)(tt.state.intervals):(tt instanceof o.TS||tt instanceof o.x0)&&(Ot=String(tt.state.value)),Ot}function ke(){const tt=(0,d.l)().getList({metrics:!0,variables:!0});return(0,n.chain)(tt).uniqBy("meta.id").map(jt=>({label:jt.meta.name,value:jt.meta.id})).value()}function Ze(tt){return"type"in tt.state&&"getValue"in tt}function nt(tt){return Ze(tt)?o.Go.isAdHocVariable(tt)||o.Go.isConstantVariable(tt)||o.Go.isCustomVariable(tt)||o.Go.isDataSourceVariable(tt)||o.Go.isIntervalVariable(tt)||o.Go.isQueryVariable(tt)||o.Go.isTextBoxVariable(tt)||o.Go.isGroupByVariable(tt)||o.Go.isSwitchVariable(tt):!1}const ut=/^(?!__).*$/,gt=/^\w+$/;function ht(tt,Ot){const jt=tt.parent;if(!(jt instanceof o.Pj))throw new Error("Variable parent is not a SceneVariableSet");if(!ut.test(Ot))return{isValid:!1,errorMessage:"Template names cannot begin with '__', that's reserved for Grafana's global variables"};if(!gt.test(Ot))return{isValid:!1,errorMessage:"Only word characters are allowed in variable names"};const wt=jt.getByName(Ot);return wt&&wt!==tt?{isValid:!1,errorMessage:"Variable with the same name already exists"}:{isValid:!0}}},37680:(ne,j,e)=>{"use strict";e.d(j,{KR:()=>d,XX:()=>o,ec:()=>s});var n=e(27489);const a="dashboards_autogenerate_clicked";var s=(l=>(l.panelDescription="panel-description",l.panelTitle="panel-title",l.dashboardChanges="dashboard-changes",l.dashboardTitle="dashboard-title",l.dashboardDescription="dashboard-description",l.sqlExpressions="sql-expressions",l.unknown="unknown",l))(s||{}),d=(l=>(l.autoGenerateButton="auto-generate-button",l.erroredRetryButton="errored-retry-button",l.stopGenerationButton="stop-generating-button",l.improveButton="improve-button",l.backHistoryItem="back-history-item",l.forwardHistoryItem="forward-history-item",l.quickFeedback="quick-feedback",l.linkToDocs="link-to-docs",l.customFeedback="custom-feedback",l.applySuggestion="apply-suggestion",l))(d||{});function o(l,i,c){(0,n.rR)(a,{src:l,item:i,...c})}},37864:(ne,j,e)=>{"use strict";e.d(j,{m:()=>a});var n=e(22803);const a=s=>({segment:(0,n.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,n.css)({color:s.colors.text.disabled}),disabled:(0,n.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})})},37918:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>x,O9:()=>h,Ub:()=>g,X1:()=>u,ig:()=>p,p0:()=>r,xS:()=>c});var n=e(65307),a=e(92745),s=e(59857),d=e(6262),o=e(7817);const l={initPhase:d._g.NotStarted,getModel:()=>null,initError:null,initialDatasource:void 0},i=(0,n.Z0)({name:"dashboard",initialState:l,reducers:{dashboardInitFetching:m=>{m.initPhase=d._g.Fetching},dashboardInitServices:m=>{m.initPhase=d._g.Services},dashboardInitCompleted:(m,y)=>{m.getModel=()=>y.payload,m.initPhase=d._g.Completed},dashboardInitFailed:(m,y)=>{m.initPhase=d._g.Failed,m.initError=y.payload,m.getModel=()=>new o.G({...s.Ye,title:(0,a.t)("dashboard.dashboard-slice.title.dashboard-init-failed","Dashboard init failed")},{canSave:!1,canEdit:!1})},cleanUpDashboard:m=>{m.initPhase=d._g.NotStarted,m.initError=null,m.getModel=()=>null},addPanel:(m,y)=>{},setInitialDatasource:(m,y)=>{m.initialDatasource=y.payload}}}),{dashboardInitFetching:c,dashboardInitFailed:p,dashboardInitCompleted:h,dashboardInitServices:u,cleanUpDashboard:r,addPanel:v,setInitialDatasource:g}=i.actions,x={dashboard:i.reducer}},37946:(ne,j,e)=>{"use strict";e.d(j,{I:()=>n,s:()=>a});const n={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"},a=["grafana-lokiexplore-app","grafana-exploretraces-app","grafana-metricsdrilldown-app","grafana-pyroscope-app","grafana-monitoring-app","grafana-troubleshooting-app","grafana-assistant-app"]},38032:(ne,j,e)=>{"use strict";e.d(j,{$U:()=>n.$U,Pi:()=>n.Pi,oJ:()=>n.oJ,qR:()=>n.qR});var n=e(28845),a=e(92745),s=e(6890),d=e(64762);const o=n.qR.enhanceEndpoints({endpoints:{addStar:{onQueryStarted:async(l,{queryFulfilled:i,dispatch:c})=>{try{await i,c((0,s.dx)((0,d.tZ)((0,a.t)("dashboard.toolbar.star-added","Added to starred"))))}catch(p){p instanceof Error&&c((0,s.dx)((0,d.gi)((0,a.t)("dashboard.toolbar.star-add-error","Failed to add to starred"),p)))}}},removeStar:{onQueryStarted:async(l,{queryFulfilled:i,dispatch:c})=>{try{await i,c((0,s.dx)((0,d.tZ)((0,a.t)("dashboard.toolbar.star-removed","Removed from starred"))))}catch(p){p instanceof Error&&c((0,s.dx)((0,d.gi)((0,a.t)("dashboard.toolbar.star-remove-error","Failed to remove from starred"),p)))}}}}})},38036:(ne,j,e)=>{"use strict";e.d(j,{c:()=>s,u:()=>d});var n=e(92138),a=e(5556);const s={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function d(c){const{onClickFn:p,replaceVariables:h,link:u,scopedVars:r,range:v,field:g,internalLink:E}=c,x=typeof u.internal?.query=="function"?u.internal.query({replaceVariables:h,scopedVars:r}):E.query,m=l(x,r,h),y=l(u.internal?.panelsState,r,h),b=l(u.meta?.correlationData,r,h),D=u.title?u.title:E.datasourceName,f=m?{query:{...m,datasource:{...m.datasource,uid:E.datasourceUid}},...v&&{timeRange:v}}:void 0;return{title:h(D,r),href:o(E.datasourceUid,m,v,y),onClick:p?C=>{C.preventDefault&&C.preventDefault(),p({datasourceUid:E.datasourceUid,queries:[m],panelsState:y,correlationHelperData:b,range:v})}:void 0,target:u?.targetBlank?"_blank":"_self",origin:g,...f&&{interpolatedParams:f}}}function o(c,p,h,u){return n.I.assureBaseUrl(`/explore?left=${encodeURIComponent((0,a.Pp)({...h?.raw?{range:(0,a.sQ)(h.raw)}:{},datasource:c,queries:[p],panelsState:u}))}`)}function l(c,p,h){if(!c)return c;if(typeof c=="string")return h(c,p);const u=JSON.parse(JSON.stringify(c));return i(u,p,h)}function i(c,p,h){for(const u of Object.keys(c))typeof c[u]=="string"?c[u]=h(c[u],p):typeof c[u]=="object"&&c[u]!==null&&(c[u]=i(c[u],p,h));return c}},38055:(ne,j,e)=>{"use strict";e.d(j,{B:()=>h});var n=e(74848),a=e(22803),s=e(46942),d=e.n(s),o=e(96540),l=e(43533),i=e(2381),c=e(41654),p=e(63142);const h=({children:r,header:v,content:g,footer:E,arrow:x,showAfter:m=300,wrapperClassName:y,disabled:b=!1,showOn:D="hover",disableBlur:f=!1,isOpen:C,onClose:P,onToggle:T,...M})=>{const I=(0,o.useRef)(null),B=(0,p.of)(u);if(b)return r;const U=D==="hover",W=D==="click",V=(0,n.jsxs)(c.B,{direction:"column",gap:0,role:"tooltip",children:[v&&(0,n.jsx)("div",{className:B.card.header,children:v}),(0,n.jsx)("div",{className:B.card.body,children:g}),E&&(0,n.jsx)("div",{className:B.card.footer,children:E})]});return(0,n.jsx)(l.I,{content:V,hideAfter:100,children:(z,R,O)=>{const N=C!==void 0,F=N?C:O.show,G=()=>{P?P():R()},H=()=>{N||z()},K={onClick:T||(N?G:z)},w={onMouseLeave:G,onMouseEnter:H},Q={onBlur:G,onFocus:H};return(0,n.jsxs)(n.Fragment,{children:[I.current&&(0,n.jsx)(i.A,{...O,show:F,...M,wrapperClassName:d()(B.popover,y),referenceElement:I.current,renderArrow:x,...f?{}:Q,...U?w:{},hidePopper:G}),(0,o.cloneElement)(r,{ref:I,onFocus:H,onBlur:f?void 0:G,tabIndex:0,...U?w:{},...W&&(T||!N)?K:{}})]})}})},u=r=>({popover:(0,a.css)({borderRadius:r.shape.radius.default,boxShadow:r.shadows.z3,background:r.colors.background.primary,border:`1px solid ${r.colors.border.weak}`}),card:{body:(0,a.css)({padding:r.spacing(1)}),header:(0,a.css)({padding:r.spacing(1),background:r.colors.background.secondary,borderBottom:`solid 1px ${r.colors.border.medium}`}),footer:(0,a.css)({padding:r.spacing(.5,1),background:r.colors.background.secondary,borderTop:`solid 1px ${r.colors.border.medium}`})}})},38076:(ne,j,e)=>{"use strict";e.d(j,{a:()=>c});var n=e(74848),a=e(22803),s=e(49785),d=e(45861),o=e(99887),l=e(63142),i=e(29609);const c=({isCondition:h,onSetCondition:u,refId:r})=>{const v=(0,l.of)(p),{watch:g}=(0,s.xW)(),E=g("type"),x=E?(0,i.pq)(E):!1,m=x?"Recording rule output":"Alert condition",y=r?`Set "${r}" as alert condition`:"Set as alert condition",b=x?"Set as recording rule output":y;return h?(0,n.jsx)(o.E,{color:"green",icon:"check",text:m},"condition"):(0,n.jsx)("button",{type:"button",className:v.actionLink,onClick:()=>u&&u(),children:b},"make-condition")},p=h=>{const u=(0,d.my)(h);return{actionLink:(0,a.css)(u,{color:h.colors.text.link,cursor:"pointer","&:hover":{textDecoration:"underline"}})}}},38206:(ne,j,e)=>{"use strict";e.d(j,{I_:()=>r,L1:()=>l,TU:()=>h,ci:()=>c,fc:()=>p,ve:()=>u});var n=e(65307),a=e(43173),s=e(18832);const d=a.$.bootData?.navTree??[];function o(v){return v.map(g=>{const E=g.children&&o(g.children);return{...g,children:E,text:(0,s.C)(g.id)??g.text,subTitle:(0,s.o)(g.id)??g.subTitle,emptyMessage:(0,s.C)(g.emptyMessageId)}})}const l="starred/",i=(0,n.Z0)({name:"navBarTree",initialState:()=>o(a.$.bootData?.navTree??[]),reducers:{setStarred:(v,g)=>{const E=v.find(D=>D.id==="starred"),{id:x,title:m,url:y,isStarred:b}=g.payload;if(E)if(b){E.children||(E.children=[]);const D={id:l+x,text:m,url:y};E.children.push(D),E.children.sort((f,C)=>f.text.localeCompare(C.text))}else{const D=E.children?.findIndex(f=>f.id===l+x)??-1;D>-1&&E?.children?.splice(D,1)}},setBookmark:(v,g)=>{if(!a.$.featureToggles.pinNavItems)return;const E=v.find(y=>y.id==="bookmarks"),{item:x,isSaved:m}=g.payload;if(E)if(m){E.children||=[];const y={...x,children:[],sortWeight:0,emptyMessageId:"",emptyMessage:"",parentItem:{id:E.id,text:E.text}};E.children.push(y)}else E.children=E.children?.filter(y=>y.url!==x.url)??[]},updateDashboardName:(v,g)=>{const{id:E,title:x,url:m}=g.payload,y=v.find(b=>b.id==="starred");if(y){const b=y.children?.find(D=>D.id===E);b&&(b.text=x,b.url=m,y.children?.sort((D,f)=>D.text.localeCompare(f.text)))}},removePluginFromNavTree:(v,g)=>{const E="plugin-page-"+g.payload.pluginID,x=v.findIndex(m=>m.id===E);x>-1&&v.splice(x,1)}}}),{setStarred:c,removePluginFromNavTree:p,updateDashboardName:h,setBookmark:u}=i.actions,r=i.reducer},38221:(ne,j,e)=>{"use strict";e.d(j,{H:()=>p,x:()=>h});var n=e(14644),a=e(17752),s=e(99703),d=e(99598),o=e(74276),l=e(96120),i=e(77839);let c;function p(){return c||(c=(0,n.combineReducers)({editor:a.wf,variables:i.Y,optionsPicker:d.ho,transaction:o.Dd,inspect:s.t4})),c}function h(){return{editor:a.nS,variables:l.j,optionsPicker:d.$z,transaction:o.i3,inspect:s.WT}}},38242:(ne,j,e)=>{"use strict";e.d(j,{Dw:()=>l,Jw:()=>i,Rx:()=>s,_M:()=>c,_W:()=>o,d$:()=>a});const n={statistics:[]};var a=(h=>(h[h.Insights=1]="Insights",h[h.Search=0]="Search",h))(a||{}),s=(h=>(h[h.Builder=0]="Builder",h[h.Code=1]="Code",h))(s||{});const d={parameters:[]};var o=(h=>(h.And="and",h.Function="function",h.FunctionParameter="functionParameter",h.GroupBy="groupBy",h.Operator="operator",h.Or="or",h.Property="property",h))(o||{}),l=(h=>(h.String="string",h))(l||{}),i=(h=>(h.Anomalies="Anomalies",h.Insights="Insights",h))(i||{}),c=(h=>(h.CWLI="CWLI",h.PPL="PPL",h.SQL="SQL",h))(c||{});const p={logGroupNames:[],logGroups:[],statsGroups:[]}},38353:(ne,j,e)=>{"use strict";e.d(j,{LZ:()=>d,aX:()=>l,xt:()=>i});var n=e(43173),a=e(68143),s=e(36580);function d(c){return c instanceof s.iy&&"hasBackendMigration"in c&&"shouldMigrate"in c}async function o(c){if(!(n.$.featureToggles.grafanaAPIServerWithExperimentalAPIs||n.$.featureToggles.datasourceAPIServers))return console.warn("migrateQuery is only available with the experimental API server"),c;const r=`/apis/${`${c[0].datasource?.type?.replace(/^(grafana-)?(.*?)(-datasource)?$/,"$2")}.datasource.grafana.app`}/v0alpha1/namespaces/${n.$.namespace}/queryconvert`,v={queries:c.map(E=>({...E,JSON:E}))};return(await(0,a.AI)().post(r,v)).queries.map(E=>E.JSON)}async function l(c,p){return!c.hasBackendMigration||!c.shouldMigrate(p)?p:(await o([p]))[0]}async function i(c,p){if(!c.hasBackendMigration||!p.targets.some(u=>c.shouldMigrate(u)))return p;const h=await o(p.targets);return{...p,targets:h}}},38388:(ne,j,e)=>{"use strict";e.d(j,{Oq:()=>n,bQ:()=>l,bs:()=>s});function n({searchWords:i,textToHighlight:c}){const p=[];for(const h of i)typeof h=="string"&&p.push(...s(c,h));return p}const a=i=>i.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function s(i,c){if(!i||!c)return[];const p=[],{cleaned:h,flags:u}=l(a(c));let r;try{r=new RegExp(`(?:${h})`,u)}catch{return p}return i.replace(r,(v,...g)=>{if(v){const E=g[g.length-2];p.push({text:v,start:E,length:v.length,end:E+v.length})}return""}),p}const d="-",o=/\(\?([ims-]+)\)/g;function l(i){const c=new Set(["g"]);return{cleaned:i.replace(o,(h,u)=>{const r=u.startsWith(d);for(let v=0;v<u.length;++v){const g=u.charAt(v);r||u.charAt(v-1)===d?c.delete(g):g!==d&&c.add(g)}return""}),flags:Array.from(c).join("")}}},38610:(ne,j,e)=>{"use strict";e.d(j,{O:()=>U});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(92745),l=e(63142),i=e(97095),c=e(18027),p=e(18857),h=e(63527),u=e(21285),r=e(41654),v=e(2954),g=e(4651),E=e(81988),x=e(66258),m=e(65307);const y=(0,m.VP)("thresold/updateRefId"),b=(0,m.VP)("thresold/updateThresholdType"),D=(0,m.VP)("thresold/updateThresholdParams"),f=(0,m.VP)("thresold/updateHysteresis"),C=(0,m.VP)("thresold/updateUnloadParams"),P=(0,m.vy)({type:g.Tz.threshold,refId:"",conditions:[]},z=>{z.addCase(y,(R,O)=>{R.expression=O.payload}),z.addCase(b,(R,O)=>{const N=O.payload.evalFunction,F=O.payload.onError;if(R.conditions[0].evaluator.type=N,R.conditions[0].evaluator.params=[0],!!R.conditions[0].unloadEvaluator){const H=T(R.conditions[0].evaluator.type);F&&F(void 0),R.conditions[0].evaluator.type=N;const K={type:H,params:R.conditions[0].evaluator?.params??[0,0]};R.conditions[0].unloadEvaluator=K}}),z.addCase(D,(R,O)=>{const{param:N,index:F}=O.payload;R.conditions[0].evaluator.params[F]=N}),z.addCase(f,(R,O)=>{const{hysteresisChecked:N,onError:F}=O.payload;N?R.conditions[0].unloadEvaluator={type:T(R.conditions[0].evaluator.type),params:R.conditions[0].evaluator?.params??[0,0]}:(R.conditions[0].unloadEvaluator=void 0,F&&F(void 0))}),z.addCase(C,(R,O)=>{const{param:N,index:F,onError:G}=O.payload;R.conditions[0].unloadEvaluator?R.conditions[0].unloadEvaluator.params[F]=N:R.conditions[0].unloadEvaluator={type:T(R.conditions[0].evaluator.type),params:R.conditions[0].evaluator?.params??[0,0]};const H=M(R.conditions[0]),{errorMsg:K,errorMsgFrom:w,errorMsgTo:Q}=H??{};G&&G(K||w||Q)})});function T(z){return z===v.p.IsAbove?v.p.IsBelow:z===v.p.IsBelow?v.p.IsAbove:z===v.p.IsEqual?v.p.IsNotEqual:z===v.p.IsNotEqual?v.p.IsEqual:z===v.p.IsGreaterThanEqual?v.p.IsLessThanEqual:z===v.p.IsLessThanEqual?v.p.IsGreaterThanEqual:z===v.p.IsWithinRange?v.p.IsOutsideRange:z===v.p.IsOutsideRange?v.p.IsWithinRange:z===v.p.IsWithinRangeIncluded?v.p.IsOutsideRangeIncluded:z===v.p.IsOutsideRangeIncluded?v.p.IsWithinRangeIncluded:v.p.IsBelow}function M(z){const{unloadEvaluator:R,evaluator:O}=z;if(!O)return;if(R?.params[0]===void 0||Number.isNaN(R?.params[0]))return{errorMsg:"This value cannot be empty"};const{type:N,params:F}=O,{params:G}=R;if(N===v.p.IsWithinRange||N===v.p.IsOutsideRange||N===v.p.IsWithinRangeIncluded||N===v.p.IsOutsideRangeIncluded){if(G[0]===void 0||Number.isNaN(G[0]))return{errorMsgFrom:"This value cannot be empty"};if(G[1]===void 0||Number.isNaN(G[1]))return{errorMsgTo:"This value cannot be empty"}}const[H,K]=R.params,[w,Q]=F;switch(N){case v.p.IsAbove:if(H>w)return{errorMsg:`Enter a number less than or equal to ${w}`};break;case v.p.IsBelow:if(H<w)return{errorMsg:`Enter a number more than or equal to ${w}`};break;case v.p.IsEqual:if(H===w)return{errorMsg:`Enter a different number than ${w}`};break;case v.p.IsNotEqual:if(H!==w)return{errorMsg:`Enter the same number as ${w}`};break;case v.p.IsGreaterThanEqual:if(H>=w)return{errorMsg:`Enter a number less than ${w}`};break;case v.p.IsLessThanEqual:if(H<=w)return{errorMsg:`Enter a number more than ${w}`};break;case v.p.IsOutsideRange:if(H<w)return{errorMsgFrom:`Enter a number more than or equal to ${w}`};if(K>Q)return{errorMsgTo:`Enter a number less than or equal to ${Q}`};break;case v.p.IsWithinRange:if(H>w)return{errorMsgFrom:`Enter a number less than or equal to ${w}`};if(K<Q)return{errorMsgTo:`Enter a number be more than or equal to ${Q}`};break;case v.p.IsOutsideRangeIncluded:if(H<=w)return{errorMsgFrom:`Enter a number more than ${w}`};if(K>=Q)return{errorMsgTo:`Enter a number less than ${Q}`};break;case v.p.IsWithinRangeIncluded:if(H>=w)return{errorMsgFrom:`Enter a number less than ${w}`};if(K<=Q)return{errorMsgTo:`Enter a number be more than ${Q}`};break;default:throw new Error(`evaluator function type ${N} not supported.`)}}const I=v.p.IsAbove,B={type:"query",evaluator:{type:I,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},U=({labelWidth:z,onChange:R,refIds:O,query:N,onError:F,useHysteresis:G=!1})=>{const H=(0,l.of)(V),K={...N,conditions:N.conditions?.length?N.conditions:[B]},[w,Q]=(0,d.useReducer)(P,K),k=w.conditions[0],te=g.zd.find(_=>_.value===w.conditions[0].evaluator?.type),q=_=>{Q(y(_.value))};(0,d.useEffect)(()=>{w&&R(w)},[w]);const se=_=>{Q(b({evalFunction:_.value??I,onError:F}))},re=(_,ee)=>{Q(D({param:parseFloat(_.currentTarget.value),index:ee}))},Y=k.evaluator.type===v.p.IsWithinRange||k.evaluator.type===v.p.IsOutsideRange||k.evaluator.type===v.p.IsOutsideRangeIncluded||k.evaluator.type===v.p.IsWithinRangeIncluded,X=(0,s.uniqueId)("threshold-");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.C,{children:(0,n.jsx)(c.I,{label:(0,o.t)("expressions.threshold.label-input","Input"),labelWidth:z,htmlFor:X,children:(0,n.jsx)(p.l6,{inputId:X,onChange:q,options:O,value:N.expression,width:20})})}),(0,n.jsxs)(i.C,{children:[(0,n.jsx)(E.E,{onChange:se,value:te}),Y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.p,{type:"number",width:10,onChange:_=>re(_,0),defaultValue:k.evaluator.params[0]}),(0,n.jsx)(x.Y,{}),(0,n.jsx)(h.p,{type:"number",width:10,onChange:_=>re(_,1),defaultValue:k.evaluator.params[1]})]}):(0,n.jsx)(h.p,{type:"number",width:10,onChange:_=>re(_,0),defaultValue:k.evaluator.params[0]||0})]}),G&&(0,n.jsx)(J,{isRange:Y,onError:F})]});function J({isRange:_,onError:ee}){const ae=!!k.unloadEvaluator,le=oe=>{Q(f({hysteresisChecked:oe.currentTarget.checked,onError:ee})),L.current=!0},L=d.useRef(!0),ie=()=>{L.current=!1};return(0,n.jsxs)("div",{className:H.hysteresis,children:[(0,n.jsx)("div",{onMouseDown:ie,children:(0,n.jsx)(u.K,{showLabel:!0,label:(0,o.t)("alerting.rule-form.threshold.recovery.title","Custom recovery threshold"),value:ae,onChange:le,className:H.switch})}),ae&&(0,n.jsx)(W,{isRange:_,condition:k,onError:ee,dispatch:Q,allowOnblur:L})]})}};function W({isRange:z,condition:R,onError:O,dispatch:N,allowOnblur:F}){const G=(0,l.of)(V),H=(se,re)=>{const Y=parseFloat(se.currentTarget.value);N(C({param:Y,index:re,onError:O}))},K=M(R),{errorMsg:w,errorMsgFrom:Q,errorMsgTo:k}=K??{};if(z)return(0,n.jsx)(te,{allowOnblur:F});return(0,n.jsx)(q,{allowOnblur:F});function te({allowOnblur:se}){switch(R.evaluator.type){case v.p.IsWithinRange:if(R.evaluator.type===v.p.IsWithinRange)return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-outside-range","Stop alerting (or pending state) when outside range"),labelWidth:"auto",children:(0,n.jsxs)(r.B,{direction:"row",gap:0,children:[(0,n.jsx)("div",{className:G.range,children:(0,n.jsx)(c.I,{invalid:!!Q,error:Q,className:G.noMargin,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>se.current&&H(re,0),defaultValue:R.unloadEvaluator?.params[0]})})}),(0,n.jsx)(x.Y,{}),(0,n.jsx)("div",{className:G.range,children:(0,n.jsx)(c.I,{invalid:!!k,error:k,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>se.current&&H(re,1),defaultValue:R.unloadEvaluator?.params[1]})})})]})})});case v.p.IsOutsideRange:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-inside-range","Stop alerting (or pending state) when inside range"),labelWidth:"auto",children:(0,n.jsxs)(r.B,{direction:"row",gap:0,children:[(0,n.jsx)("div",{className:G.range,children:(0,n.jsx)(c.I,{invalid:!!Q,error:Q,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>se.current&&H(re,0),defaultValue:R.unloadEvaluator?.params[0]})})}),(0,n.jsx)(x.Y,{}),(0,n.jsx)("div",{className:G.range,children:(0,n.jsx)(c.I,{invalid:!!k,error:k,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>se.current&&H(re,1),defaultValue:R.unloadEvaluator?.params[1]})})})]})})});case v.p.IsOutsideRangeIncluded:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-inside-range","Stop alerting (or pending state) when inside range"),labelWidth:"auto",children:(0,n.jsxs)(r.B,{direction:"row",gap:0,children:[(0,n.jsx)("div",{className:G.range,children:(0,n.jsx)(c.I,{invalid:!!Q,error:Q,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>se.current&&H(re,0),defaultValue:R.unloadEvaluator?.params[0]})})}),(0,n.jsx)(x.Y,{}),(0,n.jsx)("div",{className:G.range,children:(0,n.jsx)(c.I,{invalid:!!k,error:k,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>se.current&&H(re,1),defaultValue:R.unloadEvaluator?.params[1]})})})]})})});case v.p.IsWithinRangeIncluded:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-outside-range","Stop alerting (or pending state) when outside range"),labelWidth:"auto",children:(0,n.jsxs)(r.B,{direction:"row",gap:0,children:[(0,n.jsx)("div",{className:G.range,children:(0,n.jsx)(c.I,{invalid:!!Q,error:Q,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>se.current&&H(re,0),defaultValue:R.unloadEvaluator?.params[0]})})}),(0,n.jsx)(x.Y,{}),(0,n.jsx)("div",{className:G.range,children:(0,n.jsx)(c.I,{invalid:!!k,error:k,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>se.current&&H(re,1),defaultValue:R.unloadEvaluator?.params[1]})})})]})})});default:return null}}function q({allowOnblur:se}){switch(R.evaluator.type){case v.p.IsAbove:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-bellow","Stop alerting (or pending state) when below"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>{se.current&&H(re,0)},defaultValue:R.unloadEvaluator?.params[0]})})});case v.p.IsBelow:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-above","Stop alerting (or pending state) when above"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>{se.current&&H(re,0)},defaultValue:R.unloadEvaluator?.params[0]})})});case v.p.IsEqual:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-equal","Stop alerting (or pending state) when equal to"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>{se.current&&H(re,0)},defaultValue:R.unloadEvaluator?.params[0]})})});case v.p.IsNotEqual:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-not-equal","Stop alerting (or pending state) when not equal to"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>{se.current&&H(re,0)},defaultValue:R.unloadEvaluator?.params[0]})})});case v.p.IsGreaterThanEqual:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-less","Stop alerting (or pending state) when less than"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>{se.current&&H(re,0)},defaultValue:R.unloadEvaluator?.params[0]})})});case v.p.IsLessThanEqual:return(0,n.jsx)(i.C,{className:G.hysteresis,children:(0,n.jsx)(c.I,{label:(0,o.t)("alerting.rule-form.threshold.recovery.stop-alerting-more","Stop alerting (or pending state) when more than"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(h.p,{type:"number",width:10,onBlur:re=>{se.current&&H(re,0)},defaultValue:R.unloadEvaluator?.params[0]})})});default:return null}}}const V=z=>({range:(0,a.css)({width:"min-content"}),hysteresis:(0,a.css)({marginTop:z.spacing(2)}),switch:(0,a.css)({paddingLeft:z.spacing(1)}),noMargin:(0,a.css)({margin:0})})},38619:(ne,j,e)=>{"use strict";e.d(j,{Cz:()=>l,DG:()=>p,Qp:()=>u,Z7:()=>c,ZF:()=>s,aj:()=>h,ew:()=>o,jQ:()=>i,o4:()=>d,os:()=>a,qD:()=>n});var n=(r=>(r.DataSource="ds",r.Plugin="plugin",r.Grafana="grafana",r.Stream="stream",r.Watch="watch",r))(n||{}),a=(r=>(r.DataStream="stream",r.DataFrame="frame",r.JSON="json",r))(a||{}),s=(r=>(r.Pending="pending",r.Connected="connected",r.Connecting="connecting",r.Disconnected="disconnected",r.Shutdown="shutdown",r.Invalid="invalid",r))(s||{}),d=(r=>(r.Status="status",r.Join="join",r.Leave="leave",r.Message="message",r))(d||{});function o(r){return r.type==="status"}function l(r){return r.type==="join"}function i(r){return r.type==="leave"}function c(r){return r.type==="message"}function p(r){if(r?.length){let v=r.trim().split("/");if(v.length>=3)return{scope:v[0],namespace:v[1],path:v.slice(2).join("/")}}}function h(r){return!!(r?.path&&r.namespace&&r.scope)}function u(r){if(!r.scope)return"";let v=r.scope;return!r.namespace||(v+="/"+r.namespace,!r.path)?v:v+"/"+r.path}},38669:(ne,j,e)=>{"use strict";e.d(j,{a:()=>c});var n=e(74848),a=e(22803),s=e(92745),d=e(76319),o=e(35427),l=e(63142),i=e(13409);const c=({value:h,settings:u,onChange:r,details:v,id:g})=>{const E=(0,l.$j)(),x=(0,l.of)(p);return(0,n.jsx)(o.sk,{color:h??"",onChange:r,enableNamedColors:u?.enableNamedColors!==!1,children:({ref:m,showColorPicker:y,hideColorPicker:b})=>(0,n.jsxs)("div",{className:x.spot,children:[(0,n.jsx)("div",{className:x.colorPicker,children:(0,n.jsx)(i.q,{ref:m,id:g,onClick:y,onMouseLeave:b,color:h?E.visualization.getColorByName(h):E.components.input.borderColor})}),v&&(0,n.jsxs)(n.Fragment,{children:[h?(0,n.jsx)("span",{className:x.colorText,onClick:y,children:h}):(0,n.jsx)("span",{className:x.placeholderText,onClick:y,children:u?.placeholder??"Select color"}),u?.isClearable&&h&&(0,n.jsx)(d.K,{name:"times",onClick:()=>r(void 0),tooltip:(0,s.t)("options-ui.color.clear-tooltip","Clear settings")})]})]})})},p=h=>({spot:(0,a.css)({cursor:"pointer",color:h.colors.text.primary,background:h.components.input.background,borderRadius:h.shape.radius.default,padding:"3px",height:h.v1.spacing.formInputHeight,border:`1px solid ${h.components.input.borderColor}`,display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end","&:hover":{border:`1px solid ${h.components.input.borderHover}`}}),colorPicker:(0,a.css)({padding:`0 ${h.spacing(1)}`}),colorText:(0,a.css)({flexGrow:2}),placeholderText:(0,a.css)({flexGrow:2,color:h.colors.text.secondary})})},38681:(ne,j,e)=>{"use strict";e.d(j,{y:()=>i});var n=e(74848),a=e(96540),s=e(2863),d=e(16900),o=e(67933),l=e(56404);async function i(p,h=d.y.importDataSource){if((0,o.zs)(p))return p.variables.editor;if((0,o.X3)(p)){const u=await h(p.meta);if(!u.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return u.components.QueryEditor??null}return(0,o.Hf)(p)?c:(0,o.d5)(p)?(await h(p.meta)).components.VariableQueryEditor??l.z:null}function c({datasource:p,query:h,onChange:u}){const r=(0,a.useCallback)(v=>{u({refId:"StandardVariableQuery",query:v})},[u]);return(0,n.jsx)(l.z,{query:h.query,onChange:r,datasource:p,templateSrv:(0,s.w)()})}},38748:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>c,Tp:()=>d});var n=e(65307),a=e(61666);const s=(0,n.pU)({selectId:p=>p.code}),d=s.getSelectors(),o=s.getInitialState({status:"idle"}),c={invites:(0,n.Z0)({name:"invites",initialState:o,reducers:{},extraReducers:p=>{p.addCase(a.G7.pending,h=>{h.status="loading"}).addCase(a.G7.fulfilled,(h,{payload:u})=>{s.setAll(h,u),h.status="succeeded"}).addCase(a.G7.rejected,h=>{h.status="failed"}).addCase(a.eb.fulfilled,(h,{payload:u})=>{s.removeOne(h,u),h.status="succeeded"})}}).reducer}},38809:(ne,j,e)=>{"use strict";e.d(j,{AM:()=>s,Ch:()=>d,FM:()=>u,N7:()=>p,OU:()=>c,X4:()=>r,cz:()=>o,hL:()=>i,hS:()=>n,lG:()=>h,m0:()=>a,xT:()=>l});const n=v=>v,a=(v,g,E)=>{if(v!=null)return parseFloat(String(v))},s=(v,g,E)=>(delete g.field?.state?.displayName,c(v,g,E)),d=(v,g,E)=>v,o=(v,g,E)=>v,l=(v,g,E)=>v,i=(v,g,E)=>v,c=(v,g,E)=>v==null?v:E&&E.expandTemplateVars&&g.replaceVariables&&typeof v=="string"?g.replaceVariables(v,g.field.state.scopedVars):`${v}`,p=(v,g,E)=>v,h=(v,g,E)=>v,u=(v,g,E)=>v;var r=(v=>(v.IncludeAll="all",v.ExcludeBaseNames="exclude",v.OnlyBaseNames="only",v))(r||{})},38866:(ne,j,e)=>{"use strict";e.d(j,{$h:()=>u,bE:()=>i});var n=e(41119),a=e(77154),s=e(95004),d=e(28105),o=e(97534);const l={severity:"info",text:"Cached response"};function i(r,v){const g={data:[],state:d.Gu.Done},E="traceId"in r?r.traceId:void 0;E!=null&&(g.traceIds=[E]);const x=r;if(x.data?.results){const m=x.data.results,y=v?.length?v.map(f=>f.refId):Object.keys(m),b=c(x),D=[];for(const f of y){const C=m[f];C&&(C.refId=f,D.push(C))}for(const f of D){if(f.error){const C={refId:f.refId,message:f.error,status:f.status};E!=null&&(C.traceId=E),g.error||(g.error={...C}),g.errors?g.errors.push({...C}):g.errors=[{...C}],g.state=d.Gu.Error}if(f.frames?.length){for(let C of f.frames){b&&(C=p(C));const P=(0,a.or)(C);P.refId||(P.refId=f.refId),g.data.push(P)}continue}if(f.series?.length)for(const C of f.series)C.refId||(C.refId=f.refId),g.data.push((0,n.Vc)(C));if(f.tables?.length)for(const C of f.tables)C.refId||(C.refId=f.refId),g.data.push((0,n.Vc)(C))}}return x.status&&x.status!==200&&(g.state!==d.Gu.Error&&(g.state=d.Gu.Error),g.error||(g.error=(0,o.u)(r))),g}function c(r){const v=r?.headers;return!v||!v.get?!1:v.get("X-Cache")==="HIT"}function p(r){return{...r,schema:{...r.schema,fields:[...r.schema?.fields??[]],meta:{...r.schema?.meta,notices:[...r.schema?.meta?.notices??[],l],isCachedResponse:!0}}}}function h(r){const v=i(r);if(v.error?.data?.message)return{status:"error",message:v.error.data.message,details:v.error?.data?.error?{message:v.error.data.error}:void 0};if(v.error?.refId&&v.error?.message)return{status:"error",message:v.error.message};throw r}function u(r){if(!r||!r.length)return[];const v=[];let g=r.fields.find(E=>E.type===s.PU.string);if(g||(g=r.fields.find(E=>E.type!==s.PU.time)),g)for(let E=0;E<g.values.length;E++)v.push({text:""+g.values[E]});return v}},38919:(ne,j,e)=>{"use strict";e.d(j,{NV:()=>i,nQ:()=>o,v2:()=>l,wV:()=>d});var n=e(2543),a=e.n(n),s=e(95004),d=(c=>(c.Auto="auto",c.Vertical="vertical",c.Horizontal="horizontal",c))(d||{}),o=(c=>(c[c.Best=100]="Best",c[c.Good=70]="Good",c[c.OK=50]="OK",c))(o||{});class l{constructor(p,h){this.list=[],this.data=p,this.panel=h,this.dataSummary=this.computeDataSummary()}getListAppender(p){return new i(this.list,p)}computeDataSummary(){const p=this.data?.series||[];let h=0,u=0,r=0,v=0,g=0,E=0,x;for(const m of p){v+=m.length,m.meta?.preferredVisualisationType&&(x=m.meta.preferredVisualisationType);for(const y of m.fields)switch(E++,y.type){case s.PU.number:h+=1;break;case s.PU.time:u+=1;break;case s.PU.string:r+=1;break}m.length>g&&(g=m.length)}return{numberFieldCount:h,timeFieldCount:u,stringFieldCount:r,rowCountTotal:v,rowCountMax:g,fieldCount:E,preferredVisualisationType:x,frameCount:p.length,hasData:v>0,hasTimeField:u>0,hasNumberField:h>0,hasStringField:r>0}}getList(){return this.list}}class i{constructor(p,h){this.list=p,this.defaults=h}append(p){this.list.push((0,n.defaultsDeep)(p,this.defaults))}}},39050:(ne,j,e)=>{"use strict";e.d(j,{B:()=>a});var n=e(76732);const a=(s,d)=>{let o=1;return d?.structureRev&&d.series&&(o=d.structureRev,(0,n.J3)(s.series,d.series,n.bW)||o++),s.structureRev=o,s}},39064:(ne,j,e)=>{"use strict";e.d(j,{S:()=>E});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(31210),i=e(45861),c=e(5753),p=e(30703),h=e(41654);const u="add-annotation-button";function r(m,y,b){return(f,C)=>{if(f.length===0)return;const P=f.find(T=>T.oneClick===!0);return P!=null?(0,n.jsx)("div",{className:C.footerSection,children:(0,n.jsx)(h.B,{direction:"column",justifyContent:"flex-start",gap:.5,children:(0,n.jsxs)("span",{className:C.oneClickWrapper,children:[(0,n.jsx)(p.I,{name:"info-circle",size:"lg",className:C.infoIcon}),m(P.title)]})})}):(0,n.jsx)("div",{className:C.footerSection,children:(0,n.jsx)(h.B,{direction:"column",justifyContent:"flex-start",gap:b,children:f.map((T,M)=>y(T,M,C))})})}}const v=r(m=>(0,n.jsxs)(d.x6,{i18nKey:"grafana-ui.viz-tooltip.footer-click-to-navigate",children:["Click to open ",{linkTitle:m}]}),(m,y,b)=>(0,n.jsx)(c.R,{link:m,buttonProps:{className:b.dataLinkButton,fill:"text"}},y),.5),g=r(m=>(0,n.jsxs)(d.x6,{i18nKey:"grafana-ui.viz-tooltip.footer-click-to-action",children:["Click to ",{actionTitle:m}]}),(m,y)=>(0,n.jsx)(l.r,{action:m,variant:"secondary"},y)),E=({dataLinks:m,actions:y=[],annotate:b,adHocFilters:D=[]})=>{const f=(0,o.of)(x),C=(0,s.useMemo)(()=>m.some(T=>T.oneClick===!0),[m]),P=(0,s.useMemo)(()=>y.some(T=>T.oneClick===!0),[y]);return(0,n.jsxs)("div",{className:f.wrapper,children:[!P&&v(m,f),!C&&g(y,f),!C&&!P&&D.length>0&&(0,n.jsx)("div",{className:f.footerSection,children:D.map((T,M)=>(0,n.jsx)(i.$n,{icon:"filter",variant:"secondary",size:"sm",onClick:T.onClick,children:(0,n.jsxs)(d.x6,{i18nKey:"grafana-ui.viz-tooltip.footer-filter-for-value",children:["Filter for '",{value:T.value},"'"]})},M))}),!C&&!P&&b!=null&&(0,n.jsx)("div",{className:f.footerSection,children:(0,n.jsx)(i.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:u,onClick:b,children:(0,n.jsx)(d.x6,{i18nKey:"grafana-ui.viz-tooltip.footer-add-annotation",children:"Add annotation"})})})]})},x=m=>({wrapper:(0,a.css)({display:"flex",flexDirection:"column",flex:1,padding:m.spacing(0)}),footerSection:(0,a.css)({borderTop:`1px solid ${m.colors.border.medium}`,padding:m.spacing(1)}),dataLinkButton:(0,a.css)({cursor:"pointer","&:hover":{textDecoration:"underline",background:"none"},padding:0,height:"auto","& span":{whiteSpace:"normal",textAlign:"left"}}),oneClickWrapper:(0,a.css)({display:"flex",alignItems:"center"}),infoIcon:(0,a.css)({color:m.colors.primary.main,paddingRight:m.spacing(.5)})})},39167:(ne,j,e)=>{"use strict";e.d(j,{Y7:()=>Ke,TI:()=>Y,_q:()=>Ue,RK:()=>Pe,t9:()=>ue,x7:()=>L,Hn:()=>me,mZ:()=>Le,kl:()=>oe,us:()=>fe});var n=e(2543),a=e(7389),s=e(3594),d=e(28105),o=e(48480),l=e(36490),i=e(25992),c=e(43173),p=e(6890),h=e(15130),u=e(75421),r=e(8535),v=e(64762),g=e(73427),E=e(83873),x=e(68220),m=e(28998),y=e(59373),b=e(54742),D=e(8921),f=e(17752),C=e(67933),P=e(47969),T=e(99598),M=e(78763),I=e(88813),B=e(99305),U=e(21275),W=e(37918),V=e(74887),z=e(38221);const R=(de,ge=-1,pe=!1,De=!1)=>{const Me={};if(De){const be={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},Oe={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},Ne={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};Me[be.id]=be,Me[Oe.id]=Oe,Me[Ne.id]=Ne}for(let be=0;be<de;be++)Me[be]=createQueryVariable({id:be.toString(),name:`Name-${be}`,label:`Label-${be}`,index:be});return pe&&(Me[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:de})),Me},O=(de,ge={})=>{const pe={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...de.initialState,...pe},...ge}}}},N=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),F=()=>combineReducers({templating:keyedVariablesReducer});function G(de,ge){return{templating:{lastKey:de,keys:{[de]:{...getInitialTemplatingState(),...ge}}}}}function H(de,ge){return de.find(De=>De.name===ge)}function K(de){return(de.type==="query"||de.type==="datasource"||de.type==="interval")&&de.refresh===U.CO.onTimeRangeChanged}var w=e(93612),Q=e(88681),k=e(74276),te=e(77839);const q=(de,ge)=>(pe,De)=>{let Me=0;const be=ge.templating.list;for(let Ne=0;Ne<be.length;Ne++){const We=se(be[Ne]);We.rootStateKey=de,b.B.getIfExists(We.type)&&pe((0,V.kb)(de,(0,Q.QV)((0,B.qD)(We,{global:!1,index:Me++,model:We}))))}(0,y.w)().updateTimeRange((0,u.jG)().timeRange());const Oe=(0,w.SS)(de,De());for(const Ne of Oe)pe((0,V.kb)(de,(0,Q.wB)((0,B.qD)(Ne))))};function se(de){if(!(0,C.SP)(de))return de;let ge=!1;for(const pe of de.options)if(pe.selected=!1,Array.isArray(de.current.value))for(const De of de.current.value)pe.value===De&&(pe.selected=ge=!0);else pe.value===de.current.value&&(pe.selected=ge=!0);return!ge&&de.options.length&&(de.options[0].selected=!0),de}const re=(de,ge)=>pe=>{const De={...I.Vg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:a.zL.hideVariable,current:{value:{name:ge.title,uid:ge.uid,toString:()=>ge.title}}};pe((0,V.kb)(de,(0,Q.QV)((0,B.qD)(De,{global:De.global,index:De.index,model:De}))));const Me={...I.Vg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:a.zL.hideVariable,current:{value:{name:h.TP.user.orgName,id:h.TP.user.orgId,toString:()=>h.TP.user.orgId.toString()}}};pe((0,V.kb)(de,(0,Q.QV)((0,B.qD)(Me,{global:Me.global,index:Me.index,model:Me}))));const be={...I.Vg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:a.zL.hideVariable,current:{value:{login:h.TP.user.login,id:h.TP.user.id,email:h.TP.user.email,toString:()=>h.TP.user.id.toString()}}};pe((0,V.kb)(de,(0,Q.QV)((0,B.qD)(be,{global:be.global,index:be.index,model:be}))))},Y=(de,ge)=>(pe,De)=>{const{rootStateKey:Me}=de,be=(0,w.dn)(de,De());if(!(0,C.iv)(be)||(0,s.R)(be.current))return;const Oe=(0,M.C)(be.current,ge);pe((0,V.kb)(Me,(0,Q.QP)((0,B.qD)(de,{propName:"multi",propValue:ge})))),pe((0,V.kb)(Me,(0,Q.QP)((0,B.qD)(de,{propName:"current",propValue:Oe}))))},X=async(de,ge)=>{if(!de.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${de.id}`);if(J(de,ge))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const pe=_(de,ge);ee(de.rootStateKey,pe,ge)&&await new Promise(De=>{const Me=r.M_.subscribe(()=>{if(!de.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${de.id}`);ee(de.rootStateKey,pe,r.M_.getState())||(Me(),De())})})},J=(de,ge,pe=new Set)=>pe.has(de.id)?!0:(pe=new Set([...pe,de.id]),_(de,ge).some(De=>J(De,ge,pe))),_=(de,ge)=>{if(!de.rootStateKey)return[];const pe=[];for(const De of(0,w.SS)(de.rootStateKey,ge))de!==De&&b.B.getIfExists(de.type)&&b.B.get(de.type).dependsOn(de,De)&&pe.push(De);return pe},ee=(de,ge,pe)=>{if(ge.length===0)return!1;const De=(0,w.SS)(de,pe);return ge.filter(be=>De.some(Oe=>Oe.id===be.id&&(Oe.state===d.Gu.NotStarted||Oe.state===d.Gu.Loading))).length>0},ae=(de,ge)=>async(pe,De)=>{const Me=(0,w.dn)(de,De());await X(Me,De());const be=ge[D.qz+Me.name];if(be!==void 0){const Oe=(0,B.QT)(be);await b.B.get(Me.type).setValueFromUrl(Me,Oe);return}if(Me.hasOwnProperty("refresh")){const Oe=Me;if(Oe.refresh===a.CO.onDashboardLoad||Oe.refresh===a.CO.onTimeRangeChanged){await pe(Le((0,B.jX)(Oe)));return}}if(Me.type==="custom"){await pe(Le((0,B.jX)(Me)));return}pe(Be(de))},le=de=>async(ge,pe)=>{const De=l.Ny.getSearchObject(),Me=(0,w.SS)(de,pe()).map(async be=>await ge(ae((0,B.jX)(be),De)));await Promise.all(Me)},L=(de,ge)=>async(pe,De)=>{const Me=(0,B.QT)(ge),be=(0,w.dn)(de,De());(0,B.q$)(be)!==a.CO.never&&await pe(Le((0,B.jX)(be)));const Oe=(0,w.dn)((0,B.jX)(be),De());if(!(0,C.SP)(Oe))return;if(!Oe)throw new Error(`Couldn't find variable with name: ${be.name}`);let Ne=Oe.options.find(We=>We.text===Me||We.value===Me);if(!Ne&&(0,C.iv)(Oe)&&Oe.allValue&&Me===Oe.allValue&&(Ne={text:D.Zm,value:D.To,selected:!1}),!Ne){let We=Me;const qe=Me;Array.isArray(Me)&&(We=Me.reduce((st,rt)=>{const ot=Oe.options.find(mt=>mt.value===rt);return ot?[].concat(st,[ot.text]):[].concat(st,[rt])},[])),Ne={text:We,value:qe,selected:!1}}(0,C.iv)(Oe)&&(Ne=(0,M.C)({text:(0,n.castArray)(Ne.text),value:(0,n.castArray)(Ne.value),selected:!1},Oe.multi)),await b.B.get(be.type).setValue(Oe,Ne)},ie=de=>{let ge,pe,De,Me;const be=[];for(ge=0;ge<de.options.length;ge++)if(Me={...de.options[ge]},Me.selected=!1,Array.isArray(de.current.value))for(pe=0;pe<de.current.value.length;pe++)De=de.current.value[pe],Me.value===De&&(Me.selected=!0,be.push(Me));else Me.value===de.current.value&&(Me.selected=!0,be.push(Me));return be},oe=(de,ge)=>(pe,De)=>{const Me=(0,w.dn)(de,De());if(!(0,C.SP)(Me))return Promise.resolve();const be=Me.current||{},Oe=b.B.get(Me.type).setValue;if(Array.isArray(be.value)){const st=ie(Me);if(st.length===0){const ot=Me.options[0];return Oe(Me,{value:typeof ot.value=="string"?[ot.value]:ot.value,text:typeof ot.text=="string"?[ot.text]:ot.text,selected:!0})}const rt={value:st.map(ot=>ot.value),text:st.map(ot=>ot.text),selected:!0};return Oe(Me,rt)}let Ne=null;const We=(0,B.Nz)(Me),qe=(0,B.Lz)(Me);if(Ne=Me.options?.find(st=>st.text===We||st.value===qe),Ne||ge&&(Ne=Me.options?.find(st=>st.text===ge||st.value===ge),Ne))return Oe(Me,Ne);if(Me.options){const st=Me.options[0];if(st)return Oe(Me,st)}return Promise.resolve()},ue=(de,ge,pe)=>async De=>{const{rootStateKey:Me}=de;return De((0,V.kb)(Me,(0,Q.dE)((0,B.qD)(de,{option:ge})))),await De(fe(de,pe))},ye=de=>{const ge=new x.TS;return de.forEach(pe=>{ge.createNode(pe.name)}),de.forEach(pe=>{de.forEach(De=>{if(pe!==De&&b.B.get(pe.type).dependsOn(pe,De))try{ge.link(pe.name,De.name)}catch(Me){const be=Me instanceof Error?Me.message:"Unknown error";(0,i.FF)("Error linking variables",{error:be})}})}),ge},fe=(de,ge,pe=g.lE)=>async(De,Me)=>{const be=Me(),{rootStateKey:Oe}=de,Ne=(0,w.dn)(de,be);if((0,w.nx)(Oe,be).transaction.status===I.x8.Fetching)return(0,B.q$)(Ne)===a.CO.never&&(await De($e((0,B.jX)(Ne))),De(Be(de))),Promise.resolve();const We=(0,w.SS)(Oe,be),qe=ye(We),st=be.dashboard?.getModel()?.panels??[],rt=(0,P.P5)(st),ot=Ne.type==="adhoc"?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,P.xU)([Ne.id],qe,rt)),variable:(0,w.dn)(de,be)},mt=qe.getNode(Ne.name);let pt=[];return mt&&(pt=mt.getOptimizedInputEdges().map(ke=>{const Ze=We.find(nt=>nt.name===ke.inputNode?.name);return Ze?De(Le((0,B.jX)(Ze))):Promise.resolve()})),Promise.all(pt).then(()=>{ge&&(pe.publish(new I.og(ot)),l.Ny.partial(Qe(Oe,Me)))})},Ee=(de,ge,pe,De)=>(ge.includes(de.name)||ge.push(de.name),de.outputEdges.forEach(Me=>{const be=Me.outputNode;if(be&&!ge.includes(be.name)){const Oe=pe.find(Ne=>Ne.name===be.name);Oe&&Oe.refresh===a.CO.onTimeRangeChanged&&De.indexOf(Oe)===-1?(De.push(Oe),ge.push(be.name)):Ee(be,ge,pe,De)}}),De),Ae=(de,ge)=>de.outputEdges.every(pe=>{const De=pe.outputNode;if(De){const Me=H(ge,De.name);if(Me&&Me.type==="query")return Me.refresh!==a.CO.onTimeRangeChanged}return!0}),Ge=(de,ge)=>{const pe=(0,w.SS)(de,ge),De=ye(pe),Me=[],be=[];return pe.forEach(Oe=>{const Ne=De.getNode(Oe.name);if(!Me.includes(Oe.name)&&Ne){const We=H(pe,Ne.name);if(!We)return;const qe=K(We);qe&&Ne.outputEdges.length===0&&be.push(We),qe&&be.includes(We)&&Ne.outputEdges.length>0&&(be.push(We),Ee(Ne,Me,pe,be)),qe&&Ne.outputEdges.length>0&&Ae(Ne,pe)&&(be.includes(We)||be.push(We)),!qe&&Ne.outputEdges.length>0&&Ee(Ne,Me,pe,be)}}),be},Fe=(de,ge)=>(0,w.SS)(de,ge).filter(Me=>"refresh"in Me&&"options"in Me?Me.refresh===a.CO.onTimeRangeChanged:!1),Pe=(de,ge,pe={templateSrv:(0,y.w)(),events:g.lE})=>async(De,Me)=>{pe.templateSrv.updateTimeRange(ge);let be=[];c.$.featureToggles.refactorVariablesTimeRange?be=Ge(de,Me()):be=Fe(de,Me());const Oe=be.map(We=>We.id),Ne=be.map(We=>De(Ve((0,B.jX)(We))));try{await Promise.all(Ne),pe.events.publish(new I.BS({variableIds:Oe}))}catch(We){console.error(We),De((0,p.dx)(ze("Template variable service failed",We)))}},Ve=de=>async(ge,pe)=>{const De=(0,w.dn)(de,pe());if(!(0,C.SP)(De))return;const Me=De.options.slice();await ge(Le((0,B.jX)(De),!0));const be=(0,w.dn)(de,pe());if(!(0,C.SP)(be))return;const Oe=be.options;JSON.stringify(Me)!==JSON.stringify(Oe)&&pe().dashboard.getModel()?.templateVariableValueUpdated()},me=(de,ge,pe=g.lE)=>async(De,Me)=>{const be=[],Oe=Me().dashboard.getModel(),Ne=(0,w.SS)(de,Me());for(const ot of Ne){const mt=D.qz+ot.name;if(!ge.hasOwnProperty(mt)||!Se(ot,ge[mt].value))continue;let pt=ge[mt].value;if(ge[mt].removed){const Ze=Oe?.templating.list.find(nt=>nt.name===ot.name);Ze&&(0,C.m8)(Ze)&&(pt=Ze.current.value),Ze&&Ze.type==="constant"&&(pt=Ze.query)}const ke=b.B.get(ot.type).setValueFromUrl(ot,pt);be.push(ke)}const We=Ne.filter(ot=>{const mt=D.qz+ot.name;return ge.hasOwnProperty(mt)&&Se(ot,ge[mt].value)&&ot.type!=="adhoc"}),qe=ye(Ne),st=(0,P.P5)(Oe?.panels??[]),rt=(0,P.xU)(We.map(ot=>ot.id),qe,st);be.length&&(await Promise.all(be),pe.publish(new I.eF({refreshAll:rt.size===0,panelIds:Array.from(rt)})))};function Se(de,ge){const pe=b.B.get(de.type).getValueForUrl(de);let De=(0,B.QT)(ge);return Array.isArray(pe)&&!Array.isArray(De)&&(De=[De]),!(0,n.isEqual)(pe,De)}const Qe=(de,ge)=>{const pe=l.Ny.getSearchObject(),De=Object.keys(pe).filter(Me=>Me.indexOf(D.qz)===-1).reduce((Me,be)=>(Me[be]=pe[be],Me),{});for(const Me of(0,w.SS)(de,ge())){if(Me.skipUrlSync)continue;const be=b.B.get(Me.type);De[D.qz+Me.name]=be.getValueForUrl(Me)}return De},Ue=(de,ge)=>async(pe,De)=>{try{const Me=(0,B.q4)(de),be=De(),Oe=(0,w.Tk)(be);Oe&&(0,w.nx)(Oe,be).transaction.status===I.x8.Fetching&&pe(Ke(Oe)),pe((0,V.kb)(Me,(0,k.kH)({uid:Me}))),pe(re(Me,ge)),pe(q(Me,ge)),pe(Ie(Me)),await pe(le(Me)),pe((0,V.kb)(Me,(0,k.$O)({uid:Me})))}catch(Me){pe((0,p.dx)(ze("Templating init failed",Me))),console.error(Me)}};function Ie(de,ge=m.tR){return(pe,De)=>{const Me=(0,w.SS)(de,De());for(const be of Me){if(be.type!=="adhoc"&&be.type!=="query")continue;const{datasource:Oe}=be;if((0,o.fN)(Oe))continue;const Ne=ge().getInstanceSettings(Oe),We=Ne?(0,o.p$)(Ne):{uid:Oe};pe((0,V.kb)(de,(0,Q.QP)((0,B.qD)(be,{propName:"datasource",propValue:We}))))}}}const Re=de=>ge=>{ge((0,V.kb)(de,(0,te.v)())),ge((0,V.kb)(de,(0,f.y8)())),ge((0,V.kb)(de,(0,T.jR)())),ge((0,V.kb)(de,(0,k.pu)()))},Ke=(de,ge={getBackendSrv:E.AI})=>pe=>{ge.getBackendSrv().cancelAllInFlightRequests(),pe(Re(de))},Le=(de,ge=!1)=>async(pe,De)=>{const{rootStateKey:Me}=de;try{if(!(0,B.sN)(Me,De()))return;const be=(0,w.dn)(de,De());pe((0,V.kb)(Me,(0,Q.a7)((0,B.qD)(be)))),await pe($e((0,B.jX)(be))),await b.B.get(be.type).updateOptions(be),pe(Be(de))}catch(be){if(pe((0,V.kb)(Me,(0,Q.Te)((0,B.qD)(de,{error:be})))),ge||(console.error(be),pe((0,p.dx)(ze("Error updating options:",be,de)))),ge)throw be}},ze=(de,ge,pe)=>(0,v.gi)(`${pe?`Templating [${pe.id}]`:"Templating"}`,ge instanceof Error?`${de} ${ge.message}`:`${de}`),Be=de=>(ge,pe)=>{const{rootStateKey:De}=de;if(!(0,B.sN)(De,pe()))return;const Me=(0,w.dn)(de,pe());Me.state!==d.Gu.Done&&ge((0,V.kb)(de.rootStateKey,(0,Q.Pu)((0,B.qD)(Me))))};function $e(de,ge=m.tR){return async function(pe,De){const{id:Me,rootStateKey:be}=de;if(!(0,B.sN)(be,De()))return;const Oe=(0,w.dn)(de,De());if(Oe.type==="query")try{const Ne=await ge().get(Oe.datasource??"");if((0,C.d5)(Ne)||!(0,C.Hf)(Ne)||Ye(Oe.query))return;const We={refId:`${Ne.name}-${Me}-Variable-Query`,query:Oe.query};pe((0,V.kb)(be,(0,Q.QP)((0,B.qD)(de,{propName:"query",propValue:We}))))}catch(Ne){pe((0,p.dx)(ze("Failed to upgrade legacy queries",Ne))),console.error(Ne)}}}function Ye(de){return(0,d.Gv)(de)&&"refId"in de&&typeof de.refId=="string"}},39187:(ne,j,e)=>{"use strict";e.d(j,{h:()=>l,w:()=>i});var n=e(63704),a=e(43173),s=e(36490),d=e(74268),o=e(20962);function l(p){const h={returnTo:p},[u]=(0,o.l)(),r=u.get("returnTo");if(!r)return h;const v=n.sQ.sanitizeUrl(r),g=`${window.location.origin}/${a.$.appSubUrl}`,E=c(v,g);if(!E)return(0,d.FF)("Malformed returnTo parameter",{returnTo:r}),h;const{protocol:x,origin:m,pathname:y,search:b}=E;return["http:","https:"].includes(x)===!1||m!==window.location.origin?((0,d.FF)("Malformed returnTo parameter",{returnTo:r}),h):{returnTo:`${y}${b}`}}function i(p=!0){const{pathname:h,search:u}=s.Ny.getLocation();return h+(p?u:"")}function c(p,h){try{return new URL(p,h)}catch{return null}}},39242:(ne,j,e)=>{"use strict";e.d(j,{MS:()=>s,PP:()=>d,PS:()=>a,hM:()=>n});const n="--responsive-grid-dragged-item-top",a="--responsive-grid-dragged-item-left",s="--responsive-grid-dragged-item-width",d="--responsive-grid-dragged-item-height"},39302:(ne,j,e)=>{"use strict";e.d(j,{d:()=>o});var n=e(74848),a=e(22803),s=e(45861),d=e(63142);const o=({children:i,...c})=>{const p=(0,d.of)(l);return(0,n.jsx)("div",{className:p.buttonWrapper,children:(0,n.jsx)(s.$n,{icon:"plus",...c,children:i})})},l=i=>({buttonWrapper:(0,a.css)({padding:`${i.spacing(3)} 0`})})},39338:(ne,j,e)=>{"use strict";e.d(j,{t:()=>s});var n=e(15130),a=e(11257);function s(){const d=n.TP.hasPermission(a.w.DashboardsCreate),o=n.TP.hasPermission(a.w.DashboardsWrite);return d&&!o?"Add panel to new dashboard":o&&!d?"Add panel to existing dashboard":"Add panel to dashboard"}},39443:(ne,j,e)=>{"use strict";e.d(j,{m:()=>n});var n=(a=>(a.TimeSeriesWide="timeseries-wide",a.TimeSeriesLong="timeseries-long",a.TimeSeriesMany="timeseries-many",a.TimeSeriesMulti="timeseries-multi",a.NumericWide="numeric-wide",a.NumericMulti="numeric-multi",a.NumericLong="numeric-long",a.LogLines="log-lines",a.DirectoryListing="directory-listing",a.HeatmapRows="heatmap-rows",a.HeatmapCells="heatmap-cells",a.Histogram="histogram",a))(n||{})},39468:(ne,j,e)=>{"use strict";e.d(j,{d:()=>r});var n=e(74848),a=e(92745),s=e(10928),d=e(74475),o=e(45861),l=e(37386),i=e(18857),c=e(63527),p=e(32635),h=e(86871);const u=Object.keys(h.G).map(v=>({label:v,value:v}));function r({link:v,onUpdate:g,onGoBack:E}){const x=[{value:"dashboards",label:(0,a.t)("dashboard-scene.dashboard-link-form.link-type-options.label.dashboards","Dashboards")},{value:"link",label:(0,a.t)("dashboard-scene.dashboard-link-form.link-type-options.label.link","Link")}],m=C=>{g({...v,tags:C})},y=C=>{const P={...v,type:C.value};P.type==="dashboards"?(P.url="",P.tooltip=""):P.tags=[],g(P)},b=C=>{g({...v,icon:C.value})},D=C=>{const P=C.currentTarget;g({...v,[P.name]:P.type==="checkbox"?P.checked:P.value})},f=v.title===h.q.title;return(0,n.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,n.jsx)(l.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-title","Title"),children:(0,n.jsx)(c.p,{name:"title",id:"title",value:v.title,onChange:D,autoFocus:f})}),(0,n.jsx)(l.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-type","Type"),children:(0,n.jsx)(i.l6,{inputId:"link-type-input",value:v.type,options:x,onChange:y})}),v.type==="dashboards"&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-with-tags","With tags"),children:(0,n.jsx)(s.u,{tags:v.tags,onChange:m})})}),v.type==="link"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-url","URL"),children:(0,n.jsx)(c.p,{name:"url",value:v.url,onChange:D})}),(0,n.jsx)(l.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-tooltip","Tooltip"),children:(0,n.jsx)(c.p,{name:"tooltip",value:v.tooltip,onChange:D,placeholder:(0,a.t)("dashboard-scene.dashboard-link-form.placeholder-open-dashboard","Open dashboard")})}),(0,n.jsx)(l.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-icon","Icon"),children:(0,n.jsx)(i.l6,{value:v.icon,options:u,onChange:b})})]}),(0,n.jsxs)(d.M,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-options","Options"),isOpen:!0,children:[v.type==="dashboards"&&(0,n.jsx)(l.D,{children:(0,n.jsx)(p.S,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-show-as-dropdown","Show as dropdown"),name:"asDropdown",value:v.asDropdown,onChange:D})}),(0,n.jsx)(l.D,{children:(0,n.jsx)(p.S,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-include-current-time-range","Include current time range"),name:"keepTime",value:v.keepTime,onChange:D})}),(0,n.jsx)(l.D,{children:(0,n.jsx)(p.S,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-include-current-template-variable-values","Include current template variable values"),name:"includeVars",value:v.includeVars,onChange:D})}),(0,n.jsx)(l.D,{children:(0,n.jsx)(p.S,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-open-link-in-new-tab","Open link in new tab"),name:"targetBlank",value:v.targetBlank,onChange:D})})]}),(0,n.jsx)(o.$n,{variant:"secondary",onClick:E,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.dashboard-link-form.back-to-list",children:"Back to list"})})]})}},39508:(ne,j,e)=>{"use strict";e.d(j,{Jc:()=>h,LY:()=>c,MM:()=>p,NB:()=>i,k6:()=>o,qJ:()=>l,sB:()=>d});var n=e(21275),a=e(739),s=e(11393);const d="__legacyStringValue";function o(u){switch(u){case 0:return"Off";case 1:return"Crosshair";case 2:return"Tooltip";default:return(0,s.xE)().cursorSync}}function l(u){switch(u){case 0:return"never";case 1:return"onDashboardLoad";case 2:return"onTimeRangeChanged";default:return(0,s.FM)()}}function i(u){switch(u){case 0:return"dontHide";case 1:return"hideLabel";case 2:return"hideVariable";case 3:return"inControlsMenu";default:return(0,s.SR)()}}function c(u){switch(u){case 0:return"disabled";case 1:return"alphabeticalAsc";case 2:return"alphabeticalDesc";case 3:return"numericalAsc";case 4:return"numericalDesc";default:return(0,s.G9)()}}function p(u){switch(u){case"annotations":return a.QR.Annotations;case"alertStates":return a.QR.AlertStates;case"series":return a.QR.Series;default:return}}function h(u){switch(u){case n.Yb.Thresholds:return"thresholds";case n.Yb.PaletteClassic:return"palette-classic";case n.Yb.PaletteClassicByName:return"palette-classic-by-name";case n.Yb.ContinuousGrYlRd:return"continuous-GrYlRd";case n.Yb.ContinuousRdYlGr:return"continuous-RdYlGr";case n.Yb.ContinuousBlYlRd:return"continuous-BlYlRd";case n.Yb.ContinuousYlRd:return"continuous-YlRd";case n.Yb.ContinuousBlPu:return"continuous-BlPu";case n.Yb.ContinuousYlBl:return"continuous-YlBl";case n.Yb.ContinuousBlues:return"continuous-blues";case n.Yb.ContinuousReds:return"continuous-reds";case n.Yb.ContinuousGreens:return"continuous-greens";case n.Yb.ContinuousPurples:return"continuous-purples";case n.Yb.Fixed:return"fixed";case n.Yb.Shades:return"shades";default:return}}},39557:(ne,j,e)=>{"use strict";e.d(j,{B:()=>o});var n=e(74848),a=e(62467),s=e(81160),d=e(44248);class o extends d.n8{constructor(i){super({name:"",type:"snapshot",isReadOnly:!0,query:"",value:"",text:"",options:[],...i}),this._variableDependency=new d.Sh(this,{statePaths:[]})}getValueOptions(i){const h=(d.jh.interpolate(this,this.state.query).match(/(?:\\,|[^,])+/g)??[]).map(u=>{u=u.replace(/\\,/g,",");const r=/^(.+)\s:\s(.+)$/g.exec(u)??[];if(r.length===3){const[,v,g]=r;return{label:v.trim(),value:g.trim()}}else return{label:u.trim(),value:u.trim()}});return(0,a.of)(h)}validateAndUpdate(){return this.getValueOptions({}).pipe((0,s.T)(i=>(this.state.options!==i&&this._updateValueGivenNewOptions(i),{})))}static{this.Component=({model:i})=>(0,n.jsx)(d.WY,{model:i})}_updateValueGivenNewOptions(i){const{value:c,text:p}=this.state,h={options:i,loading:!1,value:c??[],text:p??[]};this.setState(h)}}},39659:(ne,j,e)=>{"use strict";e.d(j,{Dd:()=>d,F2:()=>p,M4:()=>s,lL:()=>i,rm:()=>c,x4:()=>l,zm:()=>o});var n=e(2543),a=e.n(n);function s(u){return Object.entries(u).map(([r,v])=>`${r}=${v}`).sort()}function d(u){return Object.entries(u)}function o(u){const r={};return u.forEach(v=>{r[v[0]]=v[1]}),r}function l(u){const r={};return u.forEach(v=>{v.key&&(r[v.key]=v.value)}),r}const i="__grafana_origin";function c(u){return(0,n.isEmpty)(u)?0:Object.keys(u).filter(r=>!p(r)).length}function p(u){return u.startsWith("__")&&u.endsWith("__")||u===i}const h=([u,r])=>p(u)},39698:(ne,j,e)=>{"use strict";e.d(j,{PL:()=>a,o:()=>o,se:()=>d});var n=e(43173);async function a(l){try{const i=n.$.bootData.user.theme==="light"?l.light:l.dark;return window.System.import(i)}catch(i){console.error(i)}}let s;function d(l){if(s)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");s=l}function o(){if(!s)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return s}},39796:(ne,j,e)=>{"use strict";e.d(j,{M:()=>n});const n=s=>{for(let d=0;;d++){const o=a(d);if(!s.some(l=>l.refId===o))return o}};function a(s){const d="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return s<d.length?d[s]:a(Math.floor(s/d.length)-1)+d[s%d.length]}},39884:(ne,j,e)=>{"use strict";e.d(j,{I:()=>c});var n=e(74848),a=e(22803),s=e(51898),d=e(92745),o=e(63142),l=e(30703),i=e(45967);const c=({onCancel:u,loading:r})=>{const v=window.matchMedia("(prefers-reduced-motion: reduce)").matches,g=(0,o.of)(h);return r?(0,n.jsx)(i.m,{content:(0,d.t)("grafana-ui.panel-chrome.tooltip-cancel-loading","Cancel query"),children:(0,n.jsx)(l.I,{className:(0,a.cx)(g.spin,{[g.clickable]:!!u}),name:v?"hourglass":"sync",size:"sm",onClick:u,"data-testid":s.Tp.components.LoadingIndicator.icon})}):null},p=(0,a.keyframes)({"0%":{transform:"rotate(0deg) scaleX(-1)"},"100%":{transform:"rotate(359deg) scaleX(-1)"}}),h=u=>({clickable:(0,a.css)({cursor:"pointer"}),spin:(0,a.css)({[u.transitions.handleMotion("no-preference")]:{animation:`${p} 3s linear infinite`}})})},39947:(ne,j,e)=>{"use strict";e.d(j,{Di:()=>u,Ee:()=>h,LP:()=>p});var n=e(25229),a=e(74529),s=e(22592),d=e(24610),o=e(95443),l=e(63895),i=e(84266),c=e(15130);const p=r=>{const v={},g=r.get("comment"),x=r.getAll("matcher").filter(y=>!y.startsWith(o.kW)),m=(0,l.ou)(x);return m.length&&(v.matchers=m.map(d.MU)),g&&(v.comment=g),v},h=r=>{const v=new Date,E=Date.parse(r.endsAt)<Date.now()?{start:v,end:(0,a.Ri)(v,{hours:2})}:{start:new Date(r.startsAt),end:new Date(r.endsAt)};return{id:r.id,startsAt:E.start.toISOString(),endsAt:E.end.toISOString(),comment:r.comment,createdBy:r.createdBy,duration:(0,a.dU)(E),isRegex:!1,matchers:r.matchers?.map(d.MU)||[],matcherName:"",matcherValue:"",timeZone:s.lE}},u=r=>{const v=new Date,g=(0,a.Ri)(v,{hours:2});return{id:"",startsAt:v.toISOString(),endsAt:g.toISOString(),comment:`created ${(0,n.KQ)().format("YYYY-MM-DD HH:mm")}`,createdBy:c.TP.user.name,duration:"2h",isRegex:!1,matcherName:"",matcherValue:"",timeZone:s.lE,matchers:[{name:"",value:"",operator:i.ho.equal}],...r}}},40041:(ne,j,e)=>{"use strict";e.d(j,{gs:()=>i,yt:()=>h});var n=e(81160),a=e(95004),s=e(79319),d=e(36638),o=e(57866),l=e(64761),i=(r=>(r.UpperCase="Upper Case",r.LowerCase="Lower Case",r.SentenceCase="Sentence Case",r.TitleCase="Title Case",r.PascalCase="Pascal Case",r.CamelCase="Camel Case",r.SnakeCase="Snake Case",r.KebabCase="Kebab Case",r.Trim="Trim",r.Substring="Substring",r))(i||{});const c=r=>{const v=r.split(" ");for(let g=0;g<v.length;g++)v[g]=v[g].charAt(0).toUpperCase()+v[g].slice(1).toLowerCase();return v},p=r=>v=>v.values.map(g=>{switch(r.outputFormat){case"Upper Case":return g.toUpperCase();case"Lower Case":return g.toLowerCase();case"Sentence Case":return g.charAt(0).toUpperCase()+g.slice(1);case"Title Case":return c(g).join(" ");case"Pascal Case":return c(g).join("");case"Camel Case":return g=c(g).join(""),g.charAt(0).toLowerCase()+g.slice(1);case"Snake Case":return g.toLowerCase().split(" ").join("_");case"Kebab Case":return g.toLowerCase().split(" ").join("-");case"Trim":return g.trim();case"Substring":return g.substring(r.substringStart,r.substringEnd)}}),h={id:l.F.formatString,name:"Format string",description:"Manipulate string fields formatting",defaultOptions:{stringField:"",outputFormat:"Upper Case"},isApplicable:r=>{for(const v of r)for(const g of v.fields)if(g.type==="string")return s.M.Applicable;return s.M.NotApplicable},operator:r=>v=>v.pipe((0,n.T)(g=>{if(g.length===0)return g;const E=d.sJ.get(o.Ct.byName).get(r.stringField),x=p(r),m=u(E,x);return g.map(y=>({...y,fields:m(y,g)}))}))},u=(r,v)=>(g,E)=>g.fields.map(x=>{if(r(x,g,E)){const m=v(x);return{...x,type:a.PU.string,values:m}}return x})},40165:(ne,j,e)=>{"use strict";e.d(j,{X:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({className:l,label:i,horizontal:c,children:p,childrenWrapperClassName:h})=>{const u=(0,s.of)(o);return(0,n.jsxs)("div",{className:(0,a.cx)(u.field,c?u.fieldHorizontal:u.fieldVertical,l),children:[(0,n.jsx)("div",{children:i}),(0,n.jsx)("div",{className:h,children:p})]})},o=l=>({fieldHorizontal:(0,a.css)({flexDirection:"row",[l.breakpoints.down("md")]:{flexDirection:"column"}}),fieldVertical:(0,a.css)({flexDirection:"column"}),field:(0,a.css)({display:"flex",margin:`${l.spacing(2)} 0`,"& > div:first-child":{width:"110px",paddingRight:l.spacing(1),fontSize:l.typography.size.sm,fontWeight:l.typography.fontWeightBold,lineHeight:1.8},"& > div:nth-child(2)":{flex:1,color:l.colors.text.secondary}})})},40203:(ne,j,e)=>{"use strict";e.d(j,{G:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({children:l,wrap:i,className:c})=>{const p=(0,s.$j)(),h=o(p,i);return(0,n.jsx)("div",{className:(0,a.cx)(h.container,c),children:l})},o=(l,i)=>({container:(0,a.css)({display:"flex",flexDirection:"row",flexWrap:i?"wrap":"nowrap","& > *":{marginBottom:l.spacing(),marginRight:l.spacing()},"& > *:last-child":{marginRight:0}})})},40279:(ne,j,e)=>{"use strict";e.d(j,{gH:()=>v,wI:()=>x});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(96540),l=e(10824),i=e(55386),c=e(92745),p=e(63142),h=e(34999),u=e(30703),r=e(48431);function v({options:f,children:C,readAs:P,onLoad:T,fileListRenderer:M,onFileRemove:I,id:B}){const[U,W]=(0,o.useState)([]),[V,z]=(0,o.useState)([]),R=(0,i.j_)("decbytes")(f?.maxSize?f?.maxSize:0),O=(0,o.useCallback)((re,Y)=>{W(X=>X.map(J=>(J.id===re.id&&Y(J),J)))},[]),N=(0,o.useCallback)((re,Y,X)=>{let J=re.map(b);if(f?.multiple===!1?W(J):W(_=>[..._,...J]),te(Y),f?.onDrop)f.onDrop(re,Y,X);else for(const _ of J){const ee=new FileReader,ae=()=>{P?ee[P](_.file):ee.readAsText(_.file)};O(_,le=>{le.abortUpload=()=>{ee.abort()},le.retryUpload=()=>{O(_,L=>{L.error=null,L.progress=void 0}),ae()}}),ee.onabort=()=>{O(_,le=>{le.error=new DOMException("Aborted")})},ee.onprogress=le=>{O(_,L=>{L.progress=le.loaded})},ee.onload=()=>{T?.(ee.result)},ee.onerror=()=>{O(_,le=>{le.error=ee.error})},ae()}},[T,f,P,O]),F=re=>{const Y=U.filter(X=>re.id!==X.id);W(Y),I?.(re)},{getRootProps:G,getInputProps:H,isDragActive:K}=(0,l.VB)({...f,useFsAccessApi:!1,onDrop:N,accept:E(f?.accept)}),w=(0,p.$j)(),Q=D(w,K),k=U.map(re=>M?M(re,F):(0,n.jsx)(r.I,{file:re,removeFile:F},re.id)),te=re=>{let Y=[];re.map(X=>{X.errors.map(J=>{Y.findIndex(_=>_.code===J.code&&_.message===J.message)===-1&&Y.push(J)})}),z(Y)},q=re=>{const Y=(0,i.cN)(R);return(0,n.jsx)("div",{className:Q.errorAlert,children:(0,n.jsx)(h.F,{title:(0,c.t)("grafana-ui.file-dropzone.error-title","Upload failed"),severity:"error",onRemove:se,children:re.map(X=>{switch(X.code){case l.O4.FileTooLarge:return(0,n.jsx)("div",{children:(0,n.jsxs)(c.x6,{i18nKey:"grafana-ui.file-dropzone.file-too-large",children:["File is larger than ",{size:Y}]})},X.message+X.code);default:return(0,n.jsx)("div",{children:X.message},X.message+X.code)}})})})},se=()=>{z([])};return(0,n.jsxs)("div",{className:Q.container,children:[(0,n.jsxs)("div",{"data-testid":"dropzone",...G({className:Q.dropzone}),children:[(0,n.jsx)("input",{...H(),id:B}),C??(0,n.jsx)(x,{primaryText:m(U,f)})]}),V.length>0&&q(V),(0,n.jsxs)("small",{className:(0,a.cx)(Q.small,Q.acceptContainer),children:[f?.maxSize&&`Max file size: ${(0,i.cN)(R)}`,f?.maxSize&&f?.accept&&(0,n.jsx)("span",{className:Q.acceptSeparator,children:"|"}),f?.accept&&y(f.accept)]}),k]})}function g(f){return["txt","json","csv","xls","yml"].some(C=>f.match(C))?"text/plain":"application/octet-stream"}function E(f){return(0,s.isString)(f)?{[g(f)]:[f]}:Array.isArray(f)?f.reduce((C,P)=>{const T=g(P);return C[T]=C[T]?[...C[T],P]:[P],C},{}):f}function x({primaryText:f="Drop file here or click to upload",secondaryText:C=""}){const P=(0,p.$j)(),T=D(P);return(0,n.jsxs)("div",{className:(0,a.cx)(T.defaultDropZone),"data-testid":"file-drop-zone-default-children",children:[(0,n.jsx)(u.I,{className:(0,a.cx)(T.icon),name:"upload",size:"xl"}),(0,n.jsx)("h6",{className:(0,a.cx)(T.primaryText),children:f}),(0,n.jsx)("small",{className:T.small,children:C})]})}function m(f,C){return C?.multiple===void 0||C?.multiple?"Upload file":f.length?"Replace file":"Upload file"}function y(f){return(0,s.isString)(f)?`Accepted file type: ${f}`:Array.isArray(f)?`Accepted file types: ${f.join(", ")}`:`Accepted file types: ${Object.values(f).flat().join(", ")}`}function b(f){return{id:(0,s.uniqueId)("file"),file:f,error:null}}function D(f,C){return{container:(0,a.css)({display:"flex",flexDirection:"column",width:"100%",padding:f.spacing(2),borderRadius:f.shape.radius.default,border:`1px dashed ${f.colors.border.strong}`,backgroundColor:C?f.colors.background.secondary:f.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,a.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,a.css)({textAlign:"center"}),icon:(0,a.css)({marginBottom:f.spacing(1)}),primaryText:(0,a.css)({marginBottom:f.spacing(1)}),acceptContainer:(0,a.css)({textAlign:"center",margin:0}),acceptSeparator:(0,a.css)({margin:`0 ${f.spacing(1)}`}),small:(0,a.css)({color:f.colors.text.secondary}),errorAlert:(0,a.css)({paddingTop:"10px"})}}},40360:(ne,j,e)=>{"use strict";e.d(j,{c:()=>d});var n=e(74848),a=e(30703),s=e(66404);const d=({namespace:o,group:l})=>l?(0,n.jsxs)(s.E,{element:"h3",variant:"body",children:[o," ",(0,n.jsx)(a.I,{name:"angle-right","aria-label":">"})," ",l]}):(0,n.jsx)(s.E,{element:"h3",variant:"body",children:o})},40601:(ne,j,e)=>{"use strict";e.d(j,{lp:()=>u});var n=e(74848),a=e(22803),s=e(63142),d=e(45861),o=e(31286),l=e(41654),i=e(87105);const c="configured",p="Reset",h=r=>({configuredStyle:(0,a.css)({minHeight:r.spacing(r.components.height.md),paddingTop:r.spacing(.5),resize:"none"})}),u=({isConfigured:r,onReset:v,...g})=>{const E=(0,s.of)(h);return(0,n.jsxs)(l.B,{children:[(0,n.jsxs)(o.a,{children:[!r&&(0,n.jsx)(i.f,{...g}),r&&(0,n.jsx)(i.f,{...g,rows:1,disabled:!0,value:c,className:(0,a.cx)(E.configuredStyle)})]}),r&&(0,n.jsx)(d.$n,{onClick:v,variant:"secondary",children:p})]})}},41e3:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>a});var n=e(62717);function a(s,d){const o=(0,n.HD)(d);if(!o)return s;const l=o.utcOffset(s.getTime()),i=s.getTimezoneOffset(),c=l-i;return new Date(s.getTime()-c*1e3*60)}},41069:(ne,j,e)=>{"use strict";e.d(j,{H:()=>d});var n=e(53543),a=e(92745),s=e(739);function d(o,l=!0,i=!0){const c=[(0,a.t)("grafana-ui.builder.legend.category","Legend")];o.addBooleanSwitch({path:"legend.showLegend",name:(0,a.t)("grafana-ui.builder.legend.name-visibility","Visibility"),category:c,description:"",defaultValue:i}).addRadio({path:"legend.displayMode",name:(0,a.t)("grafana-ui.builder.legend.name-mode","Mode"),category:c,description:"",defaultValue:s.lm.List,settings:{options:[{value:s.lm.List,label:(0,a.t)("grafana-ui.builder.legend.mode-options.label-list","List")},{value:s.lm.Table,label:(0,a.t)("grafana-ui.builder.legend.mode-options.label-table","Table")}]},showIf:p=>p.legend.showLegend}).addRadio({path:"legend.placement",name:(0,a.t)("grafana-ui.builder.legend.name-placement","Placement"),category:c,description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:(0,a.t)("grafana-ui.builder.legend.placement-options.label-bottom","Bottom")},{value:"right",label:(0,a.t)("grafana-ui.builder.legend.placement-options.label-right","Right")}]},showIf:p=>p.legend.showLegend}).addNumberInput({path:"legend.width",name:(0,a.t)("grafana-ui.builder.legend.name-width","Width"),category:c,settings:{placeholder:"Auto"},showIf:p=>p.legend.showLegend&&p.legend.placement==="right"}),l&&o.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:(0,a.t)("grafana-ui.builder.legend.name-values","Values"),category:c,description:(0,a.t)("grafana-ui.builder.legend.description-values","Select values or calculations to show in legend"),editor:n.D.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:p=>p.legend.showLegend!==!1})}},41071:(ne,j,e)=>{"use strict";e.d(j,{_:()=>a,i:()=>s});let n;const a=d=>{n=d},s=()=>n?n():()=>console.error("ReturnToPrevious hook not found")},41097:(ne,j,e)=>{"use strict";e.d(j,{$:()=>u,W:()=>h});var n=e(74848),a=e(96540),s=e(16207),d=e(11594),o=e(92745),l=e(34999),i=e(96221),c=e(42581);const p=(0,a.memo)(({title:r,text:v})=>{const g={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return(0,n.jsx)("div",{style:g,children:(0,n.jsx)(l.F,{severity:i.Qd.Error,title:r,children:v})})});p.displayName="PanelPluginError";function h(r,v){const g=(0,a.memo)(()=>{const x=(0,n.jsxs)(o.x6,{i18nKey:"panel.panel-plugin-error.text-load-error",children:["Check the server startup logs for more information. ",(0,n.jsx)("br",{}),"If this plugin was loaded from Git, then make sure it was compiled."]});return(0,n.jsx)(p,{title:(0,o.t)("panel.panel-plugin-error.title-load-error","Error loading: {{panelId}}",{panelId:r.id}),text:x})});g.displayName="LoadError";const E=new s.m(g);return E.meta=r,E.loadError=!0,E}function u(r,v){const g=(0,a.memo)(()=>(0,n.jsx)(p,{title:(0,o.t)("panel.panel-plugin-error.title-not-found","Panel plugin not found: {{id}}",{id:r})}));g.displayName="NotFound";const E=new s.m(v?()=>null:g);return E.meta={id:r,name:r,sort:100,type:d.QE.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:c},screenshots:[],updated:"",version:""}},E}},41119:(ne,j,e)=>{"use strict";e.d(j,{Bt:()=>R,By:()=>W,EI:()=>N,ES:()=>M,HW:()=>m,KR:()=>V,Kl:()=>U,LI:()=>C,N$:()=>O,Vc:()=>P,XQ:()=>b,Yn:()=>B,by:()=>E,ci:()=>f,dF:()=>y,oE:()=>x,pH:()=>D,q7:()=>I,w3:()=>T});var n=e(2543),a=e.n(n),s=e(25229),d=e(92446),o=e(16515),l=e(28105),i=e(95004),c=e(27359),p=e(77154);function h(F){const G=F.columns.map(H=>{const{text:K,type:w,...Q}=H,k=[];return{name:K?.length?K:H,config:Q||{},values:k,type:w&&Object.values(i.PU).includes(w)?w:i.PU.other}});if(!(0,n.isArray)(F.rows))throw new Error(`Expected table rows to be array, got ${typeof F.rows}.`);for(const H of F.rows)for(let K=0;K<G.length;K++)G[K].values.push(H[K]);for(const H of G)if(H.type===i.PU.other){const K=y(H);K&&(H.type=K)}return{fields:G,refId:F.refId,meta:F.meta,name:F.name,length:F.rows.length}}function u(F){const G=[],H=[],K=F.datapoints||F.points;for(const Q of K)H.push(Q[0]),G.push(Q[1]);const w=[{name:i.LE,type:i.PU.time,config:{},values:G},{name:i.Bc,type:i.PU.number,config:{unit:F.unit},values:H,labels:F.tags}];return F.title&&(w[1].config.displayNameFromDS=F.title),{name:F.target||F.name,refId:F.refId,meta:F.meta,fields:w,length:H.length}}function r(F){const G=[],H=[];for(let K=0;K<F.data.length;K++){const w=F.data[K];G.push(w[1]),H.push(w[0])}return{name:F.label,fields:[{name:F.label||i.Bc,type:i.PU.number,config:{},values:G},{name:i.LE,type:i.PU.time,config:{unit:"dateTimeAsIso"},values:H}],length:G.length}}function v(F){const G=[{name:F.target,type:i.PU.other,labels:F.tags,config:{unit:F.unit,filterable:F.filterable},values:[]}];for(const H of F.datapoints)G[0].values.push(H);return{name:F.target,refId:F.target,meta:{json:!0},fields:G,length:F.datapoints.length}}const g=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function E(F,G){return F&&(F=F.toLowerCase(),F==="date"||F==="time")?i.PU.time:m(G)}function x(F){return F instanceof Date||(0,s.Ar)(F)?i.PU.time:(0,n.isNumber)(F)?i.PU.number:(0,n.isString)(F)?i.PU.string:(0,n.isBoolean)(F)?i.PU.boolean:i.PU.other}function m(F){return F instanceof Date||(0,s.Ar)(F)?i.PU.time:(0,n.isNumber)(F)?i.PU.number:(0,n.isString)(F)?g.test(F)?i.PU.number:F==="true"||F==="TRUE"||F==="True"||F==="false"||F==="FALSE"||F==="False"?i.PU.boolean:i.PU.string:(0,n.isBoolean)(F)?i.PU.boolean:i.PU.other}function y(F){if(F.name){const G=F.name.toLowerCase();if(G==="date"||G==="time")return i.PU.time}for(let G=0;G<F.values.length;G++){const H=F.values[G];if(H!=null)return m(H)}}const b=(F,G=!1)=>{for(const H of F.fields)if(!H.type||H.type===i.PU.other||G)return{...F,fields:F.fields.map(K=>K.type&&K.type!==i.PU.other&&!G?K:{...K,type:y(K)||i.PU.other})};return F},D=F=>!!(F&&F.hasOwnProperty("columns")),f=F=>!!(F&&F.hasOwnProperty("fields")),C=F=>!!(f(F)&&F.hasOwnProperty("value"));function P(F){if("fields"in F)return"length"in F&&F.fields[0]?.values?.get?F:N(F);if(F.hasOwnProperty("type")&&F.type==="docs")return v(F);if(F.hasOwnProperty("datapoints")||F.hasOwnProperty("points"))return u(F);if(F.hasOwnProperty("data"))return F.hasOwnProperty("schema")?(0,p.or)(F):r(F);if(F.hasOwnProperty("columns"))return h(F);if(Array.isArray(F))return(0,c.I)(F);throw console.warn("Can not convert",F),new Error("Unsupported data format")}const T=F=>{const{fields:G}=F,H=F.length,K=[];if(G.length===2){const{timeField:w,timeIndex:Q}=V(F);if(w){const te=G[Q===0?1:0],q=G[Q];for(let se=0;se<H;se++)K.push([te.values[se],q.values[se]]);return{alias:F.name,target:(0,o.Ct)(te,F),datapoints:K,unit:G[0].config?G[0].config.unit:void 0,refId:F.refId,meta:F.meta}}}for(let w=0;w<H;w++){const Q=[];for(let k=0;k<G.length;k++)Q.push(G[k].values[w]);K.push(Q)}return F.meta&&F.meta.json?{alias:G[0].name||F.name,target:G[0].name||F.name,datapoints:G[0].values,filterable:G[0].config?G[0].config.filterable:void 0,type:"docs"}:{columns:G.map(w=>{const{name:Q,config:k}=w;if(k){const{...te}=k;return te.text=Q,te}return{text:Q}}),type:"table",refId:F.refId,meta:F.meta,rows:K}};function M(F,G,H=!1){const K=F.fields[G];if(!K)return F;const w=[];for(let k=0;k<F.length;k++)w.push(k);const Q=(0,d.i)(K,H);return w.sort(Q),{...F,fields:F.fields.map(k=>{const te=Array.from({length:k.values.length},(re,Y)=>k.values[w[Y]]),q={...k,values:te},{nanos:se}=k;return se!==void 0&&(q.nanos=Array.from({length:se.length},(re,Y)=>se[w[Y]])),q})}}function I(F){return{...F,fields:F.fields.map(G=>{const H=[...G.values];H.reverse();const K={...G,values:H},{nanos:w}=G;if(w!==void 0){const Q=[...w];Q.reverse(),K.nanos=Q}return K})}}function B(F,G){const H=[];for(const K of F.fields)H.push(K.values[G]);return H}function U(F){return W(F)}function W(F,G){return{fields:(G?F.fields.filter(G):F.fields).map(w=>{let Q=w.values;return{name:w.name,type:w.type,config:w.config,values:Q,labels:w.labels}}),refId:F.refId,meta:F.meta,name:F.name}}const V=F=>{for(let G=0;G<F.fields.length;G++)if(F.fields[G].type===i.PU.time)return{timeField:F.fields[G],timeIndex:G};return{}};function z(F){const G=b(P(F));if(G.fields&&G.fields.length)for(const H of G.fields)H.state=null;return G}function R(F){return!F||!(0,n.isArray)(F)?[]:F.map(G=>z(G))}function O(F,G){const{series:H,annotations:K}=F;if(F.state===l.Gu.Loading&&H.length===0)return G||(G=F),{...G,state:l.Gu.Loading,request:F.request};const w=performance.now(),Q=H.map(q=>z(q)),k=R(K),te=performance.now();return{...F,series:Q,annotations:k,timings:{dataProcessingTime:te-w}}}function N(F){let G=0;const H=F.fields.map((K,w)=>{const{state:Q,...k}=K;return k.name||(k.name=`Field ${w+1}`),k.config||(k.config={}),k.values?k.values.length>G&&(G=k.values.length):k.values=new Array(G),k.type||(k.type=y(k)??i.PU.other),k});return{...F,fields:H,length:G}}},41185:(ne,j,e)=>{"use strict";e.d(j,{g:()=>o});var n=e(74848),a=e(96540),s=e(63527),d=e(87105);const o=({value:l,onChange:i,item:c,suffix:p,id:h})=>{const u=c.settings?.useTextarea?d.f:s.p,r=(0,a.useCallback)(v=>{let g=l??"";"key"in v?v.key==="Enter"&&!c.settings?.useTextarea&&(g=v.currentTarget.value.trim()):g=v.currentTarget.value.trim(),g!==l&&i(g===""?void 0:g)},[l,c.settings?.useTextarea,i]);return(0,n.jsx)(u,{id:h,placeholder:c.settings?.placeholder,defaultValue:l||"",rows:c.settings?.useTextarea&&c.settings.rows||5,onBlur:r,onKeyDown:r,suffix:p})}},41479:(ne,j,e)=>{"use strict";e.d(j,{n:()=>d});var n=e(74848),a=e(96540),s=e(97375);const d=({children:o,renderMenuItems:l,focusOnOpen:i=!0})=>{const[c,p]=(0,a.useState)(!1),[h,u]=(0,a.useState)({x:0,y:0});return(0,n.jsxs)(n.Fragment,{children:[o({openMenu:r=>{p(!0),u({x:r.pageX,y:r.pageY-window.scrollY})}}),c&&(0,n.jsx)(s.t,{onClose:()=>p(!1),x:h.x,y:h.y,renderMenuItems:l,focusOnOpen:i})]})}},41517:(ne,j,e)=>{"use strict";e.d(j,{X:()=>l});var n=e(74848),a=e(92745),s=e(34999),d=e(45861),o=e(41654);function l(){return(0,n.jsx)(s.F,{severity:"info",title:(0,a.t)("alerting.federated-rule-warning.title-federated-group","This rule is part of a federated rule group."),bottomSpacing:0,topSpacing:2,children:(0,n.jsxs)(o.B,{direction:"column",children:[(0,n.jsx)(a.x6,{i18nKey:"alerting.federated-rule-warning.experimental",children:"Federated rule groups are currently an experimental feature."}),(0,n.jsx)(d.$n,{fill:"text",icon:"book",children:(0,n.jsx)("a",{href:"https://grafana.com/docs/metrics-enterprise/latest/tenant-management/tenant-federation/#cross-tenant-alerting-and-recording-rule-federation",children:(0,n.jsx)(a.x6,{i18nKey:"alerting.federated-rule-warning.read-documentation",children:"Read documentation"})})})]})})}},41607:(ne,j,e)=>{"use strict";e.d(j,{r:()=>n});var n=(a=>(a.OpenSource="Open Source",a.Pro="Pro",a.Enterprise="Enterprise",a))(n||{})},41667:(ne,j,e)=>{"use strict";e.d(j,{R:()=>l,d:()=>o});var n=e(44248),a=e(97335),s=e(30643),d=e(98279);function o(i,c){if(c.current?.isConnected){l(c.current);return}let p=i.parent;for(;p;){if(p instanceof a.o&&p.state.collapse&&p.onCollapseToggle(),p instanceof n.tI&&p.state.isCollapsed&&p.onCollapseToggle(),p instanceof s.V){const h=p.parent;h instanceof d.K&&h.getCurrentTab()!==p&&h.switchToTab(p)}p=p.parent}setTimeout(()=>{c.current?.isConnected&&l(c.current)},10)}function l(i){i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},41776:(ne,j,e)=>{"use strict";e.d(j,{p:()=>B});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(92745),l=e(77870),i=e(27489),c=e(43173),p=e(63142),h=e(22787),u=e(63527),r=e(30703),v=e(92807),g=e(40279),E=e(44515),x=e(22747),m=e(42227),y=e(6079),b=e(51898),D=e(85032),f=e(7078);function C(W){switch(W){case"grafana":return(0,o.t)("data-source-picker.built-in-list.description-grafana","Discover visualizations using mock data");case"-- Mixed --":return(0,o.t)("data-source-picker.built-in-list.description-mixed","Use multiple data sources");case"-- Dashboard --":return(0,o.t)("data-source-picker.built-in-list.description-dashboard","Reuse query results from other visualizations");default:return""}}function P({className:W,current:V,onChange:z,tracing:R,dashboard:O,mixed:N,metrics:F,type:G,annotations:H,variables:K,alerting:w,pluginId:Q,logs:k,filter:te}){const se=(0,m.Kr)({tracing:R,dashboard:O,mixed:N,metrics:F,type:G,annotations:H,variables:K,alerting:w,pluginId:Q,logs:k}).filter(re=>(te?te?.(re):!0)&&!!re.meta.builtIn);return(0,n.jsx)("div",{className:W,"data-testid":b.Tp.components.DataSourcePicker.advancedModal.builtInDataSourceList,children:se.map(re=>(0,n.jsx)(D.A,{ds:re,description:C(re.uid),selected:(0,f.Df)(re,V),onClick:()=>z(re)},re.uid))})}var T=e(93602);const M="dashboards_dspickermodal_clicked",I={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss",OPEN_MODAL:"open_modal"};function B({tracing:W,dashboard:V,mixed:z,metrics:R,type:O,annotations:N,variables:F,alerting:G,pluginId:H,logs:K,uploadFile:w,filter:Q,onChange:k,current:te,onDismiss:q,reportedInteractionFrom:se}){const re=(0,p.of)(U),[Y,X]=(0,d.useState)(""),J=se||"modal",_=(0,l.S)(),ee=()=>{q(),(0,i.rR)(M,{item:I.DISMISS,src:J})},ae=ye=>{k(ye),(0,i.rR)(M,{item:I.SELECT_DS,ds_type:ye.type,src:J,is_favorite:_.enabled?_.isFavoriteDatasource(ye.uid):void 0})},le=(0,m.ps)("-- Grafana --"),L=(0,m.Kr)({tracing:W,dashboard:V,mixed:z,metrics:R,type:O,annotations:N,variables:F,alerting:G,pluginId:H,logs:K});(0,d.useEffect)(()=>{L.length>0&&(0,i.rR)(M,{item:I.OPEN_MODAL,src:J,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0",total_configured:L.length})},[J,L.length]);const ie=(0,d.useMemo)(()=>(0,s.once)(()=>{(0,i.rR)(M,{item:"search",src:J})}),[J]),oe=(0,x.j)((ye,fe)=>{le&&(k(le,[ye]),(0,i.rR)(M,{item:I.UPLOAD_FILE,src:J}),fe.length<1&&q())}),ue=({className:ye})=>(0,n.jsx)(P,{className:ye,onChange:ae,current:te,filter:Q,variables:F,tracing:W,metrics:R,type:O,annotations:N,alerting:G,pluginId:H,logs:K,dashboard:V,mixed:z});return(0,n.jsxs)(h.a,{title:(0,o.t)("data-source-picker.modal.title","Select data source"),closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:re.modal,contentClassName:re.modalContent,onClickBackdrop:ee,onDismiss:ee,children:[(0,n.jsxs)("div",{className:re.leftColumn,children:[(0,n.jsx)(u.p,{type:"search",autoFocus:!0,className:re.searchInput,value:Y,prefix:(0,n.jsx)(r.I,{name:"search"}),placeholder:(0,o.t)("data-source-picker.modal.input-placeholder","Select data source"),onChange:ye=>{X(ye.currentTarget.value),ie()}}),(0,n.jsxs)(v.P,{children:[(0,n.jsx)(T.S,{onChange:ae,current:te,onClickEmptyStateCTA:()=>(0,i.rR)(M,{item:I.CONFIG_NEW_DS_EMPTY_STATE,src:J}),filter:ye=>(Q?Q?.(ye):!0)&&(0,f.Zn)(ye,Y)&&!ye.meta.builtIn,variables:F,tracing:W,metrics:R,type:O,annotations:N,alerting:G,pluginId:H,logs:K,dashboard:V,mixed:z,dataSources:L}),(0,n.jsx)(ue,{className:re.appendBuiltInDataSourcesList})]})]}),(0,n.jsxs)("div",{className:re.rightColumn,children:[(0,n.jsxs)("div",{className:re.builtInDataSources,children:[(0,n.jsx)("div",{className:re.builtInDataSourcesList,children:(0,n.jsx)(v.P,{children:(0,n.jsx)(ue,{})})}),w&&c.$.featureToggles.editPanelCSVDragAndDrop&&(0,n.jsx)(g.gH,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:E.o,multiple:!1,accept:E.Z,onDrop:oe},children:(0,n.jsx)(g.wI,{})})]}),(0,n.jsxs)("div",{className:re.newDSSection,children:[(0,n.jsx)("span",{className:re.newDSDescription,children:(0,n.jsx)(o.x6,{i18nKey:"data-source-picker.modal.configure-new-data-source",children:"Open a new tab and configure a data source"})}),(0,n.jsx)(y.r,{variant:"secondary",onClick:()=>{(0,i.rR)(M,{item:I.CONFIG_NEW_DS,src:J}),q()}})]})]})]})}function U(W){return{modal:(0,a.css)({width:"80%",maxWidth:"1200px",minHeight:"80%",[W.breakpoints.down("md")]:{width:"100%"}}),modalContent:(0,a.css)({display:"flex",flexDirection:"row",flex:1,[W.breakpoints.down("md")]:{flexDirection:"column"}}),leftColumn:(0,a.css)({display:"flex",flexDirection:"column",width:"50%",maxHeight:"100%",paddingRight:W.spacing(4),borderRight:`1px solid ${W.colors.border.weak}`,[W.breakpoints.down("md")]:{width:"100%",borderRight:0,paddingRight:0,flex:1,overflowY:"auto"}}),rightColumn:(0,a.css)({display:"flex",flexDirection:"column",width:"50%",minHeight:"100%",justifyItems:"space-evenly",alignItems:"stretch",paddingLeft:W.spacing(4),[W.breakpoints.down("md")]:{width:"100%",paddingLeft:0,flexShrink:0}}),builtInDataSources:(0,a.css)({flex:"1 1",[W.breakpoints.down("md")]:{display:"none"}}),builtInDataSourcesList:(0,a.css)({[W.breakpoints.down("md")]:{display:"none",marginBottom:0},marginBottom:W.spacing(4)}),appendBuiltInDataSourcesList:(0,a.css)({[W.breakpoints.up("md")]:{display:"none"}}),newDSSection:(0,a.css)({display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"center",paddingTop:W.spacing(1)}),newDSDescription:(0,a.css)({flex:"1 0",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:W.colors.text.secondary,[W.breakpoints.down("sm")]:{visibility:"hidden"}}),searchInput:(0,a.css)({width:"100%",minHeight:"32px",marginBottom:W.spacing(1)})}}},42004:(ne,j,e)=>{"use strict";e.d(j,{ti:()=>ue,PE:()=>X,OJ:()=>Ae});var n=e(74848),a=e(22803),s=e(2543),d=e(55127),o=e.n(d),l=e(96540),i=e(42941),c=e(52531),p=e(73397),h=e(92745),u=e(63142),r=e(41654),v=e(76319),g=e(45861),E=e(88559),x=e(87063),m=e(66404),y=e(45967),b=e(99887),D=e(30703),f=e(89640),C=e(48542),P=e(10427),T=e(27691),M=e(16194),I=e(24961),B=e(84266),U=e(16692),W=e(24610),V=e(63895),z=e(77256),R=e(83276),O=e(24898),N=e(38055),F=e(1625),G=e(1972),H=e(49779),K=e(6975),w=e(70327),Q=e(77880),k=e(25149),te=e(78102);const q=({exportFormat:Se,onClose:Qe})=>{const{currentData:Ue="",isFetching:Ie}=w.hK.useExportPoliciesQuery({format:Se}),Re=`policies-${new Date().getTime()}`;return Ie?(0,n.jsx)(K._,{text:(0,h.t)("alerting.grafana-policies-exporter-preview.text-loading","Loading....")}):(0,n.jsx)(Q.J,{format:Se,textDefinition:Ue,downloadFileName:Re,onClose:Qe})},se=({onClose:Se})=>{const[Qe,Ue]=(0,l.useState)("yaml");return(0,n.jsx)(k.m,{activeTab:Qe,onTabChange:Ue,onClose:Se,formatProviders:Object.values(te.sl),children:(0,n.jsx)(q,{exportFormat:Qe,onClose:Se})})};var re=e(92125);const Y=20,X=Se=>{const{receivers:Qe=[],contactPointsState:Ue,readOnly:Ie=!1,provisioned:Re=!1,alertManagerSourceName:Ke,currentRoute:Le,inheritedProperties:ze,routesMatchingFilters:Be={filtersApplied:!1,matchedRoutesWithPath:new Map},matchingInstancesPreview:$e={enabled:!1},onEditPolicy:Ye,onAddPolicy:de,onDeletePolicy:ge,onShowAlertInstances:pe,isAutoGenerated:De=!1,isDefaultPolicy:Me=!1}=Se,be=(0,u.of)(me),Oe=Le.receiver,Ne=Le.continue??!1,We=(0,V.J$)(Le),qe=!!(We&&We.length),{filtersApplied:st,matchedRoutesWithPath:rt}=Be,ot=Array.from(rt.keys()),mt=st&&ot.some(oa=>oa.id===Le.id),pt=Array.from(rt.values()).flat(),ke=pt.some(oa=>oa.id===Le.id),Ze=[],nt=!qe&&!Me&&!Ne,ut=Oe??ze?.receiver??"",gt=Ue?Fe(ut,Ue):[],ht=Le.routes??[],tt=st?ht.filter(oa=>pt.some(Ca=>Ca.id===oa.id)):ht,Ot=tt.length>0,[jt,wt]=(0,i.A)(!1),Ht=$e?.groupsMap?.get(Le.id),hn=Ht?(0,s.sumBy)(Ht,oa=>oa.alerts.length):void 0,[Dn,Bn]=(0,U.L7)(U.QI.ViewAutogeneratedPolicyTree),xn=ae(Le),[ft,St]=(0,i.A)(!xn),Tt=Le.group_by,Je=Le.mute_time_intervals??[],Pt=Le.active_time_intervals??[],Yt={group_wait:Le.group_wait,group_interval:Le.group_interval,repeat_interval:Le.repeat_interval};gt.forEach(oa=>{Ze.push(oa)});const[Lt,fn]=(0,l.useState)(Y),En=_(De,Me,Re,Ye,Le,wt,ge);if(De&&(!Bn||!Dn)||st&&!ke)return null;const zn=Me||xn,sa=tt.filter(oa=>pt.some(Ca=>Ca.id===oa.id)),ta=st?sa:tt,ra=ta.slice(0,Lt),ea=ta.length-ra.length,Un=ea>0;return(0,n.jsxs)(r.B,{direction:"column",gap:1.5,children:[(0,n.jsxs)("div",{className:be.policyWrapper(mt),"data-testid":Me?"am-root-route-container":"am-route-container",children:[Ne&&(0,n.jsx)(ie,{}),nt&&(0,n.jsx)(oe,{}),(0,n.jsx)("div",{className:be.policyItemWrapper,children:(0,n.jsxs)(r.B,{direction:"column",gap:1,children:[(0,n.jsx)("div",{children:(0,n.jsxs)(r.B,{direction:"row",alignItems:"center",gap:1,children:[Ot?(0,n.jsx)(v.K,{name:ft?"angle-down":"angle-right",onClick:St,"aria-label":ft?(0,h.t)("alerting.policies.aria-label-collapse","Collapse"):(0,h.t)("alerting.policies.aria-label-expand","Expand")}):null,zn&&(0,n.jsx)(n.Fragment,{children:xn?(0,n.jsx)(ye,{}):(0,n.jsx)(ue,{})}),!zn&&(0,n.jsx)(n.Fragment,{children:qe?(0,n.jsx)(re.s,{matchers:We??[],formatter:(0,W.VE)(Ke)}):(0,n.jsx)("span",{className:be.metadata,children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.no-matchers",children:"No matchers"})})}),(0,n.jsx)(H.h,{}),Ze.length>0&&(0,n.jsx)(L,{errors:Ze}),Re&&(0,n.jsx)(G.rS,{}),(0,n.jsxs)(r.B,{direction:"row",gap:.5,children:[!De&&!Ie&&(0,n.jsx)(O._,{actions:[U.QI.CreateNotificationPolicy],children:(0,n.jsx)(P.A,{shouldWrap:Re,wrap:le,children:Me?(0,n.jsx)(g.$n,{variant:"secondary",icon:"plus",size:"sm",disabled:Re,type:"button",onClick:()=>de(Le,"child"),children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.new-child",children:"New child policy"})}):(0,n.jsx)(E.m,{overlay:(0,n.jsxs)(x.W,{children:[(0,n.jsx)(x.W.Item,{label:(0,h.t)("alerting.policy.label-new-sibling-above","New sibling above"),icon:"arrow-up",onClick:()=>de(Le,"above")}),(0,n.jsx)(x.W.Item,{label:(0,h.t)("alerting.policy.label-new-sibling-below","New sibling below"),icon:"arrow-down",onClick:()=>de(Le,"below")}),(0,n.jsx)(x.W.Divider,{}),(0,n.jsx)(x.W.Item,{label:(0,h.t)("alerting.policy.label-new-child-policy","New child policy"),icon:"plus",onClick:()=>de(Le,"child")})]}),children:(0,n.jsx)(g.$n,{size:"sm",variant:"secondary",disabled:Re,icon:"angle-down",type:"button",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.new-policy",children:"Add new policy"})})})})}),En.length>0&&(0,n.jsx)(E.m,{overlay:(0,n.jsx)(x.W,{children:En}),children:(0,n.jsx)(T.A,{"aria-label":Me?(0,h.t)("alerting.policies.aria-label-more-default","more actions for default policy"):(0,h.t)("alerting.policies.aria-label-more","more actions for policy"),"data-testid":"more-actions"})})]})]})}),(0,n.jsx)(J,{matchingInstancesPreview:$e,numberOfAlertInstances:hn,contactPoint:Oe??void 0,groupBy:Tt,muteTimings:Je,activeTimings:Pt,timingOptions:Yt,inheritedProperties:ze,alertManagerSourceName:Ke,receivers:Qe,matchingAlertGroups:Ht,matchers:We,isDefaultPolicy:Me,onShowAlertInstances:pe})]})})]}),(0,n.jsx)("div",{className:be.childPolicies,children:ft&&(0,n.jsxs)(n.Fragment,{children:[ra.map(oa=>{const Ca=(0,c.W$)(R.b.toPackage(Le),R.b.toPackage(oa),ze),ya=ae(oa)||De,Xa=Ie||Re||De;return(0,n.jsx)(X,{currentRoute:oa,receivers:Qe,contactPointsState:Ue,readOnly:Xa,inheritedProperties:Ca,onAddPolicy:de,onEditPolicy:Ye,onDeletePolicy:ge,onShowAlertInstances:pe,alertManagerSourceName:Ke,routesMatchingFilters:Be,matchingInstancesPreview:$e,isAutoGenerated:ya,provisioned:Re},oa.id)}),Un&&(0,n.jsx)(g.$n,{size:"sm",icon:"angle-down",variant:"secondary",className:be.moreButtons,onClick:()=>fn(Lt+Y),children:(0,n.jsxs)(h.x6,{i18nKey:"alerting.policies.n-more-policies",count:ea,children:[{count:ea}," additional policies"]})})]})}),jt&&(0,n.jsx)(se,{onClose:wt})]})};function J({numberOfAlertInstances:Se,isDefaultPolicy:Qe,timingOptions:Ue,groupBy:Ie,muteTimings:Re=[],activeTimings:Ke=[],matchingInstancesPreview:Le,inheritedProperties:ze,matchingAlertGroups:Be,onShowAlertInstances:$e,matchers:Ye,contactPoint:de,alertManagerSourceName:ge,receivers:pe}){const De=(0,u.of)(me),Me=ze&&ze.group_by,be=ze&&Object.keys(ze).length>0,Oe=(0,s.isArray)(Ie)&&Ie[0]==="...",Ne=!Oe&&(0,s.isArray)(Ie)&&Ie.length>0,We=Qe&&(0,s.isArray)(Ie)&&Ie.length===0,qe=!!Re.length,st=!!Ke.length;return(0,n.jsx)("div",{className:De.metadataRow,children:(0,n.jsxs)(r.B,{direction:"row",alignItems:"center",gap:1,children:[Le.enabled&&(0,n.jsxs)(F.P,{icon:"layers-alt",onClick:()=>{Be&&$e(Be,Ye,(0,W.VE)(ge))},"data-testid":"matching-instances",children:[(0,n.jsx)(m.E,{color:"primary",children:Se??"-"}),(0,n.jsx)("span",{children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.n-instances",count:Se??0,children:"instance"})})]}),de&&(0,n.jsxs)(F.P,{icon:"at","data-testid":"contact-point",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.delivered-to",children:"Delivered to"})," "]}),(0,n.jsx)(Ge,{alertManagerSourceName:ge,receivers:pe,contactPoint:de})]}),!Me&&(0,n.jsxs)(n.Fragment,{children:[Ne&&(0,n.jsxs)(F.P,{icon:"layer-group","data-testid":"grouping",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.grouped-by",children:"Grouped by"})," "]}),(0,n.jsx)(m.E,{color:"primary",children:Ie.join(", ")})]}),We&&(0,n.jsx)(F.P,{icon:"layer-group",children:(0,n.jsx)("span",{children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.grouping.single-group",children:"Single group"})})}),Oe&&(0,n.jsx)(F.P,{icon:"layer-group",children:(0,n.jsx)("span",{children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.grouping.none",children:"Not grouping"})})})]}),qe&&(0,n.jsxs)(F.P,{icon:"calendar-slash","data-testid":"mute-timings",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.mute-time",children:"Muted when"})," "]}),(0,n.jsx)(Ee,{timings:Re,alertManagerSourceName:ge})]}),st&&(0,n.jsxs)(F.P,{icon:"calendar-alt","data-testid":"active-timings",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.active-time",children:"Active when"})," "]}),(0,n.jsx)(Ee,{timings:Ke,alertManagerSourceName:ge})]}),Ue&&(0,n.jsx)(Ae,{timingOptions:Ue}),be&&(0,n.jsxs)(F.P,{icon:"corner-down-right-alt","data-testid":"inherited-properties",children:[(0,n.jsx)("span",{children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.inherited",children:"Inherited"})}),(0,n.jsx)(fe,{properties:ze})]})]})})}const _=(Se,Qe,Ue,Ie,Re,Ke,Le)=>{const[[ze,Be],[$e,Ye],[de,ge]]=(0,U.Hl)([U.QI.UpdateNotificationPolicyTree,U.QI.DeleteNotificationPolicy,U.QI.ExportNotificationPolicies]),pe=[],De=ge&&de&&Qe&&!Se,Me=ze&&Be,be=$e&&Ye&&!Qe&&!Se;return Me&&pe.push((0,n.jsx)(l.Fragment,{children:(0,n.jsx)(P.A,{shouldWrap:Ue,wrap:le,children:(0,n.jsx)(x.W.Item,{icon:"edit",disabled:Ue||Se,label:(0,h.t)("alerting.use-create-dropdown-menu-actions.label-edit","Edit"),onClick:()=>Ie(Re,Qe)})})},"edit-policy")),De&&pe.push((0,n.jsx)(x.W.Item,{icon:"download-alt",label:(0,h.t)("alerting.use-create-dropdown-menu-actions.label-export","Export"),onClick:Ke},"export-policy")),be&&pe.push((0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)(x.W.Divider,{}),(0,n.jsx)(P.A,{shouldWrap:Ue,wrap:le,children:(0,n.jsx)(x.W.Item,{destructive:!0,icon:"trash-alt",disabled:Ue||Se,label:(0,h.t)("alerting.use-create-dropdown-menu-actions.label-delete","Delete"),onClick:()=>Le(Re)})})]},"delete-policy")),pe},ee="__grafana_autogenerated__";function ae(Se){return Se.object_matchers?Se.object_matchers.some(Qe=>Qe[0]===ee&&Qe[1]===B.ho.equal&&Qe[2]==="true")??!1:!1}const le=Se=>(0,n.jsx)(y.m,{content:(0,h.t)("alerting.provisioned-tooltip.content-provisioned-items-cannot-edited","Provisioned items cannot be edited in the UI"),placement:"top",children:(0,n.jsx)("span",{children:Se})}),L=({errors:Se})=>(0,n.jsx)(N.B,{arrow:!0,placement:"top",content:(0,n.jsx)(r.B,{direction:"column",gap:.5,children:Se.map(Qe=>(0,n.jsx)(l.Fragment,{children:Qe},(0,s.uniqueId)()))}),children:(0,n.jsx)("span",{children:(0,n.jsx)(b.E,{icon:"exclamation-circle",color:"red",text:o()("error",Se.length,!0)})})}),ie=()=>{const Se=(0,u.of)(me);return(0,n.jsx)(y.m,{placement:"top",content:(0,h.t)("alerting.continue-matching-indicator.content-route-continue-matching-other-policies","This route will continue matching other policies"),children:(0,n.jsx)("div",{className:Se.gutterIcon,"data-testid":"continue-matching",children:(0,n.jsx)(D.I,{name:"arrow-down"})})})},oe=()=>{const Se=(0,u.of)(me);return(0,n.jsx)(y.m,{placement:"top",content:(0,h.t)("alerting.all-matches-indicator.content-this-policy-matches-all-labels","This policy matches all labels"),children:(0,n.jsx)("div",{className:Se.gutterIcon,"data-testid":"matches-all",children:(0,n.jsx)(D.I,{name:"exclamation-triangle"})})})};function ue(){const Se=(0,u.of)(me);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.E,{element:"h2",variant:"body",weight:"medium",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.default-policy.title",children:"Default policy"})}),(0,n.jsx)("span",{className:Se.metadata,children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.default-policy.description",children:"All alert instances will be handled by the default policy if no other matching policies are found."})})]})}function ye(){return(0,n.jsx)(m.E,{element:"h3",variant:"body",weight:"medium",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.generated-policies",children:"Auto-generated policies"})})}const fe=({properties:Se})=>(0,n.jsx)(N.B,{arrow:!0,placement:"top",content:(0,n.jsx)(r.B,{direction:"row",gap:.5,children:Object.entries(Se).map(([Qe,Ue])=>Ue?(0,n.jsx)(p.R,{labelKey:Pe(Qe),value:String(Ve(Qe,Ue))},Qe):null)}),children:(0,n.jsx)("div",{children:(0,n.jsx)(m.E,{color:"primary",children:o()("property",Object.keys(Se).length,!0)})})}),Ee=({timings:Se,alertManagerSourceName:Qe})=>{const[,Ue]=(0,U.L7)(U.QI.ViewTimeInterval);return(0,n.jsx)("div",{children:Se.map((Ie,Re)=>{const Ke=Ue?f.Y:m.E;return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)(Ke,{href:(0,z.i7)(Ie,Qe),color:Ue?"primary":"secondary",variant:"bodySmall",inline:Ue?!1:void 0,children:Ie}),Re<Se.length-1&&", "]},Ie)})})},Ae=({timingOptions:Se})=>{const Qe=Se.group_wait,Ue=Se.group_interval,Ie=Se.repeat_interval;if(!Qe&&!Ue&&!Ie)return null;const Re=[];return Qe&&Re.push((0,n.jsx)(y.m,{placement:"top",content:(0,h.t)("alerting.policies.metadata.timingOptions.groupWait.description","How long to initially wait to send a notification for a group of alert instances."),children:(0,n.jsx)("span",{children:(0,n.jsxs)(h.x6,{i18nKey:"alerting.policies.metadata.timingOptions.groupWait.label",children:["Wait ",(0,n.jsx)(M.S,{content:Qe})," to group instances"]})})})),Ue&&Re.push((0,n.jsx)(y.m,{placement:"top",content:(0,h.t)("alerting.policies.metadata.timingOptions.groupInterval.description","How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent."),children:(0,n.jsx)("span",{children:(0,n.jsxs)(h.x6,{i18nKey:"alerting.policies.metadata.timingOptions.groupInterval.label",children:["Wait ",(0,n.jsx)(M.S,{content:Ue})," before sending updates"]})})})),Ie&&Re.push((0,n.jsx)(y.m,{placement:"top",content:(0,h.t)("alerting.policies.metadata.timingOptions.repeatInterval.description","How often notifications are sent if the group of alerts has not changed since the last notification."),children:(0,n.jsx)("span",{children:(0,n.jsxs)(h.x6,{i18nKey:"alerting.policies.metadata.timingOptions.repeatInterval.label",children:["Repeated every ",(0,n.jsx)(M.S,{content:Ie})]})})})),(0,n.jsx)(F.P,{icon:"hourglass","data-testid":"timing-options",children:Re.map((Ke,Le)=>(0,n.jsxs)("span",{children:[Ke,Le<Re.length-1&&" \xB7 "]},(0,s.uniqueId)()))})},Ge=({alertManagerSourceName:Se,contactPoint:Qe,receivers:Ue})=>{const Ie=Ue.find(Le=>Le.name===Qe);if(!Ie)return(0,n.jsx)(m.E,{color:"secondary",variant:"bodySmall",children:Qe});const Re=Ie.grafana_managed_receiver_configs,Ke="id"in Ie&&Ie.id?(0,z.bg)(Ie.id,Se):(0,z.bI)(Ie.name,Se);return(0,n.jsx)(N.B,{disabled:!Re,arrow:!0,placement:"top",header:(0,n.jsx)(F.P,{icon:"at",children:(0,n.jsx)(m.E,{color:"primary",children:Qe})}),content:(0,n.jsx)(m.E,{variant:"bodySmall",color:"secondary",children:(0,n.jsx)(I.yz,{receivers:Ie.grafana_managed_receiver_configs||[],limit:3})}),children:(0,n.jsx)(f.Y,{href:Ke,color:"primary",variant:"bodySmall",inline:!1,children:Qe})},(0,s.uniqueId)())};function Fe(Se,Qe){return Object.entries(Qe[Se]?.notifiers??[]).reduce((Re=[],[Ke,Le])=>{const ze=Le.filter(Be=>Be.lastNotifyAttemptError).map(Be=>(0,n.jsx)(p.R,{icon:"at",value:String(Be.lastNotifyAttemptError),labelKey:(0,h.t)("alerting.contact-point-errors.label-contact-point","Contact Point \u203A {{name}}",{name:Be.name})},(0,s.uniqueId)()));return Re.concat(ze)},[])}const Pe=Se=>{switch(Se){case"receiver":return"Contact Point";case"group_by":return"Group by";case"group_interval":return"Group interval";case"group_wait":return"Group wait";case"repeat_interval":return"Repeat interval";default:return Se}},Ve=(Se,Qe)=>{const Ue=Se==="group_by"&&Array.isArray(Qe)&&Qe[0]==="...",Ie=Se==="group_by"&&Array.isArray(Qe)&&Qe.length===0;return Ue?(0,n.jsx)(m.E,{variant:"bodySmall",color:"secondary",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.grouping.none",children:"Not grouping"})}):Ie?(0,n.jsx)(m.E,{variant:"bodySmall",color:"secondary",children:(0,n.jsx)(h.x6,{i18nKey:"alerting.policies.metadata.grouping.single-group",children:"Single group"})}):Array.isArray(Qe)?Qe.join(", "):Qe},me=Se=>({matcher:Qe=>{const{color:Ue,borderColor:Ie}=(0,C.MC)(Qe);return{wrapper:(0,a.css)({color:"#fff",background:Ue,padding:`${Se.spacing(.33)} ${Se.spacing(.66)}`,fontSize:Se.typography.bodySmall.fontSize,border:`solid 1px ${Ie}`,borderRadius:Se.shape.radius.default})}},childPolicies:(0,a.css)({marginLeft:Se.spacing(4),position:"relative","&:before":{content:'""',position:"absolute",height:"calc(100% - 10px)",borderLeft:`solid 1px ${Se.colors.border.weak}`,marginTop:0,marginLeft:"-20px"}}),policyItemWrapper:(0,a.css)({padding:Se.spacing(1.5)}),metadataRow:(0,a.css)({borderBottomLeftRadius:Se.shape.borderRadius(2),borderBottomRightRadius:Se.shape.borderRadius(2)}),policyWrapper:(Qe=!1)=>(0,a.css)({flex:1,position:"relative",background:Se.colors.background.secondary,borderRadius:Se.shape.radius.default,border:`solid 1px ${Se.colors.border.weak}`,...Qe&&{borderColor:Se.colors.primary.border,background:Se.colors.primary.transparent}}),metadata:(0,a.css)({color:Se.colors.text.secondary,fontSize:Se.typography.bodySmall.fontSize,fontWeight:Se.typography.bodySmall.fontWeight}),break:(0,a.css)({width:"100%",height:0,marginBottom:Se.spacing(2)}),gutterIcon:(0,a.css)({position:"absolute",top:0,transform:"translateY(50%)",left:`-${Se.spacing(4)}`,color:Se.colors.text.secondary,background:Se.colors.background.primary,width:"25px",height:"25px",textAlign:"center",border:`solid 1px ${Se.colors.border.weak}`,borderRadius:Se.shape.radius.default,padding:0}),moreButtons:(0,a.css)({marginTop:Se.spacing(.5),marginBottom:Se.spacing(1.5)})})},42073:(ne,j,e)=>{"use strict";e.d(j,{G:()=>l,Y:()=>i});var n=e(36613),a=e(74261),s=e(55386),d=e(739),o=e(62748);class l extends o.R{merge(p){this.props.min=i("min",this.props.min,p.min),this.props.max=i("max",this.props.max,p.max)}getConfig(){let{isTime:p,auto:h,scaleKey:u,min:r,max:v,softMin:g,softMax:E,range:x,direction:m,orientation:y,centeredZero:b,decimals:D,stackingMode:f,padMinBy:C=.1,padMaxBy:P=.1}=this.props;f===d.gs.Percent&&(r==null&&g==null&&(g=0),v==null&&E==null&&(E=1));const T=this.props.distribution,M=p?{}:{distr:T===d.L4.Symlog?4:T===d.L4.Log?3:T===d.L4.Ordinal?2:1,log:T===d.L4.Log||T===d.L4.Symlog?this.props.log??2:void 0,asinh:T===d.L4.Symlog?this.props.linearThreshold??1:void 0};if(T===d.L4.Log){let O=this.props.log,N=O===2?Math.log2:Math.log10;r!=null&&(r<=0?r=null:r=O**Math.floor(N(r))),v!=null&&(v<=0?v=null:v=O**Math.ceil(N(v))),g!=null&&(g<=0?g=null:g=O**Math.floor(N(g))),E!=null&&(E<=0?E=null:E=O**Math.ceil(N(E)))}let I=g==null?3:1,B=E==null?3:1;const U={min:{pad:C,hard:r??-1/0,soft:g||0,mode:I},max:{pad:P,hard:v??1/0,soft:E||0,mode:B}};let W=g==null&&r!=null,V=E==null&&v!=null,z=W&&V;const R=(O,N,F,G)=>{const H=O.scales[G];let K=[N,F];if(!z&&N==null&&F==null)return K;let w=H.log??10;if(H.distr===1||H.distr===2||H.distr===4){if(b){let Q=Math.abs(N),k=Math.abs(F),te=Math.max(Q,k);te===0&&(te=80),N=-te,F=te}H.distr===4?K=n.A.rangeAsinh(N,F,w,!0):K=n.A.rangeNum(W?r:N,V?v:F,U)}else H.distr===3&&(K=n.A.rangeLog(r??N,v??F,w,!0));if(D===0)if(H.distr===1||H.distr===2)K[0]=(0,a.rs)(K[0],1),K[1]=(0,a.Uh)(K[1],1);else if(H.distr===3){let Q=H.log===2?Math.log2:Math.log10;if(K[0]<=1)K[0]=1;else{let te=Math.floor(Q(K[0]));K[0]=w**te}let k=Math.ceil(Q(K[1]));K[1]=w**k,K[0]===K[1]&&(K[1]*=w)}else H.distr===4&&(K[0]=(0,a.rs)(K[0],1),K[1]=(0,a.Uh)(K[1],1));return(H.distr===1||H.distr===4)&&(W&&(K[0]=r),V&&(K[1]=v)),K[0]>=K[1]&&(K[0]=H.distr===3?1:0,K[1]=100),K};return h??=!p&&!z,(0,s.j9)(u)&&(h=!1,x=[0,1]),{[u]:{time:p,auto:h,range:x??R,dir:m,ori:y,...M}}}}function i(c,p,h){const u=p!=null,r=h!=null;return u?r?c==="min"?p<h?p:h:p>h?p:h:p:h}},42227:(ne,j,e)=>{"use strict";e.d(j,{Kr:()=>l,TX:()=>o,dR:()=>c,ps:()=>i});var n=e(96540),a=e(78685),s=e(78282);const d="grafana.features.datasources.components.picker.DataSourceDropDown.history";function o(){const[p=[],h]=(0,a.A)(d,[]),u=(0,n.useCallback)(r=>{if(!r.meta.builtIn)if(p.includes(r.uid))p.splice(p.findIndex(v=>r.uid===v),1),h([...p,r.uid]);else{const v=[...p,r.uid];v.length>5?h(v.slice(1,6)):h(v)}},[p,h]);return[p,u]}function l(p,h){return h||(0,s.l)().getList(p)}function i(p){const h=(0,s.l)();return h.getInstanceSettings(p)}function c(p){const{keyboardEvents:h,containerRef:u}=p,r=(0,n.useRef)(0),v="data-role",g="keyboardSelectableItem",E={[v]:g},x=`[${v}="${g}"`,m="data-selectedItem",y=`[${m}="true"]`,b=(0,n.useCallback)(f=>{const C=u?.current?.querySelectorAll(x),P=C?.item(f%C?.length);C?.forEach(T=>T.setAttribute(m,"false")),P&&(P.scrollIntoView({block:"center"}),P.setAttribute(m,"true"))},[u,x]),D=(0,n.useCallback)(()=>{u?.current?.querySelector(y)?.querySelector("button")?.click()},[u,y]);return(0,n.useEffect)(()=>{if(!h)return;const f=h.subscribe({next:C=>{switch(C?.code){case"ArrowDown":{b(++r.current),C.preventDefault();break}case"ArrowUp":r.current=r.current>0?r.current-1:r.current,b(r.current),C.preventDefault();break;case"Enter":D();break}}});return()=>f.unsubscribe()},[h,b,D]),(0,n.useEffect)(()=>{const f=new MutationObserver(C=>{C.some(T=>T.addedNodes&&T.addedNodes.length>0||T.removedNodes&&T.removedNodes.length>0)&&b(0)});return u.current&&f.observe(u.current,{childList:!0}),()=>{f.disconnect()}},[u,x,b]),[E,y]}},42240:(ne,j,e)=>{"use strict";e.d(j,{M:()=>i,x:()=>l});var n=e(74848),a=e(96540),s=e(57866),d=e(92745),o=e(88531);const l=({value:c,context:p,onChange:h,id:u})=>{const r=(0,a.useCallback)(v=>{h(v?.length?{id:s.jR.byRefId,options:v}:void 0)},[h]);return(0,n.jsx)(o.XL,{id:u,value:c?.options,onChange:r,data:p.data,placeholder:(0,d.t)("geomap.frame-selection-editor.placeholder-change-filter","Change filter")})},i=({value:c,context:p,onChange:h})=>{const u=(0,a.useCallback)(r=>{h(r?.length?{id:s.jR.byRefId,options:(0,o.h)(r)}:void 0)},[h]);return(0,n.jsx)(o.gK,{value:c?.options,onChange:u,data:p.data,placeholder:(0,d.t)("geomap.frame-multi-selection-editor.placeholder-change-filter","Change filter")})}},42272:(ne,j,e)=>{"use strict";e.d(j,{y:()=>c});var n=e(74848),a=e(51898),s=e(92745),d=e(52847),o=e(32442),l=e(68577),i=e(49602);function c({query:p,regex:h,optionTypes:u,allowCustomValue:r,onChange:v,onRegExBlur:g,multi:E,includeAll:x,allValue:m,onMultiChange:y,onIncludeAllChange:b,onAllValueChange:D,onAllowCustomValueChange:f}){const C=u.find(P=>P.value===p);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.data-source-variable-form.data-source-options",children:"Data source options"})}),(0,n.jsx)(l.v,{name:(0,s.t)("dashboard-scene.data-source-variable-form.name-type","Type"),value:C,options:u,onChange:v,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),(0,n.jsx)(i._,{defaultValue:h,name:(0,s.t)("dashboard-scene.data-source-variable-form.name-instance-name-filter","Instance name filter"),placeholder:"/.*-(.*)-.*/",onBlur:g,description:(0,n.jsxs)("div",{children:[(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.data-source-variable-form.description-instance-name-filter",children:"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all."}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)(s.x6,{i18nKey:"dashboard-scene.data-source-variable-form.example-instance-name-filter",components:{codeExample:(0,n.jsx)("code",{children:"/^prod/"})},children:["Example: ","<codeExample />"]})]})}),(0,n.jsx)(o.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.data-source-variable-form.selection-options",children:"Selection options"})}),(0,n.jsx)(d.B,{multi:E,includeAll:x,allValue:m,allowCustomValue:r,onMultiChange:y,onIncludeAllChange:b,onAllValueChange:D,onAllowCustomValueChange:f})]})}},42357:(ne,j,e)=>{"use strict";e.d(j,{V:()=>c});var n=e(74848),a=e(22429),s=e(16200),d=e(37680),o=e(66769);const i=`You are an expert in creating Grafana Dashboards.
Your goal is to write a descriptive and concise dashboard description.
You will be given the title and description of the dashboard's panels.
The dashboard description is meant to explain the purpose of the dashboard and what its panels show.
If the dashboard has no panels, the description should be "Empty dashboard"
There should be no numbers in the description except where they are important.
The dashboard description should not have the dashboard title or any quotation marks in it.
The description should be, at most, 300 characters.
Respond with only the description of the dashboard.`,c=({onGenerate:h})=>{const u=(0,a.UA)().getCurrent(),r=(0,o.N3)(u);return(0,n.jsx)(s.n,{messages:p(u),onGenerate:h,eventTrackingSrc:d.ec.dashboardDescription,toggleTipTitle:"Improve your dashboard description",disabled:r.length===0,tooltip:r.length===0?o.ZN:void 0})};function p(h){return[{content:i,role:o.Xh.system},{content:`The title of the dashboard is "${h.title}"
${(0,o.BB)(h)}`,role:o.Xh.user}]}},42361:(ne,j,e)=>{"use strict";e.d(j,{v:()=>o});var n=e(66402),a=e(13956),s=e(93854);class d{constructor(){this.cache=null,this.promise=null,this.resourceListCache=null,this.resourceListPromise=null}async get(){if(this.cache!==null)return this.cache;if(this.promise!==null)return this.promise;this.promise=this.fetch();try{return this.cache=await this.promise,this.cache}catch(i){throw this.promise=null,i}}async getAsResourceList(){if(this.resourceListCache!==null)return this.resourceListCache;if(this.resourceListPromise!==null)return this.resourceListPromise;this.resourceListPromise=this.fetchResourceList();try{return this.resourceListCache=await this.resourceListPromise,this.resourceListCache}catch(i){throw this.resourceListPromise=null,i}}clear(){this.cache=null,this.promise=null,this.resourceListCache=null,this.resourceListPromise=null}async fetchResourceList(){try{const c=await(0,a.n)().listDeletedDashboards({limit:1e3});return(0,n.F)(c)?c:{apiVersion:"v1",kind:"List",metadata:{resourceVersion:"0"},items:[]}}catch(i){return console.error("Failed to fetch deleted dashboards:",i),{apiVersion:"v1",kind:"List",metadata:{resourceVersion:"0"},items:[]}}}async fetch(){const i=await this.getAsResourceList();return(0,s.A5)(i)}}const o=new d},42795:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>b,GU:()=>u,MJ:()=>v,Ox:()=>g,eK:()=>x,fR:()=>E,kw:()=>m,wi:()=>i});var n=e(65307),a=e(22592),s=e(28105),d=e(29043),o=e(82612),l=e(62667);const i="grafana.dashboard.editor.ui",c={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:l.q5.Fill},p=()=>{const D=d.A.getObject(i,c);let f={...D};return typeof D.topPaneSize=="string"&&(f={...D,topPaneSize:parseFloat(D.topPaneSize)/100}),{getPanel:()=>new o.a9({}),getSourcePanel:()=>new o.a9({}),getData:()=>({state:s.Gu.NotStarted,series:[],timeRange:(0,a.E2)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...c,...f}}},h=(0,n.Z0)({name:"panelEditor",initialState:p(),reducers:{updateEditorInitState:(D,f)=>{D.getPanel=()=>f.payload.panel,D.getSourcePanel=()=>f.payload.sourcePanel,D.initDone=!0,D.isOpen=!0,D.shouldDiscardChanges=!1},setEditorPanelData:(D,f)=>{D.getData=()=>f.payload},setDiscardChanges:(D,f)=>{D.shouldDiscardChanges=f.payload},setPanelEditorUIState:(D,f)=>{D.ui={...D.ui,...f.payload},!D.ui.isPanelOptionsVisible&&D.isVizPickerOpen&&(D.isVizPickerOpen=!1)},toggleVizPicker:(D,f)=>{D.isVizPickerOpen=f.payload,D.isVizPickerOpen&&(D.ui.isPanelOptionsVisible=!0)},toggleTableView(D){D.tableViewEnabled=!D.tableViewEnabled},closeEditor:D=>{D.getPanel=()=>new o.a9({}),D.getSourcePanel=()=>new o.a9({}),D.isOpen=!1,D.initDone=!1,D.isVizPickerOpen=!1,D.tableViewEnabled=!1}}}),{updateEditorInitState:u,setEditorPanelData:r,setDiscardChanges:v,closeEditor:g,setPanelEditorUIState:E,toggleVizPicker:x,toggleTableView:m}=h.actions,b={panelEditor:h.reducer}},42801:(ne,j,e)=>{"use strict";e.d(j,{a:()=>d,o:()=>s});var n=e(2543),a=e.n(n);function s(o,l){let i=l.trim();if(!i.match(/\{\{\s*define/)){const c=i.split(`
`).map(p=>"  "+p).join(`
`);i=`{{ define "${o}" }}
${c}
{{ end }}`}return i}function d(o){const l=(i,c)=>`{{ define "${c}_NEW_${(0,n.now)()}" }}`;return o.replace(/\{\{\s*define\s*\"(?<defineName>.*)\"\s*\}\}/g,l)}},42836:(ne,j,e)=>{"use strict";e.d(j,{q:()=>V});var n=e(74848),a=e(2543),s=e(96540),d=e(70713),o=e(64761),l=e(2197),i=e(60519),c=e(51898),p=e(92745),h=e(27489),u=e(2863),r=e(45861),v=e(68079),g=e(24343),E=e(65642),x=e(37234),m=e(16515),y=e(63142),b=e(41654),D=e(37386),f=e(18857),C=e(21285),P=e(85348),T=e(22803);const M=R=>(0,T.css)({padding:R.spacing(0,2),fontSize:R.typography.bodySmall.fontSize,color:R.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis"}),I=({children:R})=>{const O=(0,y.of)(M);return(0,n.jsx)("div",{className:O,children:R})};var B=e(89460);const U=({options:R,actions:O,formattedDataDescription:N,onOptionsChange:F,hasTransformations:G,data:H,dataFrames:K,transformationOptions:w,selectedDataFrame:Q,onDataFrameChange:k,excelCompatibilityMode:te,toggleExcelCompatibilityMode:q})=>{const se=(0,y.of)(B.A);let re=K;Q===o.F.joinByField&&(re=H);const Y=re.map((_,ee)=>({value:ee,label:`${(0,m.Ri)(_)} (${ee})`})),X=[...w,...Y];function J(){let _="";if(!H)return _;const ee=[];return Q===o.F.joinByField?ee.push((0,p.t)("dashboard.inspect-data.series-to-columns","Series joined by time")):H.length>1&&ee.push((0,m.Ri)(H[Q])),(R.withTransforms||R.withFieldConfig)&&(R.withTransforms&&ee.push((0,p.t)("dashboard.inspect-data.panel-transforms","Panel transforms")),R.withTransforms&&R.withFieldConfig,R.withFieldConfig&&ee.push((0,p.t)("dashboard.inspect-data.formatted","Formatted data"))),ee.join(", ")}return(0,n.jsx)("div",{className:se.dataDisplayOptions,children:(0,n.jsx)(P.u,{id:"Data options",index:0,title:(0,p.t)("dashboard.inspect-data.data-options","Data options"),headerElement:(0,n.jsx)(I,{children:J()}),isOpen:!1,actions:O,children:(0,n.jsx)("div",{className:se.options,"data-testid":"dataOptions",children:(0,n.jsxs)(b.B,{direction:"column",gap:0,children:[H.length>1&&(0,n.jsx)(D.D,{label:(0,p.t)("dashboard.inspect-data.dataframe-label","Show data frame"),children:(0,n.jsx)(f.l6,{options:X,value:Q,onChange:k,width:30,"aria-label":(0,p.t)("dashboard.inspect-data.dataframe-aria-label","Select dataframe")})}),(0,n.jsxs)(b.B,{children:[G&&F&&(0,n.jsx)(D.D,{label:(0,p.t)("dashboard.inspect-data.transformations-label","Apply panel transformations"),description:(0,p.t)("dashboard.inspect-data.transformations-description","Table data is displayed with transformations defined in the panel Transform tab."),children:(0,n.jsx)(C.d,{value:!!R.withTransforms,onChange:()=>F({...R,withTransforms:!R.withTransforms})})}),F&&(0,n.jsx)(D.D,{label:(0,p.t)("dashboard.inspect-data.formatted-data-label","Formatted data"),description:N||(0,p.t)("dashboard.inspect-data.formatted-data-description","Table data is formatted with options defined in the Field and Override tabs."),children:(0,n.jsx)(C.d,{id:"formatted-data-toggle",value:!!R.withFieldConfig,onChange:()=>F({...R,withFieldConfig:!R.withFieldConfig})})}),(0,n.jsx)(D.D,{label:(0,p.t)("dashboard.inspect-data.excel-compatibility-mode-label","Download for Excel"),description:(0,p.t)("dashboard.inspect-data.excel-compatibility-mode-description","Generates a CSV file that's compatible with most Excel versions"),children:(0,n.jsx)(C.d,{id:"excel-compatibility-mode-toggle",value:te,onChange:q})})]})]})})})})};var W=e(7542);class V extends s.PureComponent{constructor(O){super(O),this.onExportLogsAsTxt=()=>{const{data:N,dataName:F,app:G}=this.props;(0,h.rR)("grafana_logs_download_logs_clicked",{app:G,format:"logs",area:"inspector"});const H=(0,x.HT)(N||[]);(0,W.Zy)(H,F)},this.onExportTracesAsJson=()=>{const{data:N,dataName:F,app:G}=this.props;if(N)for(const H of N){if(H.meta?.preferredVisualisationType!=="trace")continue;const K=(0,W.ek)(H,F+"-traces");(0,h.rR)("grafana_traces_download_traces_clicked",{app:G,grafana_version:E.$W.buildInfo.version,trace_format:K,location:"inspector"})}},this.onExportServiceGraph=()=>{const{data:N,dataName:F,app:G}=this.props;(0,h.rR)("grafana_traces_download_service_graph_clicked",{app:G,grafana_version:E.$W.buildInfo.version,location:"inspector"}),N&&(0,W.ny)(N,F)},this.onDataFrameChange=N=>{this.setState({transformId:N.value===o.F.joinByField?o.F.joinByField:o.F.noop,dataFrameIndex:typeof N.value=="number"?N.value:0,selectedDataFrame:N.value})},this.onToggleExcelCompatibilityMode=()=>{this.setState(N=>({excelCompatibilityMode:!N.excelCompatibilityMode}))},this.state={selectedDataFrame:0,dataFrameIndex:0,transformId:o.F.noop,transformationOptions:z(),transformedData:O.data??[],excelCompatibilityMode:!1}}componentDidUpdate(O,N){if(!this.props.data){this.setState({transformedData:[]});return}if(this.props.options.withTransforms){this.setState({transformedData:this.props.data});return}if(O.data!==this.props.data||N.transformId!==this.state.transformId){const F=this.state.transformationOptions.find(G=>G.value===this.state.transformId);if(F&&F.transformer.id!==o.F.noop){const G=this.state.selectedDataFrame,H=this.state.dataFrameIndex,K=(0,l.m)([F.transformer],this.props.data).subscribe(w=>{this.setState({transformedData:w,selectedDataFrame:G,dataFrameIndex:H},()=>K.unsubscribe())});return}this.setState({transformedData:this.props.data});return}}exportCsv(O,N){const{dataName:F}=this.props,{transformId:G}=this.state,H=O[this.state.dataFrameIndex];N&&(0,h.rR)("grafana_logs_download_clicked",{app:this.props.app,format:"csv"}),(0,W.EM)(H,F,{},G,this.state.excelCompatibilityMode)}getProcessedData(){const{options:O,panelPluginId:N,fieldConfig:F,timeZone:G}=this.props,H=this.state.transformedData;if(!O.withFieldConfig)return(0,i.K3)(H);let K=F??{defaults:{},overrides:[]};return N==="table"&&F&&(K=this.cleanTableConfigFromFieldConfig(F)),(0,i.we)({data:H,theme:E.$W.theme2,fieldConfig:K,timeZone:G,replaceVariables:(w,Q,k)=>(0,u.w)().replace(w,Q,k)})}cleanTableConfigFromFieldConfig(O){O=(0,a.cloneDeep)(O),O.defaults.custom={};for(const N of O.overrides)for(const F of N.properties)if(F.id.startsWith("custom.")){const G=N.properties.indexOf(F);N.properties.slice(G,1)}return O}renderActions(O,N,F,G){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.$n,{variant:"primary",onClick:()=>this.exportCsv(O,N),size:"sm",children:(0,n.jsx)(p.x6,{i18nKey:"dashboard.inspect-data.download-csv",children:"Download CSV"})}),N&&!E.$W.exploreHideLogsDownload&&(0,n.jsx)(r.$n,{variant:"primary",onClick:this.onExportLogsAsTxt,size:"sm",children:(0,n.jsx)(p.x6,{i18nKey:"dashboard.inspect-data.download-logs",children:"Download logs"})}),F&&(0,n.jsx)(r.$n,{variant:"primary",onClick:this.onExportTracesAsJson,size:"sm",children:(0,n.jsx)(p.x6,{i18nKey:"dashboard.inspect-data.download-traces",children:"Download traces"})}),G&&(0,n.jsx)(r.$n,{variant:"primary",onClick:this.onExportServiceGraph,size:"sm",children:(0,n.jsx)(p.x6,{i18nKey:"dashboard.inspect-data.download-service",children:"Download service graph"})})]})}render(){const{isLoading:O,options:N,data:F,formattedDataDescription:G,onOptionsChange:H,hasTransformations:K}=this.props,{dataFrameIndex:w,transformationOptions:Q,selectedDataFrame:k,excelCompatibilityMode:te}=this.state,q=(0,B.c)();if(O)return(0,n.jsxs)("div",{children:[(0,n.jsx)(v.y,{inline:!0})," ",(0,n.jsx)(p.x6,{i18nKey:"inspector.inspect-data-tab.loading",children:"Loading"})]});const se=this.getProcessedData();if(!se||!se.length)return(0,n.jsx)("div",{children:(0,n.jsx)(p.x6,{i18nKey:"inspector.inspect-data-tab.no-data",children:"No data"})});const re=se[w]?w:0,Y=se[re],X=se.some(ee=>ee?.meta?.preferredVisualisationType==="logs"),J=se.some(ee=>ee?.meta?.preferredVisualisationType==="trace"),_=se.some(ee=>ee?.meta?.preferredVisualisationType==="nodeGraph");return(0,n.jsxs)("div",{className:q.wrap,"aria-label":c.Tp.components.PanelInspector.Data.content,children:[(0,n.jsx)("div",{className:q.toolbar,children:(0,n.jsx)(U,{data:F,hasTransformations:K,options:N,dataFrames:se,transformationOptions:Q,selectedDataFrame:k,formattedDataDescription:G,onOptionsChange:H,onDataFrameChange:this.onDataFrameChange,excelCompatibilityMode:te,toggleExcelCompatibilityMode:this.onToggleExcelCompatibilityMode,actions:this.renderActions(se,X,J,_)})}),(0,n.jsx)("div",{className:q.content,children:(0,n.jsx)(d.Ay,{children:({width:ee,height:ae})=>ee===0?null:(0,n.jsx)(g.X,{width:ee,height:ae,data:Y,showTypeIcons:!0})})})]})}}function z(){return[{value:o.F.joinByField,label:(0,p.t)("dashboard.inspect-data.transformation","Series joined by time"),transformer:{id:o.F.joinByField,options:{byField:void 0}}}]}},42942:(ne,j,e)=>{"use strict";e.d(j,{X:()=>h});var n=e(65474),a=e(62467),s=e(41119),d=e(94644),o=e(68143),l=e(43173),i=e(52161),c=e(8095);const p="-- Public --";class h extends d.mA{constructor(){let r={};super({name:"public-ds",id:0,type:"public-ds",meta:r,uid:p,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(v){return{...v,queryType:c.nj.Annotations,refId:"anno"}}}}query(r){return r.targets.length?r.targets[0]?.datasource?.uid===i.vv?(0,n.H)(this.getAnnotations(r)):(0,a.of)({data:[]}):(0,a.of)({data:[]})}async getAnnotations(r){const{range:{to:v,from:g}}=r,E={from:g.valueOf(),to:v.valueOf()},x=await(0,o.AI)().get(`/api/public/dashboards/${l.$.publicDashboardAccessToken}/annotations`,E);return{data:[(0,s.Vc)(x)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},42970:(ne,j,e)=>{"use strict";e.d(j,{p_:()=>g,qQ:()=>v,vL:()=>l,wz:()=>i});var n=e(2543),a=e.n(n),s=e(68220),d=e(44022),o=e(4651);function l(y){const b=new s.TS,D=[],f=y.map(C=>C.refId);if(b.createNodes(f),y.forEach(C=>{if(!(0,d.f)(C.model))return;const P=C.refId;p(C.model).forEach(M=>{if(P&&M)try{b.link(M,P)}catch(I){D.push({source:P,target:M,error:I})}})}),D.length>0)throw new c("failed to create DAG from queries",{cause:D});return b}function i(y,b=[]){try{return[l(y),b]}catch(D){if(D instanceof c){const f=D.cause;b.push(...f);const C=(0,n.reject)(y,P=>f.some(T=>T.source===P.refId));return i(C,b)}}return[new s.TS,b]}class c extends Error{constructor(b,D){super(b,D),this.cause=D?.cause??[]}}function p(y){const b=y.type===o.Tz.math,D=y.type===o.Tz.classic,f=y.type===o.Tz.sql;return b?h(y.expression??""):D?y.conditions?.map(C=>C.query.params[0])??[]:f?u(y.expression??""):[y.expression]}function h(y){const b=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),D=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),f=Array.from(y.matchAll(b)).map(P=>P.groups?.var),C=Array.from(y.matchAll(D)).map(P=>P.groups?.var);return(0,n.compact)((0,n.uniq)([...f,...C]))}function u(y){if(!y)return[];const C=y.split(`
`).filter(I=>!I.trim().startsWith("--")).join(" ").replace(/\s+/g," ").replace(/\/\*[\s\S]*?\*\//g,""),P=[],T=/from\s+([^;]*?)(?:\s+(?:join|where|group|having|order|limit)|\s*$)/gi;for(const I of C.matchAll(T)){const U=I[1].trim().split(",").map(W=>W.trim());for(const W of U)P.push(r(W))}const M=/join\s+([a-zA-Z0-9_."]+)/gi;for(const I of C.matchAll(M))P.push(r(I[1]));return(0,n.compact)((0,n.uniq)(P))}function r(y){let b=y.replace(/['"]/g,"");return b.includes(" as ")?b=b.split(" as ")[0]:b.includes(" ")&&(b=b.split(" ")[0]),b.includes(".")&&(b=b.split(".").pop()||""),b.trim()}const v=(0,n.memoize)(E,(y,b)=>y+m(b)),g=(0,n.memoize)(x,(y,b)=>y+m(b));function E(y,b){const D=b.getNode(y);if(!D)return[];const f=[];function C(P){const T=P.inputEdges;T.length>0?T.forEach(M=>{M.inputNode&&C(M.inputNode)}):f.push(P)}return C(D),f.map(P=>P.name)}function x(y,b){const D=b.getNode(y);if(!D)return[];const f=[];function C(P){P.outputEdges.forEach(M=>{M.outputNode&&(f.push(M.outputNode),C(M.outputNode))})}return C(D),f.map(P=>P.name)}function m(y){return Object.keys(y.nodes).map(b=>{const D=y.nodes[b],f=D.outputEdges.map(P=>P.outputNode?.name).join(", "),C=D.inputEdges.map(P=>P.inputNode?.name).join(", ");return`${D.name}:${f}:${C}`}).join(" ")}},43100:(ne,j,e)=>{"use strict";e.d(j,{d:()=>g});var n=e(34632),a=e(91984),s=e(72748),d=e(78045),o=e(55614),l=e(15518),i=e(5358);function c(...E){return{error:E.find(x=>x.error),isUninitialized:E.every(x=>x.isUninitialized),isSuccess:E.every(x=>x.isSuccess),isError:E.some(x=>x.isError),isLoading:E.some(x=>x.isLoading)}}const p=new Error("no active Alertmanager"),{useLazyGetAlertmanagerConfigurationQuery:h,useUpdateAlertmanagerConfigurationMutation:u}=a.m,r={alertmanager_config:{receivers:[],route:{},time_intervals:[],mute_time_intervals:[],inhibit_rules:[],templates:[]},template_files:{}},v=(0,n.A)(r,s.f1,l.NF,o.r0,d.B8);function g(){const{selectedAlertmanager:E}=(0,i.VI)(),[x,m]=h(),[y,b]=u(),D=c(m,b);if(!E)throw p;return[async C=>{const P=await x(E).unwrap(),T=v(P,C);return y({selectedAlertmanager:E,config:T}).unwrap()},D]}},43122:(ne,j,e)=>{"use strict";e.d(j,{f:()=>n,p:()=>a});let n=()=>{throw new Error("EmbeddedDashboard requires runtime initialization")};function a(s){n=s}},43243:(ne,j,e)=>{"use strict";e.d(j,{G:()=>f});var n=e(74848),a=e(22803),s=e(72181),d=e(31033),o=e(96540),l=e(92745),i=e(63142),c=e(30703),p=e(33033),h=e(63527),u=e(15245),r=e(70733),v=e(92842),g=e(74440),E=e(98869),x=e(75168),m=e(5320),y=e(93521);const b=()=>{},D=4,f=C=>{const{options:P,onChange:T,value:M,placeholder:I,isClearable:B,createCustomValue:U=!1,id:W,width:V,minWidth:z,maxWidth:R,"aria-labelledby":O,"data-testid":N,autoFocus:F,onBlur:G,disabled:H,portalContainer:K,invalid:w,prefixIcon:Q}=C,k=typeof M=="object"?M?.value:M,te=(0,o.useId)().replace(/:/g,"--"),{options:q,groupStartIndices:se,updateOptions:re,asyncLoading:Y,asyncError:X}=(0,m.II)(C.options,U),J=typeof P=="function",_=(0,o.useMemo)(()=>{if(J||M==null)return null;const ze=P.findIndex(Be=>Be.value===k);return ze===-1?null:ze},[M,P,k,J]),ee=(0,o.useMemo)(()=>M==null?null:_!==null&&!J?P[_]:typeof M=="object"?M:{value:M,label:M.toString()},[_,J,M,P]),ae=`${te}-downshift-menu`,le=`${te}-downshift-label`,L=(0,i.of)(E.C3),ie=(0,o.useCallback)(ze=>{const Be=Math.max(0,ze.startIndex-ze.overscan),$e=Math.min(q.length-1,ze.endIndex+ze.overscan),Ye=Array.from({length:$e-Be+1},(ge,pe)=>Be+pe),de=q[Ye[0]];if(de?.group){const ge=se.get(de.group);ge!==void 0&&ge<Ye[0]&&Ye.unshift(ge)}return Ye},[q,se]),oe=(0,s.Te)({count:q.length,getScrollElement:()=>me.current,estimateSize:ze=>{const Be=(0,y.S)(q[ze],ze>0?q[ze-1]:void 0),$e="description"in q[ze],Ye="group"in q[ze];let de=E.Aj;return $e&&(de=E.pg),Be&&Ye&&(de+=E.Aj),de},overscan:D,rangeExtractor:ie}),{isOpen:ue,highlightedIndex:ye,getInputProps:fe,getMenuProps:Ee,getItemProps:Ae,selectItem:Ge}=(0,d.Bp)({menuId:ae,labelId:le,inputId:W,items:q,itemToString:g.y,selectedItem:ee,onSelectedItemChange:({selectedItem:ze})=>{(B||ze!==null)&&T(ze)},defaultHighlightedIndex:_??0,scrollIntoView:()=>{},onIsOpenChange:({isOpen:ze,inputValue:Be})=>{ze&&Be===""&&re(Be)},onHighlightedIndexChange:({highlightedIndex:ze,type:Be})=>{Be!==d.Bp.stateChangeTypes.MenuMouseLeave&&oe.scrollToIndex(ze)},onStateChange:({inputValue:ze,type:Be,selectedItem:$e})=>{switch(Be){case d.Bp.stateChangeTypes.InputChange:re(ze??"");break;default:break}},stateReducer(ze,Be){let{changes:$e}=Be;const Ye=ze.isOpen===!1&&$e.isOpen===!0,de=ze.isOpen===!0&&$e.isOpen===!1;return Ye&&$e.inputValue===ze.inputValue&&($e={...$e,inputValue:""}),de&&($e.selectedItem?$e={...$e,inputValue:(0,g.y)($e.selectedItem)}:$e.inputValue!==""&&($e={...$e,inputValue:""})),$e}}),{inputRef:Fe,floatingRef:Pe,floatStyles:Ve,scrollRef:me}=(0,x.l)(q,ue),Se=V==="auto",Qe=Se?p.D:h.p,Ue=(ue?(0,g.y)(ee):null)||I,Ie=C.loading||Y,Re=(0,n.jsxs)(n.Fragment,{children:[k!==void 0&&k===ee?.value&&B&&(0,n.jsx)(c.I,{name:"times",className:L.clear,title:(0,l.t)("combobox.clear.title","Clear value"),tabIndex:0,role:"button",onClick:()=>{Ge(null)},onKeyDown:ze=>{(ze.key==="Enter"||ze.key===" ")&&Ge(null)}}),(0,n.jsx)(v.f,{isLoading:Ie||!1,isOpen:ue})]}),{Wrapper:Ke,wrapperProps:Le}=Se?{Wrapper:"div",wrapperProps:{className:L.adaptToParent}}:{Wrapper:o.Fragment};return(0,n.jsxs)(Ke,{...Le,children:[(0,n.jsx)(Qe,{width:Se?void 0:V,...Se?{minWidth:z,maxWidth:R}:{},autoFocus:F,onBlur:G,prefix:Q&&(0,n.jsx)(c.I,{name:Q}),disabled:H,invalid:w,className:L.input,suffix:Re,...fe({ref:Fe,onChange:b,"aria-labelledby":O,placeholder:Ue,"data-testid":N})}),(0,n.jsx)(u.ZL,{root:K,children:(0,n.jsx)("div",{className:(0,a.cx)(L.menu,!ue&&L.menuClosed),style:{...Ve,pointerEvents:"auto"},...Ee({ref:Pe,"aria-labelledby":O}),children:ue&&(0,n.jsx)(r.e,{loading:Ie,options:q,highlightedIndex:ye,selectedItems:ee?[ee]:[],scrollRef:me,getItemProps:Ae,error:X})})})]})}},43260:(ne,j,e)=>{"use strict";e.d(j,{A:()=>c,q:()=>i});var n=e(74848),a=e(22803),s=e(51898),d=e(76319),o=e(63142);function l(h){const u=(0,o.of)(p);return(0,n.jsx)("div",{className:(0,a.cx)(u.icon,"active"in h&&h.active&&u.active),children:(0,n.jsx)(d.K,{name:h.icon,tooltip:h.title,className:u.icon,disabled:!!h.disabled,onClick:h.onClick,type:"button","data-testid":h.dataTestId??s.Tp.components.QueryEditorRow.actionButton(h.title),..."active"in h&&{"aria-pressed":h.active}})})}function i(h){return(0,n.jsx)(l,{...h})}const c=h=>(0,n.jsx)(l,{...h}),p=h=>({icon:(0,a.css)({display:"flex",position:"relative",color:h.colors.text.secondary}),active:(0,a.css)({"&:before":{display:"block",content:'" "',position:"absolute",left:-1,right:2,height:3,borderRadius:h.shape.radius.default,bottom:-8,backgroundImage:h.colors.gradients.brandHorizontal}})})},43385:(ne,j,e)=>{"use strict";e.d(j,{g:()=>d});var n=e(97677),a=e.n(n),s=e(25229);function d(){const o=new n.Chance;return`${(0,s.KQ)().format("YYYY-MM-DD")}-${o.string({length:5,alpha:!0})}`}},43482:(ne,j,e)=>{"use strict";e.d(j,{l:()=>r});var n=e(74848),a=e(22803),s=e(83505),d=e(46885),o=e(96540),l=e(25229),i=e(63142),c=e(76373),p=e(63527),h=e(96396);const u=g=>(0,l.KQ)(g).format("L"),r=(0,o.forwardRef)(({value:g,minDate:E,maxDate:x,onChange:m,closeOnSelect:y,placeholder:b="Date",...D},f)=>{const[C,P]=(0,o.useState)(!1),T=(0,i.of)(v),M="bottom-start",I=(0,c.getPositioningMiddleware)(M),{context:B,refs:U,floatingStyles:W}=(0,s.we)({open:C,placement:M,onOpenChange:P,middleware:I,whileElementsMounted:d.ll,strategy:"fixed"}),V=(0,s.kp)(B),z=(0,s.s9)(B),{getReferenceProps:R,getFloatingProps:O}=(0,s.bv)([z,V]);return(0,o.useImperativeHandle)(f,()=>U.domReference.current,[U.domReference]),(0,n.jsxs)("div",{className:T.container,children:[(0,n.jsx)(p.p,{ref:U.setReference,type:"text",autoComplete:"off",placeholder:b,value:g&&u(g),onChange:N=>{N.target.value===""&&m("")},className:T.input,...D,...R()}),(0,n.jsx)("div",{className:T.popover,ref:U.setFloating,style:W,...O(),children:(0,n.jsx)(h.l,{isOpen:C,value:g&&typeof g!="string"?g:(0,l.KQ)().toDate(),minDate:E,maxDate:x,onChange:N=>{m(N),y&&P(!1)},onClose:()=>P(!1)})})]})});r.displayName="DatePickerWithInput";const v=g=>({container:(0,a.css)({position:"relative"}),input:(0,a.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}}),popover:(0,a.css)({zIndex:g.zIndex.tooltip})})},43533:(ne,j,e)=>{"use strict";e.d(j,{I:()=>a});var n=e(96540);class a extends n.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:d,content:o,placement:l="auto"}=this.props,{show:i}=this.state;return d(this.showPopper,this.hidePopper,{show:i,placement:l,content:o})}}},43550:(ne,j,e)=>{"use strict";e.d(j,{Id:()=>l,Im:()=>v,Vz:()=>u,YA:()=>r,_h:()=>E,s2:()=>i});var n=e(65307),a=e(2543),s=e.n(a),d=e(65642),o=e(18832);const l="home";function i(){const x={},m=(0,a.cloneDeep)(d.Ay.bootData.navTree),y=m.find(D=>D.id===l),b=m.filter(D=>D.id!==l);return y&&c(x,[y]),c(x,b,x[l]),x}function c(x,m,y){const b=[];for(const D of m){const f={...D,text:(0,o.C)(D.id)??D.text,subTitle:(0,o.o)(D.id)??D.subTitle,emptyMessage:(0,o.C)(D.emptyMessageId),parentItem:y};f.id&&(x[f.id]=f),f.children&&c(x,f.children,f),b.push(f)}y&&(y.children=b),x["not-found"]={...p("Page not found","404 Error").node},x.error={...p("Page error","An unexpected error").node}}function p(x,m){const y={text:x,subTitle:m,icon:"exclamation-triangle"};return{node:y,main:y}}const h={},u=(0,n.VP)("navIndex/updateNavIndex"),r=(0,n.VP)("navIndex/updateConfigurationSubtitle"),v=(0,n.VP)("navIndex/removeNavIndex"),g=(x,m)=>({...x,parentItem:{...x.parentItem,text:x.parentItem?.text??"",subTitle:m}}),E=(x=h,m)=>{if(u.match(m)){let b=function(C){if(C.children)for(const P of C.children)D[P.id]={...P,parentItem:C};C.parentItem&&b(C.parentItem)};var y=b;const D={},f=m.payload;return b(f),{...x,...D}}else if(r.match(m)){const b=`Organization: ${m.payload}`;return{...x,cfg:{...x.cfg,subTitle:b},datasources:g(x.datasources,b),correlations:g(x.correlations,b),users:g(x.users,b),teams:g(x.teams,b),plugins:g(x.plugins,b),"org-settings":g(x["org-settings"],b)}}else v.match(m)&&delete x[m.payload];return x}},43652:(ne,j,e)=>{"use strict";e.d(j,{b:()=>E,o:()=>x});var n=e(74848),a=e(96540),s=e(16817),d=e(40996),o=e(92745),l=e(68143),i=e(22787),c=e(45861),p=e(41654),h=e(37386),u=e(63527),r=e(91156),v=e(30124),g=e(12048);const E=({panel:m,initialFolderUid:y,onCreateLibraryPanel:b,onDismiss:D})=>{const[f,C]=(0,a.useState)(y),[P,T]=(0,a.useState)(m.title),[M,I]=(0,a.useState)(m.title),[B,U]=(0,a.useState)(!1);(0,a.useEffect)(()=>U(!0),[P]),(0,d.A)(()=>I(P),350,[P]);const{saveLibraryPanel:W}=(0,g.b)(),V=(0,a.useCallback)(()=>{m.libraryPanel={uid:"",name:P},W(m,f).then(O=>{(0,l.NF)(O)?m.libraryPanel=void 0:(D?.(),b?.(O))})},[m,P,W,f,D,b]),z=(0,s.A)(async()=>{try{return!(await(0,v.e9)(P)).some(O=>O.folderUid===f)}catch(O){return(0,l.NF)(O)&&(O.isHandled=!0),!0}finally{U(!1)}},[M,f]),R=!z?.value&&z.value!==void 0&&P===M&&!B;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.D,{label:(0,o.t)("library-panel.add-modal.name","Library panel name"),invalid:R,error:R?(0,o.t)("library-panel.add-modal.error","Library panel with this name already exists"):"",children:(0,n.jsx)(u.p,{id:"share-panel-library-panel-name-input",name:"name",value:P,onChange:O=>T(O.currentTarget.value)})}),(0,n.jsx)(h.D,{label:(0,o.t)("library-panel.add-modal.folder","Save in folder"),description:(0,o.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions"),children:(0,n.jsx)(r.d,{onChange:O=>C(O),value:f})}),(0,n.jsxs)(p.B,{gap:1,justifyContent:"start",children:[(0,n.jsx)(c.$n,{onClick:V,disabled:R,children:(0,n.jsx)(o.x6,{i18nKey:"share-panel.new-library-panel.create-button",children:"Create library panel"})}),(0,n.jsx)(c.$n,{variant:"secondary",onClick:D,fill:"outline",children:(0,n.jsx)(o.x6,{i18nKey:"share-panel.new-library-panel.cancel-button",children:"Cancel"})})]})]})},x=({isOpen:m=!1,panel:y,initialFolderUid:b,...D})=>(0,n.jsx)(i.a,{title:(0,o.t)("library-panels.add-library-panel-modal.title-create-library-panel","Create library panel"),isOpen:m,onDismiss:D.onDismiss,children:(0,n.jsx)(E,{panel:y,initialFolderUid:b,onDismiss:D.onDismiss})})},43707:(ne,j,e)=>{"use strict";e.d(j,{H:()=>s});var n=e(96540),a=e(27963);const s=n.memo(({actions:d,breadcrumbActions:o})=>{const{chrome:l}=(0,a.Il)();return(0,n.useLayoutEffect)(()=>()=>{l.update({actions:void 0,breadcrumbActions:void 0})},[l]),(0,n.useLayoutEffect)(()=>{l.update({actions:d,breadcrumbActions:o})}),null});s.displayName="TopNavUpdate"},43856:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>i,i:()=>c});var n=e(74848),a=e(22803),s=e(63142),d=e(35484);const o=({children:p,href:h})=>{const{inner:u}=(0,s.of)(l);return h?(0,n.jsx)("a",{className:u,href:h,children:p}):(0,n.jsx)(n.Fragment,{children:p})},l=p=>({inner:(0,a.css)({display:"flex",width:"100%",padding:p.spacing(2)})}),i=({children:p,disableEvents:h,disableHover:u,isSelected:r,className:v,href:g,noMargin:E,...x})=>{const{oldContainer:m}=(0,s.of)(c,h,u,r,void 0,E);return(0,n.jsx)("div",{...x,className:(0,a.cx)(m,v),children:(0,n.jsx)(o,{href:g,children:p})})},c=(p,h=!1,u=!1,r,v,g=!1)=>{const E=r!==void 0;return{container:(0,a.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:p.spacing(v?1:2),background:p.colors.background.secondary,borderRadius:p.shape.radius.default,marginBottom:p.spacing(g?0:1),pointerEvents:h?"none":"auto",[p.transitions.handleMotion("no-preference","reduce")]:{transition:p.transitions.create(["background-color","box-shadow","border-color","color"],{duration:p.transitions.duration.short})},...!u&&{"&:hover":{background:p.colors.emphasize(p.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":(0,d.getFocusStyles)(p)},...E&&{cursor:"pointer"},...r&&{outline:`solid 2px ${p.colors.primary.border}`}}),oldContainer:(0,a.css)({display:"flex",width:"100%",background:p.colors.background.secondary,borderRadius:p.shape.radius.default,position:"relative",pointerEvents:h?"none":"auto",marginBottom:p.spacing(g?0:1),[p.transitions.handleMotion("no-preference","reduce")]:{transition:p.transitions.create(["background-color","box-shadow","border-color","color"],{duration:p.transitions.duration.short})},...!u&&{"&:hover":{background:p.colors.emphasize(p.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":(0,d.getFocusStyles)(p)}})}}},43951:(ne,j,e)=>{"use strict";e.d(j,{c:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({message:l,callToActionElement:i,footer:c,className:p})=>{const h=(0,s.of)(o);return(0,n.jsxs)("div",{className:(0,a.cx)([h.wrapper,p]),children:[l&&(0,n.jsx)("div",{className:h.message,children:l}),i,c&&(0,n.jsx)("div",{className:h.footer,children:c})]})},o=l=>({wrapper:(0,a.css)({label:"call-to-action-card",background:l.colors.background.secondary,borderRadius:l.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:l.spacing(3),[l.breakpoints.down("sm")]:{padding:l.spacing(3,1)}}),message:(0,a.css)({marginBottom:l.spacing(3),fontStyle:"italic"}),footer:(0,a.css)({marginTop:l.spacing(3)})})},44017:(ne,j,e)=>{"use strict";e.d(j,{T4:()=>E,W1:()=>g,Wq:()=>x,rg:()=>r});var n=e(74848),a=e(38809),s=e(95004),d=e(92745),o=e(739),l=e(37386),i=e(77824),c=e(63527),p=e(41654),h=e(18857),u=e(99555);function r(m,y){x(m);const b=[(0,d.t)("grafana-ui.builder.axis.category-axis","Axis")];m.addTextInput({path:"axisLabel",name:(0,d.t)("grafana-ui.builder.axis.name-label","Label"),category:b,defaultValue:"",settings:{placeholder:(0,d.t)("grafana-ui.builder.axis.placeholder-label","Optional text"),expandTemplateVars:!0},showIf:D=>D.axisPlacement!==o.vM.Hidden,shouldApply:D=>D.type!==s.PU.time&&D.type!==s.PU.string}),E(m),m.addRadio({path:"axisGridShow",name:(0,d.t)("grafana-ui.builder.axis.name-grid-lines","Show grid lines"),category:b,defaultValue:void 0,settings:{options:[{value:void 0,label:(0,d.t)("grafana-ui.builder.axis.grid-line-options.label-auto","Auto")},{value:!0,label:(0,d.t)("grafana-ui.builder.axis.grid-line-options.label-on","On")},{value:!1,label:(0,d.t)("grafana-ui.builder.axis.grid-line-options.label-off","Off")}]},showIf:D=>D.axisPlacement!==o.vM.Hidden}).addRadio({path:"axisColorMode",name:(0,d.t)("grafana-ui.builder.axis.color-label","Color"),category:b,defaultValue:o.Y$.Text,settings:{options:[{value:o.Y$.Text,label:(0,d.t)("grafana-ui.builder.axis.color-options.label-text","Text")},{value:o.Y$.Series,label:(0,d.t)("grafana-ui.builder.axis.color-options.label-series","Series")}]},showIf:D=>D.axisPlacement!==o.vM.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:(0,d.t)("grafana-ui.builder.axis.name-show-border","Show border"),category:b,defaultValue:!1,showIf:D=>D.axisPlacement!==o.vM.Hidden}),m.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:(0,d.t)("grafana-ui.builder.axis.name-scale","Scale"),category:b,editor:g,override:g,defaultValue:{type:o.L4.Linear},shouldApply:D=>D.type===s.PU.number,process:a.hS}).addBooleanSwitch({path:"axisCenteredZero",name:(0,d.t)("grafana-ui.builder.axis.name-centered-zero","Centered zero"),category:b,defaultValue:!1,showIf:D=>D.scaleDistribution?.type!==o.L4.Log}).addNumberInput({path:"axisSoftMin",name:(0,d.t)("grafana-ui.builder.axis.name-soft-min","Soft min"),defaultValue:y.axisSoftMin,category:b,settings:{placeholder:(0,d.t)("grafana-ui.builder.axis.placeholder-soft-min","See: Standard options > Min")}}).addNumberInput({path:"axisSoftMax",name:(0,d.t)("grafana-ui.builder.axis.name-soft-max","Soft max"),defaultValue:y.axisSoftMax,category:b,settings:{placeholder:(0,d.t)("grafana-ui.builder.axis.placeholder-soft-max","See: Standard options > Max")}})}const v=[{label:"2",value:2},{label:"10",value:10}],g=({value:m,onChange:y})=>{const b=m?.type??o.L4.Linear,D=m?.log??2,f=[{label:(0,d.t)("grafana-ui.builder.axis.scale-distribution-editor.distribution-options.label-linear","Linear"),value:o.L4.Linear},{label:(0,d.t)("grafana-ui.builder.axis.scale-distribution-editor.distribution-options.label-log","Logarithmic"),value:o.L4.Log},{label:(0,d.t)("grafana-ui.builder.axis.scale-distribution-editor.distribution-options.label-symlog","Symlog"),value:o.L4.Symlog}];return(0,n.jsxs)(p.B,{direction:"column",gap:2,children:[(0,n.jsx)(i.z,{value:b,options:f,onChange:C=>{y({...m,type:C,log:C===o.L4.Linear?void 0:D})}}),(b===o.L4.Log||b===o.L4.Symlog)&&(0,n.jsx)(l.D,{label:(0,d.t)("grafana-ui.axis-builder.log-base","Log base"),children:(0,n.jsx)(h.l6,{options:v,value:D,onChange:C=>{y({...m,log:C.value})}})}),b===o.L4.Symlog&&(0,n.jsx)(l.D,{label:(0,d.t)("grafana-ui.axis-builder.linear-threshold","Linear threshold"),style:{marginBottom:0},children:(0,n.jsx)(c.p,{placeholder:"1",value:m?.linearThreshold,onChange:C=>{y({...m,linearThreshold:Number(C.currentTarget.value)})}})})]})};function E(m){m.addNumberInput({path:"axisWidth",name:(0,d.t)("grafana-ui.builder.axis.name-width","Width"),category:[(0,d.t)("grafana-ui.builder.axis.category-axis","Axis")],settings:{placeholder:(0,d.t)("grafana-ui.builder.axis.placeholder-width","Auto")},showIf:y=>y.axisPlacement!==o.vM.Hidden})}function x(m,y=b=>!0){const b=(0,u.P)();m.addRadio({path:"axisPlacement",name:(0,d.t)("grafana-ui.builder.axis.name-placement","Placement"),category:[(0,d.t)("grafana-ui.builder.axis.category-axis","Axis")],defaultValue:b.axisPlacement[0].value,settings:{options:b.axisPlacement.filter(D=>y(D.value))}})}},44019:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{getChildId:()=>a,renderOrCallToRender:()=>s});var n=e(96540);function a(d){let o;const l=n.Children.only(d);return"id"in l?.props?o=l.props.id:"inputId"in l.props&&(o=l?.props.inputId),typeof o=="string"?o:void 0}function s(d,o){if(n.isValidElement(d)||typeof d=="string"||typeof d=="number")return d;if(typeof d=="function"&&o)return d(o);throw new Error(`${d} is not a React element nor a function that returns React element`)}},44022:(ne,j,e)=>{"use strict";e.d(j,{f:()=>s,z:()=>d});var n=e(36580),a=e(4651);const s=o=>{if(!o)return!1;if((0,n.s9)(o.datasource))return!0;const l=o;return typeof l.type!="string"?!1:Object.values(a.Tz).includes(l.type)};function d(o){return["avg","min","max","sum","count","last","median","diff","diff_abs","percent_diff","percent_diff_abs","count_non_null"].includes(o)}},44109:(ne,j,e)=>{"use strict";e.d(j,{FY:()=>g,Ll:()=>x,O3:()=>m,ZU:()=>v,we:()=>r});var n=e(10378),a=e(96540),s=e(16817),d=e(52161),o=e(70327),l=e(55143),i=e(67598),c=e(94646),p=e(29609),h=e(23265),u=e(18404);function r(y,b,D){const f=(0,d.oh)(b),{dsFeatures:C,isLoadingDsFeatures:P}=m(b),{currentData:T,isLoading:M,error:I}=o.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:b,ruleName:y,namespace:D?.namespace,groupName:D?.groupName}),[B]=o.hK.endpoints.getRuleGroupForNamespace.useLazyQuery(),{loading:U,error:W,value:V}=(0,s.A)(async()=>{if(!f)throw new Error("Unable to obtain data source settings");if(I)throw new Error("Unable to obtain Prometheus rules");const z=T||[],R=[];if(C?.rulerConfig){const F=C.rulerConfig,G=z.map(H=>H.groups.map(K=>({namespace:H,group:K}))).flat();await Promise.allSettled(G.map(async H=>{const K=await B({rulerConfig:F,namespace:H.namespace.name,group:H.group.name}).unwrap();R.push(K)}))}return z.map(F=>(0,h.O6)(f,F,R)).flatMap(F=>F.groups.flatMap(G=>G.rules))},[f,C,M,I,T,B]);return{loading:P||U,error:W,rules:V}}function v({ruleIdentifier:y,limitAlerts:b}){const{ruleSourceName:D}=y,f=E(y),{dsFeatures:C,isLoadingDsFeatures:P}=m(D),{loading:T,error:M,result:I}=g(y),{currentData:B=[],isLoading:U,error:W}=o.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:y.ruleSourceName,namespace:I?.namespace,groupName:I?.group,ruleName:I?.ruleName,limitAlerts:b},{skip:!I||T,refetchOnMountOrArgChange:!0}),V=(0,d.z2)(D),z=(0,u.a)(V?I?.namespace:void 0),R=V&&z.folder?(0,u.W)(z.folder):I?.namespace,[O,{currentData:N,isLoading:F,error:G}]=o.hK.endpoints.getRuleGroupForNamespace.useLazyQuery();(0,a.useEffect)(()=>{!C?.rulerConfig||!I||O({rulerConfig:C.rulerConfig,namespace:I.namespace,group:I.group})},[C,O,I]);const H=(0,a.useMemo)(()=>{if(!f||!I)return;const K=N&&R?{[R]:[N]}:{};return(0,h.gt)(f,B,K).flatMap(te=>te.groups).flatMap(te=>te.rules).find(te=>c.LC(c.UP(D,te),y))},[y,D,B,N,f,I,R]);return{loading:T||P||U||F,error:M??W??G,result:H}}function g(y){const b=(0,p.A4)(y)&&y.uid!==""?{uid:y.uid}:n.hT,{isLoading:D,currentData:f,error:C,isUninitialized:P}=o.hK.endpoints.getAlertRule.useQuery(b,{refetchOnMountOrArgChange:!0});return(0,a.useMemo)(()=>{if((0,p.Mj)(y)||(0,p.X4)(y))try{return{result:{datasource:y.ruleSourceName,namespace:y.namespace,group:y.groupName,ruleName:y.ruleName,groupIdentifier:i.HA.fromRuleIdentifier(y)},loading:!1}}catch(T){return{loading:!1,error:T}}return(0,p.A4)(y)?D||P?{loading:!0}:C?{loading:!1,error:C}:f?{result:{datasource:y.ruleSourceName,namespace:f.grafana_alert.namespace_uid,group:f.grafana_alert.rule_group,ruleName:f.grafana_alert.title,groupIdentifier:{namespace:{uid:f.grafana_alert.namespace_uid},groupName:f.grafana_alert.rule_group,groupOrigin:"grafana"}},loading:!1}:{loading:!1,error:new Error(`Unable to obtain rule location for rule ${y.uid}`)}:{loading:!1,error:new Error("Unsupported rule identifier")}},[y,D,P,C,f])}function E(y){return(0,p.A4)(y)?"grafana":(0,d.oh)(y.ruleSourceName)}function x({ruleIdentifier:y}){const b=E(y),{data:D,isLoading:f}=l.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:y.ruleSourceName}),{loading:C,error:P,result:T}=g(y),[M,{currentData:I,isLoading:B,isUninitialized:U,error:W}]=o.hK.endpoints.getRuleGroupForNamespace.useLazyQuery();(0,a.useEffect)(()=>{!D?.rulerConfig||!T||M({rulerConfig:D.rulerConfig,namespace:T.namespace,group:T.group})},[D,M,T]);const V=(0,a.useMemo)(()=>{const{ruleSourceName:z}=y;if(!I||!b||!T)return;const R=I.rules.find(O=>{const N=c.P1(z,T.namespace,T.group,O);return c.LC(N,y)});if(R)return{ruleSourceName:z,group:I,namespace:T.namespace,rule:R}},[y,I,b,T]);return{loading:C||f||B||U,error:P??W,result:V}}function m(y){const{currentData:b,isLoading:D}=l.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:y});return{isLoadingDsFeatures:D,dsFeatures:b}}},44173:(ne,j,e)=>{"use strict";e.d(j,{D:()=>l});var n=e(74848),a=e(51898),s=e(92745),d=e(34999);const o=a.Tp.pages.ShareDashboardModal.PublicDashboard,l=({showDescription:i=!0})=>(0,n.jsx)(d.F,{severity:"warning",title:(0,s.t)("public-dashboard.modal-alerts.unsupported-template-variable-alert-title","Template variables are not supported"),"data-testid":o.TemplateVariablesWarningAlert,bottomSpacing:0,children:i&&(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-template-variable-alert-desc",children:"This public dashboard may not work since it uses template variables"})})},44220:(ne,j,e)=>{"use strict";e.d(j,{Ii:()=>i,Zw:()=>o,bw:()=>l});var n=e(99090),a=e(52763),s=e(27044),d=e(78034);const o=(0,a.zD)("browseDashboards/refreshParents",async(c,{getState:p,dispatch:h})=>{const{browseDashboards:u}=p(),{rootItems:r,childrenByParentUID:v}=u,g=new Set;for(const E of c){const x=(0,d.R)(r?.items??[],v,E);g.add(x?.parentUID)}for(const E of g)h(l({parentUID:E,pageSize:s.md}))}),l=(0,a.zD)("browseDashboards/refetchChildren",async({parentUID:c,pageSize:p})=>{const h=c===n.TF?void 0:c;let u=1,r="folder",v=await(0,s.uT)(h,void 0,u,p),g=v.length<p;if(r==="folder"&&g){r="dashboard",u=1;const E=await(0,s.aw)(h,u,p);g=E.length<p,v=v.concat(E)}return{children:v,lastPageOfKind:g,page:u,kind:r}}),i=(0,a.zD)("browseDashboards/fetchNextChildrenPage",async({parentUID:c,excludeKinds:p=[],pageSize:h},u)=>{const r=!p.includes("dashboard"),v=c===n.TF?void 0:c,g=u.getState().browseDashboards,E=v?g.childrenByParentUID[v]:g.rootItems;let x=1,m;if(E?E.lastFetchedKind==="dashboard"&&!E.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${v} but that collection is fully loaded`):E.lastFetchedKind==="folder"&&E.lastKindHasMoreItems?(x=E.lastFetchedPage+1,m="folder"):r&&(x=E.lastFetchedKind==="folder"?1:E.lastFetchedPage+1,m="dashboard"):(x=1,m="folder"),!m)return;let y=m==="folder"?await(0,s.uT)(v,void 0,x,h):await(0,s.aw)(v,x,h),b=y.length<h;if(m==="folder"&&b&&r){m="dashboard",x=1;const D=await(0,s.aw)(v,x,h);b=D.length<h,y=y.concat(D)}return{children:y,lastPageOfKind:b,page:x,kind:m}})},44229:(ne,j,e)=>{"use strict";e.d(j,{X:()=>i,t:()=>c});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(80011),l=e(63142);const i=h=>{const{timestamp:u,timeZone:r,className:v}=h,g=(0,l.of)(p);return(0,s.isString)(r)?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:(0,a.cx)(g.offset,v),children:c(u,r)})}):null},c=(h,u)=>`UTC${(0,o.LE)(h,{timeZone:u,format:"Z"})}`,p=h=>{const u=(0,a.css)({fontWeight:"normal",fontSize:h.typography.size.sm,color:h.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,a.css)(u,{color:h.colors.text.primary,background:h.colors.background.secondary,padding:"2px 5px",borderRadius:h.shape.radius.default,marginLeft:"4px"})}}},44232:(ne,j,e)=>{"use strict";e.d(j,{PI:()=>m,Pm:()=>x,XS:()=>C,Zo:()=>M,a_:()=>E,eG:()=>f,k3:()=>u,k_:()=>g,nF:()=>v,py:()=>r});var n=e(2543),a=e.n(n),s=e(88673),d=e(41119),o=e(46644),l=e(36638),i=e(57866),c=e(95004),p=e(11576),h=e(16515);const u="__series.name",r="__field.displayName",v="__field.labels",g="__calc",E="__cell_",x=25,m=B=>{const{replaceVariables:U,reduceOptions:W,timeZone:V,theme:z}=B,R=W.calcs.length?W.calcs:[o.gy.last],O=[],N=(0,l.NS)(W.fields?{id:i.Ct.byRegexp,options:W.fields}:{id:i.Ct.numeric}),F=B.data??[],G=W.limit?W.limit:x;let H=!1;for(let K=0;K<F.length&&!H;K++){const w=F[K],{timeField:Q}=(0,d.KR)(w),k=new s.R(w);for(let te=0;te<w.fields.length&&!H;te++){const q=w.fields[te],se=q.getLinks;if(!N(q,w,F))continue;let re=q.config;q.state?.range&&(re={...re,...q.state?.range});let Y=q.config.displayName??"";const X=q.display??(0,p.J)({field:q,theme:B.theme,timeZone:V});if(W.values)for(let J=0;J<q.values.length;J++){q.state=b(q,O.length);const _=I(q,J),ee=X(q.values[J]),ae=y(w,q,J,U,_),le=D(ae,B.fieldConfig,z);if(O.push({name:"",field:re,display:{...ee,title:ae,color:le??ee.color},view:k,colIndex:te,rowIndex:J,getLinks:se?()=>se({valueRowIndex:J}):()=>[],hasLinks:f(q)}),O.length>=G){H=!0;break}}else{const J=(0,o.Nw)({field:q,reducers:R});for(const _ of R){const ee=q.state?.scopedVars??{};ee[g]={value:_,text:_};const ae=X(J[_]);Y!==""?ae.title=U(Y,ee):ae.title=(0,h.Ct)(q,w,F),ae.percentChange=B.percentChange?(0,o.Nw)({field:q,reducers:[o.gy.diffperc]}).diffperc:void 0;let le;B.sparkline&&(le={y:w.fields[te],x:Q},_===o.gy.last?le.highlightIndex=le.y.values.length-1:_===o.gy.first&&(le.highlightIndex=0));const L=w.length===1?0:void 0;O.push({name:_,field:re,display:ae,sparkline:le,view:k,colIndex:te,getLinks:se?()=>se({calculatedValue:ae,valueRowIndex:L}):()=>[],hasLinks:f(q)})}}}}return O.length===0&&O.push(P(B)),O};function y(B,U,W,V,z){const R=U.config.displayName;if(R)return R.indexOf(E)?V(M(R),z):V(R,z);let O=[],N=0;for(const F of B.fields)if(F!==U)if(F.type===c.PU.string){const G=F.values[W]??"",H=F.display?F.display(G).text:G;H.length>0&&O.push(H)}else F.type===c.PU.number&&N++;return(N||O.length===0)&&O.push((0,h.Ct)(U,B)),O.join(" ")}function b(B,U){return{...B.state,seriesIndex:U}}function D(B,U,W){for(const V of U.overrides)if(V.matcher.id==="byName"&&V.matcher.options===B){for(const z of V.properties)if(z.id==="color"&&z.value)return W.visualization.getColorByName(z.value.fixedColor)}return null}function f(B){return B.config?.links?.length?B.config.links.length>0:!1}function C(B){let U="",W="",V="",z="";for(let R=0;R<B.length;R++){const O=B[R].display;O.text&&O.text.length>W.length&&(W=O.text),O.title&&O.title.length>U.length&&(U=O.title),O.prefix&&O.prefix.length>V.length&&(V=O.prefix),O.suffix&&O.suffix.length>z.length&&(z=O.suffix)}return{text:W,title:U,suffix:z,prefix:V}}function P(B){const U="No data",{fieldConfig:W,timeZone:V}=B,{defaults:z}=W,O=(0,p.J)({field:{name:"",type:c.PU.other,config:z},theme:B.theme,timeZone:V})(null),N=T(O,U);return{name:U,field:{...z,max:z.max??0,min:z.min??0},display:{text:N,numeric:0,color:O.color},hasLinks:!1}}function T(B,U){return!B||(0,n.isEmpty)(B.text)?U:B.text}function M(B){return B.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(U,W,V,z,R,O,N)=>`\${__data.fields[${W??z??O}]${V??R??N}}`)}function I(B,U){return B.state?.scopedVars?.__dataContext?{...B.state?.scopedVars,__dataContext:{value:{...B.state?.scopedVars?.__dataContext.value,rowIndex:U}}}:B.state?.scopedVars}},44256:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>g,MH:()=>i,Nh:()=>c,Oy:()=>r,SH:()=>p,TO:()=>o,jA:()=>d,sr:()=>l});var n=e(65307);const a={settings:{},providerStatuses:{},isLoading:!1,providers:[]},s=(0,n.Z0)({name:"authConfig",initialState:a,reducers:{settingsUpdated:(E,x)=>({...E,settings:x.payload}),providerStatusesLoaded:(E,x)=>({...E,providerStatuses:x.payload}),loadingBegin:E=>({...E,isLoading:!0}),loadingEnd:E=>({...E,isLoading:!1}),setError:(E,x)=>({...E,updateError:x.payload}),resetError:E=>({...E,updateError:void 0}),setWarning:(E,x)=>({...E,warning:x.payload}),resetWarning:E=>({...E,warning:void 0}),providersLoaded:(E,x)=>({...E,providers:x.payload})}}),{settingsUpdated:d,providerStatusesLoaded:o,loadingBegin:l,loadingEnd:i,setError:c,resetError:p,setWarning:h,resetWarning:u,providersLoaded:r}=s.actions,g={authConfig:s.reducer}},44326:(ne,j,e)=>{"use strict";e.d(j,{V:()=>n});function n(){Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(a){return this[a]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(a,s){this[a]=s},writable:!0,enumerable:!1,configurable:!0},add:{value:function(a){this.push(a)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}})}n()},44398:(ne,j,e)=>{"use strict";e.d(j,{l:()=>g});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(47087),i=e(24726),c=e(35484);const p=D=>({container:(0,a.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between",position:"relative"}),radio:(0,a.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,c.getFocusStyles)(D)}),label:(0,a.css)({cursor:"pointer",flex:1,padding:D.spacing(1),borderRadius:D.shape.radius.default,"&:hover":{background:D.colors.action.hover,cursor:"pointer"}}),labelSelected:(0,a.css)({background:D.colors.action.selected,"&::before":{backgroundImage:D.colors.gradients.brandVertical,borderRadius:D.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",width:D.spacing(.5),left:0,top:0}})}),h=(0,s.memo)(({value:D,onSelect:f,selected:C=!1,name:P})=>{const T=(0,o.of)(p),M=(0,i.A)();return(0,n.jsxs)("li",{className:T.container,children:[(0,n.jsx)("input",{className:T.radio,checked:C,name:P,type:"checkbox","data-role":"item",tabIndex:-1,id:M,onChange:()=>f(D)}),(0,n.jsx)("label",{className:(0,a.cx)(T.label,C&&T.labelSelected),htmlFor:M,children:D.display})]})});h.displayName="TimeRangeOption";const u=(D,f)=>(D%f+f)%f,r=["ArrowUp","ArrowDown","Home","End","Enter","Tab"],v=({localRef:D,options:f})=>{const[C,P]=(0,s.useState)(0);return(0,s.useEffect)(()=>{const M=D.current?.querySelectorAll('[data-role="item"]')||[],I=Array.from(M).findIndex(U=>U.checked),B=I>=0?I:0;M.forEach((U,W)=>{U.tabIndex=W===B?0:-1}),P(B)},[D,f]),[M=>{const I=D?.current?.querySelectorAll('[data-role="item"]'),B=I?.length??0;r.indexOf(M.key)>-1&&(M.preventDefault(),M.key!=="Tab"&&M.stopPropagation());let U=null;switch(M.key){case"ArrowUp":U=u(C-1,B);break;case"ArrowDown":U=u(C+1,B);break;case"Home":U=0;break;case"End":U=B-1;break;case"Enter":I?.[C]?.click();break;default:break}U!==null&&(P(U),I?.[U]?.focus(),I?.forEach((W,V)=>{W.tabIndex=V===U?0:-1}))}]},g=D=>{const f=(0,o.of)(y),{title:C,options:P,placeholderEmpty:T}=D;return typeof T<"u"&&P.length<=0?(0,n.jsx)(n.Fragment,{children:T}):C?(0,n.jsx)("section",{"aria-label":C,children:(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("div",{className:f.title,children:(0,n.jsx)(l.e,{children:C})}),(0,n.jsx)(E,{...D})]})}):(0,n.jsx)(E,{...D})},E=({options:D,value:f,onChange:C,title:P})=>{const T=(0,o.of)(b),M=(0,s.useRef)(null),[I]=v({localRef:M,options:D});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("ul",{role:"presentation",onKeyDown:I,ref:M,"aria-roledescription":(0,d.t)("time-picker.time-range.aria-role","Time range selection"),className:T.list,children:D.map((B,U)=>(0,n.jsx)(h,{value:B,selected:m(B,f),onSelect:C,name:P??(0,d.t)("time-picker.time-range.default-title","Time ranges")},x(B,U)))})})};function x(D,f){return`${D.from}-${D.to}-${f}`}function m(D,f){return!f||!D?!1:f.from===D.from&&f.to===D.to}const y=()=>({title:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})}),b=D=>({list:(0,a.css)({padding:D.spacing(.5)})})},44410:(ne,j,e)=>{"use strict";e.d(j,{K:()=>i,O:()=>c});var n=e(7467),a=e(75234),s=e(45229),d=e(65642),o=e(73427),l=e(69738);async function i(p,h){const u=d.$W.theme2,r=(0,n.g)(p);if(s.A.publish(new a.E8(r)),u.colors.mode!==r.colors.mode){const g=document.createElement("link");g.rel="stylesheet",g.href=d.$W.bootData.assets[r.colors.mode],g.onload=()=>{const E=document.getElementsByTagName("link");for(let x=0;x<E.length;x++){const m=E[x];m.href&&m.href.includes(`build/grafana.${u.colors.mode}`)&&m.remove()}},document.head.insertBefore(g,document.head.firstChild)}if(h||!o.TP.isSignedIn)return;await new l.W("user").patch({theme:p})}async function c(p){const h=d.$W.theme2;i(h.isDark?"light":"dark",p)}},44458:(ne,j,e)=>{"use strict";e.d(j,{e:()=>o});var n=e(74848),a=e(92745),s=e(45861),d=e(7075);const o=({size:l,disabled:i,onConfirm:c,"aria-label":p,closeOnConfirm:h})=>(0,n.jsx)(d.Z,{confirmText:(0,a.t)("grafana-ui.confirm-button.confirmText-delete","Delete"),confirmVariant:"destructive",size:l||"md",disabled:i,onConfirm:c,closeOnConfirm:h,children:(0,n.jsx)(s.$n,{"aria-label":p??(0,a.t)("grafana-ui.confirm-button.aria-label-delete","Delete"),variant:"destructive",icon:"times",size:l||"sm"})})},44515:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>n,o:()=>a});const n={"text/plain":[".csv",".txt"],"application/json":[".json"]},a=5e5},44580:(ne,j,e)=>{"use strict";e.d(j,{F:()=>o,g:()=>l});var n=e(74848),a=e(17548),s=e(92745),d=e(63527),o=(i=>(i.LessThan="lessthan",i.GreaterThan="greaterthan",i))(o||{});const l=({value:i,onChange:c,inputPrefix:p,isTime:h})=>{let u=a.secondsToHms(i/1e3);h||(u="10");const r=x=>{let m=!1;if(x)try{h&&a.isValidTimeSpan(x)?m=a.intervalToMs(x):m=Number(x)}catch(y){console.warn("ERROR",y)}c(m)},v=x=>{x.key==="Enter"&&r(x.currentTarget.value)},g=x=>{r(x.currentTarget.value)},E=p==="greaterthan"?(0,n.jsx)("div",{children:">"}):p==="lessthan"?(0,n.jsx)("div",{children:"<"}):null;return(0,n.jsx)(d.p,{autoFocus:!1,placeholder:(0,s.t)("timeseries.nulls-threshold-input.placeholder-never","Never"),width:10,defaultValue:u,onKeyDown:v,onBlur:g,prefix:E,spellCheck:!1})}},44720:(ne,j,e)=>{"use strict";e.d(j,{a:()=>i,d:()=>c});var n=e(74848),a=e(22803),s=e(34734),d=e(63142),o=e(3642);const l=(p,h)=>({valueNavigation:(0,a.css)({width:o.QH,fontWeight:"bold"}),valueNavigationWrapper:(0,a.css)({display:"flex",justifyContent:"flex-end"}),itemLabelsWrap:(0,a.css)({borderBottom:h?`1px solid ${p.colors.border.medium}`:""})}),i=p=>p.includes(s.gs)?p.replace(s.gs,""):p,c=({valueLabels:p,expanded:h})=>{const u=(0,d.of)(l,h);return(0,n.jsx)("div",{className:u.itemLabelsWrap,children:(0,n.jsx)("div",{className:u.valueNavigationWrapper,children:p.map((r,v)=>(0,n.jsx)("span",{className:u.valueNavigation,children:i(r.name)},r.name))})})}},44804:(ne,j,e)=>{"use strict";e.d(j,{s:()=>i});var n=e(2543),a=e.n(n),s=e(44248),d=e(60379),o=e(32215),l=e(11534);class i extends s.Bs{constructor(p){super(p),this._log=(0,d.h)("DashboardReloadBehavior"),this.reloadDashboard=(0,n.debounce)(this.reloadDashboard).bind(this);const h=!!this.state.uid&&!!this.state.reloadOnParamsChange;this.addActivationHandler(()=>{h&&(this._dashboardScene=s.jh.getAncestor(this,l.H$),this._variableDependency=new s.Sh(this,{onAnyVariableChanged:u=>{this._log.logger("onAnyVariableChanged",u.state.name,JSON.stringify(u.getValue())),this.reloadDashboard()},dependsOnScopes:!0}))})}getCurrentState(){const p=s.jh.getScopes(this)??[],h=s.jh.getTimeRange(this).state.value;return{scopes:p.map(u=>u.metadata.name),from:h.from.toISOString(),to:h.to.toISOString(),...s.Go.getUrlState(this._dashboardScene?.state.$variables),version:this._dashboardScene?.state.version}}isEditing(){return!!this._dashboardScene?.state.isEditing}isWaitingForVariables(){const p=s.jh.getVariables(this.parent);return p.state.variables.some(h=>p.isVariableLoadingOrWaitingToUpdate(h))}reloadDashboard(){if(this.isEditing()||this.isWaitingForVariables()){this._log.logger("DashboardReloadBehavior reloadDashboard isEditing or waiting for variables, skipping reload");return}const p=this.getCurrentState(),h=this._prevState??{};h.from=p.from,h.to=p.to;const u=!(0,n.isEqual)(p,this._prevState);this._log.logger(`DashboardReloadBehavior reloadDashboard stateChanged ${u?"true":"false"}`,this._prevState,p),u&&(this._prevState=p,setTimeout(()=>{(0,o.sP)().reloadDashboard(p)}))}}},45012:(ne,j,e)=>{"use strict";e.d(j,{$:()=>a,x:()=>s});let n;const a=d=>{n=d},s=()=>n?n():[!1,()=>console.error("MegaMenuOpen hook not found")]},45013:(ne,j,e)=>{"use strict";e.d(j,{e:()=>c});var n=e(74848),a=e(2543),s=e.n(a),d=e(96540),o=e(34343),l=e(41654);const i=({value:p,onChange:h})=>{const u=(0,d.useCallback)(r=>{h({...p,[r]:!p[r]})},[p,h]);return(0,n.jsx)(l.B,{gap:.5,children:Object.keys(p).map(r=>{const v=r;return(0,n.jsx)(o.m,{icon:p[v]?"eye-slash":"eye",onClick:()=>u(v),label:(0,a.startCase)(v),selected:p[v]},v)})})};function c(p){p.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:i,override:i,shouldApply:()=>!0,hideFromDefaults:!0,process:h=>h})}},45173:(ne,j,e)=>{"use strict";e.d(j,{P:()=>u,_:()=>h});var n=e(92138),a=e(92745),s=e(83873),d=e(47797),o=e(54115),l=e(75735),i=e(52043),c=e(95407),p=e(60171);const h={group:"dashboard.grafana.app",version:"v1beta1",resource:"dashboards"};class u{constructor(){this.client=new o.ws(h)}saveDashboard(v){const g=v.dashboard,E={metadata:{...v?.k8s},spec:{...g,title:g.title??"",uid:g.uid??""}};return v.message?E.metadata.annotations={...E.metadata.annotations,[l.fY]:v.message}:E.metadata.annotations&&delete E.metadata.annotations[l.fY],v.folderUid!==void 0&&(E.metadata.annotations={...E.metadata.annotations,[l.ew]:v.folderUid}),delete E.metadata.resourceVersion,g.uid?(E.metadata.name=g.uid,this.client.update(E,{fieldValidation:"Ignore"}).then(x=>this.asSaveDashboardResponseDTO(x))):(E.metadata.annotations={...E.metadata.annotations,[l.AI]:"default"},delete E.metadata.name,this.client.create(E,{fieldValidation:"Ignore"}).then(x=>this.asSaveDashboardResponseDTO(x)))}asSaveDashboardResponseDTO(v){const E=n.I.assureBaseUrl((0,i.u)({uid:v.metadata.name,currentQueryParams:"",slug:""}));return{uid:v.metadata.name,version:v.metadata.generation??0,id:v.spec.id??0,status:"success",url:E,slug:""}}deleteDashboard(v,g){return this.client.delete(v,g).then(E=>({id:0,message:E.message,title:(0,a.t)("dashboard.k8s-dashboard-api.title.deleted","deleted")}))}async getDashboardDTO(v,g){try{const E=await this.client.subresource(v,"dto",g);if(E.status?.conversion?.failed&&(0,p.Y)(E.status.conversion.storedVersion))throw new c.P(E.status.conversion.storedVersion,E.status.conversion.error);const x={meta:{...E.access,isNew:!1,isFolder:!1,uid:E.metadata.name,k8s:E.metadata,version:E.metadata.generation,created:E.metadata.creationTimestamp},dashboard:{...E.spec,version:E.metadata.generation,uid:E.metadata.name}};E.metadata.annotations?.[l.fW]&&(x.meta.reloadOnParamsChange=!0);const m=E.metadata.annotations??{},y=m[l.LH];if(y&&(x.meta.provisioned=m[l.Ms]==="true"||y===l.Sf.Repo,x.meta.provisionedExternalId=m[l.Y_]),E.metadata.labels?.[l.Y5]&&(x.dashboard.id=parseInt(E.metadata.labels[l.Y5],10)),E.metadata.annotations?.[l.ew])try{const b=await s.IB.getFolderByUid(E.metadata.annotations[l.ew]);x.meta.folderTitle=b.title,x.meta.folderUrl=b.url,x.meta.folderUid=b.uid,x.meta.folderId=b.id}catch(b){if((0,d.do)(b)!==403)throw new Error("Failed to load folder");x.meta.folderUid=E.metadata.annotations?.[l.ew]}return x}catch(E){const x=(0,d.do)(E);throw(0,d.q6)(E).includes("not found")&&x!==404&&(E.status=404,E.data.message="Dashboard not found"),E}}async listDeletedDashboards(v){return await this.client.list({...v,labelSelector:"grafana.app/get-trash=true"})}restoreDashboard(v){return v.metadata.resourceVersion="",this.client.create(v)}}},45311:(ne,j,e)=>{"use strict";e.d(j,{U:()=>s});var n=e(2543),a=e.n(n);function s(d){const o=(0,n.pick)(d,["alerting","pending","inactive","recording","recovering"]);return(0,n.sum)(Object.values(o))}},45450:(ne,j,e)=>{"use strict";e.d(j,{J:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({id:l,name:i,label:c,checked:p,value:h,disabled:u,description:r,onChange:v,...g})=>{const E=(0,s.of)(o);return(0,n.jsxs)("label",{title:r,className:E.label,children:[(0,n.jsx)("input",{...g,id:l,name:i,type:"radio",checked:p,value:h,disabled:u,className:E.input,onChange:()=>v&&v(l)}),(0,n.jsxs)("div",{children:[c,r&&(0,n.jsx)("div",{className:E.description,children:r})]})]})},o=l=>({input:(0,a.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:l.colors.background.canvas,width:`${l.spacing(2)} !important`,height:l.spacing(2),border:`1px solid ${l.colors.border.medium}`,borderRadius:l.shape.radius.circle,cursor:"pointer",margin:"3px 0",":checked":{backgroundColor:l.v1.palette.white,border:`5px solid ${l.colors.primary.main}`},":disabled":{backgroundColor:`${l.colors.action.disabledBackground} !important`,borderColor:l.colors.border.weak},":disabled:checked":{border:`1px solid ${l.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:l.colors.text.disabled,borderRadius:l.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${l.colors.background.canvas}, 0 0 0 3px ${l.colors.primary.main}`}}),label:(0,a.css)({fontSize:l.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${l.spacing(2)} auto`,gap:l.spacing(1),cursor:"pointer"}),description:(0,a.css)({fontSize:l.typography.size.sm,color:l.colors.text.secondary})})},45558:(ne,j,e)=>{"use strict";e.d(j,{K:()=>c});var n=e(74848),a=e(92745),s=e(45861),d=e(18027),o=e(97095),l=e(63527),i=e(87105);const c=({hasCert:p,label:h,onChange:u,onClick:r,placeholder:v,useGrow:g})=>(0,n.jsxs)(o.C,{children:[(0,n.jsx)(d.I,{label:h,labelWidth:14,disabled:p,grow:g,children:p?(0,n.jsx)(l.p,{type:"text",value:"configured",width:24}):(0,n.jsx)(i.f,{rows:7,onChange:u,placeholder:v,required:!0})}),p&&(0,n.jsx)(s.$n,{variant:"secondary",onClick:r,style:{marginLeft:4},children:(0,n.jsx)(a.x6,{i18nKey:"grafana-ui.data-source-settings.cert-key-reset",children:"Reset"})})]})},45746:(ne,j,e)=>{"use strict";e.d(j,{$:()=>V,B:()=>W});var n=e(74848),a=e(22803),s=e(74226),d=e(2543),o=e(80011),l=e(92745),i=e(41654),c=e(66404),p=e(63142),h=e(30703),u=e(20941),r=e(89640),v=e(42227),g=e(11504),E=e(77256),x=e(29609),m=e(15629),y=e(9368),b=e(31286),D=e(45967),f=e(47931),C=e(10427);const P=({id:O,label:N,value:F,monospace:G,showCopyButton:H,copyValue:K,tooltipValue:w})=>{const Q=(0,l.t)("alerting.copy-to-clipboard",'Copy "{{label}}" to clipboard',{label:N});return(0,n.jsx)(b.a,{children:(0,n.jsxs)(i.B,{direction:"column",gap:0,children:[(0,n.jsx)(c.E,{color:"secondary",id:O,children:N}),(0,n.jsxs)(c.E,{"aria-labelledby":O,color:"primary",variant:G?"code":"body",children:[(0,n.jsx)(C.A,{shouldWrap:!!w,wrap:k=>(0,n.jsx)(D.m,{content:w,children:k}),children:(0,n.jsx)("span",{children:F})}),H&&(0,n.jsx)(f.b,{"aria-label":Q,fill:"text",variant:"secondary",icon:"copy",size:"sm",getText:()=>K})]})]})})};var T=e(42004),M=e(87281),I=e(49914),B=(O=>(O.GrafanaManagedAlertRule="Grafana-managed alert rule",O.GrafanaManagedRecordingRule="Grafana-managed recording rule",O.CloudAlertRule="Cloud alert rule",O.CloudRecordingRule="Cloud recording rule",O.Unknown="Unknown",O))(B||{});const U=({title:O,children:N})=>(0,n.jsxs)(i.B,{direction:"column",gap:1,children:[(0,n.jsx)(c.E,{variant:"h4",children:O}),(0,n.jsx)(i.B,{direction:"column",gap:2,children:N})]}),W=({rule:O})=>{const N=(0,p.of)(R),F=(0,g.G)(O),G=x.p.grafana.alertingRule(O.rulerRule)?O.rulerRule.keep_firing_for:void 0;let H="Unknown";x.p.grafana.alertingRule(O.rulerRule)?H="Grafana-managed alert rule":x.p.grafana.recordingRule(O.rulerRule)?H="Grafana-managed recording rule":x.p.dataSource.alertingRule(O.rulerRule)?H="Cloud alert rule":x.p.dataSource.recordingRule(O.rulerRule)&&(H="Cloud recording rule");const K=x.p.grafana.recordingRule(O.rulerRule)?O.rulerRule.grafana_alert.record?.target_datasource_uid:null,w=(0,v.ps)(K),Q=K&&K!=="grafana",k=O.promRule?.evaluationTime,te=O.promRule?.lastEvaluation,q=x.R$.alertingRule(O.promRule)?(0,x.Rh)(O.promRule):void 0,se=Number.isFinite(k),re=x.p.grafana.rule(O.rulerRule)?O.rulerRule.grafana_alert.updated:void 0,Y=x.p.grafana.rule(O.rulerRule)&&(0,x.hC)(O.rulerRule),X=x.p.grafana.rule(O.rulerRule)&&!(0,d.isUndefined)(O.rulerRule.grafana_alert.missing_series_evals_to_resolve)?String(O.rulerRule.grafana_alert.missing_series_evals_to_resolve):void 0,J=(0,n.jsxs)(i.B,{children:[(0,n.jsx)(c.E,{color:"warning",children:(0,n.jsx)(h.I,{name:"pause-circle"})}),(0,n.jsx)(c.E,{children:(0,n.jsx)(l.x6,{i18nKey:"alerting.alert.evaluation-paused",children:"Alert evaluation currently paused"})})]});return(0,n.jsxs)("div",{className:N.metadata,children:[(0,n.jsxs)(U,{title:(0,l.t)("alerting.alert.rule","Rule"),children:[(0,n.jsx)(P,{id:"rule-type",label:(0,l.t)("alerting.alert.rule-type","Rule type"),value:H}),x.p.grafana.rule(O.rulerRule)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{id:"rule-type",label:(0,l.t)("alerting.alert.rule-identifier","Rule identifier"),value:O.rulerRule.grafana_alert.uid,monospace:!0,showCopyButton:!0,copyValue:O.rulerRule.grafana_alert.uid}),(0,n.jsx)(P,{id:"last-updated-by",label:(0,l.t)("alerting.alert.last-updated-by","Last updated by"),value:(0,n.jsx)(I.m,{user:O.rulerRule.grafana_alert.updated_by})}),re&&(0,n.jsx)(P,{id:"date-of-last-update",label:(0,l.t)("alerting.alert.last-updated-at","Last updated at"),value:(0,o.LE)(re)+` (${(0,o.fq)(re)})`})]}),Q&&(0,n.jsx)(P,{id:"target-datasource-uid",label:(0,l.t)("alerting.alert.target-datasource-uid","Target data source"),value:(0,n.jsx)(u.N,{href:`/connections/datasources/edit/${w?.uid}`,children:(0,n.jsxs)(i.B,{direction:"row",gap:1,children:[(0,n.jsx)("img",{style:{width:"16px"},src:w?.meta.info.logos.small,alt:"datasource logo"}),w?.name]})})})]}),(0,n.jsxs)(U,{title:(0,l.t)("alerting.alert.evaluation","Evaluation"),children:[Y?J:(0,n.jsxs)(n.Fragment,{children:[se&&te&&(0,n.jsx)(P,{id:"last-evaluated",label:(0,l.t)("alerting.alert.last-evaluated","Last evaluated"),value:(0,m.mo)(te)?"-":(0,s.B)(new Date(te),{addSuffix:!0}),tooltipValue:(0,m.mo)(te)?void 0:(0,o.LE)(te)}),se&&(0,n.jsx)(P,{id:"last-evaluation-duration",label:(0,l.t)("alerting.alert.last-evaluation-duration","Last evaluation duration"),value:`${k} ms`}),X&&(0,n.jsx)(P,{id:"missing-series-resolve",label:(0,l.t)("alerting.alert.missing-series-resolve","Missing series evaluations to resolve"),value:X,tooltipValue:(0,l.t)("alerting.alert.description-missing-series-evaluations","The number of consecutive evaluation intervals a dimension must be missing before the alert instance becomes stale, and is then automatically resolved and evicted. Defaults to 2 if empty.")})]}),F&&(0,n.jsx)(P,{id:"pending-period",label:(0,l.t)("alerting.alert.pending-period","Pending period"),value:F}),G&&(0,n.jsx)(P,{id:"keep-firing-for",label:(0,l.t)("alerting.alert.keep-firing-for","Keep firing for"),value:G})]}),x.p.grafana.alertingRule(O.rulerRule)&&!(0,d.isEmpty)(O.rulerRule.grafana_alert.notification_settings)&&(0,n.jsx)(z,{rulerRule:O.rulerRule}),x.p.grafana.rule(O.rulerRule)&&O.rulerRule.grafana_alert.no_data_state&&O.rulerRule.grafana_alert.exec_err_state&&(0,n.jsxs)(U,{title:(0,l.t)("alerting.alert.alert-state","Alert state"),children:[se&&(0,n.jsx)(P,{id:"alert-state-no-data",label:(0,l.t)("alerting.alert.state-no-data","Alert state if no data or all values are null"),value:O.rulerRule.grafana_alert.no_data_state}),F&&(0,n.jsx)(P,{id:"alert-state-exec-err",label:(0,l.t)("alerting.alert.state-error-timeout","Alert state if execution error or timeout"),value:O.rulerRule.grafana_alert.exec_err_state})]}),q&&(0,n.jsx)(U,{title:(0,l.t)("alerting.alert.annotations","Annotations"),children:Object.keys(q).length===0?(0,n.jsx)("div",{children:(0,n.jsx)(c.E,{color:"secondary",italic:!0,children:(0,n.jsx)(l.x6,{i18nKey:"alerting.alert.no-annotations",children:"No annotations"})})}):Object.entries(q).map(([_,ee])=>{const ae=`annotation-${_.replace(/\s/g,"-")}`;return(0,n.jsx)(P,{id:ae,label:_,value:(0,n.jsx)(V,{value:ee})},_)})})]})};function V({value:O}){const N=O&&O.startsWith("http"),F=(0,n.jsx)(y.Y,{input:O,delimiter:["{{","}}"]});return N?(0,n.jsx)(r.Y,{href:O,external:!0,children:O}):(0,n.jsx)(c.E,{color:"primary",children:F})}const z=({rulerRule:O})=>{const N=O.grafana_alert.notification_settings;return N?(0,n.jsxs)(U,{title:(0,l.t)("alerting.alert.notification-configuration.group-title","Notification configuration"),children:[(0,n.jsx)(P,{id:"receiver",label:(0,l.t)("alerting.alert.notification-configuration.contact-point","Contact point"),value:(0,n.jsx)(M.z,{name:N.receiver})}),N.mute_time_intervals&&(0,n.jsx)(P,{id:"mute-timings",label:(0,l.t)("alerting.alert.notification-configuration.mute-timings","Mute timings"),value:(0,n.jsx)(n.Fragment,{children:N.mute_time_intervals.map((F,G)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Y,{href:(0,E.NJ)(F,{alertmanager:"grafana"}),children:F}),G<N.mute_time_intervals.length-1&&", "]},F))})}),N.active_time_intervals&&(0,n.jsx)(P,{id:"active-time-intervals",label:(0,l.t)("alerting.alert.notification-configuration.active-timings","Active time intervals"),value:(0,n.jsx)(n.Fragment,{children:N.active_time_intervals.map((F,G)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Y,{href:(0,E.NJ)(F,{alertmanager:"grafana"}),children:F}),G<N.active_time_intervals.length-1&&", "]},F))})}),N.group_by&&(0,n.jsx)(P,{id:"group-by",label:(0,l.t)("alerting.alert.notification-configuration.group-by","Grouped by"),value:N.group_by.join(", ")}),(N.group_interval||N.group_wait||N.repeat_interval)&&(0,n.jsx)(P,{id:"timing-options",label:(0,l.t)("alerting.alert.notification-configuration.timing-options","Timings"),value:(0,n.jsx)(T.OJ,{timingOptions:{group_interval:N.group_interval,group_wait:N.group_wait,repeat_interval:N.repeat_interval}})})]}):null},R=O=>({metadata:(0,a.css)({display:"grid",gap:O.spacing(4),gridTemplateColumns:"1fr 1fr 1fr",[O.breakpoints.down("lg")]:{gridTemplateColumns:"1fr 1fr"},[O.breakpoints.down("sm")]:{gridTemplateColumns:"1fr"}})})},45776:(ne,j,e)=>{"use strict";e.d(j,{C:()=>s});var n=e(52763),a=e(84057);const s=d=>{const o=(0,n.d4)(l=>l.navIndex);return(0,a.tc)(o,d)}},45897:(ne,j,e)=>{"use strict";e.d(j,{l:()=>a});var n=e(22803);const a=(s,d)=>{const o=d||"middle",l=s.colors.emphasize(s.colors.background.secondary,.15),i=s.colors.primary.border,c=s.spacing(2),p=4,h=200;let u="50%",r="50%";switch(o){case"start":{u="0%",r="0%";break}case"end":{u="100%",r="100%";break}}const v=(0,n.css)({position:"relative","&:before":{content:'""',position:"absolute",[s.transitions.handleMotion("no-preference","reduce")]:{transition:s.transitions.create("border-color")},zIndex:1},"&:after":{background:l,content:'""',position:"absolute",[s.transitions.handleMotion("no-preference","reduce")]:{transition:s.transitions.create("background")},transform:"translate(-50%, -50%)",borderRadius:s.shape.radius.pill,zIndex:1},"&:hover":{"&:before":{borderColor:i},"&:after":{background:i}}}),g={borderRight:"1px solid transparent",height:"100%",left:u,transform:"translateX(-50%)"},E={borderTop:"1px solid transparent",top:r,transform:"translateY(-50%)"};return{dragHandleVertical:(0,n.cx)(v,(0,n.css)({cursor:"col-resize",width:c,"&:before":g,"&:after":{left:u,top:"50%",height:h,width:p}})),dragHandleHorizontal:(0,n.cx)(v,(0,n.css)({height:c,cursor:"row-resize","&:before":E,"&:after":{left:"50%",top:r,height:p,width:h}})),dragHandleBaseVertical:(0,n.cx)(v,(0,n.css)({cursor:"col-resize",width:c,"&:before":g})),dragHandleBaseHorizontal:(0,n.cx)(v,(0,n.css)({cursor:"row-resize",height:c,"&:before":E}))}}},45942:(ne,j,e)=>{"use strict";e.d(j,{Te:()=>l,Ym:()=>i,li:()=>o,rn:()=>d});var n=e(92745),a=e(75735),s=e(78034);function d(c){return c?.length===0}function o(c){return c?d(c.workflows):!1}const l=({isLocal:c=!1})=>c?(0,n.t)("provisioning.read-only-local-tooltip","This resource is read-only and provisioned through file provisioning. To make any changes, update the connected repository. To modify the settings go to Administration > Provisioning > Repositories."):(0,n.t)("provisioning.read-only-remote-tooltip","This resource is read-only and provisioned through Git. To make any changes, update the connected repository. To modify the settings go to Administration > Provisioning > Repositories.");function i(c,p,h){if(c.managedBy===a.Sf.Repo&&!c.parentUID&&c.kind==="folder")return c.uid;let u=c;for(;u.parentUID;){const r=(0,s.R)(p,h,u.parentUID);if(!r)break;if(r.managedBy===a.Sf.Repo&&!r.parentUID)return u.parentUID;u=r}return"non_provisioned"}},46072:(ne,j,e)=>{"use strict";e.d(j,{nC:()=>v,ww:()=>g,Os:()=>E});var n=e(10279),a=e(95004),s=e(39443);function d(x,m){const y=x.labels;if(y!==void 0){const b=new Array(m);return b.fill(y),b}else return null}function o(x,m,y){const b=x.getFieldByName("labels");if(b!==void 0&&b.type===a.PU.other){const D=b.values.map(v);return[b,()=>D]}else return[null,()=>d(m,y.length)]}function l(x){const m=new n.L(x),y=m.getFirstFieldOfType(a.PU.time),b=m.getFirstFieldOfType(a.PU.string);if(y===void 0||b===void 0)return null;const D=m.getFieldByName("tsNs")??null,f=m.getFieldByName("level")??m.getFieldByName("detected_level")??null,C=m.getFieldByName("id")??null,[P,T]=o(m,b,x),M=m.fields.filter((I,B)=>B!==y.index&&B!==b.index&&B!==D?.index&&B!==f?.index&&B!==C?.index&&B!==P?.index);return{timeField:y,bodyField:b,timeNanosecondField:D,severityField:f,idField:C,getLogFrameLabels:T,getLogFrameLabelsAsLabels:T,getLabelFieldName:()=>P?.name??null,extraFields:M}}function i(x,m,y){const b=x.getFieldByName(m);if(b!==void 0)return b.type===y?b:void 0}const c="timestamp",p="body",h="severity",u="id",r="labels";function v(x){let m=!1;for(const y in x)if(typeof x[y]!="string"){m=!0;break}if(m){let y={};for(const b in x){const D=x[b];y[b]=typeof D=="string"?D:JSON.stringify(D)}return y}return x}function g(x){const m=new n.L(x),y=i(m,c,a.PU.time),b=i(m,p,a.PU.string);if(y===void 0||b===void 0)return null;const D=i(m,h,a.PU.string)??null,f=i(m,u,a.PU.string)??null,C=i(m,r,a.PU.other)??null,P=C===null?null:C.values,T=m.fields.filter((M,I)=>I!==y.index&&I!==b.index&&I!==D?.index&&I!==f?.index&&I!==C?.index);return{timeField:y,bodyField:b,severityField:D,idField:f,getLogFrameLabels:()=>P,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>P!==null?P.map(v):null,getLabelFieldName:()=>C!==null?C.name:null,extraFields:T}}function E(x){return x.meta?.type===s.m.LogLines?g(x):l(x)}},46189:(ne,j,e)=>{"use strict";e.d(j,{fx:()=>g,q3:()=>E});var n=e(70915),a=e(44294),s=e(41119),d=e(95004),o=e(11365);function l(x){const m=new o.A().readFeatures(x,{featureProjection:"EPSG:3857"}),y=m.length,b=new Array(y).fill(null),D=[],f=new Map,C=I=>{let B=f.get(I);return B||(B={types:new Set,values:new Array(y).fill(null),count:0},D.push(I),f.set(I,B)),B},P=(...I)=>{for(const B of I)if(!f.has(B))return B;return"___"+I[0]},T={types:new Set,values:new Array(y).fill(null),count:0};for(let I=0;I<y;I++){const B=m[I];b[I]=B.getGeometry();const U=B.getId();U!=null&&(T.values[I]=U,T.types.add((0,s.oE)(U)),T.count++);for(const W of B.getKeys()){const V=B.get(W);if(V===b[I]||V==null)continue;const z=C(W);z.values[I]=V,z.types.add((0,s.oE)(V)),z.count++}}const M=[];if(T.count>0){const I=i(T);M.push({name:P("id","_id","__id"),type:I,values:T.values,config:{}})}M.push({name:P("geo","geometry"),type:d.PU.geo,values:b,config:{}});for(const I of D){const B=f.get(I);if(!B)continue;const U=i(B);M.push({name:I,type:U,values:B.values,config:{}})}return{fields:M,length:y}}function i(x){return x.count<1?d.PU.other:x.types.size>1?(x.values=x.values.map(m=>m!=null?`${m}`:m),d.PU.string):x.types.values().next().value??d.PU.other}var c=e(98643),p=e(82922);function h(x,m){let y=0;const b=new Map;for(const D of m){const f=new a.A((0,p.Rb)([D.longitude,D.latitude])),C={point:()=>f,geometry:()=>f};if(D.name&&(b.set(D.name,C),b.set(D.name.toUpperCase(),C)),D.key&&(b.set(D.key,C),b.set(D.key.toUpperCase(),C)),D.keys)for(const P of D.keys)b.set(P,C),b.set(P.toUpperCase(),C);y++}return{path:x,find:D=>{let f=b.get(D);return!f&&typeof D=="string"&&(f=b.get(D.toUpperCase())),f},count:y,examples:D=>{const f=[];if(b.size<1)f.push("no values found");else for(const C of b.keys())if(f.push(C),f.length>=D)break;return f}}}function u(x,m){let y;if(Array.isArray(m)){const b=m[0];if(b.latitude&&b.longitude&&(b.key||b.keys))return h(x,m)}else Array.isArray(m?.features)&&m?.type==="FeatureCollection"&&(y=l(m));if(!y)try{y=(0,s.Vc)(m)}catch(b){return{path:x,error:`${b}`,find:D=>{},examples:D=>[]}}return r(y,{path:x})}function r(x,m){const y=[];let b,D,f,C,P;for(const I of x.fields)if(I.type===d.PU.geo&&(b=I),!P&&I.type===d.PU.string&&(P=I),I.name){m.keys&&m.keys.includes(I.name)&&y.push(I);const B=I.name.toUpperCase();switch(B){case"LAT":case"LATITUTE":D=I;break;case"LON":case"LNG":case"LONG":case"LONGITUE":f=I;break;case"GEOHASH":C=I;break;case"ID":case"UID":case"KEY":case"CODE":m.keys||y.push(I);break;default:m.keys||(B.endsWith("_ID")||B.endsWith("_CODE"))&&y.push(I)}}!y.length&&P&&y.push(P);let T=!1;b?T=b.values[0]?.getType()==="Point":C?(b=(0,c.qy)(C),T=!0):D&&f&&(b=(0,c.Pz)(f,D),T=!0);const M=new Map;return y.forEach(I=>{I.values.forEach((B,U)=>{const W=`${B}`;M.set(W.toUpperCase(),U),M.set(W,U)})}),{path:m.path,find:I=>{const B=M.get(I);if(B!=null){const U=b?.values[B];return{frame:x,index:B,point:()=>!U||T?U:new a.A((0,n.q1)(U.getExtent())),geometry:()=>U}}},examples:I=>{const B=[];for(let U of M.keys())if(B.push(U),B.length>I)break;return B},frame:()=>x,count:x.length}}const v={},g=`${window.__grafana_public_path__}build/gazetteer/countries.json`;async function E(x){x||(x=g);let m=v[x];if(!m){try{const b=await(await fetch(x)).json();m=u(x,b)}catch(y){console.warn("Error loading placename lookup",x,y),m={path:x,error:"Error loading URL",find:b=>{},examples:b=>[]}}v[x]=m}return m}},46202:(ne,j,e)=>{"use strict";e.d(j,{g0:()=>U,a1:()=>B,yV:()=>T,F:()=>I});var n=e(2543),a=e(47078),s=e.n(a),d=e(52531),o=e(84266),l=e(85618),i=e(91984),c=e(80218),p=e(43100),h=e(5709);const u=["RoutingTree"],r=h.H.enhanceEndpoints({addTagTypes:u}).injectEndpoints({endpoints:N=>({listNamespacedRoutingTree:N.query({query:F=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${F.namespace}/routingtrees`,params:{pretty:F.pretty,allowWatchBookmarks:F.allowWatchBookmarks,continue:F.continue,fieldSelector:F.fieldSelector,labelSelector:F.labelSelector,limit:F.limit,resourceVersion:F.resourceVersion,resourceVersionMatch:F.resourceVersionMatch,sendInitialEvents:F.sendInitialEvents,timeoutSeconds:F.timeoutSeconds,watch:F.watch}}),providesTags:["RoutingTree"]}),replaceNamespacedRoutingTree:N.mutation({query:F=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${F.namespace}/routingtrees/${F.name}`,method:"PUT",body:F.comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1RoutingTree,params:{pretty:F.pretty,dryRun:F.dryRun,fieldManager:F.fieldManager,fieldValidation:F.fieldValidation}}),invalidatesTags:["RoutingTree"]})}),overrideExisting:!1});var v=e(78045),g=e(20443),E=e(22628),x=e(56476),m=e(83276),y=e(67923);const b=s()(W,{maxSize:1}),{useListNamespacedRoutingTreeQuery:D,useReplaceNamespacedRoutingTreeMutation:f,useLazyListNamespacedRoutingTreeQuery:C}=r,{useGetAlertmanagerConfigurationQuery:P}=i.m,T=({alertmanager:N},{skip:F}={})=>{const G=(0,x.dM)(N),H=D({namespace:(0,l.Ge)()},{skip:F||!G,selectFromResult:w=>({...w,currentData:w.currentData?b(w.currentData.items):void 0,data:w.data?b(w.data.items):void 0})}),K=P(N,{skip:F||G,selectFromResult:w=>({...w,currentData:w.currentData?.alertmanager_config?.route?[M(w.currentData.alertmanager_config.route)]:void 0,data:w.data?.alertmanager_config?.route?[M(w.data.alertmanager_config.route)]:void 0})});return G?H:K},M=s()(N=>({...N,[o.uz]:{provisioned:!!(N.provenance&&N.provenance!==E.rh)}}));function I({alertmanager:N}){const F=(0,x.dM)(N),[G]=f(),[H]=(0,p.d)(),[K]=C(),w=(0,c.Yb)(async k=>{const te=(0,l.Ge)(),q=await K({namespace:te}),[se]=q.data?b(q.data.items):[];if(!se)throw new Error(`no root route found for namespace ${te}`);const re=(0,g.QM)(se),Y=(0,y.AB)(N,k,re),X=O(Y);return G({name:E.DM,namespace:te,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1RoutingTree:(0,y.HO)(X)}).unwrap()}),Q=(0,c.Yb)(async k=>{const te=(0,v.LY)({update:k,alertmanager:N});return H(te)});return F?w:Q}function B({alertmanager:N}){const F=(0,x.dM)(N),[G]=(0,p.d)(),[H]=C(),[K]=f(),w=(0,c.Yb)(async k=>{const te=(0,l.Ge)(),q=await H({namespace:te}),[se]=q.data?b(q.data.items):[];if(!se)throw new Error(`no root route found for namespace ${te}`);const re=(0,g.QM)(se),Y=(0,y.AS)(k,re),X=O(Y);return K({name:E.DM,namespace:te,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1RoutingTree:X}).unwrap()}),Q=(0,c.Yb)(async k=>{const te=(0,v.Z8)({id:k});return G(te)});return F?w:Q}function U({alertmanager:N}){const F=(0,x.dM)(N),[G]=(0,p.d)(),[H]=C(),[K]=f(),w=(0,c.Yb)(async({partialRoute:k,referenceRouteIdentifier:te,insertPosition:q})=>{const se=(0,l.Ge)(),re=await H({namespace:se}),[Y]=re.data?b(re.data.items):[];if(!Y)throw new Error(`no root route found for namespace ${se}`);const X=(0,g.QM)(Y),J=(0,y.I8)(N??"",k,te,X,q),_=O(J);return K({name:E.DM,namespace:se,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1RoutingTree:(0,y.HO)(_)}).unwrap()}),Q=(0,c.Yb)(async({partialRoute:k,referenceRouteIdentifier:te,insertPosition:q})=>{const se=(0,v.tD)({partialRoute:k,referenceRouteIdentifier:te,insertPosition:q,alertmanager:N});return G(se)});return F?w:Q}function W(N){return N?.map(F=>({...F.spec.defaults,routes:F.spec.routes?.map(z),[o.uz]:{provisioned:(0,x.Uo)(F),resourceVersion:F.metadata.resourceVersion,name:F.metadata.name}}))}function V(N){return Object.values(o.ho).includes(N)}function z(N){return{...N,routes:N.routes?.map(z),matchers:void 0,object_matchers:N.matchers?.map(({label:F,type:G,value:H})=>{if(!V(G))throw new Error(`Invalid matcher operator from API: ${G}`);return[F,G,H]})}}function R(N){const{object_matchers:F,...G}=N;return{...G,receiver:N.receiver??void 0,matchers:F?.map(([H,K,w])=>({label:H,type:K,value:w})),routes:N.routes?.map(R)}}function O(N){const G={...(0,n.pick)(m.b.toPackage(N),d.Rs),receiver:N.receiver??""},H=N.routes?.map(R)??[];return{spec:{defaults:G,routes:H},metadata:{name:E.DM,resourceVersion:N[o.uz]?.resourceVersion}}}},46383:(ne,j,e)=>{"use strict";e.d(j,{_w:()=>a,o$:()=>l,ot:()=>s});var n=e(41119),a=(i=>(i.NewValuesSameSchema="NewValuesSameSchema",i.FullFrame="FullFrame",i))(a||{});const s=(i,c)=>"type"in i&&i.type===c,d=Object.values(a),o=i=>"type"in i&&d.includes(i.type),l=i=>(0,n.ci)(i)&&"packetInfo"in i},46429:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>r});var n=e(74848),a=e(96540),s=e(36490),d=e(22803),o=e(63142),l=e(7895),i=e(30703),c=e(45967),p=e(35484);const h=({notice:v,onClick:g})=>{const E=(0,o.of)(u),x=v.severity==="error"||v.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return v.inspect&&g?(0,n.jsx)(l.I,{className:E.notice,icon:x,iconSize:"md",tooltip:v.text,onClick:m=>g(m,v.inspect)},v.severity):v.link?(0,n.jsx)("a",{className:E.notice,"aria-label":v.text,href:v.link,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(i.I,{name:x,style:{marginRight:"8px"},size:"md"})}):(0,n.jsx)(c.m,{content:v.text,children:(0,n.jsx)("span",{className:E.iconTooltip,children:(0,n.jsx)(i.I,{name:x,size:"md"})})},v.severity)},u=v=>({notice:(0,d.css)({background:"inherit",border:"none",borderRadius:v.shape.radius.default}),iconTooltip:(0,d.css)({color:`${v.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${v.shape.radius.default}`,padding:`${v.spacing(0,1)}`,height:` ${v.spacing(v.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,p.getFocusStyles)(v),zIndex:1},"&: focus:not(:focus-visible)":(0,p.getMouseFocusStyles)(v),"&:hover ":{boxShadow:`${v.shadows.z1}`,color:`${v.colors.text.primary}`,background:`${v.colors.background.secondary}`}})}),r=({frames:v,panelId:g})=>{const E=(0,a.useCallback)((m,y)=>{m.stopPropagation(),s.Ny.partial({inspect:g,inspectTab:y})},[g]),x={};for(const m of v)if(!(!m.meta||!m.meta.notices))for(const y of m.meta.notices)x[y.severity]=y;return(0,n.jsx)(n.Fragment,{children:Object.values(x).map(m=>(0,n.jsx)(h,{notice:m,onClick:E},m.severity))})}},46559:(ne,j,e)=>{"use strict";e.d(j,{p:()=>l});var n=e(74848),a=e(22803),s=e(96540),d=e(65240);const o=(0,d.N)((i=!1)=>({list:(0,a.css)({listStyleType:"none",margin:0,padding:0}),item:(0,a.css)({display:i&&"inline-block"||"block"})}));class l extends s.PureComponent{constructor(c){super(c)}render(){const{items:c,renderItem:p,getItemKey:h,className:u,inline:r}=this.props,v=o(r);return(0,n.jsx)("ul",{className:(0,a.cx)(v.list,u),children:c.map((g,E)=>(0,n.jsx)("li",{className:v.item,children:p(g,E)},h?h(g):E))})}}},46635:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{insertAfterImmutably:()=>d,insertBeforeImmutably:()=>s,moveItemImmutably:()=>a,sortValues:()=>i});var n=e(739);function a(c,p,h){const u=[...c];return Array.prototype.splice.call(u,h,0,Array.prototype.splice.call(u,p,1)[0]),u}function s(c,p,h){if(h<0||h>c.length)throw new Error("Index out of bounds");const u=[...c];return u.splice(h,0,p),u}function d(c,p,h){if(h<0||h>c.length)throw new Error("Index out of bounds");const u=[...c];return u.splice(h+1,0,p),u}const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),l=(c,p)=>c-p;function i(c){return(p,h)=>{if(p===h)return 0;if(h==null||typeof h=="string"&&h.trim()==="")return-1;if(p==null||typeof p=="string"&&p?.trim()==="")return 1;let u=o.compare;return typeof p=="number"&&typeof h=="number"&&(u=l),c===n.xB.Descending?u(h,p):u(p,h)}}},46644:(ne,j,e)=>{"use strict";e.d(j,{AH:()=>i,AS:()=>h,C6:()=>r,Em:()=>c,H3:()=>v,Nw:()=>p,gy:()=>l});var n=e(2543),a=e.n(n),s=e(28105),d=e(95004),o=e(42954),l=(P=>(P.sum="sum",P.max="max",P.min="min",P.logmin="logmin",P.mean="mean",P.variance="variance",P.stdDev="stdDev",P.last="last",P.median="median",P.first="first",P.count="count",P.countAll="countAll",P.range="range",P.diff="diff",P.diffperc="diffperc",P.delta="delta",P.step="step",P.firstNotNull="firstNotNull",P.lastNotNull="lastNotNull",P.changeCount="changeCount",P.distinctCount="distinctCount",P.allIsZero="allIsZero",P.allIsNull="allIsNull",P.allValues="allValues",P.uniqueValues="uniqueValues",P.p1="p1",P.p2="p2",P.p3="p3",P.p4="p4",P.p5="p5",P.p6="p6",P.p7="p7",P.p8="p8",P.p9="p9",P.p10="p10",P.p11="p11",P.p12="p12",P.p13="p13",P.p14="p14",P.p15="p15",P.p16="p16",P.p17="p17",P.p18="p18",P.p19="p19",P.p20="p20",P.p21="p21",P.p22="p22",P.p23="p23",P.p24="p24",P.p25="p25",P.p26="p26",P.p27="p27",P.p28="p28",P.p29="p29",P.p30="p30",P.p31="p31",P.p32="p32",P.p33="p33",P.p34="p34",P.p35="p35",P.p36="p36",P.p37="p37",P.p38="p38",P.p39="p39",P.p40="p40",P.p41="p41",P.p42="p42",P.p43="p43",P.p44="p44",P.p45="p45",P.p46="p46",P.p47="p47",P.p48="p48",P.p49="p49",P.p50="p50",P.p51="p51",P.p52="p52",P.p53="p53",P.p54="p54",P.p55="p55",P.p56="p56",P.p57="p57",P.p58="p58",P.p59="p59",P.p60="p60",P.p61="p61",P.p62="p62",P.p63="p63",P.p64="p64",P.p65="p65",P.p66="p66",P.p67="p67",P.p68="p68",P.p69="p69",P.p70="p70",P.p71="p71",P.p72="p72",P.p73="p73",P.p74="p74",P.p75="p75",P.p76="p76",P.p77="p77",P.p78="p78",P.p79="p79",P.p80="p80",P.p81="p81",P.p82="p82",P.p83="p83",P.p84="p84",P.p85="p85",P.p86="p86",P.p87="p87",P.p88="p88",P.p89="p89",P.p90="p90",P.p91="p91",P.p92="p92",P.p93="p93",P.p94="p94",P.p95="p95",P.p96="p96",P.p97="p97",P.p98="p98",P.p99="p99",P))(l||{});function i(P,T){return P==="count"||P==="distinctCount"||P==="changeCount"||P==="countAll"?d.PU.number:P==="allIsNull"||P==="allIsZero"?d.PU.boolean:T}function c(P){return Object.keys(l).includes(P)}function p(P){const{field:T,reducers:M}=P;if(!T||!M||M.length<1)return{};if(T.state?.calcs){const R=[];for(const O of M)T.state.calcs.hasOwnProperty(O)||R.push(O);if(R.length<1)return{...T.state.calcs}}T.state||(T.state={});const I=h.list(M),B=T.values;if(B&&B.length<1){const R={...T.state.calcs};for(const O of I)R[O.id]=O.emptyInputResult!==null?O.emptyInputResult:null;return T.state.calcs=R}const{nullValueMode:U=s.UW.Ignore}=T.config,W=U===s.UW.Ignore,V=U===s.UW.AsZero;if(I.length===1&&I[0].reduce){const R=I[0].reduce(T,W,V);return T.state.calcs={...T.state.calcs,...R},R}let z=v(T,W,V);for(const R of I)!z.hasOwnProperty(R.id)&&R.reduce&&(z={...z,...R.reduce(T,W,V)});return T.state.calcs={...T.state.calcs,...z},z}const h=new o.O(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value (also excludes NaNs)",standard:!0,aliasIds:["current"],reduce:m,preservesUnits:!0},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:x,preservesUnits:!0},{id:"firstNotNull",name:"First *",description:"First non-null value (also excludes NaNs)",standard:!0,reduce:E,preservesUnits:!0},{id:"first",name:"First",description:"First Value",standard:!0,reduce:g,preservesUnits:!0},{id:"min",name:"Min",description:"Minimum Value",standard:!0,preservesUnits:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0,preservesUnits:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"],preservesUnits:!0},{id:"median",name:"Median",description:"Median Value",standard:!1,reduce:C,aliasIds:["median"],preservesUnits:!0},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:y,preservesUnits:!0},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:y,preservesUnits:!0},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"],preservesUnits:!0},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0,preservesUnits:!1},{id:"countAll",name:"Count all",description:"Number of values (including empty)",emptyInputResult:0,standard:!1,reduce:P=>({countAll:P.values.length}),preservesUnits:!1},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0,preservesUnits:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0,preservesUnits:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0,preservesUnits:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0,preservesUnits:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0,preservesUnits:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0,preservesUnits:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0,preservesUnits:!1},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:b,preservesUnits:!1},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:D,preservesUnits:!1},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0,preservesUnits:!1},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:P=>({allValues:[...P.values]}),preservesUnits:!1},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:P=>({uniqueValues:[...new Set(P.values)]}),preservesUnits:!1},...u()]),u=(P=[...Array.from({length:99},(T,M)=>M+1)])=>{const T=[],M=I=>I>3&&I<21?"th":I%10===1?"st":I%10===2?"nd":I%10===3?"rd":"th";return P.forEach(I=>{const B=I/100,U=`p${I}`,W=`${I}${M(I)} %`,V=`${I}${M(I)} percentile value`;T.push({id:U,name:W,description:V,standard:!1,reduce:(z,R,O)=>({[U]:f(z,B,R,O)}),preservesUnits:!0})}),T},r={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0};function v(P,T,M){const I={...r},B=P.values;if(!B)return I;const U=P.type===d.PU.number||P.type===d.PU.time;for(let W=0;W<B.length;W++){let V=B[W];if(W===0&&(I.first=V),I.last=V,V==null){if(T)continue;M&&(V=0)}if(I.count++,V!=null&&!Number.isNaN(V)){const z=I.firstNotNull===null;if(z&&(I.firstNotNull=V),U){if(I.sum+=V||0,I.allIsNull=!1,I.nonNullCount++,!z){const R=V-I.lastNotNull;I.step>R&&(I.step=R),I.lastNotNull>V?I.previousDeltaUp=!1:(I.previousDeltaUp&&(I.delta+=R),I.previousDeltaUp=!0)}V>I.max&&(I.max=V),V<I.min&&(I.min=V),V<I.logmin&&V>0&&(I.logmin=V)}V!==0&&(I.allIsZero=!1),I.lastNotNull=V}}return I.max===-Number.MAX_VALUE&&(I.max=null),I.min===Number.MAX_VALUE&&(I.min=null),I.step===Number.MAX_VALUE&&(I.step=null),I.nonNullCount>0&&(I.mean=I.sum/I.nonNullCount),I.allIsNull&&(I.allIsZero=!1),I.max!==null&&I.min!==null&&(I.range=I.max-I.min),(0,n.isNumber)(I.firstNotNull)&&(0,n.isNumber)(I.lastNotNull)&&(I.diff=I.lastNotNull-I.firstNotNull),(0,n.isNumber)(I.firstNotNull)&&(0,n.isNumber)(I.diff)&&(I.diffperc=I.diff/I.firstNotNull*100),I}function g(P,T,M){return{first:P.values[0]}}function E(P,T,M){const I=P.values;for(let B=0;B<I.length;B++){const U=I[B];if(U!=null&&!Number.isNaN(U))return{firstNotNull:U}}return{firstNotNull:null}}function x(P,T,M){const I=P.values;return{last:I[I.length-1]}}function m(P,T,M){const I=P.values;let B=I.length-1;for(;B>=0;){const U=I[B--];if(U!=null&&!Number.isNaN(U))return{lastNotNull:U}}return{lastNotNull:null}}function y(P,T,M){if(!(P.type===d.PU.number||P.type===d.PU.time))return{variance:0,stdDev:0};let I=0,B=0,U=0;const W=P.values;for(let V=0;V<W.length;V++){const z=W[V];if(z!=null){U++;let R=B;B+=(z-R)/U,I+=(z-R)*(z-B)}}if(U>0){const V=I/U;return{variance:V,stdDev:Math.sqrt(V)}}return{variance:0,stdDev:0}}function b(P,T,M){const I=P.values;let B=0,U=!0,W=null;for(let V=0;V<I.length;V++){let z=I[V];if(z===null){if(T)continue;M&&(z=0)}!U&&W!==z&&B++,U=!1,W=z}return{changeCount:B}}function D(P,T,M){const I=P.values,B=new Set;for(let U=0;U<I.length;U++){let W=I[U];if(W===null){if(T)continue;M&&(W=0)}B.add(W)}return{distinctCount:B.size}}function f(P,T,M,I){let B=P.values;M&&(B=B.filter(V=>V!==null)),I&&(B=B.map(V=>V===null?0:V));const U=B.slice().sort((V,z)=>V-z),W=Math.round((U.length-1)*T);return U[W]}function C(P,T,M){const I=[];for(let U=0;U<P.values.length;U++){let W=P.values[U];if(W==null){if(T)continue;M&&(W=0)}I.push(W)}I.sort((U,W)=>U-W);const B=Math.floor(I.length/2);return I.length%2===0?{median:(I[B-1]+I[B])/2}:{median:I[B]}}},46672:(ne,j,e)=>{"use strict";e.d(j,{M_:()=>g,j7:()=>x,kc:()=>m});var n=e(74848),a=e(2543),s=e.n(a),d=e(55127),o=e.n(d),l=e(96540),i=e(92745),c=e(41654),p=e(99887),h=e(86791),u=e(24619),r=e(45311);const v={recording:0,alerting:0,[u.cF.Pending]:0,[u.cF.Inactive]:0,[u.cF.Recovering]:0,paused:0,error:0,nodata:0},g=l.memo(({namespaces:y})=>{const b=(0,l.useDeferredValue)(y),D=(0,l.useMemo)(()=>E(b),[b]),f=(0,r.U)(D),C=m(D),P=!!C.length;return C.unshift((0,n.jsxs)(l.Fragment,{children:[f," ",o()("rule",f)]},"total")),(0,n.jsx)(c.B,{direction:"row",children:P&&(0,n.jsx)("div",{children:(0,n.jsx)(c.B,{gap:.5,children:C})})})});g.displayName="RuleStats";function E(y){const b={...v};return y.forEach(({groups:D})=>{D.forEach(f=>{const C=(0,a.omitBy)(f.totals,a.isUndefined);for(const P in C)b[P]+=C[P]})}),b}const x=({group:y})=>{const b=y.totals,D=y?.interval,f=m(b),C=!!f.length;return(0,n.jsxs)(c.B,{direction:"row",children:[C&&(0,n.jsx)("div",{children:(0,n.jsx)(c.B,{gap:.5,children:f})}),D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:"|"}),(0,n.jsx)(p.E,{text:D,icon:"clock-nine",color:"blue"})]})]})};function m(y){const b=[];if(y[h.$7.Alerting]&&b.push((0,n.jsx)(p.E,{color:"red",text:(0,i.t)("alerting.rule-stats.firing","{{alertingStats}} firing",{alertingStats:y[h.$7.Alerting]})},"firing")),y.error&&b.push((0,n.jsx)(p.E,{color:"red",text:(0,i.t)("alerting.rule-stats.error","{{count}} errors",{count:y.error})},"errors")),y.nodata&&b.push((0,n.jsx)(p.E,{color:"blue",text:(0,i.t)("alerting.rule-stats.nodata","{{nodataStats}} no data",{nodataStats:y.nodata})},"nodata")),y[h.$7.Pending]){const D=y[h.$7.Pending];b.push((0,n.jsx)(p.E,{color:"orange",text:(0,i.t)("alerting.rule-stats.pending","{{pendingStats}} pending",{pendingStats:D})},"pending"))}if(y[h.$7.Recovering]){const D=y[h.$7.Recovering];b.push((0,n.jsx)(p.E,{color:"orange",text:(0,i.t)("alerting.rule-stats.recovering","{{recoveringStats}} recovering",{recoveringStats:D})},"recovering"))}if(y[h.$7.Normal]&&y.paused){const D=y[h.$7.Normal],f=y.paused;b.push((0,n.jsx)(p.E,{color:"green",text:(0,i.t)("alerting.rule-stats.paused","{{normalStats}} normal ({{pausedStats}} paused)",{normalStats:D,pausedStats:f})},"paused"))}if(y[h.$7.Normal]&&!y.paused){const D=y[h.$7.Normal];b.push((0,n.jsx)(p.E,{color:"green",text:(0,i.t)("alerting.rule-stats.inactive","{{normalStats}} normal",{normalStats:D})},"inactive"))}if(y.recording){const D=y.recording;b.push((0,n.jsx)(p.E,{color:"purple",text:(0,i.t)("alerting.rule-stats.recording","{{recordingStats}} recording",{recordingStats:D})},"recording"))}return b}},46831:(ne,j,e)=>{"use strict";e.d(j,{K:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(70255),o=e(63704),l=e(80011),i=e(63142),c=e(21348);function p({width:v,showImage:g,data:E,index:x}){const m=(0,s.useId)(),y=(0,i.of)(r),b=v>600,D=E.get(x);return(0,n.jsxs)("article",{"aria-labelledby":m,className:(0,a.cx)(y.item,b&&y.itemWide),children:[g&&D.ogImage&&(0,n.jsx)("a",{tabIndex:-1,href:o.sQ.sanitizeUrl(D.link),target:"_blank",rel:"noopener noreferrer",className:(0,a.cx)(y.socialImage,b&&y.socialImageWide),"aria-hidden":!0,children:(0,n.jsx)("img",{src:D.ogImage,alt:D.title})}),(0,n.jsxs)("div",{className:y.body,children:[(0,n.jsxs)("time",{className:y.date,dateTime:(0,l.LE)(D.date,{format:"MMM DD"}),children:[(0,l.LE)(D.date,{format:"MMM DD"})," "]}),(0,n.jsx)("a",{className:y.link,href:o.sQ.sanitizeUrl(D.link),target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("h3",{className:y.title,id:m,children:D.title})}),(0,n.jsx)("div",{className:y.content,dangerouslySetInnerHTML:{__html:o.sQ.sanitize(D.content)}})]})]})}const h=({width:v,showImage:g,rootProps:E})=>{const x=(0,i.of)(r),m=v>600;return(0,n.jsxs)("div",{className:(0,a.cx)(x.item,m&&x.itemWide),...E,children:[g&&(0,n.jsx)(d.A,{containerClassName:(0,a.cx)(x.socialImage,m&&x.socialImageWide),width:m?"250px":"100%",height:m?"150px":v*.5}),(0,n.jsxs)("div",{className:x.body,children:[(0,n.jsx)(d.A,{containerClassName:x.date,width:60}),(0,n.jsx)(d.A,{containerClassName:x.title,width:250}),(0,n.jsx)(d.A,{containerClassName:x.content,width:"100%",count:6})]})]})},u=(0,c.j)(p,h),r=v=>({container:(0,a.css)({height:"100%"}),item:(0,a.css)({display:"flex",padding:v.spacing(1),position:"relative",marginBottom:v.spacing(.5),marginRight:v.spacing(1),borderBottom:`2px solid ${v.colors.border.weak}`,background:v.colors.background.primary,flexDirection:"column",flexShrink:0}),itemWide:(0,a.css)({flexDirection:"row"}),body:(0,a.css)({display:"flex",flexDirection:"column",flex:1}),socialImage:(0,a.css)({display:"flex",alignItems:"center",marginBottom:v.spacing(1),"> img":{width:"100%",borderRadius:`${v.shape.radius.default} ${v.shape.radius.default} 0 0`}}),socialImageWide:(0,a.css)({marginRight:v.spacing(2),marginBottom:0,"> img":{width:"250px",borderRadius:v.shape.radius.default}}),link:(0,a.css)({color:v.colors.text.link,display:"inline-block","&:hover":{color:v.colors.text.link,textDecoration:"underline"}}),title:(0,a.css)({fontSize:"16px",marginBottom:v.spacing(.5)}),content:(0,a.css)({p:{marginBottom:v.spacing(.5),color:v.colors.text.primary}}),date:(0,a.css)({marginBottom:v.spacing(.5),fontWeight:500,borderRadius:`0 0 0 ${v.shape.radius.default}`,color:v.colors.text.secondary})})},46907:(ne,j,e)=>{"use strict";e.d(j,{U:()=>s,q:()=>a});let n;function a(d){if(n)throw new Error("setPluginLinksHook() function should only be called once, when Grafana is starting.");n=d}function s(d){if(!n)throw new Error("setPluginLinksHook(options) can only be used after the Grafana instance has started.");return n(d)}},46933:(ne,j,e)=>{"use strict";e.d(j,{D_:()=>n,Ee:()=>s,FL:()=>a});var n=(d=>(d.Equal="Equal",d.NotEqual="NotEqual",d.EqualRegEx="EqualRegEx",d.NotEqualRegEx="NotEqualRegEx",d))(n||{});const a=d=>!d||typeof d!="object"?!1:"importFromAbstractQueries"in d,s=d=>!d||typeof d!="object"?!1:"exportToAbstractQueries"in d},47087:(ne,j,e)=>{"use strict";e.d(j,{e:()=>l});var n=e(74848),a=e(22803),s=e(96540),d=e(63142);const o=i=>({text:(0,a.css)({fontSize:i.typography.size.md,fontWeight:i.typography.fontWeightMedium,color:i.colors.text.primary,margin:0,display:"flex"})}),l=(0,s.memo)(({children:i})=>{const c=(0,d.of)(o);return(0,n.jsx)("h3",{className:c.text,children:i})});l.displayName="TimePickerTitle"},47192:(ne,j,e)=>{"use strict";e.d(j,{Zy:()=>Fe});var n=e(74848),a=e(96540),s=e(92745),d=e(52792),o=e(22787),l=e(13941),i=e(63142),c=e(65642),p=e(73427),h=e(82110),u=e(24313),r=e(23289),v=e(75515),g=e(11257),E=e(24209),x=e(4213),m=e(37386),y=e(21285),b=e(45861),D=e(2543),f=e(7389),C=e(78282),P=e(30124),T=e(99305),M=e(97583),I=e(67933);function B(Pe){return!!(Pe.libraryPanel?.name&&Pe.libraryPanel?.uid)}class U{async makeExportable(Ve){Ve.cleanUpRepeats();const me=Ve.getSaveModelCloneOld();me.id=null,Ve.processRepeats();const Se=[],Qe={},Ue={},Ie={},Re=new Map;for(const Be of me.getVariables())Ie[Be.name]=Be;const Ke=(Be,$e)=>{if(Be.datasource===void 0){Be.datasource=$e;return}let Ye=Be.datasource,de=null;const ge=Ye?.uid,pe=ge&&T.SY.exec(ge);if(pe){const De=pe[1]||pe[2]||pe[4];de=Ie[De],de&&de.current&&(Ye=de.current.value)}return(0,C.l)().get(Ye).then(De=>{if(De.meta?.builtIn||(Qe["datasource"+De.meta?.id]={type:"datasource",id:De.meta.id,name:De.meta.name,version:De.meta.info.version||"1.0.0"},de))return;const Me=Be.libraryPanel,be=Me?"-for-library-panel":"";let Oe="DS_"+De.name.replace(" ","_").toUpperCase()+be.toUpperCase();if(Ue[Oe]={name:Oe,label:De.name,description:"",type:"datasource",pluginId:De.meta?.id,pluginName:De.meta?.name,usage:Ue[Oe]?.usage},Me){const Ne=Ue[Oe]?.usage?.libraryPanels||[];Ne.push({name:Me.name,uid:Me.uid}),Ue[Oe].usage={libraryPanels:Ne}}Be.datasource={type:De.meta.id,uid:"${"+Oe+"}"}})},Le=async Be=>{if(Be.type!=="row"){if(await Ke(Be),Be.targets)for(const Ye of Be.targets)await Ke(Ye,Be.datasource);const $e=c.Ay.panels[Be.type];$e&&(Qe["panel"+$e.id]={type:"panel",id:$e.id,name:$e.name,version:$e.info.version})}},ze=async Be=>{if((0,v.X)(Be)){const{name:$e,uid:Ye}=Be.libraryPanel;let de=Be.libraryPanel.model;de||(de=(await(0,P.Yr)(Ye,!0)).model),await Ke(de);const{gridPos:ge,id:pe,...De}=de;Re.has(Ye)||Re.set(Ye,{name:$e,uid:Ye,kind:M.i.Panel,model:De})}};try{for(const Ye of me.panels)if(await Le(Ye),Ye.collapsed!==void 0&&Ye.collapsed===!0&&Ye.panels)for(const de of Ye.panels)await Le(de);for(const Ye of me.getVariables())Ye.type==="query"?(await Ke(Ye),Ye.options=[],Ye.current={},Ye.refresh=Ye.refresh!==f.CO.never?Ye.refresh:f.CO.onDashboardLoad):Ye.type==="datasource"&&(Ye.current={});for(const Ye of me.annotations.list)await Ke(Ye);Qe.grafana={type:"grafana",id:"grafana",name:"Grafana",version:c.Ay.buildInfo.version};for(const Ye of me.panels)if(await ze(Ye),Ye.collapsed!==void 0&&Ye.collapsed===!0&&Ye.panels)for(const de of Ye.panels)await ze(de);(0,D.each)(Ue,Ye=>{Se.push(Ye)});for(const Ye of me.getVariables())if((0,I.VO)(Ye)){const de="VAR_"+Ye.name.replace(" ","_").toUpperCase();Se.push({name:de,type:"constant",label:Ye.label||Ye.name,value:Ye.query,description:""}),Ye.query="${"+de+"}",Ye.current={value:Ye.query,text:Ye.query,selected:!1},Ye.options=[Ye.current]}const Be=[...Re.entries()].reduce((Ye,[de,ge])=>(Ye[de]=ge,Ye),{}),$e=(0,D.defaults)({__inputs:Se,__elements:Be,__requires:(0,D.sortBy)(Qe,["id"])},me);for(let Ye=0;Ye<$e.panels.length;Ye++){const de=$e.panels[Ye];B(de)&&($e.panels[Ye]={gridPos:de.gridPos,id:de.id,libraryPanel:{uid:de.libraryPanel.uid,name:de.libraryPanel.name}})}return $e}catch(Be){return console.error("Export failed:",Be),{error:Be}}}}var W=e(26604),V=e(87745),z=e(70713),R=e(50992),O=e(47931);function N({json:Pe,onDismiss:Ve}){const me=(0,a.useCallback)(()=>Pe,[Pe]);return(0,n.jsxs)(o.a,{title:(0,s.t)("dashboard.view-json-modal.title-json","JSON"),onDismiss:Ve,onClickBackdrop:Ve,isOpen:!0,children:[(0,n.jsx)(z.Ay,{disableHeight:!0,children:({width:Se})=>(0,n.jsx)(R.B,{value:Pe,language:"json",showMiniMap:!1,height:"500px",width:Se})}),(0,n.jsx)(o.a.ButtonRow,{children:(0,n.jsx)(O.b,{icon:"copy",getText:me,onClipboardCopy:()=>{r.c.exportCopyJsonClicked()},children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.view-json.copy-button",children:"Copy to Clipboard"})})})]})}var F=e(58662);class G extends a.PureComponent{constructor(Ve){super(Ve),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onSaveAsFile=()=>{const{dashboard:me}=this.props,{shareExternally:Se}=this.state;r.c.exportSaveJsonClicked({externally:Se,shareResource:(0,F.hD)(this.props.panel)}),Se?(0,W.E)(me).then(Qe=>{this.openSaveAsDialog(Qe)}):this.openSaveAsDialog(me.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:me}=this.props,{shareExternally:Se}=this.state;r.c.exportViewJsonClicked({externally:Se,shareResource:(0,F.hD)(this.props.panel)}),Se?this.exporter.makeExportable(me).then(Qe=>{this.openJsonModal(Qe)}):this.openJsonModal(me.getSaveModelClone())},this.openSaveAsDialog=me=>{const Se=JSON.stringify(me,null,2),Qe=new Blob([Se],{type:"application/json;charset=utf-8"}),Ue=new Date().getTime();(0,x.saveAs)(Qe,`${me.title}-${Ue}.json`)},this.openJsonModal=me=>{p.lE.publish(new V.S8({props:{json:JSON.stringify(me,null,2)},component:N})),this.props.onDismiss?.()},this.state={shareExternally:!1},this.exporter=new U}render(){const{onDismiss:Ve}=this.props,{shareExternally:me}=this.state,Se=(0,s.t)("share-modal.export.share-externally-label","Export for sharing externally");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.export.info-text",children:"Export this dashboard."})}),(0,n.jsx)(m.D,{label:Se,children:(0,n.jsx)(y.d,{id:"share-externally-toggle",value:me,onChange:this.onShareExternallyChange})}),(0,n.jsxs)(o.a.ButtonRow,{children:[(0,n.jsx)(b.$n,{variant:"secondary",onClick:Ve,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.export.cancel-button",children:"Cancel"})}),(0,n.jsx)(b.$n,{variant:"secondary",onClick:this.onViewJson,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.export.view-button",children:"View JSON"})}),(0,n.jsx)(b.$n,{variant:"primary",onClick:this.onSaveAsFile,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.export.save-button",children:"Save to file"})})]})]})}}var H=e(65241),K=e(51898),w=e(16780),Q=e(63527),k=e(89640),te=e(34999),q=e(29216);class se extends a.PureComponent{constructor(Ve){super(Ve),this.buildUrl=async()=>{const{panel:me,dashboard:Se}=this.props,{useCurrentTimeRange:Qe,useShortUrl:Ue,selectedTheme:Ie}=this.state,Re=await(0,F.Xe)(Qe,Ie,me,Ue),Ke=(0,F.Lb)(Qe,Se.uid,Ie,me);this.setState({shareUrl:Re,imageUrl:Ke})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=me=>{this.setState({selectedTheme:me})},this.getShareUrl=()=>this.state.shareUrl,this.onCopy=()=>{r.c.shareLinkCopied({currentTimeRange:this.state.useCurrentTimeRange,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl,shareResource:(0,F.hD)(this.props.panel)})},this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){this.buildUrl()}componentDidUpdate(Ve,me){const{useCurrentTimeRange:Se,useShortUrl:Qe,selectedTheme:Ue}=this.state;(me.useCurrentTimeRange!==Se||me.selectedTheme!==Ue||me.useShortUrl!==Qe)&&this.buildUrl()}render(){const{panel:Ve,dashboard:me}=this.props,Se=me?me.time.to==="now":!1,{useCurrentTimeRange:Qe,useShortUrl:Ue,selectedTheme:Ie,shareUrl:Re,imageUrl:Ke}=this.state,Le=K.Tp.pages.SharePanelModal,ze=!!me.id,Be=(0,s.t)("share-modal.link.time-range-label","Lock time range"),$e=(0,s.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Ye=(0,s.t)("share-modal.link.shorten-url","Shorten URL"),de=(0,s.t)("share-modal.link.link-url","Link URL");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.link.info-text",children:"Create a direct link to this dashboard or panel, customized with the options below."})}),(0,n.jsxs)(w.n,{children:[(0,n.jsx)(m.D,{label:Be,description:Se?$e:"",children:(0,n.jsx)(y.d,{id:"share-current-time-range",value:Qe,onChange:this.onUseCurrentTimeRangeChange})}),(0,n.jsx)(q.w,{selectedTheme:Ie,onChange:this.onThemeChange}),(0,n.jsx)(m.D,{label:Ye,children:(0,n.jsx)(y.d,{id:"share-shorten-url",value:Ue,onChange:this.onUrlShorten})}),(0,n.jsx)(m.D,{label:de,children:(0,n.jsx)(Q.p,{id:"link-url-input",value:Re,readOnly:!0,addonAfter:(0,n.jsx)(O.b,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.link.copy-link-button",children:"Copy"})})})})]}),Ve&&c.Ay.rendererAvailable&&(0,n.jsxs)(n.Fragment,{children:[ze&&(0,n.jsx)(k.Y,{href:Ke,external:!0,icon:"camera","aria-label":Le.linkToRenderedImage,children:(0,s.t)("share-modal.link.rendered-image","Direct link rendered image")}),!ze&&(0,n.jsx)(te.F,{severity:"info",title:(0,s.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.link.save-dashboard",children:"To render a panel image, you must save the dashboard first."})})]}),Ve&&!c.Ay.rendererAvailable&&(0,n.jsx)(te.F,{severity:"info",title:(0,s.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0,children:(0,n.jsxs)(s.x6,{i18nKey:"share-modal.link.render-instructions",children:["To render an image, you must install the"," ",(0,n.jsx)(k.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0,children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})})]})}}var re=e(3594),Y=e(68143),X=e(18857),J=e(41654),_=e(68079),ee=e(75421),ae=e(8735);const le=K.Tp.pages.ShareDashboardModal.SnapshotScene;class L extends a.PureComponent{constructor(Ve){super(Ve),this.createSnapshot=me=>()=>{const{timeoutSeconds:Se}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,me)},Se*1e3)},this.saveSnapshot=async(me,Se)=>{const{snapshotExpires:Qe,timeoutSeconds:Ue}=this.state,Ie=this.dashboard.getSaveModelCloneOld();this.scrubDashboard(Ie);const Re={dashboard:Ie,name:Ie.title,expires:Qe,external:Se};try{const Ke=await(0,ae.s)().create(Re);this.setState({deleteUrl:Ke.deleteUrl,snapshotUrl:Ke.url,step:2})}finally{Se?r.c.publishSnapshotClicked({expires:Qe,timeout:Ue,shareResource:(0,F.hD)(this.props.panel)}):r.c.publishSnapshotLocalClicked({expires:Qe,timeout:Ue,shareResource:(0,F.hD)(this.props.panel)}),this.setState({isLoading:!1})}},this.scrubDashboard=me=>{const{panel:Se}=this.props,{snapshotName:Qe}=this.state;me.title=Qe,me.time=(0,ee.jG)().timeRange(),me.links=[],me.panels.forEach(Ie=>{Ie.targets=[],Ie.links=[],Ie.datasource=null});const Ue=me.annotations.list.filter(Ie=>Ie.enable);if(me.annotations.list=Ue.map(Ie=>({name:Ie.name,enable:Ie.enable,iconColor:Ie.iconColor,snapshotData:Ie.snapshotData,type:Ie.type,builtIn:Ie.builtIn,hide:Ie.hide})),me.getVariables().forEach(Ie=>{"query"in Ie&&(Ie.query=""),"options"in Ie&&(Ie.options=Ie.current&&!(0,re.R)(Ie.current)?[Ie.current]:[]),"refresh"in Ie&&(Ie.refresh=f.CO.never)}),Se){const Ie=Se.getSaveModel();Ie.gridPos.w=24,Ie.gridPos.x=0,Ie.gridPos.y=0,Ie.gridPos.h=20,me.panels=[Ie]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(Ie=>{delete Ie.snapshotData}),this.dashboard.annotations.list.forEach(Ie=>{delete Ie.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:me}=this.state;await(0,Y.AI)().get(me),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=me=>{this.setState({snapshotName:me.target.value})},this.onTimeoutChange=me=>{this.setState({timeoutSeconds:Number(me.target.value)})},this.onExpireChange=me=>{this.setState({selectedExpireOption:me,snapshotExpires:me.value})},this.dashboard=Ve.dashboard,this.expireOptions=[{label:(0,s.t)("share-modal.snapshot.expire-hour","1 Hour"),value:3600},{label:(0,s.t)("share-modal.snapshot.expire-day","1 Day"),value:3600*24},{label:(0,s.t)("share-modal.snapshot.expire-week","1 Week"),value:3600*24*7},{label:(0,s.t)("share-modal.snapshot.expire-never","Never"),value:0}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[2],snapshotExpires:this.expireOptions[2].value,snapshotName:Ve.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const Ve=await(0,ae.s)().getSharingOptions();this.setState({sharingButtonText:Ve.externalSnapshotName,externalEnabled:Ve.externalEnabled})}renderStep1(){const{onDismiss:Ve}=this.props,{snapshotName:me,selectedExpireOption:Se,timeoutSeconds:Qe,isLoading:Ue,sharingButtonText:Ie,externalEnabled:Re}=this.state,Ke=(0,s.t)("share-modal.snapshot.name","Snapshot name"),Le=(0,s.t)("share-modal.snapshot.expire","Expire"),ze=(0,s.t)("share-modal.snapshot.timeout","Timeout (seconds)"),Be=(0,s.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.info-text-1",children:"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard."})}),(0,n.jsx)("p",{children:(0,n.jsxs)(s.x6,{i18nKey:"share-modal.snapshot.info-text-2",children:["Keep in mind, your snapshot ",(0,n.jsx)("em",{children:"can be viewed by anyone"})," that has the link and can access the URL. Share wisely."]})})]}),(0,n.jsx)(m.D,{label:Ke,children:(0,n.jsx)(Q.p,{id:"snapshot-name-input",width:30,value:me,onChange:this.onSnapshotNameChange})}),(0,n.jsx)(m.D,{label:Le,children:(0,n.jsx)(X.l6,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:Se,onChange:this.onExpireChange})}),(0,n.jsx)(m.D,{label:ze,description:Be,children:(0,n.jsx)(Q.p,{id:"timeout-input",type:"number",width:21,value:Qe,onChange:this.onTimeoutChange})}),(0,n.jsxs)(o.a.ButtonRow,{children:[(0,n.jsx)(b.$n,{variant:"secondary",onClick:Ve,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.cancel-button",children:"Cancel"})}),Re&&(0,n.jsx)(b.$n,{variant:"secondary",disabled:Ue,onClick:this.createSnapshot(!0),children:Ie}),(0,n.jsx)(b.$n,{variant:"primary",disabled:Ue,onClick:this.createSnapshot(),"data-testid":le.PublishSnapshot,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.local-button",children:"Publish Snapshot"})})]})]})}renderStep2(){const{snapshotUrl:Ve}=this.state;return(0,n.jsxs)(J.B,{direction:"column",gap:0,children:[(0,n.jsx)(m.D,{label:(0,s.t)("share-modal.snapshot.url-label","Snapshot URL"),children:(0,n.jsx)(Q.p,{id:"snapshot-url-input",value:Ve,"data-testid":le.CopyUrlInput,readOnly:!0,addonAfter:(0,n.jsx)(O.b,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl,"data-testid":le.CopyUrlButton,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.copy-link-button",children:"Copy"})})})}),(0,n.jsxs)("div",{style:{alignSelf:"flex-end",padding:"5px"},children:[(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.mistake-message",children:"Did you make a mistake? "}),"\xA0",(0,n.jsx)(b.z9,{fill:"text",target:"_blank",onClick:this.deleteSnapshot,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.delete-button",children:"Delete snapshot."})})]})]})}renderStep3(){return(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.deleted-message",children:"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."})})}render(){const{isLoading:Ve,step:me}=this.state;return(0,n.jsxs)(n.Fragment,{children:[me===1&&this.renderStep1(),me===2&&this.renderStep2(),me===3&&this.renderStep3(),Ve&&(0,n.jsx)(_.y,{inline:!0})]})}}const ie=[],oe=[];function ue(Pe){ie.push(Pe)}function ye(Pe){oe.push(Pe)}function fe(Pe,Ve,me){const Qe=[{label:(0,s.t)("share-modal.tab-title.link","Link"),value:F.wr.link,component:se}];if(p.TP.isSignedIn&&c.$W.snapshotEnabled&&p.TP.hasPermission(g.w.SnapshotsCreate)){const Ie=(0,s.t)("share-modal.tab-title.snapshot","Snapshot");Qe.push({label:Ie,value:F.wr.snapshot,component:L})}if(Ve){const Ie=(0,s.t)("share-modal.tab-title.embed","Embed");if(Qe.push({label:Ie,value:F.wr.embed,component:Ee}),!(0,v.X)(Ve)){const Re=(0,s.t)("share-modal.tab-title.library-panel","Library panel");Qe.push({label:Re,value:F.wr.libraryPanel,component:H.j})}Qe.push(...oe)}else{const Ie=(0,s.t)("share-modal.tab-title.export","Export");Qe.push({label:Ie,value:F.wr.export,component:G}),Qe.push(...ie),(0,u.iR)()&&Qe.push({label:(0,s.t)("share-modal.tab-title.public-dashboard-title","Public dashboard"),value:F.wr.publicDashboard,component:h.b})}const Ue=Qe.find(Ie=>Ie.value===me);return{tabs:Qe,activeTab:Ue?.value??Qe[0].value}}function Ee(Pe){return(0,n.jsx)(E.D,{dashboard:Pe.dashboard,panelId:String(Pe.panel?.id),timeFrom:Pe.panel?.timeFrom,onDismiss:Pe.onDismiss})}function Ae(Pe){const{tabs:Ve,activeTab:me}=fe(Pe.dashboard.canEditDashboard(),Pe.panel,Pe.activeTab);return{tabs:Ve,activeTab:me}}class Ge extends a.Component{constructor(Ve){super(Ve),this.onSelectTab=me=>{this.setState(Se=>({...Se,activeTab:me.value})),r.c.sharingCategoryClicked({item:me.value,shareResource:(0,F.hD)(this.props.panel)})},this.state=Ae(Ve)}getActiveTab(){const{tabs:Ve,activeTab:me}=this.state;return Ve.find(Se=>Se.value===me)}renderTitle(Ve){const{activeTab:me}=this.state,Se=this.props.dashboard.canEditDashboard(),Qe=fe(Se,this.props.panel,this.state.activeTab).tabs;return(0,n.jsx)(d.J,{title:Ve,icon:"share-alt",tabs:Qe,activeTab:me,onChangeTab:this.onSelectTab})}render(){const{dashboard:Ve,panel:me}=this.props,Qe=this.getActiveTab().component,Ue=me?(0,s.t)("share-modal.panel.title","Share Panel"):(0,s.t)("share-modal.dashboard.title","Share");return(0,n.jsx)(o.a,{ariaLabel:Ue,isOpen:!0,title:this.renderTitle(Ue),onDismiss:this.props.onDismiss,children:(0,n.jsx)(l.J,{children:(0,n.jsx)(Qe,{dashboard:Ve,panel:me,onDismiss:this.props.onDismiss})})})}}const Fe=(0,i.cV)(Ge)},47215:(ne,j,e)=>{"use strict";e.d(j,{f:()=>a});var n=e(91984);function a(s,d){const o=n.m.endpoints.getAlertmanagerConfiguration.useQuery(s??"",{refetchOnMountOrArgChange:!0,...d,skip:!s});return{...o,error:o.error}}},47276:(ne,j,e)=>{"use strict";e.d(j,{e:()=>D});var n=e(2543),a=e(36613),s=e(22592),d=e(62717),o=e(739),l=e(36192),i=e(23414),c=e(42073),p=e(64394),h=e(6773),u=e(62748),r=e(66650);class v extends u.R{getConfig(){const{facets:C,drawStyle:P,pathBuilder:T,pointsBuilder:M,pointsFilter:I,lineInterpolation:B,lineWidth:U,lineStyle:W,barAlignment:V,barWidthFactor:z,barMaxWidth:R,showPoints:O,pointSize:N,scaleKey:F,pxAlign:G,spanNulls:H,show:K=!0}=this.props;let w={},Q=this.getLineColor();w.stroke=Q,w.width=U,W&&W.fill!=="solid"&&(W.fill==="dot"&&(w.cap="round"),w.dash=W.dash??[10,10]),T!=null?w.paths=T:P===o.GR.Points?w.paths=()=>null:P!=null&&(w.paths=(q,se,re,Y)=>E(P,B,V,z,R)(q,se,re,Y));const k=typeof Q=="string"?Q:(q,se)=>q.series[se]._stroke,te={points:{stroke:k,fill:k,size:!N||N<U?void 0:N,filter:I}};return M!=null?te.points.show=M:P===o.GR.Points?te.points.show=!0:O===o.yL.Auto?P===o.GR.Bars&&(te.points.show=!1):O===o.yL.Never?te.points.show=!1:O===o.yL.Always&&(te.points.show=!0),{scale:F,facets:C,spanGaps:typeof H=="number"?!1:H,value:()=>"",pxAlign:G,show:K,fill:this.getFill(),...w,...te}}getLineColor(){const{lineColor:C,gradientMode:P,colorMode:T,thresholds:M,theme:I,hardMin:B,hardMax:U,softMin:W,softMax:V,dynamicSeriesColor:z}=this.props;return P===o.on.None&&z?(R,O)=>z(O)??C??p.F:P===o.on.Scheme&&T?.id!==p.Y.Fixed?(0,r.pl)(1,I,T,M,B,U,W,V):P===o.on.Hue?(0,r.B5)(C??p.F,1,I):C??p.F}getFill(){const{lineColor:C,fillColor:P,gradientMode:T,fillOpacity:M,colorMode:I,thresholds:B,theme:U,hardMin:W,hardMax:V,softMin:z,softMax:R,dynamicSeriesColor:O}=this.props;if(P)return P;const N=T??o.on.None,F=(M??0)/100;if(N===o.on.None&&O&&F>0)return(G,H)=>{let K=G.series[H]._stroke;return h.MV.alpha(K??"",F)};switch(N){case o.on.Opacity:return(0,r.WO)(P??C,F);case o.on.Hue:return(0,r.B5)(P??C,F,U);case o.on.Scheme:if(I?.id!==p.Y.Fixed)return(0,r.pl)(F,U,I,B,W,V,z,R);default:if(F>0)return h.MV.alpha(C??"",F)}}}let g;function E(f,C,P=o.Nj.Center,T=.6,M=200){const I=a.A.paths;if(g||(g={linear:I.linear(),smooth:I.spline(),stepBefore:I.stepped({align:-1}),stepAfter:I.stepped({align:1})}),f===o.GR.Bars){let B=`bars|${P}|${T}|${M}`;return g[B]||(g[B]=I.bars({size:[T,M],align:P})),g[B]}else if(f===o.GR.Line){if(C===o.dx.StepBefore)return g.stepBefore;if(C===o.dx.StepAfter)return g.stepAfter;if(C===o.dx.Smooth)return g.smooth}return g.linear}var x=e(84140),m=e(33553);function y(f){const C=f.config.mode===o.Ly.Dashed||f.config.mode===o.Ly.DashedAndArea?[10,10]:[];function P(O,N,F,G){let H=O.ctx,K=0;for(let w=0;w<F.length;w++)if(F[w].color==="transparent"){K=w;break}H.lineWidth=2,H.setLineDash(C);for(let w=1;w<F.length;w++){const Q=F[w];let k;K>=w&&w>0?k=(0,x.A)(G.visualization.getColorByName(F[w-1].color)):k=(0,x.A)(G.visualization.getColorByName(Q.color)),k.getAlpha()===1&&k.setAlpha(.7);const te=O.scales.x.ori===o.Lt.Horizontal,q=O.valToPos(Q.value,N,!0);let se=Math.round(te?O.bbox.left:q),re=Math.round(te?q:O.bbox.top),Y=Math.round(te?O.bbox.left+O.bbox.width:q),X=Math.round(te?q:O.bbox.top+O.bbox.height);H.beginPath(),H.moveTo(se,re),H.lineTo(Y,X),H.strokeStyle=k.toString(),H.stroke()}}function T(O,N,F,G){let H=O.ctx,K=(0,r.Z8)(O,N,F.map(w=>{let Q=(0,x.A)(G.visualization.getColorByName(w.color));return Q.getAlpha()===1&&Q.setAlpha(.15),[w.value,Q.toString()]}),!0);H.fillStyle=K,H.fillRect(O.bbox.left,O.bbox.top,O.bbox.width,O.bbox.height)}const{scaleKey:M,thresholds:I,theme:B,config:U,hardMin:W,hardMax:V,softMin:z,softMax:R}=f;return O=>{const N=O.ctx,{min:F,max:G}=O.scales.x,{min:H,max:K}=O.scales[M];if(F==null||G==null||H==null||K==null)return;let{steps:w,mode:Q}=I;if(Q===m.O.Percentage){let[k,te]=(0,r.EJ)(O,M,W,V,z,R),q=te-k;w=w.map(se=>({...se,value:k+q*(se.value/100)}))}switch(N.save(),U.mode){case o.Ly.Line:case o.Ly.Dashed:P(O,M,w,B);break;case o.Ly.Area:T(O,M,w,B);break;case o.Ly.LineAndArea:case o.Ly.DashedAndArea:T(O,M,w,B),P(O,M,w,B)}N.restore()}}const b={drag:{setScale:!1},points:{size:(f,C)=>f.series[C].points.size*2,width:(f,C,P)=>P/4},focus:{prox:30}};class D{constructor(C=s.lE){this.uid=Math.random().toString(36).slice(2),this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.mode=1,this.frames=void 0,this.thresholds={},this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=P=>{let T=new Date(P);return this.tz?a.A.tzDate(T,this.tz):T},this.tz=(0,d.QZ)(C,Date.now())?.ianaName}addHook(C,P){(0,l.uY)("UPlotConfigBuilder",!1,"addHook",C),this.hooks[C]||(this.hooks[C]=[]),this.hooks[C].push(P)}addThresholds(C){this.thresholds[C.scaleKey]||(this.thresholds[C.scaleKey]=C,this.addHook("drawClear",y(C)))}addAxis(C){C.placement=C.placement??o.vM.Auto,C.grid=C.grid??{};let P=C.scaleKey;if(P==="x"&&(P+=C.timeZone??""),this.axes[P]){this.axes[P].merge(C);return}C.placement===o.vM.Auto&&(C.placement=this.hasLeftAxis?o.vM.Right:o.vM.Left),C.placement===o.vM.Left&&(this.hasLeftAxis=!0),C.placement===o.vM.Hidden&&(C.grid.show=!1,C.size=0),this.axes[P]=new i.zH(C)}getAxisPlacement(C){return this.axes[C]?.props.placement??o.vM.Left}setCursor(C){this.cursor=(0,n.merge)({},this.cursor,C)}setMode(C){this.mode=C}setSelect(C){this.select=C}addSeries(C){this.series.push(new v(C))}getSeries(){return this.series}addScale(C){const P=this.scales.find(T=>T.props.scaleKey===C.scaleKey);if(P){P.merge(C);return}this.scales.push(new c.G(C))}addBand(C){this.bands.push(C)}setStackingGroups(C){this.stackingGroups=C}getStackingGroups(){return this.stackingGroups}setPrepData(C){this.prepData=P=>(this.frames=P,C(P,this.getStackingGroups()))}setPadding(C){this.padding=C}getConfig(){if(this.cachedConfig)return this.cachedConfig;const C={...l.NN,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};C.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(T=>T.getConfig()),C.series=[...C.series,...this.series.map(T=>T.getConfig())],C.scales=this.scales.reduce((T,M)=>({...T,...M.getConfig()}),{}),C.hooks=this.hooks,C.select=this.select;const P=(T="")=>(M,I)=>{let B=M.series[I].points._stroke;if(typeof B!="string"){let U=this.frames[0].fields[I];B=U.display(U.values[M.cursor.idxs[I]]).color}return B+T};return C.cursor=(0,n.merge)({},b,{points:{stroke:P("80"),fill:P()}},this.cursor),C.tzDate=this.tzDate,Array.isArray(this.padding)&&(C.padding=this.padding),this.stackingGroups.forEach(T=>{(0,l.Tz)(T).forEach(M=>{this.addBand(M)})}),this.bands.length&&(C.bands=this.bands),this.cachedConfig=C,C}ensureNonOverlappingAxes(C){const P=C.find(I=>I.props.scaleKey==="x"),T=C.filter(I=>I.props.grid?.show===void 0),M=T.findIndex(I=>I.props.placement===o.vM.Left||I.props.placement===o.vM.Right||I.props.placement===o.vM.Bottom&&I!==P);for(let I=0;I<T.length;I++)T[I]===P||I===M?T[I].props.grid.show=!0:T[I].props.grid.show=!1;return C}}},47327:(ne,j,e)=>{"use strict";e.d(j,{G:()=>h});var n=e(74848),a=e(22803),s=e(63142);const d=28,o=2.4,l=500,i=4e3,c=300,p=100/d*100;function h({width:r,delay:v=c,ariaLabel:g="Loading bar"}){const E=Math.min(Math.max(Math.round(r*o),l),i),x=(0,s.of)(u,v,E),m={overflow:"hidden"};return(0,n.jsx)("div",{style:m,children:(0,n.jsx)("div",{"aria-label":g,role:"status",className:x.bar})})}const u=(r,v,g)=>{const E=(0,a.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${p}%)`}});return{bar:(0,a.css)({width:d+"%",height:1,background:`linear-gradient(90deg, transparent 0%, ${r.colors.primary.main} 80.75%, transparent 100%)`,transform:"translateX(-100%)",willChange:"transform",[r.transitions.handleMotion("no-preference")]:{animationName:E,animationDelay:`${v}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",animationDuration:`${g}ms`},[r.transitions.handleMotion("reduce")]:{animationName:E,animationDelay:`${v}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",animationDuration:`${4*g}ms`}})}}},47350:(ne,j,e)=>{"use strict";e.d(j,{A:()=>F});var n=e(74848),a=e(8642),s=e(96540),d=e(42941),o=e(69862),l=e(57866),i=e(36638),c=e(2197),p=e(51898),h=e(92745),u=e(27489),r=e(2863),v=e(71599),g=e(43260),E=e(85348),x=e(65642),m=e(85622),y=e(22803),b=e(63142),D=e(8207),f=e(50275),C=e(30703);const P=({input:G,output:H,debugMode:K,index:w,uiConfig:Q,configs:k,onChange:te,toggleShowDebug:q})=>{const se=(0,b.of)(T),re=(0,s.useMemo)(()=>k[w],[k,w]),Y=(0,s.useMemo)(()=>(0,s.createElement)(Q.editor,{options:{...Q.transformation.defaultOptions,...re.transformation.options},input:G,onChange:X=>{te(w,{...re.transformation,options:X})}}),[Q.editor,Q.transformation.defaultOptions,re.transformation,G,te,w]);return(0,n.jsxs)("div",{"data-testid":p.Tp.components.TransformTab.transformationEditor(Q.name),children:[Y,K&&(0,n.jsx)(D._,{title:(0,h.t)("dashboard.transformation-editor.title-debug-transformation","Debug transformation"),subtitle:Q.name,onClose:q,children:(0,n.jsxs)("div",{className:se.debugWrapper,"data-testid":p.Tp.components.TransformTab.transformationEditorDebugger(Q.name),children:[(0,n.jsxs)("div",{className:se.debug,children:[(0,n.jsx)("div",{className:se.debugTitle,children:(0,n.jsx)(h.x6,{i18nKey:"dashboard.transformation-editor.input-data",children:"Input data"})}),(0,n.jsx)("div",{className:se.debugJson,children:(0,n.jsx)(f.B,{json:G})})]}),(0,n.jsx)("div",{className:se.debugSeparator,children:(0,n.jsx)(C.I,{name:"arrow-right"})}),(0,n.jsxs)("div",{className:se.debug,children:[(0,n.jsx)("div",{className:se.debugTitle,children:(0,n.jsx)(h.x6,{i18nKey:"dashboard.transformation-editor.output-data",children:"Output data"})}),(0,n.jsx)("div",{className:se.debugJson,children:H&&(0,n.jsx)(f.B,{json:H})})]})]})})]})},T=G=>({debugWrapper:(0,y.css)({display:"flex",flexDirection:"row"}),debugSeparator:(0,y.css)({width:"48px",minHeight:"300px",display:"flex",alignItems:"center",alignSelf:"stretch",justifyContent:"center",margin:`0 ${G.spacing(.5)}`,color:G.colors.primary.text}),debugTitle:(0,y.css)({padding:`${G.spacing(1)} ${G.spacing(.25)}`,fontFamily:G.typography.fontFamilyMonospace,fontSize:G.typography.bodySmall.fontSize,color:G.colors.text.primary,borderBottom:`1px solid ${G.colors.border.weak}`,flexGrow:0,flexShrink:1}),debug:(0,y.css)({marginTop:G.spacing(1),padding:`0 ${G.spacing(1,1,1)}`,border:`1px solid ${G.colors.border.weak}`,background:`${G.isLight?G.v1.palette.white:G.v1.palette.gray05}`,borderRadius:G.shape.radius.default,width:"100%",minHeight:"300px",display:"flex",flexDirection:"column",alignSelf:"stretch"}),debugJson:(0,y.css)({flexGrow:1,height:"100%",overflow:"hidden",padding:G.spacing(.5)})});var M=e(68805),I=e(88366);const B=({isOpen:G,onCloseClick:H,transformer:K})=>{const{transformation:{name:w},help:Q}=K,k=Q||I.M,te=(0,n.jsx)(D._,{title:w,subtitle:"Transformation help",onClose:()=>H(!1),children:(0,n.jsx)(M.j,{markdown:k,styleOverrides:{borderTop:"2px solid"}})});return G?te:null};var U=e(739),W=e(37386),V=e(18857),z=e(42240);const R=({index:G,annotations:H,config:K,onChange:w,data:Q})=>{const k=(0,b.of)(O),te=(0,s.useMemo)(()=>({context:{data:Q},showTopic:!0,showFilter:K.topic!==U.QR.Annotations,source:[{value:U.QR.Series,label:"Query and Transformation results"},{value:U.QR.Annotations,label:"Annotation data"}]}),[Q,H?.length,K.topic]);return(0,n.jsx)("div",{className:k.wrapper,children:(0,n.jsx)(W.D,{label:(0,h.t)("dashboard.transformation-filter.label-apply-transformation-to","Apply transformation to"),children:(0,n.jsxs)(n.Fragment,{children:[te.showTopic&&(0,n.jsx)(V.l6,{isClearable:!0,options:te.source,value:te.source.find(q=>q.value===K.topic),placeholder:te.source[0].label,className:k.padded,onChange:q=>{w(G,{...K,topic:q?.value})}}),te.showFilter&&(0,n.jsx)(z.M,{value:K.filter,context:te.context,onChange:q=>w(G,{...K,filter:q})})]})})})},O=G=>{const H=G.shape.radius.default;return{wrapper:(0,y.css)({padding:G.spacing(2),border:`2px solid ${G.colors.background.secondary}`,borderTop:"none",borderRadius:`0 0 ${H} ${H}`,position:"relative",top:"-4px"}),padded:(0,y.css)({marginBottom:G.spacing(1)})}},N=({onRemove:G,index:H,id:K,data:w,configs:Q,uiConfig:k,onChange:te})=>{const[q,se]=(0,d.A)(!1),[re,Y]=(0,d.A)(!1),[X,J]=(0,d.A)(!1),_=!!Q[H].transformation.disabled,ee=Q[H].transformation.topic,ae=Q[H].transformation.filter!=null||ee!=null,le=ae||w.series.length>0||(w.annotations?.length??0)>0,[L,ie]=(0,s.useState)([]),[oe,ue]=(0,s.useState)([]),[ye,fe]=(0,s.useState)([]),Ee=(0,s.useCallback)(Pe=>{const Ve=Q[Pe].transformation;te(Pe,{...Ve,disabled:Ve.disabled?void 0:!0})},[te,Q]),Ae=(0,s.useCallback)(()=>{let Pe={...Q[H].transformation};Pe.filter?delete Pe.filter:Pe.filter={id:l.jR.byRefId,options:""},te(H,Pe)},[te,H,Q]),Ge=(0,s.useCallback)((Pe,Ve,me)=>Se=>{let Qe="panel_editor_tabs_transformations_toggle";x.Ay.featureToggles.transformationsRedesign&&(Qe="transformations_redesign_"+Qe),(0,u.rR)(Qe,{action:me?"off":"on",toggleId:Ve,transformationId:Q[H].transformation.id}),Pe(Se)},[Q,H]);(0,s.useEffect)(()=>{const Pe=Q[H].transformation,Ve=Pe.filter?.options?(0,i.Dq)(Pe.filter):void 0,me=H-1;let Se=[],Qe=[];me>=0&&(Se=Q.slice(0,me).map(Be=>Be.transformation),Qe=Q.slice(me,H).map(Be=>Be.transformation));const Ue=Q.slice(0,H).map(Be=>Be.transformation),Ie=Q.slice(H,H+1).map(Be=>Be.transformation),Re={interpolate:Be=>(0,r.w)().replace(Be)},Ke=(0,c.m)(Ue,w.series,Re).subscribe(Be=>{Ve&&(Be=Be.filter($e=>Ve($e))),ie(Be)}),Le=(0,c.m)(Ue,w.series,Re).pipe((0,o.Z)(Be=>(0,c.m)(Ie,Be,Re))).subscribe(ue),ze=(0,c.m)(Se,w.series,Re).pipe((0,o.Z)(Be=>(0,c.m)(Qe,Be,Re))).subscribe(Be=>{let $e=[...Be];w.request?.targets.forEach(Ye=>{$e.some(ge=>ge.refId===Ye.refId)||$e.push({refId:Ye.refId,fields:[],length:0})}),fe($e)});return function(){Ke.unsubscribe(),Le.unsubscribe(),ze.unsubscribe()}},[H,w,Q]);const Fe=()=>(0,n.jsxs)(n.Fragment,{children:[k.state&&(0,n.jsx)(m.p,{state:k.state}),(0,n.jsx)(g.A,{title:(0,h.t)("dashboard.transformation-operation-row.render-actions.title-show-transform-help","Show transform help"),icon:"info-circle",onClick:Ge(J,"help",X),active:X}),le&&(0,n.jsx)(g.A,{title:(0,h.t)("dashboard.transformation-operation-row.render-actions.title-filter","Filter"),icon:"filter",onClick:Ge(Ae,"filter",ae),active:ae}),(0,n.jsx)(g.A,{title:(0,h.t)("dashboard.transformation-operation-row.render-actions.title-debug","Debug"),icon:"bug",onClick:Ge(Y,"debug",re),active:re}),(0,n.jsx)(g.A,{title:(0,h.t)("dashboard.transformation-operation-row.render-actions.title-disable-transformation","Disable transformation"),icon:_?"eye-slash":"eye",onClick:Ge(()=>Ee(H),"disabled",_),active:_,dataTestId:p.Tp.components.Transforms.disableTransformationButton}),(0,n.jsx)(g.q,{title:(0,h.t)("dashboard.transformation-operation-row.render-actions.title-remove","Remove"),icon:"trash-alt",onClick:()=>x.Ay.featureToggles.transformationsRedesign?se(!0):G(H)}),x.Ay.featureToggles.transformationsRedesign&&(0,n.jsx)(v.u,{isOpen:q,title:(0,h.t)("dashboard.transformation-operation-row.title-delete","Delete {{name}}?",{name:k.name}),body:(0,h.t)("dashboard.transformation-operation-row.body-delete","Note that removing one transformation may break others. If there is only a single transformation, you will go back to the main selection screen."),confirmText:(0,h.t)("dashboard.transformation-operation-row.render-actions.confirmText-delete","Delete"),onConfirm:()=>{se(!1),G(H)},onDismiss:()=>se(!1)})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(E.u,{id:K,index:H,title:`${H+1} - ${k.name}`,draggable:!0,actions:Fe,disabled:_,expanderMessages:{close:"Collapse transformation row",open:"Expand transformation row"},children:[ae&&(0,n.jsx)(R,{data:ye,index:H,config:Q[H].transformation,annotations:w.annotations,onChange:te}),(0,n.jsx)(P,{input:L,output:oe,debugMode:re,index:H,configs:Q,uiConfig:k,onChange:te,toggleShowDebug:Y})]}),(0,n.jsx)(B,{transformer:k,isOpen:X,onCloseClick:J})]})},F=({data:G,onChange:H,onRemove:K,configs:w})=>(0,n.jsx)(n.Fragment,{children:w.map((Q,k)=>{const te=a.h.getIfExists(Q.transformation.id);return te?(0,n.jsx)(N,{index:k,id:`${Q.id}`,data:G,configs:w,uiConfig:te,onRemove:K,onChange:H},`${Q.id}`):null})})},47433:(ne,j,e)=>{"use strict";e.d(j,{Ce:()=>g,R3:()=>h,Y2:()=>v,of:()=>u});var n=e(81160),a=e(16515),s=e(79319),d=e(46644),o=e(36638),l=e(57866),i=e(64761),c=e(91146);const p=1;var h=(E=>(E.aggregate="aggregate",E.groupBy="groupby",E))(h||{});const u={id:i.F.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},isApplicable:E=>(0,c.f)(E)>=p?s.M.Applicable:s.M.NotApplicable,isApplicableDescription:E=>{const x=(0,c.f)(E);return`The Group by transformation requires a series with at least ${p} fields to work. The maximum number of fields found on a series is ${x}`},operator:E=>x=>x.pipe((0,n.T)(m=>{const y=[];for(const[f,C]of Object.entries(E.fields))C.operation==="groupby"&&y.push(f);if(y.length===0)return m;const b=(0,o.NS)({id:l.Ct.byNames,options:{names:y}}),D=[];for(const f of m){const C=f.fields.filter(M=>b(M,f,m));if(C.length===0)continue;const P=v(f,C),T=g(C,P);for(const M of f.fields){if(!r(M,E))continue;const I=(0,a.Ct)(M),B=E.fields[I].aggregations,U={};P.forEach(W=>{const V=W[I],z=(0,d.Nw)({field:V,reducers:B});for(const R of B)Array.isArray(U[R])||(U[R]=[]),U[R].push(z[R])});for(const W of B){const V={name:`${I} (${W})`,values:U[W]??[],type:(0,d.AH)(W,M.type),config:{}};T.push(V)}}D.push({refId:f.refId,fields:T,length:P.size})}return D}))},r=(E,x)=>{const m=(0,a.Ct)(E),{operation:y,aggregations:b=[]}=x.fields[m]??{};return Array.isArray(b)?y==="aggregate"?b.length>0:y==="groupby"?b.length===1&&b[0]===d.gy.count:!1:!1};function v(E,x){const m=new Map;for(let y=0;y<E.length;y++){const b=String(x.map(f=>f.values[y])),D=m.get(b)??{};m.has(b)||m.set(b,D);for(let f of E.fields){const C=(0,a.Ct)(f);D[C]||(D[C]={name:C,type:f.type,config:{...f.config},values:[]}),D[C].values.push(f.values[y])}}return m}function g(E,x){const m=[];for(const y of E){const b=[],D=(0,a.Ct)(y);x.forEach(f=>{b.push(f[D].values[0])}),m.push({name:y.name,type:y.type,config:{...y.config},values:b})}return m}},47520:(ne,j,e)=>{"use strict";e.d(j,{k:()=>o});var n=e(44240),a=e(39697),s=e(65961),d=e(67791);function o({whileLoading:l,source:i}){return(0,n.h)((0,a.O)(200).pipe((0,s.u)(l),(0,d.Q)(i)),i)}},47700:(ne,j,e)=>{"use strict";e.d(j,{N:()=>s,d:()=>d});var n=e(74848);let a;function s(o){a=o}function d(o){return a?(0,n.jsx)(a,{...o}):null}},47730:(ne,j,e)=>{"use strict";e.d(j,{k:()=>o});var n=e(74848),a=e(51898),s=e(92745),d=e(45861);const o=({onAdd:l})=>(0,n.jsx)(d.$n,{icon:"plus",variant:"secondary",onClick:l,"data-testid":a.Tp.pages.Dashboard.Settings.Variables.Edit.StaticOptionsEditor.addButton,"aria-label":(0,s.t)("variables.static-options.add-option-button-label","Add new option"),children:(0,n.jsx)(s.x6,{i18nKey:"variables.static-options.add-option-button-label",children:"Add new option"})})},47797:(ne,j,e)=>{"use strict";e.d(j,{do:()=>s,ee:()=>o,q6:()=>a,rE:()=>d});var n=e(68143);function a(l){if(typeof l=="string")return l;if(l){if(l instanceof Error)return l.message;if((0,n.NF)(l)){if(l.data&&l.data.message)return l.data.message;if(l.statusText)return l.statusText}else if(l.hasOwnProperty("message"))return l.message}return JSON.stringify(l)}function s(l){if(typeof l!="string"&&l){if(l instanceof Error)return;if((0,n.NF)(l))return l.status;if(l.hasOwnProperty("status"))return l.status}}function d(l){if(typeof l!="string"&&l){if(l instanceof Error)return;if((0,n.NF)(l))return l.data?.messageId;if(l.hasOwnProperty("messageId"))return l.messageId}}function o(l){const i=l.config?.method??"GET",c=l.config?.url;return i&&c?`${i} ${c}`:"request"}},47925:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>d,Pj:()=>o,o:()=>i});var n=e(75816),a=e(73659);const d=(0,n.xP)({reducerPath:"userPreferencesAPI",baseQuery:(0,a.W)({baseURL:"/api"}),endpoints:()=>({})}).injectEndpoints({endpoints:p=>({getUserPreferences:p.query({query:()=>({url:"/user/preferences"})}),patchUserPreferences:p.mutation({query:h=>({url:"/user/preferences",method:"PATCH",body:h.patchPrefsCmd})}),updateUserPreferences:p.mutation({query:h=>({url:"/user/preferences",method:"PUT",body:h.updatePrefsCmd})})}),overrideExisting:!1}),{useGetUserPreferencesQuery:o,useLazyGetUserPreferencesQuery:l,usePatchUserPreferencesMutation:i,useUpdateUserPreferencesMutation:c}=d},47931:(ne,j,e)=>{"use strict";e.d(j,{b:()=>h});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(45861),i=e(30703),c=e(53371);const p=2*1e3;function h({onClipboardCopy:v,onClipboardError:g,children:E,getText:x,icon:m,variant:y,...b}){const D=(0,o.of)(r),[f,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let I;return f&&(I=setTimeout(()=>{C(!1)},p)),()=>{window.clearTimeout(I)}},[f]);const P=(0,s.useRef)(null),T=(0,s.useCallback)(async()=>{const I=x();try{await u(I,P),C(!0),v?.(I)}catch(B){g?.(I,B)}},[x,v,g]),M=(0,d.t)("clipboard-button.inline-toast.success","Copied");return(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsx)(c.r,{placement:"top",referenceElement:P.current,children:M}),(0,n.jsxs)(l.$n,{onClick:T,icon:m,variant:f?"success":y,...b,className:(0,a.cx)(D.button,f&&D.successButton,b.className),ref:P,children:[E,f&&(0,n.jsx)("div",{className:D.successOverlay,children:(0,n.jsx)(i.I,{name:"check"})})]})]})}const u=async(v,g)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(v);{const E=document.createElement("textarea");g.current?.appendChild(E),E.value=v,E.focus(),E.select(),document.execCommand("copy"),E.remove()}},r=v=>({button:(0,a.css)({position:"relative"}),successButton:(0,a.css)({"> *":(0,a.css)({visibility:"hidden"})}),successOverlay:(0,a.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},47938:(ne,j,e)=>{"use strict";e.d(j,{VO:()=>c,WS:()=>d,f4:()=>i,nd:()=>l,vk:()=>o});var n=e(75505),a=e(68143),s=e(52161);async function d(g){try{const E=await(0,n.s)((0,a.AI)().fetch({url:`/api/alertmanager/${(0,s.w5)(g)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:E.data.template_files??{},template_file_provenances:E.data.template_file_provenances??{},alertmanager_config:E.data.alertmanager_config??{},last_applied:E.data.last_applied,id:E.data.id,extra_config:E.data.extra_config}}catch(E){if(g===s.hY&&(0,a.NF)(E)&&E.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw E}}async function o(g,E){await(0,n.s)((0,a.AI)().fetch({method:"POST",url:`/api/alertmanager/${(0,s.w5)(g)}/config/api/v1/alerts`,data:E,showErrorAlert:!1,showSuccessAlert:!1}))}async function l(g){await(0,n.s)((0,a.AI)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,s.w5)(g)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function i(g){return(await(0,n.s)((0,a.AI)().fetch({url:`/api/alertmanager/${(0,s.w5)(g)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function c(g){return(await(0,n.s)((0,a.AI)().fetch({url:`/api/alertmanager/${(0,s.w5)(g)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function p(g,E,x){const m={receivers:E,alert:x};try{const y=await lastValueFrom(getBackendSrv().fetch({method:"POST",data:m,url:`/api/alertmanager/${getDatasourceAPIUid(g)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(h(y.data))throw new Error(v(y.data))}catch(y){throw isFetchError(y)&&u(y.data)&&h(y.data)?new Error(v(y.data)):y}}function h(g){return g.receivers.some(E=>E.grafana_managed_receiver_configs.some(x=>x.status==="failed"))}function u(g){return isObject(g)&&"receivers"in g&&Array.isArray(g.receivers)?g.receivers.every(r):!1}function r(g){return isObject(g)&&"name"in g&&typeof g.name=="string"&&"grafana_managed_receiver_configs"in g&&Array.isArray(g.grafana_managed_receiver_configs)}function v(g){return g.receivers.flatMap(E=>E.grafana_managed_receiver_configs.filter(x=>x.status==="failed").map(x=>x.error??"Unknown error.")).join("; ")}},47969:(ne,j,e)=>{"use strict";e.d(j,{qJ:()=>u,hI:()=>p,hM:()=>x,H7:()=>h,xU:()=>b,P5:()=>I,Jx:()=>E,g0:()=>m,PK:()=>T,Ow:()=>C});var n=e(38036),a=e(92745);function s(B,U){const W=new Set;for(const V of B)W.add(U(V));return W}var d=e(82612),o=e(62635),l=e(54742),i=e(67933),c=e(99305);const p=B=>{const U=[];for(const W of B)U.push({id:W.id,label:`${W.id}`});return U},h=(B,U)=>B.filter(W=>U.some(V=>V.from===W.id||V.to===W.id)),u=B=>{const U=[];for(const W of B)for(const V of B){if(W===V)continue;l.B.get(W.type).dependsOn(W,V)&&U.push({from:W.id,to:V.id})}return U};function r(B){const U=(0,c.t4)(B);if(!U)return;const W=U.slice(1).find(V=>V!==void 0);if(!(W in{}))return W}const v=(B,U)=>{c.SY.lastIndex=0;const W=[],z=(0,o.MA)(U,2).match(c.SY);if(!z)return W;for(const R of z){if(!R||R.indexOf("$__")!==-1||R.indexOf("${__")!==-1||R.indexOf("$hashKey")!==-1)continue;const O=r(R);B.some(N=>N.id===O)||W.find(N=>N===O)||O&&W.push(O)}return W},g={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},E=(B,U,W)=>{const V=Object.keys(U.value).reduce((R,O)=>{const N=U.value[O];if(!N||typeof N!="string")return R;const F=g[O]?g[O].find(H=>H.test(B)):void 0;let G=(0,c.wJ)(N,B);return O==="repeat"&&N===B&&(G=!0),!F&&G&&(R={...R,[O]:N}),R},{}),z=Object.keys(U.value).reduce((R,O)=>{const N=U.value[O];if(N&&typeof N=="object"&&Object.keys(N).length){let F=N.title||N.name||N.id||O;Array.isArray(U.value)&&U.key==="panels"&&(F=`${F}[${N.id}]`);const G=E(B,{key:O,value:N},{});Object.keys(G).length&&(R={...R,[F]:G})}return R},{});return(Object.keys(V).length||Object.keys(z).length)&&(W={...W,...V,...z}),W},x=(B,U)=>{if(!U)return{unUsed:[],usages:[]};const W=[];let V=[];const z=U.getSaveModelCloneOld();for(const R of B){const O=R.id,N=E(O,{key:"model",value:z},{});!Object.keys(N).length&&!(0,i.EW)(R)&&W.push(R),Object.keys(N).length&&V.push({variable:R,tree:N})}return{unUsed:W,usages:V}};async function m(B,U){return new Promise((W,V)=>{setTimeout(()=>{try{const z=y(B,U);W(C(z))}catch(z){V(z)}},200)})}function y(B,U){if(!U)return[];let W=[];const V=U.getSaveModelCloneOld(),z=v(B,V);for(const R of z){const O=E(R,{key:"model",value:V},{});if(Object.keys(O).length){const N={id:R,name:R};W.push({variable:N,tree:O})}}return W}function b(B,U,W){const V=s(U.descendants(B),R=>R.name);V.add(n.c.includeVars);for(const R of B)V.add(R);return D([...V],W)}function D(B,U){const W=[];for(const V of B)U[V]&&W.push(...U[V]);return new Set(W)}const f=(B,U)=>{const{id:W,value:V}=U,{nodes:z,edges:R}=B;if(V&&typeof V=="string"){const O=`${U.id}-${V}`;return z.push({id:O,label:V}),R.push({from:O,to:W}),B}if(V&&typeof V=="object"){const O=Object.keys(V);for(const N of O){const F=`${U.id}-${N}`;z.push({id:F,label:N}),R.push({from:F,to:W}),B=f(B,{id:F,value:V[N]})}return B}return B},C=B=>{const U=[];for(const W of B){const{variable:V,tree:z}=W,R={variable:V,nodes:[{id:"dashboard",label:(0,a.t)("variables.transform-usages-to-network.result.label.dashboard","dashboard")}],edges:[],showGraph:!1};U.push(f(R,{id:"dashboard",value:z}))}return U},P=B=>Object.values(B).reduce((W,V)=>typeof V=="object"?W+P(V):W+1,0),T=(B,U)=>{const W=U.find(V=>V.variable.id===B);return W?P(W.tree):0};function M(B){const U=[];for(const W of B)U.push(W),W.panels?.length&&U.push(...M(W.panels.map(V=>new PanelModel(V))));return U}function I(B){const U={};for(const W of B){const V=(0,d.tw)(W),z=[...V.matchAll(/"repeat":"([^"]+)"/g)].map(N=>N[1]),R=V.match(c.SY)?.map(N=>r(N))??[],O=[...z,...R];for(const N of O)N in U?U[N].add(W.id):U[N]=new Set([W.id])}return U}},47981:(ne,j,e)=>{"use strict";e.d(j,{N:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(82679),o=e.n(d),l=e(92745),i=e(22787),c=e(66404),p=e(13943),h=e(63142),u=e(9628);const r=({onDismiss:m})=>{const y=(0,h.of)(x),b=v();return(0,n.jsx)(i.a,{title:(0,l.t)("help-modal.title","Shortcuts"),isOpen:!0,onDismiss:m,onClickBackdrop:m,children:(0,n.jsx)(p.x,{columns:{xs:1,sm:2},gap:3,tabIndex:0,children:Object.values(b).map(({category:D,shortcuts:f})=>(0,n.jsx)("section",{children:(0,n.jsxs)("table",{className:y.table,children:[(0,n.jsx)("caption",{children:(0,n.jsx)(c.E,{element:"p",variant:"h5",children:D})}),(0,n.jsx)("thead",{className:"sr-only",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(l.x6,{i18nKey:"help-modal.column-headers.keys",children:"Keys"})}),(0,n.jsx)("th",{children:(0,n.jsx)(l.x6,{i18nKey:"help-modal.column-headers.description",children:"Description"})})]})}),(0,n.jsx)("tbody",{children:f.map(({keys:C,description:P})=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:y.keys,children:C.map(T=>(0,n.jsx)(g,{children:T},T))}),(0,n.jsx)("td",{children:(0,n.jsx)(c.E,{variant:"bodySmall",element:"p",children:P})})]},C.join()))})]})},D))})})},v=()=>{const{isAvailable:m}=(0,d.useAssistant)(),y=(0,s.useMemo)(()=>(0,u.gn)(),[]);return(0,s.useMemo)(()=>{const b=[{keys:["g","h"],description:(0,l.t)("help-modal.shortcuts-description.go-to-home-dashboard","Go to Home Dashboard")},{keys:["g","d"],description:(0,l.t)("help-modal.shortcuts-description.go-to-dashboards","Go to Dashboards")},{keys:["g","e"],description:(0,l.t)("help-modal.shortcuts-description.go-to-explore","Go to Explore")},{keys:["g","p"],description:(0,l.t)("help-modal.shortcuts-description.go-to-profile","Go to Profile")},{keys:["g","a"],description:(0,l.t)("help-modal.shortcuts-description.open-alerting","Go to Alerting")},{keys:[`${y} + k`],description:(0,l.t)("help-modal.shortcuts-description.open-search","Open search")},{keys:["esc"],description:(0,l.t)("help-modal.shortcuts-description.exit-edit/setting-views","Exit edit/setting views")},{keys:["?"],description:(0,l.t)("help-modal.shortcuts-description.show-all-shortcuts","Show all keyboard shortcuts")},{keys:["c","t"],description:(0,l.t)("help-modal.shortcuts-description.change-theme","Change theme")}];return m&&b.push({keys:[`${y} + .`],description:(0,l.t)("help-modal.shortcuts-description.open-assistant","Open Assistant")}),[{category:(0,l.t)("help-modal.shortcuts-category.global","Global"),shortcuts:b},{category:(0,l.t)("help-modal.shortcuts-category.time-range","Time range"),shortcuts:[{keys:["t","z"],description:(0,l.t)("help-modal.shortcuts-description.zoom-out-time-range","Zoom out time range")},{keys:["t","\u2190"],description:(0,l.t)("help-modal.shortcuts-description.move-time-range-back","Move time range back")},{keys:["t","\u2192"],description:(0,l.t)("help-modal.shortcuts-description.move-time-range-forward","Move time range forward")},{keys:["t","a"],description:(0,l.t)("help-modal.shortcuts-description.make-time-range-permanent","Make time range absolute/permanent")},{keys:["t","c"],description:(0,l.t)("help-modal.shortcuts-description.copy-time-range","Copy time range")},{keys:["t","v"],description:(0,l.t)("help-modal.shortcuts-description.paste-time-range","Paste time range")}]},{category:(0,l.t)("help-modal.shortcuts-category.dashboard","Dashboard"),shortcuts:[{keys:[`${y} + s`],description:(0,l.t)("help-modal.shortcuts-description.save-dashboard","Save dashboard")},{keys:["d","r"],description:(0,l.t)("help-modal.shortcuts-description.refresh-all-panels","Refresh all panels")},{keys:["d","s"],description:(0,l.t)("help-modal.shortcuts-description.dashboard-settings","Dashboard settings")},{keys:["d","v"],description:(0,l.t)("help-modal.shortcuts-description.toggle-active-mode","Toggle in-active / view mode")},{keys:["d","k"],description:(0,l.t)("help-modal.shortcuts-description.toggle-kiosk","Toggle kiosk mode (hides top nav)")},{keys:["d","\u21E7 + e"],description:(0,l.t)("help-modal.shortcuts-description.expand-all-rows","Expand all rows")},{keys:["d","\u21E7 + c"],description:(0,l.t)("help-modal.shortcuts-description.collapse-all-rows","Collapse all rows")},{keys:["d","a"],description:(0,l.t)("help-modal.shortcuts-description.toggle-auto-fit","Toggle auto fit panels (experimental feature)")},{keys:[`${y} + o`],description:(0,l.t)("help-modal.shortcuts-description.toggle-graph-crosshair","Toggle shared graph crosshair")},{keys:["d","l"],description:(0,l.t)("help-modal.shortcuts-description.toggle-all-panel-legends","Toggle all panel legends")},{keys:["d","x"],description:(0,l.t)("help-modal.shortcuts-description.toggle-exemplars","Toggle exemplars in all panel")}]},{category:(0,l.t)("help-modal.shortcuts-category.focused-panel","Focused panel"),shortcuts:[{keys:["e"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-edit","Toggle panel edit view")},{keys:["v"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-fullscreen","Toggle panel fullscreen view")},{keys:["p","u"],description:(0,l.t)("help-modal.shortcuts-description.open-share-link-drawer","Share panel link")},{keys:["p","e"],description:(0,l.t)("help-modal.shortcuts-description.open-share-embed-drawer","Share panel embed")},{keys:["p","s"],description:(0,l.t)("help-modal.shortcuts-description.open-shared-modal","Share panel snapshot")},{keys:["p","x"],description:(0,l.t)("help-modal.shortcuts-description.explore-panel","Explore panel")},{keys:["i"],description:(0,l.t)("help-modal.shortcuts-description.inspect-panel","Inspect panel")},{keys:["p","d"],description:(0,l.t)("help-modal.shortcuts-description.duplicate-panel","Duplicate Panel")},{keys:["p","r"],description:(0,l.t)("help-modal.shortcuts-description.remove-panel","Remove Panel")},{keys:["p","l"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-legend","Toggle panel legend")}]}]},[y,m])},g=({children:m})=>{const y=(0,h.of)(x),b=(0,s.useMemo)(()=>E(m),[m]),D=(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:b}});return(0,n.jsx)("kbd",{className:y.shortcutTableKey,children:(0,n.jsx)(c.E,{variant:"code",children:D})})};function E(m){let y,b;if(m.includes("ctrl"))y="ctrl",b="Control";else if(m.includes("esc"))y="esc",b="Escape";else return m;return m.replace(y,`<span class="sr-only">${b}</span><span aria-hidden="true" role="none">${y}</span>`)}function x(m){return{table:(0,a.css)({borderCollapse:"separate",borderSpacing:m.spacing(2),"& caption":{captionSide:"top"}}),keys:(0,a.css)({textAlign:"end",whiteSpace:"nowrap",minWidth:83}),shortcutTableKey:(0,a.css)({display:"inline-block",textAlign:"center",marginRight:m.spacing(.5),padding:"3px 5px",lineHeight:"10px",verticalAlign:"middle",border:`solid 1px ${m.colors.border.medium}`,borderRadius:m.shape.radius.default,color:m.colors.text.primary,backgroundColor:m.colors.background.secondary})}}},48072:(ne,j,e)=>{"use strict";e.d(j,{T:()=>a,X:()=>s});let n;function a(d){n=d}function s(){return n}},48233:(ne,j,e)=>{"use strict";e.d(j,{_:()=>a,j:()=>s});var n=e(42954),a=(d=>(d.Abs="abs",d.Exp="exp",d.Ln="ln",d.Round="round",d.Floor="floor",d.Ceil="ceil",d.Percent="percent",d))(a||{});const s=new n.O(()=>[{id:"abs",name:"Absolute value",operation:d=>Math.abs(d),unaryOperationID:"abs"},{id:"exp",name:"Natural exponent",operation:d=>Math.exp(d),unaryOperationID:"exp"},{id:"ln",name:"Natural logarithm",operation:d=>Math.log(d),unaryOperationID:"ln"},{id:"round",name:"Round",operation:d=>Math.round(d),unaryOperationID:"round"},{id:"floor",name:"Floor",operation:d=>Math.floor(d),unaryOperationID:"floor"},{id:"ceil",name:"Ceiling",operation:d=>Math.ceil(d),unaryOperationID:"ceil"},{id:"percent",name:"Percentage",operation:(d,o=1)=>d/(o||1),unaryOperationID:"percent"}])},48264:(ne,j,e)=>{"use strict";e.d(j,{Nb:()=>m,VQ:()=>D,eE:()=>x,m4:()=>v,yJ:()=>y});var n=e(81160),a=e(16515),s=e(64761),d=e(74261),o=e(55386),l=e(79319),i=e(39443),c=e(95004),p=e(8721),h=e(92745),u=e(739),r=e(16553);const v=()=>({id:s.F.heatmap,name:(0,h.t)("transformers.get-heatmap-transformer.name.create-heatmap","Create heatmap"),description:(0,h.t)("transformers.get-heatmap-transformer.description.generate-heatmap-data-from-source","Generate heatmap data from source data."),defaultOptions:{},isApplicable:T=>{const{xField:M,yField:I,xs:B,ys:U}=f(T);return M||I||!B.length||!U.length?l.M.NotPossible:l.M.Applicable},isApplicableDescription:"The Heatmap transformation requires fields with Heatmap compatible data. No fields with Heatmap data could be found.",operator:(T,M)=>I=>I.pipe((0,n.T)(B=>v().transformer(T,M)(B))),transformer:T=>M=>{const I=D(M,T);return T.keepOriginalData?[I,...M]:[I]}});function g(T){return T==="+Inf"?1/0:T==="-Inf"?-1/0:+(T??0)}function E(T,M){return g(T)-g(M)}function x(T){return T?.meta?.custom??{}}function m(T){let M=!1;for(let I of T.fields)switch(I.name){case"y":case"yMin":case"yMax":if(M)return!1;M=!0}return M}function y(T){const M=T.frame.fields[0],I=M.values,B=T.frame.fields.filter((H,K)=>H.type===c.PU.number&&K>0),U=I.length*B.length,W=new Array(U),V=new Array(U),z=new Array(U),R=B.map(H=>H.values.slice());R.forEach((H,K)=>{for(let w=0;w<H.length;w++)z[R.length*w+K]=H[w]});const O=Array.from({length:B.length},(H,K)=>K);for(let H=0,K=0,w=0;H<U;K=++H%O.length)V[H]=O[K],K===0&&H>=O.length&&w++,W[H]=I[w];let N=B[0].labels?.le!=null?"yMax":"y";switch(T.layout){case u.D7.le:N="yMax";break;case u.D7.ge:N="yMin";break;case u.D7.unknown:N="y";break}const F={yOrdinalDisplay:B.map(H=>(0,a.Ct)(H,T.frame)),yMatchWithLabel:Object.keys(B[0].labels??{})[0]};if(F.yMatchWithLabel&&(F.yOrdinalLabel=B.map(H=>H.labels?.[F.yMatchWithLabel]??""),F.yMatchWithLabel==="le"&&(F.yMinDisplay="0.0")),T.unit?.length||T.decimals!=null){const H=(0,o.j_)(T.unit??"short");F.yMinDisplay&&(F.yMinDisplay=(0,o.cN)(H(0,T.decimals))),F.yOrdinalDisplay=F.yOrdinalDisplay.map(K=>{let w=+K;return Number.isNaN(w)?K:(0,o.cN)(H(w,T.decimals))})}const G={...B[0].config};return G.displayNameFromDS&&delete G.displayNameFromDS,{length:W.length,refId:T.frame.refId,meta:{type:i.m.HeatmapCells,custom:F},fields:[{name:M.type===c.PU.time?"xMax":"x",type:M.type,values:W,config:M.config},{name:N,type:c.PU.number,values:V,config:{unit:"short"}},{name:T.value?.length?T.value:"Value",type:c.PU.number,values:z,config:G,display:B[0].display}]}}function b(T){T=T.slice(),T.sort((I,B)=>E(I.name,B.name));const M=T.map(I=>I.fields[1].values.slice());return M.reverse(),M.forEach((I,B)=>{if(B<M.length-1)for(let U=0;U<I.length;U++)I[U]-=M[B+1][U]}),M.reverse(),T.map((I,B)=>({...I,fields:[I.fields[0],{...I.fields[1],values:M[B]}]}))}function D(T,M){const{xField:I,yField:B,xs:U,ys:W}=f(T);if(!I||!B)throw"no heatmap fields found";if(!U.length||!W.length)throw"no values found";const V=M.xBuckets??{},z=M.yBuckets??{};if(V.scale?.type===u.L4.Log)throw"X axis only supports linear buckets";const R=M.yBuckets?.scale??{type:u.L4.Linear},O=C(U,W,{xSorted:(0,p.g2)(U),xTime:I.type===c.PU.time,xMode:V.mode,xSize:V.mode===u.J1.Size?(0,r.Fv)(V.value??""):V.value?+V.value:void 0,yMode:z.mode,ySize:z.value?+z.value:void 0,yLog:R?.type===u.L4.Log?R?.log:void 0,xMin:M.timeRange?.from.valueOf(),xMax:M.timeRange?.to.valueOf()});return{length:O.x.length,name:(0,a.Ct)(B),meta:{type:i.m.HeatmapCells},fields:[{name:"xMin",type:I.type,values:O.x,config:I.config},{name:"yMin",type:c.PU.number,values:O.y,config:{...B.config,custom:{scaleDistribution:R}}},{name:"Count",type:c.PU.number,values:O.count,config:{unit:"short"}}]}}function f(T){let M,I,B=0;for(let z of T)z.fields.find(O=>O.type===c.PU.time)&&(B+=z.length);let U=Array(B),W=Array(B),V=0;for(let z of T){const R=z.fields.find(N=>N.type===c.PU.time);if(!R)continue;M||(M=R);const O=R.values;for(let N of z.fields)if(N!==R&&N.type===c.PU.number){const F=N.values;for(let G=0;G<O.length;G++,V++)U[V]=O[G],W[V]=F[G];I||(I=N)}}return{xField:M,yField:I,xs:U,ys:W}}function C(T,M,I){let B=T.length,U=I?.xSorted??!1,W=I?.ySorted??!1,V=I?.xMin??(U?T[0]:1/0),z=W?M[0]:1/0,R=I?.xMax??(U?T[B-1]:-1/0),O=W?M[B-1]:-1/0,N=I?.yLog,F=I?.xMin!=null&&I?.xMax!=null,G=I?.yMin!=null&&I?.yMax!=null;for(let le=0;le<B;le++)!U&&!F&&(V=Math.min(V,T[le]),R=Math.max(R,T[le])),!W&&!G&&(!N||M[le]>0)&&(z=Math.min(z,M[le]),O=Math.max(O,M[le]));let H=I?.xSize??0,K=I?.ySize??0,w=I?.xMode,Q=I?.yMode;if((!Number.isFinite(H)||H<=0)&&(w=u.J1.Count,H=20),(!Number.isFinite(K)||K<=0)&&(Q=u.J1.Count,K=10),w===u.J1.Count){let le=(R-V)/Math.max(H-1,1),L=I?.xTime?r.q_:r.eO,ie=L.findIndex(oe=>oe>le)-1;H=L[Math.max(ie,0)]}if(Q===u.J1.Count){let le=(O-z)/Math.max(K-1,1),L=I?.yTime?r.q_:r.eO,ie=L.findIndex(oe=>oe>le)-1;K=L[Math.max(ie,0)]}let k=I?.xCeil?le=>(0,d.Uh)(le,H):le=>(0,d.rs)(le,H),te=I?.yCeil?le=>(0,d.Uh)(le,K):le=>(0,d.rs)(le,K);if(N){K=1/(I?.ySize??1);let le=N===2?Math.log2:Math.log10;te=I?.yCeil?L=>(0,d.Uh)(le(L),K):L=>(0,d.rs)(le(L),K)}let q=k(V),se=k(R),re=te(z),Y=te(O),X=Math.round((se-q)/H)+1,J=Math.round((Y-re)/K)+1,[_,ee,ae]=P(X,J,q,H,re,K,N);for(let le=0;le<B;le++){if(N&&M[le]<=0)continue;const L=(k(T[le])-q)/H,ie=(te(M[le])-re)/K,oe=L*J+ie;ae[oe]++}return{x:_,y:ee,count:ae}}function P(T,M,I,B,U,W,V){const z=T*M,R=new Array(z),O=new Array(z),N=new Array(z);for(let F=0,G=0,H=I;F<z;G=++F%M)N[F]=0,V?O[F]=V**(U+G*W):O[F]=U+G*W,G===0&&F>=M&&(H+=B),R[F]=H;return[R,O,N]}},48390:(ne,j,e)=>{"use strict";e.d(j,{K:()=>s});var n=e(739);const a="12.3.0",s={displayMode:n.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:n.TZ.Auto,showUnfilled:!0,sizing:n.T6.Auto,valueMode:n.$l.Color}},48421:(ne,j,e)=>{"use strict";e.d(j,{$u:()=>g,D4:()=>m,Iv:()=>y,U2:()=>x,VT:()=>E,z_:()=>v});var n=e(2543),a=e.n(n),s=e(28998),d=e(17752),o=e(67933),l=e(39167),i=e(74887),c=e(93612),p=e(88681),h=e(99305),u=e(25206);const r="Filters",v=f=>async(C,P)=>{let T=D(f,P());if(!T&&(C(b(f)),T=D(f,P()),!T))return;const M=T.filters.findIndex(B=>B.key===f.key&&B.value===f.value);if(M===-1){const{value:B,key:U,operator:W}=f,V={value:B,key:U,operator:W};return await C(x((0,h.jX)(T),V))}const I={...T.filters[M],operator:f.operator};return await C(g((0,h.jX)(T),{index:M,filter:I}))},g=(f,C)=>async(P,T)=>{const M=(0,c.dn)(f,T());P((0,i.kb)(f.rootStateKey,(0,u.E2)((0,h.qD)(M,C)))),await P((0,l.us)((0,h.jX)(M),!0))},E=(f,C)=>async(P,T)=>{const M=(0,c.dn)(f,T());P((0,i.kb)(f.rootStateKey,(0,u.D$)((0,h.qD)(M,C)))),await P((0,l.us)((0,h.jX)(M),!0))},x=(f,C)=>async(P,T)=>{const M=(0,c.dn)(f,T());P((0,i.kb)(f.rootStateKey,(0,u.xt)((0,h.qD)(M,C)))),await P((0,l.us)((0,h.jX)(M),!0))},m=(f,C)=>async(P,T)=>{const M=(0,c.dn)(f,T());P((0,i.kb)(f.rootStateKey,(0,u.qZ)((0,h.qD)(M,C)))),await P((0,l.us)((0,h.jX)(M),!0))},y=(f,C)=>async(P,T)=>{const M=(0,c.dn)(f,T());P((0,i.kb)(f.rootStateKey,(0,p.QP)((0,h.qD)(M,{propName:"datasource",propValue:C}))));const B=(await(0,s.tR)().get(C))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";P((0,i.kb)(f.rootStateKey,(0,d.BC)({infoText:B})))},b=f=>(C,P)=>{const T=(0,c.y7)(P()),M={...(0,n.cloneDeep)(u.MK),datasource:f.datasource,name:r,id:r,rootStateKey:T},I=!1,B=(0,c.hk)(T,P()),U={type:"adhoc",id:M.id,rootStateKey:T};C((0,i.kb)(T,(0,p.QV)((0,h.qD)(U,{global:I,model:M,index:B}))))},D=(f,C)=>{const P=(0,c.y7)(C),T=(0,c.nx)(P,C);let M;for(const I of Object.values(T.variables))if((0,o.EW)(I)&&I.datasource?.uid===f.datasource.uid){M=I;break}return M}},48431:(ne,j,e)=>{"use strict";e.d(j,{I:()=>u});var n=e(74848),a=e(22803),s=e(55386),d=e(92745),o=e(63142),l=e(28473),i=e(45861),c=e(30703),p=e(76319);const h="Remove file";function u({file:v,removeFile:g}){const E=(0,o.of)(r),{file:x,progress:m,error:y,abortUpload:b,retryUpload:D}=v,f=()=>y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:E.error,children:y.message}),D&&(0,n.jsx)(p.K,{name:"sync",tooltip:(0,d.t)("grafana-ui.file-dropzone.item-retry","Retry"),tooltipPlacement:"top",onClick:D}),g&&(0,n.jsx)(p.K,{className:D?E.marginLeft:"",name:"trash-alt",onClick:()=>g(v),tooltip:h})]}):m&&x.size>m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("progress",{className:E.progressBar,max:x.size,value:m}),(0,n.jsxs)("span",{className:E.paddingLeft,children:[Math.round(m/x.size*100),"%"]}),b&&(0,n.jsx)(i.$n,{variant:"secondary",type:"button",fill:"text",onClick:b,children:(0,n.jsx)(d.x6,{i18nKey:"grafana-ui.file-dropzone.cancel-upload",children:"Cancel upload"})})]}):g&&(0,n.jsx)(p.K,{name:"trash-alt",onClick:()=>g(v),tooltip:h,tooltipPlacement:"top"}),C=(0,s.j_)("decbytes")(x.size);return(0,n.jsxs)("div",{className:E.fileListContainer,children:[(0,n.jsxs)("span",{className:E.fileNameWrapper,children:[(0,n.jsx)(c.I,{name:"file-blank",size:"lg","aria-hidden":!0}),(0,n.jsx)("span",{className:E.padding,children:(0,l.i)(x.name)}),(0,n.jsx)("span",{children:(0,s.cN)(C)})]}),(0,n.jsx)("div",{className:E.fileNameWrapper,children:f()})]})}function r(v){return{fileListContainer:(0,a.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:v.spacing(2),border:`1px dashed ${v.colors.border.medium}`,backgroundColor:`${v.colors.background.secondary}`,marginTop:v.spacing(1)}),fileNameWrapper:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,a.css)({padding:v.spacing(0,1)}),paddingLeft:(0,a.css)({paddingLeft:v.spacing(2)}),marginLeft:(0,a.css)({marginLeft:v.spacing(1)}),error:(0,a.css)({paddingRight:v.spacing(2),color:v.colors.error.text}),progressBar:(0,a.css)({borderRadius:v.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:v.colors.border.weak,borderRadius:v.shape.radius.default},"::-webkit-progress-value":{backgroundColor:v.colors.primary.main,borderRadius:v.shape.radius.default}})}}},48442:(ne,j,e)=>{"use strict";e.d(j,{Wn:()=>l,rJ:()=>s});var n=e(63895),a=e(83276);function s(i){function c(h){h.object_matchers=(0,n.J$)(h),delete h.matchers,delete h.match,delete h.match_re,h.routes?.forEach(c)}const p=structuredClone(i);return c(p),p}function d(i){function c(h){h.object_matchers=h.object_matchers?.map(([u,r,v])=>[unquoteWithUnescape(u),r,unquoteWithUnescape(v)]),h.routes?.forEach(c)}const p=structuredClone(i);return c(p),p}function o(i,c,p){const h=[],u=routeAdapter.toPackage(i),r=routeAdapter.toPackage(c);return p.reduce((v,g)=>{const E=g.alerts.filter(x=>{const m=Object.entries(x.labels);return findMatchingRoutes(u,m).some(b=>b.route.id===r.id)});return E.length&&v.push({...g,alerts:E}),v},h)}function l(i,c,p){const h={...i};return h.receiver===c&&(h.receiver=p),h.routes&&(h.routes=h.routes.map(u=>l(u,c,p))),h}},48457:(ne,j,e)=>{"use strict";e.d(j,{O:()=>l});var n=e(74848),a=e(96540),s=e(92745),d=e(18857),o=e(56755);const l=({value:i,onChange:c,context:p,item:h,id:u})=>{const r=h.settings??{},v=(0,o.sE)(p.data,r?.filter),g=(0,o.m3)(v,i,void 0,void 0,r.baseNameMode),E=(0,a.useCallback)(m=>{if(!(m&&!(0,o.v3)(m.value,v)))return c(m?.value)},[v,c]),x=g.find(m=>m.value===i);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.l6,{inputId:u,value:x,placeholder:r.placeholderText??(0,s.t)("grafana-ui.matchers-ui.field-name-picker.placeholder","Select field"),options:g,onChange:E,noOptionsMessage:r.noFieldsMessage,width:r.width,isClearable:r.isClearable!==!1})})}},48480:(ne,j,e)=>{"use strict";e.d(j,{BD:()=>p,EX:()=>h,Iz:()=>o,PG:()=>i,QP:()=>x,fN:()=>d,lO:()=>g,mn:()=>c,p$:()=>s,pN:()=>v,wY:()=>u,wp:()=>E,yV:()=>r,zX:()=>l});var n=e(2543),a=e.n(n);function s(m){const y={uid:m.uid,type:m.type};return m.apiVersion&&(y.apiVersion=m.apiVersion),y}function d(m){if(typeof m!="object"||m===null)return!1;const y="uid"in m&&typeof m.uid=="string",b="type"in m&&typeof m.type=="string";return y||b}function o(m){if(d(m))return m.uid;if((0,n.isString)(m))return m}const l=(m,y)=>b=>{v(m,y,b.currentTarget.value)},i=(m,y)=>b=>{g(m,y,b.currentTarget.value)},c=(m,y)=>b=>{E(m,y,b.currentTarget.value)},p=(m,y)=>b=>{g(m,y,b.value)},h=(m,y)=>b=>{g(m,y,b.currentTarget.checked)},u=(m,y)=>b=>{E(m,y,b.value)},r=(m,y)=>b=>{x(m,y)};function v(m,y,b){const D=m.options;m.onOptionsChange({...D,[y]:b})}const g=(m,y,b)=>{const D=m.options;m.onOptionsChange({...D,jsonData:{...D.jsonData,[y]:b}})},E=(m,y,b)=>{const D=m.options;m.onOptionsChange({...D,secureJsonData:{...D.secureJsonData?D.secureJsonData:{},[y]:b}})},x=(m,y)=>{const b=m.options;m.onOptionsChange({...b,secureJsonData:{...b.secureJsonData?b.secureJsonData:{},[y]:""},secureJsonFields:{...b.secureJsonFields,[y]:!1}})}},48492:(ne,j,e)=>{"use strict";e.d(j,{$v:()=>u,G2:()=>h,dp:()=>g,qY:()=>E,sN:()=>r});var n=e(95943),a=e(29043),s=e(4974),d=e(17340),o=e(76584),l=e(6461),i=e(1682),c=e(25953),p=e(93389);function h(){a.A.delete(n.tH),a.A.delete(n.rt),a.A.delete(n.Gk)}function u(m){const y=a.A.get(n.rt),b=JSON.parse(y);h();const D=x(i.b4.getNextPanelId(m));let f;try{f=(0,o.g5)(b.row,b.elements,!1,D)}catch{throw new Error("Error pasting row from clipboard, please try to copy again")}return f}function r(m){const y=a.A.get(n.Gk),b=JSON.parse(y);h();const D=x(i.b4.getNextPanelId(m));let f;try{f=(0,l.zE)(b.tab,b.elements,!1,D)}catch{throw new Error("Error pasting tab from clipboard, please try to copy again")}return f}function v(m){const y=a.A.get(n.tH),{elements:b,gridItem:D}=JSON.parse(y);return D.kind==="GridLayoutItem"?(0,d.ve)(D,b,x(i.b4.getNextPanelId(m))):(0,s.i6)(D,b,x(i.b4.getNextPanelId(m)))}function g(m){const y=v(m);return y instanceof c.X?y:new c.X({body:y.state.body,key:y.state.key,variableName:y.state.variableName})}function E(m,y){const b=v(m);return b instanceof p.U?b:new p.U({...y,body:b.state.body,key:b.state.key,variableName:b.state.variableName})}function x(m){let y=m;return()=>y++}},48542:(ne,j,e)=>{"use strict";e.d(j,{JF:()=>s,MC:()=>d,yC:()=>o});const n=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],a=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function s(c=""){const p=l(c.toLowerCase());return Math.abs(p%n.length)}function d(c=""){const p=s(c);return o(p)}function o(c){return{color:n[c],borderColor:a[c]}}function l(c){let p=5381;for(let h=0;h<c.length;h++)p=(p<<5)+p+c.charCodeAt(h);return p}var i={getTagColorsFromName:d}},48588:(ne,j,e)=>{"use strict";e.d(j,{En:()=>s,d1:()=>a,tw:()=>n});const n=0,a=100,s="SAML"},48592:(ne,j,e)=>{"use strict";e.d(j,{J$:()=>s,Qz:()=>n,ZV:()=>o,f5:()=>d,xi:()=>a});var n=(l=>(l.Legacy="legacy",l.Standard="standard",l.Custom="custom",l.Datasource="datasource",l))(n||{});class a{}class s extends a{getType(){return"standard"}}class d extends a{getType(){return"custom"}}class o extends a{getType(){return"datasource"}}},48600:(ne,j,e)=>{"use strict";e.d(j,{np:()=>M,t0:()=>T});var n=e(34796),a=e.n(n),s=e(2543),d=e.n(s),o=e(95093),l=e.n(o),i=e(33239),c=e(32899),p=e(68143),h=e(36490),u=e(83873),r=e(67020),v=e(77197),g=e(32215),E=e(28998),x=e(73427),m=e(50803),y=e(13956),b=e(95407),D=e(22429),f=e(8735);class C{loadScriptedDashboard(U){const W="public/dashboards/"+U.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,p.AI)().get(W,void 0,void 0,{validatePath:!0}).then(this.executeScript.bind(this)).then(V=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:V.data}),V=>{throw console.error("Script dashboard error "+V),x.lE.emit(c.r1.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),V})}executeScript(U){const W={dashboardSrv:(0,D.UA)(),datasourceSrv:(0,E.tR)()},z=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",U)(h.Ny.getSearchObject(),v.A,i,d(),l(),window,document,a(),a(),W);return(0,s.isFunction)(z)?new Promise(R=>{z(O=>{R({data:O})})}):{data:z}}}class P extends C{loadDashboard(U,W,V,z){const R=(0,g.sP)("v1");let O;if(U==="script"&&W)O=this.loadScriptedDashboard(W);else if(U==="snapshot"&&W)O=(0,f.s)().getSnapshot(W);else if(U==="public"&&V)O=u.IB.getPublicDashboardByUid(V).then(N=>N);else if(V){if(!z){const N=R.getDashboardFromCache(V);if(N)return Promise.resolve(N)}O=(0,y.n)("v1").getDashboardDTO(V,z).then(N=>N).catch(N=>{throw(0,p.NF)(N)&&!(N instanceof b.P)&&(console.error("Failed to load dashboard",N),N.isHandled=!0,N.status===404&&x.lE.emit(c.r1.alertError,["Dashboard not found"])),N})}else throw new Error("Dashboard uid or slug required");return O.then(N=>(r.A.addDashboardImpression(N.dashboard.uid),N)),O}loadSnapshot(U){const W=(0,f.s)().getSnapshot(U);return W.then(V=>(r.A.addDashboardImpression(V.dashboard.uid),V)),W}}class T extends C{loadDashboard(U,W,V,z){const R=(0,g.sP)("v2");let O;if(U==="script"&&W)O=this.loadScriptedDashboard(W).then(N=>m.Op.ensureV2Response(N));else if(U==="public"&&V)O=u.IB.getPublicDashboardByUid(V).then(N=>m.Op.ensureV2Response(N));else if(V){if(!z){const N=R.getDashboardFromCache(V);if(N)return Promise.resolve(N)}O=(0,y.n)("v2").getDashboardDTO(V,z).then(N=>N).catch(N=>{throw(0,p.NF)(N)&&!(N instanceof b.P)&&(console.error("Failed to load dashboard",N),N.isHandled=!0,N.status===404&&x.lE.emit(c.r1.alertError,["Dashboard not found"])),N})}else throw new Error("Dashboard uid or slug required");return O.then(N=>(r.A.addDashboardImpression(N.metadata.name),N)),O}loadSnapshot(U){const W=(0,f.s)().getSnapshot(U).then(V=>m.Op.ensureV2Response(V));return W.then(V=>(r.A.addDashboardImpression(V.metadata.name),V)),W}}let M=new P;const I=B=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},48767:(ne,j,e)=>{"use strict";e.d(j,{L4:()=>i});var n=e(74848),a=e(45861),s=e(63527),d=e(41654);const o="configured",l="Reset",i=({isConfigured:c,onReset:p,...h})=>(0,n.jsxs)(d.B,{children:[!c&&(0,n.jsx)(s.p,{...h,type:"password"}),c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{...h,type:"text",disabled:!0,value:o}),(0,n.jsx)(a.$n,{onClick:p,variant:"secondary",children:l})]})]})},48850:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>a});const n="12.3.0",a={layers:[]},s={allLayers:!0,id:"zero",lat:0,lon:0,noRepeat:!1,zoom:1};var d=(l=>(l.Details="details",l.None="none",l))(d||{}),o=(l=>(l.Coords="coords",l.Fit="fit",l.Zero="zero",l))(o||{})},49e3:(ne,j,e)=>{"use strict";e.d(j,{g:()=>i});var n=e(739),a=e(27359),s=e(22592),d=e(43173),o=e(44248),l=e(42942);class i extends o.tV.g{async resolveDataSource(p){return d.$.publicDashboardAccessToken?new l.X:super.resolveDataSource(p)}processEvents(p,h){if(d.$.publicDashboardAccessToken){const u={series:[],timeRange:(0,s.E2)(),state:h.state},r=(0,a.I)(h.events);return r.meta={...r.meta,dataTopic:n.QR.Annotations},u.annotations=[r],u}else return super.processEvents(p,h)}}},49072:(ne,j,e)=>{"use strict";e.d(j,{j:()=>eo});var n=e(74848),a=e(36490),s=e(44248),d=e(8207),o=e(58662),l=e(92119),i=e(22803),c=e(20382),p=e(16817),h=e(70713),u=e(51898),r=e(92745),v=e(43173),g=e(63142),E=e(41654),x=e(21285),m=e(72636),y=e(50992),b=e(68079),D=e(45861),f=e(47931),C=e(6890),P=e(64762),T=e(8535),M=e(4213),I=e.n(M),B=e(2543),U=e(37386),W=e(22787),V=e(50803),z=e(60171),R=e(45173),O=e(99828),N=e(7817),F=e(26604),G=e(70030),H=e(62265),K=e(13241),w=e(23289),Q=e(77824),k=e(34999),te=(bt=>(bt.Classic="classic",bt.V1Resource="v1-resource",bt.V2Resource="v2-resource",bt))(te||{});const q=u.Tp.pages.ExportDashboardDrawer.ExportAsJson;function se({dashboardJson:bt,isSharingExternally:Kt,exportMode:Ut,isViewingYAML:Jt,onExportModeChange:en,onShareExternallyChange:sn,onViewYAML:Sn}){const In=bt.value?.hasLibraryPanels,On=bt.value?.initialSaveModelVersion,Fn=bt.value?.json&&"spec"in bt.value.json&&"elements"in bt.value.json.spec,ia=Fn&&Kt&&In,$n=Ut==="v2-resource"?(0,r.t)("export.json.export-remove-ds-refs","Remove deployment details"):(0,r.t)("share-modal.export.share-externally-label","Export for sharing externally"),ca=(0,r.t)("export.json.export-mode","Model"),Ia=(0,r.t)("export.json.export-format","Format");return(0,n.jsxs)(E.B,{gap:2,direction:"column",children:[(0,n.jsxs)(E.B,{gap:1,direction:"column",children:[On==="v1"&&(0,n.jsxs)(E.B,{alignItems:"center",children:[(0,n.jsx)(m.J,{children:ca}),(0,n.jsx)(Q.z,{options:[{label:(0,r.t)("dashboard-scene.resource-export.label.classic","Classic"),value:"classic"},{label:(0,r.t)("dashboard-scene.resource-export.label.v1-resource","V1 Resource"),value:"v1-resource"},{label:(0,r.t)("dashboard-scene.resource-export.label.v2-resource","V2 Resource"),value:"v2-resource"}],value:Ut,onChange:Va=>en(Va)})]}),On==="v2"&&(0,n.jsxs)(E.B,{alignItems:"center",children:[(0,n.jsx)(m.J,{children:ca}),(0,n.jsx)(Q.z,{options:[{label:(0,r.t)("dashboard-scene.resource-export.label.v2-resource","V2 Resource"),value:"v2-resource"},{label:(0,r.t)("dashboard-scene.resource-export.label.v1-resource","V1 Resource"),value:"v1-resource"}],value:Ut,onChange:Va=>en(Va)})]}),Ut!=="classic"&&(0,n.jsxs)(E.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(m.J,{children:Ia}),(0,n.jsx)(Q.z,{options:[{label:(0,r.t)("dashboard-scene.resource-export.label.json","JSON"),value:"json"},{label:(0,r.t)("dashboard-scene.resource-export.label.yaml","YAML"),value:"yaml"}],value:Jt?"yaml":"json",onChange:Sn})]}),(Fn||Ut==="classic"||On==="v2"&&Ut==="v1-resource")&&(0,n.jsxs)(E.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(m.J,{children:$n}),(0,n.jsx)(x.d,{label:$n,value:Kt,onChange:sn,"data-testid":q.exportExternallyToggle})]})]}),ia&&(0,n.jsx)(k.F,{title:(0,r.t)("dashboard-scene.save-dashboard-form.schema-v2-library-panels-export-title","Library panels will be converted to regular panels"),severity:"warning",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.save-dashboard-form.schema-v2-library-panels-export",children:"Due to limitations in the new dashboard schema (V2), library panels will be converted to regular panels with embedded content during external export."})})]})}class re extends s.Bs{constructor(Kt){super({...Kt,isSharingExternally:!1,isViewingJSON:!1,exportMode:v.$.featureToggles.kubernetesDashboards?te.Classic:void 0}),this.tabId=o.wr.export,this.onShareExternallyChange=()=>{this.setState({isSharingExternally:!this.state.isSharingExternally})},this.onExportModeChange=Ut=>{this.setState({exportMode:Ut}),Ut===te.Classic&&this.setState({isViewingYAML:!1})},this.onViewJSON=()=>{this.setState({isViewingJSON:!this.state.isViewingJSON})},this.onViewYAML=()=>{this.setState({isViewingYAML:!this.state.isViewingYAML})},this.getExportableDashboardJson=async()=>{const{isSharingExternally:Ut,exportMode:Jt}=this.state,en=(0,l.YQ)(this),sn=await en.serializer.makeExportableExternally(en),Sn=en.getInitialSaveModel(),In=Sn&&(0,z.aK)(Sn)?"v2":"v1",On=en.serializer.getSaveModel(en),Fn=Ut?sn:On,ia=Y(en,!!Ut);if((0,z.aK)(On)&&"elements"in Fn&&In==="v2"&&Jt!==te.V1Resource){this.setState({exportMode:te.V2Resource});let $n=Fn;if(Ut&&(0,z.aK)(Fn)){const ca=JSON.parse(JSON.stringify(Fn)),Ia=await(0,F.j)(ca,Ut);if("error"in Ia)return{json:{error:Ia.error},initialSaveModelVersion:In,hasLibraryPanels:Object.values(On.elements).some(Va=>Va.kind==="LibraryPanel")};$n=Ia}return{json:{apiVersion:en.serializer.apiVersion??"",kind:"Dashboard",metadata:ia,spec:$n,status:{}},initialSaveModelVersion:In,hasLibraryPanels:Object.values(On.elements).some(ca=>ca.kind==="LibraryPanel")}}if(Jt===te.V1Resource)if((0,z.aK)(On)&&In==="v2")try{const $n=(0,H.Xl)(en),ca=Y(en,!!Ut),Ia=(0,V.Sb)($n,{name:ca.name??"",generation:ca.generation??0,resourceVersion:ca.resourceVersion??"0",creationTimestamp:ca.creationTimestamp??""});let Va;if(Ut){const ka=new N.G(Ia,void 0,{getVariablesFromState:()=>(0,K.E)(window.__grafanaSceneContext)});Va=await(0,F.E)(ka)}else Va=Ia;return{json:{apiVersion:`${R._.group}/${R._.version}`,kind:"Dashboard",metadata:ca,spec:Va,status:{}},initialSaveModelVersion:In,hasLibraryPanels:(0,l.tk)(Ia)}}catch($n){return{json:{error:`Failed to convert dashboard to v1. ${$n}`},initialSaveModelVersion:In,hasLibraryPanels:void 0}}else{const $n=(0,G.Uy)(en);return{json:{apiVersion:`${R._.group}/${R._.version}`,kind:"Dashboard",metadata:ia,spec:$n,status:{}},initialSaveModelVersion:In,hasLibraryPanels:(0,l.tk)($n)}}if(Jt===te.V2Resource){const $n=(0,H.Xl)(en),ca=JSON.parse(JSON.stringify($n)),Ia=await(0,F.j)(ca,Ut),Va=Ut?Ia:$n;let ka=!1;return In==="v1"&&!(0,z.aK)(On)?ka=(0,l.tk)(On):(0,z.aK)(On)&&(ka=Object.values(On.elements).some(ss=>ss.kind==="LibraryPanel")),{json:{apiVersion:`${O.P.group}/${O.P.version}`,kind:"Dashboard",metadata:ia,spec:Va,status:{}},initialSaveModelVersion:In,hasLibraryPanels:ka}}if(In==="v1"&&(0,z.aK)(On)&&Sn&&"panels"in Sn){const $n=new N.G(Sn,void 0,{getVariablesFromState:()=>(0,K.E)(window.__grafanaSceneContext)});return{json:Ut?await(0,F.E)($n):Sn,hasLibraryPanels:(0,l.tk)(Sn),initialSaveModelVersion:In}}return{json:Fn,hasLibraryPanels:"error"in Fn||!(0,z.cR)(On)?!1:(0,l.tk)(On),initialSaveModelVersion:In}},this.onSaveAsFile=async()=>{const Ut=await this.getExportableDashboardJson(),Jt=JSON.stringify(Ut.json,null,2),{isSharingExternally:en,isViewingYAML:sn}=this.state,Sn=new Blob([sn?c.Ay.dump(Ut.json):Jt],{type:"application/json;charset=utf-8"}),In=new Date().getTime();let On="dashboard";"title"in Ut.json&&Ut.json.title&&(On=Ut.json.title);const Fn=sn?"yaml":"json";I()(Sn,`${On}-${In}.${Fn}`),w.c.exportDownloadJsonClicked({externally:en,dashboard_schema_version:Ut.initialSaveModelVersion,has_library_panels:!!Ut.hasLibraryPanels,format:sn?"yaml":"json",action:"download"})},this.onClipboardCopy=async()=>{const Ut=await this.getExportableDashboardJson(),{isSharingExternally:Jt,isViewingYAML:en,exportMode:sn}=this.state;w.c.exportCopyJsonClicked({externally:Jt,dashboard_schema_version:Ut.initialSaveModelVersion,has_library_panels:!!Ut.hasLibraryPanels,export_mode:sn||"classic",format:en?"yaml":"json",action:"copy"})}}static{this.Component=X}getTabLabel(){return(0,r.t)("share-modal.tab-title.export","Export")}getClipboardText(){}}function Y(bt,Kt){let Ut={};if(bt.serializer.metadata&&("k8s"in bt.serializer.metadata?Ut=bt.serializer.metadata.k8s?(0,B.cloneDeep)(bt.serializer.metadata.k8s):{}:"annotations"in bt.serializer.metadata&&(Ut=(0,B.cloneDeep)(bt.serializer.metadata))),"managedFields"in Ut&&delete Ut.managedFields,Kt){"uid"in Ut&&delete Ut.uid,delete Ut.resourceVersion,delete Ut.namespace;for(const Jt in Ut.labels)Jt.startsWith("grafana.app/")&&delete Ut.labels[Jt];for(const Jt in Ut.annotations)Jt.startsWith("grafana.app/")&&delete Ut.annotations[Jt]}return Ut}function X({model:bt}){const{isSharingExternally:Kt,isViewingJSON:Ut,modalRef:Jt,exportMode:en,isViewingYAML:sn}=bt.useState(),Sn=(0,p.A)(async()=>await bt.getExportableDashboardJson(),[Ut,Kt,en]),In=JSON.stringify(Sn.value?.json,null,2),On=c.Ay.dump(Sn.value?.json,{skipInvalid:!0}),Fn=sn?On:In,ia=(0,r.t)("share-modal.export.share-externally-label","Export for sharing externally");return(0,n.jsxs)(n.Fragment,{children:[!Ut&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.export.info-text",children:"Export this dashboard."})}),v.$.featureToggles.kubernetesDashboards?(0,n.jsx)(se,{dashboardJson:Sn,isSharingExternally:Kt??!1,exportMode:en??te.Classic,isViewingYAML:sn??!1,onExportModeChange:bt.onExportModeChange,onShareExternallyChange:bt.onShareExternallyChange,onViewYAML:bt.onViewYAML}):(0,n.jsx)(E.B,{gap:2,direction:"column",children:(0,n.jsx)(U.D,{label:ia,children:(0,n.jsx)(x.d,{id:"share-externally-toggle",value:Kt,onChange:bt.onShareExternallyChange})})}),(0,n.jsxs)(W.a.ButtonRow,{children:[(0,n.jsx)(D.$n,{variant:"secondary",onClick:()=>{Jt?.resolve().onDismiss()},fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.export.cancel-button",children:"Cancel"})}),sn?(0,n.jsx)(D.$n,{variant:"secondary",icon:"brackets-curly",onClick:bt.onViewJSON,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.export.view-button-yaml",children:"View YAML"})}):(0,n.jsx)(D.$n,{variant:"secondary",icon:"brackets-curly",onClick:bt.onViewJSON,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.export.view-button",children:"View JSON"})}),(0,n.jsx)(D.$n,{variant:"primary",icon:"save",onClick:()=>bt.onSaveAsFile(),children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.export.save-button",children:"Save to file"})})]})]}),Ut&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Ay,{disableHeight:!0,children:({width:$n})=>Sn.value?(0,n.jsx)(y.B,{value:Fn,showLineNumbers:!0,language:sn?"yaml":"json",showMiniMap:!1,height:"500px",width:$n}):Sn.loading?(0,n.jsxs)("div",{children:[" ",(0,n.jsx)(r.x6,{i18nKey:"share-modal.export.loading",children:"Loading..."})]}):null}),(0,n.jsxs)(W.a.ButtonRow,{children:[(0,n.jsx)(D.$n,{variant:"secondary",fill:"outline",onClick:bt.onViewJSON,icon:"arrow-left",children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.export.back-button",children:"Back to export config"})}),(0,n.jsx)(f.b,{variant:"secondary",icon:"copy",disabled:Sn.loading,getText:()=>Fn??"",onClipboardCopy:bt.onClipboardCopy,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.view-json.copy-button",children:"Copy to Clipboard"})}),(0,n.jsx)(D.$n,{variant:"primary",icon:"save",disabled:Sn.loading,onClick:()=>bt.onSaveAsFile(),children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.export.save-button",children:"Save to file"})})]})]})]})}const J=u.Tp.pages.ExportDashboardDrawer.ExportAsJson;class _ extends re{static{this.Component=ee}getTabLabel(){return(0,r.t)("export.json.title","Export dashboard")}}function ee({model:bt}){const Kt=(0,g.of)(ae),{isSharingExternally:Ut,isViewingYAML:Jt,exportMode:en}=bt.useState(),sn=(0,p.A)(async()=>await bt.getExportableDashboardJson(),[Ut,en]),Sn=JSON.stringify(sn.value?.json,null,2),In=c.Ay.dump(sn.value?.json,{skipInvalid:!0}),On=Jt?In:Sn,Fn=async()=>{await bt.onSaveAsFile();const $n=(0,r.t)("export.json.download-successful_toast_message","Your JSON has been downloaded");(0,T.JD)((0,C.dx)((0,P.tZ)($n)))},ia=(0,r.t)("export.json.export-externally-label","Export the dashboard to use in another instance");return(0,n.jsxs)("div",{"data-testid":J.container,className:Kt.container,children:[(0,n.jsx)("p",{children:(0,n.jsx)(r.x6,{i18nKey:"export.json.info-text",children:"Copy or download a file containing the definition of your dashboard"})}),v.$.featureToggles.kubernetesDashboards?(0,n.jsx)(se,{dashboardJson:sn,isSharingExternally:Ut??!1,exportMode:en??te.Classic,isViewingYAML:Jt??!1,onExportModeChange:bt.onExportModeChange,onShareExternallyChange:bt.onShareExternallyChange,onViewYAML:bt.onViewYAML}):(0,n.jsxs)(E.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(x.d,{label:ia,"data-testid":J.exportExternallyToggle,id:"export-externally-toggle",value:!!Ut,onChange:bt.onShareExternallyChange}),(0,n.jsx)(m.J,{children:ia})]}),(0,n.jsx)("div",{className:Kt.codeEditorBox,children:(0,n.jsx)(h.Ay,{"data-testid":J.codeEditor,disableWidth:!0,children:({height:$n})=>On?(0,n.jsx)(y.B,{value:On,language:Jt?"yaml":"json",showLineNumbers:!0,showMiniMap:!1,height:$n,width:"100%",readOnly:!0}):sn.loading&&(0,n.jsx)(b.y,{})})}),(0,n.jsx)("div",{className:Kt.buttonsContainer,children:(0,n.jsxs)(E.B,{gap:1,flex:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(D.$n,{"data-testid":J.saveToFileButton,variant:"primary",icon:"download-alt",onClick:Fn,children:(0,n.jsx)(r.x6,{i18nKey:"export.json.download-button",children:"Download file"})}),(0,n.jsx)(f.b,{"data-testid":J.copyToClipboardButton,variant:"secondary",icon:"copy",disabled:sn.loading,getText:()=>On??"",onClipboardCopy:bt.onClipboardCopy,children:(0,n.jsx)(r.x6,{i18nKey:"export.json.copy-button",children:"Copy to clipboard"})}),(0,n.jsx)(D.$n,{"data-testid":J.cancelButton,variant:"secondary",onClick:bt.useState().onDismiss,fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"export.json.cancel-button",children:"Cancel"})})]})})]})}function ae(bt){return{container:(0,i.css)({height:"100%"}),codeEditorBox:(0,i.css)({margin:`${bt.spacing(2,0)}`,height:"75%"}),buttonsContainer:(0,i.css)({paddingBottom:bt.spacing(2)})}}var le=e(96540),L=e(41053),ie=e(89640),oe=e(49185),ue=e(47327),ye=e(66404);function fe({imageBlob:bt,isLoading:Kt,error:Ut,title:Jt}){const en=(0,g.of)(Ae),[sn,{width:Sn}]=(0,oe.A)(),In=(0,le.useMemo)(()=>bt?URL.createObjectURL(bt):void 0,[bt]);return(0,le.useEffect)(()=>()=>{In&&URL.revokeObjectURL(In)},[In]),(0,n.jsxs)("div",{className:en.previewContainer,ref:sn,"aria-label":(0,r.t)("share-modal.image.preview-region","Image preview"),role:"region",children:[Kt&&(0,n.jsxs)("div",{className:en.loadingBarContainer,role:"status","aria-label":(0,r.t)("share-modal.image.generating","Generating image..."),children:[(0,n.jsx)(ue.G,{width:Sn}),Jt&&(0,n.jsx)("div",{className:en.titleContainer,children:(0,n.jsx)(ye.E,{variant:"body",children:Jt})})]}),Ut&&!Kt&&(0,n.jsx)(Ee,{error:Ut}),!Kt&&In&&(0,n.jsx)("img",{src:In,alt:(0,r.t)("share-modal.image.preview","Preview"),className:en.image,"aria-label":(0,r.t)("share-modal.image.preview-aria","Generated image preview")})]})}function Ee({error:bt}){if(!bt)return null;const Kt=bt.message&&bt.message!==bt.title;return(0,n.jsx)(k.F,{severity:"error",title:bt.title,children:Kt&&(0,n.jsx)("div",{children:bt.message})})}const Ae=bt=>({previewContainer:(0,i.css)({position:"relative",width:"100%",minHeight:"200px",backgroundColor:bt.colors.background.secondary,borderRadius:bt.shape.radius.default,overflow:"hidden"}),loadingBarContainer:(0,i.css)({position:"absolute",top:0,left:0,right:0}),titleContainer:(0,i.css)({padding:bt.spacing(1)}),image:(0,i.css)({maxWidth:"100%",maxHeight:"100%",objectFit:"contain"})});var Ge=e(75505),Fe=e(68143),Pe=e(52043),Ve=e(15130);async function me({dashboard:bt,scale:Kt=v.$.rendererDefaultImageScale||2}){try{if(!v.$.rendererAvailable)return{blob:new Blob,error:"Image renderer plugin not installed"};const Ut=(0,Pe.u)({uid:bt.state.uid,currentQueryParams:window.location.search,render:!0,absolute:!0,updateQuery:{height:-1,width:window.innerWidth||v.$.rendererDefaultImageWidth||1e3,scale:Kt,kiosk:!0,hideNav:!0,orgId:String(Ve.TP.user.orgId),fullPageImage:!0}}),Jt=await(0,Ge.s)((0,Fe.AI)().fetch({url:Ut,responseType:"blob"}));return Jt.ok?Jt.data instanceof Blob?{blob:Jt.data}:{blob:new Blob,error:"Invalid response data format"}:{blob:new Blob,error:`Failed to generate image: ${Jt.status} ${Jt.statusText}`}}catch(Ut){return{blob:new Blob,error:Ut instanceof Error&&Ut.message?Ut.message:"Failed to generate image"}}}class Se extends s.Bs{static{this.Component=Qe}getTabLabel(){return(0,r.t)("share-modal.image.title","Export as image")}}function Qe({model:bt}){const{onDismiss:Kt}=bt.useState(),Ut=(0,l.YQ)(bt),Jt=(0,g.of)(Ie),[{loading:en,value:sn,error:Sn},In]=(0,L.A)(async()=>{try{const Fn=await me({dashboard:Ut,scale:v.$.rendererDefaultImageScale||1});if(Fn.error)throw new Error(Fn.error);return w.c.generateDashboardImageClicked({scale:v.$.rendererDefaultImageScale||1,shareResource:"dashboard",success:!0}),Fn.blob}catch(Fn){throw console.error("Error exporting image:",Fn),w.c.generateDashboardImageClicked({scale:v.$.rendererDefaultImageScale||1,shareResource:"dashboard",success:!1,error:Fn instanceof Error?Fn.message:"Failed to generate image"}),Fn}},[Ut]);(0,le.useEffect)(()=>()=>{sn&&URL.revokeObjectURL(URL.createObjectURL(sn))},[sn]);const On=()=>{if(!sn)return;const Fn=new Date().getTime(),ia=Ut.state.title;(0,M.saveAs)(sn,`${ia}-${Fn}.png`),w.c.downloadDashboardImageClicked({fileName:`${ia}-${Fn}.png`,shareResource:"dashboard"})};return v.$.rendererAvailable?(0,n.jsxs)("main",{children:[(0,n.jsx)("p",{className:Jt.info,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.image.info-text",children:"Save this dashboard as an image"})}),(0,n.jsxs)("div",{className:Jt.buttonRow,role:"group","aria-label":(0,r.t)("share-modal.image.actions","Image export actions"),children:[sn?(0,n.jsx)(D.$n,{variant:"primary",onClick:On,icon:"download-alt",children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.image.download-button",children:"Download image"})}):(0,n.jsx)(D.$n,{variant:"primary",onClick:In,disabled:en,icon:"gf-layout-simple","aria-describedby":en?"generate-status":void 0,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.image.generate-button",children:"Generate image"})}),(0,n.jsx)(D.$n,{variant:"secondary",onClick:Kt,fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.image.cancel-button",children:"Cancel"})})]}),en&&(0,n.jsx)("div",{id:"generate-status","aria-live":"polite",className:"sr-only",children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.image.generating",children:"Generating image..."})}),(0,n.jsx)(fe,{imageBlob:sn||null,isLoading:en,error:Sn?{title:(0,r.t)("share-modal.image.error-title","Failed to generate image"),message:Sn instanceof Error?Sn.message:"Failed to generate image"}:null,title:Ut.state.title})]}):(0,n.jsx)(Ue,{})}function Ue(){return v.$.rendererAvailable?null:(0,n.jsxs)(k.F,{severity:"info",title:(0,r.t)("share-modal.link.render-alert","Image renderer plugin not installed"),children:[(0,n.jsx)("div",{children:(0,r.t)("share-modal.link.render-alert","Image renderer plugin not installed")}),(0,n.jsx)("div",{children:(0,n.jsxs)(r.x6,{i18nKey:"share-modal.link.render-instructions",children:["To render an image, you must install the"," ",(0,n.jsx)(ie.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0,children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})})]})}const Ie=bt=>({info:(0,i.css)({marginBottom:bt.spacing(2)}),buttonRow:(0,i.css)({display:"flex",gap:bt.spacing(2),marginBottom:bt.spacing(2)})});var Re=e(3271),Ke=e(73427),Le=e(62905),ze=e(82110),Be=e(24313),$e=e(11257),Ye=e(76319),de=e(70735);function ge({onConfirm:bt,onDismiss:Kt,description:Ut,confirmButtonLabel:Jt,title:en,isActionLoading:sn}){const Sn=(0,g.of)(pe),In=()=>(0,n.jsx)("div",{className:Sn.bodyContainer,children:(0,n.jsxs)(E.B,{justifyContent:"space-between",children:[(0,n.jsxs)(E.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(Ye.K,{size:"xl",name:"angle-left","aria-label":(0,r.t)("share-drawer.confirm-action.back-arrow-button","Back button"),onClick:Kt}),(0,n.jsx)(ye.E,{variant:"h4",children:en})]}),sn&&(0,n.jsx)(b.y,{})]})});return(0,n.jsx)(de.k,{body:(0,n.jsx)(In,{}),description:Ut,confirmButtonLabel:Jt,confirmButtonVariant:"destructive",dismissButtonLabel:(0,r.t)("share-drawer.confirm-action.cancel-button","Cancel"),dismissButtonVariant:"secondary",justifyButtons:"flex-start",onConfirm:bt,onDismiss:Kt})}const pe=bt=>({bodyContainer:(0,i.css)({marginBottom:bt.spacing(2)})}),De=(0,le.createContext)(void 0),Me=()=>{const bt=(0,le.useContext)(De);if(bt===void 0)throw new Error("useShareDrawerContext must be used within a DrawerContext");return bt};var be=e(49785),Oe=e(16780),Ne=e(45967),We=e(30703),qe=e(63527),st=e(83692);const rt=u.Tp.pages.ShareDashboardDrawer.ShareExternally.Configuration;function ot(){const bt=(0,g.of)(mt),{dashboard:Kt}=Me(),[Ut,{isLoading:Jt}]=(0,Le.T2)(),{data:en}=Le.Sm.endpoints?.getPublicDashboard.useQueryState(Kt.state.uid),sn=Ke.TP.hasPermission($e.w.DashboardsPublicWrite),Sn=Jt||!sn,On=s.jh.getTimeRange(Kt).useState(),{handleSubmit:Fn,setValue:ia,control:$n}=(0,be.mN)({defaultValues:{isAnnotationsEnabled:en?.annotationsEnabled,isTimeSelectionEnabled:en?.timeSelectionEnabled}}),ca=async(Va,ka)=>{ia(Va,ka),await Fn(ss=>Ia({...ss,[Va]:ka}))()},Ia=Va=>{const{isAnnotationsEnabled:ka,isTimeSelectionEnabled:ss}=Va;Ut({dashboard:Kt,payload:{...en,annotationsEnabled:ka,timeSelectionEnabled:ss}})};return(0,n.jsxs)(E.B,{direction:"column",gap:2,children:[(0,n.jsx)(ye.E,{element:"p",children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.configuration.settings-label",children:"Settings"})}),(0,n.jsxs)(E.B,{justifyContent:"space-between",children:[(0,n.jsx)("form",{onSubmit:Fn(Ia),children:(0,n.jsx)(Oe.n,{disabled:Sn,children:(0,n.jsxs)(E.B,{direction:"column",gap:2,children:[(0,n.jsxs)(E.B,{gap:1,children:[(0,n.jsx)(be.xI,{render:({field:{ref:Va,...ka}})=>(0,n.jsx)(x.d,{...ka,"data-testid":rt.enableTimeRangeSwitch,onChange:ss=>{w.c.publicDashboardTimeSelectionChanged({enabled:ss.currentTarget.checked}),ca("isTimeSelectionEnabled",ss.currentTarget.checked)},label:(0,r.t)("public-dashboard.configuration.enable-time-range-label","Enable time range")}),control:$n,name:"isTimeSelectionEnabled"}),(0,n.jsx)(m.J,{description:(0,r.t)("public-dashboard.configuration.enable-time-range-description","Allow people to change time range"),children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.configuration.enable-time-range-label",children:"Enable time range"})})]}),(0,n.jsxs)(E.B,{gap:1,children:[(0,n.jsx)(be.xI,{render:({field:{ref:Va,...ka}})=>(0,n.jsx)(x.d,{...ka,"data-testid":rt.enableAnnotationsSwitch,onChange:ss=>{w.c.publicDashboardAnnotationsSelectionChanged({enabled:ss.currentTarget.checked}),ca("isAnnotationsEnabled",ss.currentTarget.checked)},label:(0,r.t)("public-dashboard.configuration.display-annotations-label","Display annotations")}),control:$n,name:"isAnnotationsEnabled"}),(0,n.jsx)(m.J,{style:{flex:1},description:(0,r.t)("public-dashboard.configuration.display-annotations-description","Present annotations on this dashboard"),children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.configuration.display-annotations-label",children:"Display annotations"})})]}),(0,n.jsxs)(E.B,{gap:1,alignItems:"flex-start",children:[(0,n.jsx)("div",{className:bt.timeRange,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.configuration.time-range-label",children:"Time range"})}),(0,n.jsx)("div",{className:(0,i.cx)(bt.timeRange,bt.timeRangeValue),children:(0,n.jsx)(st.f,{value:On.value})}),(0,n.jsx)(Ne.m,{placement:"right",content:(0,r.t)("public-dashboard.configuration.time-range-tooltip","The shared dashboard uses the default time range settings of the dashboard"),children:(0,n.jsx)(We.I,{name:"info-circle",size:"md"})})]})]})})}),Jt&&(0,n.jsx)(b.y,{})]})]})}const mt=bt=>({timeRange:(0,i.css)({fontSize:bt.typography.bodySmall.fontSize,fontWeight:bt.typography.bodySmall.fontWeight}),timeRangeValue:(0,i.css)({color:bt.colors.text.secondary})});var pt=e(87063),ke=e(88559);const Ze=u.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,nt=({onDelete:bt,onReshare:Kt})=>(0,n.jsxs)(pt.W,{children:[(0,n.jsx)(pt.W.Item,{label:(0,r.t)("public-dashboard.email-sharing.resend-invite-label","Resend invite"),onClick:Kt}),(0,n.jsx)(pt.W.Item,{label:(0,r.t)("public-dashboard.email-sharing.revoke-access-label","Revoke access"),destructive:!0,onClick:bt})]}),ut=({recipients:bt,dashboardUid:Kt,publicDashboard:Ut})=>{const Jt=(0,g.of)(ht),[en,{isLoading:sn}]=(0,Le.$L)(),[Sn,{isLoading:In}]=(0,Le.NA)(),On=sn||In,Fn=($n,ca)=>{w.c.revokePublicDashboardEmailClicked(),en({recipientUid:$n,recipientEmail:ca,dashboardUid:Kt,uid:Ut.uid})},ia=$n=>{w.c.resendPublicDashboardEmailClicked(),Sn({recipientUid:$n,uid:Ut.uid})};return(0,n.jsx)("table",{"data-testid":Ze.EmailSharingList,className:Jt.table,children:(0,n.jsx)("tbody",{children:bt.map(($n,ca)=>(0,n.jsxs)("tr",{className:Jt.listItem,children:[(0,n.jsx)("td",{className:Jt.user,children:(0,n.jsxs)(E.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("div",{className:Jt.icon,children:(0,n.jsx)(We.I,{name:"user"})}),(0,n.jsx)(ye.E,{children:$n.recipient})]})}),(0,n.jsx)("td",{children:On&&(0,n.jsx)(b.y,{})}),(0,n.jsx)("td",{children:(0,n.jsx)(ke.m,{overlay:(0,n.jsx)(nt,{onDelete:()=>Fn($n.uid,$n.recipient),onReshare:()=>ia($n.uid)}),children:(0,n.jsx)(Ye.K,{name:"ellipsis-v","aria-label":(0,r.t)("dashboard-scene.email-list.aria-label-emailmenu","Toggle email menu"),variant:"secondary",size:"lg"})})})]},$n.uid))})})},gt=({dashboard:bt})=>{const Kt=(0,g.of)(ht),{data:Ut}=Le.Sm.endpoints?.getPublicDashboard.useQueryState(bt.state.uid);return(0,n.jsx)(U.D,{label:(0,r.t)("public-dashboard.email-sharing.recipient-list-title","People with access"),description:(0,r.t)("public-dashboard.email-sharing.recipient-list-description","Only people you've directly invited can access this dashboard"),className:Kt.listField,children:Ut?.recipients?.length?(0,n.jsx)("div",{className:Kt.listContainer,children:(0,n.jsx)(ut,{recipients:Ut.recipients,dashboardUid:bt.state.uid,publicDashboard:Ut})}):(0,n.jsx)(n.Fragment,{})})},ht=bt=>({listField:(0,i.css)({marginBottom:0}),listContainer:(0,i.css)({maxHeight:"140px",overflowY:"auto"}),table:(0,i.css)({width:"100%"}),listItem:(0,i.css)({display:"flex",alignItems:"center",gap:bt.spacing(.5),padding:bt.spacing(.75,1),color:bt.colors.text.secondary}),user:(0,i.css)({flex:1}),icon:(0,i.css)({border:`${bt.spacing(.25)} solid ${bt.colors.text.secondary}`,padding:bt.spacing(.125,.5),borderRadius:bt.shape.radius.circle,color:bt.colors.text.secondary})}),tt=u.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,Ot=()=>{const{dashboard:bt}=Me(),{data:Kt,isError:Ut}=Le.Sm.endpoints?.getPublicDashboard.useQueryState(bt.state.uid),[Jt,{isLoading:en}]=(0,Le.NY)(),sn=Ke.TP.hasPermission($e.w.DashboardsPublicWrite),{register:Sn,handleSubmit:In,formState:{errors:On,isValid:Fn},reset:ia}=(0,be.mN)({defaultValues:{email:""},mode:"onSubmit"}),$n=async ca=>{w.c.publicDashboardEmailInviteClicked(),await Jt({recipient:ca.email,uid:Kt.uid,dashboardUid:bt.state.uid}).unwrap(),ia({email:""})};return(0,n.jsxs)("div",{children:[(0,n.jsx)("form",{onSubmit:In($n),children:(0,n.jsx)(Oe.n,{disabled:!sn||Ut,children:(0,n.jsx)(U.D,{label:(0,n.jsxs)(E.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.recipient-invitation-button",children:"Invite"}),(0,n.jsx)(Ne.m,{placement:"right",content:(0,r.t)("public-dashboard.email-sharing.recipient-invitation-tooltip","This dashboard contains sensitive data. By using this feature you will be sharing with external people."),children:(0,n.jsx)(We.I,{name:"info-circle",size:"sm"})})]}),description:(0,r.t)("public-dashboard.email-sharing.recipient-invitation-description","Invite someone by email"),error:On.email?.message,invalid:!!On.email?.message,children:(0,n.jsxs)(E.B,{direction:"row",children:[(0,n.jsx)(qe.p,{placeholder:(0,r.t)("public-dashboard.email-sharing.recipient-email-placeholder","Email"),autoCapitalize:"none",loading:en,...Sn("email",{required:(0,r.t)("public-dashboard.email-sharing.recipient-required-email-text","Email is required"),pattern:{value:Be._l,message:(0,r.t)("public-dashboard.email-sharing.recipient-invalid-email-text","Invalid email")}}),"data-testid":tt.EmailSharingInput}),(0,n.jsx)(D.$n,{type:"submit",variant:"primary",disabled:en||!Fn,"data-testid":tt.EmailSharingInviteButton,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.recipient-invitation-button",children:"Invite"})})]})})})}),(0,n.jsx)(gt,{dashboard:bt}),(0,n.jsx)(Re.c,{}),(0,n.jsx)(ot,{})]})};var jt=e(32635);const wt="https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/shared-dashboards/#share-externally-with-specific-people",Ht=u.Tp.pages.ShareDashboardDrawer.ShareExternally;function hn(){return(0,n.jsx)(k.F,{title:"",severity:"info",bottomSpacing:0,"data-testid":Ht.emailSharingAlert,children:(0,n.jsxs)(E.B,{justifyContent:"space-between",gap:2,alignItems:"center",children:[(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.alert-text",children:"Sharing dashboards by email is billed per user for the duration of the 30-day token, regardless of how many dashboards are shared. Billing stops after 30 days unless you renew the token."}),(0,n.jsx)(D.$n,{variant:"secondary",onClick:()=>window.open(wt,"_blank"),type:"button",children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.learn-more-button",children:"Learn more"})})]})})}const Dn=u.Tp.pages.ShareDashboardDrawer.ShareExternally.Creation,Bn=({hasError:bt})=>{const{dashboard:Kt,onDismiss:Ut}=Me(),Jt=(0,g.of)(xn),[en,{isLoading:sn,isError:Sn}]=(0,Le.U9)(),In=Ke.TP.hasPermission($e.w.DashboardsPublicWrite),On=!In||sn||Sn||bt,{handleSubmit:Fn,register:ia,formState:{isValid:$n}}=(0,be.mN)({mode:"onChange"}),ca=()=>{w.c.generatePublicDashboardUrlClicked({share:Be.Xo.EMAIL}),en({dashboard:Kt,payload:{share:Be.Xo.EMAIL,isEnabled:!0}})};return(0,n.jsxs)(n.Fragment,{children:[In&&(0,n.jsx)(hn,{}),(0,n.jsx)("form",{onSubmit:Fn(ca),children:(0,n.jsxs)(Oe.n,{disabled:On,children:[(0,n.jsx)("div",{className:Jt.checkbox,children:(0,n.jsx)(jt.S,{...ia("billAcknowledgment",{required:!0}),label:(0,r.t)("public-dashboard.email-sharing.bill-ack","I understand that adding users requires payment.*")})}),(0,n.jsxs)(E.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)(D.$n,{type:"submit",disabled:!$n,"data-testid":Dn.EmailShare.createButton,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.accept-button",children:"Accept"})}),(0,n.jsx)(D.$n,{variant:"secondary",onClick:Ut,"data-testid":Dn.EmailShare.cancelButton,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.cancel-button",children:"Cancel"})}),sn&&(0,n.jsx)(b.y,{})]})]})})]})},xn=bt=>({checkbox:(0,i.css)({marginBottom:bt.spacing(2)})}),ft=()=>{const{dashboard:bt}=Me(),{data:Kt,isError:Ut}=Le.Sm.endpoints?.getPublicDashboard.useQueryState(bt.state.uid);return(0,n.jsx)(n.Fragment,{children:Kt?(0,n.jsx)(Ot,{}):(0,n.jsx)(Bn,{hasError:Ut})})},St="https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/shared-dashboards",Tt=u.Tp.pages.ShareDashboardDrawer.ShareExternally,Je=()=>(0,n.jsx)(k.F,{title:"",severity:"info",bottomSpacing:0,"data-testid":Tt.publicAlert,children:(0,n.jsxs)(E.B,{justifyContent:"space-between",gap:2,alignItems:"center",children:[(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.public-sharing.alert-text",children:"Sharing this dashboard externally makes it entirely accessible to anyone with the link."}),(0,n.jsx)(D.$n,{variant:"secondary",onClick:()=>window.open(St,"_blank"),type:"button",children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.public-sharing.learn-more-button",children:"Learn more"})})]})}),Pt=u.Tp.pages.ShareDashboardDrawer.ShareExternally.Creation;function Yt({hasError:bt}){const{dashboard:Kt,onDismiss:Ut}=Me(),Jt=(0,g.of)(Lt),en=Ke.TP.hasPermission($e.w.DashboardsPublicWrite),{handleSubmit:sn,register:Sn,formState:{isValid:In}}=(0,be.mN)({mode:"onChange"}),[On,{isLoading:Fn,isError:ia}]=(0,Le.U9)(),$n=()=>{w.c.generatePublicDashboardUrlClicked({share:Be.Xo.PUBLIC}),On({dashboard:Kt,payload:{share:Be.Xo.PUBLIC,isEnabled:!0}})},ca=!en||Fn||ia||bt;return(0,n.jsxs)(n.Fragment,{children:[en&&(0,n.jsx)(Je,{}),(0,n.jsx)("form",{onSubmit:sn($n),children:(0,n.jsxs)(Oe.n,{disabled:ca,children:[(0,n.jsx)("div",{className:Jt.checkbox,children:(0,n.jsx)(jt.S,{...Sn("publicAcknowledgment",{required:!0}),label:(0,r.t)("public-dashboard.public-sharing.public-ack","I understand that this entire dashboard will be public.*"),"data-testid":Pt.willBePublicCheckbox})}),(0,n.jsxs)(E.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)(D.$n,{type:"submit",disabled:!In,"data-testid":Pt.PublicShare.createButton,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.public-sharing.accept-button",children:"Accept"})}),(0,n.jsx)(D.$n,{variant:"secondary",onClick:Ut,"data-testid":Pt.PublicShare.cancelButton,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.public-sharing.cancel-button",children:"Cancel"})}),Fn&&(0,n.jsx)(b.y,{})]})]})})]})}const Lt=bt=>({checkbox:(0,i.css)({marginBottom:bt.spacing(2)})});function fn(){const{dashboard:bt}=Me(),{data:Kt,isError:Ut}=Le.Sm.endpoints?.getPublicDashboard.useQueryState(bt.state.uid);return(0,n.jsx)(n.Fragment,{children:Kt?(0,n.jsx)(ot,{}):(0,n.jsx)(Yt,{hasError:Ut})})}var En=e(37672),An=e(44173),Gn=e(35195),zn=e(36580),sa=e(35143),ta=e(28998);const ra=async bt=>{let Kt=new Set;for(const Ut of bt)sa.z.has(Ut)&&await(0,ta.tR)().get(Ut)instanceof zn.iy||Kt.add(Ut);return Array.from(Kt)};function ea(bt){const Kt=new Set,Ut=bt.state.body.getVizPanels();for(const Jt of Ut){const en=Un(Jt);for(const sn of en)Kt.add(sn)}return Array.from(Kt).sort()}function Un(bt){const Kt=new Set,Ut=(0,l.un)(bt);if(Ut)for(const Jt of Ut.state.queries)Kt.add(Jt.datasource?.type??"");return Array.from(Kt)}function oa(bt){const{value:Kt}=(0,p.A)(async()=>{const Ut=ea(bt);return ra(Ut)},[]);return Kt}function Ca({publicDashboard:bt}){const{dashboard:Kt}=Me(),Ut=Ke.TP.hasPermission($e.w.DashboardsPublicWrite),Jt=oa(Kt),en=(Kt.state.$variables?.state.variables.length??0)>0;return(0,n.jsxs)(n.Fragment,{children:[Ut&&en&&(0,n.jsx)(An.D,{showDescription:!1}),!Ut&&(0,n.jsx)(Gn.t,{mode:bt?"edit":"create"}),Ut&&!!Jt?.length&&(0,n.jsx)(En.s,{unsupportedDataSources:Jt.join(", ")}),bt?.share===Be.Xo.EMAIL&&(0,Be.AY)()&&(0,n.jsx)(hn,{}),bt?.share===Be.Xo.PUBLIC&&(0,n.jsx)(Je,{})]})}var ya=e(30360),Xa=e(18857);const Ta=()=>({label:(0,r.t)("public-dashboard.share-externally.public-share-type-option-label","Anyone with the link"),description:(0,r.t)("public-dashboard.share-externally.public-share-type-option-description","Anyone with the link can access dashboard"),value:Be.Xo.PUBLIC,icon:"globe"}),Pa=()=>({label:(0,r.t)("public-dashboard.share-externally.email-share-type-option-label","Only specific people"),description:(0,r.t)("public-dashboard.share-externally.email-share-type-option-description","Only people with the link can access dashboard"),value:Be.Xo.EMAIL,icon:"users-alt"}),pa=u.Tp.pages.ShareDashboardDrawer.ShareExternally;function Ua({setShareType:bt,options:Kt,value:Ut}){const{dashboard:Jt}=Me(),en=(0,g.of)(ma),{data:sn}=Le.Sm.endpoints?.getPublicDashboard.useQueryState(Jt.state.uid),[Sn,{isLoading:In}]=(0,Le.ft)(),On=Ke.TP.hasPermission($e.w.DashboardsPublicWrite),Fn=Ta(),ia=$n=>{if(!sn)return;w.c.publicDashboardShareTypeChange({shareType:$n===Be.Xo.EMAIL?"email":"public"});const ca={dashboard:Jt,payload:{...sn,share:$n}};Sn(ca)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)(E.B,{justifyContent:"space-between",children:[(0,n.jsx)(m.J,{description:Ut.description,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.share-configuration.share-type-label",children:"Link access"})}),In&&(0,n.jsx)(b.y,{})]}),(0,Be.AY)()?(0,n.jsx)(Xa.l6,{"data-testid":pa.shareTypeSelect,options:Kt,value:Ut,disabled:!On,onChange:$n=>{bt($n),ia($n.value)},className:en.select}):(0,n.jsxs)(E.B,{gap:1,alignItems:"center",children:[(0,ya.Uo)(Fn.icon)&&(0,n.jsx)(We.I,{name:(0,ya.Uo)(Fn.icon)}),(0,n.jsx)(ye.E,{children:Fn.label})]})]})}const ma=()=>({select:(0,i.css)({flex:1})}),Ka=u.Tp.pages.ShareDashboardDrawer.ShareExternally,Oa=()=>(0,Be.AY)()?[Pa(),Ta()]:[Ta()];class is extends s.Bs{static{this.Component=Bt}getTabLabel(){return(0,r.t)("share-dashboard.menu.share-externally-title","Share externally")}}function Bt({model:bt}){const[Kt,Ut]=(0,le.useState)(!1),Jt=(0,g.of)(kt),en=(0,l.YQ)(bt),{data:sn,isLoading:Sn}=(0,Le.Bs)(en.state.uid),[In,{isLoading:On}]=(0,Le.bN)(),Fn=()=>{Ut(!0)},ia=async()=>{w.c.revokePublicDashboardClicked(),await In({dashboard:en,uid:sn.uid,dashboardUid:en.state.uid}).unwrap(),Ut(!1)};return Sn?(0,n.jsx)(ze.a,{}):Kt?(0,n.jsx)(ge,{title:(0,r.t)("public-dashboard.share-externally.revoke-access-button","Revoke access"),confirmButtonLabel:(0,r.t)("public-dashboard.share-externally.revoke-access-button","Revoke access"),onConfirm:ia,onDismiss:()=>Ut(!1),description:(0,r.t)("public-dashboard.share-externally.revoke-access-description","Are you sure you want to revoke this access? The dashboard can no longer be shared."),isActionLoading:On}):(0,n.jsx)("div",{className:Jt.container,children:(0,n.jsx)($t,{publicDashboard:sn,onRevokeClick:Fn})})}function $t({publicDashboard:bt,onRevokeClick:Kt}){const Ut=Oa(),Jt=(0,le.useMemo)(()=>bt&&(0,Be.AY)()?Ut.find(On=>On.value===bt?.share)??Ut[0]:Ut[0],[bt,Ut]),[en,sn]=(0,le.useState)(Jt),Sn=(0,le.useMemo)(()=>en.value===Be.Xo.EMAIL&&(0,Be.AY)()?(0,n.jsx)(ft,{}):(0,n.jsx)(fn,{}),[en]);return(0,n.jsxs)(E.B,{direction:"column",gap:2,"data-testid":Ka.container,children:[(0,n.jsx)(Ca,{publicDashboard:bt}),(0,n.jsx)(Ua,{setShareType:sn,value:en,options:Ut}),Sn,bt&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Re.c,{spacing:0}),(0,n.jsx)(zt,{publicDashboard:bt,onRevokeClick:Kt})]})]})}function zt({publicDashboard:bt,onRevokeClick:Kt}){const{dashboard:Ut}=Me(),[Jt,{isLoading:en}]=(0,Le.eq)(),sn=(0,g.of)(kt),Sn=Ke.TP.hasPermission($e.w.DashboardsPublicWrite);function In(){w.c.publicDashboardUrlCopied()}const On=async()=>{w.c.publicDashboardPauseSharingClicked({paused:!bt.isEnabled}),Jt({dashboard:Ut,payload:{...bt,isEnabled:!bt.isEnabled}})};return(0,n.jsxs)(E.B,{alignItems:"center",direction:{xs:"column",sm:"row"},children:[(0,n.jsx)("div",{className:sn.actionsContainer,children:(0,n.jsxs)(E.B,{gap:1,flex:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(f.b,{"data-testid":Ka.Configuration.copyUrlButton,variant:"primary",fill:"outline",icon:"link",getText:()=>(0,Be.mL)(bt.accessToken),onClipboardCopy:In,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.share-externally.copy-link-button",children:"Copy external link"})}),(0,n.jsx)(D.$n,{icon:"trash-alt",variant:"destructive",fill:"outline",disabled:en||!Sn,onClick:Kt,"data-testid":Ka.Configuration.revokeAccessButton,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.share-externally.revoke-access-button",children:"Revoke access"})}),(0,n.jsx)(D.$n,{icon:bt.isEnabled?"pause":"play",variant:"secondary",fill:"outline",tooltip:bt.isEnabled?(0,r.t)("public-dashboard.share-externally.pause-access-tooltip","Pausing will temporarily disable access to this dashboard for all users"):"",onClick:On,disabled:en||!Sn,"data-testid":Ka.Configuration.toggleAccessButton,children:bt.isEnabled?(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.share-externally.pause-access-button",children:"Pause access"}):(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.share-externally.resume-access-button",children:"Resume access"})})]})}),en&&(0,n.jsx)(b.y,{})]})}const kt=bt=>({container:(0,i.css)({paddingBottom:bt.spacing(2)}),actionsContainer:(0,i.css)({width:"100%"})});var mn=e(29216);const on=u.Tp.pages.ShareDashboardDrawer.ShareInternally;function Ln({useLockedTime:bt,onToggleLockedTime:Kt,useShortUrl:Ut,onUrlShorten:Jt,onChangeTheme:en,selectedTheme:sn,isLoading:Sn}){return(0,n.jsxs)(E.B,{justifyContent:"space-between",children:[(0,n.jsxs)(E.B,{gap:2,direction:"column",children:[(0,n.jsxs)(E.B,{gap:1,direction:"column",children:[(0,n.jsxs)(E.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(x.d,{label:(0,r.t)("link.share.time-range-label","Lock time range"),id:"share-current-time-range",value:bt,onChange:Kt,"data-testid":on.lockTimeRangeSwitch}),(0,n.jsx)(m.J,{description:(0,r.t)("link.share.time-range-description","Change the current relative time range to an absolute time range"),id:"time-range-description",children:(0,n.jsx)(r.x6,{i18nKey:"link.share.time-range-label",children:"Lock time range"})})]}),(0,n.jsxs)(E.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(x.d,{id:"share-short-url",value:Ut,label:(0,r.t)("link.share.short-url-label","Shorten link"),onChange:Jt,"data-testid":on.shortenUrlSwitch}),(0,n.jsx)(m.J,{children:(0,n.jsx)(r.x6,{i18nKey:"link.share.short-url-label",children:"Shorten link"})})]})]}),(0,n.jsx)(mn.w,{selectedTheme:sn,onChange:en})]}),Sn&&(0,n.jsx)(b.y,{})]})}var Hn=e(25229),Tn=e(4571);class Nn extends s.Bs{constructor(Kt){super({...Kt,useLockedTime:Kt.useLockedTime??!0,useShortUrl:Kt.useShortUrl??!1,selectedTheme:Kt.selectedTheme??"current",shareUrl:"",imageUrl:"",isBuildUrlLoading:!1}),this.tabId=o.wr.link,this.buildUrl=async Ut=>{this.setState({isBuildUrlLoading:!0});const{panelRef:Jt,useLockedTime:en,useShortUrl:sn,selectedTheme:Sn}=this.state,In=(0,l.YQ)(this),On=Jt?.resolve(),Fn={useAbsoluteTimeRange:en,theme:Sn,useShortUrl:sn};let ia=(0,Tn.VN)(In,Fn,On);sn&&(ia=await(0,Tn.fn)(ia));const $n=s.jh.getTimeRange(On??In),ca=(0,Tn.$l)(Fn,$n,On);let Ia=ca;On&&(delete Ia.viewPanel,Ia.panelId=On.getPathId(),Ia["__feature.dashboardSceneSolo"]=!0);const Va=(0,Pe.u)({uid:In.state.uid,currentQueryParams:window.location.search,updateQuery:{...ca,...Ut,panelId:On?.getPathId()},absolute:!0,soloRoute:!0,render:!0,timeZone:Zn($n.getTimeZone())});this.setState({shareUrl:ia,imageUrl:Va,isBuildUrlLoading:!1})},this.getShareUrl=()=>this.state.shareUrl,this.onCopy=()=>{w.c.shareLinkCopied({currentTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl,shareResource:(0,o.hD)(this.state.panelRef)})},this.addActivationHandler(()=>{this.buildUrl()}),this.onToggleLockedTime=this.onToggleLockedTime.bind(this),this.onUrlShorten=this.onUrlShorten.bind(this),this.onThemeChange=this.onThemeChange.bind(this)}static{this.Component=gn}getTabLabel(){return(0,r.t)("share-modal.tab-title.link","Link")}async onToggleLockedTime(){const Kt=!this.state.useLockedTime;this.setState({useLockedTime:Kt}),await this.buildUrl()}async onUrlShorten(){const Kt=!this.state.useShortUrl;this.setState({useShortUrl:Kt}),await this.buildUrl()}async onThemeChange(Kt){this.setState({selectedTheme:Kt}),await this.buildUrl()}}function gn({model:bt}){const Kt=bt.useState(),{panelRef:Ut}=Kt,Jt=(0,l.YQ)(bt),en=Ut?.resolve(),Sn=s.jh.getTimeRange(en??Jt).state.to==="now",{useLockedTime:In,useShortUrl:On,selectedTheme:Fn,shareUrl:ia,imageUrl:$n}=Kt,ca=u.Tp.pages.SharePanelModal,Ia=!!Jt.state.uid,Va=(0,r.t)("share-modal.link.time-range-label","Lock time range"),ka=(0,r.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),ss=(0,r.t)("share-modal.link.shorten-url","Shorten URL"),Ws=(0,r.t)("share-modal.link.link-url","Link URL");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.link.info-text",children:"Create a direct link to this dashboard or panel, customized with the options below."})}),(0,n.jsxs)(Oe.n,{children:[(0,n.jsx)(U.D,{label:Va,description:Sn?ka:"",children:(0,n.jsx)(x.d,{id:"share-current-time-range",value:In,onChange:bt.onToggleLockedTime})}),(0,n.jsx)(mn.w,{selectedTheme:Fn,onChange:bt.onThemeChange}),(0,n.jsx)(U.D,{label:ss,children:(0,n.jsx)(x.d,{id:"share-shorten-url",value:On,onChange:bt.onUrlShorten})}),(0,n.jsx)(U.D,{label:Ws,children:(0,n.jsx)(qe.p,{id:"link-url-input",value:ia,readOnly:!0,addonAfter:(0,n.jsx)(f.b,{icon:"copy",variant:"primary",getText:bt.getShareUrl,onClipboardCopy:bt.onCopy,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.link.copy-link-button",children:"Copy"})})})})]}),en&&v.$.rendererAvailable&&(0,n.jsxs)(n.Fragment,{children:[Ia&&(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsxs)("a",{href:$n,target:"_blank",rel:"noreferrer","aria-label":ca.linkToRenderedImage,children:[(0,n.jsx)(We.I,{name:"camera"}),"\xA0",(0,n.jsx)(r.x6,{i18nKey:"share-modal.link.rendered-image",children:"Direct link rendered image"})]})}),!Ia&&(0,n.jsx)(k.F,{severity:"info",title:(0,r.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.link.save-dashboard",children:"To render a panel image, you must save the dashboard first."})})]}),en&&!v.$.rendererAvailable&&(0,n.jsx)(k.F,{severity:"info",title:(0,r.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0,children:(0,n.jsxs)(r.x6,{i18nKey:"share-modal.link.render-instructions",children:["To render an image, you must install the"," ",(0,n.jsx)(ie.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0,children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})})]})}function Zn(bt){const Kt="UTC"+encodeURIComponent((0,Hn.KQ)().format("Z"));if(bt==="utc")return"UTC";if(bt==="browser"){if(!window.Intl)return Kt;const Jt=window.Intl.DateTimeFormat().resolvedOptions();return Jt.timeZone?Jt.timeZone:Kt}return bt}var kn=e(12434);const it=u.Tp.pages.ShareDashboardDrawer.ShareInternally;class Wt extends Nn{static{this.Component=Vt}constructor(Kt){const{useAbsoluteTimeRange:Ut,useShortUrl:Jt,theme:en}=(0,kn.yk)();super({...Kt,useLockedTime:Ut,useShortUrl:Jt,selectedTheme:en}),this.onToggleLockedTime=this.onToggleLockedTime.bind(this),this.onUrlShorten=this.onUrlShorten.bind(this),this.onThemeChange=this.onThemeChange.bind(this)}getTabLabel(){return(0,r.t)("share-dashboard.menu.share-internally-title","Share internally")}async onToggleLockedTime(){const Kt=!this.state.useLockedTime;(0,kn.F7)({useAbsoluteTimeRange:Kt,useShortUrl:this.state.useShortUrl,theme:this.state.selectedTheme}),await super.onToggleLockedTime()}async onUrlShorten(){const Kt=!this.state.useShortUrl;(0,kn.F7)({useShortUrl:Kt,useAbsoluteTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme}),await super.onUrlShorten()}async onThemeChange(Kt){(0,kn.F7)({theme:Kt,useShortUrl:this.state.useShortUrl,useAbsoluteTimeRange:this.state.useLockedTime}),await super.onThemeChange(Kt)}}function Vt({model:bt}){const Kt=(0,g.of)(nn),{useLockedTime:Ut,useShortUrl:Jt,selectedTheme:en,isBuildUrlLoading:sn}=bt.useState();return(0,n.jsxs)("div",{className:it.container,children:[(0,n.jsx)(k.F,{severity:"info",title:(0,r.t)("link.share.config-alert-title","Link settings"),children:(0,n.jsx)(r.x6,{i18nKey:"link.share.config-alert-description",children:"Updating your settings will modify the default copy link to include these changes. Please note that these settings are saved within your current browser scope."})}),(0,n.jsx)("div",{className:Kt.configDescription,children:(0,n.jsx)(ye.E,{variant:"body",children:(0,n.jsx)(r.x6,{i18nKey:"link.share.config-description",children:"Create a personalized, direct link to share your dashboard within your organization, with the following customization settings:"})})}),(0,n.jsx)(Ln,{useLockedTime:Ut,onToggleLockedTime:bt.onToggleLockedTime,useShortUrl:Jt,onUrlShorten:bt.onUrlShorten,selectedTheme:en,onChangeTheme:bt.onThemeChange,isLoading:sn}),(0,n.jsx)(Re.c,{spacing:1}),(0,n.jsx)(E.B,{gap:1,flex:1,direction:{xs:"column",sm:"row"},children:(0,n.jsx)(f.b,{icon:"link",variant:"primary",fill:"outline",disabled:sn,getText:bt.getShareUrl,onClipboardCopy:bt.onCopy,className:Kt.copyButtonContainer,"data-testid":it.copyUrlButton,children:(0,n.jsx)(r.x6,{i18nKey:"link.share.copy-link-button",children:"Copy link"})})})]})}const nn=bt=>({configDescription:(0,i.css)({marginBottom:bt.spacing(2)}),copyButtonContainer:(0,i.css)({marginTop:bt.spacing(2)})});var an=e(5805),Rn=e(8735);const Xn=u.Tp.pages.ShareDashboardModal.SnapshotScene,jn=()=>{const bt={label:(0,r.t)("share-modal.snapshot.expire-week","1 Week"),value:604800};return[{label:(0,r.t)("share-modal.snapshot.expire-hour","1 Hour"),value:3600},{label:(0,r.t)("share-modal.snapshot.expire-day","1 Day"),value:3600*24},bt,{label:(0,r.t)("share-modal.snapshot.expire-never","Never"),value:0}]},dn=()=>jn()[2];class Ra extends s.Bs{constructor(Kt){super({...Kt,snapshotName:Kt.dashboardRef.resolve().state.title,selectedExpireOption:dn()}),this.tabId=o.wr.snapshot,this.onSnasphotNameChange=Ut=>{this.setState({snapshotName:Ut})},this.onExpireChange=Ut=>{this.setState({selectedExpireOption:jn().find(Jt=>Jt.value===Ut)})},this.onSnapshotCreate=async(Ut=!1)=>{const{selectedExpireOption:Jt}=this.state,en=this.prepareSnapshot(),sn={dashboard:en,name:en.title,expires:Jt?.value,external:Ut};try{const Sn=await(0,Rn.s)().create(sn);return(0,T.JD)((0,C.dx)((0,P.tZ)((0,r.t)("snapshot.share.success-creation","Your snapshot has been created")))),Sn}finally{Ut?w.c.publishSnapshotClicked({expires:sn.expires,shareResource:(0,o.hD)(this.state.panelRef)}):w.c.publishSnapshotLocalClicked({expires:sn.expires,shareResource:(0,o.hD)(this.state.panelRef)})}},this.onSnapshotDelete=async Ut=>{const Jt=await(0,Fe.AI)().get(Ut);return(0,T.JD)((0,C.dx)((0,P.tZ)((0,r.t)("snapshot.share.success-delete","Your snapshot has been deleted")))),Jt},this.addActivationHandler(()=>{this._onActivate()})}static{this.Component=Sa}_onActivate(){(0,Rn.s)().getSharingOptions().then(Kt=>{this.isActive&&this.setState({snapshotSharingOptions:Kt})})}getTabLabel(){return(0,r.t)("share-modal.tab-title.snapshot","Snapshot")}prepareSnapshot(){const Kt=s.jh.getTimeRange(this),{dashboardRef:Ut,panelRef:Jt}=this.state;let en;const sn=Ut.resolve().serializer.apiVersion;return sn==="dashboard.grafana.app/v2beta1"||sn==="dashboard.grafana.app/v2alpha1"?(en=(0,H.Xl)(Ut.resolve(),!0),en.uid=Ut.resolve().serializer.getK8SMetadata()?.name,(0,H.c)(this.state.snapshotName.trim()||"",Kt.state.value,en,Jt?.resolve())):(en=(0,G.Uy)(Ut.resolve(),!0),(0,G.c)(this.state.snapshotName.trim()||"",Kt.state.value,en,Jt?.resolve()))}}function Sa({model:bt}){const{snapshotName:Kt,selectedExpireOption:Ut,modalRef:Jt,snapshotSharingOptions:en}=bt.useState(),[sn,Sn]=(0,an.default)(async(Fn=!1)=>bt.onSnapshotCreate(Fn)),[In,On]=(0,an.default)(async Fn=>await(0,Fe.AI)().get(Fn));return In.value?(0,n.jsx)(r.x6,{i18nKey:"share-modal.snapshot.deleted-message",children:"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."}):(0,n.jsxs)(n.Fragment,{children:[!sn.value&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.snapshot.info-text-1",children:"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard."})}),(0,n.jsx)("p",{children:(0,n.jsxs)(r.x6,{i18nKey:"share-modal.snapshot.info-text-2",children:["Keep in mind, your snapshot ",(0,n.jsx)("em",{children:"can be viewed by anyone"})," that has the link and can access the URL. Share wisely."]})})]}),(0,n.jsx)(U.D,{label:(0,r.t)("share-modal.snapshot.name","Snapshot name"),children:(0,n.jsx)(qe.p,{id:"snapshot-name-input",width:30,defaultValue:Kt,onBlur:Fn=>bt.onSnasphotNameChange(Fn.target.value)})}),(0,n.jsx)(U.D,{label:(0,r.t)("share-modal.snapshot.expire","Expire"),children:(0,n.jsx)(Q.z,{id:"expire-select-input",options:jn(),value:Ut?.value,onChange:bt.onExpireChange})}),(0,n.jsxs)(W.a.ButtonRow,{children:[(0,n.jsx)(D.$n,{variant:"secondary",onClick:()=>{Jt?.resolve().onDismiss()},fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.snapshot.cancel-button",children:"Cancel"})}),en?.externalEnabled&&(0,n.jsx)(D.$n,{variant:"secondary",disabled:sn.loading,onClick:()=>Sn(!0),children:en?.externalSnapshotName}),(0,n.jsx)(D.$n,{variant:"primary",disabled:sn.loading,onClick:()=>Sn(),"data-testid":Xn.PublishSnapshot,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.snapshot.local-button",children:"Publish Snapshot"})})]})]}),sn.value&&(0,n.jsxs)(E.B,{direction:"column",gap:0,children:[(0,n.jsx)(U.D,{label:(0,r.t)("share-modal.snapshot.url-label","Snapshot URL"),children:(0,n.jsx)(qe.p,{"data-testid":Xn.CopyUrlInput,id:"snapshot-url-input",value:sn.value.url,readOnly:!0,addonAfter:(0,n.jsx)(f.b,{"data-testid":Xn.CopyUrlButton,icon:"copy",variant:"primary",getText:()=>sn.value.url,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.snapshot.copy-link-button",children:"Copy"})})})}),(0,n.jsxs)("div",{style:{alignSelf:"flex-end",padding:"5px"},children:[(0,n.jsx)(r.x6,{i18nKey:"share-modal.snapshot.mistake-message",children:"Did you make a mistake? "}),"\xA0",(0,n.jsx)(D.$n,{fill:"outline",size:"md",variant:"destructive",onClick:()=>{On(sn.value.deleteUrl)},children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.snapshot.delete-button",children:"Delete snapshot."})})]})]})]})}const Wa="https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/#share-a-snapshot",gs="https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/#panel-snapshot";function Ss({name:bt,onNameChange:Kt,onExpireChange:Ut,selectedExpireOption:Jt,panelRef:en,disableInputs:sn,children:Sn}){const In=(0,g.of)(zs);return(0,n.jsxs)("div",{className:In.container,children:[(0,n.jsx)(k.F,{severity:"info",title:"",children:(0,n.jsxs)(E.B,{justifyContent:"space-between",gap:2,alignItems:"center",children:[(0,n.jsx)(ye.E,{children:en?(0,n.jsx)(r.x6,{i18nKey:"snapshot.share-panel.info-alert",children:"A Grafana panel snapshot publicly shares a panel while removing sensitive data such as queries and panel links, leaving only visible metrics and series names. Anyone with the link can access the snapshot."}):(0,n.jsx)(r.x6,{i18nKey:"snapshot.share.info-alert",children:"A Grafana dashboard snapshot publicly shares a dashboard while removing sensitive data such as queries and panel links, leaving only visible metrics and series names. Anyone with the link can access the snapshot."})}),(0,n.jsx)(D.$n,{variant:"secondary",onClick:()=>window.open(en?gs:Wa,"_blank"),type:"button",children:(0,n.jsx)(r.x6,{i18nKey:"snapshot.share.learn-more-button",children:"Learn more"})})]})}),(0,n.jsxs)("fieldset",{disabled:sn,children:[(0,n.jsx)(U.D,{label:(0,r.t)("snapshot.share.name-label","Snapshot name"),children:(0,n.jsx)(qe.p,{id:"snapshot-name-input",value:bt,onChange:On=>Kt(On.currentTarget.value)})}),(0,n.jsx)(U.D,{label:(0,r.t)("snapshot.share.expiration-label","Expires in"),children:(0,n.jsx)(Q.z,{id:"expire-select-input",options:jn(),value:Jt?.value,onChange:Ut})})]}),(0,n.jsx)(Re.c,{}),Sn]})}const zs=bt=>({container:(0,i.css)({paddingBottom:bt.spacing(2)})}),Rr=u.Tp.pages.ShareDashboardDrawer.ShareSnapshot;class mr extends Ra{static{this.Component=So}getTabLabel(){return(0,r.t)("share-dashboard.menu.share-snapshot-title","Share snapshot")}}function So({model:bt}){const[Kt,Ut]=(0,le.useState)(!1),[Jt,en]=(0,le.useState)(!1),[sn,Sn]=(0,le.useState)(1),{snapshotName:In,snapshotSharingOptions:On,selectedExpireOption:Fn,panelRef:ia,onDismiss:$n,dashboardRef:ca}=bt.useState(),[Ia,Va]=(0,an.default)(async(Ps=!1)=>{const vs=await bt.onSnapshotCreate(Ps);return Sn(2),vs}),[ka,ss]=(0,an.default)(async Ps=>{const vs=await bt.onSnapshotDelete(Ps);return Sn(1),Ut(!1),en(!0),vs}),Ws=()=>{$n?.()},ar=()=>{bt.onSnasphotNameChange(ca.resolve().state.title),Sn(1)},ur=async()=>{await ss(Ia.value?.deleteUrl),ar()};return Kt?(0,n.jsx)(ge,{title:(0,r.t)("snapshot.share.delete-title","Delete snapshot"),confirmButtonLabel:(0,r.t)("snapshot.share.delete-button","Delete snapshot"),onConfirm:ur,onDismiss:()=>Ut(!1),description:(0,r.t)("snapshot.share.delete-description","Are you sure you want to delete this snapshot?"),isActionLoading:ka.loading}):(0,n.jsx)("div",{"data-testid":Rr.container,children:(0,n.jsxs)(n.Fragment,{children:[sn===1&&Jt&&(0,n.jsx)(k.F,{severity:"info",title:"",onRemove:()=>en(!1),children:(0,n.jsx)(r.x6,{i18nKey:"snapshot.share.deleted-alert",children:"Snapshot deleted. It could take an hour to be cleared from CDN caches."})}),(0,n.jsx)(Ss,{name:In??"",selectedExpireOption:Fn,onNameChange:bt.onSnasphotNameChange,onExpireChange:bt.onExpireChange,disableInputs:sn===2,panelRef:ia,children:(0,n.jsxs)(E.B,{justifyContent:"space-between",gap:{xs:2},direction:{xs:"column",xl:"row"},children:[sn===1?(0,n.jsx)(Gs,{onCreateClick:Va,isLoading:Ia.loading,onCancelClick:Ws,sharingOptions:On}):sn===2&&Ia.value&&(0,n.jsx)(_r,{url:Ia.value.url,onDeleteClick:()=>Ut(!0),onNewSnapshotClick:ar}),(0,n.jsx)(ie.Y,{icon:"external-link-alt",href:`${v.$.appSubUrl||""}/dashboard/snapshots`,external:!0,children:(0,r.t)("snapshot.share.view-all-button","View all snapshots")})]})})]})})}const Gs=({isLoading:bt,onCreateClick:Kt,onCancelClick:Ut,sharingOptions:Jt})=>(0,n.jsxs)(E.B,{gap:1,flex:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(D.$n,{variant:"primary",disabled:bt,onClick:()=>Kt(),"data-testid":Rr.publishSnapshot,children:(0,n.jsx)(r.x6,{i18nKey:"snapshot.share.local-button",children:"Publish snapshot"})}),Jt?.externalEnabled&&(0,n.jsx)(D.$n,{variant:"secondary",disabled:bt,onClick:()=>Kt(!0),children:Jt?.externalSnapshotName}),(0,n.jsx)(D.$n,{variant:"secondary",fill:"outline",onClick:Ut,children:(0,n.jsx)(r.x6,{i18nKey:"snapshot.share.cancel-button",children:"Cancel"})}),bt&&(0,n.jsx)(b.y,{})]}),_r=({url:bt,onDeleteClick:Kt,onNewSnapshotClick:Ut})=>{const Jt=Ve.TP.hasPermission($e.w.SnapshotsDelete),en=Jt?"":(0,r.t)("snapshot.share.delete-permission-tooltip","You don't have permission to delete snapshots");return(0,n.jsxs)(E.B,{justifyContent:"flex-start",gap:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(f.b,{icon:"link",variant:"primary",fill:"outline",getText:()=>bt,"data-testid":Rr.copyUrlButton,children:(0,n.jsx)(r.x6,{i18nKey:"snapshot.share.copy-link-button",children:"Copy link"})}),(0,n.jsx)(D.$n,{icon:"trash-alt",variant:"destructive",fill:"outline",onClick:Kt,disabled:!Jt,tooltip:en,children:(0,n.jsx)(r.x6,{i18nKey:"snapshot.share.delete-button",children:"Delete snapshot"})}),(0,n.jsx)(D.$n,{variant:"secondary",fill:"solid",onClick:Ut,children:(0,n.jsx)(r.x6,{i18nKey:"snapshot.share.new-snapshot-button",children:"New snapshot"})})]})};var kr=e(65241),Yr=e(82612),Jr=e(93389);class Xr extends s.Bs{constructor(){super(...arguments),this.tabId=o.wr.libraryPanel}static{this.Component=Mo}getTabLabel(){return(0,r.t)("share-panel.drawer.new-library-panel-title","New library panel")}}function Mo({model:bt}){const{panelRef:Kt,modalRef:Ut}=bt.useState();if(!Kt)return null;const Jt=Kt.resolve(),en=Jt.parent;if(en instanceof Jr.U){const sn=(0,l.YQ)(bt),Sn=(0,G.ZB)(en),In=new Yr.a9(Sn),On=(0,G.Uy)(sn),Fn=new N.G(On);return(0,n.jsx)(kr.j,{initialFolderUid:sn.state.meta.folderUid,dashboard:Fn,panel:In,onDismiss:()=>{Ut?Ut.resolve().onDismiss():sn.closeModal()},onCreateLibraryPanel:ia=>sn.createLibraryPanel(Jt,ia)})}return null}var Ys=e(24209),gr=e(23244);class Zr extends s.Bs{constructor(Kt){super(Kt),this.tabId=o.wr.embed}static{this.Component=Ir}getTabLabel(){return(0,r.t)("share-panel.drawer.share-embed-title","Share embed")}}function Ir({model:bt}){const{panelRef:Kt}=bt.useState(),Ut=Kt.resolve(),Jt=(0,l.YQ)(bt),{uid:en}=Jt.useState(),sn=s.jh.getTimeRange(Ut),Sn=sn instanceof gr.v?sn.state.timeFrom:void 0;return(0,n.jsx)(Ys.D,{panelId:Ut.getPathId(),timeFrom:Sn,range:sn.state.value,dashboard:{uid:en??"",time:sn.state.value},buildIframe:Ms(Jt),onCancelClick:()=>Jt.closeModal()})}const Ms=bt=>(Kt,Ut,Jt,en,sn,Sn)=>{const In=(0,o.XV)({useCurrentTimeRange:Kt,selectedTheme:Jt,panelId:en,timeFrom:sn,range:Sn}),On=In.get("editPanel")??In.get("viewPanel")??"";return In.set("panelId",On),In.delete("editPanel"),In.delete("viewPanel"),In.set("__feature.dashboardSceneSolo","true"),`<iframe src="${(0,Pe.u)({absolute:!0,soloRoute:!0,uid:bt.state.uid,slug:bt.state.meta.slug,currentQueryParams:In.toString()})}" width="450" height="200" frameborder="0"></iframe>`};function Ha({title:bt,imageUrl:Kt,buildUrl:Ut,disabled:Jt,theme:en}){const sn=(0,g.of)(cr),{handleSubmit:Sn,register:In,watch:On,formState:{errors:Fn,isValid:ia}}=(0,be.mN)({mode:"onChange",defaultValues:{width:1e3,height:500,scaleFactor:1}});(0,le.useEffect)(()=>{Ut({width:On("width"),height:On("height"),scale:On("scaleFactor")})},[Ut,On]);const[{loading:$n,value:ca,error:Ia},Va]=(0,L.A)(async ar=>{const ur=await(0,Ge.s)((0,Fe.AI)().fetch({url:ar,responseType:"blob"}));return new Blob([ur.data],{type:"image/png"})},[]),ka=async ar=>{const{width:ur,height:Ps,scaleFactor:vs}=ar;w.c.generatePanelImageClicked({width:ur,height:Ps,scaleFactor:vs,theme:en,shareResource:"panel"}),await Va(Kt)},ss=()=>{w.c.downloadPanelImageClicked({shareResource:"panel"}),I()(ca,`${bt}.png`)},Ws=()=>{Ut({width:On("width"),height:On("height"),scale:On("scaleFactor")})};return(0,n.jsx)("section",{"aria-labelledby":"panel-preview-heading",children:(0,n.jsxs)(E.B,{gap:2,direction:"column",children:[(0,n.jsx)(ye.E,{element:"h4",id:"panel-preview-heading",children:(0,n.jsx)(r.x6,{i18nKey:"share-panel-image.preview.title",children:"Panel preview"})}),(0,n.jsx)("form",{onSubmit:Sn(ka),"aria-label":(0,r.t)("share-panel-image.form.label","Panel image settings"),children:(0,n.jsxs)(Oe.n,{disabled:!v.$.rendererAvailable,label:(0,n.jsxs)(E.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(ye.E,{element:"h5",children:(0,n.jsx)(r.x6,{i18nKey:"share-panel-image.settings.title",children:"Image settings"})}),(0,n.jsx)(Ne.m,{content:(0,r.t)("share-panel-image.settings.max-warning","Setting maximums are limited by the image renderer service"),children:(0,n.jsx)(We.I,{name:"info-circle",size:"sm"})})]}),children:[(0,n.jsxs)(E.B,{gap:1,justifyContent:"space-between",direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(U.D,{label:(0,r.t)("share-panel-image.settings.width-label","Width"),className:sn.imageConfigurationField,required:!0,invalid:!!Fn.width,error:Fn.width?.message,children:(0,n.jsx)(qe.p,{...In("width",{required:(0,r.t)("share-panel-image.settings.width-required","Width is required"),min:{value:1,message:(0,r.t)("share-panel-image.settings.width-min","Width must be equal or greater than 1")},valueAsNumber:!0,onChange:Ws}),placeholder:(0,r.t)("share-panel-image.settings.width-placeholder","1000"),type:"number",suffix:"px","aria-label":(0,r.t)("share-panel-image.settings.width-label","Width")})}),(0,n.jsx)(U.D,{label:(0,r.t)("share-panel-image.settings.height-label","Height"),className:sn.imageConfigurationField,required:!0,invalid:!!Fn.height,error:Fn.height?.message,children:(0,n.jsx)(qe.p,{...In("height",{required:(0,r.t)("share-panel-image.settings.height-required","Height is required"),min:{value:1,message:(0,r.t)("share-panel-image.settings.height-min","Height must be equal or greater than 1")},valueAsNumber:!0,onChange:Ws}),placeholder:(0,r.t)("share-panel-image.settings.height-placeholder","500"),type:"number",suffix:"px","aria-label":(0,r.t)("share-panel-image.settings.height-label","Height")})}),(0,n.jsx)(U.D,{label:(0,r.t)("share-panel-image.settings.scale-factor-label","Scale factor"),className:sn.imageConfigurationField,required:!0,invalid:!!Fn.scaleFactor,error:Fn.scaleFactor?.message,children:(0,n.jsx)(qe.p,{...In("scaleFactor",{required:(0,r.t)("share-panel-image.settings.scale-factor-required","Scale factor is required"),min:{value:1,message:(0,r.t)("share-panel-image.settings.scale-factor-min","Scale factor must be equal or greater than 1")},valueAsNumber:!0,onChange:Ws}),placeholder:(0,r.t)("share-panel-image.settings.scale-factor-placeholder","1"),type:"number","aria-label":(0,r.t)("share-panel-image.settings.scale-factor-label","Scale factor")})})]}),(0,n.jsxs)(E.B,{gap:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(D.$n,{icon:"gf-layout-simple",variant:"secondary",fill:"solid",type:"submit",disabled:Jt||$n||!ia,"aria-describedby":Jt?"generate-button-disabled-help":void 0,children:(0,n.jsx)(r.x6,{i18nKey:"link.share-panel.render-image",children:"Generate image"})}),(0,n.jsx)(D.$n,{onClick:ss,icon:"download-alt",variant:"secondary",disabled:!ca||$n||Jt,"aria-describedby":!ca&&!$n?"download-button-disabled-help":void 0,children:(0,n.jsx)(r.x6,{i18nKey:"link.share-panel.download-image",children:"Download image"})}),(0,n.jsx)(f.b,{icon:"link",variant:"secondary",disabled:Jt||!ia,"aria-describedby":Jt||!ia?"copy-image-link-disabled-help":void 0,getText:()=>Kt,onClipboardCopy:()=>w.c.copyImageUrlClicked({shareResource:"panel"}),children:(0,n.jsx)(r.x6,{i18nKey:"link.share-panel.copy-image-link",children:"Copy image link"})})]}),Jt&&(0,n.jsx)(ye.E,{variant:"bodySmall",color:"secondary",id:"generate-button-disabled-help",children:(0,n.jsx)(r.x6,{i18nKey:"share-panel-image.disabled-help",children:"Save the dashboard to enable image generation"})}),!ca&&!$n&&(0,n.jsx)(ye.E,{variant:"bodySmall",color:"secondary",id:"download-button-disabled-help",children:(0,n.jsx)(r.x6,{i18nKey:"share-panel-image.download-disabled-help",children:"Generate an image first to enable download"})})]})}),(0,n.jsx)(fe,{imageBlob:ca||null,isLoading:$n,error:Ia?{title:(0,r.t)("share-panel-image.error-title","Failed to generate image"),message:Ia.message}:null,title:bt})]})})}const cr=bt=>({imageConfigurationField:(0,i.css)({flex:1})});class js extends Nn{static{this.Component=Oo}constructor(Kt){super(Kt)}getTabLabel(){return(0,r.t)("share-panel.drawer.share-link-title","Link settings")}}function Oo({model:bt}){const Kt=(0,g.of)(qr),{useLockedTime:Ut,useShortUrl:Jt,selectedTheme:en,isBuildUrlLoading:sn,imageUrl:Sn,panelRef:In}=bt.useState(),On=In?.resolve().state.title,ia=!!(0,l.YQ)(bt).state.uid;return(0,n.jsxs)("div",{children:[(0,n.jsx)(ye.E,{variant:"body",children:(0,n.jsx)(r.x6,{i18nKey:"link.share-panel.config-description",children:"Create a personalized, direct link to share your panel within your organization, with the following customization settings:"})}),(0,n.jsxs)("div",{className:Kt.configurationContainer,children:[(0,n.jsx)(Ln,{useLockedTime:Ut,onToggleLockedTime:bt.onToggleLockedTime,useShortUrl:Jt,onUrlShorten:bt.onUrlShorten,selectedTheme:en,onChangeTheme:bt.onThemeChange,isLoading:sn}),(0,n.jsx)(f.b,{icon:"link",variant:"primary",fill:"outline",disabled:sn,getText:bt.getShareUrl,onClipboardCopy:bt.onCopy,children:(0,n.jsx)(r.x6,{i18nKey:"link.share.copy-link-button",children:"Copy link"})})]}),(0,n.jsx)(Re.c,{spacing:2}),(0,n.jsxs)(E.B,{gap:2,direction:"column",children:[!ia&&(0,n.jsx)(k.F,{severity:"info",title:(0,r.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0,children:(0,n.jsx)(r.x6,{i18nKey:"share-modal.link.save-dashboard",children:"To render a panel image, you must save the dashboard first."})}),!v.$.rendererAvailable&&(0,n.jsx)(k.F,{severity:"info",title:(0,r.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0,children:(0,n.jsxs)(r.x6,{i18nKey:"share-modal.link.render-instructions",children:["To render an image, you must install the"," ",(0,n.jsx)(ie.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0,children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})}),(0,n.jsx)(Ha,{title:On||"",buildUrl:bt.buildUrl,imageUrl:Sn,disabled:!ia,theme:en})]})]})}const qr=bt=>({configurationContainer:(0,i.css)({marginTop:bt.spacing(2)})}),Ar=[];function vr(bt){Ar.push(bt)}class eo extends s.Bs{constructor(Kt){super({...Kt}),this.onDismiss=()=>{this.state.activeShare?.onDismiss?this.state.activeShare.onDismiss():this.state.panelRef?(0,l.YQ)(this).closeModal():a.Ny.partial({shareView:null})},this.addActivationHandler(()=>this.buildActiveShare(Kt.shareView))}static{this.Component=yr}buildActiveShare(Kt){const{panelRef:Ut}=this.state,Jt=(0,l.YQ)(this),en=Ut?dr(Kt,this.onDismiss,Jt.getRef(),Ut):Ro(Kt,this.onDismiss,Jt.getRef(),Ut);this.setState({activeShare:en})}}function yr({model:bt}){const{activeShare:Kt}=bt.useState(),Ut=(0,l.YQ)(bt);return(0,n.jsx)(d._,{title:Kt?.getTabLabel(),onClose:bt.onDismiss,size:"md",children:(0,n.jsx)(De.Provider,{value:{dashboard:Ut,onDismiss:bt.onDismiss},children:Kt&&(0,n.jsx)(Kt.Component,{model:Kt})})})}function Ro(bt,Kt,Ut,Jt){const en=Ar.find(sn=>sn.id===bt);if(en)return new en.shareOption({onDismiss:Kt});switch(bt){case o.wr.link:return new Wt({onDismiss:Kt});case o.wr.publicDashboard:return new is({onDismiss:Kt});case o.wr.snapshot:return new mr({dashboardRef:Ut,panelRef:Jt,onDismiss:Kt});case o.wr.export:return new _({onDismiss:Kt});case o.wr.image:return new Se({onDismiss:Kt});default:return new Wt({onDismiss:Kt})}}function dr(bt,Kt,Ut,Jt){switch(bt){case o.wr.link:return new js({panelRef:Jt,onDismiss:Kt});case o.wr.snapshot:return new mr({dashboardRef:Ut,panelRef:Jt,onDismiss:Kt});case o.wr.embed:return new Zr({panelRef:Jt,onDismiss:Kt});case o.wr.libraryPanel:return new Xr({panelRef:Jt,onDismiss:Kt});default:return new js({panelRef:Jt,onDismiss:Kt})}}},49256:(ne,j,e)=>{"use strict";e.d(j,{B:()=>n});var n=(a=>(a.ToggleSelection="select",a.AppendToSelection="append",a))(n||{})},49297:(ne,j,e)=>{"use strict";e.d(j,{I:()=>l,z:()=>o});var n=e(81160),a=e(36638),s=e(64761),d=e(1027);const o={id:s.F.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(i,c)=>p=>!i.include&&!i.exclude?p.pipe(d.W.operator({},c)):(typeof i.include?.options=="string"?i.include.options=i.include?.options:typeof i.include?.options?.pattern=="string"&&(i.include.options.pattern=i.include?.options.pattern),typeof i.exclude?.options=="string"?i.exclude.options=i.exclude?.options:typeof i.exclude?.options?.pattern=="string"&&(i.exclude.options.pattern=i.exclude?.options.pattern),p.pipe((0,n.T)(h=>{const u=i.include?(0,a.NS)(i.include):null,r=i.exclude?(0,a.NS)(i.exclude):null,v=[];for(const g of h){const E=[];for(let m=0;m<g.fields.length;m++){const y=g.fields[m];if(r){if(r(y,g,h))continue;u||E.push(y)}u&&u(y,g,h)&&E.push(y)}if(!E.length)continue;const x={...g,fields:E};v.push(x)}return v})))},l={id:s.F.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(i,c)=>p=>!i.include&&!i.exclude?p.pipe(d.W.operator({},c)):p.pipe((0,n.T)(h=>{const u=i.include?(0,a.Dq)(i.include):null,r=i.exclude?(0,a.Dq)(i.exclude):null,v=[];for(const g of h){if(r){if(r(g))continue;u||v.push(g)}u&&u(g)&&v.push(g)}return v}))}},49314:(ne,j,e)=>{"use strict";e.d(j,{q:()=>n});function n({baseUrl:a="/dashboards",paramName:s,paramValue:d,repoType:o}){const l=new URLSearchParams;s&&d&&l.set(s,d),o&&l.set("repo_type",o);const i=l.toString();return i?`${a}?${i}`:a}},49349:(ne,j,e)=>{"use strict";e.d(j,{x:()=>f});var n=e(74848),a=e(10378),s=e(96540),d=e(49785),o=e(92745),l=e(37386),i=e(63527),c=e(87105),p=e(77824),h=e(43243),u=e(83793);function r(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.branch-validation-error.invalid-branch-name",children:"Invalid branch name."}),(0,n.jsxs)("ul",{style:{padding:"0 20px"},children:[(0,n.jsx)("li",{children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.branch-validation-error.cannot-start-with",children:"It cannot start with '/' or end with '/', '.', or whitespace."})}),(0,n.jsx)("li",{children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.branch-validation-error.it-cannot-contain-or",children:"It cannot contain '//' or '..'."})}),(0,n.jsx)("li",{children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.branch-validation-error.cannot-contain-invalid-characters",children:"It cannot contain invalid characters: '~', '^', ':', '?', '*', '[', '\\\\', or ']'."})}),(0,n.jsx)("li",{children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.branch-validation-error.least-valid-character",children:"It must have at least one valid character."})})]})]})}var v=e(92784),g=e(82781);function E(){return{configured:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.suffix-configured-branch","Configured branch"),pr:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.suffix-pr-branch","Pull request branch"),lastUsed:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.suffix-last-used","Last branch")}}const x=({repository:C,prBranch:P,lastBranch:T,branchData:M})=>{const I=(0,s.useMemo)(()=>E(),[]),B=[],U=new Set,W=C?.branch;if(W&&(B.push({label:`${W}`,value:W,description:I.configured}),U.add(W)),P&&!U.has(P)&&(B.push({label:P,value:P,description:I.pr}),U.add(P)),T&&!U.has(T)&&(B.push({label:T,value:T,description:I.lastUsed}),U.add(T)),M?.items)for(const V of M.items)U.has(V.name)||(B.push({label:V.name,value:V.name}),U.add(V.name));return B};var m=e(4438),y=e(92580),b=e(43385);function D(C){return`${C}/${(0,b.g)()}`}const f=(0,s.memo)(({readOnly:C=!1,workflow:P,workflowOptions:T,repository:M,isNew:I,resourceType:B,hidePath:U=!1})=>{const{control:W,register:V,setValue:z,clearErrors:R,formState:{errors:O}}=(0,d.xW)(),{data:N,isLoading:F,error:G}=(0,u.Cx)(!M?.name||!(0,g.QM)(M.type)?a.hT:{name:M.name}),{getLastBranch:H}=(0,m.Y)(),K=(0,y.E)(),w=H(M?.name),Q=x({repository:M,prBranch:K,lastBranch:w,branchData:N}),k=(0,s.useMemo)(()=>D(B),[B]),te=B==="dashboard"?(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.description-file-path","File path inside the repository (.json or .yaml)"):(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.description-folder-path","Folder path inside the repository");return(0,n.jsxs)(n.Fragment,{children:[!U&&(0,n.jsx)(l.D,{noMargin:!0,label:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.label-path","Path"),description:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.description-inside-repository",te),children:(0,n.jsx)(i.p,{id:"dashboard-path",type:"text",...V("path"),readOnly:!I})}),(0,n.jsx)(l.D,{noMargin:!0,label:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.label-comment","Comment"),children:(0,n.jsx)(c.f,{id:"provisioned-resource-form-comment",...V("comment"),disabled:C,placeholder:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.comment-placeholder-describe-changes-optional","Add a note to describe your changes (optional)"),rows:5})}),M?.type&&(0,g.QM)(M.type)&&!C&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.D,{noMargin:!0,style:{overflow:"auto"},label:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.label-workflow","Workflow"),children:(0,n.jsx)(d.xI,{control:W,name:"workflow",render:({field:{ref:q,onChange:se,...re}})=>(0,n.jsx)(p.z,{id:"provisioned-resource-form-workflow",...re,options:T,onChange:Y=>{se(Y),R("ref"),Y==="branch"?z("ref",k):Y==="write"&&M?.branch&&z("ref",M.branch)}})})}),(P==="write"||P==="branch")&&(0,n.jsx)(l.D,{htmlFor:"provisioned-ref",noMargin:!0,label:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.label-branch","Branch"),description:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.description-branch-name-in-git-hub","Branch name in GitHub"),invalid:!!(O.ref||G),error:O.ref?(0,n.jsx)(r,{}):G?(0,o.t)("provisioning.config-form.error-fetch-branches","Failed to fetch branches"):void 0,children:(0,n.jsx)(d.xI,{name:"ref",control:W,rules:{validate:v.eg},render:({field:{ref:q,onChange:se,...re}})=>P==="write"?(0,n.jsx)(h.G,{...re,invalid:!!O.ref,id:"provisioned-ref",onChange:Y=>se(Y?Y.value:""),placeholder:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.placeholder-branch","Select or enter branch name"),options:Q,loading:F,isClearable:!0}):(0,n.jsx)(i.p,{...re,invalid:!!O.ref,id:"provisioned-ref",onChange:se,placeholder:(0,o.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.placeholder-new-branch","Enter new branch name")})})})]})]})});f.displayName="ResourceEditFormSharedFields"},49602:(ne,j,e)=>{"use strict";e.d(j,{_:()=>o});var n=e(74848),a=e(92145),s=e(37386),d=e(63527);function o({value:l,defaultValue:i,name:c,placeholder:p="",onChange:h,testId:u,width:r,required:v,onBlur:g,grow:E,description:x,invalid:m,error:y,maxLength:b}){const D=(0,a.Bi)(c);return(0,n.jsx)(s.D,{label:c,description:x,invalid:m,error:y,htmlFor:D,children:(0,n.jsx)(d.p,{type:"text",id:D,placeholder:p,value:l,defaultValue:i,onChange:h,onBlur:g,width:E?void 0:r??30,"data-testid":u,maxLength:b,required:v})})}},49779:(ne,j,e)=>{"use strict";e.d(j,{h:()=>s});var n=e(74848),a=e(22803);const s=()=>(0,n.jsx)("span",{className:(0,a.css)({flex:1})})},49914:(ne,j,e)=>{"use strict";e.d(j,{m:()=>p});var n=e(74848),a=e(22803),s=e(92745),d=e(30703),o=e(45967),l=e(99887),i=e(63142),c=e(21241);const p=({user:u})=>{const r=(0,s.t)("alerting.alertVersionHistory.unknown","Unknown"),v=(0,c.J8)(),g=(0,i.of)(h),E=(0,n.jsx)(o.m,{content:(0,s.t)("alerting.alertVersionHistory.unknown-change-description","This update was made prior to the implementation of alert rule version history. The user who made the change is not tracked, but future changes will include the user"),children:(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{className:g.underline,children:[r," "]}),(0,n.jsx)(d.I,{name:"question-circle"})]})});if(!u)return E;const x=v[u.uid];return x||!u?(0,n.jsx)(o.m,{content:x.tooltipContent,children:(0,n.jsx)("span",{children:(0,n.jsx)(l.E,{className:g.badge,text:x.name,color:x.badgeColor,icon:x.icon})})}):u.name?u.name:u.uid?(0,s.t)("alerting.alertVersionHistory.user-id","User ID {{uid}}",{uid:u.uid}):E},h=()=>({badge:(0,a.css)({cursor:"help"}),underline:(0,a.css)({textDecoration:"underline dotted",textUnderlineOffset:"5px",cursor:"help"})})},50201:(ne,j,e)=>{"use strict";e.d(j,{p:()=>f});var n=e(74848),a=e(22803),s=e(55494),d=e(63142),o=e(31286),l=e(41654),i=e(66404),c=e(36348);const p=({width:T="auto",height:M})=>{const I=(0,d.of)(h);return(0,n.jsx)(s.default,{src:c,className:I.svg,height:M,width:T})};p.displayName="GrotCTA";const h=T=>({svg:(0,a.css)({"#grot-cta-cactus-1, #grot-cta-cactus-2":{fill:T.isDark?"#58558c":"#c9c5f4"}})});var u=e(96540),r=e(22687);const v=-20,g=5,E=-5,x=5,m=({width:T="auto",height:M})=>{const I=(0,u.useRef)(null),B=(0,d.of)(y);return(0,u.useEffect)(()=>{const U=W=>{if(window.matchMedia("(prefers-reduced-motion: reduce").matches)return;const V=I.current?.querySelector("#grot-not-found-arm"),z=I.current?.querySelector("#grot-not-found-magnifier"),{clientX:R,clientY:O}=W,{innerWidth:N,innerHeight:F}=window,G=O/F,H=R/N,K=b(G,v,g),w=b(H,E,x);window.requestAnimationFrame(()=>{V?.setAttribute("style",`transform: rotate(${K}deg) translateX(${w}%)`),z?.setAttribute("style",`transform: rotate(${K}deg) translateX(${w}%)`)})};return window.addEventListener("mousemove",U),()=>{window.removeEventListener("mousemove",U)}},[]),(0,n.jsx)(s.default,{innerRef:I,src:r,className:B.svg,height:M,width:T})};m.displayName="GrotNotFound";const y=T=>({svg:(0,a.css)({"#grot-not-found-arm, #grot-not-found-magnifier":{transformOrigin:"center"}})}),b=(T,M,I)=>T*(I-M)+M;var D=e(9886);const f=({button:T,children:M,image:I,message:B,hideImage:U=!1,variant:W,role:V})=>{const z=(0,d.of)(P),R=I??C(W);return(0,n.jsx)(o.a,{paddingY:4,display:"flex",direction:"column",alignItems:"center",role:V,children:(0,n.jsxs)("div",{className:z.container,children:[!U&&R,(0,n.jsxs)(l.B,{direction:"column",alignItems:"center",children:[(0,n.jsx)(i.E,{variant:"h4",textAlignment:"center",children:B}),M&&(0,n.jsx)(i.E,{color:"secondary",textAlignment:"center",children:M})]}),T]})})};function C(T){switch(T){case"call-to-action":return(0,n.jsx)(p,{width:300});case"not-found":return(0,n.jsx)(m,{width:300});case"completed":return(0,n.jsx)(s.default,{src:D,width:300});default:throw new Error(`Unknown variant: ${T}`)}}const P=T=>({container:(0,a.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:T.spacing(4),maxWidth:"600px"})})},50275:(ne,j,e)=>{"use strict";e.d(j,{B:()=>d});var n=e(74848),a=e(96540),s=e(22658);class d extends a.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,a.createRef)(),this.renderJson=()=>{const{json:l,config:i,open:c,onDidRender:p}=this.props,h=this.wrapperRef.current,u=new s.O(l,c,i);h.hasChildNodes()?h.replaceChild(u.render(),h.lastChild):h.appendChild(u.render()),p&&p(u.json)}}static{this.defaultProps={open:3,config:{animateOpen:!0}}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:l}=this.props;return(0,n.jsx)("div",{className:l,ref:this.wrapperRef})}}},50426:(ne,j,e)=>{"use strict";e.d(j,{l:()=>o});var n=e(74848),a=e(22803),s=e(96540),d=e(49785);function o({defaultValues:l,onSubmit:i,validateOnMount:c=!1,validateFieldsOnMount:p,children:h,validateOn:u="onSubmit",maxWidth:r=600,...v}){const{handleSubmit:g,trigger:E,formState:x,...m}=(0,d.mN)({mode:u,defaultValues:l});return(0,s.useEffect)(()=>{c&&E(p)},[E,p,c]),(0,n.jsx)("form",{className:(0,a.css)({maxWidth:r!=="none"?r+"px":r,width:"100%"}),onSubmit:g(i),...v,children:h({errors:x.errors,formState:x,trigger:E,...m})})}},50803:(ne,j,e)=>{"use strict";e.d(j,{Ln:()=>B,Op:()=>E,Sb:()=>K,nV:()=>M,q:()=>v});var n=e(43173),a=e(21275),s=e(11393),d=e(5857),o=e(75735),l=e(2505),i=e(78320),c=e(84500),p=e(62265),h=e(3281),u=e(39508),r=e(60171);function v(w){if((0,r.HG)(w))return w;let Q;(0,r.b_)(w)?Q=w.spec:Q=w.dashboard;let k,te,q,se;(0,r.b_)(w)?(k=w.access,te={...w.metadata.annotations,[o.hm]:Q.gnetId??void 0},se=w.metadata.creationTimestamp,q={[o.Y5]:w.metadata.labels?.[o.Y5]}):(k={url:w.meta.url,slug:w.meta.slug,canSave:w.meta.canSave,canEdit:w.meta.canEdit,canDelete:w.meta.canDelete,canShare:w.meta.canShare,canStar:w.meta.canStar,canAdmin:w.meta.canAdmin,annotationsPermissions:w.meta.annotationsPermissions},te={[o.hc]:w.meta.createdBy,[o.Qu]:w.meta.updatedBy,[o.xU]:w.meta.updated,[o.ew]:w.meta.folderUid,[o.hX]:w.meta.slug},Q.gnetId&&(te[o.hm]=Q.gnetId),w.meta.isSnapshot&&(te[o.qw]="true"),se=w.meta.created,q={[o.Y5]:Q.id?.toString()??void 0}),te?.[o.qw]&&(te[o.UL]=Q.snapshot?.originalUrl);const re={creationTimestamp:se||"",name:Q.uid,resourceVersion:Q.version?.toString()||"0",annotations:te,labels:q};if(!(0,r.b_)(w)&&(0,r.aK)(w.dashboard))return{apiVersion:"v2beta1",kind:"DashboardWithAccessInfo",metadata:re,spec:w.dashboard,access:k};const Y=(0,s.ft)(),X=(0,s.xE)(),[J,_]=x(Q.panels||[]),ee=W(Q.templating?.list||[]),ae=V(Q.annotations?.list||[]),le={title:Q.title,description:Q.description,tags:Q.tags??[],cursorSync:(0,u.k6)(Q.graphTooltip),preload:Q.preload||X.preload,liveNow:Q.liveNow,editable:Q.editable,revision:Q.revision,timeSettings:{from:Q.time?.from||Y.from,to:Q.time?.to||Y.to,timezone:Q.timezone||Y.timezone,autoRefresh:Q.refresh||Y.autoRefresh,autoRefreshIntervals:Q.timepicker?.refresh_intervals||Y.autoRefreshIntervals,fiscalYearStartMonth:Q.fiscalYearStartMonth||Y.fiscalYearStartMonth,hideTimepicker:Q.timepicker?.hidden||Y.hideTimepicker,quickRanges:Q.timepicker?.quick_ranges,weekStart:b(Q.weekStart,Y.weekStart),nowDelay:Q.timepicker?.nowDelay||Y.nowDelay},links:Q.links||[],annotations:ae,variables:ee,elements:J,layout:_};return{apiVersion:"v2beta1",kind:"DashboardWithAccessInfo",metadata:re,spec:le,access:k}}function g(w){if(!(0,r.b_)(w))return w;const Q=w.spec;return(0,r._5)(Q)?{meta:{...w.access,isNew:!1,isFolder:!1,uid:w.metadata.name,k8s:w.metadata,version:w.metadata.generation},dashboard:Q}:{meta:{created:w.metadata.creationTimestamp,createdBy:w.metadata.annotations?.[o.hc]??"",updated:w.metadata.annotations?.[o.xU],updatedBy:w.metadata.annotations?.[o.Qu],folderUid:w.metadata.annotations?.[o.ew],slug:w.metadata.annotations?.[o.hX],url:w.access.url,canAdmin:w.access.canAdmin,canDelete:w.access.canDelete,canEdit:w.access.canEdit,canSave:w.access.canSave,canShare:w.access.canShare,canStar:w.access.canStar,annotationsPermissions:w.access.annotationsPermissions},dashboard:K(Q,w.metadata)}}const E={ensureV2Response:v,ensureV1Response:g};function x(w){const Q={},k={kind:"GridLayout",spec:{items:[]}};if(!w)return[Q,k];if(w.some(y))return m(w);for(const te of w){const[q,se]=P(te);Q[se]=q,k.spec.items.push(f(te,se))}return[Q,k]}function m(w){let Q=null,k=0;const te={},q={kind:"RowsLayout",spec:{rows:[]}};for(const se of w)if(y(se)){k=se.gridPos.y,Q&&q.spec.rows.push(Q);const re=[];for(const Y of se.panels||[]){const[X,J]=P(Y);te[J]=X,re.push(f(Y,J,C(Y,k)))}Q=D(se,re)}else{const[re,Y]=P(se);if(te[Y]=re,Q)if(Q.spec.layout.kind==="GridLayout")Q.spec.layout.spec.items.push(f(se,Y,C(se,k)));else throw new Error("RowsLayoutRow from legacy row must have a GridLayout");else{const X={kind:"GridLayout",spec:{items:[f(se,Y)]}};k=-1,Q={kind:"RowsLayoutRow",spec:{collapse:!1,title:"",hideHeader:!0,layout:X}}}}return Q&&q.spec.rows.push(Q),[te,q]}function y(w){return w.type==="row"}function b(w,Q){return!w||!(0,d.rE)(w)?Q:w}function D(w,Q){return{kind:"RowsLayoutRow",spec:{collapse:w.collapsed,title:w.title??"",repeat:w.repeat?{value:w.repeat,mode:"variable"}:void 0,layout:{kind:"GridLayout",spec:{items:Q}}}}}function f(w,Q,k){return{kind:"GridLayoutItem",spec:{x:w.gridPos.x,y:k??w.gridPos.y,width:w.gridPos.w,height:w.gridPos.h,repeat:w.repeat?{value:w.repeat,mode:"variable",direction:w.repeatDirection,maxPerRow:w.maxPerRow}:void 0,element:{kind:"ElementReference",name:Q}}}}function C(w,Q){return w.gridPos.y-Q-i.o}function P(w){const Q=`panel-${w.id}`;return w.libraryPanel?[{kind:"LibraryPanel",spec:{libraryPanel:{uid:w.libraryPanel.uid,name:w.libraryPanel.name},id:w.id,title:w.title??""}},Q]:[B(w),Q]}function T(){return(0,p.Ic)()?.type??"grafana"}function M(){const w=(0,p.Ic)()??{type:"grafana",uid:"-- Grafana --"};if(w.uid&&!w.apiVersion){const Q=n.$.datasources[w.uid];w.apiVersion=Q.apiVersion??void 0}return{apiVersion:w.apiVersion,type:w.type,uid:w.uid}}function I(w,Q){return w.map(k=>{const{refId:te,hide:q,datasource:se,...re}=k;return{kind:"PanelQuery",spec:{refId:k.refId,hidden:k.hide??!1,query:{kind:"DataQuery",version:(0,s.iM)().version,group:k.datasource?.type||Q.type,datasource:{name:k.datasource?.uid||Q.uid},spec:{...re}}}}})}function B(w){const Q=I(w.targets||[],w.datasource||M()),k=U(w.transformations||[]);return{kind:"Panel",spec:{title:w.title||"",description:w.description||"",vizConfig:{kind:"VizConfig",group:w.type,version:w.pluginVersion,spec:{fieldConfig:w.fieldConfig||(0,s.bt)(),options:w.options}},links:w.links?.map(q=>({title:q.title,url:q.url||"",targetBlank:q.targetBlank}))||[],id:w.id,data:{kind:"QueryGroup",spec:{queries:Q,transformations:k,queryOptions:{cacheTimeout:w.cacheTimeout,maxDataPoints:w.maxDataPoints,interval:w.interval,hideTimeOverride:w.hideTimeOverride,queryCachingTTL:w.queryCachingTTL,timeFrom:w.timeFrom,timeShift:w.timeShift}}}}}}function U(w){return w.map(Q=>({kind:Q.id,spec:{...Q,topic:(0,u.MM)(Q.topic)}}))}function W(w){const Q=[];for(const k of w){const te={name:k.name,label:k.label,...k.description&&{description:k.description},skipUrlSync:!!k.skipUrlSync,hide:(0,u.NB)(k.hide)};let q,se;switch(k.type){case"query":let re=k.query||{};typeof re=="string"&&(console.warn("Query variable query is a string which is deprecated in the schema v2. It should extend DataQuery"),re={[u.sB]:re});const Y={kind:"QueryVariable",spec:{...te,multi:!!k.multi,includeAll:!!k.includeAll,...k.allValue&&{allValue:k.allValue},current:{value:k.current?.value,text:k.current?.text},options:k.options||[],refresh:(0,u.qJ)(k.refresh),...k.datasource&&{datasource:k.datasource},regex:k.regex||"",sort:(0,u.LY)(k.sort),query:{kind:"DataQuery",version:(0,s.iM)().version,group:k.datasource?.type??T(),datasource:{name:k.datasource?.uid},spec:re},allowCustomValue:k.allowCustomValue??!0}};Q.push(Y);break;case"datasource":let X=T();k.query&&typeof k.query=="string"&&(X=k.query);const J={kind:"DatasourceVariable",spec:{...te,multi:!!k.multi,includeAll:!!k.includeAll,...k.allValue&&{allValue:k.allValue},current:{value:k.current.value,text:k.current.text},options:k.options||[],refresh:(0,u.qJ)(k.refresh),pluginId:X,regex:k.regex||"",allowCustomValue:k.allowCustomValue??!0}};Q.push(J);break;case"custom":const _={kind:"CustomVariable",spec:{...te,query:k.query,current:{value:k.current.value,text:k.current.text},options:k.options,multi:k.multi,includeAll:k.includeAll,...k.allValue&&{allValue:k.allValue},allowCustomValue:k.allowCustomValue??!0}};Q.push(_);break;case"adhoc":q=k.datasource||M(),se=q.type??T();const ee={kind:"AdhocVariable",group:se,spec:{...te,baseFilters:(0,c.Gs)(k.baseFilters)||[],filters:(0,c.Gs)(k.filters)||[],defaultKeys:k.defaultKeys||[],allowCustomValue:k.allowCustomValue??!0}};q.uid&&(ee.datasource={name:q.uid}),Q.push(ee);break;case"constant":const ae={kind:"ConstantVariable",spec:{...te,current:{value:k.current.value,text:k.current.value},query:k.query}};Q.push(ae);break;case"interval":const le={kind:"IntervalVariable",spec:{...te,current:{value:k.current.value,text:k.current.value},query:k.query,refresh:"onTimeRangeChanged",options:k.options,auto:k.auto,auto_min:k.auto_min,auto_count:k.auto_count}};Q.push(le);break;case"textbox":const L={kind:"TextVariable",spec:{...te,current:{value:k.current.value,text:k.current.value},query:k.query}};Q.push(L);break;case"groupby":q=k.datasource||M(),se=q.type??T();const ie={kind:"GroupByVariable",group:se,spec:{...te,options:k.options,current:{value:k.current.value,text:k.current.text},multi:k.multi}};q.uid&&(ie.datasource={name:q.uid}),Q.push(ie);break;default:console.error(`Variable transformation not implemented: ${k.type}`)}}return Q}function V(w){return w.map(Q=>({kind:"AnnotationQuery",spec:{name:Q.name,...Q.datasource&&{datasource:Q.datasource},enable:Q.enable,hide:!!Q.hide,iconColor:Q.iconColor,builtIn:!!Q.builtIn,query:{kind:"DataQuery",version:(0,s.iM)().version,group:Q.datasource?.type||T(),datasource:{name:Q.datasource?.uid},spec:{...Q.target}},filter:Q.filter}}))}function z(w){const Q=[];for(const k of w){const te={name:k.spec.name,label:k.spec.label,...k.spec.description&&{description:k.spec.description},skipUrlSync:k.spec.skipUrlSync,hide:(0,h.cc)(k.spec.hide),type:H(k)};switch(k.kind){case"QueryVariable":const q={...te,current:k.spec.current,options:k.spec.options,query:u.sB in k.spec.query.spec?k.spec.query.spec[u.sB]:k.spec.query.spec,datasource:{type:k.spec.query?.spec.group,uid:k.spec.query?.spec.datasource?.name},sort:(0,h.ES)(k.spec.sort),refresh:(0,h.tH)(k.spec.refresh),regex:k.spec.regex,allValue:k.spec.allValue,includeAll:k.spec.includeAll,multi:k.spec.multi,definition:k.spec.definition};Q.push(q);break;case"DatasourceVariable":const se={...te,current:k.spec.current,options:[],regex:k.spec.regex,refresh:(0,h.tH)(k.spec.refresh),query:k.spec.pluginId,multi:k.spec.multi,allValue:k.spec.allValue,includeAll:k.spec.includeAll};Q.push(se);break;case"CustomVariable":const re={...te,current:{text:k.spec.current.value,value:k.spec.current.value},options:k.spec.options,query:k.spec.query,multi:k.spec.multi,allValue:k.spec.allValue,includeAll:k.spec.includeAll};Q.push(re);break;case"ConstantVariable":const Y={...te,current:{text:k.spec.current.value,value:k.spec.current.value},hide:(0,h.cc)(k.spec.hide),query:k.spec.current.value};Q.push(Y);break;case"IntervalVariable":const X={...te,current:{text:k.spec.current.value,value:k.spec.current.value},hide:(0,h.cc)(k.spec.hide),query:k.spec.query,refresh:(0,h.tH)(k.spec.refresh),options:k.spec.options,auto:k.spec.auto,auto_min:k.spec.auto_min,auto_count:k.spec.auto_count};Q.push(X);break;case"TextVariable":const J={text:k.spec.current.value,value:k.spec.current.value},_={...te,current:{text:k.spec.current.value,value:k.spec.current.value},options:[{...J,selected:!0}],query:k.spec.query};Q.push(_);break;case"GroupByVariable":const ee={...te,datasource:{uid:k.datasource?.name,type:k.group},current:k.spec.current,options:k.spec.options};Q.push(ee);break;case"AdhocVariable":const ae={...te,datasource:{uid:k.datasource?.name,type:k.group},baseFilters:k.spec.baseFilters,filters:k.spec.filters,defaultKeys:k.spec.defaultKeys};Q.push(ae);break;default:console.error(`Variable transformation not implemented: ${k}`)}}return Q}function R(w,Q){const k=[];let te=0;if(Q.kind!=="GridLayout")throw new Error("Cannot convert non-GridLayout layout to v1");for(const q of Q.spec.items){const se=w[q.spec.element.name],re=O(se,q);k.push(re),(re.id??0>te)&&(te=re.id??0)}for(const q of k)q.type==="row"&&q.id===-1&&(q.id=++te);return k}function O(w,Q,k){const{x:te,y:q,width:se,height:re,repeat:Y}=Q?.spec||{x:0,y:0,width:0,height:0},X={x:te,y:k??q,w:se,h:re};if(w.kind==="Panel"){const J=w.spec;return{id:J.id,type:J.vizConfig.group,title:J.title,description:J.description,fieldConfig:N(J.vizConfig.spec.fieldConfig),options:J.vizConfig.spec.options,pluginVersion:J.vizConfig.version,links:J.links?.map(_=>({title:_.title,url:_.url,..._.targetBlank&&{targetBlank:_.targetBlank}}))||[],targets:J.data.spec.queries.map(_=>({refId:_.spec.refId,hide:_.spec.hidden,datasource:{uid:_.spec.query.spec.datasource?.uid,type:_.spec.query.spec.group},..._.spec.query.spec})),transformations:J.data.spec.transformations.map(_=>_.spec),gridPos:X,cacheTimeout:J.data.spec.queryOptions.cacheTimeout,maxDataPoints:J.data.spec.queryOptions.maxDataPoints,interval:J.data.spec.queryOptions.interval,hideTimeOverride:J.data.spec.queryOptions.hideTimeOverride,queryCachingTTL:J.data.spec.queryOptions.queryCachingTTL,timeFrom:J.data.spec.queryOptions.timeFrom,timeShift:J.data.spec.queryOptions.timeShift,transparent:J.transparent,...Y?.value&&{repeat:Y.value},...Y?.direction&&{repeatDirection:Y.direction},...Y?.maxPerRow&&{maxPerRow:Y.maxPerRow}}}else if(w.kind==="LibraryPanel"){const J=w.spec;return{id:J.id,title:J.title,gridPos:X,libraryPanel:{uid:J.libraryPanel.uid,name:J.libraryPanel.name},type:"library-panel-ref"}}else throw new Error(`Unknown element kind: ${w}`)}function N(w){const Q=te=>{switch(te){case"absolute":return a.Ol.Absolute;case"percentage":return a.Ol.Percentage;default:return a.Ol.Absolute}},k={...w.defaults};return w.defaults.mappings&&(k.mappings=w.defaults.mappings.map(te=>{switch(te.type){case"value":return{...te,type:a.dM.ValueToText};case"range":return{...te,type:a.dM.RangeToText};case"regex":return{...te,type:a.dM.RegexToText};case"special":return{...te,options:{...te.options,match:G(te.options.match)},type:a.dM.SpecialValue};default:return te}})),w.defaults.thresholds&&(k.thresholds={...w.defaults.thresholds,mode:Q(w.defaults.thresholds.mode)}),w.defaults.color?.mode&&(k.color={...w.defaults.color,mode:F(w.defaults.color.mode)}),{...w,defaults:k}}function F(w){switch(w){case"thresholds":return a.Yb.Thresholds;case"palette-classic":return a.Yb.PaletteClassic;case"palette-classic-by-name":return a.Yb.PaletteClassicByName;case"continuous-GrYlRd":return a.Yb.ContinuousGrYlRd;case"continuous-RdYlGr":return a.Yb.ContinuousRdYlGr;case"continuous-BlYlRd":return a.Yb.ContinuousBlYlRd;case"continuous-YlRd":return a.Yb.ContinuousYlRd;case"continuous-BlPu":return a.Yb.ContinuousBlPu;case"continuous-YlBl":return a.Yb.ContinuousYlBl;case"continuous-blues":return a.Yb.ContinuousBlues;case"continuous-reds":return a.Yb.ContinuousReds;case"continuous-greens":return a.Yb.ContinuousGreens;case"continuous-purples":return a.Yb.ContinuousPurples;case"fixed":return a.Yb.Fixed;case"shades":return a.Yb.Shades;default:return a.Yb.Thresholds}}function G(w){switch(w){case"true":return a.WL.True;case"false":return a.WL.False;case"null":return a.WL.Null;case"nan":return a.WL.NaN;case"null+nan":return a.WL.NullAndNan;case"empty":return a.WL.Empty;default:throw new Error(`Unknown match type: ${w}`)}}function H(w){switch(w.kind){case"QueryVariable":return"query";case"DatasourceVariable":return"datasource";case"CustomVariable":return"custom";case"ConstantVariable":return"constant";case"IntervalVariable":return"interval";case"TextVariable":return"textbox";case"GroupByVariable":return"groupby";case"AdhocVariable":return"adhoc";default:throw new Error(`Unknown variable type: ${w}`)}}function K(w,Q){const k=w.annotations.map(l.U),te=z(w.variables),q=R(w.elements,w.layout);return{uid:Q.name,title:w.title,description:w.description,tags:w.tags,schemaVersion:40,graphTooltip:(0,h.Y_)(w.cursorSync),preload:w.preload,liveNow:w.liveNow,editable:w.editable,gnetId:Q.annotations?.[o.hm],revision:w.revision,time:{from:w.timeSettings.from,to:w.timeSettings.to},timezone:w.timeSettings.timezone,refresh:w.timeSettings.autoRefresh,timepicker:{refresh_intervals:w.timeSettings.autoRefreshIntervals,hidden:w.timeSettings.hideTimepicker,quick_ranges:w.timeSettings.quickRanges,nowDelay:w.timeSettings.nowDelay},fiscalYearStartMonth:w.timeSettings.fiscalYearStartMonth,weekStart:w.timeSettings.weekStart,version:Q.generation,links:w.links,annotations:{list:k},panels:q,templating:{list:te}}}},50893:(ne,j,e)=>{"use strict";e.d(j,{Dd:()=>d,H0:()=>o,L1:()=>l,gr:()=>i});var n=e(78012),a=e(43173),s=e(23289);function d(c,p){const h=c.getDynamicDashboardsTrackingInformation();s.c.dashboardInitialized({theme:void 0,duration:p,isScene:!0,...c.getTrackingInformation()??{},...h?{tabCount:h.tabCount,templateVariableCount:h.templateVariableCount,maxNestingLevel:h.maxNestingLevel,dashStructure:h.dashStructure,conditionalRenderRules:h.conditionalRenderRulesCount,autoLayoutCount:h.autoLayoutCount,customGridLayoutCount:h.customGridLayoutCount}:{}})}const o=c=>{switch(c?.typeName){case"Row":s.c.trackRemoveRowClick();break;case"Tab":s.c.trackRemoveTabClick();break;default:break}},l=c=>{s.c.editButtonClicked({outlineExpanded:!n.M.getBool("grafana.dashboard.edit-pane.outline.collapsed",!0),dashboardUid:c})};function i(c,p,h){const u=new URLSearchParams(window.location.search),r=u.get("pluginId")||void 0,v=u.get("sourceEntryPoint")||void 0,g=u.get("libraryItemId")||void 0,E=u.get("creationOrigin")||void 0,x=p.getDynamicDashboardsTrackingInformation(),m=a.$.featureToggles.dashboardLibrary?{datasourceTypes:[r],sourceEntryPoint:v,libraryItemId:g,creationOrigin:E}:{};s.c.dashboardCreatedOrSaved(c,{...h,...x?{uid:p.state.uid,numPanels:x.panelCount,conditionalRenderRules:x.conditionalRenderRulesCount,autoLayoutCount:x.autoLayoutCount,customGridLayoutCount:x.customGridLayoutCount,panelsByDatasourceType:x.panelsByDatasourceType,...m}:{...m}})}},51115:(ne,j,e)=>{"use strict";e.d(j,{I:()=>i});var n=e(74848),a=e(46942),s=e.n(a),d=e(30703),o=e(45967);const i=({children:c,isFocused:p,isInvalid:h,className:u,htmlFor:r,tooltip:v,width:g,interactive:E,...x})=>{const m=s()(u,`gf-form-label width-${g||"10"}`,{"gf-form-label--is-focused":p,"gf-form-label--is-invalid":h});return(0,n.jsxs)("label",{className:m,...x,htmlFor:r,children:[c,v&&(0,n.jsx)(o.m,{placement:"top",content:v,theme:"info",interactive:E,children:(0,n.jsx)(d.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})]})}},51156:(ne,j,e)=>{"use strict";e.d(j,{v:()=>r});var n=e(74848),a=e(22803),s=e(23257),d=e.n(s),o=e(51898),l=e(37386),i=e(72636),c=e(63142),p=e(45967);function h({overrides:y}){const b=(0,c.of)(u);return(0,n.jsx)("div",{className:b.wrapper,children:y.map((D,f)=>(0,n.jsx)(p.m,{content:D.tooltip,placement:"top",children:(0,n.jsx)("div",{"aria-label":D.description,className:b[D.type]})},f.toString()))})}const u=y=>{const b={width:8,height:8,borderRadius:y.shape.radius.circle,marginLeft:y.spacing(1),top:"-1px"};return{wrapper:(0,a.css)({display:"flex"}),rule:(0,a.css)({...b,position:"relative",backgroundColor:y.colors.primary.main}),data:(0,a.css)({...b,position:"relative",backgroundColor:y.colors.warning.main})}};class r{constructor(b){this.props={...b}}render(b){return(0,n.jsx)(v,{itemDescriptor:this,searchQuery:b},this.props.id)}useShowIf(){return this.props.useShowIf?this.props.useShowIf():this.props.showIf?this.props.showIf():!0}}function v({itemDescriptor:y,searchQuery:b}){const{title:D,description:f,id:C,render:P,skipField:T}=y.props,M=`${y.parent.props.id} ${D}`;return y.useShowIf()?T?P(y):(0,n.jsx)(l.D,{label:g(y,b),description:f,"aria-label":o.Tp.components.PanelEditor.OptionsPane.fieldLabel(M),htmlFor:C,children:P(y)},M):null}function g(y,b){const{title:D,description:f,overrides:C,id:P,addon:T}=y.props;if(!D)return null;if(!b)return y.parent.props.title===D&&!C?.length?null:(0,n.jsx)(x,{title:D,description:f,overrides:C,addon:T,htmlFor:P});const M=[];return y.parent.parent&&M.push(E(y.parent.parent.props.title,b)),y.parent.props.title!==D&&M.push(E(y.parent.props.title,b)),(0,n.jsxs)(i.J,{description:f&&E(f,b),category:M,htmlFor:P,children:[E(D,b),C&&C.length>0&&(0,n.jsx)(h,{overrides:C})]})}function E(y,b){return(0,n.jsx)(d(),{textToHighlight:y,searchWords:[b],highlightClassName:"search-fragment-highlight"})}function x({title:y,description:b,overrides:D,addon:f,htmlFor:C}){const P=(0,c.of)(m);return(0,n.jsxs)("div",{className:P.container,children:[(0,n.jsxs)(i.J,{description:b,htmlFor:C,children:[y,D&&D.length>0&&(0,n.jsx)(h,{overrides:D})]}),f]})}function m(y){return{container:(0,a.css)({display:"flex",justifyContent:"space-between"})}}},51158:(ne,j,e)=>{"use strict";e.d(j,{mR:()=>v});var n=e(74848),a=e(2543),s=e.n(a),d=e(66615),o=e(17548),l=e(25229),i=e(32899),c=e(92745),p=e(91867),h=e(45229);const u="grafana.dashboard.timepicker.history",r=4,v=f=>(0,n.jsx)(d.b,{storageKey:u,defaultValue:[],children:(C,P)=>{const T=g(C),M=E(T);return(0,n.jsx)(p.$6,{...f,history:M,onChange:I=>{x(I,T,P),f.onChange(I)},onError:I=>h.A.emit(i.r1.alertError,[(0,c.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,c.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:I})])})}});function g(f){const C=[];if(!Array.isArray(f))return C;for(let P of f){const T=b(P);T&&C.push(T)}return C}function E(f){return f.map(C=>o.convertRawToRange(C,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function x(f,C,P){if(!m(f))return;const T={from:D(f.raw.from),to:D(f.raw.to)},M=y([T,...C]);P(M)}function m(f){return(0,l.Ar)(f.raw.from)||(0,l.Ar)(f.raw.to)}function y(f){return(0,a.uniqBy)(f,C=>C.from+C.to).slice(0,r)}function b(f){if(typeof f!="object"||f===null||Object.keys(f).length!==2||!("from"in f)||!("to"in f))return null;const{from:C,to:P}=f;return typeof C=="string"&&typeof P=="string"?{from:C,to:P}:null}function D(f){if(typeof f=="string")return f;if(!f?.toISOString)throw console.error("Invalid DateTime object passed to convertToISOString");return f.toISOString()}},51250:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>l});const n="12.3.0";var a=(i=>(i.Code="code",i.HTML="html",i.Markdown="markdown",i))(a||{}),s=(i=>(i.Go="go",i.Html="html",i.Json="json",i.Markdown="markdown",i.Plaintext="plaintext",i.Sql="sql",i.Typescript="typescript",i.Xml="xml",i.Yaml="yaml",i))(s||{});const d="plaintext",o={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},l={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},51388:(ne,j,e)=>{"use strict";e.d(j,{Kh:()=>i,Ls:()=>v,k9:()=>h,m8:()=>u});var n=e(8721),a=e(95004),s=e(71642),d=e(428),o=e(77154),l=e(41119),i=(D=>(D.Append="append",D.Replace="replace",D))(i||{});const c="__name__";var p=(D=>(D[D.wide=0]="wide",D[D.labels=1]="labels",D))(p||{});class h{constructor(f){this.options=f,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(C,P,T)=>{const M=P?Object.assign({},{...this.options,...P}):this.options,I=(0,l.By)(this,C),B=y(I.fields.map(W=>W.values??[]),typeof T?.maxLength=="number"?Math.min(T.maxLength,M.maxLength):M.maxLength,this.timeFieldIndex,M.maxDelta);I.fields=I.fields.map(W=>({...W,values:W.values?.slice(B)}));const U=I.fields[0]?.values?.length??0;return{...I,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:U,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:M}},this.initFromSerialized=C=>{this.name=C.name,this.refId=C.refId,this.meta=C.meta,this.length=C.length,this.labels=C.labels,this.schemaFields=C.schemaFields,this.timeFieldIndex=C.timeFieldIndex,this.pushMode=C.pushMode,this.packetInfo.length=C.packetInfo.length,this.packetInfo.number=C.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=C.fields.map(P=>({...P,type:P.type??a.PU.other,config:P.config??{},values:P.values??[]})),m(this.fields.map(P=>P.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:C,maxDelta:P})=>{const T=C&&this.options.maxLength<C,M=P&&this.options.maxDelta<P,I=P&&this.options.maxDelta===1/0;return!!(T||M||I)},this.resize=({maxLength:C,maxDelta:P})=>{P&&(this.options.maxDelta===1/0?this.options.maxDelta=P:this.options.maxDelta=Math.max(P,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,C??0)},this.pushNewValues=C=>{if(!C?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=C[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?x(this.fields.map(T=>T.values),C,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(C.forEach((T,M)=>{this.fields[M]&&(this.fields[M].values=T)}),m(this.fields.map(T=>T.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const P=this.fields?.[0]?.values.length;P!==void 0&&(this.length=P)},this.resetStateCalculations=()=>{this.fields.forEach(C=>{C.state={...C.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=C=>this.fields.map((P,T)=>C(P)?T:void 0).filter(P=>P!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(C=>{const P=C.values;return P.slice(Math.max(P.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}static{this.deserialize=f=>{const C=new h(f.options);return C.initFromSerialized(f),C}}static{this.empty=f=>new h(u(f))}static{this.fromDataFrameJSON=(f,C)=>{const P=new h(u(C));return P.push(f),P}}get alwaysReplace(){return this.options.action==="replace"}push(f){const{schema:C,data:P}=f;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,C){this.pushMode=0,this.timeFieldIndex=C.fields.findIndex(B=>B.type===a.PU.time);const T=C.fields[0];this.timeFieldIndex===1&&T.type===a.PU.string&&(T.name==="labels"||T.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const M=this.pushMode===1?C.fields.slice(1):C.fields;this.refId=C.refId,C.meta&&(this.meta={...C.meta});const{displayNameFormat:I}=this.options;if(b(this.schemaFields,M)){const B=M.length;this.fields.forEach((U,W)=>{const V=M[W%B];U.config=V.config??{},U.labels=V.labels}),I&&this.fields.forEach(U=>{const W={[c]:U.name,...U.labels};U.config.displayNameFromDS=(0,d.j)(I,W)})}else{this.packetInfo.schemaChanged=!0;const B=this.pushMode===0;this.fields=M.map(U=>{const W=U.config??{};if(I){const V={[c]:U.name,...U.labels};W.displayNameFromDS=(0,d.j)(I,V)}return{config:W,name:U.name,labels:U.labels,type:U.type??a.PU.other,values:B?this.fields.find(V=>V.name===U.name&&U.type===V.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=M}if(P&&P.values.length&&P.values[0].length){let{values:T,entities:M}=P;if(M&&M.forEach((B,U)=>{B&&(0,o.t)(B,T[U])}),this.pushMode===1){const B=r(T);for(const V of B.keys())this.labels.has(V)||(this.packetInfo.schemaChanged=!0,this.addLabel(V));let U=Array(this.schemaFields.length).fill([]),W=[];this.labels.forEach(V=>{W.push(B.get(V)??U)}),T=(0,n.fj)(W)}if(T.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${T.length} (labels=${this.pushMode===1})`);this.fields=T.map((B,U)=>{let W=`Field ${U}`,V=(0,l.HW)(B[0]);return U===0&&V===a.PU.number&&B[0]>1600016688632&&(V=a.PU.time,W="Time"),{name:W,type:V,config:{},values:[]}})}let I=T;this.packetInfo.length=T[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",I=this.fields.map(B=>B.values),x(I,T,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),I.forEach((B,U)=>{const W=this.fields[U],{state:V}=W;W.values=B,V&&(V.calcs=void 0)}),this.length=I[0].length}return{...this.packetInfo}}addLabel(f){const{displayNameFormat:C}=this.options,P=this.labels.size,T=g(f);if(P===0)this.fields.forEach((M,I)=>{if(I>0&&(M.labels=T,C)){const B={[c]:M.name,...T};M.config.displayNameFromDS=(0,d.j)(C,B)}});else for(let M=1;M<this.schemaFields.length;M++){let I=this.schemaFields[M];const B=I.config??{};if(C){const U={[c]:I.name,...T};B.displayNameFromDS=(0,d.j)(C,U)}this.fields.push({...I,config:B,labels:T,values:Array(this.length).fill(void 0)})}this.labels.add(f)}}function u(D){return{maxLength:D?.maxLength??1e3,maxDelta:D?.maxDelta??1/0,action:D?.action??"append",displayNameFormat:D?.displayNameFormat}}function r(D){let f=new Set(D[0]),C=new Map;f.forEach(P=>{let T=Array(D.length-1).fill(null).map(()=>[]);C.set(P,T)});for(let P=0;P<D[0].length;P++){let T=C.get(D[0][P]);for(let M=1;M<D.length;M++)T[M-1].push(D[M][P])}return C}function v(D,f,C,P){let T;C=C||0,P=P||f.length-1;let M=P<=2147483647;for(;P-C>1;)T=M?C+P>>1:Math.floor((C+P)/2),f[T]<D?C=T:P=T;return D-f[C]<=f[P]-D?C:P}function g(D){if(!D.length)return{};if(D.charAt(0)==="{")return(0,s.Xy)(D);const f={};return D.split(",").forEach(C=>{const[P,T]=C.trim().split("=");f[P]=T}),f}function E(D){if(D instanceof h)return D.packetInfo.action}function x(D,f,C=1/0,P=0,T=1/0){for(let M=0;M<D.length;M++)for(let I=0;I<f[M].length;I++)D[M].push(f[M][I]);return m(D,C,P,T)}function m(D,f=1/0,C=0,P=1/0){const T=y(D,f,C,P);if(T)for(let M=0;M<D.length;M++)D[M].splice(0,T);return T}function y(D,f=1/0,C=0,P=1/0){if(!D[0]?.length)return 0;const T=D[0].length;let M=0;if(T>f&&(M=T-f),P!==1/0&&C>=0){const I=D[C],B=I[M],U=I[T-1];U-B>P&&(M=v(U-P,I,M))}return M}function b(D,f){if(D?.length!==f.length)return!1;for(let C=0;C<D.length;C++){const P=D[C],T=f[C];if(P.name!==T.name||P.type!==T.type)return!1}return!0}},51515:(ne,j,e)=>{"use strict";e.d(j,{Jw:()=>n.Jw,Rx:()=>n.Rx,YZ:()=>a,_M:()=>n._M,b4:()=>s,d$:()=>n.d$});var n=e(38242),a=(d=>(d.Scheduled="Scheduled",d.Running="Running",d.Complete="Complete",d.Failed="Failed",d.Cancelled="Cancelled",d.Timeout="Timeout",d))(a||{}),s=(d=>(d.Regions="regions",d.Namespaces="namespaces",d.Metrics="metrics",d.DimensionKeys="dimensionKeys",d.DimensionValues="dimensionValues",d.EBSVolumeIDs="ebsVolumeIDs",d.EC2InstanceAttributes="ec2InstanceAttributes",d.ResourceArns="resourceARNs",d.Statistics="statistics",d.LogGroups="logGroups",d.Accounts="accounts",d))(s||{})},51702:(ne,j,e)=>{"use strict";e.d(j,{i:()=>s});var n=e(96540),a=e(63142);function s(d){const o=(0,a.$j)(),l=(0,n.useMemo)(()=>window.matchMedia(`(min-width: ${o.breakpoints.values[d]}px)`),[o,d]),[i,c]=(0,n.useState)(l.matches);return(0,n.useEffect)(()=>{const p=h=>c(h.matches);return l.addEventListener("change",p),()=>l.removeEventListener("change",p)},[l]),i}},51740:(ne,j,e)=>{"use strict";e.d(j,{U:()=>p,r:()=>c});var n=e(43173),a=e(72930);const s=(0,a.u)("basic_auth","Basic auth","Sets the `Authorization` header with the configured username and password. Password and password_file are mutually exclusive.",{element:"subform",subformOptions:[(0,a.u)("username","Username",""),(0,a.u)("password","Password",""),(0,a.u)("password_file","Password file","")]}),d=(0,a.u)("tls_config","TLS config","Configures the TLS settings.",{element:"subform",subformOptions:[(0,a.u)("ca_file","CA file","CA certificate to validate the server certificate with."),(0,a.u)("cert_file","Cert file","Certificate for client cert authentication to the server."),(0,a.u)("key_file","Key file","Key file for client cert authentication to the server."),(0,a.u)("server_name","Server name","ServerName extension to indicate the name of the server."),(0,a.u)("insecure_skip_verify","Skip verify","Disable validation of the server certificate.",{element:"checkbox"})]}),o=(0,a.u)("oauth2","OAuth2","Configures the OAuth2 settings.",{element:"subform",subformOptions:[(0,a.u)("client_id","Client ID","The OAuth2 client ID",{required:!0}),(0,a.u)("client_secret","Client secret","The OAuth2 client secret",{required:!0}),(0,a.u)("token_url","Token URL","The OAuth2 token exchange URL",{required:!0}),(0,a.u)("scopes","Scopes","Comma-separated list of scopes",{element:"string_array"}),(0,a.u)("endpoint_params","Additional parameters","",{element:"key_value_map"})]}),l=(0,a.u)("http_config","HTTP Config","Note that `basic_auth`, `bearer_token` and `bearer_token_file` options are mutually exclusive.",{element:"subform",subformOptions:[(0,a.u)("bearer_token","Bearer token","Sets the `Authorization` header with the configured bearer token."),(0,a.u)("bearer_token_file","Bearer token file","Sets the `Authorization` header with the bearer token read from the configured file."),(0,a.u)("proxy_url","Proxy URL","Optional proxy URL."),s,d,o]}),i={name:"Jira",description:"Send notifications to Jira Service Management",type:"jira",info:"",heading:"Jira settings",options:[(0,a.u)("api_url","API URL","The host to send Jira API requests to",{required:!0}),(0,a.u)("project","Project Key","The project key where issues are created",{required:!0}),(0,a.u)("summary","Summary","Issue summary template",{placeholder:'{{ template "jira.default.summary" . }}'}),(0,a.u)("description","Description","Issue description template",{placeholder:'{{ template "jira.default.description" . }}'}),(0,a.u)("labels","Labels"," Labels to be added to the issue",{element:"string_array"}),(0,a.u)("priority","Priority","Priority of the issue",{placeholder:'{{ template "jira.default.priority" . }}'}),(0,a.u)("issue_type","Issue Type","Type of the issue (e.g. Bug)",{required:!0}),(0,a.u)("reopen_transition","Reopen transition",'Name of the workflow transition to reopen an issue. The target status should not have the category "done"'),(0,a.u)("resolve_transition","Resolve transition",'Name of the workflow transition to resolve an issue. The target status must have the category "done"'),(0,a.u)("wont_fix_resolution","Won't fix resolution",'If "Reopen transition" is defined, ignore issues with that resolution'),(0,a.u)("reopen_duration","Reopen duration",'If "Reopen transition" is defined, reopen the issue when it is not older than this value (rounded down to the nearest minute)',{placeholder:"Use duration format, for example: 1.2s, 100ms"}),(0,a.u)("fields","Fields","Other issue and custom fields",{element:"key_value_map"}),l]},c=[{name:"Email",description:"Send notification over SMTP",type:"email",info:"",heading:"Email settings",options:[(0,a.u)("to","To",'The email address to send notifications to. You can enter multiple addresses using a "," separator',{required:!0}),(0,a.u)("from","From","The sender address."),(0,a.u)("smarthost","SMTP host","The SMTP host through which emails are sent."),(0,a.u)("hello","Hello","The hostname to identify to the SMTP server."),(0,a.u)("auth_username","Username","SMTP authentication information"),(0,a.u)("auth_password","Password","SMTP authentication information"),(0,a.u)("auth_secret","Secret","SMTP authentication information"),(0,a.u)("auth_identity","Identity","SMTP authentication information"),(0,a.u)("require_tls","Require TLS","The SMTP TLS requirement",{element:"checkbox"}),(0,a.u)("html","Email HTML body","The HTML body of the email notification.",{placeholder:'{{ template "email.default.html" . }}',element:"textarea"}),(0,a.u)("text","Email text body","The text body of the email notification.",{element:"textarea"}),(0,a.u)("headers","Headers","Further headers email header key/value pairs. Overrides any headers previously set by the notification implementation.",{element:"key_value_map"}),d]},{name:"PagerDuty",description:"Send notifications to PagerDuty",type:"pagerduty",info:"",heading:"PagerDuty settings",options:[(0,a.u)("routing_key","Routing key","The PagerDuty integration key (when using PagerDuty integration type `Events API v2`)"),(0,a.u)("service_key","Service key","The PagerDuty integration key (when using PagerDuty integration type `Prometheus`)."),(0,a.u)("url","URL","The URL to send API requests to"),(0,a.u)("client","Client","The client identification of the Alertmanager.",{placeholder:'{{ template "pagerduty.default.client" . }}'}),(0,a.u)("client_url","Client URL","A backlink to the sender of the notification.",{placeholder:'{{ template "pagerduty.default.clientURL" . }}'}),(0,a.u)("description","Description","A description of the incident.",{placeholder:'{{ template "pagerduty.default.description" .}}'}),(0,a.u)("severity","Severity","Severity of the incident.",{placeholder:"error"}),(0,a.u)("details","Details","A set of arbitrary key/value pairs that provide further detail about the incident.",{element:"key_value_map"}),(0,a.u)("images","Images","Images to attach to the incident.",{element:"subform_array",subformOptions:[(0,a.u)("href","URL","",{required:!0}),(0,a.u)("source","Source","",{required:!0}),(0,a.u)("alt","Alt","",{required:!0})]}),(0,a.u)("links","Links","Links to attach to the incident.",{element:"subform_array",subformOptions:[(0,a.u)("href","URL","",{required:!0}),(0,a.u)("text","Text","",{required:!0})]}),l]},{name:"Pushover",description:"Send notifications to Pushover",type:"pushover",info:"",heading:"Pushover settings",options:[(0,a.u)("user_key","User key","The recipient user\u2019s user key.",{required:!0}),(0,a.u)("token","Token","Your registered application\u2019s API token, see https://pushover.net/app",{required:!0}),(0,a.u)("title","Title","Notification title.",{placeholder:'{{ template "pushover.default.title" . }}'}),(0,a.u)("message","Message","Notification message.",{placeholder:'{{ template "pushover.default.message" . }}'}),(0,a.u)("url","URL","A supplementary URL shown alongside the message.",{placeholder:'{{ template "pushover.default.url" . }}'}),(0,a.u)("priority","Priority","Priority, see https://pushover.net/api#priority",{placeholder:'{{ if eq .Status "firing" }}2{{ else }}0{{ end }}'}),(0,a.u)("retry","Retry","How often the Pushover servers will send the same notification to the user. Must be at least 30 seconds.",{placeholder:"1m"}),(0,a.u)("expire","Expire","How long your notification will continue to be retried for, unless the user acknowledges the notification.",{placeholder:"1h"}),(0,a.u)("ttl","TTL","The number of seconds before a message expires and is deleted automatically. Examples: 10s, 5m30s, 8h.",{validationRule:"^(\\d+[s|m|h])+$|^$",element:"input"}),l]},{name:"Slack",description:"Send notifications to Slack",type:"slack",info:"",heading:"Slack settings",options:[(0,a.u)("api_url","Webhook URL","The Slack webhook URL."),(0,a.u)("channel","Channel","The #channel or @user to send notifications to.",{required:!0}),(0,a.u)("icon_emoji","Emoji icon",""),(0,a.u)("icon_url","Icon URL",""),(0,a.u)("link_names","Names link","",{element:"checkbox"}),(0,a.u)("username","Username","",{placeholder:'{{ template "slack.default.username" . }}'}),(0,a.u)("callback_id","Callback ID","",{placeholder:'{{ template "slack.default.callbackid" . }}'}),(0,a.u)("color","Color","",{placeholder:'{{ if eq .Status "firing" }}danger{{ else }}good{{ end }}'}),(0,a.u)("fallback","Fallback","",{placeholder:'{{ template "slack.default.fallback" . }}'}),(0,a.u)("footer","Footer","",{placeholder:'{{ template "slack.default.footer" . }}'}),(0,a.u)("mrkdwn_in","Mrkdwn fields","An array of field names that should be formatted by mrkdwn syntax.",{element:"string_array"}),(0,a.u)("pretext","Pre-text","",{placeholder:'{{ template "slack.default.pretext" . }}'}),(0,a.u)("short_fields","Short fields","",{element:"checkbox"}),(0,a.u)("text","Message body","",{element:"textarea",placeholder:'{{ template "slack.default.text" . }}'}),(0,a.u)("title","Title","",{placeholder:'{{ template "slack.default.title" . }}'}),(0,a.u)("title_link","Title link","",{placeholder:'{{ template "slack.default.titlelink" . }}'}),(0,a.u)("image_url","Image URL",""),(0,a.u)("thumb_url","Thumbnail URL",""),(0,a.u)("actions","Actions","",{element:"subform_array",subformOptions:[(0,a.u)("text","Text","",{required:!0}),(0,a.u)("type","Type","",{required:!0}),(0,a.u)("url","URL","Either url or name and value are mandatory."),(0,a.u)("name","Name",""),(0,a.u)("value","Value",""),(0,a.u)("confirm","Confirm","",{element:"subform",subformOptions:[(0,a.u)("text","Text","",{required:!0}),(0,a.u)("dismiss_text","Dismiss text",""),(0,a.u)("ok_text","OK text",""),(0,a.u)("title","Title","")]}),(0,a.u)("style","Style","")]}),(0,a.u)("fields","Fields","",{element:"subform_array",subformOptions:[(0,a.u)("title","Title","",{required:!0}),(0,a.u)("value","Value","",{required:!0}),(0,a.u)("short","Short","",{element:"checkbox"})]}),l]},...n.$.featureToggles?.alertingJiraIntegration?[i]:[],{name:"OpsGenie",description:"Send notifications to OpsGenie",type:"opsgenie",info:"",heading:"OpsGenie settings",options:[(0,a.u)("api_key","API key","The API key to use when talking to the OpsGenie API."),(0,a.u)("api_url","API URL","The host to send OpsGenie API requests to."),(0,a.u)("message","Message","Alert text limited to 130 characters."),(0,a.u)("description","Description","A description of the incident.",{placeholder:'{{ template "opsgenie.default.description" . }}'}),(0,a.u)("source","Source","A backlink to the sender of the notification.",{placeholder:'{{ template "opsgenie.default.source" . }}'}),(0,a.u)("details","Details","A set of arbitrary key/value pairs that provide further detail about the incident.",{element:"key_value_map"}),(0,a.u)("tags","Tags","Comma separated list of tags attached to the notifications."),(0,a.u)("note","Note","Additional alert note."),(0,a.u)("priority","Priority","Priority level of alert. Possible values are P1, P2, P3, P4, and P5."),(0,a.u)("responders","Responders","List of responders responsible for notifications.",{element:"subform_array",subformOptions:[(0,a.u)("type","Type",'"team", "user", "escalation" or schedule".',{required:!0}),(0,a.u)("id","ID","Exactly one of these fields should be defined."),(0,a.u)("name","Name","Exactly one of these fields should be defined."),(0,a.u)("username","Username","Exactly one of these fields should be defined.")]}),l]},{name:"VictorOps",description:"Send notifications to VictorOps",type:"victorops",info:"",heading:"VictorOps settings",options:[(0,a.u)("api_key","API key","The API key to use when talking to the VictorOps API."),(0,a.u)("api_url","API URL","The VictorOps API URL."),(0,a.u)("routing_key","Routing key","A key used to map the alert to a team.",{required:!0}),(0,a.u)("message_type","Message type","Describes the behavior of the alert (CRITICAL, WARNING, INFO)."),(0,a.u)("entity_display_name","Entity display name","Contains summary of the alerted problem.",{placeholder:'{{ template "victorops.default.entity_display_name" . }}'}),(0,a.u)("state_message","State message","Contains long explanation of the alerted problem.",{placeholder:'{{ template "victorops.default.state_message" . }}'}),(0,a.u)("monitoring_tool","Monitoring tool","The monitoring tool the state message is from.",{placeholder:'{{ template "victorops.default.monitoring_tool" . }}'}),l]},{name:"Webhook",description:"Send notifications to a webhook",type:"webhook",info:"",heading:"Webhook settings",options:[(0,a.u)("url","URL","The endpoint to send HTTP POST requests to.",{required:!0}),(0,a.u)("max_alerts","Max alerts","The maximum number of alerts to include in a single webhook message. Alerts above this threshold are truncated. When leaving this at its default value of 0, all alerts are included.",{placeholder:"0",inputType:"number",validationRule:"(^\\d+$|^$)",setValueAs:h=>{const u=Number(h);return Number.isFinite(u)?u:0}}),(0,a.u)("timeout","Timeout","The maximum time to wait for a webhook request to complete, before failing the request and allowing it to be retried. The default value of 0s indicates that no timeout should be applied. NOTE: This will have no effect if set higher than the group_interval.",{placeholder:"Use duration format, for example: 1.2s, 100ms"}),l]},{name:"Discord",description:"Sends notifications to Discord",type:"discord",info:"",heading:"Discord settings",options:[(0,a.u)("title","Title","Templated title of the message",{placeholder:'{{ template "discord.default.title" . }}'}),(0,a.u)("message","Message Content","Mention a group using @ or a user using <@ID> when notifying in a channel",{placeholder:'{{ template "discord.default.message" . }}'}),(0,a.u)("webhook_url","Webhook URL","",{placeholder:"Discord webhook URL",required:!0}),l]},{name:"Cisco Webex Teams",description:"Sends notifications to Cisco Webex Teams",type:"webex",info:"",heading:"Cisco Webex Teams settings",options:[(0,a.u)("api_url","API URL","The Webex Teams API URL",{placeholder:"https://webexapis.com/v1/messages"}),(0,a.u)("room_id","Room ID","ID of the Webex Teams room where to send the messages",{required:!0}),(0,a.u)("message","Message","Message template",{placeholder:'{{ template "webex.default.message" .}}'}),{...l,required:!0}]},{name:"Telegram",description:"Sends notifications to Telegram",type:"telegram",info:"",heading:"Telegram settings",options:[(0,a.u)("api_url","API URL","The Telegram API URL",{placeholder:"https://api.telegram.org"}),(0,a.u)("bot_token","Bot token","Telegram bot token",{required:!0}),(0,a.u)("chat_id","Chat ID","ID of the chat where to send the messages",{required:!0,setValueAs:h=>typeof h=="string"?parseInt(h,10):h}),(0,a.u)("message","Message","Message template",{placeholder:'{{ template "webex.default.message" .}}'}),(0,a.u)("disable_notifications","Disable notifications","Disable telegram notifications",{element:"checkbox"}),(0,a.u)("parse_mode","Parse mode","Parse mode for telegram message",{element:"select",defaultValue:{label:"None",value:""},selectOptions:[{label:"None",value:""},{label:"MarkdownV2",value:"MarkdownV2"},{label:"Markdown",value:"Markdown"},{label:"HTML",value:"HTML"}]}),l]},{name:"Amazon SNS",description:"Sends notifications to Amazon SNS",type:"sns",info:"",heading:"Amazon SNS settings",options:[(0,a.u)("api_url","API URL","The Amazon SNS API URL"),(0,a.u)("sigv4","SigV4 authentication","Configures AWS's Signature Verification 4 signing process to sign requests",{element:"subform",subformOptions:[(0,a.u)("region","Region","The AWS region. If blank, the region from the default credentials chain is used"),(0,a.u)("access_key","Access key",'The AWS API access_key. If blank the environment variable "AWS_ACCESS_KEY_ID" is used'),(0,a.u)("secret_key","Secret key",'The AWS API secret_key. If blank the environment variable "AWS_ACCESS_SECRET_ID" is used'),(0,a.u)("profile","Profile","Named AWS profile used to authenticate"),(0,a.u)("role_arn","Role ARN","AWS Role ARN, an alternative to using AWS API keys")]}),(0,a.u)("topic_arn","SNS topic ARN","If you don't specify this value, you must specify a value for the phone_number or target_arn. If you are using a FIFO SNS topic you should set a message group interval longer than 5 minutes to prevent messages with the same group key being deduplicated by the SNS default deduplication window"),(0,a.u)("phone_number","Phone number","Phone number if message is delivered via SMS in E.164 format. If you don't specify this value, you must specify a value for the topic_arn or target_arn"),(0,a.u)("target_arn","Target ARN","The  mobile platform endpoint ARN if message is delivered via mobile notifications. If you don't specify this value, you must specify a value for the topic_arn or phone_number"),(0,a.u)("subject","Subject","Subject line when the message is delivered",{placeholder:'{{ template "sns.default.subject" .}}'}),(0,a.u)("message","Message","The message content of the SNS notification",{placeholder:'{{ template "sns.default.message" .}}'}),(0,a.u)("attributes","Attributes","SNS message attributes",{element:"key_value_map"}),l]},{name:"WeChat",description:"Sends notifications to WeChat",type:"wechat",info:"",heading:"WeChat settings",options:[(0,a.u)("api_url","API URL","The WeChat API URL"),(0,a.u)("api_secret","API Secret","The API key to use when talking to the WeChat API"),(0,a.u)("corp_id","Corp ID","The corp id for authentication"),(0,a.u)("message","Message","API request data as defined by the WeChat API",{placeholder:'{{ template "wechat.default.message" . }}'}),(0,a.u)("message_type","Message type","Type of the message type",{element:"select",defaultValue:{label:"Text",value:"text"},selectOptions:[{label:"Text",value:"text"},{label:"Markdown",value:"markdown"}]}),(0,a.u)("agent_id","Agent ID","",{placeholder:'{{ template "wechat.default.agent_id" . }}'}),(0,a.u)("to_user","to user","",{placeholder:'{{ template "wechat.default.to_user" . }}'}),(0,a.u)("to_party","to party","",{placeholder:'{{ template "wechat.default.to_party" . }}'}),(0,a.u)("to_tag","to tag","",{placeholder:'{{ template "wechat.default.to_tag" . }}'})]},{name:"Microsoft Teams",description:"Sends notifications to Microsoft Teams",type:"msteams",info:"",heading:"Microsoft Teams settings",options:[(0,a.u)("webhook_url","Webhook URL","The incoming webhook URL."),(0,a.u)("title","Title","Message title template.",{placeholder:'{{ template "teams.default.title" . }}'}),(0,a.u)("text","Text","Message body template.",{placeholder:'{{ template "teams.default.text" . }}'})]}],p=[(0,a.u)("smtp_from","SMTP from","The default SMTP From header field."),(0,a.u)("smtp_smarthost","SMTP smarthost","The default SMTP smarthost used for sending emails, including port number. Port number usually is 25, or 587 for SMTP over TLS (sometimes referred to as STARTTLS). Example: smtp.example.org:587"),(0,a.u)("smtp_hello","SMTP hello","The default hostname to identify to the SMTP server.",{placeholder:"localhost"}),(0,a.u)("smtp_auth_username","SMTP auth username","SMTP Auth using CRAM-MD5, LOGIN and PLAIN. If empty, Alertmanager doesn't authenticate to the SMTP server."),(0,a.u)("smtp_auth_password","SMTP auth password","SMTP Auth using LOGIN and PLAIN."),(0,a.u)("smtp_auth_identity","SMTP auth identity","SMTP Auth using PLAIN."),(0,a.u)("smtp_auth_secret","SMTP auth secret","SMTP Auth using CRAM-MD5."),(0,a.u)("smtp_require_tls","SMTP require TLS","The default SMTP TLS requirement. Note that Go does not support unencrypted connections to remote SMTP endpoints.",{element:"checkbox"}),(0,a.u)("slack_api_url","Slack API URL",""),(0,a.u)("victorops_api_key","VictorOps API key",""),(0,a.u)("victorops_api_url","VictorOps API URL","",{placeholder:"https://alert.victorops.com/integrations/generic/20131114/alert/"}),(0,a.u)("pagerduty_url","PagerDuty URL","https://events.pagerduty.com/v2/enqueue"),(0,a.u)("opsgenie_api_key","OpsGenie API key",""),(0,a.u)("opsgenie_api_url","OpsGenie API URL","",{placeholder:"https://api.opsgenie.com/"}),(0,a.u)("wechat_api_url","WeChat API URL","",{placeholder:"https://qyapi.weixin.qq.com/cgi-bin/"}),(0,a.u)("wechat_api_secret","WeChat API secret",""),(0,a.u)("wechat_api_corp_id","WeChat API corp id",""),(0,a.u)("webex_api_url","Cisco Webex Teams API URL",""),(0,a.u)("telegram_api_url","The Telegram API URL",""),l,(0,a.u)("resolve_timeout","Resolve timeout","ResolveTimeout is the default value used by alertmanager if the alert does not include EndsAt, after this time passes it can declare the alert as resolved if it has not been updated. This has no impact on alerts from Prometheus, as they always include EndsAt.",{placeholder:"5m"})]},51845:(ne,j,e)=>{"use strict";e.d(j,{$0:()=>u,EA:()=>v,Fb:()=>y,Gd:()=>f,LJ:()=>C,QZ:()=>b,RE:()=>D,_9:()=>E,fx:()=>r,nE:()=>g});var n=e(65307),a=e(62635),s=e(6219),d=e(34984),o=e(52763),l=e(707),i=e(19050),c=e(94543),p=e(83953);const h=(0,n.VP)("explore/changeSize"),u=(0,n.VP)("explore/changeCompactMode"),r=(0,n.VP)("explore/changePanels");function v(P,T,M){return async(I,B)=>{const U=B().explore.panes[P];if(U===void 0)return;const{panelsState:W}=U;I(r({exploreId:P,panelsState:{...W,[T]:M}}))}}const g=(0,n.VP)("explore/changeCorrelationHelperData"),E=(0,n.VP)("explore/updateQueryLibraryRef"),x=(0,n.VP)("explore/initializeExploreAction"),m=(0,n.VP)("explore/setUrlReplaced"),y=(0,n.VP)("explore/saveCorrelationsAction");function b(P,{width:T}){return h({exploreId:P,width:T})}function D(P,T){return u({exploreId:P,compact:T})}const f=(0,o.zD)("explore/initializeExplore",async({exploreId:P,datasource:T,queries:M,range:I,panelsState:B,compact:U,correlationHelperData:W,eventBridge:V,queryLibraryRef:z},{dispatch:R,getState:O,fulfillWithValue:N})=>{let F,G=[];if(T){const H=O().user.orgId,K=await(0,p.BE)(H,T);F=K.instance,G=K.history}if(R(x({exploreId:P,queries:M,range:(0,p.eO)(I,(0,d.O)(O().user)),datasourceInstance:F,history:G,compact:U,eventBridge:V,queryLibraryRef:z})),B!==void 0&&R(r({exploreId:P,panelsState:B})),R((0,c.JA)({exploreId:P})),F){const H=(0,p.dq)(F.uid,M),K=await(0,s.J6)(H);R(y({exploreId:P,correlations:K.correlations||[]})),R((0,i.Od)({exploreId:P}))}return W!==void 0&&O().explore.correlationEditorDetails?.editorMode&&R(g({exploreId:P,correlationEditorHelperData:W})),N({exploreId:P,state:O().explore.panes[P]})}),C=(P=(0,p.HZ)(),T)=>{if(P=(0,i.JQ)(P,T),P=(0,l.YR)(P,T),P=(0,c.QP)(P,T),h.match(T)){const M=Math.floor(T.payload.width);return{...P,containerWidth:M}}if(u.match(T)){const M=T.payload.compact;return{...P,compact:M}}if(r.match(T)){const{panelsState:M}=T.payload;return{...P,panelsState:M}}if(g.match(T)){const{correlationEditorHelperData:M}=T.payload;return{...P,correlationEditorHelperData:M}}if(y.match(T))return{...P,correlations:T.payload.correlations};if(E.match(T))return{...P,queryLibraryRef:T.payload.queryLibraryRef};if(x.match(T)){const{queries:M,range:I,datasourceInstance:B,history:U,eventBridge:W,compact:V,queryLibraryRef:z}=T.payload;return{...P,range:I,queries:M,initialized:!0,eventBridge:W,queryKeys:(0,a.dY)(M),datasourceInstance:B,history:U,queryResponse:(0,p.RA)(),cache:[],correlations:[],queryLibraryRef:z,compact:V}}return P}},51993:(ne,j,e)=>{"use strict";e.d(j,{GX:()=>G,r4:()=>N});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(96540),l=e(49785),i=e(17503),c=e(80011),p=e(1906),h=e(28105),u=e(92745),r=e(76319),v=e(34999),g=e(45861),E=e(66404),x=e(41654),m=e(33033),y=e(63142),b=e(91073),D=e(18203),f=e(89931),C=e(4652),P=e(87767),T=e(38610),M=e(4651),I=e(24619),B=e(74048),U=e(29609),W=e(38055),V=e(49779),z=e(65420),R=e(38076),O=e(88589);const N=({queries:X=[],query:J,data:_,error:ee,warning:ae,isAlertCondition:le,onSetCondition:L,onUpdateRefId:ie,onRemoveExpression:oe,onUpdateExpressionType:ue,onChangeQuery:ye})=>{const fe=(0,y.of)(Y),Ee=J?.type,{setError:Ae,clearErrors:Ge,watch:Fe}=(0,l.xW)(),Pe=Fe("type"),Ve=Pe?(0,U.pq)(Pe):!1,me=(0,o.useCallback)($e=>{$e?Ae("queries",{type:"custom",message:$e}):Ge("queries")},[Ae,Ge]),Se=_&&Object.values(_).some($e=>!!$e&&$e.state===h.Gu.Loading),Qe=Array.isArray(_?.series)&&!Se,Ue=_?.series??[],Ie=le??!1,{seriesCount:Re,groupedByState:Ke}=K(Ue),Le=(0,o.useCallback)($e=>{const Ye=X.filter(de=>$e.refId!==de.refId).map(de=>({value:de.refId,label:de.refId}));switch($e.type){case M.Tz.math:return(0,n.jsx)(D.z,{onChange:ye,query:$e,labelWidth:"auto",onRunQuery:()=>{}});case M.Tz.reduce:return(0,n.jsx)(f.Z,{onChange:ye,refIds:Ye,labelWidth:"auto",app:p.Jk.UnifiedAlerting,query:$e});case M.Tz.resample:return(0,n.jsx)(C.C,{onChange:ye,query:$e,labelWidth:"auto",refIds:Ye});case M.Tz.classic:return(0,n.jsx)(b.z,{onChange:ye,query:$e,refIds:Ye});case M.Tz.threshold:return(0,n.jsx)(T.O,{onChange:ye,query:$e,labelWidth:"auto",refIds:Ye,onError:me,useHysteresis:!0});case M.Tz.sql:return(0,n.jsx)(P.k,{onChange:de=>ye(de),query:$e,refIds:Ye,alerting:!0,queries:[]});default:return(0,n.jsxs)(u.x6,{i18nKey:"alerting.expression.not-supported",values:{expression:$e.type},children:["Expression not supported: ","{{expression}}"]})}},[ye,X,me]),Be=M.uQ.find($e=>$e.value===Ee)?.description??"";return(0,n.jsx)("div",{className:(0,a.cx)(fe.expression.wrapper,Ie&&fe.expression.alertCondition,Ee===M.Tz.classic&&fe.expression.classic,Ee!==M.Tz.classic&&fe.expression.nonClassic),children:(0,n.jsxs)("div",{className:fe.expression.stack,children:[(0,n.jsx)(w,{refId:J.refId,queryType:Ee,onRemoveExpression:()=>oe(J.refId),onUpdateRefId:$e=>ie(J.refId,$e),onSetCondition:L,query:J,alertCondition:Ie}),(0,n.jsxs)("div",{className:fe.expression.body,children:[ee&&(0,n.jsx)(v.F,{title:(0,u.t)("alerting.expression.title-expression-failed","Expression failed"),severity:"error",children:ee.message}),ae&&(0,n.jsx)(v.F,{title:(0,u.t)("alerting.expression.title-expression-warning","Expression warning"),severity:"warning",children:ae.message}),(0,n.jsx)("div",{className:fe.expression.description,children:Be}),Le(J)]}),Qe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G,{series:Ue,isAlertCondition:le,isRecordingRule:Ve}),!Ve&&(0,n.jsx)("div",{className:fe.footer,children:(0,n.jsxs)(x.B,{direction:"row",alignItems:"center",children:[(0,n.jsx)(V.h,{}),(0,n.jsx)(H,{isCondition:!!le,firing:Ke[I.cF.Firing].length,normal:Ke[I.cF.Inactive].length,seriesCount:Re})]})})]})]})})},F=20,G=({series:X,isAlertCondition:J,isRecordingRule:_=!1})=>{const{pageItems:ee,previousPage:ae,nextPage:le,numberOfPages:L,pageStart:ie,pageEnd:oe}=(0,B.W)(X,1,F),ue=(0,y.of)(Y),ye=(0,O.PI)(X),fe=!ye&&(0,i.jq)(X),Ee=L>1;return(0,n.jsxs)("div",{className:ue.expression.results,children:[!ye&&fe&&(0,n.jsx)("div",{children:ee.map((Ae,Ge)=>(0,n.jsx)(re,{frame:Ae,index:ie+Ge,isAlertCondition:J},(0,s.uniqueId)()))}),!ye&&!fe&&ee.map((Ae,Ge)=>(0,n.jsx)(se,{frame:Ae,index:ie+Ge,isAlertCondition:J,isRecordingRule:_},(0,s.uniqueId)())),ye&&(0,n.jsx)("div",{className:(0,a.cx)(ue.expression.noData,ue.mutedText),children:(0,n.jsx)(u.x6,{i18nKey:"alerting.expression-result.no-data",children:"No data"})}),Ee&&(0,n.jsx)("div",{className:ue.pagination.wrapper,"data-testid":"paginate-expression",children:(0,n.jsxs)(x.B,{children:[(0,n.jsx)(g.$n,{variant:"secondary",fill:"outline",onClick:ae,icon:"angle-left",size:"sm","aria-label":(0,u.t)("alerting.expression-result.aria-label-previouspage","previous-page")}),(0,n.jsx)(V.h,{}),(0,n.jsx)("span",{className:ue.mutedText,children:(0,n.jsxs)(u.x6,{i18nKey:"alerting.expression-result.page-counter",values:{pageStart:ie,pageEnd:oe,numPages:X.length},children:["{{pageStart}}"," - ","{{pageEnd}}"," of ","{{numPages}}"]})}),(0,n.jsx)(V.h,{}),(0,n.jsx)(g.$n,{variant:"secondary",fill:"outline",onClick:le,icon:"angle-right",size:"sm","aria-label":(0,u.t)("alerting.expression-result.aria-label-nextpage","next-page")})]})})]})},H=({firing:X,normal:J,isCondition:_,seriesCount:ee})=>{const{mutedText:ae}=(0,y.of)(Y);return ee===0?(0,n.jsx)("span",{className:ae,children:(0,n.jsx)(u.x6,{i18nKey:"alerting.preview-summary.no-series",children:"No series"})}):_?(0,n.jsx)("span",{className:ae,children:`${ee} series: ${X} firing, ${J} normal`}):(0,n.jsx)("span",{className:ae,children:`${ee} series`})};function K(X){const J=X.filter(ae=>(0,O.Lm)(ae)===void 0).length,_={[I.cF.Firing]:X.filter(ae=>(0,O.Lm)(ae)!==void 0&&(0,O.Lm)(ae)!==0),[I.cF.Inactive]:X.filter(ae=>(0,O.Lm)(ae)===0)},ee=X.length-J;return{groupedByState:_,seriesCount:ee}}const w=({refId:X,queryType:J,onUpdateRefId:_,onRemoveExpression:ee,onSetCondition:ae,alertCondition:le,query:L})=>{const ie=(0,y.of)(Y),oe=(0,y.of)(g.my),[ue,ye]=(0,o.useState)(!1),Ee=ue!==!1&&ue==="refId";return(0,n.jsx)("header",{className:ie.header.wrapper,children:(0,n.jsxs)(x.B,{direction:"row",gap:.5,alignItems:"center",children:[(0,n.jsxs)(x.B,{direction:"row",gap:1,alignItems:"center",children:[!Ee&&(0,n.jsx)("button",{type:"button",className:(0,a.cx)(oe,ie.editable),onClick:()=>ye("refId"),children:(0,n.jsx)("div",{className:ie.expression.refId,children:X})}),Ee&&(0,n.jsx)(m.D,{autoFocus:!0,defaultValue:X,minWidth:5,onFocus:Ae=>Ae.target.select(),onBlur:Ae=>{_(Ae.currentTarget.value),ye(!1)}}),(0,n.jsx)("div",{children:(0,M.NI)(J)})]}),(0,n.jsx)(V.h,{}),(0,n.jsx)(R.a,{refId:X,onSetCondition:()=>ae(L.refId),isCondition:le}),(0,n.jsx)(r.K,{name:"trash-alt",variant:"secondary",className:ie.mutedIcon,onClick:ee,tooltip:(0,u.t)("alerting.header.tooltip-remove",'Remove expression "{{refId}}"',{refId:X})})]})})},Q=()=>(0,n.jsx)("span",{children:"{"}),k=()=>(0,n.jsx)("span",{children:"}"}),te=()=>(0,n.jsx)("span",{children:'"'}),q=()=>(0,n.jsx)("span",{children:"="});function se({frame:X,index:J,isAlertCondition:_,isRecordingRule:ee}){const ae=(0,y.of)(Y),le=(0,O.Jw)(X)||"Series "+J,L=(0,O.Lm)(X),ie=(0,O.JQ)(X),oe=Object.entries(ie),ue=oe.length>0,ye=_&&L!==0,fe=_&&L===0,Ee=`${ue?"":le}${ue?`{${(0,O.h6)(ie)}}`:""}`,Ae=!ee;return(0,n.jsx)("div",{className:ae.expression.resultsRow,children:(0,n.jsxs)(x.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("div",{className:ae.expression.resultLabel,title:Ee,children:(0,n.jsx)(E.E,{variant:"code",children:ue?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q,{}),oe.map(([Ge,Fe],Pe)=>(0,n.jsxs)(E.E,{variant:"body",children:[(0,n.jsx)("span",{className:ae.expression.labelKey,children:Ge}),(0,n.jsx)(q,{}),(0,n.jsx)(te,{}),(0,n.jsx)("span",{className:ae.expression.labelValue,children:Fe}),(0,n.jsx)(te,{}),Pe<oe.length-1&&(0,n.jsx)("span",{children:", "})]},(0,s.uniqueId)())),(0,n.jsx)(k,{})]}):(0,n.jsx)("span",{className:ae.expression.labelKey,children:Ee})})}),(0,n.jsx)("div",{className:ae.expression.resultValue,children:(0,O.Cs)(L)}),Ae&&(0,n.jsxs)(n.Fragment,{children:[ye&&(0,n.jsx)(z.C,{state:I.cF.Firing,size:"sm"}),fe&&(0,n.jsx)(z.C,{state:I.cF.Inactive,size:"sm"})]})]})})}const re=({frame:X,index:J})=>{const _=(0,y.of)(Y),ee=X.fields[1],ae=ee.labels,L=ee.config?.displayNameFromDS??(ae?(0,O.h6)(ee.labels??{}):"Series "+J),ie=X.fields[0].values,oe=ye=>X.fields[0].values[ye],ue=ye=>X.fields[1].values[ye];return(0,n.jsx)("div",{className:_.expression.resultsRow,children:(0,n.jsxs)(x.B,{direction:"row",alignItems:"center",children:[(0,n.jsx)("span",{className:(0,a.cx)(_.mutedText,_.expression.resultLabel),title:L,children:L}),(0,n.jsx)("div",{className:_.expression.resultValue,children:(0,n.jsx)(W.B,{placement:"right",wrapperClassName:_.timeseriesTableWrapper,content:(0,n.jsxs)("table",{className:_.timeseriesTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(u.x6,{i18nKey:"alerting.timeseries-row.timestamp",children:"Timestamp"})}),(0,n.jsx)("th",{children:(0,n.jsx)(u.x6,{i18nKey:"alerting.timeseries-row.value",children:"Value"})})]})}),(0,n.jsx)("tbody",{children:ie.map((ye,fe)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:_.mutedText,children:(0,c.LE)(oe(fe))}),(0,n.jsx)("td",{className:_.expression.resultValue,children:ue(fe)})]},fe))})]}),children:(0,n.jsx)("span",{children:(0,n.jsx)(u.x6,{i18nKey:"alerting.timeseries-row.time-series-data",children:"Time series data"})})})})]})})},Y=X=>({expression:{wrapper:(0,a.css)({display:"flex",border:`solid 1px ${X.colors.border.medium}`,flex:1,flexBasis:"400px",borderRadius:X.shape.radius.default,overflow:"hidden"}),stack:(0,a.css)({display:"flex",flexDirection:"column",flexWrap:"nowrap",gap:0,width:"100%",minWidth:"0"}),classic:(0,a.css)({maxWidth:"100%"}),nonClassic:(0,a.css)({maxWidth:"640px"}),alertCondition:(0,a.css)({}),body:(0,a.css)({padding:X.spacing(1),flex:1}),description:(0,a.css)({marginBottom:X.spacing(1),fontSize:X.typography.size.xs,color:X.colors.text.secondary}),refId:(0,a.css)({fontWeight:X.typography.fontWeightBold,color:X.colors.primary.text}),results:(0,a.css)({display:"flex",flexDirection:"column",flexWrap:"nowrap",borderTop:`solid 1px ${X.colors.border.medium}`}),noResults:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"center"}),resultsRow:(0,a.css)({padding:`${X.spacing(.75)} ${X.spacing(1)}`,"&:nth-child(odd)":{backgroundColor:X.colors.background.secondary},"&:hover":{backgroundColor:X.colors.background.canvas}}),labelKey:(0,a.css)({color:X.isDark?"#73bf69":"#56a64b"}),labelValue:(0,a.css)({color:X.isDark?"#ce9178":"#a31515"}),resultValue:(0,a.css)({textAlign:"right"}),resultLabel:(0,a.css)({flex:1,overflowX:"auto",display:"inline-block",whiteSpace:"nowrap"}),noData:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:X.spacing()})},mutedText:(0,a.css)({color:X.colors.text.secondary,fontSize:"0.9em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),header:{wrapper:(0,a.css)({background:X.colors.background.secondary,padding:`${X.spacing(.5)} ${X.spacing(1)}`,borderBottom:`solid 1px ${X.colors.border.weak}`})},footer:(0,a.css)({background:X.colors.background.secondary,padding:X.spacing(1),borderTop:`solid 1px ${X.colors.border.weak}`}),draggableIcon:(0,a.css)({cursor:"grab"}),mutedIcon:(0,a.css)({color:X.colors.text.secondary}),editable:(0,a.css)({padding:`${X.spacing(.5)} ${X.spacing(1)}`,border:`solid 1px ${X.colors.border.weak}`,borderRadius:X.shape.radius.default,display:"flex",flexDirection:"row",alignItems:"center",gap:X.spacing(1),cursor:"pointer"}),timeseriesTableWrapper:(0,a.css)({maxHeight:"500px",overflowY:"scroll"}),timeseriesTable:(0,a.css)({tableLayout:"auto",width:"100%",height:"100%","td, th":{padding:X.spacing(1)},td:{background:X.colors.background.primary},th:{background:X.colors.background.secondary},tr:{borderBottom:`1px solid ${X.colors.border.medium}`,"&:last-of-type":{borderBottom:"none"}}}),pagination:{wrapper:(0,a.css)({borderTop:`1px solid ${X.colors.border.medium}`,padding:X.spacing()})}})},52042:(ne,j,e)=>{"use strict";e.d(j,{L:()=>l});var n=e(74848),a=e(22803),s=e(63142),d=e(97095),o=e(79233);const l=({label:c,htmlFor:p,children:h,fill:u})=>{const r=(0,s.of)(i);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(d.C,{children:[(0,n.jsx)(o.c,{htmlFor:p,width:12,className:r.label,children:c}),h,u&&(0,n.jsx)("div",{className:r.fill,children:(0,n.jsx)(o.c,{children:""})})]})})},i=c=>({label:(0,a.css)({color:c.colors.primary.text}),fill:(0,a.css)({flexGrow:1,marginBottom:c.spacing(.5)})})},52043:(ne,j,e)=>{"use strict";e.d(j,{u:()=>d});var n=e(5556),a=e(43173),s=e(36490);function d(o){let l=`/d/${o.uid}`;o.uid||(l="/dashboard/new"),o.isSnapshot&&(l=`/dashboard/snapshot/${o.uid}`),o.soloRoute&&(l=`/d-solo/${o.uid}`),o.slug&&(l+=`/${o.slug}`),o.subPath&&(l+=o.subPath),o.render&&(l="/render"+l,o.updateQuery={...o.updateQuery,width:o.updateQuery?.width||1e3,height:o.updateQuery?.height||500,tz:o.timeZone}),o.isHomeDashboard&&(l="/");const i=o.currentQueryParams?(0,s.SE)(o.currentQueryParams):{};if(delete i.shareView,o.updateQuery)for(const p in o.updateQuery)o.updateQuery[p]===null||o.updateQuery[p]===void 0?delete i[p]:i[p]=o.updateQuery[p];const c=n.kM.renderUrl(l,i);return o.absolute?a.$.appUrl+c.slice(1):c}},52060:(ne,j,e)=>{"use strict";e.d(j,{N:()=>n});function n({url:a,source:s,transformSourceMapURL:d=!1,transformAssets:o=!0}){const l=a.split("/public/plugins/"),i=l[0],c=l[1].split("/")[0];let p=s;return o&&(p=p.replace(/(\/?)(public\/plugins)/g,`${i}/$2`),p=p.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${i}/public/$2$3`)),d&&(p=p.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${i}/public/plugins/${c}/$2.map`)),p}},52161:(ne,j,e)=>{"use strict";e.d(j,{$e:()=>re,AL:()=>k,EV:()=>K,Eb:()=>Q,Gb:()=>Fe,Iz:()=>ee,TG:()=>G,Zw:()=>X,at:()=>Ee,bD:()=>U,bS:()=>ue,bt:()=>oe,cl:()=>fe,cy:()=>O,gR:()=>F,hP:()=>L,hY:()=>y,iV:()=>V,k5:()=>ae,lS:()=>H,o_:()=>Ge,of:()=>M,oh:()=>se,ol:()=>f,qi:()=>C,r3:()=>Y,r6:()=>D,sq:()=>N,v0:()=>w,vv:()=>b,w5:()=>_,y9:()=>le,yc:()=>te,z2:()=>q});var n=e(78282),a=e(15130),s=e(66513),d=e(88114),o=e(84266),l=e(11257),i=e(86791),c=e(42581),p=e(91984),h=e(76070),u=e(17349),r=e(93395),v=e(5358),g=e(54),E=e(15633),x=e(182),m=e(29609);const y="grafana",b="-- Grafana --",D={uid:i.l$,name:y,ruleSourceType:"grafana"};var f=(Pe=>(Pe.Alertmanager="alertmanager",Pe.Loki="loki",Pe.Prometheus="prometheus",Pe.AmazonPrometheus="grafana-amazonprometheus-datasource",Pe.AzurePrometheus="grafana-azureprometheus-datasource",Pe))(f||{});function C(){const Pe=a.TP.hasPermission(l.w.AlertingRuleExternalRead),Ve=a.TP.hasPermission(l.w.AlertingRuleExternalWrite);return!Pe&&!Ve?[]:(0,x.k7)().filter(me=>fe(me.type)).filter(me=>L(me)).sort((me,Se)=>me.name.localeCompare(Se.name))}function P(Pe){return q(Pe)?"grafana":Pe.uid??Pe.id}function T(Pe){return C().find(Ve=>Ve.name===Pe)}function M(Pe){return C().find(Ve=>Ve.uid===Pe)}function I(){return(0,x.k7)().filter(B).sort((Pe,Ve)=>Pe.name.localeCompare(Ve.name))}function B(Pe){return Pe.type==="alertmanager"}function U(Pe){return Pe.type==="alertmanager"}function W(){return I().filter(Pe=>Pe.jsonData.handleGrafanaManagedAlerts)}function V(Pe){return Pe.jsonData.handleGrafanaManagedAlerts===!0}const z={name:y,imgUrl:c,hasConfigurationAPI:!0};function R(){return[z,...I().map(Pe=>({name:Pe.name,displayName:Pe.name,imgUrl:Pe.meta.info.logos.small,meta:Pe.meta}))]}function O(Pe){const Ve=(0,r.W)(Pe),me=Ve.availableExternalDataSources.filter(Ie=>Ie.handleGrafanaManagedAlerts),Se=Ve.availableInternalDataSources,{currentData:Qe}=p.m.endpoints.getGrafanaAlertingConfigurationStatus.useQuery();switch(Qe?.alertmanagersChoice){case o.nA.Internal:return Se;case o.nA.External:return me;default:return[...Se,...me]}}function N(Pe){const Ve=[],me=[],Se={instance:g.HL.read,notification:g.VQ.read,silence:g.nU.read};if([...Object.values(Se).flatMap(Ie=>Ie.grafana),...h.w6,...d.Im,...u.X,...s.GK].some(Ie=>a.TP.hasPermission(Ie))&&Ve.push(z),a.TP.hasPermission(Se[Pe].external)){const Ie=I().map(Re=>({name:Re.name,displayName:Re.name,imgUrl:Re.meta.info.logos.small,meta:Re.meta,hasConfigurationAPI:(0,v.Kh)(Re.jsonData),handleGrafanaManagedAlerts:Re.jsonData.handleGrafanaManagedAlerts}));me.push(...Ie)}return{availableInternalDataSources:Ve,availableExternalDataSources:me}}function F(){const Pe=C().map(Ve=>Ve.name);return a.TP.hasPermission(l.w.AlertingRuleRead)&&Pe.push(y),Pe}function G(){return C().map(Pe=>({name:Pe.name,uid:Pe.uid,ruleSourceType:"datasource"}))}function H(){const Pe=C();return a.TP.hasPermission(l.w.AlertingRuleRead)&&Pe.unshift(y),Pe}function K(Pe){return Q(Pe)?Pe.name:Pe}function w(Pe){return Q(Pe)?Pe.uid:y}function Q(Pe){return Pe!==y}function k(Pe){return Pe!==y&&Y(Pe)?.jsonData?.implementation===o.Oz.prometheus}function te(Pe){return Pe.readOnly===!0}function q(Pe){return Pe===y}function se(Pe){return(0,x.k7)().find(Ve=>Ve.name===Pe)}function re(Pe){return(0,x.k7)().find(Ve=>Ve.uid===Pe)}function Y(Pe){return(0,x.k7)().filter(B).find(Ve=>Ve.name===Pe)}function X(Pe){return Pe===y?y:se(Pe)}function J(Pe){if(Pe===y)return y;const Ve=se(Pe);if(!Ve)throw new Error(`Datasource "${Pe}" not found`);return String(Ve.id)}function _(Pe){if(Pe===y)return y;if((0,E.b)(Pe))return Pe;const Ve=se(Pe);if(!Ve)throw new Error(`Datasource "${Pe}" not found`);return Ve.uid}function ee(Pe){if("uid"in Pe)return Pe.uid;if(Pe.rulesSourceName===y)return i.l$;const Ve=T(Pe.rulesSourceName);if(Ve)return Ve.uid}function ae(){return(0,n.l)().getList({alerting:!0})[0]}function le(){const Pe=(0,n.l)().getInstanceSettings("default");return Pe?.meta.alerting??!1?Pe:ae()}function L(Pe){return Pe.jsonData.manageAlerts!==!1}function ie(Pe){return Pe.jsonData.allowAsRecordingRulesTarget!==!1}function oe(Pe){return(0,m.A4)(Pe)?{uid:i.l$,name:y,ruleSourceType:"grafana"}:{uid:_(Pe.ruleSourceName),name:Pe.ruleSourceName,ruleSourceType:"datasource"}}function ue(Pe){return ye.find(Ve=>Ve===Pe)!==void 0}const ye=["prometheus","grafana-amazonprometheus-datasource","grafana-azureprometheus-datasource"];function fe(Pe){return Ee.find(Ve=>Ve===Pe)!==void 0}const Ee=["loki",...ye];function Ae(Pe){return Pe===y||fe(Pe)}const Ge=[y,...Ee];function Fe(Pe){return ue(Pe.type)&&ie(Pe)}},52193:(ne,j,e)=>{"use strict";e.d(j,{A4:()=>d,CO:()=>i});var n=e(8934),a=e(11594),s=e(65642);function d(){const c=s.$W.panels;return Object.keys(c).filter(p=>c[p].hideFromList===!1).map(p=>c[p]).sort((p,h)=>p.sort-h.sort)}function o(){return d().filter(c=>!!c.skipDataQuery)}function l(){return d().filter(c=>!c.skipDataQuery)}function i(c,p,h){if(!p.length)return c.filter(E=>E.state===a.pn.deprecated?h===E.id:!0);const u=(0,n.xb)(p).toLowerCase(),r=[],v=[],g="graph".startsWith(u);for(const E of c){if(E.state===a.pn.deprecated&&h!==E.id)continue;const m=E.name.toLowerCase().indexOf(u);m===0?r.push(E):m>0?v.push(E):g&&E.id==="timeseries"&&r.push(E)}return r.concat(v)}},52205:(ne,j,e)=>{"use strict";e.d(j,{bk:()=>i,pv:()=>h,iF:()=>p});var n=e(2543),a=e(38809),s=e(53543),d=e(42954);class o{constructor(){this.properties=[]}addCustomEditor(r){return this.properties.push(r),this}getRegistry(){return new d.O(()=>this.properties)}getItems(){return this.properties}}var l=e(28105);class i extends o{addNumberInput(r){return this.addCustomEditor({...r,id:r.path,override:s.D.get("number").editor,editor:s.D.get("number").editor,process:a.m0,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,override:s.D.get("slider").editor,editor:s.D.get("slider").editor,process:a.m0,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,override:s.D.get("text").editor,editor:s.D.get("text").editor,process:a.OU,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSelect(r){return this.addCustomEditor({...r,id:r.path,override:s.D.get("select").editor,editor:s.D.get("select").editor,process:a.hL,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addRadio(r){return this.addCustomEditor({...r,id:r.path,override:s.D.get("radio").editor,editor:s.D.get("radio").editor,process:a.hL,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("boolean").editor,override:s.D.get("boolean").editor,process:a.FM,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("color").editor,override:s.D.get("color").editor,process:a.hS,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("unit").editor,override:s.D.get("unit").editor,process:a.lG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("field-name").editor,override:s.D.get("field-name").editor,process:a.hS,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addGenericEditor(r,v){return this.addCustomEditor({...r,id:r.path,editor:v,override:v,process:a.hS,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}}class c{constructor(r){this.cfg=r,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=v=>{const g=this.cfg.values;return g?g(v):{getValue:E=>v.getValue(`${this.path}.${E}`),onChange:(E,x)=>v.onChange(`${this.path}.${E}`,x)}},this.path=r.path,this.category=r.category,this.defaultValue=this.getDefaultValue(r)}getDefaultValue(r){let v=(0,l.Gv)(r.defaultValue)?(0,n.cloneDeep)(r.defaultValue):{};const g=new h;r.build(g,{data:[]});for(const E of g.getItems())E.defaultValue!=null&&(0,n.set)(v,E.path,E.defaultValue);return v}}function p(u){return(0,l.Gv)(u)&&"id"in u&&u.id==="nested-panel-options"}class h extends o{addNestedOptions(r){const v=new c(r);return this.addCustomEditor(v)}addNumberInput(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("number").editor})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("slider").editor})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("text").editor})}addStringArray(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("strings").editor})}addSelect(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("select").editor})}addMultiSelect(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("multi-select").editor})}addRadio(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("radio").editor})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("boolean").editor})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("color").editor,settings:r.settings||{}})}addTimeZonePicker(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("timezone").editor,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("unit").editor})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("field-name").editor})}addDashboardPicker(r){return this.addCustomEditor({...r,id:r.path,editor:s.D.get("dashboard-uid").editor})}}},52258:(ne,j,e)=>{"use strict";e.d(j,{t:()=>n});function n(a){let s=5381;for(let d=0;d<a.length;d++)s=s*33^a.charCodeAt(d);return s>>>0}},52308:(ne,j,e)=>{"use strict";e.d(j,{s:()=>a});var n=e(27633);function a(s){return n.Ay.format(s).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,d=>d.replace(/\s/g,""))}},52315:(ne,j,e)=>{"use strict";e.d(j,{Uw:()=>a,gv:()=>n.gv,oK:()=>O,u$:()=>W,To:()=>z.T,oF:()=>re.oF,se:()=>N.s,YW:()=>re.YW});var n=e(11194);const a=[{name:"AVG"},{name:"COUNT"},{name:"MAX"},{name:"MIN"},{name:"SUM"}],s={name:"Interval",required:!0,options:()=>Promise.resolve([{label:"$__interval",value:"$__interval"}])},d={name:"Fill",required:!1,options:()=>Promise.resolve([{label:"0",value:"0"},{label:"NULL",value:"NULL"},{label:"previous",value:"previous"}])},o=ee=>[{name:"$__timeGroup",description:"Time grouping function",parameters:[ee,s,d]},{name:"$__timeGroupAlias",description:"Time grouping function with time as alias",parameters:[ee,s,d]},{name:"$__time",description:"An expression to rename the column to time",parameters:[ee]},{name:"$__timeEpoch",parameters:[ee]},{name:"$__unixEpochGroup",parameters:[ee,s,d]},{name:"$__unixEpochGroupAlias",parameters:[ee,s,d]}],l=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"];var i=e(13288),c=e(75505),p=e(81160),h=e(1906),u=e(94452),r=e(22592),v=e(88673),g=e(41778),E=e(36580),x=e(2863),m=e(27489),y=e(68143),b=e(38866),D=e(2543);class f{transformMetricFindResponse(ae){const le=[],L=ae.fields.find(oe=>oe.name==="__text"),ie=ae.fields.find(oe=>oe.name==="__value");if(L&&ie)for(let oe=0;oe<L.values.length;oe++)le.push({text:""+L.values[oe],value:""+ie.values[oe]});else for(const oe of ae.fields)for(const ue of oe.values)le.push({text:ue});return(0,D.uniqBy)(le,"text")}}var C=e(74848),P=e(22803),T=e(96540),M=e(92745),I=e(63142),B=e(6975);const U=(0,T.lazy)(()=>e.e(168).then(e.bind(e,47805)));function W(ee){const ae=(0,I.of)(V);return(0,C.jsx)(T.Suspense,{fallback:(0,C.jsx)(B._,{text:(0,M.t)("grafana-sql.components.sql-query-editor-lazy.text-loading-editor","Loading editor"),className:ae.container}),children:(0,C.jsx)(U,{...ee})})}const V=ee=>({container:(0,P.css)({marginBottom:"unset",marginLeft:ee.spacing(1)})});var z=e(81045);function R(ee){const ae=typeof ee.rawQuery=="string"?ee.rawQuery:null;if(!ae)return ee;const le=(0,z.T)({refId:"Annotation",...ee.target??{},rawSql:ae});return{...ee,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:le}}class O extends E.iy{constructor(ae,le=(0,x.w)()){super(ae),this.templateSrv=le,this.interpolateVariable=(ie,oe)=>typeof ie=="string"?oe.multi||oe.includeAll?this.getQueryModel().quoteLiteral(ie):String(ie).replace(/'/g,"''"):typeof ie=="number"?ie:Array.isArray(ie)?ie.map(ye=>this.getQueryModel().quoteLiteral(ye)).join(","):ie,this.name=ae.name,this.responseParser=new f,this.id=ae.id;const L=ae.jsonData||{};this.interval=L.timeInterval||"1m",this.db=this.getDB(),this.preconfiguredDatabase=L.database??"",this.annotations={prepareAnnotation:R,QueryEditor:W}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(ae,le){let L=ae;return ae&&ae.length>0&&(L=ae.map(ie=>({...ie,datasource:this.getRef(),rawSql:this.templateSrv.replace(ie.rawSql,le,this.interpolateVariable),rawQuery:!0}))),L}filterQuery(ae){return!ae.hide}applyTemplateVariables(ae,le){return{refId:ae.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(ae.rawSql,le,this.interpolateVariable),format:ae.format}}query(ae){const le=this.checkForDatabaseIssue(ae);if(le){const L=new Error(le);return(0,i.$)(()=>L)}return ae.targets.forEach(L=>{ae.app===h.Jk.Dashboard||ae.app===h.Jk.PanelViewer||(0,m.rR)("grafana_sql_query_executed",{datasource:L.datasource?.type,editorMode:L.editorMode,format:L.format,app:ae.app})}),super.query(ae)}checkForDatabaseIssue(ae){if(this.type==="grafana-postgresql-datasource"&&!this.preconfiguredDatabase)return`You do not currently have a default database configured for this data source. Postgres requires a default
             database with which to connect. Please configure one through the Data Sources Configuration page, or if you
             are using a provisioning file, update that configuration file with a default database.`;if(ae.app!==h.Jk.Explore&&this.preconfiguredDatabase){for(const le of ae.targets)if(le.editorMode===g.lX.Builder&&le.dataset&&le.dataset!==this.preconfiguredDatabase)return`The configuration for this panel's data source has been modified. The previous database used in this panel's
                   saved query is no longer available. Please update the query to use the new database option.
                   Previous query parameters will be preserved until the query is updated.`}}async metricFindQuery(ae,le){const L=le?.range;if(L==null)return[];let ie="tempvar";le&&le.variable&&le.variable.name&&(ie=le.variable.name);const oe={...le?.scopedVars,...(0,u.c)({query:ae,wildcardChar:"%",options:le})},ue=this.templateSrv.replace(ae,oe,this.interpolateVariable),ye={refId:ie,datasource:this.getRef(),rawSql:ue,format:n.gv.Table};let fe;try{fe=await this.runMetaQuery(ye,L)}catch(Ee){throw console.error(Ee),new Error("error when executing the sql query")}return this.getResponseParser().transformMetricFindResponse(fe)}async runSql(ae,le){const L=(0,r.E2)(),ie=await this.runMetaQuery({rawSql:ae,format:n.gv.Table,refId:le?.refId},L);return new v.R(ie)}runMetaQuery(ae,le){const L=ae.refId||"meta",ie=[{...ae,datasource:ae.datasource||this.getRef(),refId:L}];return(0,c.s)((0,y.AI)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:le.from.valueOf().toString(),to:le.to.valueOf().toString(),queries:ie},requestId:L}).pipe((0,p.T)(oe=>(0,b.bE)(oe,ie).data[0]??{fields:[]})))}targetContainsTemplate(ae){let le=ae.rawSql;return l.forEach(L=>{le=le?.replace(L,"")||""}),this.templateSrv.containsTemplate(le)}}var N=e(52308);function F({value:ee,defaultValue:ae,onChange:le,width:L}){const[ie,oe]=useState(!1);return jsx(Input,{type:"number",placeholder:String(ae),value:ie?"":ee,onChange:ue=>{if(ue.currentTarget.value?.trim()==="")oe(!0),le(ae);else{oe(!1);const ye=Number(ue.currentTarget.value);Number.isNaN(ye)||le(ye)}},width:L})}function G({labelWidth:ee,onMaxLifetimeChanged:ae,jsonData:le}){return jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.max-lifetime",children:"Max lifetime"})}),jsx(Tooltip,{content:jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.content-max-lifetime",children:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever."})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(NumberInput,{value:le.connMaxLifetime,defaultValue:config.sqlConnectionLimits.connMaxLifetime,onChange:ae,width:ee})})}function H({labelWidth:ee,onMaxConnectionsChanged:ae,jsonData:le}){return jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.max-open",children:"Max open"})}),jsx(Tooltip,{content:jsx("span",{children:jsxs(Trans,{i18nKey:"grafana-sql.components.connection-limits.content-max-open",children:["The maximum number of open connections to the database. If ",jsx("i",{children:"Max idle connections"})," is greater than 0 and the ",jsx("i",{children:"Max open connections"})," is less than ",jsx("i",{children:"Max idle connections"}),", then",jsx("i",{children:"Max idle connections"})," will be reduced to match the ",jsx("i",{children:"Max open connections"})," limit. If set to 0, there is no limit on the number of open connections."]})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(NumberInput,{value:le.maxOpenConns,defaultValue:config.sqlConnectionLimits.maxOpenConns,onChange:ae,width:ee})})}const K=ee=>{const{onOptionsChange:ae,options:le}=ee,L=le.jsonData,ie=L.maxIdleConnsAuto!==void 0?L.maxIdleConnsAuto:!1,oe=Ae=>{const Ge={...le,jsonData:{...L,...Ae}};return ae(Ge)},ue=Ae=>Ge=>{oe({[Ae]:Ge})},ye=Ae=>{oe(ie&&Ae?{maxOpenConns:Ae,maxIdleConns:Ae}:{maxOpenConns:Ae})},fe=()=>{let Ae,Ge;ie?(Ge=L.maxOpenConns,Ae=L.maxIdleConns):L.maxOpenConns!==void 0&&(Ge=L.maxOpenConns,Ae=L.maxOpenConns),oe({maxIdleConnsAuto:!ie,maxIdleConns:Ae,maxOpenConns:Ge})},Ee=40;return jsxs(ConfigSubSection,{title:t("grafana-sql.components.connection-limits.title-connection-limits","Connection limits"),children:[jsx(MaxOpenConnectionsField,{labelWidth:Ee,onMaxConnectionsChanged:ye,jsonData:L}),jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.auto-max-idle",children:"Auto max idle"})}),jsx(Tooltip,{content:jsx("span",{children:jsxs(Trans,{i18nKey:"grafana-sql.components.connection-limits.content-auto-max-idle",values:{defaultMaxIdle:config.sqlConnectionLimits.maxIdleConns},children:["If enabled, automatically set the number of ",jsx("i",{children:"Maximum idle connections"})," to the same value as",jsx("i",{children:" Max open connections"}),". If the number of maximum open connections is not set it will be set to the default (","{{defaultMaxIdle}}",")."]})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(Switch,{value:ie,onChange:fe})}),jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.max-idle",children:"Max idle"})}),jsx(Tooltip,{content:jsx("span",{children:jsxs(Trans,{i18nKey:"grafana-sql.components.connection-limits.content-max-idle",children:["The maximum number of connections in the idle connection pool.If ",jsx("i",{children:"Max open connections"})," is greater than 0 but less than the ",jsx("i",{children:"Max idle connections"}),", then the ",jsx("i",{children:"Max idle connections"})," ","will be reduced to match the ",jsx("i",{children:"Max open connections"})," limit. If set to 0, no idle connections are retained."]})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:ie?jsx(InlineLabel,{width:Ee,children:le.jsonData.maxIdleConns}):jsx(NumberInput,{value:L.maxIdleConns,defaultValue:config.sqlConnectionLimits.maxIdleConns,onChange:Ae=>{ue("maxIdleConns")(Ae)},width:Ee})}),jsx(MaxLifetimeField,{labelWidth:Ee,onMaxLifetimeChanged:ue("connMaxLifetime"),jsonData:L})]})},w=()=>{const ee=useStyles2(Q);return jsx("hr",{className:ee.horizontalDivider})},Q=ee=>({horizontalDivider:css({borderTop:`1px solid ${ee.colors.border.weak}`,margin:ee.spacing(2,0),width:"100%"})}),k=ee=>{const{editorProps:ae,showCACert:le,showKeyPair:L=!0}=ee,{secureJsonFields:ie}=ae.options;return jsxs(Fragment,{children:[L?jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.tlsssl-client-certificate",children:"TLS/SSL Client Certificate"})}),jsx(Tooltip,{content:jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.content-tlsssl-client-certificate",children:"To authenticate with an TLS/SSL client certificate, provide the client certificate here."})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(SecretTextArea,{placeholder:"-----BEGIN CERTIFICATE-----",cols:45,rows:7,isConfigured:ie&&ie.tlsClientCert,onChange:onUpdateDatasourceSecureJsonDataOption(ae,"tlsClientCert"),onReset:()=>{updateDatasourcePluginResetOption(ae,"tlsClientCert")}})}):null,le?jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.tlsssl-root-certificate",children:"TLS/SSL Root Certificate"})}),jsx(Tooltip,{content:jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.content-tlsssl-root-certificate",children:"If the selected TLS/SSL mode requires a server root certificate, provide it here"})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(SecretTextArea,{placeholder:"-----BEGIN CERTIFICATE-----",cols:45,rows:7,isConfigured:ie&&ie.tlsCACert,onChange:onUpdateDatasourceSecureJsonDataOption(ae,"tlsCACert"),onReset:()=>{updateDatasourcePluginResetOption(ae,"tlsCACert")}})}):null,L?jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.tlsssl-client-key",children:"TLS/SSL Client Key"})}),jsx(Tooltip,{content:jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.content-tlsssl-client-key",children:"To authenticate with a client TLS/SSL certificate, provide the key here."})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(SecretTextArea,{placeholder:"-----BEGIN RSA PRIVATE KEY-----",cols:45,rows:7,isConfigured:ie&&ie.tlsClientKey,onChange:onUpdateDatasourceSecureJsonDataOption(ae,"tlsClientKey"),onReset:()=>{updateDatasourcePluginResetOption(ae,"tlsClientKey")}})}):null]})};var te=e(25992);const q=(0,te.DW)("features.plugins.sql");function se({onOptionsChange:ee,options:ae}){useEffect(()=>{const le=ae.jsonData;let L={...ae},ie=!1;if(ae.database&&(sqlPluginLogger.logDebug(`Migrating from options.database with value ${ae.database} for ${ae.name}`),L.database="",L.jsonData={...le,database:ae.database},ie=!0),le.maxOpenConns===void 0&&le.maxIdleConns===void 0&&le.maxIdleConnsAuto===void 0){const{maxOpenConns:oe,maxIdleConns:ue}=config.sqlConnectionLimits;sqlPluginLogger.logDebug(`Setting default max open connections to ${oe} and setting max idle connection to ${ue}`),L.jsonData={...L.jsonData,maxOpenConns:oe,maxIdleConns:ue,maxIdleConnsAuto:!0},ie=!0}if(le.connMaxLifetime===void 0){const{connMaxLifetime:oe}=config.sqlConnectionLimits;L.jsonData={...L.jsonData,connMaxLifetime:oe},ie=!0}ie&&ee(L)},[ee,ae])}var re=e(25274),Y=e(36656),X=e(22480);const J=X.Y.reduce((ee,ae)=>(ee[ae.code]=async()=>await e(55644)(`./${ae.code}/grafana-sql.json`),ee),{}),_=async ee=>(await J[ee]()).default},52513:(ne,j,e)=>{"use strict";e.d(j,{T:()=>h});var n=e(57746),a=e(82611),s=e(75226);const d=(0,n.Sn)("mod+["),o=(0,n.Sn)("shift+tab"),l=(0,n.Sn)("mod+]"),i="  ",c=(u,r,v)=>{const{startBlock:g,endBlock:E,selection:{start:{offset:x,key:m},end:{offset:y,key:b}}}=r.value;if(s.default.serialize(r.value)==="")return;u.preventDefault();const D=g.getFirstText();D&&x===0&&m===D.key&&y===D.text.length&&b===D.key||!g.equals(E)?p(r,"right"):r.insertText(i)},p=(u,r)=>{const v=u.value.selection,g=u.value.document.getLeafBlocksAtRange(v).toArray();if(r==="left")for(const E of g){const x=E.text.length-E.text.trimLeft().length,m=E.getFirstText().key,y={anchor:{key:m,offset:x,path:[]},focus:{key:m,offset:x,path:[]}};u.deleteBackwardAtRange(a.Range.create(y),Math.min(i.length,x))}else{const{startText:E}=u.value,x=E.text.slice(0,v.start.offset),m=/^\s*$/.test(x);for(const y of g)u.insertTextByKey(y.getFirstText().key,0,i);m&&u.moveStartBackward(i.length)}};function h(){return{onKeyDown(u,r,v){if(d(u)||o(u))u.preventDefault(),p(r,"left");else if(l(u))u.preventDefault(),p(r,"right");else if(u.key==="Tab")c(u,r,v);else return v();return!0}}}},52531:(ne,j,e)=>{"use strict";e.d(j,{Rs:()=>s,W$:()=>l,_I:()=>o});var n=e(2543),a=e.n(n);const s=["receiver","group_by","group_wait","group_interval","repeat_interval"];function d(h,u,r=[]){let v=[];const g=matchLabels(h.matchers??[],u),E={route:h,matchDetails:g.details,matched:g.matches},x=[...r,E];if(!g.matches)return[];if(h.routes)for(const m of h.routes){const y=d(m,u,x);if(v=v.concat(y),y.length&&!m.continue)break}return v.length===0&&v.push({route:h,labels:u,matchingJourney:x}),v}function o(h){return{...h,routes:h.routes?.map(u=>{const r=l(h,u);return o({...u,...r})})}}function l(h,u,r){const g={...(0,n.pick)(h,s),...r};return(0,n.reduce)(g,(x,m,y)=>{const b=m!=null,C=[void 0,"",null].some(M=>u[y]===M)&&b,P=y==="group_by"&&b&&(0,n.isArray)(u[y])&&u[y]?.length===0;return(C||P)&&(x[y]=m),x},{})}function i(h){return{id:uniqueId("route-"),...h,routes:h.routes?.map(i)??[]}}function c(h,u){const r=new Map,v=i(o(h)),g=u.flatMap(x=>d(v,x)),E=groupBy(g,x=>x.route.id);return Object.entries(E).forEach(([x,m])=>{r.set(m[0].route,m)}),{expandedTree:v,matchedPolicies:r}}function p(h){const u=v=>v.map(g=>({...g,routes:g.routes?u(g.routes):[]}));return{...h.spec.defaults,continue:!1,active_time_intervals:[],mute_time_intervals:[],matchers:[],routes:u(h.spec.routes)}}},52645:(ne,j,e)=>{"use strict";e.d(j,{c:()=>Ve});var n=e(84691),a=e(9287),s=e(406),d=e(81160),o=e(739),l=e(64761),i=(me=>(me.Exemplar="exemplar",me.TimeRegion="timeRegion",me.Annotation="annotation",me))(i||{});const c={id:l.F.convertFrameType,name:"Convert frame type",description:"Convert data frame(s) to another type.",operator:me=>Se=>Se.pipe((0,d.T)(Qe=>p(me,Qe)))};function p(me,Se){const{targetType:Qe}=me;return Qe==="exemplar"?Se.map(h):Se}function h(me){return{...me,name:"exemplar",meta:{...me.meta,dataTopic:o.QR.Annotations,custom:{...me.meta?.custom,resultType:"exemplar"}}}}var u=e(882),r=e(49297),v=e(359),g=e(57866);const E={id:l.F.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(me,Se)=>Qe=>{const Ue={};return me.include&&(Ue.include={id:g.jR.byRefId,options:me.include}),me.exclude&&(Ue.exclude={id:g.jR.byRefId,options:me.exclude}),Qe.pipe(r.I.operator(Ue,Se))}};var x=e(68779),m=e(40041),y=e(16515),b=e(79319);const D={id:l.F.formatTime,name:"Format time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},isApplicable:me=>{for(const Se of me)for(const Qe of Se.fields)if(Qe.type==="time")return b.M.Applicable;return b.M.NotApplicable},isApplicableDescription:"The Format time transformation requires a time field to work. No time field could be found.",operator:(me,Se)=>Qe=>Qe.pipe((0,d.T)(Ue=>f(me,Ue,Se)))},f=({timeField:me,outputFormat:Se,timezone:Qe},Ue,Ie)=>!Array.isArray(Ue)||Ue.length===0?Ue:((0,y.Fm)(Ue),Se=Ie?.interpolate(Se)??Se,Ue.map(Re=>({...Re,fields:Re.fields.map(Ke=>(Ke.state?.displayName===me&&(Ke=(0,s.Xv)(Ke,Se,{timeZone:Qe})),Ke))})));var C=e(47433),P=e(25260),T=e(95004),M=e(36638),I=e(91146);const B="Time",U="Time",W="Value",V=b.N.Empty,z=window.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,R={id:l.F.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:B,rowField:U,valueField:W},isApplicable:me=>{let Se=0;for(const Qe of me)Se+=Qe.fields.length;return Se>=3?b.M.Applicable:b.M.NotApplicable},isApplicableDescription:me=>{let Se=0;for(const Qe of me)Se+=Qe.fields.length;return`Grouping to matrix requires at least 3 fields to work. Currently there are ${Se} fields.`},operator:(me,Se)=>Qe=>Qe.pipe((0,d.T)(Ue=>{const Ie=me.columnField||B,Re=me.rowField||U,Ke=me.valueField||W,Le=me.emptyValue||V;if(Ue.length!==1)return Ue;const ze=Ue[0],Be=N(ze,Ie),$e=N(ze,Re),Ye=N(ze,Ke),de=`${Re}\\${Ie}`;if(!Be||!$e||!Ye)return Ue;const ge=O(Be.values),pe=O($e.values),De={};for(let be=0;be<Ye.values.length;be++){const Oe=Be.values[be],Ne=$e.values[be],We=Ye.values[be];De[Oe]||(De[Oe]={}),De[Oe][Ne]=We}const Me=[{name:de,values:pe,type:$e.type,config:{...$e.config}}];for(const be of ge){let Oe=[];for(const Ne of pe){const We=De[be][Ne]??(Ye.type===T.PU.frame?void 0:(0,I.v)(Le));Oe.push(We)}z&&typeof be=="number"&&(Ye.config={...Ye.config,displayNameFromDS:void 0}),delete Ye.config.displayName,Me.push({name:be?.toString()??null,values:Oe,config:Ye.config,type:Ye.type})}return[{fields:Me,length:pe.length}]}))};function O(me){const Se=new Set(me);return Array.from(Se)}function N(me,Se){for(let Qe=0;Qe<me.fields.length;Qe++){const Ue=me.fields[Qe];let Ie;if(z?Ie=M.sJ.get(g.Ct.byName).get(Se)(Ue,me,[me]):Ie=Se===(0,y.Ct)(Ue),Ie)return Ue}return null}var F=e(74261),G=e(6684),H=e(79184);const K=10,w={id:l.F.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:K},operator:(me,Se)=>Qe=>Qe.pipe((0,d.T)(Ue=>{let Ie=K;return me.limitField!==void 0&&(typeof me.limitField=="string"?Ie=parseInt(me.limitField,10):Ie=me.limitField),Ue.map(Re=>Re.length>Ie?{...Re,fields:Re.fields.map(Ke=>({...Ke,state:{...Ke.state,calcs:void 0},values:Ie>=0?Ke.values.slice(0,Ie):Ke.values.slice(Ke.values.length+Ie,Ke.values.length)})),length:Math.abs(Ie)}:Re)}))};var Q=e(33023),k=e(1027),te=e(95575);const q={id:l.F.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:me=>Se=>Se.pipe((0,d.T)(Qe=>{const Ue=se(me.renameByName);return!Array.isArray(Qe)||Qe.length===0?Qe:Qe.map(Ie=>({...Ie,fields:Ue(Ie)}))}))},se=me=>Se=>!me||Object.keys(me).length===0?Se.fields:Se.fields.map(Qe=>{const Ue=(0,y.Ct)(Qe,Se),Ie=me[Ue];return typeof Ie!="string"||Ie.length===0?Qe:{...Qe,config:{...Qe.config,displayName:Ie},state:{...Qe.state,displayName:Ie}}}),re={id:l.F.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{},includeByName:{}},isApplicable:me=>me.length>1?b.M.NotPossible:b.M.Applicable,operator:(me,Se)=>Qe=>Qe.pipe(v.D.operator({include:me.includeByName?{names:Y(me.includeByName)}:void 0,exclude:{names:Y(me.excludeByName)}},Se),te.xQ.operator(me,Se),q.operator(me,Se))},Y=me=>me?Object.keys(me).filter(Se=>me[Se]):[];var X=e(32157),J=e(8934);const _={id:l.F.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:me=>Se=>Se.pipe((0,d.T)(Qe=>!Array.isArray(Qe)||Qe.length===0?Qe:Qe.map(ee(me))))},ee=me=>Se=>{const Qe=(0,J.dO)(me.regex),Ue=Se.fields.map(Ie=>{const Re=(0,y.Ct)(Ie,Se);if(!Qe.test(Re))return Ie;const Ke=Re.replace(Qe,me.renamePattern);return{...Ie,config:{...Ie.config,displayName:Ke},state:{...Ie.state,displayName:Ke}}});return{...Se,fields:Ue}};var ae=e(2543),le=e(18700),L=e(41119),ie=e(17503);const oe={id:l.F.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:me=>Se=>Se.pipe((0,d.T)(Qe=>{if(!Array.isArray(Qe)||Qe.length===0||(Qe=Qe.filter(Le=>Le.length>0),!(0,ie.jq)(Qe)))return Qe;const Ue={},Ie=new Set,Re=new le.k({refId:`${l.F.seriesToRows}-${Qe.map(Le=>Le.refId).join("-")}`,fields:[]}),Ke={name:T.aI,values:[],config:{},type:T.PU.string};for(let Le=0;Le<Qe.length;Le++){const ze=Qe[Le];for(let Be=0;Be<ze.fields.length;Be++){const $e=ze.fields[Be];if($e.type===T.PU.time){Ue[Le]=Be,Ie.has(T.LE)||(Re.addField(ue($e,T.LE)),Re.addField(Ke),Ie.add(T.LE));continue}Ie.has(T.Bc)||(Re.addField(ue($e,T.Bc)),Ie.add(T.Bc))}}for(let Le=0;Le<Qe.length;Le++){const ze=Qe[Le];for(let Be=0;Be<ze.length;Be++){const $e=Ue[Le],Ye=$e===0?1:0;Re.add({[T.LE]:ze.fields[$e].values[Be],[T.aI]:(0,y.Ri)(ze),[T.Bc]:ze.fields[Ye].values[Be]})}}return[(0,L.ES)(Re,0,!0)]}))},ue=(me,Se)=>({...(0,ae.omit)(me,["values","state","labels","config","name"]),name:Se,values:[],config:{...(0,ae.omit)(me.config,["displayName","displayNameFromDS"])}}),ye={id:l.F.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:(me,Se)=>Qe=>Qe.pipe((0,d.T)(Ue=>!Array.isArray(Ue)||Ue.length===0||!me?.sort?.length?Ue:fe(Ue,me.sort,Se)))};function fe(me,Se,Qe){return me.map(Ue=>{const Ie=Ee(Ue,Se,Qe);return Ie.length&&Ie[0].index!=null?(0,L.ES)(Ue,Ie[0].index,Ie[0].desc):Ue})}function Ee(me,Se,Qe){return Se.map(Ue=>Ue.index!=null?Ue:{...Ue,index:me.fields.findIndex(Ie=>Ue.field===(0,y.Ct)(Ie,me))})}const Ae={id:l.F.transpose,name:"Transpose",description:"Transpose the data frame",defaultOptions:{},operator:me=>Se=>Se.pipe((0,d.T)(Qe=>Qe.length===0?Qe:Ge(me,Qe)))};function Ge(me,Se){(0,y.Fm)(Se);const Qe=me.emptyValue??b.N.Empty;return Se.map(Ue=>{const Ie=Ue.fields[0],Re=me.firstFieldName?me.firstFieldName:"Field",Ke=me.restFieldsName?me.restFieldsName:"Value",Le=Ie.type===T.PU.string||Ie.type===T.PU.time||Ie.type===T.PU.enum,ze=Le?[Re,...Pe(Ie,Ie.values,Qe)]:[Re,...Ie.values.map((de,ge)=>Ke)],Be=Le?Ue.fields.map(de=>de.state?.displayName??de.name).slice(1):Ue.fields.map(de=>de.state?.displayName??de.name),$e=Fe(Le?Ue.fields.map(de=>de.type).slice(1):Ue.fields.map(de=>de.type)),Ye=ze.map((de,ge)=>{if(ge===0)return{name:Re,type:T.PU.string,config:{},values:Be};const pe=Ue.fields.map(be=>$e===T.PU.string?Pe(be,[be.values[ge-1]],Qe)[0]:be.values[ge-1]),De=Le?Ie.name:"row",Me=Le?de:ge;return{name:Le?Ke:de,labels:{[De]:Me},type:$e,config:{},values:Le?pe.slice(1):pe}});return{...Ue,fields:Ye,length:Math.max(...Ye.map(de=>de.values.length)),refId:`${l.F.transpose}-${Ue.refId}`}})}function Fe(me){const Se=new Set(me);return Se.size===1?[...Se][0]:T.PU.string}function Pe(me,Se,Qe){switch(me.type){case T.PU.time:case T.PU.number:case T.PU.boolean:case T.PU.string:return Se.map(Ue=>Ue!=null?`${Ue}`:(0,I.v)(Qe));case T.PU.enum:return Se.map(Ue=>me.config.type.enum.text[Ue]??(0,I.v)(Qe));default:return Se.map(Ue=>Ue!=null?JSON.stringify(Ue):(0,I.v)(Qe))}}const Ve={noopTransformer:k.W,filterFieldsTransformer:r.z,filterFieldsByNameTransformer:v.D,filterFramesTransformer:r.I,filterFramesByRefIdTransformer:E,filterByValueTransformer:x.Sv,formatStringTransformer:m.yt,formatTimeTransformer:D,orderFieldsTransformer:te.xQ,organizeFieldsTransformer:re,reduceTransformer:X.Wj,concatenateTransformer:a.vz,calculateFieldTransformer:n.SC,joinByFieldTransformer:G.L,seriesToColumnsTransformer:G.L,seriesToRowsTransformer:oe,renameFieldsTransformer:q,labelsToFieldsTransformer:H.V,ensureColumnsTransformer:u.b,groupByTransformer:C.of,sortByTransformer:ye,mergeTransformer:Q.o,renameByRegexTransformer:_,histogramTransformer:F.OA,convertFieldTypeTransformer:s.zM,convertFrameTypeTransformer:c,groupingToMatrixTransformer:R,limitTransformer:w,groupToNestedTable:P._,transposeTransformer:Ae}},52695:(ne,j,e)=>{"use strict";e.d(j,{$u:()=>U,Ay:()=>H,Cj:()=>P,D1:()=>m,EC:()=>I,G_:()=>g,L5:()=>M,Mb:()=>C,Nf:()=>p,OF:()=>E,OR:()=>c,PV:()=>y,TW:()=>h,V$:()=>i,Vv:()=>o,ag:()=>x,g4:()=>T,iK:()=>N,jX:()=>B,kh:()=>O,o3:()=>R,pH:()=>l,xx:()=>F,zi:()=>d});var n=e(65307);const a={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},s=(0,n.Z0)({name:"ldap",initialState:a,reducers:{ldapConnectionInfoLoadedAction:(K,w)=>({...K,ldapError:void 0,connectionInfo:w.payload}),ldapFailedAction:(K,w)=>({...K,ldapError:w.payload}),ldapSyncStatusLoadedAction:(K,w)=>({...K,syncInfo:w.payload}),userMappingInfoLoadedAction:(K,w)=>({...K,user:w.payload,userError:void 0}),userMappingInfoFailedAction:(K,w)=>({...K,user:void 0,userError:w.payload}),clearUserMappingInfoAction:(K,w)=>({...K,user:void 0}),clearUserErrorAction:(K,w)=>({...K,userError:void 0})}}),{clearUserErrorAction:d,clearUserMappingInfoAction:o,ldapConnectionInfoLoadedAction:l,ldapFailedAction:i,ldapSyncStatusLoadedAction:c,userMappingInfoFailedAction:p,userMappingInfoLoadedAction:h}=s.actions,u=s.reducer,r={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},v=(0,n.Z0)({name:"userAdmin",initialState:r,reducers:{userProfileLoadedAction:(K,w)=>({...K,user:w.payload}),userOrgsLoadedAction:(K,w)=>({...K,orgs:w.payload}),userSessionsLoadedAction:(K,w)=>({...K,sessions:w.payload}),userAdminPageLoadedAction:(K,w)=>({...K,isLoading:!w.payload}),userAdminPageFailedAction:(K,w)=>({...K,error:w.payload,isLoading:!1})}}),{userProfileLoadedAction:g,userOrgsLoadedAction:E,userSessionsLoadedAction:x,userAdminPageLoadedAction:m,userAdminPageFailedAction:y}=v.actions,b=v.reducer,D={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},f=(0,n.Z0)({name:"userListAdmin",initialState:D,reducers:{usersFetched:(K,w)=>{const{totalCount:Q,perPage:k,...te}=w.payload,q=Math.ceil(Q/k);return{...K,...te,totalPages:q,perPage:k,showPaging:q>1,isLoading:!1}},usersFetchBegin:K=>({...K,isLoading:!0}),usersFetchEnd:K=>({...K,isLoading:!1}),queryChanged:(K,w)=>({...K,query:w.payload,page:0}),pageChanged:(K,w)=>({...K,page:w.payload}),sortChanged:(K,w)=>({...K,page:0,sort:w.payload}),filterChanged:(K,w)=>{const{name:Q,value:k}=w.payload;return K.filters.some(te=>te.name===Q)?{...K,page:0,filters:K.filters.map(te=>te.name===Q?{...te,value:k}:te)}:{...K,page:0,filters:[...K.filters,w.payload]}}}}),{usersFetched:C,usersFetchBegin:P,usersFetchEnd:T,queryChanged:M,pageChanged:I,filterChanged:B,sortChanged:U}=f.actions,W=f.reducer,V={devices:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!0}]},z=(0,n.Z0)({name:"userListAnonymousDevices",initialState:V,reducers:{usersAnonymousDevicesFetched:(K,w)=>{const{totalCount:Q,perPage:k,...te}=w.payload,q=Math.ceil(Q/k);return{...K,...te,totalPages:q,perPage:k,showPaging:q>1}},anonQueryChanged:(K,w)=>({...K,query:w.payload,page:0}),anonPageChanged:(K,w)=>({...K,page:w.payload}),anonUserSortChanged:(K,w)=>({...K,page:0,sort:w.payload}),filterChanged:(K,w)=>{const{name:Q,value:k}=w.payload;return K.filters.some(te=>te.name===Q)?{...K,page:0,filters:K.filters.map(te=>te.name===Q?{...te,value:k}:te)}:{...K,page:0,filters:[...K.filters,w.payload]}}}}),{usersAnonymousDevicesFetched:R,anonUserSortChanged:O,anonPageChanged:N,anonQueryChanged:F}=z.actions,G=z.reducer,H={ldap:u,userAdmin:b,userListAdmin:W,userListAnonymousDevices:G}},52718:(ne,j,e)=>{"use strict";e.d(j,{E:()=>c,A:()=>p});var n=e(74848),a=e(22803),s=e(96540),d=e(62295),o=e(63142);const l=({children:r})=>{const[v,g]=(0,s.useState)(!1),[E,x]=(0,s.useState)(!1),m=(0,s.useRef)(null),y=(0,s.useRef)(null),b=(0,o.of)(i);return(0,s.useEffect)(()=>{const D=new IntersectionObserver(f=>{f.forEach(C=>{C.target===m.current?g(!C.isIntersecting):C.target===y.current&&x(!C.isIntersecting)})});return[m,y].forEach(f=>{f.current&&D.observe(f.current)}),()=>D.disconnect()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,a.cx)(b.scrollIndicator,b.scrollTopIndicator,{[b.scrollIndicatorVisible]:v})}),(0,n.jsxs)("div",{className:b.scrollContent,children:[(0,n.jsx)("div",{ref:m}),r,(0,n.jsx)("div",{ref:y})]}),(0,n.jsx)("div",{className:(0,a.cx)(b.scrollIndicator,b.scrollBottomIndicator,{[b.scrollIndicatorVisible]:E})})]})},i=r=>({scrollContent:(0,a.css)({flex:1,position:"relative"}),scrollIndicator:(0,a.css)({height:r.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,[r.transitions.handleMotion("no-preference","reduce")]:{transition:r.transitions.create("opacity")},zIndex:1}),scrollTopIndicator:(0,a.css)({background:`linear-gradient(0deg, transparent, ${r.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,a.css)({background:`linear-gradient(180deg, transparent, ${r.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,a.css)({opacity:1})}),c=({autoHide:r=!1,autoHideTimeout:v=200,setScrollTop:g,className:E,testId:x,autoHeightMin:m="0",autoHeightMax:y="100%",hideTracksWhenNotNeeded:b=!1,hideHorizontalTrack:D,hideVerticalTrack:f,scrollRefCallback:C,showScrollIndicators:P=!1,updateAfterMountMs:T,scrollTop:M,onScroll:I,children:B,divId:U})=>{const W=(0,s.useRef)(null),V=(0,o.of)(h);(0,s.useEffect)(()=>{W.current&&C&&C(W.current.view)},[W,C]),u(W.current,M),(0,s.useEffect)(()=>{T&&setTimeout(()=>{const K=W.current;K?.update&&K.update()},T)},[T]);function z(K,w,Q){return Q.style&&w&&(Q.style.display="none"),(0,n.jsx)("div",{...Q,className:K})}const R=(0,s.useCallback)(K=>z("track-horizontal",D,K),[D]),O=(0,s.useCallback)(K=>z("track-vertical",f,K),[f]),N=(0,s.useCallback)(K=>(0,n.jsx)("div",{...K,className:"thumb-horizontal"}),[]),F=(0,s.useCallback)(K=>(0,n.jsx)("div",{...K,className:"thumb-vertical"}),[]),G=(0,s.useCallback)(K=>(K.style&&K.style.WebkitOverflowScrolling==="touch"&&(K.style.WebkitOverflowScrolling="auto"),(0,n.jsx)("div",{...K,className:"scrollbar-view",id:U})),[U]),H=(0,s.useCallback)(()=>{W.current&&g&&g(W.current.getValues())},[g]);return(0,n.jsx)(d.Ay,{"data-testid":x,ref:W,className:(0,a.cx)(V.customScrollbar,E,{[V.scrollbarWithScrollIndicators]:P}),onScrollStop:H,autoHeight:!0,autoHide:r,autoHideTimeout:v,hideTracksWhenNotNeeded:b,autoHeightMax:y,autoHeightMin:m,renderTrackHorizontal:R,renderTrackVertical:O,renderThumbHorizontal:N,renderThumbVertical:F,renderView:G,onScroll:I,children:P?(0,n.jsx)(l,{children:B}):B})},p=c,h=r=>({customScrollbar:(0,a.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:r.shape.borderRadius(2),width:`${r.spacing(1)} !important`,right:0,bottom:r.spacing(.25),top:r.spacing(.25)},".track-horizontal":{borderRadius:r.shape.borderRadius(2),height:`${r.spacing(1)} !important`,right:r.spacing(.25),bottom:r.spacing(.25),left:r.spacing(.25)},".thumb-vertical":{background:r.colors.action.focus,borderRadius:r.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:r.colors.action.focus,borderRadius:r.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,[r.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.3s ease-in-out"}}}}),scrollbarWithScrollIndicators:(0,a.css)({".scrollbar-view":{position:"static !important"}})});function u(r,v){(0,s.useEffect)(()=>{r&&v!=null&&r.scrollTop(v)},[v,r])}},52763:(ne,j,e)=>{"use strict";e.d(j,{ch:()=>l,d4:()=>d,wA:()=>s,zD:()=>o});var n=e(65307),a=e(71468);const s=a.useDispatch,d=a.useSelector,o=(i,c,p)=>(0,n.zD)(i,c,p),l=n.ch},52792:(ne,j,e)=>{"use strict";e.d(j,{J:()=>o});var n=e(74848),a=e(60208),s=e(54314),d=e(53428);const o=({icon:l,title:i,tabs:c,activeTab:p,onChangeTab:h})=>(0,n.jsx)(d.r,{icon:l,title:i,children:(0,n.jsx)(s.U,{hideBorder:!0,children:c.map((u,r)=>(0,n.jsx)(a.o,{label:u.label,icon:u.icon,suffix:u.tabSuffix,active:u.value===p,onChangeTab:()=>h(u)},`${u.value}-${r}`))})})},52830:(ne,j,e)=>{"use strict";e.d(j,{YZ:()=>c,sz:()=>i,tU:()=>o});var n=e(74848),a=e(96540),s=e(52763),d=e(20718),o=(p=>(p.RichHistory="Query history",p.Starred="Starred",p.Settings="Settings",p))(o||{});const l=(0,a.createContext)({selectedTab:"Query history",setSelectedTab:()=>{},drawerOpened:!1,setDrawerOpened:()=>{}});function i(){return(0,a.useContext)(l)}function c({children:p}){const[h,u]=(0,a.useState)("Query history"),[r,v]=(0,a.useState)(!1),g=(0,s.d4)(d.i6);return(0,a.useEffect)(()=>{g&&u(g.starredTabAsFirstTab?"Starred":"Query history")},[g,u]),(0,n.jsx)(l.Provider,{value:{selectedTab:h,setSelectedTab:u,drawerOpened:r,setDrawerOpened:v},children:p})}},52847:(ne,j,e)=>{"use strict";e.d(j,{B:()=>i});var n=e(74848),a=e(51898),s=e(92745),d=e(41654),o=e(69076),l=e(49602);function i({multi:c,allowCustomValue:p,includeAll:h,allValue:u,onMultiChange:r,onAllowCustomValueChange:v,onIncludeAllChange:g,onAllValueChange:E}){return(0,n.jsxs)(d.B,{direction:"column",gap:2,height:"inherit",alignItems:"start",children:[(0,n.jsx)(o.c,{value:c,name:(0,s.t)("dashboard-scene.selection-options-form.name-multi-value","Multi-value"),description:(0,s.t)("dashboard-scene.selection-options-form.description-enables-multiple-values-selected","Enables multiple values to be selected at the same time"),onChange:r,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsMultiSwitch}),v&&(0,n.jsx)(o.c,{value:p??!0,name:(0,s.t)("dashboard-scene.selection-options-form.name-allow-custom-values","Allow custom values"),description:(0,s.t)("dashboard-scene.selection-options-form.description-enables-users-custom-values","Enables users to add custom values to the list"),onChange:v,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsAllowCustomValueSwitch}),(0,n.jsx)(o.c,{value:h,name:(0,s.t)("dashboard-scene.selection-options-form.name-include-all-option","Include All option"),description:(0,s.t)("dashboard-scene.selection-options-form.description-enables-option-include-variables","Enables an option to include all values"),onChange:g,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsIncludeAllSwitch}),h&&(0,n.jsx)(l._,{defaultValue:u??"",onBlur:E,name:(0,s.t)("dashboard-scene.selection-options-form.name-custom-all-value","Custom all value"),testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInput})]})}},52860:(ne,j,e)=>{"use strict";e.d(j,{F0:()=>c,bQ:()=>p,lW:()=>h});var n=e(41053),a=e(75505),s=e(78282),d=e(27963),o=e(6219);const l=({sourceUID:u,...r})=>{const v=(0,s.l)().getInstanceSettings(u),g=r.type==="query"?(0,s.l)().getInstanceSettings(r.targetUID):void 0;if((r?.orgId===void 0||r?.orgId===null||r?.orgId===0)&&o.kb.logWarning("Invalid correlation config: Missing org id."),v&&v?.uid!==void 0&&g?.uid!==void 0&&r.type==="query")return{...r,source:v,target:g};if(v&&v?.uid!==void 0&&g?.uid===void 0&&r.type==="external")return{...r,source:v};o.kb.logWarning("Invalid correlation config: Missing source or target.",{source:JSON.stringify(v),target:JSON.stringify(g)})},i=u=>!!u,c=u=>({...u,correlations:u.correlations.map(l).filter(i)});function p(u){return u.data}const h=()=>{const{backend:u}=(0,d.Il)(),[r,v]=(0,n.A)(D=>(0,a.s)(u.fetch({url:"/api/datasources/correlations",params:{page:D.page},method:"GET",showErrorAlert:!1})).then(p).then(c),[u]),[g,E]=(0,n.A)(({sourceUID:D,...f})=>u.post(`/api/datasources/uid/${D}/correlations`,f).then(C=>{const P=l(C.result);if(P!==void 0)return P;throw new Error("invalid sourceUID")}),[u]),[x,m]=(0,n.A)(({sourceUID:D,uid:f})=>u.delete(`/api/datasources/uid/${D}/correlations/${f}`),[u]),[y,b]=(0,n.A)(({sourceUID:D,uid:f,...C})=>u.patch(`/api/datasources/uid/${D}/correlations/${f}`,C).then(P=>{const T=l(P.result);if(T!==void 0)return T;throw new Error("invalid sourceUID")}),[u]);return{create:{execute:E,...g},update:{execute:b,...y},get:{execute:v,...r},remove:{execute:m,...x}}}},52900:(ne,j,e)=>{"use strict";e.d(j,{m:()=>g});var n=e(74848),a=e(22803),s=e(96540),d=e(1906),o=e(30703),l=e(45967),i=e(87063),c=e(991),p=e(88559),h=e(63142),u=e(4651);const r={[u.Tz.math]:"calculator-alt",[u.Tz.reduce]:"compress-arrows",[u.Tz.resample]:"sync",[u.Tz.classic]:"cog",[u.Tz.threshold]:"sliders-v-alt",[u.Tz.sql]:"database"},v=(0,s.memo)(({item:x,onSelect:m})=>{const{value:y,label:b,description:D}=x,f=(0,h.of)(E),C=(0,s.useCallback)(()=>m(y),[y,m]);return(0,n.jsx)(i.W.Item,{component:()=>(0,n.jsxs)("div",{className:f.expressionTypeItem,role:"menuitem",children:[(0,n.jsxs)("div",{className:f.expressionTypeItemContent,"data-testid":`expression-type-${y}`,children:[(0,n.jsx)(o.I,{className:f.icon,name:r[y],"aria-hidden":"true"}),b,y===u.Tz.sql&&(0,n.jsx)(c.y,{featureState:d.Ay.new})]}),(0,n.jsx)(l.m,{placement:"right",content:D,children:(0,n.jsx)(o.I,{className:f.infoIcon,name:"info-circle"})})]}),label:"",onClick:C},y)});v.displayName="ExpressionMenuItem";const g=(0,s.memo)(({handleOnSelect:x,children:m})=>{const y=(0,s.useMemo)(()=>u.uQ.map(D=>(0,n.jsx)(v,{item:D,onSelect:x},D.value)),[x]),b=(0,s.useMemo)(()=>(0,n.jsx)(i.W,{role:"menu",children:y}),[y]);return(0,n.jsx)(p.m,{placement:"bottom-start",overlay:b,children:m})});g.displayName="ExpressionTypeDropdown";const E=x=>({expressionTypeItem:(0,a.css)({width:"100%",display:"flex",alignItems:"center",gap:x.spacing(1)}),expressionTypeItemContent:(0,a.css)({flexGrow:1,display:"flex",alignItems:"center",gap:x.spacing(1)}),icon:(0,a.css)({color:x.colors.text.secondary,flexShrink:0}),infoIcon:(0,a.css)({opacity:.7,color:x.colors.text.secondary,flexShrink:0})})},53222:(ne,j,e)=>{"use strict";e.d(j,{tU:()=>x,a:()=>E,gQ:()=>m});var n=e(43173),a=e(73427),s=e(80977),d=e(66594),o=e(75505),l=e(68143),i=e(78282),c=e(69738);const p=y=>{const b=(0,i.l)().getInstanceSettings({uid:y.datasourceUid});return{id:y.uid,createdAt:y.createdAt*1e3,datasourceName:b?.name||"",datasourceUid:y.datasourceUid,starred:y.starred,comment:y.comment,queries:y.queries}},h=y=>({uid:y.id,createdAt:Math.floor(y.createdAt/1e3),datasourceUid:y.datasourceUid,starred:y.starred,comment:y.comment,queries:y.queries});class u{constructor(){this.preferenceService=new c.W("user")}async addToRichHistory(b){const{result:D}=await(0,l.AI)().post("/api/query-history",{dataSourceUid:b.datasourceUid,queries:b.queries});return{richHistoryQuery:p(D)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(b){(0,l.AI)().delete(`/api/query-history/${b}`)}async getRichHistory(b){const D=r(b);let f="query-history-get-all";b.starred&&(f="query-history-get-starred");const P=(await(0,o.s)((0,l.AI)().fetch({method:"GET",url:`/api/query-history?${D}`,requestId:f}))).data,T=(P.result.queryHistory||[]).map(p),M=P.result.totalCount||0;return{richHistory:T,total:M}}async getSettings(){return{activeDatasourcesOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(b,D){const f=await(0,l.AI)().patch(`/api/query-history/${b}`,{comment:D});return p(f.result)}updateSettings(b){return this.preferenceService.patch({queryHistory:{homeTab:b.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(b,D){let f;return D?f=await(0,l.AI)().post(`/api/query-history/star/${b}`):f=await(0,l.AI)().delete(`/api/query-history/star/${b}`),p(f.result)}}function r(y){let b=`${y.datasourceFilters.map(D=>{const f=(0,i.l)().getInstanceSettings(D).uid;return`datasourceUid=${encodeURIComponent(f)}`}).join("&")}`;return y.search&&(b=b+`&searchString=${y.search}`),y.sortOrder&&(b=b+`&sort=${y.sortOrder===s.x.Ascending?"time-asc":"time-desc"}`),y.starred||(b=b+`&to=${y.to}`,b=b+`&from=${y.from}`),b=b+"&limit=100",b=b+`&page=${y.page||1}`,y.starred&&(b=b+`&onlyStarred=${y.starred}`),b}const v=new d.Ay,g=new u,E=()=>n.$.queryHistoryEnabled?g:v,x=()=>v,m=()=>n.$.queryHistoryEnabled?{availableFilters:[s.x.Descending,s.x.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:a.TP.isSignedIn}:{availableFilters:[s.x.Descending,s.x.Ascending,s.x.DatasourceAZ,s.x.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},53226:(ne,j,e)=>{"use strict";e.d(j,{U0:()=>v,VY:()=>m});var n=e(74848),a=e(1932),s=e(96540),d=e(92745),o=e(68143),l=e(99887),i=e(182),c=e(64762),p=e(77788),h=e(3986),u=e(72930),r=e(6135),v=(y=>(y.NewIntegration="new_oncall_integration",y.ExistingIntegration="existing_oncall_integration",y))(v||{}),g=(y=>(y.IntegrationType="integration_type",y.IntegrationName="integration_name",y))(g||{}),E=(y=>(y.Disabled="disabled",y.V1="v1",y.V2="v2",y))(E||{});function x(){const{installed:y,loading:b,error:D}=(0,h._)((0,i.BO)()),{data:f=[],error:C,isLoading:P}=p.WG.endpoints.features.useQuery(void 0,{skip:!y}),T=(0,s.useMemo)(()=>y?f.includes(p.Pc)?"v2":"v1":"disabled",[y,f]),M=(0,s.useMemo)(()=>T==="v2",[T]);return{isOnCallEnabled:y,integrationStatus:T,isAlertingV2IntegrationEnabled:M,isOnCallStatusLoading:b||P,onCallError:D??C}}function m(){const y=(0,c._2)(),{isOnCallEnabled:b,integrationStatus:D,isAlertingV2IntegrationEnabled:f,isOnCallStatusLoading:C,onCallError:P}=x(),{useCreateIntegrationMutation:T,useGrafanaOnCallIntegrationsQuery:M,useLazyValidateIntegrationNameQuery:I}=p.WG,[B,{isFetching:U}]=I(),[W]=T(),{data:V=[],isLoading:z,isError:R}=M(void 0,{skip:!f}),O=(0,s.useMemo)(()=>({integration_name:async H=>{try{return await B(H).unwrap(),!0}catch(K){if((0,o.NF)(K)&&K.status===409)return(0,d.t)("alerting.irm-integration.integration-name-exists","Integration of this name already exists in IRM");throw y.error((0,d.t)("alerting.irm-integration.validation-failed","Failed to validate IRM integration name. Is the OnCall API available?")),K}},url:H=>f?V.map(K=>K.integration_url).includes(H)?!0:(0,d.t)("alerting.irm-integration.integration-required","Selection of existing IRM integration is required"):!0}),[V,B,f,y]),N=(0,s.useCallback)(H=>f?(0,a.jM)(H,K=>{K.grafana_managed_receiver_configs?.forEach(w=>{w.type===r.J4.OnCall&&(w.settings.integration_type="existing_oncall_integration")})}):H,[f]),F=(0,s.useCallback)(async H=>{if(!f)return H;const Q=(H.grafana_managed_receiver_configs?.filter(k=>k.type===r.J4.OnCall)??[]).filter(k=>k.settings.integration_type==="new_oncall_integration").map(async k=>{const te=await W({integration:r.FI,verbal_name:k.settings.integration_name}).unwrap();k.settings.url=te.integration_url});return await Promise.all(Q),(0,a.jM)(H,k=>{k.grafana_managed_receiver_configs?.forEach(te=>{te.type===r.J4.OnCall&&(delete te.settings.integration_type,delete te.settings.integration_name)})})},[f,W]),G=(0,s.useCallback)(H=>{if(H.type===r.J4.OnCall&&f){const K=H.options.filter(k=>k.propertyName!=="url"),w={value:"new_oncall_integration",label:(0,d.t)("alerting.irm-integration.new-integration","New IRM integration"),description:(0,d.t)("alerting.irm-integration.new-integration-description","A new IRM integration without escalation chains will be automatically created")},Q={value:"existing_oncall_integration",label:(0,d.t)("alerting.irm-integration.existing-integration","Existing IRM integration"),description:(0,d.t)("alerting.irm-integration.existing-integration-description","Use an existing IRM integration")};return K.unshift((0,u.u)("integration_type",(0,d.t)("alerting.irm-integration.connection-method","How to connect to IRM"),"",{required:!0,element:"radio",defaultValue:w,selectOptions:[w,Q]}),(0,u.u)("integration_name",(0,d.t)("alerting.irm-integration.integration-name","Integration name"),(0,d.t)("alerting.irm-integration.integration-name-description","The name of the new IRM integration"),{required:!0,showWhen:{field:"integration_type",is:"new_oncall_integration"}}),(0,u.u)("url",(0,d.t)("alerting.irm-integration.integration","IRM Integration"),(0,d.t)("alerting.irm-integration.integration-description","The IRM integration to send alerts to"),{element:"select",required:!0,showWhen:{field:"integration_type",is:"existing_oncall_integration"},selectOptions:V.map(k=>({label:k.display_name,description:k.integration_url,value:k.integration_url}))})),{...H,options:K}}return H},[V,f]);return{integrationStatus:D,onCallNotifierMeta:{enabled:!!b,order:-1,description:b?(0,d.t)("alerting.irm-integration.enabled-description","Seamless way to handle alerts and manage incidents"):(0,d.t)("alerting.irm-integration.disabled-description","Enable IRM through a Webhook integration"),badge:(0,n.jsx)(l.E,{color:"blue",text:(0,d.t)("alerting.irm-integration.recommended","Recommended")})},extendOnCallNotifierFeatures:G,extendOnCallReceivers:N,createOnCallIntegrations:F,onCallFormValidators:O,isLoadingOnCallIntegration:z||C,isValidating:U,hasOnCallError:!!P||R}}},53247:(ne,j,e)=>{"use strict";e.d(j,{ED:()=>d,Hv:()=>s,NY:()=>i,aY:()=>l,hF:()=>o});var n=e(43173);const a=["provisioning","kubernetesDashboards"],s=()=>{const c=n.$.featureToggles||{};return a.every(p=>c[p])},d=()=>!!(n.$.appUrl&&n.$.appUrl.indexOf("://localhost")<0),o=()=>!!n.$.rendererAvailable,l=c=>c?.allowImageRendering!==!1,i=c=>{const p=s(),h=d(),u=o(),r=l(c);return{hasRequiredFeatures:p,hasPublicAccess:h,hasImageRenderer:u,imageRenderingAllowed:r,missingOnlyOptionalFeatures:p&&(!h||!u),missingRequiredFeatures:!p,everythingConfigured:p&&h&&u&&r}}},53371:(ne,j,e)=>{"use strict";e.d(j,{r:()=>u});var n=e(74848),a=e(22803),s=e(34743),d=e(83505),o=e(46885),l=e(96540),i=e(63142),c=e(76373),p=e(30703),h=e(15245);function u({referenceElement:g,children:E,suffixIcon:x,placement:m}){const y=(0,i.of)(r),b=(0,i.$j)(),D=[(0,s.cY)(8),...(0,c.getPositioningMiddleware)(m)],{context:f,refs:C,floatingStyles:P}=(0,d.we)({open:!0,placement:m,middleware:D,whileElementsMounted:o.ll,strategy:"fixed"});(0,l.useLayoutEffect)(()=>{C.setReference(g)},[g,C]);const{styles:T}=(0,d.DL)(f,{initial:({side:M})=>({opacity:0,transform:v(M,b)}),duration:b.transitions.duration.shortest});return(0,n.jsx)(h.ZL,{children:(0,n.jsx)("div",{style:{display:"inline-block",...P},ref:C.setFloating,"aria-live":"polite",children:(0,n.jsxs)("span",{className:(0,a.cx)(y.root),style:T,children:[E&&(0,n.jsx)("span",{children:E}),x&&(0,n.jsx)(p.I,{name:x})]})})})}const r=g=>({root:(0,a.css)({...g.typography.bodySmall,willChange:"transform",background:g.components.tooltip.background,color:g.components.tooltip.text,padding:g.spacing(.5,1.5),borderRadius:g.shape.radius.pill,display:"inline-flex",gap:g.spacing(.5),alignItems:"center"})}),v=(g,E)=>{switch(g){case"top":return`translateY(${E.spacing(1)})`;case"bottom":return`translateY(-${E.spacing(1)})`;case"left":return`translateX(${E.spacing(1)})`;case"right":return`translateX(-${E.spacing(1)})`}}},53428:(ne,j,e)=>{"use strict";e.d(j,{r:()=>d});var n=e(74848),a=e(63142),s=e(35621);const d=({icon:o,iconTooltip:l,title:i,children:c,id:p})=>{const h=(0,a.of)(s.o);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:h.modalHeaderTitle,id:p,children:i}),c]})}},53431:(ne,j,e)=>{"use strict";e.d(j,{O:()=>y});var n=e(74848),a=e(2543),s=e(96540),d=e(34455),o=e(76732),l=e(95004),i=e(76637),c=e(739),p=e(92790),h=e(47276),u=e(36192),r=e(8721),v=e(41119),g=e(63409);function E(b,D){const f=b.y.values.length,C={...b.y.config,...D},P=b.x??{name:"",values:[...Array(f).keys()],type:l.PU.number,config:{}};let T={refId:"sparkline",fields:[P,{...b.y,config:C}],length:f};return(0,r.g2)(P.values)||(T=(0,v.ES)(T,0)),(0,g.M)({frame:T,refFieldPseudoMin:b.timeRange?.from.valueOf(),refFieldPseudoMax:b.timeRange?.to.valueOf()})}function x(b,D){let{min:f,max:C}=D.fields[1].state?.range;f=Math.max(f,b.config.min??-1/0),C=Math.min(C,b.config.max??1/0);const P=+D.fields[1].config?.noValue;return Number.isNaN(P)||(f=Math.min(f,P),C=Math.max(C,P)),f===C&&(f===0?C=100:f<0?(C=0,f*=2):(f=0,C*=2)),[f,C]}const m={drawStyle:c.GR.Line,showPoints:c.yL.Auto,axisPlacement:c.vM.Hidden,pointSize:2};class y extends s.PureComponent{constructor(D){super(D);const f=E(D.sparkline,D.config);this.state={data:(0,u.bq)(f,(0,u.ro)(f)),alignedDataFrame:f,configBuilder:this.prepareConfig(f)}}static getDerivedStateFromProps(D,f){const C=E(D.sparkline,D.config),P=(0,d.C)(C);return P?{...f,data:(0,u.bq)(P,(0,u.ro)(P)),alignedDataFrame:P}:{...f}}componentDidUpdate(D,f){const{alignedDataFrame:C}=this.state;if(!C)return;let P=!1;if(D.sparkline!==this.props.sparkline){const T=!(0,o.bW)(this.state.alignedDataFrame,f.alignedDataFrame),M=!(0,a.isEqual)(C.fields[1].state?.range,f.alignedDataFrame.fields[1].state?.range);P=T||M}else P=!(0,a.isEqual)(D.config,this.props.config);P&&this.setState({configBuilder:this.prepareConfig(C)})}getYRange(D){return x(D,this.state.alignedDataFrame)}prepareConfig(D){const{theme:f}=this.props,C=new h.e;C.setCursor({show:!1,x:!1,y:!1});const P=D.fields[0];C.addScale({scaleKey:"x",orientation:c.Lt.Horizontal,direction:c.ON.Right,isTime:!1,range:()=>{const{sparkline:T}=this.props;if(T.x){if(T.timeRange&&T.x.type===l.PU.time)return[T.timeRange.from.valueOf(),T.timeRange.to.valueOf()];const M=T.x.values;return[M[0],M[M.length-1]]}return[0,T.y.values.length-1]}}),C.addAxis({scaleKey:"x",theme:f,placement:c.vM.Hidden});for(let T=0;T<D.fields.length;T++){const M=D.fields[T],I=M.config,B={...m,...I.custom};if(M===P||M.type!==l.PU.number)continue;const U=I.unit||"__fixed";C.addScale({scaleKey:U,orientation:c.Lt.Vertical,direction:c.ON.Up,range:()=>this.getYRange(M)}),C.addAxis({scaleKey:U,theme:f,placement:c.vM.Hidden});const W=(0,i.Qi)(M),V=W.getCalculator(M,f)(0,0),z=B.drawStyle===c.GR.Points?c.yL.Always:B.showPoints;C.addSeries({pxAlign:!1,scaleKey:U,theme:f,colorMode:W,thresholds:I.thresholds,drawStyle:B.drawStyle,lineColor:B.lineColor??V,lineWidth:B.lineWidth,lineInterpolation:B.lineInterpolation,showPoints:z,pointSize:B.pointSize,fillOpacity:B.fillOpacity,fillColor:B.fillColor,lineStyle:B.lineStyle,gradientMode:B.gradientMode,spanNulls:B.spanNulls})}return C}render(){const{data:D,configBuilder:f}=this.state,{width:C,height:P}=this.props;return(0,n.jsx)(p.Z,{data:D,config:f,width:C,height:P})}}},53478:(ne,j,e)=>{"use strict";e.d(j,{K:()=>a});const n="12.3.0",a={selectedSeries:0}},53487:(ne,j,e)=>{"use strict";e.d(j,{s:()=>o});var n=e(74848),a=e(22803),s=e(63142);const d=l=>({legend:(0,a.css)({fontSize:l.typography.h3.fontSize,fontWeight:l.typography.fontWeightRegular,margin:l.spacing(0,0,2,0)})}),o=({children:l,className:i,...c})=>{const p=(0,s.of)(d);return(0,n.jsx)("legend",{className:(0,a.cx)(p.legend,i),...c,children:l})}},53543:(ne,j,e)=>{"use strict";e.d(j,{D:()=>d,G:()=>s});var n=e(42954),a=e(76803);const s=new a.K,d=new n.O},53567:(ne,j,e)=>{"use strict";e.d(j,{w:()=>g});var n=e(74848),a=e(96540),s=e(92745),d=e(36490),o=e(71599),l=e(8535),i=e(74869),c=e(75756),p=e(80276),h=e(11018),u=e(67598),r=e(29609);const v=(0,i.wS)(),g=(E=!1)=>{const[x,m]=(0,a.useState)(),[y]=(0,c.Y)(),{waitForRemoval:b}=(0,p.IH)(),D=(0,i.f2)(),f=(0,a.useCallback)(()=>{m(void 0)},[]),C=(0,a.useCallback)((M,I)=>{m({ruleIdentifier:M,groupIdentifier:I})},[]),P=(0,a.useCallback)(async()=>{if(!x)return;const{ruleIdentifier:M,groupIdentifier:I}=x,B=(0,u.Rc)(I),U=B.dataSourceName;await y.execute(B,M),(0,l.JD)((0,h.Lc)({rulesSourceName:U})),v&&(0,r.X4)(M)?await b(M):await(0,l.JD)((0,h.eB)({rulesSourceName:U})),f(),E&&d.Ny.replace("/alerting/list")},[y,f,x,E,b]);return[(0,a.useMemo)(()=>(0,n.jsx)(o.u,{isOpen:!!x,title:(0,s.t)("alerting.delete-rule-modal.title","Delete rule"),body:D?(0,s.t)("alerting.delete-rule-modal.with-soft-delete","Are you sure you want to delete this rule? This rule will be recoverable from the Recently deleted page by a user with an admin role."):(0,s.t)("alerting.delete-rule-modal.without-soft-delete","Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?"),confirmText:(0,s.t)("alerting.use-delete-modal.modal.confirmText-yes-delete","Yes, delete"),icon:"exclamation-triangle",onConfirm:P,onDismiss:f}),[x,P,f,D]),C,f]}},53568:(ne,j,e)=>{"use strict";e.d(j,{Vr:()=>i,Yc:()=>o,kD:()=>l});let n;const a=new Map,s=500;let d="";function o(){return n||(n=document.createElement("canvas").getContext("2d")),n}function l(c,p,h=400){const u=`${h} ${p}px 'Inter'`,r=c+u,v=a.get(r);if(v)return v;const g=o();d!==u&&(g.font=d=u);const E=g.measureText(c);return a.size===s&&a.clear(),a.set(r,E),E}function i(c,p,h,u,r,v){const g=l(c,14,v),E=p/(g.width+2)*14,x=h/u,m=Math.min(x,E);return Math.min(m,r??m)}},53593:(ne,j,e)=>{"use strict";e.d(j,{E:()=>s,M:()=>a});var n=e(55386);const a=" ",s=d=>{const o={},l=[],i=d.fields.filter(h=>!["Time"].includes(h.name));let c=i.find(h=>h.name==="__name__")?.values??[];!c.length&&i.length&&i[0].values.length&&(c=Array(i[0].values.length).fill(""));const p=d.fields.filter(h=>!["__name__"].includes(h.name));return c.forEach(function(h,u){o[h]={};const r=o[h][u]??{};for(const v of p){const g=v.name;if(g!=="Time")if(typeof v?.display=="function"){const E=v?.display(v.values[u]);if(!isNaN(E.numeric))r[g]=E.numeric.toString(10);else{const x=(0,n.cN)(E);x?r[g]=x:g.includes("Value #")&&(r[g]=a)}}else console.warn("Field display method is missing!")}l.push({...r,__name__:h})}),l}},53685:(ne,j,e)=>{"use strict";e.d(j,{c:()=>a});var n=e(739);function a(s,d,o){switch((s==null||o==null)&&(s==null&&(s="null"),o==null&&(o="null"),(d===n.zT.GTE||d===n.zT.LTE)&&(d=n.zT.EQ)),d){case n.zT.EQ:return`${s}`==`${o}`;case n.zT.NEQ:return`${s}`!=`${o}`;case n.zT.GT:return s>o;case n.zT.GTE:return s>=o;case n.zT.LT:return s<o;case n.zT.LTE:return s<=o;default:return!1}}},53926:(ne,j,e)=>{"use strict";e.d(j,{I:()=>n});var n=(a=>(a.GroupTitle="GroupTitle",a))(n||{})},54024:(ne,j,e)=>{"use strict";e.d(j,{s:()=>s});const n=(d,o,l)=>{if(!d.length)return;const i=d.slice(0,-1).join("").length+d.length-1;return d.join(`
`).slice(o,i+l)},a=d=>d?.replace(/[\uFEFF]/g,"");function s(){const d={onCopy(o,l,i){o.preventDefault();const{document:c,selection:p}=l.value,{start:{offset:h},end:{offset:u}}=p,r=c.getLeafBlocksAtRange(p).toArray().map(g=>g.text),v=a(n(r,h,u));return v&&o.clipboardData&&o.clipboardData.setData("Text",v),!0},onPaste(o,l,i){if(o.preventDefault(),o.clipboardData){const p=a(o.clipboardData.getData("Text"))?.split(`
`);if(p&&p.length){l.insertText(p[0]);for(const h of p.slice(1))l.splitBlock().insertText(h)}}return!0}};return{...d,onCut(o,l,i){return d.onCopy(o,l,i),l.deleteAtRange(l.value.selection),!0}}}},54044:(ne,j,e)=>{"use strict";e.d(j,{b:()=>x});var n=e(74848),a=e(22803),s=e(70255),d=e(29246),o=e(11594),l=e(51898),i=e(92745),c=e(76319),p=e(63509),h=e(63142),u=e(21348),r=e(85622);const v=38,g=({isCurrent:D,title:f,plugin:C,onClick:P,onDelete:T,disabled:M,showBadge:I,description:B,children:U})=>{const W=(0,h.of)(y),V=M||C.state===o.pn.deprecated,z=(0,a.cx)({[W.item]:!0,[W.itemDisabled]:V,[W.current]:D});return(0,n.jsxs)("div",{className:z,"aria-label":l.Tp.components.PluginVisualization.item(C.name),"data-testid":l.Tp.components.PluginVisualization.item(C.name),onClick:V?void 0:P,title:D?(0,i.t)("panel.panel-type-card.title-click-to-close","Click again to close this section"):C.name,children:[(0,n.jsx)("img",{className:(0,a.cx)(W.img,{[W.disabled]:V}),src:C.info.logos.small,alt:""}),(0,n.jsxs)("div",{className:(0,a.cx)(W.itemContent,{[W.disabled]:V}),children:[(0,n.jsx)("div",{className:W.name,children:f}),B?(0,n.jsx)("span",{className:W.description,children:B}):null,U]}),I&&(0,n.jsx)("div",{className:(0,a.cx)(W.badge,{[W.disabled]:V}),children:(0,n.jsx)(b,{plugin:C})}),T&&(0,n.jsx)(c.K,{name:"trash-alt",onClick:R=>{R.stopPropagation(),T()},className:W.deleteButton,"aria-label":(0,i.t)("panel.panel-type-card.aria-label-delete-button-on-panel-type-card","Delete button on panel type card"),tooltip:(0,i.t)("panel.panel-type-card.tooltip-delete","Delete")})]})};g.displayName="PanelTypeCard";const E=({children:D,hasDescription:f,hasDelete:C,rootProps:P})=>{const T=(0,h.of)(y),M=(0,h.of)(m);return(0,n.jsxs)("div",{className:T.item,...P,children:[(0,n.jsx)(s.A,{className:(0,a.cx)(T.img,M.image),width:v,height:v}),(0,n.jsxs)("div",{className:T.itemContent,children:[(0,n.jsx)("div",{className:T.name,children:(0,n.jsx)(s.A,{width:160})}),f?(0,n.jsx)(s.A,{containerClassName:T.description,width:80}):null,D]}),C&&(0,n.jsx)(s.A,{containerClassName:(0,a.cx)(T.deleteButton,M.deleteButton),width:16,height:16})]})},x=(0,u.j)(g,E),m=()=>({deleteButton:(0,a.css)({lineHeight:1}),image:(0,a.css)({lineHeight:1})}),y=D=>({item:(0,a.css)({position:"relative",display:"flex",flexShrink:0,cursor:"pointer",background:D.colors.background.secondary,borderRadius:D.shape.radius.default,boxShadow:D.shadows.z1,border:`1px solid ${D.colors.background.secondary}`,alignItems:"center",padding:D.spacing(1),width:"100%",overflow:"hidden",[D.transitions.handleMotion("no-preference","reduce")]:{transition:D.transitions.create(["background"],{duration:D.transitions.duration.short})},"&:hover":{background:D.colors.emphasize(D.colors.background.secondary,.03)}}),itemContent:(0,a.css)({overflow:"hidden",position:"relative",padding:D.spacing(0,1)}),itemDisabled:(0,a.css)({cursor:"default","&, &:hover":{background:D.colors.action.disabledBackground}}),current:(0,a.css)({label:"currentVisualizationItem",border:`1px solid ${D.colors.primary.border}`,background:D.colors.action.selected}),disabled:(0,a.css)({opacity:.6,filter:"grayscale(1)",cursor:"default",pointerEvents:"none"}),name:(0,a.css)({textOverflow:"ellipsis",overflow:"hidden",fontSize:D.typography.size.sm,fontWeight:D.typography.fontWeightMedium,width:"100%"}),description:(0,a.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",color:D.colors.text.secondary,fontSize:D.typography.bodySmall.fontSize,fontWeight:D.typography.fontWeightLight,width:"100%",maxHeight:"4.5em"}),img:(0,a.css)({maxHeight:v,width:v,display:"flex",alignItems:"center"}),badge:(0,a.css)({background:D.colors.background.primary}),deleteButton:(0,a.css)({cursor:"pointer",marginLeft:"auto"})}),b=({plugin:D})=>(0,d.x)(D.signature)?(0,n.jsx)(p.B,{status:D.signature}):(0,n.jsx)(r.p,{state:D.state});b.displayName="PanelPluginBadge"},54087:()=>{(function(ne){ne.color={},ne.color.make=function(e,n,a,s){var d={};return d.r=e||0,d.g=n||0,d.b=a||0,d.a=s??1,d.add=function(o,l){for(var i=0;i<o.length;++i)d[o.charAt(i)]+=l;return d.normalize()},d.scale=function(o,l){for(var i=0;i<o.length;++i)d[o.charAt(i)]*=l;return d.normalize()},d.toString=function(){return d.a>=1?"rgb("+[d.r,d.g,d.b].join(",")+")":"rgba("+[d.r,d.g,d.b,d.a].join(",")+")"},d.normalize=function(){function o(l,i,c){return i<l?l:i>c?c:i}return d.r=o(0,parseInt(d.r),255),d.g=o(0,parseInt(d.g),255),d.b=o(0,parseInt(d.b),255),d.a=o(0,d.a,1),d},d.clone=function(){return ne.color.make(d.r,d.b,d.g,d.a)},d.normalize()},ne.color.extract=function(e,n){var a;do{if(a=e.css(n).toLowerCase(),a!=""&&a!="transparent")break;e=e.parent()}while(e.length&&!ne.nodeName(e.get(0),"body"));return a=="rgba(0, 0, 0, 0)"&&(a="transparent"),ne.color.parse(a)},ne.color.parse=function(e){var n,a=ne.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55);if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55,parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return a(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return a(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var s=ne.trim(e).toLowerCase();return s=="transparent"?a(255,255,255,0):(n=j[s]||[0,0,0],a(n[0],n[1],n[2]))};var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(ne){var j=Object.prototype.hasOwnProperty;ne.fn.detach||(ne.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(s,d){var o=d.children("."+s)[0];if(o==null&&(o=document.createElement("canvas"),o.className=s,ne(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(d),!o.getContext))if(window.G_vmlCanvasManager)o=window.G_vmlCanvasManager.initElement(o);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=o;var l=this.context=o.getContext("2d"),i=window.devicePixelRatio||1,c=l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1;this.pixelRatio=i/c,this.resize(d.width(),d.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(s,d){if(s<=0||d<=0)throw new Error("Invalid dimensions for plot, width = "+s+", height = "+d);var o=this.element,l=this.context,i=this.pixelRatio;this.width!=s&&(o.width=s*i,o.style.width=s+"px",this.width=s),this.height!=d&&(o.height=d*i,o.style.height=d+"px",this.height=d),l.restore(),l.save(),l.scale(i,i)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var s=this._textCache;for(var d in s)if(j.call(s,d)){var o=this.getTextLayer(d),l=s[d];o.hide();for(var i in l)if(j.call(l,i)){var c=l[i];for(var p in c)if(j.call(c,p)){for(var h=c[p].positions,u=0,r;r=h[u];u++)r.active?r.rendered||(o.append(r.element),r.rendered=!0):(h.splice(u--,1),r.rendered&&r.element.detach());h.length==0&&delete c[p]}}o.show()}},e.prototype.getTextLayer=function(s){var d=this.text[s];return d==null&&(this.textContainer==null&&(this.textContainer=ne("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),d=this.text[s]=ne("<div></div>").addClass(s).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),d},e.prototype.getTextInfo=function(s,d,o,l,i){var c,p,h,u;if(d=""+d,typeof o=="object"?c=o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:c=o,p=this._textCache[s],p==null&&(p=this._textCache[s]={}),h=p[c],h==null&&(h=p[c]={}),u=h[d],u==null){var r=ne("<div></div>").html(d).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(s));typeof o=="object"?r.css({font:c,color:o.color}):typeof o=="string"&&r.addClass(o),u=h[d]={element:r,positions:[]};var v=this._textSizeCache[d];v?(u.width=v.width,u.height=v.height):(u.width=r.outerWidth(!0),u.height=r.outerHeight(!0),this._textSizeCache[d]={width:u.width,height:u.height}),r.detach()}return u},e.prototype.addText=function(s,d,o,l,i,c,p,h,u){var r=this.getTextInfo(s,l,i,c,p),v=r.positions;h=="center"?d-=r.width/2:h=="right"&&(d-=r.width),u=="middle"?o-=r.height/2:u=="bottom"&&(o-=r.height);for(var g=0,E;E=v[g];g++)if(E.x==d&&E.y==o){E.active=!0;return}E={active:!0,rendered:!1,element:v.length?r.element.clone():r.element,x:d,y:o},v.push(E),E.element.css({top:Math.round(o),left:Math.round(d),"text-align":h})},e.prototype.removeText=function(s,d,o,l,i,c){if(l==null){var p=this._textCache[s];if(p!=null){for(var h in p)if(j.call(p,h)){var u=p[h];for(var r in u)if(j.call(u,r))for(var v=u[r].positions,g=0,E;E=v[g];g++)E.active=!1}}}else for(var v=this.getTextInfo(s,l,i,c).positions,g=0,E;E=v[g];g++)E.x==d&&E.y==o&&(E.active=!1)};function n(s,d,o,l){var i=[],c={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},p=null,h=null,u=null,r=null,v=null,g=[],E=[],x={left:0,right:0,top:0,bottom:0},m=0,y=0,b={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},D=this;D.setData=T,D.setupGrid=k,D.draw=X,D.getPlaceholder=function(){return s},D.getCanvas=function(){return p.element},D.getPlotOffset=function(){return x},D.width=function(){return m},D.height=function(){return y},D.offset=function(){var de=u.offset();return de.left+=x.left,de.top+=x.top,de},D.getData=function(){return i},D.getAxes=function(){var de={},ge;return ne.each(g.concat(E),function(pe,De){De&&(de[De.direction+(De.n!=1?De.n:"")+"axis"]=De)}),de},D.getXAxes=function(){return g},D.getYAxes=function(){return E},D.c2p=U,D.p2c=W,D.getOptions=function(){return c},D.highlight=Ke,D.unhighlight=Le,D.triggerRedrawOverlay=Ie,D.pointOffset=function(de){return{left:parseInt(g[I(de,"x")-1].p2c(+de.x)+x.left,10),top:parseInt(E[I(de,"y")-1].p2c(+de.y)+x.top,10)}},D.shutdown=F,D.destroy=function(){F(),s.removeData("plot").empty(),i=[],c=null,p=null,h=null,u=null,r=null,v=null,g=[],E=[],b=null,Ae=[],D=null},D.resize=function(){var de=s.width(),ge=s.height();p.resize(de,ge),h.resize(de,ge)},D.hooks=b,C(D),P(o),O(),T(d),k(),X(),N();function f(de,ge){ge=[D].concat(ge);for(var pe=0;pe<de.length;++pe)de[pe].apply(this,ge)}function C(){for(var de={Canvas:e},ge=0;ge<l.length;++ge){var pe=l[ge];pe.init(D,de),pe.options&&ne.extend(!0,c,pe.options)}}function P(de){ne.extend(!0,c,de),de&&de.colors&&(c.colors=de.colors),c.xaxis.color==null&&(c.xaxis.color=ne.color.parse(c.grid.color).scale("a",.22).toString()),c.yaxis.color==null&&(c.yaxis.color=ne.color.parse(c.grid.color).scale("a",.22).toString()),c.xaxis.tickColor==null&&(c.xaxis.tickColor=c.grid.tickColor||c.xaxis.color),c.yaxis.tickColor==null&&(c.yaxis.tickColor=c.grid.tickColor||c.yaxis.color),c.grid.borderColor==null&&(c.grid.borderColor=c.grid.color),c.grid.tickColor==null&&(c.grid.tickColor=ne.color.parse(c.grid.color).scale("a",.22).toString());var ge,pe,De,Me=s.css("font-size"),be=Me?+Me.replace("px",""):13,Oe={style:s.css("font-style"),size:Math.round(.8*be),variant:s.css("font-variant"),weight:s.css("font-weight"),family:s.css("font-family")};for(De=c.xaxes.length||1,ge=0;ge<De;++ge)pe=c.xaxes[ge],pe&&!pe.tickColor&&(pe.tickColor=pe.color),pe=ne.extend(!0,{},c.xaxis,pe),c.xaxes[ge]=pe,pe.font&&(pe.font=ne.extend({},Oe,pe.font),pe.font.color||(pe.font.color=pe.color),pe.font.lineHeight||(pe.font.lineHeight=Math.round(pe.font.size*1.15)));for(De=c.yaxes.length||1,ge=0;ge<De;++ge)pe=c.yaxes[ge],pe&&!pe.tickColor&&(pe.tickColor=pe.color),pe=ne.extend(!0,{},c.yaxis,pe),c.yaxes[ge]=pe,pe.font&&(pe.font=ne.extend({},Oe,pe.font),pe.font.color||(pe.font.color=pe.color),pe.font.lineHeight||(pe.font.lineHeight=Math.round(pe.font.size*1.15)));for(c.xaxis.noTicks&&c.xaxis.ticks==null&&(c.xaxis.ticks=c.xaxis.noTicks),c.yaxis.noTicks&&c.yaxis.ticks==null&&(c.yaxis.ticks=c.yaxis.noTicks),c.x2axis&&(c.xaxes[1]=ne.extend(!0,{},c.xaxis,c.x2axis),c.xaxes[1].position="top",c.x2axis.min==null&&(c.xaxes[1].min=null),c.x2axis.max==null&&(c.xaxes[1].max=null)),c.y2axis&&(c.yaxes[1]=ne.extend(!0,{},c.yaxis,c.y2axis),c.yaxes[1].position="right",c.y2axis.min==null&&(c.yaxes[1].min=null),c.y2axis.max==null&&(c.yaxes[1].max=null)),c.grid.coloredAreas&&(c.grid.markings=c.grid.coloredAreas),c.grid.coloredAreasColor&&(c.grid.markingsColor=c.grid.coloredAreasColor),c.lines&&ne.extend(!0,c.series.lines,c.lines),c.points&&ne.extend(!0,c.series.points,c.points),c.bars&&ne.extend(!0,c.series.bars,c.bars),c.shadowSize!=null&&(c.series.shadowSize=c.shadowSize),c.highlightColor!=null&&(c.series.highlightColor=c.highlightColor),ge=0;ge<c.xaxes.length;++ge)V(g,ge+1).options=c.xaxes[ge];for(ge=0;ge<c.yaxes.length;++ge)V(E,ge+1).options=c.yaxes[ge];for(var Ne in b)c.hooks[Ne]&&c.hooks[Ne].length&&(b[Ne]=b[Ne].concat(c.hooks[Ne]));f(b.processOptions,[c])}function T(de){i=M(de),z(),R()}function M(de){for(var ge=[],pe=0;pe<de.length;++pe){var De=ne.extend(!0,{},c.series);de[pe].data!=null?(De.data=de[pe].data,delete de[pe].data,ne.extend(!0,De,de[pe]),de[pe].data=De.data):De.data=de[pe],ge.push(De)}return ge}function I(de,ge){var pe=de[ge+"axis"];return typeof pe=="object"&&(pe=pe.n),typeof pe!="number"&&(pe=1),pe}function B(){return ne.grep(g.concat(E),function(de){return de})}function U(de){var ge={},pe,De;for(pe=0;pe<g.length;++pe)De=g[pe],De&&(ge["x"+De.n]=De.c2p(de.left));for(pe=0;pe<E.length;++pe)De=E[pe],De&&(ge["y"+De.n]=De.c2p(de.top));return ge.x1!==void 0&&(ge.x=ge.x1),ge.y1!==void 0&&(ge.y=ge.y1),ge}function W(de){var ge={},pe,De,Me;for(pe=0;pe<g.length;++pe)if(De=g[pe],De&&De.used&&(Me="x"+De.n,de[Me]==null&&De.n==1&&(Me="x"),de[Me]!=null)){ge.left=De.p2c(de[Me]);break}for(pe=0;pe<E.length;++pe)if(De=E[pe],De&&De.used&&(Me="y"+De.n,de[Me]==null&&De.n==1&&(Me="y"),de[Me]!=null)){ge.top=De.p2c(de[Me]);break}return ge}function V(de,ge){return de[ge-1]||(de[ge-1]={n:ge,direction:de==g?"x":"y",options:ne.extend(!0,{},de==g?c.xaxis:c.yaxis)}),de[ge-1]}function z(){var de=i.length,ge=-1,pe;for(pe=0;pe<i.length;++pe){var De=i[pe].color;De!=null&&(de--,typeof De=="number"&&De>ge&&(ge=De))}de<=ge&&(de=ge+1);var Me,be=[],Oe=c.colors,Ne=Oe.length,We=0;for(pe=0;pe<de;pe++)Me=ne.color.parse(Oe[pe%Ne]||"#666"),pe%Ne==0&&pe&&(We>=0?We<.5?We=-We-.2:We=0:We=-We),be[pe]=Me.scale("rgb",1+We);var qe=0,st;for(pe=0;pe<i.length;++pe){if(st=i[pe],st.color==null?(st.color=be[qe].toString(),++qe):typeof st.color=="number"&&(st.color=be[st.color].toString()),st.lines.show==null){var rt,ot=!0;for(rt in st)if(st[rt]&&st[rt].show){ot=!1;break}ot&&(st.lines.show=!0)}st.lines.zero==null&&(st.lines.zero=!!st.lines.fill),st.xaxis=V(g,I(st,"x")),st.yaxis=V(E,I(st,"y"))}}function R(){var de=Number.POSITIVE_INFINITY,ge=Number.NEGATIVE_INFINITY,pe=Number.MAX_VALUE,De,Me,be,Oe,Ne,We,qe,st,rt,ot,mt,pt,ke,Ze,nt,ut;function gt(Bn,xn,ft){xn<Bn.datamin&&xn!=-pe&&(Bn.datamin=xn),ft>Bn.datamax&&ft!=pe&&(Bn.datamax=ft)}for(ne.each(B(),function(Bn,xn){xn.datamin=de,xn.datamax=ge,xn.used=!1}),De=0;De<i.length;++De)We=i[De],We.datapoints={points:[]},f(b.processRawData,[We,We.data,We.datapoints]);for(De=0;De<i.length;++De){if(We=i[De],nt=We.data,ut=We.datapoints.format,!ut){if(ut=[],ut.push({x:!0,number:!0,required:!0}),ut.push({y:!0,number:!0,required:!0}),We.stack||We.bars.show||We.lines.show&&We.lines.fill){var ht=!!(We.bars.show&&We.bars.zero||We.lines.show&&We.lines.zero);ut.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:ht}),We.bars.horizontal&&(delete ut[ut.length-1].y,ut[ut.length-1].x=!0)}We.datapoints.format=ut}if(We.datapoints.pointsize==null){We.datapoints.pointsize=ut.length,st=We.datapoints.pointsize,qe=We.datapoints.points;var tt=We.lines.show&&We.lines.steps;for(We.xaxis.used=We.yaxis.used=!0,Me=be=0;Me<nt.length;++Me,be+=st){Ze=nt[Me];var Ot=Ze==null;if(!Ot)for(Oe=0;Oe<st;++Oe)pt=Ze[Oe],ke=ut[Oe],ke&&(ke.number&&pt!=null&&(pt=+pt,isNaN(pt)?pt=null:pt==1/0?pt=pe:pt==-1/0&&(pt=-pe)),pt==null&&(ke.required&&(Ot=!0),ke.defaultValue!=null&&(pt=ke.defaultValue))),qe[be+Oe]=pt;if(Ot)for(Oe=0;Oe<st;++Oe)pt=qe[be+Oe],pt!=null&&(ke=ut[Oe],ke.autoscale!==!1&&(ke.x&&gt(We.xaxis,pt,pt),ke.y&&gt(We.yaxis,pt,pt))),qe[be+Oe]=null;if(tt&&be>0&&(!Ot||qe[be-st]!=null)){for(Oe=0;Oe<st;++Oe)qe[be+st+Oe]=qe[be+Oe];qe[be+1]=qe[be-st+1]||0,Ot&&(qe[be]=Ze[0]),be+=st}}}}for(De=0;De<i.length;++De){if(We=i[De],qe=We.datapoints.points,st=We.datapoints.pointsize,We.transform==="negative-Y")for(Me=0;Me<qe.length;Me+=st)qe[Me]!=null&&(pt=qe[Me+1],qe[Me+1]=-pt);f(b.processDatapoints,[We,We.datapoints])}for(De=0;De<i.length;++De){We=i[De],qe=We.datapoints.points,st=We.datapoints.pointsize,ut=We.datapoints.format;var jt=de,wt=de,Ht=ge,hn=ge;for(Me=0;Me<qe.length;Me+=st)if(qe[Me]!=null)for(Oe=0;Oe<st;++Oe)pt=qe[Me+Oe],ke=ut[Oe],!(!ke||ke.autoscale===!1||pt==pe||pt==-pe)&&(ke.x&&(pt<jt&&(jt=pt),pt>Ht&&(Ht=pt)),ke.y&&(pt<wt&&(wt=pt),pt>hn&&(hn=pt)));if(We.bars.show){var Dn;switch(We.bars.align){case"left":Dn=0;break;case"right":Dn=-We.bars.barWidth;break;default:Dn=-We.bars.barWidth/2}We.bars.horizontal?(wt+=Dn,hn+=Dn+We.bars.barWidth):(jt+=Dn,Ht+=Dn+We.bars.barWidth)}gt(We.xaxis,jt,Ht),gt(We.yaxis,wt,hn)}ne.each(B(),function(Bn,xn){xn.datamin==de&&(xn.datamin=null),xn.datamax==ge&&(xn.datamax=null)})}function O(){s.find(".flot-temp-elem").remove(),s.css("position")=="static"&&s.css("position","relative"),p=new e("flot-base",s),h=new e("flot-overlay",s),r=p.context,v=h.context,u=ne(h.element).unbind();var de=s.data("plot");de&&(de.shutdown(),h.clear()),s.data("plot",D)}function N(){c.grid.hoverable&&(u.mousemove(Pe),u.bind("mouseleave",Ve),ne(document).bind("touchend",Se)),c.grid.clickable&&u.click(me),f(b.bindEvents,[u])}function F(){Ge&&clearTimeout(Ge),u.unbind("mousemove",Pe),u.unbind("mouseleave",Ve),u.unbind("click",me),ne(document).unbind("touchend",Se),f(b.shutdown,[u])}function G(de){function ge(Oe){return Oe}var pe,De,Me=de.options.transform||ge,be=de.options.inverseTransform;de.direction=="x"?(pe=de.scale=m/Math.abs(Me(de.max)-Me(de.min)),De=Math.min(Me(de.max),Me(de.min))):(pe=de.scale=y/Math.abs(Me(de.max)-Me(de.min)),pe=-pe,De=Math.max(Me(de.max),Me(de.min))),Me==ge?de.p2c=function(Oe){return(Oe-De)*pe}:de.p2c=function(Oe){return(Me(Oe)-De)*pe},be?de.c2p=function(Oe){return be(De+Oe/pe)}:de.c2p=function(Oe){return De+Oe/pe}}function H(de){for(var ge=de.options,pe=de.ticks||[],De=ge.labelWidth||0,Me=ge.labelHeight||0,be=De||(de.direction=="x"?Math.floor(p.width/(pe.length||1)):null),Oe=de.direction+"Axis "+de.direction+de.n+"Axis",Ne="flot-"+de.direction+"-axis flot-"+de.direction+de.n+"-axis "+Oe,We=ge.font||"flot-tick-label tickLabel",qe=0;qe<pe.length;++qe){var st=pe[qe];if(st.label){var rt=p.getTextInfo(Ne,st.label,We,null,be);De=Math.max(De,rt.width+1),Me=Math.max(Me,rt.height)}}de.labelWidth=ge.labelWidth||De,de.labelHeight=ge.labelHeight||Me}function K(de){var ge=de.labelWidth,pe=de.labelHeight,De=de.options.position,Me=de.direction==="x",be=de.options.tickLength,Oe=c.grid.axisMargin,Ne=c.grid.labelMargin,We=c.grid.eventSectionHeight,qe=!0,st=!0,rt=!0,ot=!1;ne.each(Me?g:E,function(mt,pt){pt&&(pt.show||pt.reserveSpace)&&(pt===de?ot=!0:pt.options.position===De&&(ot?st=!1:qe=!1),ot||(rt=!1))}),st&&(Oe=0),be==null&&(be=rt?"full":5),isNaN(+be)||(Ne+=+be),Me?(pe+=Ne,pe+=We,De=="bottom"?(x.bottom+=pe+Oe,de.box={top:p.height-x.bottom,height:pe}):(de.box={top:x.top+Oe,height:pe},x.top+=pe+Oe)):(ge+=Ne,De=="left"?(de.box={left:x.left+Oe,width:ge},x.left+=ge+Oe):(x.right+=ge+Oe,de.box={left:p.width-x.right,width:ge})),de.position=De,de.tickLength=be,de.box.padding=Ne,de.box.eventSectionPadding=We,de.innermost=qe}function w(de){de.direction=="x"?(de.box.left=x.left-de.labelWidth/2,de.box.width=p.width-x.left-x.right+de.labelWidth):(de.box.top=x.top-de.labelHeight/2,de.box.height=p.height-x.bottom-x.top+de.labelHeight)}function Q(){var de=c.grid.minBorderMargin,ge,pe;if(de==null)for(de=0,pe=0;pe<i.length;++pe)de=Math.max(de,2*(i[pe].points.radius+i[pe].points.lineWidth/2));var De={left:de,right:de,top:de,bottom:de};ne.each(B(),function(Me,be){be.reserveSpace&&be.ticks&&be.ticks.length&&(be.direction==="x"?(De.left=Math.max(De.left,be.labelWidth/2),De.right=Math.max(De.right,be.labelWidth/2)):(De.bottom=Math.max(De.bottom,be.labelHeight/2),De.top=Math.max(De.top,be.labelHeight/2)))}),x.left=Math.ceil(Math.max(De.left,x.left)),x.right=Math.ceil(Math.max(De.right,x.right)),x.top=Math.ceil(Math.max(De.top,x.top)),x.bottom=Math.ceil(Math.max(De.bottom,x.bottom))}function k(){var de,ge=B(),pe=c.grid.show;for(var De in x){var Me=c.grid.margin||0;x[De]=typeof Me=="number"?Me:Me[De]||0}f(b.processOffset,[x]);for(var De in x)typeof c.grid.borderWidth=="object"?x[De]+=pe?c.grid.borderWidth[De]:0:x[De]+=pe?c.grid.borderWidth:0;if(ne.each(ge,function(Ne,We){var qe=We.options;We.show=qe.show==null?We.used:qe.show,We.reserveSpace=qe.reserveSpace==null?We.show:qe.reserveSpace,te(We)}),f(b.processRange,[]),pe){for(var be=ne.grep(ge,function(Ne){return Ne.show||Ne.reserveSpace}),Oe=!1,de=0;de<2&&(ne.each(be,function(We,qe){se(qe),re(qe),Oe=Y(qe,qe.ticks)||Oe,H(qe)}),Oe&&b.processRange.length>0);de++)f(b.processRange,[]),Oe=!1;for(de=be.length-1;de>=0;--de)K(be[de]);Q(),ne.each(be,function(Ne,We){w(We)})}m=p.width-x.left-x.right,y=p.height-x.bottom-x.top,ne.each(ge,function(Ne,We){G(We)}),pe&&ae(),Ee()}function te(de){var ge=de.options,pe=+(ge.min!=null?ge.min:de.datamin),De=+(ge.max!=null?ge.max:de.datamax),Me=De-pe;if(Me==0){var be=.25,Oe=Math.abs(De==0?1:De*be);ge.min==null&&(pe-=Oe),(ge.max==null||ge.min!=null)&&(De+=Oe)}else{var Ne=ge.autoscaleMargin;Ne!=null&&(ge.min==null&&(pe-=Me*Ne,pe<0&&de.datamin!=null&&de.datamin>=0&&(pe=0)),ge.max==null&&(De+=Me*Ne,De>0&&de.datamax!=null&&de.datamax<=0&&(De=0)))}de.min=pe,de.max=De}function q(de){if(de=Math.abs(String(de).replace(".","")),de==0)return 0;for(;de!=0&&de%10==0;)de/=10;return Math.floor(Math.log(de)/Math.LN10)+1}function se(de){var ge=de.options,pe;typeof ge.ticks=="number"&&ge.ticks>0?pe=ge.ticks:pe=.3*Math.sqrt(de.direction=="x"?p.width:p.height);var De=(de.max-de.min)/pe,Me=-Math.floor(Math.log(De)/Math.LN10),be=ge.tickDecimals;be!=null&&Me>be&&(Me=be);var Oe=Math.pow(10,-Me),Ne=De/Oe,We;if(Ne<1.5?We=1:Ne<3?(We=2,Ne>2.25&&(be==null||Me+1<=be)&&(We=2.5,++Me)):Ne<7.5?We=5:We=10,We*=Oe,ge.minTickSize!=null&&We<ge.minTickSize&&(We=ge.minTickSize),de.delta=De,de.tickDecimals=Math.max(0,be??Me),de.tickSize=ge.tickSize||We,ge.mode=="time"&&!de.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(de.tickGenerator||(de.tickGenerator=function(mt){var pt=[],ke=a(mt.min,mt.tickSize),Ze=0,nt=Number.NaN,ut;do ut=nt,nt=ke+Ze*mt.tickSize,pt.push(nt),++Ze;while(nt<mt.max&&nt!=ut);return pt},de.tickFormatter=function(mt,pt){var ke=pt.tickDecimals?Math.pow(10,pt.tickDecimals):1,Ze=""+Math.round(mt*ke)/ke;if(pt.tickDecimals!=null){var nt=Ze.indexOf("."),ut=nt==-1?0:Ze.length-nt-1;if(ut<pt.tickDecimals)return(ut?Ze:Ze+".")+(""+ke).substr(1,pt.tickDecimals-ut)}return Ze}),ne.isFunction(ge.tickFormatter)&&(de.tickFormatter=function(mt,pt){return""+ge.tickFormatter(mt,pt)}),ge.alignTicksWithAxis!=null){var qe=(de.direction=="x"?g:E)[ge.alignTicksWithAxis-1];if(qe&&qe.used&&qe!=de){var st=de.tickGenerator(de);if(st.length>0&&(ge.min==null&&(de.min=Math.min(de.min,st[0])),ge.max==null&&st.length>1&&(de.max=Math.max(de.max,st[st.length-1]))),de.tickGenerator=function(mt){var pt=[],ke,Ze;for(Ze=0;Ze<qe.ticks.length;++Ze)ke=(qe.ticks[Ze].v-qe.min)/(qe.max-qe.min),ke=mt.min+ke*(mt.max-mt.min),pt.push(ke);return pt},!de.mode&&ge.tickDecimals==null){var rt=Math.max(0,-Math.floor(Math.log(de.delta)/Math.LN10)+1),ot=de.tickGenerator(de);ot.length>1&&/\..*0$/.test((ot[1]-ot[0]).toFixed(rt))||(de.tickDecimals=rt)}}}}function re(de){var ge=de.options.ticks,pe=[];ge==null||typeof ge=="number"&&ge>0?pe=de.tickGenerator(de):ge&&(ne.isFunction(ge)?pe=ge(de):pe=ge);var De,Me;for(de.ticks=[],De=0;De<pe.length;++De){var be=null,Oe=pe[De];typeof Oe=="object"?(Me=+Oe[0],Oe.length>1&&(be=Oe[1])):Me=+Oe,be==null&&(be=de.tickFormatter(Me,de)),isNaN(Me)||de.ticks.push({v:Me,label:be})}}function Y(de,ge){var pe=!1;return de.options.autoscaleMargin&&ge.length>0&&(de.options.min==null&&(de.min=Math.min(de.min,ge[0].v),pe=!0),de.options.max==null&&ge.length>1&&(de.max=Math.max(de.max,ge[ge.length-1].v),pe=!0)),pe}function X(){p.clear(),f(b.drawBackground,[r]);var de=c.grid;de.show&&de.backgroundColor&&_(),de.show&&!de.aboveData&&ee();for(var ge=0;ge<i.length;++ge)f(b.drawSeries,[r,i[ge]]),L(i[ge]);f(b.draw,[r]),de.show&&de.aboveData&&ee(),p.render(),Ie()}function J(de,ge){for(var pe,De,Me,be,Oe=B(),Ne=0;Ne<Oe.length;++Ne)if(pe=Oe[Ne],pe.direction==ge&&(be=ge+pe.n+"axis",!de[be]&&pe.n==1&&(be=ge+"axis"),de[be])){De=de[be].from,Me=de[be].to;break}if(de[be]||(pe=ge=="x"?g[0]:E[0],De=de[ge+"1"],Me=de[ge+"2"]),De!=null&&Me!=null&&De>Me){var We=De;De=Me,Me=We}return{from:De,to:Me,axis:pe}}function _(){r.save(),r.translate(x.left,x.top),r.fillStyle=Ye(c.grid.backgroundColor,y,0,"rgba(255, 255, 255, 0)"),r.fillRect(0,0,m,y),r.restore()}function ee(){var de,ge,pe,De;r.save(),r.translate(x.left,x.top);var Me=c.grid.markings;if(Me)for(ne.isFunction(Me)&&(ge=D.getAxes(),ge.xmin=ge.xaxis.min,ge.xmax=ge.xaxis.max,ge.ymin=ge.yaxis.min,ge.ymax=ge.yaxis.max,Me=Me(ge)),de=0;de<Me.length;++de){var be=Me[de],Oe=J(be,"x"),Ne=J(be,"y");if(Oe.from==null&&(Oe.from=Oe.axis.min),Oe.to==null&&(Oe.to=Oe.axis.max),Ne.from==null&&(Ne.from=Ne.axis.min),Ne.to==null&&(Ne.to=Ne.axis.max),!(Oe.to<Oe.axis.min||Oe.from>Oe.axis.max||Ne.to<Ne.axis.min||Ne.from>Ne.axis.max)){Oe.from=Math.max(Oe.from,Oe.axis.min),Oe.to=Math.min(Oe.to,Oe.axis.max),Ne.from=Math.max(Ne.from,Ne.axis.min),Ne.to=Math.min(Ne.to,Ne.axis.max);var We=Oe.from===Oe.to,qe=Ne.from===Ne.to;if(!(We&&qe))if(Oe.from=Math.floor(Oe.axis.p2c(Oe.from)),Oe.to=Math.floor(Oe.axis.p2c(Oe.to)),Ne.from=Math.floor(Ne.axis.p2c(Ne.from)),Ne.to=Math.floor(Ne.axis.p2c(Ne.to)),We||qe){var st=be.lineWidth||c.grid.markingsLineWidth,rt=st%2?.5:0;r.beginPath(),r.strokeStyle=be.color||c.grid.markingsColor,r.lineWidth=st,We?(r.moveTo(Oe.to+rt,Ne.from),r.lineTo(Oe.to+rt,Ne.to)):(r.moveTo(Oe.from,Ne.to+rt),r.lineTo(Oe.to,Ne.to+rt)),r.stroke()}else r.fillStyle=be.color||c.grid.markingsColor,r.fillRect(Oe.from,Ne.to,Oe.to-Oe.from,Ne.from-Ne.to)}}ge=B(),pe=c.grid.borderWidth;for(var ot=0;ot<ge.length;++ot){var mt=ge[ot],pt=mt.box,ke=mt.tickLength,Ze,nt,ut,gt;if(!(!mt.show||mt.ticks.length==0)){for(r.lineWidth=1,mt.direction=="x"?(Ze=0,ke=="full"?nt=mt.position=="top"?0:y:nt=pt.top-x.top+(mt.position=="top"?pt.height:0)):(nt=0,ke=="full"?Ze=mt.position=="left"?0:m:Ze=pt.left-x.left+(mt.position=="left"?pt.width:0)),mt.innermost||(r.strokeStyle=mt.options.color,r.beginPath(),ut=gt=0,mt.direction=="x"?ut=m+1:gt=y+1,r.lineWidth==1&&(mt.direction=="x"?nt=Math.floor(nt)+.5:Ze=Math.floor(Ze)+.5),r.moveTo(Ze,nt),r.lineTo(Ze+ut,nt+gt),r.stroke()),r.strokeStyle=mt.options.tickColor,r.beginPath(),de=0;de<mt.ticks.length;++de){var ht=mt.ticks[de].v;ut=gt=0,!(isNaN(ht)||ht<mt.min||ht>mt.max||ke=="full"&&(typeof pe=="object"&&pe[mt.position]>0||pe>0)&&(ht==mt.min||ht==mt.max))&&(mt.direction=="x"?(Ze=mt.p2c(ht),gt=ke=="full"?-y:ke,mt.position=="top"&&(gt=-gt)):(nt=mt.p2c(ht),ut=ke=="full"?-m:ke,mt.position=="left"&&(ut=-ut)),r.lineWidth==1&&(mt.direction=="x"?Ze=Math.floor(Ze)+.5:nt=Math.floor(nt)+.5),r.moveTo(Ze,nt),r.lineTo(Ze+ut,nt+gt))}r.stroke()}}pe&&(De=c.grid.borderColor,typeof pe=="object"||typeof De=="object"?(typeof pe!="object"&&(pe={top:pe,right:pe,bottom:pe,left:pe}),typeof De!="object"&&(De={top:De,right:De,bottom:De,left:De}),pe.top>0&&(r.strokeStyle=De.top,r.lineWidth=pe.top,r.beginPath(),r.moveTo(0-pe.left,0-pe.top/2),r.lineTo(m,0-pe.top/2),r.stroke()),pe.right>0&&(r.strokeStyle=De.right,r.lineWidth=pe.right,r.beginPath(),r.moveTo(m+pe.right/2,0-pe.top),r.lineTo(m+pe.right/2,y),r.stroke()),pe.bottom>0&&(r.strokeStyle=De.bottom,r.lineWidth=pe.bottom,r.beginPath(),r.moveTo(m+pe.right,y+pe.bottom/2),r.lineTo(0,y+pe.bottom/2),r.stroke()),pe.left>0&&(r.strokeStyle=De.left,r.lineWidth=pe.left,r.beginPath(),r.moveTo(0-pe.left/2,y+pe.bottom),r.lineTo(0-pe.left/2,0),r.stroke())):(r.lineWidth=pe,r.strokeStyle=c.grid.borderColor,r.strokeRect(-pe/2,-pe/2,m+pe,y+pe))),r.restore()}function ae(){ne.each(B(),function(de,ge){var pe=ge.box,De=ge.direction+"Axis "+ge.direction+ge.n+"Axis",Me="flot-"+ge.direction+"-axis flot-"+ge.direction+ge.n+"-axis "+De,be=ge.options.font||"flot-tick-label tickLabel",Oe,Ne,We,qe,st;if(p.removeText(Me),!(!ge.show||ge.ticks.length==0))for(var rt=0;rt<ge.ticks.length;++rt)Oe=ge.ticks[rt],!(!Oe.label||Oe.v<ge.min||Oe.v>ge.max)&&(ge.direction=="x"?(qe="center",Ne=x.left+ge.p2c(Oe.v),ge.position=="bottom"?We=pe.top+pe.padding+pe.eventSectionPadding:(We=pe.top+pe.height-pe.padding,st="bottom")):(st="middle",We=x.top+ge.p2c(Oe.v),ge.position=="left"?(Ne=pe.left+pe.width-pe.padding,qe="right"):Ne=pe.left+pe.padding),p.addText(Me,Ne,We,Oe.label,be,null,null,qe,st))})}function le(de){for(var ge=[],pe=null,De=null,Me=de.datapoints,be=[],Oe=0;Oe<Me.pointsize-2;Oe++)be.push(0);for(var Ne=0;Ne<Me.points.length;Ne+=Me.pointsize){var We=Me.points[Ne],qe=Me.points[Ne+1];Ne===Me.points.length-Me.pointsize?De=null:De=Me.points[Ne+Me.pointsize],We!==null&&qe!==null&&pe===null&&De===null&&(ge.push(We),ge.push(qe),ge.push.apply(ge,be)),pe=We}var st=Me.points;Me.points=ge,de.points.radius=de.lines.lineWidth/2,oe(de),Me.points=st}function L(de){de.lines.show&&(ie(de),!de.points.show&&!de.bars.show&&le(de)),de.bars.show&&ye(de),de.points.show&&oe(de)}function ie(de){function ge(Ne,We,qe,st,rt){var ot=Ne.points,mt=Ne.pointsize,pt=null,ke=null;r.beginPath();for(var Ze=mt;Ze<ot.length;Ze+=mt){var nt=ot[Ze-mt],ut=ot[Ze-mt+1],gt=ot[Ze],ht=ot[Ze+1];if(!(nt==null||gt==null)){if(ut<=ht&&ut<rt.min){if(ht<rt.min)continue;nt=(rt.min-ut)/(ht-ut)*(gt-nt)+nt,ut=rt.min}else if(ht<=ut&&ht<rt.min){if(ut<rt.min)continue;gt=(rt.min-ut)/(ht-ut)*(gt-nt)+nt,ht=rt.min}if(ut>=ht&&ut>rt.max){if(ht>rt.max)continue;nt=(rt.max-ut)/(ht-ut)*(gt-nt)+nt,ut=rt.max}else if(ht>=ut&&ht>rt.max){if(ut>rt.max)continue;gt=(rt.max-ut)/(ht-ut)*(gt-nt)+nt,ht=rt.max}if(nt<=gt&&nt<st.min){if(gt<st.min)continue;ut=(st.min-nt)/(gt-nt)*(ht-ut)+ut,nt=st.min}else if(gt<=nt&&gt<st.min){if(nt<st.min)continue;ht=(st.min-nt)/(gt-nt)*(ht-ut)+ut,gt=st.min}if(nt>=gt&&nt>st.max){if(gt>st.max)continue;ut=(st.max-nt)/(gt-nt)*(ht-ut)+ut,nt=st.max}else if(gt>=nt&&gt>st.max){if(nt>st.max)continue;ht=(st.max-nt)/(gt-nt)*(ht-ut)+ut,gt=st.max}(nt!=pt||ut!=ke)&&r.moveTo(st.p2c(nt)+We,rt.p2c(ut)+qe),pt=gt,ke=ht,r.lineTo(st.p2c(gt)+We,rt.p2c(ht)+qe)}}r.stroke()}function pe(Ne,We,qe){for(var st=Ne.points,rt=Ne.pointsize,ot=Math.min(Math.max(0,qe.min),qe.max),mt=0,pt,ke=!1,Ze=1,nt=0,ut=0;!(rt>0&&mt>st.length+rt);){mt+=rt;var gt=st[mt-rt],ht=st[mt-rt+Ze],tt=st[mt],Ot=st[mt+Ze];if(ke){if(rt>0&&gt!=null&&tt==null){ut=mt,rt=-rt,Ze=2;continue}if(rt<0&&mt==nt+rt){r.fill(),ke=!1,rt=-rt,Ze=1,mt=nt=ut+rt;continue}}if(!(gt==null||tt==null)){if(gt<=tt&&gt<We.min){if(tt<We.min)continue;ht=(We.min-gt)/(tt-gt)*(Ot-ht)+ht,gt=We.min}else if(tt<=gt&&tt<We.min){if(gt<We.min)continue;Ot=(We.min-gt)/(tt-gt)*(Ot-ht)+ht,tt=We.min}if(gt>=tt&&gt>We.max){if(tt>We.max)continue;ht=(We.max-gt)/(tt-gt)*(Ot-ht)+ht,gt=We.max}else if(tt>=gt&&tt>We.max){if(gt>We.max)continue;Ot=(We.max-gt)/(tt-gt)*(Ot-ht)+ht,tt=We.max}if(ke||(r.beginPath(),r.moveTo(We.p2c(gt),qe.p2c(ot)),ke=!0),ht>=qe.max&&Ot>=qe.max){r.lineTo(We.p2c(gt),qe.p2c(qe.max)),r.lineTo(We.p2c(tt),qe.p2c(qe.max));continue}else if(ht<=qe.min&&Ot<=qe.min){r.lineTo(We.p2c(gt),qe.p2c(qe.min)),r.lineTo(We.p2c(tt),qe.p2c(qe.min));continue}var jt=gt,wt=tt;ht<=Ot&&ht<qe.min&&Ot>=qe.min?(gt=(qe.min-ht)/(Ot-ht)*(tt-gt)+gt,ht=qe.min):Ot<=ht&&Ot<qe.min&&ht>=qe.min&&(tt=(qe.min-ht)/(Ot-ht)*(tt-gt)+gt,Ot=qe.min),ht>=Ot&&ht>qe.max&&Ot<=qe.max?(gt=(qe.max-ht)/(Ot-ht)*(tt-gt)+gt,ht=qe.max):Ot>=ht&&Ot>qe.max&&ht<=qe.max&&(tt=(qe.max-ht)/(Ot-ht)*(tt-gt)+gt,Ot=qe.max),gt!=jt&&r.lineTo(We.p2c(jt),qe.p2c(ht)),r.lineTo(We.p2c(gt),qe.p2c(ht)),r.lineTo(We.p2c(tt),qe.p2c(Ot)),tt!=wt&&(r.lineTo(We.p2c(tt),qe.p2c(Ot)),r.lineTo(We.p2c(wt),qe.p2c(Ot)))}}}r.save(),r.translate(x.left,x.top),r.lineJoin="round";var De=de.lines.lineWidth,Me=de.shadowSize;if(De>0&&Me>0){r.lineWidth=Me,r.strokeStyle="rgba(0,0,0,0.1)";var be=Math.PI/18;ge(de.datapoints,Math.sin(be)*(De/2+Me/2),Math.cos(be)*(De/2+Me/2),de.xaxis,de.yaxis),r.lineWidth=Me/2,ge(de.datapoints,Math.sin(be)*(De/2+Me/4),Math.cos(be)*(De/2+Me/4),de.xaxis,de.yaxis)}r.lineWidth=De,r.strokeStyle=de.color;var Oe=fe(de.lines,de.color,0,y);Oe&&(r.fillStyle=Oe,pe(de.datapoints,de.xaxis,de.yaxis)),De>0&&ge(de.datapoints,0,0,de.xaxis,de.yaxis),r.restore()}function oe(de){function ge(Ne,We,qe,st,rt,ot,mt,pt){for(var ke=Ne.points,Ze=Ne.pointsize,nt=0;nt<ke.length;nt+=Ze){var ut=ke[nt],gt=ke[nt+1];ut==null||ut<ot.min||ut>ot.max||gt<mt.min||gt>mt.max||(r.beginPath(),ut=ot.p2c(ut),gt=mt.p2c(gt)+st,pt=="circle"?r.arc(ut,gt,We,0,rt?Math.PI:Math.PI*2,!1):pt(r,ut,gt,We,rt),r.closePath(),qe&&(r.fillStyle=qe,r.fill()),r.stroke())}}r.save(),r.translate(x.left,x.top);var pe=de.points.lineWidth,De=de.shadowSize,Me=de.points.radius,be=de.points.symbol;if(pe==0&&(pe=1e-4),pe>0&&De>0){var Oe=De/2;r.lineWidth=Oe,r.strokeStyle="rgba(0,0,0,0.1)",ge(de.datapoints,Me,null,Oe+Oe/2,!0,de.xaxis,de.yaxis,be),r.strokeStyle="rgba(0,0,0,0.2)",ge(de.datapoints,Me,null,Oe/2,!0,de.xaxis,de.yaxis,be)}r.lineWidth=pe,r.strokeStyle=de.color,ge(de.datapoints,Me,fe(de.points,de.color),0,!1,de.xaxis,de.yaxis,be),r.restore()}function ue(de,ge,pe,De,Me,be,Oe,Ne,We,qe,st){var rt,ot,mt,pt,ke,Ze,nt,ut,gt;qe?(ut=Ze=nt=!0,ke=!1,rt=pe,ot=de,pt=ge+De,mt=ge+Me,ot<rt&&(gt=ot,ot=rt,rt=gt,ke=!0,Ze=!1)):(ke=Ze=nt=!0,ut=!1,rt=de+De,ot=de+Me,mt=pe,pt=ge,pt<mt&&(gt=pt,pt=mt,mt=gt,ut=!0,nt=!1)),!(ot<Oe.min||rt>Oe.max||pt<Ne.min||mt>Ne.max)&&(rt<Oe.min&&(rt=Oe.min,ke=!1),ot>Oe.max&&(ot=Oe.max,Ze=!1),mt<Ne.min&&(mt=Ne.min,ut=!1),pt>Ne.max&&(pt=Ne.max,nt=!1),rt=Oe.p2c(rt),mt=Ne.p2c(mt),ot=Oe.p2c(ot),pt=Ne.p2c(pt),be&&(We.fillStyle=be(mt,pt),We.fillRect(rt,pt,ot-rt,mt-pt)),st>0&&(ke||Ze||nt||ut)&&(We.beginPath(),We.moveTo(rt,mt),ke?We.lineTo(rt,pt):We.moveTo(rt,pt),nt?We.lineTo(ot,pt):We.moveTo(ot,pt),Ze?We.lineTo(ot,mt):We.moveTo(ot,mt),ut?We.lineTo(rt,mt):We.moveTo(rt,mt),We.stroke()))}function ye(de){function ge(Me,be,Oe,Ne,We,qe){for(var st=Me.points,rt=Me.pointsize,ot=0;ot<st.length;ot+=rt)st[ot]!=null&&ue(st[ot],st[ot+1],st[ot+2],be,Oe,Ne,We,qe,r,de.bars.horizontal,de.bars.lineWidth)}r.save(),r.translate(x.left,x.top),r.lineWidth=de.bars.lineWidth,r.strokeStyle=de.color;var pe;switch(de.bars.align){case"left":pe=0;break;case"right":pe=-de.bars.barWidth;break;default:pe=-de.bars.barWidth/2}var De=de.bars.fill?function(Me,be){return fe(de.bars,de.color,Me,be)}:null;ge(de.datapoints,pe,pe+de.bars.barWidth,De,de.xaxis,de.yaxis),r.restore()}function fe(de,ge,pe,De){var Me=de.fill;if(!Me)return null;if(de.fillColor)return Ye(de.fillColor,pe,De,ge);var be=ne.color.parse(ge);return be.a=typeof Me=="number"?Me:.4,be.normalize(),be.toString()}function Ee(){if(c.legend.container!=null?ne.find(c.legend.container).html(""):s.find(".legend").remove(),!!c.legend.show){for(var de=[],ge=[],pe=!1,De=c.legend.labelFormatter,Me,be,Oe=0;Oe<i.length;++Oe)Me=i[Oe],Me.label&&(be=De?De(Me.label,Me):Me.label,be&&ge.push({label:be,color:Me.color}));if(c.legend.sorted)if(ne.isFunction(c.legend.sorted))ge.sort(c.legend.sorted);else if(c.legend.sorted=="reverse")ge.reverse();else{var Ne=c.legend.sorted!="descending";ge.sort(function(Ze,nt){return Ze.label==nt.label?0:Ze.label<nt.label!=Ne?1:-1})}for(var Oe=0;Oe<ge.length;++Oe){var We=ge[Oe];Oe%c.legend.noColumns==0&&(pe&&de.push("</tr>"),de.push("<tr>"),pe=!0),de.push('<td class="legendColorBox"><div style="border:1px solid '+c.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+We.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+We.label+"</td>")}if(pe&&de.push("</tr>"),de.length!=0){var qe='<table style="font-size:smaller;color:'+c.grid.color+'">'+de.join("")+"</table>";if(c.legend.container!=null)ne(c.legend.container).html(qe);else{var st="",rt=c.legend.position,ot=c.legend.margin;ot[0]==null&&(ot=[ot,ot]),rt.charAt(0)=="n"?st+="top:"+(ot[1]+x.top)+"px;":rt.charAt(0)=="s"&&(st+="bottom:"+(ot[1]+x.bottom)+"px;"),rt.charAt(1)=="e"?st+="right:"+(ot[0]+x.right)+"px;":rt.charAt(1)=="w"&&(st+="left:"+(ot[0]+x.left)+"px;");var mt=ne('<div class="legend">'+qe.replace('style="','style="position:absolute;'+st+";")+"</div>").appendTo(s);if(c.legend.backgroundOpacity!=0){var pt=c.legend.backgroundColor;pt==null&&(pt=c.grid.backgroundColor,pt&&typeof pt=="string"?pt=ne.color.parse(pt):pt=ne.color.extract(mt,"background-color"),pt.a=1,pt=pt.toString());var ke=mt.children();ne('<div style="position:absolute;width:'+ke.width()+"px;height:"+ke.height()+"px;"+st+"background-color:"+pt+';"> </div>').prependTo(mt).css("opacity",c.legend.backgroundOpacity)}}}}}var Ae=[],Ge=null;function Fe(de,ge,pe){var De=c.grid.mouseActiveRadius,Me=De*De+1,be=null,Oe=!1,Ne,We,qe;for(Ne=i.length-1;Ne>=0;--Ne)if(pe(i[Ne])){var st=i[Ne],rt=st.xaxis,ot=st.yaxis,mt=st.datapoints.points,pt=rt.c2p(de),ke=ot.c2p(ge),Ze=De/rt.scale,nt=De/ot.scale;if(qe=st.datapoints.pointsize,rt.options.inverseTransform&&(Ze=Number.MAX_VALUE),ot.options.inverseTransform&&(nt=Number.MAX_VALUE),st.lines.show||st.points.show)for(We=0;We<mt.length;We+=qe){var ut=mt[We],gt=mt[We+1];if(ut!=null&&!(ut-pt>Ze||ut-pt<-Ze||gt-ke>nt||gt-ke<-nt)){var ht=Math.abs(rt.p2c(ut)-de),tt=Math.abs(ot.p2c(gt)-ge),Ot=ht*ht+tt*tt;Ot<Me&&(Me=Ot,be=[Ne,We/qe])}}if(st.bars.show&&!be){var jt,wt;switch(st.bars.align){case"left":jt=0;break;case"right":jt=-st.bars.barWidth;break;default:jt=-st.bars.barWidth/2}for(wt=jt+st.bars.barWidth,We=0;We<mt.length;We+=qe){var ut=mt[We],gt=mt[We+1],Ht=mt[We+2];ut!=null&&(i[Ne].bars.horizontal?pt<=Math.max(Ht,ut)&&pt>=Math.min(Ht,ut)&&ke>=gt+jt&&ke<=gt+wt:pt>=ut+jt&&pt<=ut+wt&&ke>=Math.min(Ht,gt)&&ke<=Math.max(Ht,gt))&&(be=[Ne,We/qe])}}}return be?(Ne=be[0],We=be[1],qe=i[Ne].datapoints.pointsize,{datapoint:i[Ne].datapoints.points.slice(We*qe,(We+1)*qe),dataIndex:We,series:i[Ne],seriesIndex:Ne}):null}function Pe(de){c.grid.hoverable&&Ue("plothover",de,function(ge){return ge.hoverable!=!1})}function Ve(de){c.grid.hoverable&&Ue("plothover",de,function(ge){return!1})}function me(de){D.isSelecting||Ue("plotclick",de,function(ge){return ge.clickable!=!1})}function Se(de){if(de.cancelable){if(!u.is(de.target)&&u.has(de.target).length===0){Ue("plotleave",de,function(ge){});return}Pe(Qe(de)),de.preventDefault()}}function Qe(de){if(!de||!de.originalEvent||de.pageX&&de.pageY)return de;var ge=de.originalEvent;if(ge.changedTouches.length===0)return de;var pe=ge.changedTouches[0];return de.pageX=pe.pageX,de.pageY=pe.pageY,de}function Ue(de,ge,pe){var De=u.offset(),Me=ge.pageX-De.left-x.left,be=ge.pageY-De.top-x.top,Oe=U({left:Me,top:be});Oe.pageX=ge.pageX,Oe.pageY=ge.pageY,Oe.ctrlKey=ge.ctrlKey,Oe.metaKey=ge.metaKey;var Ne=Fe(Me,be,pe);if(Ne&&(Ne.pageX=parseInt(Ne.series.xaxis.p2c(Ne.datapoint[0])+De.left+x.left,10),Ne.pageY=parseInt(Ne.series.yaxis.p2c(Ne.datapoint[1])+De.top+x.top,10)),c.grid.autoHighlight){for(var We=0;We<Ae.length;++We){var qe=Ae[We];qe.auto==de&&!(Ne&&qe.series==Ne.series&&qe.point[0]==Ne.datapoint[0]&&qe.point[1]==Ne.datapoint[1])&&Le(qe.series,qe.point)}Ne&&Ke(Ne.series,Ne.datapoint,de)}s.trigger(de,[Oe,Ne])}function Ie(){var de=c.interaction.redrawOverlayInterval;if(de==-1){Re();return}Ge||(Ge=setTimeout(Re,de))}function Re(){Ge=null,v.save(),h.clear(),v.translate(x.left,x.top);var de,ge;for(de=0;de<Ae.length;++de)ge=Ae[de],ge.series.bars.show?$e(ge.series,ge.point):Be(ge.series,ge.point);v.restore(),f(b.drawOverlay,[v])}function Ke(de,ge,pe){if(typeof de=="number"&&(de=i[de]),typeof ge=="number"){var De=de.datapoints.pointsize;ge=de.datapoints.points.slice(De*ge,De*(ge+1))}var Me=ze(de,ge);Me==-1?(Ae.push({series:de,point:ge,auto:pe}),Ie()):pe||(Ae[Me].auto=!1)}function Le(de,ge){if(de==null&&ge==null){Ae=[],Ie();return}if(typeof de=="number"&&(de=i[de]),typeof ge=="number"){var pe=de.datapoints.pointsize;ge=de.datapoints.points.slice(pe*ge,pe*(ge+1))}var De=ze(de,ge);De!=-1&&(Ae.splice(De,1),Ie())}function ze(de,ge){for(var pe=0;pe<Ae.length;++pe){var De=Ae[pe];if(De.series==de&&De.point[0]==ge[0]&&De.point[1]==ge[1])return pe}return-1}function Be(de,ge){var pe=ge[0],De=ge[1],Me=de.xaxis,be=de.yaxis,Oe=typeof de.highlightColor=="string"?de.highlightColor:ne.color.parse(de.color).scale("a",.5).toString();if(!(pe<Me.min||pe>Me.max||De<be.min||De>be.max)){var Ne=de.points.radius+de.points.lineWidth/2;v.lineWidth=Ne,v.strokeStyle=Oe;var We=1.5*Ne;pe=Me.p2c(pe),De=be.p2c(De),v.beginPath(),de.points.symbol=="circle"?v.arc(pe,De,We,0,2*Math.PI,!1):de.points.symbol(v,pe,De,We,!1),v.closePath(),v.stroke()}}function $e(de,ge){var pe=typeof de.highlightColor=="string"?de.highlightColor:ne.color.parse(de.color).scale("a",.5).toString(),De=pe,Me;switch(de.bars.align){case"left":Me=0;break;case"right":Me=-de.bars.barWidth;break;default:Me=-de.bars.barWidth/2}v.lineWidth=de.bars.lineWidth,v.strokeStyle=pe,ue(ge[0],ge[1],ge[2]||0,Me,Me+de.bars.barWidth,function(){return De},de.xaxis,de.yaxis,v,de.bars.horizontal,de.bars.lineWidth)}function Ye(de,ge,pe,De){if(typeof de=="string")return de;for(var Me=r.createLinearGradient(0,pe,0,ge),be=0,Oe=de.colors.length;be<Oe;++be){var Ne=de.colors[be];if(typeof Ne!="string"){var We=ne.color.parse(De);Ne.brightness!=null&&(We=We.scale("rgb",Ne.brightness)),Ne.opacity!=null&&(We.a*=Ne.opacity),Ne=We.toString()}Me.addColorStop(be/(Oe-1),Ne)}return Me}}ne.plot=function(s,d,o){var l=new n(ne(s),d,o,ne.plot.plugins);return l},ne.plot.version="0.8.3",ne.plot.plugins=[],ne.fn.plot=function(s,d){return this.each(function(){ne.plot(this,s,d)})};function a(s,d){return d*Math.floor(s/d)}}(jQuery)},54092:(ne,j,e)=>{"use strict";e.d(j,{L9:()=>d,SM:()=>a,YP:()=>s,u6:()=>n});var n=(o=>(o.link="link",o.component="component",o.function="function",o))(n||{}),a=(o=>(o.AlertInstanceAction="grafana/alerting/instance/action",o.AlertingHomePage="grafana/alerting/home",o.AlertingAlertingRuleAction="grafana/alerting/alertingrule/action",o.AlertingRecordingRuleAction="grafana/alerting/recordingrule/action",o.AlertingRuleQueryEditor="grafana/alerting/alertingrule/queryeditor",o.CommandPalette="grafana/commandpalette/action",o.DashboardPanelMenu="grafana/dashboard/panel/menu",o.DashboardEmpty="grafana/dashboard/empty",o.DataSourceConfig="grafana/datasources/config",o.DataSourceConfigActions="grafana/datasources/config/actions",o.DataSourceConfigErrorStatus="grafana/datasources/config/error-status",o.DataSourceConfigStatus="grafana/datasources/config/status",o.ExploreToolbarAction="grafana/explore/toolbar/action",o.UserProfileTab="grafana/user/profile/tab",o.TraceViewDetails="grafana/traceview/details",o.TraceViewHeaderActions="grafana/traceview/header/actions",o.QueryEditorRowAdaptiveTelemetryV1="grafana/query-editor-row/adaptivetelemetry/v1",o.TraceViewResourceAttributes="grafana/traceview/resource-attributes",o.LogsViewResourceAttributes="grafana/logsview/resource-attributes",o.AppChrome="grafana/app/chrome/v1",o.ExtensionSidebar="grafana/extension-sidebar/v0-alpha",o))(a||{}),s=(o=>(o.NavLandingPage="grafana/dynamic/nav-landing-page/nav-id-.*/v1",o))(s||{}),d=(o=>(o.CentralAlertHistorySceneV1="grafana/central-alert-history-scene/v1",o.AddToDashboardFormV1="grafana/add-to-dashboard-form/v1",o))(d||{})},54115:(ne,j,e)=>{"use strict";e.d(j,{H1:()=>x,ws:()=>g});var n=e(65474),a=e(66847),s=e(16126),d=e(81160),o=e(69862),l=e(33160),i=e(38619),c=e(68143),p=e(43173),h=e(33184),u=e(73427),r=e(85618),v=e(75735);class g{constructor(b,D=!0){this.parseListOptionsSelector=m;const f=D?`namespaces/${(0,r.Ge)()}/`:"";this.gvr=b,this.url=`/apis/${b.group}/${b.version}/${f}${b.resource}`}async get(b){return(0,c.AI)().get(`${this.url}/${b}`)}watch(b){const D={watch:!0,labelSelector:this.parseListOptionsSelector(b?.labelSelector),fieldSelector:this.parseListOptionsSelector(b?.fieldSelector)};if(b?.name&&(D.fieldSelector=`metadata.name=${b.name}`),this.gvr.group==="provisioning.grafana.app"){let C="";return D.fieldSelector?.startsWith("metadata.name=")&&(C=D.fieldSelector.substring(13)),(0,h.oF)().getStream({scope:i.qD.Watch,namespace:this.gvr.group,path:`${this.gvr.version}/${this.gvr.resource}${C}/${u.TP.user.uid}`}).pipe((0,s.p)(P=>(0,i.Z7)(P)),(0,d.T)(P=>P.message))}const f=new TextDecoder;return(0,c.AI)().chunked({url:this.url,params:D,method:"GET"}).pipe((0,s.p)(C=>C.ok&&C.data instanceof Uint8Array),(0,d.T)(C=>f.decode(C.data).split(`
`)),(0,o.Z)(C=>(0,n.H)(C)),(0,s.p)(C=>C.length>0),(0,d.T)(C=>{try{return JSON.parse(C)}catch(P){return console.warn("Invalid JSON in watch stream:",P,C),null}}),(0,s.p)(C=>C!==null),(0,l.L)({count:3,delay:1e3}),(0,a.W)(C=>{throw console.error("Watch stream error:",C),C}))}async subresource(b,D,f){return(0,c.AI)().get(`${this.url}/${b}/${D}`,f)}async list(b){const D=b||{};return D.labelSelector=this.parseListOptionsSelector(D?.labelSelector),D.fieldSelector=this.parseListOptionsSelector(D?.fieldSelector),(0,c.AI)().get(this.url,b)}async create(b,D){if(!b.metadata.name&&!b.metadata.generateName){const f=u.TP.user.login,C=f?f.replace(/[^a-zA-Z]/g,"").slice(0,2):"";b.metadata.generateName=C||"g"}return E(b.metadata),(0,c.AI)().post(this.url,b,{params:D})}async update(b,D){E(b.metadata);const f=`${this.url}/${b.metadata.name}`;return(0,c.AI)().put(f,b,{params:D})}async delete(b,D){return(0,c.AI)().delete(`${this.url}/${b}`,void 0,{showSuccessAlert:D})}}function E(y){y.annotations||(y.annotations={}),y.annotations[v.Pd]=p.$.buildInfo.versionString}class x{async get(b){if(this.apiVersions)return this.apiVersions[b];const D=await(0,c.AI)().get("/apis"),f={};return D.groups.forEach(C=>{if(C.name.includes("datasource.grafana.app")){const P=C.name.split(".")[0];f[P]=C.preferredVersion.version,P.endsWith("-datasource")||(P.includes("-")?f[`${P}-datasource`]=C.preferredVersion.version:f[`grafana-${P}-datasource`]=C.preferredVersion.version)}}),this.apiVersions=f,f[b]}}const m=y=>Array.isArray(y)?y.map(b=>{const D=String(b.key),f=b.operator;switch(f){case"=":case"!=":return`${D}${f}${b.value}`;case"in":case"notin":return`${D} ${f} (${b.value.join(",")})`;case"":case"!":return`${f}${D}`;default:return null}}).filter(Boolean).join(","):y},54203:(ne,j,e)=>{"use strict";e.d(j,{p:()=>n});function n(a){return"mergeGrid"in a}},54314:(ne,j,e)=>{"use strict";e.d(j,{U:()=>o});var n=e(74848),a=e(22803),s=e(96540),d=e(63142);const o=(0,s.forwardRef)(({children:i,className:c,hideBorder:p=!1},h)=>{const u=(0,d.of)(l);return(0,n.jsx)("div",{className:(0,a.cx)(u.tabsWrapper,p&&u.noBorder,c),ref:h,children:(0,n.jsx)("div",{className:u.tabs,role:"tablist",children:i})})}),l=i=>({tabsWrapper:(0,a.css)({borderBottom:`1px solid ${i.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,a.css)({borderBottom:0}),tabs:(0,a.css)({position:"relative",display:"flex",alignItems:"center"})});o.displayName="TabsBar"},54513:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>k});var n=e(96540),a=e(28105),s=e(2543),d=e(39741),o=e(62467),l=e(66847),i=e(1005),c=e(81160),p=e(24726),h=e(41119),u=e(47520),r=e(17548),v=e(22592),g=e(77154),E=e(92745),x=e(78282),m=e(36580),y=e(97534),b=e(83873),D=e(44022),f=e(77526),C=e(39050),P=e(42970),T=e(4651);const M={from:21600,to:0},I=(te,q)=>{const se=B(te,q);if(!se)return M;const{from:re,to:Y}=W(se,q);return!re.length&&!Y.length?M:{from:Math.max(...re),to:Math.min(...Y)}},B=(te,q)=>{switch(te.type){case T.Tz.classic:return U(te);case T.Tz.math:case T.Tz.sql:return V(te,q);case T.Tz.resample:case T.Tz.reduce:case T.Tz.threshold:return z(te)}},U=te=>te.conditions?.map(q=>q.query.params[0]),W=(te,q)=>{const se=[],re=[M.to];for(const Y of te){const X=q.find(J=>J.refId===Y);!X||!X.relativeTimeRange||(se.push(X.relativeTimeRange.from),re.push(X.relativeTimeRange.to))}return{from:se,to:re}},V=(te,q)=>q.filter(se=>se.queryType==="query"&&te.expression?.includes(se.refId)).map(se=>se.refId),z=te=>te.expression?[te.expression]:void 0;class R{constructor(q=(0,b.AI)(),se=(0,x.l)()){this.backendSrv=q,this.dataSourceSrv=se,this.subject=new d.m(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(q,se){const re=await this.prepareQueries(q);if(re.length===0)return;const X=re.some(J=>J.refId===se)?se:"";this.subscription=O(this.backendSrv,re,X).subscribe({next:J=>{const _=K(J,(le,L)=>{const ie=this.lastResult[le],oe=(0,h.N$)(L,ie);return(0,C.B)(oe,ie)}),[ee,ae]=(0,P.wz)(q);ae.forEach(le=>{_[le.source]=w(le)}),this.lastResult=_,this.subject.next(this.lastResult)},error:J=>{this.lastResult=H(this.lastResult,J),this.subject.next(this.lastResult)}})}async prepareQueries(q){const se=[];for(const J of q){const _=J.model.refId;if((0,D.f)(J.model))continue;const ee=await this.dataSourceSrv.get(J.datasourceUid);ee instanceof m.iy&&ee.filterQuery&&!ee.filterQuery(J.model)&&se.push(_)}const[re]=(0,P.wz)(q),Y=Object.keys(re.nodes);return se.forEach(J=>{const _=(0,P.p_)(J,re);se.push(..._)}),q.filter(J=>!Y.includes(J.refId)).forEach(J=>{se.push(J.refId)}),(0,s.reject)(q,J=>se.includes(J.refId))}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let q=!1;const se=K(this.lastResult,(re,Y)=>(Y.state===a.Gu.Loading&&(q=!0),{...Y,state:a.Gu.Done}));q&&this.subject.next(se)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const O=(te,q,se)=>{const re=N(q,a.Gu.Loading),Y={data:{data:q,condition:se},url:"/api/v1/eval",method:"POST",requestId:(0,p.A)()};return(0,u.k)({whileLoading:re,source:te.fetch(Y).pipe(G(re),(0,l.W)(X=>(0,o.of)(H(re,X))),(0,f.N)(te,Y.requestId),(0,i.u)())})},N=(te,q)=>te.reduce((se,re)=>(se[re.refId]={state:q,series:[],timeRange:F(re,te)},se),{}),F=(te,q)=>{if((0,D.f)(te.model)){const se=I(te.model,q);return r.relativeToTimeRange(se)}return te.relativeTimeRange?r.relativeToTimeRange(te.relativeTimeRange):(console.warn(`Query with refId: ${te.refId} did not have any relative time range, using default.`),(0,v.E2)())},G=te=>(0,c.T)(q=>{const{data:se}=q,re={};for(const[Y,X]of Object.entries(se.results)){const{error:J,status:_,frames:ee=[]}=X,ae=J?[{message:J,refId:Y,status:_}]:[];re[Y]={errors:ae,timeRange:te[Y].timeRange,state:a.Gu.Done,series:ee.map(g.or)}}return re}),H=(te,q)=>{const se=(0,y.u)(q);return K(te,(re,Y)=>Y.state===a.Gu.Error?Y:{...Y,state:a.Gu.Error,error:se})},K=(te,q)=>{const se={};for(const[re,Y]of Object.entries(te))se[re]=q(re,Y);return se},w=te=>({series:[],state:a.Gu.Error,errors:[{message:Q(te)}],timeRange:(0,v.E2)()});function Q(te){return te.source===te.target?(0,E.t)("alerting.dag.self-reference","You can't link an expression to itself"):(0,E.t)("alerting.dag.missing-reference",'Expression "{{source}}" failed to run because "{{target}}" is missing or also failed.',{source:te.source,target:te.target})}function k(){const[te,q]=(0,n.useState)({}),se=(0,n.useRef)(new R);(0,n.useEffect)(()=>{const _=se.current;return _.get().subscribe(ee=>{q(ee)}),()=>{_.destroy()}},[]);const re=(0,n.useCallback)(()=>{q({})},[]),Y=(0,n.useCallback)(()=>{se.current.cancel()},[]),X=(0,n.useCallback)((_,ee)=>{se.current.run(_,ee)},[]),J=(0,n.useMemo)(()=>Object.values(te).some(_=>_.state===a.Gu.Loading),[te]);return{queryPreviewData:te,runQueries:X,cancelQueries:Y,isPreviewLoading:J,clearPreviewData:re}}},54552:(ne,j,e)=>{"use strict";e.d(j,{K:()=>d,k:()=>o});var n=e(74848),a=e(96540);const s=a.createContext(void 0),d=({children:l,rule:i,identifier:c})=>{const p={rule:i,identifier:c};return(0,n.jsx)(s.Provider,{value:p,children:l})},o=()=>{const l=a.useContext(s);if(l===void 0)throw new Error("useAlertRule must be used within a AlertRuleContext");return l}},54687:(ne,j,e)=>{"use strict";e.d(j,{AI:()=>o,Ff:()=>r});var n=e(65307),a=e(95256),s=e(13660),d=e(37256);const o=(0,n.pU)(),l=v=>new RegExp(`${a.fu}/(.*)/pending`).test(v.type),i=v=>new RegExp(`${a.fu}/(.*)/fulfilled`).test(v.type),c=v=>new RegExp(`${a.fu}/(.*)/rejected`).test(v.type),p=v=>{const g=v.lastIndexOf("/");return v.substring(0,g)},h={items:o.getInitialState(),requests:{},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},r=(0,n.Z0)({name:"plugins",initialState:h,reducers:{},extraReducers:v=>v.addCase(d.aU,(g,E)=>{o.upsertMany(g.items,E.payload)}).addCase(d.LR.fulfilled,(g,E)=>{o.upsertMany(g.items,E.payload)}).addCase(d.t5.fulfilled,(g,E)=>{o.updateOne(g.items,E.payload)}).addCase(d.ai.fulfilled,(g,E)=>{o.updateOne(g.items,E.payload)}).addCase(d.JC.fulfilled,(g,E)=>{o.updateOne(g.items,E.payload)}).addCase(d.NJ,(g,E)=>{g.panels[E.payload.meta.id]=E.payload}).addCase(d.h9.pending,(g,E)=>{g.isLoadingPluginDashboards=!0,g.dashboards=[]}).addCase(d.h9.fulfilled,(g,E)=>{g.isLoadingPluginDashboards=!1,g.dashboards=E.payload}).addMatcher(l,(g,E)=>{g.requests[p(E.type)]={status:s.IZ.Pending}}).addMatcher(i,(g,E)=>{g.requests[p(E.type)]={status:s.IZ.Fulfilled}}).addMatcher(c,(g,E)=>{g.requests[p(E.type)]={status:s.IZ.Rejected,error:E.payload}})}).reducer},54735:(ne,j,e)=>{"use strict";e.d(j,{KU:()=>i});var n=e(74848),a=e(22803),s=e(49185),d=e(63142),o=e(35484),l=e(92807);const i=({width:h,height:u,legend:r,children:v})=>{const g=(0,d.$j)(),E=(0,d.of)(c),x={display:"flex",width:`${h}px`,height:`${u}px`},[m,y]=(0,s.A)();if(!r)return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:x,className:E.viz,children:v(h,u)})});let{placement:b,maxHeight:D="35%",maxWidth:f="60%"}=r.props;document.body.clientWidth<g.breakpoints.values.lg&&(b="bottom");let C=null;const P={};switch(b){case"bottom":x.flexDirection="column",P.maxHeight=D,y.height&&(C={width:h,height:u-y.height});break;case"right":x.flexDirection="row",P.maxWidth=f,y.width&&(C={width:h-y.width,height:u}),r.props.width&&(P.width=r.props.width,C={width:h-r.props.width,height:u});break}return C?.width===0&&(C.width=h),C?.height===0&&(C.height=u),(0,n.jsxs)("div",{style:x,children:[(0,n.jsx)("div",{className:E.viz,children:C&&v(C.width,C.height)}),(0,n.jsx)("div",{style:P,ref:m,children:(0,n.jsx)(l.P,{children:r})})]})},c=h=>({viz:(0,a.css)({flexGrow:2,borderRadius:h.shape.radius.default,"&:focus-visible":(0,o.getFocusStyles)(h)})}),p=({children:h})=>(0,n.jsx)(n.Fragment,{children:h});i.Legend=p},54742:(ne,j,e)=>{"use strict";e.d(j,{B:()=>a});var n=e(42954);const a=new n.O},54767:(ne,j,e)=>{"use strict";e.d(j,{Bp:()=>c,Sr:()=>l,tJ:()=>i,xb:()=>p});var n=e(43173),a=e(27489),s=e(25992),d=e(44248);let o;function l(){if(!o){const h={watchStateKey:"body"};o=new d.oY.SceneRenderProfiler(h)}return o}function i(h,u){return r=>{const v={duration:r.duration,networkDuration:r.networkDuration,startTs:r.startTs,endTs:r.endTs,timeSinceBoot:performance.measure("time_since_boot","frontend_boot_js_done_time_seconds").duration};(0,a.rR)("dashboard_interaction",{interactionType:r.origin,uid:h,...v}),(0,s.l$)("dashboard_interaction",v,{interactionType:r.origin,dashboard:h,title:u})}}function c(h,u){const r=l();return r.setMetadata({dashboardUID:h,dashboardTitle:u}),r}function p(h,u){n.$.dashboardPerformanceMetrics.findIndex(v=>v==="*"||v===u)!==-1&&l().attachPanelProfiling(h)}},54825:(ne,j,e)=>{"use strict";e.d(j,{K:()=>o});var n=e(76637),a=e(79118),s=e(11576),d=e(59427);function o(i,c,p){return l((0,d.UI)(i,c.field),c,p)}function l(i,c,p){if(!i){const r=p.visualization.getColorByName(c.fixed??"grey");return{isAssumed:!!c.field?.length||!c.fixed,fixed:r,value:()=>r,get:v=>r}}const h=(0,n.Qi)(i);if(h.isByValue||i.config.mappings?.length){const r=(0,a.xg)(i,!0);r!==i.config&&(i={...i,config:r},i.state=void 0);const v=(0,s.J)({field:i,theme:p}),g=E=>v(E).color??"#ccc";return{field:i,get:E=>g(i.values[E]),value:()=>g((0,d.sB)(i))}}const u=h.getCalculator(i,p)(0,0);return{fixed:u,value:()=>u,get:r=>u,field:i}}},55072:(ne,j,e)=>{"use strict";e.d(j,{N:()=>g});var n=e(74848),a=e(22803),s=e(51898),d=e(92745),o=e(11576),l=e(95004),i=e(55386),c=e(63142);const p=({timeZone:x,name:m,stats:y})=>{const b=(0,c.$j)(),D=(0,c.of)(u);return!y||!y.length?null:(0,n.jsxs)("div",{className:D.wrapper,children:[(0,n.jsx)("div",{className:D.heading,children:m}),(0,n.jsx)("table",{className:"filter-table width-30",children:(0,n.jsx)("tbody",{children:y.map((f,C)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:f.displayName}),(0,n.jsx)("td",{className:D.cell,children:h(f,x,b)})]},`${f.displayName}-${C}`))})})]})};function h(x,m,y){const b=(0,o.J)({field:{type:l.PU.number,config:x},theme:y,timeZone:m});return(0,i.cN)(b(x.value))}const u=x=>({heading:(0,a.css)({fontSize:x.typography.body.fontSize,marginBottom:x.spacing(1)}),wrapper:(0,a.css)({paddingBottom:x.spacing(2)}),cell:(0,a.css)({textAlign:"right"})}),r=({name:x,traceIds:m})=>{const y=(0,c.of)(v);return m.length===0?null:(0,n.jsxs)("div",{className:y.wrapper,children:[(0,n.jsx)("div",{className:y.heading,children:x}),(0,n.jsx)("table",{className:"filter-table width-30",children:(0,n.jsx)("tbody",{children:m.map((b,D)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:b})},`${b}-${D}`))})})]})},v=x=>({heading:(0,a.css)({fontSize:x.typography.body.fontSize,marginBottom:x.spacing(1)}),wrapper:(0,a.css)({paddingBottom:x.spacing(2)}),cell:(0,a.css)({textAlign:"right"})}),g=({data:x,timeZone:m})=>{if(!x.request)return null;let y=[];const b=x.request.endTime?x.request.endTime-x.request.startTime:-1,D=x.timings?.dataProcessingTime||-1;let f=0;for(const I of x.series)f+=I.length;b>0&&y.push({displayName:(0,d.t)("dashboard.inspect-stats.request-time","Total request time"),value:b,unit:"ms"}),D>0&&y.push({displayName:(0,d.t)("dashboard.inspect-stats.processing-time","Data processing time"),value:D,unit:"ms"}),y.push({displayName:(0,d.t)("dashboard.inspect-stats.queries","Number of queries"),value:x.request.targets?.length??0}),y.push({displayName:(0,d.t)("dashboard.inspect-stats.rows","Total number rows"),value:f});let C=[];for(const I of x.series)I.meta&&I.meta.stats&&(C=C.concat(I.meta.stats));const P=(0,d.t)("dashboard.inspect-stats.table-title","Stats"),T=(0,d.t)("dashboard.inspect-stats.data-title","Data source stats"),M=(0,d.t)("dashboard.inspect-stats.data-traceids","Trace IDs");return(0,n.jsxs)("div",{"aria-label":s.Tp.components.PanelInspector.Stats.content,className:E,children:[(0,n.jsx)(p,{timeZone:m,name:P,stats:y}),(0,n.jsx)(p,{timeZone:m,name:T,stats:C}),(0,n.jsx)(r,{name:M,traceIds:x.traceIds??[]})]})},E=(0,a.css)({height:"100%",overflowY:"scroll"})},55096:(ne,j,e)=>{"use strict";e.d(j,{g:()=>d});var n=e(96540),a=e(78282),s=e(36580);function d(o){return{allDataSourcesAvailable:(0,n.useMemo)(()=>o.filter(i=>!(0,s.s9)(i.datasourceUid)).every(i=>!!(0,a.l)().getInstanceSettings(i.datasourceUid)),[o])}}},55133:(ne,j,e)=>{"use strict";e.d(j,{m:()=>re,s:()=>X});var n=e(96540),a=e(27963),s=e(64762),d=e(52763),o=e(20718),l=e(2513);const i={parse:J=>{if(!J.left&&!J.right)return{to:{left:{datasource:null,queries:[],range:{from:l.kn.from,to:l.kn.to}},schemaVersion:0},error:!1};let _,ee,ae,le;return typeof J.left=="string"&&([_,ae]=u(J.left)),typeof J.right=="string"?[ee,le]=u(J.right):J.right&&(ee=h,le=!0),_||(_=h),{to:{schemaVersion:0,left:_,...ee&&{right:ee}},error:!!ae||!!le}}},c=(J,..._)=>_.some(ee=>J.hasOwnProperty(ee));var p=(J=>(J[J.RangeFrom=0]="RangeFrom",J[J.RangeTo=1]="RangeTo",J[J.Datasource=2]="Datasource",J[J.SegmentsStart=3]="SegmentsStart",J))(p||{});const h={datasource:null,queries:[],range:l.kn};function u(J){let _;try{_=JSON.parse(J)}catch{return[h,!0]}if(!Array.isArray(_))return[{queries:[],range:l.kn,..._},!1];if(_.length<=3)return[h,!0];const ee={from:_[0],to:_[1]},ae=_[2],le=_.slice(3),L=le.filter(oe=>!c(oe,"ui","mode","__panelsState")),ie=le.find(oe=>c(oe,"__panelsState"))?.__panelsState;return[{datasource:ae,queries:L,range:ee,panelsState:ie},!1]}var r=e(62635),v=e(8692);const g={parse:J=>{if(!J||!J.panes||typeof J.panes!="string")return{to:{schemaVersion:1,panes:{[(0,r.o$)()]:E}},error:!1};let _;try{_=JSON.parse(J.panes)}catch{}if(_==null||typeof _!="object")return{to:{schemaVersion:1,panes:{[(0,r.o$)()]:E}},error:!0};const ee=Object.entries(_).map(([ae,le])=>[ae,x(le)]).reduce((ae,[le,L])=>{let ie=le;return(ie.length!==3||/^\d+$/.test(ie)||ie.split("").some(oe=>r.WP.indexOf(oe)===-1))&&(ie=(0,r.o$)()),{...ae,[ie]:L}},{});return Object.keys(ee).length||(ee[(0,r.o$)()]=E),{to:{schemaVersion:1,panes:ee},error:!1}},migrate:J=>({schemaVersion:1,panes:{[(0,r.o$)()]:J.left,...J.right&&{[(0,r.o$)()]:J.right}}})},E={datasource:null,queries:[],range:l.kn};function x(J){return!J||typeof J!="object"?E:{...E,...(0,v.C)("queries",J)&&Array.isArray(J.queries)&&{queries:J.queries},...(0,v.C)("datasource",J)&&typeof J.datasource=="string"&&{datasource:J.datasource},...(0,v.C)("panelsState",J)&&!!J.panelsState&&typeof J.panelsState=="object"&&{panelsState:J.panelsState},...(0,v.C)("range",J)&&!!J.range&&typeof J.range=="object"&&(0,v.C)("from",J.range)&&(0,v.C)("to",J.range)&&typeof J.range.from=="string"&&typeof J.range.to=="string"&&{range:{from:J.range.from,to:J.range.to}},...(0,v.C)("compact",J)&&typeof J.compact=="boolean"&&{compact:J.compact}}}const m=J=>b(J),y=[i,g],b=J=>{const _=D(J),[ee,...ae]=y.slice(_),{error:le,to:L}=ee.parse(J);return[ae.reduce((oe,ue)=>ue.migrate?ue.migrate(oe):oe,L),le]};function D(J){return!J||!("schemaVersion"in J)||!J.schemaVersion?0:typeof J.schemaVersion=="number"?J.schemaVersion:typeof J.schemaVersion=="string"?Number.parseInt(J.schemaVersion,10):0}var f=e(2543),C=e(19379),P=e(707),T=e(51845),M=e(35231),I=e(19050),B=e(94543),U=e(83953),W=e(80144),V=e(28105),z=e(1906),R=e(28998),O=e(18615);const N=(J,_)=>{const ee=!(0,f.isEqual)(_?.datasource,J?.datasource),ae=!(0,f.isEqual)(_?.queries,J?.queries),le=!(0,f.isEqual)(_?.range||l.kn,J?.range||l.kn),L=!(0,f.isEqual)(_?.panelsState,J?.panelsState);return{datasource:ee,queries:ae,range:le,panelsState:L}};async function F(J,_,ee){if(J)try{return await(0,R.tR)().get(J)}catch{}const ae=[...new Set(_.map(le=>le.datasource).filter(V.zz).map(le=>typeof le=="string"?le:le.uid))];try{if(ae.length>=1){const le=(await Promise.allSettled(ae.map(L=>(0,R.tR)().get(L)))).filter(v.s);if(le.length>1)return await(0,R.tR)().get(O.uv);if(le.length===1)return await(0,R.tR)().get(ae[0])}}catch{}return(0,R.tR)().get((0,r.HQ)(ee)).catch(()=>(0,R.tR)().get()).catch(()=>{})}function G(J){return{...J.getDefaultQuery?.(z.Jk.Explore),refId:"A",datasource:J.getRef()}}function H(J){return J.name===O.uv}function K(J){return J&&H(J)?_=>!!_.datasource:_=>_.datasource?typeof _.datasource=="string"?_.datasource===J?.uid||_.datasource===J?.name:_.datasource.uid===J?.uid:!0}async function w(J){return(await Promise.allSettled(J.map(ee=>(0,R.tR)().get(ee.datasource).then(ae=>({query:ee,ds:ae}))))).filter(v.s).map(({value:ee})=>ee.query)}function Q(J,_,ee){const ae=Object.values(J.panes);if(ae.length>1){const le=ae.some(({range:L},ie,[{range:oe}])=>!(0,f.isEqual)(L,oe));ee((0,M.qz)({syncedTimes:!le}))}Object.entries(J.panes).forEach(async([le,L],ie)=>{const{datasource:oe,queries:ue,range:ye,panelsState:fe}=L,Ee=_[le];if(Ee!==void 0){const Ae=N(L,re(Ee));Promise.resolve().then(async()=>{Ae.datasource&&oe&&await ee((0,P.wh)({exploreId:le,datasource:oe}))}).then(async()=>{Ae.range&&ee((0,B.JA)({exploreId:le,rawRange:(0,U.Z9)(ye)})),Ae.queries&&ee((0,I.h9)({exploreId:le,queries:(0,W.v)(ue)})),(Ae.queries||Ae.range)&&(await ee((0,I.hS)(le)),ee((0,I.Od)({exploreId:le}))),Ae.panelsState&&fe&&ee((0,T.fx)({exploreId:le,panelsState:fe}))})}else ee((0,T.Gd)({exploreId:le,datasource:oe||"",queries:(0,W.v)(ue),range:(0,U.Z9)(ye),panelsState:fe,compact:!!L.compact,position:ie,eventBridge:new C.o}))}),Object.keys(_).filter(le=>!Object.keys(J.panes).includes(le)).forEach(le=>ee((0,M.J8)(le)))}function k(J,_,ee,ae,le){ae((0,M.Ve)()),Promise.all(Object.entries(J.panes).map(([L,{datasource:ie,queries:oe,range:ue,panelsState:ye,compact:fe}])=>F(ie,oe,ee).then(Ee=>Promise.resolve(Ee?oe.length?(0,W.v)(oe).filter(K(Ee)).map(H(Ee)?f.identity:Ae=>({...Ae,datasource:Ee.getRef()})):(0,R.tR)().get(H(Ee)?void 0:Ee.getRef()).then(Ae=>[G(Ae)]):[]).then(async Ae=>{let Ge=await w(Ae);return!Ge.length&&Ee&&(Ge=[G(H(Ee)?await(0,R.tR)().get():Ee)]),{exploreId:L,compact:fe,range:ue,panelsState:ye,queries:Ge,datasource:Ee}})))).then(async L=>{const ie=await Promise.all(L.map(({exploreId:Ee,range:Ae,panelsState:Ge,queries:Fe,datasource:Pe,compact:Ve})=>ae((0,T.Gd)({exploreId:Ee,datasource:Pe,queries:Fe,range:(0,U.Z9)(Ae),panelsState:Ge,eventBridge:new C.o,compact:!!Ve})).unwrap()));if(ie.length>1){const Ee=ie.some(({state:Ae},Ge,[{state:Fe}])=>!(0,f.isEqual)(Ae.range.raw,Fe.range.raw));ae((0,M.qz)({syncedTimes:!Ee}))}const oe=ie.reduce((Ee,{exploreId:Ae,state:Ge})=>({...Ee,[Ae]:re(Ge)}),{}),ue=le.getSearchObject();let ye={};for(const[Ee,Ae]of Object.entries(ue).filter(([Ge])=>!["schemaVersion","panes","orgId","left","right"].includes(Ge)))ye[Ee]=Ae;const fe=new URLSearchParams({schemaVersion:`${J.schemaVersion}`,panes:JSON.stringify(oe),orgId:`${ee}`,...ye});le.replace({pathname:le.getLocation().pathname,search:fe.toString()}),_.current="done"})}function te(J,_){return J.current=P.wh.pending.type===_.type,[M.J8.type,M.ve.fulfilled.type,I.Od.pending.type,B.eM.type,T.fx.type,P.wh.fulfilled.type,T.$0.type].includes(_.type)&&!J.current}function q(J,_,ee,ae){const le=Object.entries(J.panes).reduce((L,[ie,oe])=>oe?{...L,[ie]:re(oe)}:L,{});if(!(0,f.isEqual)(_.current.panes,JSON.stringify(le))){const L=!!_.current.panes&&Object.values(_.current.panes).filter(Boolean).length===0||ee.current==="pending";_.current={panes:JSON.stringify(le)},ae.partial({panes:_.current.panes},L)}}var se=e(5556);function re(J){return{datasource:J.datasourceInstance?.uid||"",queries:J.queries.map(r.w4),range:(0,se.sQ)(J.range.raw),panelsState:Y(J.panelsState),compact:J.compact}}function Y(J){let _=(0,f.mapValues)(J,ee=>{if((0,f.isObject)(ee)){if(Array.isArray(ee)){const ae=ee.map(le=>(0,f.isObject)(le)?Y(le):le).filter(le=>!(0,f.isEmpty)(le));return ae.length>0?ae:void 0}return Y(ee)}return ee});if(_=(0,f.omitBy)(_,f.isEmpty),!(0,f.isEmpty)(_))return _}function X(J){const{location:_}=(0,a.Il)(),ee=(0,d.wA)(),ae=(0,d.d4)(o.Qb),le=(0,n.useRef)(ae),L=(0,d.d4)(fe=>fe.user.orgId),ie=(0,n.useRef)(J),oe=(0,n.useRef)("notstarted"),ue=(0,n.useRef)(!1),{warning:ye}=(0,s._2)();(0,n.useEffect)(()=>{J.panes||(oe.current="notstarted",ie.current=J)},[J]),(0,n.useEffect)(()=>{const fe=ee((0,d.ch)({predicate:Ee=>te(ue,Ee),effect:async(Ee,{cancelActiveListeners:Ae,delay:Ge,getState:Fe})=>{Ae(),await Ge(200),q(Fe().explore,ie,oe,_)}}));return()=>fe()},[ee,_]),(0,n.useEffect)(()=>{le.current=ae},[ae]),(0,n.useEffect)(()=>{const fe=ie.current?.panes!==J.panes,[Ee,Ae]=m(J);Ae&&ye("Could not parse Explore URL","The requested URL contains invalid parameters, a default Explore state has been loaded."),!fe&&oe.current==="notstarted"&&(oe.current="pending",k(Ee,oe,L,ee,_)),ie.current=J,fe&&oe.current==="done"&&Q(Ee,le.current,ee)},[ee,L,_,J,ye])}},55142:(ne,j,e)=>{"use strict";e.d(j,{n:()=>a});var n=e(27489);function a(s,d,o){(0,n.rR)("dashboards_action_interaction",{event:"dashboards_action_interaction",action:"trigger_action",action_type:s,visualization_type:o,trigger_type:d?"one_click":"button",context:"panel_runtime"})}},55143:(ne,j,e)=>{"use strict";e.d(j,{L:()=>i,b:()=>l});var n=e(86791),a=e(24619),s=e(52161),d=e(5709),o=e(1895);const l={dataSourceName:"grafana",dataSourceUid:"grafana",apiVersion:"legacy"},i=d.H.injectEndpoints({endpoints:c=>({discoverAmFeatures:c.query({queryFn:async({amSourceName:p})=>{try{return{data:await(0,o._y)(p)}}catch(h){return{error:h}}}}),discoverDsFeatures:c.query({queryFn:async p=>{const h=(0,s.Iz)(p);if(!h)return{error:new Error(`Unable to find data source for ${JSON.stringify(p)}`)};if(h===n.l$)return{data:{name:s.hY,uid:s.hY,application:"grafana",rulerConfig:l}};const u=h?(0,s.of)(h):void 0;if(!u)return{error:new Error(`Missing data source configuration for ${p}`)};try{const r=await(0,o.cc)(u.uid),v=r.features.rulerApiEnabled?{dataSourceName:u.name,dataSourceUid:u.uid,apiVersion:r.application===a.N1.Cortex?"legacy":"config"}:void 0;return{data:{name:u.name,uid:u.uid,application:r.application,rulerConfig:v}}}catch(r){return{error:r}}}})})})},55266:(ne,j,e)=>{"use strict";e.d(j,{T:()=>p});var n=e(10378),a=e(90382),s=e(43173),d=e(2924),o=e(83793),l=e(73427),i=e(75735),c=e(45942);const p=({name:h,folderName:u,skipQuery:r})=>{const v=l.TP.user.orgRole===a.X.None,g=s.$.featureToggles.provisioning,{data:E,isLoading:x}=(0,o.F9)(!g||r||v?n.hT:void 0),m=!u||!g||r||v,{data:y,isLoading:b}=(0,d.kH)(m?n.hT:{name:u});if(!g)return{isLoading:!1,isInstanceManaged:!1,isReadOnlyRepo:!1};if(x||b)return{isLoading:!0,isInstanceManaged:!1,isReadOnlyRepo:!1};const D=E?.items??[];if(!D.length)return{folder:y,isInstanceManaged:!1,isReadOnlyRepo:!1};const f=D.find(P=>P.target==="instance"),C=!!f;if(h){const P=D.find(T=>T.name===h);if(P)return{repository:P,folder:y,isInstanceManaged:C,isReadOnlyRepo:(0,c.li)(P)}}if(u){let P=D.find(M=>M.name===u);if(P)return{repository:P,folder:y,isInstanceManaged:C,isReadOnlyRepo:(0,c.li)(P)};const T=y?.metadata?.annotations?.[i.Jw];if(T&&(P=D.find(M=>M.name===T),P))return{repository:P,folder:y,isInstanceManaged:C,isReadOnlyRepo:(0,c.li)(P)}}return{repository:f,folder:y,isInstanceManaged:C,isReadOnlyRepo:(0,c.li)(f),repoType:f?.type}}},55290:(ne,j,e)=>{"use strict";e.d(j,{IF:()=>g,QC:()=>x,h4:()=>E});var n=e(64423),a=e(65474),s=e(44240),d=e(62467),o=e(39697),l=e(66847),i=e(69850),c=e(65961),p=e(69862),h=e(1005),u=e(67791),r=e(30124),v=e(24381);function g(m){return function(y,b){const D=new n.yU,f=(0,a.H)((0,r.dq)({searchString:m.searchString,perPage:m.perPage,page:m.page,excludeUid:m.currentPanelId,sortDirection:m.sortDirection,typeFilter:m.panelFilter,folderFilterUIDs:m.folderFilterUIDs,signal:b?.signal})).pipe((0,p.Z)(C=>{const{elements:P}=C;return(0,d.of)({...C,elements:P})}),(0,p.Z)(({perPage:C,elements:P,page:T,totalCount:M})=>(0,d.of)((0,v.c4)({libraryPanels:P,page:T,perPage:C,totalCount:M}))),(0,l.W)(C=>C.name==="AbortError"||C.cancelled===!0||C.statusText==="Request was aborted"?(0,d.of)():(console.error("Error fetching library panels:",C),(0,d.of)((0,v.c4)({...v.Xb,page:m.page,perPage:m.perPage})))),(0,i.j)(()=>D.unsubscribe()),(0,h.u)());D.add((0,s.h)((0,o.O)(50).pipe((0,c.u)((0,v.d9)()),(0,u.Q)(f)),f).subscribe(y))}}function E(m,y){return async function(b){try{await(0,r.h4)(m),g(y)(b)}catch(D){console.error(D)}}}function x(m){return function(y,b){return y instanceof Function?y(m,b):m(y)}}},55302:(ne,j,e)=>{"use strict";e.d(j,{Ju:()=>i,L$:()=>c,cp:()=>r});var n=e(76637),a=e(55386),s=e(64394),d=e(95004),o=e(739),l=e(55978);const i=(g=0,E=0,x=0,m=0,y=0,b=0,D=0,f=0)=>{let C=g,P=E;const T=Math.max(g+y+x-(D-y),0),M=Math.abs(Math.min(g-y-x-y,0)),I=T>0,B=M>0,U=Math.max(E+b+m-(f-b),0),W=Math.abs(Math.min(E-b-m-b,0)),V=U>0,z=W>0;return I&&B?C=T>M?y:D-y-x:I?C=g-y-x:C=g+y,V&&z?P=U>W?b:f-b-m:V?P=E-b-m:P=E+b,{x:C,y:P}},c=(g,E)=>{switch(g){case l.fX.series:return E.series;case l.fX.value:return E.value;case l.fX.hexagon:return E.hexagon;case l.fX.pie_1_4:return E.pie_1_4;case l.fX.pie_2_4:return E.pie_2_4;case l.fX.pie_3_4:return E.pie_3_4;case l.fX.marker_sm:return E.marker_sm;case l.fX.marker_md:return E.marker_md;case l.fX.marker_lg:return E.marker_lg;default:return E.value}},p=(g,E)=>g.numeric-E.numeric,h=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),u=(g,E)=>h.compare(`${g.value}`,`${E.value}`),r=(g,E,x,m,y,b,D=P=>!0,f=!1,C)=>{let P=[],T=!0;for(let M=0;M<g.length;M++){const I=g[M];if(I===E||I.type===d.PU.time||!D(I)||I.config.custom?.hideFrom?.tooltip||y===o.$N.Single&&m!==M)continue;let B=x[M];if(B==null)continue;I.type===d.PU.number||I.type===d.PU.boolean||I.type===d.PU.enum||(T=!1);const U=g[M].values[B];if(U==null&&I.config.noValue==null||f&&U===0)continue;const W=I.display(U),V=Number.isNaN(W.numeric)?b===o.xB.Descending?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:W.numeric,{colorIndicator:z,colorPlacement:R}=v(I);P.push({label:I.state?.displayName??I.name,value:(0,a.cN)(W),color:W.color??s.F,colorIndicator:z,colorPlacement:R,isActive:y===o.$N.Multi&&m===M,numeric:V,lineStyle:I.config.custom?.lineStyle})}if(C?.forEach(M=>{if(!M.config.custom?.hideFrom?.tooltip){const{colorIndicator:I,colorPlacement:B}=v(M),U=M.display(M.values[x[0]]);P.push({label:M.state?.displayName??M.name,value:(0,a.cN)(U),color:s.F,colorIndicator:I,colorPlacement:B,lineStyle:M.config.custom?.lineStyle,isHiddenFromViz:!0})}}),b!==o.xB.None&&P.length>1){const M=T?p:u,I=b===o.xB.Descending?-1:1;P.sort((B,U)=>I*M(B,U))}return P},v=g=>{const E=(0,n.Qi)(g);let x=l.fX.series,m=l.lJ.first;return E.isByValue&&(x=l.fX.value,m=l.lJ.trailing),{colorIndicator:x,colorPlacement:m}}},55315:(ne,j,e)=>{"use strict";e.d(j,{D:()=>h,X:()=>p});var n=e(2543),a=e.n(n),s=e(75505),d=e(31595),o=e(43173),l=e(68143);const i=`/apis/userstorage.grafana.app/v0alpha1/namespaces/${o.$.namespace}/user-storage`;async function c(u){try{const{data:r,...v}=await(0,s.s)((0,l.AI)().fetch({...u,url:i+u.url,data:u.body,showErrorAlert:!1}));return{data:r,meta:v}}catch(r){return u.manageError?u.manageError(r):{error:r}}}class p{constructor(r){this.service=r,this.userUID=o.$.bootData.user.uid===""?o.$.bootData.user.id.toString():o.$.bootData.user.uid,this.resourceName=`${r}:${this.userUID}`,this.canUseUserStorage=o.$.bootData.user.isSignedIn}async init(){if(this.storageSpec!==void 0)return;const r=await c({url:`/${this.resourceName}`,method:"GET",manageError:v=>(0,n.get)(v,"status")===404?(this.storageSpec=null,{error:null}):{error:v}});if("error"in r)return r.error;this.storageSpec=r.data.spec}async getItem(r){return this.canUseUserStorage?(await this.init(),this.storageSpec?this.storageSpec.data[r]:localStorage.getItem(`${this.resourceName}:${r}`)):localStorage.getItem(`${this.resourceName}:${r}`)}async setItem(r,v){if(!this.canUseUserStorage){localStorage.setItem(`${this.resourceName}:${r}`,v);return}const g={data:{[r]:v}};if(await this.init()){localStorage.setItem(`${this.resourceName}:${r}`,v);return}if(!this.storageSpec){await c({url:"/",method:"POST",body:{metadata:{name:this.resourceName,labels:{user:this.userUID,service:this.service}},spec:g},manageError:x=>(localStorage.setItem(`${this.resourceName}:${r}`,v),{error:x})}),this.storageSpec=g;return}this.storageSpec.data[r]=v,await c({headers:{"Content-Type":"application/merge-patch+json"},url:`/${this.resourceName}`,method:"PATCH",body:{spec:g},manageError:x=>(localStorage.setItem(`${this.resourceName}:${r}`,v),{error:x})})}}function h(){const u=(0,d.Q)();if(!u)throw new Error("No PluginContext found. The usePluginUserStorage() hook can only be used from a plugin.");return new p(u?.meta.id)}},55376:(ne,j,e)=>{"use strict";e.d(j,{Cl:()=>E,I3:()=>r,YG:()=>C,an:()=>b,lb:()=>m,xb:()=>g,yW:()=>f,yr:()=>y,zy:()=>x});var n=e(2543),a=e.n(n),s=e(17503),d=e(33553),o=e(28105),l=e(739),i=e(65642),c=e(2954),p=e(44022),h=e(4651),u=e(42970);function r(P,T,M){return P.map(I=>{if(T===M||!(0,p.f)(I.model))return I;const B=I.model.type==="math",U=I.model.type==="reduce",W=I.model.type==="resample",V=I.model.type==="classic_conditions",z=I.model.type==="threshold";if(B)return{...I,model:{...I.model,expression:v(I.model.expression??"",T,M)}};if(W||U||z){const R=I.model.expression===T;return{...I,model:{...I.model,expression:R?M:I.model.expression}}}if(V){const R=I.model.conditions?.map(O=>({...O,query:{...O.query,params:O.query.params.map(N=>N===T?M:N)}}));return{...I,model:{...I.model,conditions:R}}}return I})}function v(P,T,M){const I=new RegExp("(\\$"+T+"\\b)|(\\${"+T+"})","gm"),B="${"+M+"}";return P.replace(I,B)}function g(P,T){return P.find(M=>M.refId===T)!==void 0}function E(P){return P.includes("/")||P.includes("\\")}function x(P){if(P.series.length===0)return;const T=(0,s.jq)(P.series);let M;return T&&(M=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),M}function m(P){if(P.errors?.length)return new Error(P.errors[0].message)}function y(P){const M=(P[0]?.meta?.notices??[]).find(I=>I.severity==="warning")?.text;return M?new Error(M):void 0}function b(P,T){const M={},I=[h.Tz.threshold,h.Tz.classic];if(!T)return M;for(const W of P){if(!(0,p.f)(W.model)||!I.includes(W.model.type)||!Array.isArray(W.model.conditions)||W.model.refId!==T)continue;const V=W.model.conditions.some(D);W.model.conditions.forEach(z=>{const R=z.evaluator.params,O=z.query?.params[0]??W.model.expression;if(!O)return;const N=D(z);try{const F=(0,u.vL)(P),G=(0,u.qQ)(O,F);P.filter(K=>G.includes(K.refId)).forEach(K=>{const w=K.refId,k=!!(!(0,p.f)(K?.model)&&w);w&&!M[w]&&(M[w]={config:{mode:d.O.Absolute,steps:[]},mode:l.Ly.Line}),w&&k&&!N&&!V?B(w,R[0]):w&&k&&N&&(U(w,R,z.evaluator.type),M[w].mode=l.Ly.LineAndArea)})}catch(F){console.error("Failed to parse thresholds",F);return}})}function B(W,V){M[W].config.steps.push({value:-1/0,color:"transparent"},{value:V,color:i.$W.theme2.colors.error.main})}function U(W,V,z){z===c.p.IsWithinRange&&M[W].config.steps.push({value:-1/0,color:"transparent"},{value:V[0],color:i.$W.theme2.colors.error.main},{value:V[1],color:i.$W.theme2.colors.error.main},{value:V[1],color:"transparent"}),z===c.p.IsOutsideRange&&M[W].config.steps.push({value:-1/0,color:i.$W.theme2.colors.error.main},{value:V[0],color:i.$W.theme2.colors.error.main},{value:V[0],color:"transparent"},{value:V[1],color:i.$W.theme2.colors.error.main}),z===c.p.IsWithinRangeIncluded&&M[W].config.steps.push({value:-1/0,color:"transparent"},{value:V[0],color:i.$W.theme2.colors.error.main},{value:V[1],color:i.$W.theme2.colors.error.main},{value:V[1],color:"transparent"}),z===c.p.IsOutsideRangeIncluded&&M[W].config.steps.push({value:-1/0,color:i.$W.theme2.colors.error.main},{value:V[0],color:i.$W.theme2.colors.error.main},{value:V[0],color:"transparent"},{value:V[1],color:i.$W.theme2.colors.error.main}),M[W].config.steps.sort((R,O)=>R.value-O.value),M[W].config.steps=M[W].config.steps.filter(R=>R.value!==void 0)}return M}function D(P){return P.evaluator.type===c.p.IsWithinRange||P.evaluator.type===c.p.IsOutsideRange||P.evaluator.type===c.p.IsOutsideRangeIncluded||P.evaluator.type===c.p.IsWithinRangeIncluded}function f(P){const T="Failed to fetch data";if(P.state!==o.Gu.Error)return;const M=P.errors;return M?.length?M.map(I=>I.message??T).join(", "):P.error?.message??T}function C(P,T){const M=T.filter(W=>!(0,p.f)(W.model)).map(W=>W.refId),I=P.filter(W=>!(0,p.f)(W.model)).map(W=>W.refId),[B,U]=(0,n.xor)(I,M);return[B,U]}},55448:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>s,QB:()=>d});var n=e(739);const a="12.3.0",s={bucketCount:30,bucketOffset:0},d={fillOpacity:80,gradientMode:n.on.None,lineWidth:1}},55555:(ne,j,e)=>{"use strict";e.d(j,{g:()=>s});var n=e(74848),a=e(25229);const s=({timeInMs:o,className:l,humanize:i})=>(0,n.jsx)("span",{className:l,children:d(o,i)}),d=(o,l=!1)=>{const i=o/1e3;if(!l)return`${i.toFixed(1)}s`;const c=(0,a.Ah)(i,"seconds"),p=c.hours(),h=c.minutes(),u=c.seconds();return p?`${p}h ${h}m ${u}s`:h?`${h}m ${u}s`:`${u}s`}},55614:(ne,j,e)=>{"use strict";e.d(j,{FB:()=>o,JI:()=>i,jS:()=>l,r0:()=>p});var n=e(65307),a=e(2543),s=e.n(a),d=e(42801);const o=(0,n.VP)("notificationTemplate/add"),l=(0,n.VP)("notificationTemplate/update"),i=(0,n.VP)("notificationTemplate/delete"),c={alertmanager_config:{},template_files:{}},p=(0,n.vy)(c,h=>{h.addCase(o,(u,{payload:r})=>{const{alertmanager_config:v={},template_files:g={}}=u,{template:E}=r;if(g[E.title]!==void 0)throw new Error("target template already exists");const m=(0,d.o)(E.title,E.content);g[E.title]=m,v.templates=(0,a.toArray)(v.templates).concat(E.title)}).addCase(l,(u,{payload:r})=>{const{alertmanager_config:v={},template_files:g={}}=u,{name:E,template:x}=r,m=E!==x.title;if(!(g[E]!==void 0))throw new Error(`Expected notification template ${E} to exist, but did not find it in the config`);const b=(0,d.o)(x.title,x.content);if(m){const D=E,f=x.title;if(g[f]!==void 0)throw new Error(`Duplicate template name ${f}`);(0,a.unset)(g,D),(0,a.remove)(v.templates??[],P=>P===D),v.templates=(0,a.toArray)(v.templates).concat(x.title)}g[x.title]=b}).addCase(i,(u,{payload:r})=>{const{name:v}=r,{alertmanager_config:g={},template_files:E={}}=u;(0,a.unset)(E,v),(0,a.remove)(g.templates??[],x=>x===v)})})},55803:(ne,j,e)=>{"use strict";e.d(j,{P:()=>g});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(96540),l=e(92745),i=e(63142),c=e(45861),p=e(94959),h=e(30703),u=e(23659);const r=()=>({layout:(0,a.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})}),v=({header:x,onBlur:m,onChange:y,onRemove:b,onReset:D})=>{const f=(0,i.of)(r);return(0,n.jsxs)("div",{className:f.layout,children:[(0,n.jsx)(p.z,{label:(0,l.t)("grafana-ui.data-source-settings.custom-headers-header","Header"),name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:x.name||"",onChange:C=>y({...x,name:C.target.value}),onBlur:m}),(0,n.jsx)(u.L,{label:(0,l.t)("grafana-ui.data-source-settings.custom-headers-header-value","Value"),"aria-label":(0,l.t)("grafana-ui.data-source-settings.custom-headers-header-value","Value"),name:"value",isConfigured:x.configured,value:x.value,labelWidth:5,inputWidth:x.configured?11:12,placeholder:(0,l.t)("grafana-ui.data-source-settings.custom-headers-header-placeholder","Header Value"),onReset:()=>D(x.id),onChange:C=>y({...x,value:C.target.value}),onBlur:m}),(0,n.jsx)(c.$n,{type:"button","aria-label":(0,l.t)("grafana-ui.data-source-settings.custom-headers-header-remove","Remove header"),variant:"secondary",size:"xs",onClick:C=>b(x.id),children:(0,n.jsx)(h.I,{name:"trash-alt"})})]})};v.displayName="CustomHeaderRow";class g extends o.PureComponent{constructor(m){super(m),this.state={headers:[]},this.updateSettings=()=>{const{headers:f}=this.state,C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([T,M])=>!T.startsWith("httpHeaderName"))),P=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([T,M])=>!T.startsWith("httpHeaderValue")));for(const[T,M]of f.entries())C[`httpHeaderName${T+1}`]=M.name,M.configured||(P[`httpHeaderValue${T+1}`]=M.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:C,secureJsonData:P})},this.onHeaderAdd=()=>{this.setState(f=>({headers:[...f.headers,{id:(0,s.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(f,C)=>{this.setState(({headers:P})=>({headers:P.map((T,M)=>f!==M?T:{...C})}))},this.onHeaderReset=f=>{this.setState(({headers:C})=>({headers:C.map((P,T)=>P.id!==f?P:{...P,value:"",configured:!1})}))},this.onHeaderRemove=f=>{this.setState(({headers:C})=>({headers:C.filter(P=>P.id!==f)}),this.updateSettings)};const{jsonData:y,secureJsonData:b,secureJsonFields:D}=this.props.dataSourceConfig;this.state={headers:Object.keys(y).sort().filter(f=>f.startsWith("httpHeaderName")).map((f,C)=>({id:(0,s.uniqueId)(),name:y[f],value:b!==void 0?b[f]:"",configured:D&&D[`httpHeaderValue${C+1}`]||!1}))}}render(){const{headers:m}=this.state,{dataSourceConfig:y}=this.props;return(0,n.jsxs)("div",{className:"gf-form-group",children:[(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)("h6",{children:(0,n.jsx)(l.x6,{i18nKey:"grafana-ui.data-source-settings.custom-headers-title",children:"Custom HTTP Headers"})})}),(0,n.jsx)("div",{children:m.map((b,D)=>(0,n.jsx)(v,{header:b,onChange:f=>{this.onHeaderChange(D,f)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset},b.id))}),!y.readOnly&&(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)(c.$n,{variant:"secondary",icon:"plus",type:"button",onClick:b=>{this.onHeaderAdd()},children:(0,n.jsx)(l.x6,{i18nKey:"grafana-ui.data-source-settings.custom-headers-add",children:"Add header"})})})]})}}var E=null},55860:(ne,j,e)=>{"use strict";e.d(j,{S:()=>Y});var n=e(43173),a=e(88673),s=e(41119),d=e(11576),o=e(92745),l=e(68143),i=e(93854);const c="Loading",p="api/search-v2",h="name_sort";class u{constructor(_){this.fallbackSearcher=_}async search(_){if(_.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(_)}async starred(_){if(_.facet?.length)throw new Error("facets not supported!");const ee=await(0,l.AI)().get("api/user/stars");return ee?.length?this.doSearchQuery({uid:ee,query:_.query??"*"}):{view:new a.R({length:0,fields:[]}),totalRows:0,loadMoreItems:async(ae,le)=>{},isItemLoaded:ae=>!0}}async tags(_){const ee={..._,query:_.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},le=(await(0,l.AI)().post(p,ee)).frames.map(L=>(0,s.Vc)(L));if(le[0]?.name===c)return this.fallbackSearcher.tags(_);for(const L of le)if(L.fields[0].name==="tag")return g(L);return[]}async getLocationInfo(){return{}}getSortOptions(){const _=[{value:h,label:(0,o.t)("search.bluge-searcher.opts.label.alphabetically-az","Alphabetically (A-Z)")},{value:"-name_sort",label:(0,o.t)("search.bluge-searcher.opts.label.alphabetically-za","Alphabetically (Z-A)")}];if(n.$.licenseInfo.enabledFeatures.analytics){for(const ee of E)_.push({value:`-${ee.name}`,label:`${ee.display} (most)`}),_.push({value:`${ee.name}`,label:`${ee.display} (least)`});for(const ee of x)_.push({value:`-${ee.name}`,label:`${ee.display} (recent)`}),_.push({value:`${ee.name}`,label:`${ee.display} (oldest)`})}return Promise.resolve(_)}async doSearchQuery(_){_=await(0,i.u4)(_);const ee={..._,query:_.query??"*",limit:_.limit??r},le=(await(0,l.AI)().post(p,ee)).frames.map(Ee=>(0,s.Vc)(Ee)),L=le.length?(0,s.Vc)(le[0]):{fields:[],length:0};if(L.name===c)return this.fallbackSearcher.search(_);for(const Ee of L.fields)Ee.display=(0,d.J)({field:Ee,theme:n.$.theme2});L.meta?.custom||(L.meta={...L.meta,custom:{count:L.length,max_score:1}});const ie=L.meta.custom;if(ie.locationInfo||(ie.locationInfo={}),ie.sortBy?.length){const Ee=L.fields.find(Ae=>Ae.name===ie.sortBy);if(Ee){const Ae=m(Ee.name);ie.sortBy=Ae,Ee.name=Ae}}let oe=0,ue;const ye=async()=>{for(;oe>fe.dataFrame.length;){const Ee=fe.dataFrame.length;if(Ee>=ie.count)return;const Ae=await(0,l.AI)().post(p,{...ee??{},from:Ee,limit:v}),Ge=(0,s.Vc)(Ae.frames[0]);if(!Ge){console.log("no results",Ge);return}if(Ge.fields.length!==fe.dataFrame.fields.length){console.log("invalid shape",Ge,fe.dataFrame);return}const Fe=Ge.length+fe.dataFrame.length;for(let Ve=0;Ve<Ge.fields.length;Ve++)fe.dataFrame.fields[Ve].values.push(...Ge.fields[Ve].values);fe.dataFrame.length=Fe;const Pe=Ge.meta?.custom;if(Pe?.locationInfo&&ie)for(const[Ve,me]of Object.entries(Pe.locationInfo))ie.locationInfo[Ve]=me}ue=void 0},fe=new a.R(L);return{totalRows:ie.count??L.length,view:fe,loadMoreItems:async(Ee,Ae)=>(oe=Math.max(oe,Ae),ue||(ue=ye()),ue),isItemLoaded:Ee=>Ee<fe.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const r=50,v=100;function g(J){const _=J.fields[0].values,ee=J.fields[1].values,ae=[];for(let le=0;le<J.length;le++)ae.push({term:_[le],count:ee[le]});return ae}const E=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],x=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function m(J){for(const _ of E)if(_.name===J)return _.display;for(const _ of x)if(_.name===J)return _.display;return J}var y=e(84139);class b{constructor(_){this.parent=_,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(_){if(_.facet?.length)throw new Error("facets not supported!");if(_.sort!=null)throw new Error("custom sorting is not supported yet");if(_.tags?.length||_.ds_uid?.length)return this.parent.search(_);const ae=(await this.getCache(_.kind)).search(_.query);return{isItemLoaded:()=>!0,loadMoreItems:async(le,L)=>{},totalRows:ae.length,view:ae}}async getCache(_){const ee=_?_.sort().join(","):"*",ae=this.cache.get(ee);if(ae)try{return await ae}catch{return this.cache.delete(ee),new D(new a.R({name:"error",fields:[],length:0}))}const le=this.parent.search({kind:_,limit:5e3}).then(L=>new D(L.view));return this.cache.set(ee,le),le}async starred(_){return this.parent.starred(_)}async getSortOptions(){return this.parent.getSortOptions()}async tags(_){return this.parent.tags(_)}async getLocationInfo(){return this.parent.getLocationInfo()}getFolderViewSort(){return this.parent.getFolderViewSort()}}class D{constructor(_){this.full=_,this.ufuzzy=new y.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new a.R({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(ee=>({...ee,values:[]})),length:0})}search(_){if(!_?.length||_==="*")return this.full;const ee=this.full.dataFrame.fields,ae=this.names,le=ee.map(ue=>[]);let[L,ie,oe]=this.ufuzzy.search(ae,_,5);for(let ue=0;ue<ee.length;ue++){let ye=ee[ue].values,fe=le[ue];if(ie&&oe)for(let Ee=0;Ee<oe.length;Ee++){let Ae=ie.idx[oe[Ee]];fe.push(ye[Ae])}else if(L)for(let Ee=0;Ee<L.length;Ee++){let Ae=L[Ee];fe.push(ye[Ae])}}return this.empty.dataFrame.fields.forEach((ue,ye)=>{ue.values=le[ye]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var f=e(95004),C=e(83873),P=e(99090),T=e(42361);class M{constructor(){this.locationInfo={general:{kind:"folder",name:"Dashboards",url:"/dashboards"}},this.getFolderViewSort=()=>""}async composeQuery(_,ee){const ae=await(0,i.u4)(ee);return ae.query?.length&&ae.query!=="*"&&(_.query=ae.query),ae.kind?.length===1&&P.XJ[ae.kind[0]]&&(_.type=P.XJ[ae.kind[0]]),ae.uid?_.dashboardUID=ae.uid:ae.location?.length&&(_.folderUIDs=[ae.location]),_}async search(_){if(_.facet?.length)throw new Error("facets not supported!");if(_.from!==void 0){if(!_.limit)throw new Error("Must specify non-zero limit parameter when using from");if(_.from/_.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const ee=_.limit??(_.from!==void 0?1:P.if),ae=_.from!==void 0?_.from/ee+1:void 0,le=await this.composeQuery({limit:ee,tag:_.tags,sort:_.sort,permission:_.permission,page:ae,deleted:_.deleted},_);return this.doAPIQuery(le)}async starred(_){if(_.facet?.length)throw new Error("facets not supported!");const ee=await this.composeQuery({limit:_.limit??P.if,tag:_.tags,sort:_.sort,starred:_.starred},_);return this.doAPIQuery(ee)}async getSortOptions(){return(await C.IB.get("/api/search/sorting")).sortOptions.map(ee=>({value:ee.name,label:ee.displayName}))}async tags(_){return(await C.IB.get("/api/dashboards/tags")).sort((ae,le)=>le.count-ae.count)}async getLocationInfo(){return this.locationInfo}async doAPIQuery(_){let ee;if(_.deleted){const Pe=await T.v.get();ee=(0,i.m6)((0,i.Tm)(Pe,_))}else ee=await C.IB.get("/api/search",_);const ae=[],le=[],L=[],ie=[],oe=[],ue=[],ye=[],fe=[],Ee=[];let Ae;for(let Pe of ee){const Ve=Pe.type==="dash-folder"?"folder":"dashboard";ae.push(Ve),le.push(Pe.title),L.push(Pe.uid),ie.push(Pe.url),oe.push(Pe.tags),ye.push(Pe.sortMeta),fe.push(Pe.isDeleted??!1),Ee.push(Pe.permanentlyDeleteDate?new Date(Pe.permanentlyDeleteDate):void 0);let me=Pe.folderUid;!me&&Ve==="dashboard"&&(me=P.TF),ue.push(me),Pe.sortMetaName?.length&&(Ae=Pe.sortMetaName),Pe.folderUid&&Pe.folderTitle?this.locationInfo[Pe.folderUid]={kind:"folder",name:Pe.folderTitle,url:Pe.folderUrl,folderUid:Pe.folderUid}:Ve==="folder"&&(this.locationInfo[Pe.uid]={kind:Ve,name:Pe.title,url:Pe.url,folderUid:Pe.folderUid})}const Ge={fields:[{name:"kind",type:f.PU.string,config:{},values:ae},{name:"name",type:f.PU.string,config:{},values:le},{name:"uid",type:f.PU.string,config:{},values:L},{name:"url",type:f.PU.string,config:{},values:ie},{name:"tags",type:f.PU.other,config:{},values:oe},{name:"location",type:f.PU.string,config:{},values:ue},{name:"isDeleted",type:f.PU.boolean,config:{},values:fe},{name:"permanentlyDeleteDate",type:f.PU.time,config:{},values:Ee}],length:le.length,meta:{custom:{count:le.length,max_score:1,locationInfo:this.locationInfo}}};Ae?.length&&ye.length&&(Ge.meta.custom.sortBy=Ae,Ge.fields.push({name:Ae,type:f.PU.number,config:{},values:ye}));for(const Pe of Ge.fields)Pe.display=(0,d.J)({field:Pe,theme:n.$.theme2});const Fe=new a.R(Ge);return{totalRows:Ge.length,view:Fe,loadMoreItems:async(Pe,Ve)=>{},isItemLoaded:Pe=>!0}}}var I=e(2543),B=e(32334),U=e(85594),W=e(38032),V=e(85618),z=e(73427),R=e(77197),O=e(8535);const N="Loading",F=`${B.C1}/search`,G="name_sort";class H{constructor(_){this.fallbackSearcher=_,this.locationInfo=q()}async search(_){if(_.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(_)}async starred(_){if(_.facet?.length)throw new Error("facets not supported!");let ee=[];if(n.$.featureToggles.starsFromAPIServer){const ae=`user-${z.TP.user.uid}`;ee=(await(0,O.JD)(W.qR.endpoints.listStars.initiate({fieldSelector:`metadata.name=${ae}`}))).data.items?.[0].spec.resource.find(L=>L.group==="dashboard.grafana.app"&&L.kind==="Dashboard")?.names||[]}else ee=await(0,O.JD)(U.qR.endpoints.getStars.initiate()).unwrap();return ee?.length?this.doSearchQuery({..._,name:ee,query:_.query??"*"}):Q()}async tags(_){const ee=_.query??"*";let ae=`${F}?facet=tags&query=${ee}&limit=1`;return(await(0,l.AI)().get(ae)).facets?.tags?.terms||[]}async getLocationInfo(){return this.locationInfo}getSortOptions(){const _=[{value:G,label:(0,o.t)("search.unified-searcher.opts.label.alphabetically-az","Alphabetically (A-Z)")},{value:"-name_sort",label:(0,o.t)("search.unified-searcher.opts.label.alphabetically-za","Alphabetically (Z-A)")}];if(n.$.licenseInfo.enabledFeatures.analytics)for(const ee of w)_.push({value:`-${ee.name}`,label:`${ee.display} (most)`}),_.push({value:`${ee.name}`,label:`${ee.display} (least)`});return Promise.resolve(_)}async doSearchQuery(_){const ee=await this.newRequest(_);let ae;if(_.deleted){const Ee=await T.v.get(),Ae=(0,i.Tm)(Ee,_);ae={hits:Ae,totalHits:Ae.length}}else ae=await this.fetchResponse(ee);const le=te(ae,_.sort??"");if(le.name===N)return this.fallbackSearcher.search(_);const L=le.meta?.custom,ie={count:L?.count??le.length,max_score:L?.max_score??1,locationInfo:L?.locationInfo??{},sortBy:L?.sortBy};if(ie.locationInfo=await this.locationInfo,le.meta&&(le.meta.custom=ie),ie.sortBy?.length){const Ee=le.fields.find(Ae=>Ae.name===ie.sortBy);if(Ee){const Ae=k(Ee.name);Ee.config.displayName=Ae}}let oe=0,ue;const ye=async()=>{for(;oe>fe.dataFrame.length;){const Ee=fe.dataFrame.length;if(Ee>=ie.count)return;const Ae=`${ee}&offset=${Ee}`,Ge=await this.fetchResponse(Ae),Fe=te(Ge,_.sort??"");if(!Fe){console.log("no results",Fe);return}if(Fe.fields.length!==fe.dataFrame.fields.length){console.log("invalid shape",Fe,fe.dataFrame);return}const Pe=Fe.length+fe.dataFrame.length;Fe.fields.forEach(me=>{const Se=fe.dataFrame.fields.find(Qe=>Qe.name===me.name);Se&&Se.values.push(...me.values)}),fe.dataFrame.length=Pe;const Ve=Fe.meta?.custom;if(Ve?.locationInfo&&ie){const me=Ve.locationInfo;me&&typeof me=="object"&&Object.assign(ie.locationInfo,me)}}ue=void 0},fe=new a.R(le);return{totalRows:ie.count??le.length,view:fe,loadMoreItems:async(Ee,Ae)=>(oe=Math.max(oe,Ae+1),ue||(ue=ye()),ue),isItemLoaded:Ee=>Ee<fe.dataFrame.length}}async fetchResponse(_){const ee=await(0,l.AI)().get(_);if(!await this.isFolderCacheStale(ee.hits)||(this.locationInfo=q(),!await this.isFolderCacheStale(ee.hits)))return ee;const L=await this.locationInfo,ie=ee.hits.map(ue=>ue.folder===void 0?{...ue,location:"general",folder:"general"}:L[ue.folder]===void 0?{...ue,location:"sharedwithme",folder:"sharedwithme"}:ue),oe=ee.totalHits-(ee.hits.length-ie.length);return{...ee,hits:ie,totalHits:oe}}async isFolderCacheStale(_){const ee=await this.locationInfo;return _.some(ae=>ae.folder!==void 0&&ee[ae.folder]===void 0)}async newRequest(_){_=await(0,i.u4)(_);let ee=F;if(ee+=`?query=${encodeURIComponent(_.query??"*")}`,ee+=`&limit=${_.limit??K}`,_.offset&&(ee+=`&offset=${_.offset}`),(0,I.isEmpty)(_.location)||(ee+=`&folder=${_.location}`),_.kind&&(ee+="&"+_.kind.map(ae=>`type=${ae}`).join("&")),_.tags?.length&&(ee+="&"+_.tags.map(ae=>`tag=${encodeURIComponent(ae)}`).join("&")),_.sort){const ae=_.sort.replace("_sort","").replace("name","title");ee+=`&sort=${ae}`;const le=ae.startsWith("-")?ae.substring(1):ae;ee+=`&field=${le}`}return _.name?.length&&(ee+="&"+_.name.map(ae=>`name=${encodeURIComponent(ae)}`).join("&")),_.uid?.length&&(ee+="&"+_.uid.map(ae=>`name=${encodeURIComponent(ae)}`).join("&")),_.deleted&&(ee=`${(0,V.TP)("dashboard.grafana.app","v1beta1")}/dashboards/?labelSelector=grafana.app/get-trash=true`),ee}getFolderViewSort(){return"name_sort"}}const K=50,w=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}];function Q(){return{view:new a.R({length:0,fields:[]}),totalRows:0,loadMoreItems:async(J,_)=>{},isItemLoaded:J=>!0}}function k(J){for(const _ of w)if(_.name===J)return _.display;return J}function te(J,_){const ee=J.hits;if(ee.length<1)return{fields:[],length:0};const ae=ee.map(L=>{let ie=L.folder;L.resource==="dashboards"&&(0,I.isEmpty)(ie)&&(ie="general");const oe=Object.fromEntries(Object.entries(L.field??{}).map(([ue,ye])=>[ue,ye??"-"]));return{...L,uid:L.name,url:se(L.resource,L.name,L.title),tags:L.tags||[],folder:L.folder||"general",location:ie,name:L.title,kind:L.resource.substring(0,L.resource.length-1),...oe}}),le=(0,s.Vc)(ae);le.meta={custom:{count:J.totalHits,max_score:1}},_&&le.meta.custom&&(le.meta.custom.sortBy=_.startsWith("-")?_.substring(1):_);for(const L of le.fields)L.display=(0,d.J)({field:L,theme:n.$.theme2});return le}async function q(){const J=`${F}?type=folders&limit=100000`;return(0,l.AI)().get(J).then(ee=>{const ae={general:{kind:"folder",name:"Dashboards",url:"/dashboards"},sharedwithme:{kind:"sharedwithme",name:"Shared with me",url:""}};for(const le of ee.hits)ae[le.name]={name:le.title,kind:"folder",url:se("folders",le.name,le.title)};return ae})}function se(J,_,ee){if(J==="folders")return`/dashboards/f/${_}`;const ae=R.A.slugifyForUrl(ee);return`/d/${_}/${ae}`}let re;function Y(){if(!re){const J=new M,_=n.$.featureToggles.panelTitleSearch;if(re=_?new u(J):J,_&&window.location.search.includes("do-frontend-query"))return new b(re);re=n.$.featureToggles.unifiedStorageSearchUI?new H(J):J}return re}function X(){throw new Error("resetGrafanaSearcher can only be used in tests")}},55867:(ne,j,e)=>{"use strict";e.d(j,{A:()=>v});var n=e(74848),a=e(96540),s=e(51898),d=e(92745),o=e(43173),l=e(36490),i=e(87063),c=e(58662),p=e(23289);const h=s.Tp.pages.Dashboard.DashNav.NewExportButton.Menu,u=[];function r(g){u.push(g)}function v({dashboard:g}){const E=y=>{l.Ny.partial({shareView:y})},x=(0,a.useCallback)(()=>{const y=[];u.forEach(D=>y.push(D));const b=o.$.featureToggles.kubernetesDashboards?(0,d.t)("dashboard.toolbar.new.export.tooltip.as-code","Export as code"):(0,d.t)("share-dashboard.menu.export-json-title","Export as JSON");return y.push({shareId:c.wr.export,testId:h.exportAsJson,icon:"arrow",label:b,renderCondition:!0,onClick:()=>E(c.wr.export)}),y.push({shareId:c.wr.image,testId:h.exportAsImage,icon:"camera",label:(0,d.t)("share-dashboard.menu.export-image-title","Export as image"),renderCondition:!!o.$.featureToggles.sharingDashboardImage,onClick:()=>E(c.wr.image)}),y.filter(D=>D.renderCondition)},[]),m=y=>{p.c.sharingCategoryClicked({item:y.shareId,shareResource:(0,c.hD)()}),y.onClick(g)};return(0,n.jsx)(i.W,{ariaLabel:(0,d.t)("dashboard.export.menu.label","Export dashboard menu"),"data-testid":h.container,children:x().map(y=>(0,n.jsx)(i.W.Item,{label:y.label,icon:y.icon,description:y.description,onClick:()=>m(y),testId:y.testId},y.label))})}},55978:(ne,j,e)=>{"use strict";e.d(j,{Ev:()=>s,fX:()=>n,lJ:()=>a});var n=(d=>(d.series="series",d.value="value",d.hexagon="hexagon",d.pie_1_4="pie_1_4",d.pie_2_4="pie_2_4",d.pie_3_4="pie_3_4",d.marker_sm="marker_sm",d.marker_md="marker_md",d.marker_lg="marker_lg",d))(n||{}),a=(d=>(d.hidden="hidden",d.first="first",d.leading="leading",d.trailing="trailing",d))(a||{});const s="series"},56103:(ne,j,e)=>{"use strict";e.d(j,{D:()=>r,R:()=>x});var n=e(28848),a=e.n(n),s=e(82611),d=e(65937),o=e(74848),l=e(49568);function i(m){return m.object==="block"&&m.type==="code_block"}function c(m){return"javascript"}function p(m,y,b){const{decoration:D}=m;if(D.type!==d.A)return b();const f=D.data.get("className");return(0,o.jsx)("span",{className:f,children:m.children})}class h extends(0,l.Record)({onlyIn:i,getSyntax:c,renderDecoration:p}){constructor(y){super(y)}}const u=h;function r(m={},y=a().languages){const b=new u(m);return{decorateNode:(D,f,C)=>{if(!b.onlyIn(D))return C();const P=s.Block.create(D),T=b.getSyntax(P),M=y[T];if(!M)return[];const B=P.getTexts().map(z=>z&&z.getText()).join(`
`),U=a().tokenize(B,M),W=x(U),V=f.value.data.set("tokens",W);return f.setData(V),v(b,U,P)},renderDecoration:(D,f,C)=>b.renderDecoration({children:D.children,decoration:D.decoration},f,C)}}function v(m,y,b){const D=b.getTexts(),f=[];let C=0,P=0;return D.forEach(T=>{P=C+T.getText().length;let M=0;function I(B,U){if(typeof B=="string"){if(U){const W=g({text:T,textStart:C,textEnd:P,start:M,end:M+B.length,className:`prism-token token ${U}`,block:b});W&&f.push(W)}M+=B.length}else if(U=`${U} ${B.type}`,B.alias&&(U+=" "+B.alias),typeof B.content=="string"){const W=g({text:T,textStart:C,textEnd:P,start:M,end:M+B.content.length,className:`prism-token token ${U}`,block:b});W&&f.push(W),M+=B.content.length}else for(let W=0;W<B.content.length;W+=1)I(B.content[W],U)}y.forEach(I),C=P+1}),f}function g({text:m,textStart:y,textEnd:b,start:D,end:f,className:C,block:P}){return D>=b||f<=y?null:(D=Math.max(D,y),f=Math.min(f,b),D-=y,f-=y,P.createDecoration({object:"decoration",anchor:{key:m.key,offset:D,object:"point"},focus:{key:m.key,offset:f,object:"point"},type:d.A,data:{className:C}}))}function E(m){return typeof m=="string"?[{content:m,types:[],aliases:[]}]:Array.isArray(m)?m.flatMap(y=>E(y)):m instanceof a().Token?E(m.content).flatMap(y=>{let b=[];return typeof m.alias=="string"?b=[m.alias]:b=m.alias??[],{content:y.content,types:[m.type,...y.types],aliases:[...b,...y.aliases]}}):[]}function x(m){const y=E(m);if(!y.length)return[];const b=y[0];b.prev=null,b.next=y.length>=2?y[1]:null,b.offsets={start:0,end:b.content.length};for(let f=1;f<y.length-1;f++)y[f].prev=y[f-1],y[f].next=y[f+1],y[f].offsets={start:y[f-1].offsets.end,end:y[f-1].offsets.end+y[f].content.length};const D=y[y.length-1];return D.prev=y.length>=2?y[y.length-2]:null,D.next=null,D.offsets={start:y.length>=2?y[y.length-2].offsets.end:0,end:y.length>=2?y[y.length-2].offsets.end+D.content.length:D.content.length},y}},56265:(ne,j,e)=>{"use strict";e.d(j,{b:()=>m});var n=e(74848),a=e(22803),s=e(83505),d=e(43107),o=e(96540),l=e(25229),i=e(22592),c=e(51898),p=e(63142),h=e(30703),u=e(63527),r=e(4364),v=e(83692),g=e(8431),E=e(62348);const x=()=>{},m=({value:b,onChange:D,onChangeTimeZone:f=x,clearable:C,weekStart:P,hideTimeZone:T=!0,timeZone:M="browser",placeholder:I="Select time range",isReversed:B=!0,hideQuickRanges:U=!1,disabled:W=!1,showIcon:V=!1})=>{const[z,R]=(0,o.useState)(!1),O=(0,p.of)(y,W),N=se=>{se.stopPropagation(),se.preventDefault(),!W&&R(!z)},F=()=>{R(!1)},G=se=>{F(),D(se)},H=se=>{se.stopPropagation();const re=(0,l.KQ)(null),Y=(0,l.KQ)(null);D({from:re,to:Y,raw:{from:re,to:Y}})},{refs:K,floatingStyles:w,context:Q}=(0,s.we)({open:z,onOpenChange:R,placement:"bottom-start",strategy:"fixed"}),k=(0,s.s9)(Q,{bubbles:{outsidePress:!1}}),{getReferenceProps:te,getFloatingProps:q}=(0,s.bv)([k]);return(0,n.jsxs)("div",{className:O.container,children:[(0,n.jsxs)("button",{type:"button",className:O.pickerInput,"data-testid":c.Tp.components.TimePicker.openButton,onClick:N,ref:K.setReference,...te(),children:[V&&(0,n.jsx)(h.I,{name:"clock-nine",size:"sm",className:O.icon}),(0,n.jsx)(v.f,{value:b,timeZone:M,placeholder:I}),!W&&(0,n.jsxs)("span",{className:O.caretIcon,children:[(0,E.X)(b)&&C&&(0,n.jsx)(h.I,{className:O.clearIcon,name:"times",size:"lg",onClick:H}),(0,n.jsx)(h.I,{name:z?"angle-up":"angle-down",size:"lg"})]})]}),z&&(0,n.jsx)(d.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("section",{className:O.content,ref:K.setFloating,style:w,...q(),children:(0,n.jsx)(r.r,{timeZone:M,value:(0,E.X)(b)?b:(0,i.E2)(),onChange:G,quickOptions:(0,g.O)(),onChangeTimeZone:f,className:O.content,hideTimeZone:T,isReversed:B,hideQuickRanges:U,weekStart:P})})})]})},y=(b,D=!1)=>{const f=(0,u.n)({theme:b,invalid:!1});return{container:(0,a.css)({display:"flex",position:"relative"}),content:(0,a.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:b.zIndex.modal}),pickerInput:(0,a.cx)(f.input,D&&f.inputDisabled,f.wrapper,(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${b.spacing.gridSize*4-2}px`})),caretIcon:(0,a.cx)(f.suffix,(0,a.css)({position:"relative",top:"-1px",marginLeft:b.spacing(.5)})),clearIcon:(0,a.css)({marginRight:b.spacing(.5),"&:hover":{color:b.colors.text.maxContrast}}),placeholder:(0,a.css)({color:b.colors.text.disabled,opacity:1}),icon:(0,a.css)({marginRight:b.spacing(.5)})}}},56291:(ne,j,e)=>{"use strict";e.d(j,{p:()=>y});var n=e(74848),a=e(2543),s=e(96540),d=e(17548),o=e(51898),l=e(92745),i=e(74475),c=e(37386),p=e(59310),h=e(5857),u=e(63527),r=e(21285),v=e(90811),g=e(75421);const E=({refreshIntervals:b,onRefreshIntervalChange:D,getIntervalsFunc:f=m,validateIntervalsFunc:C=x})=>{const[P,T]=(0,s.useState)(f(b??v.cb)),[M,I]=(0,s.useState)(null);(0,s.useEffect)(()=>{const V=f(b??v.cb);T(V)},[f,b]);const B=(0,s.useMemo)(()=>Array.isArray(P)?P.join(","):"",[P]),U=(0,s.useCallback)(V=>{const z=V.currentTarget.value?V.currentTarget.value.split(","):[];T(z)},[T]),W=(0,s.useCallback)(V=>{const z=C(P);z===null&&D(f(P)),I(z)},[f,P,D,C]);return(0,n.jsx)(c.D,{label:(0,l.t)("dashboard-settings.general.auto-refresh-label","Auto refresh"),description:(0,l.t)("dashboard-settings.general.auto-refresh-description","Define the auto refresh intervals that should be available in the auto refresh list. Use the format '5s' for seconds, '1m' for minutes, '1h' for hours, and '1d' for days (e.g.: '5s,10s,30s,1m,5m,15m,30m,1h,2h,1d')."),error:M,invalid:!!M,children:(0,n.jsx)(u.p,{id:"auto-refresh-input",invalid:!!M,value:B,onChange:U,onBlur:W})})},x=(b,D={getTimeSrv:g.jG})=>{try{return m(b,D),null}catch(f){return f instanceof Error?f.message:"Invalid intervals"}},m=(b,D={getTimeSrv:g.jG})=>{const f=b.filter(C=>C.trim()!=="").map(C=>C.replace(/\s+/g,""));return[...new Set(D.getTimeSrv().getValidIntervals(f))]},y=(0,s.memo)(({onWeekStartChange:b,onTimeZoneChange:D,onRefreshIntervalChange:f,onNowDelayChange:C,onHideTimePickerChange:P,onLiveNowChange:T,refreshIntervals:M,timePickerHidden:I,nowDelay:B,timezone:U,weekStart:W,liveNow:V})=>{const[z,R]=(0,s.useState)(!0),O=K=>{const w=K.currentTarget.value;if((0,a.isEmpty)(w)||d.isValidTimeSpan(w))return R(!0),C(w);R(!1)},N=()=>{P(!I)},F=()=>{T(!V)},G=K=>{typeof K=="string"&&D(K)},H=K=>{b(K)};return(0,n.jsxs)(i.M,{label:(0,l.t)("dashboard-settings.time-picker.time-options-label","Time options"),isOpen:!0,children:[(0,n.jsx)(c.D,{label:(0,l.t)("dashboard-settings.time-picker.time-zone-label","Time zone"),"data-testid":o.Tp.components.TimeZonePicker.containerV2,children:(0,n.jsx)(p.U,{inputId:"time-options-input",includeInternal:!0,value:U,onChange:G,width:40})}),(0,n.jsx)(c.D,{label:(0,l.t)("dashboard-settings.time-picker.week-start-label","Week start"),"data-testid":o.Tp.components.WeekStartPicker.containerV2,children:(0,n.jsx)(h.l6,{inputId:"week-start-input",width:40,value:W,onChange:H})}),(0,n.jsx)(E,{refreshIntervals:M,onRefreshIntervalChange:f}),(0,n.jsx)(c.D,{label:(0,l.t)("dashboard-settings.time-picker.now-delay-label","Now delay"),description:(0,l.t)("dashboard-settings.time-picker.now-delay-description","Exclude recent data that may be incomplete."),children:(0,n.jsx)(u.p,{id:"now-delay-input",invalid:!z,placeholder:"0m",onChange:O,defaultValue:B})}),(0,n.jsx)(c.D,{label:(0,l.t)("dashboard-settings.time-picker.hide-time-picker","Hide time picker"),children:(0,n.jsx)(r.d,{id:"hide-time-picker-toggle",value:!!I,onChange:N})}),(0,n.jsx)(c.D,{label:(0,l.t)("dashboard-settings.time-picker.refresh-live-dashboards-label","Refresh live dashboards"),description:(0,l.t)("dashboard-settings.time-picker.refresh-live-dashboards-description","Continuously update panels when the time range includes the current time"),children:(0,n.jsx)(r.d,{id:"refresh-live-dashboards-toggle",value:!!V,onChange:F})})]})});y.displayName="TimePickerSettings"},56355:(ne,j,e)=>{"use strict";e.d(j,{Dw:()=>l,Wn:()=>o,kW:()=>d,tI:()=>s});var n=e(2543),a=e.n(n);class s{constructor(h){this.type=h.type,this.params=h.params,this.defaultParams=h.defaultParams,this.renderer=h.renderer,this.category=h.category,this.addStrategy=h.addStrategy}}class d{constructor(h,u){if(this.part=h,this.def=u,!this.def)throw{message:"Could not find query part "+h.type};h.params=h.params||(0,n.clone)(this.def.defaultParams),this.params=h.params,this.text="",this.updateText()}render(h){return this.def.renderer(this,h)}hasMultipleParamsInString(h,u){return h.indexOf(",")===-1?!1:this.def.params[u+1]&&this.def.params[u+1].optional}updateParam(h,u){if(this.hasMultipleParamsInString(h,u)){(0,n.each)(h.split(","),(r,v)=>{this.updateParam(r.trim(),v)});return}h===""&&this.def.params[u].optional?this.params.splice(u,1):this.params[u]=h,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let h=this.def.type+"(";h+=this.params.join(", "),h+=")",this.text=h}}function o(p,h){const u=p.def.type+"(",r=(0,n.map)(p.params,(v,g)=>{const E=p.def.params[g];return E.type==="time"&&v==="auto"&&(v="$__interval"),E.quote==="single"?"'"+v+"'":E.quote==="double"?'"'+v+'"':v});return h&&r.unshift(h),u+r.join(", ")+")"}function l(p,h){return h+" "+p.params[0]}function i(p,h){return p.params[0]}function c(p,h){return'"'+p.params[0]+'"'}},56369:(ne,j,e)=>{"use strict";e.d(j,{Jc:()=>q,Eg:()=>se,kL:()=>Y,XY:()=>re});var n=e(24619),a=e(29609);const s=1,d=2,o=3,l=4,i=5,c=6,p=7,h=8,u=9,r=10,v=11,g=12,E=13,x=14,m=15,y=16,b=0,D=1,f=2,C=3,P=4,T=5,M=6,I=7,B=8,U=9,W=10,V=11;var z=e(2543),R=e(48820);const O=R.U1.deserialize({version:14,states:"!vOQOPOOO!OOPO'#ClOOOO'#Cl'#ClOQOPO'#CpOOOO'#Cm'#CmQQOPOOO#POQO'#C^O#UOPO'#CnO#ZOPO,59WOOOO,59[,59[OOOO-E6k-E6kOOOO,58x,58xOOOO,59Y,59YOOOO-E6l-E6l",stateData:"%Q~ORUOTUOUUOVUOWUOXUOYUOZUO[UO]UO^UO_UOePOgQO~OfVOR`XT`XU`XV`XW`XX`XY`XZ`X[`X]`X^`X_`Xe`Xg`X~OSZO~Oe[O~OfVOR`aT`aU`aV`aW`aX`aY`aZ`a[`a]`a^`a_`ae`ag`a~OR~T~U~V~W~Y~Z~[~]~^~_~R_^][ZYXWVUTe~",goto:"!OePPfPPPPPPPPPPPPPfkqPwVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken DashboardToken PluginsToken ContactPointToken RuleSourceToken FreeFormExpression",maxTerm:23,skippedNodes:[0],repeatNodeCount:2,tokenData:"$*nRRtqr#crs&ost#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]+q!]#V#c#V#W-T#W#X@m#X#Z#c#Z#[!/S#[#]!7|#]#`#c#`#a!B`#a#b#c#b#c!KY#c#d#c#d#e#,W#e#f#c#f#g#8S#g#h#?d#h#i$#^#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#jcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cQ$zcSQqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uQ&YP;=`<%l$uQ&`P;=`;NQ$uR&fP;=`<%l#cR&lP;=`;NQ#cR&rrX^(|pq(|qr(|st(|tu(|uv(|vw(|wx(|xy(|yz(|z{(|{|(||!P(|!P!Q(|!Q![(|![!](|!]#y(|#y#z(|#z$f(|$f$g(|$g#BY(|#BY#BZ(|#BZ$Ch(|$IS$I_(|$I|$JO(|$JT$JU(|$JU$KV(|$KV$KW(|$KW&FU(|&FU&FV(|&FV;'S(|;'S;(d+e;(d;(e+k<%lO(|R)PsX^(|pq(|qr(|rs+^st(|tu(|uv(|vw(|wx(|xy(|yz(|z{(|{|(||!P(|!P!Q(|!Q![(|![!](|!]#y(|#y#z(|#z$f(|$f$g(|$g#BY(|#BY#BZ(|#BZ$Ch(|$IS$I_(|$I|$JO(|$JT$JU(|$JU$KV(|$KV$KW(|$KW&FU(|&FU&FV(|&FV;'S(|;'S;(d+e;(d;(e+k<%lO(|R+eOSQgPR+hP;=`<%l(|R+nP;=`;NQ(|R+xcSQfPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR-[eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d.m#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR.teSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#b#c#b#c0V#c$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR0^eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i1o#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR1veSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U3X#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR3`eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#V#c#V#W4q#W$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR4xeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i6Z#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR6beSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]!r#c!r!s7s!s$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR7zeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d9]#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR9deSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#]#c#]#^:u#^$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR:|eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#b#c#b#c<_#c$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR<feSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i=w#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR>OcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]?Z!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR?bcSQ^Pqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR@teSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#UBV#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRB^fSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#g#c#g#hCr#h#i! n#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRCyeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#[#c#[#]E[#]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cREceSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#U#c#U#VFt#V$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRF{eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#dH^#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRHeeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#UIv#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRI}eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#f#c#f#gK`#g$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRKgeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#W#c#W#XLx#X$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRMPcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]N[!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRNccSQ[Pqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR! ueSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U!#W#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!#_eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#g#c#g#h!$p#h$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!$weSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d!&Y#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!&aeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j!'r#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!'yeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#f#c#f#g!)[#g$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!)ceSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#V#c#V#W!*t#W$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!*{eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y!,^#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!,ecSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]!-p!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!-wcSQRPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR!/ZeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#f#c#f#g!0l#g$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!0seSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d!2U#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!2]eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j!3n#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!3ueSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#d#c#d#e!5W#e$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!5_cSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]!6j!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!6qcSQVPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR!8TeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y!9f#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!9meSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U!;O#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!;VeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#`#c#`#a!<h#a$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!<oeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i!>Q#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!>XeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#[#c#[#]!?j#]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!?qcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]!@|!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!ATcSQZPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR!BgeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U!Cx#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!DPeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#U#c#U#V!Eb#V$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!EieSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y!Fz#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!GReSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#`#c#`#a!Hd#a$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!HkcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]!Iv!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!I}cSQUPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR!KaeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U!Lr#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!LyeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#a#c#a#b!N[#b$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!NceSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y# t#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR# {eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#g#c#g#h##^#h$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR##eeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#d#c#d#e#$v#e$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#$}eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U#&`#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#&geSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#V#c#V#W#'x#W$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#(PeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y#)b#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#)icSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]#*t!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#*{cSQTPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR#,_eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#`#c#`#a#-p#a$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#-weSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j#/Y#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#/aeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#Z#c#Z#[#0r#[$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#0yeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#]#c#]#^#2[#^$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#2ceSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#b#c#b#c#3t#c$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#3{eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#g#c#g#h#5^#h$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#5ecSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]#6p!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#6wcSQ]Pqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR#8ZeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j#9l#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#9seSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#`#c#`#a#;U#a$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#;]eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y#<n#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#<ucSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]#>Q!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#>XcSQWPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR#?kgSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d#AS#d#h#c#h#i#I|#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#AZeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j#Bl#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#BseSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#f#c#f#g#DU#g$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#D]eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#V#c#V#W#En#W$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#EueSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y#GW#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#G_cSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]#Hj!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#HqcSQ_Pqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR#JTeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U#Kf#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#KmeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i#MO#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#MVeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y#Nh#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#NocSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$ z!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$!RcSQXPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR$#eeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#m#c#m#n$$v#n$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$$}eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#d#c#d#e$&`#e$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$&geSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y$'x#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$(PcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$)[!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$)ccSQYPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$u",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:150,nameSpaceFilter:152,labelFilter:154,groupFilter:156,ruleFilter:158,stateFilter:90,typeFilter:160,healthFilter:162,dashboardFilter:164,pluginsFilter:166,contactPointFilter:168,sourceFilter:170},tokenPrec:172}),N={[o]:"datasource",[i]:"namespace",[c]:"label",[h]:"rule",[p]:"group",[u]:"state",[r]:"type",[v]:"health",[g]:"dashboard",[E]:"plugins",[x]:"contactPoint",[m]:"source"};var F=(J=>(J.dataSource="dataSourceFilter",J.nameSpace="nameSpaceFilter",J.label="labelFilter",J.group="groupFilter",J.rule="ruleFilter",J.state="stateFilter",J.type="typeFilter",J.health="healthFilter",J.dashboard="dashboardFilter",J.plugins="pluginsFilter",J.contactPoint="contactPointFilter",J.source="sourceFilter",J))(F||{});function G(J,_,ee){Q(J,_,ae=>{if(ae.type.id===d){const le=H(J,ae);if(le.type&&le.value){const L=ee[le.type];L&&L(le.value)}}else if(ae.type.id===y){const le=ee[y];le&&le(K(J,ae))}})}function H(J,_){if(_.type.id!==d)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const ee=_.firstChild;if(!ee)return{type:void 0,value:void 0};const ae=_.getChild(l),le=ae?(0,z.trim)(K(J,ae),'"'):void 0;return{type:ee.type.id,value:le}}function K(J,_){return J.slice(_.from,_.to).trim().replace(/\"/g,"")}function w(J,_,ee){const ae=[];Q(J,_,L=>{L.type.id===d&&L.firstChild&&ae.push(L.firstChild),L.type.id===y&&ae.push(L)});const le=[];return ae.forEach(L=>{const ie=ee.findIndex(oe=>oe.type===L.type.id);if(ie!==-1){if(L.parent?.type.is(d)){const oe=N[L.type.id],ue=ee.splice(ie,1)[0];le.push(`${oe}:${k(ue.value)}`)}if(L.type.is(y)){const oe=ee.splice(ie,1)[0];le.push(oe.value)}}}),ee.forEach(L=>{L.type===y?le.push(L.value):le.push(`${N[L.type]}:${k(L.value)}`)}),le.join(" ")}function Q(J,_,ee){const ae=_.join(" "),L=O.configure({dialect:ae}).parse(J).cursor();do ee(L.node);while(L.next())}function k(J){return/\s/.test(J)?`"${J}"`:J}const te=[F.dataSource,F.nameSpace,F.label,F.group,F.rule,F.state,F.type,F.health,F.dashboard,F.plugins,F.contactPoint,F.source];var q=(J=>(J.Ok="ok",J.Error="error",J.NoData="nodata",J.Unknown="unknown",J))(q||{}),se=(J=>(J.Grafana="grafana",J.DataSource="datasource",J))(se||{});function re(J){const _={labels:[],freeFormWords:[],dataSourceNames:[]},ee={[o]:ae=>_.dataSourceNames.push(ae),[i]:ae=>_.namespace=ae,[p]:ae=>_.groupName=ae,[h]:ae=>_.ruleName=ae,[c]:ae=>_.labels.push(ae),[u]:ae=>_.ruleState=X(ae),[r]:ae=>(0,a.nf)(ae)?_.ruleType=ae:void 0,[v]:ae=>_.ruleHealth=(0,a.f6)(ae),[g]:ae=>_.dashboardUid=ae,[E]:ae=>_.plugins=ae==="hide"?ae:void 0,[x]:ae=>_.contactPoint=ae,[m]:ae=>_.ruleSource=(0,a.KC)(ae),[y]:ae=>_.freeFormWords.push(ae)};return G(J,te,ee),_}function Y(J,_){const ee=[];return _.dataSourceNames&&ee.push(..._.dataSourceNames.map(ae=>({type:o,value:ae}))),_.namespace&&ee.push({type:i,value:_.namespace}),_.groupName&&ee.push({type:p,value:_.groupName}),_.ruleName&&ee.push({type:h,value:_.ruleName}),_.ruleState&&ee.push({type:u,value:_.ruleState}),_.ruleType&&ee.push({type:r,value:_.ruleType}),_.ruleHealth&&ee.push({type:v,value:_.ruleHealth}),_.labels&&ee.push(..._.labels.map(ae=>({type:c,value:ae}))),_.dashboardUid&&ee.push({type:g,value:_.dashboardUid}),_.plugins&&ee.push({type:E,value:_.plugins}),_.ruleSource&&ee.push({type:m,value:_.ruleSource}),_.freeFormWords&&ee.push(..._.freeFormWords.map(ae=>({type:y,value:ae}))),_.contactPoint&&ee.push({type:x,value:_.contactPoint}),w(J,te,ee)}function X(J){if(J==="normal")return n.cF.Inactive;if((0,n.Si)(J))return J}},56404:(ne,j,e)=>{"use strict";e.d(j,{c:()=>p,z:()=>h});var n=e(74848),a=e(92145),s=e(96540),d=e(51898),o=e(92745),l=e(87105),i=e(63142),c=e(25379);const p="Grafana-LegacyVariableQueryEditor",h=({onChange:u,query:r})=>{const v=(0,i.of)(c.$),[g,E]=(0,s.useState)(r),x=b=>{E(b.currentTarget.value)},m=(0,s.useCallback)(b=>{u(b.currentTarget.value,b.currentTarget.value)},[u]),y=(0,a.Bi)();return(0,n.jsx)(l.f,{id:y,rows:2,value:g,onChange:x,onBlur:m,placeholder:(0,o.t)("variables.legacy-variable-query-editor.placeholder-metric-name-or-tags-query","Metric name or tags query"),required:!0,"data-testid":d.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:v.textarea})};h.displayName=p},56424:(ne,j,e)=>{"use strict";e.d(j,{g5:()=>P,tN:()=>f,Zm:()=>D,Z4:()=>C});var n=e(74848),a=e(2543),s=e(52205),d=e(92745),o=e(27489),l=e(63527),i=e(22803),c=e(80011),p=e(63142);const h=({libraryPanel:T})=>{const M=(0,p.of)(u),I=T.useState(),B=I.$timeRange?.getTimeZone(),U=I._loadedPanel?.meta;return U?(0,n.jsxs)("div",{className:M.info,children:[(0,n.jsx)("div",{className:M.libraryPanelInfo,children:(0,n.jsxs)(d.x6,{i18nKey:"dashboard-scene.library-viz-panel-info.usage-count",count:U.connectedDashboards,children:["Used on ","{{count}}"," dashboards"]})}),(0,n.jsx)("div",{className:M.libraryPanelInfo,children:(0,n.jsxs)(d.x6,{i18nKey:"dashboard-scene.library-viz-panel-info.last-edited",values:{timeAgo:(0,c.LE)(U.updated,{format:"L",timeZone:B})},components:{person:(0,n.jsxs)(n.Fragment,{children:[U.updatedBy.avatarUrl&&(0,n.jsx)("img",{className:M.userAvatar,src:U.updatedBy.avatarUrl,alt:`Avatar for ${U.updatedBy.name}`}),U.updatedBy.name]})},children:["{{timeAgo}}"," by","<person />"]})})]}):null},u=T=>({info:(0,i.css)({lineHeight:1}),libraryPanelInfo:(0,i.css)({color:T.colors.text.secondary,fontSize:T.typography.bodySmall.fontSize}),userAvatar:(0,i.css)({borderRadius:T.shape.radius.circle,boxSizing:"content-box",width:"22px",height:"22px",paddingLeft:T.spacing(1),paddingRight:T.spacing(1)})});var r=e(82345),v=e(25797),g=e(51156);const E="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",x="An override rule exists for this property";function m(T,M,I){const B=[];if(I){for(const W of I)for(const V of W.fields)if((0,a.get)(V.config,T.path)!=null){B.push({type:"data",description:E,tooltip:E});break}}return M.overrides.some(W=>W.properties.some(V=>V.id===T.id))&&B.push({type:"rule",description:x,tooltip:x}),B}var y=e(61215);function b({data:T,replaceVariables:M,options:I,eventBus:B,instanceState:U}){const W=T?.series??[];return{data:W,replaceVariables:M,options:I,eventBus:B,getSuggestions:z=>(0,r.Hf)(W,z),instanceState:U,annotations:T?.annotations}}function D(T){const{plugin:M,panel:I,onPanelOptionsChanged:B,onFieldConfigsChange:U,data:W,dashboard:V,instanceState:z}=T,R=I.getOptions(),O=I.fieldConfig,N={},F=b({data:W,replaceVariables:I.replaceVariables,options:R,eventBus:V.events,instanceState:z}),G=K=>{const w=(K&&K[0])??`${M.meta.name}`,Q=N[w];return Q||(N[w]=new v.C({title:w,id:w,sandboxId:M.meta.id}))},H={getValue:K=>(0,a.get)(R,K),onChange:(K,w)=>{const Q=(0,y.Sf)(R,K,w);B(Q)}};P(M.meta.id,M.getPanelOptionsSupplier(),H,G,F);for(const K of M.fieldConfigRegistry.list()){if(K.isCustom){if(K.showIf&&!K.showIf(O.defaults.custom,W?.series,W?.annotations))continue}else if(K.showIf&&!K.showIf(O.defaults,W?.series,W?.annotations))continue;if(K.hideFromDefaults)continue;const w=G(K.category),Q=K.editor,k=O.defaults,te=K.isCustom?k.custom?(0,a.get)(k.custom,K.path):void 0:(0,a.get)(k,K.path);K.getItemsCount&&(w.props.itemsCount=K.getItemsCount(te));const q=`${M.meta.id}-${K.path}`;w.addItem(new g.v({title:K.name,id:q,description:K.description,overrides:m(K,O,W?.series),render:function(){const re=Y=>{U((0,y.EQ)(O,K.path,Y,K.isCustom))};return(0,n.jsx)(Q,{value:te,onChange:re,item:K,context:F,id:q})}}))}return Object.values(N)}function f(T){const M=new v.C({title:(0,d.t)("dashboard.get-library-viz-panel-options-category.descriptor.title.library-panel-options","Library panel options"),id:"Library panel options",isOpenDefault:!0});return M.addItem(new g.v({title:(0,d.t)("dashboard.get-library-viz-panel-options-category.title.name","Name"),id:"library-panel-name",value:T,popularRank:1,render:function(B){return(0,n.jsx)(l.p,{id:B.props.id,"data-testid":"library panel name input",defaultValue:T.state.name,onBlur:U=>T.setState({name:U.currentTarget.value})})}})).addItem(new g.v({title:(0,d.t)("dashboard.get-library-viz-panel-options-category.title.information","Information"),id:"library-panel-information",render:function(){return(0,n.jsx)(h,{libraryPanel:T})}})),M}function C(T){const{plugin:M,panel:I,data:B,eventBus:U,instanceState:W}=T,V={},z=G=>{const H=G?.[0]??M.meta.name,K=V[H];return K||(V[H]=new v.C({title:H,id:H,sandboxId:M.meta.id}))},R=I.state.options,O={getValue:G=>(0,a.get)(R,G),onChange:(G,H)=>{G==="timeCompare"&&(0,o.rR)("panel_setting_interaction",{viz_type:M.meta.id,feature_type:"time_comparison",option_type:H?"toggle_enabled":"toggle_disabled"});const K=(0,y.Sf)(R,G,H);I.onOptionsChange(K)}},N=b({data:B,replaceVariables:I.interpolate,options:R,eventBus:U,instanceState:W});P(M.meta.id,M.getPanelOptionsSupplier(),O,z,N);const F=I.state.fieldConfig;for(const G of M.fieldConfigRegistry.list()){const H=G.showIf&&(G.isCustom?!G.showIf(F.defaults.custom,B?.series,B?.annotations):!G.showIf(F.defaults,B?.series,B?.annotations));if(G.hideFromDefaults||H)continue;const K=z(G.category),w=G.editor,Q=F.defaults,k=G.isCustom?Q.custom?(0,a.get)(Q.custom,G.path):void 0:(0,a.get)(Q,G.path);G.getItemsCount&&(K.props.itemsCount=G.getItemsCount(k));const te=`${M.meta.id}-${G.path}`;K.addItem(new g.v({title:G.name,id:te,description:G.description,overrides:m(G,F,B?.series),render:function(){const se=re=>{I.onFieldConfigChange((0,y.EQ)(F,G.path,re,G.isCustom),!0)};return(0,n.jsx)(w,{value:k,onChange:se,item:G,context:N,id:te})}}))}return Object.values(V)}function P(T,M,I,B,U,W){const V=new s.pv;M(V,U);for(const z of V.getItems()){if(z.showIf&&!z.showIf(U.options,U.data,U.annotations))continue;const R=`${T}-${z.id}`;let O=W;if(O?z.category?.[0]?.length&&(O=O.getCategory(z.category[0])):O=B(z.category),(0,s.iF)(z)){const F=z.getNestedValueAccess(I),G=F.getContext?F.getContext(U):{...U,options:I.getValue(z.path)};P(R,z.getBuilder(),F,B,G,O);continue}const N=z.editor;O.addItem(new g.v({title:z.name,id:R,description:z.description,render:function(){return(0,n.jsx)(N,{value:I.getValue(z.path),onChange:G=>{I.onChange(z.path,G)},item:z,context:U,id:R})}}))}}},56476:(ne,j,e)=>{"use strict";e.d(j,{Au:()=>i,Uo:()=>d,dM:()=>s,gw:()=>l,jw:()=>c,v2:()=>u,zl:()=>p});var n=e(52161),a=e(22628);const s=r=>r===n.hY,d=r=>{const v=l(r,a.T.Provenance);return!!(v&&v!==a.rh)},o="grafana.com/access/",l=(r,v)=>r.metadata?.annotations?.[v],i=r=>l(r,a.T.AccessWrite)==="true",c=r=>l(r,a.T.AccessAdmin)==="true",p=r=>l(r,a.T.AccessDelete)==="true",h=r=>r.replaceAll(/\\/g,"\\\\").replaceAll(/\=/g,"\\=").replaceAll(/,/g,"\\,"),u=r=>r.map(([v,g,E="="])=>`${v}${E}${h(g)}`).join(",")},56620:(ne,j,e)=>{"use strict";e.d(j,{U:()=>p});var n=e(74848),a=e(96540),s=e(7389),d=e(92745),o=e(37386),l=e(77824),i=e(51702);const c=[{label:"On dashboard load",value:s.CO.onDashboardLoad},{label:"On time range change",value:s.CO.onTimeRangeChanged}];function p({onChange:h,refresh:u,testId:r}){const v=!(0,i.i)("sm"),g=(0,a.useMemo)(()=>c.find(E=>E.value===u)?.value??c[0].value,[u]);return(0,n.jsx)(o.D,{label:(0,d.t)("variables.query-variable-refresh-select.label-refresh","Refresh"),description:(0,d.t)("variables.query-variable-refresh-select.description-update-values-variable","When to update the values of this variable"),"data-testid":r,children:(0,n.jsx)(l.z,{options:c,onChange:h,value:g,size:v?"sm":"md"})})}},56623:(ne,j,e)=>{"use strict";e.d(j,{p:()=>a});var n=e(82612);function a(s){return s.type==="graph"||s.type==="graphite"?s.xaxis?.mode==="series"?s.legend?.values?"bargauge":"barchart":s.xaxis?.mode==="histogram"?"histogram":"timeseries":n.NB[s.type]}},56652:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{AlertmanagerTemplateFunction:()=>a,GomplateFunctions:()=>s,availableAlertManagerFunctions:()=>d,builtinFunctions:()=>l,conf:()=>p,keywords:()=>i,language:()=>c});var n=(h=>(h.Delimiter="delimiter",h.Keyword="keyword",h.Function="type.identifier",h.String="string",h.Variable="variable.name",h.Number="number",h.Comment="comment",h.Operator="operator",h.Identifier="idenfifier",h))(n||{}),a=(h=>(h.toUpper="toUpper",h.toLower="toLower",h.title="title",h.join="join",h.match="match",h.safeHtml="safeHtml",h.reReplaceAll="reReplaceAll",h.stringSlice="stringSlice",h))(a||{});const s={coll:[{keyword:"coll.Dict",definition:"Creates a map with string keys from key/value pairs. All keys are converted to strings. If an odd number of arguments is provided, the last is used as the key with an empty string value.",usage:"function(key string, val any, ...)",example:'{{ coll.Dict "name" "Frank" "age" 42 | data.ToYAML }}'},{keyword:"coll.Slice",definition:"Creates a slice (like an array or list). Useful when needing to range over a bunch of variables.",usage:"function(in ...any)",example:'{{ range coll.Slice "Bart" "Lisa" "Maggie" }}Hello, {{ . }}{{ end }}'},{keyword:"coll.Append",definition:"Appends a value to the end of a list. Creates a new list rather than modifying the input.",usage:"function(value any, list []any)",example:"{{ coll.Slice 1 1 2 3 | append 5 }}"}],data:[{keyword:"data.JSON",definition:"Converts a JSON string into an object. Works for JSON Objects and Arrays.",usage:"function(json string)",example:"{{ ($json | data.JSON).hello }}"},{keyword:"data.ToJSON",definition:"Converts an object to a JSON document.",usage:"function(obj any)",example:'{{ (`{"foo":{"hello":"world"}}` | json).foo | data.ToJSON }}'},{keyword:"data.ToJSONPretty",definition:"Converts an object to a pretty-printed (indented) JSON document.",usage:"function(indent string, obj any)",example:'{{ `{"hello":"world"}` | data.JSON | data.ToJSONPretty "  " }}'}],tmpl:[{keyword:"tmpl.Exec",definition:"Execute (render) the named template. This is equivalent to using the `template` action, except the result is returned as a string. This allows for post-processing of templates.",usage:"function(name string, [context any])",example:'{{ tmpl.Exec "T1" | strings.ToUpper }}'},{keyword:"tmpl.Inline",definition:"Render the given string as a template, just like a nested template. If the template is given a name, it can be re-used later with the `template` keyword. A context can be provided, otherwise the default gomplate context will be used.",usage:"function(partial string, context any)",example:'{{ tmpl.Inline "{{print `hello world`}}" }}'}],time:[{keyword:"time.Now",definition:"Returns the current local time, as a time.Time. This wraps Go's time.Now.",usage:"function()",example:'{{ (time.Now).UTC.Format "Day 2 of month 1 in year 2006 (timezone MST)" }}'}]},d=[...Object.values(a),...Object.keys(s).map(h=>h)],l=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],i=["define","if","else","end","range","break","continue","template","block","with"],c={defaultToken:"",keywords:i,functions:[...l,...d],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},p={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},56755:(ne,j,e)=>{"use strict";e.d(j,{BP:()=>l,m3:()=>c,sE:()=>i,v3:()=>o});var n=e(96540),a=e(16515),s=e(38809),d=e(97958);function o(p,h){return p?h.display.has(p)||h.raw.has(p):!1}function l(p,h){const u={display:new Set,raw:new Set,fields:new Map};for(const r of p)for(const v of r.fields){if(h&&!h(v))continue;const g=(0,a.Ct)(v,r,p);u.display.add(g),u.fields.set(g,v),v.name&&g!==v.name&&(u.raw.add(v.name),u.fields.set(v.name,v))}return u}function i(p,h){return(0,n.useMemo)(()=>l(p,h),[p,h])}function c(p,h,u,r,v){return(0,n.useMemo)(()=>{let g=!1;const E=[];if(u&&E.push(u),v===s.X4.OnlyBaseNames)for(const x of p.raw)!g&&x===h&&(g=!0),E.push({value:x,label:`${x} (base field name)`});else{for(const x of p.display){!g&&x===h&&(g=!0);const m=p.fields.get(x);(!r||r===m?.type)&&E.push({value:x,label:x,icon:m?(0,d.SS)(m):void 0})}if(v!==s.X4.ExcludeBaseNames)for(const x of p.raw)p.display.has(x)||(!g&&x===h&&(g=!0),E.push({value:x,label:`${x} (base field name)`}))}return h&&!g&&E.push({value:h,label:`${h} (not found)`}),E},[p,h,u,r,v])}},56873:(ne,j,e)=>{"use strict";e.d(j,{F:()=>v});var n=e(74848),a=e(22803),s=e(18828),d=e(43107),o=e(93225),l=e(59875),i=e(96540),c=e(92745),p=e(63142),h=e(34999),u=e(45861),r=e(76319);const v=({images:E})=>{const[x,m]=(0,i.useState)(null),[y,b]=(0,i.useState)({}),[D,f]=(0,i.useState)(E),C=(0,i.useId)(),P=(0,p.of)(g),T=(0,p.of)(u.my),M=F=>{b(G=>({...G,[F]:!0}))};(0,i.useEffect)(()=>{const F=E.filter(G=>!y[G.path]);f(F)},[y,E]);const I=F=>{m(F)},B=()=>{m(null)},U=()=>{x!==null&&D.length>0&&m((x+1)%D.length)},W=()=>{x!==null&&D.length>0&&m((x-1+D.length)%D.length)},V=F=>{if(x!==null)switch(F.key){case"ArrowRight":U();break;case"ArrowLeft":W();break;case"Escape":B();break;default:break}},z=(0,i.useRef)(null),{overlayProps:R,underlayProps:O}=(0,o.e)({isOpen:x!==null,onClose:B},z),{dialogProps:N}=(0,s.s)({},z);return D.length===0?(0,n.jsx)(h.F,{title:(0,c.t)("carousel.error","Something went wrong loading images"),severity:"warning","data-testid":"alert-warning"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,a.cx)(P.imageGrid),children:D.map((F,G)=>{const H=`${C}-carousel-image-${G}`;return(0,n.jsxs)("button",{"aria-label":(0,c.t)("grafana-ui.carousel.aria-label-open-image","Open image preview"),"aria-describedby":H,type:"button",onClick:()=>I(G),className:(0,a.cx)(T,P.imageButton),children:[(0,n.jsx)("img",{src:F.path,alt:"",onError:()=>M(F.path)}),(0,n.jsx)("p",{id:H,children:F.name})]},F.path)})}),x!==null&&(0,n.jsxs)(l.Sf,{children:[(0,n.jsx)("div",{role:"presentation",className:P.underlay,onClick:B,...O}),(0,n.jsx)(d.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsxs)("div",{"data-testid":"carousel-full-screen",ref:z,...R,...N,onKeyDown:V,className:P.overlay,children:[(0,n.jsx)(r.K,{name:"times","aria-label":(0,c.t)("carousel.close","Close"),size:"xl",onClick:B,className:(0,a.cx)(P.closeButton)}),(0,n.jsx)(r.K,{size:"xl",name:"angle-left","aria-label":(0,c.t)("carousel.previous","Previous"),onClick:W,"data-testid":"previous-button"}),(0,n.jsx)("div",{className:P.imageContainer,"data-testid":"carousel-full-image",children:(0,n.jsx)("img",{className:P.imagePreview,src:D[x].path,alt:D[x].name,onError:()=>M(D[x].path)})}),(0,n.jsx)(r.K,{size:"xl",name:"angle-right","aria-label":(0,c.t)("carousel.next","Next"),onClick:U,"data-testid":"next-button"})]})})]})]})},g=E=>({imageButton:(0,a.css)({textAlign:"left"}),imageContainer:(0,a.css)({display:"flex",justifyContent:"center",flex:1}),imagePreview:(0,a.css)({borderRadius:E.shape.radius.lg,maxWidth:"100%",maxHeight:"80vh",objectFit:"contain"}),imageGrid:(0,a.css)({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:E.spacing(2),marginBottom:"20px","& img":{width:"100%",height:"150px",objectFit:"cover",border:E.colors.border.strong,borderRadius:E.shape.radius.default,boxShadow:E.shadows.z1},"& p":{margin:E.spacing(.5,0),fontWeight:E.typography.fontWeightMedium,color:E.colors.text.primary}}),underlay:(0,a.css)({position:"fixed",zIndex:E.zIndex.modalBackdrop,inset:0,backgroundColor:E.components.overlay.background}),overlay:(0,a.css)({alignItems:"center",display:"flex",gap:E.spacing(1),height:"fit-content",marginBottom:"auto",marginTop:"auto",padding:E.spacing(2),position:"fixed",inset:0,zIndex:E.zIndex.modal}),closeButton:(0,a.css)({color:E.colors.text.primary,position:"fixed",top:E.spacing(2),right:E.spacing(2)})})},56887:(ne,j,e)=>{"use strict";e.d(j,{_:()=>a,y:()=>s});var n=e(96540);const a=(0,n.createContext)(void 0);function s(d){if(!d)return{};const o=(0,n.useContext)(a);if(!o)return{};const l=o.selected.some(p=>p.id===d),i=(0,n.useCallback)((p,h={})=>{o.enabled&&(p.stopPropagation(),p.shiftKey&&(p.preventDefault(),window.getSelection()?.empty()),o.onSelect({id:d},{...h,multi:h.multi??p.shiftKey}))},[o,d]),c=(0,n.useCallback)(()=>{o.enabled&&o.onClear()},[o]);return{isSelected:l,onSelect:i,onClear:c,isSelectable:o.enabled}}},57204:(ne,j,e)=>{"use strict";e.d(j,{y:()=>l});var n=e(39796),a=e(1906),s=e(46933),d=e(2863),o=e(36580);async function l(i,c,p,h){let u=p;const r={...i.getRef(),uid:c},v={...i?.getDefaultQuery?.(a.Jk.PanelEditor),datasource:r,refId:"A"};if(h?.meta.id!==i.meta.id){if(i.meta.mixed)return p;if((0,s.Ee)(h)&&(0,s.FL)(i)){const g=await h.exportToAbstractQueries(p);u=await i.importFromAbstractQueries(g)}else if(h&&i.importQueries)u=await i.importQueries(p,h);else{if(h){const g=(0,d.w)(),E=[];let x=i.uid;const m=g.containsTemplate(c);m&&(x=g.replace(i.uid));const y=p.reduce((b,D)=>{if(D.datasource){let f=D.datasource.uid;const C=g.containsTemplate(f);if(C&&(f=g.replace(D.datasource.uid)),f===x&&C===m)return D.refId=(0,n.M)(b),b.concat([D])}return b},E);if(y.length>0)return y}return[v]}}return u.length===0?[v]:u.map(g=>(!(0,o.s9)(g.datasource)&&!i.meta.mixed&&(g.datasource=r),g))}},57339:(ne,j,e)=>{"use strict";e.d(j,{o:()=>i,t:()=>c});var n=e(74848),a=e(92745),s=e(63142),d=e(18027),o=e(21285),l=e(89772);const i=p=>{const{yaxis:h,onToggleAxis:u,color:r,...v}=p,g=(0,a.t)("grafana-ui.series-color-picker-popover.y-axis-usage","Use right y-axis"),E=u?{yaxis:{name:"Y-Axis",tabComponent(){return(0,n.jsx)(d.I,{labelWidth:20,label:g,children:(0,n.jsx)(o.K,{value:h===2,label:g,onChange:u})})}}}:void 0;return(0,n.jsx)(l.$,{...v,color:r||"#000000",customPickers:E})},c=(0,s.cV)(i)},57444:(ne,j,e)=>{"use strict";e.d(j,{H:()=>s});var n=e(739),a=e(59427);function s(o,l){return d((0,a.UI)(o,l?.field),l)}function d(o,l){if(!o){const p=l.fixed??0;return{isAssumed:!!l.field?.length||!l.fixed,fixed:p,value:()=>p,get:()=>p}}let i=p=>p%l.max;return l.mode===n.WQ.Clamped&&(i=p=>p<l.min?l.min:p>l.max?l.max:p),{field:o,get:p=>{const h=o.values[p];return h===null||typeof h!="number"?0:i(h)},value:()=>(0,a.sB)(o)}}},57455:(ne,j,e)=>{"use strict";e.d(j,{A:()=>le});var n=e(74848),a=e(22803),s=e(96540),d=e(35557),o=e(51898),l=e(92745),i=e(43173),c=e(63142),p=e(41654),h=e(31286),u=e(66404),r=e(45861),v=e(89640),g=e(16817),E=e(78282),x=e(68143),m=e(36490),y=e(13943),b=e(75103),D=e(7728),f=e(52621),C=e(36422),P=e(26531),T=e(96820),M=e(83203),I=e(27489);const B=1,U={loaded:ie=>{W("loaded",ie)},itemClicked:ie=>{W("item_clicked",ie)}},W=(ie,oe)=>{(0,I.rR)(`grafana_dashboard_library_${ie}`,{...oe,schema_version:B})},V=()=>{const[ie]=(0,d.useSearchParams)(),oe=ie.get("dashboardLibraryDatasourceUid"),[ue,ye]=(0,s.useState)(!1),{value:fe}=(0,g.A)(async()=>{if(!oe)return[];const Pe=(0,E.l)().getInstanceSettings(oe);if(!Pe)return[];try{const Ve=await(0,x.AI)().get(`api/plugins/${Pe.type}/dashboards`,void 0,void 0,{showErrorAlert:!1});return Ve.length>0&&U.loaded({numberOfItems:Ve.length,contentKinds:["datasource_dashboard"],datasourceTypes:[Pe.type],sourceEntryPoint:"datasource_page"}),Ve}catch(Ve){return console.error("Error loading template dashboards",Ve),[]}},[oe]),Ee=fe&&fe.length>3,Ae=ue?fe:fe?.slice(0,3),Ge=(0,c.of)(R,Ae?.length),Fe=async Pe=>{U.itemClicked({contentKind:"datasource_dashboard",datasourceTypes:[Pe.pluginId],libraryItemId:Pe.uid,libraryItemTitle:Pe.title,sourceEntryPoint:"datasource_page"});const Ve=new URLSearchParams({datasource:oe||"",title:Pe.title||"Template",pluginId:Pe.pluginId,path:Pe.path,sourceEntryPoint:"datasource_page",libraryItemId:Pe.uid,creationOrigin:"dashboard_library_datasource_dashboard"}),me=`${M.g.Template}?${Ve.toString()}`;m.Ny.push(me)};return fe?.length?(0,n.jsx)(h.a,{borderRadius:"lg",borderColor:"strong",borderStyle:"dashed",padding:4,flex:1,children:(0,n.jsxs)(p.B,{direction:"column",alignItems:"center",gap:2,children:[(0,n.jsx)(u.E,{element:"h3",textAlignment:"center",weight:"medium",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.start-with-suggested-dashboards",children:"Start with a pre-made dashboard from your data source"})}),(0,n.jsx)(h.a,{marginTop:2,children:(0,n.jsx)(y.x,{gap:4,columns:{xs:1,sm:(Ae?.length||1)>=2?2:1,lg:(Ae?.length||1)>=3?3:(Ae?.length||1)>=2?2:1},children:Ae?.map((Pe,Ve)=>(0,n.jsx)(z,{index:Ve,dashboard:Pe,onImportClick:Fe},Pe.uid))||[]})}),Ee&&(0,n.jsx)(r.$n,{variant:"secondary",fill:"outline",size:"sm",onClick:()=>ye(Pe=>!Pe),className:Ge.showMoreButton,children:ue?(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.show-less-dashboards",children:"Show less"}):(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.show-more-dashboards",children:"Show more"})})]})}):null},z=({dashboard:ie,onImportClick:oe,index:ue})=>{const ye=[b,D,f,C,P,T],fe=(0,c.of)(R);return(0,n.jsxs)("div",{className:fe.templateDashboardBox,children:[(0,n.jsx)("img",{src:ue<=5?ye[ue]:ye[ue%ye.length],width:285,height:160,alt:ie.title,className:fe.templateDashboardImage}),(0,n.jsx)("div",{className:fe.templateDashboardTitle,children:(0,n.jsx)(u.E,{element:"p",textAlignment:"center",children:ie.title})}),(0,n.jsx)(r.$n,{fill:"outline",onClick:()=>oe(ie),size:"sm",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.use-template-button",children:"Use this dashboard"})})]})};function R(ie,oe){return{templateDashboardBox:(0,a.css)({display:"flex",flexDirection:"column",gap:ie.spacing(1),alignItems:"center"}),templateDashboardTitle:(0,a.css)({flex:1}),templateDashboardImage:(0,a.css)({borderRadius:ie.shape.radius.default,borderColor:ie.colors.text.primary,borderWidth:1,borderStyle:"solid",objectFit:"cover"}),showMoreButton:(0,a.css)({marginTop:ie.spacing(2)})}}var O=e(54092),N=e(33604),F=e(22099),G=e(11098);function H(ie){return i.$.featureToggles.enableDashboardEmptyExtensions!==!0?ie.renderDefaultUI():(0,n.jsx)(K,{...ie})}function K(ie){const{components:oe,isLoading:ue}=(0,N.f)({extensionPointId:O.SM.DashboardEmpty});return ue?(0,n.jsx)(G.A,{}):(0,F.RC)({props:ie,components:oe,limit:1,pluginId:"grafana-setupguide-app"})??ie.renderDefaultUI()}var w=e(23656),Q=e(11534),k=e(23289),te=e(55266),q=e(52763),se=e(37918),re=e(77731);const Y=({dashboard:ie})=>{const{isReadOnlyRepo:oe}=(0,te.T)({folderName:ie instanceof Q.H$?ie.state.meta.folderUid:ie.meta.folderUid});return oe},X=({dashboard:ie,canCreate:oe,isReadOnlyRepo:ue})=>{const ye=(0,q.wA)(),fe=(0,q.d4)(Ee=>Ee.dashboard.initialDatasource);return(0,s.useMemo)(()=>{if(!(!oe||ue))return()=>{if(ie instanceof Q.H$){const Ee=ie.onCreateNewPanel();ie.setState({editPanel:(0,w.L)(Ee,!0)}),m.Ny.partial({firstPanel:!0})}else{const Ee=(0,re.OK)(ie,fe);ye((0,se.Ub)(void 0)),m.Ny.partial({editPanel:Ee,firstPanel:!0})}k.c.emptyDashboardButtonClicked({item:"add_visualization"})}},[oe,ue,ie,ye,fe])},J=({dashboard:ie,canCreate:oe,isReadOnlyRepo:ue})=>{const ye=ie instanceof Q.H$&&ie.isManagedRepository();return(0,s.useMemo)(()=>{if(!(!oe||ye||ue))return()=>{k.c.emptyDashboardButtonClicked({item:"import_from_library"}),ie instanceof Q.H$?ie.onShowAddLibraryPanelDrawer():(0,re.s3)(ie)}},[oe,ye,ue,ie])},_=({dashboard:ie,canCreate:oe,isReadOnlyRepo:ue})=>{const ye=ie instanceof Q.H$&&ie.isManagedRepository();return(0,s.useMemo)(()=>{if(!(!oe||ye||ue))return()=>{k.c.emptyDashboardButtonClicked({item:"import_dashboard"}),(0,re.VF)()}},[oe,ue,ye])},ee=({onAddVisualization:ie,onAddLibraryPanel:oe,onImportDashboard:ue})=>{const ye=(0,c.of)(L),[fe]=(0,d.useSearchParams)(),Ee=fe.get("dashboardLibraryDatasourceUid");return(0,n.jsx)(p.B,{alignItems:"center",justifyContent:"center",children:(0,n.jsx)("div",{className:(0,a.cx)(ye.wrapper,{[ye.wrapperMaxWidth]:!i.$.featureToggles.dashboardLibrary||!Ee}),children:(0,n.jsxs)(p.B,{alignItems:"stretch",justifyContent:"center",gap:4,direction:"column",children:[(0,n.jsx)(h.a,{borderRadius:"lg",borderColor:"strong",borderStyle:"dashed",padding:4,children:(0,n.jsxs)(p.B,{direction:"column",alignItems:"center",gap:2,children:[(0,n.jsx)(u.E,{element:"h1",textAlignment:"center",weight:"medium",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-visualization-header",children:"Start your new dashboard by adding a visualization"})}),(0,n.jsx)(h.a,{marginBottom:2,paddingX:4,children:(0,n.jsx)(u.E,{element:"p",textAlignment:"center",color:"secondary",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-visualization-body",children:"Select a data source and then query and visualize your data with charts, stats and tables or create lists, markdowns and other widgets."})})}),(0,n.jsx)(r.$n,{size:"lg",icon:"plus","data-testid":o.Tp.pages.AddDashboard.itemButton("Create new panel button"),onClick:ie,disabled:!ie,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-visualization-button",children:"Add visualization"})})]})}),i.$.featureToggles.dashboardLibrary&&Ee&&(0,n.jsx)(V,{}),(0,n.jsxs)(p.B,{direction:{xs:"column",md:"row"},wrap:"wrap",gap:4,children:[(0,n.jsx)(h.a,{borderRadius:"lg",borderColor:"strong",borderStyle:"dashed",padding:3,flex:1,children:(0,n.jsxs)(p.B,{direction:"column",alignItems:"center",gap:1,children:[(0,n.jsx)(u.E,{element:"h3",textAlignment:"center",weight:"medium",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-library-panel-header",children:"Import panel"})}),(0,n.jsx)(h.a,{marginBottom:2,children:(0,n.jsx)(u.E,{element:"p",textAlignment:"center",color:"secondary",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-library-panel-body",children:"Add visualizations that are shared with other dashboards."})})}),(0,n.jsx)(r.$n,{icon:"plus",fill:"outline","data-testid":o.Tp.pages.AddDashboard.itemButton("Add a panel from the panel library button"),onClick:oe,disabled:!oe,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-library-panel-button",children:"Add library panel"})})]})}),(0,n.jsx)(h.a,{borderRadius:"lg",borderColor:"strong",borderStyle:"dashed",padding:3,flex:1,children:(0,n.jsxs)(p.B,{direction:"column",alignItems:"center",gap:1,children:[(0,n.jsx)(u.E,{element:"h3",textAlignment:"center",weight:"medium",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.import-a-dashboard-header",children:"Import a dashboard"})}),(0,n.jsx)(h.a,{marginBottom:2,children:(0,n.jsx)(u.E,{element:"p",textAlignment:"center",color:"secondary",children:(0,n.jsxs)(l.x6,{i18nKey:"dashboard.empty.import-a-dashboard-body",children:["Import dashboards from files or"," ",(0,n.jsx)(v.Y,{external:!0,href:"https://grafana.com/grafana/dashboards/",children:"grafana.com"}),"."]})})}),(0,n.jsx)(r.$n,{icon:"upload",fill:"outline","data-testid":o.Tp.pages.AddDashboard.itemButton("Import dashboard button"),onClick:ue,disabled:!ue,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.import-dashboard-button",children:"Import dashboard"})})]})})]})]})})})},le=ie=>{const oe=Y(ie),ue=X({...ie,isReadOnlyRepo:oe}),ye=J({...ie,isReadOnlyRepo:oe}),fe=_({...ie,isReadOnlyRepo:oe});return(0,n.jsx)(H,{renderDefaultUI:(0,s.useCallback)(()=>(0,n.jsx)(ee,{onAddVisualization:ue,onAddLibraryPanel:ye,onImportDashboard:fe}),[ue,ye,fe]),onAddVisualization:ue,onAddLibraryPanel:ye,onImportDashboard:fe})};function L(ie){return{wrapper:(0,a.css)({label:"dashboard-empty-wrapper",flexDirection:"column",gap:ie.spacing.gridSize*4,paddingTop:ie.spacing(2),[ie.breakpoints.up("sm")]:{paddingTop:ie.spacing(12)}}),wrapperMaxWidth:(0,a.css)({maxWidth:"890px"})}}},57487:(ne,j,e)=>{"use strict";e.d(j,{B:()=>o});var n=e(74848),a=e(22803),s=e(63142),d=e(6106);const o=({renderExpandedContent:i,...c})=>{const p=(0,s.of)(l);return(0,n.jsx)(d.E,{renderExpandedContent:i?(h,u,r)=>(0,n.jsxs)(n.Fragment,{children:[u!==r.length-1&&(0,n.jsx)("div",{className:(0,a.cx)(p.contentGuideline,p.guideline)}),i(h,u,r)]}):void 0,renderPrefixHeader:()=>(0,n.jsx)("div",{className:p.relative,children:(0,n.jsx)("div",{className:(0,a.cx)(p.headerGuideline,p.guideline)})}),renderPrefixCell:(h,u,r)=>(0,n.jsxs)("div",{className:p.relative,children:[(0,n.jsx)("div",{className:(0,a.cx)(p.topGuideline,p.guideline)}),u!==r.length-1&&(0,n.jsx)("div",{className:(0,a.cx)(p.bottomGuideline,p.guideline)})]}),...c})},l=i=>({relative:(0,a.css)({position:"relative",height:"100%"}),guideline:(0,a.css)({left:"-19px",borderLeft:`1px solid ${i.colors.border.weak}`,position:"absolute",[i.breakpoints.down("md")]:{display:"none"}}),topGuideline:(0,a.css)({width:"18px",borderBottom:`1px solid ${i.colors.border.medium}`,top:0,bottom:"50%"}),bottomGuideline:(0,a.css)({top:"50%",bottom:0}),contentGuideline:(0,a.css)({top:0,bottom:0,left:"-49px !important"}),headerGuideline:(0,a.css)({top:"-17px",bottom:0})})},57688:(ne,j,e)=>{"use strict";e.d(j,{e:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(24726),o=e(51898),l=e(92745),i=e(63142),c=e(35484),p=e(28473),h=e(45861),u=e(30703);const r=({onFileUpload:g,className:E,children:x="Upload file",accept:m="*",size:y="md",showFileName:b})=>{const D=(0,i.of)(v(y)),[f,C]=(0,s.useState)(""),P=(0,d.A)(),T=(0,s.useCallback)(M=>{const I=M.currentTarget?.files?.[0];I&&C(I.name??""),g(M)},[g]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",id:P,className:D.fileUpload,onChange:T,multiple:!1,accept:m,"data-testid":o.Tp.components.FileUpload.inputField}),(0,n.jsxs)("label",{htmlFor:P,className:(0,a.cx)(D.labelWrapper,E),children:[(0,n.jsx)(u.I,{name:"upload",className:D.icon}),x]}),b&&f&&(0,n.jsx)("span",{"aria-label":(0,l.t)("grafana-ui.file-upload.file-name","File name"),className:D.fileName,"data-testid":o.Tp.components.FileUpload.fileNameSpan,children:(0,p.i)(f)})]})},v=g=>E=>{const x=(0,h.hs)({theme:E,variant:"primary",size:g,iconOnly:!1}),m=(0,c.getFocusStyles)(E);return{fileUpload:(0,a.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":m,"&:focus-visible + label":m}),labelWrapper:x.button,icon:x.icon,fileName:(0,a.css)({marginLeft:E.spacing(.5)})}}},57852:(ne,j,e)=>{"use strict";e.d(j,{LL:()=>p,LO:()=>d,NI:()=>c,Tp:()=>h,We:()=>o,b_:()=>a,gc:()=>l,ql:()=>s,wE:()=>i});var n=e(68388);class a extends n.x{static{this.type="data-hover"}}class s extends n.a{static{this.type="data-hover-clear"}}class d extends n.x{static{this.type="data-select"}}class o extends n.x{static{this.type="annotation-event"}}class l extends n.x{static{this.type="dashboard-loaded"}}class i extends n.a{static{this.type="datasource-updated-successfully"}}class c extends n.a{static{this.type="datasource-test-succeeded"}}class p extends n.a{static{this.type="datasource-test-failed"}}class h extends n.x{static{this.type="set-panel-attention"}}},57866:(ne,j,e)=>{"use strict";e.d(j,{Ct:()=>a,Js:()=>d,cV:()=>n,jR:()=>s});var n=(o=>(o.anyMatch="anyMatch",o.allMatch="allMatch",o.invertMatch="invertMatch",o.alwaysMatch="alwaysMatch",o.neverMatch="neverMatch",o))(n||{}),a=(o=>(o.numeric="numeric",o.time="time",o.first="first",o.firstTimeField="firstTimeField",o.byType="byType",o.byTypes="byTypes",o.byName="byName",o.byNames="byNames",o.byRegexp="byRegexp",o.byRegexpOrNames="byRegexpOrNames",o.byFrameRefID="byFrameRefID",o.byValue="byValue",o))(a||{}),s=(o=>(o.byName="byName",o.byRefId="byRefId",o.byIndex="byIndex",o))(s||{}),d=(o=>(o.regex="regex",o.isNull="isNull",o.isNotNull="isNotNull",o.greater="greater",o.greaterOrEqual="greaterOrEqual",o.lower="lower",o.lowerOrEqual="lowerOrEqual",o.equal="equal",o.notEqual="notEqual",o.substring="substring",o.notSubstring="notSubstring",o.between="between",o))(d||{})},58138:(ne,j,e)=>{"use strict";e.d(j,{G:()=>u,Q:()=>h});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(43173),l=e(22787),i=e(63142);const c=(0,s.lazy)(()=>e.e(2835).then(e.bind(e,32835))),p=(0,s.lazy)(()=>Promise.all([e.e(8706),e.e(3605)]).then(e.bind(e,43605)));var h=(v=>(v.Loki="loki",v.Annotations="annotations",v))(h||{});function u(){const[v,g]=(0,s.useState)(!1),[E,x]=(0,s.useState)(),m=(0,i.of)(r),y=o.$.unifiedAlerting.stateHistory?.backend,b=o.$.unifiedAlerting.stateHistory?.primary,f=[y,b].some(M=>M==="loki")?"loki":"annotations",C=(0,s.useCallback)(()=>{x(void 0),g(!1)},[]),P=(0,s.useCallback)(M=>{x(M),g(!0)},[]);return{StateHistoryModal:(0,s.useMemo)(()=>E?(0,n.jsx)(l.a,{isOpen:v,onDismiss:C,closeOnBackdropClick:!0,closeOnEscape:!0,title:(0,d.t)("alerting.use-state-history-modal.state-history-modal.title-state-history","State history"),className:m.modal,contentClassName:m.modalContent,children:(0,n.jsxs)(s.Suspense,{fallback:"Loading...",children:[f==="loki"&&(0,n.jsx)(p,{ruleUID:E.grafana_alert.uid}),f==="annotations"&&(0,n.jsx)(c,{ruleUID:E.grafana_alert.uid??""})]})}):null,[E,v,C,f,m]),showStateHistoryModal:P,hideStateHistoryModal:C}}const r=v=>({modal:(0,a.css)({width:"80%",height:"80%",minWidth:"800px"}),modalContent:(0,a.css)({height:"100%",width:"100%",padding:v.spacing(2)})})},58228:(ne,j,e)=>{"use strict";e.d(j,{b:()=>y});var n=e(74848),a=e(22803),s=e(96540),d=e(24726),o=e(63142),l=e(47730),i=e(89332),c=e(92745),p=e(51898),h=e(41654),u=e(30703),r=e(63527),v=e(76319);function g({item:f,index:C,onChange:P,onRemove:T}){const M=(0,o.of)(E),I=W=>{f.value!==W.currentTarget.value&&P({...f,value:W.currentTarget.value})},B=W=>{f.label!==W.currentTarget.value&&P({...f,label:W.currentTarget.value})},U=()=>T(f);return(0,n.jsx)(i.sx,{draggableId:f.id,index:C,children:W=>(0,n.jsxs)("tr",{ref:W.innerRef,"data-testid":p.Tp.pages.Dashboard.Settings.Variables.Edit.StaticOptionsEditor.row,...W.draggableProps,children:[(0,n.jsx)("td",{children:(0,n.jsx)(h.B,{direction:"row",alignItems:"center","data-testid":p.Tp.pages.Dashboard.Settings.Variables.Edit.StaticOptionsEditor.moveButton,...W.dragHandleProps,children:(0,n.jsx)(u.I,{title:(0,c.t)("variables.static-options.drag-and-drop","Drag and drop to reorder"),name:"draggabledots",size:"lg",className:M.dragIcon})})}),(0,n.jsx)("td",{children:(0,n.jsx)(r.p,{value:f.value,placeholder:(0,c.t)("variables.static-options.value-placeholder","Value"),onChange:I,"data-testid":p.Tp.pages.Dashboard.Settings.Variables.Edit.StaticOptionsEditor.valueInput})}),(0,n.jsx)("td",{children:(0,n.jsx)(r.p,{value:f.label,placeholder:(0,c.t)("variables.static-options.label-placeholder","Defaults to value"),onChange:B,"data-testid":p.Tp.pages.Dashboard.Settings.Variables.Edit.StaticOptionsEditor.labelInput})}),(0,n.jsx)("td",{children:(0,n.jsx)(h.B,{direction:"row",alignItems:"center",children:(0,n.jsx)(v.K,{name:"trash-alt","aria-label":(0,c.t)("variables.static-options.remove-option-button-label","Remove option"),onClick:U,"data-testid":p.Tp.pages.Dashboard.Settings.Variables.Edit.StaticOptionsEditor.deleteButton})})})]})})}const E=f=>({dragIcon:(0,a.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${f.colors.primary.main}`,outlineOffset:"-2px"}})});function x({items:f,onChange:C}){const P=(0,o.of)(m),T=B=>{if(!B||!B.destination)return;const U=B.source.index,W=B.destination.index;if(U===W)return;const V=[...f],[z]=V.splice(U,1);V.splice(W,0,z),C(V)},M=B=>{const U=f.findIndex(V=>V.id===B.id);if(U===-1)return;const W=[...f];W[U]=B,C(W)},I=B=>{const U=f.filter(W=>W.id!==B.id);C(U)};return(0,n.jsxs)("table",{className:P.table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:P.headerIconColumn}),(0,n.jsx)("th",{className:P.headerInputColumn,children:(0,n.jsx)(c.x6,{i18nKey:"variables.static-options.value-header",children:"Value"})}),(0,n.jsx)("th",{className:P.headerInputColumn,children:(0,n.jsx)(c.x6,{i18nKey:"variables.static-options.label-header",children:"Display text"})}),(0,n.jsx)("th",{className:P.headerIconColumn})]})}),(0,n.jsx)(i.JY,{onDragEnd:T,children:(0,n.jsx)(i.gL,{droppableId:"static-options-list",direction:"vertical",children:B=>(0,n.jsxs)("tbody",{ref:B.innerRef,...B.droppableProps,children:[f.map((U,W)=>(0,n.jsx)(g,{item:U,index:W,onChange:M,onRemove:I},U.id)),B.placeholder]})})})]})}const m=f=>({table:(0,a.css)({"tbody tr":(0,a.css)({position:"relative"}),"tbody tr:hover":(0,a.css)({background:f.colors.action.hover}),"th, td":{padding:f.spacing(1),width:"49%"},"th:first-child, td:first-child, th:last-child, td:last-child":(0,a.css)({width:"1%"})}),headerIconColumn:(0,a.css)({width:"1%"}),headerInputColumn:(0,a.css)({width:"49%"})}),y=(0,s.forwardRef)(function({options:f,onChange:C,allowEmptyValue:P,isInModal:T=!1},M){const I=(0,o.of)(b,T),B=(0,s.useRef)(!1),U=(0,s.useCallback)(O=>({label:O.label,value:String(O.value),id:(0,d.A)()}),[]),[W,V]=(0,s.useState)(f.length?f.map(U):[D()]);(0,s.useEffect)(()=>{B.current||V(f.length?f.map(O=>({label:O.label,value:String(O.value),id:(0,d.A)()})):[D()]),B.current=!1},[f]);const z=(0,s.useCallback)(O=>{V(O),B.current=!0,C(O.reduce((N,F)=>{const G=F.value.trim();if(!P&&!G)return N;const H=F.label.trim();return!H&&!G||N.push({label:H||G,value:G}),N},[]))},[P,C]),R=(0,s.useCallback)(()=>V([...W,D()]),[W]);return(0,s.useImperativeHandle)(M,()=>({addItem:R}),[R]),(0,n.jsxs)("div",{className:I.container,children:[(0,n.jsx)(x,{items:W,onChange:z}),!T&&(0,n.jsx)("div",{children:(0,n.jsx)(l.k,{onAdd:R})})]})});y.displayName="VariableStaticOptionsForm";const b=(f,C)=>({container:(0,a.css)({display:"flex",flexDirection:"column",gap:f.spacing(2),width:"100%",maxWidth:f.spacing(60),...C?{maxWidth:"100%",maxHeight:"calc(80vh - 170px)",overflow:"auto",minHeight:f.spacing(5)}:{}})});function D(){return{label:"",value:"",id:(0,d.A)()}}},58449:(ne,j,e)=>{"use strict";e.d(j,{h_:()=>f,kn:()=>y,pF:()=>b,rS:()=>D,sA:()=>m});var n=e(74848),a=e(96540),s=e(78685),d=e(78012),o=e(54092),l=e(27489),i=e(36490),c=e(75234),p=e(46907),h=e(3260),u=e(87745),r=e(92270);const v="grafana.navigation.extensionSidebarDocked",g="grafana.navigation.extensionSidebarWidth",E=["grafana-investigations-app","grafana-assistant-app","grafana-dash-app","grafana-grafanadocsplugin-app","grafana-pathfinder-app"],x=(0,a.createContext)({isOpen:!1,dockedComponentId:void 0,setDockedComponentId:()=>{},availableComponents:new Map,extensionSidebarWidth:r.yq,setExtensionSidebarWidth:()=>{}});function m(){return(0,a.useContext)(x)}const y=({children:C})=>{const[P,T]=(0,a.useState)(void 0),M=d.M.get(v),[I,B]=(0,s.A)(g,r.yq),[U,W]=(0,a.useState)(i.Ny.getLocation().pathname);(0,a.useEffect)(()=>{const H=i.Ny.getLocationObservable().subscribe(K=>{W(K.pathname)});return()=>{H.unsubscribe()}},[]);const{links:V,isLoading:z}=(0,p.U)({extensionPointId:o.SM.ExtensionSidebar,context:{path:U}}),R=(0,a.useMemo)(()=>new Map(Array.from((0,h.UX)(o.SM.ExtensionSidebar).entries()).filter(([H,K])=>E.includes(H)&&V.some(w=>w.pluginId===H&&K.addedComponents.some(Q=>Q.title===w.title)))),[V]);let O;M&&D(M)&&(O=M);const[N,F]=(0,a.useState)(O);(0,a.useEffect)(()=>{if(!z&&N){const H=D(N);if(H){const K=R.get(H.pluginId);(!K||!K.addedComponents.some(w=>w.title===H.componentTitle))&&F(void 0)}else F(void 0)}},[z,R,N]);const G=(0,a.useCallback)((H,K)=>{T(K),F(H)},[F]);return(0,a.useEffect)(()=>{const H=q=>{q.payload.pluginId&&q.payload.componentTitle&&E.includes(q.payload.pluginId)&&R.get(q.payload.pluginId)?.addedComponents.some(se=>se.title===q.payload.componentTitle)&&G(JSON.stringify({pluginId:q.payload.pluginId,componentTitle:q.payload.componentTitle}),q.payload.props)},K=()=>{F(void 0)},w=q=>{const se=D(N??"");se?.pluginId===q.payload.pluginId&&se?.componentTitle===q.payload.componentTitle?K():H(q)},Q=(0,c.J7)().subscribe(u.Am,H),k=(0,c.J7)().subscribe(u.KU,K),te=(0,c.J7)().subscribe(u._d,w);return()=>{Q.unsubscribe(),k.unsubscribe(),te.unsubscribe()}},[G,R,N]),(0,a.useEffect)(()=>{if(z)return;const H=D(N??""),K=d.M.get(v),w=D(K??""),Q=N!==void 0;(Q||w)&&(0,l.rR)("grafana_extension_sidebar_changed",{opened:Q,componentTitle:(Q?H:w)?.componentTitle,pluginId:(Q?H:w)?.pluginId,fromLocalstorage:K===N}),N?d.M.set(v,N):d.M.delete(v)},[N,z]),(0,n.jsx)(x.Provider,{value:{isOpen:N!==void 0,dockedComponentId:N,setDockedComponentId:H=>G(H,void 0),availableComponents:R,extensionSidebarWidth:Math.min(I??r.yq,r.T0),setExtensionSidebarWidth:B,props:P},children:C})};function b(C,P){return JSON.stringify({pluginId:C,componentTitle:P})}function D(C){try{const P=JSON.parse(C);return typeof P=="object"&&P!==null&&"pluginId"in P&&"componentTitle"in P&&typeof P.pluginId=="string"&&typeof P.componentTitle=="string"?P:void 0}catch{return}}function f(C){if(C.has("grafana-pathfinder-app"))return"grafana-pathfinder-app";if(C.has("grafana-grafanadocsplugin-app"))return"grafana-grafanadocsplugin-app"}},58662:(ne,j,e)=>{"use strict";e.d(j,{CF:()=>g,Lb:()=>v,P_:()=>h,XV:()=>p,Xe:()=>u,hD:()=>x,wr:()=>m});var n=e(92138),a=e(5556),s=e(17548),d=e(25229),o=e(43173),l=e(4571),i=e(75421),c=e(15130);function p({useCurrentTimeRange:y,selectedTheme:b,panelId:D,timeFrom:f,search:C=window.location.search,range:P=(0,i.jG)().timeRange(),orgId:T=c.TP.user.orgId}){const M=new URLSearchParams(C);if(f){const{from:I,to:B}=s.describeTextRange(f);M.set("from",I),M.set("to",B)}else M.set("from",String(P.from.valueOf())),M.set("to",String(P.to.valueOf()));return M.set("orgId",String(T)),y||(M.delete("from"),M.delete("to")),b!=="current"&&M.set("theme",b),D&&!M.has("editPanel")&&M.set("viewPanel",D),M.delete("auth_token"),M.delete("shareView"),M}function h(){let y=window.location.href;const b=y.indexOf("?");return b!==-1&&(y=y.substring(0,b)),y}async function u(y,b,D,f){const C=h(),P=p({useCurrentTimeRange:y,selectedTheme:b,panelId:D?.id?String(D.id):void 0,timeFrom:D?.timeFrom}),T=a.kM.appendQueryToUrl(C,P.toString());return f?await(0,l.fn)(T):T}function r(y,b,D,f,C,P){const T=h(),M=p({useCurrentTimeRange:y,selectedTheme:D,panelId:f,timeFrom:C,range:P});let I=T.replace(o.$.appSubUrl+"/dashboard/",o.$.appSubUrl+"/dashboard-solo/");I=I.replace(o.$.appSubUrl+"/d/",o.$.appSubUrl+"/d-solo/"),n.I.stripBaseFromUrl(T)==="/"&&(I=`${o.$.appUrl}d-solo/${b}`);const U=M.get("editPanel")??M.get("viewPanel")??"";return M.set("panelId",U),M.delete("editPanel"),M.delete("viewPanel"),a.kM.appendQueryToUrl(I,M.toString())}function v(y,b,D,f){let P=r(y,b,D,f?.id?String(f.id):void 0,f?.timeFrom).replace(o.$.appSubUrl+"/dashboard-solo/",o.$.appSubUrl+"/render/dashboard-solo/");return P=P.replace(o.$.appSubUrl+"/d-solo/",o.$.appSubUrl+"/render/d-solo/"),P+=`&width=${o.$.rendererDefaultImageWidth}&height=${o.$.rendererDefaultImageHeight}&scale=${o.$.rendererDefaultImageScale}`+E(),P}function g(y,b,D,f,C,P){return`<iframe src="${r(y,b,D,f,C,P)}" width="450" height="200" frameborder="0"></iframe>`}function E(){const y="&tz=UTC"+encodeURIComponent((0,d.KQ)().format("Z"));if(!window.Intl)return y;const b=window.Intl.DateTimeFormat();if(!b.resolvedOptions)return y;const D=b.resolvedOptions();return D.timeZone?"&tz="+encodeURIComponent(D.timeZone):y}const x=y=>y?"panel":"dashboard",m={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard",inviteUser:"invite_user",image:"image"}},58684:(ne,j,e)=>{"use strict";e.d(j,{_:()=>v});var n=e(74848),a=e(34796),s=e.n(a),d=e(96540),o=e(55386),l=e(64394),i=e(33553),c=e(48588),p=e(739),h=e(53568),u=e(45861),r=e(443);class v extends d.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:E,value:x,height:m,onClick:y,text:b,theme:D,orientation:f}=this.props,C=(0,r.BU)(E,m,x.title,f),P=f===p.wV.Vertical?`${C.gaugeHeight}px`:"100%",T=(0,n.jsx)("div",{style:{height:`${C.gaugeHeight}px`,width:P},ref:M=>this.canvasElement=M});return(0,n.jsxs)(n.Fragment,{children:[y?(0,n.jsx)("button",{className:(0,u.my)(D),type:"button",onClick:y,children:T}):T,C.showLabel&&(0,n.jsx)("div",{style:{textAlign:"center",fontSize:b?.titleSize??C.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:P,top:"-4px",cursor:"default"},children:x.title})]})}}static{this.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:r.JJ}}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:E,showThresholdLabels:x,showThresholdMarkers:m,width:y,height:b,theme:D,value:f,orientation:C}=this.props,P=(0,r.BU)(y,b,f.title),T=C===p.wV.Vertical?P.gaugeHeight:y,M=Math.min(T,P.gaugeHeight),I=D.colors.background.secondary,B=x?1.5:1,U=Math.min(M/5.5,40)/B,W=U/5,V=(0,o.cN)(f),R=Math.min(T,M*1.3)*.9-((U+(m?W:0)+(x?10:0))*2+10),O=this.props.text?.valueSize??(0,h.Vr)(V,R,M,1,U*1.7),N=Math.max(O/2.5,12);let F=E.min??c.tw,G=E.max??c.d1,H=f.numeric;E.thresholds?.mode===i.O.Percentage&&(F=0,G=100,f.percent===void 0?H=(H-F)/(G-F)*100:H=f.percent*100);const K=E.decimals===void 0?2:E.decimals;m&&(F=+F.toFixed(K),G=+G.toFixed(K));let w=[];E.color?.mode===l.Y.Thresholds?w=(0,r.Xx)(K,E,D):w=[{value:E.min??c.tw,color:f.color??l.F}];const Q={series:{gauges:{gauge:{min:F,max:G,neutralValue:E.custom?.neutral,background:{color:I},border:{color:null},shadow:{show:!1},width:U},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:w,label:{show:x,margin:W+1,font:{size:N}},show:m&&w.length>1,width:W},value:{color:f.color,formatter:()=>V,font:{size:O,family:D.typography.fontFamily}},show:!0}}},k={data:[[0,H]],label:f.title};try{this.canvasElement&&s().plot(this.canvasElement,[k],Q)}catch(te){console.error("Gauge rendering error",te,Q,f)}}render(){return(0,n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className,children:this.renderVisualization()})}}},58738:(ne,j,e)=>{"use strict";e.d(j,{e:()=>u,h:()=>r});var n=e(74848),a=e(22803),s=e(83505),d=e(96540),o=e(51898),l=e(63142),i=e(76373),c=e(15245),p=e(39064),h=e(61048);const u=({links:g,actions:E,value:x,coords:m,onTooltipClose:y})=>{const b=(0,l.$j)(),D=(0,l.of)(v),f="right-start",C=(0,i.getPositioningMiddleware)(f),P=(0,d.useMemo)(()=>{const{clientX:z,clientY:R}=m;return{getBoundingClientRect(){return{width:0,height:0,x:z,y:R,top:R,left:z,right:z,bottom:R}}}},[m]),T=z=>{I.setFloating(z),I.setReference(P)},{context:M,refs:I,floatingStyles:B}=(0,s.we)({open:!0,placement:f,onOpenChange:y,middleware:C}),U=(0,s.s9)(M),{getFloatingProps:W,getReferenceProps:V}=(0,s.bv)([U]);return g.length===0&&!E?.length?null:(0,n.jsxs)(n.Fragment,{children:[x,(0,n.jsx)(c.ZL,{zIndex:b.zIndex.tooltip,children:(0,n.jsx)("div",{ref:T,...V(),...W(),style:B,className:D.tooltipWrapper,"data-testid":o.Tp.components.DataLinksActionsTooltip.tooltipWrapper,children:(0,n.jsx)(h.i,{children:(0,n.jsx)(p.S,{dataLinks:g,actions:E})})})})]})},r=(g,E,x)=>(0,n.jsx)("a",{href:g.href,onClick:g.onClick,target:g.target,title:g.title,"data-testid":o.Tp.components.DataLinksContextMenu.singleLink,className:x,children:E}),v=g=>({tooltipWrapper:(0,a.css)({whiteSpace:"pre",borderRadius:g.shape.radius.default,background:g.colors.background.primary,border:`1px solid ${g.colors.border.weak}`,boxShadow:g.shadows.z3,userSelect:"text",fontSize:g.typography.bodySmall.fontSize})})},58755:(ne,j,e)=>{"use strict";e.d(j,{EF:()=>p,aK:()=>h});var n=e(66687),a=e(2954),s=e(67817),d=e(4651),o=e(24619);const l=n.Ik({refId:n.Yj().describe('Reference ID for the query, e.g., "B", "C", etc.'),type:n.k5(d.Tz).describe("Expression type"),datasource:n.Ik({uid:n.eu("__expr__").describe('Must be "__expr__" for expression queries'),type:n.eu("__expr__").describe('Must be "__expr__" for expression queries')}),conditions:n.YO(n.Ik({type:n.Yj().describe('Condition type, e.g., "query"'),evaluator:n.Ik({params:n.YO(n.bz()).describe("Parameters for the evaluator"),type:n.k5(a.A.evalFunctions.map(u=>u.value)).describe("Evaluator type")}),operator:n.Ik({type:n.k5(a.A.evalOperators.map(u=>u.value)).describe("Operator type")}),query:n.Ik({params:n.YO(n.Yj()).describe("Query parameters, typically the refId to evaluate")}),reducer:n.Ik({params:n.YO(n.bz()).describe("Parameters for the reducer"),type:n.Yj().describe('Reducer type, e.g., "last", "avg", "sum", "count", "min", "max"')})})).optional().describe("Conditions for the expression query"),reducer:n.Yj().optional().describe('Reducer function, e.g., "last", "avg", "sum"'),expression:n.Yj().optional().describe('Expression referencing other queries, e.g., "A"'),math:n.Yj().optional().describe("Math expression for math type queries")}),i=n.Ik({refId:n.Yj().describe('Reference ID for the query, e.g., "A", "B", etc.'),queryType:n.Yj().optional().default("alerting").describe('Type of query (e.g., "alerting", "recording")'),expression:n.Yj().optional().default("").describe("Query expression to be executed. This can not include variables (e.g. $var)."),instant:n.zM().optional().default(!0).describe("Whether the query is an instant query"),range:n.zM().optional().default(!1).describe("Whether the query is a range query, should be false if instant is true"),datasource:n.Ik({type:n.Yj().optional().describe('Datasource type or "__expr__" when it is an expression query'),uid:n.Yj().optional().describe("Datasource UID")})}),c=n.KC([i,l]),p=n.Ik({name:n.Yj().optional().describe("Name of the alert rule"),type:n.k5(s.Z).optional().catch(s.Z.grafana).describe("Type of the alert rule"),dataSourceName:n.Yj().optional().default(""),group:n.Yj().optional().describe("Alert group name"),labels:n.YO(n.Ik({key:n.Yj().describe("Label key"),value:n.Yj().describe("Label value")})).optional().default([]).describe("Labels for the alert rule"),annotations:n.YO(n.Ik({key:n.Yj().describe('Annotation key; for dashboard panel annotations, use "__dashboardUid__" or "__panelId__"'),value:n.Yj().describe("Annotation value")})).optional().describe(`Optional annotations for the alert rule. When creating alerts from a dashboard panel, include:
    - {"key": "__dashboardUid__", "value": "<dashboard-uid>"}
    - {"key": "__panelId__", "value": "<panel-id>"}
    These annotations link the alert back to the source dashboard and panel.`),folder:n.Ik({kind:n.k5(["folder"]).default("folder"),uid:n.Yj().describe("Folder UID where the alert rule will be created"),title:n.Yj().optional().default("").describe("Folder title")}).optional().describe("Folder configuration for the alert rule"),queries:n.YO(n.Ik({refId:n.Yj().describe('Reference ID for the query (e.g., "A", "B", "C")'),queryType:n.Yj().optional().default("instant").describe('Type of query (e.g., "instant")'),relativeTimeRange:n.Ik({from:n.ai().describe("Relative time from in seconds (e.g., 3600 for 1 hour)"),to:n.ai().default(0).describe('Relative time to in seconds (usually 0 for "now")')}).optional(),datasourceUid:n.Yj().describe("Datasource UID for the query"),model:c.describe("Query model containing the actual query configuration")})).optional().default([]).describe("Array of queries that form the alert rule"),condition:n.Yj().optional().describe('Reference ID of the query that acts as the condition (e.g., "C")'),noDataState:n.k5(o.Q8).optional().describe("State when no data is available"),execErrState:n.k5(o.Q8).optional().describe("State when there is an execution error"),evaluateEvery:n.Yj().optional().describe("Evaluation interval"),evaluateFor:n.Yj().optional().describe("Evaluation duration"),keepFiringFor:n.Yj().optional().describe("Keep firing duration"),isPaused:n.zM().optional().default(!1).describe("Whether the rule is paused"),manualRouting:n.zM().optional().default(!0).describe("Whether to use manual routing. If true, contactPoints are used."),contactPoints:n.g1(n.Yj(),n.Ik({selectedContactPoint:n.Yj().describe("Selected contact point to send the alert to"),overrideGrouping:n.zM().describe("Whether to override the default grouping"),groupBy:n.YO(n.Yj()).describe("Group by labels"),overrideTimings:n.zM().describe("Whether to override the default timings"),groupWaitValue:n.Yj().describe("Group wait value"),groupIntervalValue:n.Yj().describe("Group interval value"),repeatIntervalValue:n.Yj().describe("Repeat interval value"),muteTimeIntervals:n.YO(n.Yj()).describe("Mute time intervals"),activeTimeIntervals:n.YO(n.Yj()).describe("Active time intervals")})).optional().default({GRAFANA_RULES_SOURCE_NAME:{selectedContactPoint:"default",overrideGrouping:!1,groupBy:[],overrideTimings:!1,groupWaitValue:"",groupIntervalValue:"",repeatIntervalValue:"",muteTimeIntervals:[],activeTimeIntervals:[]}}).describe("Contact points configuration"),editorSettings:n.Ik({simplifiedQueryEditor:n.zM(),simplifiedNotificationEditor:n.zM()}).optional().default({simplifiedQueryEditor:!0,simplifiedNotificationEditor:!0}).describe("Editor settings"),metric:n.Yj().optional().describe("Metric name for Grafana recording rules"),targetDatasourceUid:n.Yj().optional().describe("Target datasource UID for Grafana recording rules"),returnTo:n.Yj().optional().describe("Optional URL to return to after creating the alert")}),h={alertingAlertRuleFormSchema:p}},58873:(ne,j,e)=>{"use strict";e.d(j,{C:()=>a,m:()=>s});let n;function a(d){if(n)throw new Error("setGetObservablePluginLinks() function should only be called once, when Grafana is starting.");n=d}function s(d){if(!n)throw new Error("getObservablePluginLinks() can only be used after the Grafana instance has started.");return n(d)}},59006:(ne,j,e)=>{"use strict";e.d(j,{j:()=>l});var n=e(42954),a=e(4974),s=e(17340),d=e(76584),o=e(6461);const l=new n.O(()=>[{id:"GridLayout",name:"Grid Layout",deserialize:s.v2},{id:"AutoGridLayout",name:"Auto Grid Layout",deserialize:a.Dr},{id:"RowsLayout",name:"Rows Layout",deserialize:d.Vf},{id:"TabsLayout",name:"Tabs Layout",deserialize:o.wm}])},59243:(ne,j,e)=>{"use strict";e.d(j,{G:()=>r});var n=e(74848),a=e(22803),s=e(34743),d=e(83505),o=e(46885),l=e(96540),i=e(92745),c=e(63142),p=e(76373),h=e(71495),u=e(76319);const r=(0,l.memo)(({children:g,theme:E="info",placement:x="auto",content:m,title:y,closeButton:b=!0,onClose:D,footer:f,fitContent:C=!1,onOpen:P,show:T})=>{const M=(0,l.useRef)(null),I=(0,c.$j)(),B=(0,c.of)(v),U=B[E],[W,V]=(0,l.useState)(T),z=T??W,R=(0,h.O)(x),O=[(0,s.cY)(8),...(0,p.getPositioningMiddleware)(R),(0,s.UE)({element:M})],{context:N,refs:F,floatingStyles:G}=(0,d.we)({open:z,placement:R,onOpenChange:k=>{T===void 0&&V(k),k?P?.():D?.()},middleware:O,whileElementsMounted:o.ll,strategy:"fixed"}),H=(0,d.kp)(N),K=(0,d.s9)(N),{getReferenceProps:w,getFloatingProps:Q}=(0,d.bv)([K,H]);return(0,n.jsxs)(n.Fragment,{children:[(0,l.cloneElement)(g,{ref:F.setReference,tabIndex:0,"aria-expanded":z,...w()}),z&&(0,n.jsx)(d.s3,{context:N,modal:!1,closeOnFocusOut:!1,children:(0,n.jsxs)("div",{"data-testid":"toggletip-content",className:(0,a.cx)(U.container,{[B.fitContent]:C}),ref:F.setFloating,style:G,...Q(),children:[(0,n.jsx)(d.ie,{strokeWidth:.3,stroke:I.colors.border.weak,className:U.arrow,ref:M,context:N}),!!y&&(0,n.jsx)("div",{className:U.header,children:y}),b&&(0,n.jsx)("div",{className:U.headerClose,children:(0,n.jsx)(u.K,{"aria-label":(0,i.t)("grafana-ui.toggletip.close","Close"),name:"times","data-testid":"toggletip-header-close",onClick:()=>{V(!1),D?.()}})}),(0,n.jsxs)("div",{className:U.body,children:[(typeof m=="string"||(0,l.isValidElement)(m))&&m,typeof m=="function"&&m({})]}),!!f&&(0,n.jsx)("div",{className:U.footer,children:f})]})})]})});r.displayName="Toggletip";const v=g=>{const E=(0,h.f)(g,g.colors.background.primary,g.colors.border.weak,g.components.tooltip.text,{topBottom:2,rightLeft:2}),x=(0,h.f)(g,g.colors.error.main,g.colors.error.main,g.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:E,error:x,fitContent:(0,a.css)({maxWidth:"fit-content"})}}},59253:(ne,j,e)=>{"use strict";e.d(j,{Ap:()=>g,Bj:()=>c,CB:()=>l,Gd:()=>v,T_:()=>i,XP:()=>E,cu:()=>m,ij:()=>y,xZ:()=>x});var n=e(67458),a=e(68143),s=e(81871),d=e(95256),o=e(4476);async function l(D){const f=await p(D),C=!!f,[P,T,M,I]=await Promise.all([v(),h(D,C),u(D),r(D)]),B=P.find(W=>W.id===D),U=B?.dependencies||f?.json?.dependencies;return{grafanaDependency:U?.grafanaDependency??U?.grafanaVersion??"",pluginDependencies:U?.plugins||[],links:B?.info.links||f?.json?.info.links||[],readme:M||f?.readme,versions:T,statusContext:f?.statusContext??"",iam:f?.json?.iam,changelog:f?.changelog||I,licenseUrl:f?.licenseUrl,documentationUrl:f?.documentationUrl,sponsorshipUrl:f?.sponsorshipUrl,repositoryUrl:f?.repositoryUrl,raiseAnIssueUrl:f?.raiseAnIssueUrl,signatureType:B?.signatureType||(f?.signatureType!==""?f?.signatureType:void 0),signature:B?.signature,screenshots:f?.json?.info.screenshots||B?.info.screenshots}}async function i(){try{const{items:D}=await(0,a.AI)().get(`${d.P5}/plugins`,{includeDeprecated:!0});return D.filter(o.hY)}catch(D){if((0,a.NF)(D))return D.isHandled=!0,console.error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"),[];throw D}}async function c(){try{return await(0,a.AI)().get(`${d.Sw}/errors`)}catch{return[]}}async function p(D){try{return await(0,a.AI)().get(`${d.P5}/plugins/${D}`,{})}catch(f){(0,a.NF)(f)&&(f.isHandled=!0);return}}async function h(D,f){try{return f?((await(0,a.AI)().get(`${d.P5}/plugins/${D}/versions`)).items||[]).map(P=>({version:P.version,createdAt:P.createdAt,updatedAt:P.updatedAt,isCompatible:P.isCompatible,grafanaDependency:P.grafanaDependency,angularDetected:P.angularDetected})):[]}catch(C){return(0,a.NF)(C)&&(C.isHandled=!0),[]}}async function u(D){try{const f=await(0,a.AI)().get(`${d.Sw}/${D}/markdown/README`);return f?(0,n.G)(f):""}catch(f){return(0,a.NF)(f)&&(f.isHandled=!0),""}}async function r(D){try{const f=await(0,a.AI)().get(`${d.Sw}/${D}/markdown/CHANGELOG`);return f?(0,n.G)(f):""}catch(f){return(0,a.NF)(f)&&(f.isHandled=!0),""}}async function v(){return(await(0,a.AI)().get(`${d.Sw}`,(0,s.F)({embedded:0}))).filter(o.Sq)}async function g(){const{items:D}=await(0,a.AI)().get(`${d.Mi}/plugins`);return D}async function E(){const{items:D}=await(0,a.AI)().get(`${d.Mi}/provisioned-plugins`);return D.map(f=>({slug:f.type}))}async function x(D,f){return await(0,a.AI)().post(`${d.Sw}/${D}/install`,{version:f},{showErrorAlert:!1})}async function m(D){return await(0,a.AI)().post(`${d.Sw}/${D}/uninstall`)}async function y(D,f){return(await(0,a.AI)().datasourceRequest({url:`/api/plugins/${D}/settings`,method:"POST",data:f}))?.data}const b={getRemotePlugins:i,getInstalledPlugins:v,installPlugin:x,uninstallPlugin:m}},59258:(ne,j,e)=>{"use strict";e.d(j,{H:()=>l,T:()=>a});var n=e(63267),a=(i=>(i.Word="Word",i.Prefix="Prefix",i.Fuzzy="Fuzzy",i))(a||{});const l={Word:(i,c)=>i.filter(p=>(p.filterText||p.label).includes(c)),Prefix:(i,c)=>i.filter(p=>(p.filterText||p.label).startsWith(c)),Fuzzy:(i,c)=>(c=c.toLowerCase(),i.filter(p=>{const{distance:h,ranges:u,found:r}=(0,n.I)(p.label.toLowerCase(),c);return r?(p.sortValue=h,p.highlightParts=u,!0):!1}))}},59310:(ne,j,e)=>{"use strict";e.d(j,{U:()=>D});var n=e(74848),a=e(2543),s=e(96540),d=e(62717),o=e(92745),l=e(18857),i=e(22803),c=e(63142);const p=I=>{const{children:B,label:U}=I,W=(0,c.of)(h);return U?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:W.header,children:(0,n.jsx)("span",{className:W.label,children:U})}),B]}):(0,n.jsx)("div",{children:B})},h=I=>({header:(0,i.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${I.colors.border.weak}`,textTransform:"capitalize"}),label:(0,i.css)({fontSize:I.typography.size.sm,color:I.colors.text.secondary,fontWeight:I.typography.fontWeightMedium})});var u=e(44229),r=e(51898),v=e(30703),g=e(34788),E=e(27228);const x="tz-utc-offset",m=I=>{const{children:B,innerProps:U,innerRef:W,data:V,isSelected:z,isFocused:R}=I,O=(0,c.of)(b),N=Date.now(),F=(0,i.cx)(O.container,R&&O.containerFocused);if(!(0,a.isString)(V.value))return null;const G=(0,d.QZ)(V.value,N);return(0,n.jsx)("div",{className:F,...U,ref:W,"data-testid":r.Tp.components.Select.option,children:(0,n.jsxs)("div",{className:(0,i.cx)(O.leftColumn,O.row),children:[(0,n.jsxs)("div",{className:(0,i.cx)(O.leftColumn,O.wideRow),children:[(0,n.jsx)(E.U,{title:B}),(0,n.jsx)("div",{className:O.spacer}),(0,n.jsx)(g.E,{info:G})]}),(0,n.jsxs)("div",{className:O.rightColumn,children:[(0,n.jsx)(u.X,{timeZone:G?.ianaName||V.value,timestamp:N,className:x}),z&&(0,n.jsx)("span",{children:(0,n.jsx)(v.I,{name:"check"})})]})]})})},y=I=>{const{children:B,innerProps:U,innerRef:W,data:V,isSelected:z,isFocused:R}=I,O=(0,c.of)(b),N=Date.now(),F=(0,i.cx)(O.container,R&&O.containerFocused);if(!(0,a.isString)(V.value))return null;const G=(0,d.QZ)(V.value,N);return(0,n.jsx)("div",{className:F,...U,ref:W,"data-testid":r.Tp.components.Select.option,children:(0,n.jsxs)("div",{className:O.body,children:[(0,n.jsxs)("div",{className:O.row,children:[(0,n.jsx)("div",{className:O.leftColumn,children:(0,n.jsx)(E.U,{title:B})}),(0,n.jsx)("div",{className:O.rightColumn,children:z&&(0,n.jsx)("span",{children:(0,n.jsx)(v.I,{name:"check"})})})]}),(0,n.jsxs)("div",{className:O.row,children:[(0,n.jsx)("div",{className:O.leftColumn,children:(0,n.jsx)(g.E,{info:G})}),(0,n.jsx)("div",{className:O.rightColumn,children:(0,n.jsx)(u.X,{timestamp:N,timeZone:G?.ianaName||V.value,className:x})})]})]})})},b=I=>({container:(0,i.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:I.colors.action.hover}}),containerFocused:(0,i.css)({background:I.colors.action.hover}),body:(0,i.css)({display:"flex",fontWeight:I.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,i.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,i.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,i.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,i.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,i.css)({marginLeft:"6px"})}),D=I=>{const{onChange:B,width:U,autoFocus:W=!1,onBlur:V,value:z,includeInternal:R=!1,disabled:O=!1,inputId:N,menuShouldPortal:F=!0,openMenuOnFocus:G=!0}=I,H=f(R),K=C(H,z),w=T(),Q=U&&U<=45?y:m,k=(0,s.useCallback)(te=>{if(!te||!(0,a.isString)(te.value))return B(z);B(te.value)},[B,z]);return(0,n.jsx)(l.l6,{inputId:N,value:K,placeholder:(0,o.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:W,menuShouldPortal:F,openMenuOnFocus:G,width:U,filterOption:w,options:H,onChange:k,onBlur:V,components:{Option:Q,Group:p},disabled:O,"aria-label":(0,o.t)("time-picker.zone.select-aria-label","Time zone picker")})},f=I=>{const B=Date.now();return(0,s.useMemo)(()=>(0,d.U3)(I).map(W=>{const V=W.zones.reduce((z,R)=>{const O=(0,d.QZ)(R,B);if(!O)return z;const N=O.name.replace(/_/g," ");return z.push({label:N,value:O.zone,searchIndex:M(N,O,B)}),z},[]);return{label:W.name,options:V}}),[I,B])},C=(I,B)=>(0,s.useMemo)(()=>{if(B===void 0)return;const U=(0,a.toLower)(B);return I.find(V=>V.label?U.startsWith((0,a.toLower)(V.label)):P(U))?.options.find(V=>(0,a.isEmpty)(U)?V.value===d.g$.default:(0,a.toLower)(V.value)===U)},[I,B]),P=I=>{switch(I){case d.g$.default:case d.g$.localBrowserTime:case d.g$.utc:return!0;default:return!1}},T=()=>(0,s.useCallback)((I,B)=>!B||!I.data||!I.data.searchIndex?!0:I.data.searchIndex.indexOf((0,a.toLower)(B))>-1,[]),M=(I,B,U)=>{const W=[(0,a.toLower)(B.zone),(0,a.toLower)(B.abbreviation),(0,a.toLower)((0,u.t)(U,B.zone))];I!==B.zone&&W.push((0,a.toLower)(I));for(const V of B.countries)W.push((0,a.toLower)(V.name)),W.push((0,a.toLower)(V.code));return W.join("|")}},59373:(ne,j,e)=>{"use strict";e.d(j,{w:()=>X});var n=e(2543),a=e(37615),s=e(78282),d=e(2863),o=e(44248),l=e(739),i=e(13241),c=e(54742),p=e(8921),h=e(67933),u=e(93612),r=e(99305);let v={};function g(J){const _=v[J];return _||(v[J]=(0,n.property)(J))}class E{constructor(_,ee,ae){this.state={name:_.name,value:ee,text:ae,type:_.type}}getValue(_){let{value:ee}=this.state;return ee==="string"||ee==="number"||ee==="boolean"?ee:String(ee)}getValueText(){const{value:_,text:ee}=this.state;return typeof ee=="string"?_===p.To?p.Zm:ee:Array.isArray(ee)?ee.join(" + "):(console.log("value",ee),String(ee))}}let x;function m(J,_,ee){return x?(x.state.name=J.name,x.state.type=J.type,x.state.value=_,x.state.text=ee):x=new E(J,_,ee),x}function y(J,_,ee,ae){if(ee=ee||{},J==null||(0,h.EW)(ee)&&_!==l.$m.QueryParam)return"";if(!Array.isArray(J)&&typeof J=="object"&&(J=`${J}`),typeof _=="function")return _(J,ee,y);_||(_=l.$m.Glob);let le=_.split(":");le.length>1?(_=le[0],le=le.slice(1)):le=[];let L=o.vz.getIfExists(_);L||(console.error(`Variable format ${_} not found. Using glob format as fallback.`),L=o.vz.get(l.$m.Glob));const ie=m(ee,J,ae??J);return L.formatter(J,le,ie)}var b=e(84743),D=e.n(b),f=e(38036),C=e(5556),P=e(60188),T=e(75421),M=e(66223),I=e(55386),B=e(95004),U=e(7102),W=e(11576),V=e(16515),z=e(71642);function R(J,_,ee){return new Proxy({},{get:(ae,le)=>{if(le==="name")return J.name;if(le==="displayName")return(0,V.Ct)(J,_,ee);if(le==="labels"||le==="formattedLabels")return J.labels?{...J.labels,__values:Object.values(J.labels).sort().join(", "),toString:()=>(0,z.h6)(J.labels,"",!0)}:""}})}function O(J,_,ee,ae){const le=N(J,_,ee);return y(le,ae)}function N(J,_,ee){const ae=ee?.__dataContext;if(!ae)return J;const{frame:le,rowIndex:L,field:ie,calculatedValue:oe}=ae.value;if(oe)switch(_){case"numeric":return oe.numeric.toString();case"raw":return oe.numeric;case"time":return"";case"text":default:return(0,I.cN)(oe)}if(L===void 0)return J;if(_==="time"){const Ee=le.fields.find(Ae=>Ae.type===B.PU.time);return Ee?Ee.values[L]:void 0}const ue=ie.values[L];if(_==="raw")return ue;const fe=(ie.display??H())(ue);switch(_){case"numeric":return fe.numeric;case"text":return fe.text;default:return(0,I.cN)(fe)}}function F(J,_,ee,ae){const le=ee?.__dataContext;if(!le||!_)return J;const{frame:L,rowIndex:ie}=le.value;if(ie===void 0||_===void 0)return J;const oe={name:L.name,refId:L.refId,fields:(0,U.F)({frame:L,rowIndex:ie})},ue=g(_)(oe)??"";return y(ue,ae)}let G;function H(){return G||(G=(0,W.J)()),G}function K(J,_,ee,ae){const le=ee?.__dataContext;if(!le||_!=="name")return J;const{frame:L,frameIndex:ie}=le.value,oe=(0,V.Ri)(L,ie);return y(oe,ae)}function w(J,_,ee,ae){const le=ee?.__dataContext;if(!le||_===void 0||_==="")return J;const{frame:L,field:ie,data:oe}=le.value,ue=R(ie,L,oe),ye=g(_)(ue)??"";return y(ye,ae)}const Q={__value:O,__data:F,__series:K,__field:w,[f.c.includeVars]:k,[f.c.keepTime]:te,__timezone:q};function k(J,_,ee){const ae=(0,M.z)(ee);return C.kM.toUrlParams(ae)}function te(){return C.kM.toUrlParams((0,T.jG)().timeRangeForUrl())}function q(){const J=(0,P.O)({timeZone:(0,T.jG)().timeModel?.getTimezone()});return J==="browser"?D().tz.guess():J}const se={getFilteredVariables:u.bZ,getVariables:u.UN,getVariableWithName:u._2};class re{constructor(_=se){this.dependencies=_,this.regex=r.SY,this.index={},this.grafanaVariables=new Map,this._timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(_,ee){this._variables=_,this._timeRange=ee,this.updateIndex()}get variables(){return(0,a.l)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return window.__grafanaSceneContext?(0,i.E)(window.__grafanaSceneContext):this.dependencies.getVariables()}get timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?o.jh.getTimeRange(window.__grafanaSceneContext).state.value:this._timeRange}updateIndex(){const _=ee=>ee||ee==="";if(this.index=this._variables.reduce((ee,ae)=>(ae.current&&(ae.current.isNone||_(ae.current.value))&&(ee[ae.name]=ae),ee),{}),this.timeRange){const ee=this.timeRange.from.valueOf().toString(),ae=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:ee,text:ee}},__to:{current:{value:ae,text:ae}}}}}updateTimeRange(_){this._timeRange=_,this.updateIndex()}variableInitialized(_){this.index[_.name]=_}getAdhocFilters(_,ee){let ae=[],le=(0,s.l)().getInstanceSettings(_);if(!le)return[];!ee&&!this._adhocFiltersDeprecationWarningLogged.get(le.type)&&((0,a.l)(`DataSource ${le.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(le.type,!0));for(const L of this.getAdHocVariables()){const ie=L.datasource?.uid;(ie===le.uid||ie?.indexOf("$")===0&&this.replace(ie)===le.uid)&&(ae=ae.concat(L.filters))}return ae}setGrafanaVariable(_,ee){this.grafanaVariables.set(_,ee)}setGlobalVariable(_,ee){(0,a.l)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[_]:{current:ee}}}getVariableName(_){this.regex.lastIndex=0;const ee=this.regex.exec(_);return ee?ee.slice(1).find(le=>le!==void 0):null}containsTemplate(_){if(!_)return!1;if(window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive)return this.regex.lastIndex=0,!!this.regex.exec(_);const ee=this.getVariableName(_),ae=ee&&this.getVariableAtIndex(ee);return ae!=null}variableExists(_){return(0,a.l)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(_)}highlightVariablesAsHtml(_){return!_||!(0,n.isString)(_)?_:(_=(0,n.escape)(_),this._replaceWithVariableRegex(_,void 0,(ee,ae)=>this.getVariableAtIndex(ae)?'<span class="template-variable">'+ee+"</span>":ee))}getAllValue(_){if(_.allValue)return _.allValue;const ee=[];for(let ae=1;ae<_.options.length;ae++)ee.push(_.options[ae].value);return ee}getVariableValue(_,ee){return ee?g(ee)(_.value):_.value}getVariableText(_,ee){return _.value===ee||typeof ee!="string"?_.text:ee}replace(_,ee,ae,le){if(ee&&ee.__sceneObject){const L=ee.__sceneObject.value.valueOf();return o.jh.interpolate(L,_,ee,ae,le)}return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?o.jh.interpolate(window.__grafanaSceneContext,_,ee,ae,le):_?(this.regex.lastIndex=0,this._replaceWithVariableRegex(_,ae,(L,ie,oe,ue)=>{const ye=this._evaluateVariableExpression(L,ie,oe,ue,ee);return le&&le.push({match:L,variableName:ie,fieldPath:oe,format:ue,value:ye,found:ye!==L}),ye})):_??""}_evaluateVariableExpression(_,ee,ae,le,L){const ie=this.getVariableAtIndex(ee),oe=L?.[ee];if(oe){const Ee=this.getVariableValue(oe,ae),Ae=this.getVariableText(oe,Ee);if(Ee!=null)return y(Ee,le,ie,Ae)}if(!ie){const Ee=Q[ee];return Ee?Ee(_,ae,L,le):_}if(le===l.$m.QueryParam||(0,h.EW)(ie)){const Ee=c.B.get(ie.type).getValueForUrl(ie),Ae=(0,h.EW)(ie)?ie.id:ie.current.text;return y(Ee,le,ie,Ae)}const ue=this.grafanaVariables.get(ie.current.value);if(ue)return y(ue,le,ie);let ye=ie.current.value,fe=ie.current.text;if(this.isAllValue(ye)&&(ye=this.getAllValue(ie),fe=p.Zm,ie.allValue&&le!==l.$m.Text&&le!==l.$m.PercentEncode))return this.replace(ye);if(ae){const Ee=this.getVariableValue({value:ye,text:fe},ae);if(Ee!=null)return y(Ee,le,ie,fe)}return y(ye,le,ie,fe)}_replaceWithVariableRegex(_,ee,ae){return this.regex.lastIndex=0,_.replace(this.regex,(le,L,ie,oe,ue,ye,fe)=>ae(le,L||ie||ue,ye,oe||fe||ee))}isAllValue(_){return _===p.To||Array.isArray(_)&&_[0]===p.To}replaceWithText(_,ee){return(0,a.l)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(_,ee,"text")}getVariableAtIndex(_){if(_)return this.index[_]?this.index[_]:this.dependencies.getVariableWithName(_)}getAdHocVariables(){return this.dependencies.getFilteredVariables(h.EW)}}const Y=new re;(0,d.d)(Y);const X=()=>Y},59427:(ne,j,e)=>{"use strict";e.d(j,{UI:()=>y,gG:()=>b,Wb:()=>r,eO:()=>v,sB:()=>D,B_:()=>x,b5:()=>E,XV:()=>g,wv:()=>m});var n=e(16515),a=e(46644),s=e(43173),d=e(54825),o=e(739);function l(f,C){return i(y(f,C.field),C)}function i(f,C){if((C.mode??o.TL.Fixed)===o.TL.Fixed||!f){const M=C.fixed??o.ok.Forward;return{isAssumed:!!C.field?.length||!C.fixed,fixed:M,value:()=>M,get:()=>M}}const T=M=>{if(M==null)return o.ok.Forward;const I=Number(M);return isNaN(I)||I>0?o.ok.Forward:I<0?o.ok.Reverse:o.ok.None};return{field:f,get:M=>T(f.values[M]),value:()=>T(D(f))}}var c=e(20012),p=e(57444),h=e(88011),u=e(28807);function r(f,C){if(f?.series&&C.field)for(const P of f.series){const T=(0,d.K)(P,C,s.$.theme2);if(!T.isAssumed||f.series.length===1)return T}return(0,d.K)(void 0,C,s.$.theme2)}function v(f,C){if(f?.series&&C.field)for(const P of f.series){const T=l(P,C);if(!T.isAssumed||f.series.length===1)return T}return l(void 0,C)}function g(f,C){if(f?.series&&C.field)for(const P of f.series){const T=(0,h.hX)(P,C);if(!T.isAssumed||f.series.length===1)return T}return(0,h.hX)(void 0,C)}function E(f,C){if(f?.series&&C.field)for(const P of f.series){const T=(0,p.H)(P,C);if(!T.isAssumed||f.series.length===1)return T}return(0,p.H)(void 0,C)}function x(f,C){if(f?.series&&C.field)for(const P of f.series){const T=(0,c.$)(P,C);if(!T.isAssumed||f.series.length===1)return T}return(0,c.$)(void 0,C)}function m(f,C){if(f?.series&&C.field)for(const P of f.series){const T=(0,u.E)(P,C);if(!T.isAssumed||f.series.length===1)return T}return(0,u.E)(void 0,C)}function y(f,C){const P=b(C,f);return P==null?void 0:f.fields[P]}function b(f,C,P){if(!(!C||!f?.length))for(let T=0;T<C.fields.length;T++){const M=C.fields[T];if(f===M.name)return T;const I=(0,n.Ct)(M,C,P);if(f===I)return T}}function D(f){const C=f.state?.calcs;if(C){const M=C[a.gy.lastNotNull];if(M!=null)return M}const P=f.values;let T=P.length-1;for(;T>=0;){const M=P[T--];if(M!=null)return M}}},59490:(ne,j,e)=>{"use strict";e.d(j,{U:()=>n});function n({handler:a}){return{onKeyDown(s,d,o){return a&&s.key==="Enter"&&(s.shiftKey||s.ctrlKey)?(s.preventDefault(),a(s),d):o()}}}},59553:(ne,j,e)=>{"use strict";e.d(j,{Ge:()=>s,TP:()=>d,cQ:()=>o,ss:()=>l});var n=e(68143),a=e(43173);const s=()=>a.$.namespace,d=(i,c)=>`/apis/${i}/${c}/namespaces/${s()}`,o=i=>{if(!i)return"Unknown error";if(typeof i=="object"){if("data"in i&&i.data&&typeof i.data=="object"&&"message"in i.data)return String(i.data.message);if("message"in i)return String(i.message);if("error"in i){if(i.error instanceof Error)return i.error.message;if((0,n.NF)(i.error)){if(i.error.data&&typeof i.error.data=="object"&&"message"in i.error.data)return String(i.error.data.message);if(Array.isArray(i.error.data.errors)&&i.error.data.errors.length)return i.error.data.errors.join(`
`)}}}return i instanceof Error?i.message:String(i)};function l(i){return(0,n.NF)(i)||i instanceof Error?{error:i}:{error:new Error("Unknown error")}}},59692:(ne,j,e)=>{"use strict";e.d(j,{k:()=>a});var n=e(22803);function a(d,o){const l=d.colors.border.weak,i=d.colors.primary.border,c=6,p=s(d,o,c),h=p+2,u=28,r=(v,g,E,x,m,y,b,D,f)=>(0,n.css)({label:x?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${c}px`,width:"100%",height:f?"auto !important":`${h-1}px`,wordBreak:b?"break-all":"inherit",display:"flex",...m?{overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}:{},alignItems:"center",borderRight:`1px solid ${l}`,color:D?"inherit":v??void 0,background:D?void 0:g??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:x&&!b?"visible":void 0,width:y||!x?"auto":"auto !important",height:(y||x)&&!b?"auto !important":`${h-1}px`,minHeight:`${h-1}px`,wordBreak:y?"break-word":void 0,whiteSpace:y&&x?"normal":"nowrap",boxShadow:x?`0 0 2px ${d.colors.primary.main}`:void 0,background:D?"inherit":E??d.colors.background.primary,zIndex:1,".cellActions":{background:d.components.tooltip.background,color:d.components.tooltip.text,visibility:"visible",opacity:1,width:"auto",borderRadius:d.shape.radius.default}},a:{color:"inherit"},".cellActions":{display:"flex",position:x?void 0:"absolute",top:x?void 0:"1px",right:x?void 0:0,margin:x?d.spacing(0,0,0,1):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:d.spacing(.5,0,.5,.5),background:d.components.tooltip.background,color:d.components.tooltip.text},".cellActionsLeft":{right:"auto !important",left:0}});return{theme:d,cellHeight:p,buildCellContainerStyle:r,cellPadding:c,cellHeightInner:p-c*2,rowHeight:h,table:(0,n.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,n.css)({label:"thead",height:`${u}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,n.css)({label:"tfoot",height:`${u}px`,borderTop:`1px solid ${l}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,n.css)({label:"row",borderBottom:`1px solid ${l}`}),headerCell:(0,n.css)({height:"100%",padding:`0 ${c}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:d.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,n.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:d.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:d.spacing(.5),"&:hover":{textDecoration:"underline",color:d.colors.text.link}}),cellContainerText:r(void 0,void 0,void 0,!0,!0),cellContainerTextNoOverflow:r(void 0,void 0,void 0,!1,!0),cellContainer:r(void 0,void 0,void 0,!0,!1),cellContainerNoOverflow:r(void 0,void 0,void 0,!1,!1),cellText:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",cursor:"text"}),sortIcon:(0,n.css)({marginLeft:d.spacing(.5)}),cellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:`${d.colors.text.link} !important`,fontWeight:d.typography.fontWeightMedium,paddingRight:d.spacing(1.5),"&:hover":{textDecoration:"underline",color:d.colors.text.link}}),cellLinkEmpty:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:d.typography.fontWeightMedium,paddingRight:d.spacing(1.5)}),cellLinkForColoredCell:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:d.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,n.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,n.css)({display:"flex",height:`${p}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,n.css)({color:d.colors.text.secondary,fontSize:d.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:d.spacing(0,1,0,2)}),tableContentWrapper:v=>{const g=v!==void 0?`${v}px`:"100%";return(0,n.css)({label:"tableContentWrapper",width:g,display:"flex",flexDirection:"column"})},row:(0,n.css)({label:"row",borderBottom:`1px solid ${l}`,"&:hover":{backgroundColor:d.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,n.css)({height:"100%"}),resizeHandle:(0,n.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:i,opacity:0,[d.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.2s ease-in-out"},width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:d.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,n.css)({marginRight:d.spacing(1),color:d.colors.text.secondary}),noData:(0,n.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,n.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${h}px`,cursor:"pointer"})}}function s(d,o,l){const i=d.typography.fontSize,c=d.typography.body.lineHeight;switch(o){case"md":return 42;case"lg":return 48;case"sm":default:return l*2+i*c}}},59695:(ne,j,e)=>{"use strict";e.d(j,{i:()=>i});var n=e(74848),a=e(96540),s=e(51898),d=e(63142),o=e(45861),l=e(18857);function i({"aria-label":c,label:p,icon:h,options:u,onChange:r,variant:v,minWidth:g=16,size:E="sm",isFullWidth:x=!0,menuPlacement:m,fill:y,buttonCss:b}){const[D,f]=(0,a.useState)(!1),C=(0,d.$j)();return(0,n.jsxs)(n.Fragment,{children:[!D&&(0,n.jsx)(o.$n,{size:E||"sm",className:b,icon:h||"plus",onClick:()=>f(!0),variant:v,fill:y,fullWidth:x,"data-testid":s.Tp.components.ValuePicker.button(c??p),children:p}),D&&(0,n.jsx)("span",{style:{minWidth:C.spacing(g),flexGrow:x?1:void 0},children:(0,n.jsx)(l.l6,{placeholder:p,options:u,"aria-label":s.Tp.components.ValuePicker.select(c??p),isOpen:!0,onCloseMenu:()=>f(!1),autoFocus:!0,onChange:P=>{f(!1),r(P)},menuPlacement:m})})]})}},59740:(ne,j,e)=>{"use strict";e.d(j,{K:()=>s});var n=e(739);const a="12.3.0",s={cellHeight:n.qM.Sm,frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},59795:(ne,j,e)=>{"use strict";e.d(j,{I1:()=>b,_$:()=>E,gl:()=>r});var n=e(2543),a=e.n(n),s=e(36394),d=e(60519),o=e(35987),l=e(46644),i=e(64394),c=e(33553),p=e(38919),h=e(739);const u=["reduceOptions","orientation"];function r(C,P,T){let M=C.options;if(C.fieldConfig=C.fieldConfig||{defaults:{},overrides:[]},(P==="singlestat"||P==="grafana-singlestat-panel")&&T.angular)return g(C,T);if(P==="graph")return v(C,T);for(const I of u)T.hasOwnProperty(I)&&(M[I]=(0,n.cloneDeep)(T[I]));return M}function v(C,P){const T=P.angular,M={orientation:p.wV.Auto,reduceOptions:{values:!1,calcs:[]},legend:{displayMode:h.lm.List,showLegend:!0,placement:"bottom",calcs:[]}};if(T.xaxis?.mode==="series"){C.fieldConfig={...C.fieldConfig,defaults:{...C.fieldConfig.defaults,color:{mode:"palette-classic"}}},T.xaxis.values&&(M.reduceOptions.calcs=f(T.xaxis.values));const I=T.legend;if(I){if(I.show?M.legend.displayMode=I.alignAsTable?h.lm.Table:h.lm.List:M.legend.showLegend=!1,I.rightSide&&(M.legend.placement="right"),I.values){const B=(0,n.pickBy)(I,n.identity);M.legend.calcs=D(B)}I.sideWidth&&(M.legend.width=I.sideWidth)}}return M}function g(C,P){const T=P.angular,M=l.AS.getIfExists(T.valueName),I={reduceOptions:{calcs:[M?M.id:l.gy.mean]},orientation:p.wV.Horizontal},B={};if(T.format&&(B.unit=T.format),T.tableColumn&&(I.reduceOptions.fields=`/^${T.tableColumn}$/`),T.nullPointMode&&(B.nullValueMode=T.nullPointMode),T.nullText&&(B.noValue=T.nullText),(T.decimals||T.decimals===0)&&(B.decimals=T.decimals),T.thresholds&&T.colors){const W=T.thresholds.split(",").map(z=>Number(z.trim())),V=[];for(const z of T.colors){const R=V.length-1;R>=0?V.push({value:W[R],color:z}):V.push({value:-1/0,color:z})}B.thresholds={mode:c.O.Absolute,steps:V}}const U=(0,o.bh)(T,B.thresholds);return U&&U.length&&(B.mappings=U),T.gauge&&T.gauge.show&&(B.min=T.gauge.minValue,B.max=T.gauge.maxValue),C.fieldConfig.defaults=B,I}function E(C){if(!C.options)return{reduceOptions:{calcs:[l.gy.mean]},orientation:p.wV.Horizontal};const P=parseFloat(C.pluginVersion||"6.1");let T=C.options;P<6.2&&(T=m(T)),P<6.3&&(T=x(T));const{fieldOptions:M}=T;if(P<6.6&&M){if(M&&M.override){const{override:U,...W}=T.fieldOptions;T={...T,fieldOptions:{...W,overrides:[]}}}let I=M?.defaults?.thresholds;I?delete M.defaults.thresholds:(I=M?.thresholds,delete M.thresholds),I&&(M.defaults.thresholds={mode:c.O.Absolute,steps:I});const{defaults:B}=M;B.color&&typeof B.color=="string"&&(B.color={mode:i.Y.Fixed,fixedColor:B.color}),(0,d.BF)(B)}if(P<7&&(C.fieldConfig=C.fieldConfig||{defaults:{},overrides:[]},C.fieldConfig={defaults:M&&M.defaults?{...C.fieldConfig.defaults,...M.defaults}:C.fieldConfig.defaults,overrides:M&&M.overrides?[...C.fieldConfig.overrides,...M.overrides]:C.fieldConfig.overrides},M&&(T.reduceOptions={values:M.values,limit:M.limit,calcs:M.calcs}),delete T.fieldOptions),P<7.1){const I=C.fieldConfig.defaults.title;I!=null&&(C.fieldConfig.defaults.displayName=I,delete C.fieldConfig.defaults.title)}if(P<8){const I=C.fieldConfig?.defaults;let B=I?.unit;B==="percent"?((0,n.isNumber)(I.min)||(I.min=0),(0,n.isNumber)(I.max)||(I.max=100)):B==="percentunit"&&((0,n.isNumber)(I.min)||(I.min=0),(0,n.isNumber)(I.max)||(I.max=1))}return T}function x(C){const{fieldOptions:P}=C;if(!P)return C;const{mappings:T,...M}=C.fieldOptions;let I;return C.thresholds&&(I={mode:c.O.Absolute,steps:y(C.thresholds)}),{...C,fieldOptions:{...M,defaults:{...P.defaults,mappings:T,thresholds:I}}}}function m(C){const{valueOptions:P}=C;if(!P)return C;const T={},M={};if(T.mappings=C.valueMappings,T.thresholds=C.thresholds,T.defaults=M,M.unit=P.unit,M.decimals=P.decimals,P.stat){const B=l.AS.get(P.stat);B&&(T.calcs=[B.id])}M.min=C.minValue,M.max=C.maxValue;const I={...C,fieldOptions:T};return(0,n.omit)(I,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function y(C){if(!C||!C.length)return;const P=C.map(T=>({value:T.value===null?-1/0:T.value,color:T.color}));return(0,s.RU)(P),P[0].value=-1/0,P}function b(C){return(0,o.bh)(C)}function D(C){const P=[];for(const T in C){const M=l.AS.getIfExists(T);M&&P.push(M.id)}return P}function f(C){const P=[];return C?.forEach(T=>{Object.values(l.gy).includes(T)?P.push(T):T==="current"?P.push(l.gy.lastNotNull):T==="total"?P.push(l.gy.sum):T==="avg"&&P.push(l.gy.mean)}),C?P:[l.gy.sum]}},59857:(ne,j,e)=>{"use strict";e.d(j,{Ye:()=>s,lt:()=>o,rw:()=>d,zL:()=>a});var n=e(21275),a=(v=>(v[v.dontHide=0]="dontHide",v[v.hideLabel=1]="hideLabel",v[v.hideVariable=2]="hideVariable",v[v.inControlsMenu=3]="inControlsMenu",v))(a||{});const s=n.Ye,d={...n.rw},o=n.lt,l=n.OA,i=n.GW,c=n.QB,p=n.bt,h=n.ss,u=n.bf,r=n.aD},60171:(ne,j,e)=>{"use strict";e.d(j,{GV:()=>d,HG:()=>c,QX:()=>v,Y:()=>s,_5:()=>i,aK:()=>l,b_:()=>o,cR:()=>h,mi:()=>u,rL:()=>p});var n=e(43173),a=e(36490);function s(g){return g==="v2alpha1"||g==="v2beta1"}function d(g){const E=n.$.featureToggles.dashboardScene,x=n.$.featureToggles.kubernetesDashboards,m=a.Ny.getSearch().get("scenes")==="false";if(!E||m){if(g==="v2")throw new Error("v2 is not supported for legacy architecture");return x?"v1":"legacy"}if(x)return g==="v1"?"v1":g==="v2"?"v2":"unified";if(g==="v2")throw new Error("v2 is not supported if kubernetes dashboards are disabled");return"legacy"}function o(g){return g?"kind"in g&&g.kind==="DashboardWithAccessInfo":!1}function l(g){return"elements"in g}function i(g){return!l(g)}function c(g){return o(g)&&l(g.spec)}function p(g){return!l(g.dashboard)}function h(g){return!l(g)}function u(g){return l(g.dashboard)}function r(g){return g.status?.conversion?.failed?g.status.conversion.storedVersion:void 0}function v(g,E){const x=r(g);return!!x&&E.some(m=>x.startsWith(m))}},60208:(ne,j,e)=>{"use strict";e.d(j,{o:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(63142),l=e(35484),i=e(45861),c=e(30703),p=e(45967),h=e(72489);const u=s.forwardRef(({label:v,active:g,icon:E,onChangeTab:x,counter:m,suffix:y,className:b,href:D,truncate:f,tooltip:C,disabled:P,...T},M)=>{const I=(0,o.of)(r),B=(0,o.of)(i.my),U=()=>(0,n.jsxs)(n.Fragment,{children:[E&&(0,n.jsx)(c.I,{name:E,"data-testid":`tab-icon-${E}`}),v,typeof m=="number"&&(0,n.jsx)(h.p,{value:m}),y&&(0,n.jsx)(y,{className:I.suffix})]}),V={className:(0,a.cx)(B,I.link,g?I.activeStyle:I.notActive,f&&I.linkTruncate,P&&I.disabled),"data-testid":d.Tp.components.Tab.title(v),...T,onClick:P?void 0:x,role:"tab","aria-selected":g,"aria-disabled":P,tabIndex:P?-1:void 0,title:C?void 0:T.title};let z=null;return D?z=(0,n.jsx)("div",{className:(0,a.cx)(I.item,f&&I.itemTruncate,b),children:(0,n.jsx)("a",{...V,href:P?void 0:D,ref:M,children:U()})}):z=(0,n.jsx)("div",{className:(0,a.cx)(I.item,f&&I.itemTruncate,b),children:(0,n.jsx)("button",{...V,type:"button",ref:M,children:U()})}),C?(0,n.jsx)(p.m,{content:C,children:z}):z});u.displayName="Tab";const r=v=>({item:(0,a.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap",padding:v.spacing(0,.5)}),itemTruncate:(0,a.css)({maxWidth:v.spacing(40)}),link:(0,a.css)({color:v.colors.text.secondary,padding:v.spacing(1,1.5,1),borderRadius:v.shape.radius.default,display:"block",height:"100%",svg:{marginRight:v.spacing(1)},"&:focus-visible":(0,l.getFocusStyles)(v),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",borderRadius:v.shape.radius.default,bottom:0}}),linkTruncate:(0,a.css)({textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-word",overflow:"hidden"}),notActive:(0,a.css)({"a:hover, &:hover, &:focus":{color:v.colors.text.primary,"&::before":{backgroundColor:v.colors.action.hover}}}),activeStyle:(0,a.css)({label:"activeTabStyle",color:v.colors.text.primary,overflow:"hidden","&::before":{backgroundImage:v.colors.gradients.brandHorizontal}}),suffix:(0,a.css)({marginLeft:v.spacing(1)}),disabled:(0,a.css)({color:v.colors.text.disabled,cursor:"not-allowed","&:hover, &:focus":{color:v.colors.text.disabled,"&::before":{backgroundColor:"transparent"}}})})},60249:(ne,j,e)=>{"use strict";e.d(j,{C:()=>De});var n=e(74848),a=e(92745),s=e(44248),d=e(8207),o=e(54314),l=e(60208),i=e(34999),c=e(14252),p=e(61215),h=e(26689),u=e(92119),r=e(22803),v=e(96540),g=e(70713),E=e(1906),x=e(43173),m=e(63142),y=e(41654),b=e(991),D=e(89640),f=e(68079),C=e(37386),P=e(18857),T=e(47931),M=e(45861),I=e(50992),B=e(21285),U=e(15130),W=e(11257),V=e(4213),z=e.n(V),R=e(80011),O=e(55386),N=e(5114),F=e(65333),G=e(2543),H=e(77154),K=e(739),w=e(28105),Q=e(8095),k=e(70030),te=e(34273);function q(be){const Oe=[];if(be?.series)for(const Ne of be.series)Oe.push((0,H.Nw)(Ne));if(be?.annotations)for(const Ne of be.annotations){const We=(0,H.Nw)(Ne);We.schema?.meta||(We.schema.meta={}),We.schema.meta.dataTopic=K.QR.Annotations,Oe.push(We)}return Oe}function se(be,Oe){const Ne={panelType:be.state.pluginId,datasource:"??"},We=x.$.buildInfo.versionString;let qe=`| Key | Value |
|--|--|
| Panel | ${Ne.panelType} @ ${be.state.pluginVersion??We} |
| Grafana | ${We} // ${x.$.buildInfo.edition} |
`;return Oe&&(qe+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+Oe+"\n```\n</details>"),qe}async function re(be,Oe,Ne){let We={type:""};const qe=be.parent;(0,u.ME)(be)?We={...(0,k.ZB)(qe),...(0,k.Z6)(be)}:We=(0,k.ZB)(qe);const st=(0,G.cloneDeep)(_),rt={panelType:be.state.pluginId,datasource:"??"},ot=(0,u.un)(be);if(!ot.state.data)return;const mt=ot.state.data,pt=ot?.state.datasource,ke=(0,te.W)(q(mt),Oe),Ze=x.$.buildInfo.versionString,nt=ot.state.queries??[],ut=mt.annotations?mt.annotations.reduce((ht,tt)=>tt.length+ht,0):0,gt=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${rt.panelType} @ ${We.pluginVersion??Ze}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${nt.map(ht=>{const tt=ht.datasource??pt;return`${ht.refId}[${tt?.type}]`}).join(", ")}</td>
    </tr>
    ${Y(We)}
    ${X(mt,ke)}
    ${J(mt)}
    <tr>
      <th>Grafana</th>
      <td>${Ze} // ${x.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(st.panels[0]={...We,...st.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:Q.nj.Snapshot,snapshot:ke}]},delete st.panels[0].libraryPanel,We.transformations?.length){const ht=st.panels[st.panels.length-1];ht.title=ht.title+" (after transformations)";const tt=(0,G.cloneDeep)(ht);tt.id=100,tt.title="Data (before transformations)",tt.gridPos.w=24,tt.targets[0].withTransforms=!1,st.panels.push(tt)}return ut>0&&st.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:K.QR.Annotations,refId:"A"}]}),st.panels[1].options.content=gt,st.panels[2].options.content=JSON.stringify(We,null,2),st.title=`Debug: ${We.title} // ${(0,R.LE)(new Date)}`,st.tags=["debug",`debug-${rt.panelType}`],st.time={from:Ne.from.toISOString(),to:Ne.to.toISOString()},st}function Y(be){return be.transformations?`<tr>
      <th>Transform</th>
      <td>${be.transformations.map(Oe=>Oe.id).join(", ")}</td>
  </tr>`:""}function X(be,Oe){let Ne=be.series.length??0,We=0,qe=0;for(const st of be.series)We+=st.fields.length,qe+=st.length;return`<tr><th>Data</th><td>${be.state!==w.Gu.Done?be.state:""} ${Ne} frames, ${We} fields, ${qe} rows </td></tr>`}function J(be){return be.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${be.annotations.reduce((Oe,Ne)=>Ne.length+Oe,0)}</td>
</tr>`:""}const _={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37};var ee=(be=>(be[be.Support=0]="Support",be[be.Data=1]="Data",be))(ee||{}),ae=(be=>(be[be.PanelSnapshot=0]="PanelSnapshot",be[be.GithubComment=1]="GithubComment",be))(ae||{});class le extends N.Q{constructor(Oe){super({panel:Oe,panelTitle:s.jh.interpolate(Oe,Oe.state.title,{},"text"),currentTab:0,showMessage:1,snapshotText:"",markdownText:"",randomize:{},snapshotUpdate:0,options:[{label:(0,a.t)("dashboard-scene.support-snapshot-service.label.git-hub-comment","GitHub comment"),description:"Copy and paste this message into a GitHub issue or comment",value:1},{label:(0,a.t)("dashboard-scene.support-snapshot-service.label.panel-support-snapshot","Panel support snapshot"),description:(0,a.t)("dashboard-scene.support-snapshot-service.description.dashboard-troubleshoot-visualization-issues","Dashboard JSON used to help troubleshoot visualization issues"),value:0}]}),this.onCurrentTabChange=Ne=>{this.setState({currentTab:Ne})},this.onShowMessageChange=Ne=>{this.setState({showMessage:Ne.value})},this.onGetMarkdownForClipboard=()=>{const{markdownText:Ne}=this.state,We=Math.pow(1024,2)*1.5;return Ne.length>We?(this.setState({error:{title:(0,a.t)("dashboard-scene.support-snapshot-service.title.copy-to-clipboard-failed","Copy to clipboard failed"),message:"Snapshot is too large, consider download and attaching a file instead"}}),""):Ne},this.onDownloadDashboard=()=>{const{snapshotText:Ne,panelTitle:We}=this.state,qe=new Blob([Ne],{type:"text/plain"}),st=`debug-${We}-${(0,R.LE)(new Date)}.json.txt`;z()(qe,st)},this.onSetSnapshotText=Ne=>{this.setState({snapshotText:Ne})},this.onToggleRandomize=Ne=>{const{randomize:We}=this.state;this.setState({randomize:{...We,[Ne]:!We[Ne]}})}}async buildDebugDashboard(){const{panel:Oe,randomize:Ne,snapshotUpdate:We}=this.state,qe=await re(Oe,Ne,s.jh.getTimeRange(Oe).state.value),st=JSON.stringify(qe,null,2),rt=se(Oe,st),ot=(0,O.cN)((0,O.j_)("bytes")(st?.length??0));let mt;if(qe)try{mt=(0,F.wM)({dashboard:qe,meta:{isEmbedded:!0}}).state.body}catch(pt){console.log("Error creating scene:",pt)}this.setState({snapshot:qe,snapshotText:st,markdownText:rt,snapshotSize:ot,snapshotUpdate:We+1,scene:mt})}}function L({panel:be,onClose:Oe}){const Ne=(0,m.of)(ie),We=(0,v.useMemo)(()=>new le(be),[be]),qe=be.getPlugin(),{currentTab:st,loading:rt,error:ot,options:mt,showMessage:pt,snapshotSize:ke,markdownText:Ze,snapshotText:nt,randomize:ut,panelTitle:gt,scene:ht}=We.useState();if((0,v.useEffect)(()=>{We.buildDebugDashboard()},[We,qe,ut]),!qe)return null;const tt=[{label:(0,a.t)("dashboard-scene.help-wizard.tabs.label.snapshot","Snapshot"),value:ee.Support},{label:(0,a.t)("dashboard-scene.help-wizard.tabs.label.data","Data"),value:ee.Data}],Ot=x.$.supportBundlesEnabled&&U.TP.hasPermission(W.w.ActionSupportBundlesCreate);return(0,n.jsxs)(d._,{title:(0,a.t)("dashboard-scene.help-wizard.title-get-help-with-this-panel","Get help with this panel"),size:"lg",onClose:Oe,subtitle:(0,n.jsxs)(y.B,{direction:"column",gap:1,children:[(0,n.jsxs)(y.B,{direction:"row",gap:1,children:[(0,n.jsx)(b.y,{featureState:E.Ay.beta}),(0,n.jsx)(D.Y,{href:"https://grafana.com/docs/grafana/latest/troubleshooting/",external:!0,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.help-wizard.troubleshooting-docs",children:"Troubleshooting docs"})})]}),(0,n.jsx)("span",{className:"muted",children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.help-wizard.troubleshooting-request-help",children:"To request troubleshooting help, send a snapshot of this panel to Grafana Labs Technical Support. The snapshot contains query response data and panel settings."})}),Ot&&(0,n.jsx)("span",{className:"muted",children:(0,n.jsxs)(a.x6,{i18nKey:"dashboard-scene-help-wizard.support-bundle",children:["You can also retrieve a support bundle containing information concerning your Grafana instance and configured datasources in the ",(0,n.jsx)(D.Y,{href:"/support-bundles",children:"support bundles section"}),"."]})})]}),tabs:(0,n.jsx)(o.U,{children:tt.map((jt,wt)=>(0,n.jsx)(l.o,{label:jt.label,active:jt.value===st,onChangeTab:()=>We.onCurrentTabChange(jt.value)},`${jt.value}-${wt}`))}),children:[rt&&(0,n.jsx)(f.y,{}),ot&&(0,n.jsx)(i.F,{title:ot.title,children:ot.message}),st===ee.Data&&(0,n.jsxs)("div",{className:Ne.code,children:[(0,n.jsxs)("div",{className:Ne.opts,children:[(0,n.jsx)(C.D,{label:(0,a.t)("dashboard-scene.help-wizard.label-template","Template"),className:Ne.field,children:(0,n.jsx)(P.l6,{options:mt,value:pt,onChange:We.onShowMessageChange})}),pt===ae.GithubComment?(0,n.jsx)(T.b,{icon:"copy",getText:We.onGetMarkdownForClipboard,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.help-wizard.copy-to-clipboard",children:"Copy to clipboard"})}):(0,n.jsx)(M.$n,{icon:"download-alt",onClick:We.onDownloadDashboard,children:(0,n.jsxs)(a.x6,{i18nKey:"dashboard-scene.help-wizard.download-snapshot",children:["Download (",{snapshotSize:ke},")"]})})]}),(0,n.jsx)(g.Ay,{disableWidth:!0,children:({height:jt})=>(0,n.jsx)(I.B,{width:"100%",height:jt,language:pt===ae.GithubComment?"markdown":"json",showLineNumbers:!0,showMiniMap:!0,value:pt===ae.GithubComment?Ze:nt,readOnly:!1,onBlur:We.onSetSnapshotText})})]}),st===ee.Support&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.D,{label:(0,a.t)("dashboard-scene.help-wizard.label-randomize-data","Randomize data"),description:(0,a.t)("dashboard-scene.help-wizard.description-randomize-data","Modify the original data to hide sensitive information. Note the lengths will stay the same, and duplicate values will be equal."),children:(0,n.jsxs)(y.B,{children:[(0,n.jsx)(B.K,{label:(0,a.t)("dashboard-scene.help-wizard.randomize-labels-label-labels","Labels"),id:"randomize-labels",showLabel:!0,value:!!ut.labels,onChange:()=>We.onToggleRandomize("labels")}),(0,n.jsx)(B.K,{label:(0,a.t)("dashboard-scene.help-wizard.randomize-field-names-label-field-names","Field names"),id:"randomize-field-names",showLabel:!0,value:!!ut.names,onChange:()=>We.onToggleRandomize("names")}),(0,n.jsx)(B.K,{label:(0,a.t)("dashboard-scene.help-wizard.randomize-string-values-label-string-values","String values"),id:"randomize-string-values",showLabel:!0,value:!!ut.values,onChange:()=>We.onToggleRandomize("values")})]})}),(0,n.jsx)(C.D,{label:(0,a.t)("dashboard-scene.help-wizard.label-support-snapshot","Support snapshot"),description:(0,a.t)("dashboard-scene.help-wizard.description-support-snapshot","Panel: {{panelTitle}}",{panelTitle:gt}),children:(0,n.jsxs)(y.B,{children:[(0,n.jsx)(M.$n,{icon:"download-alt",onClick:We.onDownloadDashboard,children:(0,n.jsxs)(a.x6,{i18nKey:"dashboard-scene.help-wizard.download-dashboard",children:["Dashboard (",{snapshotSize:ke},")"]})}),(0,n.jsx)(T.b,{icon:"github",getText:We.onGetMarkdownForClipboard,title:(0,a.t)("dashboard-scene.help-wizard.title-complete-git-hub-comment-clipboard","Copy a complete GitHub comment to the clipboard"),children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.help-wizard.copy-to-clipboard",children:"Copy to clipboard"})})]})}),(0,n.jsx)("div",{style:{height:"100%",overflow:"auto",display:"flex"},children:ht&&(0,n.jsx)(ht.Component,{model:ht})})]})]})}const ie=be=>({code:(0,r.css)({flexGrow:1,height:"100%",overflow:"scroll"}),field:(0,r.css)({width:"100%"}),opts:(0,r.css)({display:"flex",width:"100%",flexGrow:0,alignItems:"center",justifyContent:"flex-end","& button":{marginLeft:be.spacing(1)}})});var oe=e(42836);class ue extends s.Bs{constructor(Oe){super({...Oe,options:{withTransforms:!1,withFieldConfig:!0}}),this.onOptionsChange=Ne=>{this.setState({options:Ne})}}getTabLabel(){return(0,a.t)("dashboard.inspect.data-tab","Data")}getTabValue(){return h.q.Data}static{this.Component=({model:Oe})=>{const{options:Ne}=Oe.useState(),We=Oe.state.panelRef.resolve(),qe=s.jh.getData(We),{data:st}=fe(qe,Ne.withTransforms).useState(),rt=s.jh.getTimeRange(We);return st||a.x6,(0,n.jsx)(oe.q,{isLoading:st?.state===w.Gu.Loading,data:st?.series,options:Ne,hasTransformations:ye(qe),timeZone:rt.getTimeZone(),panelPluginId:We.state.pluginId,dataName:s.jh.interpolate(We,We.state.title),fieldConfig:We.state.fieldConfig,onOptionsChange:Oe.onOptionsChange})}}}function ye(be){return be instanceof s.Es?be.state.transformations.length>0:!1}function fe(be,Oe){return!Oe&&be instanceof s.Es&&be.state.$data?be.state.$data:be}var Ee=e(51898),Ae=e(60171),Ge=e(98314),Fe=e(82612),Pe=e(89460),Ve=e(8419),me=e(67497),Se=e(93389),Qe=e(62265);class Ue extends s.Bs{constructor(Oe){super({...Oe,source:"panel-json",jsonText:Re("panel-json",Oe.panelRef.resolve())}),this.onChangeSource=Ne=>{this.setState({source:Ne.value,jsonText:Re(Ne.value,this.state.panelRef.resolve())})},this.onApplyChange=()=>{const Ne=this.state.panelRef.resolve(),We=(0,u.YQ)(Ne),qe=JSON.parse(this.state.jsonText),st=new Fe.a9(qe),rt=(0,F.tt)(st),ot=s.Go.cloneSceneObjectState(rt.state);if(!(Ne.parent instanceof Se.U)){console.error("Cannot update state of panel",Ne,rt);return}this.state.onClose(),We.state.isEditing||We.onEnterEditMode(),Ne.parent.setState(ot),(0,me.B9)(h.q.JSON,"apply",{panel_type_changed:Ne.state.pluginId!==st.type,panel_id_changed:(0,u.Cs)(Ne)!==st.id,panel_grid_pos_changed:ze(Ne.parent.state,ot),panel_targets_changed:Be((0,u.un)(Ne),(0,u.un)(ot.$data))})},this.onCodeEditorBlur=Ne=>{this.setState({jsonText:Ne})}}getTabLabel(){return(0,a.t)("dashboard.inspect.json-tab","JSON")}getTabValue(){return h.q.JSON}getOptions(){const Oe=this.state.panelRef.resolve(),Ne=Oe.state.$data??Oe.parent?.state.$data,We=[{label:(0,a.t)("dashboard.inspect-json.panel-json-label","Panel JSON"),description:(0,a.t)("dashboard.inspect-json.panel-json-description","The model saved in the dashboard JSON that configures how everything works."),value:"panel-json"}];return Ne&&(We.push({label:(0,a.t)("dashboard.inspect-json.panel-data-label","Panel data"),description:(0,a.t)("dashboard.inspect-json.panel-data-description","The raw model passed to the panel visualization"),value:"panel-data"}),We.push({label:(0,a.t)("dashboard.inspect-json.dataframe-label","DataFrame JSON (from Query)"),description:(0,a.t)("dashboard.inspect-json.dataframe-description","Raw data without transformations and field config applied. "),value:"data-frames"})),We}isEditable(){if(this.state.source!=="panel-json")return!1;const Oe=this.state.panelRef.resolve();return(0,u.ME)(Oe)||(0,Ae.aK)((0,u.YQ)(Oe).getSaveModel())||Oe.parent instanceof Se.U&&Oe.parent.isRepeated()?!1:(0,u.YQ)(Oe).state.meta.canEdit}static{this.Component=Ie}}function Ie({model:be}){const{source:Oe,jsonText:Ne}=be.useState(),We=(0,m.of)(Pe.A),qe=be.getOptions();return(0,n.jsxs)("div",{className:We.wrap,children:[(0,n.jsxs)("div",{className:We.toolbar,"data-testid":Ee.Tp.components.PanelInspector.Json.content,children:[(0,n.jsx)(C.D,{label:(0,a.t)("dashboard.inspect-json.select-source","Select source"),className:"flex-grow-1",children:(0,n.jsx)(P.l6,{inputId:"select-source-dropdown",options:qe,value:qe.find(st=>st.value===Oe)??qe[0].value,onChange:be.onChangeSource})}),be.isEditable()&&(0,n.jsx)(M.$n,{className:We.toolbarItem,onClick:be.onApplyChange,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.inspect-json-tab.apply",children:"Apply"})})]}),(0,n.jsx)("div",{className:We.content,children:(0,n.jsx)(g.Ay,{disableWidth:!0,children:({height:st})=>(0,n.jsx)(I.B,{width:"100%",height:st,language:"json",showLineNumbers:!0,showMiniMap:Ne.length>100,value:Ne,readOnly:!be.isEditable(),onBlur:be.onCodeEditorBlur})})})]})}function Re(be,Oe){let Ne={};switch(be){case"panel-json":{(0,me.B9)(h.q.JSON,"panelData");const We=(0,u.ME)(Oe),qe=Oe.parent;if(We){Ne=Ke(Oe);break}if((0,Ae.aK)((0,u.YQ)(Oe).getSaveModel())){Ne=(0,Qe.GB)(Oe);break}else qe instanceof Se.U&&(Ne=(0,k.ZB)(qe));break}case"panel-data":{(0,me.B9)(h.q.JSON,"panelJSON");const We=s.jh.getData(Oe);We.state.data&&(Ne=Oe.applyFieldConfig(We.state.data));break}case"data-frames":{(0,me.B9)(h.q.JSON,"dataFrame");const We=s.jh.getData(Oe);We.state.data&&(We instanceof s.Es&&We.state.$data?.state.data?Ne=(0,Ge.B6)(We.state.$data.state.data):Ne=(0,Ge.B6)(We.state.data))}}return(0,Ve.p)(Ne)}function Ke(be){if(!(0,u.ME)(be))throw"Panel not a library panel";const Oe=be.parent;if(!(Oe instanceof Se.U))throw"LibraryPanel not child of DashboardGridItem";const Ne={x:Oe.state.x||0,y:Oe.state.y||0,h:Oe.state.height||0,w:Oe.state.width||0},We=Le(be),qe=(0,k.Z6)(be.clone({$behaviors:void 0}),Ne,!1,Oe);return{libraryPanel:{...We},...qe}}function Le(be){if(!(0,u.ME)(be))throw new Error("Panel not a Library panel");const Oe=(0,u.iL)(be);if(!Oe)throw new Error("Library panel behavior not found");if(!Oe.state._loadedPanel)throw new Error("Library panel not loaded");return Oe.state._loadedPanel}function ze(be,Oe){return be.x!==Oe.x||be.y!==Oe.y||be.width!==Oe.width||be.height!==Oe.height}function Be(be,Oe){return be===void 0||Oe===void 0?!1:!(0,G.isEqual)(be.state.queries,Oe.state.queries)}class $e extends s.Bs{getTabLabel(){return(0,a.t)("dashboard.inspect.meta-tab","Meta data")}getTabValue(){return h.q.Meta}static{this.Component=({model:Oe})=>{const{panelRef:Ne,dataSource:We}=Oe.state,qe=s.jh.getData(Ne.resolve()),st=We.components?.MetadataInspector;return!qe.state.data||!st?null:(0,n.jsx)(st,{datasource:We,data:qe.state.data.series})}}}var Ye=e(96065);class de extends s.Bs{constructor(){super(...arguments),this.onRefreshQuery=()=>{const Oe=(0,u.un)(this.state.panelRef.resolve());Oe&&Oe.runQueries()}}getTabLabel(){return(0,a.t)("dashboard.inspect.query-tab","Query")}getTabValue(){return h.q.Query}static{this.Component=({model:Oe})=>{const Ne=s.jh.getData(Oe.state.panelRef.resolve()).useState();return Ne.data?(0,n.jsx)(Ye.e,{data:Ne.data,onRefreshQuery:Oe.onRefreshQuery}):null}}}var ge=e(55072);class pe extends s.Bs{getTabLabel(){return(0,a.t)("dashboard.inspect.stats-tab","Stats")}getTabValue(){return h.q.Stats}static{this.Component=({model:Oe})=>{const Ne=s.jh.getData(Oe.state.panelRef.resolve()).useState(),We=s.jh.getTimeRange(Oe.state.panelRef.resolve());return Ne.data?(0,n.jsx)(ge.N,{data:Ne.data,timeZone:We.getTimeZone()}):null}}}class De extends s.Bs{constructor(Oe){super(Oe),this.onClose=()=>{(0,u.YQ)(this).closeModal()},this.addActivationHandler(()=>this._activationHandler())}static{this.Component=Me}_activationHandler(){this.buildTabs(0)}async buildTabs(Oe){const Ne=this.state.panelRef,We=Ne.resolve()?.getPlugin(),qe=[];if(We||(Oe<2e3?setTimeout(()=>this.buildTabs(Oe+100),100):this.setState({pluginNotLoaded:!0})),Ne){if((0,p.$)(We)){const st=s.jh.getData(Ne.resolve());qe.push(new ue({panelRef:Ne})),qe.push(new pe({panelRef:Ne})),qe.push(new de({panelRef:Ne}));const rt=await(0,c.BN)(st.state.data);rt&&qe.push(new $e({panelRef:Ne,dataSource:rt}))}qe.push(new Ue({panelRef:Ne,onClose:this.onClose}))}this.setState({tabs:qe})}getDrawerTitle(){const Oe=this.state.panelRef?.resolve();return Oe?s.jh.interpolate(Oe,`Inspect: ${Oe.state.title}`):"Inspect panel"}}function Me({model:be}){const{tabs:Oe,pluginNotLoaded:Ne,panelRef:We,currentTab:qe}=be.useState();if(!Oe)return null;const st=We.resolve(),rt=Oe.find(ot=>ot.getTabValue()===qe)??Oe[0];return qe===h.q.Help?(0,n.jsx)(L,{panel:st,onClose:be.onClose}):(0,n.jsxs)(d._,{title:be.getDrawerTitle(),onClose:be.onClose,size:"md",tabs:(0,n.jsx)(o.U,{children:Oe.map(ot=>(0,n.jsx)(l.o,{label:ot.getTabLabel(),active:ot===rt,onChangeTab:()=>{be.setState({currentTab:ot.getTabValue()})}},ot.state.key))}),children:[Ne&&(0,n.jsx)(i.F,{title:(0,a.t)("dashboard-scene.panel-inspect-renderer.title-panel-plugin-not-loaded","Panel plugin not loaded"),children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-inspect-renderer.body-panel-plugin-not-loaded",children:"Make sure the panel you want to inspect is visible and has been displayed before opening inspect."})}),rt.Component&&(0,n.jsx)(rt.Component,{model:rt})]})}},60311:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>s,m:()=>a});var n=e(74848);let a=()=>(0,n.jsx)("div",{children:"PanelRenderer can only be used after Grafana instance has been started."});function s(d){a=d}},60379:(ne,j,e)=>{"use strict";e.d(j,{h:()=>d});var n=e(2543),a=e.n(n);const s=(0,n.throttle)((...o)=>{console.log(...o)},500),d=o=>{let l=!1;return typeof window<"u"&&(l=window.localStorage.getItem("grafana.debug")==="true"),{logger:(i,c=!1,...p)=>{},enable:()=>l=!0,disable:()=>l=!1,isEnabled:()=>l}}},60519:(ne,j,e)=>{"use strict";e.d(j,{BF:()=>I,Cq:()=>O,JC:()=>R,K3:()=>W,_M:()=>U,nJ:()=>b,rJ:()=>V,vd:()=>z,we:()=>D});var n=e(2543),a=e.n(n),s=e(96540),d=e(84596),o=e(21275),l=e(739),i=e(76732),c=e(41119),p=e(6773),h=e(46644),u=e(36638),r=e(95004),v=e(64394),g=e(38036),E=e(92138),x=e(11576),m=e(79118),y=e(53543);function b(N){let F=null,G=null;const H=[h.gy.min,h.gy.max];for(const K of N)for(const w of K.fields)if(w.type===r.PU.number){const Q=(0,h.Nw)({field:w,reducers:H}),k=Q[h.gy.min],te=Q[h.gy.max];(F===null||k<F)&&(F=k),(G===null||te>G)&&(G=te)}return{min:F,max:G,delta:(G??0)-(F??0)}}function D(N){if(!N.data)return[];const F=N.fieldConfig;if(!F)return N.data;const G=N.fieldConfigRegistry??y.G;let H=0,K;const w=[];if(F.overrides)for(const Q of F.overrides){const k=u.sJ.get(Q.matcher.id);k&&w.push({match:k.get(Q.matcher.options),properties:Q.properties})}return N.data.map((Q,k)=>{const te={...Q};te.fields=te.fields.map(q=>({...q,config:(0,n.cloneDeep)(q.config),state:{...q.state}}));for(const q of te.fields){const se=q.config;q.state.scopedVars={__dataContext:{value:{data:N.data,frame:te,frameIndex:k,field:q}}};const re={field:q,data:N.data,dataFrameIndex:k,replaceVariables:N.replaceVariables,fieldConfigRegistry:G};T(se,F.defaults,re);for(const _ of w)if(_.match(q,te,N.data))for(const ee of _.properties)P(se,ee,re);let Y=q.type;if(!Y||Y===r.PU.other){const _=(0,c.dF)(q);_&&(Y=_)}const{range:X,newGlobalRange:J}=f(se,q,K,N.data);if(K=J,q.state.displayName=null,q.state.seriesIndex=H,q.state.range=X,q.type=Y,q.type!==r.PU.time&&H++,q.display=(0,x.J)({field:q,theme:N.theme,timeZone:N.timeZone}),q.config.unit!=="dateTimeFromNow"&&(q.display=C(q.display,2500)),q.getLinks=U(te,q,q.state.scopedVars,re.replaceVariables,N.timeZone,N.dataLinkPostProcessor),q.type===r.PU.nestedFrames)for(const _ of q.values)for(let ee=0;ee<_.length;ee++)for(const ae of _[ee].fields)ae.display=(0,x.J)({field:ae,theme:N.theme,timeZone:N.timeZone}),ae.state={scopedVars:{__dataContext:{value:{data:_,frame:_[ee],frameIndex:ee,field:ae}}}},ae.getLinks=U(_[ee],ae,ae.state.scopedVars,re.replaceVariables,N.timeZone,N.dataLinkPostProcessor);q.type===r.PU.frame&&(q.values=D({...N,data:q.values.map(_=>_??(0,c.EI)({fields:[]}))}))}return te})}function f(N,F,G,H){if((0,n.isNumber)(N.min)&&(0,n.isNumber)(N.max)){const k={min:N.min,max:N.max,delta:N.max-N.min};return{range:k,newGlobalRange:G??k}}if(F.type!==r.PU.number||(0,n.isNumber)(N.min)&&(0,n.isNumber)(N.max))return{newGlobalRange:G};if(N.fieldMinMax){const k=(0,m.AP)(F),te=N.min??k.min,q=N.max??k.max;return{range:{min:te,max:q,delta:q-te},newGlobalRange:G}}const K=G??b(H),w=N.min??K.min,Q=N.max??K.max;return{range:{min:w,max:Q,delta:Q-w},newGlobalRange:K}}function C(N,F=2500){const G=new Map;for(let H=-1;H<=15;H++)G.set(H,new Map);return(H,K)=>{let w=G.get(K??-1),Q=w.get(H);return Q||(w.size===F&&w.clear(),Q=N(H,K),Q.color&&(Q.color=(0,p.ze)(Q.color)),w.set(H,Q)),Q}}function P(N,F,G){const K=G.fieldConfigRegistry.getIfExists(F.id);if(!K)return;const w=K.process(F.value,G,K.settings);w==null?K.isCustom&&N.custom?(0,n.unset)(N.custom,K.path):(0,n.unset)(N,K.path):K.isCustom?(N.custom||(N.custom={}),(0,n.set)(N.custom,K.path,w)):(0,n.set)(N,K.path,w)}function T(N,F,G){N.links&&F.links&&(N.links=[...N.links,...F.links]);const H=F?.thresholds?.mode===o.Ol.Absolute&&F.thresholds?.steps.find(K=>K.value===-1/0);N.thresholds?.mode===o.Ol.Absolute&&!N.thresholds.steps.some(K=>K.value===-1/0)&&H&&(N.thresholds.steps=[H,...N.thresholds.steps]);for(const K of G.fieldConfigRegistry.list())K.isCustom&&!N.custom&&(N.custom={}),M(K.isCustom?N.custom:N,K.isCustom?F.custom:F,K,G);I(N)}function M(N,F,G,H){const K=(0,n.get)(N,G.path);if(K==null){const w=H.fieldConfigRegistry.getIfExists(G.id);if(!w)return;if(w&&w.shouldApply(H.field)){const Q=w.process((0,n.get)(F,w.path),H,w.settings);Q!=null&&(0,n.set)(N,w.path,Q)}}}function I(N){const{thresholds:F}=N;if(N.color?N.color.mode||delete N.color:F&&(N.color={mode:v.Y.Thresholds}),N.hasOwnProperty("min")&&N.hasOwnProperty("max")&&N.min>N.max){const G=N.max;N.max=N.min,N.min=G}}const B=N=>{const{link:F,linkModel:G,dataLinkScopedVars:H,field:K,replaceVariables:w}=N;return F.internal?(0,g.u)({link:F,internalLink:F.internal,scopedVars:H,field:K,range:F.internal.range,replaceVariables:w}):G},U=(N,F,G,H,K,w)=>Q=>!F.config.links||F.config.links.length===0?[]:F.config.links.map(te=>{const q=z(N,F,G),se={...G,__dataContext:q},re=(J,_,ee)=>H(J,{...se,..._},ee);Q.valueRowIndex!==void 0&&!isNaN(Q.valueRowIndex)?q.value.rowIndex=Q.valueRowIndex:q.value.calculatedValue=Q.calculatedValue;let Y,X=te.onClick||!te.onBuildUrl?te.url:te.onBuildUrl({origin:F,replaceVariables:re});return X&&(X=E.I.assureBaseUrl(X.replace(/\n/g,"")),X=H(X,se,l.$m.UriEncode),X?.length>0&&(X=E.I.processUrl(X))),te.onClick?Y={href:X,title:H(te.title||"",se),target:te.targetBlank?"_blank":void 0,onClick:(J,_)=>{te.onClick({origin:_??F,e:J,replaceVariables:re})},origin:F,oneClick:te.oneClick??!1}:Y={href:X,title:H(te.title||"",se),target:te.targetBlank?"_blank":void 0,origin:F,oneClick:te.oneClick??!1},(w||B)({frame:N,field:F,dataLinkScopedVars:se,replaceVariables:H,config:Q,link:te,linkModel:Y})}).filter(te=>!!te);function W(N){if(!N||N.length===0)return[];const F=[...N],G=(0,x.H)();for(let H=0;H<F.length;H++){const K={...F[H]},w=[...K.fields];for(let Q=0;Q<w.length;Q++)w[Q]={...w[Q],display:G};F[H]={...K,fields:w}}return F}function V(N,F,G,H,K,w){const Q=N?.fieldConfigRegistry,k=(0,s.useRef)(0),te=(0,d.A)(G?.series),{dataLinkPostProcessor:q}=O();return(0,s.useMemo)(()=>{if(!Q||!F||!G)return;const se=G?.series;G.structureRev==null&&se&&te&&!(0,i.J3)(se,te,i.bW)&&k.current++;const re={structureRev:k.current,...G,series:D({data:se,fieldConfig:F,fieldConfigRegistry:Q,replaceVariables:w,theme:K,timeZone:H,dataLinkPostProcessor:q})};return G.annotations&&G.annotations.length>0&&(re.annotations=D({data:G.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:w,theme:K,timeZone:H,dataLinkPostProcessor:q})),re},[Q,F,G,te,H,K,w,q])}function z(N,F,G){return G?.__dataContext?{value:{...G.__dataContext.value}}:{value:{frame:N,field:F,data:[N]}}}const R=(0,s.createContext)({dataLinkPostProcessor:B}),O=()=>(0,s.useContext)(R)},60793:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>V});var n=e(32334);const a=["API Discovery","Dashboard","LibraryPanel","Search"],s=n.FH.enhanceEndpoints({addTagTypes:a}).injectEndpoints({endpoints:z=>({getApiResources:z.query({query:()=>({url:"/apis/dashboard.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),listDashboard:z.query({query:R=>({url:"/dashboards",params:{pretty:R.pretty,allowWatchBookmarks:R.allowWatchBookmarks,continue:R.continue,fieldSelector:R.fieldSelector,labelSelector:R.labelSelector,limit:R.limit,resourceVersion:R.resourceVersion,resourceVersionMatch:R.resourceVersionMatch,sendInitialEvents:R.sendInitialEvents,timeoutSeconds:R.timeoutSeconds,watch:R.watch}}),providesTags:["Dashboard"]}),createDashboard:z.mutation({query:R=>({url:"/dashboards",method:"POST",body:R.dashboard,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["Dashboard"]}),deletecollectionDashboard:z.mutation({query:R=>({url:"/dashboards",method:"DELETE",params:{pretty:R.pretty,continue:R.continue,dryRun:R.dryRun,fieldSelector:R.fieldSelector,gracePeriodSeconds:R.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:R.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:R.labelSelector,limit:R.limit,orphanDependents:R.orphanDependents,propagationPolicy:R.propagationPolicy,resourceVersion:R.resourceVersion,resourceVersionMatch:R.resourceVersionMatch,sendInitialEvents:R.sendInitialEvents,timeoutSeconds:R.timeoutSeconds}}),invalidatesTags:["Dashboard"]}),getDashboard:z.query({query:R=>({url:`/dashboards/${R.name}`,params:{pretty:R.pretty}}),providesTags:["Dashboard"]}),replaceDashboard:z.mutation({query:R=>({url:`/dashboards/${R.name}`,method:"PUT",body:R.dashboard,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["Dashboard"]}),deleteDashboard:z.mutation({query:R=>({url:`/dashboards/${R.name}`,method:"DELETE",params:{pretty:R.pretty,dryRun:R.dryRun,gracePeriodSeconds:R.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:R.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:R.orphanDependents,propagationPolicy:R.propagationPolicy}}),invalidatesTags:["Dashboard"]}),updateDashboard:z.mutation({query:R=>({url:`/dashboards/${R.name}`,method:"PATCH",body:R.patch,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation,force:R.force}}),invalidatesTags:["Dashboard"]}),getDashboardDto:z.query({query:R=>({url:`/dashboards/${R.name}/dto`}),providesTags:["Dashboard"]}),listLibraryPanel:z.query({query:R=>({url:"/librarypanels",params:{pretty:R.pretty,allowWatchBookmarks:R.allowWatchBookmarks,continue:R.continue,fieldSelector:R.fieldSelector,labelSelector:R.labelSelector,limit:R.limit,resourceVersion:R.resourceVersion,resourceVersionMatch:R.resourceVersionMatch,sendInitialEvents:R.sendInitialEvents,timeoutSeconds:R.timeoutSeconds,watch:R.watch}}),providesTags:["LibraryPanel"]}),createLibraryPanel:z.mutation({query:R=>({url:"/librarypanels",method:"POST",body:R.libraryPanel,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["LibraryPanel"]}),deletecollectionLibraryPanel:z.mutation({query:R=>({url:"/librarypanels",method:"DELETE",params:{pretty:R.pretty,continue:R.continue,dryRun:R.dryRun,fieldSelector:R.fieldSelector,gracePeriodSeconds:R.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:R.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:R.labelSelector,limit:R.limit,orphanDependents:R.orphanDependents,propagationPolicy:R.propagationPolicy,resourceVersion:R.resourceVersion,resourceVersionMatch:R.resourceVersionMatch,sendInitialEvents:R.sendInitialEvents,timeoutSeconds:R.timeoutSeconds}}),invalidatesTags:["LibraryPanel"]}),getLibraryPanel:z.query({query:R=>({url:`/librarypanels/${R.name}`,params:{pretty:R.pretty}}),providesTags:["LibraryPanel"]}),replaceLibraryPanel:z.mutation({query:R=>({url:`/librarypanels/${R.name}`,method:"PUT",body:R.libraryPanel,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["LibraryPanel"]}),deleteLibraryPanel:z.mutation({query:R=>({url:`/librarypanels/${R.name}`,method:"DELETE",params:{pretty:R.pretty,dryRun:R.dryRun,gracePeriodSeconds:R.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:R.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:R.orphanDependents,propagationPolicy:R.propagationPolicy}}),invalidatesTags:["LibraryPanel"]}),updateLibraryPanel:z.mutation({query:R=>({url:`/librarypanels/${R.name}`,method:"PATCH",body:R.patch,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation,force:R.force}}),invalidatesTags:["LibraryPanel"]}),getSearch:z.query({query:R=>({url:"/search",params:{query:R.query,type:R.type,folder:R.folder,facet:R.facet,tags:R.tags,sort:R.sort,limit:R.limit,explain:R.explain}}),providesTags:["Search"]}),getSearchSortable:z.query({query:()=>({url:"/search/sortable"}),providesTags:["Search"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:d,useLazyGetApiResourcesQuery:o,useListDashboardQuery:l,useLazyListDashboardQuery:i,useCreateDashboardMutation:c,useDeletecollectionDashboardMutation:p,useGetDashboardQuery:h,useLazyGetDashboardQuery:u,useReplaceDashboardMutation:r,useDeleteDashboardMutation:v,useUpdateDashboardMutation:g,useGetDashboardDtoQuery:E,useLazyGetDashboardDtoQuery:x,useListLibraryPanelQuery:m,useLazyListLibraryPanelQuery:y,useCreateLibraryPanelMutation:b,useDeletecollectionLibraryPanelMutation:D,useGetLibraryPanelQuery:f,useLazyGetLibraryPanelQuery:C,useReplaceLibraryPanelMutation:P,useDeleteLibraryPanelMutation:T,useUpdateLibraryPanelMutation:M,useGetSearchQuery:I,useLazyGetSearchQuery:B,useGetSearchSortableQuery:U,useLazyGetSearchSortableQuery:W}=s,V=s.enhanceEndpoints({addTagTypes:[...a,"Folder","Dashboard"]})},61048:(ne,j,e)=>{"use strict";e.d(j,{i:()=>l});var n=e(74848),a=e(22803),s=e(34164),d=e(51898),o=e(63142);const l=({children:c,className:p})=>{const h=(0,o.of)(i);return(0,n.jsx)("div",{className:(0,s.A)(h,p),"data-testid":d.Tp.components.Panels.Visualization.Tooltip.Wrapper,children:c})},i=c=>(0,a.css)({display:"flex",flexDirection:"column",fontSize:c.typography.bodySmall.fontSize})},61074:(ne,j,e)=>{"use strict";e.d(j,{F:()=>s});var n=e(7467),a=e(43173);function s(){const d=[];return a.$.featureToggles.grafanaconThemes&&(d.push("desertbloom"),d.push("gildedgrove"),d.push("sapphiredusk"),d.push("tron"),d.push("gloom")),(0,n.k)(d)}},61190:(ne,j,e)=>{"use strict";e.d(j,{L:()=>a,y:()=>s});var n=e(43173);function a(d){return{grafana_version:n.$.buildInfo.version,plugin_type:String(d.type),plugin_version:d.info.version,plugin_id:d.id,plugin_name:d.name}}function s(d){return{...a(d.meta),datasource_uid:d.uid}}},61215:(ne,j,e)=>{"use strict";e.d(j,{$:()=>l,A:()=>o,EQ:()=>i,Sf:()=>c});var n=e(2543),a=e.n(n),s=e(95943),d=e(62667);function o(p,h,u,r){if(p===d.q5.Fill)return{width:h,height:u};const v=48,x=(window.innerWidth-60-s.dU*4)/s.cV*r.gridPos.w,m=s.sD*r.gridPos.h+v,y=Math.min(h/x,u/m);return x<=h&&m<=u?{width:x,height:m}:{width:x*y,height:m*y}}function l(p){return p?.meta.skipDataQuery===!1}const i=(p,h,u,r)=>{let v={...p.defaults};const g=u==null||u==="";return r?v.custom?g?v.custom=(0,n.omit)(v.custom,h):v.custom=c(v.custom,h,u):g||(v.custom=c(v.custom,h,u)):g?v=(0,n.omit)(v,h):v=c(v,h,u),{...p,defaults:v}};function c(p,h,u){const r=Array.isArray(h)?h:h.split("."),v=r.shift();if(v.endsWith("]")){const E=v.lastIndexOf("["),x=+v.substring(E+1,v.length-1),m=v.substring(0,E);let y=p[m];const b=Array.isArray(y)?[...y]:[];return r.length&&(y=b[x],(y==null||typeof y!="object")&&(y={}),u=c(y,r,u)),b[x]=u,{...p,[m]:b}}if(!r.length)return{...p,[v]:u};let g=p[v];return(g==null||typeof g!="object")&&(g={}),{...p,[v]:c(g,r,u)}}},61371:(ne,j,e)=>{"use strict";e.d(j,{Fl:()=>l,G4:()=>o});var n=e(16111),a=e(25504),s=e(2543),d=e.n(s);const o=(p,h)=>{const u=(0,n.UD)(p,h),r=a.stringify(p,null,2),v=a.stringify(h,null,2),g=m=>m.map(y=>{let b,D,f=0,C=0;const P=(0,s.tail)(y.path.split("/"));return y.op==="replace"&&v.pointers[y.path]&&(b=(0,s.get)(p,P),D=y.value,f=v.pointers[y.path].value.line,C=v.pointers[y.path].valueEnd.line),y.op==="add"&&v.pointers[y.path]&&(D=y.value,f=v.pointers[y.path].value.line,C=v.pointers[y.path].valueEnd.line),y.op==="remove"&&r.pointers[y.path]&&(b=(0,s.get)(p,P),f=r.pointers[y.path].value.line,C=r.pointers[y.path].valueEnd.line),{op:y.op,value:D,path:P,originalValue:b,startLineNumber:f,endLineNumber:C}}),E=m=>(0,s.sortBy)(m,"startLineNumber"),x=m=>m.reduce((y,b)=>{const D=b.path[0];return y[D]||(y[D]=[]),y[D].push(b),y},{});return(0,s.flow)([g,E,x])(u)},l=(p,h=!0)=>{const u=(0,s.last)(p.path),r=i(u),v=p.op==="remove"?p.originalValue:p.value;let g=c(p.op);return h&&(r?g+=` item ${u}`:(0,s.isArray)(v)&&!(0,s.isEmpty)(v)?g+=` ${v.length} ${u}`:g+=` ${u}`),g},i=p=>!(0,s.isNaN)((0,s.toNumber)(p)),c=p=>p==="add"?"added":p==="remove"?"deleted":"changed"},61638:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>B});var n=e(75816),a=e(59553),s=e(73659);const l=(0,a.TP)("shorturl.grafana.app","v1alpha1"),i=(0,n.xP)({reducerPath:"shortURLAPIv1alpha1",baseQuery:(0,s.W)({baseURL:l}),endpoints:()=>({})}),c=["API Discovery","ShortURL"],p=i.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:U=>({getApiResources:U.query({query:()=>({url:"/apis/shorturl.grafana.app/v1alpha1/"}),providesTags:["API Discovery"]}),listShortUrl:U.query({query:W=>({url:"/shorturls",params:{pretty:W.pretty,allowWatchBookmarks:W.allowWatchBookmarks,continue:W.continue,fieldSelector:W.fieldSelector,labelSelector:W.labelSelector,limit:W.limit,resourceVersion:W.resourceVersion,resourceVersionMatch:W.resourceVersionMatch,sendInitialEvents:W.sendInitialEvents,timeoutSeconds:W.timeoutSeconds,watch:W.watch}}),providesTags:["ShortURL"]}),createShortUrl:U.mutation({query:W=>({url:"/shorturls",method:"POST",body:W.shortUrl,params:{pretty:W.pretty,dryRun:W.dryRun,fieldManager:W.fieldManager,fieldValidation:W.fieldValidation}}),invalidatesTags:["ShortURL"]}),deletecollectionShortUrl:U.mutation({query:W=>({url:"/shorturls",method:"DELETE",params:{pretty:W.pretty,continue:W.continue,dryRun:W.dryRun,fieldSelector:W.fieldSelector,gracePeriodSeconds:W.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:W.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:W.labelSelector,limit:W.limit,orphanDependents:W.orphanDependents,propagationPolicy:W.propagationPolicy,resourceVersion:W.resourceVersion,resourceVersionMatch:W.resourceVersionMatch,sendInitialEvents:W.sendInitialEvents,timeoutSeconds:W.timeoutSeconds}}),invalidatesTags:["ShortURL"]}),getShortUrl:U.query({query:W=>({url:`/shorturls/${W.name}`,params:{pretty:W.pretty}}),providesTags:["ShortURL"]}),replaceShortUrl:U.mutation({query:W=>({url:`/shorturls/${W.name}`,method:"PUT",body:W.shortUrl,params:{pretty:W.pretty,dryRun:W.dryRun,fieldManager:W.fieldManager,fieldValidation:W.fieldValidation}}),invalidatesTags:["ShortURL"]}),deleteShortUrl:U.mutation({query:W=>({url:`/shorturls/${W.name}`,method:"DELETE",params:{pretty:W.pretty,dryRun:W.dryRun,gracePeriodSeconds:W.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:W.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:W.orphanDependents,propagationPolicy:W.propagationPolicy}}),invalidatesTags:["ShortURL"]}),updateShortUrl:U.mutation({query:W=>({url:`/shorturls/${W.name}`,method:"PATCH",body:W.patch,params:{pretty:W.pretty,dryRun:W.dryRun,fieldManager:W.fieldManager,fieldValidation:W.fieldValidation,force:W.force}}),invalidatesTags:["ShortURL"]}),getShortUrlGoto:U.query({query:W=>({url:`/shorturls/${W.name}/goto`}),providesTags:["ShortURL"]}),getShortUrlStatus:U.query({query:W=>({url:`/shorturls/${W.name}/status`,params:{pretty:W.pretty}}),providesTags:["ShortURL"]}),replaceShortUrlStatus:U.mutation({query:W=>({url:`/shorturls/${W.name}/status`,method:"PUT",body:W.shortUrl,params:{pretty:W.pretty,dryRun:W.dryRun,fieldManager:W.fieldManager,fieldValidation:W.fieldValidation}}),invalidatesTags:["ShortURL"]}),updateShortUrlStatus:U.mutation({query:W=>({url:`/shorturls/${W.name}/status`,method:"PATCH",body:W.patch,params:{pretty:W.pretty,dryRun:W.dryRun,fieldManager:W.fieldManager,fieldValidation:W.fieldValidation,force:W.force}}),invalidatesTags:["ShortURL"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:h,useLazyGetApiResourcesQuery:u,useListShortUrlQuery:r,useLazyListShortUrlQuery:v,useCreateShortUrlMutation:g,useDeletecollectionShortUrlMutation:E,useGetShortUrlQuery:x,useLazyGetShortUrlQuery:m,useReplaceShortUrlMutation:y,useDeleteShortUrlMutation:b,useUpdateShortUrlMutation:D,useGetShortUrlGotoQuery:f,useLazyGetShortUrlGotoQuery:C,useGetShortUrlStatusQuery:P,useLazyGetShortUrlStatusQuery:T,useReplaceShortUrlStatusMutation:M,useUpdateShortUrlStatusMutation:I}=p,B=p.enhanceEndpoints({})},61659:(ne,j,e)=>{"use strict";e.d(j,{x:()=>d});var n=e(96540),a=e(95943),s=e(29043);function d(){const[o,l]=(0,n.useState)(s.A.exists(a.tH)),[i,c]=(0,n.useState)(s.A.exists(a.rt)),[p,h]=(0,n.useState)(s.A.exists(a.Gk));return(0,n.useEffect)(()=>{const u=s.A.subscribe(a.tH,()=>{l(s.A.exists(a.tH))}),r=s.A.subscribe(a.rt,()=>{c(s.A.exists(a.rt))}),v=s.A.subscribe(a.Gk,()=>{h(s.A.exists(a.Gk))});return()=>{u(),r(),v()}},[]),{hasCopiedPanel:o,hasCopiedRow:i,hasCopiedTab:p}}},61666:(ne,j,e)=>{"use strict";e.d(j,{G7:()=>o,KU:()=>l,eb:()=>i});var n=e(68143),a=e(73427),s=e(11257),d=e(52763);const o=(0,d.zD)("users/fetchInvitees",async()=>a.TP.hasPermission(s.w.OrgUsersAdd)?await(0,n.AI)().get("/api/org/invites"):[]),l=(0,d.zD)("users/addInvitee",async(c,{dispatch:p})=>{await(0,n.AI)().post("/api/org/invites",c),await p(o())}),i=(0,d.zD)("users/revokeInvite",async c=>(await(0,n.AI)().patch(`/api/org/invites/${c}/revoke`,{}),c))},61730:(ne,j,e)=>{"use strict";e.d(j,{m:()=>i});var n=e(74848),a=e(22803),s=e(92745),d=e(71599),o=e(63142);const l=()=>{const p=(0,o.of)(c);return(0,n.jsx)("p",{className:p.description,children:(0,s.t)("shared-dashboard.delete-modal.revoke-body-text","Are you sure you want to revoke this access? The dashboard can no longer be shared.")})},i=({onConfirm:p,onDismiss:h})=>{const u=(0,s.t)("shared-dashboard.delete-modal.revoke-title","Revoke access");return(0,n.jsx)(d.u,{isOpen:!0,body:(0,n.jsx)(l,{}),onConfirm:p,onDismiss:h,title:u,icon:"trash-alt",confirmText:u})},c=p=>({title:(0,a.css)({marginBottom:p.spacing(1)}),description:(0,a.css)({fontSize:p.typography.body.fontSize})})},61844:(ne,j,e)=>{"use strict";e.d(j,{Av:()=>c,OD:()=>i,kB:()=>o});var n=e(43173),a=e(72331),s=e(98060),d=e(6223);function o(p){return Object.keys(p).reduce((h,u)=>{const r=`${s.XV}:${u}`;return l(r,p[u]),a.s.set(u,p[u]),h[u]=r,h},{})}function l(p,h){if(d.z.has(p))return;let u;try{u=d.z.resolve(p)}catch(v){console.log(v)}if(u&&d.z.has(u))return;const r=u||p;typeof h=="function"?d.z.register(p,[],v=>({execute:async function(){const g=await h();v(g)}})):d.z.set(r,h)}function i(p){return!!n.$.pluginsCDNBaseURL&&p.startsWith(n.$.pluginsCDNBaseURL)}function c(p){return p.startsWith("http")||p.startsWith("/")?p:`${n.$.appSubUrl??""}/${p}`}},61875:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>h});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(63142),l=e(79233),i=e(89467),c=e(37864),p=e(3431);function h({options:u,value:r,onChange:v,Component:g,className:E,allowCustomValue:x,allowEmptyValue:m,placeholder:y,disabled:b,inputMinWidth:D,inputPlaceholder:f,onExpandedChange:C,autofocus:P=!1,...T}){const[M,I,B,U]=(0,p.Q)(P,C),W=D?Math.max(D,I):I,V=(0,o.of)(c.m);if(!B){const z=(0,s.isObject)(r)?r.label:r,R=z!=null?String(z):void 0;return(0,n.jsx)(M,{disabled:b,Component:g||(0,n.jsx)(l.c,{className:(0,a.cx)(V.segment,{[V.queryPlaceholder]:y!==void 0&&!r,[V.disabled]:b},E),children:R||y})})}return(0,n.jsx)(i.a,{...T,value:r&&!(0,s.isObject)(r)?{value:r}:r,placeholder:f,options:u,width:W,onClickOutside:()=>U(!1),allowCustomValue:x,allowEmptyValue:m,onChange:z=>{U(!1),v(z)}})}},61897:(ne,j,e)=>{"use strict";e.d(j,{$:()=>u,t:()=>h});var n=e(74848),a=e(96540),s=e(76637),d=e(16515),o=e(739),l=e(63142),i=e(54735),c=e(4268),p=e(36192);function h(r,v){return r.getSeries().some(g=>{const E=g.props.dataFrameFieldIndex;if(!E)return!1;const x=v[E.frameIndex]?.fields[E.fieldIndex];return!(!x||x.config.custom?.hideFrom?.legend)})}const u=(0,a.memo)(({data:r,config:v,placement:g,calcs:E,displayMode:x,...m})=>{const y=(0,l.$j)(),b=v.getSeries().map(D=>{const f=D.props,C=f.dataFrameFieldIndex,P=v.getAxisPlacement(D.props.scaleKey);if(!C)return;const T=r[C.frameIndex]?.fields[C.fieldIndex];if(!T||T.config.custom?.hideFrom?.legend)return;const M=(0,d.Ct)(T,r[C.frameIndex],r),B=(0,s.lz)(T,y).color;return{disabled:!(f.show??!0),fieldIndex:C,color:B,label:M,yAxis:P===o.vM.Left||P===o.vM.Bottom?1:2,getDisplayValues:()=>(0,p.UO)(E,T,y),getItemKey:()=>`${M}-${C.frameIndex}-${C.fieldIndex}`,lineStyle:f.lineStyle}}).filter(D=>D!==void 0);return(0,n.jsx)(i.KU.Legend,{placement:g,...m,children:(0,n.jsx)(c.t,{placement:g,items:b,displayMode:x,sortBy:m.sortBy,sortDesc:m.sortDesc,isSortable:!0})})});u.displayName="PlotLegend"},62215:(ne,j,e)=>{"use strict";e.d(j,{FE:()=>c,jE:()=>l,qE:()=>i});var n=e(2543),a=e.n(n),s=e(92745),d=e(62635),o=e(46072);const l=(r,v)=>c(r,v),i=r=>{let v=[];return r.forEach(g=>{g.links?.forEach(E=>{if("variables"in E&&E.variables.length>0){const x={href:E.href,title:E.title,origin:E.origin,onClick:E.onClick,target:E.target},m=E.variables.map(b=>{const D=b.variableName,f=b.fieldPath?`.${b.fieldPath}`:"";return`${D}${f}`}),y=E.variables.map(b=>b.found?b.value:"");v.push({keys:m,values:y,links:[x],fieldIndex:g.fieldIndex})}})}),v},c=(r,v)=>u(r).map(E=>{const x={__labels:{text:(0,s.t)("logs.get-dataframe-fields.vars.text.labels","Labels"),value:{tags:{...r.labels}}}},m=v?v(E,r.rowIndex,r.dataFrame,x):[],y=E.values[r.rowIndex],b=typeof y=="string"||typeof y=="number"?y.toString():(0,d.MA)(y);return{keys:[E.name],values:[b],links:m,fieldIndex:E.index}});function p(r,v){const g=(0,o.Os)(r);if(g===null)return new Set;const E=new Set(g.extraFields.map(x=>x.index));return g.severityField!==null&&E.add(g.severityField.index),v.keepBody&&E.add(g.bodyField.index),v.keepTimestamp&&E.add(g.timeField.index),E}function h(r,v){const g=r.fields.map((y,b)=>({...y,index:b})),E=p(r,v??{}),[x,m]=partition(g,y=>y.config.custom?.hidden?!1:(y.config.links??[]).length>0?!0:E.has(y.index));return{visible:x,hidden:m}}function u(r,v){const g=r.dataFrame,E=p(g,v??{}),x=[];for(let m=0;m<g.fields.length;m++){const y=g.fields[m];y.values[r.rowIndex]!=null&&(y.config.custom?.hidden||(y.config.links&&y.config.links.length>0||E.has(m))&&x.push({...y,index:m}))}return x}},62265:(ne,j,e)=>{"use strict";e.d(j,{AB:()=>re,Cy:()=>U,GB:()=>D,Ic:()=>R,Xl:()=>x,c:()=>O,c8:()=>M,lD:()=>T});var n=e(2543),a=e.n(n),s=e(3594),d=e(43173),o=e(44248),l=e(21275),i=e(10605),c=e(11393),p=e(88632),h=e(23244),u=e(1682),r=e(92119),v=e(2505),g=e(84500),E=e(39508);function x(Y,X=!1){const J=Y.state,_=J.$timeRange.state,ee=J.controls?.state,ae=ee?.refreshPicker,le=Y.serializer.getDSReferencesMapping(),L={title:J.title,description:J.description,cursorSync:m(J),liveNow:y(J),preload:J.preload??(0,c.xE)().preload,editable:J.editable??(0,c.xE)().editable,links:J.links??(0,c.xE)().links,tags:J.tags??(0,c.xE)().tags,timeSettings:{timezone:_.timeZone,from:_.from,to:_.to,autoRefresh:ae?.state.refresh||"",autoRefreshIntervals:ae?.state.intervals,hideTimepicker:ee?.hideTimeControls??!1,weekStart:_.weekStart,fiscalYearStartMonth:_.fiscalYearStartMonth,nowDelay:_.UNSAFE_nowDelay,quickRanges:ee?.timePicker.state.quickRanges},variables:W(J,le),elements:b(Y,le),annotations:V(J,le),layout:J.body.serialize()};try{if(N(L))return(0,i.v)(L,!0);throw new Error("Error we could transform the dashboard to schema v2: "+L)}catch(ie){throw console.error("Error transforming dashboard to schema v2: "+ie,L),new Error("Error transforming dashboard to schema v2: "+ie)}}function m(Y){const X=Y.$behaviors?.find(J=>J instanceof o.Gg.K2)?.state.sync;return(0,E.k6)(X)}function y(Y){const X=Y.$behaviors?.find(J=>J instanceof o.Gg.en)?.isEnabled||void 0;return X===void 0?!!(0,c.xE)().liveNow:!!X}function b(Y,X){const _=(Y.state.body.getVizPanels()??[]).map(ee=>D(ee,X));return U(_,Y)}function D(Y,X){if((0,r.ME)(Y)){const ae=(0,r.iL)(Y);return{kind:"LibraryPanel",spec:{id:(0,r.Cs)(Y),title:Y.state.title,libraryPanel:{uid:ae.state.uid,name:ae.state.name}}}}const J=f(Y),_={...Y.state.fieldConfig,defaults:J};return{kind:"Panel",spec:{id:(0,r.Cs)(Y),title:Y.state.title,description:Y.state.description??"",links:C(Y),transparent:Y.state.displayMode==="transparent"?!0:void 0,data:{kind:"QueryGroup",spec:{queries:P(Y,X),transformations:I(Y),queryOptions:B(Y)}},vizConfig:{kind:"VizConfig",group:Y.state.pluginId,version:Y.state.pluginVersion??"",spec:{options:Y.state.options,fieldConfig:_??(0,c.bt)()}}}}}function f(Y){if(!Y.state.fieldConfig||!Y.state.fieldConfig.defaults)return(0,c.QB)();const X=Y.state.fieldConfig.defaults.color;let J;if(X){const L=(0,E.Jc)(X.mode);L&&(J={...X,mode:L})}const _=Y.state.fieldConfig.defaults.decimals??void 0,ee=Y.state.fieldConfig.defaults.min??void 0,ae=Y.state.fieldConfig.defaults.max??void 0;return Object.fromEntries(Object.entries({...Y.state.fieldConfig.defaults,decimals:_,min:ee,max:ae,color:J}).filter(([L,ie])=>Array.isArray(ie)?ie.length>0:ie!==void 0))}function C(Y){const X=u.b4.getPanelLinks(Y);return X?X.state.rawLinks??[]:[]}function P(Y,X){const J=[],_=(0,r.un)(Y),ee=_?.state.queries;return ee&&ee.forEach(ae=>{const le=re(Y,ae,"panel",_,X),L={kind:"DataQuery",version:(0,c.iM)().version,group:T(ae,_),datasource:{name:le?.uid},spec:(0,n.omit)(ae,"datasource","refId","hide")};L.datasource?.name||delete L.datasource;const ie={query:L,refId:ae.refId,hidden:!!ae.hide};J.push({kind:"PanelQuery",spec:ie})}),J}function T(Y,X){return typeof Y=="string"?R()?.type||"":Y.datasource?.type?Y.datasource.type:X?.state.datasource?.type?X.state.datasource.type:R()?.type||""}function M(Y){return Y}function I(Y){let X=[];const J=Y.state.$data;if(J instanceof o.Es){const _=J.state.transformations;if(_.length===0)return[];for(const ee of _){const ae=ee;if("id"in ae){const le={id:ae.id,disabled:ae.disabled,filter:ae.filter,...ae.topic&&{topic:ae.topic},options:ae.options};X.push({kind:ae.id,spec:le})}else throw new Error("Unsupported transformation type")}}return X}function B(Y){let X={};const J=(0,r.un)(Y);J&&(X.maxDataPoints=J.state.maxDataPoints,J.state.cacheTimeout&&(X.cacheTimeout=J.state.cacheTimeout),J.state.queryCachingTTL&&(X.queryCachingTTL=J.state.queryCachingTTL),J.state.minInterval&&(X.interval=J.state.minInterval));const _=Y.state.$timeRange;return _ instanceof h.v&&(X.timeFrom=_.state.timeFrom,X.timeShift=_.state.timeShift,X.hideTimeOverride=_.state.hideTimeOverride,X.timeCompare=_.state.compareWith),X}function U(Y,X){return Y.reduce((J,_)=>{let ee=X.serializer.getElementIdForPanel(_.spec.id);return J[ee]=_,J},{})}function W(Y,X){const J=Y.$variables;let _=[];return J instanceof o.Pj&&(_=(0,g.$o)(J,!1,X)),_}function V(Y,X){const J=Y.$data;if(!(J instanceof p.s))return[];const _=[];for(const ee of J.state.annotationLayers){if(!(ee instanceof o.tV.g))continue;const ae=re(ee,ee.state.query,"annotation",void 0,X);let le=ee.state.query.datasource;le||(le=R(),console.error("Misconfigured AnnotationsDataLayer: Data source is required for annotations. Resolving default data source",ee,le));const L=(0,v.m)(ee.state.query,le.type,le.uid,{enable:ee.state.isEnabled,hide:ee.state.isHidden}),ie=ee.state.query;ie.filter?.ids?.length&&(L.spec.filter=ie.filter),ae||delete L.spec.query.datasource,_.push(L)}return _}function z(Y){if(Y.datasource?.type)return Y.datasource.type;{const X=R();return X?X.type:"grafana"}}function R(){const Y=d.$.defaultDatasource,J=d.$.datasources[Y];return{type:J.meta.id,uid:J.name}}function O(Y,X,J,_){let ee={...J,title:Y,timeSettings:{...J.timeSettings,from:X.from.toISOString(),to:X.to.toISOString()},links:[]};if(_){const ae=(0,r.Cs)(_),le=Object.keys(J.elements||{}).find(L=>J.elements[L].spec.id===ae);le&&(ee.elements={[le]:J.elements[le]},ee.layout={kind:"GridLayout",spec:{items:[{kind:"GridLayoutItem",spec:{element:{kind:"ElementReference",name:le},width:24,height:20,x:0,y:0}}]}})}if(ee.elements=Object.fromEntries(Object.entries(ee.elements).map(([ae,le])=>("links"in le&&(le.links=[]),[ae,le]))),ee.annotations){const le=(ee.annotations.filter(L=>L.spec.enable)||[]).map(L=>({kind:"AnnotationQuery",spec:{name:L.spec.name,enable:L.spec.enable,iconColor:L.spec.iconColor,builtIn:L.spec.builtIn,hide:L.spec.hide,query:L.spec.query}}));ee.annotations=le}return ee.variables&&ee.variables.forEach(ae=>{"query"in ae&&(ae.query=""),"options"in ae&&"current"in ae&&(ae.options=ae.current&&!(0,s.R)(ae.current)?[ae.current]:[]),"refresh"in ae&&(ae.refresh=l.CO.never)}),ee}function N(Y){if(typeof Y!="object"||Y===null||Array.isArray(Y))throw new Error("Dashboard is not an object or is null");if(!("title"in Y)||typeof Y.title!="string")throw new Error("Title is not a string");if(!("timeSettings"in Y)||typeof Y.timeSettings!="object"||Y.timeSettings===null)throw new Error("TimeSettings is not an object or is null");if(!("variables"in Y)||!Array.isArray(Y.variables))throw new Error("Variables is not an array");if(!("elements"in Y)||typeof Y.elements!="object"||Y.elements===null)throw new Error("Elements is not an object or is null");if(!("annotations"in Y)||!Array.isArray(Y.annotations))throw new Error("Annotations is not an array");if(!("layout"in Y)||typeof Y.layout!="object"||Y.layout===null)throw new Error("Layout is not an object or is null");if("description"in Y&&Y.description!==void 0&&typeof Y.description!="string")throw new Error("Description is not a string");if("cursorSync"in Y&&Y.cursorSync!==void 0){const J=["Off","Crosshair","Tooltip"];if(typeof Y.cursorSync!="string"||!J.includes(Y.cursorSync))throw new Error("CursorSync is not a valid value")}if("liveNow"in Y&&Y.liveNow!==void 0&&typeof Y.liveNow!="boolean")throw new Error("LiveNow is not a boolean");if("preload"in Y&&Y.preload!==void 0&&typeof Y.preload!="boolean")throw new Error("Preload is not a boolean");if("editable"in Y&&Y.editable!==void 0&&typeof Y.editable!="boolean")throw new Error("Editable is not a boolean");if("links"in Y&&Y.links!==void 0&&!Array.isArray(Y.links))throw new Error("Links is not an array");if("tags"in Y&&Y.tags!==void 0&&!Array.isArray(Y.tags))throw new Error("Tags is not an array");if("id"in Y&&Y.id!==void 0&&typeof Y.id!="number")throw new Error("ID is not a number");const X=Y.timeSettings;if(!("from"in X)||typeof X.from!="string")throw new Error("From is not a string");if(!("to"in X)||typeof X.to!="string")throw new Error("To is not a string");if(!("autoRefresh"in X)||typeof X.autoRefresh!="string")throw new Error("AutoRefresh is not a string");if(!("hideTimepicker"in X)||typeof X.hideTimepicker!="boolean")throw new Error("HideTimepicker is not a boolean");if("autoRefreshIntervals"in X&&X.autoRefreshIntervals!==void 0&&!Array.isArray(X.autoRefreshIntervals))throw new Error("AutoRefreshIntervals is not an array");if("timezone"in X&&X.timezone!==void 0&&typeof X.timezone!="string")throw new Error("Timezone is not a string");if("quickRanges"in X&&X.quickRanges!==void 0&&!Array.isArray(X.quickRanges))throw new Error("QuickRanges is not an array");if("weekStart"in X&&X.weekStart!==void 0&&(typeof X.weekStart!="string"||!["saturday","sunday","monday"].includes(X.weekStart)))throw new Error('WeekStart should be one of "saturday", "sunday" or "monday"');if("nowDelay"in X&&X.nowDelay!==void 0&&typeof X.nowDelay!="string")throw new Error("NowDelay is not a string");if("fiscalYearStartMonth"in X&&X.fiscalYearStartMonth!==void 0&&typeof X.fiscalYearStartMonth!="number")throw new Error("FiscalYearStartMonth is not a number");if(!("kind"in Y.layout))throw new Error("Layout kind is required");return Y.layout.kind==="GridLayout"?F(Y.layout):Y.layout.kind==="RowsLayout"&&G(Y.layout),!0}function F(Y){if(typeof Y!="object"||Y===null)throw new Error("Layout is not an object or is null");if(!("kind"in Y)||Y.kind!=="GridLayout")throw new Error("Layout kind is not GridLayout");if(!("spec"in Y)||typeof Y.spec!="object"||Y.spec===null)throw new Error("Layout spec is not an object or is null");if(!("items"in Y.spec)||!Array.isArray(Y.spec.items))throw new Error("Layout spec items is not an array")}function G(Y){if(typeof Y!="object"||Y===null)throw new Error("Layout is not an object or is null");if(!("kind"in Y)||Y.kind!=="RowsLayout")throw new Error("Layout kind is not RowsLayout");if(!("spec"in Y)||typeof Y.spec!="object"||Y.spec===null)throw new Error("Layout spec is not an object or is null");if(!("rows"in Y.spec)||!Array.isArray(Y.spec.rows))throw new Error("Layout spec items is not an array")}function H(Y,X,J){if(!J)return new Set;if(X==="panels"&&Q(Y)){const _=u.b4.getElementIdentifierForVizPanel(Y);return J.panels.get(_)||new Set}if(X==="variables")return J.variables;if(X==="annotations")return J.annotations;throw new Error(`Invalid type ${X} for getAutoAssignedDSRef`)}function K(Y,X,J,_){const ee=w(Y,J);if(!X?.has(ee)){if(J==="query")return"datasource"in Y&&Y.datasource?Y.datasource:_?.state?.datasource;if(J==="variable"&&"state"in Y&&"datasource"in Y.state)return Y.state.datasource||{};if(J==="annotation"&&"datasource"in Y)return Y.datasource||{}}}function w(Y,X){if(X==="query")return"refId"in Y?Y.refId:"";if(X==="variable")return"state"in Y&&"name"in Y.state?Y.state.name:"";if(X==="annotation")return"name"in Y?Y.name:"";throw new Error(`Invalid type ${X} for getElementIdentifier`)}function Q(Y){return"pluginId"in Y.state}function k(Y){return!("pluginId"in Y.state)&&("variables"in Y.state||"getValue"in Y)}function te(Y){return"refId"in Y&&!("state"in Y)}function q(Y){return"datasource"in Y&&"name"in Y}function se(Y){return"state"in Y&&"name"in Y.state}function re(Y,X,J,_,ee){let ae;if(J==="panel"){if(!_||!Q(Y)||!te(X))return;const le=H(Y,"panels",ee);ae=K(X,le,"query",_)}if(J==="variable"){if(!k(Y)||!se(X))return;const le=H(Y,"variables",ee);ae=K(X,le,"variable")}if(J==="annotation"){if(!q(X))return;const le=H(Y,"annotations",ee);ae=K(X,le,"annotation")}return Object.keys(ae||{}).length>0?ae:void 0}},62348:(ne,j,e)=>{"use strict";e.d(j,{X:()=>l,f:()=>o});var n=e(33239),a=e(25229),s=e(44922),d=e(67511);function o(i,c,p){return(0,a.Ar)(i)?i.isValid():n.isMathString(i)?n.isValid(i):(0,s.b)(i,{roundUp:c,timeZone:p,format:d.d}).isValid()}function l(i){return n.isValid(i.from)&&n.isValid(i.to)}},62392:(ne,j,e)=>{"use strict";e.d(j,{p:()=>d});var n=e(74848),a=e(96540),s=e(79450);function d(o){const{children:l,instanceSettings:i}=o,c=(0,a.useMemo)(()=>({instanceSettings:i,meta:i.meta}),[i]);return(0,n.jsx)(s.b.Provider,{value:c,children:l})}},62421:(ne,j,e)=>{"use strict";e.d(j,{F:()=>d});var n=e(32899),a=e(45229),s=e(5709);const d=s.H.injectEndpoints({endpoints:o=>({getSilences:o.query({query:({datasourceUid:l,ruleMetadata:i,accessControl:c})=>({url:`/api/alertmanager/${l}/api/v2/silences`,params:{ruleMetadata:i,accesscontrol:c}}),providesTags:l=>l?[...l.map(({id:i})=>({type:"AlertmanagerSilences",id:i})),{type:"AlertmanagerSilences"}]:[{type:"AlertmanagerSilences"}]}),getSilence:o.query({query:({datasourceUid:l,id:i,ruleMetadata:c,accessControl:p})=>({url:`/api/alertmanager/${l}/api/v2/silence/${i}`,showErrorAlert:!1,params:{ruleMetadata:c,accesscontrol:p}}),providesTags:(l,i,{id:c})=>l?[{type:"AlertmanagerSilences",id:c}]:["AlertmanagerSilences"]}),createSilence:o.mutation({query:({datasourceUid:l,payload:i})=>({url:`/api/alertmanager/${l}/api/v2/silences`,method:"POST",data:i}),invalidatesTags:["AlertmanagerSilences","AlertmanagerAlerts"],onQueryStarted:async(l,{queryFulfilled:i})=>{try{await i,a.A.emit(n.r1.alertSuccess,["Silence created"])}catch{a.A.emit(n.r1.alertError,["Could not create silence"])}}}),expireSilence:o.mutation({query:({datasourceUid:l,silenceId:i})=>({url:`/api/alertmanager/${l}/api/v2/silence/${i}`,method:"DELETE"}),invalidatesTags:["AlertmanagerSilences"]})})})},62635:(ne,j,e)=>{"use strict";e.d(j,{HQ:()=>b,Ll:()=>U,MA:()=>I,WP:()=>E,Xe:()=>C,_u:()=>G,bI:()=>T,dY:()=>O,di:()=>V,dr:()=>D,eF:()=>W,o$:()=>f,uE:()=>F,uJ:()=>K,uq:()=>P,w4:()=>M,zT:()=>R,zq:()=>N});var n=e(43561),a=e(24726),s=e(739),d=e(39796),o=e(92138),l=e(5556),i=e(17548),c=e(1906),p=e(22592),h=e(78282),u=e(90811),r=e(29043),v=e(4651);const g={dedupStrategy:s.fY.none},E="0123456789abcdefghijklmnopqrstuvwxyz",x=(0,n.d_)(E,3),m="grafana.explore.datasource",y=w=>`${m}.${w}`,b=w=>r.A.getObject(y(w)),D=(w,Q)=>r.A.setObject(y(w),Q);function f(){for(;;){const w=x(3);if(!/^\d+$/.test(w))return w}}async function C(w){const{queries:Q,dsRef:k,timeRange:te,scopedVars:q,adhocFilters:se}=w,re=(await Promise.allSettled(Q.filter(X=>X.datasource?.uid!==v.Uj).map(async X=>{const J=await(0,h.l)().get(X.datasource||k);return{...J.interpolateVariablesInQueries?.([X],q??{},se)[0]||X,...!J.meta.mixed&&{datasource:J.getRef()}}}))).filter(X=>X.status==="fulfilled").map(X=>X.value),Y=JSON.stringify({[f()]:{range:(0,l.sQ)(te.raw),queries:re,datasource:k?.uid}});return o.I.assureBaseUrl(l.kM.renderUrl("/explore",{panes:Y,schemaVersion:1}))}function P(w){return`explore_${w}`}function T(w,Q,k,te,q,se,re){const Y=Number.parseInt(w,36),{interval:X,intervalMs:J}=H(te,k.minInterval,k.maxDataPoints),_={app:c.Jk.Explore,timezone:se||p.lE,startTime:Date.now(),interval:X,intervalMs:J,panelId:Y,targets:Q,range:te,requestId:P(w),rangeRaw:te.raw,scopedVars:{__interval:{text:X,value:X},__interval_ms:{text:J,value:J},...re},maxDataPoints:k.maxDataPoints,liveStreaming:k.liveStreaming,skipQueryCache:!0};return{queries:Q,request:_,scanning:q,id:B(),done:!1}}const M=({key:w,...Q})=>Q,I=(w,Q)=>{if(w==null)return"";try{return JSON.stringify(w,null,Q)}catch(k){console.error(k)}return""};function B(w=0){return`Q-${(0,a.A)()}-${w}`}async function U(w,Q=0,k){let te,q,se;return k?q=k:w.length>0&&w[w.length-1].datasource?q=w[w.length-1].datasource:(te=await(0,h.l)().get(),se=te.getDefaultQuery?.(c.Jk.Explore),q=te.getRef()),te||(te=await(0,h.l)().get(q),se=te.getDefaultQuery?.(c.Jk.Explore)),{...se,refId:(0,d.M)(w),key:B(Q),datasource:q}}const W=(w,Q,k=0)=>{const te=B(k),q=w.refId||(0,d.M)(Q);return{...w,refId:q,key:te}};async function V(w,Q){if(w&&typeof w=="object"&&w.length>0){const k=[];for(let te=0;te<w.length;te++){const q=w[te],se=B(te);let re=q.refId;re||(re=(0,d.M)(k));let Y=!0;if(q.datasource)try{await(0,h.l)().get(q.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),Y=!1}Y&&k.push({...q,refId:re,key:se})}return k}try{const k=Q??(await(0,h.l)().get()).getRef();return[await U(w??[],void 0,k)]}catch{return[]}}const z=["refId","key","context","datasource"];function R(w){return w&&w.some(Q=>Object.entries(Q).filter(([te,q])=>z.indexOf(te)===-1).filter(([te,q])=>q).length>0)}const O=w=>w.reduce((k,te,q)=>{const se=te.datasource?.uid||te.key;return k.concat(`${se}-${q}`)},[]),N=(w,Q,k)=>i.convertRawToRange(Q,w,k),F=w=>u.cC.isLive(w)?s.uH.Ascending:s.uH.Descending,G=w=>{w&&w.unsubscribe()};function H(w,Q,k){return k?i.calculateInterval(w,k,Q):{interval:"1s",intervalMs:1e3}}const K=w=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(w);else{const Q=document.createElement("textarea");Q.value=w,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q)}}},62667:(ne,j,e)=>{"use strict";e.d(j,{M8:()=>n,Nt:()=>d,__:()=>l,q5:()=>a});var n=(i=>(i.Query="query",i.Transform="transform",i.Visualize="visualize",i.Alert="alert",i))(n||{}),a=(i=>(i[i.Fill=0]="Fill",i[i.Fit=1]="Fit",i[i.Exact=2]="Exact",i))(a||{}),s=(i=>(i[i.Off=0]="Off",i[i.Table=1]="Table",i))(s||{});const d=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],o=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var l=(i=>(i[i.Visualizations=0]="Visualizations",i[i.LibraryPanels=1]="LibraryPanels",i[i.Suggestions=2]="Suggestions",i))(l||{})},62693:(ne,j,e)=>{"use strict";e.d(j,{A:()=>v,zA:()=>h});var n=e(74848),a=e(96540),s=e(36638),d=e(57866),o=e(95004),l=e(92745),i=e(97958),c=e(18857);const p=(0,a.memo)(g=>{const{data:E,options:x,onChange:m,id:y}=g,b=u(E),D=r(b,x),f=(0,a.useCallback)(P=>m(P.value),[m]),C=D.find(P=>P.value===x);return(0,n.jsx)(c.l6,{inputId:y,value:C,options:D,onChange:f})});p.displayName="FieldTypeMatcherEditor";const h=()=>[{value:o.PU.number,label:(0,l.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-number","Number"),icon:(0,i.lV)(o.PU.number)},{value:o.PU.string,label:(0,l.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-string","String"),icon:(0,i.lV)(o.PU.string)},{value:o.PU.time,label:(0,l.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-time","Time"),icon:(0,i.lV)(o.PU.time)},{value:o.PU.boolean,label:(0,l.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-boolean","Boolean"),icon:(0,i.lV)(o.PU.boolean)},{value:o.PU.trace,label:(0,l.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-traces","Traces"),icon:(0,i.lV)(o.PU.trace)},{value:o.PU.enum,label:(0,l.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-enum","Enum"),icon:(0,i.lV)(o.PU.enum)},{value:o.PU.other,label:(0,l.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-other","Other"),icon:(0,i.lV)(o.PU.other)}],u=g=>(0,a.useMemo)(()=>{const E=new Map;for(const x of h())E.set(x.value,0);for(const x of g)for(const m of x.fields){const y=m.type||o.PU.other;let b=E.get(y);b||(b=0),E.set(y,b+1)}return E},[g]),r=(g,E)=>(0,a.useMemo)(()=>{let x=!1;const m=[];for(const y of h()){const b=g.get(y.value),D=E===y.value;(b||D)&&m.push({...y,label:`${y.label} (${g.get(y.value)})`}),D&&(x=!0)}return E&&!x&&m.push({value:E,label:`${E} (No matches)`}),m},[g,E]),v=()=>({id:d.Ct.byType,component:p,matcher:s.sJ.get(d.Ct.byType),name:(0,l.t)("grafana-ui.matchers-ui.name-fields-with-type","Fields with type"),description:(0,l.t)("grafana-ui.matchers-ui.description-fields-with-type","Set properties for fields of a specific type (number, string, boolean)"),optionsToLabel:g=>g})},62717:(ne,j,e)=>{"use strict";e.d(j,{HD:()=>c,P3:()=>h,QZ:()=>p,U3:()=>u,g$:()=>l,le:()=>i});var n=e(2543),a=e.n(n),s=e(84743),d=e.n(s),o=e(60188),l=(m=>(m.default="",m.localBrowserTime="browser",m.utc="utc",m))(l||{});const i=m=>{switch((0,o.O)({timeZone:m})){case"browser":return"Local browser time";case"utc":return"UTC";default:return m}},c=m=>d().tz.zone(m),p=(m,y)=>{const b=r(m,y);return b||g(m,y)},h=(0,n.memoize)((m=!1)=>{const y=[];return m===!0?y.push("","browser","utc"):m&&y.push(...m),d().tz.names().reduce((b,D)=>{const f=x[D];return!Array.isArray(f)||f.length===0||b.push(D),b},y)}),u=(0,n.memoize)((m=!1)=>{const b=h(m).reduce((D,f)=>{const C=f.indexOf("/");if(C===-1)return D[""]=D[""]??[],D[""].push(f),D;const P=f.slice(0,C);return D[P]=D[P]??[],D[P].push(f),D},{});return Object.keys(b).map(D=>({name:D,zones:b[D]}))}),r=(m,y)=>{switch(m){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:m,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const b=(0,o.O)(),f=b==="browser"||b==="utc"?r(b,y):g(b,y);return{countries:x[b]??[],abbreviation:"",offsetInMins:0,...f,ianaName:f?.ianaName??"",name:"Default",zone:m}}case"browser":{const b=d().tz.guess(!0),D=g(b,y);return{countries:x[b]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...D,name:"Browser Time",ianaName:D?.ianaName??"",zone:m}}default:return}},v=m=>/^(\+|\-).+/.test(m)?"":m,g=(m,y)=>{const b=d().tz.zone(m);if(b)return{name:m,ianaName:b.name,zone:m,countries:x[m]??[],abbreviation:v(b.abbr(y)),offsetInMins:b.utcOffset(y)}},E={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},x=d().tz.countries().reduce((m,y)=>d().tz.zonesForCountry(y).reduce((D,f)=>{D[f]||(D[f]=[]);const C=E[y];return!C||y==="AQ"&&!f.startsWith("Antarctica/")||D[f].push({code:y,name:C}),D},m),{})},62748:(ne,j,e)=>{"use strict";e.d(j,{R:()=>a,s:()=>n});const n="__fixed";class a{constructor(d){this.props=d}}},62769:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{NestedFolderPicker:()=>Se});var n=e(74848),a=e(22803),s=e(34743),d=e(83505),o=e(46885),l=e(76459),i=e.n(l),c=e(96540),p=e(92745),h=e(63142),u=e(76373),r=e(41654),v=e(66404),g=e(63527),E=e(30703),x=e(34999),m=e(47327),y=e(62779),b=e(47797),D=e(55860),f=e(93854),C=e(82151),P=e(70255),T=e(97222),M=e(10022),I=e(76319),B=e(90666),U=e(80231),W=e(52763),V=e(31286);function z({folder:Ue}){return(0,n.jsx)(V.a,{marginLeft:1,children:(0,n.jsxs)(v.E,{variant:"bodySmall",color:"secondary",truncate:!0,children:["/",Ue]})})}const R=(0,c.memo)(function({item:Ie}){if(Ie.item.kind!=="folder")return null;if(Ie.item.parentTitle)return(0,n.jsx)(z,{folder:Ie.item.parentTitle});const Re=Ie.item.parentUID||Ie.parentUID;return Re?(0,n.jsx)(O,{uid:Re}):null});function O({uid:Ue}){const Ie=(0,y.u$)(Ue);return Ie.isLoading?(0,n.jsx)(P.A,{width:50}):Ie.data?(0,n.jsx)(z,{folder:Ie.data.title}):null}const N=40,F="md",G=(Ue,Ie)=>`${Ue}-${Ie||"root"}`;function H({items:Ue,focusedItemIndex:Ie,foldersAreOpenable:Re,idPrefix:Ke,selectedFolder:Le,onFolderExpand:ze,onFolderSelect:Be,isItemLoaded:$e,requestLoadMore:Ye,emptyFolders:de}){const ge=(0,c.useRef)(null),pe=(0,h.of)(Q),De=(0,c.useMemo)(()=>({items:Ue,focusedItemIndex:Ie,foldersAreOpenable:Re,selectedFolder:Le,onFolderExpand:ze,onFolderSelect:Be,idPrefix:Ke,emptyFolders:de}),[Ue,Ie,Re,Le,ze,Be,Ke,de]),Me=(0,c.useCallback)(Oe=>$e(Oe),[$e]),be=(0,c.useCallback)((Oe,Ne)=>{const{parentUID:We}=Ue[Oe];Ye(We)},[Ye,Ue]);return(0,n.jsx)("div",{className:pe.table,role:"tree",children:Ue.length>0?(0,n.jsx)(M.A,{ref:ge,itemCount:Ue.length,isItemLoaded:Me,loadMoreItems:be,children:({onItemsRendered:Oe,ref:Ne})=>(0,n.jsx)(T.Y1,{ref:Ne,height:N*Math.min(6.5,Ue.length),width:"100%",itemData:De,itemSize:N,itemCount:Ue.length,onItemsRendered:Oe,children:w})}):(0,n.jsx)("div",{className:pe.emptyMessage,children:(0,n.jsx)(p.x6,{i18nKey:"browse-dashboards.folder-picker.empty-message",children:"No folders found"})})})}const K=[100,200,130,160,150];function w({index:Ue,style:Ie,data:Re}){const{items:Ke,focusedItemIndex:Le,foldersAreOpenable:ze,selectedFolder:Be,onFolderExpand:$e,onFolderSelect:Ye,idPrefix:de,emptyFolders:ge}=Re,{item:pe,isOpen:De,level:Me,parentUID:be}=Ke[Ue],Oe=(0,c.useRef)(null),Ne=(0,c.useId)(),We=(0,W.d4)(U.ku),qe=(0,W.d4)(U.Am),st=(pe.uid?qe[pe.uid]:We)?.items??[];let rt=[];pe.uid&&(rt=(be?qe[be]:We)?.items??[]);const ot=(0,h.of)(Q),mt=(0,c.useCallback)(Ze=>{Ze.preventDefault(),Ze.stopPropagation(),pe.uid&&$e(pe.uid,!De)},[pe.uid,De,$e]),pt=(0,c.useCallback)(()=>{pe.kind==="folder"&&Ye(pe)},[pe,Ye]);if(pe.kind==="ui"&&pe.uiKind==="pagination-placeholder")return(0,n.jsxs)("span",{style:Ie,className:ot.row,children:[(0,n.jsx)(B.T,{level:Me,spacing:2}),(0,n.jsx)(P.A,{width:K[Ue%K.length]})]});if(pe.kind!=="folder"){const Ze=pe.kind,nt=pe.uid;return null}const ke=Me===0&&pe.parentUID!==void 0;return(0,n.jsx)("div",{ref:Oe,style:Ie,className:(0,a.cx)(ot.row,{[ot.rowFocused]:Ue===Le,[ot.rowSelected]:pe.uid===Be}),tabIndex:-1,onClick:pt,"aria-expanded":De,"aria-selected":pe.uid===Be,"aria-labelledby":Ne,"aria-level":Me+1,role:"treeitem","aria-owns":st.length>0?st.map(Ze=>G(de,Ze.uid)).join(" "):void 0,"aria-setsize":st.length,"aria-posinset":rt.findIndex(Ze=>Ze.uid===pe.uid)+1,id:G(de,pe.uid),children:(0,n.jsxs)("div",{className:ot.rowBody,children:[(0,n.jsx)(B.T,{level:Me,spacing:2}),ze&&!ge.has(pe.uid)?(0,n.jsx)(I.K,{size:F,onMouseDown:mt,onClick:Ze=>{Ze.preventDefault(),Ze.stopPropagation()},tabIndex:-1,"aria-label":De?`Collapse folder ${pe.title}`:`Expand folder ${pe.title}`,name:De?"angle-down":"angle-right"}):(0,n.jsx)("span",{className:ot.folderButtonSpacer}),(0,n.jsxs)("label",{className:ot.label,id:Ne,children:[(0,n.jsx)(v.E,{truncate:!0,children:pe.title}),(0,n.jsx)(C.b,{folder:pe})]}),ke&&(0,n.jsx)(R,{item:Ke[Ue]})]})})}const Q=Ue=>{const Ie=(0,a.css)({height:N,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:Ue.spacing(.5),overflow:"hidden",padding:Ue.spacing(0,1)});return{table:(0,a.css)({background:Ue.components.input.background}),emptyMessage:(0,a.css)({padding:Ue.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,a.css)({paddingLeft:Ue.spacing(2.5)}),row:(0,a.css)({display:"flex",position:"relative",alignItems:"center",":not(:first-child)":{borderTop:`solid 1px ${Ue.colors.border.weak}`}}),rowFocused:(0,a.css)({backgroundColor:Ue.colors.background.secondary}),rowSelected:(0,a.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:Ue.shape.radius.default,backgroundImage:Ue.colors.gradients.brandVertical}}),rowBody:Ie,label:(0,a.css)({display:"flex",alignItems:"center",gap:Ue.spacing(1),lineHeight:N+"px",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var k=e(35484),te=e(35222);function q({handleClearSelection:Ue,isLoading:Ie,invalid:Re,label:Ke,...Le},ze){const Be=(0,h.$j)(),$e=re(Be,Re),Ye=de=>{(de.key==="Enter"||de.key===" ")&&Ue?.(de)};return Ie?(0,n.jsx)(te.A,{}):(0,n.jsx)("div",{className:$e.wrapper,children:(0,n.jsxs)("div",{className:$e.inputWrapper,children:[Ke?(0,n.jsx)("div",{className:$e.prefix,children:(0,n.jsx)(E.I,{name:"folder"})}):void 0,(0,n.jsxs)("button",{type:"button",className:(0,a.cx)($e.fakeInput,Ke?$e.hasPrefix:void 0),...Le,ref:ze,children:[Ke?(0,n.jsx)(v.E,{truncate:!0,children:Ke}):(0,n.jsx)(v.E,{truncate:!0,color:"secondary",children:(0,n.jsx)(p.x6,{i18nKey:"browse-dashboards.folder-picker.button-label",children:"Select folder"})}),!Ie&&Ue&&(0,n.jsx)(E.I,{role:"button",tabIndex:0,"aria-label":(0,p.t)("browse-dashboards.folder-picker.clear-selection","Clear selection"),className:$e.clearIcon,name:"times",onClick:Ue,onKeyDown:Ye})]}),(0,n.jsx)("div",{className:$e.suffix,children:(0,n.jsx)(E.I,{name:"angle-down"})})]})})}const se=(0,c.forwardRef)(q),re=(Ue,Ie=!1)=>{const Re=(0,g.n)({theme:Ue,invalid:Ie});return{wrapper:Re.wrapper,inputWrapper:Re.inputWrapper,prefix:(0,a.css)([Re.prefix,{pointerEvents:"none",color:Ue.colors.text.primary}]),suffix:(0,a.css)([Re.suffix,{pointerEvents:"none"}]),fakeInput:(0,a.css)([Re.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,k.getFocusStyles)(Ue),alignItems:"center",display:"flex",flexWrap:"nowrap",justifyContent:"space-between",paddingRight:28}]),hasPrefix:(0,a.css)({paddingLeft:28}),clearIcon:(0,a.css)({color:Ue.colors.text.secondary,cursor:"pointer","&:hover":{color:Ue.colors.text.primary},"&:focus:not(:focus-visible)":(0,k.getMouseFocusStyles)(Ue),"&:focus-visible":(0,k.getFocusStyles)(Ue)})}};var Y=e(43173),X=e(25508),J=e(10378),_=e(60793);const ee=_.qR.enhanceEndpoints({}),{useGetSearchQuery:ae}=ee;var le=e(27044),L=e(78034),ie=e(34624);const oe="general",ue=new Intl.Collator;function ye({isBrowsing:Ue,openFolders:Ie,rootFolderUID:Re,rootFolderItem:Ke}){const Le=(0,W.wA)(),ze=(0,c.useRef)([]),[Be,$e]=(0,c.useState)(new Set),[Ye,de]=(0,c.useState)([]),ge=(0,c.useMemo)(()=>(0,X.Mz)(Ye,(...be)=>{let Oe=!1;const Ne={};for(const We of be){We.status===J.RE.pending&&(Oe=!0);const qe=We.originalArgs?.folder;qe&&(Ne[qe]=We)}return{isLoading:Oe,responseByParent:Ne}}),[Ye]),pe=(0,W.d4)(ge),De=(0,c.useCallback)(be=>{const Oe=be??oe;if(pe.responseByParent[Oe]?.status===J.RE.pending)return;const qe={folder:Oe,type:"folder"},st=Le(ee.endpoints.getSearch.initiate(qe)),rt=ee.endpoints.getSearch.select(qe);de(ot=>ot.concat(rt)),ze.current=ze.current.concat([st])},[pe,Le]);(0,c.useEffect)(()=>()=>{for(const be of ze.current)be.unsubscribe()},[]);const Me=(0,c.useMemo)(()=>{if(!Ue)return[];function be(We,qe,st){let rt=qe?.data?.hits?[...qe.data.hits]:[];rt.sort((mt,pt)=>ue.compare(mt.title,pt.title));const ot=rt.flatMap(mt=>{const pt=mt.name,ke=Ie[pt],Ze={isOpen:!!ke,level:st,item:{kind:"folder",title:mt.title,uid:pt,managedBy:mt.managedBy?.kind,parentUID:mt.folder}},nt=ke&&pe.responseByParent[pt];if(nt){nt.data&&nt.status!==J.RE.pending&&nt.data.hits.length===0&&$e(gt=>new Set(gt).add(pt));const ut=be(pt,nt,st+1);return[Ze,...ut]}return Ze});return qe||ot.push(...(0,L.T)(le.md,We,st)),ot}const Oe=Re??oe,Ne=be(Oe,pe.responseByParent[Oe],1);return Ne.unshift(Ke||(0,ie.K)()),Ne},[pe,Ue,Ie,Re,Ke]);return{emptyFolders:Be,items:Me,isLoading:pe.isLoading,requestNextPage:De}}var fe=e(15203);const Ee="pending";function Ae(Ue){const Ie=Ue.at(-1),Re=Ie?.originalArgs?.page,Ke=Ie?.status===Ee;return Ie?.data?[Ie.data.length<Ie.originalArgs.limit,Re,Ke]:[!1,Re,Ke]}function Ge({isBrowsing:Ue,openFolders:Ie,permission:Re,rootFolderUID:Ke,rootFolderItem:Le}){const ze=(0,W.wA)(),Be=(0,c.useRef)([]),[$e,Ye]=(0,c.useState)(new Set),[de,ge]=(0,c.useState)([]),pe=(0,c.useMemo)(()=>(0,X.Mz)(de,(...Oe)=>{let Ne=!1;const We=[],qe={};for(const st of Oe){st.status===Ee&&(Ne=!0);const rt=st.originalArgs?.parentUid;rt?(qe[rt]||(qe[rt]=[]),qe[rt].push(st)):We.push(st)}return{isLoading:Ne,rootPages:We,pagesByParent:qe}}),[de]),De=(0,W.d4)(pe),Me=(0,c.useCallback)(Oe=>{const Ne=Oe?De.pagesByParent[Oe]:De.rootPages,[We,qe,st]=Ae(Ne??[]);if(We||st)return;const rt={parentUid:Oe,page:(qe??0)+1,limit:le.md,permission:Re},ot=ze(fe.cU.endpoints.listFolders.initiate(rt)),mt=fe.cU.endpoints.listFolders.select({parentUid:ot.arg.parentUid,page:ot.arg.page,limit:ot.arg.limit,permission:ot.arg.permission});ge(pt=>pt.concat(mt)),Be.current=Be.current.concat([ot])},[De,ze,Re]);(0,c.useEffect)(()=>()=>{for(const Oe of Be.current)Oe.unsubscribe()},[]);const be=(0,c.useMemo)(()=>{if(!Ue)return[];function Oe(qe,st,rt){const ot=st.flatMap(pt=>(pt.data??[]).flatMap(Ze=>{const nt=Ie[Ze.uid],ut={isOpen:!!nt,level:rt,item:{kind:"folder",title:Ze.title,uid:Ze.uid,managedBy:Ze.managedBy,parentUID:Ze.parentUid}},gt=nt&&De.pagesByParent[Ze.uid];if(gt){const ht=Oe(Ze.uid,gt,rt+1);return gt[0]&&gt[0].status!==Ee&&ht.length===0&&Ye(tt=>new Set(tt).add(Ze.uid)),[ut,...ht]}return ut})),[mt]=Ae(st);return mt||ot.push(...(0,L.T)(le.md,qe,rt)),ot}const Ne=Ke?De.pagesByParent[Ke]:De.rootPages,We=Oe(Ke??void 0,Ne??[],1);return We.unshift(Le||(0,ie.K)()),We},[De,Ue,Ie,Ke,Le]);return{emptyFolders:$e,items:be,isLoading:De.isLoading,requestNextPage:Me}}function Fe({isBrowsing:Ue,openFolders:Ie,permission:Re,rootFolderUID:Ke,rootFolderItem:Le}){const ze=Ge({isBrowsing:Ue,openFolders:Ie,permission:Re,rootFolderUID:Ke,rootFolderItem:Le}),Be=ye({isBrowsing:Ue,openFolders:Ie,rootFolderUID:Ke,rootFolderItem:Le});return Y.$.featureToggles.foldersAppPlatformAPI?Be:ze}function Pe({tree:Ue,handleCloseOverlay:Ie,handleFolderSelect:Re,handleFolderExpand:Ke,idPrefix:Le,search:ze,visible:Be}){const[$e,Ye]=(0,c.useState)(-1);(0,c.useEffect)(()=>{Be&&Ye(-1)},[Be]),(0,c.useEffect)(()=>{Ye(0)},[ze]),(0,c.useEffect)(()=>{document.getElementById(G(Le,Ue[$e]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[$e,Le,Ue]);const de=(0,c.useCallback)(ge=>{const pe=!ze;switch(ge.key){case"ArrowRight":case"ArrowLeft":pe&&(ge.preventDefault(),Ke(Ue[$e].item.uid,ge.key==="ArrowRight"));break;case"ArrowUp":$e>0&&(ge.preventDefault(),Ye($e-1));break;case"ArrowDown":$e<Ue.length-1&&(ge.preventDefault(),Ye($e+1));break;case"Enter":ge.preventDefault();const De=Ue[$e].item;De.kind==="folder"&&Re(De);break;case"Tab":ge.stopPropagation(),Ie();break;case"Escape":ge.stopPropagation(),ge.preventDefault(),Ie();break}},[$e,Ie,Ke,Re,ze,Ue]);return{focusedItemIndex:$e,handleKeyDown:de}}const Ve=i()(me,300);async function me(Ue,Ie){const Re=await(0,D.S)().search({query:Ue,kind:["folder"],limit:100,permission:Ie}),Ke=Re.view.map(Le=>(0,f.hI)(Le,Re.view));return{...Re,items:Ke}}function Se({value:Ue,invalid:Ie,showRootFolder:Re=!0,clearable:Ke=!1,excludeUIDs:Le,rootFolderUID:ze,rootFolderItem:Be,permission:$e="edit",onChange:Ye,id:de}){const ge=(0,h.of)(Qe),pe=(0,y.u$)(Ue),De=(0,b.do)(pe.error)===403,[Me,be]=(0,c.useState)(""),[Oe,Ne]=(0,c.useState)(null),[We,qe]=(0,c.useState)(!1),[st,rt]=(0,c.useState)(!1),[ot,mt]=(0,c.useState)(!1),[pt,ke]=(0,c.useState)({}),Ze=(0,c.useId)(),[nt]=(0,c.useState)(void 0),ut=(0,c.useRef)(0),gt=!!(ot&&!(Me&&Oe)),{emptyFolders:ht,items:tt,isLoading:Ot,requestNextPage:jt}=Fe({isBrowsing:gt,openFolders:pt,permission:$e,rootFolderUID:ze,rootFolderItem:Be});(0,c.useEffect)(()=>{if(!Me){Ne(null);return}const ea=Date.now();qe(!0),Ve(Me,$e).then(Un=>{if(ea>ut.current){const oa=Un.view.map(Ca=>(0,f.hI)(Ca,Un.view));Ne({...Un,items:oa}),qe(!1),ut.current=ea}})},[Me,$e]);const wt=[(0,s.UU)({crossAxis:!1,boundary:document.getElementById(u.BOUNDARY_ELEMENT_ID)??void 0})],{context:Ht,refs:hn,floatingStyles:Dn,elements:Bn}=(0,d.we)({open:ot,placement:"bottom",onOpenChange:ea=>{ea&&(be(""),rt(!0)),mt(ea)},middleware:wt,whileElementsMounted:o.ll}),xn=(0,d.kp)(Ht),ft=(0,d.s9)(Ht),{getReferenceProps:St,getFloatingProps:Tt}=(0,d.bv)([ft,xn]),Je=(0,c.useCallback)(async(ea,Un)=>{ke(oa=>({...oa,[ea]:Un})),Un&&!pt[ea]&&jt(ea)},[jt,pt]),Pt=(0,c.useCallback)(ea=>{Ye&&Ye(ea.uid,ea.title),mt(!1)},[Ye]),Yt=(0,c.useCallback)(ea=>{ea.preventDefault(),ea.stopPropagation(),Ye&&Ye(void 0,void 0)},[Ye]),Lt=(0,c.useCallback)(()=>mt(!1),[mt]),fn=(0,c.useCallback)(ea=>{Me||jt(ea)},[Me,jt]),En=(0,c.useMemo)(()=>{let ea=[];return gt?ea=tt:ea=Oe?.items.map(Un=>({isOpen:!1,level:0,item:{kind:"folder",title:Un.title,uid:Un.uid,parentUID:Un.parentUID,parentTitle:Un.parentTitle}}))??[],(!Re||Le?.length)&&(ea=ea.filter(Un=>!(!Re&&Un.item.uid===(0,ie.K)().item.uid||Le?.includes(Un.item.uid)))),ea},[tt,Le,gt,Oe?.items,Re]),An=(0,c.useCallback)(ea=>{const Un=En[ea];if(!Un)return!1;const oa=Un.item;return!(oa.kind==="ui"&&oa.uiKind==="pagination-placeholder")},[En]),Gn=Ot||We,{focusedItemIndex:zn,handleKeyDown:sa}=Pe({tree:En,handleCloseOverlay:Lt,handleFolderSelect:Pt,handleFolderExpand:Je,idPrefix:Ze,search:Me,visible:ot});let ta=pe.data?.title;Ue===""&&(ta=(0,p.t)("browse-dashboards.folder-picker.root-title","Dashboards"));const ra=ta?(0,n.jsxs)(r.B,{alignItems:"center",children:[(0,n.jsx)(v.E,{truncate:!0,children:ta}),(0,n.jsx)(C.b,{folder:pe.data})]}):"";return ot?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.p,{ref:hn.setReference,autoFocus:!0,prefix:ta?(0,n.jsx)(E.I,{name:"folder"}):(0,n.jsx)(E.I,{name:"search"}),placeholder:ta??(0,p.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:Me,invalid:Ie,className:ge.search,onChange:ea=>be(ea.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":Ze,"aria-owns":Ze,"aria-activedescendant":G(Ze,En[zn]?.item.uid),role:"combobox",...St(),onKeyDown:sa}),(0,n.jsx)("fieldset",{ref:hn.setFloating,id:Ze,className:ge.tableWrapper,style:{...Dn,width:Bn.domReference?.clientWidth},...Tt(),children:nt?(0,n.jsx)(x.F,{className:ge.error,severity:"warning",title:(0,p.t)("browse-dashboards.folder-picker.error-title","Error loading folders"),children:nt.message||nt.toString?.()||(0,p.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")}):(0,n.jsxs)("div",{children:[Gn&&(0,n.jsx)("div",{className:ge.loader,children:(0,n.jsx)(m.G,{width:600})}),(0,n.jsx)(H,{items:En,selectedFolder:Ue,focusedItemIndex:zn,onFolderExpand:Je,onFolderSelect:Pt,idPrefix:Ze,foldersAreOpenable:!(Me&&Oe),isItemLoaded:An,requestLoadMore:fn,emptyFolders:ht})]})})]}):(0,n.jsx)(se,{id:de,label:ra,handleClearSelection:Ke&&Ue!==void 0?Yt:void 0,invalid:Ie,isLoading:pe.isLoading,autoFocus:st,ref:hn.setReference,"aria-label":ta?(0,p.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:ta}):void 0,...St(),disabled:De})}const Qe=Ue=>({button:(0,a.css)({maxWidth:"100%"}),error:(0,a.css)({marginBottom:0}),tableWrapper:(0,a.css)({boxShadow:Ue.shadows.z3,position:"relative",zIndex:Ue.zIndex.portal}),loader:(0,a.css)({position:"absolute",top:0,left:0,right:0,zIndex:Ue.zIndex.portal+1,overflow:"hidden"}),search:(0,a.css)({input:{cursor:"default"}})})},62779:(ne,j,e)=>{"use strict";e.d(j,{Si:()=>W,yn:()=>I,VQ:()=>B,IH:()=>O,u$:()=>M,iy:()=>z,Fv:()=>U,HP:()=>V});var n=e(10378),a=e(96540),s=e(32899),d=e(92745),o=e(43173),l=e(75234),i=e(64762),c=e(15203),p=e(77197),h=e(75735),u=e(27044),r=e(44220),v=e(99090),g=e(42361),E=e(52763),x=e(65488);const m=x.qR.enhanceEndpoints({}),{useGetDisplayMappingQuery:y,useLazyGetDisplayMappingQuery:b}=m;var D=e(90297);const f={kind:"Folder",apiVersion:"folder.grafana.app/v1beta1",metadata:{name:"general",uid:"DvhY6m059FraHn96xsOKsb8GRtHy2ftVDUPkqZTzP4kX",resourceVersion:"-62135596800000",creationTimestamp:void 0,annotations:{"grafana.app/updatedTimestamp":"0001-01-01T00:00:00Z"}},spec:{title:"Dashboards",description:""},status:{}},C={kind:"Folder",apiVersion:"folder.grafana.app/v1beta1",metadata:{name:"sharedwithme",uid:"DlDSzXw31VwXu6LHMw0JMoFvfVtYzyf3NEPzsOXHtxQX",resourceVersion:"-62135596800000",creationTimestamp:void 0,annotations:{"grafana.app/updatedTimestamp":"0001-01-01T00:00:00Z"}},spec:{title:"Shared with me",description:"Dashboards and folders shared with me"},status:{}};var P=e(2924);function T(H,K){const w=p.A.slugifyForUrl(K);return`${o.$.appSubUrl}/dashboards/f/${H}/${w}`}function M(H){const K=!!o.$.featureToggles.foldersAppPlatformAPI,w=H&&[v.TF,o.$.sharedWithMeFolderUID].includes(H),Q=H?{name:H}:n.hT,k=(0,c.kH)(H||n.hT);let te=(0,P.kH)(K&&!w?Q:n.hT);const q=(0,P.Xq)(K?Q:n.hT),[se,re]=b(),Y=(0,a.useMemo)(()=>{const J=F(te);return!w&&!!J.length},[w,te]);if((0,a.useEffect)(()=>{const J=F(te);Y&&J.length&&se({key:J},!0)},[Y,te,se]),!K)return k;w&&(te={...te,status:n.RE.fulfilled,fulfilledTimeStamp:Date.now(),isUninitialized:!1,error:void 0,isError:!1,isSuccess:!0,isLoading:!1,isFetching:!1,data:v.TF===H?f:C,currentData:v.TF===H?f:C});let X;if(te.data&&q.data&&k.data&&(!Y||re.data)){const J=te.data.metadata.annotations?.[h.Qu],_=te.data.metadata.annotations?.[h.hc],ee=G(te.data);X={canAdmin:k.data.canAdmin,canDelete:k.data.canDelete,canEdit:k.data.canEdit,canSave:k.data.canSave,accessControl:k.data.accessControl,createdBy:_&&re.data?.display[re.data?.keys.indexOf(_)]?.displayName||"Anonymous",updatedBy:J&&re.data?.display[re.data?.keys.indexOf(J)]?.displayName||"Anonymous",...ee},q.data.items?.length&&(X.parents=q.data.items.filter(ae=>ae.name!==te.data.metadata.name).map(ae=>({title:ae.title,uid:ae.name,url:T(ae.name,ae.title)})))}return{...te,...N(te,q,k,re,Y),refetch:async()=>Promise.all([te.refetch(),q.refetch(),k.refetch()]),data:X}}function I(){const[H]=(0,P.Ko)(),[K]=(0,c.Ko)(),w=R(),Q=(0,i._2)();return o.$.featureToggles.foldersAppPlatformAPI&&!1?async function(q){const se=await H({name:q.uid});return se.error||(w({childrenOf:q.parentUid}),Q.success((0,d.t)("folders.api.folder-deleted-success","Folder deleted"))),se}:K}function B(){const[H]=(0,c.h5)(),[K]=(0,P.Ko)(),w=(0,E.wA)(),Q=R();return o.$.featureToggles.foldersAppPlatformAPI&&!1?async function({folderUIDs:q}){const se=(0,d.t)("folders.api.folder-deleted-success","Folder deleted");for(const re of q)await(0,D.x)(w,re)||(await K({name:re})).error||(0,l.J7)().publish({type:s.r1.alertSuccess.name,payload:[se]});return Q({parentsOf:q}),{data:void 0}}:H}function U(){const H=(0,c.tk)(),[K,w]=(0,P.af)(),Q=(0,E.wA)(),k=R();if(!o.$.featureToggles.foldersAppPlatformAPI)return H;async function te({folderUIDs:q,destinationUID:se}){const re=(0,d.t)("folders.api.folder-move-error-provisioned","Cannot move provisioned folder. To move it, move it in the repository and synchronise to apply the changes."),Y=(0,d.t)("folders.api.folder-moved-success","Folder moved");for(const X of q)await(0,D.x)(Q,X,{warning:re})||(await K({name:X,patch:{metadata:{annotations:{[h.ew]:se}}}})).error||(0,l.J7)().publish({type:s.r1.alertSuccess.name,payload:[Y]});return k({childrenOf:se,parentsOf:q}),{data:void 0}}return[te,w]}function W(){const[H,K]=(0,P.P8)(),w=(0,c.Vc)(),Q=R();return o.$.featureToggles.foldersAppPlatformAPI?[async te=>{const q={folder:{spec:{title:te.title},metadata:{generateName:"f",annotations:{...te.parentUid&&{[h.ew]:te.parentUid}}},status:{}}},se=await H(q);return Q({childrenOf:te.parentUid}),g.v.clear(),{...se,data:se.data?G(se.data):void 0}},K]:w}function V(){const[H,K]=(0,P.n4)(),w=(0,c.iB)(),Q=R();return o.$.featureToggles.foldersAppPlatformAPI?[async te=>{const q={name:te.uid,folder:{spec:{title:te.title},metadata:{name:te.uid},status:{}}},se=await H(q);return Q({childrenOf:te.parentUid}),{...se,data:se.data?G(se.data):void 0}},K]:w}function z(){const[H,K]=(0,P.af)(),w=(0,c.aF)(),Q=R(),k=(0,i._2)();if(!o.$.featureToggles.foldersAppPlatformAPI)return w;async function te({folderUID:q,destinationUID:se}){const re=await H({name:q,patch:{metadata:{annotations:{[h.ew]:se}}}});return re.error||(Q({parentsOf:[q],childrenOf:se}),k.success((0,d.t)("folders.api.folder-moved-success","Folder moved"))),re}return[te,K]}function R(){const H=(0,E.wA)();return K=>{K.parentsOf&&H((0,r.Zw)(K.parentsOf)),(K.childrenOf||"childrenOf"in K)&&H((0,r.bw)({parentUID:K.childrenOf,pageSize:u.md}))}}function O({folder:H,dashboard:K}){const w=Object.keys(H).filter(re=>H[re]),Q=Object.keys(K).filter(re=>K[re]),k=!1,te={folderUIDs:w,dashboardUIDs:Q},q=(0,c.G2)(k?n.hT:te),se=(0,P.G2)(k?te:n.hT);return k?se:q}function N(H,K,w,Q,k){const te=k?[H,K,w,Q]:[H,K,w];return{isLoading:te.some(q=>q.isLoading),isFetching:te.some(q=>q.isFetching),isSuccess:te.every(q=>q.isSuccess),isError:te.some(q=>q.isError),error:te.find(q=>q.error)}}function F(H){return H.data?[H.data.metadata.annotations?.[h.Qu],H.data.metadata.annotations?.[h.hc]].filter(K=>K!==void 0):[]}const G=H=>{const{annotations:K,name:w="",creationTimestamp:Q,generation:k,labels:te}=H.metadata,{title:q=""}=H.spec;return{id:parseInt(te?.[h.Y5]||"0",10)||0,uid:w,title:q,url:w===v.TF?"":T(w,q),created:Q||"0001-01-01T00:00:00Z",updated:K?.[h.xU]||"0001-01-01T00:00:00Z",managedBy:K?.[h.LH],parentUid:K?.[h.ew],version:k||1,hasAcl:!1}}},62905:(ne,j,e)=>{"use strict";e.d(j,{$L:()=>b,AK:()=>f,Bs:()=>v,NA:()=>D,NY:()=>y,Sm:()=>r,T2:()=>E,U9:()=>g,_e:()=>m,bN:()=>x,eq:()=>T,ft:()=>M,g9:()=>P,kd:()=>C});var n=e(75816),a=e(73659),s=e(92745),d=e(68143),o=e(43173),l=e(6890),i=e(64762),c=e(24313),p=e(11534);function h(I){return typeof I=="object"&&I!=null&&"error"in I}const u=I=>({error:(0,d.NF)(I)&&I.data.messageId!=="publicdashboards.notFound"?I:null}),r=(0,n.xP)({reducerPath:"publicDashboardApi",baseQuery:(0,a.W)({baseURL:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:I=>({getPublicDashboard:I.query({query:B=>({url:`/dashboards/uid/${B}/public-dashboards`,manageError:u,showErrorAlert:!1}),async onQueryStarted(B,{dispatch:U,queryFulfilled:W}){try{await W}catch(V){h(V)&&(0,d.NF)(V.error)&&o.$.publicDashboardsEnabled&&U((0,l.dx)((0,i.gi)(V.error.data.message)))}},providesTags:(B,U,W)=>[{type:"PublicDashboard",id:W}]}),createPublicDashboard:I.mutation({query:B=>({url:`/dashboards/uid/${B.dashboard instanceof p.H$?B.dashboard.state.uid:B.dashboard.uid}/public-dashboards`,method:"POST",body:B.payload}),async onQueryStarted({dashboard:B,payload:{share:U}},{dispatch:W,queryFulfilled:V}){const{data:z}=await V,R=U===c.Xo.PUBLIC?(0,s.t)("public-dashboard.public-sharing.success-creation","Your dashboard is now publicly accessible"):(0,s.t)("public-dashboard.email-sharing.success-creation","Your dashboard is ready for external sharing");W((0,l.dx)((0,i.tZ)(R))),B instanceof p.H$?B.setState({meta:{...B.state.meta,publicDashboardEnabled:z.isEnabled}}):B.updateMeta({publicDashboardEnabled:z.isEnabled})},invalidatesTags:(B,U,{dashboard:W})=>[{type:"PublicDashboard",id:W instanceof p.H$?W.state.uid:W.uid}]}),updatePublicDashboard:I.mutation({query:({payload:B,dashboard:U})=>({url:`/dashboards/uid/${U instanceof p.H$?U.state.uid:U.uid}/public-dashboards/${B.uid}`,method:"PATCH",body:B}),async onQueryStarted({dashboard:B},{dispatch:U,queryFulfilled:W}){await W,U((0,l.dx)((0,i.tZ)((0,s.t)("public-dashboard.configuration.success-update","Settings have been successfully updated"))))},invalidatesTags:(B,U,{payload:W})=>[{type:"PublicDashboard",id:W.dashboardUid},"AuditTablePublicDashboard"]}),pauseOrResumePublicDashboard:I.mutation({query:({payload:B,dashboard:U})=>({url:`/dashboards/uid/${U instanceof p.H$?U.state.uid:U.uid}/public-dashboards/${B.uid}`,method:"PATCH",body:B}),async onQueryStarted({dashboard:B,payload:{isEnabled:U}},{dispatch:W,queryFulfilled:V}){const{data:z}=await V,R=U?(0,s.t)("public-dashboard.configuration.success-resume","Your dashboard access has been resumed"):(0,s.t)("public-dashboard.configuration.success-pause","Your dashboard access has been paused");W((0,l.dx)((0,i.tZ)(R))),B instanceof p.H$?B.setState({meta:{...B.state.meta,publicDashboardEnabled:z.isEnabled}}):B.updateMeta?.({publicDashboardEnabled:z.isEnabled})},invalidatesTags:(B,U,{payload:W})=>[{type:"PublicDashboard",id:W.dashboardUid},"AuditTablePublicDashboard"]}),updatePublicDashboardAccess:I.mutation({query:({payload:B,dashboard:U})=>({url:`/dashboards/uid/${U instanceof p.H$?U.state.uid:U.uid}/public-dashboards/${B.uid}`,method:"PATCH",body:B}),async onQueryStarted({dashboard:B,payload:{share:U}},{dispatch:W,queryFulfilled:V}){await V;const z=U===c.Xo.PUBLIC?(0,s.t)("public-dashboard.public-sharing.success-share-type-change","Dashboard access updated: Anyone with the link can now access"):(0,s.t)("public-dashboard.email-sharing.success-share-type-change","Dashboard access updated: Only specific people can now access with the link");W((0,l.dx)((0,i.tZ)(z)))},invalidatesTags:(B,U,{payload:W})=>[{type:"PublicDashboard",id:W.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:I.mutation({query:()=>({url:""})}),deleteRecipient:I.mutation({query:()=>({url:""})}),reshareAccessToRecipient:I.mutation({query:()=>({url:""})}),getActiveUsers:I.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:I.query({query:()=>({url:""}),providesTags:(B,U,W)=>[{type:"ActiveUserDashboards",id:W}]}),listPublicDashboards:I.query({query:(B=1)=>({url:`/dashboards/public-dashboards?page=${B}&perpage=8`}),transformResponse:B=>({...B,totalPages:Math.ceil(B.totalCount/B.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:I.mutation({query:B=>({url:`/dashboards/uid/${B.dashboardUid}/public-dashboards/${B.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:B},{dispatch:U,queryFulfilled:W}){await W,U((0,l.dx)((0,i.tZ)((0,s.t)("public-dashboard.share.success-delete","Your dashboard is no longer shareable")))),U(r.util?.resetApiState()),B instanceof p.H$?B.setState({meta:{...B.state.meta,publicDashboardEnabled:!1}}):B?.updateMeta({publicDashboardEnabled:!1})},invalidatesTags:(B,U,{dashboardUid:W})=>[{type:"PublicDashboard",id:W},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]}),revokeAllAccess:I.mutation({query:()=>({url:""})})})}),{useGetPublicDashboardQuery:v,useCreatePublicDashboardMutation:g,useUpdatePublicDashboardMutation:E,useDeletePublicDashboardMutation:x,useListPublicDashboardsQuery:m,useAddRecipientMutation:y,useDeleteRecipientMutation:b,useReshareAccessToRecipientMutation:D,useGetActiveUsersQuery:f,useGetActiveUserDashboardsQuery:C,useRevokeAllAccessMutation:P,usePauseOrResumePublicDashboardMutation:T,useUpdatePublicDashboardAccessMutation:M}=r},62939:(ne,j,e)=>{"use strict";e.d(j,{E:()=>s,R:()=>a});var n=e(68143);function a(d){if(s(d))return null;throw d}function s(d){return(0,n.NF)(d)&&d.status===404}},62963:(ne,j,e)=>{"use strict";e.d(j,{Gf:()=>i,I2:()=>d,X2:()=>c,_0:()=>o,aY:()=>l,eM:()=>s});var n=e(43173),a=e(73427);function s(p,h){return p+h.uid}function d(p){return p===n.$.sharedWithMeFolderUID}function o(p){const{orgId:h}=a.TP.user,r=`${n.$.appSubUrl??""}/dashboards/f/${p}/`;return h?`${r}?orgId=${h}`:r}function l(p){const h=[];for(const[u,r]of Object.entries(p.folder))r&&h.push({name:u,group:"folder.grafana.app",kind:"Folder"});for(const[u,r]of Object.entries(p.dashboard))r&&h.push({name:u,group:"dashboard.grafana.app",kind:"Dashboard"});return h}function i(p,h){const{canEditFolders:u,canDeleteFolders:r,canEditDashboards:v,canDeleteDashboards:g}=h;return p==="folder"?!!(u||r):!!(v||g)}function c(p){const{canEditFolders:h,canDeleteFolders:u,canEditDashboards:r,canDeleteDashboards:v}=p;return!!(h||u||(r||v))}},63152:(ne,j,e)=>{"use strict";e.d(j,{g:()=>b});var n=e(42954),a=e(74848),s=e(96540),d=e(57866),o=e(36638),l=e(92745),i=e(63527);const c=(0,s.memo)(D=>{const{options:f,onChange:C}=D,P=(0,s.useCallback)(T=>C(T.target.value),[C]);return(0,a.jsx)(i.p,{placeholder:(0,l.t)("grafana-ui.field-name-by-regex-matcher.input-placeholder","Enter regular expression"),defaultValue:f,onBlur:P})});c.displayName="FieldNameByRegexMatcherEditor";const p=()=>({id:d.Ct.byRegexp,component:c,matcher:o.sJ.get(d.Ct.byRegexp),name:(0,l.t)("grafana-ui.matchers-ui.name-field-name-by-regex-matcher","Fields with name matching regex"),description:(0,l.t)("grafana-ui.matchers-ui.description-field-name-by-regex-matcher","Set properties for fields with names matching a regex"),optionsToLabel:D=>D});var h=e(18857),u=e(56755);const r=(0,s.memo)(D=>{const{data:f,options:C,onChange:P,id:T}=D,M=(0,u.sE)(f),I=(0,u.m3)(M,C),B=(0,s.useCallback)(W=>{if((0,u.v3)(W.value,M))return P(W.value)},[M,P]),U=I.find(W=>W.value===C);return(0,a.jsx)(h.l6,{value:U,options:I,onChange:B,inputId:T})});r.displayName="FieldNameMatcherEditor";const v=()=>({id:d.Ct.byName,component:r,matcher:o.sJ.get(d.Ct.byName),name:(0,l.t)("grafana-ui.matchers-ui.name-fields-with-name","Fields with name"),description:(0,l.t)("grafana-ui.matchers-ui.description-fields-with-name","Set properties for a specific field"),optionsToLabel:D=>D}),g=(0,s.memo)(D=>{const{data:f,options:C,onChange:P}=D,{readOnly:T,prefix:M}=C,I=(0,u.sE)(f),B=(0,u.m3)(I,void 0),U=(0,s.useCallback)(W=>{if(Array.isArray(W))return P({...C,names:W.reduce((V,z)=>((0,u.v3)(z.value,I)&&V.push(z.value),V),[])})},[I,P,C]);if(T){const W=(C.names??[]).join(", ");return(0,a.jsx)(i.p,{value:W,readOnly:!0,disabled:!0,prefix:M})}return(0,a.jsx)(h.KF,{value:C.names,options:B,onChange:U})});g.displayName="FieldNameMatcherEditor";const E=()=>({id:d.Ct.byNames,component:g,matcher:o.sJ.get(d.Ct.byNames),name:(0,l.t)("grafana-ui.matchers-ui.name-fields-with-name","Fields with name"),description:(0,l.t)("grafana-ui.matchers-ui.description-fields-with-name","Set properties for a specific field"),optionsToLabel:D=>(D.names??[]).join(", "),excludeFromPicker:!0});var x=e(62693),m=e(18105),y=e(88531);const b=new n.O(()=>[v(),p(),(0,x.A)(),(0,y.pd)(),E(),(0,m.RH)()])},63267:(ne,j,e)=>{"use strict";e.d(j,{I:()=>s});var n=e(2543),a=e.n(n);function s(d,o){let l=0,i=d.indexOf(o);o=o.replace(/\s/g,"");const c=[];if(i!==-1)return{distance:0,found:!0,ranges:[{start:i,end:i+o.length-1}]};for(const p of o){const h=d.indexOf(p,i);if(h===-1)return{distance:1/0,ranges:[],found:!1};if(i!==-1&&(l+=h-i),i=h+1,c.length===0)c.push({start:h,end:h});else{const u=(0,n.last)(c);h===u.end+1?u.end++:c.push({start:h,end:h})}}return{distance:l,ranges:c,found:!0}}},63301:(ne,j,e)=>{"use strict";e.d(j,{E:()=>c});var n=e(74848),a=e(96540),s=e(92745),d=e(36303),o=e(74268);let l=null;const i=h=>{if(!l)return null;const u=(0,d.Xc)(l,{title:(0,s.t)("alerting.enrichment.error-boundary.enrichment-drawer-extension","Enrichment Drawer Extension failed to load"),style:"alertbox",errorLogger:o.vV});return(0,n.jsx)(u,{...h})},c=(0,a.memo)(i,(h,u)=>h.ruleUid===u.ruleUid);function p(h){l=h}},63409:(ne,j,e)=>{"use strict";e.d(j,{M:()=>d});var n=e(95004);const a={threshold:(l,i,c)=>l+c,midpoint:(l,i,c)=>(l+i)/2,plusone:(l,i,c)=>l+1};function s(l,i){return l.fields.find(c=>i!=null?c.name===i:c.type===n.PU.time)}function d(l){if(l.frame.length===0)return l.frame;let i=!0,{frame:c,refFieldName:p,refFieldPseudoMax:h,refFieldPseudoMin:u,insertMode:r}=l;r||(r=a.threshold);const v=s(c,p);if(v==null)return c;v.state={...v.state,nullThresholdApplied:!0};const g=c.fields.map(x=>x.config.custom?.insertNulls||v.config.interval||null),E=new Set(g);if(E.delete(null),E.size===0)return c;if(E.size===1){const x=E.values().next().value;if(!x||x<=0)return c;const m=v.values,y=c.fields.map(D=>D.values),b=o(m,y,x,u,h,r,i);return b===y?c:{...c,length:b[0].length,fields:c.fields.map((D,f)=>({...D,values:b[f]}))}}return c}function o(l,i,c,p=null,h=null,u,r){const v=l.length,g=[];if(p!=null&&p<l[0]){let y=Math.ceil((l[0]-p)/c),b=l[0]-y*c;for(;b<l[0];)g.push(u(b-c,b,c)),b+=c}g.push(l[0]);let E=l[0];for(let y=1;y<v;y++){const b=l[y];for(;b-E>c&&(g.push(u(E,b,c)),E+=c,!!r););g.push(b),E=b}if(h!=null&&h>E)for(;E+c<h;)g.push(u(E,h,c)),E+=c;const x=g.length;if(x===v)return i;const m=[];for(let y of i){let b;if(y!==l){b=Array(x);for(let D=0,f=0;D<x;D++)b[D]=l[f]===g[D]?y[f++]:null}else b=g;m.push(b)}return m}},63428:(ne,j,e)=>{"use strict";e.d(j,{g:()=>i,o:()=>c});var n=e(74848),a=e(22803),s=e(92745),d=e(63142),o=e(71479);const l=p=>({icon:(0,a.css)({marginRight:p.spacing(1),verticalAlign:"middle"}),seriesTable:(0,a.css)({display:"table"}),seriesTableRow:(0,a.css)({display:"table-row",fontSize:p.typography.bodySmall.fontSize}),seriesTableCell:(0,a.css)({display:"table-cell"}),label:(0,a.css)({wordBreak:"break-all"}),value:(0,a.css)({paddingLeft:p.spacing(2),textAlign:"right"}),activeSeries:(0,a.css)({fontWeight:p.typography.fontWeightBold,color:p.colors.text.maxContrast}),timestamp:(0,a.css)({fontWeight:p.typography.fontWeightBold,fontSize:p.typography.bodySmall.fontSize})}),i=({color:p,label:h,value:u,isActive:r})=>{const v=(0,d.of)(l);return(0,n.jsxs)("div",{"data-testid":"SeriesTableRow",className:(0,a.cx)(v.seriesTableRow,r&&v.activeSeries),children:[p&&(0,n.jsx)("div",{className:v.seriesTableCell,children:(0,n.jsx)(o.p,{color:p,className:v.icon})}),h&&(0,n.jsx)("div",{className:(0,a.cx)(v.seriesTableCell,v.label),children:h}),u&&(0,n.jsx)("div",{className:(0,a.cx)(v.seriesTableCell,v.value),children:u})]})},c=({timestamp:p,series:h})=>{const u=(0,d.of)(l);return(0,n.jsxs)(n.Fragment,{children:[p&&(0,n.jsx)("div",{className:u.timestamp,"aria-label":(0,s.t)("grafana-ui.viz-tooltip.timestamp","Timestamp"),children:p}),h.map((r,v)=>(0,n.jsx)(i,{isActive:r.isActive,label:r.label,color:r.color,value:r.value},`${r.label}-${v}`))]})}},63509:(ne,j,e)=>{"use strict";e.d(j,{B:()=>o});var n=e(74848),a=e(11594),s=e(99887);const d={[a.kv.grafana]:"grafana",[a.kv.commercial]:"shield",[a.kv.community]:"shield",DEFAULT:"shield-exclamation"},o=({status:i,color:c,signatureType:p,signatureOrg:h,...u})=>{const r=l(i,p,h);return(0,n.jsx)(s.E,{text:r.text,color:r.color,icon:r.icon,tooltip:r.tooltip,...u})};o.displayName="PluginSignatureBadge";function l(i,c,p){i||(i=a.Ac.invalid);const h=d[c||""]||d.DEFAULT;switch(i){case a.Ac.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case a.Ac.valid:return{text:c||"Signed",icon:c?h:"lock",color:"green",tooltip:"Signed and verified plugin"};case a.Ac.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case a.Ac.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case a.Ac.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},63722:(ne,j,e)=>{"use strict";e.d(j,{a:()=>i});var n=e(74848),a=e(96540),s=e(22669);const d="200px",o=200,l={transition:`max-height ${o}ms ease-in-out`,overflow:"hidden"},i=({children:c,in:p,maxHeight:h=d,style:u=l})=>{const r=(0,a.useRef)(null),v={exited:{maxHeight:0},entering:{maxHeight:h},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return(0,n.jsx)(s.Ay,{in:p,timeout:o,nodeRef:r,children:g=>(0,n.jsx)("div",{style:{...u,...v[g]},ref:r,children:c})})}},63895:(ne,j,e)=>{"use strict";e.d(j,{Ig:()=>b,J$:()=>v,J9:()=>r,NL:()=>C,S6:()=>p,So:()=>i,Zc:()=>h,b2:()=>y,iX:()=>T,ou:()=>u,qR:()=>l,t8:()=>D,yk:()=>m});var n=e(2543),a=e.n(n),s=e(84266),d=e(39659);const o=[s.ho.regex,s.ho.notRegex,s.ho.notEqual,s.ho.equal];function l(M){if(M.startsWith("{")&&M.endsWith("}"))throw new Error("this function does not support PromQL-style matcher syntax, call parsePromQLStyleMatcher() instead");const I=o.map(z=>[z,M.indexOf(z)]).filter(([z,R])=>R>-1).sort((z,R)=>z[1]-R[1]);if(!I.length)throw new Error(`Invalid matcher: ${M}`);const[B,U]=I[0],W=M.slice(0,U).trim(),V=M.slice(U+B.length);if(!W)throw new Error(`Invalid matcher: ${M}`);return{name:W,value:V,isRegex:B===s.ho.regex||B===s.ho.notRegex,isEqual:B===s.ho.equal||B===s.ho.regex}}function i(M){return f(M)?c(M):[l(M)]}function c(M){if(!f(M))throw new Error("not a PromQL style matcher");return p(M)}function p(M){const I=/,(?=(?:[^"]*"[^"]*")*[^"]*$)/,B=M.replace(/^\{/,"").replace(/\}$/,"").trim().split(I);return(0,n.compact)(B).flatMap(l).map(U=>({...U,name:b(U.name),value:b(U.value)}))}function h(M){try{return p(M)}catch{return[]}}function u(M){return(0,n.chain)(M).map(I=>I.trim()).compact().flatMap(h).uniqBy("name").value()}const r=M=>{const I=Object.entries(M).filter(([U])=>!(0,d.F2)(U)),B=new URLSearchParams;return I.forEach(([U,W])=>B.append("matcher",`${U}=${W}`)),B},v=M=>{let I=[];return M.matchers&&M.matchers.forEach(B=>{const U=i(B).map(C);I=I.concat(U)}),M.object_matchers&&I.push(...M.object_matchers),M.match_re&&Object.entries(M.match_re).forEach(([B,U])=>{I.push([B,s.ho.regex,U])}),M.match&&Object.entries(M.match).forEach(([B,U])=>{I.push([B,s.ho.equal,U])}),I};function g(M){return`"${M.replace(/[\\"]/g,B=>`\\${B}`)}"`}const E=/[\{\}\!\=\~\,\\\"\'\`\s]+/;function x(M){return E.test(M)?g(M):M}function m(M){return x(b(M))}const y=({name:M,operator:I,value:B})=>{const U=x(M),W=g(B);return`${U}${I}${W}`};function b(M){return/^"(.*)"$/.test(M)?M.replace(/^"(.*)"$/,"$1").replace(/\\"/g,'"').replace(/\\\\/g,"\\"):M}const D={default:([M,I,B])=>`${M} ${I} ${B||""}`,unquote:([M,I,B])=>{const U=b(M),W=b(B)||'""';return`${U} ${I} ${W}`}};function f(M){return M.startsWith("{")&&M.endsWith("}")}function C(M){const I=P(M);return[M.name,I,M.value]}function P(M){return M.isEqual?M.isRegex?s.ho.regex:s.ho.equal:M.isRegex?s.ho.notRegex:s.ho.notEqual}function T(M){const[I,B,U]=M;return{label:I,type:B,value:U}}},64157:(ne,j,e)=>{"use strict";e.d(j,{$1:()=>l,TP:()=>s,gN:()=>d});var n=e(43173);const a=()=>n.$.namespace,s=(i,c)=>`${n.$.appSubUrl||""}/apis/${i}/${c}/namespaces/${a()}`,d=(i,c)=>`${i}/${c}`,o=i=>{try{return encodeURIComponent(i),!0}catch{return!1}},l=i=>{if(!o(i))throw new Error(`Cannot encode malformed UTF-16 string with lone surrogates: ${i}`);const c=new TextEncoder().encode(i),p=String.fromCodePoint(...c);return btoa(p).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},64400:(ne,j,e)=>{"use strict";e.d(j,{XF:()=>d,d2:()=>o,e4:()=>s});var n=e(96540),a=e(19379);const s=(0,n.createContext)({eventsScope:"global",eventBus:new a.o}),d=s.Provider,o=()=>(0,n.useContext)(s)},64464:(ne,j,e)=>{"use strict";e.d(j,{AC:()=>n.AC,A_:()=>n.A_,D0:()=>n.D0,M8:()=>n.M8,SM:()=>n.SM,YD:()=>n.YD,aD:()=>n.aD,bM:()=>n.bM,hZ:()=>n.hZ,qR:()=>a,r3:()=>n.r3,ri:()=>n.ri});var n=e(66202);const a=n.qR.enhanceEndpoints({addTagTypes:["cloud-migration-token","cloud-migration-session","cloud-migration-snapshot","cloud-migration-resource-dependencies"],endpoints:{getCloudMigrationToken:{providesTags:["cloud-migration-token"]},createCloudMigrationToken:{invalidatesTags:["cloud-migration-token"]},deleteCloudMigrationToken:{invalidatesTags:["cloud-migration-token"]},getSessionList:{providesTags:["cloud-migration-session"]},getSession:{providesTags:["cloud-migration-session"]},createSession:{invalidatesTags:["cloud-migration-session"]},deleteSession:{invalidatesTags:["cloud-migration-session","cloud-migration-snapshot"]},getShapshotList:{providesTags:["cloud-migration-snapshot"]},getSnapshot:{providesTags:["cloud-migration-snapshot"]},createSnapshot:{invalidatesTags:["cloud-migration-snapshot"]},uploadSnapshot:{invalidatesTags:["cloud-migration-snapshot"]},getResourceDependencies:{providesTags:["cloud-migration-resource-dependencies"]},getDashboardByUid:s,getLibraryElementByUid:s}});function s(d){if(!d.query)return;const o=d.query;d.query=l=>{const i=o(l);return i.showErrorAlert=!1,i}}},64467:(ne,j,e)=>{"use strict";e.d(j,{q:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(76319),o=e(60208),l=e(13941),i=e(54314),c=e(63142),p=e(31286),h=e(92807);function u({tabs:v,defaultTab:g,closeIconTooltip:E,onClose:x,testId:m}){const[y,b]=(0,s.useState)(v.some(C=>C.value===g)?g:v[0].value),D=(0,c.of)(r),f=C=>{b(C.value)};return(0,n.jsxs)("div",{className:D.container,"data-testid":m,children:[(0,n.jsxs)(i.U,{className:D.tabs,children:[v.map(C=>(0,n.jsx)(o.o,{label:C.label,active:C.value===y,onChangeTab:()=>f(C),icon:C.icon},C.value)),(0,n.jsx)(p.a,{grow:1,display:"flex",justifyContent:"flex-end",paddingRight:1,children:(0,n.jsx)(d.K,{size:"lg",onClick:x,name:"times",tooltip:E??"Close"})})]}),(0,n.jsx)(h.P,{children:(0,n.jsx)(l.J,{className:D.tabContent,children:v.find(C=>C.value===y)?.content})})]})}const r=v=>({container:(0,a.css)({height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0",minHeight:0}),tabContent:(0,a.css)({padding:v.spacing(2),backgroundColor:v.colors.background.primary,flex:1}),tabs:(0,a.css)({paddingTop:v.spacing(.5),borderColor:v.colors.border.weak,ul:{marginLeft:v.spacing(2)}})})},64761:(ne,j,e)=>{"use strict";e.d(j,{F:()=>n});var n=(a=>(a.append="append",a.reduce="reduce",a.order="order",a.organize="organize",a.rename="rename",a.calculateField="calculateField",a.seriesToColumns="seriesToColumns",a.seriesToRows="seriesToRows",a.merge="merge",a.concatenate="concatenate",a.labelsToFields="labelsToFields",a.filterFields="filterFields",a.filterFieldsByName="filterFieldsByName",a.filterFrames="filterFrames",a.filterByRefId="filterByRefId",a.renameByRegex="renameByRegex",a.filterByValue="filterByValue",a.noop="noop",a.ensureColumns="ensureColumns",a.groupBy="groupBy",a.sortBy="sortBy",a.histogram="histogram",a.configFromData="configFromData",a.rowsToFields="rowsToFields",a.prepareTimeSeries="prepareTimeSeries",a.convertFieldType="convertFieldType",a.convertFrameType="convertFrameType",a.fieldLookup="fieldLookup",a.heatmap="heatmap",a.spatial="spatial",a.joinByField="joinByField",a.joinByLabels="joinByLabels",a.extractFields="extractFields",a.groupingToMatrix="groupingToMatrix",a.limit="limit",a.partitionByValues="partitionByValues",a.timeSeriesTable="timeSeriesTable",a.transpose="transpose",a.formatTime="formatTime",a.formatString="formatString",a.regression="regression",a.groupToNestedTable="groupToNestedTable",a))(n||{})},64762:(ne,j,e)=>{"use strict";e.d(j,{Cf:()=>g,_2:()=>E,gi:()=>r,q8:()=>v,tZ:()=>u});var n=e(96540),a=e(24726),s=e(47797),d=e(8535),o=e(96221),l=e(52763),i=e(6890);const c={title:"",text:"",severity:o.Qd.Success,icon:"check"},p={title:"",text:"",severity:o.Qd.Warning,icon:"exclamation-triangle"},h={title:"",text:"",severity:o.Qd.Error,icon:"exclamation-triangle"},u=(y,b="",D)=>({...c,title:y,text:b,id:(0,a.A)(),timestamp:Date.now(),showing:!0}),r=(y,b="",D,f)=>({...h,text:(0,s.q6)(b),title:y,id:(0,a.A)(),traceId:D,component:f,timestamp:Date.now(),showing:!0}),v=(y,b="",D)=>({...p,title:y,text:b,traceId:D,id:(0,a.A)(),timestamp:Date.now(),showing:!0}),g=(y,b="",D)=>({severity:o.Qd.Info,icon:"info-circle",title:y,text:b,id:(0,a.A)(),timestamp:Date.now(),showing:!0});function E(){const y=(0,l.wA)();return(0,n.useMemo)(()=>({[o.Qd.Success]:(b,D="")=>{y((0,i.dx)(x(b,D,o.Qd.Success)))},[o.Qd.Warning]:(b,D="",f)=>{y((0,i.dx)(x(b,D,o.Qd.Warning,f)))},[o.Qd.Error]:(b,D="",f)=>{y((0,i.dx)(x(b,D,o.Qd.Error,f)))},[o.Qd.Info]:(b,D="")=>{y((0,i.dx)(x(b,D,o.Qd.Info)))}}),[y])}function x(y,b="",D=o.Qd.Success,f){return{[o.Qd.Success]:(P,T="")=>u(P,T),[o.Qd.Warning]:(P,T="",M)=>v(P,T,M),[o.Qd.Error]:(P,T="",M)=>r(P,T,M),[o.Qd.Info]:(P,T="")=>g(P,T)}[D](y,b,f)}function m(y,b="",D=AppNotificationSeverity.Success){storeDispatch(notifyApp(x(y,b,D)))}},64780:(ne,j,e)=>{"use strict";e.d(j,{B:()=>r,s:()=>v});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(47931),i=e(8207),c=e(41654),p=e(50992),h=e(60208),u=e(54314),r=(E=>(E.code="code",E.text="text",E))(r||{});function v({value:E,onDismiss:x,mode:m}){const[y,b]=(0,s.useState)(m),D=E.trim(),f=(0,o.of)(g),C=[{label:"Plain text",value:"text"},{label:"Code editor",value:"code"}],P=()=>{b(y==="text"?"code":"text")},T=(0,n.jsx)(u.U,{children:C.map((M,I)=>(0,n.jsx)(h.o,{label:M.label,active:M.value===y,onChangeTab:P},`${M.value}-${I}`))});return(0,n.jsx)(i._,{onClose:x,title:(0,d.t)("grafana-ui.table.inspect-drawer-title","Inspect value"),tabs:T,children:(0,n.jsxs)(c.B,{direction:"column",gap:2,children:[(0,n.jsx)(l.b,{icon:"copy",getText:()=>D,style:{marginLeft:"auto",width:"200px"},children:(0,n.jsx)(d.x6,{i18nKey:"grafana-ui.table.copy",children:"Copy to Clipboard"})}),y==="code"?(0,n.jsx)(p.B,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(D?D.length:0)>100,value:D,readOnly:!0,wordWrap:!0}):(0,n.jsx)("pre",{className:f.textContainer,children:D})]})})}const g=E=>({textContainer:(0,a.css)({color:E.colors.text.secondary,minHeight:42})})},64913:(ne,j,e)=>{"use strict";e.d(j,{v:()=>b});var n=e(74848),a=e(22803),s=e(47078),d=e.n(s),o=e(38092),l=e(96540),i=e(92745),c=e(63142),p=e(30703),h=e(76319),u=e(63527),r=e(41654),v=e(18857),g=e(78121),E=e(21133);const x=(0,a.css)({"&:focus":{outline:"none"}}),m=" / ";class y extends l.PureComponent{constructor(f){super(f),this.flattenOptions=(M,I=[])=>{let B=[];for(const U of M){const W=[...I];W.push(U),!U.items||U.items.length===0?B.push({singleLabel:W[W.length-1].label,label:W.map(V=>V.label).join(this.props.separator||m),value:W.map(V=>V.value)}):B=[...B,...this.flattenOptions(U.items,W)]}return B},this.getSearchableOptions=d()(M=>this.flattenOptions(M)),this.onChange=(M,I)=>{const B=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?I.map(W=>W.label).join(this.props.separator||m):I[I.length-1].label,U={rcValue:{value:M,label:B},focusCascade:!0,activeLabel:B,isSearching:!1,inputValue:B};this.setState(U),this.props.onSelect(I[I.length-1].value)},this.onSelect=M=>{const I=M.value||[],B=this.props.displayAllSelectedLevels?M.label:M.singleLabel||"",U={activeLabel:B,inputValue:B,rcValue:{value:I,label:B},isSearching:!1,focusCascade:!1};this.setState(U),this.props.onSelect(I[I.length-1])},this.onCreateOption=M=>{this.setState({activeLabel:M,inputValue:M,rcValue:[],isSearching:!1}),this.props.onSelect(M)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=M=>{if(["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight"].includes(M.key))return;const I=M.currentTarget.selectionStart,B=M.currentTarget.selectionEnd;let U=M.currentTarget.value;I!==B&&(U=U.substring(0,I??0)+U.substring(B??0)),this.setState({focusCascade:!1,isSearching:!0,inputValue:U})},this.onSelectInputChange=M=>{this.setState({inputValue:M})};const C=this.getSearchableOptions(f.options),{rcValue:P,activeLabel:T}=this.setInitialValue(C,f.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:P,activeLabel:T,inputValue:""}}static{this.defaultProps={changeOnSelect:!0}}setInitialValue(f,C){if(!C)return{rcValue:[],activeLabel:""};for(const P of f){const T=P.value||[];if(T[T.length-1]===C)return{rcValue:T,activeLabel:this.props.displayAllSelectedLevels?P.label:P.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:C}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:f,formatCreateLabel:C,placeholder:P,width:T,changeOnSelect:M,options:I,disabled:B,id:U,isClearable:W,theme:V}=this.props,{focusCascade:z,isSearching:R,rcValue:O,activeLabel:N,inputValue:F}=this.state,G=this.getSearchableOptions(I),H=(0,E.T)(V);return(0,n.jsx)("div",{children:R?(0,n.jsx)(v.l6,{allowCustomValue:f,placeholder:P,autoFocus:!z,onChange:this.onSelect,onBlur:this.onBlur,options:G,onCreateOption:this.onCreateOption,formatCreateLabel:C,width:T,onInputChange:this.onSelectInputChange,disabled:B,inputValue:F,inputId:U}):(0,n.jsx)(o.A,{onChange:(0,g.k)(this.onChange),options:I,changeOnSelect:M,value:O.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen,disabled:B,dropdownClassName:H.dropdown,children:(0,n.jsx)("div",{className:x,children:(0,n.jsx)(u.p,{autoFocus:this.props.autoFocus,width:T,placeholder:P,onBlur:this.onBlurCascade,value:N,onFocus:K=>{K.currentTarget.select()},onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:(0,n.jsxs)(r.B,{gap:.5,children:[W&&N!==""&&(0,n.jsx)(h.K,{name:"times","aria-label":(0,i.t)("grafana-ui.cascader.clear-button","Clear selection"),onClick:K=>{K.preventDefault(),K.stopPropagation(),this.setState({rcValue:[],activeLabel:"",inputValue:""}),this.props.onSelect("")}}),(0,n.jsx)(p.I,{name:z?"angle-up":"angle-down"})]}),disabled:B,id:U})})})})}}const b=(0,c.cV)(y)},65241:(ne,j,e)=>{"use strict";e.d(j,{j:()=>i});var n=e(74848),a=e(96540),s=e(92745),d=e(27489),o=e(43652),l=e(58662);const i=({panel:c,initialFolderUid:p,onCreateLibraryPanel:h,onDismiss:u})=>((0,a.useEffect)(()=>{(0,d.rR)("grafana_dashboards_library_panel_share_viewed",{shareResource:(0,l.hD)(c)})},[c]),c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.library.info",children:"Create library panel."})}),(0,n.jsx)(o.b,{panel:c,initialFolderUid:p,onCreateLibraryPanel:h,onDismiss:u})]}):null)},65333:(ne,j,e)=>{"use strict";e.d(j,{tt:()=>_,EH:()=>J,A2:()=>ee,wM:()=>q});var n=e(2543),a=e(43173),s=e(44248),d=e(5857),o=e(45173),l=e(54767),i=e(7817),c=e(82612),p=e(11968),h=e(9634),u=e(7498),r=e(49e3),v=e(21645),g=e(88632),E=e(88499),x=e(44804),m=e(11534),y=e(7094),b=e(32540),D=e(37040),f=e(66251),C=e(93389),P=e(1131),T=e(87308),M=e(18178),I=e(97335),B=e(97883),U=e(20246),W=e(23244),V=e(35718),z=e(18789),R=e(23289),O=e(92119),N=e(78282),F=e(39557);const G="default";function H(L){const ie=L.templating.list.map(oe=>{try{return Q(oe)}catch(ue){return console.error(ue),null}}).filter(oe=>!!oe);return a.$.featureToggles.scopeFilters&&!a.$.publicDashboardAccessToken&&ie.push(new s.Kg({enable:!0})),new s.Pj({variables:ie})}function K(L){const ie=L.templating.list.map(oe=>{try{return oe.type==="adhoc"?new s.H9({name:oe.name,label:oe.label,readOnly:!0,description:oe.description,skipUrlSync:oe.skipUrlSync,hide:oe.hide,datasource:oe.datasource,applyMode:"auto",filters:oe.filters??[],baseFilters:oe.baseFilters??[],defaultKeys:oe.defaultKeys,useQueriesAsFilterForOptions:!0,layout:a.$.featureToggles.newFiltersUI?"combobox":void 0,supportsMultiValueOperators:!!(0,N.l)().getInstanceSettings({type:oe.datasource?.type})?.meta.multiValueFilterOperators}):w(oe)}catch(ue){return console.error(ue),null}}).filter(oe=>!!oe);return new s.Pj({variables:ie})}function w(L){let ie,oe;if(L.type==="interval"){const ue=(0,O.Sm)(L.query),ye=(0,O.pk)(L,ue);return ie=new F.B({name:L.name,label:L.label,description:L.description,value:ye,text:ye,hide:L.hide}),ie}return L.type==="system"||L.type==="constant"||L.type==="adhoc"?oe={value:"",text:""}:oe={value:L.current?.value??"",text:L.current?.text??""},ie=new F.B({name:L.name,label:L.label,description:L.description,value:oe?.value??"",text:oe?.text??"",hide:L.hide}),ie}function Q(L){const ie={name:L.name,label:L.label,description:L.description};if(L.type==="adhoc"){const oe=[],ue=[];return L.filters?.forEach(ye=>ye.origin?oe.push(ye):ue.push(ye)),new s.H9({...ie,description:L.description,skipUrlSync:L.skipUrlSync,hide:L.hide,datasource:L.datasource,applyMode:"auto",originFilters:oe,filters:ue,baseFilters:L.baseFilters??[],defaultKeys:L.defaultKeys,allowCustomValue:L.allowCustomValue,useQueriesAsFilterForOptions:!0,layout:a.$.featureToggles.newFiltersUI?"combobox":void 0,supportsMultiValueOperators:!!(0,N.l)().getInstanceSettings({type:L.datasource?.type})?.meta.multiValueFilterOperators})}if(L.type==="custom")return new s.yP({...ie,value:L.current?.value??"",text:L.current?.text??"",query:L.query,isMulti:L.multi,allValue:L.allValue||void 0,includeAll:L.includeAll,defaultToAll:!!L.includeAll,skipUrlSync:L.skipUrlSync,hide:L.hide,allowCustomValue:L.allowCustomValue});if(L.type==="query")return new s.fS({...ie,value:L.current?.value??"",text:L.current?.text??"",query:L.query,datasource:L.datasource,sort:L.sort,refresh:L.refresh,regex:L.regex,allValue:L.allValue||void 0,includeAll:L.includeAll,defaultToAll:!!L.includeAll,isMulti:L.multi,skipUrlSync:L.skipUrlSync,hide:L.hide,definition:L.definition,allowCustomValue:L.allowCustomValue,staticOptions:L.staticOptions?.map(oe=>({label:String(oe.text),value:String(oe.value)})),staticOptionsOrder:L.staticOptionsOrder});if(L.type==="datasource")return new s.mI({...ie,value:L.current?.value??"",text:L.current?.text??"",regex:L.regex,pluginId:L.query,allValue:L.allValue||void 0,includeAll:L.includeAll,defaultToAll:!!L.includeAll,skipUrlSync:L.skipUrlSync,isMulti:L.multi,hide:L.hide,defaultOptionEnabled:L.current?.value===G&&L.current?.text==="default",allowCustomValue:L.allowCustomValue});if(L.type==="interval"){const oe=(0,O.Sm)(L.query),ue=(0,O.pk)(L,oe);return new s.Yj({...ie,value:ue,intervals:oe,autoEnabled:L.auto,autoStepCount:L.auto_count,autoMinInterval:L.auto_min,refresh:L.refresh,skipUrlSync:L.skipUrlSync,hide:L.hide})}else{if(L.type==="constant")return new s.x0({...ie,value:L.query,skipUrlSync:L.skipUrlSync,hide:L.hide});if(L.type==="textbox"){let oe;return L?.current?.value?typeof L.current.value=="string"?oe=L.current.value:oe=L.current.value[0]:oe=L.query,new s.TS({...ie,value:oe,skipUrlSync:L.skipUrlSync,hide:L.hide})}else{if(a.$.featureToggles.groupByVariable&&L.type==="groupby")return new s.ZG({...ie,datasource:L.datasource,value:L.current?.value||[],text:L.current?.text||[],skipUrlSync:L.skipUrlSync,hide:L.hide,defaultOptions:L.options,defaultValue:L.defaultValue,allowCustomValue:L.allowCustomValue});if(L.type==="switch"){const oe=ue=>Array.isArray(ue)?ue[0]:ue;return new s.HV({...ie,value:oe(L.current?.value),enabledValue:oe(L.options?.[0]?.value),disabledValue:oe(L.options?.[1]?.value),skipUrlSync:L.skipUrlSync,hide:L.hide})}else throw new Error(`Scenes: Unsupported variable type ${L.type}`)}}}function k(L){return function(oe,ue){if(ue.angularPanelCtrl){oe.options={angularOptions:L.getOptionsToRemember()};return}if(!L.options||Object.keys(L.options).length===0){(0,n.defaults)(oe,L.getOptionsToRemember());const ye=(0,n.cloneDeep)(L.targets);Object.defineProperty(oe,"targets",{get:function(){return console.warn("Accessing the targets property when migrating a panel plugin is deprecated. Changes to this property will be ignored."),ye}})}if(L.autoMigrateFrom){const ye=c.NB[L.autoMigrateFrom]!=null,fe=L.getOptionsToRemember(),Ee=L.autoMigrateFrom;if(ue.onPanelTypeChanged){const Ae=ye?{angular:fe}:fe.options;Object.assign(oe.options,ue.onPanelTypeChanged(oe,Ee,Ae,oe.fieldConfig))}}}}var te=e(78320);function q(L){const ie=new i.G(L.dashboard,L.meta),oe=J(ie,L.dashboard),ue=a.$.featureToggles.kubernetesDashboards?`${o._.group}/${o._.version}`:void 0;return oe.setInitialSaveModel(L.dashboard,L.meta,ue),oe}function se(L){const ie=[];let oe=null,ue=[];for(const ye of L)ye.type==="row"?!oe&&ue.length===0?oe=ye:oe?(ie.push(X(oe,ue)),ue=[],oe=ye):(ie.push(new I.o({title:"",collapse:ye.collapsed,layout:new P.D({grid:new s.hy({children:ue})}),hideHeader:!0,$behaviors:[]})),ue=[],oe=ye):ue.push(_(ye));return oe&&ie.push(X(oe,ue)),new B.V({rows:ie})}function re(L){const ie=[];let oe=null,ue=[];for(const ye of L)if(ye.type==="row")oe?oe.id!==ye.id&&(ie.push(Y(oe,ue)),ye.collapsed?(ie.push(Y(ye,[])),oe=null):oe=ye,ue=[]):ye.collapsed?ie.push(Y(ye,[])):oe=ye;else{ye.snapshotData&&le(ye);const fe=_(ye);oe?ue.push(fe):ie.push(fe)}return oe&&ie.push(Y(oe,ue)),ie}function Y(L,ie){L.collapsed&&L.panels&&(ie=L.panels.map(ye=>(ye instanceof c.a9||(ye=new c.a9(ye)),_(ye))));let oe,ue=ie;return L.repeat&&(oe=[new T.L({variableName:L.repeat})]),new s.tI({key:(0,O.XA)(L.id),title:L.title,y:L.gridPos.y,isCollapsed:L.collapsed,children:ue,$behaviors:oe,actions:new M.u({})})}function X(L,ie){return new I.o({key:(0,O.XA)(L.id),title:L.title,collapse:L.collapsed,layout:new P.D({grid:new s.hy({children:(L.panels?.map(ue=>_(ue))??[]).concat(ie)})}),repeatByVariable:L.repeat})}function J(L,ie){let oe,ue=[],ye;const fe=L.uid,Ee=a.$.featureToggles.dashboardNewLayouts&&!L.meta.isSnapshot?"v2":"v1";L.meta.isSnapshot?oe=K(L):oe=H(L),L.annotations?.list?.length&&!L.isSnapshot()&&(ue=L.annotations?.list.map(Ie=>new r.g({key:(0,n.uniqueId)("annotations-"),query:Ie,name:Ie.name,isEnabled:!!Ie.enable,isHidden:!!Ie.hide,placement:Ie.placement})));let Ae=a.$.unifiedAlertingEnabled;Ae||L.panels.find(Ie=>!!Ie.alert)&&(Ae=!0),Ae&&(ye=new u.C({key:"alert-states",name:"Alert States"}));const Ge=a.$.featureToggles.scopeFilters&&L.scopeMeta?{trait:L.scopeMeta.trait,groups:L.scopeMeta.groups}:void 0,Fe=(0,l.Bp)(L.uid,L.title),Pe=a.$.dashboardPerformanceMetrics.findIndex(Ie=>Ie==="*"||Ie===L.uid)!==-1,Ve=new s.Gg.Hf({enableProfiling:Pe},Fe),me=new s.Gg.lN({enableInteractionTracking:Pe,onInteractionComplete:(0,l.tJ)(L.uid,L.title)},Fe),Se=[new s.Gg.K2({sync:L.graphTooltip}),Ve,me,E.M,ee,new s.Gg.en({enabled:L.liveNow}),p.U,new x.s({reloadOnParamsChange:a.$.featureToggles.reloadDashboardsOnParamsChange&&L.meta.reloadOnParamsChange,uid:fe})];Pe&&Se.push(h.J);let Qe;a.$.featureToggles.dashboardNewLayouts&&L.panels.some(Ie=>Ie.type==="row")?Qe=se(L.panels):Qe=new P.D({grid:new s.hy({isLazy:(0,U.DP)(ie.preload),children:re(L.panels)})});const Ue=new m.H$({uid:fe,description:L.description,editable:L.editable,preload:ie.preload??!1,id:L.id,isDirty:!1,links:L.links||[],meta:L.meta,tags:L.tags||[],title:L.title,version:L.version,scopeMeta:Ge,body:Qe,$timeRange:new s.JZ({from:L.time.from,to:L.time.to,fiscalYearStartMonth:L.fiscalYearStartMonth,timeZone:L.timezone,weekStart:(0,d.rE)(L.weekStart)?L.weekStart:void 0,UNSAFE_nowDelay:L.timepicker?.nowDelay}),$variables:oe,$behaviors:Se,$data:new g.s({annotationLayers:ue,alertStatesLayer:ye}),controls:new v.x({timePicker:new s.KE({quickRanges:L.timepicker.quick_ranges,defaultQuickRanges:a.$.quickRanges}),refreshPicker:new s.WM({refresh:L.refresh,intervals:L.timepicker.refresh_intervals,withText:!0}),hideTimeControls:L.timepicker.hidden})},Ee);return(0,l.xb)(Ue,fe),Ue}function _(L){const ie=L.repeat?{variableName:L.repeat,repeatDirection:L.repeatDirection==="v"?"v":"h"}:{},oe=[];oe.push(new b.$({rawLinks:L.links,menu:new b.m({$behaviors:[D.oV]})})),oe.push(new f.W);const ue=(L.timeFrom||L.timeShift)&&!L.hideTimeOverride,ye={key:(0,O.XA)(L.id),title:L.title?.substring(0,5e3),description:L.description,pluginId:L.type??"timeseries",options:L.options??{},fieldConfig:L.fieldConfig,pluginVersion:L.pluginVersion,seriesLimit:a.$.panelSeriesLimit,displayMode:L.transparent?"transparent":void 0,hoverHeader:!L.title&&!ue,hoverHeaderOffset:0,$data:(0,z.w)(L),titleItems:oe,$behaviors:[],extendPanelContext:V.C,_UNSAFE_customMigrationHandler:k(L)};L.libraryPanel&&(ye.$behaviors.push(new y.u({uid:L.libraryPanel.uid,name:L.libraryPanel.name})),ye.pluginId=y.u.LOADING_VIZ_PANEL_PLUGIN_ID,ye.$data=void 0),a.$.publicDashboardAccessToken||(ye.menu=new s.Lw({$behaviors:[D._i]})),(L.timeFrom||L.timeShift||L.timeCompare)&&(ye.$timeRange=new W.v({timeFrom:L.timeFrom,timeShift:L.timeShift,hideTimeOverride:L.hideTimeOverride,compareWith:L.timeCompare})),L.scopedVars&&L.targets?.[0]?.queryType==="snapshot"&&(ye.$variables=new s.Pj({variables:Object.entries(L.scopedVars).map(([Ee,Ae])=>new s.xc({name:Ee,value:Ae?.value,text:Ae?.text,isMulti:!0,includeAll:!0}))}));const fe=new s.Eb(ye);return new C.U({key:`grid-item-${L.id}`,x:L.gridPos.x,y:L.gridPos.y,width:ie.repeatDirection==="h"?24:L.gridPos.w,height:L.gridPos.h,itemHeight:L.gridPos.h,body:fe,maxPerRow:L.maxPerRow,...ie})}function ee(L){L.subscribeToEvent(s.Kw,ie=>{const{interaction:oe}=ie.payload;switch(oe){case"panel-status-message-clicked":R.c.panelStatusMessageClicked();break;case"panel-cancel-query-clicked":R.c.panelCancelQueryClicked();break}})}const ae=L=>L.map(ie=>({data:{values:ie.fields.map(oe=>oe.values).filter(oe=>oe!==void 0)},schema:{fields:ie.fields.map(oe=>({name:oe.name,type:oe.type,config:oe.config}))}})),le=L=>{L.snapshotData&&(L.datasource=te.x,L.targets=[{refId:L.snapshotData[0]?.refId??"",datasource:L.datasource,queryType:"snapshot",snapshot:ae(L.snapshotData)}],L.snapshotData=[])}},65420:(ne,j,e)=>{"use strict";e.d(j,{C:()=>c});var n=e(74848),a=e(96540),s=e(92745),d=e(30703),o=e(45967),l=e(29609),i=e(67834);const c=(0,a.memo)(({state:p,isPaused:h=!1,size:u="md",muted:r=!1})=>h?(0,n.jsx)(o.m,{content:(0,s.t)("alerting.alert-state-tag.content-alert-evaluation-is-currently-paused","Alert evaluation is currently paused"),placement:"top",children:(0,n.jsxs)(i.O,{state:"warning",size:u,muted:r,children:[(0,n.jsx)(d.I,{name:"pause",size:"xs"})," ",(0,n.jsx)(s.x6,{i18nKey:"alerting.alert-state-tag.paused",children:"Paused"})]})}):(0,n.jsx)(i.O,{state:(0,l.Wy)(p),size:u,muted:r,children:(0,l.XI)(p)}));c.displayName="AlertStateTag"},65488:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>Pe});var n=e(75816),a=e(59553),s=e(73659);const l=(0,a.TP)("iam.grafana.app","v0alpha1"),i=(0,n.xP)({reducerPath:"iamAPIv0alpha1",baseQuery:(0,s.W)({baseURL:l}),endpoints:()=>({})}),c=["API Discovery","Display","ServiceAccount","SSOSetting","TeamBinding","Team","User"],p=i.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:Ve=>({getApiResources:Ve.query({query:()=>({url:"/apis/iam.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),getDisplayMapping:Ve.query({query:me=>({url:"/display",params:{key:me.key}}),providesTags:["Display"]}),listServiceAccount:Ve.query({query:me=>({url:"/serviceaccounts",params:{pretty:me.pretty,allowWatchBookmarks:me.allowWatchBookmarks,continue:me.continue,fieldSelector:me.fieldSelector,labelSelector:me.labelSelector,limit:me.limit,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds,watch:me.watch}}),providesTags:["ServiceAccount"]}),createServiceAccount:Ve.mutation({query:me=>({url:"/serviceaccounts",method:"POST",body:me.serviceAccount,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["ServiceAccount"]}),deletecollectionServiceAccount:Ve.mutation({query:me=>({url:"/serviceaccounts",method:"DELETE",params:{pretty:me.pretty,continue:me.continue,dryRun:me.dryRun,fieldSelector:me.fieldSelector,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:me.labelSelector,limit:me.limit,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds}}),invalidatesTags:["ServiceAccount"]}),getServiceAccount:Ve.query({query:me=>({url:`/serviceaccounts/${me.name}`,params:{pretty:me.pretty}}),providesTags:["ServiceAccount"]}),replaceServiceAccount:Ve.mutation({query:me=>({url:`/serviceaccounts/${me.name}`,method:"PUT",body:me.serviceAccount,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["ServiceAccount"]}),deleteServiceAccount:Ve.mutation({query:me=>({url:`/serviceaccounts/${me.name}`,method:"DELETE",params:{pretty:me.pretty,dryRun:me.dryRun,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy}}),invalidatesTags:["ServiceAccount"]}),updateServiceAccount:Ve.mutation({query:me=>({url:`/serviceaccounts/${me.name}`,method:"PATCH",body:me.patch,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation,force:me.force}}),invalidatesTags:["ServiceAccount"]}),getServiceAccountTokens:Ve.query({query:me=>({url:`/serviceaccounts/${me.name}/tokens`}),providesTags:["ServiceAccount"]}),listSsoSetting:Ve.query({query:me=>({url:"/ssosettings",params:{allowWatchBookmarks:me.allowWatchBookmarks,continue:me.continue,fieldSelector:me.fieldSelector,labelSelector:me.labelSelector,limit:me.limit,pretty:me.pretty,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds,watch:me.watch}}),providesTags:["SSOSetting"]}),getSsoSetting:Ve.query({query:me=>({url:`/ssosettings/${me.name}`,params:{pretty:me.pretty}}),providesTags:["SSOSetting"]}),replaceSsoSetting:Ve.mutation({query:me=>({url:`/ssosettings/${me.name}`,method:"PUT",body:me.ssoSetting,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["SSOSetting"]}),deleteSsoSetting:Ve.mutation({query:me=>({url:`/ssosettings/${me.name}`,method:"DELETE",params:{pretty:me.pretty,dryRun:me.dryRun,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy}}),invalidatesTags:["SSOSetting"]}),updateSsoSetting:Ve.mutation({query:me=>({url:`/ssosettings/${me.name}`,method:"PATCH",body:me.patch,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation,force:me.force}}),invalidatesTags:["SSOSetting"]}),listTeamBinding:Ve.query({query:me=>({url:"/teambindings",params:{pretty:me.pretty,allowWatchBookmarks:me.allowWatchBookmarks,continue:me.continue,fieldSelector:me.fieldSelector,labelSelector:me.labelSelector,limit:me.limit,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds,watch:me.watch}}),providesTags:["TeamBinding"]}),createTeamBinding:Ve.mutation({query:me=>({url:"/teambindings",method:"POST",body:me.teamBinding,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["TeamBinding"]}),deletecollectionTeamBinding:Ve.mutation({query:me=>({url:"/teambindings",method:"DELETE",params:{pretty:me.pretty,continue:me.continue,dryRun:me.dryRun,fieldSelector:me.fieldSelector,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:me.labelSelector,limit:me.limit,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds}}),invalidatesTags:["TeamBinding"]}),getTeamBinding:Ve.query({query:me=>({url:`/teambindings/${me.name}`,params:{pretty:me.pretty}}),providesTags:["TeamBinding"]}),replaceTeamBinding:Ve.mutation({query:me=>({url:`/teambindings/${me.name}`,method:"PUT",body:me.teamBinding,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["TeamBinding"]}),deleteTeamBinding:Ve.mutation({query:me=>({url:`/teambindings/${me.name}`,method:"DELETE",params:{pretty:me.pretty,dryRun:me.dryRun,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy}}),invalidatesTags:["TeamBinding"]}),updateTeamBinding:Ve.mutation({query:me=>({url:`/teambindings/${me.name}`,method:"PATCH",body:me.patch,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation,force:me.force}}),invalidatesTags:["TeamBinding"]}),listTeam:Ve.query({query:me=>({url:"/teams",params:{pretty:me.pretty,allowWatchBookmarks:me.allowWatchBookmarks,continue:me.continue,fieldSelector:me.fieldSelector,labelSelector:me.labelSelector,limit:me.limit,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds,watch:me.watch}}),providesTags:["Team"]}),createTeam:Ve.mutation({query:me=>({url:"/teams",method:"POST",body:me.team,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["Team"]}),deletecollectionTeam:Ve.mutation({query:me=>({url:"/teams",method:"DELETE",params:{pretty:me.pretty,continue:me.continue,dryRun:me.dryRun,fieldSelector:me.fieldSelector,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:me.labelSelector,limit:me.limit,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds}}),invalidatesTags:["Team"]}),getTeam:Ve.query({query:me=>({url:`/teams/${me.name}`,params:{pretty:me.pretty}}),providesTags:["Team"]}),replaceTeam:Ve.mutation({query:me=>({url:`/teams/${me.name}`,method:"PUT",body:me.team,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["Team"]}),deleteTeam:Ve.mutation({query:me=>({url:`/teams/${me.name}`,method:"DELETE",params:{pretty:me.pretty,dryRun:me.dryRun,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy}}),invalidatesTags:["Team"]}),updateTeam:Ve.mutation({query:me=>({url:`/teams/${me.name}`,method:"PATCH",body:me.patch,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation,force:me.force}}),invalidatesTags:["Team"]}),getTeamMembers:Ve.query({query:me=>({url:`/teams/${me.name}/members`}),providesTags:["Team"]}),listUser:Ve.query({query:me=>({url:"/users",params:{pretty:me.pretty,allowWatchBookmarks:me.allowWatchBookmarks,continue:me.continue,fieldSelector:me.fieldSelector,labelSelector:me.labelSelector,limit:me.limit,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds,watch:me.watch}}),providesTags:["User"]}),createUser:Ve.mutation({query:me=>({url:"/users",method:"POST",body:me.user,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["User"]}),deletecollectionUser:Ve.mutation({query:me=>({url:"/users",method:"DELETE",params:{pretty:me.pretty,continue:me.continue,dryRun:me.dryRun,fieldSelector:me.fieldSelector,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:me.labelSelector,limit:me.limit,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy,resourceVersion:me.resourceVersion,resourceVersionMatch:me.resourceVersionMatch,sendInitialEvents:me.sendInitialEvents,timeoutSeconds:me.timeoutSeconds}}),invalidatesTags:["User"]}),getUser:Ve.query({query:me=>({url:`/users/${me.name}`,params:{pretty:me.pretty}}),providesTags:["User"]}),replaceUser:Ve.mutation({query:me=>({url:`/users/${me.name}`,method:"PUT",body:me.user,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation}}),invalidatesTags:["User"]}),deleteUser:Ve.mutation({query:me=>({url:`/users/${me.name}`,method:"DELETE",params:{pretty:me.pretty,dryRun:me.dryRun,gracePeriodSeconds:me.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:me.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:me.orphanDependents,propagationPolicy:me.propagationPolicy}}),invalidatesTags:["User"]}),updateUser:Ve.mutation({query:me=>({url:`/users/${me.name}`,method:"PATCH",body:me.patch,params:{pretty:me.pretty,dryRun:me.dryRun,fieldManager:me.fieldManager,fieldValidation:me.fieldValidation,force:me.force}}),invalidatesTags:["User"]}),getUserTeams:Ve.query({query:me=>({url:`/users/${me.name}/teams`}),providesTags:["User"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:h,useLazyGetApiResourcesQuery:u,useGetDisplayMappingQuery:r,useLazyGetDisplayMappingQuery:v,useListServiceAccountQuery:g,useLazyListServiceAccountQuery:E,useCreateServiceAccountMutation:x,useDeletecollectionServiceAccountMutation:m,useGetServiceAccountQuery:y,useLazyGetServiceAccountQuery:b,useReplaceServiceAccountMutation:D,useDeleteServiceAccountMutation:f,useUpdateServiceAccountMutation:C,useGetServiceAccountTokensQuery:P,useLazyGetServiceAccountTokensQuery:T,useListSsoSettingQuery:M,useLazyListSsoSettingQuery:I,useGetSsoSettingQuery:B,useLazyGetSsoSettingQuery:U,useReplaceSsoSettingMutation:W,useDeleteSsoSettingMutation:V,useUpdateSsoSettingMutation:z,useListTeamBindingQuery:R,useLazyListTeamBindingQuery:O,useCreateTeamBindingMutation:N,useDeletecollectionTeamBindingMutation:F,useGetTeamBindingQuery:G,useLazyGetTeamBindingQuery:H,useReplaceTeamBindingMutation:K,useDeleteTeamBindingMutation:w,useUpdateTeamBindingMutation:Q,useListTeamQuery:k,useLazyListTeamQuery:te,useCreateTeamMutation:q,useDeletecollectionTeamMutation:se,useGetTeamQuery:re,useLazyGetTeamQuery:Y,useReplaceTeamMutation:X,useDeleteTeamMutation:J,useUpdateTeamMutation:_,useGetTeamMembersQuery:ee,useLazyGetTeamMembersQuery:ae,useListUserQuery:le,useLazyListUserQuery:L,useCreateUserMutation:ie,useDeletecollectionUserMutation:oe,useGetUserQuery:ue,useLazyGetUserQuery:ye,useReplaceUserMutation:fe,useDeleteUserMutation:Ee,useUpdateUserMutation:Ae,useGetUserTeamsQuery:Ge,useLazyGetUserTeamsQuery:Fe}=p,Pe=p.enhanceEndpoints({})},65556:(ne,j,e)=>{"use strict";e.d(j,{r:()=>a});let n="";const a=()=>{const d=new URLSearchParams(window.location.search).get("auth_token");return d!==null&&d!==""?(n=d,d):n}},65937:(ne,j,e)=>{"use strict";e.d(j,{A:()=>a});const a="prism-token"},65966:(ne,j,e)=>{"use strict";e.d(j,{L:()=>u});var n=e(74848),a=e(89332),s=e(96540),d=e(48480),o=e(1906),l=e(78282),i=e(27489),c=e(75421),p=e(18615),h=e(96041);class u extends s.PureComponent{constructor(){super(...arguments),this.onRemoveQuery=g=>{this.props.onQueriesChange(this.props.queries.filter(E=>E!==g))},this.onDragStart=g=>{const{queries:E,dsSettings:x}=this.props;(0,i.rR)("query_row_reorder_started",{startIndex:g.source.index,numberOfQueries:E.length,datasourceType:x.type})},this.onDragEnd=g=>{const{queries:E,onQueriesChange:x,dsSettings:m}=this.props;if(!g||!g.destination)return;const y=g.source.index,b=g.destination.index;if(y===b){(0,i.rR)("query_row_reorder_canceled",{startIndex:y,endIndex:b,numberOfQueries:E.length,datasourceType:m.type});return}const D=Array.from(E),[f]=D.splice(y,1);D.splice(b,0,f),x(D),(0,i.rR)("query_row_reorder_ended",{startIndex:y,endIndex:b,numberOfQueries:E.length,datasourceType:m.type})}}onChangeQuery(g,E){const{queries:x,onQueriesChange:m}=this.props;m(x.map((y,b)=>b===E?g:y))}onReplaceQuery(g,E){const{queries:x,onQueriesChange:m,onUpdateDatasources:y,dsSettings:b}=this.props,D=x.map((f,C)=>C===E?{...g,refId:f.refId}:f);if(m(D,{skipAutoImport:!0}),g.datasource?.uid){const P={uid:new Set(D.map(M=>M.datasource?.uid)).size>1?p.uv:g.datasource.uid};b.uid!==P.uid&&y?.(P)}}onDataSourceChange(g,E){const{queries:x,onQueriesChange:m}=this.props;Promise.all(x.map(async(y,b)=>{if(b!==E)return y;const D=(0,d.p$)(g);return y.datasource&&(0,l.l)().getInstanceSettings(y.datasource)?.type===g.type?{...y,datasource:D}:{...(await(0,l.l)().get(D)).getDefaultQuery?.(o.Jk.PanelEditor),...y,datasource:D}})).then(y=>m(y),()=>{throw new Error(`Failed to get datasource ${g.name??g.uid}`)})}render(){const{dsSettings:g,data:E,queries:x,app:m,history:y,eventBus:b,onAddQuery:D,onRunQueries:f,onQueryCopied:C,onQueryRemoved:P,onQueryToggled:T,onQueryOpenChanged:M,onQueryReplacedFromLibrary:I,queryRowWrapper:B,queryLibraryRef:U,onCancelQueryLibraryEdit:W,isOpen:V}=this.props;return(0,n.jsx)(a.JY,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,children:(0,n.jsx)(a.gL,{droppableId:"transformations-list",direction:"vertical",children:z=>(0,n.jsxs)("div",{"data-testid":"query-editor-rows",ref:z.innerRef,...z.droppableProps,children:[x.map((R,O)=>{const N=r(R,g),F=g.meta.mixed?H=>this.onDataSourceChange(H,O):void 0,G=(0,n.jsx)(h.c,{id:R.refId,index:O,data:E,query:R,dataSource:N,onChangeDataSource:F,onChange:H=>this.onChangeQuery(H,O),onReplace:H=>this.onReplaceQuery(H,O),onRemoveQuery:this.onRemoveQuery,onAddQuery:D,onRunQuery:f,onQueryCopied:C,onQueryRemoved:P,onQueryToggled:T,onQueryOpenChanged:M,onQueryReplacedFromLibrary:I,queries:x,app:m,range:(0,c.jG)().timeRange(),history:y,eventBus:b,queryLibraryRef:U,onCancelQueryLibraryEdit:W,isOpen:V},R.refId);return B?B(G,R.refId):G}),z.placeholder]})})})}}const r=(v,g)=>v.datasource&&(0,l.l)().getInstanceSettings(v.datasource)||g},66056:(ne,j,e)=>{"use strict";e.d(j,{Rm:()=>T,aM:()=>C,T8:()=>W});var n=e(2543),a=e(52531),s=e(92745),d=e(56476),o=e(84266);function l(V){return"grafana_managed_receiver_configs"in V?V.grafana_managed_receiver_configs??[]:Object.entries(V).filter(([R])=>R!=="grafana_managed_receiver_configs"&&R.endsWith("_configs")).filter(([R,O])=>Array.isArray(O)&&!(0,n.isEmpty)(O)).reduce((R,[O,N])=>{const F=O.replace("_configs",""),G=N.map(H=>({name:V.name,type:F,settings:H,disableResolveMessage:!1}));return R.concat(G)},[])}var i=e(83276),c=e(6135),p=e(182),h=e(28405),u=e(58774),r=e(15645),v=e(2869);const m={title:"Grafana OnCall",icon:{[v.W.OnCall]:r,[v.W.Irm]:u,[v.W.Incident]:"",[v.W.MachineLearning]:"",[v.W.Labels]:"",[v.W.Slo]:""}[(0,p.BO)()]};function y(V,z,R=!0){const O=(0,p.ZP)()?"IRM":"OnCall";if(!R||!z.settings?.url||V===void 0)return m;if(V==null)return{...m,warning:`Grafana ${O} is not installed or is disabled`};const N=V.find(F=>F.integration_url===z.settings?.url);return{...m,description:N?.display_name,externalUrl:N?(0,h.h)((0,p.BO)(),`/integrations/${N.value}`):void 0,warning:N?void 0:`${O} Integration no longer exists`}}var b=e(3887);const D="__grafana_receiver__",f=new Intl.Collator;function C(V){if(!V.settings)return;const{settings:z}=V;switch(V.type){case"email":{const R=z.addresses||z.to;return R?P(R):void 0}case"slack":{const R=z.recipient||z.channel;return R?`#${R.replace(/^#/,"")}`:void 0}case"kafka":return z.kafkaTopic;case"webhook":return z.url;case"jira":return(0,s.t)("alerting.contact-points.receiver-summary.jira",'Creates a "{{issueType}}" issue in the "{{project}}" project',{issueType:z.issue_type,project:z.project,url:z.api_url});case c.J4.OnCall:return V[b.sW]?.description;default:return V[b.MX]?.description}}function P(V){const R=/,|;|\n+/g,O=V.trim().split(R).map(n.trim),N=(0,n.take)(O,3),F=(0,n.difference)(O,N);return F.length&&N.push(`+${F.length} more`),N.join(", ")}function T({status:V=[],notifiers:z=[],onCallIntegrations:R,contactPoints:O,alertmanagerConfiguration:N}){const F=(0,a._I)(i.b.toPackage(N?.alertmanager_config?.route??{})),G=B(i.b.fromPackage(F)),H=(0,n.groupBy)(G,"receiver");return O.map(w=>{const Q=l(w),k=V.find(q=>q.name===w.name),te=M(w);return{...w,id:te,policies:N&&H&&(H[w.name]??[]),grafana_managed_receiver_configs:Q.map((q,se)=>{const re=q.type===c.J4.OnCall;return{...q,[b.v4]:k?.integrations[se],[b.MX]:U(z,q),[b.sW]:re?y(R,q,!!N):void 0}})}}).sort((w,Q)=>f.compare(w.name,Q.name))}function M(V){return"id"in V&&V.id?V.id:V.name}function I(V){return V.object_matchers?V.object_matchers.some(z=>z[0]===D&&z[1]===o.ho.equal)??!1:!1}function B(V){const z=V.routes?.flatMap(R=>B(R))??[];return V.receiver?[{receiver:V.receiver,route:{type:I(V)?"auto-generated":"normal"}},...z]:z}function U(V,z){const R=V.find(O=>O.type===z.type);return{name:R?.name??(0,n.upperFirst)(z.type),description:R?.description}}const W=(V,z)=>(0,d.dM)(V)&&(0,d.jw)(z)},66198:(ne,j,e)=>{"use strict";e.d(j,{Cg:()=>c,Fk:()=>h,R4:()=>v,Rj:()=>i,pq:()=>p});var n=e(92745),a=e(43173),s=e(15130),d=e(18832),o=e(75735),l=e(11257);const i="manage-folder",c=E=>`folder-dashboards-${E}`,p=E=>`folder-library-panels-${E}`,h=E=>`folder-alerting-${E}`,u=E=>`folder-permissions-${E}`,r=E=>`folder-settings-${E}`;function v(E,x){const m=x??("parents"in E?E.parents:void 0),y="managedBy"in E?E.managedBy===o.Sf.Repo:!1,b={icon:"folder",id:i,subTitle:(0,d.o)("manage-folder"),url:E.url,text:E.title,children:[{active:!1,icon:"apps",id:c(E.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:E.url}]};if(m&&m.length>0){const D=m[m.length-1],f=m.slice(0,m.length-1);b.parentItem=v(D,f)}return y||b.children.push({active:!1,icon:"library-panel",id:p(E.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${E.url}/library-panels`}),s.TP.hasPermission(l.w.AlertingRuleRead)&&a.$.unifiedAlertingEnabled&&b.children.push({active:!1,icon:"bell",id:h(E.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${E.url}/alerting`}),b}function g(E){const x=v({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:t("folders.get-loading-nav.main.title.loading","Loading"),url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return x.children[E].active=!0,{main:x,node:x.children[E]}}},66202:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>d,r3:()=>g,dX:()=>C,hZ:()=>i,ri:()=>u,WH:()=>P,AC:()=>c,YX:()=>D,bM:()=>T,A_:()=>I,D0:()=>y,SM:()=>o,M8:()=>x,YD:()=>r,aD:()=>E});var n=e(75816),a=e(73659);const d=(0,n.xP)({reducerPath:"migrateToCloudGeneratedAPI",baseQuery:(0,a.W)({baseURL:"/api"}),endpoints:()=>({})}).injectEndpoints({endpoints:U=>({getSessionList:U.query({query:()=>({url:"/cloudmigration/migration"})}),createSession:U.mutation({query:W=>({url:"/cloudmigration/migration",method:"POST",body:W.cloudMigrationSessionRequestDto})}),deleteSession:U.mutation({query:W=>({url:`/cloudmigration/migration/${W.uid}`,method:"DELETE"})}),getSession:U.query({query:W=>({url:`/cloudmigration/migration/${W.uid}`})}),createSnapshot:U.mutation({query:W=>({url:`/cloudmigration/migration/${W.uid}/snapshot`,method:"POST",body:W.createSnapshotRequestDto})}),getSnapshot:U.query({query:W=>({url:`/cloudmigration/migration/${W.uid}/snapshot/${W.snapshotUid}`,params:{resultPage:W.resultPage,resultLimit:W.resultLimit,resultSortColumn:W.resultSortColumn,resultSortOrder:W.resultSortOrder,errorsOnly:W.errorsOnly}})}),cancelSnapshot:U.mutation({query:W=>({url:`/cloudmigration/migration/${W.uid}/snapshot/${W.snapshotUid}/cancel`,method:"POST"})}),uploadSnapshot:U.mutation({query:W=>({url:`/cloudmigration/migration/${W.uid}/snapshot/${W.snapshotUid}/upload`,method:"POST"})}),getShapshotList:U.query({query:W=>({url:`/cloudmigration/migration/${W.uid}/snapshots`,params:{page:W.page,limit:W.limit,sort:W.sort}})}),getResourceDependencies:U.query({query:()=>({url:"/cloudmigration/resources/dependencies"})}),getCloudMigrationToken:U.query({query:()=>({url:"/cloudmigration/token"})}),createCloudMigrationToken:U.mutation({query:()=>({url:"/cloudmigration/token",method:"POST"})}),deleteCloudMigrationToken:U.mutation({query:W=>({url:`/cloudmigration/token/${W.uid}`,method:"DELETE"})}),getDashboardByUid:U.query({query:W=>({url:`/dashboards/uid/${W.uid}`})}),getLibraryElementByUid:U.query({query:W=>({url:`/library-elements/${W.libraryElementUid}`})})}),overrideExisting:!1}),{useGetSessionListQuery:o,useLazyGetSessionListQuery:l,useCreateSessionMutation:i,useDeleteSessionMutation:c,useGetSessionQuery:p,useLazyGetSessionQuery:h,useCreateSnapshotMutation:u,useGetSnapshotQuery:r,useLazyGetSnapshotQuery:v,useCancelSnapshotMutation:g,useUploadSnapshotMutation:E,useGetShapshotListQuery:x,useLazyGetShapshotListQuery:m,useGetResourceDependenciesQuery:y,useLazyGetResourceDependenciesQuery:b,useGetCloudMigrationTokenQuery:D,useLazyGetCloudMigrationTokenQuery:f,useCreateCloudMigrationTokenMutation:C,useDeleteCloudMigrationTokenMutation:P,useGetDashboardByUidQuery:T,useLazyGetDashboardByUidQuery:M,useGetLibraryElementByUidQuery:I,useLazyGetLibraryElementByUidQuery:B}=d},66223:(ne,j,e)=>{"use strict";e.d(j,{z:()=>d});var n=e(2863),a=e(54742),s=e(8921);function d(o){const l={},i=(0,n.w)().getVariables();for(let c=0;c<i.length;c++){const p=i[c],h=o&&o[p.name];p.skipUrlSync||(h?l[s.qz+p.name]=h.value:l[s.qz+p.name]=a.B.get(p.type).getValueForUrl(p))}return l}},66251:(ne,j,e)=>{"use strict";e.d(j,{W:()=>o});var n=e(74848),a=e(44248),s=e(46429),d=e(92119);class o extends a.Bs{constructor(){super({}),this.onActivate=()=>{const c=this.parent;if(!c||!(c instanceof a.Eb))throw new Error("PanelNotices can be used only as title items for VizPanel")},this.addActivationHandler(this.onActivate)}static{this.Component=l}getPanel(){const c=this.parent;return c&&c instanceof a.Eb?c:null}}function l({model:i}){const c=i.getPanel(),h=a.jh.getData(i).useState();if(!c)return null;const u=(0,d.Cs)(c);return h.data?.series?(0,n.jsx)(s.Z,{frames:h.data?.series,panelId:u}):null}},66258:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>o});var n=e(74848),a=e(22803),s=e(92745),d=e(63142);function o(){const i=(0,d.of)(l);return(0,n.jsx)("div",{className:i.button,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.threshold.to",children:"TO"})})}const l=i=>({button:(0,a.css)({height:"32px",color:i.colors.primary.text,fontSize:i.typography.bodySmall.fontSize,display:"flex",alignItems:"center",fontWeight:i.typography.fontWeightBold,padding:`0 ${i.spacing(1)}`})})},66402:(ne,j,e)=>{"use strict";e.d(j,{F:()=>s,N:()=>a});function n(d){return d!==null&&typeof d=="object"}function a(d){if(!n(d))return!1;const o=d.metadata;return n(o)?typeof o.name=="string"&&typeof o.resourceVersion=="string"&&typeof o.creationTimestamp=="string"&&n(d.spec):!1}function s(d){if(!n(d))return!1;const o=d.metadata;return n(o)?typeof o.resourceVersion=="string"&&Array.isArray(d.items):!1}},66507:(ne,j,e)=>{"use strict";e.d(j,{t:()=>u});var n=e(74848),a=e(96540),s=e(28105),d=e(92745),o=e(44248),l=e(43243),i=e(33143),c=e(32603),p=e(71199),h=e(87748);class u extends o.Bs{constructor(g){super(g),this._dataProvider=void 0,this.addActivationHandler(()=>this._activationHandler())}static{this.Component=r}static{this.serializer={id:"ConditionalRenderingData",name:"Data",deserialize:this.deserialize}}_activationHandler(){if(this.forEachChild(E=>{E.isActive||this._subs.add(E.activate())}),this._dataProvider=this._getObjectDataProvider(),!this._dataProvider)return;const g=this._dataProvider.activate();return this._check(),this._subs.add(this._dataProvider.subscribeToState(()=>this._check())),()=>{g?.()}}_getObjectDataProvider(){const g=(0,h.iM)(this);if(!g)return;let E;for(const x of Object.values(g.state))if(x instanceof o.Eb){E=x;break}if(E)return o.jh.getData(E)??void 0}_check(){const g=this._evaluate();g!==this.state.result&&(this.setState({...this.state,result:g}),(0,h.ah)(this))}_evaluate(){if(!this._dataProvider||!this._dataProvider.state.data||this._dataProvider.state.data.state===s.Gu.Loading||this._dataProvider.state.data.state===s.Gu.NotStarted)return;const g=this._dataProvider?.state.data?.series??[];let E=!1;for(let x=0;x<g.length;x++)if(g[x].length>0){E=!0;break}return this.state.value===E}changeValue(g){this.state.value!==g&&(this.setState({value:g}),this._check())}renderCmp(){return(0,n.jsx)(this.Component,{model:this},this.state.key)}serialize(){return{kind:"ConditionalRenderingData",spec:{value:this.state.value}}}static deserialize(g){return new u({value:g.spec.value,result:void 0})}static createEmpty(){return new u({value:!0,result:void 0})}}function r({model:v}){const{value:g}=v.useState(),E=(0,a.useMemo)(()=>[{label:(0,d.t)("dashboard.conditional-rendering.conditions.data.enable","Has data"),value:1},{label:(0,d.t)("dashboard.conditional-rendering.conditions.data.disable","No data"),value:0}],[]),x=(0,a.useMemo)(()=>E.find(y=>!!y.value===g)??E[0],[E,g]),m=(0,h.KG)(v);return(0,n.jsx)(p.B,{info:(0,d.t)("dashboard.conditional-rendering.conditions.data.info","Show or hide the {{type}} based on query results.",{type:(0,c.L9)(m)}),isObjectSupported:m==="panel",model:v,title:(0,d.t)("dashboard.conditional-rendering.conditions.data.label","Query result"),children:(0,n.jsx)(l.G,{options:E,value:x,onChange:({value:y})=>{i.cc.edit({description:(0,d.t)("dashboard.edit-actions.edit-query-result-rule","Change query result rule"),source:v,perform:()=>v.changeValue(!!y),undo:()=>v.changeValue(g)})}})})}},66513:(ne,j,e)=>{"use strict";e.d(j,{GK:()=>d,Zr:()=>s,xK:()=>a});var n=e(11257);const a=[n.w.AlertingTimeIntervalsRead],s=[n.w.AlertingTimeIntervalsWrite],d=[...a,...s]},66594:(ne,j,e)=>{"use strict";e.d(j,{$H:()=>p,Ay:()=>h});var n=e(2543),a=e(29043),s=e(72054),d=e(78282);const o=b=>{const D=(0,d.l)().getInstanceSettings(b.datasourceName);return{id:b.ts.toString(),createdAt:b.ts,datasourceName:b.datasourceName,datasourceUid:D?.uid||"",starred:b.starred,comment:b.comment,queries:b.queries}},l=b=>{if(!(0,d.l)().getInstanceSettings({uid:b.datasourceUid}))throw new Error("Datasource not found.");return{ts:b.createdAt,datasourceName:b.datasourceName,starred:b.starred,comment:b.comment,queries:b.queries}};var i=e(68126);const c="grafana.explore.richHistory",p=1e4;class h{async getRichHistory(D){const f=g().map(o),C=D.starred?f.filter(M=>M.starred===!0):f,P=D.from&&D.to?[D.from,D.to]:void 0,T=(0,i.a_)(C,D.sortOrder,D.datasourceFilters,D.search,P);return{richHistory:T,total:T.length}}async addToRichHistory(D){const f=Date.now(),C={id:f.toString(),createdAt:f,...D},P=l(C),T=r(g()),M=P.queries.map(V=>(0,n.omit)(V,["key","refId"])),I=T.length>0&&T[0].queries.map(V=>(0,n.omit)(V,["key","refId"]));if((0,n.isEqual)(M,I)){const V=new Error("Entry already exists");throw V.name=s.m.DuplicatedEntry,V}const{queriesToKeep:B,limitExceeded:U}=v(T),W=[P,...B];try{a.A.setObject(c,W)}catch(V){if(V instanceof Error&&V.name==="QuotaExceededError")y(s.m.StorageFull,`Saving rich history failed: ${V.message}`);else throw V}return U?{warning:{type:s.C.LimitExceeded,message:`Query history reached the limit of ${p}. Old, not-starred items have been removed.`},richHistoryQuery:C}:{richHistoryQuery:C}}async deleteAll(){a.A.delete(c)}async deleteRichHistory(D){const f=parseInt(D,10),P=a.A.getObject(c,[]).filter(T=>T.ts!==f);a.A.setObject(c,P)}async updateStarred(D,f){return u(D,C=>C.starred=f)}async updateComment(D,f){return u(D,C=>C.comment=f)}async getSettings(){return{activeDatasourcesOnly:a.A.getObject(i.mE.activeDatasourcesOnly)??a.A.getObject(i.mE.legacyActiveDatasourceOnly,!1),retentionPeriod:a.A.getObject(i.mE.retentionPeriod,7),starredTabAsFirstTab:a.A.getBool(i.mE.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:a.A.getObject(i.mE.datasourceFilters,[]).map(f=>f.value)}}async updateSettings(D){a.A.set(i.mE.activeDatasourcesOnly,D.activeDatasourcesOnly),a.A.set(i.mE.retentionPeriod,D.retentionPeriod),a.A.set(i.mE.starredTabAsFirstTab,D.starredTabAsFirstTab),a.A.setObject(i.mE.datasourceFilters,(D.lastUsedDatasourceFilters||[]).map(f=>({value:f})))}}function u(b,D){const f=parseInt(b,10),C=a.A.getObject(c,[]),P=(0,n.find)(C,{ts:f});if(!P)throw new Error("Rich history item not found.");return D(P),a.A.setObject(c,C),o(P)}function r(b){const D=a.A.getObject(i.mE.retentionPeriod,7),f=(0,i.wQ)(D,{isLastTs:!1});return b.filter(C=>C.ts>f||C.starred===!0)||[]}function v(b){let D=!1,f=b.length-1;for(;f>=0&&b.length>=p;)b[f].starred||(b.splice(f,1),D=!0),f--;return{queriesToKeep:b,limitExceeded:D}}function g(){const b=a.A.getObject(c,[]);return E(b)}function E(b){return b.map(f=>{const C=f.queries.map((P,T)=>x(f,P,T));return{...f,queries:C}})}function x(b,D,f){const C="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof D=="object"?D:m(D)?JSON.parse(D):{expr:D,refId:C[f]}}function m(b){try{JSON.parse(b)}catch{return!1}return!0}function y(b,D){const f=new Error(D);throw f.name=b,f}},66615:(ne,j,e)=>{"use strict";e.d(j,{b:()=>d});var n=e(74848),a=e(96540),s=e(78012);const d=o=>{const{children:l,storageKey:i,defaultValue:c}=o,[p,h]=(0,a.useState)({value:s.M.getObject(o.storageKey,o.defaultValue)});(0,a.useEffect)(()=>{const v=g=>{g.key===i&&h({value:s.M.getObject(o.storageKey,o.defaultValue)})};return window.addEventListener("storage",v),()=>{window.removeEventListener("storage",v)}});const u=v=>{try{s.M.setObject(i,v)}catch(g){console.error(g)}h({value:v})},r=()=>{try{s.M.delete(i)}catch(v){console.log(v)}h({value:c})};return(0,n.jsx)(n.Fragment,{children:l(p.value,u,r)})}},66630:(ne,j,e)=>{"use strict";e.d(j,{h2:()=>x,nB:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(93581),o=e(44922),l=e(92745),i=e(63142),c=e(30703),p=e(5857),h=e(41e3);const u={saturday:"islamic",sunday:"gregory",monday:"iso8601"};function r({onChange:m,from:y,to:b,timeZone:D,weekStart:f}){const C=v(y,b,new Date,D),P=g(m,D),T=(0,i.of)(x),M=(0,p.rL)(f);return(0,n.jsx)(d.Ay,{selectRange:!0,next2Label:null,prev2Label:null,className:T.body,tileClassName:T.title,value:C,nextLabel:(0,n.jsx)(c.I,{name:"angle-right"}),nextAriaLabel:(0,l.t)("time-picker.calendar.next-month","Next month"),prevLabel:(0,n.jsx)(c.I,{name:"angle-left"}),prevAriaLabel:(0,l.t)("time-picker.calendar.previous-month","Previous month"),onChange:P,locale:"en",calendarType:u[M]})}r.displayName="Body";function v(m,y,b=new Date,D){let f=m.isValid()?m.toDate():b,C=y.isValid()?y.toDate():b;return D&&(f=(0,h.Q)(f,D),C=(0,h.Q)(C,D)),f>C?[C,f]:[f,C]}function g(m,y){return(0,s.useCallback)(b=>{if(!Array.isArray(b))return console.error("onCalendarChange: should be run in selectRange={true}");if(b[0]&&b[1]){const D=(0,o.b)(E(b[0]),{timeZone:y}),f=(0,o.b)(E(b[1]),{timeZone:y});m(D,f)}},[m,y])}function E(m){return[m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds()]}const x=m=>{const y=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,a.css)({color:m.colors.text.primary,backgroundColor:m.colors.background.primary,fontSize:m.typography.size.md,border:"1px solid transparent","&:hover, &:focus":{position:"relative"},"&:disabled":{color:m.colors.action.disabledText,cursor:"not-allowed"}}),body:(0,a.css)({zIndex:m.zIndex.modal,backgroundColor:m.colors.background.elevated,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:m.colors.text.primary,border:0,fontWeight:m.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:m.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},".react-calendar__tile--hover":{backgroundColor:m.colors.action.hover,borderRadius:0},".react-calendar__tile--hoverStart":{borderTopLeftRadius:m.shape.radius.pill,borderBottomLeftRadius:m.shape.radius.pill},".react-calendar__tile--hoverEnd":{borderTopRightRadius:m.shape.radius.pill,borderBottomRightRadius:m.shape.radius.pill},".react-calendar__tile:hover:not(.react-calendar__tile--hover):not(.react-calendar__tile--active):not(.react-calendar__tile--hasActive)":{backgroundColor:m.colors.action.hover,borderRadius:m.shape.radius.pill},[`${y}, .react-calendar__tile--rangeStart:not(.react-calendar__tile--hover)`]:{borderTopLeftRadius:m.shape.radius.pill,borderBottomLeftRadius:m.shape.radius.pill},[`${y}, .react-calendar__tile--rangeEnd:not(.react-calendar__tile--hover)`]:{borderTopRightRadius:m.shape.radius.pill,borderBottomRightRadius:m.shape.radius.pill},[`${y}, .react-calendar__tile--active, .react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart`]:{color:m.colors.primary.contrastText,fontWeight:m.typography.fontWeightMedium,background:m.colors.primary.main,border:"0px"}})}}},66650:(ne,j,e)=>{"use strict";e.d(j,{B5:()=>p,EJ:()=>v,WO:()=>c,Z8:()=>u,pl:()=>E});var n=e(84140),a=e(6773),s=e(64394),d=e(33553),o=e(739),l=e(53568);function i(x,m,y){let b=0,D=0,f=0,C=0;return x===3?(D=m.top,C=m.top+m.height):x===2?(b=m.left+m.width,f=m.left):x===1?(D=m.top+m.height,C=m.top):x===0&&(b=m.left,f=m.left+m.width),y.createLinearGradient(b,D,f,C)}function c(x,m){return(y,b)=>{const D=(0,l.Yc)(),f=i(y.scales.x.ori===o.Lt.Horizontal?3:2,y.bbox,D);return f.addColorStop(0,a.MV.alpha(x,m)),f.addColorStop(1,a.MV.alpha(x,0)),f}}function p(x,m,y){return(b,D)=>{const f=(0,l.Yc)(),C=i(b.scales.x.ori===o.Lt.Horizontal?3:2,b.bbox,f),P=(0,n.A)(x).spin(-25).darken(5),T=(0,n.A)(x).saturate(20).spin(20).brighten(10);return y.isDark?(C.addColorStop(0,T.lighten(10).setAlpha(m).toString()),C.addColorStop(1,P.darken(10).setAlpha(m).toString())):(C.addColorStop(0,T.lighten(10).setAlpha(m).toString()),C.addColorStop(1,P.setAlpha(m).toString())),C}}var h=(x=>(x[x.Right=0]="Right",x[x.Up=1]="Up",x[x.Left=2]="Left",x[x.Down=3]="Down",x))(h||{});function u(x,m,y,b=!1){let D=x.scales[m],f=null,C=null;for(let F=0;F<y.length;F++){let G=y[F][0];if((G<=D.min||f==null)&&(f=F),C=F,G>=D.max)break}if(f===C)return y[f][1];let P=y[f][0],T=y[C][0];P===-1/0&&(P=D.min),T===1/0&&(T=D.max);let M=Math.round(x.valToPos(P,m,!0)),I=Math.round(x.valToPos(T,m,!0)),B=M-I;if(B===0)return y[C][1];let U,W,V,z;x.scales.x.ori===o.Lt.Horizontal?(U=V=0,W=M,z=I):(W=z=0,U=M,V=I);let O=(0,l.Yc)().createLinearGradient(U,W,V,z),N;for(let F=f;F<=C;F++){let G=y[F],H=F===f?M:F===C?I:Math.round(x.valToPos(G[0],m,!0)),K=(M-H)/B;b&&F>f&&O.addColorStop(K,N),O.addColorStop(K,N=G[1])}return O}function r(x,m){let y=x.scales[m],b=1/0,D=-1/0;return x.series.forEach((f,C)=>{if(f.show&&f.scale===m)if(f.min==null){let P=x.data[C];for(let T=0;T<P.length;T++)P[T]!=null&&(b=Math.min(b,P[T]),D=Math.max(D,P[T]))}else b=Math.min(b,f.min),D=Math.max(D,f.max)}),D===b&&(b=y.min,D=y.max),[b,D]}function v(x,m,y,b,D,f){let C=y??D??null,P=b??f??null;if(C==null||P==null){let[T,M]=r(x,m);C=C??T??0,P=P??M??100}return[C,P]}function g(x){return x==="transparent"||x[0]==="#"&&x.slice(-2)==="00"}function E(x,m,y,b,D,f,C,P){if(!y)throw Error("Missing colorMode required for color scheme gradients");if(!b)throw Error("Missing thresholds required for color scheme gradients");return(T,M)=>{let I=T.series[M].scale,B="";if(y.id===s.Y.Thresholds)if(b.mode===d.O.Absolute){const U=b.steps.map(W=>[W.value,g(W.color)?"#0000":a.MV.alpha(m.visualization.getColorByName(W.color),x)]);B=u(T,I,U,!0)}else{const[U,W]=v(T,I,D,f,C,P),V=W-U,z=b.steps.map(R=>[U+V*(R.value/100),a.MV.alpha(m.visualization.getColorByName(R.color),x)]);B=u(T,I,z,!0)}else if(y.getColors){const U=y.getColors(m),[W,V]=v(T,I,D,f,C,P),z=V-W,R=U.map((O,N)=>[W+z*(N/(U.length-1)),a.MV.alpha(m.visualization.getColorByName(O),x)]);B=u(T,I,R,!1)}return B}}},66698:(ne,j,e)=>{"use strict";e.d(j,{w:()=>c});var n=e(74848),a=e(28105),s=e(92745),d=e(2863),o=e(66404),l=e(31286),i=e(67933);function c({query:p,datasource:h,VariableQueryEditor:u,onLegacyQueryChange:r,onQueryChange:v,timeRange:g}){let E;return typeof p=="string"?E=p||(h.variables?.getDefaultQuery?.()??""):E={...h.variables?.getDefaultQuery?.(),...p},u&&(0,i.VN)(u,h)?(0,n.jsxs)(l.a,{marginBottom:2,children:[(0,n.jsx)(o.E,{variant:"bodySmall",weight:"medium",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.query-editor.query",children:"Query"})}),(0,n.jsx)(l.a,{marginTop:.25,children:(0,n.jsx)(u,{datasource:h,query:E,templateSrv:(0,d.w)(),onChange:r},h.uid)})]}):u&&(0,i.CH)(u,h)?(0,n.jsx)(l.a,{marginBottom:2,children:(0,n.jsx)(l.a,{marginTop:.25,children:(0,n.jsx)(u,{datasource:h,query:E,onChange:v,onRunQuery:()=>{},data:{series:[],state:a.Gu.Done,timeRange:g},range:g,onBlur:()=>{},history:[]},h.uid)})}):null}},66769:(ne,j,e)=>{"use strict";e.d(j,{ZN:()=>I,ys:()=>y,HG:()=>m,Xh:()=>x,Yy:()=>D,BB:()=>T,To:()=>P,hn:()=>M,N3:()=>B,QX:()=>C,Kb:()=>b});var n=e(2543),a=e(87056),s=e(43173),d=e(77731),o=e(18795),l=e(7817);function i(W,V){return W===V?V:Array.isArray(W)&&Array.isArray(V)?h(W,V):c(W)&&c(V)?p(W,V):V}function c(W){return typeof W=="object"&&!Array.isArray(W)&&W!==null}function p(W,V){const z=Object.keys(W),R={};for(const O of z)V.hasOwnProperty(O)&&(Array.isArray(W[O])&&Array.isArray(V[O])||typeof W[O]=="object"&&typeof V[O]=="object"?R[O]=i(W[O],V[O]):R[O]=V[O]);return R}function h(W,V){const z=new Array(W.length).fill(void 0),R=new Set([...Array(W.length).keys()]),O=new Set([...Array(V.length).keys()]);for(let N=0;N<W.length&&O.size!==0;N++){let F=W[N];for(let G=0;G<V.length;G++){if(!O.has(G))continue;let H=V[G];H=i(F,H),JSON.stringify(F)===JSON.stringify(H)&&(R.delete(N),O.delete(G),z[N]=H)}}return u(W,V,z,R,O),z.filter(N=>N!==void 0)}function u(W,V,z,R,O){let N={};O.forEach(G=>{let H=V[G];if(typeof H!="object"||Array.isArray(H)){z.push(H),O.delete(G);return}R.forEach(K=>{let w=W[K];if(typeof w!="object"||Array.isArray(w)){R.delete(K);return}let Q=0;for(const k in w){let te=w[k];if(!H.hasOwnProperty(k))continue;let q=H[k];typeof te!="string"&&typeof te!="number"||typeof te!=typeof q||te===q&&(k==="id"&&(Q+=1e3),Q++)}Q!==0&&(N[Q]===void 0&&(N[Q]=[]),N[Q].push([K,G]))})});const F=Object.keys(N).map(Number);F.sort((G,H)=>H-G);for(const G of F){let H=N[G];for(const K of H){const[w,Q]=K;R.has(w)&&O.has(Q)&&(z[w]=V[Q],R.delete(w),O.delete(Q))}}for(const G of O)z.push(V[G])}function r(W){const V=W.split(`
`);let z=W[0].startsWith("Index")?4:3,R=V.slice(0,z);const O=/("title"|Title|\{|\}|\[|\])/i;for(let N=z;N<V.length;N++){let F=V[N];(O.test(F)||F.startsWith("+")||F.startsWith("-"))&&R.push(F)}return R.join(`
`)+`
`}function v(W){if(W===null||W==="")return null;if(Array.isArray(W)){const z=W.map(R=>v(R)).filter(R=>R!==null);return z.length>0?z:null}if(typeof W!="object")return W;const V={};for(const z in W){const R=v(W[z]);if(R!==null){if(Array.isArray(R)&&R.length===0||typeof R=="object"&&Object.keys(R).length===0)continue;V[z]=R}}return Object.keys(V).length>0?V:null}function g(W){return JSON.parse(JSON.stringify(W,null,2))}function E(W){let V=g(W.getOriginalDashboard()),z=g(new l.G(V).getSaveModelClone()),R=g(W.getSaveModelClone());z=v(i(V,z)),R=v(i(z,R)),V=v(V);let O=(0,o.ss)("Before migration changes","After migration changes",JSON.stringify(V,null,2),JSON.stringify(z,null,2),"","",{context:20}),N=(0,o.ss)("Before user changes","After user changes",JSON.stringify(z,null,2),JSON.stringify(R,null,2),"","",{context:20});return O=r(O),N=r(N),{migrationDiff:O,userDiff:N}}var x=(W=>(W.system="system",W.user="user",W))(x||{}),m=(W=>(W.Shorter="Even shorter",W.MoreDescriptive="More descriptive",W.Regenerate="Please, regenerate",W))(m||{});const y=a.Kx.LARGE,b=W=>W.replace(/^"|"$/g,"");function D(W){const{migrationDiff:V,userDiff:z}=E(W);return{userChanges:z,migrationChanges:V}}let f;async function C(){return s.$.apps["grafana-llm-app"]?f||(f=new Promise(W=>{a.vK().then(V=>{V.ok||(f=void 0),W(V.ok)})}),f):!1}const P=(W,V)=>[{role:"system",content:`Your previous response was: ${W}. The user has provided the following feedback: ${V}. Re-generate your response according to the provided feedback.`}];function T(W){const V=B(W);let z;if(V.length<=10)z=`The panels in the dashboard are:
${V.join(`
`)}`;else{const R=W.panels.filter(F=>F.description),O=W.panels.filter(F=>!F.description);let N;R.length>=10?N=R.slice(10).map(U).join(`
`):(N=R.map(U).join(`
`),N+=`
`,N+=O.slice(10-R.length).map(U).join("n")),z=`There are ${V.length} panels.
Due to space constraints, only the information for ten of them is presented.
These ten are not necessarily the first ten, but prioritized to those with descriptions.
The panels in the dashboard are:
${N}`}return z}function M(W){const V=["datasource","title","description","targets","type"],z={...(0,n.pick)(W,V),options:(0,n.pick)(W.options,["content"])};return JSON.stringify(z,null,2)}const I="To generate this content your dashboard must contain at least one panel with a valid title or description.";function B(W){return W.panels.filter(z=>z.title&&z.title!==d.LH||z.description&&z.description.length>0).map(U)}const U=(W,V)=>`- Panel ${V}
- Title: ${W.title}${W.description?`
- Description: ${W.description}`:""}`},66773:(ne,j,e)=>{"use strict";e.d(j,{s:()=>T});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(92745),l=e(63142),i=e(45861),c=e(9514),p=e(94018),h=e(72636),u=e(77824),r=e(24619);const v=({className:B,onStateFilterChange:U,stateFilter:W,filterType:V,itemPerStateStats:z})=>{const R=(0,l.of)(g),O=K=>function(){return z&&z[K]?(0,n.jsx)(p.v,{name:z[K].toFixed(0),colorIndex:9,className:R.tag}):null},N=Object.values(r.Gi).map(K=>({label:K,value:K,component:O(K)})),G=[r.cF.Firing,r.cF.Pending].map(K=>({label:(0,s.capitalize)(K),value:K,component:O(K)})),H=V==="grafana"?N:G;return(0,n.jsxs)("div",{className:B,"data-testid":"alert-instance-state-filter",children:[(0,n.jsx)(h.J,{children:(0,n.jsx)(o.x6,{i18nKey:"alerting.alert-instance-state-filter.state",children:"State"})}),(0,n.jsx)(u.z,{options:H,value:W,onChange:U,onClick:K=>{K===W&&U(void 0)}})]})};function g(B){return{tag:(0,a.css)({fontSize:"11px",fontWeight:"normal",padding:B.spacing(.25,.5),verticalAlign:"middle",marginLeft:B.spacing(.5)})}}var E=e(24610),x=e(77256),m=e(21834),y=e(52161),b=e(63895),D=e(29609),f=e(75983),C=e(46672);function P({stats:B,onClick:U,href:W}){const V=(0,l.of)(I);return(0,n.jsxs)("div",{className:V.footerRow,children:[(0,n.jsx)("div",{children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.rule-details-matching-instances.showing-count",values:{visibleItems:B.visibleItemsCount,totalItems:B.totalItemsCount},children:["Showing ","{{visibleItems}}"," out of ","{{totalItems}}"," instances"]})}),(0,n.jsx)(i.z9,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:U,href:W,children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.rule-details-matching-instances.button-show-all",count:B.totalItemsCount,children:["Show all ","{{totalItems}}"," alert instances"]})})]})}function T(B){const{rule:U,itemsDisplayLimit:W=Number.POSITIVE_INFINITY,pagination:V,enableFiltering:z=!1}=B,{promRule:R,namespace:O,instanceTotals:N}=U,[F,G]=(0,d.useState)(),[H,K]=(0,d.useState)(),[w]=(0,d.useState)(Math.floor(Math.random()*100)),Q=`queryString-${w}`,k=(0,l.of)(I),te=(0,y.z2)(O.rulesSource)?y.hY:"prometheus",q=(0,d.useMemo)(()=>D.R$.alertingRule(R)&&R.alerts?.length?M(F,H,(0,x.Cp)(m.xB.Importance,R.alerts)):[],[R,H,F]);if(!D.R$.alertingRule(R))return null;const se=q.slice(0,W),re=(0,s.countBy)(R.alerts,L=>(0,r.lh)(L.state)),Y=(0,s.sum)([N.alerting,N.inactive,N.pending,N.recovering,N.nodata]),X=Y-se.length,J={totalItemsCount:Y,visibleItemsCount:se.length},_=(0,x.w$)(O.rulesSource,B.rule,window.location.pathname+window.location.search),ee=(0,C.kc)(N),ae=()=>K(void 0),le=X?(0,n.jsx)(P,{stats:J,onClick:z?ae:void 0,href:z?void 0:_}):void 0;return(0,n.jsxs)(n.Fragment,{children:[z&&(0,n.jsx)("div",{className:(0,a.cx)(k.flexRow,k.spaceBetween),children:(0,n.jsxs)("div",{className:k.flexRow,children:[(0,n.jsx)(c.X,{defaultQueryString:F,onFilterChange:L=>G(L)},Q),(0,n.jsx)(v,{filterType:te,stateFilter:H,onStateFilterChange:K,itemPerStateStats:re})]})}),!z&&(0,n.jsx)("div",{className:k.stats,children:ee}),(0,n.jsx)(f.D,{rule:U,instances:se,pagination:V,footerRow:le})]})}function M(B,U,W){let V=[...W];if(B){const z=B?(0,b.Zc)(B):[];V=V.filter(({labels:R})=>(0,E.Av)(R,z))}return U&&(V=V.filter(z=>(0,r.lh)(z.state)===U)),V}const I=B=>({flexRow:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"flex-end",width:"100%",flexWrap:"wrap",marginBottom:B.spacing(1),gap:B.spacing(1)}),spaceBetween:(0,a.css)({justifyContent:"space-between"}),footerRow:(0,a.css)({display:"flex",flexDirection:"column",gap:B.spacing(1),justifyContent:"space-between",alignItems:"center",width:"100%"}),instancesContainer:(0,a.css)({marginBottom:B.spacing(2)}),stats:(0,a.css)({display:"flex",gap:B.spacing(1),padding:B.spacing(1,0)})})},66808:(ne,j,e)=>{"use strict";e.d(j,{A:()=>R});var n=e(74848),a=e(96540),s=e(75505),d=e(28105),o=e(62392),l=e(51898),i=e(92745),c=e(35137),p=e(68079),h=e(45861),u=e(34999),r=e(22429),v=e(75421),g=e(82612),E=e(87033),x=e(90696),m=e(46933),y=e(1906),b=e(78282);function D(O,N){let F=O.target;return O.query&&O.query.spec&&(F=O.query.spec),{...{...N.annotations?.getDefaultQuery?.(),...F??{refId:"Anno"}},datasource:O.datasource}}async function f(O,N){const F={name:O.name,enable:O.enable,hide:O.hide,iconColor:O.iconColor,mappings:O.mappings,filter:O.filter,type:O.type,builtIn:O.builtIn,datasource:N.datasource};try{const G=await(0,b.l)().get(N.datasource);let H=N;if((0,m.Ee)(G)&&(0,m.FL)(G)){const q=await G.exportToAbstractQueries([N]),se=await G.importFromAbstractQueries(q);if(se.length>0){const re={...G.getDefaultQuery?.(y.Jk.Dashboard),datasource:N.datasource,refId:"Anno"};H={...N,...re,...se[0],refId:"Anno"}}}else H={...N,refId:"Anno"};const{datasource:K,...w}=H,Q={...F,target:w},k={...x.CU,...G.annotations};let te;return k.prepareAnnotation?te=k.prepareAnnotation(Q):te=Q,O.query?.spec&&(te.query={...O.query,spec:{...te.target}}),te}catch(G){console.warn("Could not prepare annotation with new datasource:",G);const{datasource:H,...K}=N;return{...F,target:K}}}var C=e(41654),P=e(30419);function T({children:O,annotation:N,datasource:F,onQueryReplace:G}){const{renderSavedQueryButtons:H}=(0,P.Y)(),K=H(D(N,F),y.Jk.Dashboard,void 0,G);return(0,n.jsxs)(C.B,{direction:"column",gap:1,children:[(0,n.jsx)(C.B,{justifyContent:"flex-end",children:K}),O]})}var M=e(16515),I=e(88907),B=e(55386),U=e(45967),W=e(30703),V=e(18857);class z extends a.PureComponent{constructor(N){super(N),this.updateFields=()=>{const F=this.props.response?.panelData,G=F?.series?.[0]??F?.annotations?.[0];if(G&&G.fields){const H=G.fields.map(K=>{const w=(0,M.Ct)(K,G);let Q="";for(let k=0;k<G.length;k++){if(k>0&&(Q+=", "),k>2){Q+="...";break}Q+=K.values[k]}return Q.length>50&&(Q=Q.substring(0,50)+"..."),{label:`${w} (${K.type})`,value:w,description:Q}});this.setState({fieldNames:H})}},this.onFieldSourceChange=(F,G)=>{const H=this.props.mappings||{},K=H[F]||{};this.props.change({...H,[F]:{...K,source:G.value||I.V.Field}})},this.onFieldNameChange=(F,G)=>{const H=this.props.mappings||{};if(!G){const w={...this.props.mappings};delete w[F],this.props.change(w);return}const K=H[F]||{};this.props.change({...H,[F]:{...K,value:G.value,source:I.V.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(N){N.response!==this.props.response&&this.updateFields()}renderRow(N,F,G){const{fieldNames:H}=this.state;let K=[...H];const w=F.value;let Q=H.find(te=>w===te.value);w&&!Q&&K.push({label:w,value:w});let k=G?G[N.key]:"";if(k&&N.key.startsWith("time")){const te=(0,B.j_)("dateTimeAsIso");k=(0,B.cN)(te(k))}return k==null&&(k=""),(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[N.label||N.key," ",N.help&&(0,n.jsx)(U.m,{content:N.help,children:(0,n.jsx)(W.I,{name:"info-circle"})})]}),(0,n.jsx)("td",{children:(0,n.jsx)(V.l6,{value:Q,options:K,placeholder:N.placeholder||N.key,onChange:te=>{this.onFieldNameChange(N.key,te)},noOptionsMessage:(0,i.t)("annotations.annotation-field-mapper.noOptionsMessage-unknown-field-names","Unknown field names"),allowCustomValue:!0,isClearable:!0})}),(0,n.jsx)("td",{children:`${k}`})]},N.key)}render(){const N=this.props.response?.events?.[0],F=this.props.mappings||{};return(0,n.jsxs)("table",{className:"filter-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.annotation-field-mapper.annotation",children:"Annotation"})}),(0,n.jsx)("th",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.annotation-field-mapper.from",children:"From"})}),(0,n.jsx)("th",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.annotation-field-mapper.first-value",children:"First value"})})]})}),(0,n.jsx)("tbody",{children:(0,x.g6)().map(G=>this.renderRow(G,F[G.key]||{},N))})]})}}class R extends a.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:N,annotation:F}=this.props;if((0,x.E7)(N))return;const G=(0,r.UA)().getCurrent();if(!G)return;this.setState({running:!0});const H=await(0,s.s)((0,E.b)({range:(0,v.jG)().timeRange(),panel:new g.a9({}),dashboard:G},N,F));this.setState({running:!1,response:H})},this.onQueryChange=N=>{this.props.annotation.query&&this.props.annotation.query.spec&&(N={...this.props.annotation.query.spec,...N}),this.props.onChange({...this.props.annotation,target:N,...this.props.annotation.query&&{query:{kind:this.props.annotation.query.kind,spec:{...N}}},...this.props.annotation.legacyOptions?{legacyOptions:this.props.annotation.legacyOptions}:{}})},this.onMappingChange=N=>{this.props.onChange({...this.props.annotation,mappings:N})},this.onAnnotationChange=N=>{this.props.onChange({...N,...this.props.annotation.legacyOptions?{legacyOptions:this.props.annotation.legacyOptions}:{}})},this.onQueryReplace=async N=>{const{annotation:F,onChange:G}=this.props;try{const H=await f(F,N);this.setState({skipNextVerification:!0}),G(H)}catch(H){console.error("Failed to replace annotation query:",H)}}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(N){this.props.annotation!==N.annotation&&!(0,x.E7)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:N,annotation:F}=this.props;if(this.state.skipNextVerification){this.setState({skipNextVerification:!1}),this.onRunQuery();return}const H={...x.CU,...N.annotations}.prepareAnnotation(F);H!==F?this.props.onChange(H):this.onRunQuery()}getStatusSeverity(N){const{events:F,panelData:G}=N;return G?.errors||G?.error?"error":F?.length?"success":"warning"}renderStatusText(N,F){const{events:G,panelData:H}=N;if(F||N?.panelData?.state===d.Gu.Loading||!N)return(0,n.jsx)("p",{children:"loading..."});if(H?.errors)return(0,n.jsx)(n.Fragment,{children:H.errors.map((k,te)=>(0,n.jsx)("p",{children:k.message},te))});if(H?.error)return(0,n.jsx)("p",{children:H.error.message??"There was an error fetching data"});if(!G?.length)return(0,n.jsx)("p",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.standard-annotation-query-editor.no-events-found",children:"No events found"})});const K=H?.series?.[0]??H?.annotations?.[0],w=G.length,Q=K?.fields.length;return(0,n.jsx)("p",{children:(0,n.jsxs)(i.x6,{i18nKey:"annotations.standard-annotation-query-editor.events-found",children:[{numEvents:w}," events (from ",{numFields:Q}," fields)"]})})}renderStatus(){const{response:N,running:F}=this.state;return N?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.$,{v:2}),(0,n.jsx)("div",{children:F?(0,n.jsx)(p.y,{}):(0,n.jsx)(h.$n,{"data-testid":l.Tp.components.Annotations.editor.testButton,variant:"secondary",size:"xs",onClick:this.onRunQuery,children:(0,n.jsx)(i.x6,{i18nKey:"annotations.standard-annotation-query-editor.test-annotation-query",children:"Test annotation query"})})}),(0,n.jsx)(c.$,{v:2,layout:"block"}),(0,n.jsx)(u.F,{"data-testid":l.Tp.components.Annotations.editor.resultContainer,severity:this.getStatusSeverity(N),title:(0,i.t)("annotations.standard-annotation-query-editor.title-query-result","Query result"),children:this.renderStatusText(N,F)})]}):null}render(){const{datasource:N,annotation:F,datasourceInstanceSettings:G}=this.props,{response:H}=this.state;let K=N.annotations?.QueryEditor||N.components?.QueryEditor;if(!K)return(0,n.jsx)("div",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.standard-annotation-query-editor.no-query-editor",children:"Annotations are not supported. This datasource needs to export a QueryEditor"})});let w=F.target;F.query&&F.query.spec&&(w={...F.query.spec});let Q={...N.annotations?.getDefaultQuery?.(),...w??{refId:"Anno"}},k=F;return F.query&&F.legacyOptions&&(k={...F.legacyOptions,...F}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.p,{instanceSettings:G,children:(0,n.jsx)(T,{annotation:F,datasource:N,onQueryReplace:this.onQueryReplace,children:(0,n.jsx)(K,{query:Q,datasource:N,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:H?.panelData,range:(0,v.jG)().timeRange(),annotation:k,onAnnotationChange:this.onAnnotationChange},N?.name)})}),(0,x.JX)(N)&&(0,n.jsxs)(n.Fragment,{children:[this.renderStatus(),(0,n.jsx)(z,{response:H,mappings:F.mappings,change:this.onMappingChange})]})]})}}},67020:(ne,j,e)=>{"use strict";e.d(j,{A:()=>c});var n=e(2543),a=e.n(n),s=e(68143),d=e(29043),o=e(15130);class l{constructor(){}addDashboardImpression(h){const u=this.impressionKey();let r=[];d.A.exists(u)&&(r=JSON.parse(d.A.get(u)),(0,n.isArray)(r)||(r=[])),r=r.filter(v=>h!==v),r.unshift(h),r.length>50&&r.pop(),d.A.set(u,JSON.stringify(r))}async convertToUIDs(){let h=this.getImpressions();const u=(0,n.filter)(h,v=>(0,n.isNumber)(v));if(!u.length)return;const r=await(0,s.AI)().get(`/api/dashboards/ids/${u.join(",")}`);d.A.set(this.impressionKey(),JSON.stringify([...(0,n.filter)(h,v=>(0,n.isString)(v)),...r]))}getImpressions(){const h=d.A.get(this.impressionKey())||"[]";return JSON.parse(h)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,n.filter)(this.getImpressions(),u=>(0,n.isString)(u))}impressionKey(){return"dashboard_impressions-"+o.TP.user.orgId}}const c=new l},67155:(ne,j,e)=>{"use strict";e.d(j,{O:()=>g,v:()=>x});var n=e(74848),a=e(96540),s=e(75505),d=e(739),o=e(41119),l=e(60519),i=e(2197),c=e(39443),p=e(95004),h=e(43173),u=e(24343),r=e(36100),v=e(78529);function g(D){const{timeZone:f,splitOpen:C,range:P,logsSortOrder:T,width:M,dataFrame:I,columnsWithMeta:B,logsFrame:U}=D,[W,V]=(0,a.useState)(void 0),z=U?.timeField.index,R=(0,a.useCallback)(N=>{if(!N.length)return N;const F=(0,o.ES)(N,z,T===d.uH.Descending),[G]=(0,l.we)({data:[F],timeZone:f,theme:h.$.theme2,replaceVariables:H=>H,fieldConfig:{defaults:{custom:{}},overrides:[]}});for(const H of G.fields)H.getLinks=K=>(0,v.QL)({field:H,rowIndex:K.valueRowIndex,splitOpenFn:C,range:P,dataFrame:F}),H.config={...H.config,custom:{inspect:!0,filterable:!0,width:b(H),...H.config.custom},filterable:E(H,U?.bodyField.name??"",U?.timeField.name??"")},H.type=H.type===p.PU.string?(0,o.dF)(H)??p.PU.string:H.type;return G},[T,f,C,P,U?.bodyField.name,U?.timeField.name,z]);if((0,a.useEffect)(()=>{(async()=>{if(!U?.timeField.name||!U?.bodyField.name){V(void 0);return}const F=x(I);let G=m(B);const H=y(G);if(H?F.push(H):F.push({id:"organize",options:{indexByName:{[U.bodyField.name]:0,[U.timeField.name]:1},includeByName:{[U.bodyField.name]:!0,[U.timeField.name]:!0}}}),F.length>0){const K=await(0,s.s)((0,i.m)(F,[I])),w=R(K[0]);V(w)}else V(R(I))})()},[B,I,T,R,U?.bodyField.name,U?.timeField.name]),!W)return null;const O=N=>{const{value:F,key:G,operator:H}=N,{onClickFilterLabel:K,onClickFilterOutLabel:w}=D;!K||!w||(H===r.mc&&K(G,F,I),H===r.Zi&&w(G,F,I))};return(0,n.jsx)(u.X,{data:W,width:M,onCellFilterAdded:D.onClickFilterLabel&&D.onClickFilterOutLabel?O:void 0,height:D.height,footerOptions:{show:!0,reducer:["count"],countRows:!0},initialSortBy:[{displayName:U?.timeField.name||"",desc:T===d.uH.Descending}]})}const E=(D,f,C)=>!(!f||!C||f===D.name||C===D.name||D.config.links?.length);function x(D){return D.fields.filter(f=>{const C=f.typeInfo?.frame==="json.RawMessage"&&f.name==="labels"&&D?.meta?.type!==c.m.LogLines,P=f.name==="labels"&&f.type===p.PU.other&&D?.meta?.type===c.m.LogLines;return C||P}).flatMap(f=>[{id:"extractFields",options:{format:"json",keepTime:!1,replace:!1,source:f.name}}])}function m(D){let f={};return Object.keys(D).filter(C=>D[C].active).forEach(C=>{const P=D[C].index;P!==void 0&&(f[C]=P)}),f}function y(D){let f={};for(const C in D)f[C]=!0;return Object.keys(D).length>0?{id:"organize",options:{indexByName:D,includeByName:f}}:null}function b(D){if(D.type===p.PU.time)return 200}},67350:(ne,j,e)=>{"use strict";e.d(j,{DG:()=>C,Gl:()=>x,IC:()=>I,Kq:()=>D,Ku:()=>f,V6:()=>B,Xy:()=>M,kB:()=>m});var n=e(43173),a=e(44248),s=e(18615),d=e(6048),o=e(36605),l=e(7094),i=e(32540),c=e(37040),p=e(66251),h=e(23244),u=e(35718),r=e(92119),v=e(62265),g=e(3281),E=e(39508);function x(U,W){const V=[];V.push(new i.$({rawLinks:U.spec.links,menu:new i.m({$behaviors:[c.oV]})})),V.push(new p.W);const z=U.spec.data.spec.queryOptions,R=(z.timeFrom||z.timeShift)&&!z.hideTimeOverride,O={key:(0,r.XA)(W??U.spec.id),title:U.spec.title?.substring(0,5e3),description:U.spec.description,pluginId:U.spec.vizConfig.group,options:U.spec.vizConfig.spec.options,fieldConfig:(0,g.So)(U.spec.vizConfig.spec.fieldConfig),pluginVersion:U.spec.vizConfig.version,displayMode:U.spec.transparent?"transparent":"default",hoverHeader:!U.spec.title&&!R,hoverHeaderOffset:0,seriesLimit:n.$.panelSeriesLimit,$data:y(U),titleItems:V,$behaviors:[],extendPanelContext:u.C};return n.$.publicDashboardAccessToken||(O.menu=new a.Lw({$behaviors:[c._i]})),(z.timeFrom||z.timeShift)&&(O.$timeRange=new h.v({timeFrom:z.timeFrom,timeShift:z.timeShift,hideTimeOverride:z.hideTimeOverride})),new a.Eb(O)}function m(U,W){const V=[];V.push(new i.$({rawLinks:[],menu:new i.m({$behaviors:[c.oV]})})),V.push(new p.W);const z={key:(0,r.XA)(W??U.spec.id),titleItems:V,seriesLimit:n.$.panelSeriesLimit,$behaviors:[new l.u({uid:U.spec.libraryPanel.uid,name:U.spec.libraryPanel.name})],extendPanelContext:u.C,pluginId:l.u.LOADING_VIZ_PANEL_PLUGIN_ID,title:U.spec.title,options:{},fieldConfig:{defaults:{},overrides:[]}};return n.$.publicDashboardAccessToken||(z.menu=new a.Lw({$behaviors:[c._i]})),new a.Eb(z)}function y(U){const W=U.spec,V=W.data?.spec.queries??[];if(!V?.length||n.$.panels[W.vizConfig.kind]?.skipDataQuery)return;let z;const R=b(U);return z=new a.dt({datasource:R,queries:V.map(P),maxDataPoints:W.data.spec.queryOptions.maxDataPoints??void 0,maxDataPointsFromWidth:!0,cacheTimeout:W.data.spec.queryOptions.cacheTimeout,queryCachingTTL:W.data.spec.queryOptions.queryCachingTTL,minInterval:W.data.spec.queryOptions.interval??void 0,dataLayerFilter:{panelId:W.id},$behaviors:[new o.L({})]}),new a.Es({$data:z,transformations:W.data.spec.transformations.map(O=>({...O.spec,topic:(0,E.MM)(O.spec.topic)}))})}function b(U){if(!U.spec.data?.spec.queries?.length)return;let W,V=!1;return U.spec.data.spec.queries.forEach(z=>{W?(W.uid!==z.spec.query.datasource?.name||W.type!==z.spec.query.group)&&(V=!0):z.spec.query.datasource?.name?W={uid:z.spec.query.datasource?.name,type:z.spec.query.group}:W=f(z.spec.query)}),V?{type:"mixed",uid:s.uv}:W}function D(U){const W={uid:U.spec.query.datasource?.name,type:U.spec.query.group};return C(W,U.spec.query.group)}function f(U){const W={uid:U.datasource?.name,type:U.group};return C(W,U.group)}function C(U,W){if(U?.uid)return U;const V=n.$.defaultDatasource,z=n.$.datasources;if(z&&z[V]&&z[V].meta.id===W)return{uid:z[V].uid||z[V].name,type:z[V].meta.id};const R=z&&Object.values(z).find(O=>O.meta.id===W);if(R)return{uid:R.uid,type:R.meta.id};if(z&&z[V])return console.warn(`Could not find datasource for query kind ${W}, defaulting to ${z[V].meta.id}`),{uid:z[V].uid||z[V].name,type:z[V].meta.id};if(z&&!z[V])throw new Error(`Default datasource ${V} not found in datasource list`);return{uid:z[V].uid||z[V].name,type:z[V].meta.id}}function P(U){return{refId:U.spec.refId,datasource:f(U.spec.query),hide:U.spec.hidden,...U.spec.query.spec}}function T(U){return U.serialize()}function M(U){return U.spec.conditionalRendering?d.M.deserialize(U.spec.conditionalRendering):d.M.createEmpty()}function I(U,W){const V=U.getVizPanels(),z=W.serializer.getDSReferencesMapping(),R=V.map(O=>(0,v.GB)(O,z));return(0,v.Cy)(R,W)}function B(U,W){return(0,v.Cy)([(0,v.GB)(U.state.body,W.serializer.getDSReferencesMapping())],W)}},67458:(ne,j,e)=>{"use strict";e.d(j,{G:()=>l,P:()=>i});var n=e(60023),a=e(33836),s=e(63704);let d=!1;const o={pedantic:!1,gfm:!0,breaks:!1};function l(c,p){d||(n.xI.use((0,a.z)()),n.xI.setOptions({...o}),d=!0);let h;p?.breaks&&(h={...o,breaks:!0});const u=(0,n.xI)(c||"",h);if(typeof u!="string")throw new Error("Failed to process markdown synchronously.");return p?.noSanitize?u:(0,s.G$)(u)}function i(c,p){d||(n.xI.use((0,a.z)()),n.xI.setOptions({...o}),d=!0);const h=(0,n.xI)(c||"");if(typeof h!="string")throw new Error("Failed to process markdown synchronously.");return p?.noSanitize?h:(0,s.G$)(h)}},67490:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{AddToDashboardForm:()=>I,default:()=>U});var n=e(74848),a=e(2543),s=e(96540),d=e(49785),o=e(92745),l=e(27489),i=e(37386),c=e(77824),p=e(34999),h=e(22787),u=e(45861),r=e(95506),v=e(73427),g=e(11257),E=e(92138),x=e(43173),m=e(36490),y=e(29043),b=e(4604),D=e(6262),f=(W=>(W.UNKNOWN="unknown-error",W.NAVIGATION="navigation-error",W))(f||{}),C=(W=>(W.FETCH_DASHBOARD="fetch-dashboard",W.SET_DASHBOARD_LS="set-dashboard-ls-error",W))(C||{});function P({panel:W,dashboardUid:V,openInNewTab:z,timeRange:R,options:O}){let N={meta:{},dashboard:{title:"",uid:"",panels:[W],schemaVersion:b.O2}};if(R){const H=R.raw;N.dashboard.time={from:typeof H.from=="string"?H.from:H.from.toISOString(),to:typeof H.to=="string"?H.to:H.to.toISOString()}}try{y.A.setObject(D.us,N)}catch{return{error:"set-dashboard-ls-error",message:(0,o.t)("dashboard-scene.add-to-dashboard.message.could-panel-dashboard-please-again","Could not add panel to dashboard. Please try again.")}}const F=T(V);if(z)return!e.g.open(x.$.appUrl+F,"_blank")?(y.A.delete(D.us),{error:"navigation-error",message:(0,o.t)("dashboard-scene.add-to-dashboard.message.could-navigate-selected-dashboard-please-again","Could not navigate to the selected dashboard. Please try again.")}):void 0;let G=E.I.stripBaseFromUrl(F);O?.useAbsolutePath&&(G="/"+G),m.Ny.push(G)}function T(W){return W?`d/${W}`:"dashboard/new"}var M=(W=>(W.NewDashboard="new-dashboard",W.ExistingDashboard="existing-dashboard",W))(M||{});function I({onClose:W,buildPanel:V,timeRange:z,options:R,children:O}){const[N,F]=(0,s.useState)(),{handleSubmit:G,control:H,formState:{errors:K},watch:w}=(0,d.mN)({defaultValues:{saveTarget:"new-dashboard"}}),Q=v.TP.hasPermission(g.w.DashboardsCreate),k=v.TP.hasPermission(g.w.DashboardsWrite),te=[];Q&&te.push({label:(0,o.t)("dashboard-scene.add-to-dashboard-form.label.new-dashboard","New dashboard"),value:"new-dashboard"}),k&&te.push({label:(0,o.t)("dashboard-scene.add-to-dashboard-form.label.existing-dashboard","Existing dashboard"),value:"existing-dashboard"});const q=te.length>1?w("saveTarget"):te[0].value,se=(re,Y)=>{F(void 0);const X=Y.saveTarget==="existing-dashboard"?Y.dashboardUid:void 0,J=V(R);(0,l.rR)("e_2_d_submit",{newTab:re,saveTarget:Y.saveTarget,queries:J.targets});const _=P({dashboardUid:X,panel:J,openInNewTab:re,timeRange:z,options:R});if(_){F(_);return}W()};return(0,s.useEffect)(()=>{(0,l.rR)("e_2_d_open")},[]),(0,n.jsxs)("form",{children:[O,te.length>1&&(0,n.jsx)(d.xI,{control:H,render:({field:{ref:re,...Y}})=>(0,n.jsx)(i.D,{label:(0,o.t)("dashboard-scene.add-to-dashboard-form.label-target-dashboard","Target dashboard"),description:(0,o.t)("dashboard-scene.add-to-dashboard-form.description-choose-where-to-add-the-panel","Choose where to add the panel."),children:(0,n.jsx)(c.z,{options:te,...Y,id:"e2d-save-target"})}),name:"saveTarget"}),q==="existing-dashboard"&&(0,n.jsx)(d.xI,{render:({field:{ref:re,value:Y,onChange:X,...J}})=>(0,n.jsx)(i.D,{label:(0,o.t)("dashboard-scene.add-to-dashboard-form.label-dashboard","Dashboard"),description:(0,o.t)("dashboard-scene.add-to-dashboard-form.description-select-which-dashboard-panel-created","Select in which dashboard the panel will be created."),error:K.dashboardUid?.message,invalid:!!K.dashboardUid,children:(0,n.jsx)(r.b,{...J,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:_=>X(_?.uid)})}),control:H,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:(0,o.t)("dashboard-scene.add-to-dashboard-form.message.this-field-is-required","This field is required.")}}}),N&&(0,n.jsx)(p.F,{severity:"error",title:(0,o.t)("dashboard-scene.add-to-dashboard-form.title-error-adding-the-panel","Error adding the panel"),children:N.message}),(0,n.jsxs)(h.a.ButtonRow,{children:[(0,n.jsx)(u.$n,{type:"reset",onClick:W,fill:"outline",variant:"secondary",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.add-to-dashboard-form.cancel",children:"Cancel"})}),(0,n.jsx)(u.$n,{type:"submit",variant:"secondary",onClick:G((0,a.partial)(se,!0)),icon:"external-link-alt",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.add-to-dashboard-form.open-in-new-tab",children:"Open in new tab"})}),(0,n.jsx)(u.$n,{type:"submit",variant:"primary",onClick:G((0,a.partial)(se,!1)),icon:"apps",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.add-to-dashboard-form.open-dashboard",children:"Open dashboard"})})]})]})}function B(W){}const U=I},67497:(ne,j,e)=>{"use strict";e.d(j,{B9:()=>l,J$:()=>d,KZ:()=>o,MK:()=>s,Pf:()=>a});var n=e(27489);const a=(c,p)=>{(0,n.rR)(`${c}_viewed`,i(p))},s=(c,p)=>{(0,n.rR)(`${c}_result_clicked`,i(p))},d=(c,p)=>{(0,n.rR)(`${c}_query_submitted`,i(p))},o=(c,{error:p,...h})=>{(0,n.rR)(`${c}_query_failed`,{...i(h),error:p})},l=(c,p,h)=>{(0,n.rR)(`grafana_panel_inspect_${c}_${p}_clicked`,h)},i=c=>({layout:c.layout,starredFilter:c.starred??!1,sort:c.sortValue??"",tagCount:c.tagCount??0,queryLength:c.query?.length??0,includePanels:c.includePanels??!1,deleted:c.deleted??!1})},67511:(ne,j,e)=>{"use strict";e.d(j,{d:()=>s});var n=e(27629);const s=(0,n.$)("localeFormatPreference")?"YYYY-MM-DD HH:mm:ss":void 0},67522:(ne,j,e)=>{"use strict";e.d(j,{NR:()=>H});var n=e(39884),a=e(74848),s=e(22803),d=e(96540),o=e(42941),l=e(49185),i=e(28105),c=e(51898),p=e(92745),h=e(63142),u=e(35484);function r({children:K,delay:w}){const[Q,k]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{window.setTimeout(()=>{k(!0)},w)},[K,w]),(0,a.jsx)(a.Fragment,{children:Q?K:null})}var v=e(27629),g=e(36324),E=e(56887),x=e(30703),m=e(47327),y=e(66404),b=e(45967),D=e(88559),f=e(7895);function C({menu:K,title:w,placement:Q="bottom",offset:k,dragClassCancel:te,menuButtonClass:q,onOpenMenu:se}){const re=w?c.Tp.components.Panels.Panel.menu(w):"panel-menu-button",Y=(0,d.useCallback)(X=>{X&&se&&se()},[se]);return(0,a.jsx)(D.m,{overlay:K,placement:Q,offset:k,onVisibleChange:Y,children:(0,a.jsx)(f.I,{"aria-label":(0,p.t)("grafana-ui.panel-menu.label","Menu for panel {{ title }}",{title:w??"Untitled"}),title:(0,p.t)("grafana-ui.panel-menu.title","Menu"),icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":re,className:(0,s.cx)(q,te)})})}function P({menu:K,title:w,dragClass:Q,children:k,offset:te=-32,onOpenMenu:q}){const se=(0,h.of)(T),re=(0,d.useRef)(null),Y=c.Tp.components.Panels.Panel.HoverWidget,X=(0,d.useCallback)(_=>{re.current?.setPointerCapture(_.pointerId)},[]),J=(0,d.useCallback)(_=>{re.current?.releasePointerCapture(_.pointerId)},[]);return k===void 0||d.Children.count(k)===0?null:(0,a.jsxs)("div",{className:(0,s.cx)(se.container,"show-on-hover"),style:{top:te},"data-testid":Y.container,children:[Q&&(0,a.jsx)("div",{className:(0,s.cx)(se.square,se.draggable,Q),onPointerDown:X,onPointerUp:J,ref:re,"data-testid":Y.dragIcon,children:(0,a.jsx)(x.I,{name:"expand-arrows",className:se.draggableIcon})}),k,K&&(0,a.jsx)(C,{menu:K,title:w,placement:"bottom",menuButtonClass:se.menuButton,onOpenMenu:q})]})}function T(K){return{container:(0,s.css)({label:"hover-container-widget",[K.transitions.handleMotion("no-preference","reduce")]:{transition:"all .1s linear"},display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:K.colors.background.secondary,color:K.colors.text.primary,border:`1px solid ${K.colors.border.weak}`,borderRadius:K.shape.radius.default,height:K.spacing(4),boxShadow:K.shadows.z1}),square:(0,s.css)({display:"flex",justifyContent:"center",alignItems:"center",width:K.spacing(4),height:"100%"}),draggable:(0,s.css)({cursor:"move",[K.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,s.css)({background:"inherit",border:"none","&:hover":{background:K.colors.secondary.main}}),draggableIcon:(0,s.css)({transform:"rotate(45deg)",color:K.colors.text.secondary,"&:hover":{color:K.colors.text.primary}})}}var M=e(45861);const I=(0,d.forwardRef)(({className:K,children:w,href:Q,onClick:k,target:te,title:q,...se},re)=>{const Y=(0,h.of)(B);return Q?(0,a.jsx)("a",{ref:re,href:Q,onClick:k,target:te,title:q,className:(0,s.cx)(Y.linkItem,K),...se,children:w}):k?(0,a.jsx)(M.$n,{ref:re,className:(0,s.cx)(Y.buttonItem,K),variant:"secondary",fill:"text",onClick:k,children:w}):(0,a.jsx)("span",{ref:re,className:(0,s.cx)(Y.item,K),...se,children:w})});I.displayName="TitleItem";const B=K=>{const w=(0,s.css)({color:`${K.colors.text.secondary}`,label:"panel-header-item",border:"none",borderRadius:`${K.shape.radius.default}`,padding:`${K.spacing(0,1)}`,height:`${K.spacing(K.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,u.getFocusStyles)(K),zIndex:1},"&: focus:not(:focus-visible)":(0,u.getMouseFocusStyles)(K),"&:hover ":{boxShadow:`${K.shadows.z1}`,background:`${K.colors.background.secondary}`,color:`${K.colors.text.primary}`}});return{item:w,linkItem:(0,s.cx)(w,(0,s.css)({cursor:"pointer"})),buttonItem:(0,s.cx)(w,(0,s.css)({cursor:"pointer"}))}};function U({description:K,className:w}){const Q=(0,h.of)(W),k=()=>{const te=typeof K=="function"?K():K;return(0,a.jsx)("div",{className:"panel-info-content markdown-html",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:te}})})};return K!==""?(0,a.jsx)(b.m,{interactive:!0,content:k,children:(0,a.jsx)(I,{className:(0,s.cx)(w,Q.description),children:(0,a.jsx)(x.I,{name:"info-circle",size:"md"})})}):null}const W=K=>({description:(0,s.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function V({message:K,onClick:w,ariaLabel:Q="status"}){const k=(0,h.of)(z);return(0,a.jsx)(f.I,{className:k.buttonStyles,onClick:w,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:K||"","aria-label":Q,"data-testid":c.Tp.components.Panels.Panel.status("error")})}const z=K=>{const{headerHeight:w,padding:Q}=K.components.panel;return{buttonStyles:(0,s.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:K.spacing(Q),width:K.spacing(w),height:K.spacing(w),borderRadius:K.shape.radius.default})}};function R({width:K,height:w,children:Q,padding:k="md",title:te="",description:q="",displayMode:se="default",titleItems:re,menu:Y,dragClass:X,dragClassCancel:J,hoverHeader:_=!1,hoverHeaderOffset:ee,loadingState:ae,statusMessage:le,statusMessageOnClick:L,leftItems:ie,actions:oe,selectionId:ue,onCancelQuery:ye,onOpenMenu:fe,collapsible:Ee=!1,collapsed:Ae,onToggleCollapse:Ge,onFocus:Fe,onMouseMove:Pe,onMouseEnter:Ve,onDragStart:me,showMenuAlways:Se=!1}){const Qe=(0,h.$j)(),Ue=(0,h.of)(G),Ie=(0,d.useId)(),Re=(0,d.useId)().replace(/:/g,"_"),{isSelected:Ke,onSelect:Le,isSelectable:ze}=(0,E.y)(ue),Be=(0,g.C)(),$e=!_,[Ye,de]=(0,o.A)(!0),[ge,pe]=(0,d.useState)(!1),De=d.useCallback(()=>pe(!0),[]),Me=d.useCallback(()=>pe(!1),[]);Ae===void 0&&(Ae=!Ye);const be=Se?"always-show":"show-on-hover",Oe=se==="transparent",Ne=N(Qe,$e),{contentStyle:We,innerWidth:qe,innerHeight:st}=F(k,Qe,Ne,Ae,w,K),rt={height:Ne,cursor:X?"move":"auto"},ot={width:K,height:Ae?void 0:w},[mt,{width:pt}]=(0,l.A)();ie&&(oe=ie);const ke=typeof te=="string"?c.Tp.components.Panels.Panel.title(te):"Panel",Ze=d.useCallback(ht=>{Be.check(ht)||J&&ht.target instanceof Element&&ht.target.closest(`.${J}`)||setTimeout(()=>Le?.(ht))},[J,Le,Be]),nt=d.useCallback(ht=>{ht.stopPropagation(),Be.set(ht),me?.(ht)},[Be,me]),ut=d.useCallback(ht=>{ht.target instanceof Element&&ht.target.closest("button,a,canvas,svg")||Le?.(ht)},[Le]),gt=(0,a.jsxs)(a.Fragment,{children:[!Ee&&te&&(0,a.jsx)("div",{className:Ue.title,children:(0,a.jsx)(y.E,{element:"h2",variant:"h6",truncate:!0,title:typeof te=="string"?te:void 0,id:Re,children:te})}),Ee&&(0,a.jsx)("div",{className:Ue.title,children:(0,a.jsx)(y.E,{element:"h2",variant:"h6",children:(0,a.jsxs)("button",{type:"button",className:Ue.clearButtonStyles,onClick:()=>{de(),Ge&&Ge(!Ae)},"aria-expanded":!Ae,"aria-controls":Ae?void 0:Ie,children:[(0,a.jsx)(x.I,{name:Ae?"angle-right":"angle-down","aria-hidden":!!te,"aria-label":te?void 0:(0,p.t)("grafana-ui.panel-chrome.aria-label-toggle-collapse","toggle collapse panel")}),(0,a.jsx)(y.E,{variant:"h6",truncate:!0,id:Re,children:te})]})})}),(0,a.jsxs)("div",{className:(0,s.cx)(Ue.titleItems,J),"data-testid":"title-items-container",children:[(0,a.jsx)(U,{description:q,className:J}),re]}),ae===i.Gu.Streaming&&(0,a.jsx)(b.m,{content:ye?(0,p.t)("grafana-ui.panel-chrome.tooltip-stop-streaming","Stop streaming"):(0,p.t)("grafana-ui.panel-chrome.tooltip-streaming","Streaming"),children:(0,a.jsx)(I,{className:J,"data-testid":"panel-streaming",onClick:ye,children:(0,a.jsx)(x.I,{name:"circle-mono",size:"md",className:Ue.streaming})})}),ae===i.Gu.Loading&&ye&&(0,a.jsx)(r,{delay:2e3,children:(0,a.jsx)(b.m,{content:(0,p.t)("grafana-ui.panel-chrome.tooltip-cancel","Cancel query"),children:(0,a.jsx)(I,{className:(0,s.cx)(J,Ue.pointer),"data-testid":"panel-cancel-query",onClick:ye,children:(0,a.jsx)(x.I,{name:"sync-slash",size:"md"})})})}),(0,a.jsx)("div",{className:Ue.rightAligned,children:oe&&(0,a.jsx)("div",{className:Ue.rightActions,children:O(oe,ht=>ht)})})]});return(0,a.jsxs)("section",{className:(0,s.cx)(Ue.container,Oe&&Ue.transparentContainer,Ke&&"dashboard-selected-element",!Ke&&ze&&ge&&"dashboard-selectable-element"),style:ot,"aria-labelledby":te?Re:void 0,"data-testid":ke,tabIndex:0,onFocus:Fe,onMouseMove:Pe,onMouseEnter:Ve,ref:mt,children:[(0,a.jsx)("div",{className:Ue.loadingBarContainer,children:ae===i.Gu.Loading?(0,a.jsx)(m.G,{width:pt,ariaLabel:(0,p.t)("grafana-ui.panel-chrome.ariaLabel-panel-loading","Panel loading bar")}):null}),_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P,{menu:Y,title:typeof te=="string"?te:void 0,offset:ee,dragClass:X,onOpenMenu:fe,children:gt}),le&&(0,a.jsx)("div",{className:Ue.errorContainerFloating,children:(0,a.jsx)(V,{message:le,onClick:L,ariaLabel:(0,p.t)("grafana-ui.panel-chrome.ariaLabel-panel-status","Panel status")})})]}),$e&&(0,a.jsxs)("div",{className:(0,s.cx)(Ue.headerContainer,X),style:rt,"data-testid":c.Tp.components.Panels.Panel.headerContainer,onPointerDown:nt,onMouseEnter:ze?De:void 0,onMouseLeave:ze?Me:void 0,onPointerUp:Ze,children:[le&&(0,a.jsx)("div",{className:J,children:(0,a.jsx)(V,{message:le,onClick:L,ariaLabel:(0,p.t)("grafana-ui.panel-chrome.ariaLabel-panel-status","Panel status")})}),gt,Y&&(0,a.jsx)(C,{menu:Y,title:typeof te=="string"?te:void 0,placement:"bottom-end",menuButtonClass:(0,s.cx)(Ue.menuItem,J,be),onOpenMenu:fe})]}),!Ae&&(0,a.jsx)("div",{id:Ie,"data-testid":c.Tp.components.Panels.Panel.content,className:(0,s.cx)(Ue.content,w===void 0&&Ue.containNone),style:We,onPointerDown:ut,children:typeof Q=="function"?Q(qe,st):Q})]})}const O=(K,w)=>{const Q=d.Children.toArray(K).filter(Boolean);return Q.length>0?w(Q):null},N=(K,w)=>w?K.spacing.gridSize*K.components.panel.headerHeight:0,F=(K,w,Q,k,te,q)=>{const se=(K==="md"?w.components.panel.padding:0)*w.spacing.gridSize,re=se*2,Y=2;let X=0;q&&(X=q-re-Y);let J=0;return te&&(J=te-Q-re-Y),k&&(J=Q),{contentStyle:{padding:se},innerWidth:X,innerHeight:J}},G=K=>{const{background:w,borderColor:Q,padding:k}=K.components.panel;return{container:(0,s.css)({label:"panel-container",backgroundColor:w,border:`1px solid ${Q}`,position:"relative",borderRadius:K.shape.radius.default,height:"100%",display:"flex",flexDirection:"column",overflow:(0,v.$)("preventPanelChromeOverflow")?"hidden":"initial",".always-show":{background:"none","&:focus-visible, &:hover":{background:K.colors.secondary.shade}},".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,u.getFocusStyles)(K),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,s.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${Q}`}}),loadingBarContainer:(0,s.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",zIndex:1}),containNone:(0,s.css)({contain:"none"}),content:(0,s.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,s.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,s.css)({cursor:"pointer"}),streaming:(0,s.css)({label:"panel-streaming",marginRight:0,color:K.colors.success.text,"&:hover":{color:K.colors.success.text}}),title:(0,s.css)({label:"panel-title",display:"flex",padding:K.spacing(0,k),minWidth:0,"& > h2":{minWidth:0}}),items:(0,s.css)({display:"flex"}),item:(0,s.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,s.css)({visibility:"hidden"}),menuItem:(0,s.css)({label:"panel-menu",border:"none",background:K.colors.secondary.main,"&:hover":{background:K.colors.secondary.shade}}),errorContainerFloating:(0,s.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:1}),rightActions:(0,s.css)({display:"flex",padding:K.spacing(0,k),gap:K.spacing(1)}),rightAligned:(0,s.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,s.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,s.css)({alignItems:"center",display:"flex",gap:K.spacing(.5),background:"transparent",border:"none",padding:0,maxWidth:"100%"})}},H=R;H.LoadingIndicator=n.I,H.TitleItem=I},67598:(ne,j,e)=>{"use strict";e.d(j,{HA:()=>i,Rc:()=>o,rO:()=>d});var n=e(52161),a=e(29609);function s(c){if(a.p.grafana.rule(c.rulerRule)&&(0,n.z2)(c.namespace.rulesSource))return{namespace:{uid:c.rulerRule.grafana_alert.namespace_uid},groupName:c.group.name,groupOrigin:"grafana"};const p=(0,n.EV)(c.namespace.rulesSource);return{rulesSource:{uid:(0,n.w5)(p),name:p,ruleSourceType:"datasource"},namespace:{name:c.namespace.name},groupName:c.group.name,groupOrigin:"datasource"}}function d(c){return c.groupOrigin==="grafana"?n.hY:c.rulesSource.name}function o(c){return{dataSourceName:d(c),namespaceName:"uid"in c.namespace?c.namespace.uid:c.namespace.name,groupName:c.groupName}}function l(c){return{rulesSource:{ruleSourceType:"datasource",name:c.ruleSourceName,uid:(0,n.w5)(c.ruleSourceName)},namespace:{name:c.namespace},groupName:c.groupName,groupOrigin:"datasource"}}const i={fromCombinedRule:s,fromRuleIdentifier:l}},67770:(ne,j,e)=>{"use strict";e.d(j,{$b:()=>a,Aj:()=>p,Df:()=>g,FP:()=>r,Nc:()=>h,Ol:()=>i,ZF:()=>l,_0:()=>v,_C:()=>o,cF:()=>c,s5:()=>s,tG:()=>d,wj:()=>u});var n=e(68388),a=(E=>(E.emerg="critical",E.fatal="critical",E.alert="critical",E.crit="critical",E.critical="critical",E.warn="warning",E.warning="warning",E.err="error",E.eror="error",E.error="error",E.info="info",E.information="info",E.informational="info",E.notice="info",E.dbug="debug",E.debug="debug",E.trace="trace",E.unknown="unknown",E))(a||{});const s={0:"critical",1:"critical",2:"critical",3:"error",4:"warning",5:"info",6:"info",7:"debug"};var d=(E=>(E[E.Number=0]="Number",E[E.String=1]="String",E[E.LabelsMap=2]="LabelsMap",E[E.Error=3]="Error",E))(d||{}),o=(E=>(E.none="No de-duplication",E.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",E.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",E.signature="De-duplication of successive lines that have identical punctuation and whitespace.",E))(o||{}),l=(E=>(E.Backward="BACKWARD",E.Forward="FORWARD",E))(l||{});const i=E=>!E||typeof E!="object"?!1:"getLogRowContext"in E;var c=(E=>(E.LogsVolume="LogsVolume",E.LogsSample="LogsSample",E))(c||{}),p=(E=>(E.FullRange="FullRange",E.Limited="Limited",E))(p||{});const h=(E,x)=>E?("getDataProvider"in E||"getSupplementaryRequest"in E)&&"getSupplementaryQuery"in E&&"getSupportedSupplementaryQueryTypes"in E&&E.getSupportedSupplementaryQueryTypes().includes(x):!1,u=E=>!E||typeof E!="object"?!1:"getLogRowContextUi"in E,r=E=>E!=null&&typeof E=="object"&&"toggleQueryFilter"in E&&"queryHasFilter"in E,v=E=>E!=null&&typeof E=="object"&&"modifyQuery"in E&&"getSupportedQueryModifications"in E;class g extends n.x{static{this.type="logs-sort-order-change"}}},67817:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>n});var n=(a=>(a.grafana="grafana-alerting",a.grafanaRecording="grafana-recording",a.cloudAlerting="cloud-alerting",a.cloudRecording="cloud-recording",a))(n||{})},67834:(ne,j,e)=>{"use strict";e.d(j,{O:()=>o});var n=e(74848),a=e(22803),s=e(96540),d=e(63142);const o=(0,s.forwardRef)(({children:i,state:c,size:p="md",muted:h=!1},u)=>{const r=(0,d.of)(l);return(0,n.jsx)("span",{className:(0,a.cx)(r.common,r[c],r[p],{[r.muted]:h}),ref:u,children:i||c})});o.displayName="StateTag";const l=i=>({common:(0,a.css)({display:"inline-block",color:"white",borderRadius:i.shape.radius.default,fontSize:i.typography.size.sm,textTransform:"capitalize",lineHeight:"1.2",textAlign:"center",fontWeight:i.typography.fontWeightBold}),good:(0,a.css)({backgroundColor:i.colors.success.main,border:`solid 1px ${i.colors.success.main}`,color:i.colors.success.contrastText}),warning:(0,a.css)({backgroundColor:i.colors.warning.main,border:`solid 1px ${i.colors.warning.main}`,color:i.colors.warning.contrastText}),bad:(0,a.css)({backgroundColor:i.colors.error.main,border:`solid 1px ${i.colors.error.main}`,color:i.colors.error.contrastText}),neutral:(0,a.css)({backgroundColor:i.colors.secondary.main,border:`solid 1px ${i.colors.secondary.main}`,color:i.colors.secondary.contrastText}),info:(0,a.css)({backgroundColor:i.colors.primary.main,border:`solid 1px ${i.colors.primary.main}`,color:i.colors.primary.contrastText}),md:(0,a.css)({padding:i.spacing(.5,1),minWidth:i.spacing(8)}),sm:(0,a.css)({padding:i.spacing(.3,.5),minWidth:"52px"}),muted:(0,a.css)({opacity:"0.5"})})},67923:(ne,j,e)=>{"use strict";e.d(j,{AB:()=>c,AS:()=>p,HO:()=>v,I8:()=>h,KR:()=>E,dn:()=>r,eM:()=>g});var n=e(1932),a=e(2543),s=e.n(a),d=e(46635),o=e(84266),l=e(20443),i=e(33998);const c=(y,b,D)=>{if(!g(b.id??"",D))throw new Error(`No such route with ID '${b.id}'`,{cause:i.g2});function C(P){let T=P;if(P.id===b.id){const M=(0,l.SJ)(y,b,D);T={...P,...M}}return{...T,routes:P.routes?.map(C)}}return C(D)},p=(y,b)=>{if(y===b.id)throw new Error("You cant remove the root policy");function D(f){return{...f,routes:f.routes?.reduce((C=[],P)=>(P.id===y||C.push(D(P)),C),[])}}return D(b)},h=(y,b,D,f,C)=>{const P=(0,l.SJ)(y,b,f);return(0,n.jM)(f,T=>{const[M,I,B]=u(T,D);if(M===void 0||I===void 0||B===void 0)throw new Error(`could not find reference route "${D}" in tree`,{cause:i.g2});C==="child"&&(M.routes?M.routes.push(P):M.routes=[P]),C==="above"&&(I.routes=d.insertBeforeImmutably(I.routes??[],P,B)),C==="below"&&(I.routes=d.insertAfterImmutably(I.routes??[],P,B))})};function u(y,b){let D,f,C;function P(T,M,I){D||(T.id===b&&(D=T,f=I,C=M),T.routes&&T.routes.forEach((B,U)=>P(B,U,T)))}return P(y,0,y),[D,f,C]}function r(y){return(0,a.omit)({...y,routes:y.routes?.map(b=>r(b))},"id")}function v(y){return(0,n.jM)(y,b=>{b.spec.routes=b.spec.routes.map(r)})}function g(y,b){return b.id===y?b:b.routes?.find(D=>g(y,D))}function E(y){const b=JSON.stringify(x(y));let D=0;for(let f=0;f<b.length;f++){const C=b.charCodeAt(f);D=(D<<5)-D+C,D=D&D}return D.toString(36)}function x(y){return{receiver:y.receiver??"",group_by:y.group_by?[...y.group_by].sort():[],continue:y.continue??!1,object_matchers:y.object_matchers?[...y.object_matchers].sort():[],matchers:y.matchers?[...y.matchers].sort():[],match:y.match?m(y.match):{},match_re:y.match_re?m(y.match_re):{},group_wait:y.group_wait??"",group_interval:y.group_interval??"",repeat_interval:y.repeat_interval??"",routes:y.routes??[],mute_time_intervals:y.mute_time_intervals?[...y.mute_time_intervals].sort():[],active_time_intervals:y.active_time_intervals?[...y.active_time_intervals].sort():[],provenance:y.provenance??"",[o.uz]:{}}}function m(y){const b={};return Object.keys(y).sort().forEach(D=>{b[D]=y[D]}),b}},67933:(ne,j,e)=>{"use strict";e.d(j,{CH:()=>E,EW:()=>d,Hf:()=>u,P4:()=>s,SP:()=>i,VN:()=>g,VO:()=>o,X3:()=>v,d5:()=>h,iv:()=>l,m8:()=>c,zs:()=>r});var n=e(48592),a=e(56404);const s=x=>x.type==="query",d=x=>x.type==="adhoc",o=x=>x.type==="constant",l=x=>"multi"in x,i=x=>"options"in x,c=x=>"current"in x;function p(x){return x===null?!1:typeof x=="string"}const h=x=>!!x.metricFindQuery&&!x.variables,u=x=>{if(!x.variables||x.variables.getType()!==n.Qz.Standard)return!1;const m=x.variables;return"toDataQuery"in m&&!!m.toDataQuery},r=x=>{if(!x.variables||x.variables.getType()!==n.Qz.Custom)return!1;const m=x.variables;return"query"in m&&"editor"in m&&!!m.query&&!!m.editor},v=x=>x.variables?x.variables.getType()===n.Qz.Datasource:!1;function g(x,m){return x?x.displayName===a.c||h(m):!1}function E(x,m){return x?x.displayName!==a.c&&(v(m)||u(m)||r(m)):!1}},68125:(ne,j,e)=>{"use strict";e.d(j,{F7:()=>h,Jh:()=>u,_O:()=>y,i8:()=>v});var n=e(2543),a=e.n(n),s=e(44809),d=e.n(s),o=e(18700),l=e(41119),i=e(16515),c=e(95004),p=e(55386),h=(b=>(b[b.full=0]="full",b[b.name=1]="name",b[b.none=2]="none",b))(h||{});function u(b,D){return new v(D).readCSV(b)}var r=(b=>(b[b.Starting=0]="Starting",b[b.InHeader=1]="InHeader",b[b.ReadingRows=2]="ReadingRows",b))(r||{});class v{constructor(D){this.chunk=(f,C)=>{for(let P=0;P<f.data.length;P++){const T=f.data[P];if(T.length<1)continue;const M=T[0];if(M){if(M.startsWith("#")){const I=M.indexOf("#",2);if(I>0){const B=M.slice(1,I),U=B==="name";if(U||{unit:"#"}.hasOwnProperty(B)){this.state===2&&(this.current=new o.k({fields:[]}),this.data.push(this.current));const V=M.slice(I+1);if(U){this.current.addFieldFor(void 0,V);for(let z=1;z<T.length;z++)this.current.addFieldFor(void 0,T[z])}else{const{fields:z}=this.current;for(let R=0;R<z.length;R++){z[R].config||(z[R].config={});const O=z[R].config;O[B]=R===0?V:T[R]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,l.HW)(M)===c.PU.string){for(const B of T)this.current.addFieldFor(void 0,B);this.state=1;continue}this.state=1}}if(this.state,this.state=2,T.length>this.current.fields.length){const{fields:I}=this.current;for(let B=I.length;B<T.length;B++)this.current.addFieldFor(T[B]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(T),this.callback&&this.callback.onRow(T)}},D||(D={}),this.config=D.config||{},this.callback=D.callback,this.current=new o.k({fields:[]}),this.state=0,this.data=[]}readCSV(D){this.current=new o.k({fields:[]}),this.data=[this.current];const f={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return d().parse(D,f),this.data}}function g(b,D){if(b==null)return"";const f=b.toString();return f.includes('"')?D.quoteChar+f.replace(/"/gi,'""')+D.quoteChar:f.includes(`
`)||D.delimiter&&f.includes(D.delimiter)?D.quoteChar+f+D.quoteChar:f}function E(b,D){return b.display?f=>{const C=b.display(f);return g((0,p.cN)(C),D)}:f=>g(f,D)}function x(b,D,f){const C=b==="name",P=b==="type";for(const T of D){const M=T.config;if(C||P||M&&M.hasOwnProperty(b)){let I="#"+b+"#";for(let B=0;B<D.length;B++){B>0&&(I=I+f.delimiter);let U=D[B].name;P?U=D[B].type:C||(U=D[B].config[b]),U&&(I=I+g(U,f))}return I+f.newline}}return""}function m(){const b=["x","y"];return b.toLocaleString?b.toLocaleString().charAt(1):","}function y(b,D){if(!b)return"";D=(0,n.defaults)(D,{delimiter:m(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let f=D.useExcelHeader?`sep=${D.delimiter}${D.newline}`:"";for(let C=0;C<b.length;C++){const P=b[C],{fields:T}=P;if(T.length===0)continue;if(D.headerStyle===0)f=f+x("name",T,D)+x("type",T,D)+x("unit",T,D)+x("dateFormat",T,D);else if(D.headerStyle===1){for(let I=0;I<T.length;I++)I>0&&(f+=D.delimiter),f+=`"${(0,i.Ct)(T[I],P).replace(/"/g,'""')}"`;f+=D.newline}const M=T[0].values.length;if(M>0){const I=T.map(B=>E(B,D));for(let B=0;B<M;B++){for(let U=0;U<T.length;U++){U>0&&(f+=D.delimiter);let W=T[U].values[B];W!==null&&(T[U].type===c.PU.frame&&"value"in W&&(W=W.value),f+=I[U](W))}B!==M-1&&(f+=D.newline)}}C!==b.length-1&&(f=f+D.newline)}return f}},68126:(ne,j,e)=>{"use strict";e.d(j,{a_:()=>o,mE:()=>u,wQ:()=>l});var n=e(2543),a=e.n(n),s=e(25229),d=e(80977);function o(r,v,g,E,x){const m=c(r,g),y=p(m,E),b=x?i(y,x):y;return h(b,v)}const l=(r,v)=>{let g=v.now;return g||(g=v.tz?(0,s.oZ)(v.tz):(0,s.KQ)()),g.add(-r,"d"),(v.isLastTs?g.endOf("d"):g.startOf("d")).valueOf()};function i(r,v){return r.filter(g=>g.createdAt>v[0]&&g.createdAt<v[1])}function c(r,v){return v.length>0?r.filter(g=>v.includes(g.datasourceName)):r}function p(r,v){return r.filter(g=>g.comment.includes(v)?!0:g.queries.filter(x=>Object.values((0,n.omit)(x,["datasource","key","refId","hide","queryType"])).some(m=>m?.toString().includes(v))).length>0)}const h=(r,v)=>{let g;return v===d.x.Ascending&&(g=(E,x)=>E.createdAt<x.createdAt?-1:E.createdAt>x.createdAt?1:0),v===d.x.Descending&&(g=(E,x)=>E.createdAt<x.createdAt?1:E.createdAt>x.createdAt?-1:0),v===d.x.DatasourceZA&&(g=(E,x)=>E.datasourceName<x.datasourceName?-1:E.datasourceName>x.datasourceName?1:0),v===d.x.DatasourceAZ&&(g=(E,x)=>E.datasourceName<x.datasourceName?1:E.datasourceName>x.datasourceName?-1:0),r.sort(g)},u={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",legacyActiveDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",activeDatasourcesOnly:"grafana.explore.richHistory.activeDatasourcesOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"}},68220:(ne,j,e)=>{"use strict";e.d(j,{TS:()=>s});class n{_linkTo(i,c){c<=0&&i.inputEdges.push(this),c>=0&&i.outputEdges.push(this),i.edges.push(this)}link(i,c){if(!i)throw Error("inputNode is required");if(!c)throw Error("outputNode is required");return this.unlink(),this.inputNode=i,this.outputNode=c,this._linkTo(i,1),this._linkTo(c,-1),this}unlink(){let i;const c=this.inputNode,p=this.outputNode;c&&p&&(i=c.edges.indexOf(this),i>-1&&c.edges.splice(i,1),i=p.edges.indexOf(this),i>-1&&p.edges.splice(i,1),i=c.outputEdges.indexOf(this),i>-1&&c.outputEdges.splice(i,1),i=p.inputEdges.indexOf(this),i>-1&&p.inputEdges.splice(i,1))}}class a{constructor(i){this.name=i,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(i){return i?typeof i=="object"?this.inputEdges.find(c=>c.inputNode?.name===i.name):this.inputEdges.find(c=>c.inputNode?.name===i):null}getEdgeTo(i){return i?typeof i=="object"?this.outputEdges.find(c=>c.outputNode?.name===i.name):this.outputEdges.find(c=>c.outputNode?.name===i):null}getOptimizedInputEdges(){const i=[];return this.inputEdges.forEach(c=>{c.inputNode?.inputEdges.map(h=>h.inputNode)?.forEach(h=>{const u=h?.getEdgeTo(this.name);u&&i.push(u)})}),this.inputEdges.filter(c=>i.indexOf(c)===-1)}}class s{constructor(){this.nodes={}}createNode(i){const c=new a(i);return this.nodes[i]=c,c}createNodes(i){const c=[];return i.forEach(p=>{c.push(this.createNode(p))}),c}link(i,c){let p=[],h=[];const u=[],r=[];i instanceof Array?p=i:p=[i],c instanceof Array?h=c:h=[c];for(let g=0;g<p.length;g++){const E=p[g];if(typeof E=="string"){const x=this.getNode(E);if(!x)throw Error(`cannot link input node named ${E} since it doesn't exist in graph`);u.push(x)}else u.push(E)}for(let g=0;g<h.length;g++){const E=h[g];if(typeof E=="string"){const x=this.getNode(E);if(!x)throw Error(`cannot link output node named ${E} since it doesn't exist in graph`);r.push(x)}else r.push(E)}const v=[];return u.forEach(g=>{r.forEach(E=>{if(this.willCreateCycle(g,E))throw Error(`cannot link ${g.name} to ${E.name} since it would create a cycle`);v.push(this.createEdge().link(g,E))})}),v}descendants(i){if(!i.length)return new Set;const c=new Set(o(i)?i.map(p=>this.nodes[p]).filter(p=>p!==void 0):i);return this.descendantsRecursive(c)}descendantsRecursive(i,c=new Set){for(const p of i){const h=new Set;for(const{inputNode:u}of p.inputEdges)u&&!c.has(u)&&(c.add(u),h.add(u));this.descendantsRecursive(h,c)}return c}willCreateCycle(i,c){if(i===c)return!0;const p=new Set,h=[c];for(;h.length;){const u=h.pop();if(u===i)return!0;p.add(u);for(const r of u.outputEdges){const v=r.outputNode;v&&!p.has(v)&&h.push(v)}}return!1}createEdge(){return new n}getNode(i){return this.nodes[i]}}const d=l=>{Object.keys(l.nodes).forEach(i=>{const c=l.nodes[i];let p=c.outputEdges.map(u=>u.outputNode?.name).join(", ");p||(p="<none>");let h=c.inputEdges.map(u=>u.inputNode?.name).join(", ");h||(h="<none>"),console.log(`${c.name}:
 - links to:   ${p}
 - links from: ${h}`)})};function o(l){return l.length>0&&typeof l[0]=="string"}},68373:(ne,j,e)=>{"use strict";e.d(j,{gs:()=>F,Ff:()=>O,Po:()=>G});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(12737),i=e(77824),c=e(92807),p=e(75515),h=e(74098),u=e(25531),r=e(63527);const v=({panel:K,formatDate:w})=>{const Q=(0,o.of)(g),k=K.libraryPanel?.meta;return k?(0,n.jsxs)("div",{className:Q.info,children:[(0,n.jsx)("div",{className:Q.libraryPanelInfo,children:(0,n.jsxs)(d.x6,{i18nKey:"library-panels.library-panel-info.usage-count",count:k.connectedDashboards,children:["Used on ","{{count}}"," dashboards"]})}),(0,n.jsx)("div",{className:Q.libraryPanelInfo,children:(0,n.jsxs)(d.x6,{i18nKey:"library-panels.library-panel-info.last-edited",values:{timeAgo:w?.(k.updated,"L")??k.updated},components:{person:(0,n.jsxs)(n.Fragment,{children:[k.updatedBy.avatarUrl&&(0,n.jsx)("img",{width:"22",height:"22",className:Q.userAvatar,src:k.updatedBy.avatarUrl,alt:`Avatar for ${k.updatedBy.name}`}),k.updatedBy.name]})},children:["Last edited on ","{{timeAgo}}"," by","<person />"]})})]}):null},g=K=>({info:(0,a.css)({lineHeight:1}),libraryPanelInfo:(0,a.css)({color:K.colors.text.secondary,fontSize:K.typography.bodySmall.fontSize}),userAvatar:(0,a.css)({borderRadius:K.shape.radius.circle,boxSizing:"content-box",width:"22px",height:"22px",paddingLeft:K.spacing(1),paddingRight:K.spacing(1)})});var E=e(25797),x=e(51156);function m(K){const{panel:w,onPanelConfigChange:Q,dashboard:k}=K,te=new E.C({title:(0,d.t)("dashboard.get-library-panel-options-category.descriptor.title.library-panel-options","Library panel options"),id:"Library panel options",isOpenDefault:!0});return(0,p.X)(w)&&te.addItem(new x.v({title:(0,d.t)("dashboard.get-library-panel-options-category.title.name","Name"),id:"library-panel-name",value:w.libraryPanel.name,popularRank:1,render:function(se){return(0,n.jsx)(r.p,{id:se.props.id,defaultValue:w.libraryPanel.name,onBlur:re=>Q("libraryPanel",{...w.libraryPanel,name:re.currentTarget.value})})}})).addItem(new x.v({title:(0,d.t)("dashboard.get-library-panel-options-category.title.information","Information"),id:"library-panel-information",render:function(){return(0,n.jsx)(v,{panel:w,formatDate:k.formatDate})}})),te}var y=e(51898),b=e(43173),D=e(87105),f=e(21285),C=e(96822),P=e(18857),T=e(82345),M=e(22055),I=e(76623),B=e(31819);function U(K){const{dashboard:w,panel:Q,onPanelConfigChange:k}=K,te=new E.C({title:(0,d.t)("dashboard.get-panel-frame-category.descriptor.title.panel-options","Panel options"),id:"Panel options",isOpenDefault:!0}),q="panel-frame-title",se="panel-frame-description",re=X=>{const J=document.getElementById(q);J instanceof HTMLInputElement&&(J.value=X,k("title",X))},Y=X=>{const J=document.getElementById(se);J instanceof HTMLTextAreaElement&&(J.value=X,k("description",X))};return te.addItem(new x.v({title:(0,d.t)("dashboard.get-panel-frame-category.title.title","Title"),id:q,value:Q.title,popularRank:1,render:function(J){return(0,n.jsx)(r.p,{"data-testid":y.Tp.components.PanelEditor.OptionsPane.fieldInput("Title"),id:J.props.id,defaultValue:Q.title,onBlur:_=>k("title",_.currentTarget.value)})},addon:b.$.featureToggles.dashgpt&&(0,n.jsx)(I.h,{onGenerate:re,panel:Q.getSaveModel(),dashboard:w.getSaveModelClone()})})).addItem(new x.v({title:(0,d.t)("dashboard.get-panel-frame-category.title.description","Description"),id:se,description:Q.description,value:Q.description,render:function(J){return(0,n.jsx)(D.f,{"data-testid":y.Tp.components.PanelEditor.OptionsPane.fieldInput("Description"),id:J.props.id,defaultValue:Q.description,onBlur:_=>k("description",_.currentTarget.value)})},addon:b.$.featureToggles.dashgpt&&(0,n.jsx)(M.t,{onGenerate:Y,panel:Q.getSaveModel()})})).addItem(new x.v({title:(0,d.t)("dashboard.get-panel-frame-category.title.transparent-background","Transparent background"),id:"panel-frame-transparent-bg",render:function(J){return(0,n.jsx)(f.d,{"data-testid":y.Tp.components.PanelEditor.OptionsPane.fieldInput("Transparent background"),value:Q.transparent,id:J.props.id,onChange:_=>k("transparent",_.currentTarget.checked)})}})).addCategory(new E.C({title:(0,d.t)("dashboard.get-panel-frame-category.title.panel-links","Panel links"),id:"panel-frame-links-category",isOpenDefault:!1,itemsCount:Q.links?.length}).addItem(new x.v({title:(0,d.t)("dashboard.get-panel-frame-category.title.panel-links","Panel links"),id:"panel-frame-links-category",render:function(){return(0,n.jsx)(C.e,{links:Q.links,onChange:J=>k("links",J),getSuggestions:T.Fq,data:[]})}}))).addCategory(new E.C({title:(0,d.t)("dashboard.get-panel-frame-category.title.repeat-options","Repeat options"),id:"panel-frame-repeat",isOpenDefault:!1}).addItem(new x.v({title:(0,d.t)("dashboard.get-panel-frame-category.title.repeat-by-variable","Repeat by variable"),id:"panel-frame-repeat-by-variable",description:"Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard.",render:function(J){return(0,n.jsx)(B.G,{id:J.props.id,repeat:Q.repeat,onChange:_=>{k("repeat",_)}})}})).addItem(new x.v({title:(0,d.t)("dashboard.get-panel-frame-category.title.repeat-direction","Repeat direction"),id:"panel-frame-repeat-direction",showIf:()=>!!Q.repeat,render:function(){const J=[{label:(0,d.t)("dashboard.get-panel-frame-category.direction-options.label.horizontal","Horizontal"),value:"h"},{label:(0,d.t)("dashboard.get-panel-frame-category.direction-options.label.vertical","Vertical"),value:"v"}];return(0,n.jsx)(i.z,{options:J,value:Q.repeatDirection||"h",onChange:_=>k("repeatDirection",_)})}})).addItem(new x.v({title:(0,d.t)("dashboard.get-panel-frame-category.title.max-per-row","Max per row"),id:"panel-frame-repeat-max-per-row",showIf:()=>!!(Q.repeat&&Q.repeatDirection==="h"),render:function(J){const _=[2,3,4,6,8,12].map(ee=>({label:ee.toString(),value:ee}));return(0,n.jsx)(P.l6,{id:J.props.id,options:_,value:Q.maxPerRow,onChange:ee=>k("maxPerRow",ee.value)})}})))}var W=e(56424);class V{constructor(w,Q){this.categories=w,this.overrides=Q}search(w){const Q=new RegExp(w,"i"),te=this.collectHits(this.categories,Q,[]).sort(z).map(re=>re.item),se=this.collectHits(this.overrides,Q,[]).sort(z).map(re=>re.item);return{optionHits:te,overrideHits:this.buildOverrideHitCategories(se),totalCount:this.getAllOptionsCount(this.categories)}}collectHits(w,Q,k){for(const te of w){const q=Q.test(te.props.title);for(const se of te.items){if(Q.test(se.props.title||"")){k.push({item:se,rank:1});continue}if(se.props.description&&Q.test(se.props.description)){k.push({item:se,rank:2});continue}q&&k.push({item:se,rank:3})}te.categories.length>0&&this.collectHits(te.categories,Q,k)}return k}getAllOptionsCount(w){let Q=0;for(const k of w)Q+=k.items.length,k.categories.length>0&&(Q+=this.getAllOptionsCount(k.categories));return Q}buildOverrideHitCategories(w){const Q={};for(const k of w){let te=Q[k.parent.props.title];te||(te=Q[k.parent.props.title]=new E.C(k.parent.props),te.addItem(k.parent.items[0])),te.items[0].props.title!==k.props.title&&te.addItem(k)}return Object.values(Q)}}function z(K,w){return K.rank-w.rank}function R(K){const w=[];for(const Q of K)for(const k of Q.items)k.props.title==="Unit"&&(k.props.popularRank=2),k.props.title==="Min"&&(k.props.popularRank=3),k.props.title==="Max"&&(k.props.popularRank=4),k.props.title==="Display name"&&(k.props.popularRank=5),k.props.popularRank&&w.push(k);return w.sort((Q,k)=>Q.props.popularRank-k.props.popularRank)}const O=K=>{const{plugin:w,panel:Q}=K,[k,te]=(0,s.useState)(""),[q,se]=(0,s.useState)("All"),re=(0,o.of)(H),[Y,X,J]=(0,s.useMemo)(()=>[U(K),(0,W.Zm)(K),m(K)],[Q.configRev,K.data,K.instanceState,k]),_=(0,s.useMemo)(()=>(0,u.v)(K.panel.fieldConfig,K.plugin.fieldConfigRegistry,K.data?.series??[],k,K.onFieldConfigsChange),[Q.configRev,K.data,K.instanceState,k]),ee=[],ae=k.length>0,le=(0,s.useMemo)(N,[]),L=(0,p.X)(Q)?[J,Y,...X]:[Y,...X];if(ae)ee.push(G(L,_,k));else switch(q){case"All":(0,p.X)(Q)&&ee.push(J.render()),ee.push(Y.render());for(const oe of X)ee.push(oe.render());for(const oe of _)ee.push(oe.render());break;case"Overrides":for(const oe of _)ee.push(oe.render());break;case"Recent":ee.push((0,n.jsx)(h.D,{id:"Recent options",title:(0,d.t)("dashboard.options-pane-options.Recent options-title-recent-options","Recent options"),forceOpen:!0,children:R(L).map(oe=>oe.render())},"Recent options"));break}const ie=!ae&&!w.fieldConfigRegistry.isEmpty();return(0,n.jsxs)("div",{className:re.wrapper,children:[(0,n.jsxs)("div",{className:re.formBox,children:[(0,n.jsx)("div",{className:re.formRow,children:(0,n.jsx)(l.Z,{width:0,value:k,onChange:te,placeholder:(0,d.t)("dashboard.options-pane-options.placeholder-search-options","Search options")})}),ie&&(0,n.jsx)("div",{className:re.formRow,children:(0,n.jsx)(i.z,{options:le,value:q,fullWidth:!0,onChange:se})})]}),(0,n.jsx)(c.P,{children:(0,n.jsx)("div",{className:re.mainBox,children:ee})})]})};function N(){return[{label:"All",value:"All"},{label:"Overrides",value:"Overrides"}]}var F=(K=>(K.All="All",K.Overrides="Overrides",K.Recent="Recent",K))(F||{});function G(K,w,Q){const k=new V(K,w),{optionHits:te,totalCount:q,overrideHits:se}=k.search(Q);return(0,n.jsxs)("div",{children:[(0,n.jsx)(h.D,{id:"Found options",title:(0,d.t)("dashboard.options-pane-options.title-matched","Matched {{count}}/{{totalCount}} options",{count:te.length,totalCount:q}),forceOpen:!0,children:te.map(re=>re.render(Q))},"Normal options"),se.map(re=>re.render(Q))]},"search results")}const H=K=>({wrapper:(0,a.css)({height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0",".search-fragment-highlight":{color:K.colors.warning.text,background:"transparent"}}),searchBox:(0,a.css)({display:"flex",flexDirection:"column",minHeight:0}),formRow:(0,a.css)({marginBottom:K.spacing(1)}),formBox:(0,a.css)({padding:K.spacing(1),background:K.colors.background.primary,border:`1px solid ${K.components.panel.borderColor}`,borderTopLeftRadius:K.shape.borderRadius(1.5),borderBottom:"none"}),closeButton:(0,a.css)({marginLeft:K.spacing(1)}),searchHits:(0,a.css)({padding:K.spacing(1,1,0,1)}),searchNotice:(0,a.css)({fontSize:K.typography.size.sm,color:K.colors.text.secondary,padding:K.spacing(1),textAlign:"center"}),mainBox:(0,a.css)({background:K.colors.background.primary,border:`1px solid ${K.components.panel.borderColor}`,borderTop:"none",flexGrow:1})})},68528:(ne,j,e)=>{"use strict";e.d(j,{j:()=>a,x:()=>s});var n=e(75735);function a(d){return("meta"in d?d.meta.k8s?.annotations:d.metadata.annotations)?.[n.LH]===n.Sf.Repo}function s(d){return d.metadata.annotations?.[n.LH]===n.Sf.Repo}},68577:(ne,j,e)=>{"use strict";e.d(j,{v:()=>i});var n=e(74848),a=e(22803),s=e(96540),d=e(37386),o=e(18857),l=e(63142);function i({name:p,description:h,value:u,options:r,onChange:v,testId:g,width:E}){const x=(0,l.of)(c),m=(0,s.useId)(),y=`variable-select-input-${p}-${m}`;return(0,n.jsx)(d.D,{label:p,description:h,htmlFor:y,children:(0,n.jsx)(o.l6,{"data-testid":g,inputId:y,onChange:v,value:u,width:E??30,options:r,className:x.selectContainer})})}function c(p){return{selectContainer:(0,a.css)({marginRight:p.spacing(.5)})}}},68779:(ne,j,e)=>{"use strict";e.d(j,{Sm:()=>i,Sv:()=>c,j4:()=>l});var n=e(81160),a=e(16515),s=e(36638),d=e(64761),o=e(1027),l=(u=>(u.exclude="exclude",u.include="include",u))(l||{}),i=(u=>(u.all="all",u.any="any",u))(i||{});const c={id:d.F.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(u,r)=>v=>{const g=u.filters,E=u.match==="all",x=u.type==="include";return!Array.isArray(g)||g.length===0?v.pipe(o.W.operator({},r)):v.pipe((0,n.T)(m=>{if(m.length===0)return m;const y=[];for(const b of m){const D=new Set,f=h(b,m),C=p(g,f);for(let M=0;M<b.length;M++){if(D.has(M))continue;let I=!0;for(const B of C){const U=B(M,b,m);if(!E&&U){I=!0;break}if(E&&!U){I=!1;break}I=U}I&&D.add(M)}const P=[],T=x?D.size:m[0].length-D.size;for(const M of b.fields){const I=[];for(let B=0;B<b.length;B++){if(x&&D.has(B)){I.push(M.values[B]);continue}if(!x&&!D.has(B)){I.push(M.values[B]);continue}}P.push({...M,values:I,state:{}})}y.push({...b,fields:P,length:T})}return y}))}},p=(u,r)=>{const v=()=>!1;return u.map(g=>{const E=r[g.fieldName]??-1;if(E<0)return console.warn(`[FilterByValue] Could not find index for field name: ${g.fieldName}`),v;const x=(0,s.kK)(g.config);return(m,y,b)=>x(m,y.fields[E],y,b)})},h=(u,r)=>{const v={};return u.fields.forEach((g,E)=>{const x=(0,a.Ct)(g,u,r);v[x]=E}),v}},68805:(ne,j,e)=>{"use strict";e.d(j,{j:()=>l});var n=e(74848),a=e(22803),s=e(96540),d=e(67458),o=e(63142);const l=s.memo(s.forwardRef(({className:p,children:h,markdown:u,styleOverrides:r,onRemove:v,...g},E)=>{const x=(0,o.of)(m=>c(m,r?.borderTop));return(0,n.jsxs)("div",{className:(0,a.cx)(x.wrapper,p),...g,ref:E,children:[u&&i(u),h]})}));function i(p){const h=(0,d.G)(p);return(0,n.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:h}})}l.displayName="OperationRowHelp";const c=(p,h)=>{const u=p.shape.radius.default,r=p.colors.background.secondary;return{wrapper:(0,a.css)({padding:p.spacing(2),border:`2px solid ${r}`,borderTop:h?h+r:"none",borderRadius:`0 0 ${u} ${u}`,position:"relative",top:"-4px"})}}},69076:(ne,j,e)=>{"use strict";e.d(j,{c:()=>d});var n=e(74848),a=e(92145),s=e(32635);function d({value:o,name:l,description:i,onChange:c,ariaLabel:p,testId:h}){const u=(0,a.Bi)();return(0,n.jsx)(s.S,{id:u,label:l,description:i,value:o,onChange:c,"aria-label":p,"data-testid":h})}},69168:(ne,j,e)=>{"use strict";e.d(j,{F:()=>i,H9:()=>v,TQ:()=>g,aW:()=>p,nx:()=>E});var n=e(2543),a=e.n(n),s=e(76637),d=e(64394),o=e(83340),l=e(33553);function i({plugin:x,currentOptions:m,currentFieldConfig:y,isAfterPluginChange:b}){const D=(0,n.mergeWith)({},x.defaults,m||{},(P,T)=>{if((0,n.isArray)(T))return T}),f=c(y,x),C=u(x,f,b);return{options:D,fieldConfig:C}}function c(x,m){const y=m.fieldConfigDefaults,b={defaults:(0,n.mergeWith)({},y.defaults,x?x.defaults:{},(D,f)=>{if((0,n.isArray)(f))return f}),overrides:x?.overrides??[]};h(b.defaults,"",m.fieldConfigRegistry),b.defaults.thresholds&&r(b.defaults.thresholds),b.overrides=p(b.overrides,D=>m.fieldConfigRegistry.getIfExists(D.id)!==void 0);for(const D of b.overrides)for(const f of D.properties)f.id==="thresholds"&&r(f.value);return b}function p(x,m){return x.map(y=>{const b=y.properties.filter(m);return{...y,properties:b}})}function h(x,m,y){let b=!1;for(const[D,f]of Object.entries(x)){const C=`${m}${D}`,P=!!y.getIfExists(C);if(P){b=!0;continue}(0,n.isArray)(f)||!(0,n.isObject)(f)?P||(0,n.unset)(x,D):h(f,`${C}.`,y)||(0,n.unset)(x,D)}return b}function u(x,m,y){if(!y)return m;const b=x.fieldConfigRegistry.getIfExists(o.uo.Color);if(b&&b.settings){const D=b.settings,f=s.uf.getIfExists(m.defaults.color?.mode);if(!D.byValueSupport&&(!f||f.isByValue))return m.defaults.color={mode:d.Y.PaletteClassic},m;if(D.byValueSupport&&D.preferThresholdsMode&&f?.id!==d.Y.Fixed&&(!f||!f.isByValue))return m.defaults.color={mode:d.Y.Thresholds},m;if(D.bySeriesSupport&&f?.isByValue)return m.defaults.color={mode:d.Y.PaletteClassic},m}return m}function r(x){x.mode||(x.mode=l.O.Absolute),x.steps?x.steps.length&&(x.steps[0].value=-1/0):x.steps=[]}function v(x,m){const y={defaults:{...x.defaults,custom:m.defaults.custom},overrides:[...x.overrides]};for(const b of m.overrides)for(const D of b.properties)if(g(D)){const f=y.overrides.find(C=>(0,n.isEqual)(C.matcher,b.matcher));f?f!==b&&f.properties.push(D):y.overrides.push(b)}return y}function g(x){return x.id.startsWith("custom.")}function E(x){return!g(x)}},69234:(ne,j,e)=>{"use strict";e.d(j,{b3:()=>u,xl:()=>b});var n=e(74848),a=e(22803),s=e(96540),d=e(40961),o=e(21275),l=e(63142),i=e(15245),c=e(84522);const p=void 0,h=10;var u=(f=>(f[f.xOne=0]="xOne",f[f.xAll=1]="xAll",f[f.xyOne=2]="xyOne",f))(u||{});function r(f,C){return{...f,...C,style:{...f.style,...C.style}}}function v(){return{style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}}}const g=5,E=f=>f!=null&&!f.ctrlKey&&!f.metaKey,x=()=>[],m=()=>[],y=/Android|iPhone|iPad/i.test(navigator.userAgent),b=({config:f,hoverMode:C,render:P,clientZoom:T=!1,queryZoom:M,onSelectRange:I,maxWidth:B,syncMode:U=o.yV.Off,syncScope:W="global",getDataLinks:V=x,getAdHocFilters:z=m})=>{const R=(0,s.useRef)(null),O=(0,s.useRef)(null);O.current==null&&(O.current=(0,i.gF)());const[{plot:N,isHovering:F,isPinned:G,contents:H,style:K,dismiss:w},Q]=(0,s.useReducer)(r,null,v),k=(0,s.useRef)(),te=(0,l.of)(D,B),q=(0,s.useRef)(P);q.current=P;const se=(0,s.useRef)(V);se.current=V;const re=(0,s.useRef)(z);return re.current=z,(0,s.useLayoutEffect)(()=>{k.current?.observer.disconnect(),k.current={width:0,height:0,observer:new ResizeObserver(de=>{let ge=k.current;for(const pe of de)pe.borderBoxSize?.length>0?(ge.width=pe.borderBoxSize[0].inlineSize,ge.height=pe.borderBoxSize[0].blockSize):(ge.width=pe.contentRect.width,ge.height=pe.contentRect.height)})};let Y=!1,X=!1,J=N,_=F,ee=!1,ae=G,le=K,L=!1;const ie=U===o.yV.Tooltip;U!==o.yV.Off&&f.scales[0].props.isTime&&f.setCursor({sync:{key:W,scales:["x",null]}});const oe=()=>{Ge?_=L&&ee&&ie:_=Ae!=null||C===1&&ee};let ue=0,ye=0,fe=null,Ee=[],Ae=null,Ge=!1,Fe=[],Pe=[],Ve=[],me=!1,Se=!1;const Qe=(de=!1)=>{me||(_?queueMicrotask(Ie):setTimeout(Ie,100),me=!0),de&&(Se=!0)},Ue=de=>{de.target.closest('[role="dialog"], #grafana-portal-container')==null&&Re()},Ie=()=>{me=!1,Se&&(le={pointerEvents:ae?"all":"none"},J.cursor._lock=ae,ae?(document.addEventListener("mousedown",Ue,!0),document.addEventListener("keydown",Ue,!0)):(document.removeEventListener("mousedown",Ue,!0),document.removeEventListener("keydown",Ue,!0)),Se=!1);let de={style:le,isPinned:ae,isHovering:_,contents:_||fe!=null?q.current(J,Ee,Ae,ae,Re,fe,Ge,ae?Fe:Ae!=null?Ve[Ae]:[],ae?Pe:[]):null,dismiss:Re};Q(de),fe=null},Re=()=>{let de=ae;ae=!1,_=!1,J.setCursor({left:-10,top:-10}),Fe=[],Pe=[],Qe(de)};f.addHook("init",de=>{Q({plot:J=de}),T&&de.over.addEventListener("mousedown",ge=>{if(E(ge)&&ge.button===0&&ge.shiftKey){X=!0,de.cursor.drag.x=!1,de.cursor.drag.y=!0;let pe=De=>{de.cursor.drag.x=!0,de.cursor.drag.y=!1,document.removeEventListener("mouseup",pe,!0)};document.addEventListener("mouseup",pe,!0)}},!0),de.over.addEventListener("click",ge=>{if(ge.target===de.over){if(ge.ctrlKey||ge.metaKey){let pe;de.scales.x.ori===0?pe=de.posToVal(de.cursor.left,"x"):pe=de.posToVal(de.select.top+de.select.height,"x"),fe={from:pe,to:pe},Qe(!1)}else if(_&&!ae&&Ae!=null){Fe=se.current(Ae,Ee[Ae]),Pe=re.current(Ae,Ee[Ae]);const pe=Fe.find(De=>De.oneClick===!0);pe!=null?window.open(pe.href,pe.target??"_self"):setTimeout(()=>{ae=!0,Qe(!0)},0)}}})}),f.addHook("setSelect",de=>{const ge=de.scales.x.ori===0;if(!Ge&&(T||M!=null))if(E(de.cursor.event)){if(I!=null){let pe=[];const De=!!de.cursor.drag.y,Me=!!de.cursor.drag.x;let be=null,Oe=[];Me&&(be={from:ge?de.posToVal(de.select.left,"x"):de.posToVal(de.select.top+de.select.height,"x"),to:ge?de.posToVal(de.select.left+de.select.width,"x"):de.posToVal(de.select.top,"x")}),De&&f.scales.forEach(Ne=>{const We=Ne.props.scaleKey;if(We!=="x"){let qe={from:ge?de.posToVal(de.select.top+de.select.height,We):de.posToVal(de.select.left+de.select.width,We),to:ge?de.posToVal(de.select.top,We):de.posToVal(de.select.left,We)};Oe.push(qe)}}),Me?De?pe=Oe.map(Ne=>({x:be,y:Ne})):pe=[{x:be}]:De&&(pe=Oe.map(Ne=>({y:Ne}))),I(pe)}else if(T&&X){if(de.select.height>=g){for(let pe in de.scales)if(pe!=="x"){const De=ge?de.posToVal(de.select.top,pe):de.posToVal(de.select.left+de.select.width,pe),Me=ge?de.posToVal(de.select.top+de.select.height,pe):de.posToVal(de.select.left,pe);de.setScale(pe,{min:Me,max:De})}Y=!0}X=!1}else if(M!=null&&de.select.width>=g){const pe=ge?de.posToVal(de.select.left,"x"):de.posToVal(de.select.top+de.select.height,"x"),De=ge?de.posToVal(de.select.left+de.select.width,"x"):de.posToVal(de.select.top,"x");M({from:pe,to:De}),Y=!1}}else fe={from:ge?de.posToVal(de.select.left,"x"):de.posToVal(de.select.top+de.select.height,"x"),to:ge?de.posToVal(de.select.left+de.select.width,"x"):de.posToVal(de.select.top,"x")},Qe(!0);de.setSelect({left:0,width:0,top:0,height:0},!1)}),(T||M!=null)&&f.setCursor({bind:{dblclick:de=>()=>{if(!E(de.cursor.event))return null;if(T&&Y){for(let ge in de.scales)ge!=="x"&&de.setScale(ge,{min:null,max:null});Y=!1}else if(M!=null){let ge=de.scales.x;const pe=ge.min,De=ge.max,Me=(De-pe)/2;M({from:pe-Me,to:De+Me})}return null}}}),f.addHook("setData",de=>{Y=!1,X=!1,ae&&Re()}),f.addHook("setSeries",(de,ge)=>{Ae=ge,Ge=de.cursor.event==null,oe(),Qe()}),f.addHook("setLegend",de=>{Ee=J?.cursor.idxs.slice(),ee=Ee.some((pe,De)=>De>0&&pe!=null),Ve.length===0&&(Ve=Ee.map((pe,De)=>{if(De>0){const be=V(De,Ee[De]).find(Oe=>Oe.oneClick===!0);if(be)return[be]}return[]})),Ge=de.cursor.event==null;let ge=_;oe(),(_||_!==ge)&&Qe()});const Ke=16;let Le=0,ze=0;const Be=()=>{_&&!ae&&Re(),Le=window.innerWidth-Ke,ze=window.innerHeight-Ke},$e=()=>{L=J.rect.bottom<=ze&&J.rect.top>=0&&J.rect.left>=0&&J.rect.right<=Le};Be(),f.addHook("ready",$e),f.addHook("setCursor",de=>{if(Ge=de.cursor.event==null,!_)return;let{left:ge=-10,top:pe=-10}=de.cursor;if(ge>=0||pe>=0){let De=de.rect.left+ge,Me=de.rect.top+pe,be="",{width:Oe,height:Ne}=k.current;Oe+=h,Ne+=h,ye!==0?Me+Ne<ze||Me-Ne<0?ye=0:ye!==-Ne&&(ye=-Ne):Me+Ne>ze&&Me-Ne>=0&&(ye=-Ne),ue!==0?De+Oe<Le||De-Oe<0?ue=0:ue!==-Oe&&(ue=-Oe):De+Oe>Le&&De-Oe>=0&&(ue=-Oe);const We=De+(ue===0?h:-h),qe=Me+(ye===0?h:-h);be=`translateX(${We}px) ${ue===0?"":"translateX(-100%)"} translateY(${qe}px) ${ye===0?"":"translateY(-100%)"}`,R.current!=null?R.current.style.transform=be:(le.transform=be,Qe())}});const Ye=de=>{$e(),_&&de.target instanceof Node&&de.target.contains(J.root)&&Re()};return window.addEventListener("resize",Be),window.addEventListener("scroll",Ye,!0),()=>{k.current?.observer.disconnect(),window.removeEventListener("resize",Be),window.removeEventListener("scroll",Ye,!0),document.removeEventListener("mousedown",Ue,!0),document.removeEventListener("keydown",Ue,!0)}},[f]),(0,s.useLayoutEffect)(()=>{const Y=k.current;if(R.current!=null){Y.observer.disconnect(),Y.observer.observe(R.current);const{width:X,height:J}=R.current.getBoundingClientRect();Y.width=X,Y.height=J;let _=N.cursor.event;if(_!=null){const ee=_.type!=="mousemove"||y;ee&&(_=new MouseEvent("mousemove",{view:window,bubbles:!0,cancelable:!0,clientX:_.clientX,clientY:_.clientY,screenX:_.screenX,screenY:_.screenY})),!(ee?!1:performance.now()-_.timeStamp>16)&&N.over.dispatchEvent(_)}else N.setCursor({left:N.cursor.left,top:N.cursor.top},!0)}else Y.width=0,Y.height=0},[F]),N&&F?(0,d.createPortal)((0,n.jsxs)("div",{className:(0,a.cx)(te.tooltipWrapper,G&&te.pinned),style:K,"aria-live":"polite","aria-atomic":"true",ref:R,children:[G&&(0,n.jsx)(c.J,{onClick:w}),H]}),O.current):null},D=(f,C)=>({tooltipWrapper:(0,a.css)({top:0,left:0,zIndex:f.zIndex.tooltip,whiteSpace:"pre",borderRadius:f.shape.radius.default,position:"fixed",background:f.colors.background.elevated,border:`1px solid ${f.colors.border.weak}`,boxShadow:f.shadows.z2,userSelect:"text",maxWidth:C??"none"}),pinned:(0,a.css)({boxShadow:f.shadows.z3})})},69289:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>B,Cj:()=>r,HO:()=>b,Mj:()=>E,Nm:()=>g,Q9:()=>y,RS:()=>C,c1:()=>u,g$:()=>D,ny:()=>x,ri:()=>m,uh:()=>f,xu:()=>v});var n=e(65307),a=e(2543),s=e.n(a),d=e(25229),o=e(80011),l=e(5857),i=e(65642),c=e(73427);const p={orgId:c.TP.user.orgId,timeZone:c.TP.user.timezone,weekStart:c.TP.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},h=(0,n.Z0)({name:"user/profile",initialState:p,reducers:{updateTimeZone:(U,W)=>{U.timeZone=W.payload.timeZone},updateWeekStart:(U,W)=>{U.weekStart=W.payload.weekStart},updateFiscalYearStartMonth:(U,W)=>{U.fiscalYearStartMonth=W.payload.fiscalYearStartMonth},setUpdating:(U,W)=>{U.isUpdating=W.payload.updating},userLoaded:(U,W)=>{U.user=W.payload.user},initLoadTeams:(U,W)=>{U.teamsAreLoading=!0},teamsLoaded:(U,W)=>{U.teams=W.payload.teams,U.teamsAreLoading=!1},initLoadOrgs:(U,W)=>{U.orgsAreLoading=!0},orgsLoaded:(U,W)=>{U.orgs=W.payload.orgs,U.orgsAreLoading=!1},initLoadSessions:(U,W)=>{U.sessionsAreLoading=!0},sessionsLoaded:(U,W)=>{const V=W.payload.sessions.sort((z,R)=>Number(R.isActive)-Number(z.isActive));U.sessions=V.map(z=>({id:z.id,isActive:z.isActive,seenAt:(0,o.fq)(z.seenAt),createdAt:z.createdAt,clientIp:z.clientIp,browser:z.browser,browserVersion:z.browserVersion,authModule:z.authModule,os:z.os,osVersion:z.osVersion,device:z.device})),U.sessionsAreLoading=!1},userSessionRevoked:(U,W)=>{U.sessions=U.sessions.filter(V=>V.id!==W.payload.tokenId),U.isUpdating=!1}}}),u=U=>async W=>{(0,a.set)(c.TP,"user.fiscalYearStartMonth",U),W(M({fiscalYearStartMonth:U}))},r=U=>async W=>{(!(0,a.isString)(U)||(0,a.isEmpty)(U))&&(U=i.Ay?.bootData?.user?.timezone),(0,a.set)(c.TP,"user.timezone",U),W(P({timeZone:U}))},v=U=>async W=>{U||(U=(0,l.rL)()),(0,a.set)(c.TP,"user.weekStart",U),W(T({weekStart:U})),(0,d.$D)(U)},{setUpdating:g,initLoadOrgs:E,orgsLoaded:x,initLoadTeams:m,teamsLoaded:y,userLoaded:b,userSessionRevoked:D,initLoadSessions:f,sessionsLoaded:C,updateTimeZone:P,updateWeekStart:T,updateFiscalYearStartMonth:M}=h.actions,I=h.reducer,B={user:h.reducer}},69523:(ne,j,e)=>{"use strict";e.d(j,{H:()=>E});var n=e(74848),a=e(96540),s=e(92745),d=e(44248),o=e(31286),l=e(41654),i=e(37386),c=e(43243),p=e(63527),h=e(33143),u=e(92119),r=e(32603),v=e(71199),g=e(87748);class E extends d.Bs{constructor(y){super(y),this._variableDependency=new d.Sh(this,{onAnyVariableChanged:b=>{b.state.name===this.state.variable&&this._check()}}),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=x}static{this.serializer={id:"ConditionalRenderingVariable",name:"Variable",deserialize:this.deserialize}}_activationHandler(){this.forEachChild(y=>{y.isActive||this._subs.add(y.activate())}),this._check()}_check(){const y=this._evaluate();y!==this.state.result&&(this.setState({result:y}),(0,g.ah)(this))}_evaluate(){if(!this.state.variable)return;const y=d.jh.getVariables(this).getByName(this.state.variable);if(!y)return;const b=y.getValue()??"";let D;if(this.state.operator==="="||this.state.operator==="!=")D=Array.isArray(b)?b.includes(this.state.value.toString()):b===this.state.value.toString();else try{const f=new RegExp(this.state.value);D=Array.isArray(b)?b.some(C=>f.test(C.toString())):f.test(b.toString())}catch{return!0}return this.state.operator==="!="||this.state.operator==="!~"?!D:D}changeVariable(y){this.state.variable!==y&&(this.setState({variable:y}),this._check())}changeOperator(y){this.state.operator!==y&&(this.setState({operator:y}),this._check())}changeValue(y){this.state.value!==y&&(this.setState({value:y}),this._check())}renderCmp(){return(0,n.jsx)(this.Component,{model:this},this.state.key)}serialize(){return{kind:"ConditionalRenderingVariable",spec:{variable:this.state.variable,operator:this._getLongOperator(this.state.operator),value:this.state.value}}}static deserialize(y){return new E({variable:y.spec.variable,operator:E._getShortOperator(y.spec.operator),value:y.spec.value,result:void 0})}static createEmpty(y){return new E({variable:y,operator:"=",value:"",result:void 0})}_getLongOperator(y){switch(y){case"=":return"equals";case"!=":return"notEquals";case"=~":return"matches";case"!~":return"notMatches"}}static _getShortOperator(y){switch(y){case"equals":return"=";case"notEquals":return"!=";case"matches":return"=~";case"notMatches":return"!~"}}}function x({model:m}){const{variable:y,operator:b,value:D}=m.useState(),[f,C]=(0,a.useState)(D);(0,a.useEffect)(()=>C(D),[D]);const P=d.jh.getVariables((0,u.YQ)(m)),T=(0,a.useMemo)(()=>P.state.variables.map(U=>({value:U.state.name,label:U.state.label??U.state.name})),[P.state.variables]),M=(0,a.useMemo)(()=>[{value:"=",description:(0,s.t)("dashboard.conditional-rendering.conditions.variable.operator.equals","Equals")},{value:"!=",description:(0,s.t)("dashboard.conditional-rendering.conditions.variable.operator.not-equals","Not equals")},{value:"=~",description:(0,s.t)("dashboard.conditional-rendering.conditions.variable.operator.matches","Matches")},{value:"!~",description:(0,s.t)("dashboard.conditional-rendering.conditions.variable.operator.not-matches","Not matches")}],[]),I=(0,a.useMemo)(()=>{if(b==="=~"||b==="!~")try{return new RegExp(f),""}catch{return(0,s.t)("dashboard.conditional-rendering.conditions.variable.error.invalid-regex","Invalid regex")}return""},[f,b]),B=(0,s.t)("dashboard.edit-actions.edit-template-variable-rule","Change template variable rule");return(0,n.jsx)(v.B,{info:(0,s.t)("dashboard.conditional-rendering.conditions.variable.info","Show or hide the {{type}} dynamically based on the variable value.",{type:(0,r.L9)((0,g.KG)(m))}),isObjectSupported:!0,model:m,title:(0,s.t)("dashboard.conditional-rendering.conditions.variable.label","Template variable"),children:(0,n.jsxs)(l.B,{direction:"column",gap:.5,children:[(0,n.jsxs)(l.B,{direction:"row",gap:.5,grow:1,children:[(0,n.jsx)(o.a,{flex:1,children:(0,n.jsx)(c.G,{placeholder:(0,s.t)("dashboard.conditional-rendering.conditions.variable.name","Name"),options:T,value:y,onChange:U=>{const W=U.value;W!==y&&h.cc.edit({description:B,source:m,perform:()=>m.changeVariable(W),undo:()=>m.changeVariable(y)})}})}),(0,n.jsx)(c.G,{width:"auto",minWidth:10,options:M,value:b,onChange:U=>{const W=U.value;W!==b&&h.cc.edit({description:B,source:m,perform:()=>m.changeOperator(W),undo:()=>m.changeOperator(b)})}})]}),(0,n.jsx)(i.D,{error:I,invalid:!!I,noMargin:!0,children:(0,n.jsx)(p.p,{placeholder:(0,s.t)("dashboard.conditional-rendering.conditions.variable.value","Value"),value:f,onChange:U=>{U.currentTarget.value!==D&&C(U.currentTarget.value)},onBlur:()=>{f!==D&&h.cc.edit({description:B,source:m,perform:()=>m.changeValue(f),undo:()=>m.changeValue(D)})}})})]})})}},69715:(ne,j,e)=>{"use strict";e.d(j,{gQ:()=>Ye,hE:()=>Me,rf:()=>st,Ay:()=>pt,lf:()=>Oe,P5:()=>Ne});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(49185),l=e(93374),i=e(92745),c=e(41654),p=e(66404),h=e(30703),u=e(63142);const r=({color:ke})=>{const Ze=(0,u.of)(v,{color:ke});return(0,n.jsx)(c.B,{direction:"row",gap:.5,children:(0,n.jsx)("div",{className:Ze.dot})})},v=(ke,{color:Ze})=>{const nt=ke.spacing(1.25),ut=`calc(${nt} / 2.5)`,gt=Ze==="error",ht=Ze==="success",tt=Ze==="warning";return{dot:(0,a.css)({width:nt,height:nt,borderRadius:ke.shape.radius.circle,backgroundColor:ke.colors.secondary.shade,outline:`solid ${ut} ${ke.colors.secondary.transparent}`,margin:ut},ht&&(0,a.css)({backgroundColor:ke.colors.success.main,outlineColor:ke.colors.success.transparent}),tt&&(0,a.css)({backgroundColor:ke.colors.warning.main,outlineColor:ke.colors.warning.transparent}),gt&&(0,a.css)({backgroundColor:ke.colors.error.main,outlineColor:ke.colors.error.transparent}))}},g=({state:ke,health:Ze,type:nt="alerting",isPaused:ut=!1})=>{if(ut)return(0,n.jsx)(x,{});let gt,ht;switch(ke){case"normal":ht="success",gt="Normal";break;case"firing":ht="error",gt="Firing";break;case"pending":ht="warning",gt="Pending";break;case"recovering":ht="warning",gt="Recovering";break;case"unknown":default:ht="unknown",gt="Unknown";break}if(Ze==="error"&&(ht="error",gt="Error"),Ze==="nodata"&&(ht="warning",gt="No data"),nt==="recording"){const tt=Ze==="error"?"Recording error":"Recording",Ot=Ze==="error"?"error":"success";return(0,n.jsx)(E,{color:Ot,text:tt})}return(0,n.jsx)(E,{color:ht,text:gt})};function E({color:ke,text:Ze}){const nt=ke==="unknown"?"secondary":ke;return(0,n.jsxs)(c.B,{direction:"row",gap:.5,wrap:"nowrap",flex:"0 0 auto",alignItems:"center",children:[(0,n.jsx)(r,{color:ke}),(0,n.jsx)(p.E,{variant:"bodySmall",color:nt,children:Ze})]})}function x(){return(0,n.jsx)(p.E,{variant:"bodySmall",color:"warning",children:(0,n.jsxs)(c.B,{direction:"row",gap:.5,wrap:"nowrap",flex:"0 0 auto",alignItems:"center",children:[(0,n.jsx)(h.I,{name:"pause",size:"xs"}),(0,n.jsx)(i.x6,{i18nKey:"alerting.paused-badge.paused",children:"Paused"})]})})}var m=e(34999),y=e(13941),b=e(89640),D=e(45861),f=e(36303),C=e(47327),P=e(70958),T=e(85311),M=e(3969),I=e(86791),B=e(24619),U=e(74268),W=e(28390),V=e(54552),z=e(29609);const R=[];function O(ke){R.push({filterOnlyGrafanaAlertRules:!0,ruleViewTabBuilder:ke})}function N(ke){const{rule:Ze}=(0,V.k)(),nt=z.p.grafana.alertingRule(Ze.rulerRule);return R.filter(ut=>ut.filterOnlyGrafanaAlertRules?nt:!0).map(ut=>ut.ruleViewTabBuilder(ke))}function F(){O(({activeTab:ke,setActiveTab:Ze})=>{const nt="enrichment";return{text:t("alerting.use-page-nav.page-nav.text.enrichment","Alert enrichment"),active:ke===nt,onClick:()=>Ze(nt),tabSuffix:()=>jsx(w,{})}})}function G(){R.splice(0,R.length)}function H(ke,Ze){return R.filter(nt=>nt.filterOnlyGrafanaAlertRules?Ze:!0).map(nt=>nt.ruleViewTabBuilder(ke))}function K(){return{tabSuffix:css({marginLeft:8})}}function w(){const ke=useStyles2(K);return jsx("span",{className:ke.tabSuffix,children:jsx(FeatureBadge,{featureState:FeatureState.new})})}function Q(ke,Ze){return N({activeTab:ke,setActiveTab:Ze})}var k=e(74869),te=e(80218),q=e(44109),se=e(11940),re=e(80276),Y=e(39187),X=e(17305),J=e(76267),_=e(95443),ee=e(52161),ae=e(39659),le=e(77256),L=e(29442),ie=e(36826),oe=e(1972),ue=e(2401),ye=e(88589),fe=e(14050),Ee=e(87281),Ae=e(41517),Ge=e(3845),Fe=e(45746),Pe=e(43173),Ve=e(58138);const me=(0,d.lazy)(()=>e.e(2835).then(e.bind(e,32835))),Se=(0,d.lazy)(()=>Promise.all([e.e(8706),e.e(3605)]).then(e.bind(e,43605))),Qe=({rule:ke})=>{const Ze=Pe.$.unifiedAlerting.stateHistory?.backend,nt=Pe.$.unifiedAlerting.stateHistory?.primary,gt=[Ze,nt].some(tt=>tt===Ve.Q.Loki)?Ve.Q.Loki:Ve.Q.Annotations,ht=ke.grafana_alert.uid;return(0,n.jsxs)(d.Suspense,{fallback:"Loading...",children:[gt===Ve.Q.Loki&&(0,n.jsx)(Se,{ruleUID:ht}),gt===Ve.Q.Annotations&&(0,n.jsx)(me,{ruleUID:ht})]})};var Ue=e(95943),Ie=e(66773);const Re=({rule:ke})=>(0,n.jsx)(Ie.s,{rule:ke,pagination:{itemsPerPage:Ue.FG},enableFiltering:!0});var Ke=e(96371);const Le=()=>(0,n.jsx)(i.x6,{i18nKey:"alerting.routing.routing",children:"Routing"});let ze=null;const Be=ke=>{if(!ze)return null;const Ze=(0,f.Xc)(ze,{title:(0,i.t)("alerting.enrichment.error-boundary.rule-viewer-section-extension","Rule Viewer Enrichment Section failed to load"),style:"alertbox",errorLogger:U.vV});return(0,n.jsx)(Ze,{...ke})};function $e(ke){ze=ke}var Ye=(ke=>(ke.Query="query",ke.Instances="instances",ke.History="history",ke.Routing="routing",ke.Details="details",ke.VersionHistory="version-history",ke.Enrichment="enrichment",ke))(Ye||{});const de=(0,k.wS)(),ge=(0,k.sk)(),pe=()=>{const{rule:ke,identifier:Ze}=(0,V.k)(),{pageNav:nt,activeTab:ut}=qe(ke),gt=(0,u.of)(rt),ht=(0,z.A4)(Ze)?!1:de||ge,[tt,Ot]=(0,d.useState)(),{returnTo:jt}=(0,Y.h)("/alerting/list"),{annotations:wt,promRule:Ht,rulerRule:hn}=ke,Dn=Oe(Ht?.health),Bn=(0,z.YN)(ke.group),xn=z.p.grafana.rule(hn)&&!!hn.grafana_alert.provenance,ft=z.p.grafana.rule(hn)&&(0,z.hC)(hn),St=Dn&&!ft,Tt=hn?(0,z.uo)(hn):(0,z.uo)(Ht),Je=wt[_.YH.summary];return(0,n.jsxs)(ie.d,{pageNav:nt,navId:"alert-list",isLoading:!1,renderTitle:Pt=>(0,n.jsx)(Me,{name:Pt,paused:ft,state:z.R$.alertingRule(Ht)?Ht.state:void 0,health:Ht?.health,ruleType:Ht?.type,ruleOrigin:Tt,returnToHref:jt}),actions:(0,n.jsx)(M.l,{rule:ke,rulesSource:ke.namespace.rulesSource}),info:De(ke,gt),subTitle:(0,n.jsxs)(c.B,{direction:"column",children:[Je,ft&&(0,n.jsx)(T.A,{}),Bn&&(0,n.jsx)(Ae.X,{}),xn&&(0,n.jsx)(oe.Yi,{resource:oe.hk.AlertRule,bottomSpacing:0,topSpacing:2}),St&&(0,n.jsx)(m.F,{title:(0,i.t)("alerting.rule-viewer.title-something-wrong-evaluating-alert","Something went wrong when evaluating this alert rule"),bottomSpacing:0,topSpacing:2,children:(0,n.jsx)("pre",{style:{marginBottom:0},children:(0,n.jsx)("code",{children:ke.promRule?.lastError??"No error message"})})})]}),children:[ht&&(0,n.jsx)(be,{ruleIdentifier:Ze}),(0,n.jsx)(c.B,{direction:"column",gap:2,children:(0,n.jsxs)(y.J,{children:[ut==="query"&&(0,n.jsx)(Ke.D,{rule:ke}),ut==="instances"&&(0,n.jsx)(Re,{rule:ke}),ut==="history"&&z.p.grafana.rule(ke.rulerRule)&&(0,n.jsx)(Qe,{rule:ke.rulerRule}),ut==="routing"&&(0,n.jsx)(Le,{}),ut==="details"&&(0,n.jsx)(Fe.B,{rule:ke}),ut==="version-history"&&z.p.grafana.rule(ke.rulerRule)&&(0,n.jsx)(Ge.f,{rule:ke.rulerRule}),ut==="enrichment"&&ke.uid&&(0,n.jsx)(Be,{ruleUid:ke.uid})]})}),tt&&(0,n.jsx)(fe.Z,{redirectTo:!0,identifier:tt,isProvisioned:xn,onDismiss:()=>Ot(void 0)})]})},De=(ke,Ze)=>{const{labels:nt,annotations:ut,group:gt,rulerRule:ht}=ke,tt=[],Ot=ut[_.YH.runbookURL],jt=ut[_.YH.dashboardUID],wt=ut[_.YH.panelID],Ht=jt&&wt,hn=jt,Dn=(0,ae.rm)(nt)>0,Bn=gt.interval;if(z.p.grafana.alertingRule(ht)){const xn=ht.grafana_alert.notification_settings?.receiver;xn&&tt.push({label:(0,i.t)("alerting.create-metadata.label.contact-point","Notifications are delivered to"),value:(0,n.jsx)(Ee.z,{name:xn,variant:"bodySmall"})})}if(Ot){const xn=(0,s.truncate)(Ot,{length:42}),ft=ot(Ot)?(0,n.jsx)(b.Y,{variant:"bodySmall",className:Ze.url,href:Ot,external:!0,children:xn}):(0,n.jsx)(p.E,{variant:"bodySmall",children:xn});tt.push({label:(0,i.t)("alerting.create-metadata.label.runbook-url","Runbook URL"),value:ft})}if(Ht?tt.push({label:(0,i.t)("alerting.create-metadata.label.dashboard-and-panel","Dashboard and panel"),value:(0,n.jsx)(ue.d,{title:ke.name,component:(0,n.jsx)(b.Y,{variant:"bodySmall",href:(0,le.D2)(jt,wt),children:(0,n.jsx)(i.x6,{i18nKey:"alerting.create-metadata.view-panel",children:"View panel"})})})}):hn&&tt.push({label:(0,i.t)("alerting.create-metadata.label.dashboard","Dashboard"),value:(0,n.jsx)(ue.d,{title:ke.name,component:(0,n.jsx)(b.Y,{title:ke.name,variant:"bodySmall",href:(0,le.JM)(jt),children:(0,n.jsx)(i.x6,{i18nKey:"alerting.create-metadata.view-dashboard",children:"View dashboard"})})})}),z.p.grafana.recordingRule(ke.rulerRule)){const xn=ke.rulerRule?.grafana_alert.record?.metric??"";tt.push({label:(0,i.t)("alerting.create-metadata.label.metric-name","Metric name"),value:(0,n.jsx)(p.E,{color:"primary",children:xn})})}return Bn&&tt.push({label:(0,i.t)("alerting.create-metadata.label.evaluation-interval","Evaluation interval"),value:(0,n.jsx)(p.E,{color:"primary",children:(0,n.jsxs)(i.x6,{i18nKey:"alerting.rule-viewer.evaluation-interval",children:["Every ",{interval:Bn}]})})}),Dn&&tt.push({label:(0,i.t)("alerting.create-metadata.label.labels","Labels"),value:(0,n.jsx)(l.m,{labels:nt,size:"sm"})}),tt},Me=({name:ke,paused:Ze=!1,state:nt,health:ut,ruleType:gt,ruleOrigin:ht,returnToHref:tt=""})=>{const Ot=gt===B.JS.Recording,{returnTo:jt}=(0,Y.h)(tt),wt=(0,J.U)(ut),Ht=(0,J.Vw)(nt);return(0,n.jsxs)(c.B,{direction:"row",gap:1,minWidth:0,alignItems:"center",children:[tt&&(0,n.jsx)(D.z9,{"aria-label":(0,i.t)("alerting.rule-viewer.aria-label-return-to","Return to previous view"),variant:"secondary",icon:"angle-left",href:jt}),ht&&(0,n.jsx)(X.T,{pluginId:ht.pluginId,size:"lg"}),(0,n.jsx)(p.E,{variant:"h1",truncate:!0,children:ke}),nt&&(0,n.jsx)(g,{type:"alerting",state:Ht,health:wt,isPaused:Ze}),Ot&&(0,n.jsx)(g,{type:"recording",health:wt,isPaused:Ze})]})},be=(0,f.Xc)(({ruleIdentifier:ke})=>{const[Ze,{width:nt}]=(0,o.A)(),{hasRuler:ut}=(0,se.w)((0,ee.bt)(ke).uid),{result:gt}=(0,q.FY)(ke),{waitForGroupConsistency:ht,groupConsistent:tt}=(0,re.zx)(),[Ot,jt]=(0,te.Yb)(wt=>ht(wt));return(0,d.useEffect)(()=>{gt&&ut&&Ot.execute(gt.groupIdentifier)},[gt,ut,Ot]),(0,te.bJ)(jt)?(0,n.jsx)(m.F,{title:(0,i.t)("alerting.prometheus-consistency-check.title-unable-to-check-the-rule-status","Unable to check the rule status"),bottomSpacing:0,topSpacing:2,children:(0,le.JZ)(jt.error)}):tt===!1?(0,n.jsxs)(c.B,{direction:"column",gap:0,ref:Ze,children:[(0,n.jsx)(C.G,{width:nt}),(0,n.jsx)(m.F,{title:(0,i.t)("alerting.rule-viewer.prometheus-consistency-check.alert-title","Update in progress"),severity:"info",children:(0,n.jsx)(i.x6,{i18nKey:"alerting.rule-viewer.prometheus-consistency-check.alert-message",children:"Alert rule has been added or updated. Changes may take up to a minute to appear on the Alert rules list view."})})]}):null},{errorLogger:U.vV}),Oe=ke=>ke==="error"||ke==="err";function Ne(){const[ke,Ze]=(0,P.s)(),nt=ke.tab;return[We(nt)?nt:"query",ht=>{Ze({tab:ht})}]}function We(ke){return typeof ke=="string"&&Object.values(Ye).includes(ke)}function qe(ke){const[Ze,nt]=Ne(),{annotations:ut,promRule:gt,rulerRule:ht}=ke,tt=ut[_.YH.summary],jt=z.R$.alertingRule(gt)?st(ke.instanceTotals):void 0,wt=(0,ye.EL)(ke.namespace).name,Ht=ke.group.name,hn=z.p.grafana.alertingRule(ht),Dn=z.p.grafana.recordingRule(ht),Bn=z.R$.recordingRule(gt),xn=(0,ee.v0)(ke.namespace.rulesSource),ft=mt(ke),St=L.TN.detailsPageLink(xn,ft,Ht),Tt=Pt=>{We(Pt)&&nt(Pt)};return{pageNav:{...W.defaultPageNav,text:ke.name,subTitle:tt,children:[{text:(0,i.t)("alerting.use-page-nav.page-nav.text.query-and-conditions","Query and conditions"),active:Ze==="query",onClick:()=>{nt("query")}},{text:(0,i.t)("alerting.use-page-nav.page-nav.text.instances","Instances"),active:Ze==="instances",onClick:()=>{nt("instances")},tabCounter:jt,hideFromTabs:Bn},{text:(0,i.t)("alerting.use-page-nav.page-nav.text.history","History"),active:Ze==="history",onClick:()=>{nt("history")},hideFromTabs:!hn},{text:(0,i.t)("alerting.use-page-nav.page-nav.text.details","Details"),active:Ze==="details",onClick:()=>{nt("details")}},...Q(Ze,Tt),{text:(0,i.t)("alerting.use-page-nav.page-nav.text.versions","Versions"),active:Ze==="version-history",onClick:()=>{nt("version-history")},hideFromTabs:!hn&&!Dn}],parentItem:{text:Ht,url:St,parentItem:{text:wt,url:(0,L.tx)([["namespace",wt]])}}},activeTab:Ze}}const st=ke=>(0,s.chain)(ke).pick([I.$7.Alerting,I.$7.Pending,I.$7.Recovering,I.$7.Normal,I.$7.NoData,I.$7.Error]).values().sum().value(),rt=()=>({url:(0,a.css)({wordBreak:"break-all"})});function ot(ke){const Ze=ke.startsWith("/");let nt=!1;try{new URL(ke),nt=!0}catch{return!1}return Ze||nt}function mt(ke){if(ke.namespace.uid)return ke.namespace.uid;const Ze=z.p.dataSource.rule(ke.rulerRule),nt=z.R$.rule(ke.promRule)&&!z.R$.grafana.rule(ke.promRule);return Ze||nt?ke.namespace.name:z.p.grafana.rule(ke.rulerRule)?ke.rulerRule?.grafana_alert.namespace_uid:z.R$.grafana.rule(ke.promRule)?ke.promRule.folderUid:ke.namespace.name}const pt=pe},69738:(ne,j,e)=>{"use strict";e.d(j,{W:()=>a});var n=e(83873);class a{constructor(d){this.resourceUri=d}update(d){return n.IB.put(`/api/${this.resourceUri}/preferences`,d)}patch(d){return n.IB.patch(`/api/${this.resourceUri}/preferences`,d)}load(){return n.IB.get(`/api/${this.resourceUri}/preferences`)}}},69807:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>v,NV:()=>u,Y1:()=>c,j7:()=>i,kH:()=>l,pB:()=>h,s7:()=>p,sF:()=>o,sJ:()=>d});var n=e(65307);const a={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},s=(0,n.Z0)({name:"supportBundles",initialState:a,reducers:{supportBundlesLoaded:(g,E)=>({...g,supportBundles:E.payload,isLoading:!1}),fetchBegin:g=>({...g,isLoading:!0}),fetchEnd:g=>({...g,isLoading:!1}),collectorsFetchBegin:g=>({...g,createBundlePageLoading:!0}),collectorsFetchEnd:g=>({...g,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(g,E)=>({...g,supportBundleCollectors:E.payload,createBundlePageLoading:!1}),setLoadBundleError:(g,E)=>({...g,loadBundlesError:E.payload,supportBundleCollectors:[]}),setCreateBundleError:(g,E)=>({...g,createBundleError:E.payload})}}),{supportBundlesLoaded:d,fetchBegin:o,fetchEnd:l,supportBundleCollectorsLoaded:i,collectorsFetchBegin:c,collectorsFetchEnd:p,setLoadBundleError:h,setCreateBundleError:u}=s.actions,v={supportBundles:s.reducer}},69874:(ne,j,e)=>{"use strict";e.d(j,{$m:()=>r,Q2:()=>u,Th:()=>c});var n=e(65642),a=e(73427),s=e(83873),d=e(11257);const o=[],l={};function i(g,E){o.find(x=>x.id===g.id)||(o.push(g),E&&(l[g.id]=E))}function c(){return o}function p(g){return o.find(E=>E.id===g)}function h(g){const E=[];for(const[x,m]of Object.entries(g)){const y=o.find(b=>`auth.${b.id}`===x);if(y){const b={...m,providerId:y.id,displayName:m.name||y.displayName};E.push(b)}}return E}async function u(g){if(l[g]){const E=l[g];return E()}return{configured:!1,enabled:!1}}function r(){if(n.Ay.featureToggles.ssoSettingsLDAP)return;i({id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"},v)}async function v(){if(a.TP.hasPermission(d.w.SettingsRead)){const E=(await(0,s.AI)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:E.enabled==="true",enabled:E.enabled==="true",hide:E.enabled!=="true"}}return{configured:!1,enabled:!1}}},69896:(ne,j,e)=>{"use strict";e.d(j,{b:()=>o,j:()=>d});var n=e(96540),a=e(24120),s=e(88483);const d=(0,n.createContext)(void 0);function o(){const l=(0,n.useContext)(d);return(0,a.A)(l?.stateObservable??new s.c,l?.state),(0,n.useMemo)(()=>l?{state:l.state,stateObservable:l.stateObservable,changeScopes:l.changeScopes,setReadOnly:l.setReadOnly,setEnabled:l.setEnabled}:void 0,[l,l?.state])}},70030:(ne,j,e)=>{"use strict";e.d(j,{Uy:()=>C,Z6:()=>T,ZB:()=>P,c:()=>U});var n=e(2543),a=e.n(n),s=e(3594),d=e(44248),o=e(21275),l=e(59857),i=e(10605),c=e(98314),p=e(4604),h=e(8095),u=e(88632),r=e(93389),v=e(1131),g=e(87308),E=e(23244),x=e(1682),m=e(52258),y=e(92119),b=e(78320),D=e(99392),f=e(84500);function C(V,z=!1){const R=V.state,O=R.$timeRange.state,N=R.$data,F=R.$variables,G=R.body;let H=[],K=[];if(G instanceof v.D){for(const Y of G.state.grid.state.children)if(Y instanceof r.U&&(Y.state.variableName?H=H.concat(I(Y,z)):H.push(P(Y,z))),Y instanceof d.tI){if(Y.state.repeatSourceKey&&!z)continue;B(Y,H,z)}}let w=[];N instanceof u.s&&(w=(0,D.O)(N.state.annotationLayers)),F instanceof d.Pj&&(K=(0,f.CN)(F));const Q=R.controls?.state,k=Q?.refreshPicker,te=W({refresh_intervals:k?.state.intervals,hidden:Q?.hideTimeControls,nowDelay:O.UNSAFE_nowDelay,quick_ranges:Q?.timePicker.state.quickRanges},l.lt),q=R.$behaviors?.find(Y=>Y instanceof d.Gg.K2)?.state.sync??l.Ye.graphTooltip,se=R.$behaviors?.find(Y=>Y instanceof d.Gg.en)?.isEnabled||void 0,re={...l.Ye,title:R.title,description:R.description||void 0,uid:R.uid,id:R.id,editable:R.editable,preload:R.preload,time:{from:O.from,to:O.to},timepicker:te,panels:H,annotations:{list:w},templating:{list:K},version:R.version,timezone:O.timeZone,fiscalYearStartMonth:O.fiscalYearStartMonth,weekStart:O.weekStart,tags:R.tags,links:R.links,graphTooltip:q,liveNow:se,schemaVersion:p.O2,refresh:k?.state.refresh,scopeMeta:R.scopeMeta};return(0,i.v)(re,!0)}function P(V,z=!1){let R,O=0,N=0,F=0,G=0,H=V;if(!(H.state.body instanceof d.Eb))throw new Error("DashboardGridItem body expected to be VizPanel");if(R=H.state.body,O=H.state.x??0,N=H.state.y??0,F=H.state.width??0,G=(H.state.variableName?H.state.itemHeight:H.state.height)??0,!R)throw new Error("Unsupported grid item type");return T(R,{x:O,y:N,h:G,w:F},z,H)}function T(V,z,R=!1,O){let N;if((0,y.ME)(V)){const H=(0,y.iL)(V);return N={id:(0,y.Cs)(V),title:V.state.title,gridPos:z,libraryPanel:{name:H.state.name,uid:H.state.uid},type:"library-panel-ref"},N}else N={id:(0,y.Cs)(V),type:V.state.pluginId,title:V.state.title,description:V.state.description??void 0,gridPos:z,fieldConfig:V.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:V.state.displayMode==="transparent",pluginVersion:V.state.pluginVersion,...M(V,R)};if(V.state.options){const{angularOptions:H,...K}=V.state.options;N.options=K,H&&(0,n.defaults)(N,H)}const F=V.state.$timeRange;F instanceof E.v&&(N.timeFrom=F.state.timeFrom,N.timeShift=F.state.timeShift,N.hideTimeOverride=F.state.hideTimeOverride,N.timeCompare=F.state.compareWith),O instanceof r.U&&(O.state.variableName&&(N.repeat=O.state.variableName),O.state.maxPerRow&&(N.maxPerRow=O.state.maxPerRow),O.state.repeatDirection&&(N.repeatDirection=O.getRepeatDirection()));const G=x.b4.getPanelLinks(V);return N.links=G?.state.rawLinks??[],N.links.length===0&&delete N.links,N.transformations?.length===0&&delete N.transformations,N.transparent||delete N.transparent,N}function M(V,z=!1){const R=V.state.$data,O={},N=(0,y.un)(V);if(N&&(O.targets=N.state.queries,O.maxDataPoints=N.state.maxDataPoints,O.datasource=N.state.datasource,N.state.cacheTimeout&&(O.cacheTimeout=N.state.cacheTimeout),N.state.queryCachingTTL&&(O.queryCachingTTL=N.state.queryCachingTTL),N.state.minInterval&&(O.interval=N.state.minInterval)),R instanceof d.Es&&(O.transformations=R.state.transformations),R&&z){O.datasource=b.x;let F=(0,c.B6)(R.state.data);R instanceof d.Es&&(F=(0,c.B6)(R.state.$data.state.data)),O.targets=[{refId:"A",datasource:O.datasource,queryType:h.nj.Snapshot,snapshot:F}]}return O}function I(V,z=!1){if(z){if(V.state.body instanceof d.Eb&&(0,y.ME)(V.state.body)){const{x:H=0,y:K=0,width:w=0,height:Q=0}=V.state;return[T(V.state.body,{x:H,y:K,w,h:Q},z)]}const R=[V.state.body,...V.state.repeatedPanels??[]],{h:O,w:N,columnCount:F}=(0,y.bR)(V);return R.map((H,K)=>{let w=0,Q=0;V.state.repeatDirection==="v"?(w=V.state.x,Q=V.state.y+K*O):(w=K%F*N,Q=V.state.y+Math.floor(K/F)*O);const k={x:w,y:Q,w:N,h:O},te=H.state.$variables.getByName(V.state.variableName);return{id:(0,m.t)(H.state.key),type:H.state.pluginId,title:H.state.title,gridPos:k,options:H.state.options,fieldConfig:H.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:H.state.displayMode==="transparent",scopedVars:{[V.state.variableName]:{text:te?.state.text,value:te?.state.value}},...M(H,z)}})}else return[P(V)]}function B(V,z,R=!1){const O=!!V.state.isCollapsed,N={type:"row",id:(0,y.Cs)(V),title:V.state.title,gridPos:{x:V.state.x??0,y:V.state.y??0,w:V.state.width??24,h:V.state.height??1},collapsed:O,panels:[]};if(V.state.$behaviors?.length){const G=V.state.$behaviors[0];G instanceof g.L&&(N.repeat=G.state.variableName)}if(R&&V.state.$variables){const H=V.state.$variables.state.variables.reduce((K,w)=>({...K,[w.state.name]:{text:w.state.text,value:w.state.value}}),{});N.scopedVars=H}z.push(N);let F=[];R?V.state.children.forEach(G=>{G instanceof r.U&&(G.state.variableName?F=F.concat(I(G,!O)):F.push(P(G,!O)))}):F=V.state.children.map(G=>{if(!(G instanceof r.U))throw new Error("Row child expected to be DashboardGridItem");return P(G)}),V.state.isCollapsed?N.panels=F:z.push(...F)}function U(V,z,R,O){let N={...R,title:V,time:{from:z.from.toISOString(),to:z.to.toISOString()},links:[]};if(O){const F=R.panels?.find(G=>G.id===(0,y.Cs)(O));F&&(F.gridPos={w:24,x:0,y:0,h:20},N={...N,panels:[F]})}if(N.panels?.forEach(F=>{"links"in F&&(F.links=[])}),N.annotations){const G=(N.annotations.list?.filter(H=>H.enable)||[]).map(H=>({name:H.name,enable:H.enable,iconColor:H.iconColor,type:H.type,builtIn:H.builtIn,hide:H.hide,snapshotData:[]}));N.annotations.list=G}return N.templating&&N.templating.list?.forEach(F=>{"query"in F&&(F.query=""),"options"in F&&(F.options=F.current&&!(0,s.R)(F.current)?[F.current]:[]),"refresh"in F&&(F.refresh=o.CO.never)}),N}function W(V,z){const R={...V};for(const O in z)(0,n.isEqual)(R[O],z[O])&&delete R[O];return R}},70191:(ne,j,e)=>{"use strict";e.d(j,{k:()=>o});var n=e(60455),a=e.n(n),s=e(79609),d=e(62635);const o=(l,i,c)=>{let p={},h={};if(l.type===s.CC.Regex&&l.expression){const u=new RegExp(l.expression,"gi"),v=(typeof i=="string"?i:(0,d.MA)(i)).matchAll(u);for(const g of v)g.groups?h=g.groups:h[l.mapValue||c]=g[1]||g[0]}else l.type===s.CC.Logfmt&&i!==void 0&&(h=a().parse(i));return Object.keys(h).forEach(u=>{const r=typeof h[u]=="string"?h[u]:(0,d.MA)(h[u]);p[u]={value:r}}),p}},70327:(ne,j,e)=>{"use strict";e.d(j,{hK:()=>r});var n=e(92745),a=e(52161),s=e(39659),d=e(29609),o=e(5709),l=e(55143),i=e(78467),c=e(77295);const p="/api/v1/rule/test/grafana",h="api/prometheus/grafana/api/v1/rules";var u=(v=>(v.RuleName="rule_name",v.RuleNameVanilla="rule_name[]",v.RuleGroup="rule_group",v.RuleGroupVanilla="rule_group[]",v.Namespace="file",v.NamespaceVanilla="file[]",v.FolderUID="folder_uid",v.LimitAlerts="limit_alerts",v.MaxGroups="max_groups",v.ExcludeAlerts="exclude_alerts",v))(u||{});const r=o.H.injectEndpoints({endpoints:v=>({preview:v.mutation({query:({alertQueries:g,condition:E,customLabels:x,folder:m,alertName:y,alertUid:b})=>({url:p,data:{rule:{grafana_alert:{data:g,condition:E,no_data_state:"Alerting",title:y,uid:b??"N/A"},for:"0s",labels:(0,s.x4)(x),annotations:{}},folderUid:m.uid,folderTitle:m.title},method:"POST"})}),prometheusRulesByNamespace:v.query({query:({limitAlerts:g,identifier:E,filter:x,state:m,matcher:y})=>{const b=new URLSearchParams;g&&b.set("limit_alerts",String(g)),E&&((0,d.Mj)(E)||(0,d.X4)(E))&&(b.set("file",E.namespace),b.set("file[]",E.namespace),b.set("rule_group",E.groupName),b.set("rule_group[]",E.groupName));const f={...(0,i.ou)(x),...Object.fromEntries(b)};return{url:h,params:(0,i.Dj)(f,m,y)}},transformResponse:g=>(0,i.lH)(g.data.groups,a.hY)}),prometheusRuleNamespaces:v.query({query:({ruleSourceName:g,namespace:E,groupName:x,ruleName:m,dashboardUid:y,panelId:b,limitAlerts:D,maxGroups:f,excludeAlerts:C})=>{const P={dashboard_uid:y,panel_id:b?.toString()};return x&&(P.rule_group=x,P["rule_group[]"]=x),m&&(P.rule_name=m,P["rule_name[]"]=m),E&&((0,a.z2)(g)?P.folder_uid=E:(P.file=E,P["file[]"]=E)),D!==void 0&&(P.limit_alerts=String(D)),f&&(P.max_groups=String(f)),C&&(P.exclude_alerts="true"),{url:`api/prometheus/${(0,a.w5)(g)}/api/v1/rules`,params:P}},transformResponse:(g,E,x)=>(0,i.lH)(g.data.groups,x.ruleSourceName),providesTags:["CombinedAlertRule"]}),rulerRules:v.query({query:({rulerConfig:g,filter:E})=>{const{path:x,params:m}=(0,c.$o)(g).rules(E);return{url:x,params:m}},providesTags:["CombinedAlertRule"]}),rulerNamespace:v.query({query:({rulerConfig:g,namespace:E})=>{const{path:x,params:m}=(0,c.$o)(g).namespace(E);return{url:x,params:m}},providesTags:(g,E,{namespace:x,rulerConfig:m})=>[{type:"RuleNamespace",id:`${m.dataSourceUid}/${x}`}]}),getRuleGroupForNamespace:v.query({query:({rulerConfig:g,namespace:E,group:x,notificationOptions:m})=>{const{path:y,params:b}=(0,c.$o)(g).namespaceGroup(E,x);return{url:y,params:b,notificationOptions:m}},providesTags:(g,E,{namespace:x,group:m,rulerConfig:y})=>[{type:"RuleGroup",id:`${y.dataSourceUid}/${x}/${m}`},{type:"RuleNamespace",id:`${y.dataSourceUid}/${x}`}]}),getGrafanaRulerGroup:v.query({query:({folderUid:g,groupName:E})=>{const{path:x,params:m}=(0,c.$o)(l.b).namespaceGroup(g,E);return{url:x,params:m}},providesTags:(g,E,{folderUid:x,groupName:m})=>[{type:"RuleGroup",id:`grafana/${x}/${m}`},{type:"RuleNamespace",id:`grafana/${x}`}]}),deleteRuleGroupFromNamespace:v.mutation({query:({rulerConfig:g,namespace:E,group:x,notificationOptions:m})=>{const y=(0,n.t)("alerting.rule-groups.delete.success","Successfully deleted rule group"),{path:b,params:D}=(0,c.$o)(g).namespaceGroup(E,x);return{url:b,params:D,method:"DELETE",notificationOptions:{successMessage:y,...m}}},invalidatesTags:(g,E,{namespace:x,group:m,rulerConfig:y})=>[{type:"RuleGroup",id:`${y.dataSourceUid}/${x}/${m}`},{type:"RuleNamespace",id:`${y.dataSourceUid}/${x}`},"DeletedRules"]}),upsertRuleGroupForNamespace:v.mutation({query:({payload:g,namespace:E,rulerConfig:x,notificationOptions:m})=>{const{path:y,params:b}=(0,c.$o)(x).namespace(E),D=(0,n.t)("alerting.rule-groups.update.success","Successfully updated rule group");return{url:y,params:b,data:g,method:"POST",notificationOptions:{successMessage:D,...m}}},invalidatesTags:(g,E,{namespace:x,payload:m,rulerConfig:y})=>{const b=m.rules.filter(d.p.grafana.rule),D=[];return y.dataSourceUid===a.hY&&D.push({type:"GrafanaPrometheusGroups",id:`grafana/${x}/__any__/`},{type:"GrafanaPrometheusGroups",id:`grafana/${x}/${m.name}/__any__`},...b.map(f=>({type:"GrafanaPrometheusGroups",id:`grafana/${x}/${m.name}/${f.grafana_alert.title}`}))),[{type:"RuleNamespace",id:`${y.dataSourceUid}/${x}`},{type:"RuleGroup",id:`${y.dataSourceUid}/${x}/${m.name}`},...b.flatMap(f=>[{type:"GrafanaRulerRule",id:f.grafana_alert.uid},{type:"GrafanaRulerRuleVersion",id:f.grafana_alert.uid}]),...D,"DeletedRules"]}}),getAlertRule:v.query({query:({uid:g})=>({url:`/api/ruler/${a.hY}/api/v1/rule/${g}`}),providesTags:(g,E,{uid:x})=>[{type:"GrafanaRulerRule",id:x}]}),getAlertVersionHistory:v.query({query:({uid:g})=>({url:`/api/ruler/${a.hY}/api/v1/rule/${g}/versions`}),providesTags:(g,E,{uid:x})=>[{type:"GrafanaRulerRuleVersion",id:x}]}),exportRules:v.query({query:({format:g,folderUid:E,group:x,ruleUid:m})=>({url:"/api/ruler/grafana/api/v1/export/rules",params:{format:g,folderUid:E,group:x,ruleUid:m},responseType:"text"}),keepUnusedDataFor:0}),exportReceiver:v.query({query:({receiverName:g,decrypt:E,format:x})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:x,decrypt:E,name:g},responseType:"text"}),keepUnusedDataFor:0}),exportReceivers:v.query({query:({decrypt:g,format:E})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:E,decrypt:g},responseType:"text"}),keepUnusedDataFor:0}),exportPolicies:v.query({query:({format:g})=>({url:"/api/v1/provisioning/policies/export/",params:{format:g},responseType:"text"}),keepUnusedDataFor:0}),exportModifiedRuleGroup:v.mutation({query:({payload:g,format:E,nameSpaceUID:x})=>({url:`/api/ruler/grafana/api/v1/rules/${x}/export/`,params:{format:E},responseType:"text",data:g,method:"POST"})}),exportMuteTimings:v.query({query:({format:g})=>({url:"/api/v1/provisioning/mute-timings/export/",params:{format:g},responseType:"text"}),keepUnusedDataFor:0}),exportMuteTiming:v.query({query:({format:g,muteTiming:E})=>({url:`/api/v1/provisioning/mute-timings/${E}/export/`,params:{format:g},responseType:"text"}),keepUnusedDataFor:0}),getDeletedRules:v.query({query:()=>({url:`/api/ruler/${a.hY}/api/v1/rules/`,params:{deleted:"true"}}),transformResponse:g=>{const E=Object.values(g);return E.length>0?E[0][0]?.rules:[]},providesTags:["DeletedRules"]}),permanentlyDeleteRule:v.mutation({query:({guid:g})=>({url:`/api/ruler/${a.hY}/api/v1/trash/rule/guid/${g}`,method:"DELETE"}),invalidatesTags:["DeletedRules"]})})})},70332:(ne,j,e)=>{"use strict";e.d(j,{M:()=>s});var n=e(739),a=e(62748);function s(o,l){const c=`${o.min!==void 0?o.min:"na"}-${o.max!==void 0?o.max:"na"}`,p=`${o.custom?.axisSoftMin!==void 0?o.custom.axisSoftMin:"na"}-${o.custom?.axisSoftMax!==void 0?o.custom.axisSoftMax:"na"}`,h=`${o.custom?.axisPlacement!==void 0?o.custom?.axisPlacement:n.vM.Auto}`,u=o.unit??a.s,r=o.custom?.scaleDistribution?d(o.custom.scaleDistribution):n.L4.Linear,v=o.custom?.axisLabel?o.custom.axisLabel:"na";return`${u}/${c}/${p}/${h}/${r}/${v}/${l}`}function d(o){return o.type===n.L4.Log?`${o.type}${o.log}`:o.type}},70430:(ne,j,e)=>{"use strict";e.d(j,{w:()=>i});var n=e(74848),a=e(51898),s=e(92745),d=e(52847),o=e(32442),l=e(25379);function i({query:c,multi:p,allValue:h,includeAll:u,allowCustomValue:r,onQueryChange:v,onMultiChange:g,onIncludeAllChange:E,onAllValueChange:x,onAllowCustomValueChange:m}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.custom-variable-form.custom-options",children:"Custom options"})}),(0,n.jsx)(l.Z,{name:(0,s.t)("dashboard-scene.custom-variable-form.name-values-separated-comma","Values separated by comma"),defaultValue:c,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onBlur:v,required:!0,width:52,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),(0,n.jsx)(o.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.custom-variable-form.selection-options",children:"Selection options"})}),(0,n.jsx)(d.B,{multi:p,includeAll:u,allValue:h,allowCustomValue:r,onMultiChange:g,onIncludeAllChange:E,onAllValueChange:x,onAllowCustomValueChange:m})]})}},70663:(ne,j,e)=>{"use strict";e.d(j,{I:()=>s});var n=e(96540),a=e(63704);function s({component:d,content:o,...l}){return n.createElement(d||"span",{dangerouslySetInnerHTML:{__html:a.sQ.sanitize(o)},...l})}},70683:(ne,j,e)=>{"use strict";e.d(j,{f:()=>O});var n=e(74848),a=e(22803),s=e(31033),d=e(96540),o=e(92745),l=e(63142),i=e(30703),c=e(31286),p=e(15245),h=e(66404),u=e(45967),r=e(70733),v=e(92842),g=e(76319);const E=(0,d.forwardRef)(({children:G,onRemove:H,disabled:K,...w},Q)=>{const k=(0,l.of)(x,K),te=(0,o.t)("grafana-ui.value-pill.remove-button","Remove {{children}}",{children:G});return(0,n.jsxs)("span",{className:k.wrapper,...w,ref:Q,children:[(0,n.jsx)("span",{className:k.text,children:G}),!K&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:k.separator}),(0,n.jsx)(g.K,{name:"times",size:"md","aria-label":te,onClick:q=>{q.stopPropagation(),H()}})]})]})});E.displayName="ValuePill";const x=(G,H)=>({wrapper:(0,a.css)({display:"inline-flex",borderRadius:G.shape.radius.sm,color:G.colors.text.primary,background:G.colors.background.secondary,padding:G.spacing(.25),border:H?`1px solid ${G.colors.border.weak}`:"none",fontSize:G.typography.bodySmall.fontSize,flexShrink:0,minWidth:"50px",alignItems:"center","&:first-child:has(+ div)":{flexShrink:1}}),text:(0,a.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:G.spacing(0,1,0,.75)}),separator:(0,a.css)({background:G.colors.border.weak,width:"1px",height:"100%",marginRight:G.spacing(.5)})});var m=e(74440),y=e(98869),b=e(35484),D=e(63527);const f=(G,H,K,w,Q,k,te,q)=>{const se=(0,D.n)({theme:G,invalid:K}),re=(0,b.getFocusStyles)(G),Y=Q&&Q!=="auto"?G.spacing(Q):"100%",X=k?G.spacing(k):"",J=te?G.spacing(te):"";return{container:(0,a.css)({width:Q==="auto"?"auto":Y,minWidth:X,maxWidth:J,display:Q==="auto"?"inline-block":"block"}),wrapper:(0,a.cx)(se.input,(0,a.css)({display:"flex",alignItems:"center",width:"100%",gap:G.spacing(.5),padding:G.spacing(.5),paddingRight:q?G.spacing(5):28,"&:focus-within":{...re}})),input:(0,a.css)({border:"none",outline:"none",background:"transparent",flexGrow:1,maxWidth:"100%",minWidth:40,"&::placeholder":{color:G.colors.text.disabled},"&:focus":{outline:"none",cursor:"text"},cursor:"pointer"}),pillWrapper:(0,a.css)({display:"inline-flex",flexWrap:H?"wrap":"nowrap",flexGrow:1,minWidth:"50px",gap:G.spacing(.5)}),restNumber:(0,a.css)({display:"inline-flex",alignItems:"center",justifyContent:"center",padding:G.spacing(0,1),border:w?`1px solid ${G.colors.border.weak}`:"none",borderRadius:G.shape.radius.default,backgroundColor:G.colors.background.secondary,cursor:"pointer","&:hover":{backgroundColor:G.colors.action.hover}}),suffix:se.suffix,disabled:se.inputDisabled}};var C=e(33605),P=e(75168),T=e(49185),M=e(53568);const I=12,B=50,U=10,W=15;function V(G,H,K){const[w,Q]=(0,d.useState)(G.length),[k,{width:te}]=(0,T.A)(),[q,{width:se}]=(0,T.A)(),[re,{width:Y}]=(0,T.A)(),X=H&&H!=="auto"?H:te;return(0,d.useEffect)(()=>{const J=X-se-Y;let _=0;for(let ee=0;ee<G.length;ee++){if(_+=(0,M.kD)(G[ee].label||"",I).width+(K?U:B),_>J){Q(Math.min(ee,W)||1);break}ee===G.length-1&&Q(G.length)}},[X,se,Y,G,Q,K]),{measureRef:k,counterMeasureRef:q,suffixMeasureRef:re,shownItems:w}}function z(G){const H=(0,d.useRef)(null),K=(0,d.useRef)(0),[w,Q]=(0,d.useState)("");return(0,d.useLayoutEffect)(()=>{if(H.current&&G==null&&K.current===0&&(K.current=H?.current.getBoundingClientRect().width),!H.current||G==null){Q("");return}const k=window.getComputedStyle(H.current).fontSize,te=(0,M.kD)(H.current.value||"",parseInt(k,10)).width;te<K.current?Q(""):Q(`${te+5}px`)},[G]),{inputRef:H,inputWidth:w}}var R=e(5320);const O=G=>{const{placeholder:H,onChange:K,value:w,width:Q,enableAllOption:k,invalid:te,disabled:q,minWidth:se,maxWidth:re,isClearable:Y,createCustomValue:X=!1,"aria-labelledby":J,"data-testid":_,portalContainer:ee,prefixIcon:ae}=G,le=(0,l.of)(y.C3),[L,ie]=(0,d.useState)(""),oe=(0,d.useMemo)(()=>({label:L===""?(0,o.t)("multicombobox.all.title","All"):(0,o.t)("multicombobox.all.title-filtered","All (filtered)"),value:C.A}),[L]),{options:ue,updateOptions:ye,asyncLoading:fe,asyncError:Ee}=(0,R.II)(G.options,X),Ae=(0,d.useMemo)(()=>k&&ue.length>1?[oe,...ue]:ue,[ue,k,oe]),Ge=G.loading||fe,Fe=(0,d.useMemo)(()=>w?N(w,typeof G.options!="function"?G.options:ue):[],[w,G.options,ue]),{measureRef:Pe,counterMeasureRef:Ve,suffixMeasureRef:me,shownItems:Se}=V(Fe,Q,q),Qe=(0,d.useCallback)(rt=>Fe.some(ot=>ot.value===rt.value),[Fe]),{getSelectedItemProps:Ue,getDropdownProps:Ie,setSelectedItems:Re,addSelectedItem:Ke,removeSelectedItem:Le,reset:ze}=(0,s.mH)({selectedItems:Fe,onStateChange:({type:rt,selectedItems:ot})=>{switch(rt){case s.mH.stateChangeTypes.SelectedItemKeyDownBackspace:case s.mH.stateChangeTypes.SelectedItemKeyDownDelete:case s.mH.stateChangeTypes.DropdownKeyDownBackspace:case s.mH.stateChangeTypes.FunctionRemoveSelectedItem:case s.mH.stateChangeTypes.FunctionAddSelectedItem:case s.mH.stateChangeTypes.FunctionSetSelectedItems:case s.mH.stateChangeTypes.FunctionReset:K(ot??[]);break;default:break}},stateReducer:(rt,ot)=>{const{changes:mt}=ot;return{...mt,activeIndex:-999}}}),{getToggleButtonProps:Be,isOpen:$e,highlightedIndex:Ye,getMenuProps:de,getInputProps:ge,getItemProps:pe}=(0,s.Bp)({items:Ae,itemToString:m.y,inputValue:L,selectedItem:null,stateReducer:(rt,ot)=>{const{type:mt}=ot;let{changes:pt}=ot;switch(rt.isOpen===!1&&pt.isOpen===!0&&pt.inputValue===rt.inputValue&&(pt={...pt,inputValue:""}),mt){case s.Bp.stateChangeTypes.InputKeyDownEnter:case s.Bp.stateChangeTypes.ItemClick:return{...pt,isOpen:!0,highlightedIndex:rt.highlightedIndex};case s.Bp.stateChangeTypes.InputBlur:ie("");default:return pt}},onIsOpenChange:({isOpen:rt,inputValue:ot})=>{rt&&ot===""&&ye(ot)},onStateChange:({inputValue:rt,type:ot,selectedItem:mt})=>{switch(ot){case s.Bp.stateChangeTypes.InputKeyDownEnter:case s.Bp.stateChangeTypes.ItemClick:if(mt?.infoOption)break;if(mt?.value===C.A){const pt=Fe.length===Ae.length-1,ke=Ae.slice(1).filter(nt=>!nt.infoOption);let Ze=pt&&L===""?[]:ke;if(!pt&&L!==""&&(Ze=[...new Set([...Fe,...ke])]),pt&&L!==""){const nt=new Set(ke.map(ut=>ut.value));Ze=Fe.filter(ut=>!nt.has(ut.value))}Re(Ze)}else if(mt&&Qe(mt)){const pt=Fe.find(ke=>ke.value===mt.value);pt&&Le(pt)}else mt&&Ke(mt);break;case s.Bp.stateChangeTypes.InputChange:ie(rt??""),ye(rt??"");break;default:break}}}),{inputRef:De,floatingRef:Me,floatStyles:be,scrollRef:Oe}=(0,P.l)(Ae,$e),Ne=(0,l.of)(f,$e,te,q,Q,se,re,Y),We=$e?Fe.slice(0,W):Fe.slice(0,Se),{inputRef:qe,inputWidth:st}=z(L);return(0,n.jsxs)("div",{className:Ne.container,ref:De,children:[(0,n.jsxs)("div",{className:(0,a.cx)(Ne.wrapper,{[Ne.disabled]:q}),ref:Pe,children:[ae&&(0,n.jsx)(c.a,{marginLeft:.5,children:(0,n.jsx)(h.E,{color:"secondary",children:(0,n.jsx)(i.I,{name:ae})})}),(0,n.jsxs)("span",{className:Ne.pillWrapper,children:[We.map((rt,ot)=>(0,n.jsx)(E,{disabled:q,onRemove:()=>{Le(rt)},...Ue({selectedItem:rt,index:ot}),children:(0,m.y)(rt)},`${rt.value}${ot}`)),Fe.length>We.length&&(0,n.jsxs)(c.a,{display:"flex",direction:"row",marginLeft:.5,gap:1,ref:Ve,children:[(0,n.jsx)(h.E,{children:"..."}),(0,n.jsx)(u.m,{interactive:!0,content:(0,n.jsx)(n.Fragment,{children:Fe.slice(We.length).map(rt=>(0,n.jsx)("div",{children:(0,m.y)(rt)},rt.value))}),children:(0,n.jsx)("div",{className:Ne.restNumber,children:Fe.length-Se})})]}),(0,n.jsx)("input",{className:Ne.input,...ge({...Ie({disabled:q,preventKeyAction:$e,placeholder:We.length===0?H:"",ref:qe,style:{width:st}}),"aria-labelledby":J,"data-testid":_})}),(0,n.jsxs)("div",{className:Ne.suffix,ref:me,...Be(),children:[Y&&Fe.length>0&&(0,n.jsx)(i.I,{name:"times",className:le.clear,title:(0,o.t)("multicombobox.clear.title","Clear all"),tabIndex:0,role:"button",onClick:rt=>{rt.stopPropagation(),ze()},onKeyDown:rt=>{(rt.key==="Enter"||rt.key===" ")&&ze()}}),(0,n.jsx)(v.f,{isLoading:Ge||!1,isOpen:$e})]})]})]}),(0,n.jsx)(p.ZL,{root:ee,children:(0,n.jsx)("div",{className:(0,a.cx)(le.menu,!$e&&le.menuClosed),style:{...be,width:be.width+24,pointerEvents:"auto"},...de({ref:Me}),children:$e&&(0,n.jsx)(r.e,{loading:Ge,options:Ae,highlightedIndex:Ye,selectedItems:Fe,scrollRef:Oe,getItemProps:pe,enableAllOption:k,isMultiSelect:!0,error:Ee})})})]})};function N(G,H){if(F(G))return G;const K=new Map(G.map((Q,k)=>[Q,k])),w=[];for(const Q of H){const k=K.get(Q.value);if(k!==void 0&&(w[k]=Q,K.delete(Q.value)),K.size===0)break}for(const[Q,k]of K)w[k]={value:Q};return w}function F(G){return typeof G[0]=="object"}},70715:(ne,j,e)=>{"use strict";e.d(j,{A:()=>a,S:()=>d});var n=e(96540);const a=(0,n.createContext)(s());a.displayName="PluginPageContext";function s(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function d(o){return{sectionNav:o??s().sectionNav}}},70733:(ne,j,e)=>{"use strict";e.d(j,{e:()=>f});var n=e(74848),a=e(22803),s=e(72181),d=e(96540),o=e(63142),l=e(32635),i=e(92807),c=e(92745),p=e(30703),h=e(31286),u=e(41654),r=e(66404);const v=()=>(0,n.jsxs)(x,{children:[(0,n.jsx)(r.E,{color:"warning",children:(0,n.jsx)(p.I,{name:"exclamation-triangle",size:"md"})}),(0,n.jsx)(c.x6,{i18nKey:"combobox.async.error",children:"An error occurred while loading options."})]}),g=()=>(0,n.jsx)(x,{children:(0,n.jsx)(c.x6,{i18nKey:"combobox.options.no-found",children:"No options found."})}),E=()=>(0,n.jsx)(x,{children:(0,n.jsx)(c.x6,{i18nKey:"combobox.options.loading",children:"Loading options..."})}),x=({children:C})=>(0,n.jsx)(h.a,{padding:2,children:(0,n.jsx)(u.B,{justifyContent:"center",alignItems:"center",direction:"column",children:C})});var m=e(98869),y=e(33605),b=e(93521);const D=4,f=({options:C,highlightedIndex:P,selectedItems:T=[],scrollRef:M,getItemProps:I,enableAllOption:B,isMultiSelect:U=!1,error:W=!1,loading:V=!1})=>{const z=(0,o.of)(m.C3),R=(0,d.useCallback)(G=>{const H=(0,b.S)(C[G],G>0?C[G-1]:void 0),K="description"in C[G],w="group"in C[G];let Q=m.Aj;return K&&(Q=m.pg),H&&w&&(Q+=m.Aj),Q},[C]),O=(0,s.Te)({count:C.length,getScrollElement:()=>M.current,estimateSize:R,overscan:D}),N=(0,d.useCallback)(G=>T.some(H=>H.value===G.value),[T]),F=B&&C.length>1&&T.length===C.length-1;return(0,n.jsxs)(i.P,{showScrollIndicators:!0,maxHeight:"inherit",ref:M,padding:.5,children:[(0,n.jsx)("div",{style:{height:O.getTotalSize()},className:z.menuUlContainer,children:O.getVirtualItems().map((G,H,K)=>{const w=C[G.index],Q=(0,b.S)(w,C[G.index-1]),k=K.find(re=>C[re.index].group===w.group),te=k&&C[k.index],q=`combobox-option-${w.value}`,se=te?`combobox-option-group-${te.value}`:void 0;return(0,n.jsxs)("div",{className:z.listItem,style:{height:G.size,transform:`translateY(${G.start}px)`},children:[Q&&(0,n.jsx)("div",{role:"presentation","data-testid":"combobox-option-group",id:se,className:(0,a.cx)(z.optionGroupHeader,w.group&&z.optionGroupLabel,G.index===0&&z.optionFirstGroupHeader),children:w.group}),(0,n.jsxs)("div",{className:(0,a.cx)(z.option,!U&&N(w)&&z.optionSelected,P===G.index&&!w.infoOption&&z.optionFocused,w.infoOption&&z.optionInfo),...I({item:w,index:G.index,id:q,"aria-describedby":se,disabled:w.infoOption}),children:[U&&(0,n.jsx)("div",{className:z.optionAccessory,children:!w.infoOption&&(0,n.jsx)(l.S,{value:F||N(w),indeterminate:w.value===y.A&&T.length>0&&!F,"aria-labelledby":q,onClick:re=>{re.stopPropagation()},"data-testid":`${q}-checkbox`},q)}),(0,n.jsxs)("div",{className:z.optionBody,children:[(0,n.jsx)("div",{className:z.optionLabel,children:w.label??w.value}),w.description&&(0,n.jsx)("div",{className:z.optionDescription,children:w.description})]})]})]},w.value)})}),(0,n.jsxs)("div",{"aria-live":"polite",children:[W&&(0,n.jsx)(v,{}),!V&&C.length===0&&!W&&(0,n.jsx)(g,{}),V&&C.length===0&&(0,n.jsx)(E,{})]})]})}},70735:(ne,j,e)=>{"use strict";e.d(j,{k:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(49785),o=e(51898),l=e(92745),i=e(63142),c=e(45861),p=e(37386),h=e(63527),u=e(41654);const r=({body:g,confirmPromptText:E,confirmButtonLabel:x,confirmButtonVariant:m,dismissButtonVariant:y,dismissButtonLabel:b,onConfirm:D,onDismiss:f,onAlternative:C,alternativeButtonLabel:P,description:T,justifyButtons:M="flex-end",disabled:I})=>{const[B,U]=(0,s.useState)(I),W=(0,i.of)(v),V=(0,s.useRef)(null),z=F=>{U(E?.toLowerCase().localeCompare(F.currentTarget.value.toLowerCase())!==0)};(0,s.useEffect)(()=>{V.current?.focus()},[]),(0,s.useEffect)(()=>{U(I?!0:!!E)},[E,I]);const R=async()=>{I===void 0&&U(!0);try{await D()}finally{I===void 0&&U(!1)}},{handleSubmit:O}=(0,d.mN)(),N=(0,l.t)("grafana-ui.confirm-content.placeholder",'Type "{{confirmPromptText}}" to confirm',{confirmPromptText:E});return(0,n.jsxs)("form",{onSubmit:O(R),children:[(0,n.jsxs)("div",{className:W.text,children:[g,T?(0,n.jsx)("div",{className:W.description,children:T}):null,E?(0,n.jsx)("div",{className:W.confirmationInput,children:(0,n.jsx)(u.B,{alignItems:"flex-start",children:(0,n.jsx)(p.D,{disabled:I,children:(0,n.jsx)(h.p,{placeholder:N,onChange:z,"data-testid":o.Tp.pages.ConfirmModal.input})})})}):null]}),(0,n.jsx)("div",{className:W.buttonsContainer,children:(0,n.jsxs)(u.B,{justifyContent:M,gap:2,wrap:"wrap",children:[(0,n.jsx)(c.$n,{variant:y,onClick:f,fill:"outline",children:b}),(0,n.jsx)(c.$n,{type:"submit",variant:m,disabled:B,ref:V,"data-testid":o.Tp.pages.ConfirmModal.delete,children:x}),C?(0,n.jsx)(c.$n,{variant:"primary",onClick:C,children:P}):null]})})]})},v=g=>({text:(0,a.css)({fontSize:g.typography.h5.fontSize,color:g.colors.text.primary}),description:(0,a.css)({fontSize:g.typography.body.fontSize}),confirmationInput:(0,a.css)({paddingTop:g.spacing(1)}),buttonsContainer:(0,a.css)({paddingTop:g.spacing(3)})})},70905:(ne,j,e)=>{"use strict";e.d(j,{E:()=>V});var n=e(74848),a=e(22803),s=e(96540),d=e(70255),o=e(92745),l=e(43173),i=e(63142),c=e(30703),p=e(20941),h=e(21348),u=e(41097),r=e(54044),v=e(28105),g=e(22787),E=e(45861),x=e(37666),m=e(55290),y=e(30124),b=e(65307);const D={loadingState:v.Gu.Loading,dashboardTitles:[]},f=(0,b.VP)("libraryPanels/delete/searchCompleted"),C=(O=D,N)=>f.match(N)?{...O,dashboardTitles:N.payload.dashboards.map(F=>F.name),loadingState:v.Gu.Done}:O;function P(O){return async function(N){const F=await(0,y.xV)(O.uid);N(f({dashboards:F||[]}))}}const T=({libraryPanel:O,onDismiss:N,onConfirm:F})=>{const G=(0,i.of)(x.o),[{dashboardTitles:H,loadingState:K},w]=(0,s.useReducer)(C,D),Q=(0,s.useMemo)(()=>(0,m.QC)(w),[w]);(0,s.useEffect)(()=>{Q(P(O))},[Q,O]);const k=!!H.length,te=K===v.Gu.Done;return(0,n.jsxs)(g.a,{className:G.modal,title:(0,o.t)("library-panels.delete-library-panel-modal.title-delete-library-panel","Delete library panel"),icon:"trash-alt",onDismiss:N,isOpen:!0,children:[te?null:(0,n.jsx)(M,{}),te?(0,n.jsxs)("div",{children:[k?(0,n.jsx)(B,{dashboardTitles:H}):null,k?null:(0,n.jsx)(I,{}),(0,n.jsxs)(g.a.ButtonRow,{children:[(0,n.jsx)(E.$n,{variant:"secondary",onClick:N,fill:"outline",children:(0,n.jsx)(o.x6,{i18nKey:"library-panels.delete-library-panel-modal.cancel",children:"Cancel"})}),(0,n.jsx)(E.$n,{variant:"destructive",onClick:F,disabled:k,children:(0,n.jsx)(o.x6,{i18nKey:"library-panels.delete-library-panel-modal.delete",children:"Delete"})})]})]}):null]})},M=()=>(0,n.jsx)("span",{children:(0,n.jsx)(o.x6,{i18nKey:"library-panels.loading-indicator.loading-library-panel",children:"Loading library panel..."})}),I=()=>{const O=(0,i.of)(x.o);return(0,n.jsx)("div",{className:O.modalText,children:(0,n.jsx)(o.x6,{i18nKey:"library-panels.confirm.delete-panel",children:"Do you want to delete this panel?"})})},B=({dashboardTitles:O})=>{const N=(0,i.of)(x.o),F=O.length===1?"dashboard.":"dashboards.",G=`${O.length} ${F}`;return O.length===0?null:(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:N.textInfo,children:["This library panel can not be deleted because it is connected to ",(0,n.jsx)("strong",{children:G})," Remove the library panel from the dashboards listed below and retry."]}),(0,n.jsxs)("table",{className:N.myTable,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("th",{children:(0,n.jsx)(o.x6,{i18nKey:"library-panels.has-connected-dashboards.dashboard-name",children:"Dashboard name"})})})}),(0,n.jsx)("tbody",{children:O.map((H,K)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:H})},`dash-title-${K}`))})]})]})},U=({libraryPanel:O,onClick:N,onDelete:F,showSecondaryActions:G})=>{const[H,K]=(0,s.useState)(!1),w=()=>{F?.(O),K(!1)},Q=l.$.panels[O.model.type]??(0,u.$)(O.model.type).meta;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.b,{isCurrent:!1,title:O.name,description:O.description,plugin:Q,onClick:()=>N?.(O),onDelete:G?()=>K(!0):void 0,children:(0,n.jsx)(z,{libraryPanel:O})}),H&&(0,n.jsx)(T,{libraryPanel:O,onConfirm:w,onDismiss:()=>K(!1)})]})},W=({showSecondaryActions:O,rootProps:N})=>{const F=(0,i.of)(R);return(0,n.jsx)(r.b.Skeleton,{hasDelete:O,...N,children:(0,n.jsx)(d.A,{containerClassName:F.metaContainer,width:80})})},V=(0,h.j)(U,W);function z({libraryPanel:O}){const N=(0,i.of)(R);return!O.meta?.folderUid&&!O.meta?.folderName?null:O.meta.folderUid?(0,n.jsx)("span",{className:N.metaContainer,children:(0,n.jsxs)(p.N,{href:`/dashboards/f/${O.meta.folderUid}`,children:[(0,n.jsx)(c.I,{name:"folder-upload",size:"sm"}),(0,n.jsx)("span",{children:O.meta.folderName})]})}):(0,n.jsxs)("span",{className:N.metaContainer,children:[(0,n.jsx)(c.I,{name:"folder",size:"sm"}),(0,n.jsx)("span",{children:(0,n.jsx)(o.x6,{i18nKey:"library-panels.folder-link.dashboards",children:"Dashboards"})})]})}function R(O){return{metaContainer:(0,a.css)({display:"flex",alignItems:"center",color:O.colors.text.secondary,fontSize:O.typography.bodySmall.fontSize,paddingTop:O.spacing(.5),svg:{marginRight:O.spacing(.5),marginBottom:3}})}}},70958:(ne,j,e)=>{"use strict";e.d(j,{s:()=>d});var n=e(96540),a=e(54148),s=e(36490);function d(){const{search:o}=(0,a.zy)(),l=(0,n.useMemo)(()=>(0,s.SE)(o||""),[o]),i=(0,n.useCallback)((c,p)=>s.Ny.partial(c,p),[]);return[l,i]}},70969:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>c});var n=e(74848),a=e(22429),s=e(16200),d=e(37680),o=e(66769);const i=`You are an expert in creating Grafana Dashboards.
Your goal is to write a concise dashboard title.
You will be given the title and description of the dashboard's panels.
The dashboard title is meant to say what it shows on one line for users to navigate to it.
If the dashboard has no panels, the title should be "Empty dashboard"
There should be no numbers in the title.
The dashboard title should not have quotation marks in it.
The title should be, at most, 50 characters.
Respond with only the title of the dashboard.`,c=({onGenerate:h})=>{const u=(0,a.UA)().getCurrent(),r=(0,o.N3)(u);return(0,n.jsx)(s.n,{messages:p(u),onGenerate:h,eventTrackingSrc:d.ec.dashboardTitle,toggleTipTitle:"Improve your dashboard title",disabled:r.length===0,tooltip:r.length===0?o.ZN:void 0})};function p(h){return[{content:i,role:o.Xh.system},{content:`The panels in the dashboard are: ${(0,o.BB)(h)}`,role:o.Xh.user}]}},70977:(ne,j,e)=>{"use strict";e.d(j,{f:()=>r});var n=e(74848),a=e(96540),s=e(51898),d=e(92745),o=e(41654),l=e(37386),i=e(21285),c=e(32442),p=e(68577),h=e(58228);const u=[{label:"Before query values",value:"before"},{label:"After query values",value:"after"},{label:"Sorted with query values",value:"sorted"}];function r(v){const{staticOptions:g,onStaticOptionsChange:E,staticOptionsOrder:x,onStaticOptionsOrderChange:m}=v,y=u.find(f=>f.value===x)??u[0],[b,D]=(0,a.useState)(!!g?.length);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Y,{children:(0,n.jsx)(d.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.static-options-legend",children:"Static options"})}),(0,n.jsxs)(o.B,{direction:"column",gap:2,children:[(0,n.jsx)(l.D,{noMargin:!0,label:(0,d.t)("dashboard-scene.query-variable-editor-form.label-use-static-options","Use static options"),description:(0,d.t)("variables.query-variable-static-options.description","Add custom options in addition to query results"),children:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.B,{direction:"column",gap:2,children:[(0,n.jsx)(i.d,{"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsToggle,value:b,onChange:f=>{f.currentTarget.checked?D(!0):(D(!1),g?.length&&E(void 0))}}),b&&(0,n.jsx)(h.b,{allowEmptyValue:!0,options:g??[],onChange:E})]})})}),b&&(0,n.jsx)(p.v,{name:(0,d.t)("dashboard-scene.query-variable-editor-form.label-static-options-sort","Static options sort"),description:(0,d.t)("variables.query-variable-static-options-sort-select.description-values-variable","How to sort static options with query results"),value:y,options:u,onChange:f=>m(f.value),testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsOrderDropdown,width:25})]})]})}},71076:(ne,j,e)=>{"use strict";e.d(j,{o:()=>c});var n=e(74848),a=e(22803),s=e(96540),d=e(52908),o=e(63142),l=e(35484),i=e(55302);const c=({position:{x:h,y:u},offset:{x:r,y:v},children:g,allowPointerEvents:E=!1,className:x,...m})=>{const y=(0,s.useRef)(null),[b,D]=(0,s.useState)({width:0,height:0}),{width:f,height:C}=(0,d.A)(),[P,T]=(0,s.useState)({x:h+r,y:u+v}),M=(0,s.useMemo)(()=>new ResizeObserver(B=>{for(let U of B){const W=Math.floor(U.contentRect.width+16),V=Math.floor(U.contentRect.height+16);(b.width!==W||b.height!==V)&&D({width:Math.min(W,f),height:Math.min(V,C)})}}),[b,f,C]);(0,s.useLayoutEffect)(()=>(y.current&&M.observe(y.current),()=>{M.disconnect()}),[M]),(0,s.useLayoutEffect)(()=>{if(y&&y.current){const{x:B,y:U}=(0,i.Ju)(h,u,b.width,b.height,r,v,f,C);T({x:B,y:U})}},[f,C,h,r,u,v,b]);const I=(0,o.of)(p);return(0,n.jsx)("div",{ref:y,style:{position:"fixed",left:0,pointerEvents:E?"auto":"none",top:0,transform:`translate(${P.x}px, ${P.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...m,className:(0,a.cx)(I.wrapper,x),children:g})};c.displayName="VizTooltipContainer";const p=h=>({wrapper:(0,a.css)((0,l.getTooltipContainerStyles)(h))})},71199:(ne,j,e)=>{"use strict";e.d(j,{B:()=>u});var n=e(74848),a=e(92745),s=e(30703),d=e(76319),o=e(45967),l=e(34999),i=e(66404),c=e(41654),p=e(33143),h=e(87748);function u({children:r,info:v,isObjectSupported:g,model:E,title:x}){return(0,n.jsxs)(c.B,{direction:"column",children:[(0,n.jsxs)(c.B,{direction:"row",gap:1,children:[(0,n.jsx)(i.E,{variant:"bodySmall",children:x}),v&&(0,n.jsx)(o.m,{content:v,children:(0,n.jsx)(s.I,{name:"info-circle"})})]}),(0,n.jsxs)(c.B,{direction:"row",gap:1,justifyContent:"stretch",alignItems:"center",children:[(0,n.jsxs)(c.B,{flex:1,direction:"column",gap:1,children:[r,!g&&(0,n.jsx)(l.F,{severity:"error",title:"",children:(0,n.jsx)(a.x6,{i18nKey:"dashboard.conditional-rendering.conditions.wrapper.unsupported-object-type",children:"This condition is not supported by the element, hence it will be ignored."})})]}),(0,n.jsx)(d.K,{"aria-label":(0,a.t)("dashboard.conditional-rendering.conditions.wrapper.delete-condition","Delete Condition"),name:"trash-alt",onClick:()=>{const m=(0,h.I7)(E);p.cc.edit({description:(0,a.t)("dashboard.conditional-rendering.conditions.wrapper.delete-condition","Delete Condition"),source:E,perform:()=>(0,h.Am)(E),undo:()=>{m>-1&&(0,h.AR)(E,m)}})}})]})]},E.state.key)}},71313:(ne,j,e)=>{"use strict";e.d(j,{qR:()=>Ve,tj:()=>F,bS:()=>q,ZL:()=>P,L:()=>ue,Qo:()=>G,So:()=>U,KA:()=>T,F9:()=>Ae,Bm:()=>V,Kw:()=>R,$j:()=>w,qC:()=>k,$9:()=>se,Sw:()=>M,Cx:()=>Y,nS:()=>ee,c2:()=>le,v$:()=>Fe,L3:()=>r,Ih:()=>f,XM:()=>N,hD:()=>B});var n=e(75816),a=e(59553),s=e(73659);const l=(0,a.TP)("provisioning.grafana.app","v0alpha1"),i=(0,n.xP)({reducerPath:"provisioningAPIv0alpha1",baseQuery:(0,s.W)({baseURL:l}),endpoints:()=>({})}),c=["API Discovery","Job","Repository","Provisioning"],p=i.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:me=>({getApiResources:me.query({query:()=>({url:"/apis/provisioning.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),listJob:me.query({query:Se=>({url:"/jobs",params:{pretty:Se.pretty,allowWatchBookmarks:Se.allowWatchBookmarks,continue:Se.continue,fieldSelector:Se.fieldSelector,labelSelector:Se.labelSelector,limit:Se.limit,resourceVersion:Se.resourceVersion,resourceVersionMatch:Se.resourceVersionMatch,sendInitialEvents:Se.sendInitialEvents,timeoutSeconds:Se.timeoutSeconds,watch:Se.watch}}),providesTags:["Job"]}),createJob:me.mutation({query:Se=>({url:"/jobs",method:"POST",body:Se.job,params:{pretty:Se.pretty,dryRun:Se.dryRun,fieldManager:Se.fieldManager,fieldValidation:Se.fieldValidation}}),invalidatesTags:["Job"]}),deletecollectionJob:me.mutation({query:Se=>({url:"/jobs",method:"DELETE",params:{pretty:Se.pretty,continue:Se.continue,dryRun:Se.dryRun,fieldSelector:Se.fieldSelector,gracePeriodSeconds:Se.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:Se.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:Se.labelSelector,limit:Se.limit,orphanDependents:Se.orphanDependents,propagationPolicy:Se.propagationPolicy,resourceVersion:Se.resourceVersion,resourceVersionMatch:Se.resourceVersionMatch,sendInitialEvents:Se.sendInitialEvents,timeoutSeconds:Se.timeoutSeconds}}),invalidatesTags:["Job"]}),getJob:me.query({query:Se=>({url:`/jobs/${Se.name}`,params:{pretty:Se.pretty}}),providesTags:["Job"]}),replaceJob:me.mutation({query:Se=>({url:`/jobs/${Se.name}`,method:"PUT",body:Se.job,params:{pretty:Se.pretty,dryRun:Se.dryRun,fieldManager:Se.fieldManager,fieldValidation:Se.fieldValidation}}),invalidatesTags:["Job"]}),deleteJob:me.mutation({query:Se=>({url:`/jobs/${Se.name}`,method:"DELETE",params:{pretty:Se.pretty,dryRun:Se.dryRun,gracePeriodSeconds:Se.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:Se.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:Se.orphanDependents,propagationPolicy:Se.propagationPolicy}}),invalidatesTags:["Job"]}),updateJob:me.mutation({query:Se=>({url:`/jobs/${Se.name}`,method:"PATCH",body:Se.patch,params:{pretty:Se.pretty,dryRun:Se.dryRun,fieldManager:Se.fieldManager,fieldValidation:Se.fieldValidation,force:Se.force}}),invalidatesTags:["Job"]}),listRepository:me.query({query:Se=>({url:"/repositories",params:{pretty:Se.pretty,allowWatchBookmarks:Se.allowWatchBookmarks,continue:Se.continue,fieldSelector:Se.fieldSelector,labelSelector:Se.labelSelector,limit:Se.limit,resourceVersion:Se.resourceVersion,resourceVersionMatch:Se.resourceVersionMatch,sendInitialEvents:Se.sendInitialEvents,timeoutSeconds:Se.timeoutSeconds,watch:Se.watch}}),providesTags:["Repository"]}),createRepository:me.mutation({query:Se=>({url:"/repositories",method:"POST",body:Se.repository,params:{pretty:Se.pretty,dryRun:Se.dryRun,fieldManager:Se.fieldManager,fieldValidation:Se.fieldValidation}}),invalidatesTags:["Repository"]}),deletecollectionRepository:me.mutation({query:Se=>({url:"/repositories",method:"DELETE",params:{pretty:Se.pretty,continue:Se.continue,dryRun:Se.dryRun,fieldSelector:Se.fieldSelector,gracePeriodSeconds:Se.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:Se.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:Se.labelSelector,limit:Se.limit,orphanDependents:Se.orphanDependents,propagationPolicy:Se.propagationPolicy,resourceVersion:Se.resourceVersion,resourceVersionMatch:Se.resourceVersionMatch,sendInitialEvents:Se.sendInitialEvents,timeoutSeconds:Se.timeoutSeconds}}),invalidatesTags:["Repository"]}),getRepository:me.query({query:Se=>({url:`/repositories/${Se.name}`,params:{pretty:Se.pretty}}),providesTags:["Repository"]}),replaceRepository:me.mutation({query:Se=>({url:`/repositories/${Se.name}`,method:"PUT",body:Se.repository,params:{pretty:Se.pretty,dryRun:Se.dryRun,fieldManager:Se.fieldManager,fieldValidation:Se.fieldValidation}}),invalidatesTags:["Repository"]}),deleteRepository:me.mutation({query:Se=>({url:`/repositories/${Se.name}`,method:"DELETE",params:{pretty:Se.pretty,dryRun:Se.dryRun,gracePeriodSeconds:Se.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:Se.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:Se.orphanDependents,propagationPolicy:Se.propagationPolicy}}),invalidatesTags:["Repository"]}),updateRepository:me.mutation({query:Se=>({url:`/repositories/${Se.name}`,method:"PATCH",body:Se.patch,params:{pretty:Se.pretty,dryRun:Se.dryRun,fieldManager:Se.fieldManager,fieldValidation:Se.fieldValidation,force:Se.force}}),invalidatesTags:["Repository"]}),getRepositoryFiles:me.query({query:Se=>({url:`/repositories/${Se.name}/files/`,params:{ref:Se.ref}}),providesTags:["Repository"]}),getRepositoryFilesWithPath:me.query({query:Se=>({url:`/repositories/${Se.name}/files/${Se.path}`,params:{ref:Se.ref}}),providesTags:["Repository"]}),replaceRepositoryFilesWithPath:me.mutation({query:Se=>({url:`/repositories/${Se.name}/files/${Se.path}`,method:"PUT",body:Se.body,params:{ref:Se.ref,message:Se.message,skipDryRun:Se.skipDryRun,originalPath:Se.originalPath}}),invalidatesTags:["Repository"]}),createRepositoryFilesWithPath:me.mutation({query:Se=>({url:`/repositories/${Se.name}/files/${Se.path}`,method:"POST",body:Se.body,params:{ref:Se.ref,message:Se.message,skipDryRun:Se.skipDryRun,originalPath:Se.originalPath}}),invalidatesTags:["Repository"]}),deleteRepositoryFilesWithPath:me.mutation({query:Se=>({url:`/repositories/${Se.name}/files/${Se.path}`,method:"DELETE",params:{ref:Se.ref,message:Se.message,skipDryRun:Se.skipDryRun,originalPath:Se.originalPath}}),invalidatesTags:["Repository"]}),getRepositoryHistory:me.query({query:Se=>({url:`/repositories/${Se.name}/history`,params:{ref:Se.ref}}),providesTags:["Repository"]}),getRepositoryHistoryWithPath:me.query({query:Se=>({url:`/repositories/${Se.name}/history/${Se.path}`,params:{ref:Se.ref}}),providesTags:["Repository"]}),getRepositoryJobs:me.query({query:Se=>({url:`/repositories/${Se.name}/jobs`}),providesTags:["Repository"]}),createRepositoryJobs:me.mutation({query:Se=>({url:`/repositories/${Se.name}/jobs`,method:"POST",body:Se.jobSpec}),invalidatesTags:["Repository"]}),getRepositoryJobsWithPath:me.query({query:Se=>({url:`/repositories/${Se.name}/jobs/${Se.uid}`}),providesTags:["Repository"]}),getRepositoryRefs:me.query({query:Se=>({url:`/repositories/${Se.name}/refs`}),providesTags:["Repository"]}),getRepositoryRenderWithPath:me.query({query:Se=>({url:`/repositories/${Se.name}/render/${Se.guid}`}),providesTags:["Repository"]}),getRepositoryResources:me.query({query:Se=>({url:`/repositories/${Se.name}/resources`}),providesTags:["Repository"]}),getRepositoryStatus:me.query({query:Se=>({url:`/repositories/${Se.name}/status`,params:{pretty:Se.pretty}}),providesTags:["Repository"]}),replaceRepositoryStatus:me.mutation({query:Se=>({url:`/repositories/${Se.name}/status`,method:"PUT",body:Se.repository,params:{pretty:Se.pretty,dryRun:Se.dryRun,fieldManager:Se.fieldManager,fieldValidation:Se.fieldValidation}}),invalidatesTags:["Repository"]}),updateRepositoryStatus:me.mutation({query:Se=>({url:`/repositories/${Se.name}/status`,method:"PATCH",body:Se.patch,params:{pretty:Se.pretty,dryRun:Se.dryRun,fieldManager:Se.fieldManager,fieldValidation:Se.fieldValidation,force:Se.force}}),invalidatesTags:["Repository"]}),createRepositoryTest:me.mutation({query:Se=>({url:`/repositories/${Se.name}/test`,method:"POST",body:Se.body}),invalidatesTags:["Repository"]}),getRepositoryWebhook:me.query({query:Se=>({url:`/repositories/${Se.name}/webhook`}),providesTags:["Repository"]}),createRepositoryWebhook:me.mutation({query:Se=>({url:`/repositories/${Se.name}/webhook`,method:"POST"}),invalidatesTags:["Repository"]}),getFrontendSettings:me.query({query:()=>({url:"/settings"}),providesTags:["Provisioning","Repository"]}),getResourceStats:me.query({query:()=>({url:"/stats"}),providesTags:["Provisioning","Repository"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:h,useLazyGetApiResourcesQuery:u,useListJobQuery:r,useLazyListJobQuery:v,useCreateJobMutation:g,useDeletecollectionJobMutation:E,useGetJobQuery:x,useLazyGetJobQuery:m,useReplaceJobMutation:y,useDeleteJobMutation:b,useUpdateJobMutation:D,useListRepositoryQuery:f,useLazyListRepositoryQuery:C,useCreateRepositoryMutation:P,useDeletecollectionRepositoryMutation:T,useGetRepositoryQuery:M,useLazyGetRepositoryQuery:I,useReplaceRepositoryMutation:B,useDeleteRepositoryMutation:U,useUpdateRepositoryMutation:W,useGetRepositoryFilesQuery:V,useLazyGetRepositoryFilesQuery:z,useGetRepositoryFilesWithPathQuery:R,useLazyGetRepositoryFilesWithPathQuery:O,useReplaceRepositoryFilesWithPathMutation:N,useCreateRepositoryFilesWithPathMutation:F,useDeleteRepositoryFilesWithPathMutation:G,useGetRepositoryHistoryQuery:H,useLazyGetRepositoryHistoryQuery:K,useGetRepositoryHistoryWithPathQuery:w,useLazyGetRepositoryHistoryWithPathQuery:Q,useGetRepositoryJobsQuery:k,useLazyGetRepositoryJobsQuery:te,useCreateRepositoryJobsMutation:q,useGetRepositoryJobsWithPathQuery:se,useLazyGetRepositoryJobsWithPathQuery:re,useGetRepositoryRefsQuery:Y,useLazyGetRepositoryRefsQuery:X,useGetRepositoryRenderWithPathQuery:J,useLazyGetRepositoryRenderWithPathQuery:_,useGetRepositoryResourcesQuery:ee,useLazyGetRepositoryResourcesQuery:ae,useGetRepositoryStatusQuery:le,useLazyGetRepositoryStatusQuery:L,useReplaceRepositoryStatusMutation:ie,useUpdateRepositoryStatusMutation:oe,useCreateRepositoryTestMutation:ue,useGetRepositoryWebhookQuery:ye,useLazyGetRepositoryWebhookQuery:fe,useCreateRepositoryWebhookMutation:Ee,useGetFrontendSettingsQuery:Ae,useLazyGetFrontendSettingsQuery:Ge,useGetResourceStatsQuery:Fe,useLazyGetResourceStatsQuery:Pe}=p,Ve=p.enhanceEndpoints({})},71393:(ne,j,e)=>{"use strict";e.d(j,{BN:()=>F});var n=e(2543),a=e(62467),s=e(44240),d=e(39697),o=e(65474),l=e(81160),i=e(66847),c=e(59099),p=e(1005),h=e(65961),u=e(67791),r=e(69862),v=e(28105),g=e(739),E=e(33239),x=e(1906),m=e(97534),y=e(38353),b=e(43173),D=e(36580),f=e(83873),C=e(1404),P=e(29328),T=e(25992);const M=(0,T.DW)("features.query");var I=e(77526),B=e(5556),U=e(33749),W=e(27489),V=e(22429);function z(K){let w=!1;return k=>{if(!k.request||w||B.kM.getUrlSearchParams().editPanel!=null||k.state!==v.Gu.Done&&k.state!==v.Gu.Error)return;const q={eventName:U.n_.DataRequest,source:k.request.app,datasourceName:K.name,datasourceId:K.id,datasourceUid:K.uid,datasourceType:K.type,dataSize:0,panelId:0,panelPluginId:k.request?.panelPluginId,duration:k.request.endTime-k.request.startTime,...k?.request?.panelId&&Number.isInteger(k.request.panelId)&&{panelId:k.request.panelId},...k?.request?.panelName&&{panelName:k.request.panelName}};Q(q,k),k.request.app!==x.Jk.Explore&&k.request.app!==x.Jk.Correlations&&R(q,k),k.series&&k.series.length>0&&(q.dataSize=k.series.length),(0,W.G$)(q),w=!0};function Q(k,te){const q={};for(let re=0;re<te.series.length;re++){const Y=te.series[re].refId;Y&&!q[Y]&&(q[Y]=te.series[re].meta?.isCachedResponse??!1)}k.totalQueries=Object.keys(q).length,k.cachedQueries=Object.values(q).filter(re=>re===!0).length;const se=(0,V.UA)().getCurrent();se&&(k.dashboardId=se.id,k.dashboardName=se.title,k.dashboardUid=se.uid,k.folderName=se.meta.folderTitle)}}function R(K,w){w.errors?.length?K.error=w.errors.map(Q=>Q.message).join(", "):w.error&&(K.error=w.error.message)}function O(K,w){const Q=w.panelData.request,k={...w.packets},te=K.key??K.data?.[0]?.refId??"A";k[te]=K;let q=K.state||v.Gu.Done,se,re;const Y=[],X=[];for(const ae in k){const le=k[ae];if((le.error||le.errors?.length)&&(q=v.Gu.Error,se=le.error,re=le.errors),le.data&&le.data.length)for(const L of le.data){if(L.meta?.dataTopic===g.QR.Annotations){X.push(L);continue}Y.push(L)}}const J=N(Q,q),_={state:q,series:Y,annotations:X,error:se,errors:re,request:Q,timeRange:J},ee=new Set([...w.panelData.traceIds??[],...K.traceIds??[]]);return ee.size>0&&(_.traceIds=Array.from(ee)),{packets:k,panelData:_}}function N(K,w){const Q=K.range;return!(0,n.isString)(Q.raw.from)||w!==v.Gu.Streaming?Q:{...Q,from:E.parse(Q.raw.from,!1),to:E.parse(Q.raw.to,!0)}}function F(K,w,Q){let k={panelData:{state:v.Gu.Loading,series:[],request:w,timeRange:w.range},packets:{}};if(!w.targets.length)return w.endTime=Date.now(),k.panelData.state=v.Gu.Done,(0,a.of)(k.panelData);const te=G(K,w,Q).pipe((0,l.T)(q=>{if(!(0,n.map)(q.data))throw new Error(`Expected response data to be array, got ${typeof q.data}.`);const se=w.targets.filter(re=>re.hide);for(const re of se)q.data=q.data.filter(Y=>Y.refId!==re.refId);return w.endTime=Date.now(),k=O(q,k),k.panelData}),(0,i.W)(q=>(console.error("runRequest.catchError",q),M.logError(q),(0,a.of)({...k.panelData,state:v.Gu.Error,error:(0,m.u)(q)}))),(0,c.M)(z(K)),(0,I.N)(f.IB,w.requestId),(0,p.u)());return(0,s.h)((0,d.O)(200).pipe((0,h.u)(k.panelData),(0,u.Q)(te)),te)}function G(K,w,Q){if((0,y.LZ)(K)){const k=(0,y.xt)(K,w);return(0,o.H)(k).pipe((0,r.Z)(te=>H(K,te,Q)))}return H(K,w,Q)}function H(K,w,Q){if(w.targets=w.targets.map(te=>(0,C.Ih)(te)?{...K?.getDefaultQuery?.(x.Jk.PanelEditor),...te}:te),b.$.publicDashboardAccessToken)return(0,o.H)(K.query(w));for(const te of w.targets)if((0,D.s9)(te.datasource))return P.Ex.query(w);if(Q||(w.targets=w.targets.filter(te=>K.filterQuery?.(te)??!0)),w.targets.length===0)return(0,a.of)({data:[]});const k=Q?Q(w):K.query(w);return(0,o.H)(k)}},71451:(ne,j,e)=>{"use strict";e.d(j,{n:()=>m});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(43533),l=e(2381),i=e(45861),c=e(18027),p=e(97095),h=e(63527),u=e(63142),r=e(14226),v=e(30868),g=e(20012),E=e(4896),x=e(73304);const m=D=>{const{value:f,src:C,name:P,placeholder:T,onChange:M,onClear:I,mediaType:B,folderName:U,size:W,color:V,maxFiles:z}=D,R=(0,u.of)(b),O=(0,u.$j)(),N=(0,s.useRef)(null),F=Q=>(0,n.jsx)(x.i,{onChange:M,value:f,mediaType:B,folderName:U,maxFiles:z,hidePopper:Q.hidePopper});let G=C;!G&&f&&(G=(0,g.D)(f));const H=V&&{fill:O.visualization.getColorByName(V)},K=()=>f&&G?(0,n.jsx)(v.y,{src:G,className:R.icon,style:{...H}}):(0,n.jsx)(i.z9,{variant:"primary",fill:"text",size:"sm",children:(0,n.jsx)(d.x6,{i18nKey:"dimensions.resource-picker.render-small-resource-picker.set-icon",children:"Set icon"})}),w=()=>(0,n.jsx)(p.C,{children:(0,n.jsx)(c.I,{label:null,grow:!0,children:(0,n.jsx)(h.p,{value:y(C,P),placeholder:T,readOnly:!0,prefix:G&&(0,n.jsx)(v.y,{src:G,className:R.icon,style:{...H}}),suffix:(0,n.jsx)(i.$n,{"aria-label":(0,d.t)("dimensions.resource-picker.aria-label-clear-value","Clear value"),icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:I})})})});return(0,n.jsx)(o.I,{content:F,children:(Q,k,te)=>(0,n.jsxs)(n.Fragment,{children:[N.current&&(0,n.jsx)(l.A,{...te,referenceElement:N.current,onMouseEnter:Q,onKeyDown:q=>{(0,r.Q)(q,k)},hidePopper:k}),(0,n.jsxs)("div",{ref:N,className:R.pointer,onClick:Q,onKeyDown:q=>{q.key==="Enter"&&Q()},role:"button",tabIndex:0,children:[W===E.Iy.SMALL&&K(),W===E.Iy.NORMAL&&w()]})]})})};function y(D,f){if(D?.startsWith("public/build/img/icons")){const C=f?.lastIndexOf(".svg")??0;if(C>0)return f.substring(0,C)}return f}const b=D=>({pointer:(0,a.css)({cursor:"pointer","input[readonly]":{cursor:"pointer"}}),icon:(0,a.css)({verticalAlign:"middle",display:"inline-block",fill:"currentColor",width:"25px"})})},71479:(ne,j,e)=>{"use strict";e.d(j,{p:()=>l});var n=e(74848),a=e(22803),s=e(96540),d=e(76637),o=e(63142);const l=s.memo(s.forwardRef(({color:c,className:p,gradient:h,lineStyle:u,noMargin:r,...v},g)=>{const E=(0,o.$j)(),x=(0,o.of)(i);let m;if(h){const b=d.uf.get(h).getColors?.(E);b?.length?m=`linear-gradient(90deg, ${b.join(", ")})`:m=E.visualization.getColorByName("")}else m=c;let y;return u?.fill==="dot"&&!h?y={backgroundImage:`radial-gradient(circle at 2px 2px, ${c} 2px, transparent 0)`,backgroundSize:"4px 4px",backgroundRepeat:"space"}:u?.fill==="dash"&&!h?y={backgroundImage:`linear-gradient(to right, ${c} 100%, transparent 0%)`,backgroundSize:"6px 4px",backgroundRepeat:"space"}:y={background:m,borderRadius:E.shape.radius.pill},(0,n.jsx)("div",{"data-testid":"series-icon",ref:g,className:(0,a.cx)(p,x.forcedColors,x.container,r?null:x.margin),style:y,...v})})),i=c=>({margin:(0,a.css)({marginRight:"8px"}),container:(0,a.css)({display:"inline-block",width:"14px",height:"4px"}),forcedColors:(0,a.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});l.displayName="SeriesIcon"},71555:(ne,j,e)=>{"use strict";e.d(j,{e:()=>o});var n=e(74848),a=e(22803),s=e(63142),d=e(43990);const o=({src:i,alt:c,width:p,height:h})=>{const u=(0,s.of)(l,p,h);return(0,n.jsx)("img",{className:u.image,src:i,alt:c})},l=(i,c=3,p=3)=>({image:(0,a.css)([(0,d.Y)(i,c,h=>({width:i.spacing(h)})),(0,d.Y)(i,p,h=>({height:i.spacing(h)})),{borderRadius:i.shape.radius.circle}])})},71599:(ne,j,e)=>{"use strict";e.d(j,{u:()=>l});var n=e(74848),a=e(22803),s=e(63142),d=e(22787),o=e(70735);const l=({isOpen:c,title:p,body:h,description:u,confirmText:r,confirmVariant:v="destructive",confirmationText:g,dismissText:E="Cancel",dismissVariant:x="secondary",alternativeText:m,modalClass:y,icon:b="exclamation-triangle",onConfirm:D,onDismiss:f,onAlternative:C,confirmButtonVariant:P="destructive",disabled:T})=>{const M=(0,s.of)(i);return(0,n.jsx)(d.a,{className:(0,a.cx)(M.modal,y),title:p,icon:b,isOpen:c,onDismiss:f,children:(0,n.jsx)(o.k,{body:h,description:u,confirmButtonLabel:r,dismissButtonLabel:E,dismissButtonVariant:x,confirmPromptText:g,alternativeButtonLabel:m,confirmButtonVariant:P,onConfirm:D,onDismiss:f,onAlternative:C,disabled:T})})},i=()=>({modal:(0,a.css)({width:"500px"})})},71639:(ne,j,e)=>{"use strict";e.d(j,{D:()=>r,_:()=>u});var n=e(86791),a=e(70327),s=e(55143),d=e(62939),o=e(96137),l=e(84523),i=e(52161);const c=!0,{useLazyGetRuleGroupForNamespaceQuery:p}=a.hK,{useLazyDiscoverDsFeaturesQuery:h}=s.L,u=g=>new Error(`DataSource ${g} does not support ruler API or does not have the ruler API enabled.`);function r(){const[g,E]=p(),[x]=h();return[async(y,b)=>{const{dataSourceName:D,groupName:f,namespaceName:C}=y,P=D==="grafana"?n.l$:(0,i.w5)(D),{rulerConfig:T}=await x({uid:P},c).unwrap();if(!T)throw u(D);const M=await g({rulerConfig:T,namespace:C,group:f,notificationOptions:{showErrorAlert:!1}}).unwrap().catch(d.R),I=M??v(f);return{newRuleGroupDefinition:b.reduce((U,W)=>(M&&o.Qn.match(W)&&(W.payload.interval=M.interval),(0,o.i3)(U,W)),I),rulerConfig:T}},E]}const v=g=>({name:g,interval:l.T6,rules:[]})},71642:(ne,j,e)=>{"use strict";e.d(j,{Xy:()=>a,_p:()=>o,h6:()=>l,s6:()=>d,yO:()=>s});const n=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function a(i){const c={};return i.replace(n,(p,h,u,r)=>(c[h]=r,"")),c}function s(i){return i.reduce((c,p)=>{if(!p)throw new Error("Need parsed labels to find common labels.");return Object.keys(p).forEach(h=>{(c[h]===void 0||c[h]!==p[h])&&delete c[h]}),Object.keys(c).forEach(h=>{p[h]===void 0&&delete c[h]}),c},{...i[0]})}function d(i,c){const p={...i};return Object.keys(c).forEach(h=>{delete p[h]}),p}function o(i,c){if(!i)return!0;for(const[p,h]of Object.entries(i))if(!c||c[p]!==h)return!1;return!0}function l(i,c="",p){if(!i||Object.keys(i).length===0)return c;const u=Object.keys(i).sort().map(r=>`${r}="${i[r]}"`).join(", ");return p?u:["{",u,"}"].join("")}},72054:(ne,j,e)=>{"use strict";e.d(j,{C:()=>a,m:()=>n});var n=(s=>(s.StorageFull="StorageFull",s.DuplicatedEntry="DuplicatedEntry",s))(n||{}),a=(s=>(s.LimitExceeded="LimitExceeded",s))(a||{})},72165:(ne,j,e)=>{"use strict";e.d(j,{G:()=>h});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(74451),i=e(52193),c=e(54044);const p=({isCurrent:r,plugin:v,onClick:g,disabled:E})=>(0,n.jsx)(c.b,{title:v.name,plugin:v,description:v.info.description,onClick:g,isCurrent:r,disabled:E,showBadge:!0});p.displayName="VizTypePickerPlugin";function h({pluginId:r,searchQuery:v,onChange:g,trackSearch:E}){const x=(0,o.of)(u),m=(0,s.useMemo)(i.A4,[]),y=(0,s.useMemo)(()=>{const b=(0,i.CO)(m,v,r);return E&&E(v,b.length),b},[m,v,r,E]);return y.length===0?(0,n.jsx)(l.Z,{children:(0,n.jsx)(d.x6,{i18nKey:"panel.viz-type-picker.could-anything-matching-query",children:"Could not find anything matching your query"})}):(0,n.jsx)("div",{className:x.grid,children:y.map(b=>(0,n.jsx)(p,{disabled:!1,isCurrent:b.id===r,plugin:b,onClick:D=>g({pluginId:b.id,withModKey:D.metaKey||D.ctrlKey||D.altKey})},b.id))})}const u=r=>({grid:(0,a.css)({maxWidth:"100%",display:"grid",gridGap:r.spacing(.5)}),heading:(0,a.css)({...r.typography.h5,margin:r.spacing(0,.5,1)})})},72265:(ne,j,e)=>{"use strict";e.d(j,{IW:()=>n,aA:()=>s,jH:()=>d,sG:()=>a});var n=(o=>(o[o.CLOSE_PANE=0]="CLOSE_PANE",o[o.CHANGE_DATASOURCE=1]="CHANGE_DATASOURCE",o[o.CLOSE_EDITOR=2]="CLOSE_EDITOR",o))(n||{});const a=["lines","bars","points","stacked_lines","stacked_bars"];var s=(o=>(o.table="table",o.raw="raw",o))(s||{});const d=["table","raw"]},72296:(ne,j,e)=>{"use strict";e.d(j,{A:()=>d,X:()=>o});var n=e(74848),a=e(96540);const s=(0,a.createContext)(void 0);function d({children:l}){const[i,c]=(0,a.useState)(0),[p,h]=(0,a.useState)(),u=(0,a.useMemo)(()=>({sync:r=>h(r),unSync:()=>h(void 0),addPicker:()=>c(r=>r+1),removePicker:()=>{c(r=>{const v=r-1;return v<2&&h(void 0),v})},syncPossible:i>1,synced:!!p,syncedValue:p}),[i,p]);return(0,n.jsx)(s.Provider,{value:u,children:l})}function o(l){const i=(0,a.useContext)(s);return(0,a.useEffect)(()=>i?(i.addPicker(),l&&i.sync(l),()=>{i.removePicker()}):()=>{},[]),(0,a.useMemo)(()=>i&&{sync:i.sync,unSync:i.unSync,syncPossible:i.syncPossible,synced:i.synced,syncedValue:i.syncedValue},[i])}},72331:(ne,j,e)=>{"use strict";e.d(j,{s:()=>n});const n=new Map([])},72358:(ne,j,e)=>{"use strict";var n={};e.r(n),e.d(n,{default:()=>rx});var a={};e.r(a),e.d(a,{getPrecision:()=>ux,getScaledDecimals:()=>lx,getStringPrecision:()=>wh,grafanaTimeFormat:()=>cx,logp:()=>dx,tickStep:()=>ix});var s=e(48307),d=e(9423),o=e(7452),l=e(5086),i=e(78624),c=e(4213),p=e(34796),h=e.n(p),u=e(96540),r=e.t(u,2),v=e(5338),g=e(25229),E=e(60188),x=e(53543),m=e(8642),y=e(54734),b=e(92138),D=e(57002),f=e(92745),C=e(68143),P=e(47700),T=e(48072),M=e(36490),I=e(25076),B=e(43122),U=e(6201),W=e(75234),V=e(83734),z=e(39698),R=e(78282),O=e(79409),N=e(46907),F=e(33005),G=e(33604),H=e(33707),K=e(41071),w=e(45012),Q=e(92293),k=e(94345),te=e(46631),q=e(43173);async function se(){const A=new k.S({baseUrl:"/apis/features.grafana.app/v0alpha1/namespaces/"+q.$.namespace,pollInterval:-1,timeoutMs:5e3});await te.B0.setProviderAndWait(A,{targetingKey:q.$.namespace,...q.$.openFeatureContext})}function re(A,S){return OpenFeature.getClient().getBooleanValue(A,S)}var Y=e(60311),X=e(88806),J=e(14477),_=e(58873),ee=e(2874),ae=e(44248),le=e(65642),L=e(74848),ie=e(2543),oe=e(95004),ue=e(36638),ye=e(57866),fe=e(16515),Ee=e(64761),Ae=e(52645),Ge=e(68779),Fe=e(18027),Pe=e(77824),Ve=e(31286),me=e(45861),Se=e(88366),Qe=(A=>(A.ShortcodeFigure="shortcodeFigure",A.UIImage="uiImage",A))(Qe||{});const Ue={calculateField:{name:"Add field from calculation",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to add a new field calculated from two other fields. Each transformation allows you to add one new field.

- **Mode** - Select a mode:
  - **Reduce row** - Apply selected calculation on each row of selected fields independently.
  - **Binary operation** - Apply basic binary operations (for example, sum or multiply) on values in a single row from two selected fields.
  - **Unary operation** - Apply basic unary operations on values in a single row from a selected field. The available operations are:
    - **Absolute value (abs)** - Returns the absolute value of a given expression. It represents its distance from zero as a positive number.
    - **Natural exponential (exp)** - Returns _e_ raised to the power of a given expression.
    - **Natural logarithm (ln)** - Returns the natural logarithm of a given expression.
    - **Floor (floor)** - Returns the largest integer less than or equal to a given expression.
    - **Ceiling (ceil)** - Returns the smallest integer greater than or equal to a given expression.
  - **Cumulative functions** - Apply functions on the current row and all preceding rows.
    - **Total** - Calculates the cumulative total up to and including the current row.
    - **Mean** - Calculates the mean up to and including the current row.
  - **Window functions** - Apply window functions. The window can either be **trailing** or **centered**.
    With a trailing window the current row will be the last row in the window.
    With a centered window the window will be centered on the current row.
    For even window sizes, the window will be centered between the current row, and the previous row.
    - **Mean** - Calculates the moving mean or running average.
    - **Stddev** - Calculates the moving standard deviation.
    - **Variance** - Calculates the moving variance.
  - **Row index** - Insert a field with the row index.
- **Field name** - Select the names of fields you want to use in the calculation for the new field.
- **Calculation** - If you select **Reduce row** mode, then the **Calculation** field appears. Click in the field to see a list of calculation choices you can use to create the new field. For information about available calculations, refer to [Calculation types][].
- **Operation** - If you select **Binary operation** or **Unary operation** mode, then the **Operation** fields appear. These fields allow you to apply basic math operations on values in a single row from selected fields. You can also use numerical values for binary operations.
  - **All number fields** - Set the left side of a **Binary operation** to apply the calculation to all number fields.
- **As percentile** - If you select **Row index** mode, then the **As percentile** switch appears. This switch allows you to transform the row index as a percentage of the total number of rows.
- **Alias** - (Optional) Enter the name of your new field. If you leave this blank, then the field will be named to match the calculation.
> **Note:** If a variable is used in this transformation, the default alias will be interpolated with the value of the variable. If you want an alias to be unaffected by variable changes, explicitly define the alias.
- **Replace all fields** - (Optional) Select this option if you want to hide all other fields and display only your calculated field in the visualization.

In the example below, we added two fields together and named them Sum.

${Ie("/static/img/docs/transformations/add-field-from-calc-stat-example-7-0.png",A,"A stat visualization including one field called Sum")}
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},concatenate:{name:"Concatenate fields",getHelperDocs:function(){return`
Use this transformation to combine all fields from all frames into one result.

For example, if you have separate queries retrieving temperature and uptime data (Query A) and air quality index and error information (Query B), applying the concatenate transformation yields a consolidated data frame with all relevant information in one view.

Consider the following:

**Query A:**

| Temp  | Uptime  |
| ----- | ------- |
| 15.4  | 1230233 |

**Query B:**

| AQI   | Errors |
| ----- | ------ |
| 3.2   | 5      |

After you concatenate the fields, the data frame would be:

| Temp | Uptime  | AQI | Errors |
| ---- | ------- | --- | ------ |
| 15.4 | 1230233 | 3.2 | 5      |

This transformation simplifies the process of merging data from different sources, providing a comprehensive view for analysis and visualization.
  `}},configFromData:{name:"Config from query results",getHelperDocs:function(){return`
Use this transformation to select a query and extract standard options, such as **Min**, **Max**, **Unit**, and **Thresholds**, and apply them to other query results. This feature enables dynamic visualization configuration based on the data returned by a specific query.

#### Options

- **Config query** - Select the query that returns the data you want to use as configuration.
- **Apply to** - Select the fields or series to which the configuration should be applied.
- **Apply to options** - Specify a field type or use a field name regex, depending on your selection in **Apply to**.

#### Field mapping table

Below the configuration options, you'll find the field mapping table. This table lists all fields found in the data returned by the config query, along with **Use as** and **Select** options. It provides control over mapping fields to config properties, and for multiple rows, it allows you to choose which value to select.

#### Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now has a maximum configuration option set. Options such as **Min**, **Max**, **Unit**, and **Thresholds** are part of the field configuration. If set, they are used by the visualization instead of any options manually configured in the panel editor options pane.

#### Value mappings

You can also transform a query result into value mappings. With this option, every row in the configuration query result defines a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Color | All values |

Grafana builds value mappings from your query result and applies them to the real data query results. You should see values being mapped and colored according to the config query results.

> **Note:** When you use this transformation for thresholds, the visualization continues to use the panel's base threshold.

  `}},convertFieldType:{name:"Convert field type",getHelperDocs:function(){return`
Use this transformation to modify the field type of a specified field.

This transformation has the following options:

- **Field** - Select from available fields
- **as** - Select the FieldType to convert to
  - **Numeric** - attempts to make the values numbers
  - **String** - will make the values strings
  - **Time** - attempts to parse the values as time
    - The input will be parsed according to the [Moment.js parsing format](https://momentjs.com/docs/#/parsing/)
    - It will parse the numeric input as a Unix epoch timestamp in milliseconds.
      You must multiply your input by 1000 if it's in seconds.
    - Will show an option to specify a DateFormat as input by a string like yyyy-mm-dd or DD MM YYYY hh:mm:ss
  - **Boolean** - will make the values booleans
  - **Enum** - will make the values enums
    - Will show a table to manage the enums
  - **Other** - attempts to parse the values as JSON

For example, consider the following query that could be modified by selecting the time field as Time and specifying Date Format as YYYY.

#### Sample Query

| Time       | Mark  | Value |
|------------|-------|-------|
| 2017-07-01 | above | 25    |
| 2018-08-02 | below | 22    |
| 2019-09-02 | below | 29    |
| 2020-10-04 | above | 22    |

The result:

#### Transformed Query

| Time                | Mark  | Value |
|---------------------|-------|-------|
| 2017-01-01 00:00:00 | above | 25    |
| 2018-01-01 00:00:00 | below | 22    |
| 2019-01-01 00:00:00 | below | 29    |
| 2020-01-01 00:00:00 | above | 22    |

This transformation allows you to flexibly adapt your data types, ensuring compatibility and consistency in your visualizations.
  `}},extractFields:{name:"Extract fields",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to select a source of data and extract content from it in different formats. This transformation has the following fields:

- **Source** - Select the field for the source of data.
- **Format** - Choose one of the following:
  - **JSON** - Parse JSON content from the source.
  - **Key+value pairs** - Parse content in the format 'a=b' or 'c:d' from the source.
  - **RegExp** - Parse content using a regular expression with [named capturing group(s)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Named_capturing_group) like \`/(?<NewField>.*)/\`.
  ${Ie("/media/docs/grafana/panels-visualizations/screenshot-regexp-detail-v11.3-2.png",A,"Example of a regular expression")}
  - **Auto** - Discover fields automatically.
- **Replace All Fields** - (Optional) Select this option to hide all other fields and display only your calculated field in the visualization.
- **Keep Time** - (Optional) Available only if **Replace All Fields** is true. Keeps the time field in the output.

Consider the following dataset:

#### Dataset Example

| Timestamp           | json_data     |
|---------------------|---------------|
| 1636678740000000000 | {"value": 1}  |
| 1636678680000000000 | {"value": 5}  |
| 1636678620000000000 | {"value": 12} |

You could prepare the data to be used by a [Time series panel][] with this configuration:

- Source: json_data
- Format: JSON
  - Field: value
  - Alias: my_value
- Replace all fields: true
- Keep time: true

This will generate the following output:

#### Transformed Data

| Timestamp           | my_value |
|---------------------|----------|
| 1636678740000000000 | 1        |
| 1636678680000000000 | 5        |
| 1636678620000000000 | 12       |

This transformation allows you to extract and format data in various ways. You can customize the extraction format based on your specific data needs.
  `},links:[{title:"Time series panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/time-series/"}]},fieldLookup:{name:"Lookup fields from resource",getHelperDocs:function(){return`
Use this transformation to enrich a field value by looking up additional fields from an external source. 
  
This transformation has the following fields:

- **Field** - Select a text field from your dataset.
- **Lookup** - Choose from **Countries**, **USA States**, and **Airports**.

This transformation currently supports spatial data.

For example, if you have this data:

#### Dataset Example

| Location  | Values |
|-----------|--------|
| AL        | 0      |
| AK        | 10     |
| Arizona   | 5      |
| Arkansas  | 1      |
| Somewhere | 5      |

With this configuration:

- Field: location
- Lookup: USA States

You'll get the following output:

#### Transformed Data

| Location  | ID | Name     | Lng         | Lat       | Values |
|-----------|----|----------|-------------|-----------|--------|
| AL        | AL | Alabama  | -80.891064  | 12.448457 | 0      |
| AK        | AK | Arkansas | -100.891064 | 24.448457 | 10     |
| Arizona   |    |          |             |           | 5      |
| Arkansas  |    |          |             |           | 1      |
| Somewhere |    |          |             |           | 5      |

This transformation lets you augment your data by fetching additional information from external sources, providing a more comprehensive dataset for analysis and visualization.
  `}},filterByRefId:{name:"Filter data by query refId",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to hide one or more queries in panels that have multiple queries.

Grafana displays the query identification letters in dark gray text. Click a query identifier to toggle filtering. If the query letter is white, then the results are displayed. If the query letter is dark, then the results are hidden.

> **Note:** This transformation is not available for Graphite because this data source does not support correlating returned data with queries.

In the example below, the panel has three queries (A, B, C). We removed the B query from the visualization.

${Ie("/static/img/docs/transformations/filter-by-query-stat-example-7-0.png",A,"A stat visualization with results from two queries, A and C")}
  `}},filterByValue:{name:"Filter data by values",getHelperDocs:function(){return`
Use this transformation to selectively filter data points directly within your visualization. This transformation provides options to include or exclude data based on one or more conditions applied to a selected field.

This transformation is very useful if your data source does not natively filter by values. You might also use this to narrow values to display if you are using a shared query.

The available conditions for all fields are:

- **Is Null** - Match if the value is null.
- **Is Not Null** - Match if the value is not null.
- **Equal** - Match if the value is equal to the specified value.
- **Not Equal** - Match if the value is not equal to the specified value.
- **Regex** - Match a regex expression.

The available conditions for string fields are:

- **Contains substring** - Match if the value contains the specified substring (case insensitive).
- **Does not contain substring** - Match if the value doesn't contain the specified substring (case insensitive).

The available conditions for number fields are:

- **Greater** - Match if the value is greater than the specified value.
- **Lower** - Match if the value is lower than the specified value.
- **Greater or equal** - Match if the value is greater or equal.
- **Lower or equal** - Match if the value is lower or equal.
- **In between** - Match a range between a specified minimum and maximum, min and max included.

The available conditions for time fields are:

- **In between** - Match a range between a specified minimum and maximum. The min and max values will pre-populate with variables to filter by selected time.

Consider the following dataset:

#### Dataset Example

| Time                | Temperature | Altitude |
|---------------------|-------------|----------|
| 2020-07-07 11:34:23 | 32          | 101      |
| 2020-07-07 11:34:22 | 28          | 125      |
| 2020-07-07 11:34:21 | 26          | 110      |
| 2020-07-07 11:34:20 | 23          | 98       |
| 2020-07-07 10:32:24 | 31          | 95       |
| 2020-07-07 10:31:22 | 20          | 85       |
| 2020-07-07 09:30:57 | 19          | 101      |

If you **Include** the data points that have a temperature below 30\xB0C, the configuration will look as follows:

- Filter Type: 'Include'
- Condition: Rows where 'Temperature' matches 'Lower Than' '30'

And you will get the following result, where only the temperatures below 30\xB0C are included:

#### Transformed Data

| Time                | Temperature | Altitude |
|---------------------|-------------|----------|
| 2020-07-07 11:34:22 | 28          | 125      |
| 2020-07-07 11:34:21 | 26          | 110      |
| 2020-07-07 11:34:20 | 23          | 98       |
| 2020-07-07 10:31:22 | 20          | 85       |
| 2020-07-07 09:30:57 | 19          | 101      |

You can add more than one condition to the filter. For example, you might want to include the data only if the altitude is greater than 100. To do so, add that condition to the following configuration:

- Filter type: 'Include' rows that 'Match All' conditions
- Condition 1: Rows where 'Temperature' matches 'Lower' than '30'
- Condition 2: Rows where 'Altitude' matches 'Greater' than '100'

When you have more than one condition, you can choose if you want the action (include/exclude) to be applied on rows that **Match all** conditions or **Match any** of the conditions you added.

In the example above, we chose **Match all** because we wanted to include the rows that have a temperature lower than 30\xB0C *AND* an altitude higher than 100. If we wanted to include the rows that have a temperature lower than 30\xB0C *OR* an altitude higher than 100 instead, then we would select **Match any**. This would include the first row in the original data, which has a temperature of 32\xB0C (does not match the first condition) but an altitude of 101 (which matches the second condition), so it is included.

Conditions that are invalid or incompletely configured are ignored.

This versatile data filtering transformation lets you to selectively include or exclude data points based on specific conditions. Customize the criteria to tailor your data presentation to meet your unique analytical needs.
  `}},filterFieldsByName:{name:"Filter fields by name",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to selectively remove parts of your query results. There are three ways to filter field names:

- [Using a regular expression](#use-a-regular-expression)
- [Manually selecting included fields](#manually-select-included-fields)
- [Using a dashboard variable](#use-a-dashboard-variable)

#### Use a regular expression

When you filter using a regular expression, field names that match the regular expression are included. 

For example, from the input data:

| Time                | dev-eu-west | dev-eu-north | prod-eu-west | prod-eu-north |
| ------------------- | ----------- | ------------ | ------------ | ------------- |
| 2023-03-04 23:56:23 | 23.5        | 24.5         | 22.2         | 20.2          |
| 2023-03-04 23:56:23 | 23.6        | 24.4         | 22.1         | 20.1          |

The result from using the regular expression 'prod.*' would be:

| Time                | prod-eu-west | prod-eu-north |
| ------------------- | ------------ | ------------- |
| 2023-03-04 23:56:23 | 22.2         | 20.2          |
| 2023-03-04 23:56:23 | 22.1         | 20.1          |

The regular expression can include an interpolated dashboard variable by using the \${variableName} syntax.

#### Manually select included fields

Click and uncheck the field names to remove them from the result. Fields that are matched by the regular expression are still included, even if they're unchecked.

#### Use a dashboard variable

Enable 'From variable' to let you select a dashboard variable that's used to include fields. By setting up a [dashboard variable][] with multiple choices, the same fields can be displayed across multiple visualizations.

${Ie("/static/img/docs/transformations/filter-name-table-before-7-0.png",A,"A table visualization with time, value, Min, and Max columns")}

Here's the table after we applied the transformation to remove the Min field.

${Ie("/static/img/docs/transformations/filter-name-table-after-7-0.png",A,"A table visualization with time, value, and Max columns")}

Here is the same query using a Stat visualization.

${Ie("/static/img/docs/transformations/filter-name-stat-after-7-0.png",A,"A stat visualization with value and Max fields")}

This transformation provides flexibility in tailoring your query results to focus on the specific fields you need for effective analysis and visualization.
  `}},formatString:{name:"Format string",getHelperDocs:function(){return`
Use this transformation to customize the output of a string field. This transformation has the following fields:

- **Upper case** - Formats the entire string in uppercase characters.
- **Lower case** - Formats the entire string in lowercase characters.
- **Sentence case** - Formats the first character of the string in uppercase.
- **Title case** - Formats the first character of each word in the string in uppercase.
- **Pascal case** - Formats the first character of each word in the string in uppercase and doesn't include spaces between words.
- **Camel case** - Formats the first character of each word in the string in uppercase, except the first word, and doesn't include spaces between words.
- **Snake case** - Formats all characters in the string in lowercase and uses underscores instead of spaces between words.
- **Kebab case** - Formats all characters in the string in lowercase and uses dashes instead of spaces between words.
- **Trim** - Removes all leading and trailing spaces from the string.
- **Substring** - Returns a substring of the string, using the specified start and end positions.

This transformation provides a convenient way to standardize and tailor the presentation of string data for better visualization and analysis.`}},formatTime:{name:"Format time",getHelperDocs:function(){return`
Use this transformation to customize the output of a time field. Output can be formatted using [Moment.js format strings](https://momentjs.com/docs/#/displaying/). For example, if you want to display only the year of a time field, the format string 'YYYY' can be used to show the calendar year (for example, 1999 or 2012).

**Before Transformation:**

| Timestamp           | Event        |
| ------------------- | ------------ |
| 1636678740000000000 | System Start |
| 1636678680000000000 | User Login   |
| 1636678620000000000 | Data Updated |

**After applying 'YYYY-MM-DD HH:mm:ss':**

| Timestamp           | Event        |
| ------------------- | ------------ |
| 2021-11-12 14:25:40 | System Start |
| 2021-11-12 14:24:40 | User Login   |
| 2021-11-12 14:23:40 | Data Updated |

This transformation lets you tailor the time representation in your visualizations, providing flexibility and precision in displaying temporal data.

> **Note:** This transformation is available in Grafana 10.1+ as an alpha feature.
  `}},groupBy:{name:"Group by",getHelperDocs:function(){return`
Use this transformation to group the data by a specified field (column) value and process calculations on each group. Click to see a list of calculation choices. For information about available calculations, refer to [Calculation types][].

Here's an example of original data.

| Time                | Server ID | CPU Temperature | Server Status |
| ------------------- | --------- | --------------- | ------------- |
| 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
| 2020-07-07 11:34:20 | server 3  | 62              | OK            |
| 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
| 2020-07-07 10:31:22 | server 3  | 55              | OK            |
| 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
| 2020-07-07 09:30:05 | server 2  | 88              | OK            |
| 2020-07-07 09:28:06 | server 1  | 80              | OK            |
| 2020-07-07 09:25:05 | server 2  | 88              | OK            |
| 2020-07-07 09:23:07 | server 1  | 86              | OK            |

This transformation goes in two steps. First you specify one or multiple fields to group the data by. This will group all the same values of those fields together, as if you sorted them. For instance if we group by the Server ID field, then it would group the data this way:

| Time                | Server ID      | CPU Temperature | Server Status |
| ------------------- | -------------- | --------------- | ------------- |
| 2020-07-07 11:34:20 | **server 1**   | 80              | Shutdown      |
| 2020-07-07 09:28:06 | **server 1**   | 80              | OK            |
| 2020-07-07 09:23:07 | **server 1**   | 86              | OK            |
| 2020-07-07 10:32:20 | server 2       | 90              | Overload      |
| 2020-07-07 09:30:05 | server 2       | 88              | OK            |
| 2020-07-07 09:25:05 | server 2       | 88              | OK            |
| 2020-07-07 11:34:20 | **_server 3_** | 62              | OK            |
| 2020-07-07 10:31:22 | **_server 3_** | 55              | OK            |
| 2020-07-07 09:30:57 | **_server 3_** | 62              | Rebooting     |

All rows with the same value of Server ID are grouped together. Optionally, you can add a count of how may values fall in the selected group.

After choosing which field you want to group your data by, you can add various calculations on the other fields, and apply the calculation to each group of rows. For instance, we could want to calculate the average CPU temperature for each of those servers. So we can add the _mean_ calculation applied on the CPU Temperature field to get the following:

| Server ID | CPU Temperature (mean) |
| --------- | ---------------------- |
| server 1  | 82                     |
| server 2  | 88.6                   |
| server 3  | 59.6                   |

If you had added the count stat to the group by transformation, there would be an extra column showing that the count of each server from above was 3.

| Server ID | CPU Temperature (mean) | Server ID (count) |
| --------- | ---------------------- | ----------------- |
| server 1  | 82                     | 3                 |
| server 2  | 88.6                   | 3                 |
| server 3  | 59.6                   | 3                 |

And we can add more than one calculation. For instance:

- For field Time, we can calculate the _Last_ value, to know when the last data point was received for each server
- For field Server Status, we can calculate the _Last_ value to know what is the last state value for each server
- For field Temperature, we can also calculate the _Last_ value to know what is the latest monitored temperature for each server

We would then get:

| Server ID | CPU Temperature (mean) | CPU Temperature (last) | Time (last)         | Server Status (last) |
| --------- | ---------------------- | ---------------------- | ------------------- | -------------------- |
| server 1  | 82                     | 80                     | 2020-07-07 11:34:20 | Shutdown             |
| server 2  | 88.6                   | 90                     | 2020-07-07 10:32:20 | Overload             |
| server 3  | 59.6                   | 62                     | 2020-07-07 11:34:20 | OK                   |

This transformation allows you to extract essential information from your time series and present it conveniently.
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},groupingToMatrix:{name:"Grouping to matrix",getHelperDocs:function(){return`
Use this transformation to combine three fields\u2014which are used as input for the **Column**, **Row**, and **Cell value** fields from the query output\u2014and generate a matrix. The matrix is calculated as follows:

**Original data**

| Server ID | CPU Temperature | Server Status |
| --------- | --------------- | ------------- |
| server 1  | 82              | OK            |
| server 2  | 88.6            | OK            |
| server 3  | 59.6            | Shutdown      |

We can generate a matrix using the values of 'Server Status' as column names, the 'Server ID' values as row names, and the 'CPU Temperature' as content of each cell. The content of each cell will appear for the existing column ('Server Status') and row combination ('Server ID'). For the rest of the cells, you can select which value to display between: **Null**, **True**, **False**, or **Empty**.

**Output**

| Server IDServer Status | OK   | Shutdown |
| ----------------------- | ---- | -------- |
| server 1                | 82   |          |
| server 2                | 88.6 |          |
| server 3                |      | 59.6     |

Use this transformation to construct a matrix by specifying fields from your query results. The matrix output reflects the relationships between the unique values in these fields. This helps you present complex relationships in a clear and structured matrix format.
  `}},groupToNestedTable:{name:"Group to nested tables",getHelperDocs:function(A="shortcodeFigure"){return`
  Use this transformation to group the data by a specified field (column) value and process calculations on each group. Records are generated that share the same grouped field value, to be displayed in a nested table.
    
  To calculate a statistic for a field, click the selection box next to it and select the **Calculate** option:

  ${Ie("/static/img/docs/transformations/nested-table-select-calculation.png",A,"A select box showing the Group and Calculate options for the transformation.")}

  Once **Calculate** has been selected, another selection box will appear next to the respective field which will allow statistics to be selected:

  ${Ie("/static/img/docs/transformations/nested-table-select-stat.png",A,"A select box showing available statistic calculations once the calculate option for the field has been selected.")}

  For information about available calculations, refer to [Calculation types][].

  Here's an example of original data:

  | Time                | Server ID | CPU Temperature | Server Status |
  | ------------------- | --------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
  | 2020-07-07 11:34:20 | server 3  | 62              | OK            |
  | 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
  | 2020-07-07 10:31:22 | server 3  | 55              | OK            |
  | 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
  | 2020-07-07 09:30:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:28:06 | server 1  | 80              | OK            |
  | 2020-07-07 09:25:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:23:07 | server 1  | 86              | OK            |

  This transformation has two steps. First, specify one or more fields by which to group the data. This groups all the same values of those fields together, as if you sorted them. For instance, if you group by the Server ID field, Grafana groups the data this way:

  | Server ID      |  |
  | -------------- | ------------- |
  | server 1 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>80</td><td>Shutdown</td></tr><tr><td>2020-07-07 09:28:06</td><td>80</td><td>OK</td></tr><tr><td>2020-07-07 09:23:07</td><td>86</td><td>OK</td></tr></tbody></table> |
  | server 2 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 10:32:20</td><td>90</td><td>Overload</td></tr><tr><td>2020-07-07 09:30:05</td><td>88</td><td>OK</td></tr><tr><td>2020-07-07 09:25:05</td><td>88</td><td>OK</td></tr></tbody></table> |
  | server 3 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>62</td><td>OK</td></tr><tr><td>2020-07-07 10:31:22</td><td>55</td><td>OK</td></tr><tr><td>2020-07-07 09:30:57</td><td>62</td><td>Rebooting</td></tr></tbody></table> |

  After choosing the field by which you want to group your data, you can add various calculations on the other fields and apply the calculation to each group of rows. For instance, you might want to calculate the average CPU temperature for each of those servers. To do so, add the **mean calculation** applied on the CPU Temperature field to get the following result:

  | Server ID      | CPU Temperatute (mean) | |
  | -------------- | ------------- | ------------- |
  | server 1 | 82 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>Shutdown</td></tr><tr><td>2020-07-07 09:28:06</td><td>OK</td></tr><tr><td>2020-07-07 09:23:07</td><td>OK</td></tr></tbody></table> |
  | server 2 | 88.6 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 10:32:20</td><td>Overload</td></tr><tr><td>2020-07-07 09:30:05</td><td>OK</td></tr><tr><td>2020-07-07 09:25:05</td><td>OK</td></tr></tbody></table> |
  | server 3 | 59.6 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>OK</td></tr><tr><td>2020-07-07 10:31:22</td><td>OK</td></tr><tr><td>2020-07-07 09:30:57</td><td>Rebooting</td></tr></tbody></table> |
      `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},heatmap:{name:"Create heatmap",getHelperDocs:function(){return`
Use this transformation to prepare histogram data for visualizing trends over time. Similar to the heatmap visualization, this transformation converts histogram metrics into temporal buckets.

#### X Bucket

This setting determines how the x-axis is split into buckets.

- **Size** - Specify a time interval in the input field. For example, a time range of '1h' creates cells one hour wide on the x-axis.
- **Count** - For non-time-related series, use this option to define the number of elements in a bucket.

#### Y Bucket

This setting determines how the y-axis is split into buckets.

- **Linear**
- **Logarithmic** - Choose between log base 2 or log base 10.
- **Symlog** - Uses a symmetrical logarithmic scale. Choose between log base 2 or log base 10, allowing for negative values.

Assume you have the following dataset:

| Timestamp           | Value |
|-------------------- |-------|
| 2023-01-01 12:00:00 | 5     |
| 2023-01-01 12:15:00 | 10    |
| 2023-01-01 12:30:00 | 15    |
| 2023-01-01 12:45:00 | 8     |

- With X Bucket set to 'Size: 15m' and Y Bucket as 'Linear', the histogram organizes values into time intervals of 15 minutes on the x-axis and linearly on the y-axis.
- For X Bucket as 'Count: 2' and Y Bucket as 'Logarithmic (base 10)', the histogram groups values into buckets of two on the x-axis and use a logarithmic scale on the y-axis.
  `}},histogram:{name:"Histogram",getHelperDocs:function(){return`
Use this transformation to generate a histogram based on input data, allowing you to visualize the distribution of values.

- **Bucket size** - The range between the lowest and highest items in a bucket (xMin to xMax).
- **Bucket offset** - The offset for non-zero-based buckets.
- **Combine series** - Create a unified histogram using all available series.

**Original data**

Series 1:

| A | B | C |
| - | - | - |
| 1 | 3 | 5 |
| 2 | 4 | 6 |
| 3 | 5 | 7 |
| 4 | 6 | 8 |
| 5 | 7 | 9 |

Series 2:

| C |
| - |
| 5 |
| 6 |
| 7 |
| 8 |
| 9 |

**Output**

| xMin | xMax | A | B | C | C |
| ---- | ---- | --| --| --| --|
| 1    | 2    | 1 | 0 | 0 | 0 |
| 2    | 3    | 1 | 0 | 0 | 0 |
| 3    | 4    | 1 | 1 | 0 | 0 |
| 4    | 5    | 1 | 1 | 0 | 0 |
| 5    | 6    | 1 | 1 | 1 | 1 |
| 6    | 7    | 0 | 1 | 1 | 1 |
| 7    | 8    | 0 | 1 | 1 | 1 |
| 8    | 9    | 0 | 0 | 1 | 1 |
| 9    | 10   | 0 | 0 | 1 | 1 |

Visualize the distribution of values using the generated histogram, providing insights into the data's spread and density.
  `}},joinByField:{name:"Join by field",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to merge multiple results into a single table, enabling the consolidation of data from different queries.

This is especially useful for converting multiple time series results into a single wide table with a shared time field.

#### Inner join (for Time Series or SQL-like data)

An inner join merges data from multiple tables where all tables share the same value from the selected field. This type of join excludes data where values do not match in every result.

Use this transformation to combine the results from multiple queries (combining on a passed join field or the first time column) into one result, and drop rows where a successful join cannot occur. This is not optimized for large Time Series datasets.

In the following example, two queries return Time Series data. It is visualized as two separate tables before applying the inner join transformation.

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |
| 2020-07-07 11:14:20 | postgre | 345001233 |

**Query B:**

| Time                | Server   | Errors |
| ------------------- | -------- | ------ |
| 2020-07-07 11:34:20 | server 1 | 15     |
| 2020-07-07 11:24:20 | server 2 | 5      |
| 2020-07-07 11:04:20 | server 3 | 10     |

The result after applying the inner join transformation looks like the following:

| Time                | Job     | Uptime    | Server   | Errors |
| ------------------- | ------- | --------- | -------- | ------ |
| 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
| 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

This works in the same way for non-Time Series tabular data as well.

**Students**

| StudentID | Name     | Major            |
| --------- | -------- | ---------------- |
| 1         | John     | Computer Science |
| 2         | Emily    | Mathematics      |
| 3         | Michael  | Physics          |
| 4         | Jennifer | Chemistry        |

**Enrollments**

| StudentID | CourseID | Grade |
|-----------|----------|-------|
| 1         | CS101    | A     |
| 1         | CS102    | B     |
| 2         | MATH201  | A     |
| 3         | PHYS101  | B     |
| 5         | HIST101  | B     |

The result after applying the inner join transformation looks like the following:

| StudentID | Name    | Major            | CourseID | Grade |
| --------- | ------- | ---------------- | -------  | ----- |
| 1         | John    | Computer Science | CS101    | A     |
| 1         | John    | Computer Science | CS102    | B     |
| 2         | Emily   | Mathematics      | MATH201  | A     |
| 3         | Michael | Physics          | PHYS101  | B     |

The inner join only includes rows where there is a match between the "StudentID" in both tables. In this case, the result does not include "Jennifer" from the "Students" table because there are no matching enrollments for her in the "Enrollments" table.

#### Outer join (for Time Series data)

An outer join includes all data from an inner join and rows where values do not match in every input. While the inner join joins Query A and Query B on the time field, the outer join includes all rows that don't match on the time field.

In the following example, two queries return table data. It is visualized as two tables before applying the outer join transformation.

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |
| 2020-07-07 11:14:20 | postgre | 345001233 |

**Query B:**

| Time                | Server   | Errors |
| ------------------- | -------- | ------ |
| 2020-07-07 11:34:20 | server 1 | 15     |
| 2020-07-07 11:24:20 | server 2 | 5      |
| 2020-07-07 11:04:20 | server 3 | 10     |

The result after applying the outer join transformation looks like the following:

| Time                | Job     | Uptime    | Server   | Errors |
| ------------------- | ------- | --------- | -------- | ------ |
| 2020-07-07 11:04:20 |         |           | server 3 | 10     |
| 2020-07-07 11:14:20 | postgre | 345001233 |          |        |
| 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
| 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

In the following example, a template query displays time series data from multiple servers in a table visualization. The results of only one query can be viewed at a time.

${Ie("/static/img/docs/transformations/join-fields-before-7-0.png",A,"A table visualization showing results for one server")}

I applied a transformation to join the query results using the time field. Now I can run calculations, combine, and organize the results in this new table.

${Ie("/static/img/docs/transformations/join-fields-after-7-0.png",A,"A table visualization showing results for multiple servers")}

#### Outer join (for SQL-like data)

A tabular outer join combining tables so that the result includes matched and unmatched rows from either or both tables.

| StudentID | Name      | Major            |
| --------- | --------- | ---------------- |
| 1         | John      | Computer Science |
| 2         | Emily     | Mathematics      |
| 3         | Michael   | Physics          |
| 4         | Jennifer  | Chemistry        |

Can now be joined with:

| StudentID | CourseID | Grade |
| --------- | -------- | ----- |
| 1         | CS101    | A     |
| 1         | CS102    | B     |
| 2         | MATH201  | A     |
| 3         | PHYS101  | B     |
| 5         | HIST101  | B     |

The result after applying the outer join transformation looks like the following:

| StudentID | Name     | Major            | CourseID | Grade |
| --------- | -------- | ---------------- | -------- | ----- |
| 1         | John     | Computer Science | CS101    | A     |
| 1         | John     | Computer Science | CS102    | B     |
| 2         | Emily    | Mathematics      | MATH201  | A     |
| 3         | Michael  | Physics          | PHYS101  | B     |
| 4         | Jennifer | Chemistry        | NULL     | NULL  |
| 5         | NULL     | NULL             | HIST101  | B     |

Combine and analyze data from various queries with table joining for a comprehensive view of your information.
  `}},joinByLabels:{name:"Join by labels",getHelperDocs:function(){return`
Use this transformation to join multiple results into a single table.

This is especially useful for converting multiple time series results into a single wide table with a shared **Label** field.

- **Join** - Select the label to join by between the labels available or common across all time series.
- **Value** - The name for the output result.

#### Example

##### Input

series1{what="Temp", cluster="A", job="J1"}

| Time | Value |
| ---- | ----- |
| 1    | 10    |
| 2    | 200   |

series2{what="Temp", cluster="B", job="J1"}

| Time | Value |
| ---- | ----- |
| 1    | 10    |
| 2    | 200   |

series3{what="Speed", cluster="B", job="J1"}

| Time | Value |
| ---- | ----- |
| 22   | 22    |
| 28   | 77    |

##### Config

value: "what"

##### Output

| cluster | job | Temp | Speed |
| ------- | --- | ---- | ----- |
| A       | J1  | 10   |       |
| A       | J1  | 200  |       |
| B       | J1  | 10   | 22    |
| B       | J1  | 200  | 77    |

Combine and organize time series data effectively with this transformation for comprehensive insights.
  `}},labelsToFields:{name:"Labels to fields",getHelperDocs:function(){return`
Use this transformation to convert time series results with labels or tags into a table, including each label's keys and values in the result. Display labels as either columns or row values for enhanced data visualization.

Given a query result of two time series:

- Series 1: labels Server=Server A, Datacenter=EU
- Series 2: labels Server=Server B, Datacenter=EU

In "Columns" mode, the result looks like this:

| Time                | Server   | Datacenter | Value |
| ------------------- | -------- | ---------- | ----- |
| 2020-07-07 11:34:20 | Server A | EU         | 1     |
| 2020-07-07 11:34:20 | Server B | EU         | 2     |

In "Rows" mode, the result has a table for each series and show each label value like this:

| label      | value    |
| ---------- | -------- |
| Server     | Server A |
| Datacenter | EU       |

| label      | value    |
| ---------- | -------- |
| Server     | Server B |
| Datacenter | EU       |

#### Value field name

If you selected Server as the **Value field name**, then you would get one field for every value of the Server label.

| Time                | Datacenter | Server A | Server B |
| ------------------- | ---------- | -------- | -------- |
| 2020-07-07 11:34:20 | EU         | 1        | 2        |

#### Merging behavior

The labels to fields transformer is internally two separate transformations. The first acts on single series and extracts labels to fields. The second is the [merge](#merge) transformation that joins all the results into a single table. The merge transformation tries to join on all matching fields. This merge step is required and cannot be turned off.

To illustrate this, here is an example where you have two queries that return time series with no overlapping labels.

- Series 1: labels Server=ServerA
- Series 2: labels Datacenter=EU

This will first result in these two tables:

| Time                | Server  | Value |
| ------------------- | ------- | ----- |
| 2020-07-07 11:34:20 | ServerA | 10    |

| Time                | Datacenter | Value |
| ------------------- | ---------- | ----- |
| 2020-07-07 11:34:20 | EU         | 20    |

After merge:

| Time                | Server  | Value | Datacenter |
| ------------------- | ------- | ----- | ---------- |
| 2020-07-07 11:34:20 | ServerA | 10    |            |
| 2020-07-07 11:34:20 |         | 20    | EU         |

Convert your time series data into a structured table format for a clearer and more organized representation.
  `}},limit:{name:"Limit",getHelperDocs:function(){return`
Use this transformation to restrict the number of rows displayed, providing a more focused view of your data. This is particularly useful when dealing with large datasets.

Below is an example illustrating the impact of the **Limit** transformation on a response from a data source:

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |

Here is the result after adding a Limit transformation with a value of '3':

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |

Using a negative number, you can keep values from the end of the set. Here is the result after adding a Limit transformation with a value of '-3':

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |


This transformation helps you tailor the visual presentation of your data to focus on the most relevant information.
  `}},merge:{name:"Merge series/tables",getHelperDocs:function(){return`
Use this transformation to combine the results from multiple queries into a single result, which is particularly useful when using the table panel visualization. This transformation merges values into the same row if the shared fields contain the same data.

Here's an example illustrating the impact of the **Merge series/tables** transformation on two queries returning table data:

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |

**Query B:**

| Time                | Job     | Errors |
| ------------------- | ------- | ------ |
| 2020-07-07 11:34:20 | node    | 15     |
| 2020-07-07 11:24:20 | postgre | 5      |

Here is the result after applying the Merge transformation.

| Time                | Job     | Errors | Uptime    |
| ------------------- | ------- | ------ | --------- |
| 2020-07-07 11:34:20 | node    | 15     | 25260122  |
| 2020-07-07 11:24:20 | postgre | 5      | 123001233 |

This transformation combines values from Query A and Query B into a unified table, enhancing the presentation of data for better insights.
  `},links:[{title:"Table panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/"}]},organize:{name:"Organize fields by name",getHelperDocs:function(){return`
Use this transformation to provide the flexibility to rename, reorder, or hide fields returned by a single query in your panel. This transformation is applicable only to panels with a single query. If your panel has multiple queries, consider using an "Outer join" transformation or removing extra queries.

#### Transforming fields

Grafana displays a list of fields returned by the query, allowing you to perform the following actions:

- **Set field order mode** - If the mode is **Manual**, you can change the field order by hovering the cursor over a field and dragging the field to its new position. If it's **Auto**, use the **OFF**, **ASC**, and **DESC** options to order by any labels on the field or by the field name. For any field that is sorted **ASC** or **DESC**, you can drag the option to set the priority of the sorting.
- **Change field order** - Hover over a field, and when your cursor turns into a hand, drag the field to its new position.
- **Hide or show a field** - Use the eye icon next to the field name to toggle the visibility of a specific field.
- **Rename fields** - Type a new name in the "Rename <field>" box to customize field names.

#### Example:

##### Original Query Result

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |

##### After Applying Field Overrides

| Time                | Sensor      | Reading |
| ------------------- | ----------- | ------- |
| 2020-07-07 11:34:20 | Temperature | 25      |
| 2020-07-07 11:34:20 | Humidity    | 22      |
| 2020-07-07 10:32:20 | Humidity    | 29      |

This transformation lets you to tailor the display of query results, ensuring a clear and insightful representation of your data in Grafana.
  `}},partitionByValues:{name:"Partition by values",getHelperDocs:function(){return`
Use this transformation to streamline the process of graphing multiple series without the need for multiple queries with different 'WHERE' clauses.

This is particularly useful when dealing with a metrics SQL table, as illustrated below:

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | US     | 1520  |
| 2022-10-20 12:00:00 | EU     | 2936  |
| 2022-10-20 01:00:00 | US     | 1327  |
| 2022-10-20 01:00:00 | EU     | 912   |

With the **Partition by values** transformation, you can issue a single query and split the results by unique values in one or more columns (fields) of your choosing. The following example uses 'Region':

'SELECT Time, Region, Value FROM metrics WHERE Time > "2022-10-20"'

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | US     | 1520  |
| 2022-10-20 01:00:00 | US     | 1327  |

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | EU     | 2936  |
| 2022-10-20 01:00:00 | EU     | 912   |

This transformation simplifies the process and enhances the flexibility of visualizing multiple series within the same time series visualization.
  `}},prepareTimeSeries:{name:"Prepare time series",getHelperDocs:function(){return`
Use this transformation to address issues when a data source returns time series data in a format that isn't compatible with the desired visualization. This transformation allows you to convert time series data between wide and long formats, providing flexibility in data frame structures.

#### Available options

##### Wide time series

Select this option to transform the time series data frame from the long format to the wide format. If your data source returns time series data in a long format and your visualization requires a wide format, this transformation simplifies the process.

A wide time series combines data into a single frame with one shared, ascending time field. Time fields do not repeat and multiple values extend in separate columns.

**Example: Converting from long to wide format**

| Timestamp           | Variable | Value |
|---------------------|----------|-------|
| 2023-01-01 00:00:00 | Value1   | 10    |
| 2023-01-01 00:00:00 | Value2   | 20    |
| 2023-01-01 01:00:00 | Value1   | 15    |
| 2023-01-01 01:00:00 | Value2   | 25    |

**Transformed to:**

| Timestamp           | Value1 | Value2 |
|---------------------|--------|--------|
| 2023-01-01 00:00:00 | 10     | 20     |
| 2023-01-01 01:00:00 | 15     | 25     |

##### Multi-frame time series

Multi-frame time series break data into multiple frames that all contain two fields: a time field and a numeric value field. Time is always ascending. String values are represented as field labels.

##### Long time series

A long time series combines data into one frame, with the first field being an ascending time field. The time field might have duplicates. String values are in separate fields, and there might be more than one. 

**Example: Converting to long format**

| Value1 | Value2 |  Timestamp          |
|--------|--------|---------------------|
| 10     | 20     | 2023-01-03 00:00:00 |
| 30     | 40     | 2023-01-02 00:00:00 |
| 50     | 60     | 2023-01-01 00:00:00 |
| 70     | 80     | 2023-01-01 00:00:00 |

**Transformed to:**

| Timestamp           | Value1 | Value2 |
|---------------------|--------|--------|
| 2023-01-01 00:00:00 | 70     | 80     |
| 2023-01-01 01:00:00 | 50     | 60     |
| 2023-01-02 01:00:00 | 30     | 40     |
| 2023-01-03 01:00:00 | 10     | 20     |

  `},links:[{title:"Data frames",url:"https://grafana.com/docs/grafana/latest/developers/plugins/introduction-to-plugin-development/data-frames/"}]},reduce:{name:"Reduce",getHelperDocs:function(){return`
Use this transformation to apply a calculation to each field in the data frame and return a single value. This transformation is particularly useful for consolidating multiple time series data into a more compact, summarized format. Time fields are removed when applying this transformation.

Consider the input:

**Query A:**

| Time                | Temp | Uptime  |
| ------------------- | ---- | ------- |
| 2020-07-07 11:34:20 | 12.3 | 256122  |
| 2020-07-07 11:24:20 | 15.4 | 1230233 |

**Query B:**

| Time                | AQI | Errors |
| ------------------- | --- | ------ |
| 2020-07-07 11:34:20 | 6.5 | 15     |
| 2020-07-07 11:24:20 | 3.2 | 5      |

The reduce transformer has two modes:

- **Series to rows** - Creates a row for each field and a column for each calculation.
- **Reduce fields** - Keeps the existing frame structure, but collapses each field into a single value.

For example, if you used the **First** and **Last** calculation with a **Series to rows** transformation, then
the result would be:

| Field  | First  | Last    |
| ------ | ------ | ------- |
| Temp   | 12.3   | 15.4    |
| Uptime | 256122 | 1230233 |
| AQI    | 6.5    | 3.2     |
| Errors | 15     | 5       |

The **Reduce fields** with the **Last** calculation,
results in two frames, each with one row:

**Query A:**

| Temp | Uptime  |
| ---- | ------- |
| 15.4 | 1230233 |

**Query B:**

| AQI | Errors |
| --- | ------ |
| 3.2 | 5      |

This flexible transformation simplifies the process of consolidating and summarizing data from multiple time series into a more manageable and organized format.
  `}},renameByRegex:{name:"Rename by regex",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to rename parts of the query results using a regular expression and replacement pattern.

You can specify a regular expression, which is only applied to matches, along with a replacement pattern that support back references. For example, let's imagine you're visualizing CPU usage per host and you want to remove the domain name. You could set the regex to '/^([^.]+).*/' and the replacement pattern to '$1', 'web-01.example.com' would become 'web-01'.

> **Note:** The Rename by regex transformation was improved in Grafana v9.0.0 to allow global patterns of the form '/<stringToReplace>/g'. Depending on the regex match used, this may cause some transformations to behave slightly differently. You can guarantee the same behavior as before by wrapping the match string in forward slashes '(/)', e.g. '(.*)' would become '/(.*)/'.

In the following example, we are stripping the 'A-' prefix from field names. In the before image, you can see everything is prefixed with 'A-':

${Ie("/media/docs/grafana/panels-visualizations/screenshot-rename-by-regex-before-v11.0.png",A,"A time series with full series names")}

With the transformation applied, you can see we are left with just the remainder of the string.

${Ie("/media/docs/grafana/panels-visualizations/screenshot-rename-by-regex-after-v11.0.png",A,"A time series with shortened series names")}

This transformation lets you to tailor your data to meet your visualization needs, making your dashboards more informative and user-friendly.
  `}},rowsToFields:{name:"Rows to fields",getHelperDocs:function(){return`
Use this transformation to convert rows into separate fields. This can be useful because fields can be styled and configured individually. It can also use additional fields as sources for dynamic field configuration or map them to field labels. The additional labels can then be used to define better display names for the resulting fields.

This transformation includes a field table which lists all fields in the data returned by the configuration query. This table gives you control over what field should be mapped to each configuration property (the **Use as** option). You can also choose which value to select if there are multiple rows in the returned data.

This transformation requires:

- One field to use as the source of field names.

  By default, the transform uses the first string field as the source. You can override this default setting by selecting **Field name** in the **Use as** column for the field you want to use instead.

- One field to use as the source of values.

  By default, the transform uses the first number field as the source. But you can override this default setting by selecting **Field value** in the **Use as** column for the field you want to use instead.

Useful when visualizing data in:

- Gauge
- Stat
- Pie chart

#### Map extra fields to labels

If a field does not map to config property Grafana will automatically use it as source for a label on the output field-

**Example:**

| Name    | DataCenter | Value |
| ------- | ---------- | ----- |
| ServerA | US         | 100   |
| ServerB | EU         | 200   |

**Output:**

| ServerA (labels: DataCenter: US) | ServerB (labels: DataCenter: EU) |
| -------------------------------- | -------------------------------- |
| 10                               | 20                               |

The extra labels can now be used in the field display name provide more complete field names.

If you want to extract config from one query and apply it to another you should use the config from query results transformation.

#### Example

**Input:**

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

**Output:**

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field configuration and if set like this will be used by the visualization instead of any options manually configured in the panel editor options pane.

This transformation enables the conversion of rows into individual fields, facilitates dynamic field configuration, and maps additional fields to labels.
  `}},seriesToRows:{name:"Series to rows",getHelperDocs:function(){return`
Use this transformation to combine the result from multiple time series data queries into one single result. This is helpful when using the table panel visualization.

The result from this transformation will contain three columns: Time, Metric, and Value. The Metric column is added so you easily can see from which query the metric originates from. Customize this value by defining Label on the source query.

In the example below, we have two queries returning time series data. It is visualized as two separate tables before applying the transformation.

**Query A:**

| Time                | Temperature |
| ------------------- | ----------- |
| 2020-07-07 11:34:20 | 25          |
| 2020-07-07 10:31:22 | 22          |
| 2020-07-07 09:30:05 | 19          |

**Query B:**

| Time                | Humidity |
| ------------------- | -------- |
| 2020-07-07 11:34:20 | 24       |
| 2020-07-07 10:32:20 | 29       |
| 2020-07-07 09:30:57 | 33       |

Here is the result after applying the Series to rows transformation.

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |

This transformation facilitates the consolidation of results from multiple time series queries, providing a streamlined and unified dataset for efficient analysis and visualization in a tabular format.

  `}},sortBy:{name:"Sort by",getHelperDocs:function(){return`
Use this transformation to sort each frame within a query result based on a specified field, making your data easier to understand and analyze. By configuring the desired field for sorting, you can control the order in which the data is presented in the table or visualization.

Use the **Reverse** switch to inversely order the values within the specified field. This functionality is particularly useful when you want to quickly toggle between ascending and descending order to suit your analytical needs.

For example, in a scenario where time-series data is retrieved from a data source, the **Sort by** transformation can be applied to arrange the data frames based on the timestamp, either in ascending or descending order, depending on the analytical requirements. This capability ensures that you can easily navigate and interpret time-series data, gaining valuable insights from the organized and visually coherent presentation.
  `}},spatial:{name:"Spatial",getHelperDocs:function(){return`
Use this transformation to apply spatial operations to query results.

- **Action** - Select an action:
  - **Prepare spatial field** - Set a geometry field based on the results of other fields.
    - **Location mode** - Select a location mode (these options are shared by the **Calculate value** and **Transform** modes):
      - **Auto** - Automatically identify location data based on default field names.
      - **Coords** - Specify latitude and longitude fields.
      - **Geohash** - Specify a geohash field.
      - **Lookup** - Specify Gazetteer location fields.
  - **Calculate value** - Use the geometry to define a new field (heading/distance/area).
    - **Function** - Choose a mathematical operation to apply to the geometry:
      - **Heading** - Calculate the heading (direction) between two points.
      - **Area** - Calculate the area enclosed by a polygon defined by the geometry.
      - **Distance** - Calculate the distance between two points.
  - **Transform** - Apply spatial operations to the geometry.
    - **Operation** - Choose an operation to apply to the geometry:
      - **As line** - Create a single line feature with a vertex at each row.
      - **Line builder** - Create a line between two points.

This transformation allows you to manipulate and analyze geospatial data, enabling operations such as creating lines between points, calculating spatial properties, and more.
  `}},timeSeriesTable:{name:"Time series to table transform",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to convert time series results into a table, transforming a time series data frame into a **Trend** field which can then be used with the [sparkline cell type][]. If there are multiple time series queries, each will result in a separate table data frame. These can be joined using join or merge transforms to produce a single table with multiple sparklines per row.

${Ie("/static/img/docs/transformations/table-sparklines.png",A,"A table panel showing multiple values and their corresponding sparklines.")}

For each generated **Trend** field value, a calculation function can be selected. This value is displayed next to the sparkline and will be used for sorting table rows.

${Ie("/static/img/docs/transformations/timeseries-table-select-stat.png",A,"A select box showing available statistics that can be calculated.")}


> **Note:** This transformation is available in Grafana 9.5+ as an opt-in beta feature. Modify the Grafana [configuration file][] to use it.
  `},links:[{title:"sparkline cell type",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/#sparkline"},{title:"configuration file",url:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/"}]},transpose:{name:"Transpose",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to pivot the data frame, converting rows into columns and columns into rows. This transformation is particularly useful when you want to switch the orientation of your data to better suit your visualization needs.
If you have multiple types, it will default to string type. You can select how empty cells should be represented.

**Before Transformation:**

| env  | January   | February |
| ---- | --------- | -------- |
| prod | 1 | 2 |
| dev | 3 | 4 |

**After applying transpose transformation:**

| Field  | prod   | dev |
| ---- | --------- | -------- |
| January | 1 | 3 |
| February  | 2 | 4 |

${Ie("/media/docs/grafana/transformations/screenshot-grafana-11-2-transpose-transformation.png",A,"Before and after transpose transformation")}
  `}},regression:{name:"Trendline",getHelperDocs:function(A="shortcodeFigure"){return`
Use this transformation to create a new data frame containing values predicted by a statistical model. This is useful for finding a trend in chaotic data. It works by fitting a mathematical function to the data, using either linear or polynomial regression. The data frame can then be used in a visualization to display a trendline.

There are two different models:

- **Linear** - Fits a linear function to the data.
${Ie("/static/img/docs/transformations/linear-regression.png",A,"A time series visualization with a straight line representing the linear function")}
- **Polynomial** - Fits a polynomial function to the data.
${Ie("/static/img/docs/transformations/polynomial-regression.png",A,"A time series visualization with a curved line representing the polynomial function")}

> **Note:** This transformation was previously called regression analysis.
  `}}};function Ie(A,S,Z){return S==="shortcodeFigure"?`{{< figure src="${A}" class="docs-image--no-shadow" max-width= "1100px" alt="${Z}" >}}`:`![${Z}](https://grafana.com${A})`}function Re(A){if(A in Ue){const{name:S,getHelperDocs:Z,links:ce}=Ue[A],he=Z(Qe.UIImage),ve=Ke(he);if(ce?.length){const xe=ce.map(Ce=>`
  Or visit <a href="${Ce.url}" target="_blank">${Ce.title}</a>

  `).join("");return{name:S,helperDocs:`
        ${ve}
        ${Se.M}
  ${xe}
        `}}return{name:S,helperDocs:`
      ${ve}
      ${Se.M}
      `}}return{name:"No documentation found",helperDocs:Se.M}}const Ke=A=>A.replace(/\[(.*?)\]\(#.*?\)/g,"$1").replace(/\[[^\]]*\]\[\]/g,"");var Le=e(28134),ze=e(71896),Be=e(97095),$e=e(18857),Ye=e(42954),de=e(17200),ge=e(72598);function pe(A){return function({options:Z,onChange:ce}){const{validator:he}=A,{value:ve}=Z,[xe,Ce]=(0,u.useState)(!he(ve)),je=(0,u.useCallback)(_e=>{Ce(!he(_e)),ce({...Z,value:_e})},[Ce,he,ce,Z]);return(0,L.jsx)(de.y,{invalid:xe,value:ve,error:"Value needs to be a number or a variable",onChange:je,placeholder:(0,f.t)("transformers.basic-matcher-editor.placeholder-value-or-variable","Value or variable"),suggestions:(0,ge.I9)()})}}const De=()=>[{name:"Is greater",id:ye.Js.greater,component:pe({validator:ge.N_})},{name:"Is greater or equal",id:ye.Js.greaterOrEqual,component:pe({validator:ge.N_})},{name:"Is lower",id:ye.Js.lower,component:pe({validator:ge.N_})},{name:"Is lower or equal",id:ye.Js.lowerOrEqual,component:pe({validator:ge.N_})},{name:"Is equal",id:ye.Js.equal,component:pe({validator:()=>!0})},{name:"Is not equal",id:ye.Js.notEqual,component:pe({validator:()=>!0})},{name:"Is Substring",id:ye.Js.substring,component:pe({validator:()=>!0})},{name:"Is not substring",id:ye.Js.notSubstring,component:pe({validator:()=>!0})}],Me=A=>null,be=()=>[{name:"Is null",id:ye.Js.isNull,component:Me},{name:"Is not null",id:ye.Js.isNotNull,component:Me}];var Oe=e(79233);function Ne(A){return function({options:Z,onChange:ce}){const{validator:he}=A,[ve,xe]=(0,u.useState)({from:!he(Z.from),to:!he(Z.to)}),Ce=(0,u.useCallback)((_e,Xe)=>{const et=!he(_e);xe({...ve,[Xe]:et}),!et&&ce({...Z,[Xe]:_e})},[Z,ce,ve,xe,he]),je=(0,ge.I9)();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(de.y,{value:String(Z.from),invalid:ve.from,error:"Value needs to be a number or a variable",placeholder:(0,f.t)("transformers.range-matcher-editor.placeholder-from","From"),onChange:_e=>Ce(_e,"from"),suggestions:je}),(0,L.jsx)(Oe.c,{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.range-matcher-editor.and",children:"and"})}),(0,L.jsx)(de.y,{invalid:ve.to,error:"Value needs to be a number or a variable",value:String(Z.to),placeholder:(0,f.t)("transformers.range-matcher-editor.placeholder-to","To"),suggestions:je,onChange:_e=>Ce(_e,"to")})]})}}const We=()=>[{name:"Is between",id:ye.Js.between,component:Ne({validator:ge.N_})}];function qe(A){return function({options:Z,onChange:ce}){const{validator:he}=A,{value:ve}=Z,[xe,Ce]=(0,u.useState)(!he(ve)),je=(0,ge.I9)().reduce((Xe,et)=>(Xe.push(et),Xe.push({...et,documentation:(0,f.t)("transformers.regex-matcher-editor.variable-regex-documentation","Formats multi-value variable into a regex string"),label:et.label.concat(":regex"),value:et.value.concat(":regex")}),Xe),[]),_e=(0,u.useCallback)(Xe=>{Ce(!he(Xe)),ce({...Z,value:Xe})},[Ce,he,ce,Z]);return(0,L.jsx)(de.y,{invalid:xe,value:ve,onChange:_e,placeholder:(0,f.t)("transformers.regex-matcher-editor.placeholder-value-or-variable","Value or variable"),suggestions:je})}}const st=()=>[{name:"Regex",id:ye.Js.regex,component:qe({validator:()=>!0})}],rt=new Ye.O(()=>[...De(),...be(),...We(),...st()]),ot=A=>{const{onDelete:S,onChange:Z,filter:ce,fieldsInfo:he}=A,{fieldsAsOptions:ve,fieldByDisplayName:xe}=he,Ce=ke(ce,ve)??"",je=xe[Ce],_e=je?mt(je):[],Xe=pt(ce,_e),et=rt.getIfExists(Xe),dt=(0,u.useCallback)(Et=>{Et?.value&&Z({...ce,fieldName:Et.value})},[Z,ce]),vt=(0,u.useCallback)(Et=>{if(!Et?.value)return;const It=Et.value,_t=ue.hI.get(It).getDefaultOptions(je);Z({...ce,config:{id:It,options:_t}})},[Z,ce,je]),lt=(0,u.useCallback)(Et=>{Z({...ce,config:{...ce.config,options:Et}})},[Z,ce]);return!je||!et||!et.component?null:(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.filter-by-value-filter-editor.label-field","Field"),labelWidth:14,children:(0,L.jsx)($e.l6,{className:"min-width-15 max-width-24",placeholder:(0,f.t)("transformers.filter-by-value-filter-editor.placeholder-field-name","Field name"),options:ve,value:ce.fieldName,onChange:dt})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.filter-by-value-filter-editor.label-match","Match"),children:(0,L.jsx)($e.l6,{className:"width-12",placeholder:(0,f.t)("transformers.filter-by-value-filter-editor.placeholder-select-test","Select test"),options:_e,value:Xe,onChange:vt})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.filter-by-value-filter-editor.label-value","Value"),grow:!0,children:(0,L.jsx)(et.component,{field:je,options:ce.config.options??{},onChange:lt})}),(0,L.jsx)(Ve.a,{marginBottom:.5,children:(0,L.jsx)(me.$n,{"aria-label":(0,f.t)("transformers.filter-by-value-filter-editor.aria-label-remove-filter","Remove filter"),icon:"times",onClick:S,variant:"secondary"})})]})},mt=A=>{const S=[];for(const Z of ue.hI.list())!Z.isApplicable(A)||!rt.getIfExists(Z.id)||S.push({value:Z.id,label:Z.name,description:Z.description});return S},pt=(A,S)=>{const Z=S.find(ce=>ce.value===A.config.id);if(Z&&Z.value)return Z.value;if(S[0]?.value)return S[0]?.value},ke=(A,S)=>{const Z=S.find(ce=>ce.value===A.fieldName);if(Z&&Z.value)return Z.value;if(S[0]?.value)return S[0]?.value},Ze=A=>{const{input:S,options:Z,onChange:ce}=A,he=ut(S),ve=[{label:(0,f.t)("transformers.filter-by-value-transformer-editor.filter-types.label.include","Include"),value:Ge.j4.include},{label:(0,f.t)("transformers.filter-by-value-transformer-editor.filter-types.label.exclude","Exclude"),value:Ge.j4.exclude}],xe=[{label:(0,f.t)("transformers.filter-by-value-transformer-editor.filter-match.label.match-all","Match all"),value:Ge.Sm.all},{label:(0,f.t)("transformers.filter-by-value-transformer-editor.filter-match.label.match-any","Match any"),value:Ge.Sm.any}],Ce=(0,u.useCallback)(()=>{const dt=S[0],vt=dt.fields.find(It=>It.type!==oe.PU.time);if(!vt)return;const lt=(0,ie.cloneDeep)(Z.filters),Et=ue.hI.get(ye.Js.isNull);lt.push({fieldName:(0,fe.Ct)(vt,dt,S),config:{id:Et.id,options:Et.getDefaultOptions(vt)}}),ce({...Z,filters:lt})},[ce,Z,S]),je=(0,u.useCallback)(dt=>{let vt=(0,ie.cloneDeep)(Z.filters);vt.splice(dt,1),ce({...Z,filters:vt})},[Z,ce]),_e=(0,u.useCallback)((dt,vt)=>{let lt=(0,ie.cloneDeep)(Z.filters);lt[vt]=dt,ce({...Z,filters:lt})},[Z,ce]),Xe=(0,u.useCallback)(dt=>{ce({...Z,type:dt??Ge.j4.include})},[Z,ce]),et=(0,u.useCallback)(dt=>{ce({...Z,match:dt??Ge.Sm.all})},[Z,ce]);return(0,L.jsxs)("div",{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.filter-by-value-transformer-editor.label-filter-type","Filter type"),labelWidth:16,children:(0,L.jsx)("div",{className:"width-15",children:(0,L.jsx)(Pe.z,{options:ve,value:Z.type,onChange:Xe,fullWidth:!0})})}),Z.filters.length>1&&(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.filter-by-value-transformer-editor.label-conditions","Conditions"),labelWidth:16,children:(0,L.jsx)("div",{className:"width-15",children:(0,L.jsx)(Pe.z,{options:xe,value:Z.match,onChange:et,fullWidth:!0})})}),(0,L.jsxs)(Ve.a,{paddingLeft:2,children:[Z.filters.map((dt,vt)=>(0,L.jsx)(ot,{filter:dt,fieldsInfo:he,onChange:lt=>_e(lt,vt),onDelete:()=>je(vt)},vt)),(0,L.jsx)(me.$n,{icon:"plus",size:"sm",onClick:Ce,variant:"secondary",children:(0,L.jsx)(f.x6,{i18nKey:"transformers.filter-by-value-transformer-editor.add-condition",children:"Add condition"})})]})]})},nt=()=>({id:Ee.F.filterByValue,editor:Ze,transformation:Ae.c.filterByValueTransformer,name:(0,f.t)("transformers.filter-by-value-transformer-editor.name.filter-data-by-values","Filter data by values"),description:(0,f.t)("transformers.filter-by-value-transformer-editor.description.remove-rows-query-results-user-defined-filters","Remove rows from the query results using user-defined filters."),categories:new Set([m.m.Filter]),help:Re(Ee.F.filterByValue).helperDocs,imageDark:Le,imageLight:ze}),ut=A=>(0,u.useMemo)(()=>{const S={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(A)?A.reduce((Z,ce)=>ce.fields.reduce((he,ve)=>{const xe=(0,fe.Ct)(ve,ce,A);return he.fieldByDisplayName[xe]||(he.fieldsAsOptions.push({label:xe,value:xe,type:ve.type}),he.fieldByDisplayName[xe]=ve),he},Z),S):S},[A]);var gt=e(11594),ht=e(26250),tt=e(58508),Ot=e(52205),jt=e(25797),wt=e(56424),Ht=e(61215);function hn(A,S){const Z={data:A.input,options:A.options},ce=new jt.C({id:"root",title:(0,f.t)("transformers.get-transformer-option-pane.root.title.root","root")}),he=xe=>{if(xe?.length){const Ce=xe[0];let je=ce.categories.find(_e=>_e.props.id===Ce);return je||(je=new jt.C({id:Ce,title:Ce}),ce.categories.push(je)),je}return ce},ve={getValue:xe=>(0,ie.get)(A.options,xe),onChange:(xe,Ce)=>{A.onChange((0,Ht.Sf)(A.options,xe,Ce))}};return(0,wt.g5)("spatial-transformer",S,ve,he,Z),ce}function Dn(A){const S={data:[],options:{}},Z={},ce=new Ot.pv;A(ce,S);for(const he of ce.getItems())he.defaultValue!=null&&(0,ie.set)(Z,he.path,he.defaultValue);return Z}var Bn=e(13572),xn=e(48264);const ft=(A,S)=>{const Z=S.options??{};(0,Bn.J)("",A,Z)},St=A=>{(0,u.useEffect)(()=>{if(!A.options.xBuckets?.mode){const Z=Dn(ft);A.onChange({...Z,...A.options})}});const S=hn(A,ft);return(0,L.jsx)("div",{children:(0,L.jsx)("div",{children:S.items.map(Z=>Z.render())})})},Tt=()=>{const A=(0,xn.m4)();return{id:A.id,editor:St,transformation:A,name:A.name,description:A.description,state:gt.pn.alpha,categories:new Set([m.m.CreateNewVisualization]),help:Re(A.id).helperDocs,imageDark:ht,imageLight:tt}};var Je=e(22803),Pt=e(63142),Yt=e(63152),Lt=e(46644),fn=e(34107),En=e(64394),An=e(13227),Gn=e(33553),zn=e(18600);function sa(A,S,Z){const ce={},he={};for(const ve of A.fields){const xe=(0,fe.Ct)(ve,A),Ce=Z.index[xe],je=Ce.handler;if(!je)continue;const _e=ve.values[S];if(_e==null)continue;const Xe=je.processor(_e,ce,he,Ce.handlerArguments);Xe!=null&&(ce[je.targetProperty??je.key]=Xe)}return he.mappingValues&&(ce.mappings=ea(he)),ce}var ta=(A=>(A.Name="field.name",A.Value="field.value",A.Label="field.label",A.Ignore="__ignore",A))(ta||{});const ra=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Ca},{key:"min",processor:Ca},{key:"unit",processor:A=>A.toString()},{key:"decimals",processor:Ca},{key:"displayName",name:"Display name",processor:A=>A.toString()},{key:"color",processor:A=>({fixedColor:A,mode:En.Y.Fixed})},{key:"threshold1",name:"Threshold",targetProperty:"thresholds",processor:(A,S,Z,ce)=>{const he=(0,An.t)(A);if(!isNaN(he))return S.thresholds||(S.thresholds={mode:Gn.O.Absolute,steps:[]}),S.thresholds.steps.push({value:he,color:ce.threshold?.color??"red"}),S.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:Lt.gy.allValues,processor:(A,S,Z)=>{if((0,ie.isArray)(A))return Z.mappingValues=A,S.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:Lt.gy.allValues,processor:(A,S,Z)=>{if((0,ie.isArray)(A))return Z.mappingColors=A,S.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:Lt.gy.allValues,processor:(A,S,Z)=>{if((0,ie.isArray)(A))return Z.mappingTexts=A,S.mappings}}];function ea(A){const S={type:zn.d.ValueToText,options:{}};if(!A.mappingValues)return[];for(let Z=0;Z<A.mappingValues.length;Z++){const ce=A.mappingValues[Z];ce!=null&&(S.options[ce.toString()]={color:A.mappingColors&&A.mappingColors[Z],text:A.mappingTexts&&A.mappingTexts[Z],index:Z})}return[S]}let Un=null;function oa(){if(Un===null){Un={};for(const A of ra)Un[A.key]=A}return Un}function Ca(A){const S=(0,An.t)(A);if(!isNaN(S))return S}function ya(A,S){for(const Z of S)if(A===Z.fieldName)return Z.handlerKey;return A.toLowerCase()}function Xa(A){return A?oa()[A]:null}function Ta(A,S,Z){const ce={index:{}};let he=S.find(xe=>xe.handlerKey==="field.name"),ve=S.find(xe=>xe.handlerKey==="field.value");for(const xe of A.fields){const Ce=(0,fe.Ct)(xe,A),je=S.find(et=>et.fieldName===Ce),_e=je?je.handlerKey:Ce.toLowerCase();let Xe=Xa(_e);Z&&(Xe?(Xe.key==="field.name"&&(ce.nameField=xe),Xe.key==="field.value"&&(ce.valueField=xe)):je||(!ce.nameField&&!he&&xe.type===oe.PU.string&&(ce.nameField=xe,Xe=Xa("field.name")),!ce.valueField&&!ve&&xe.type===oe.PU.number&&(ce.valueField=xe,Xe=Xa("field.value")))),!Xe&&Z&&(Xe=Xa("field.label")),ce.index[Ce]={automatic:!je,handler:Xe,handlerArguments:je?.handlerArguments??{},reducerId:je?.reducerId??Xe?.defaultReducer??Lt.gy.lastNotNull}}return ce}var Pa=e(63527),pa=e(35427);function Ua(A){switch(A){case"threshold1":return!0;default:return!1}}function ma({handlerArguments:A,handlerKey:S,onChange:Z}){const ce=he=>{Z(he?{...A,threshold:{...A.threshold,color:he}}:{...A,threshold:void 0})};return(0,L.jsx)(L.Fragment,{children:S==="threshold1"&&(0,L.jsx)(Pa.p,{type:"text",value:"Threshold color","aria-label":(0,f.t)("transformers.field-config-mapping-handler-arguments-editor.aria-label-threshold-color","Threshold color"),disabled:!0,width:20,prefix:(0,L.jsx)(pa.sk,{color:A.threshold?.color??"red",onChange:ce,enableNamedColors:!0})})})}function Ka({frame:A,mappings:S,onChange:Z,withReducers:ce,withNameAndValue:he}){const ve=(0,Pt.of)(Bt),xe=Oa(A,S,he),Ce=ra.map(dt=>is(dt,!1)),je=S.reduce((dt,vt)=>dt||Ua(vt.handlerKey),!1),_e=(dt,vt)=>{const lt=S.findIndex(Et=>Et.fieldName===dt.fieldName);if(vt)if(lt!==-1){const Et=[...S];Et.splice(lt,1,{...S[lt],handlerKey:vt.value}),Z(Et)}else Z([...S,{fieldName:dt.fieldName,handlerKey:vt.value}]);else Z(lt!==-1?S.filter((Et,It)=>It!==lt):[...S,{fieldName:dt.fieldName,handlerKey:"__ignore"}])},Xe=(dt,vt)=>{const lt=S.findIndex(Et=>Et.fieldName===dt.fieldName);if(lt!==-1){const Et=[...S];Et.splice(lt,1,{...S[lt],reducerId:vt}),Z(Et)}else Z([...S,{fieldName:dt.fieldName,handlerKey:dt.handlerKey,reducerId:vt}])},et=(dt,vt)=>{const lt=S.findIndex(Et=>Et.fieldName===dt.fieldName);if(lt!==-1){const Et=[...S];Et.splice(lt,1,{...S[lt],handlerArguments:vt}),Z(Et)}else Z([...S,{fieldName:dt.fieldName,handlerKey:dt.handlerKey,handlerArguments:vt}])};return(0,L.jsxs)("table",{className:ve.table,children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.field-to-config-mapping-editor.field",children:"Field"})}),(0,L.jsx)("th",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.field-to-config-mapping-editor.use-as",children:"Use as"})}),ce&&(0,L.jsx)("th",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.field-to-config-mapping-editor.select",children:"Select"})}),je&&(0,L.jsx)("th",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.field-to-config-mapping-editor.additional-settings",children:"Additional settings"})})]})}),(0,L.jsx)("tbody",{children:xe.map(dt=>(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:ve.labelCell,children:dt.fieldName}),(0,L.jsx)("td",{className:ve.selectCell,"data-testid":`${dt.fieldName}-config-key`,children:(0,L.jsx)($e.l6,{options:Ce,value:dt.configOption,placeholder:dt.placeholder,isClearable:!0,onChange:vt=>_e(dt,vt)})}),ce&&(0,L.jsx)("td",{"data-testid":`${dt.fieldName}-reducer`,className:ve.selectCell,children:(0,L.jsx)(fn.S,{stats:[dt.reducerId],defaultStat:dt.reducerId,onChange:vt=>Xe(dt,vt[0])})}),je&&(0,L.jsx)("td",{"data-testid":`${dt.fieldName}-handler-arg`,className:ve.selectCell,children:(0,L.jsx)(ma,{handlerKey:dt.handlerKey,handlerArguments:dt.handlerArguments,onChange:vt=>et(dt,vt)})})]},dt.fieldName))})]})}function Oa(A,S,Z){const ce=[],he=Ta(A,S??[],Z);for(const ve of A.fields){const xe=(0,fe.Ct)(ve,A),Ce=he.index[xe],je=is(Ce.handler,Ce.automatic);ce.push({fieldName:xe,configOption:Ce.automatic?null:je,placeholder:Ce.automatic?je?.label:"Choose",handlerKey:Ce.handler?.key??null,reducerId:Ce.reducerId,handlerArguments:Ce.handlerArguments})}for(const ve of S)if(!ce.find(xe=>xe.fieldName===ve.fieldName)){const xe=Xa(ve.handlerKey);ce.push({fieldName:ve.fieldName,handlerKey:ve.handlerKey,configOption:is(xe,!1),missingInFrame:!0,reducerId:ve.reducerId??Lt.gy.lastNotNull,handlerArguments:{}})}return Object.values(ce)}function is(A,S){if(!A)return null;let Z=A.name??(0,ie.capitalize)(A.key);return S&&(Z=`${Z} (auto)`),{label:Z,value:A.key}}const Bt=A=>({table:(0,Je.css)({marginTop:A.spacing(1),"td, th":{borderRight:`4px solid ${A.colors.background.primary}`,borderBottom:`4px solid ${A.colors.background.primary}`,whiteSpace:"nowrap"},th:{fontSize:A.typography.bodySmall.fontSize,lineHeight:A.spacing(4),padding:A.spacing(0,1)}}),labelCell:(0,Je.css)({fontSize:A.typography.bodySmall.fontSize,background:A.colors.background.secondary,padding:A.spacing(0,1),maxWidth:"400px",overflow:"hidden",textOverflow:"ellipsis",minWidth:"140px"}),selectCell:(0,Je.css)({padding:0,minWidth:"161px"})});var $t=e(4688),zt=e(10662),kt=e(81160);function mn(A,S){let Z=null;for(const Ce of S)if(Ce.refId===A.configRefId){Z=Ce;break}if(!Z)return S;const ce={fields:[],length:1},he=Ta(Z,A.mappings??[],!1);for(const Ce of Z.fields){const je={...Ce},_e=(0,fe.Ct)(Ce,Z),Xe=he.index[_e],et=(0,Lt.Nw)({field:Ce,reducers:[Xe.reducerId]});je.values=[et[Xe.reducerId]],ce.fields.push(je)}const ve=[],xe=(0,ue.NS)(A.applyTo||{id:ye.Ct.numeric});for(const Ce of S){if(Ce===Z&&S.length>1)continue;const je={fields:[],length:Ce.length,refId:Ce.refId};for(const _e of Ce.fields)if(xe(_e,Ce,S)){const Xe=sa(ce,0,he);je.fields.push({..._e,config:{..._e.config,...Xe}})}else je.fields.push(_e);ve.push(je)}return ve}const on=()=>({id:Ee.F.configFromData,name:(0,f.t)("transformers.get-config-from-data-transformer.name.config-from-query-results","Config from query results"),description:(0,f.t)("transformers.get-config-from-data-transformer.description.set-unit-min-max-and-more","Set unit, min, max and more."),defaultOptions:{configRefId:"config",mappings:[]},operator:A=>S=>S.pipe((0,kt.T)(Z=>mn(A,Z)))});function Ln({input:A,onChange:S,options:Z}){const ce=(0,Pt.of)(Tn),he=A.map(vt=>vt.refId).filter(vt=>vt!=null).map(vt=>({label:vt,value:vt})),ve=Z.configRefId||"config",xe=Z.applyTo??{id:ye.Ct.byType,options:"number"},Ce=Yt.g.get(xe.id),je=A.find(vt=>vt.refId===ve),_e=vt=>{S({...Z,configRefId:vt.value||"config"})},Xe=vt=>{S({...Z,applyTo:{id:vt.value}})},et=vt=>{S({...Z,applyTo:{id:xe.id,options:vt}})},dt=Yt.g.list().filter(vt=>!vt.excludeFromPicker).map(vt=>({label:vt.name,value:vt.id,description:vt.description}));return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.config-from-query-transformer-editor.label-config-query","Config query"),labelWidth:20,children:(0,L.jsx)($e.l6,{onChange:_e,options:he,value:ve,width:30})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.config-from-query-transformer-editor.label-apply-to","Apply to"),labelWidth:20,children:(0,L.jsx)($e.l6,{onChange:Xe,options:dt,value:xe.id,width:30})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.config-from-query-transformer-editor.label-apply-to-options","Apply to options"),labelWidth:20,className:ce.matcherOptions,children:(0,L.jsx)(Ce.component,{matcher:Ce.matcher,data:A,options:xe.options,onChange:et})})}),(0,L.jsx)(Be.C,{children:je&&(0,L.jsx)(Ka,{frame:je,mappings:Z.mappings,onChange:vt=>S({...Z,mappings:vt}),withReducers:!0})})]})}const Hn=()=>{const A=on();return{id:A.id,editor:Ln,transformation:A,name:A.name,description:A.description,state:gt.pn.beta,categories:new Set([m.m.CalculateNewFields]),help:Re(A.id).helperDocs,imageDark:$t,imageLight:zt}},Tn=A=>({matcherOptions:(0,Je.css)({minWidth:"404px"})});var Nn=e(62467),gn=e(84691),Zn=e(2863),kn=e(21285),it=e(31438),Wt=e(72040),Vt=e(12823),nn=e(97958);const an=17,Rn=A=>{const{options:S,onChange:Z}=A,ce=(0,gn.pR)(A.options.binary?.left??"",A.names),he=(0,gn.pR)(A.options.binary?.right??"",A.names);(ce!==A.options.binary?.left||he!==A.options.binary?.right)&&Z({...S,mode:gn.UY.BinaryOperation,binary:{operator:S.binary?.operator,left:ce,right:he}});const{binary:ve}=S;let xe=!ve?.left,Ce=!ve?.right;const je=!ve?.left?.matcher,_e=!ve?.right?.matcher,Xe=ve?.left?.matcher?.options,et=ve?.right?.matcher?.options,dt=ve?.left?.matcher?.id===ye.Ct.byName,vt=ve?.right?.matcher?.id===ye.Ct.byName,lt=A.names.map(Jn=>(dt&&Jn===Xe&&(xe=!0),vt&&Jn===et&&(Ce=!0),{label:Jn,value:JSON.stringify({matcher:{id:ye.Ct.byName,options:Jn}})})),Et=xe?[...lt]:dt?[...lt,{label:Xe,value:JSON.stringify(ve.left),icon:""}]:[...lt],It=Ce?[...lt]:vt?[...lt,{label:et,value:JSON.stringify(ve.right),icon:""}]:[...lt];Et.push({label:`All ${oe.PU.number} fields`,value:JSON.stringify({matcher:{id:ye.Ct.byType,options:oe.PU.number}}),icon:(0,nn.lV)(oe.PU.number)}),je&&ve?.left?.fixed&&Et.push({label:ve.left.fixed,value:JSON.stringify(ve.left)??"",icon:""}),_e&&ve?.right?.fixed&&It.push({label:ve.right.fixed,value:JSON.stringify(ve.right)??"",icon:""});const _t=Vt.b.list().map(Jn=>({label:Jn.binaryOperationID,value:Jn.binaryOperationID})),rn=Jn=>{Z({...S,mode:gn.UY.BinaryOperation,binary:Jn})},Mn=Jn=>{const Ba=JSON.parse(Jn.value??"");Ba.matcher?rn({...ve,left:Ba}):rn({...ve,left:{fixed:Ba.fixed??Jn.value?.toString()}})},cn=Jn=>{const Ba=JSON.parse(Jn.value??"");Ba.matcher?rn({...ve,right:Ba}):rn({...ve,right:{fixed:Ba.fixed??Jn.value?.toString()}})},Cn=Jn=>{rn({...ve,operator:Jn.value})};return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.binary-operation-options-editor.label-operation","Operation"),labelWidth:an,children:(0,L.jsx)($e.l6,{allowCustomValue:!0,placeholder:(0,f.t)("transformers.binary-operation-options-editor.placeholder-fields-or-number","Field(s) or number"),options:Et,className:"min-width-18",value:JSON.stringify(ve?.left),onChange:Mn})}),(0,L.jsx)(Fe.I,{children:(0,L.jsx)($e.l6,{className:"width-4",options:_t,value:ve?.operator??_t[0].value,onChange:Cn})}),(0,L.jsx)(Fe.I,{children:(0,L.jsx)($e.l6,{allowCustomValue:!0,placeholder:(0,f.t)("transformers.binary-operation-options-editor.placeholder-field-or-number","Field or number"),className:"min-width-10",options:It,value:JSON.stringify(ve?.right),onChange:cn})})]})})},Xn=A=>{const{names:S,onChange:Z,options:ce}=A,{cumulative:he}=ce,ve=S.map(_e=>({label:_e,value:_e})),xe=_e=>{const Xe=_e.length?_e[0]:Lt.gy.sum;Ce({...he,reducer:Xe})},Ce=_e=>{Z({...ce,mode:gn.UY.CumulativeFunctions,cumulative:_e})},je=_e=>{Ce({...he,field:_e.value})};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.cumulative-options-editor.label-field","Field"),labelWidth:an,children:(0,L.jsx)($e.l6,{placeholder:(0,f.t)("transformers.cumulative-options-editor.placeholder-field","Field"),options:ve,className:"min-width-18",value:he?.field,onChange:je})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.cumulative-options-editor.label-calculation","Calculation"),labelWidth:an,children:(0,L.jsx)(fn.S,{allowMultiple:!1,className:"width-18",stats:[he?.reducer||Lt.gy.sum],onChange:xe,defaultStat:Lt.gy.sum,filterOptions:_e=>_e.id===Lt.gy.sum||_e.id===Lt.gy.mean})})]})},jn=A=>{const{options:S,onChange:Z}=A,{index:ce}=S,he=ve=>{Z({...S,index:{asPercentile:ve.currentTarget.checked}})};return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(Fe.I,{labelWidth:an,label:(0,f.t)("transformers.index-options-editor.label-as-percentile","As percentile"),tooltip:(0,f.t)("transformers.index-options-editor.tooltip-transform-index-percentile","Transform the row index as a percentile."),children:(0,L.jsx)(kn.K,{value:!!ce?.asPercentile,onChange:he})})})};var dn=e(41654),Ra=e(34343);const Sa=A=>{const{names:S,selected:Z,onChange:ce,options:he}=A,{reduce:ve}=he,xe=Xe=>{ce({...he,reduce:Xe})},Ce=Xe=>{Z.indexOf(Xe)>-1?je(Z.filter(et=>et!==Xe)):je([...Z,Xe])},je=Xe=>{xe({...ve,include:Xe})},_e=Xe=>{const et=Xe.length?Xe[0]:Lt.gy.sum,{reduce:dt}=he;xe({...dt,reducer:et})};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.reduce-row-options-editor.label-operation","Operation"),labelWidth:an,shrink:!0,children:(0,L.jsx)(dn.B,{gap:.5,direction:"row",alignItems:"flex-start",wrap:!0,children:S.map((Xe,et)=>(0,L.jsx)(Ra.m,{onClick:()=>{Ce(Xe)},label:Xe,selected:Z.indexOf(Xe)>-1},`${Xe}/${et}`))})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.reduce-row-options-editor.label-calculation","Calculation"),labelWidth:an,children:(0,L.jsx)(fn.S,{allowMultiple:!1,className:"width-18",stats:[ve?.reducer||Lt.gy.sum],onChange:_e,defaultStat:Lt.gy.sum})})]})};var Wa=e(48233);const gs=A=>{const{options:S,onChange:Z}=A,{unary:ce}=S,he=et=>{Z({...S,mode:gn.UY.UnaryOperation,unary:et})},ve=et=>{he({...ce,operator:et.value})},xe=et=>{he({...ce,fieldName:et.value})};let Ce=!ce?.fieldName;const je=A.names.map(et=>(et===ce?.fieldName&&(Ce=!0),{label:et,value:et})),_e=Wa.j.list().map(et=>({label:et.unaryOperationID,value:et.unaryOperationID})),Xe=Ce?je:[...je,{label:ce?.fieldName,value:ce?.fieldName}];return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.unary-operation-editor.label-operation","Operation"),labelWidth:an,children:(0,L.jsx)($e.l6,{options:_e,value:ce?.operator??_e[0].value,onChange:ve})}),(0,L.jsx)(Fe.I,{label:"(",labelWidth:2,children:(0,L.jsx)($e.l6,{placeholder:(0,f.t)("transformers.unary-operation-editor.placeholder-field","Field"),className:"min-width-11",options:Xe,value:ce?.fieldName,onChange:xe})}),(0,L.jsx)(Oe.c,{width:2,children:")"})]})})};var Ss=e(19753);const zs=A=>{const{options:S,names:Z,onChange:ce}=A,{window:he}=S,ve=Z.map(lt=>({label:lt,value:lt})),xe=[{label:(0,f.t)("transformers.window-options-editor.type-options.label.trailing","Trailing"),value:gn.ip.Trailing},{label:(0,f.t)("transformers.window-options-editor.type-options.label.centered","Centered"),value:gn.ip.Centered}],Ce=[{label:(0,f.t)("transformers.window-options-editor.window-size-mode-options.label.percentage","Percentage"),value:gn.Bp.Percentage},{label:(0,f.t)("transformers.window-options-editor.window-size-mode-options.label.fixed","Fixed"),value:gn.Bp.Fixed}],je=lt=>{ce({...S,mode:gn.UY.WindowFunctions,window:lt})},_e=lt=>{je({...he,field:lt.value})},Xe=lt=>{je({...he,windowSize:lt&&he?.windowSizeMode===gn.Bp.Percentage?lt/100:lt})},et=lt=>{je({...he,windowSize:he?.windowSize?lt===gn.Bp.Percentage?he.windowSize/100:he.windowSize*100:void 0,windowSizeMode:lt})},dt=lt=>{const Et=lt.length?lt[0]:Lt.gy.sum;je({...he,reducer:Et})},vt=lt=>{je({...he,windowAlignment:lt})};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.window-options-editor.label-field","Field"),labelWidth:an,children:(0,L.jsx)($e.l6,{placeholder:(0,f.t)("transformers.window-options-editor.placeholder-field","Field"),options:ve,className:"min-width-18",value:he?.field,onChange:_e})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.window-options-editor.label-calculation","Calculation"),labelWidth:an,children:(0,L.jsx)(fn.S,{allowMultiple:!1,className:"width-18",stats:[he?.reducer||Lt.gy.mean],onChange:dt,defaultStat:Lt.gy.mean,filterOptions:lt=>lt.id===Lt.gy.mean||lt.id===Lt.gy.variance||lt.id===Lt.gy.stdDev})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.window-options-editor.label-type","Type"),labelWidth:an,children:(0,L.jsx)(Pe.z,{value:he?.windowAlignment??gn.ip.Trailing,options:xe,onChange:vt})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.window-options-editor.label-window-size-mode","Window size mode"),labelWidth:an,children:(0,L.jsx)(Pe.z,{value:he?.windowSizeMode??gn.Bp.Percentage,options:Ce,onChange:et})}),(0,L.jsx)(Fe.I,{label:he?.windowSizeMode===gn.Bp.Percentage?(0,f.t)("transformers.window-options-editor.label-window-size-percent","Window size %"):(0,f.t)("transformers.window-options-editor.label-window-size","Window size"),labelWidth:an,tooltip:he?.windowSizeMode===gn.Bp.Percentage?(0,f.t)("transformers.window-options-editor.tooltip-window-size-percent","Set the window size as a percentage of the total data"):(0,f.t)("transformers.window-options-editor.tooltip-window-size","Window size"),children:(0,L.jsx)(Ss.Q,{placeholder:(0,f.t)("transformers.window-options-editor.placeholder-auto","Auto"),min:.1,value:he?.windowSize&&he.windowSizeMode===gn.Bp.Percentage?he.windowSize*100:he?.windowSize,onChange:Xe})})]})},Rr=new Set([oe.PU.time,oe.PU.number,oe.PU.string,oe.PU.boolean]),mr=A=>{const{options:S,onChange:Z,input:ce}=A,he=S?.reduce?.include,[ve,xe]=(0,u.useState)({names:[],selected:[]}),Ce=[{value:gn.UY.BinaryOperation,label:(0,f.t)("transformers.calculate-field-transformer-editor.calculation-modes.label.binary-operation","Binary operation")},{value:gn.UY.UnaryOperation,label:(0,f.t)("transformers.calculate-field-transformer-editor.calculation-modes.label.unary-operation","Unary operation")},{value:gn.UY.ReduceRow,label:(0,f.t)("transformers.calculate-field-transformer-editor.calculation-modes.label.reduce-row","Reduce row")},{value:gn.UY.Index,label:(0,f.t)("transformers.calculate-field-transformer-editor.calculation-modes.label.row-index","Row index")}];q.$.featureToggles.addFieldFromCalculationStatFunctions&&Ce.push({value:gn.UY.CumulativeFunctions,label:(0,f.t)("transformers.calculate-field-transformer-editor.label.cumulative-functions","Cumulative functions")},{value:gn.UY.WindowFunctions,label:(0,f.t)("transformers.calculate-field-transformer-editor.label.window-functions","Window functions")}),(0,u.useEffect)(()=>{const It={interpolate:rn=>rn},_t=(0,Nn.of)(ce).pipe(Ae.c.ensureColumnsTransformer.operator(null,It),_e(),je(),Xe(he||[])).subscribe(({selected:rn,names:Mn})=>{xe({names:Mn,selected:rn})});return()=>{_t.unsubscribe()}},[ce,he]);const je=()=>{const It=(0,Zn.w)();return _t=>_t.pipe((0,kt.T)(rn=>(rn.push(...It.getVariables().map(Mn=>"$"+Mn.name)),rn)))},_e=()=>It=>It.pipe((0,kt.T)(_t=>{const rn=[],Mn={};for(const cn of _t)for(const Cn of cn.fields){if(!Rr.has(Cn.type))continue;const Jn=(0,fe.Ct)(Cn,cn,_t);Mn[Jn]||(Mn[Jn]=!0,rn.push(Jn))}return rn})),Xe=It=>_t=>_t.pipe((0,kt.T)(rn=>{if(!It.length)return{names:rn,selected:[]};const Mn=[],cn=[];for(const Cn of rn)It.includes(Cn)&&cn.push(Cn),Mn.push(Cn);return{names:Mn,selected:cn}})),et=It=>{Z({...S,replaceFields:It.currentTarget.checked})},dt=It=>{const _t=It.value??gn.UY.BinaryOperation;_t===gn.UY.WindowFunctions&&(S.window=S.window??gn.Uj),Z({...S,mode:_t})},vt=It=>{Z({...S,alias:It.target.value})},lt=S.mode??gn.UY.BinaryOperation,Et=lt===gn.UY.BinaryOperation&&S.binary?.left.matcher?.id===ye.Ct.byType;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Fe.I,{labelWidth:an,label:(0,f.t)("transformers.calculate-field-transformer-editor.label-mode","Mode"),children:(0,L.jsx)($e.l6,{className:"width-18",options:Ce,value:Ce.find(It=>It.value===lt),onChange:dt})}),lt===gn.UY.BinaryOperation&&(0,L.jsx)(Rn,{options:S,names:ve.names,onChange:A.onChange}),lt===gn.UY.UnaryOperation&&(0,L.jsx)(gs,{names:ve.names,options:S,onChange:A.onChange}),lt===gn.UY.ReduceRow&&(0,L.jsx)(Sa,{names:ve.names,selected:ve.selected,options:S,onChange:A.onChange}),lt===gn.UY.CumulativeFunctions&&(0,L.jsx)(Xn,{names:ve.names,options:S,onChange:A.onChange}),lt===gn.UY.WindowFunctions&&(0,L.jsx)(zs,{names:ve.names,options:S,onChange:A.onChange}),lt===gn.UY.Index&&(0,L.jsx)(jn,{options:S,onChange:A.onChange}),(0,L.jsx)(Fe.I,{labelWidth:an,label:(0,f.t)("transformers.calculate-field-transformer-editor.label-alias","Alias"),disabled:Et,children:(0,L.jsx)(Pa.p,{className:"width-18",value:S.alias??"",placeholder:(0,gn.sw)(S),onChange:vt})}),(0,L.jsx)(Fe.I,{labelWidth:an,label:(0,f.t)("transformers.calculate-field-transformer-editor.label-replace-all-fields","Replace all fields"),children:(0,L.jsx)(kn.K,{value:!!S.replaceFields,onChange:et})})]})},So=()=>({id:Ee.F.calculateField,editor:mr,transformation:Ae.c.calculateFieldTransformer,name:(0,f.t)("transformers.get-calculate-field-transform-registry-item.name.add-field-from-calculation","Add field from calculation"),description:(0,f.t)("transformers.get-calculate-field-transform-registry-item.description.values-calculate-field","Use the row values to calculate a new field."),categories:new Set([m.m.CalculateNewFields]),help:Re(Ee.F.calculateField).helperDocs,imageDark:it,imageLight:Wt});var Gs=e(9287),_r=e(20165),kr=e(16027);const Yr=(0,u.memo)(({options:A,onChange:S})=>{const Z=xe=>{const Ce=xe.value??Gs.x1.FieldName;S({...A,frameNameMode:Ce})},ce=xe=>{S({...A,frameNameLabel:xe.target.value})},he=[{value:Gs.x1.FieldName,label:(0,f.t)("transformers.concatenate-transformer-editor.name-modes.label.copy-frame-name-to-field","Copy frame name to field name")},{value:Gs.x1.Label,label:(0,f.t)("transformers.concatenate-transformer-editor.name-modes.label.label-frame","Add a label with the frame name")},{value:Gs.x1.Drop,label:(0,f.t)("transformers.concatenate-transformer-editor.name-modes.label.ignore-the-frame-name","Ignore the frame name")}],ve=A.frameNameMode??Gs.x1.FieldName;return(0,L.jsxs)("div",{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.concatenate-transformer-editor.label-name","Name"),labelWidth:16,grow:!0,children:(0,L.jsx)($e.l6,{width:36,options:he,value:he.find(xe=>xe.value===ve),onChange:Z})}),ve===Gs.x1.Label&&(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.concatenate-transformer-editor.label-label","Label"),labelWidth:16,grow:!0,children:(0,L.jsx)(Pa.p,{width:36,value:A.frameNameLabel??"",placeholder:(0,f.t)("transformers.concatenate-transformer-editor.placeholder-frame","Frame"),onChange:ce})})]})});Yr.displayName="ConcatenateTransformerEditor";const Jr=()=>({id:Ee.F.concatenate,editor:Yr,transformation:Ae.c.concatenateTransformer,name:(0,f.t)("transformers.editors.concatenate-transformer-editor.name.concatenate-fields","Concatenate fields"),description:(0,f.t)("transformers.editors.concatenate-transformer-editor.description.combine-all-fields","Combine all fields into a single frame."),categories:new Set([m.m.Combine]),help:Re(Ee.F.concatenate).helperDocs,tags:new Set([(0,f.t)("transformers.editors.concatenate-transformer-editor.tags.combine","Combine")]),imageDark:_r,imageLight:kr});var Xr=e(62717),Mo=e(62693),Ys=e(48457),gr=e(59427),Zr=e(23525),Ir=e(85827),Ms=e(89332),Ha=e(30703),cr=e(12594),js=e(76319);const Oo=({transformIndex:A,value:S,index:Z,mappedIndex:ce,onChangeEnumValue:he,onRemoveEnumRow:ve,checkIsEnumUniqueValue:xe})=>{const Ce=(0,Pt.of)(qr),[je,_e]=(0,u.useState)(S),[Xe,et]=(0,u.useState)(je===""),[dt,vt]=(0,u.useState)(null),lt=(0,u.useRef)(null);(0,u.useEffect)(()=>{lt.current&&lt.current.focus()},[lt]);const Et=cn=>{cn.currentTarget.value!==""&&xe(cn.currentTarget.value)&&cn.currentTarget.value!==S?vt("Enum value already exists"):vt(null),_e(cn.currentTarget.value)},It=()=>{if(et(!1),vt(null),je===""||dt!==null){ve(ce);return}he(ce,je)},_t=cn=>{cn.key==="Enter"&&(cn.preventDefault(),It())},rn=()=>{et(!0)},Mn=()=>{ve(ce)};return(0,L.jsx)(Ms.sx,{draggableId:`${A}/${S}`,index:Z,children:cn=>(0,L.jsxs)("tr",{ref:cn.innerRef,...cn.draggableProps,children:[(0,L.jsx)("td",{children:(0,L.jsx)("div",{className:Ce.dragHandle,...cn.dragHandleProps,children:(0,L.jsx)(Ha.I,{name:"draggabledots",size:"lg"})})}),Xe?(0,L.jsxs)("td",{children:[(0,L.jsx)(Pa.p,{ref:lt,type:"text",value:je,onChange:Et,onBlur:It,onKeyDown:_t}),dt&&(0,L.jsx)(cr.P,{children:dt})]}):(0,L.jsx)("td",{onClick:rn,className:Ce.clickableTableCell,children:S&&S!==""?S:(0,f.t)("transformers.enum-mapping-row.click-to-edit","Click to edit")}),(0,L.jsx)("td",{className:Ce.textAlignCenter,children:(0,L.jsx)(dn.B,{gap:1,children:(0,L.jsx)(js.K,{name:"trash-alt",onClick:Mn,"data-testid":"remove-enum-row","aria-label":(0,f.t)("transformers.enum-mapping-row.remove-enum-row-aria-label-delete-enum-row","Delete enum row"),tooltip:(0,f.t)("transformers.enum-mapping-row.remove-enum-row-tooltip-delete","Delete")})})})]},Z)},`${A}/${S}`)},qr=A=>({dragHandle:(0,Je.css)({cursor:"grab"}),textAlignCenter:(0,Je.css)({textAlign:"center"}),clickableTableCell:(0,Je.css)({cursor:"pointer",width:"100px","&:hover":{color:A.colors.text.maxContrast}})}),Ar=Oo,vr=({input:A,options:S,transformIndex:Z,onChange:ce})=>{const he=(0,Pt.of)(eo),[ve,xe]=(0,u.useState)(S.conversions[Z].enumConfig?.text??[]);(0,u.useEffect)(()=>{!S.conversions[Z].enumConfig?.text?.length&&A.length&&Ce()},[A]),(0,u.useEffect)(()=>{(()=>{const Et=ve.map(rn=>rn),It=S.conversions,_t={text:Et};It[Z]={...It[Z],enumConfig:_t},ce({...S,conversions:It})})()},[Z,ve]);const Ce=()=>{const lt=A.flatMap(It=>It?.fields??[]).find(It=>It.name===S.conversions[Z].targetField);if(!lt)return;const Et=new Set(lt?.values);ve.length>0&&!(0,ie.isEqual)(ve,Array.from(Et))&&!window.confirm("This action will overwrite the existing configuration. Are you sure you want to continue?")||xe([...Et])},je=(lt,Et)=>{const It=[...ve];It.splice(lt,1,Et),xe(It)},_e=lt=>{const Et=[...ve];Et.splice(lt,1),xe(Et)},Xe=()=>{xe(["",...ve])},et=(lt,Et)=>{ve.includes(Et)||je(lt,Et)},dt=lt=>ve.includes(lt),vt=lt=>{if(!lt.destination)return;const Et=ve.length-lt.source.index-1,It=ve.length-lt.destination.index-1,_t=[...ve],rn=_t[Et];_t.splice(Et,1),_t.splice(It,0,rn),xe(_t)};return(0,L.jsxs)(dn.B,{direction:"column",rowGap:.5,children:[(0,L.jsxs)(dn.B,{children:[(0,L.jsx)(me.$n,{size:"sm",icon:"plus",onClick:()=>Ce(),className:he.button,children:(0,L.jsx)(f.x6,{i18nKey:"transformers.enum-mapping-editor.generate-enum-values-from-data",children:"Generate enum values from data"})}),(0,L.jsx)(me.$n,{size:"sm",icon:"plus",onClick:()=>Xe(),className:he.button,children:(0,L.jsx)(f.x6,{i18nKey:"transformers.enum-mapping-editor.add-enum-value",children:"Add enum value"})})]}),(0,L.jsx)(dn.B,{children:(0,L.jsx)("table",{className:he.compactTable,children:(0,L.jsx)(Ms.JY,{onDragEnd:vt,children:(0,L.jsx)(Ms.gL,{droppableId:"sortable-enum-config-mappings",direction:"vertical",children:lt=>(0,L.jsxs)("tbody",{ref:lt.innerRef,...lt.droppableProps,children:[[...ve].reverse().map((Et,It)=>{const _t=ve.length-It-1;return(0,L.jsx)(Ar,{transformIndex:Z,value:Et,index:It,mappedIndex:_t,onChangeEnumValue:et,onRemoveEnumRow:_e,checkIsEnumUniqueValue:dt},`${Z}/${Et}`)}),lt.placeholder]})})})})})]})},eo=A=>({compactTable:(0,Je.css)({"tbody td":{padding:A.spacing(.5)},marginTop:A.spacing(1),marginBottom:A.spacing(2)}),button:(0,Je.css)({marginTop:A.spacing(1)})}),yr={settings:{width:24,isClearable:!1}},Ro=({input:A,options:S,onChange:Z})=>{const ce=(0,Mo.zA)().filter(vt=>vt.value!==oe.PU.trace),he=(0,ge.qt)(!0),ve=(0,Xr.P3)();he.push({label:(0,f.t)("transformers.convert-field-type-transformer-editor.label.browser","Browser"),value:"browser"}),he.push({label:(0,f.t)("transformers.convert-field-type-transformer-editor.label.utc","UTC"),value:"utc"});for(const vt of ve)he.push({label:vt,value:vt});const xe=(0,u.useCallback)(vt=>lt=>{const Et=[...S.conversions];Et[vt]={...Et[vt],targetField:lt??"",dateFormat:void 0},Z({...S,conversions:Et})},[Z,S]),Ce=(0,u.useCallback)(vt=>lt=>{const Et=S.conversions;Et[vt]={...Et[vt],destinationType:lt.value},Z({...S,conversions:Et})},[Z,S]),je=(0,u.useCallback)(vt=>lt=>{const Et=S.conversions;Et[vt]={...Et[vt],dateFormat:lt.currentTarget.value},Z({...S,conversions:Et})},[Z,S]),_e=(0,u.useCallback)(vt=>lt=>{const Et=S.conversions;Et[vt]={...Et[vt],joinWith:lt.currentTarget.value},Z({...S,conversions:Et})},[Z,S]),Xe=(0,u.useCallback)(()=>{Z({...S,conversions:[...S.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[Z,S]),et=(0,u.useCallback)(vt=>{const lt=S.conversions;lt.splice(vt,1),Z({...S,conversions:lt})},[Z,S]),dt=(0,u.useCallback)(vt=>lt=>{const Et=S.conversions;Et[vt]={...Et[vt],timezone:lt?.value},Z({...S,conversions:Et})},[Z,S]);return(0,L.jsxs)(L.Fragment,{children:[S.conversions.map((vt,lt)=>{const Et=(0,gr.UI)(A?.[0],vt.targetField),It=vt.joinWith?.length||Et?.type&&[oe.PU.other,oe.PU.string].includes(Et.type);return(0,L.jsxs)("div",{children:[(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.convert-field-type-transformer-editor.label-field","Field"),children:(0,L.jsx)(Ys.O,{context:{data:A},value:vt.targetField??"",onChange:xe(lt),item:yr})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.convert-field-type-transformer-editor.label-as","as"),children:(0,L.jsx)($e.l6,{options:ce,value:vt.destinationType,placeholder:(0,f.t)("transformers.convert-field-type-transformer-editor.placeholder-type","Type"),onChange:Ce(lt),width:18})}),vt.destinationType===oe.PU.time&&(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.convert-field-type-transformer-editor.label-input-format","Input format"),tooltip:(0,f.t)("transformers.convert-field-type-transformer-editor.tooltip-input-format","Specify the format of the input field so Grafana can parse the date string correctly."),children:(0,L.jsx)(Pa.p,{value:vt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:je(lt),width:24})}),vt.destinationType===oe.PU.string&&(0,L.jsxs)(L.Fragment,{children:[It&&(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.convert-field-type-transformer-editor.label-join-with","Join with"),tooltip:(0,f.t)("transformers.convert-field-type-transformer-editor.tooltip-explicit-separator-joining-array-values","Use an explicit separator when joining array values"),children:(0,L.jsx)(Pa.p,{value:vt.joinWith,placeholder:"JSON",onChange:_e(lt),width:16})}),Et?.type===oe.PU.time&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.convert-field-type-transformer-editor.label-date-format","Date format"),tooltip:(0,f.t)("transformers.convert-field-type-transformer-editor.tooltip-specify-the-output-format","Specify the output format."),children:(0,L.jsx)(Pa.p,{value:vt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:je(lt),width:24})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.convert-field-type-transformer-editor.label-set-timezone","Set timezone"),tooltip:(0,f.t)("transformers.convert-field-type-transformer-editor.tooltip-timezone-manually","Set the timezone of the date manually"),children:(0,L.jsx)($e.l6,{options:he,value:vt.timezone,onChange:dt(lt),isClearable:!0})})]})]}),(0,L.jsx)(me.$n,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>et(lt),"aria-label":(0,f.t)("transformers.convert-field-type-transformer-editor.aria-label-remove-convert-field-type-transformer","Remove convert field type transformer")})]}),vt.destinationType===oe.PU.enum&&(0,L.jsx)(vr,{input:A,options:S,transformIndex:lt,onChange:Z})]},`${vt.targetField}-${lt}`)}),(0,L.jsx)(me.$n,{size:"sm",icon:"plus",onClick:Xe,variant:"secondary","aria-label":(0,f.t)("transformers.convert-field-type-transformer-editor.aria-label-add-a-convert-field-type-transformer","Add a convert field type transformer"),children:(0,L.jsx)(f.x6,{i18nKey:"transformers.convert-field-type-transformer-editor.convert-field-type",children:"Convert field type"})})]})},dr=()=>({id:Ee.F.convertFieldType,editor:Ro,transformation:Ae.c.convertFieldTypeTransformer,name:(0,f.t)("transformers.convert-field-type-transformer-editor.name.convert-field-type","Convert field type"),description:(0,f.t)("transformers.convert-field-type-transformer-editor.description.convert-to-specified-field-type","Convert a field to a specified field type."),categories:new Set([m.m.Reformat]),help:Re(Ee.F.convertFieldType).helperDocs,tags:new Set([(0,f.t)("transformers.convert-field-type-transformer-editor.tags.format-field","Format field")]),imageDark:Zr,imageLight:Ir});var bt=e(8934),Kt=e(81837),Ut=e(30827);class Jt extends u.PureComponent{constructor(S){super(S),this.onFieldToggle=Z=>{const{selected:ce}=this.state;ce.indexOf(Z)>-1?this.onChange(ce.filter(he=>he!==Z)):this.onChange([...ce,Z])},this.onChange=Z=>{const{regex:ce,isRegexValid:he}=this.state,ve={...this.props.options,include:{names:Z}};ce&&he&&(ve.include=ve.include??{},ve.include.pattern=ce),this.setState({selected:Z},()=>{this.props.onChange(ve)})},this.onInputBlur=Z=>{const{selected:ce,regex:he}=this.state;let ve=!0;try{he&&(0,bt.dO)(he)}catch{ve=!1}ve?this.props.onChange({...this.props.options,include:{pattern:he}}):this.props.onChange({...this.props.options,include:{names:ce}}),this.setState({isRegexValid:ve})},this.onVariableChange=Z=>{this.props.onChange({...this.props.options,include:{variable:Z.value}}),this.setState({variable:Z.value})},this.onFromVariableChange=Z=>{const ce=Z.currentTarget.checked;this.props.onChange({...this.props.options,byVariable:ce}),this.setState({byVariable:ce})},this.state={include:S.options.include?.names||[],regex:S.options.include?.pattern,variable:S.options.include?.variable,byVariable:S.options.byVariable||!1,options:[],variables:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(S){this.props.input!==S.input&&this.initOptions()}initOptions(){const{input:S,options:Z}=this.props,ce=Array.from(Z.include?.names??[]),he=(0,Zn.w)().getVariables().map(Ce=>({label:"$"+Ce.name,value:"$"+Ce.name})),ve=[],xe={};for(const Ce of S)for(const je of Ce.fields){const _e=(0,fe.Ct)(je,Ce,S);let Xe=xe[_e];Xe||(Xe=xe[_e]={name:_e,count:0},ve.push(Xe)),Xe.count++}if(Z.include?.pattern)try{const Ce=(0,bt.dO)(Z.include.pattern);for(const je of ve)Ce.test(je.name)&&ce.push(je.name)}catch(Ce){console.error(Ce)}if(ce.length){const Ce=ve.filter(je=>ce.includes(je.name));this.setState({options:ve,selected:Ce.map(je=>je.name),variables:he,byVariable:Z.byVariable||!1,variable:Z.include?.variable,regex:Z.include?.pattern})}else this.setState({options:ve,selected:ve.map(Ce=>Ce.name),variables:he,byVariable:Z.byVariable||!1,variable:Z.include?.variable,regex:Z.include?.pattern})}render(){const{options:S,selected:Z,isRegexValid:ce}=this.state;return(0,L.jsxs)("div",{children:[(0,L.jsx)(Be.C,{label:(0,f.t)("transformers.filter-by-name-transformer-editor.label-use-variable","Use variable"),children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.filter-by-name-transformer-editor.label-from-variable","From variable"),children:(0,L.jsx)(kn.K,{value:this.state.byVariable,onChange:this.onFromVariableChange})})}),this.state.byVariable?(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.filter-by-name-transformer-editor.label-variable","Variable"),children:(0,L.jsx)($e.l6,{value:this.state.variable,onChange:this.onVariableChange,options:this.state.variables||[]})})}):(0,L.jsxs)(Be.C,{label:(0,f.t)("transformers.filter-by-name-transformer-editor.label-identifier","Identifier"),children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.filter-by-name-transformer-editor.label-identifier","Identifier"),invalid:!ce,error:ce?void 0:"Invalid pattern",children:(0,L.jsx)(Pa.p,{placeholder:(0,f.t)("transformers.filter-by-name-transformer-editor.placeholder-regular-expression-pattern","Regular expression pattern"),value:this.state.regex||"",onChange:he=>this.setState({regex:he.currentTarget.value}),onBlur:this.onInputBlur,width:25})}),S.map((he,ve)=>{const xe=`${he.name}${he.count>1?" ("+he.count+")":""}`,Ce=Z.indexOf(he.name)>-1;return(0,L.jsx)(Ra.m,{onClick:()=>{this.onFieldToggle(he.name)},label:xe,selected:Ce},`${he.name}/${ve}`)})]})]})}}const en=()=>({id:Ee.F.filterFieldsByName,editor:Jt,transformation:Ae.c.filterFieldsByNameTransformer,name:(0,f.t)("transformers.filter-by-name-transformer-editor.name.filter-fields-by-name","Filter fields by name"),description:(0,f.t)("transformers.filter-by-name-transformer-editor.description.remove-part-query-results-regex-pattern","Remove parts of the query results using a regex pattern."),categories:new Set([m.m.Filter]),help:Re(Ee.F.filterFieldsByName).helperDocs,imageDark:Kt,imageLight:Ut});var sn=e(42240),Sn=e(17757),In=e(26883);const On=A=>(0,L.jsx)(sn.M,{value:{id:ye.jR.byRefId,options:A.options.include||""},onChange:S=>{A.onChange({...A.options,include:S?.options||""})},context:{data:A.input}}),Fn=()=>({id:Ee.F.filterByRefId,editor:On,transformation:Ae.c.filterFramesByRefIdTransformer,name:(0,f.t)("transformers.filter-by-ref-id-transformer-editor.name.filter-data-by-query","Filter data by query"),description:(0,f.t)("transformers.filter-by-ref-id-transformer-editor.description.filter-data-by-query-useful-sharing-results","Remove rows from the data based on origin query"),categories:new Set([m.m.Filter]),help:Re(Ee.F.filterByRefId).helperDocs,imageDark:Sn,imageLight:In});var ia=e(40041),$n=e(64176),ca=e(12146);function Ia({input:A,options:S,onChange:Z}){const ce={settings:{width:30,filter:_e=>_e.type===oe.PU.string,placeholderText:(0,f.t)("transformers.format-string-transfomer-editor.field-name-picker-settings.placeholderText.select-text-field","Select text field"),noFieldsMessage:(0,f.t)("transformers.format-string-transfomer-editor.field-name-picker-settings.noFieldsMessage.no-text-fields-found","No text fields found")},name:"",id:"",editor:()=>null},he=(0,u.useCallback)(_e=>{Z({...S,stringField:_e??""})},[Z,S]),ve=(0,u.useCallback)(_e=>{const Xe=_e.value??ia.gs.UpperCase;Z({...S,outputFormat:Xe})},[Z,S]),xe=(0,u.useCallback)(_e=>{Z({...S,substringStart:_e??0})},[Z,S]),Ce=(0,u.useCallback)(_e=>{Z({...S,substringEnd:_e??0})},[Z,S]),je=Object.values(ia.gs).map(_e=>({label:_e,value:_e}));return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.format-string-transfomer-editor.label-field","Field"),labelWidth:10,children:(0,L.jsx)(Ys.O,{context:{data:A},value:S.stringField??"",onChange:he,item:ce})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.format-string-transfomer-editor.label-format","Format"),labelWidth:10,children:(0,L.jsx)($e.l6,{options:je,value:S.outputFormat,onChange:ve,width:20})})]}),S.outputFormat===ia.gs.Substring&&(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.format-string-transfomer-editor.label-substring-range","Substring range"),labelWidth:15,children:(0,L.jsx)(Ss.Q,{min:0,value:S.substringStart??0,onChange:xe,width:7})}),(0,L.jsx)(Fe.I,{children:(0,L.jsx)(Ss.Q,{min:0,value:S.substringEnd??0,onChange:Ce,width:7})})]})]})}const Va=()=>({id:Ee.F.formatString,editor:Ia,transformation:Ae.c.formatStringTransformer,name:(0,f.t)("transformers.format-string-transformer-editor.name.format-string","Format string"),state:gt.pn.beta,description:(0,f.t)("transformers.format-string-transformer-editor.description.manipulate-string-fields-formatting","Manipulate string fields formatting."),categories:new Set([m.m.Reformat]),imageDark:$n,imageLight:ca});var ka=e(89640),ss=e(85436),Ws=e(30086);function ar({input:A,options:S,onChange:Z}){const ce=[],he=(0,ge.qt)(!0);for(const je of A)for(const _e of je.fields)if(_e.type==="time"){const Xe=(0,fe.Ct)(_e,je,A);ce.push({label:Xe,value:Xe})}const ve=(0,u.useCallback)(je=>{const _e=je?.value!==void 0?je.value:"";Z({...S,timeField:_e})},[Z,S]),xe=(0,u.useCallback)(je=>{const _e=je.target.value;Z({...S,outputFormat:_e})},[Z,S]),Ce=(0,u.useCallback)(je=>{const _e=je?.value!==void 0?je.value:"";Z({...S,timezone:_e})},[Z,S]);return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.format-time-transfomer-editor.label-time-field","Time field"),labelWidth:15,grow:!0,children:(0,L.jsx)($e.l6,{options:ce,value:S.timeField,onChange:ve,placeholder:"time",isClearable:!0})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.format-time-transfomer-editor.label-format","Format"),labelWidth:10,tooltip:(0,L.jsxs)(f.x6,{i18nKey:"transformers.format-time-transfomer-editor.tooltip-format",children:["The output format for the field specified as a"," ",(0,L.jsx)(ka.Y,{href:"https://momentjs.com/docs/#/displaying/",external:!0,children:"Moment.js format string"}),"."]}),interactive:!0,children:(0,L.jsx)(Pa.p,{onChange:xe,value:S.outputFormat})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.format-time-transfomer-editor.label-set-timezone","Set timezone"),tooltip:(0,f.t)("transformers.format-time-transfomer-editor.tooltip-timezone-manually","Set the timezone of the date manually"),labelWidth:20,children:(0,L.jsx)($e.l6,{options:he,value:S.timezone,onChange:Ce,isClearable:!0})})]})})}const ur=()=>({id:Ee.F.formatTime,editor:ar,transformation:Ae.c.formatTimeTransformer,name:(0,f.t)("transformers.format-time-transformer-editor.name.format-time","Format time"),state:gt.pn.alpha,description:(0,f.t)("transformers.format-time-transformer-editor.description.set-based-on-time","Set the output format of a time field"),help:Re(Ee.F.formatTime).helperDocs,imageDark:ss,imageLight:Ws});var Ps=e(47433),vs=e(34999),xr=e(43243),Qi=e(67168),Xo=e(71306);const _i=({options:A,onChange:S,fieldNames:Z})=>{const ce=(0,u.useCallback)(Ce=>je=>{S({...A,fields:{...A.fields,[Ce]:je}})},[S]);let he,ve=!1;for(const Ce of Object.values(A.fields))Ce.aggregations.length>0&&Ce.operation!==null&&(ve=!0),Ce.operation===Ps.R3.groupBy&&(he=!0);const xe=ve&&!he;return(0,L.jsxs)(dn.B,{direction:"column",children:[xe&&(0,L.jsx)(vs.F,{title:(0,f.t)("transformers.group-by-transformer-editor.title-calc-alert","Calculations will not have an effect if no fields are being grouped on"),severity:"warning"}),Z.map(Ce=>(0,L.jsx)(Yi,{onConfigChange:ce(Ce),fieldName:Ce,config:A.fields[Ce]},Ce))]})},ki=(0,ge.fJ)(_i,{withBaseFieldNames:!0}),Yi=({fieldName:A,config:S,onConfigChange:Z})=>{const ce=(0,Pt.$j)(),he=Ji(ce),ve=(0,u.useCallback)(Ce=>{Z({aggregations:S?.aggregations??[],operation:Ce?.value??null})},[S,Z]),xe=[{label:(0,f.t)("transformers.group-by-field-configuration.options.label.group-by","Group by"),value:Ps.R3.groupBy},{label:(0,f.t)("transformers.group-by-field-configuration.options.label.calculate","Calculate"),value:Ps.R3.aggregate}];return(0,L.jsx)(Fe.I,{className:he.label,label:A,grow:!0,shrink:!0,children:(0,L.jsxs)(dn.B,{gap:.5,direction:"row",children:[(0,L.jsx)("div",{className:he.operation,children:(0,L.jsx)(xr.G,{options:xe,value:S?.operation,placeholder:(0,f.t)("transformers.group-by-field-configuration.placeholder-ignored","Ignored"),onChange:ve,isClearable:!0})}),S?.operation&&(0,L.jsx)(fn.S,{className:he.aggregations,placeholder:(0,f.t)("transformers.group-by-field-configuration.placeholder-select-stats","Select stats"),allowMultiple:!0,stats:S.aggregations,onChange:Ce=>{Z({...S,aggregations:Ce.filter(je=>je in Lt.gy)})},filterOptions:Ce=>S?.operation===Ps.R3.groupBy?Ce.id===Lt.gy.count:!0})]})})},Ji=A=>({label:(0,Je.css)({label:{minWidth:A.spacing(32)}}),operation:(0,Je.css)({flexShrink:0,height:"100%",width:A.spacing(24)}),aggregations:(0,Je.css)({flexGrow:1})}),Zo=()=>({id:Ee.F.groupBy,editor:ki,transformation:Ae.c.groupByTransformer,name:(0,f.t)("transformers.group-by-transformer-editor.name.group-by","Group by"),description:(0,f.t)("transformers.group-by-transformer-editor.description.group-series-by-field-calculate-stats","Group data by a field value and create aggregate data."),categories:new Set([m.m.Combine,m.m.CalculateNewFields,m.m.Reformat]),help:Re(Ee.F.groupBy).helperDocs,imageDark:Qi,imageLight:Xo});var to=e(25260),qo=e(37386),Xi=e(79271),Zi=e(27161);const qi=({input:A,options:S,onChange:Z})=>{const ce=(0,ge.ZI)(A),he=S.showSubframeHeaders===void 0?to.l:S.showSubframeHeaders,ve=(0,u.useCallback)(Xe=>et=>{Z({...S,fields:{...S.fields,[Xe]:et}})},[Z]),xe=(0,u.useCallback)(()=>{const Xe=S.showSubframeHeaders===void 0?!to.l:!S.showSubframeHeaders;Z({showSubframeHeaders:Xe,fields:{...S.fields}})},[Z]);let Ce,je=!1;for(const Xe of Object.values(S.fields))Xe.aggregations.length>0&&Xe.operation!==null&&(je=!0),Xe.operation===Ps.R3.groupBy&&(Ce=!0);const _e=je&&!Ce;return(0,L.jsxs)(dn.B,{direction:"column",children:[_e&&(0,L.jsx)(vs.F,{title:(0,f.t)("transformers.group-to-nested-table-transformer-editor.title-calc-alert","Calculations will not have an effect if no fields are being grouped on."),severity:"warning"}),(0,L.jsx)("div",{children:ce.map(Xe=>(0,L.jsx)(Io,{onConfigChange:ve(Xe),fieldName:Xe,config:S.fields[Xe]},Xe))}),(0,L.jsx)(qo.D,{label:(0,f.t)("transformers.group-to-nested-table-transformer-editor.label-show-field-names-in-nested-tables","Show field names in nested tables"),description:(0,f.t)("transformers.group-to-nested-table-transformer-editor.description-show-field-names","If enabled nested tables will show field names as a table header"),children:(0,L.jsx)(kn.d,{value:he,onChange:xe})})]})},Io=({fieldName:A,config:S,onConfigChange:Z})=>{const ce=(0,Pt.$j)(),he=el(ce),ve=(0,u.useCallback)(Ce=>{Z({aggregations:S?.aggregations??[],operation:Ce?.value??null})},[S,Z]),xe=[{label:(0,f.t)("transformers.group-by-field-configuration.options.label.group-by","Group by"),value:Ps.R3.groupBy},{label:(0,f.t)("transformers.group-by-field-configuration.options.label.calculate","Calculate"),value:Ps.R3.aggregate}];return(0,L.jsx)(Fe.I,{className:he.label,label:A,grow:!0,shrink:!0,children:(0,L.jsxs)(dn.B,{gap:.5,direction:"row",wrap:!1,children:[(0,L.jsx)("div",{className:he.operation,children:(0,L.jsx)($e.l6,{options:xe,value:S?.operation,placeholder:(0,f.t)("transformers.group-by-field-configuration.placeholder-ignored","Ignored"),onChange:ve,isClearable:!0})}),S?.operation===Ps.R3.aggregate&&(0,L.jsx)(fn.S,{className:he.aggregations,placeholder:(0,f.t)("transformers.group-by-field-configuration.placeholder-select-stats","Select stats"),allowMultiple:!0,stats:S.aggregations,onChange:Ce=>{Z({...S,aggregations:Ce})}})]})})},el=A=>({label:(0,Je.css)({minWidth:A.spacing(32)}),operation:(0,Je.css)({flexShrink:0,height:"100%",width:A.spacing(24)}),aggregations:(0,Je.css)({flexGrow:1})}),tl=()=>({id:Ee.F.groupToNestedTable,editor:qi,transformation:Ae.c.groupToNestedTable,name:(0,f.t)("transformers.group-to-nested-table-transformer-editor.name.group-to-nested-tables","Group to nested tables"),description:(0,f.t)("transformers.group-to-nested-table-transformer-editor.description.group-by-field-value","Group data by a field value and create nested tables with the grouped data."),categories:new Set([m.m.Combine,m.m.CalculateNewFields,m.m.Reformat]),state:gt.pn.beta,imageDark:Xi,imageLight:Zi});var nl=e(81477),ei=e(19223);const al=({input:A,options:S,onChange:Z})=>{const ce=(0,ge.ZI)(A).map(_e=>({label:_e,value:_e})),he=(0,Zn.w)().getVariables().map(_e=>({value:"$"+_e.name,label:"$"+_e.name})),ve=(0,u.useCallback)(_e=>{Z({...S,columnField:_e?.value})},[Z,S]),xe=(0,u.useCallback)(_e=>{Z({...S,rowField:_e?.value})},[Z,S]),Ce=(0,u.useCallback)(_e=>{Z({...S,valueField:_e?.value})},[Z,S]),je=(0,u.useCallback)(_e=>{Z({...S,emptyValue:_e?.value})},[Z,S]);return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.grouping-to-matrix-transformer-editor.label-column","Column"),labelWidth:8,children:(0,L.jsx)($e.l6,{options:[...ce,...he],value:S.columnField,onChange:ve,isClearable:!0})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.grouping-to-matrix-transformer-editor.label-row","Row"),labelWidth:8,children:(0,L.jsx)($e.l6,{options:[...ce,...he],value:S.rowField,onChange:xe,isClearable:!0})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.grouping-to-matrix-transformer-editor.label-cell-value","Cell value"),labelWidth:10,children:(0,L.jsx)($e.l6,{options:[...ce,...he],value:S.valueField,onChange:Ce,isClearable:!0})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.grouping-to-matrix-transformer-editor.label-empty-value","Empty value"),children:(0,L.jsx)($e.l6,{options:(0,ge.wS)(),value:S.emptyValue,onChange:je,isClearable:!0})})]})})},sl=()=>({id:Ee.F.groupingToMatrix,editor:al,transformation:Ae.c.groupingToMatrixTransformer,name:(0,f.t)("transformers.grouping-to-matrix-transformer-editor.name.grouping-to-matrix","Grouping to matrix"),description:(0,f.t)("transformers.grouping-to-matrix-transformer-editor.description.summarize-and-reorganize-data","Summarize and reorganize data based on three fields."),categories:new Set([m.m.Combine,m.m.Reformat]),help:Re(Ee.F.groupingToMatrix).helperDocs,imageDark:nl,imageLight:ei});var sr=e(74261),rl=e(21212),ol=e(78798);const il=({input:A,options:S,onChange:Z})=>{const[he,ve]=(0,u.useState)({bucketCount:!(0,ge.N_)(S.bucketCount||""),bucketSize:!(0,ge.N_)(S.bucketSize||""),bucketOffset:!(0,ge.N_)(S.bucketOffset||"")}),xe=(0,u.useCallback)(et=>{ve({...he,bucketCount:!(0,ge.N_)(et)}),Z({...S,bucketCount:Number(et)===0?void 0:Number(et)})},[Z,S,he]),Ce=(0,u.useCallback)(et=>{ve({...he,bucketSize:!(0,ge.N_)(et)}),Z({...S,bucketSize:et})},[Z,S,he,ve]),je=(0,u.useCallback)(et=>{ve({...he,bucketOffset:!(0,ge.N_)(et)}),Z({...S,bucketOffset:et})},[Z,S,he,ve]),_e=(0,u.useCallback)(()=>{Z({...S,combine:!S.combine})},[Z,S]),Xe=(0,ge.I9)();return(0,L.jsxs)("div",{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{invalid:he.bucketCount,error:"Value needs to be an integer or a variable",labelWidth:18,label:sr.Rt.bucketCount.name,tooltip:sr.Rt.bucketCount.description,children:(0,L.jsx)(de.y,{suggestions:Xe,value:S.bucketCount,placeholder:(0,f.t)("transformers.histogram-transformer-editor.placeholder-default","Default: 30"),onChange:xe})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{invalid:he.bucketSize,error:"Value needs to be an integer or a variable",labelWidth:18,label:sr.Rt.bucketSize.name,tooltip:sr.Rt.bucketSize.description,children:(0,L.jsx)(de.y,{suggestions:Xe,value:S.bucketSize,placeholder:(0,f.t)("transformers.histogram-transformer-editor.placeholder-auto","Auto"),onChange:Ce})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{labelWidth:18,label:sr.Rt.bucketOffset.name,tooltip:sr.Rt.bucketOffset.description,invalid:he.bucketOffset,error:"Value needs to be an integer or a variable",children:(0,L.jsx)(de.y,{suggestions:Xe,value:S.bucketOffset,placeholder:(0,f.t)("transformers.histogram-transformer-editor.placeholder-none","None"),onChange:je})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{labelWidth:18,label:sr.Rt.combine.name,tooltip:sr.Rt.combine.description,children:(0,L.jsx)(kn.K,{value:S.combine??!1,onChange:_e})})})]})},ll=()=>({id:Ee.F.histogram,editor:il,transformation:Ae.c.histogramTransformer,name:(0,f.t)("transformers.histogram-transformer-editor.name.histogram","Histogram"),description:(0,f.t)("transformers.histogram-transformer-editor.description.calculate-histogram-from-input-data","Calculate a histogram from input data."),categories:new Set([m.m.CreateNewVisualization]),help:Re(Ee.F.histogram).helperDocs,imageDark:rl,imageLight:ol});var no=e(6684),ao=e(56755),hr=e(95767),cl=e(18381);function dl({input:A,options:S,onChange:Z}){const ce=(0,ao.sE)(A),he=(0,ao.m3)(ce),ve=[{value:no.W.outer,label:(0,f.t)("transformers.series-to-fields-transformer-editor.modes.label.outer-time-series","Outer (time series)"),description:(0,f.t)("transformers.series-to-fields-transformer-editor.modes.description.keep-all-rows","Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series.")},{value:no.W.outerTabular,label:(0,f.t)("transformers.series-to-fields-transformer-editor.modes.label.outer-tabular","Outer (tabular)"),description:(0,f.t)("transformers.series-to-fields-transformer-editor.modes.description.join-on-a-field","Join on a field value with duplicated values. Non performant outer join best used for tabular(SQL like) data.")},{value:no.W.inner,label:(0,f.t)("transformers.series-to-fields-transformer-editor.modes.label.inner","Inner"),description:(0,f.t)("transformers.series-to-fields-transformer-editor.modes.description.combine-data-from-two-tables","Combine data from two tables whenever there are matching values in a fields common to both tables.")}],xe=(0,Zn.w)().getVariables().map(_e=>({value:"$"+_e.name,label:"$"+_e.name})),Ce=(0,u.useCallback)(_e=>{Z({...S,byField:_e?.value})},[Z,S]),je=(0,u.useCallback)(_e=>{Z({...S,mode:_e?.value})},[Z,S]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.series-to-fields-transformer-editor.label-mode","Mode"),labelWidth:8,grow:!0,children:(0,L.jsx)($e.l6,{options:ve,value:S.mode??no.W.outer,onChange:je})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.series-to-fields-transformer-editor.label-field","Field"),labelWidth:8,grow:!0,children:(0,L.jsx)($e.l6,{options:[...he,...xe],value:S.byField,onChange:Ce,placeholder:"time",isClearable:!0})})})]})}const ul=()=>({id:Ee.F.joinByField,aliasIds:[Ee.F.seriesToColumns],editor:dl,transformation:Ae.c.joinByFieldTransformer,name:(0,f.t)("transformers.join-by-field-transformer-editor.name.join-by-field","Join by field"),description:(0,f.t)("transformers.join-by-field-transformer-editor.description.combine-rows-from-2-tables","Combine rows from 2+ tables, based on a related field."),categories:new Set([m.m.Combine]),help:Re(Ee.F.joinByField).helperDocs,imageDark:hr,imageLight:cl});var so=e(79184),hl=e(44283),ro=e(53965);const ti=({input:A,options:S,onChange:Z})=>{const he=[{value:so.n.Columns,label:(0,f.t)("transformers.labels-as-fields-transformer-editor.modes.label.columns","Columns")},{value:so.n.Rows,label:(0,f.t)("transformers.labels-as-fields-transformer-editor.modes.label.rows","Rows")}],{labelNames:ve,selected:xe}=(0,u.useMemo)(()=>{let _e=[],Xe={};for(const dt of A)for(const vt of dt.fields)if(vt.labels)for(const lt of Object.keys(vt.labels))Xe[lt]||(_e.push({value:lt,label:lt}),Xe[lt]=!0);const et=new Set(S.keepLabels?.length?S.keepLabels:Object.keys(Xe));return{labelNames:_e,selected:et}},[S.keepLabels,A]),Ce=_e=>{Z({...S,valueLabel:_e?.value})},je=_e=>{if(xe.has(_e)?xe.delete(_e):xe.add(_e),xe.size===ve.length||!xe.size){const{keepLabels:Xe,...et}=S;Z(et)}else Z({...S,keepLabels:[...xe]})};return(0,L.jsxs)("div",{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.labels-as-fields-transformer-editor.label-mode","Mode"),labelWidth:20,children:(0,L.jsx)(Pe.z,{options:he,value:S.mode??so.n.Columns,onChange:_e=>Z({...S,mode:_e})})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.labels-as-fields-transformer-editor.label-labels","Labels"),labelWidth:20,shrink:!0,children:(0,L.jsx)(dn.B,{gap:.5,wrap:"wrap",children:ve.map((_e,Xe)=>{const et=_e.label;return(0,L.jsx)(Ra.m,{onClick:()=>je(et),label:et,selected:xe.has(et)},`${et}/${Xe}`)})})})}),S.mode!==so.n.Rows&&(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.labels-as-fields-transformer-editor.label-value-field-name","Value field name"),labelWidth:20,tooltip:(0,f.t)("transformers.labels-as-fields-transformer-editor.tooltip-replace-value-field-label","Replace the value field name with a label"),htmlFor:"labels-to-fields-as-name",children:(0,L.jsx)($e.l6,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:(0,f.t)("transformers.labels-as-fields-transformer-editor.placeholder-optional-select-label","(Optional) Select label"),options:ve,value:S?.valueLabel,onChange:Ce,className:"min-width-16"})})})]})},oo=()=>({id:Ee.F.labelsToFields,editor:ti,transformation:Ae.c.labelsToFieldsTransformer,name:(0,f.t)("transformers.labels-to-fields-transformer-editor.name.labels-to-fields","Labels to fields"),description:(0,f.t)("transformers.labels-to-fields-transformer-editor.description.groups-series-time-return-labels-tags-fields","Group series by time and return labels or tags as fields."),categories:new Set([m.m.Reformat]),help:Re(Ee.F.labelsToFields).helperDocs,imageDark:hl,imageLight:ro});var fl=e(89911),pl=e(66225);const ml=({options:A,onChange:S})=>{const[Z,ce]=(0,u.useState)(!1),he=(0,u.useCallback)(ve=>{ce(!(0,ge.N_)(ve)),S({...A,limitField:ve})},[S,A]);return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(Be.C,{children:(0,L.jsx)(de.y,{invalid:Z,error:"Value needs to be an integer or a variable",value:String(A.limitField),onChange:he,placeholder:(0,f.t)("transformers.limit-transformer-editor.placeholder-value-or-variable","Value or variable"),suggestions:(0,ge.I9)()})})})},gl=()=>({id:Ee.F.limit,editor:ml,transformation:Ae.c.limitTransformer,name:(0,f.t)("transformers.limit-transformer-editor.name.limit","Limit"),description:(0,f.t)("transformers.limit-transformer-editor.description.limit-number-items-displayed","Limit the number of items displayed."),categories:new Set([m.m.Filter]),help:Re(Ee.F.limit).helperDocs,imageDark:fl,imageLight:pl});var ni=e(95866),ai=e(18060);const vl=({input:A,options:S,onChange:Z})=>A.length<=1?(0,L.jsx)(cr.P,{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.merge-transformer-editor.merge-effect-applied-single-frame",children:"Merge has no effect when applied on a single frame."})}):null,si=()=>({id:Ee.F.merge,editor:vl,transformation:Ae.c.mergeTransformer,name:(0,f.t)("transformers.merge-transformer-editor.name.merge","Merge series/tables"),description:(0,f.t)("transformers.merge-transformer-editor.description.merge-multiple-series","Merge multiple series. Values will be combined into one row."),categories:new Set([m.m.Combine]),help:Re(Ee.F.merge).helperDocs,imageDark:ni,imageLight:ai});var Fa=e(95575),Ya=e(66404),yl=e(3041),xl=e(91259);function ri(A,S,Z){A.splice(Z,0,A.splice(S,1)[0])}const Ao=({options:A,input:S,onChange:Z})=>{const{indexByName:ce,excludeByName:he,renameByName:ve,includeByName:xe,orderBy:Ce,orderByMode:je}=A,_e=(0,ge.ZI)(S),Xe=(0,u.useMemo)(()=>{if(S.length>0&&je===Fa.NU.Auto){const cn=(0,Fa.wx)(Ce??[]);return(0,ge.gD)([{...S[0],fields:cn(S[0].fields)}],!1)}return El(_e,ce)},[S,_e,ce,je,Ce]),et=(0,u.useMemo)(()=>{const cn=[];if(je===Fa.NU.Auto){const Cn=(0,ge.aG)(S);let Jn=!1;Ce?.forEach((Ba,ks)=>{let lr=Ba.desc?Fa.pH.Desc:Fa.pH.Asc;Ba.type===Fa.Mq.Name?(cn.push({type:Fa.Mq.Name,order:lr}),Jn=!0):Cn.has(Ba.name)&&(cn.push({type:Fa.Mq.Label,name:Ba.name,order:lr}),Cn.delete(Ba.name))}),Jn||cn.push({type:Fa.Mq.Name,order:Fa.pH.Off}),Cn.forEach(Ba=>{cn.push({type:Fa.Mq.Label,name:Ba,order:Fa.pH.Off})})}return cn},[S,je,Ce]),dt=xe&&Object.keys(xe).length>0?"include":"exclude",vt=(0,u.useCallback)((cn,Cn)=>{Z({...A,excludeByName:{...he,[cn]:Cn}})},[Z,A,he]),lt=(0,u.useCallback)((cn,Cn)=>{const Jn={...A,includeByName:{...xe,[cn]:!Cn}};Z(Jn)},[Z,A,xe]),Et=(0,u.useCallback)(cn=>{if(!cn||!cn.destination)return;const Cn=cn.source.index,Jn=cn.destination.index;Cn!==Jn&&Z({...A,indexByName:Lo(_e,Cn,Jn)})},[Z,A,_e]),It=(0,u.useCallback)((cn,Cn)=>{Z({...A,renameByName:{...A.renameByName,[cn]:Cn}})},[Z,A]),_t=(0,u.useCallback)((cn,Cn)=>{cn.order=Cn;const Jn=[];et.forEach(Ba=>{Ba.order!==Fa.pH.Off&&Jn.push({type:Ba.type,name:Ba.name,desc:Ba.order===Fa.pH.Desc})}),Z({...A,orderBy:Jn})},[A,et,Z]),rn=(0,u.useCallback)(cn=>{if(cn.destination==null)return;const Cn=cn.source.index,Jn=cn.destination.index;if(Cn===Jn)return;ri(et,Cn,Jn);const Ba=[];et.forEach(ks=>{ks.order!==Fa.pH.Off&&Ba.push({type:ks.type,name:ks.name,desc:ks.order===Fa.pH.Desc})}),Z({...A,orderBy:Ba})},[A,Z,et]),Mn=(0,Pt.of)(oi);return S.length>1?(0,L.jsx)(cr.P,{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.organize-fields-transformer-editor.first-frame-warning",children:"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."})}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Be.C,{className:Mn.fieldOrderRadio,children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.organize-fields-transformer-editor.field-order","Field order"),children:(0,L.jsx)(Pe.z,{options:[{label:(0,f.t)("transformers.organize-fields-transformer-editor.field-order-manual","Manual"),value:Fa.NU.Manual},{label:(0,f.t)("transformers.organize-fields-transformer-editor.field-order-auto","Auto"),value:Fa.NU.Auto}],value:A.orderByMode??Fa.NU.Manual,onChange:cn=>Z({...A,orderByMode:cn})})})}),(0,L.jsx)(Ms.JY,{onDragEnd:rn,children:A.orderByMode===Fa.NU.Auto&&(0,L.jsx)(Ms.gL,{droppableId:"sortable-labels-transformer",direction:"vertical",children:cn=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{ref:cn.innerRef,className:Mn.labelsDraggable,...cn.droppableProps,children:et.map((Cn,Jn)=>(0,L.jsx)(io,{item:Cn,index:Jn,onChangeSort:_t},`${Cn.name}-${Cn.type}`))}),cn.placeholder]})})}),(0,L.jsx)(Ms.JY,{onDragEnd:Et,children:(0,L.jsx)(Ms.gL,{droppableId:"sortable-fields-transformer",direction:"vertical",children:cn=>(0,L.jsxs)("div",{ref:cn.innerRef,...cn.droppableProps,children:[Xe.map((Cn,Jn)=>{const Ba=xe&&Cn in xe?xe[Cn]:!1,ks=dt==="include"?Ba:!he[Cn],lr=dt==="include"?lt:vt;return(0,L.jsx)(ii,{fieldName:Cn,renamedFieldName:ve[Cn],index:Jn,onToggleVisibility:lr,onRenameField:It,visible:ks,isDragDisabled:A.orderByMode===Fa.NU.Auto},Cn)}),cn.placeholder]})})})]})},oi=A=>({fieldOrderRadio:(0,Je.css)({marginBottom:A.spacing(1)}),labelsDraggable:(0,Je.css)({marginBottom:A.spacing(3)})});Ao.displayName="OrganizeFieldsTransformerEditor";const ii=({fieldName:A,renamedFieldName:S,index:Z,visible:ce,onToggleVisibility:he,onRenameField:ve,isDragDisabled:xe})=>{const Ce=(0,Pt.of)(lo);return(0,L.jsx)(Ms.sx,{draggableId:A,index:Z,isDragDisabled:xe,children:je=>(0,L.jsxs)(Ve.a,{display:"flex",gap:0,ref:je.innerRef,...je.draggableProps,children:[(0,L.jsx)(Oe.c,{width:60,as:"div",children:(0,L.jsxs)(dn.B,{gap:0,justifyContent:"flex-start",alignItems:"center",width:"100%",children:[!xe&&(0,L.jsx)("span",{...je.dragHandleProps,children:(0,L.jsx)(Ha.I,{name:"draggabledots",title:(0,f.t)("transformers.draggable-field-name.title-drag-and-drop-to-reorder","Drag and drop to reorder"),size:"lg",className:Ce.draggable})}),(0,L.jsx)(js.K,{className:Ce.toggle,size:"md",name:ce?"eye":"eye-slash",onClick:()=>he(A,ce),tooltip:ce?(0,f.t)("transformers.draggable-field-name.tooltip-disable","Disable"):(0,f.t)("transformers.draggable-field-name.tooltip-enable","Enable")}),(0,L.jsx)(Ya.E,{truncate:!0,element:"p",variant:"bodySmall",weight:"bold",children:A})]})}),(0,L.jsx)(Pa.p,{defaultValue:S||"",placeholder:(0,f.t)("transformers.draggable-field-name.rename-placeholder","Rename {{fieldName}}",{fieldName:A,interpolation:{escapeValue:!1}}),onBlur:_e=>ve(A,_e.currentTarget.value)})]})})};ii.displayName="DraggableFieldName";const io=({index:A,item:S,onChangeSort:Z})=>{const ce=(0,Pt.of)(lo),he=(0,u.useId)();return(0,L.jsx)(Ms.sx,{draggableId:he,index:A,isDragDisabled:S.order===Fa.pH.Off,children:ve=>(0,L.jsxs)(Ve.a,{marginBottom:.5,display:"flex",gap:0,ref:ve.innerRef,...ve.draggableProps,children:[(0,L.jsx)(Oe.c,{width:60,as:"div",children:(0,L.jsxs)(dn.B,{gap:3,justifyContent:"flex-start",alignItems:"center",width:"100%",children:[(0,L.jsx)("span",{...ve.dragHandleProps,children:(0,L.jsx)(Ha.I,{name:"draggabledots",title:(0,f.t)("transformers.draggable-field-name.title-drag-and-drop-to-reorder","Drag and drop to reorder"),size:"lg",className:(0,Je.cx)(ce.draggable,{[ce.disabled]:S.order===Fa.pH.Off})})}),(0,L.jsx)(Ya.E,{truncate:!0,element:"p",variant:"bodySmall",weight:"bold",children:S.type===Fa.Mq.Label?`Label: ${S.name}`:"Field name"})]})}),(0,L.jsx)(Pe.z,{options:[{label:(0,f.t)("transformers.draggable-sort-order.off","Off"),value:Fa.pH.Off},{label:(0,f.t)("transformers.draggable-sort-order.asc","ASC"),value:Fa.pH.Asc},{label:(0,f.t)("transformers.draggable-sort-order.desc","DESC"),value:Fa.pH.Desc}],value:S.order,onChange:xe=>{Z(S,xe)}})]})})};io.displayName="DraggableUIOrderByItem";const lo=A=>({toggle:(0,Je.css)({margin:A.spacing(0,1),color:A.colors.text.secondary}),draggable:(0,Je.css)({opacity:.4,"&:hover":{color:A.colors.text.maxContrast}}),disabled:(0,Je.css)({color:A.colors.text.disabled,pointerEvents:"none"})}),Lo=(A,S,Z)=>{const ce=Array.from(A),[he]=ce.splice(S,1);return ce.splice(Z,0,he),ce.reduce((ve,xe,Ce)=>(ve[xe]=Ce,ve),{})},El=(A,S={})=>{if(!S||Object.keys(S).length===0)return A;const Z=(0,Fa.Xz)(S);return A.sort(Z)},Pl=()=>({id:Ee.F.organize,editor:Ao,transformation:Ae.c.organizeFieldsTransformer,name:(0,f.t)("transformers.organize-fields-transformer-editor.name.organize-fields","Organize fields by name"),description:(0,f.t)("transformers.organize-fields-transformer-editor.description.reorder-hide-or-rename-fields","Re-order, hide, or rename fields."),categories:new Set([m.m.ReorderAndRename]),help:Re(Ee.F.organize).helperDocs,imageDark:yl,imageLight:xl});var Lr=e(32157),Za=e(51898),bl=e(95428),Dl=e(25818);const Cl=({options:A,onChange:S})=>{const Z=[{label:(0,f.t)("transformers.reduce-transformer-editor.modes.label.series-to-rows","Series to rows"),value:Lr.rV.SeriesToRows,description:(0,f.t)("transformers.reduce-transformer-editor.modes.description.create-table-series-value","Create a table with one row for each series value")},{label:(0,f.t)("transformers.reduce-transformer-editor.modes.label.reduce-fields","Reduce fields"),value:Lr.rV.ReduceFields,description:(0,f.t)("transformers.reduce-transformer-editor.modes.description.collapse-field-single-value","Collapse each field into a single value")}],ce=(0,u.useCallback)(xe=>{const Ce=xe.value;S({...A,mode:Ce,includeTimeField:Ce===Lr.rV.ReduceFields?!!A.includeTimeField:!1})},[S,A]),he=(0,u.useCallback)(()=>{S({...A,includeTimeField:!A.includeTimeField})},[S,A]),ve=(0,u.useCallback)(()=>{S({...A,labelsToFields:!A.labelsToFields})},[S,A]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.reduce-transformer-editor.label-mode","Mode"),"data-testid":Za.Tp.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16,children:(0,L.jsx)($e.l6,{options:Z,value:Z.find(xe=>xe.value===A.mode)||Z[0],onChange:ce})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.reduce-transformer-editor.label-calculations","Calculations"),"data-testid":Za.Tp.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16,children:(0,L.jsx)(fn.S,{placeholder:(0,f.t)("transformers.reduce-transformer-editor.placeholder-choose-stat","Choose stat"),allowMultiple:!0,stats:A.reducers||[],onChange:xe=>{S({...A,reducers:xe})}})}),A.mode===Lr.rV.ReduceFields&&(0,L.jsx)(Fe.I,{htmlFor:"include-time-field",labelWidth:16,label:(0,f.t)("transformers.reduce-transformer-editor.label-include-time","Include time"),children:(0,L.jsx)(kn.K,{id:"include-time-field",value:!!A.includeTimeField,onChange:he})}),A.mode!==Lr.rV.ReduceFields&&(0,L.jsx)(Fe.I,{htmlFor:"labels-to-fields",labelWidth:16,label:(0,f.t)("transformers.reduce-transformer-editor.label-labels-to-fields","Labels to fields"),children:(0,L.jsx)(kn.K,{id:"labels-to-fields",value:!!A.labelsToFields,onChange:ve})})]})},Fs=()=>({id:Ee.F.reduce,editor:Cl,transformation:Ae.c.reduceTransformer,name:(0,f.t)("transformers.reduce-transformer-editor.name.reduce","Reduce"),description:(0,f.t)("transformers.reduce-transformer-editor.description.reduce-to-single-value","Reduce all rows or data points to a single value (ex. max, mean)."),categories:new Set([m.m.CalculateNewFields]),help:Re(Ee.F.reduce).helperDocs,imageDark:bl,imageLight:Dl});var li=e(87864),Tl=e(43606);class ci extends u.PureComponent{constructor(S){super(S),this.handleRegexChange=Z=>{const ce=Z.currentTarget.value;let he=!0;if(ce)try{ce&&(0,bt.dO)(ce)}catch{he=!1}this.setState(ve=>({...ve,regex:ce,isRegexValid:he}))},this.handleRenameChange=Z=>{const ce=Z.currentTarget.value;this.setState(he=>({...he,renamePattern:ce}))},this.handleRegexBlur=Z=>{const ce=Z.currentTarget.value;let he=!0;try{ce&&(0,bt.dO)(ce)}catch{he=!1}this.setState({isRegexValid:he},()=>{he&&this.props.onChange({...this.props.options,regex:ce})})},this.handleRenameBlur=Z=>{const ce=Z.currentTarget.value;this.setState({renamePattern:ce},()=>this.props.onChange({...this.props.options,renamePattern:ce}))},this.state={regex:S.options.regex,renamePattern:S.options.renamePattern,isRegexValid:!0}}render(){const{regex:S,renamePattern:Z,isRegexValid:ce}=this.state;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.rename-by-regex-transformer-editor.label-match","Match"),labelWidth:16,invalid:!ce,error:ce?void 0:"Invalid pattern",children:(0,L.jsx)(Pa.p,{placeholder:(0,f.t)("transformers.rename-by-regex-transformer-editor.placeholder-regular-expression-pattern","Regular expression pattern"),value:S||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.rename-by-regex-transformer-editor.label-replace","Replace"),labelWidth:16,children:(0,L.jsx)(Pa.p,{placeholder:(0,f.t)("transformers.rename-by-regex-transformer-editor.placeholder-replacement-pattern","Replacement pattern"),value:Z||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})})]})}}const jr=()=>({id:Ee.F.renameByRegex,editor:ci,transformation:Ae.c.renameByRegexTransformer,name:(0,f.t)("transformers.rename-by-regex-transformer.name.rename-fields-by-regex","Rename fields by regex"),description:(0,f.t)("transformers.rename-by-regex-transformer.description.rename-parts-using-regex","Rename parts of the query results using a regular expression and replacement pattern."),categories:new Set([m.m.ReorderAndRename]),help:Re(Ee.F.renameByRegex).helperDocs,imageDark:li,imageLight:Tl});var di=e(41781),ui=e(3211);const Sl=({input:A,options:S,onChange:Z})=>null,jo=()=>({id:Ee.F.seriesToRows,editor:Sl,transformation:Ae.c.seriesToRowsTransformer,name:(0,f.t)("transformers.series-to-rows-transformer-editor.name.series-to-rows","Series to rows"),description:(0,f.t)("transformers.series-to-rows-transformer-editor.description.merge-multiple-series","Merge multiple series. Return time, metric and values as a row."),categories:new Set([m.m.Combine,m.m.Reformat]),help:Re(Ee.F.seriesToRows).helperDocs,imageDark:di,imageLight:ui});var hi=e(14738),Ml=e(98064);const fi=({input:A,options:S,onChange:Z})=>{const ce=(0,ge.ZI)(A).map(je=>({label:je,value:je})),ve=(0,Zn.w)().getVariables().map(je=>({label:"$"+je.name,value:"$"+je.name})),xe=(0,u.useCallback)((je,_e)=>{Z({...S,sort:[_e]})},[Z,S]),Ce=S.sort?.length?S.sort:[{}];return(0,L.jsx)("div",{children:Ce.map((je,_e)=>(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.sort-by-transformer-editor.label-field","Field"),labelWidth:10,grow:!0,children:(0,L.jsx)($e.l6,{options:[...ce,...ve],value:je.field,placeholder:(0,f.t)("transformers.sort-by-transformer-editor.placeholder-select-field","Select field"),onChange:Xe=>{xe(_e,{...je,field:Xe.value})}})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.sort-by-transformer-editor.label-reverse","Reverse"),children:(0,L.jsx)(kn.K,{value:!!je.desc,onChange:()=>{xe(_e,{...je,desc:!je.desc})}})})]},`${je.field}/${_e}`))})},pi=()=>({id:Ee.F.sortBy,editor:fi,transformation:Ae.c.sortByTransformer,name:(0,f.t)("transformers.sort-by-transformer-editor.name.sort-by","Sort by"),description:(0,f.t)("transformers.sort-by-transformer-editor.description.sort-fields","Sort fields in a frame."),categories:new Set([m.m.ReorderAndRename]),help:Re(Ee.F.sortBy).helperDocs,imageDark:hi,imageLight:Ml});var Ol=e(19719),Rl=e(109);const Il=({options:A,onChange:S})=>{const Z=ce=>{S({...A,emptyValue:ce?.value})};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.transpose-transfomer-editor.label-first-field-name","First field name"),labelWidth:24,children:(0,L.jsx)(Pa.p,{placeholder:(0,f.t)("transformers.transpose-transfomer-editor.placeholder-field","Field"),value:A.firstFieldName,onChange:ce=>S({...A,firstFieldName:ce.currentTarget.value}),width:25})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.transpose-transfomer-editor.label-remaining-fields-name","Remaining fields name"),tooltip:(0,f.t)("transformers.transpose-transfomer-editor.tooltip-name-for-value-fields","Name for value fields"),labelWidth:24,children:(0,L.jsx)(Pa.p,{placeholder:(0,f.t)("transformers.transpose-transfomer-editor.placeholder-value","Value"),value:A.restFieldsName,onChange:ce=>S({...A,restFieldsName:ce.currentTarget.value}),width:25})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.grouping-to-matrix-transformer-editor.label-empty-value","Empty value"),children:(0,L.jsx)($e.l6,{options:(0,ge.wS)(),value:A.emptyValue,onChange:Z,isClearable:!0})})})]})},Al=()=>({id:Ee.F.transpose,editor:Il,transformation:Ae.c.transposeTransformer,name:(0,f.t)("transformers.transpose-transformer-editor.name.transpose","Transpose"),description:(0,f.t)("transformers.transpose-transformer-editor.description.transpose-data-frame","Transpose the data frame."),categories:new Set([m.m.Reformat]),tags:new Set([(0,f.t)("transformers.transpose-transformer-editor.tags.pivot","Pivot"),(0,f.t)("transformers.transpose-transformer-editor.tags.translate","Translate"),(0,f.t)("transformers.transpose-transformer-editor.tags.transform","Transform")]),imageDark:Ol,imageLight:Rl});var mi=e(11014),Hs=e(74824);function aa({options:A,onChange:S}){const[Z,ce]=(0,u.useState)(A),he=gi(),ve=co(),xe=()=>{Z.push({path:""}),ce([...Z]),_e()},Ce=Xe=>{Z&&(Z.splice(Xe,1),ce([...Z]),_e())},je=(Xe,et,dt)=>{Z&&(dt==="alias"?Z[et].alias=Xe.currentTarget.value??"":Z[et].path=Xe.currentTarget.value??"",ce([...Z]))},_e=()=>{S(Z)};return(0,L.jsxs)("ol",{className:(0,Je.cx)(ve.list),children:[Z&&Z.map((Xe,et)=>(0,L.jsx)("li",{children:(0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.jsonpath-editor.label-field","Field"),tooltip:he.field,grow:!0,children:(0,L.jsx)(Pa.p,{onBlur:_e,onChange:dt=>je(dt,et,"path"),value:Xe.path,placeholder:(0,f.t)("transformers.jsonpath-editor.placeholder-valid-objectvalue",'A valid json path, e.g. "object.value1" or "object.value2[0]"')})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.jsonpath-editor.label-alias","Alias"),tooltip:he.alias,children:(0,L.jsx)(Pa.p,{width:12,value:Xe.alias,onBlur:_e,onChange:dt=>je(dt,et,"alias")})}),(0,L.jsx)(Fe.I,{className:(0,Je.cx)(ve.removeIcon),children:(0,L.jsx)(js.K,{onClick:()=>Ce(et),name:"trash-alt",tooltip:(0,f.t)("transformers.jsonpath-editor.tooltip-remove-path","Remove path")})})]})},et)),(0,L.jsx)(Fe.I,{children:(0,L.jsx)(me.$n,{icon:"plus",onClick:()=>xe(),variant:"secondary",children:(0,L.jsx)(f.x6,{i18nKey:"transformers.jsonpath-editor.add-path",children:"Add path"})})})]})}const gi=()=>{const A=[{path:"object",description:(0,f.t)("transformers.get-tooltips.map-valid-paths.description.extract-fields-from-object","=> extract fields from object")},{path:"object.value1",description:(0,L.jsxs)(f.x6,{i18nKey:"transformers.get-tooltips.map-valid-paths.description.extract-value",values:{value:"value1"},children:["=> extract ",(0,L.jsx)("code",{children:"{{ value }}"})]})},{path:"object.value2",description:(0,L.jsxs)(f.x6,{i18nKey:"transformers.get-tooltips.map-valid-paths.description.extract-value",values:{value:"value2"},children:["=> extract ",(0,L.jsx)("code",{children:"{{ value }}"})]})},{path:"object.value2[0]",description:(0,L.jsxs)(f.x6,{i18nKey:"transformers.get-tooltips.map-valid-paths.description.extract-value-first-element",values:{value:"value2"},children:["=> extract ",(0,L.jsx)("code",{children:"{{ value }}"})," first element"]})},{path:"object.value2[1]",description:(0,L.jsxs)(f.x6,{i18nKey:"transformers.get-tooltips.map-valid-paths.description.extract-value-second-element",values:{value:"value2"},children:["=> extract ",(0,L.jsx)("code",{children:"{{ value }}"})," second element"]})}];return{field:(0,L.jsxs)("div",{children:[(0,L.jsx)(f.x6,{i18nKey:"transformers.get-tooltips.description",children:"A valid path of an json object."}),(0,L.jsx)("div",{children:(0,L.jsx)("strong",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.get-tooltips.json-value",children:"JSON Value:"})})}),(0,L.jsx)("pre",{children:(0,L.jsx)("code",{children:["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`)})}),(0,L.jsx)("strong",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.get-tooltips.valid-paths",children:"Valid Paths:"})}),A.map((S,Z)=>(0,L.jsxs)("p",{children:[(0,L.jsx)("code",{children:S.path}),(0,L.jsx)("i",{children:S.description})]},Z))]}),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function co(){return{list:(0,Je.css)({marginLeft:"20px"}),removeIcon:(0,Je.css)({margin:"0 0 0 4px",alignItems:"center"})}}var Br=e(41119),Ks=(A=>(A.JSON="json",A.KeyValues="kvp",A.Auto="auto",A.RegExp="regexp",A.Delimiter="delimiter",A))(Ks||{});const Js={id:Ks.JSON,name:"JSON",description:"Parse JSON string",getParser:A=>S=>JSON.parse(S)},rr={id:Ks.RegExp,name:"RegExp",description:"Parse with RegExp",getParser:A=>{let S=/(?<NewField>.*)/;if((0,bt.AP)(A.regExp))try{S=(0,bt.dO)(A.regExp)}catch(Z){Z instanceof Error&&console.warn(Z.message)}return Z=>Z.match(S)?.groups}};function or(A){const S=[];let Z="",ce="";const he={};for(let ve=0;ve<A.length;ve++){let xe=A[ve];xe===Z&&(Z="",xe=A[++ve]);const Ce=xe==="\\";if(Ce&&(xe=A[++ve]),Ce||Z.length){S.push(xe);continue}switch((xe==='"'||xe==="'")&&(Z=xe),xe){case":":case"=":S.length&&(ce&&(he[ce]=""),ce=S.join(""),S.length=0);break;case'"':case"'":case" ":case"	":case"\r":case`
`:S.length&&ce===""&&(he[S.join("")]="",S.length=0);case",":case";":case"&":case"{":case"}":if(S.length){const je=S.join("");ce.length?(he[ce]=je,ce=""):ce=je,S.length=0}break;default:S.push(xe),ve===A.length-1&&ce===""&&S.length&&(he[S.join("")]="",S.length=0)}}return ce.length&&(he[ce]=S.join("")),he}const Ll={id:Ks.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",getParser:A=>or},vi={id:Ks.Delimiter,name:"Split by delimiter",description:"Splits at delimited values, such as commas",getParser:({delimiter:A=","})=>{const S=new RegExp(`\\s*${(0,bt.jD)(A)}\\s*`,"g");return Z=>{const ce=Z.trim().split(S),he={};for(const ve of ce)he[ve]=1;return he}}},Bo=[Js,Ll,vi,rr],yi={id:Ks.Auto,name:"Auto",description:"parse new fields automatically",getParser:A=>{const S=Bo.map(Z=>Z.getParser(A));return Z=>{for(const ce of S)try{const he=ce(Z);if(he!=null)return he}catch{}}}},Uo=new Ye.O(()=>[...Bo,yi]),No={id:Ee.F.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{delimiter:","},operator:(A,S)=>Z=>Z.pipe((0,kt.T)(ce=>No.transformer(A,S)(ce))),transformer:A=>S=>S.map(Z=>xi(Z,A))};function xi(A,S){if(!S.source)return A;const Z=(0,gr.UI)(A,S.source);if(!Z)return A;const ce=Uo.getIfExists(S.format??Ks.Auto);if(!ce)throw new Error("unkonwn extractor");const he=A.length,ve=[],xe=new Map,Ce=ce.getParser(S);for(let _e=0;_e<he;_e++){let Xe=Z.values[_e];if((0,ie.isString)(Xe))try{Xe=Ce(Xe)}catch{Xe={}}if(Xe!=null){if(S.format===Ks.JSON&&S.jsonPaths&&S.jsonPaths?.length>0){const et={},dt=S.jsonPaths.filter(vt=>vt.path);dt.length>0&&(dt.forEach(vt=>{const lt=vt.alias&&vt.alias.length>0?vt.alias:vt.path;et[lt]=(0,ie.get)(Xe,vt.path)??"Not Found"}),Xe=et)}for(const[et,dt]of Object.entries(Xe)){let vt=xe.get(et);vt==null&&(vt=new Array(he).fill(void 0),xe.set(et,vt),ve.push(et)),vt[_e]=dt}}}const je=ve.map(_e=>{const Xe=xe.get(_e);if(!Xe)throw new Error(`Could not find field with name: ${_e}`);const et={name:_e,values:Xe,type:Xe?(0,Br.oE)(Xe.find(dt=>dt!=null)):oe.PU.other,config:{}};return q.$.featureToggles.extractFieldsNameDeduplication&&(et.name=(0,fe.fk)(et,A)),et});if(S.keepTime){const _e=(0,gr.UI)(A,"Time")||(0,gr.UI)(A,"time");_e&&je.unshift(_e)}return S.replace||je.unshift(...A.fields),{...A,fields:je}}const Ei=({input:A,options:S={delimiter:","},onChange:Z})=>{const ce={settings:{width:30,placeholderText:(0,f.t)("transformers.extract-fields-transformer-editor.field-name-picker-settings.placeholderText.select-field","Select field")},name:"",id:"",editor:()=>null},he=dt=>{Z({...S,source:dt})},ve=dt=>{Z({...S,format:dt?.value})},xe=dt=>{Z({...S,jsonPaths:dt})},Ce=dt=>{Z({...S,regExp:dt.target.value})},je=dt=>{Z({...S,delimiter:dt.value})},_e=()=>{S.replace&&(S.keepTime=!1),Z({...S,replace:!S.replace})},Xe=()=>{Z({...S,keepTime:!S.keepTime})},et=Uo.selectOptions(S.format?[S.format]:void 0);return(0,L.jsxs)("div",{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.extract-fields-transformer-editor.label-source","Source"),labelWidth:16,children:(0,L.jsx)(Ys.O,{context:{data:A},value:S.source??"",onChange:he,item:ce})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.extract-fields-transformer-editor.label-format","Format"),labelWidth:16,children:(0,L.jsx)($e.l6,{value:et.current[0],options:et.options,onChange:ve,width:24,placeholder:(0,f.t)("transformers.extract-fields-transformer-editor.placeholder-auto","Auto")})})}),S.format===Ks.RegExp&&(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:"RegExp",labelWidth:16,interactive:!0,tooltip:(0,f.t)("transformers.extract-fields-transformer-editor.tooltip-regexp","Example: {{regexExample}}",{regexExample:"/(?<NewField>.*)/",interpolation:{escapeValue:!1}}),children:(0,L.jsx)(Pa.p,{placeholder:"/(?<NewField>.*)/",value:S.regExp,onChange:Ce})})}),S.format===Ks.JSON&&(0,L.jsx)(aa,{options:S.jsonPaths??[],onChange:xe}),S.format===Ks.Delimiter&&(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.extract-fields-transformer-editor.label-delimiter","Delimiter"),labelWidth:16,children:(0,L.jsx)(xr.G,{value:S.delimiter,options:[{value:","},{value:";"},{value:"|"}],onChange:je,placeholder:(0,f.t)("transformers.extract-fields-transformer-editor.placeholder-select-delimiter","Select delimiter..."),width:24})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.extract-fields-transformer-editor.label-replace-all-fields","Replace all fields"),labelWidth:16,children:(0,L.jsx)(kn.K,{value:S.replace??!1,onChange:_e})})}),S.replace&&(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.extract-fields-transformer-editor.label-keep-time","Keep time"),labelWidth:16,children:(0,L.jsx)(kn.K,{value:S.keepTime??!1,onChange:Xe})})})]})},lc=()=>({id:Ee.F.extractFields,editor:Ei,transformation:No,name:(0,f.t)("transformers.extract-fields-transformer-editor.name.extract-fields","Extract fields"),description:(0,f.t)("transformers.extract-fields-transformer-editor.description.parse-fields-from-content","Parse fields from content (JSON, labels, etc)."),categories:new Set([m.m.Reformat]),help:Re(Ee.F.extractFields).helperDocs,imageDark:mi,imageLight:Hs});var Pi=e(59695),jl=e(26760),Bl=e(61934);const uo=()=>({id:Ee.F.joinByLabels,name:(0,f.t)("transformers.get-join-by-labels-transformer.name.join-by-labels","Join by labels"),description:(0,f.t)("transformers.get-join-by-labels-transformer.description.flatten-labeled-results-table-joined-labels","Flatten labeled results into a table joined by labels."),defaultOptions:{},operator:(A,S)=>Z=>Z.pipe((0,kt.T)(ce=>uo().transformer(A,S)(ce))),transformer:A=>S=>!S||!S.length?S:[fr(A,S)]});function fr(A,S){if(!A.value?.length)return Ur("No value label configured");const Z=(0,ge.aG)(S);if(Z.size<1)return Ur("No labels in result");if(!Z.has(A.value))return Ur("Value label not found");let ce=A.join?.length?A.join:Array.from(Z);ce=ce.filter(et=>et!==A.value);const he=new Set,ve=new Map,xe={};for(const et of S)for(const dt of et.fields)if(dt.labels&&dt.type!==oe.PU.time){const vt=ce.map(Mn=>dt.labels[Mn]),lt=vt.join(",");let Et=ve.get(lt);Et||(Et={keys:vt,values:{}},ve.set(lt,Et));const It=dt.labels[A.value],_t=dt.values,rn=Et.values[It];rn?Et.values[It]=rn.concat(_t):Et.values[It]=_t,xe[It]||(xe[It]=dt),he.add(It)}const Ce=Array.from(he),je=ce.map(()=>[]),_e=Ce.map(()=>[]);for(const et of ve.values()){let dt=-1,vt=!1;for(;!vt;){dt++,vt=!0;for(let lt=0;lt<ce.length;lt++)je[lt].push(et.keys[lt]);for(let lt=0;lt<Ce.length;lt++){const Et=Ce[lt],It=et.values[Et]??[];_e[lt].push(It[dt]),It.length>dt+1&&(vt=!1)}}}const Xe={fields:[],length:_e[0].length,refId:`${Ee.F.joinByLabels}-${S.map(et=>et.refId).join("-")}`};for(let et=0;et<ce.length;et++)Xe.fields.push({name:ce[et],config:{},type:oe.PU.string,values:je[et]});for(let et=0;et<Ce.length;et++){const dt=xe[Ce[et]];Xe.fields.push({name:Ce[et],config:{},type:dt.type??oe.PU.number,values:_e[et]})}return Xe}function Ur(A){return{meta:{notices:[{severity:"error",text:A}]},fields:[{name:"Error",type:oe.PU.string,config:{},values:[A]}],length:0}}function Nr({input:A,options:S,onChange:Z}){const ce=(0,u.useMemo)(()=>{let je;const _e=(0,ge.aG)(A),Xe=Array.from(_e).map(It=>({label:It,value:It}));let et=Xe.find(It=>It.value===S.value);!et&&S.value&&(et={label:`${S.value} (not found)`,value:S.value},Xe.push(et)),A.length?_e.size===0&&(je=(0,L.jsx)(vs.F,{title:(0,f.t)("transformers.join-by-labels-transformer-editor.info.title-no-labels-found","No labels found"),children:(0,L.jsx)(f.x6,{i18nKey:"transformers.join-by-labels-transformer-editor.info.input-contain-labels",children:"The input does not contain any labels"})})):je=(0,L.jsx)(vs.F,{title:(0,f.t)("transformers.join-by-labels-transformer-editor.info.title-no-input-found","No input found"),children:(0,L.jsx)(f.x6,{i18nKey:"transformers.join-by-labels-transformer-editor.info.no-input-or-labels-found",children:"No input (or labels) found"})}),_e.delete(S.value);const dt=Array.from(_e).map(It=>({label:It,value:It}));let vt=dt;const lt=!!S.join?.length;let Et="Join";return lt?vt=dt.filter(It=>!S.join.includes(It.value)):Et=dt.map(It=>It.value).join(", "),{warn:je,valueOptions:Xe,valueOption:et,joinOptions:dt,addOptions:vt,addText:Et,hasJoin:lt,key:Date.now()}},[S,A]),he=(je,_e)=>{if(!S.join)return;const Xe=S.join.slice();if(_e)Xe[je]=_e;else if(Xe.splice(je,1),!Xe.length){Z({...S,join:void 0});return}const et=new Set(Xe);S.value&&et.delete(S.value),Z({...S,join:Array.from(et)})},ve=je=>{const _e=je?.value;if(!_e)return;const Xe=S.join?S.join.slice():[];Xe.push(_e),Z({...S,join:Xe})},xe=10,Ce="No labels found";return(0,L.jsxs)("div",{children:[ce.warn,(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{error:(0,f.t)("transformers.join-by-labels-transformer-editor.error-required","Required"),invalid:!S.value?.length,label:(0,f.t)("transformers.join-by-labels-transformer-editor.label-value","Value"),labelWidth:xe,tooltip:(0,f.t)("transformers.join-by-labels-transformer-editor.tooltip-select-label-indicating-values","Select the label indicating the values name"),children:(0,L.jsx)($e.l6,{options:ce.valueOptions,value:ce.valueOption,onChange:je=>Z({...S,value:je.value}),noOptionsMessage:Ce})})}),ce.hasJoin?S.join.map((je,_e)=>(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.join-by-labels-transformer-editor.label-join","Join"),labelWidth:xe,error:"Unable to join by the value label",invalid:je===S.value,children:(0,L.jsxs)(dn.B,{children:[(0,L.jsx)($e.l6,{options:ce.joinOptions,value:ce.joinOptions.find(Xe=>Xe.value===je),isClearable:!0,onChange:Xe=>he(_e,Xe?.value),noOptionsMessage:Ce}),!!(ce.addOptions.length&&_e===S.join.length-1)&&(0,L.jsx)(Pi.i,{icon:"plus",label:"",options:ce.addOptions,onChange:ve,variant:"secondary"})]})})},je+_e)):(0,L.jsx)(L.Fragment,{children:!!ce.addOptions.length&&(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.join-by-labels-transformer-editor.label-join","Join"),labelWidth:xe,children:(0,L.jsx)($e.l6,{options:ce.addOptions,placeholder:ce.addText,onChange:ve,noOptionsMessage:Ce})})})})]})}const Er=()=>{const A=uo();return{id:A.id,editor:Nr,transformation:A,name:A.name,description:A.description,state:gt.pn.beta,categories:new Set([m.m.Combine]),help:Re(A.id).helperDocs,imageDark:jl,imageLight:Bl}};var ws=e(93139),bi=e(88092),Di=e(73630),Bs=e(69862),Pr=e(65474),Ci=e(46189);const Wo={id:Ee.F.fieldLookup,name:"Lookup fields from resource",description:"Use a field value to lookup countries, states, or airports.",defaultOptions:{},operator:A=>S=>S.pipe((0,Bs.Z)(Z=>(0,Pr.H)(Ul(Z,A))))};async function Ul(A,S){const Z=ue.sJ.get(ye.Ct.byName).get(S?.lookupField),ce=await(0,Ci.q3)(S?.gazetteer??Ci.fx);return ce.frame?Nl(A,ce,Z):Promise.reject("missing frame in gazetteer")}function Nl(A,S,Z){const ce=S.frame()?.fields;return ce?A.map(he=>{const ve=he.length,xe=[];for(const Ce of he.fields)if(xe.push(Ce),Z(Ce,he,A)){const je=Ce.values,_e=[];for(const Xe of ce){const et=new Array(ve);_e.push(et),xe.push({...Xe,values:et})}for(let Xe=0;Xe<S.count;Xe++){const et=S.find(je[Xe]);if(et?.index!=null)for(let dt=0;dt<ce.length;dt++)_e[dt][Xe]=ce[dt].values[et.index]}}return{...he,fields:xe}}):A}const Fo={settings:{}},Ko=({input:A,options:S,onChange:Z})=>{const ce={settings:{width:30,filter:xe=>xe.type===oe.PU.string,placeholderText:(0,f.t)("transformers.field-lookup-transformer-editor.field-name-picker-settings.placeholderText.select-text-field","Select text field"),noFieldsMessage:(0,f.t)("transformers.field-lookup-transformer-editor.field-name-picker-settings.noFieldsMessage.no-text-fields-found","No text fields found")},name:"",id:"",editor:()=>null},he=(0,u.useCallback)(xe=>{Z({...S,lookupField:xe})},[Z,S]),ve=(0,u.useCallback)(xe=>{Z({...S,gazetteer:xe})},[Z,S]);return(0,L.jsxs)("div",{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.field-lookup-transformer-editor.label-field","Field"),labelWidth:12,children:(0,L.jsx)(Ys.O,{context:{data:A},value:S?.lookupField??"",onChange:he,item:ce})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.field-lookup-transformer-editor.label-lookup","Lookup"),labelWidth:12,children:(0,L.jsx)(ws.G,{value:S?.gazetteer??"",context:{data:A},item:Fo,onChange:ve})})})]})},Ti=()=>({id:Ee.F.fieldLookup,editor:Ko,transformation:Wo,name:(0,f.t)("transformers.field-lookup-transformer-editor.name.lookup-fields-from-resource","Lookup fields from resource"),description:(0,f.t)("transformers.field-lookup-transformer-editor.description.lookup-additional-fields-external-source","Use a field value to lookup countries, states, or airports."),state:gt.pn.alpha,categories:new Set([m.m.PerformSpatialOperations]),help:Re(Ee.F.fieldLookup).helperDocs,imageDark:bi,imageLight:Di});var Si=e(84277),wo=e(91551),Mi=e(359),Wl=e(1027);const br=(A,S,Z=[])=>(S===0?Z.push(A):A.forEach(ce=>{br(ce,S-1,Z)}),Z);function Oi(A){const S=A[0].length,Z=A.length,ce=new Map;for(let he=0;he<S;he++){let ve=ce;for(let xe=0;xe<Z;xe++){let Ce=A[xe][he],je=ve.get(Ce);je==null&&(je=xe===Z-1?[]:new Map,ve.set(Ce,je)),ve=je}ve.push(he)}return br(ce,Z)}const Wr={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function Vo(A,S,Z){return S.map((ce,he)=>A.withNames?`${ce}${A.separator1}${Z[he]}`:Z[he]).join(A.separator2)}function ho(A,S){const Z={};return A.forEach((ce,he)=>{Z[ce]=String(S[he])}),Z}const Fr=()=>({id:Ee.F.partitionByValues,name:(0,f.t)("transformers.get-partition-by-values-transformer.name.partition-by-values","Partition by values"),description:(0,f.t)("transformers.get-partition-by-values-transformer.description.split-oneframe-dataset-multiple-series","Split a one-frame dataset into multiple series."),defaultOptions:{keepFields:!1},operator:(A,S)=>Z=>Z.pipe((0,kt.T)(ce=>Fr().transformer(A,S)(ce))),transformer:(A,S)=>{const Z=(0,Mi.R)({names:A.fields});if(!Z)return Wl.W.transformer({},S);const ce=(0,ue.NS)(Z);return he=>he.length?fo(he[0],ce,A):he}});function Ri(A,S,Z){const ce=A.fields.filter(Ce=>S(Ce,A,[A]));if(!ce.length)return[A];const he=ce.map(Ce=>Ce.values),ve=ce.map(Ce=>Ce.name),xe={...Wr,...Z?.naming};return Oi(he).map(Ce=>{let je=A.name,_e={};if(xe.asLabels)_e=ho(ve,ce.map((et,dt)=>he[dt][Ce[0]]));else{let et=Vo(xe,ve,ce.map((dt,vt)=>he[vt][Ce[0]]));xe?.append&&A.name&&(et=`${A.name} ${et}`),je=et}let Xe=A.fields;if(!Z?.keepFields){const et=new Set(ve);Xe=A.fields.filter(dt=>!et.has(dt.name))}return{name:je,refId:`${A.refId}-${je}`,meta:A.meta,length:Ce.length,fields:Xe.map(et=>{const dt=et.values,vt=Array(Ce.length);for(let lt=0;lt<Ce.length;lt++)vt[lt]=dt[Ce[lt]];return{name:et.name,type:et.type,config:(0,ie.cloneDeep)(et.config),labels:{...et.labels,..._e},values:vt}})}})}function fo(A,S,Z){let ce={},he={...A,fields:A.fields.map(xe=>{let Ce=xe,je=xe.config.displayNameFromDS??xe.config.displayName;return je&&(Ce={...xe,config:{...xe.config},state:{...xe.state}},ce[je]=xe.name,Ce.name=je,delete Ce.config.displayName,delete Ce.config.displayNameFromDS,delete Ce.state?.displayName),Ce})},ve=Ri(he,S,Z);return(0,fe.Fm)(ve),ve.forEach(xe=>{xe.fields.forEach(Ce=>{Ce.name in ce&&(Ce.name=ce[Ce.name]??Ce.name,Ce.config.displayName=Ce.state.displayName),delete Ce.state?.displayName,delete Ce.state?.multipleFrames})}),ve}function $o({input:A,options:S,onChange:Z}){const ce=(0,ao.sE)(A),he=(0,ao.m3)(ce),ve=(0,u.useMemo)(()=>{const dt=new Set(S.fields);return dt.size<1?he:he.filter(vt=>!dt.has(vt.value))},[he,S]),xe=(0,u.useCallback)(dt=>{if(!dt.value)return;const vt=new Set(S.fields);vt.add(dt.value),Z({...S,fields:[...vt]})},[Z,S]);let Ce;(dt=>{dt[dt.asLabels=0]="asLabels",dt[dt.frameName=1]="frameName"})(Ce||(Ce={}));const je=[{label:(0,f.t)("transformers.partition-by-values-editor.naming-modes-options.label.as-label","As label"),value:0},{label:(0,f.t)("transformers.partition-by-values-editor.naming-modes-options.label.as-frame-name","As frame name"),value:1}],_e=[{label:(0,f.t)("transformers.partition-by-values-editor.keep-fields-options.label.yes","Yes"),value:!0},{label:(0,f.t)("transformers.partition-by-values-editor.keep-fields-options.label.no","No"),value:!1}],Xe=(0,u.useCallback)(dt=>{if(!dt)return;const vt=new Set(S.fields);vt.delete(dt),Z({...S,fields:[...vt]})},[Z,S]);if(A.length>1)return(0,L.jsx)(cr.P,{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.partition-by-values-editor.partition-values-works-single-frame",children:"Partition by values only works with a single frame."})});const et=[...new Set(S.fields)];return(0,L.jsxs)("div",{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.partition-by-values-editor.label-field","Field"),labelWidth:10,grow:!0,children:(0,L.jsxs)(dn.B,{children:[et.map(dt=>(0,L.jsx)(me.$n,{icon:"times",variant:"secondary",size:"md",onClick:()=>Xe(dt),children:dt},dt)),ve.length&&(0,L.jsx)(Pi.i,{variant:"secondary",size:"md",options:ve,onChange:xe,label:(0,f.t)("transformers.partition-by-values-editor.label-select-field","Select field"),icon:"plus",isFullWidth:!1})]})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{tooltip:(0,f.t)("transformers.partion-by-values-editor.tooltip-naming","Sets how the names of the selected fields are displayed. As frame name is usually better for tabular data"),label:(0,f.t)("transformers.partition-by-values-editor.label-naming","Naming"),labelWidth:10,children:(0,L.jsx)(Pe.z,{options:je,value:S.naming?.asLabels===void 0||S.naming.asLabels?0:1,onChange:dt=>Z({...S,naming:{...S.naming,asLabels:dt===0}})})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{tooltip:(0,f.t)("transformers.partition-by-values-editor.tooltip-keeps-partition-fields-frames","Keeps the partition fields in the frames"),label:(0,f.t)("transformers.partition-by-values-editor.label-keep-fields","Keep fields"),labelWidth:16,children:(0,L.jsx)(Pe.z,{options:_e,value:S.keepFields,onChange:dt=>Z({...S,keepFields:dt})})})})]})}const we=()=>{const A=Fr();return{id:Ee.F.partitionByValues,editor:$o,transformation:A,name:A.name,description:A.description,state:gt.pn.alpha,categories:new Set([m.m.Reformat]),help:Re(Ee.F.partitionByValues).helperDocs,imageDark:Si,imageLight:wo}};var Te=e(3779),He=e(10177),at=e(39443),yt=e(18700),Ct=e(8721),Mt=(A=>(A.TimeSeriesWide="wide",A.TimeSeriesLong="long",A.TimeSeriesMulti="multi",A.TimeSeriesMany="many",A))(Mt||{});function Nt(A){if(!Array.isArray(A)||A.length===0)return A;const S=[];for(const Z of Gt(A)){const ce=Z.fields[0];if(!ce||ce.type!==oe.PU.time)continue;const he=[],ve=[];for(const xe of Z.fields)switch(xe.type){case oe.PU.number:case oe.PU.boolean:he.push(xe);break;case oe.PU.string:ve.push(xe);break}for(const xe of he)if(ve.length){const Ce=new Map;for(let je=0;je<Z.length;je++){const _e=ce.values[je],Xe=xe.values[je];if(Xe===void 0||_e==null)continue;const et=ve.map(vt=>vt.values[je]).join("/");let dt=Ce.get(et);if(!dt){dt={key:et,time:[],value:[],labels:{}};for(const vt of ve)dt.labels[vt.name]=vt.values[je];Ce.set(et,dt)}dt.time.push(_e),dt.value.push(Xe)}for(const je of Ce.values())S.push({name:Z.name,refId:Z.refId,meta:{...Z.meta,type:at.m.TimeSeriesMulti},fields:[{...ce,values:je.time},{...xe,values:je.value,labels:je.labels}],length:je.time.length})}else S.push({name:Z.name,refId:Z.refId,meta:{...Z.meta,type:at.m.TimeSeriesMulti},fields:[ce,xe],length:Z.length})}return S}function Gt(A){if(!Array.isArray(A)||A.length===0)return A;const S=[];for(const Z of A){let ce;const he=[],ve={},xe={},Ce={},je={};for(let lt=0;lt<Z.fields.length;lt++){const Et=Z.fields[lt];switch(Et.type){case oe.PU.string:case oe.PU.boolean:Et.name in je||(je[Et.name]=lt,xe[Et.name]=!0);break;case oe.PU.time:if(!ce){ce=Et;break}default:if(Et.name in ve){const rn=ve[Et.name];if(Et.type!==rn)continue}else ve[Et.name]=Et.type,he.push(Et.name);const It=JSON.stringify(Et.labels),_t=Ce[It];if(_t!==void 0?_t.push(lt):Ce[It]=[lt],Et.labels!=null)for(const rn in Et.labels)xe[rn]=!0}}if(!ce)continue;const _e=[],Xe=[],et=[],dt=[];for(let lt=0;lt<Z.length;lt++)_e.push({time:ce.values[lt],wideRowIndex:lt});for(const lt in Ce)Xe.push(lt);for(const lt in xe)et.push(lt);for(const lt in je)dt.push(lt);_e.sort((lt,Et)=>lt.time-Et.time),Xe.sort(),et.sort(),he.sort();const vt=new yt.k({...Z,meta:{...Z.meta,type:at.m.TimeSeriesLong},fields:[{name:ce.name,type:ce.type}]});for(const lt of he)vt.addField({name:lt,type:ve[lt]});for(const lt of et)vt.addField({name:lt,type:oe.PU.string});for(const lt of _e){const{time:Et,wideRowIndex:It}=lt;for(const _t of Xe){const rn={};for(const cn of dt)rn[cn]=Z.fields[je[cn]].values[It];let Mn=0;for(const cn of Ce[_t]){const Cn=Z.fields[cn];if(Mn++===0&&Cn.labels!=null)for(const Jn in Cn.labels)rn[Jn]=Cn.labels[Jn];rn[Cn.name]=Cn.values[It]}rn[ce.name]=Et,vt.add(rn)}}S.push(vt)}return S}function un(A){return fo(A,Z=>Z.type===oe.PU.string).map(Z=>(Z.meta||(Z.meta={}),Z.meta.type=at.m.TimeSeriesMulti,Z))}const yn=()=>({id:Ee.F.prepareTimeSeries,name:(0,f.t)("transformers.prepare-time-series.name.prepare-time-series","Prepare time series"),description:(0,f.t)("transformers.prepare-time-series.description.stretch-data-frames","Stretch data frames from the wide format into the long format."),defaultOptions:{},operator:(A,S)=>Z=>Z.pipe((0,kt.T)(ce=>yn().transformer(A,S)(ce))),transformer:A=>{const S=A?.format??"wide";if(S==="many"||S==="multi")return Nt;if(S==="long")return Gt;const Z=ue.sJ.get(ye.Ct.firstTimeField).get({});return ce=>{if(!ce.length)return[];const he=[];for(const xe of ce)xe.meta?.type===at.m.TimeSeriesLong?un(xe).forEach(Ce=>he.push(Ce)):he.push(xe);const ve=(0,Ct.Fd)({frames:he,joinBy:Z,keepOriginIndices:!0});return ve?(ve.meta||(ve.meta={}),ve.meta.type=at.m.TimeSeriesWide,[ve]):[]}}});function Wn(A){const{options:S,onChange:Z}=A,ce=(0,Pt.of)(qn),he={label:(0,f.t)("transformers.prepare-time-series-editor.wide-info.label.wide-time-series","Wide time series"),value:Mt.TimeSeriesWide,description:(0,f.t)("transformers.prepare-time-series-editor.wide-info.description.creates-single-frame-joined","Creates a single frame joined by time"),info:(0,L.jsxs)("ul",{children:[(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.wide-info.single-frame",children:"Single frame"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.wide-info.st-field-is-shared-time",children:"1st field is shared time field"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.wide-info.time-in-ascending-order",children:"Time in ascending order"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.wide-info.multiple-value-fields-of-any-type",children:"Multiple value fields of any type"})})]})},ve={label:(0,f.t)("transformers.prepare-time-series-editor.multi-info.label.multiframe-time-series","Multi-frame time series"),value:Mt.TimeSeriesMulti,description:(0,f.t)("transformers.prepare-time-series-editor.multi-info.description.creates-frame-timenumber","Creates a new frame for each time/number pair"),info:(0,L.jsxs)("ul",{children:[(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.multi-info.multiple-frames",children:"Multiple frames"})}),(0,L.jsx)("li",{children:(0,L.jsxs)(f.x6,{i18nKey:"transformers.multi-info.frame-fields-value",values:{field1:"time",field2:"value"},children:["Each frame has two fields: ","{{field1}}",", ","{{field2}}"]})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.multi-info.time-in-ascending-order",children:"Time in ascending order"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.multi-info.string-values-are-represented-as-labels",children:"String values are represented as labels"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.multi-info.all-values-are-numeric",children:"All values are numeric"})})]})},xe={label:(0,f.t)("transformers.prepare-time-series-editor.long-info.label.long-time-series","Long time series"),value:Mt.TimeSeriesLong,description:(0,f.t)("transformers.prepare-time-series-editor.long-info.description.convert-each-frame-to-long-format","Convert each frame to long format"),info:(0,L.jsxs)("ul",{children:[(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.long-info.single-frame",children:"Single frame"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.long-info.st-field-is-time",children:"1st field is time field"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.long-info.ascending-order-duplicates",children:"Time in ascending order, but may have duplicates"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.long-info.string-values-separate",children:"String values are represented as separate fields rather than as labels"})}),(0,L.jsx)("li",{children:(0,L.jsx)(f.x6,{i18nKey:"transformers.long-info.multiple-value-fields-may-exist",children:"Multiple value fields may exist"})})]})},Ce=[he,ve,xe],je=(0,u.useCallback)(_e=>{Z({...S,format:_e.value})},[Z,S]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.prepare-time-series-editor.label-format","Format"),labelWidth:12,children:(0,L.jsx)($e.l6,{width:35,options:Ce,value:Ce.find(_e=>_e.value===Mt.TimeSeriesMulti&&S.format===Mt.TimeSeriesMany?!0:_e.value===S.format)||Ce[0],onChange:je,className:"flex-grow-1"})})}),(0,L.jsx)(Be.C,{children:(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.prepare-time-series-editor.label-info","Info"),labelWidth:12,children:(0,L.jsx)("div",{className:ce.info,children:(Ce.find(_e=>_e.value===S.format)||Ce[0]).info})})})]})}const qn=A=>({info:(0,Je.css)({marginLeft:"20px"})}),na=()=>{const A=yn();return{id:A.id,editor:Wn,transformation:A,name:A.name,description:A.description,categories:new Set([m.m.Reformat]),help:Re(A.id).helperDocs,imageDark:Te,imageLight:He}};var Kn=e(19693),Qn=e(92351),ga=e(66648),Aa=e(48817),va=(A=>(A.linear="linear",A.polynomial="polynomial",A))(va||{});const Na={predictionCount:100,modelType:"linear",degree:2},wn=[{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.quadratic","Quadratic"),value:2},{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.cubic","Cubic"),value:3},{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.quartic","Quartic"),value:4},{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.quintic","Quintic"),value:5},{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.sextic","Sextic"),value:6},{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.septic","Septic"),value:7},{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.octic","Octic"),value:8},{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.nonic","Nonic"),value:9},{label:()=>(0,f.t)("transformers.regression-transformer-editor.label.decic","Decic"),value:10}],Ea=()=>({id:Ee.F.regression,name:(0,f.t)("transformers.regression.name.trendline","Trendline"),description:(0,f.t)("transformers.regression.description.create-new-data-frame","Create a new data frame containing values predicted by a statistical model."),operator:(A,S)=>Z=>Z.pipe((0,kt.T)(ce=>Ea().transformer(A,S)(ce))),transformer:(A,S)=>Z=>{const{predictionCount:ce,modelType:he,degree:ve}={...Na,...A};if(Z.length===0)return Z;const xe=ue.sJ.get(ye.Ct.byName).get(A.yFieldName),Ce=ue.sJ.get(ye.Ct.byName).get(A.xFieldName);let je,_e,Xe;for(const Cn of Z){const Jn=Cn.fields.find(Ba=>xe(Ba,Cn,Z));if(Jn){_e=Jn;const Ba=Cn.fields.find(ks=>Ce(ks,Cn,Z));if(Ba){je=Ba,Xe=Cn;break}else throw"X and Y fields must be part of the same frame"}}if(!je||!_e)return Z;let et=je.values[0],dt=je.values[0];for(let Cn=1;Cn<je.values.length;Cn++)je.values[Cn]<et&&(et=je.values[Cn]),je.values[Cn]>dt&&(dt=je.values[Cn]);const vt=(dt-et)/(ce-1),lt=[...[...Array(ce-1).keys()].map((Cn,Jn)=>Jn*vt+et),dt],Et=je.type===oe.PU.time?et:0,It=[],_t=[];for(let Cn=0;Cn<je.values.length;Cn++)_e.values[Cn]!==null&&!isNaN(_e.values[Cn])&&(_t.push(je.values[Cn]-Et),It.push(_e.values[Cn]));let rn;switch(he){case"linear":rn=new Aa.X(_t,It);break;case"polynomial":rn=new ga.Y(_t,It,ve);break;default:return Z}let Mn=`${(0,f.t)("transformers.regression-transformer-editor.model-type-options.label.linear","Linear")} ${(0,f.t)("transformers.regression-transformer-editor.regression","regression")}`;he==="polynomial"&&(Mn=`${wn.find(Jn=>Jn.value===ve)?.label()} ${(0,f.t)("transformers.regression-transformer-editor.model-type-options.label.polynomial","Polynomial").toLocaleLowerCase()} ${(0,f.t)("transformers.regression-transformer-editor.regression","regression")}`);const cn={name:`${Mn}`,length:lt.length,fields:[{name:je.name,type:je.type,values:lt,config:{}},{name:`${(0,fe.Ct)(_e,Xe,Z)}`,type:_e.type,values:lt.map(Cn=>rn.predict(Cn-Et)),config:{}}]};return[...Z,cn]}}),Os=()=>[{label:(0,f.t)("transformers.regression-transformer-editor.model-type-options.label.linear","Linear"),value:va.linear},{label:(0,f.t)("transformers.regression-transformer-editor.model-type-options.label.polynomial","Polynomial"),value:va.polynomial}],da={editor:Ys.O,id:"",name:"",settings:{width:24,isClearable:!1}},Ja=20,ns={firstTimeMatcher:ue.sJ.get(ye.Ct.firstTimeField).get({}),numericMatcher:ue.sJ.get(ye.Ct.numeric).get({})},Xs=(A,S,Z)=>{for(const ce of A){const he=ce.fields.find(ve=>S(ve,ce,A)&&ve!==Z);if(he)return he}},Dr=({input:A,options:S,onChange:Z})=>{const ce=(0,u.useMemo)(()=>Os(),[]),he=(0,u.useMemo)(()=>wn.map(ve=>({label:ve.label(),value:ve.value})),[]);return(0,u.useEffect)(()=>{let ve,xe;S.xFieldName&&S.yFieldName||(S.xFieldName||(ve=Xs(A,ns.firstTimeMatcher)||Xs(A,ns.numericMatcher)),S.yFieldName||(xe=Xs(A,ns.numericMatcher,ve)),ve&&xe&&Z({...S,xFieldName:ve.name,yFieldName:xe.name}))},[A,S,Z]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Vs,{label:(0,f.t)("transformers.regression-transformer-editor.label-x-field","X field"),children:(0,L.jsx)(Ys.O,{context:{data:A},value:S.xFieldName??"",item:da,onChange:ve=>Z({...S,xFieldName:ve})})}),(0,L.jsx)(Vs,{label:(0,f.t)("transformers.regression-transformer-editor.label-y-field","Y field"),children:(0,L.jsx)(Ys.O,{context:{data:A},value:S.yFieldName??"",item:da,onChange:ve=>Z({...S,yFieldName:ve})})}),(0,L.jsx)(Vs,{label:(0,f.t)("transformers.regression-transformer-editor.label-model-type","Model type"),children:(0,L.jsx)(xr.G,{value:S.modelType??Na.modelType,onChange:ve=>Z({...S,modelType:ve.value??Na.modelType}),options:ce})}),(0,L.jsx)(Vs,{label:(0,f.t)("transformers.regression-transformer-editor.label-predicted-points","Predicted points"),tooltip:(0,f.t)("transformers.regression-transformer-editor.tooltip-number-of-xy-points-to-predict","Number of X,Y points to predict"),children:(0,L.jsx)(Ss.Q,{value:S.predictionCount??Na.predictionCount,onChange:ve=>Z({...S,predictionCount:ve})})}),S.modelType===va.polynomial&&(0,L.jsx)(Vs,{label:(0,f.t)("transformers.regression-transformer-editor.label-degree","Degree"),tooltip:(0,f.t)("transformers.regression-transformer-editor.tooltip-high-degree-polynomial","Higher-degree polynomials (e.g., degree 4 or higher) can result in misleading trends and unstable fits. Proceed with caution."),children:(0,L.jsx)(xr.G,{value:S.degree??Na.degree,options:he,onChange:ve=>Z({...S,degree:Number(ve.value)})})})]})},Vs=({label:A,tooltip:S,children:Z})=>(0,L.jsx)(Fe.I,{labelWidth:Ja,label:A,tooltip:S,children:Z}),zo=()=>{const A=Ea();return{id:Ee.F.regression,editor:Dr,transformation:A,name:A.name,description:A.description,categories:new Set([m.m.CalculateNewFields]),help:Re(Ee.F.regression).helperDocs,imageDark:Kn,imageLight:Qn,tags:new Set([(0,f.t)("transformers.regression-transformer-editor.tags.regression-analysis","Regression analysis")])}};var as=e(13833),fs=e(32651);const ps=()=>({id:Ee.F.rowsToFields,name:(0,f.t)("transformers.get-rows-to-fields-transformer.name.rows-to-fields","Rows to fields"),description:(0,f.t)("transformers.get-rows-to-fields-transformer.description.convert-field-dynamic-config","Convert each row into a field with dynamic config."),defaultOptions:{},operator:A=>S=>S.pipe((0,kt.T)(Z=>Z.map(ce=>ms(A,ce))))});function ms(A,S){const Z=Ta(S,A.mappings??[],!0),{nameField:ce,valueField:he}=Z;if(!ce||!he)return S;const ve=[];for(let xe=0;xe<ce.values.length;xe++){const Ce=ce.values[xe],je=he.values[xe],_e=sa(S,xe,Z),Xe=Rs(S,xe,Z),et={name:`${Ce}`,type:he.type,values:[je],config:_e,labels:Xe};ve.push(et)}return{fields:ve,length:1,refId:`${Ee.F.rowsToFields}-${S.refId}`}}function Rs(A,S,Z){const ce={...Z.nameField.labels};for(let he=0;he<A.fields.length;he++){const ve=A.fields[he],xe=(0,fe.Ct)(ve,A),Ce=Z.index[xe];if(Ce.handler&&Ce.handler.key!==ta.Label)continue;const je=ve.values[S];je!=null&&(ce[xe]=je)}return ce}function Cr({input:A,options:S,onChange:Z}){return A.length===0?null:(0,L.jsx)("div",{children:(0,L.jsx)(Ka,{frame:A[0],mappings:S.mappings??[],onChange:ce=>Z({...S,mappings:ce}),withNameAndValue:!0})})}const Tr=()=>{const A=ps();return{id:A.id,editor:Cr,transformation:A,name:A.name,description:A.description,state:gt.pn.beta,categories:new Set([m.m.Reformat]),help:Re(A.id).helperDocs,imageDark:as,imageLight:fs}};var po=e(739),mo=e(90267),os=e(32122),bs=e(35664),rs=e(90176),Kr=e(98643),go=e(87039),Ii=e(78089);const $s=()=>({id:Ee.F.spatial,name:(0,f.t)("transformers.get-spatial-transformer.name.spatial-operations","Spatial operations"),description:(0,f.t)("transformers.get-spatial-transformer.description.apply-spatial-operations-to-query-results","Apply spatial operations to query results."),defaultOptions:{},operator:A=>S=>S.pipe((0,Bs.Z)(Z=>(0,Pr.H)(Fl(Z,A))))});function vo(A){return A.action===rs.dy.Modify&&A.modify?.op===rs.YD.LineBuilder}async function Fl(A,S){const Z=await(0,go.nE)(S.source);if(vo(S)){const ce=await(0,go.nE)(S.modify?.target);return A.map(he=>{const ve=(0,go.FM)(he,Z),xe=(0,go.FM)(he,ce);if(ve.field&&xe.field){const Ce=[...he.fields],je=(0,Kr.XR)(ve.field,xe.field),_e=Ce[0];return _e.type===oe.PU.geo&&_e!==ve.field&&_e!==xe.field?Ce[0]=(0,Kr.RA)(_e,je):Ce.unshift(je),{...he,fields:Ce}}return he})}return A.map(ce=>{let he=(0,go.FM)(ce,Z);if(he.field){if(S.action===rs.dy.Modify){switch(S.modify?.op){case rs.YD.AsLine:let xe=he.field.name;return(!xe||xe==="Point")&&(xe="Line"),{...ce,length:1,fields:[{...he.field,name:xe,type:oe.PU.geo,values:[(0,Ii.tt)(he.field)]}]}}return ce}const ve=he.derived?[he.field,...ce.fields]:ce.fields.slice(0);if(S.action===rs.dy.Calculate&&(ve.push((0,Ii.pp)(he.field,S.calculate??{})),he.derived=!0),he.derived)return{...ce,fields:ve}}return ce})}const cc=(A,S)=>{const Z=S.options??{};A.addSelect({path:"action",name:"Action",description:"",defaultValue:rs.dy.Prepare,settings:{options:[{value:rs.dy.Prepare,label:(0,f.t)("transformers.supplier.label.prepare-spatial-field","Prepare spatial field"),description:"Set a geometry field based on the results of other fields"},{value:rs.dy.Calculate,label:(0,f.t)("transformers.supplier.label.calculate-value","Calculate value"),description:(0,f.t)("transformers.supplier.description.geometry-define-field-headingdistancearea","Use the geometry to define a new field (heading/distance/area)")},{value:rs.dy.Modify,label:(0,f.t)("transformers.supplier.label.transform","Transform"),description:(0,f.t)("transformers.supplier.description.apply-spatial-operations-to-the-geometry","Apply spatial operations to the geometry")}]}}),Z.action===rs.dy.Calculate?A.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:rs.kD.Heading,settings:{options:[{value:rs.kD.Heading,label:(0,f.t)("transformers.supplier.label.heading","Heading")},{value:rs.kD.Area,label:(0,f.t)("transformers.supplier.label.area","Area")},{value:rs.kD.Distance,label:(0,f.t)("transformers.supplier.label.distance","Distance")}]}}):Z.action===rs.dy.Modify&&A.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:rs.YD.AsLine,settings:{options:[{value:rs.YD.AsLine,label:(0,f.t)("transformers.supplier.label.as-line","As line"),description:"Create a single line feature with a vertex at each row"},{value:rs.YD.LineBuilder,label:(0,f.t)("transformers.supplier.label.line-builder","Line builder"),description:(0,f.t)("transformers.supplier.description.create-a-line-between-two-points","Create a line between two points")}]}}),vo(Z)?(A.addNestedOptions({category:["Source"],path:"source",build:(ce,he)=>{const ve=Z.source??{mode:po.aG.Auto};(0,mo.G)("Point","",ce,ve)}}),A.addNestedOptions({category:["Target"],path:"modify",build:(ce,he)=>{const ve=Z.modify?.target??{mode:po.aG.Auto};(0,mo.G)("Point","target.",ce,ve)}})):(0,mo.G)("Location","source.",A,Z.source)},Wc=A=>{(0,u.useEffect)(()=>{if(!A.options.source?.mode){const ce=Dn(cc);A.onChange({...ce,...A.options}),console.log("geometry useEffect",ce)}},[]);const S=Fc((0,Pt.$j)()),Z=hn(A,cc);return(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{children:Z.items.map(ce=>ce.render())}),(0,L.jsx)("div",{children:Z.categories.map(ce=>(0,L.jsxs)("div",{className:S.wrap,children:[(0,L.jsx)("h5",{children:ce.props.title}),(0,L.jsx)("div",{className:S.item,children:ce.items.map(he=>he.render())})]},ce.props.id))})]})},Fc=A=>({wrap:(0,Je.css)({marginBottom:"20px"}),item:(0,Je.css)({borderLeft:`4px solid ${A.colors.border.strong}`,paddingLeft:"10px"})}),Kc=()=>{const A=$s();return{id:Ee.F.spatial,editor:Wc,transformation:A,name:A.name,description:A.description,state:gt.pn.alpha,categories:new Set([m.m.PerformSpatialOperations]),help:Re(Ee.F.spatial).helperDocs,imageDark:os,imageLight:bs}};var Ai=e(17503),wc=e(32462),Vc=e(16168),dc=e(79319);const $c=()=>({id:Ee.F.timeSeriesTable,name:(0,f.t)("transformers.time-series-table.name.time-series-to-table","Time series to table"),description:(0,f.t)("transformers.time-series-table.description.convert-to-table-rows","Convert time series data to table rows so that they can be viewed in tabular or sparkline format."),defaultOptions:{},isApplicable:A=>{for(const S of A)if((0,Ai.aH)(S))return dc.M.Applicable;return dc.M.NotApplicable},isApplicableDescription:(0,f.t)("transformers.time-series-table.is-applicable-description.requires-time-series-frame","The Time series to table transformation requires at least one time series frame to function. You currently have none."),operator:A=>S=>S.pipe((0,kt.T)(Z=>ct(A,Z)))});function ct(A,S){const Z={},ce={},he=[];let ve=Dt(S);for(const xe of Object.keys(ve)){const Ce=S.filter(_e=>_e.refId===xe);Z[xe]={},ce[xe]={};const je=[];Ce.forEach(_e=>{_e.fields.forEach(Xe=>{Xe.type===oe.PU.number&&Xe.labels&&Object.keys(Xe.labels).forEach(et=>{je.includes(et)||(ce[xe][et]=xt(et,oe.PU.string),je.push(et))})})});for(let _e=0;_e<Ce.length;_e++){const Xe=Ce[_e];let et=null,dt=A[xe]?.timeField;if(dt&&dt.length>0?et=Xe.fields.find(vt=>vt.name===dt):et=Xe.fields.find(vt=>(0,Ai.hF)(vt)),!(0,Ai.aH)(Xe)){he.push(Xe);continue}for(const vt of Xe.fields){if(vt.type!==oe.PU.number)continue;const lt=A[xe]?.stat??Lt.gy.lastNotNull,Et=(0,Lt.Nw)({field:vt,reducers:[lt]})[lt]??null,It=new yt.k;et!==void 0&&(It.addField(et),It.addField(vt),Z[xe][`Trend #${xe}`]===void 0&&(Z[xe][`Trend #${xe}`]=xt(`Trend #${xe}`,oe.PU.frame)),Z[xe][`Trend #${xe}`].values.push({...It,value:Et,length:vt.values.length})),je.forEach(_t=>{ce[xe][_t].values.push(vt.labels?.[_t]??"")})}}}for(const xe of Object.keys(ve)){const Ce={},je=new yt.k;je.refId=xe;const _e=ce[xe];if(_e!==void 0)for(const[et,dt]of Object.entries(_e))Ce[et]===void 0&&(Ce[et]=dt);for(const et of Object.values(Ce))je.addField(et);const Xe=Z[xe];for(const et of Object.values(Xe))je.addField(et);je.fields.length>0&&he.push(je)}return he}function xt(A,S){return{name:A,type:S,config:{},values:[]}}function Dt(A){let S={};for(const Z of A)Z.refId!==void 0&&(S[Z.refId]===void 0?S[Z.refId]=1:S[Z.refId]++);return S}function Rt({input:A,options:S,onChange:Z}){const ce=Dt(A),he=(0,u.useCallback)((Ce,je)=>{const _e=je?.value!==void 0?je.value:"";Z({...S,[Ce]:{...S[Ce],timeField:_e}})},[Z,S]),ve=(0,u.useCallback)((Ce,je)=>{const _e=je[0];_e&&(0,Lt.Em)(_e)&&Z({...S,[Ce]:{...S[Ce],stat:_e}})},[Z,S]);let xe=[];for(const Ce of Object.keys(ce)){const je={},_e=[];for(const Xe of A)if(Xe.refId===Ce)for(const et of Xe.fields)(0,Ai.hF)(et)&&(je[et.name]=et);for(const Xe of Object.values(je)){const{name:et}=Xe;_e.push({label:et,value:et})}xe.push((0,L.jsxs)(Be.C,{children:[(0,L.jsx)(Fe.I,{children:(0,L.jsx)(Oe.c,{children:`Trend #${Ce}`})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.time-series-table-transform-editor.label-time-field","Time field"),tooltip:(0,f.t)("transformers.time-series-table-transform-editor.tooltip-time-field","The time field that will be used for the time series. If not selected the first found will be used."),children:(0,L.jsx)($e.l6,{onChange:he.bind(null,Ce),options:_e,value:S[Ce]?.timeField,isClearable:!0})}),(0,L.jsx)(Fe.I,{label:(0,f.t)("transformers.time-series-table-transform-editor.label-stat","Stat"),tooltip:(0,f.t)("transformers.time-series-table-transform-editor.tooltip-statistic-should-calculated-series","The statistic that should be calculated for this time series."),children:(0,L.jsx)(fn.S,{stats:[S[Ce]?.stat??Lt.gy.lastNotNull],onChange:ve.bind(null,Ce),filterOptions:Xe=>Xe.id!==Lt.gy.allValues&&Xe.id!==Lt.gy.uniqueValues})})]},Ce))}return(0,L.jsx)(L.Fragment,{children:xe})}const Ft=()=>{const A=$c();return{id:A.id,editor:Rt,transformation:A,name:A.name,description:A.description,state:gt.pn.beta,help:Re(A.id).helperDocs,imageDark:wc,imageLight:Vc}},At=()=>[Fs(),en(),jr(),Fn(),nt(),Pl(),ul(),jo(),Jr(),So(),oo(),Zo(),pi(),si(),ll(),Tr(),Hn(),na(),dr(),Kc(),Ti(),lc(),Tt(),sl(),gl(),Er(),zo(),we(),...q.$.featureToggles.formatString?[Va()]:[],...q.$.featureToggles.groupToNestedTableTransformation?[tl()]:[],ur(),Ft(),Al()];var Qt=e(26305),Xt=e(12354),Zt=e(1503),tn=e(35254),pn=e(71468),bn=e(54148),vn=e(27489),_n=e(72296),ua=e(36303),$a=e(15245),ba=e(77345),ha=e(28105),za=e(13791),ys=e(45776),ts=e(21234);const Is=A=>`grafana/dynamic/nav-landing-page/nav-id-${A}/v1`;function la({navId:A,header:S}){const{node:Z}=(0,ys.C)(A),ce=(0,Pt.of)(Vn),he=Z.children?.filter(Ce=>!Ce.hideFromTabs),{components:ve,isLoading:xe}=(0,G.f)({extensionPointId:Is(Z.id??"")});return xe?null:(0,L.jsx)(za.Y,{navId:Z.id,children:(0,L.jsx)(za.Y.Contents,{children:ve?.length>0?ve.map((Ce,je)=>(0,L.jsx)(Ce,{node:Z},je)):(0,L.jsxs)("div",{className:ce.content,children:[S,he&&he.length>0&&(0,L.jsx)("section",{className:ce.grid,children:he?.map(Ce=>(0,L.jsx)(ts.I,{description:Ce.subTitle,text:Ce.text,url:Ce.url??""},Ce.id))})]})})})}const Vn=A=>({content:(0,Je.css)({display:"flex",flexDirection:"column",gap:A.spacing(2)}),grid:(0,Je.css)({display:"grid",gap:A.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:A.spacing(2,0)})});var Da=e(86678),qt=e(15130),fa=e(49785),La=e(62061),xa=e(73427),ln=e(11257),Qa=e(96221),Ma=e(52763),Ds=e(74267),Us=e(90909),ir=e(87766),Zs=e(27838);const Li={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"},qs=({queryParams:A})=>{const S=(0,Ma.wA)(),Z=(0,Ma.d4)(Et=>Et.ldap.connectionInfo),ce=(0,Ma.d4)(Et=>Et.ldap.user),he=(0,Ma.d4)(Et=>Et.ldap.syncInfo),ve=(0,Ma.d4)(Et=>Et.ldap.userError),xe=(0,Ma.d4)(Et=>Et.ldap.ldapError),[Ce,je]=(0,u.useState)(!0),{register:_e,handleSubmit:Xe}=(0,fa.mN)(),et=(0,u.useCallback)(async Et=>S((0,Ds.Kg)(Et)),[S]);(0,u.useEffect)(()=>{const Et=async()=>Promise.all([S((0,Ds.JI)()),S((0,Ds.pm)())]);async function It(){await S((0,Ds.Jc)()),await Et(),A.username&&await et(A.username),je(!1)}It()},[S,et,A]);const dt=({username:Et})=>{Et&&et(Et)},vt=()=>{S((0,Ds.DX)())},lt=xa.TP.hasPermission(ln.w.LDAPUsersRead);return(0,L.jsx)(za.Y,{navId:"authentication",pageNav:Li,children:(0,L.jsx)(za.Y.Contents,{isLoading:Ce,children:(0,L.jsxs)(dn.B,{direction:"column",gap:4,children:[xe&&xe.title&&(0,L.jsx)(vs.F,{title:xe.title,severity:Qa.Qd.Error,children:xe.body}),(0,L.jsx)(Us.o,{ldapConnectionInfo:Z}),(0,La.a)("ldapsync")&&he&&(0,L.jsx)(ir.$,{ldapSyncInfo:he}),lt&&(0,L.jsxs)("section",{children:[(0,L.jsx)("h3",{children:(0,L.jsx)(f.x6,{i18nKey:"admin.ldap.test-mapping-heading",children:"Test user mapping"})}),(0,L.jsx)("form",{onSubmit:Xe(dt),children:(0,L.jsx)(qo.D,{label:(0,f.t)("admin.ldap-page.label-username","Username"),children:(0,L.jsx)(Pa.p,{..._e("username",{required:!0}),width:34,id:"username",type:"text",defaultValue:A.username,addonAfter:(0,L.jsx)(me.$n,{variant:"primary",type:"submit",children:(0,L.jsx)(f.x6,{i18nKey:"admin.ldap.test-mapping-run-button",children:"Run"})})})})}),ve&&ve.title&&(0,L.jsx)(vs.F,{title:ve.title,severity:Qa.Qd.Error,onRemove:vt,children:ve.body}),ce&&(0,L.jsx)(Zs.H,{ldapUser:ce})]})]})})})},Pn=A=>(0,u.lazy)(A);var cs=e(76070),xs=e(66513),Ns=e(88114),Qs=e(17349),er=e(74869),_a=e(54);function yo(A=le.$W){const S=[{path:"/alerting",component:wa(()=>Promise.all([e.e(1419),e.e(3236)]).then(e.bind(e,81168)))},{path:"/alerting/home",component:wa(()=>Promise.all([e.e(1419),e.e(3236)]).then(e.bind(e,81168)))},{path:"/alerting/list",roles:(0,_a.C0)([ln.w.AlertingRuleRead,ln.w.AlertingRuleExternalRead]),component:wa(()=>Promise.all([e.e(8864),e.e(4514),e.e(3511)]).then(e.bind(e,74514)))},{path:"/alerting/routes",roles:(0,_a.C0)([ln.w.AlertingNotificationsRead,ln.w.AlertingNotificationsExternalRead,...Ns.rw,...Ns.nv,...xs.xK,...xs.Zr]),component:wa(()=>Promise.all([e.e(3217),e.e(1909)]).then(e.bind(e,56366)))},{path:"/alerting/routes/mute-timing/new",roles:(0,_a.C0)([ln.w.AlertingNotificationsWrite,ln.w.AlertingNotificationsExternalWrite,...xs.Zr]),component:wa(()=>Promise.all([e.e(3192),e.e(8302)]).then(e.bind(e,35388)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,_a.C0)([ln.w.AlertingNotificationsWrite,ln.w.AlertingNotificationsExternalWrite,...xs.xK,...xs.Zr]),component:wa(()=>Promise.all([e.e(3192),e.e(558)]).then(e.bind(e,9334)))},{path:"/alerting/silences",roles:(0,_a.C0)([ln.w.AlertingInstanceRead,ln.w.AlertingInstancesExternalRead,ln.w.AlertingSilenceRead]),component:wa(()=>e.e(1668).then(e.bind(e,46627)))},{path:"/alerting/silence/new",roles:(0,_a.C0)([ln.w.AlertingInstanceCreate,ln.w.AlertingInstancesExternalWrite,ln.w.AlertingSilenceCreate,ln.w.AlertingSilenceUpdate]),component:wa(()=>e.e(1649).then(e.bind(e,29668)))},{path:"/alerting/silence/:id/edit",component:wa(()=>Promise.resolve().then(e.bind(e,24158)))},{path:"/alerting/notifications",roles:(0,_a.C0)([ln.w.AlertingNotificationsRead,ln.w.AlertingNotificationsExternalRead,...cs.w6,...Qs.X]),component:wa(()=>e.e(4312).then(e.bind(e,46787)))},{path:"/alerting/notifications/receivers/new",roles:(0,_a.C0)([ln.w.AlertingNotificationsRead,ln.w.AlertingNotificationsExternalRead,...cs.w6]),component:wa(()=>Promise.all([e.e(4312),e.e(7246),e.e(9292),e.e(6315),e.e(8622),e.e(3167)]).then(e.bind(e,15274)))},{path:"/alerting/notifications/receivers/:name/edit",roles:(0,_a.C0)([ln.w.AlertingNotificationsWrite,ln.w.AlertingNotificationsExternalWrite,ln.w.AlertingNotificationsRead,ln.w.AlertingNotificationsExternalRead,...cs.w6]),component:wa(()=>Promise.all([e.e(4312),e.e(7246),e.e(9292),e.e(6315),e.e(8622),e.e(6877)]).then(e.bind(e,29617)))},{path:"/alerting/notifications/templates/*",roles:(0,_a.C0)([ln.w.AlertingNotificationsRead,ln.w.AlertingNotificationsExternalRead,...Qs.X]),component:wa(()=>Promise.all([e.e(4312),e.e(7246),e.e(9292),e.e(9224)]).then(e.bind(e,7070)))},{path:"/alerting/notifications/global-config",roles:(0,_a.C0)([ln.w.AlertingNotificationsWrite,ln.w.AlertingNotificationsExternalWrite]),component:wa(()=>Promise.all([e.e(4312),e.e(7246),e.e(9292),e.e(6315),e.e(8504)]).then(e.bind(e,19644)))},{path:"/alerting/groups/",roles:(0,_a.C0)([ln.w.AlertingInstanceRead,ln.w.AlertingInstancesExternalRead]),component:wa(()=>e.e(8427).then(e.bind(e,62950)))},{path:"/alerting/history/",roles:(0,_a.C0)([ln.w.AlertingRuleRead]),component:wa(()=>Promise.all([e.e(8706),e.e(3605),e.e(8932),e.e(44)]).then(e.bind(e,31542)))},{path:"/alerting/recently-deleted/",roles:()=>["Admin"],component:(0,er.f2)()?wa(()=>e.e(3734).then(e.bind(e,75174))):()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/alerting/list"})},{path:"/alerting/import-datasource-managed-rules",roles:(0,_a.C0)([ln.w.AlertingRuleCreate,ln.w.AlertingProvisioningSetStatus]),component:le.$W.featureToggles.alertingMigrationUI?wa(()=>e.e(9886).then(e.bind(e,45097))):()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/alerting/list"})},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,_a.C0)([ln.w.AlertingRuleCreate,ln.w.AlertingRuleExternalWrite]),component:wa(()=>Promise.all([e.e(7246),e.e(4656),e.e(3217),e.e(4009)]).then(e.bind(e,23878)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,_a.C0)([ln.w.AlertingRuleUpdate,ln.w.AlertingRuleExternalWrite]),component:wa(()=>Promise.all([e.e(7246),e.e(4656),e.e(3217),e.e(4009)]).then(e.bind(e,23878)))},{path:"/alerting/:id/modify-export",pageClass:"page-alerting",roles:(0,_a.C0)([ln.w.AlertingRuleRead]),component:wa(()=>Promise.all([e.e(7246),e.e(4656),e.e(3217),e.e(4009)]).then(e.bind(e,28124)))},{path:"/alerting/export-new-rule",pageClass:"page-alerting",roles:(0,_a.C0)([ln.w.AlertingRuleRead]),component:wa(()=>Promise.all([e.e(7246),e.e(4656),e.e(3217),e.e(4009)]).then(e.bind(e,87144)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,_a.C0)([ln.w.AlertingRuleRead,ln.w.AlertingRuleExternalRead]),component:wa(()=>Promise.resolve().then(e.bind(e,28390)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,_a.C0)([ln.w.AlertingRuleRead,ln.w.AlertingRuleExternalRead]),component:wa(()=>e.e(5516).then(e.bind(e,15102)))},{path:"/alerting/:dataSourceUid/namespaces/:namespaceId/groups/:groupName/view",pageClass:"page-alerting",roles:(0,_a.C0)([ln.w.AlertingRuleRead,ln.w.AlertingRuleExternalRead]),component:wa(()=>Promise.all([e.e(4162),e.e(8864),e.e(3196)]).then(e.bind(e,12003)))},{path:"/alerting/:dataSourceUid/namespaces/:namespaceId/groups/:groupName/edit",pageClass:"page-alerting",roles:(0,_a.C0)([ln.w.AlertingRuleRead,ln.w.AlertingRuleExternalRead]),component:wa(()=>Promise.all([e.e(4656),e.e(6102)]).then(e.bind(e,56638)))},{path:"/alerting/admin",roles:()=>["Admin"],component:()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/alerting/admin/alertmanager"})},{path:"/alerting/admin/alertmanager",roles:()=>["Admin"],component:wa(()=>e.e(9438).then(e.bind(e,95627)))}];return A.featureToggles.alertingTriage&&S.push({path:"/alerting/alerts",roles:(0,_a.C0)([ln.w.AlertingRuleRead,ln.w.AlertingRuleExternalRead]),component:wa(()=>Promise.all([e.e(8706),e.e(3605),e.e(8932),e.e(8056),e.e(1419),e.e(1721)]).then(e.bind(e,45914)))}),S}function wa(A){const S=()=>e.e(9029).then(e.bind(e,31642));return Pn(le.$W.unifiedAlertingEnabled?A:S)}var wr=e(77256),tr=e(26437);const uc=A=>({alertContent:(0,Je.css)({display:"flex",flexDirection:"row",padding:0,justifyContent:"space-between",alignItems:"center"}),alertParagraph:(0,Je.css)({margin:A.spacing(0,1,0,0),lineHeight:A.spacing(A.components.height.sm)})});function hc(){const A=(0,Pt.of)(uc),S=xa.TP.hasPermission(ln.w.DataSourcesCreate)||xa.TP.hasPermission(ln.w.DataSourcesWrite),[Z,ce]=(0,u.useState)(S);return Z?(0,L.jsx)(vs.F,{severity:"info",title:"",onRemove:()=>ce(!1),children:(0,L.jsxs)("div",{className:A.alertContent,children:[(0,L.jsx)("p",{className:A.alertParagraph,children:(0,L.jsx)(f.x6,{i18nKey:"connections.connections-redirect-notice.body",children:"Data sources have a new home! You can discover new data sources or manage existing ones in the Connections page, accessible from the main menu."})}),(0,L.jsx)(me.z9,{"aria-label":(0,f.t)("connections.connections-redirect-notice.aria-label-link-to-connections","Link to Connections"),icon:"arrow-right",href:tr.b.DataSources,fill:"text",children:(0,L.jsx)(f.x6,{i18nKey:"connections.connections-redirect-notice.go-to-connections",children:"Go to connections"})})]})}):(0,L.jsx)(L.Fragment,{})}function xo(){return[{path:`/${tr.q}/*`,component:Pn(()=>Promise.all([e.e(3326),e.e(5742),e.e(468),e.e(7539),e.e(2154)]).then(e.bind(e,47539)))}]}var Eo=e(83203),ji=e(37946),If=e(20962),fc=e(52161),Kl=(A=>(A.ViewIRMMainPage="grafana_irm_configuration_tracker_main_page_view",A.OpenEssentials="grafana_irm_configuration_tracker_essentials_open",A.CloseEssentials="grafana_irm_configuration_tracker_essentials_closed",A.ClickDataSources="grafana_irm_configuration_tracker_data_sources_clicked",A))(Kl||{});function pc(A,S){(0,vn.rR)(A,{...S})}var Af=e(97507),Lf=e(46202),ds=e(182),zc=e(92367),jf=e(70327),Bf=e(6135),Uf=e(44109);function Nf(){const[A,{data:S,isLoading:Z}]=jf.hK.endpoints.rulerRules.useLazyQuery({refetchOnFocus:!0,refetchOnReconnect:!0}),{dsFeatures:ce,isLoadingDsFeatures:he}=(0,Uf.O3)(fc.hY),ve=ce?.rulerConfig;return(0,u.useEffect)(()=>{ve&&A({rulerConfig:ve})},[ve,A]),{isDone:(S?Object.entries(S).flatMap(([je,_e])=>_e.flatMap(Xe=>Xe.rules)):[]).length>0,isLoading:Z||he}}function eu(A){return A.some(S=>S.grafana_managed_receiver_configs?.some(Z=>Z.type===Bf.J4.OnCall))}const Wf="<example@email.com>";function Ff(A,S){const Z=S.find(ce=>ce.name===A);return Z?Z.grafana_managed_receiver_configs?.some(ce=>ce.type==="email"?ce.settings?.addresses!==Wf:!0):!1}var wl=e(5709);const Kf=A=>`/api/plugins/${(0,ds.Wx)()}/resources${A}`,wf=wl.H.injectEndpoints({endpoints:A=>({getIncidentsPluginConfig:A.query({query:()=>({url:Kf("/api/ConfigurationTrackerService.GetConfigurationTracker"),data:{},method:"POST",showErrorAlert:!1})})})});var Gc=e(3986);function Vf(){const{installed:A,loading:S}=(0,Gc._)((0,ds.Wx)()),{data:Z,isLoading:ce}=wf.endpoints.getIncidentsPluginConfig.useQuery();return{isInstalled:A??!1,isChatOpsInstalled:Z?.isChatOpsInstalled??!1,isIncidentCreated:Z?.isIncidentCreated??!1,isLoading:S||ce}}var tu=e(77788);function $f(){const{installed:A}=(0,Gc._)((0,ds.BO)()),{data:S}=tu.WG.endpoints.grafanaOnCallIntegrations.useQuery(void 0,{skip:!A,refetchOnFocus:!0,refetchOnReconnect:!0,refetchOnMountOrArgChange:!0});return S??[]}function zf(){const{data:A,isLoading:S}=tu.WG.endpoints.onCallConfigChecks.useQuery(void 0,{refetchOnFocus:!0,refetchOnReconnect:!0,refetchOnMountOrArgChange:!0});return{isLoading:S,onCallConfigChecks:A??{is_chatops_connected:!1,is_integration_chatops_connected:!1}}}function Gf(){return $f().map(S=>({label:S.display_name,value:S.value}))}function Hf(){const{onCallConfigChecks:{is_chatops_connected:A,is_integration_chatops_connected:S},isLoading:Z}=zf();return{is_chatops_connected:A,is_integration_chatops_connected:S,isLoading:Z}}var nu=e(2869);const Qf=`/api/plugins/${nu.W.Slo}/resources/v1`,_f=wl.H.injectEndpoints({endpoints:A=>({getSlos:A.query({query:()=>({url:`${Qf}/slo`,showErrorAlert:!1}),providesTags:["GrafanaSlo"]})})});function kf(){const{installed:A}=(0,Gc._)(nu.W.Slo),{data:S,isLoading:Z}=_f.endpoints.getSlos.useQuery(void 0,{skip:!A,refetchOnFocus:!0,refetchOnReconnect:!0,refetchOnMountOrArgChange:!0});return{isLoading:Z,hasSlo:!!S?.slos.length,hasSloWithAlert:!!S?.slos?.some(ce=>ce.alerting)}}function Yf(){const{contactPoints:A,isLoading:S}=(0,Af.Z3)(),{data:Z,isLoading:ce}=(0,Lf.yV)({alertmanager:fc.hY}),he=Z?.[0].receiver||"",{isDone:ve,isLoading:xe}=Nf(),{isChatOpsInstalled:Ce,isInstalled:je,isLoading:_e}=Vf(),Xe=Gf(),{is_chatops_connected:et,is_integration_chatops_connected:dt,isLoading:vt}=Hf(),{hasSlo:lt,hasSloWithAlert:Et,isLoading:It}=kf();return{alerting:{contactPoints:A,defaultContactpoint:he,isCreateAlertRuleDone:ve},incidents:{isChatOpsInstalled:Ce,isIncidentsInstalled:je},onCall:{onCallOptions:Xe,is_chatops_connected:et,is_integration_chatops_connected:dt},slo:{hasSlo:lt,hasSloWithAlert:Et},isLoading:S||ce||xe||_e||vt||It}}function Jf(){const{alerting:{contactPoints:A,defaultContactpoint:S,isCreateAlertRuleDone:Z},incidents:{isChatOpsInstalled:ce,isIncidentsInstalled:he},onCall:{onCallOptions:ve,is_chatops_connected:xe,is_integration_chatops_connected:Ce},slo:{hasSlo:je,hasSloWithAlert:_e},isLoading:Xe}=Yf();function et(It,_t){const rn=(0,zc.G)(`${_t} + ${It}`,{returnTo:window.location.pathname+window.location.search});M.Ny.push(rn)}function dt(){let It=[{title:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.steps.title.update-default-contact-point","Update default contact point"),description:"Update the default contact point to a method other than the example email address.",button:{type:"openLink",urlLink:{url:"/alerting/notifications",queryParams:{search:S,alertmanager:"grafana"}},label:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.steps.label.edit","Edit"),labelOnDone:"View",urlLinkOnDone:{url:"/alerting/notifications"}},done:Ff(S,A)}];return(0,ds.ZP)()||(It=[...It,{title:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.title.connect-alerting-to-on-call","Connect alerting to OnCall"),description:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.description.create-on-call-integration-alerting-contact-point","Create an OnCall integration for an alerting contact point."),button:{type:"openLink",urlLink:{url:"/alerting/notifications/receivers/new"},label:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.label.connect","Connect"),urlLinkOnDone:{url:"/alerting/notifications"},labelOnDone:"View"},done:eu(A)}]),It=[...It,{title:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.title.create-alert-rule","Create alert rule"),description:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.description.create-alert-monitor-system","Create an alert rule to monitor your system."),button:{type:"openLink",urlLink:{url:"/alerting/new"},label:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.label.create","Create"),urlLinkOnDone:{url:"/alerting/list"},labelOnDone:"View"},done:Z},{title:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.title.create-slo","Create SLO"),description:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.description.create-slos-to-monitor-your-service","Create SLOs to monitor your service."),button:{type:"openLink",urlLink:{url:"/a/grafana-slo-app/wizard/new"},label:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.label.create","Create"),urlLinkOnDone:{url:"/a/grafana-slo-app/manage-slos"},labelOnDone:"View"},done:je},{title:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.title.enable-slo-alerting","Enable SLO alerting"),description:"Configure SLO alerting to receive notifications when your SLOs are breached.",button:{type:"openLink",urlLink:{queryParams:{alertsEnabled:"disabled"},url:"/a/grafana-slo-app/manage-slos"},label:(0,f.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.label.enable","Enable"),urlLinkOnDone:{queryParams:{alertsEnabled:"enabled"},url:"/a/grafana-slo-app/manage-slos"},labelOnDone:"View"},done:_e}],It}const vt={sections:[{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.detect","Detect"),description:(0,f.t)("gops.use-get-essentials-configuration.essential-content.description.configure-grafana-alerting","Configure Grafana Alerting"),steps:dt()},{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.respond","Respond"),description:(0,ds.ZP)()?"Configure IRM":"Configure OnCall and Incident",steps:(0,ds.ZP)()?[{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.connect-alerting-to-irm","Connect alerting to IRM"),description:(0,f.t)("gops.use-get-essentials-configuration.essential-content.description.create-integration-alerting-contact-point","Create an IRM integration for an alerting contact point."),button:{type:"openLink",urlLink:{url:"/alerting/notifications/receivers/new"},label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.connect","Connect"),urlLinkOnDone:{url:"/alerting/notifications"},labelOnDone:"View"},done:eu(A)},{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.connect-irm-to-your-slack-workspace","Connect IRM to your Slack workspace"),description:"Receive alerts and oncall notifications, or automatically create an incident channel and manage incidents directly within your chat environment.",button:{type:"openLink",urlLink:{url:`/a/${(0,ds.Wx)()}/integrations/apps/grate.irm.slack`},label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.connect","Connect"),urlLinkOnDone:{url:`/a/${(0,ds.Wx)()}/integrations/apps/grate.irm.slack`},labelOnDone:"View"},done:ce},{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.add-slack-notifications-to-irm-integrations","Add Slack notifications to IRM integrations"),description:(0,f.t)("gops.use-get-essentials-configuration.essential-content.description.select-chat-ops-channels-to-route-notifications","Select ChatOps channels to route notifications"),button:{type:"openLink",urlLink:{url:`/a/${(0,ds.BO)()}/integrations/`},label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.add","Add"),urlLinkOnDone:{url:`/a/${(0,ds.BO)()}/integrations/`},labelOnDone:"View"},done:Ce}]:[{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.initialize-incident-plugin","Initialize Incident plugin"),description:(0,f.t)("gops.use-get-essentials-configuration.essential-content.description.initialize-incident-plugin-declare-manage-incidents","Initialize the Incident plugin to declare and manage incidents."),button:{type:"openLink",urlLink:{url:`/a/${(0,ds.Wx)()}/walkthrough/generate-key`},label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.initialize","Initialize"),urlLinkOnDone:{url:`/a/${(0,ds.Wx)()}`},labelOnDone:"View"},done:he},{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.connect-your-messaging-workspace-to-on-call","Connect your Messaging workspace to OnCall"),description:(0,f.t)("gops.use-get-essentials-configuration.essential-content.description.receive-alerts-oncall-notifications-within-environment","Receive alerts and oncall notifications within your chat environment."),button:{type:"openLink",urlLink:{url:`/a/${(0,ds.BO)()}/settings`,queryParams:{tab:"ChatOps",chatOpsTab:"Slack"}},label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.connect","Connect"),urlLinkOnDone:{url:`/a/${(0,ds.BO)()}/settings`,queryParams:{tab:"ChatOps"}},labelOnDone:"View"},done:xe},{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.connect-your-messaging-workspace-to-incident","Connect your Messaging workspace to Incident"),description:"Automatically create an incident channel and manage incidents directly within your chat environment.",button:{type:"openLink",urlLink:{url:`/a/${(0,ds.Wx)()}/integrations/grate.slack`},label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.connect","Connect"),urlLinkOnDone:{url:`/a/${(0,ds.Wx)()}/integrations`}},done:ce},{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.messaging-workspace-channel-on-call-integration","Add Messaging workspace channel to OnCall Integration"),description:(0,f.t)("gops.use-get-essentials-configuration.essential-content.description.select-chat-ops-channels-to-route-notifications","Select ChatOps channels to route notifications"),button:{type:"openLink",urlLink:{url:`/a/${(0,ds.BO)()}/integrations/`},label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.add","Add"),urlLinkOnDone:{url:`/a/${(0,ds.BO)()}/integrations/`},labelOnDone:"View"},done:Ce}]},{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.test-your-configuration","Test your configuration"),description:"",steps:[{title:(0,ds.ZP)()?"Send test alert":"Send OnCall demo alert via Alerting integration",description:"In the integration page, click Send demo alert, to review your notification",button:{type:"dropDown",label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.select-integration","Select integration"),options:ve,onClickOption:It=>et(It,`/a/${(0,ds.BO)()}/integrations/`),stepNotAvailableText:"No integrations available"}},{title:(0,f.t)("gops.use-get-essentials-configuration.essential-content.title.create-incident-drill","Create Incident drill"),description:(0,f.t)("gops.use-get-essentials-configuration.essential-content.description.practice-solving-an-incident","Practice solving an Incident"),button:{type:"openLink",urlLink:{url:`/a/${(0,ds.Wx)()}`,queryParams:{declare:"new",drill:"1"}},label:(0,f.t)("gops.use-get-essentials-configuration.essential-content.label.start-drill","Start drill")}}]}]},{stepsDone:lt,totalStepsToDo:Et}=vt.sections.reduce((It,_t)=>{const rn=_t.steps.filter(cn=>cn.done).length,Mn=_t.steps.reduce((cn,Cn)=>Cn.done!==void 0?cn+1:cn,0);return{stepsDone:It.stepsDone+rn,totalStepsToDo:It.totalStepsToDo+Mn}},{stepsDone:0,totalStepsToDo:0});return{essentialContent:vt,stepsDone:lt,totalStepsToDo:Et,isLoading:Xe}}const Xf=({dataSourceConfigurationData:{dataSourceCompatibleWithAlerting:A},essentialsConfigurationData:{stepsDone:S,totalStepsToDo:Z}})=>(0,u.useMemo)(()=>{function ce(){const he=A?"You have connected a datasource.":"Connect at least one data source to start receiving data",ve=A?"View":"Connect";return{id:Qc.CONNECT_DATASOURCE,title:(0,f.t)("gops.use-get-configuration-for-ui.get-connect-data-source-configuration.title.connect-data-source","Connect data source"),description:he,actionButtonTitle:ve,isDone:A}}return[ce(),{id:Qc.ESSENTIALS,title:(0,f.t)("gops.use-get-configuration-for-ui.title.essentials","Essentials"),titleIcon:"star",description:"Set up the necessary features to start using Grafana IRM workflows",actionButtonTitle:S===Z?"View":"Configure",stepsDone:S,totalStepsToDo:Z}]},[A,S,Z]);var au=e(6975);function su({stepsDone:A,totalStepsToDo:S}){const Z=(0,Pt.of)(Zf);return S===0?null:(0,L.jsx)("div",{className:Z.containerStyles,role:"progressbar","aria-valuenow":A,"aria-valuemax":S,children:(0,L.jsx)("div",{className:Z.fillerStyles(A/S*100)})})}function ru({stepsDone:A,totalStepsToDo:S}){return(0,L.jsx)("span",{children:(0,L.jsxs)(f.x6,{i18nKey:"gops.progress-bar.steps-status",values:{stepsDone:A},children:[(0,L.jsx)(Ya.E,{color:"success",children:"{{stepsDone}}"})," of ",{totalStepsToDo:S}]})})}function Zf(A){return{containerStyles:(0,Je.css)({height:A.spacing(2),borderRadius:A.shape.radius.pill,backgroundColor:A.colors.border.weak,flex:"auto"}),fillerStyles:S=>(0,Je.css)({height:"100%",width:`${S}%`,backgroundColor:A.colors.success.main,borderRadius:A.shape.radius.pill,textAlign:"right"})}}function qf({config:A,handleActionClick:S,isLoading:Z=!1}){const ce=(0,Pt.of)(ep);return(0,L.jsx)(dn.B,{direction:"column",gap:1,justifyContent:"space-around",children:(0,L.jsxs)("div",{className:ce.cardContent,children:[(0,L.jsxs)(dn.B,{direction:"column",gap:1,children:[(0,L.jsxs)(dn.B,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:1,children:[(0,L.jsx)("div",{className:"fs-unmask",children:(0,L.jsxs)(dn.B,{direction:"row",gap:1,alignItems:"center",children:[A.title,A.titleIcon&&(0,L.jsx)(Ha.I,{name:A.titleIcon}),A.isDone&&!Z&&(0,L.jsx)(Ha.I,{name:"check-circle",color:"green",size:"lg"})]})}),A.stepsDone&&A.totalStepsToDo&&!Z&&(0,L.jsx)("div",{className:"fs-unmask",children:(0,L.jsxs)(dn.B,{direction:"row",gap:.5,children:[(0,L.jsx)(ru,{stepsDone:A.stepsDone,totalStepsToDo:A.totalStepsToDo}),(0,L.jsx)(f.x6,{i18nKey:"configuration-tracker.config-card.complete",children:"complete"})]})})]}),(0,L.jsxs)(dn.B,{direction:"column",children:[Z?(0,L.jsx)(au._,{text:(0,f.t)("gops.config-card.text-loading-configuration","Loading configuration....")}):A.description,!Z&&A.stepsDone&&A.totalStepsToDo&&(0,L.jsx)(su,{stepsDone:A.stepsDone,totalStepsToDo:A.totalStepsToDo})]})]}),(0,L.jsx)(dn.B,{direction:"row",gap:1,justifyContent:"flex-start",alignItems:"flex-end",children:(0,L.jsx)(me.$n,{variant:"secondary",onClick:()=>S(A.id,A.isDone),className:"fs-unmask",children:A.actionButtonTitle})})]})})}const ep=A=>({cardTitle:(0,Je.css)({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"}),cardContent:(0,Je.css)({background:A.colors.background.secondary,padding:A.spacing(2),borderRadius:A.shape.radius.default,height:"100%",gap:A.spacing(1),display:"flex",flexDirection:"column",justifyContent:"space-between"})});var Vl=e(8207),Hc=e(45967),$l=e(88559),Vr=e(87063);function tp({onClose:A,essentialsConfig:S,stepsDone:Z,totalStepsToDo:ce}){return(0,L.jsx)(Vl._,{title:(0,f.t)("gops.essentials.title-essentials","Essentials"),subtitle:"Complete the following configuration tasks",onClose:A,children:(0,L.jsx)(np,{essentialContent:S,stepsDone:Z,totalStepsToDo:ce})})}function np({essentialContent:A,stepsDone:S,totalStepsToDo:Z}){return(0,L.jsxs)(dn.B,{direction:"column",gap:1,children:[(0,L.jsx)(lp,{stepsDone:S,totalStepsToDo:Z}),A.sections.map(ce=>(0,L.jsx)(ap,{section:ce},ce.title))]})}function ap({section:A}){const S=(0,Pt.of)(cp);return(0,L.jsxs)("div",{className:S.wrapper,children:[(0,L.jsx)(Ya.E,{element:"h4",children:(0,L.jsx)("span",{className:"fs-unmask",children:A.title})}),(0,L.jsx)(Ya.E,{color:"secondary",children:(0,L.jsx)("span",{className:"fs-unmask",children:A.description})}),(0,L.jsx)(dn.B,{direction:"column",gap:2,children:A.steps.map((Z,ce)=>(0,L.jsx)(rp,{step:Z},ce))})]})}function sp({done:A}){return A?(0,L.jsx)(Ha.I,{name:"check-circle",color:"green","data-testid":"checked-step",className:"fs-unmask"}):(0,L.jsx)(Ha.I,{name:"circle","data-testid":"unckecked-step",className:"fs-unmask"})}function rp({step:A}){return(0,L.jsxs)(dn.B,{direction:"row",justifyContent:"space-between","data-testid":"step",children:[(0,L.jsxs)(dn.B,{direction:"row",alignItems:"center",children:[A.done!==void 0&&(0,L.jsx)(sp,{done:A.done}),(0,L.jsx)(Ya.E,{variant:"body",children:(0,L.jsx)("span",{className:"fs-unmask",children:A.title})}),(0,L.jsx)(Hc.m,{content:A.description,placement:"right",children:(0,L.jsx)(Ha.I,{name:"question-circle"})})]}),(0,L.jsx)(ip,{...A.button,done:A.done,"data-testid":"step-button"})]})}function op(A){const{urlLink:S,label:Z,urlLinkOnDone:ce,labelOnDone:he,done:ve}=A,xe=S?.url?(0,zc.G)(S.url,{returnTo:window.location.pathname+window.location.search,...S.queryParams}):"",Ce=ce?.url?(0,zc.G)(ce.url,{returnTo:window.location.pathname+window.location.search,...ce.queryParams}):"",je=ve?Ce:xe;return(0,L.jsx)(me.z9,{href:je,variant:"secondary",className:"fs-unmask",children:ve?he??Z:Z})}function ip({type:A,urlLink:S,urlLinkOnDone:Z,label:ce,labelOnDone:he,options:ve,onClickOption:xe,done:Ce,stepNotAvailableText:je}){switch(A){case"openLink":return(0,L.jsx)(op,{urlLink:S,label:ce,urlLinkOnDone:Z,labelOnDone:he,done:Ce});case"dropDown":return ve?.length?(0,L.jsx)($l.m,{overlay:(0,L.jsx)(Vr.W,{className:"fs-unmask",children:ve?.map(_e=>(0,L.jsx)(Vr.W.Item,{label:_e.label,className:"fs-unmask",onClick:()=>{xe?.(_e.value)}},_e.value))}),children:(0,L.jsxs)(me.$n,{variant:"secondary",size:"md",className:"fs-unmask",children:[ce,(0,L.jsx)(Ha.I,{name:"angle-down"})]})}):(0,L.jsxs)(Ya.E,{children:[je??"No options available"," "]})}}function lp({stepsDone:A,totalStepsToDo:S}){return(0,L.jsxs)(dn.B,{direction:"row",gap:1,alignItems:"center",children:[(0,L.jsx)(f.x6,{i18nKey:"gops.progress-status.your-progress",children:"Your progress"}),(0,L.jsx)(su,{stepsDone:A,totalStepsToDo:S}),(0,L.jsx)(ru,{stepsDone:A,totalStepsToDo:S})]})}const cp=A=>({wrapper:(0,Je.css)({margin:A.spacing(2,0),padding:A.spacing(2),border:`1px solid ${A.colors.border.medium}`,borderRadius:A.shape.radius.default,display:"flex",flexDirection:"column",gap:A.spacing(2)})});var Qc=(A=>(A[A.CONNECT_DATASOURCE=0]="CONNECT_DATASOURCE",A[A.ESSENTIALS=1]="ESSENTIALS",A))(Qc||{});function dp(){return{dataSourceCompatibleWithAlerting:!!(0,fc.k5)()}}function up(){const A=(0,Pt.of)(hp),S=(0,bn.Zp)(),Z=dp(),ce=Jf(),he=Xf({dataSourceConfigurationData:Z,essentialsConfigurationData:ce});(0,u.useEffect)(()=>{pc(Kl.ViewIRMMainPage,{essentialStepsDone:0,essentialStepsToDo:0,dataSourceCompatibleWithAlerting:Z.dataSourceCompatibleWithAlerting})},[Z.dataSourceCompatibleWithAlerting]);const[ve,xe]=(0,If.l)(),Ce=ve.get("essentials")==="open",je=(Xe,et)=>{switch(pc(Kl.ClickDataSources,{essentialStepsDone:ce.stepsDone,essentialStepsToDo:ce.totalStepsToDo,dataSourceCompatibleWithAlerting:Z.dataSourceCompatibleWithAlerting}),Xe){case 0:S(et?ji.I.List:ji.I.New);break;case 1:xe({essentials:"open"}),pc(Kl.OpenEssentials,{essentialStepsDone:ce.stepsDone,essentialStepsToDo:ce.totalStepsToDo,dataSourceCompatibleWithAlerting:Z.dataSourceCompatibleWithAlerting});break;default:return}};function _e(){xe({essentials:void 0}),pc(Kl.CloseEssentials,{essentialStepsDone:ce.stepsDone,essentialStepsToDo:ce.totalStepsToDo,dataSourceCompatibleWithAlerting:Z.dataSourceCompatibleWithAlerting})}return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ya.E,{element:"h4",variant:"h4",children:(0,L.jsx)(f.x6,{i18nKey:"gops.configure-irm.configure",children:"Configure"})}),(0,L.jsxs)("section",{className:A.container,children:[he.map(Xe=>(0,L.jsx)(qf,{config:Xe,handleActionClick:je,isLoading:ce.isLoading},Xe.id)),Ce&&(0,L.jsx)(tp,{onClose:_e,essentialsConfig:ce.essentialContent,stepsDone:ce.stepsDone,totalStepsToDo:ce.totalStepsToDo})]}),(0,L.jsx)(Ya.E,{element:"h4",variant:"h4",children:(0,L.jsx)(f.x6,{i18nKey:"gops.configure-irm.irm-apps",children:"IRM apps"})})]})}const hp=A=>({container:(0,Je.css)({marginBottom:0,display:"grid",gap:A.spacing(3),gridTemplateColumns:" 1fr 1fr"})});var _c=e(13660);const fp=[{path:"/plugins",navId:"plugins",roles:kc([ln.w.PluginsInstall,ln.w.PluginsWrite],["Admin","ServerAdmin"]),routeName:_c.vk.Home,component:Pn(()=>e.e(4519).then(e.bind(e,37761)))},{path:"/plugins/browse",navId:"plugins",roles:kc([ln.w.PluginsInstall,ln.w.PluginsWrite],["Admin","ServerAdmin"]),routeName:_c.vk.Browse,component:Pn(()=>e.e(4519).then(e.bind(e,37761)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:kc([ln.w.PluginsInstall,ln.w.PluginsWrite],["Admin","ServerAdmin"]),routeName:_c.vk.Details,component:Pn(()=>Promise.all([e.e(3326),e.e(5742),e.e(468),e.e(7891)]).then(e.bind(e,31879)))}];function kc(A,S){return()=>A.some(Z=>xa.TP.hasPermission(Z))?[]:S}function pp(){return fp}var mp=e(37168);const ou=[{path:"/profile",component:Pn(()=>Promise.all([e.e(3126),e.e(2472)]).then(e.bind(e,67521)))},{path:"/profile/password",component:Pn(()=>e.e(9996).then(e.bind(e,9996)))},{path:"/profile/select-org",component:Pn(()=>e.e(7430).then(e.bind(e,31830)))},{path:"/profile/notifications",component:Pn(()=>e.e(4140).then(e.bind(e,30946)))}];function gp(A=le.$W){return A.profileEnabled?ou:(0,ie.uniq)(ou.map(Z=>Z.path)).map(Z=>({path:Z,component:Pn(()=>e.e(5173).then(e.bind(e,77267)))}))}var _s=e(6262);const vp=()=>le.$W.publicDashboardsEnabled?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:_s.Z4.Public,component:Pn(()=>e.e(5761).then(e.bind(e,69579)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:_s.Z4.Public,chromeless:!0,component:Pn(()=>Promise.all([e.e(6088),e.e(8856),e.e(7197)]).then(e.bind(e,27787)))}]:[];var yp=e(53247),$r=e(91555);function xp(){return(0,yp.Hv)()?[{path:$r.mL,component:Pn(()=>Promise.all([e.e(886),e.e(2182)]).then(e.bind(e,27080)))},{path:$r.zM,component:Pn(()=>Promise.all([e.e(886),e.e(1037)]).then(e.bind(e,90886)))},{path:`${$r.pd}/:type`,component:Pn(()=>Promise.all([e.e(9571),e.e(252)]).then(e.bind(e,41050)))},{path:$r.mL+"/:name",component:Pn(()=>e.e(6092).then(e.bind(e,43091)))},{path:$r.mL+"/:name/edit",component:Pn(()=>Promise.all([e.e(9571),e.e(8758)]).then(e.bind(e,81583)))},{path:$r.mL+"/:name/file/*",component:Pn(()=>e.e(1954).then(e.bind(e,28682)))},{path:$r.mL+"/:name/history/*",component:Pn(()=>e.e(9898).then(e.bind(e,22192)))},{path:$r.mL+"/:slug/dashboard/preview/*",pageClass:"page-dashboard",routeName:_s.Z4.Provisioning,component:Pn(()=>e.e(8638).then(e.bind(e,21819)))}]:[{path:$r.mL,component:Pn(()=>Promise.all([e.e(886),e.e(1037)]).then(e.bind(e,90886)))}]}const Ep=le.Ay.buildInfo.env==="development",Pp=[];function bp(){return[...(0,mp.X)(),{path:"/",pageClass:"page-dashboard",routeName:_s.Z4.Home,component:Pn(()=>Promise.all([e.e(6088),e.e(7051),e.e(8856),e.e(7080),e.e(9136)]).then(e.bind(e,57080)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:_s.Z4.Normal,component:Pn(()=>Promise.all([e.e(6088),e.e(7051),e.e(8856),e.e(7080),e.e(9136)]).then(e.bind(e,57080)))},{path:"/dashboard/new",roles:()=>qt.TP.evaluatePermission([ln.w.DashboardsCreate]),pageClass:"page-dashboard",routeName:_s.Z4.New,component:Pn(()=>Promise.all([e.e(6088),e.e(7051),e.e(8856),e.e(7080),e.e(2976)]).then(e.bind(e,57080)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>qt.TP.evaluatePermission([ln.w.DashboardsCreate]),component:Pn(()=>Promise.all([e.e(6088),e.e(7051),e.e(8856),e.e(7080),e.e(2976)]).then(e.bind(e,373)))},{path:Eo.g.Template,roles:()=>qt.TP.evaluatePermission([ln.w.DashboardsCreate]),pageClass:"page-dashboard",routeName:_s.Z4.Template,component:Pn(()=>Promise.all([e.e(6088),e.e(7051),e.e(8856),e.e(7080),e.e(2976)]).then(e.bind(e,57080)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:_s.Z4.Normal,component:Pn(()=>Promise.all([e.e(6088),e.e(7051),e.e(8856),e.e(7080),e.e(2976)]).then(e.bind(e,57080)))},{path:"/dashboards/embedding-test",component:Pn(()=>Promise.all([e.e(6088),e.e(7051),e.e(8856),e.e(7080),e.e(2976)]).then(e.bind(e,77437)))},{path:"/d-solo/:uid/:slug?",routeName:_s.Z4.Normal,chromeless:!0,component:Pn(()=>le.Ay.featureToggles.dashboardSceneSolo?e.e(7849).then(e.bind(e,97414)):Promise.all([e.e(6088),e.e(4492)]).then(e.bind(e,49286)))},{path:"/dashboard-solo/:type/:slug",routeName:_s.Z4.Normal,chromeless:!0,component:Pn(()=>le.Ay.featureToggles.dashboardSceneSolo?e.e(7849).then(e.bind(e,97414)):Promise.all([e.e(6088),e.e(4492)]).then(e.bind(e,49286)))},{path:"/dashboard/import",component:Pn(()=>e.e(2550).then(e.bind(e,25650)))},{path:ji.I.List,component:()=>(0,L.jsx)(bn.C5,{replace:!0,to:tr.b.DataSources})},{path:ji.I.Edit,component:Tp},{path:ji.I.Dashboards,component:Cp},{path:ji.I.New,component:()=>(0,L.jsx)(bn.C5,{replace:!0,to:tr.b.DataSourcesNew})},{path:"/datasources/correlations",component:Pn(()=>le.Ay.featureToggles.correlations?e.e(9981).then(e.bind(e,45185)):e.e(8014).then(e.bind(e,29181)))},{path:"/dashboards",component:Pn(()=>Promise.all([e.e(3326),e.e(5742),e.e(3003),e.e(152)]).then(e.bind(e,87832)))},{path:"/dashboards/f/:uid/:slug",component:Pn(()=>Promise.all([e.e(3326),e.e(5742),e.e(3003),e.e(152)]).then(e.bind(e,87832)))},{path:"/dashboards/f/:uid",component:Pn(()=>Promise.all([e.e(3326),e.e(5742),e.e(3003),e.e(152)]).then(e.bind(e,87832)))},{path:"/explore",pageClass:"page-explore",roles:()=>qt.TP.evaluatePermission([ln.w.DataSourcesExplore]),component:Pn(()=>le.Ay.exploreEnabled?Promise.all([e.e(407),e.e(5995),e.e(4814),e.e(8813),e.e(7051),e.e(3474),e.e(3688),e.e(9147),e.e(9604)]).then(e.bind(e,63734)):e.e(4422).then(e.bind(e,89153)))},{path:"/drilldown",component:()=>(0,L.jsx)(la,{navId:"drilldown"})},{path:"/apps",component:()=>(0,L.jsx)(la,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>(0,L.jsx)(la,{navId:"alerts-and-incidents",header:!(0,wr.y$)()&&(0,wr.qc)()||(0,wr.ES)()?(0,L.jsx)(up,{}):void 0})},{path:"/testing-and-synthetics",component:()=>(0,L.jsx)(la,{navId:"testing-and-synthetics"})},{path:"/adaptive-telemetry",component:()=>(0,L.jsx)(la,{navId:"adaptive-telemetry"})},{path:"/monitoring",component:()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/observability"})},{path:"/observability",component:()=>(0,L.jsx)(la,{navId:"observability"})},{path:"/infrastructure",component:()=>(0,L.jsx)(la,{navId:"infrastructure"})},{path:"/frontend",component:()=>(0,L.jsx)(la,{navId:"frontend"})},{path:"/admin/general",component:()=>(0,L.jsx)(la,{navId:"cfg/general"})},{path:"/admin/plugins",component:()=>(0,L.jsx)(la,{navId:"cfg/plugins"})},{path:"/admin/extensions",navId:"extensions",roles:()=>qt.TP.evaluatePermission([ln.w.PluginsInstall,ln.w.PluginsWrite]),component:Ep||le.Ay.featureToggles.enableExtensionsAdminPage?Pn(()=>Promise.all([e.e(8056),e.e(5902)]).then(e.bind(e,58279))):()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/admin"})},{path:"/admin/access",component:()=>(0,L.jsx)(la,{navId:"cfg/access"})},{path:"/org",component:Pn(()=>Promise.all([e.e(3126),e.e(1510)]).then(e.bind(e,73318)))},{path:"/org/new",component:Pn(()=>e.e(7930).then(e.bind(e,45408)))},{path:"/org/users",component:()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/admin/users"})},{path:"/org/users/invite",component:Pn(()=>e.e(7720).then(e.bind(e,65914)))},{path:"/org/serviceaccounts",roles:()=>qt.TP.evaluatePermission([ln.w.ServiceAccountsRead,ln.w.ServiceAccountsCreate]),component:Pn(()=>Promise.all([e.e(265),e.e(6777)]).then(e.bind(e,75955)))},{path:"/org/serviceaccounts/create",component:Pn(()=>Promise.all([e.e(265),e.e(4176)]).then(e.bind(e,41150)))},{path:"/org/serviceaccounts/:id",component:Pn(()=>Promise.all([e.e(265),e.e(6576)]).then(e.bind(e,88468)))},{path:"/org/teams",roles:()=>qt.TP.evaluatePermission([ln.w.ActionTeamsRead,ln.w.ActionTeamsCreate]),component:Pn(()=>Promise.all([e.e(265),e.e(1036)]).then(e.bind(e,34314)))},{path:"/org/teams/new",roles:()=>qt.TP.evaluatePermission([ln.w.ActionTeamsCreate]),component:Pn(()=>Promise.all([e.e(265),e.e(5436)]).then(e.bind(e,84974)))},{path:"/org/teams/edit/:uid/:page?",roles:()=>qt.TP.evaluatePermission([ln.w.ActionTeamsRead,ln.w.ActionTeamsCreate]),component:Pn(()=>Promise.all([e.e(265),e.e(3126),e.e(2212)]).then(e.bind(e,76172)))},{path:"/admin",component:()=>(0,L.jsx)(la,{navId:"cfg",header:(0,L.jsx)(hc,{})})},{path:"/admin/authentication",roles:()=>qt.TP.evaluatePermission([ln.w.SettingsWrite]),component:Pn(()=>e.e(5592).then(e.bind(e,53953)))},{path:"/admin/authentication/ldap",component:le.Ay.featureToggles.ssoSettingsLDAP?Pn(()=>e.e(4582).then(e.bind(e,31368))):qs},{path:"/admin/authentication/:provider",roles:()=>qt.TP.evaluatePermission([ln.w.SettingsWrite]),component:Pn(()=>e.e(5592).then(e.bind(e,81172)))},{path:"/admin/settings",component:Pn(()=>e.e(7659).then(e.bind(e,29154)))},{path:"/admin/upgrading",component:Pn(()=>e.e(6759).then(e.bind(e,12715)))},{path:"/admin/users",component:Pn(()=>Promise.all([e.e(265),e.e(1743)]).then(e.bind(e,12074)))},{path:"/admin/users/create",component:Pn(()=>e.e(9239).then(e.bind(e,62648)))},{path:"/admin/users/edit/:id",component:Pn(()=>Promise.all([e.e(265),e.e(8054)]).then(e.bind(e,698)))},{path:"/admin/orgs",component:Pn(()=>e.e(9736).then(e.bind(e,55026)))},{path:"/admin/orgs/edit/:id",component:Pn(()=>Promise.all([e.e(265),e.e(9119)]).then(e.bind(e,88947)))},{path:"/admin/stats",component:Pn(()=>e.e(9299).then(e.bind(e,32882)))},le.Ay.featureToggles.onPremToCloudMigrations&&{path:"/admin/migrate-to-cloud",roles:()=>qt.TP.evaluatePermission([ln.w.MigrationAssistantMigrate]),component:Pn(()=>e.e(3704).then(e.bind(e,26151)))},{path:"/login",allowAnonymous:!0,component:Pn(()=>Promise.all([e.e(7651),e.e(3883)]).then(e.bind(e,798))),pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:Pn(()=>e.e(8576).then(e.bind(e,68620))),chromeless:!0},{path:"/verify",component:le.Ay.verifyEmailEnabled?Pn(()=>e.e(2018).then(e.bind(e,62018))):()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",allowAnonymous:!0,component:le.Ay.disableUserSignUp?()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/login"}):Pn(()=>e.e(8347).then(e.bind(e,98347))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",allowAnonymous:!0,chromeless:!0,component:Pn(()=>e.e(3818).then(e.bind(e,81545)))},{path:"/user/password/reset",allowAnonymous:!0,component:Pn(()=>Promise.all([e.e(7651),e.e(641)]).then(e.bind(e,1711))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",roles:()=>qt.TP.evaluatePermission([ln.w.SnapshotsRead]),component:Pn(()=>e.e(6590).then(e.bind(e,3839)))},{path:"/playlists",component:Pn(()=>e.e(1168).then(e.bind(e,22129)))},{path:"/playlists/play/:uid",component:Pn(()=>e.e(1374).then(e.bind(e,57304)))},{path:"/playlists/new",component:Pn(()=>e.e(7616).then(e.bind(e,95594)))},{path:"/playlists/edit/:uid",component:Pn(()=>e.e(7620).then(e.bind(e,33876)))},{path:"/sandbox/benchmarks",component:Pn(()=>e.e(9354).then(e.bind(e,13591)))},{path:"/sandbox/test",allowAnonymous:!0,component:Pn(()=>e.e(5354).then(e.bind(e,12057)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:Pn(()=>Promise.all([e.e(3003),e.e(5804)]).then(e.bind(e,95576)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>qt.TP.evaluatePermission([ln.w.AlertingRuleRead]),component:Pn(()=>Promise.all([e.e(3003),e.e(4333)]).then(e.bind(e,85185)))},{path:"/library-panels",component:Pn(()=>e.e(8516).then(e.bind(e,21155)))},{path:"/notifications",component:Pn(()=>e.e(4140).then(e.bind(e,30946)))},{path:"/explore/metrics/*",roles:()=>qt.TP.evaluatePermission([ln.w.DataSourcesExplore]),component:Pn(()=>e.e(8513).then(e.bind(e,24227)))},{path:"/bookmarks",component:Pn(()=>e.e(7759).then(e.bind(e,27906)))},{path:"/theme-playground",component:Pn(()=>e.e(1805).then(e.bind(e,54377)))},le.Ay.featureToggles.restoreDashboards&&{path:"/dashboard/recently-deleted",roles:()=>["Admin","ServerAdmin"],component:Pn(()=>Promise.all([e.e(3326),e.e(5742),e.e(6299)]).then(e.bind(e,3853)))},{path:"/femt",component:()=>(0,L.jsx)(bn.C5,{replace:!0,to:"/"})},...pp(),...Dp(),...yo(),...gp(),...Pp,...vp(),...xo(),...xp(),{path:"/goto/*",component:Sp},{path:"/*",component:Da.H}].filter(ha.zz)}function Dp(A=le.Ay){return A.supportBundlesEnabled?[{path:"/support-bundles",component:Pn(()=>e.e(123).then(e.bind(e,236)))},{path:"/support-bundles/create",component:Pn(()=>e.e(1515).then(e.bind(e,26484)))}]:[]}function Cp(){const{uid:A=""}=(0,bn.g)();return(0,L.jsx)(bn.C5,{replace:!0,to:tr.b.DataSourcesDashboards.replace(":uid",A)})}function Tp(){const{uid:A=""}=(0,bn.g)();return(0,L.jsx)(bn.C5,{replace:!0,to:tr.b.DataSourcesEdit.replace(":uid",A)})}function Sp(){const{pathname:A}=(0,bn.zy)();return(0,u.useEffect)(()=>{window.location.href=A},[A]),null}var qa=e(8535),zr=e(58449),nr=e(27963);function iu(){return q.$.bootData._femt}var Yc=e(75683),Jc=e(56297);function Mp({error:A,errorInfo:S}){const Z=(0,bn.zy)(),ce=A?.name==="ChunkLoadError",he=(0,Pt.of)(Op);return(0,u.useEffect)(()=>{ce&&Z.search.indexOf("chunkNotFound")===-1&&(window.location.href=b.I.getUrlForPartial(Z,{chunkNotFound:!0}))},[Z,ce]),(0,L.jsx)(za.Y,{navId:"error",layout:Yc.k.Canvas,children:(0,L.jsxs)("div",{className:he.container,children:[ce&&(0,L.jsxs)("div",{children:[(0,L.jsx)("h2",{children:(0,L.jsx)(f.x6,{i18nKey:"route-error.title",children:"Unable to find application file"})}),(0,L.jsx)("br",{}),(0,L.jsx)("h2",{className:"page-heading",children:(0,L.jsx)(f.x6,{i18nKey:"route-error.description",children:"Grafana has likely been updated. Please try reloading the page."})}),(0,L.jsx)("br",{}),(0,L.jsx)(me.$n,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload(),children:(0,L.jsx)(f.x6,{i18nKey:"route-error.reload-button",children:"Reload"})}),(0,L.jsx)(Jc.D,{title:(0,f.t)("route-error.error-title","Error details"),error:A,errorInfo:S})]}),!ce&&(0,L.jsx)(Jc.D,{title:(0,f.t)("route-error.error-unexpected-title","An unexpected error happened"),error:A,errorInfo:S})]})})}const Op=A=>({container:(0,Je.css)({width:"500px",margin:A.spacing(8,"auto")})});var Rp=e(42581);function Ip(){const A=(0,Pt.of)(Up);return(0,L.jsx)("div",{className:A.container,"aria-live":"polite",role:"status","aria-label":(0,f.t)("bouncing-loader.label","Loading"),children:(0,L.jsx)("div",{className:A.bounce,children:(0,L.jsx)("img",{alt:"",src:Rp,className:A.logo})})})}const Ap=(0,Je.keyframes)({"0%":{opacity:0,animationTimingFunction:"cubic-bezier(0, 0, 0.5, 1)"},"100%":{opacity:1}}),Lp=(0,Je.keyframes)({"0%":{opacity:0},"50%":{opacity:1},"100%":{opacity:0}}),jp=(0,Je.keyframes)({"from, to":{transform:"translateY(0px)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"50%":{transform:"translateY(-50px)",animationTimingFunction:"cubic-bezier(0.9, 0, 0.7, 1)"}}),Bp=(0,Je.keyframes)({"0%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"15%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 0.75)"},"55%":{transform:"scaleX(1.05) scaleY(0.95)",animationTimingFunction:"cubic-bezier(0.9, 0, 1, 1)"},"95%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0, 1)"},"100%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 1)"}}),Up=A=>({container:(0,Je.css)({opacity:0,[A.transitions.handleMotion("no-preference")]:{animationName:Ap,animationIterationCount:1,animationDuration:"0.9s",animationDelay:"0.5s",animationFillMode:"forwards"},[A.transitions.handleMotion("reduce")]:{animationName:Lp,animationIterationCount:"infinite",animationDuration:"4s",animationDelay:"0.5s"}}),bounce:(0,Je.css)({textAlign:"center",[A.transitions.handleMotion("no-preference")]:{animationName:jp,animationDuration:"0.9s",animationIterationCount:"infinite"}}),logo:(0,Je.css)({display:"inline-block",[A.transitions.handleMotion("no-preference")]:{animationName:Bp,animationDuration:"0.9s",animationIterationCount:"infinite"},width:"60px",height:"60px"})});function Np(){const A=(0,Pt.of)(Wp);return(0,L.jsx)("div",{className:A.loadingPage,children:(0,L.jsx)(Ip,{})})}const Wp=A=>({loadingPage:(0,Je.css)({backgroundColor:A.colors.background.primary,flex:1,flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Fp(A){const{chrome:S,keybindings:Z}=(0,nr.Il)();return S.setMatchedRoute(A.route),(0,u.useLayoutEffect)(()=>{Z.clearAndInitGlobalBindings(A.route)},[Z,A.route]),(0,u.useEffect)(()=>(lu(A.route),cu(),(0,M.Lc)("GrafanaRoute",!1,"Mounted",A.route),()=>{(0,M.Lc)("GrafanaRoute",!1,"Unmounted",A.route),lu(A.route,!0)}),[]),(0,u.useEffect)(()=>{cu(),(0,vn.Jy)(),(0,M.Lc)("GrafanaRoute",!1,"Updated",A)}),(0,M.Lc)("GrafanaRoute",!1,"Rendered",A.route),(0,L.jsx)(ua.tH,{boundaryName:"grafana-route",dependencies:[A.route],children:({error:ce,errorInfo:he})=>ce?(0,L.jsx)(Mp,{error:ce,errorInfo:he}):(0,L.jsx)(u.Suspense,{fallback:(0,L.jsx)(Np,{}),children:(0,L.jsx)(A.route.component,{...A,queryParams:(0,M.SE)(A.location.search)})})})}function Kp({route:A}){const S=(0,bn.zy)();if(iu()&&!A.allowAnonymous&&!q.$.anonymousEnabled&&!qt.TP.isSignedIn)return qt.TP.setRedirectToUrl(),(0,L.jsx)(bn.C5,{replace:!0,to:"/login"});const Z=A.roles?A.roles():[];return Z?.length&&!Z.some(ce=>qt.TP.hasRole(ce))?(0,L.jsx)(bn.C5,{replace:!0,to:"/"}):(0,L.jsx)(Fp,{route:A,location:S})}function wp(A){return A.pageClass?A.pageClass.split(" "):[]}function lu(A,S=!1){for(const Z of wp(A))S?document.body.classList.remove(Z):document.body.classList.add(Z)}function cu(){document.body.classList.remove("sidemenu-open--xs");const A=document.getElementById("tooltip");A?.parentElement?.removeChild(A);const S=document.querySelectorAll(".tooltip");for(let Z=0;Z<S.length;Z++){const ce=S[Z];ce.parentElement?.removeChild(ce)}}var Vp=e(6007),$p=e(90382);const zp=(0,u.memo)(function(){const[S,Z]=(0,u.useState)(void 0),ce=(0,u.useRef)(),he=(0,Pt.of)(Gp);return(0,u.useEffect)(()=>{},[]),S?!qt.TP.isSignedIn||!q.$.liveEnabled||qt.TP.user.orgRole===$p.X.None?null:(0,L.jsx)(vs.F,{severity:"warning",className:he.warn,title:(0,f.t)("live.live-connection-warning.title-connection-to-server-is-lost","Connection to server is lost...")}):null}),Gp=A=>({warn:(0,Je.css)({position:"fixed",bottom:0,left:"50%",transform:"translate(-50%)",maxWidth:"400px",zIndex:A.zIndex.portal,cursor:"wait"})});var zl=e(28337),Hp=e(98533),mc=e(69896),Xc=e(59553);const Bi=(0,Xc.TP)("scope.grafana.app","v0alpha1");class Qp{constructor(){this.fetchDashboards=async S=>{try{return(await(0,C.AI)().get(Bi+"/find/scope_dashboard_bindings",{scope:S}))?.items??[]}catch{return[]}},this.fetchScopeNavigations=async S=>{try{return(await(0,C.AI)().get(Bi+"/find/scope_navigations",{scope:S}))?.items??[]}catch{return[]}},this.fetchScopeNode=async S=>{if(!q.$.featureToggles.useScopeSingleNodeEndpoint)return Promise.resolve(void 0);try{return await(0,C.AI)().get(Bi+`/scopenodes/${S}`)}catch{return}}}async fetchScope(S){try{return await(0,C.AI)().get(Bi+`/scopes/${S}`)}catch(Z){console.error(Z);return}}async fetchMultipleScopes(S){return(await Promise.all(S.map(ce=>this.fetchScope(ce)))).filter(ce=>ce!==void 0)}async fetchMultipleScopeNodes(S){if(!q.$.featureToggles.useMultipleScopeNodesEndpoint||S.length===0)return Promise.resolve([]);try{return(await(0,C.AI)().get(Bi+"/find/scope_node_children",{names:S}))?.items??[]}catch{return[]}}async fetchNodes(S){const Z=S.limit??1e3;if(!(0<Z&&Z<=1e4))throw new Error("Limit must be between 1 and 10000");try{return(await(0,C.AI)().get(Bi+"/find/scope_node_children",{parent:S.parent,query:S.query,limit:Z}))?.items??[]}catch{return[]}}}var Gl=e(49426),_p=e(49510),du=e(41900);class kp{constructor(S,Z,ce){this.selectorService=S,this.dashboardsService=Z,this.locationService=ce,this.subscriptions=[],this.updateState=je=>{this._state.next({...this._state.getValue(),...je})},this.changeScopes=(je,_e,Xe)=>this.selectorService.changeScopes(je,_e,Xe),this.setReadOnly=je=>{this.state.readOnly!==je&&this.updateState({readOnly:je}),je&&this.selectorService.state.opened&&this.selectorService.closeAndReset()},this.setEnabled=je=>{if(this.state.enabled!==je&&(this.updateState({enabled:je}),je)){const _e=this.selectorService.state.appliedScopes[0]?.scopeNodeId;this.locationService.partial({scopes:this.selectorService.state.appliedScopes.map(Xe=>Xe.scopeId),scope_node:_e,scope_parent:null},!0)}},this._state=new Gl.t({enabled:!1,readOnly:!1}),this._stateObservable=new Gl.t({...this._state.getValue(),value:this.selectorService.state.appliedScopes.map(je=>this.selectorService.state.scopes[je.scopeId]).filter(je=>je),loading:this.selectorService.state.loading,drawerOpened:this.dashboardsService.state.drawerOpened}),this.subscriptions.push((0,_p.z)([this._state.asObservable(),this.getSelectorServiceStateObservable(),this.getDashboardsServiceStateObservable()]).pipe((0,kt.T)(([je,_e,Xe])=>({...je,value:_e.selectedScopes,loading:_e.loading,drawerOpened:Xe.drawerOpened}))).subscribe(this._stateObservable));const he=new URLSearchParams(ce.getLocation().search),ve=he.get("scope_node"),xe=he.get("scope_parent");this.changeScopes(he.getAll("scopes"),xe??void 0,ve??void 0);const Ce=ve??xe;Ce&&this.selectorService.resolvePathToRoot(Ce,this.selectorService.state.tree).catch(je=>{console.error("Failed to pre-load node path",je)}),this.subscriptions.push(ce.getLocationObservable().subscribe(je=>{if(!this.state.enabled)return;const _e=new URLSearchParams(je.search),Xe=_e.getAll("scopes"),et=_e.get("scope_node"),dt=_e.get("scope_parent"),vt=this.selectorService.state.appliedScopes.map(lt=>lt.scopeId);Xe.length&&!(0,ie.isEqual)(Xe,vt)&&this.changeScopes(Xe,dt??void 0,et??void 0)})),this.subscriptions.push(S.subscribeToState((je,_e)=>{const Xe=_e.appliedScopes[0]?.scopeNodeId,et=je.appliedScopes[0]?.scopeNodeId,dt=_e.appliedScopes.map(It=>It.scopeId),vt=je.appliedScopes.map(It=>It.scopeId);(!(0,ie.isEqual)(dt,vt)||Xe!==et)&&this.locationService.partial({scopes:vt,scope_node:et||null,scope_parent:null},!0)}))}get state(){return this._stateObservable.value}get stateObservable(){return this._stateObservable}getSelectorServiceStateObservable(){return this.selectorService.stateObservable.pipe((0,kt.T)(S=>({selectedScopes:S.appliedScopes.map(Z=>S.scopes[Z.scopeId]).filter(Z=>Z),loading:S.loading})),(0,du.F)((S,Z)=>S.loading===Z.loading&&(0,ie.isEqual)(S.selectedScopes,Z.selectedScopes)))}getDashboardsServiceStateObservable(){return this.dashboardsService.stateObservable.pipe((0,du.F)((S,Z)=>S.drawerOpened===Z.drawerOpened))}cleanUp(){for(const S of this.subscriptions)S.unsubscribe()}}var Yp=e(97256);class uu{constructor(S){this.subscribeToState=Z=>this._state.pipe((0,Yp.J)()).subscribe(([ce,he])=>Z(he,ce)),this.updateState=Z=>{this._state.next(Object.freeze({...this.state,...Z}))},this._state=new Gl.t(Object.freeze(S))}get state(){return this._state.getValue()}get stateObservable(){return this._state.asObservable()}}function Jp(A){return A.split("/").slice(0,3).join("/")}function hu(A){const S=A.split("?")[0].split("#")[0];return S!=="/"&&S.endsWith("/")?S.slice(0,-1):S}function Zc(A,S){return S.startsWith("/d/")?Jp(A)===hu(S):A===hu(S)}class Xp extends uu{constructor(S){super({drawerOpened:!1,dashboards:[],scopeNavigations:[],filteredFolders:{},folders:{},forScopeNames:[],loading:!1,searchQuery:""}),this.apiClient=S,this.onLocationChange=Z=>{if(!this.state.drawerOpened)return;const ce=Z,he=this.state.scopeNavigations.find(ve=>!("url"in ve.spec)||typeof ve.spec.url!="string"?!1:Zc(ce,ve.spec.url));if(he){if(he.status.groups){for(const ve of he.status.groups)if(this.state.folders[""].folders[ve].expanded)return}he.status.groups&&this.updateFolder(["",he.status.groups[0]],!0)}},this.updateFolder=(Z,ce)=>{let he={...this.state.folders},ve={...this.state.filteredFolders},xe=he,Ce=ve;for(let et=0;et<Z.length-1;et++)xe=xe[Z[et]].folders,Ce=Ce[Z[et]].folders;const je=Z[Z.length-1],_e=xe[je],Xe=Ce[je];_e.expanded=ce,Xe.expanded=ce,this.updateState({folders:he,filteredFolders:ve})},this.changeSearchQuery=Z=>{Z=Z??"";const ce=this.filterFolders(this.state.folders,Z);this.updateState({filteredFolders:ce,searchQuery:Z})},this.clearSearchQuery=()=>{this.changeSearchQuery("")},this.fetchDashboards=async Z=>{if((0,ie.isEqual)(this.state.forScopeNames,Z))return;if(Z.length===0){this.updateState({dashboards:[],filteredFolders:{},folders:{},forScopeNames:[],loading:!1,drawerOpened:!1});return}this.updateState({forScopeNames:Z,loading:!0});const he=await(q.$.featureToggles.useScopesNavigationEndpoint?this.apiClient.fetchScopeNavigations:this.apiClient.fetchDashboards)(Z);if((0,ie.isEqual)(this.state.forScopeNames,Z)){const ve=this.groupSuggestedItems(he),xe=this.filterFolders(ve,this.state.searchQuery);this.updateState({scopeNavigations:he,filteredFolders:xe,folders:ve,loading:!1,drawerOpened:he.length>0})}},this.groupSuggestedItems=Z=>{const ce=M.Ny.getLocation().pathname,he=ce.startsWith("/d/"),ve={"":{title:"",expanded:!0,folders:{},suggestedNavigations:{}}};return Z.forEach(xe=>{const Ce=ve[""],je=xe.status.groups??[];let _e=!1;if(he&&"dashboard"in xe.spec){const et=ce.split("/")[2];_e=xe.spec.dashboard===et}"url"in xe.spec&&(_e=ce.startsWith(xe.spec.url)),je.forEach(et=>{const dt=!!Ce.folders[et],vt=dt&&Ce.folders[et].expanded;et&&!dt&&(Ce.folders[et]={title:et,expanded:_e,folders:{},suggestedNavigations:{}}),et&&_e&&!vt&&(Ce.folders[et].expanded=!0)}),(je.length>0?je.map(et=>et===""?Ce.suggestedNavigations:Ce.folders[et].suggestedNavigations):[Ce.suggestedNavigations]).forEach(et=>{"dashboard"in xe.spec&&"dashboardTitle"in xe.status&&!et[xe.spec.dashboard]?et[xe.spec.dashboard]={url:"/d/"+xe.spec.dashboard,title:xe.status.dashboardTitle,id:xe.spec.dashboard}:"url"in xe.spec&&"title"in xe.status&&!et[xe.spec.url]&&(et[xe.spec.url]={title:xe.status.title||xe.metadata.name,url:xe.spec.url,id:xe.metadata.name})})}),ve},this.filterFolders=(Z,ce)=>(ce=(ce??"").toLowerCase(),Object.entries(Z).reduce((he,[ve,xe])=>{if(xe.title.toLowerCase().includes(ce))return he[ve]={...xe,expanded:!0},he;const Ce=this.filterFolders(xe.folders,ce),je=Object.entries(xe.suggestedNavigations).filter(([_e,Xe])=>Xe.title.toLowerCase().includes(ce));return(Object.keys(Ce).length>0||je.length>0)&&(he[ve]={...xe,expanded:!0,folders:Ce,suggestedNavigations:Object.fromEntries(je)}),he},{})),this.toggleDrawer=()=>this.updateState({drawerOpened:!this.state.drawerOpened}),this.subscribeToState((Z,ce)=>{Z.drawerOpened!==ce.drawerOpened&&(Z.drawerOpened&&!ce.drawerOpened?(this.locationSubscription?.unsubscribe(),this.locationSubscription=M.Ny.getLocationObservable().subscribe(he=>{this.onLocationChange(he.pathname)})):!Z.drawerOpened&&ce.drawerOpened&&this.locationSubscription?.unsubscribe())})}}var Po=e(78012),Zp=e(54767);function fu(A){const S={...A};if(S.expanded=!1,S.children){S.children={...S.children};for(const Z of Object.keys(S.children))S.children[Z]=fu(S.children[Z])}return S}function qp(A,S){let Z={...A},ce=Z;ce.expanded=!0;const he=S.slice(1);for(const ve of he){const xe=ce.children?.[ve];if(!xe)throw new Error(`Node ${ve} not found in tree`);const Ce={...xe};ce.children={...ce.children},ce.children[ve]=Ce,Ce.expanded=!0,ce=Ce}return Z}function Ui(A){return A.spec.nodeType==="container"}function gc(A){return A.spec.linkType==="scope"}function Ni(A,S){if(A==="")return[""];const Z=[A];let ce=S[A]?.spec.parentName;for(;ce;)Z.unshift(ce),ce=S[ce]?.spec.parentName;return Z.unshift(""),Z}function Wi(A,S,Z){if(S.length<1)return A;const ce={...A};let he=ce;if(S.length===1&&S[0]==="")return Z(he),ce;for(const ve of S.slice(1)){if(!he.children?.[ve])return ce;he.children={...he.children},he.children[ve]={...he.children[ve]},he=he.children[ve]}return Z(he),ce}function Go(A,S){if(S.length<1)return;if(S.length===1&&S[0]==="")return A;let Z=A;for(const ce of S.slice(1))if(Z=Z.children?.[ce],!Z)return;return Z}const em=(A,S)=>{const Z=S.map(he=>he.metadata.name);Z.unshift("");let ce=A;for(let he=0;he<Z.length-1;he++){const ve=Z[he+1],xe=Z.slice(0,he+1);ce=Wi(ce,xe,Ce=>(Ce.children={...Ce.children},ve?(Ce.children[ve]={expanded:!1,scopeNodeId:ve,query:"",children:void 0},Ce):(console.warn("Failed to insert full path into tree. Did not find child to"+Z[he]),Ce)))}return ce};var es=e(66687);const tm=es.Ik({key:es.Yj(),value:es.Yj(),values:es.YO(es.Yj()).optional(),operator:es.k5(["equals","not-equals","regex-match","regex-not-match","one-of","not-one-of"])}),nm=es.Ik({title:es.Yj(),defaultPath:es.YO(es.Yj()).optional(),filters:es.YO(tm).optional()}),pu=es.Ik({metadata:es.Ik({name:es.Yj()}),spec:nm}),am=es.Ik({nodeType:es.k5(["container","leaf"]),title:es.Yj(),subTitle:es.Yj().optional(),description:es.Yj().optional(),disableMultiSelect:es.zM().optional(),linkId:es.Yj().optional(),linkType:es.k5(["scope"]).optional(),parentName:es.Yj().optional()}),sm=es.Ik({metadata:es.Ik({name:es.Yj()}),spec:am}),rm=pu.extend({parentNode:sm.optional()}),qc="grafana.scopes.recent";class om extends uu{constructor(S,Z,ce=Po.M,he=q.$.dashboardPerformanceMetrics.length?(0,Zp.Sr)():void 0){super({loading:!1,opened:!1,loadingNodeName:void 0,nodes:{},scopes:{},selectedScopes:[],appliedScopes:[],tree:{expanded:!1,scopeNodeId:"",query:"",children:void 0}}),this.apiClient=S,this.dashboardsService=Z,this.store=ce,this.interactionProfiler=he,this.getScopeNode=async xe=>{if(this.state.nodes[xe])return this.state.nodes[xe];try{const Ce=await this.apiClient.fetchScopeNode(xe);return Ce&&this.updateState({nodes:{...this.state.nodes,[Ce.metadata.name]:Ce}}),Ce}catch(Ce){console.error("Failed to load node",Ce);return}},this.getNodePath=async xe=>{const Ce=await this.getScopeNode(xe);return Ce?[...Ce.spec.parentName&&Ce.spec.parentName!==""?await this.getNodePath(Ce.spec.parentName):[],Ce]:[]},this.resolvePathToRoot=async(xe,Ce)=>{if(!Ce)throw new Error("Tree is required");const je=await this.getNodePath(xe),_e=em(Ce,je);return this.updateState({tree:_e}),{path:je,tree:_e}},this.toggleExpandedNode=async xe=>{const Ce=Ni(xe,this.state.nodes),je=Go(this.state.tree,Ce);if(!je)throw new Error(`Node ${xe} not found in tree`);if(je.scopeNodeId!==""&&!Ui(this.state.nodes[je.scopeNodeId]))throw new Error(`Trying to expand node at id ${xe} that is not expandable`);const _e=Wi(this.state.tree,Ce,Xe=>{Xe.expanded=!je.expanded,Xe.query=""});if(this.updateState({tree:_e}),je.expanded===!0){const Xe=Ce.slice(0,-1),et=Go(this.state.tree,Xe);et&&await this.loadNodeChildren(Xe,et,et.query)}else await this.loadNodeChildren(Ce,je)},this.filterNode=async(xe,Ce)=>{const je=Ni(xe,this.state.nodes),_e=Go(this.state.tree,je);if(!_e)throw new Error(`Trying to filter node at path or id ${xe} not found`);if(_e.scopeNodeId!==""&&!Ui(this.state.nodes[_e.scopeNodeId]))throw new Error(`Trying to filter node at id ${xe} that is not expandable`);const Xe=Wi(this.state.tree,je,et=>{et.expanded=!0,et.query=Ce});this.updateState({tree:Xe}),await this.loadNodeChildren(je,_e,Ce)},this.expandOrFilterNode=async(xe,Ce)=>{this.interactionProfiler?.startInteraction("scopeNodeDiscovery");const je=Ni(xe,this.state.nodes),_e=Go(this.state.tree,je);try{if(!_e)throw new Error(`Node ${xe} not found in tree`);if(_e.scopeNodeId!==""&&!Ui(this.state.nodes[_e.scopeNodeId]))throw new Error(`Trying to expand node at id ${xe} that is not expandable`);if(!_e.expanded||_e.query!==Ce){const Xe=Wi(this.state.tree,je,et=>{et.expanded=!0,et.query=Ce||""});this.updateState({tree:Xe}),await this.loadNodeChildren(je,_e,Ce)}}catch(Xe){throw Xe}finally{this.interactionProfiler?.stopInteraction()}},this.collapseNode=async xe=>{const Ce=Ni(xe,this.state.nodes);if(!Go(this.state.tree,Ce))throw new Error(`Trying to collapse node at path or id ${xe} not found`);const _e=Wi(this.state.tree,Ce,Xe=>{Xe.expanded=!1,Xe.query=""});this.updateState({tree:_e})},this.loadNodeChildren=async(xe,Ce,je)=>{this.updateState({loadingNodeName:Ce.scopeNodeId});const _e=await this.apiClient.fetchNodes({parent:Ce.scopeNodeId,query:je}),Xe={...this.state.nodes};for(const dt of _e)Xe[dt.metadata.name]=dt;const et=Wi(this.state.tree,xe,dt=>{dt.children={};for(const vt of _e)dt.children[vt.metadata.name]={expanded:!1,scopeNodeId:vt.metadata.name,query:je||"",children:void 0}});return this.updateState({tree:et,nodes:Xe,loadingNodeName:void 0}),{newTree:et}},this.selectScope=async xe=>{let Ce=this.state.nodes[xe];if(!gc(Ce))throw new Error(`Trying to select node with id ${xe} that is not selectable`);if(!Ce.spec.linkId)throw new Error(`Trying to select node id ${xe} that does not have a linkId`);this.apiClient.fetchScope(Ce.spec.linkId).then(et=>{et&&this.updateState({scopes:{...this.state.scopes,[et.metadata.name]:et}})});const je=this.state.nodes[Ce.spec.parentName],_e={scopeId:Ce.spec.linkId,scopeNodeId:Ce.metadata.name,parentNodeId:je?.metadata.name};!(this.state.selectedScopes[0]?.scopeNodeId&&this.state.nodes[this.state.selectedScopes[0].scopeNodeId].spec.parentName===Ce.spec.parentName)||je?.spec.disableMultiSelect||this.state.selectedScopes.length===0?this.updateState({selectedScopes:[_e]}):this.updateState({selectedScopes:[...this.state.selectedScopes,_e]})},this.deselectScope=async xe=>{const Ce=this.state.nodes[xe],je=Ce?Xe=>Xe.scopeNodeId!==Ce.metadata.name&&Xe.scopeId!==Ce.spec.linkId:Xe=>Xe.scopeNodeId!==xe&&Xe.scopeId!==xe;let _e=this.state.selectedScopes.filter(je);this.updateState({selectedScopes:_e})},this.updateNode=async(xe,Ce,je)=>Ce?this.expandOrFilterNode(xe,je):this.collapseNode(xe),this.changeScopes=(xe,Ce,je)=>this.applyScopes(xe.map((_e,Xe)=>({scopeId:_e,scopeNodeId:Xe===0?je:void 0,parentNodeId:Ce}))),this.applyScopes=async xe=>{if(!(this.state.appliedScopes.length===xe.length&&this.state.appliedScopes.every(Ce=>xe.find(je=>Ce.scopeId===je.scopeId)))&&(this.updateState({appliedScopes:xe,selectedScopes:xe,loading:xe.length>0}),this.dashboardsService.fetchDashboards(xe.map(Ce=>Ce.scopeId)).then(()=>{const Ce=xe[0]?.scopeNodeId?this.state.nodes[xe[0]?.scopeNodeId]:void 0;this.redirectAfterApply(Ce)}),xe.length>0)){const Ce=await this.apiClient.fetchMultipleScopes(xe.map(dt=>dt.scopeId)),je={...this.state.scopes};for(const dt of Ce)je[dt.metadata.name]=dt;const _e=xe[0]?.scopeNodeId?this.state.nodes[xe[0]?.scopeNodeId]:void 0,Xe=xe[0]?.parentNodeId||_e?.spec.parentName,et=Xe?this.state.nodes[Xe]:void 0;this.addRecentScopes(Ce,et),this.updateState({scopes:je,loading:!1})}},this.redirectAfterApply=xe=>{if(xe&&xe.spec.redirectPath&&typeof xe.spec.redirectPath=="string"){M.Ny.push(xe.spec.redirectPath);return}const Ce=M.Ny.getLocation().pathname;if(!this.dashboardsService.state.scopeNavigations.find(_e=>!("url"in _e.spec)||typeof _e.spec.url!="string"?!1:Zc(Ce,_e.spec.url))&&this.dashboardsService.state.scopeNavigations.length>0){const _e=this.dashboardsService.state.scopeNavigations[0];_e&&"url"in _e.spec&&typeof _e.spec.url=="string"&&_e.spec.url.includes("/d/")&&M.Ny.push(_e.spec.url)}},this.removeAllScopes=()=>this.applyScopes([]),this.addRecentScopes=(xe,Ce)=>{if(xe.length===0)return;const je=structuredClone(xe);Ce&&(je[0].parentNode=Ce);const _e=5,Xe=this.getRecentScopes();Xe.unshift(je),this.store.set(qc,JSON.stringify(Xe.slice(0,_e-1)))},this.getRecentScopes=()=>{const xe=this.store.get(qc);return gu(xe).filter(je=>{if(je.length!==this.state.appliedScopes.length)return!0;const _e=new Set(je.map(Xe=>Xe.metadata.name));return!this.state.appliedScopes.every(Xe=>_e.has(Xe.scopeId))})},this.getNodesFromRecentScopes=()=>{const xe=this.store.get(qc),Ce=gu(xe);return Object.fromEntries(Ce.map(_e=>[_e[0]?.parentNode?.metadata?.name,_e[0]?.parentNode]).filter(([_e,Xe])=>Xe!==void 0&&_e!==void 0))},this.open=async()=>{(!this.state.tree?.children||Object.keys(this.state.tree?.children).length===0)&&await this.expandOrFilterNode("");let xe=fu(this.state.tree);if(this.state.selectedScopes.length&&this.state.selectedScopes[0].parentNodeId){let Ce=Ni(this.state.selectedScopes[0].parentNodeId,this.state.nodes),je=Go(xe,Ce);if(!je)try{xe=(await this.resolvePathToRoot(this.state.selectedScopes[0].parentNodeId,xe)).tree,je=Go(xe,Ce)}catch(_e){console.error("Failed to resolve path to root",_e)}if(je&&!je.children){const{newTree:_e}=await this.loadNodeChildren(Ce,je,"");xe=_e}try{xe=qp(xe,Ce)}catch(_e){console.error("Failed to expand nodes",_e)}}this.resetSelection(),this.updateState({tree:xe,opened:!0})},this.closeAndReset=()=>{this.updateState({opened:!1}),this.resetSelection()},this.closeAndApply=()=>(this.updateState({opened:!1}),this.apply()),this.apply=()=>this.applyScopes(this.state.selectedScopes),this.resetSelection=()=>{this.updateState({selectedScopes:[...this.state.appliedScopes]})},this.searchAllNodes=async(xe,Ce)=>{const je=await this.apiClient.fetchNodes({query:xe,limit:Ce}),_e={...this.state.nodes};for(const Xe of je)_e[Xe.metadata.name]=Xe;return this.updateState({nodes:_e}),je},this.getScopeNodes=async xe=>{const Ce={};for(const et of xe)this.state.nodes[et]&&(Ce[et]=this.state.nodes[et]);const je=xe.filter(et=>!Ce[et]),_e=await this.apiClient.fetchMultipleScopeNodes(je);for(const et of _e)Ce[et.metadata.name]=et;const Xe={...this.state.nodes,...Ce};return this.updateState({nodes:Xe}),xe.map(et=>Ce[et]).filter(et=>et!==void 0)};const ve=this.getNodesFromRecentScopes();this.updateState({nodes:{...this.state.nodes,...ve}})}}function im(A){return typeof A=="object"&&A!==null&&"scope"in A&&mu(A.scope)}function mu(A){return pu.safeParse(A).success}function lm(A){return rm.safeParse(A).success}function gu(A){let S;try{S=JSON.parse(A||"[]")}catch(Z){return console.error("Failed to parse recent scopes",Z,A),[]}if(!(Array.isArray(S)&&Array.isArray(S[0])))return[];if(im(S[0]?.[0]))S=S.map(Z=>Z.map(ce=>ce.scope));else if(!mu(S[0]?.[0]))return[];for(const Z of S)Z[0]?.parentNode&&(lm(Z[0])||(Z[0].parentNode=void 0));return S}const vu=(0,u.createContext)(void 0);function Ho(){return(0,u.useContext)(vu)}function cm(){const A=new Qp,S=new Xp(A),Z=new om(A,S);return{scopesService:new kp(Z,S,M.Ny),scopesSelectorService:Z,scopesDashboardsService:S,client:A}}const dm=({children:A,services:S})=>{const Z=(0,u.useMemo)(()=>S??cm(),[S]);return(0,u.useEffect)(()=>()=>{Z.scopesService.cleanUp()},[Z]),(0,L.jsx)(mc.j.Provider,{value:q.$.featureToggles.scopeFilters?Z.scopesService:void 0,children:(0,L.jsx)(vu.Provider,{value:q.$.featureToggles.scopeFilters?Z:void 0,children:A})})};var yu=e(96014),xu=e(35557),Eu=e(8515),um=e(46942),hm=e.n(um),fm=e(33149),pm=e(45897),mm=e(76373),vc=e(51702),Sr=e(29043),Pu=e(18828),bu=e(43107),Du=e(93225),gm=e(47327),vm=e(50201),Cu=e(65178),ym=e(35822);const yc=0,xm=A=>{const S=u.useRef(null),Z=u.useRef(null),ce=u.useRef(A.items);ce.current=A.items;const he=(0,ym.useVirtual)({size:ce.current.length,parentRef:Z}),{query:ve,search:xe,currentRootActionId:Ce,activeIndex:je,options:_e}=(0,Zt.useKBar)(vt=>({search:vt.searchQuery,currentRootActionId:vt.currentRootActionId,activeIndex:vt.activeIndex}));u.useEffect(()=>{const vt=lt=>{lt.key==="ArrowUp"||lt.ctrlKey&&lt.key==="p"?(lt.preventDefault(),ve.setActiveIndex(Et=>{let It=Et>yc?Et-1:Et;if(typeof ce.current[It]=="string"){if(It===0)return Et;It-=1}return It})):lt.key==="ArrowDown"||lt.ctrlKey&&lt.key==="n"?(lt.preventDefault(),ve.setActiveIndex(Et=>{let It=Et<ce.current.length-1?Et+1:Et;if(typeof ce.current[It]=="string"){if(It===ce.current.length-1)return Et;It+=1}return It})):lt.key==="Enter"&&!lt.metaKey&&(lt.preventDefault(),S.current?.click())};return window.addEventListener("keydown",vt),()=>window.removeEventListener("keydown",vt)},[ve]);const{scrollToIndex:Xe}=he;u.useEffect(()=>{Xe(je,{align:je<=1?"end":"auto"})},[je,Xe]),u.useEffect(()=>{ve.setActiveIndex(typeof A.items[yc]=="string"?yc+1:yc)},[xe,Ce,A.items,ve]);const et=u.useCallback((vt,lt)=>{if(typeof lt=="string")return;const Et=lt.url;lt.command?(Et&&vt.preventDefault(),lt.command.perform(lt),(!lt.id.startsWith("scopes/")||lt.id==="scopes/apply")&&ve.toggle()):Et?vt.ctrlKey||vt.metaKey||vt.shiftKey||ve.toggle():(ve.setSearch(""),ve.setCurrentRootAction(lt.id)),_e.callbacks?.onSelectAction?.(lt)},[ve,_e]),dt=(0,Cu.usePointerMovedSinceMount)();return(0,L.jsx)("div",{ref:Z,style:{maxHeight:A.maxHeight||400,position:"relative",overflow:"auto"},children:(0,L.jsx)("div",{role:"listbox",id:Zt.KBAR_LISTBOX,style:{height:`${he.totalSize}px`,width:"100%"},children:he.virtualItems.map(vt=>{const lt=ce.current[vt.index],{target:Et,url:It}=lt,_t=typeof lt!="string"&&{onPointerMove:()=>dt&&je!==vt.index&&ve.setActiveIndex(vt.index),onPointerDown:()=>ve.setActiveIndex(vt.index),onClick:Cn=>et(Cn,lt)},rn=vt.index===je,Mn={id:(0,Zt.getListboxItemId)(vt.index),role:"option","aria-selected":rn,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${vt.start}px)`},..._t},cn=u.cloneElement(A.onRender({item:lt,active:rn}),{ref:vt.measureRef});return It?(0,L.jsx)("a",{href:typeof It=="function"?It(xe):It,target:Et,ref:rn?S:null,...Mn,children:cn},vt.index):(0,L.jsx)("div",{ref:rn?S:null,...Mn,children:cn},vt.index)})})})},Em="kbar-listbox",Pm=A=>`kbar-listbox-item-${A}`;function bm(A){const{query:S,search:Z,actions:ce,currentRootActionId:he,activeIndex:ve,showing:xe,options:Ce}=(0,Zt.useKBar)(lt=>({search:lt.searchQuery,currentRootActionId:lt.currentRootActionId,actions:lt.actions,activeIndex:lt.activeIndex,showing:lt.visualState===Zt.VisualState.showing})),[je,_e]=u.useState(Z);u.useEffect(()=>{S.setSearch(je)},[je,S]);const{defaultPlaceholder:Xe,...et}=A;u.useEffect(()=>(S.setSearch(""),S.getInput().focus(),_e(""),()=>S.setSearch("")),[he,S]);const dt=Xe??"Type a command or search\u2026",vt=(0,Pt.of)(Dm);return(0,L.jsx)("input",{...et,className:vt.input,ref:S.inputRefSetter,autoFocus:!0,autoComplete:"off",role:"combobox",spellCheck:"false","aria-expanded":xe,"aria-controls":Em,"aria-activedescendant":Pm(ve),value:je,placeholder:dt,onChange:lt=>{A.onChange?.(lt),_e(lt.target.value),Ce?.callbacks?.onQueryChange?.(lt.target.value)},onKeyDown:lt=>{if(A.onKeyDown?.(lt),he&&!Z&&lt.key==="Backspace"){const Et=ce[he].parent;S.setCurrentRootAction(Et)}}})}const Dm=A=>({input:(0,Je.css)({label:"kbar-search-input",fontSize:A.typography.body.fontSize,fontWeight:A.typography.fontWeightMedium,lineHeight:A.typography.body.lineHeight,color:A.colors.text.secondary,width:"100%",outline:"none",paddingLeft:0})}),Tu=u.forwardRef(({action:A,active:S,currentRootActionId:Z},ce)=>{const he=u.useMemo(()=>{if(!Z)return A.ancestors;const je=A.ancestors.findIndex(_e=>_e.id===Z);return A.ancestors.slice(je+1)},[A.ancestors,Z]),ve=(0,Pt.of)(Cm);let xe=A.name;const Ce=je=>!!(je.command?.perform||je.url);return A.children.length&&!Ce(A)&&!xe.endsWith("...")&&(xe+="..."),(0,L.jsx)("div",{ref:ce,className:(0,Je.cx)(ve.row,S&&ve.activeRow),children:(0,L.jsxs)("div",{className:ve.actionContainer,children:[A.icon,(0,L.jsxs)("div",{className:ve.textContainer,children:[he.map(je=>(0,L.jsx)(u.Fragment,{children:!Ce(je)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("span",{className:ve.breadcrumbAncestor,children:je.name}),(0,L.jsx)("span",{className:ve.breadcrumbSeparator,children:"\u203A"})]})},je.id)),(0,L.jsx)("span",{children:xe})]}),A.subtitle&&(0,L.jsx)("span",{className:ve.subtitleText,children:A.subtitle})]})})});Tu.displayName="ResultItem";const Cm=A=>({row:(0,Je.css)({padding:A.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:A.shape.radius.default,margin:A.spacing(0,1)}),activeRow:(0,Je.css)({color:A.colors.text.maxContrast,background:A.colors.emphasize(A.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:A.spacing(.5),borderRadius:A.shape.radius.default,backgroundImage:A.colors.gradients.brandVertical}}),actionContainer:(0,Je.css)({display:"flex",gap:A.spacing(1),alignItems:"baseline",fontSize:A.typography.fontSize,width:"100%"}),textContainer:(0,Je.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,Je.css)({color:A.colors.text.secondary}),breadcrumbSeparator:(0,Je.css)({color:A.colors.text.secondary,marginLeft:A.spacing(1),marginRight:A.spacing(1)}),subtitleText:(0,Je.css)({...A.typography.bodySmall,color:A.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var Tm=e(76459),Sm=e.n(Tm),Su=e(67020),Mu=e(55860);const Ou=50,ed=8,Mm=6,Ru=5,Om=4,td=3,Rm=2,Im=1,Am=100,Iu=5,Lm=Sm()(Bm,200);async function jm(){if(!qt.TP.user.isSignedIn)return[];const A=(await Su.A.getDashboardOpened()).slice(0,Iu),Z=(await(0,Mu.S)().search({kind:["dashboard"],limit:Iu,uid:A})).view.toArray();return Z.sort((he,ve)=>{const xe=A.indexOf(he.uid),Ce=A.indexOf(ve.uid);return xe-Ce}),Z.map(he=>{const{url:ve,name:xe}=he;return{id:`recent-dashboards${ve}`,name:`${xe}`,section:(0,f.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Mm,url:ve}})}async function Bm(A){if(A.length===0||!qt.TP.user.isSignedIn&&!q.$.anonymousEnabled)return[];const S=await(0,Mu.S)().search({kind:["dashboard","folder"],query:A,limit:Am});return S.view.map(ce=>{const{url:he,name:ve,kind:xe,location:Ce}=ce;return{id:`go/${xe}${he}`,name:`${ve}`,section:xe==="dashboard"?(0,f.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,f.t)("command-palette.section.folder-search-results","Folders"),priority:Im,url:he,subtitle:S.view.dataFrame.meta?.custom?.locationInfo[Ce]?.name}})}function Um({searchQuery:A,show:S}){const[Z,ce]=(0,u.useState)([]),[he,ve]=(0,u.useState)(!1),xe=(0,u.useRef)(0);return(0,u.useEffect)(()=>{const Ce=Date.now();S&&A.length>0?(ve(!0),Lm(A).then(je=>{Ce>xe.current&&(ce(je),ve(!1),xe.current=Ce)})):(ce([]),ve(!1),xe.current=Ce)},[S,A]),{searchResults:Z,isFetchingSearchResults:he}}var nd=e(9628);function Nm({selectedScopes:A,isDirty:S,apply:Z,deselectScope:ce,scopes:he,nodes:ve}){const xe=(0,Pt.of)(Wm);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(dn.B,{alignItems:"center",children:[(0,L.jsx)("span",{className:xe.scopesText,children:(0,L.jsx)(f.x6,{i18nKey:"command-palette.scopes.selected-scopes-label",children:"Scopes: "})}),(0,L.jsx)(dn.B,{wrap:"wrap",children:A?.map(Ce=>{const je=he[Ce.scopeId]?.spec.title||Ce.scopeNodeId&&ve[Ce.scopeNodeId]?.spec.title||Ce.scopeId;return(0,L.jsx)(Ra.m,{selected:!0,icon:"times",label:je,onClick:()=>{ce(Ce.scopeNodeId||Ce.scopeId)}},Ce.scopeId)})})]}),S&&(0,L.jsxs)(me.$n,{onClick:()=>{Z()},children:[(0,L.jsx)(f.x6,{i18nKey:"command-palette.scopes.apply-selected-scopes",children:"Apply"}),"\xA0",(0,L.jsx)(Ya.E,{variant:"bodySmall",children:`${(0,nd.gn)()}+\u21B5`})]})]})}const Wm=A=>({scopesText:(0,Je.css)({label:"scopesText",fontSize:A.typography.bodySmall.fontSize,fontWeight:A.typography.fontWeightMedium,lineHeight:A.typography.bodySmall.lineHeight,color:A.colors.text.secondary}),selectedScope:(0,Je.css)({background:A.colors.background.secondary,borderRadius:A.shape.radius.default,padding:A.spacing(0,.5),fontSize:A.typography.bodySmall.fontSize,fontWeight:A.typography.fontWeightMedium,lineHeight:A.typography.bodySmall.lineHeight,color:A.colors.text.secondary,display:"inline-flex",alignItems:"center",position:"relative",border:`1px solid ${A.colors.background.secondary}`,whiteSpace:"nowrap",marginRight:A.spacing(.5)})});function Fm(){const A=Ho();if(!(q.$.featureToggles.scopeFilters&&A))return[];const{scopesSelectorService:S}=A;return S.getRecentScopes().map(ce=>{const he=ce.map(xe=>xe.spec.title).join(", "),ve=ce.map(xe=>`${xe.spec.title} ${xe.metadata.name}`).concat(he).join(" ");return{id:he,name:he,section:{name:(0,f.t)("command-palette.section.recent-scopes","Recent scopes"),priority:Ou},subtitle:ce[0]?.parentNode?.spec.title,keywords:ve,priority:Ou,perform:()=>{S.changeScopes(ce.map(xe=>xe.metadata.name))}}})}var bo=e(24120),Fi=e(88483);function ad(){const A=Ho();if(!A)return{updateNode:()=>{},selectScope:()=>{},resetSelection:()=>{},searchAllNodes:()=>Promise.resolve([]),getScopeNodes:Xe=>Promise.resolve([]),apply:()=>{},deselectScope:()=>{},nodes:{},scopes:{},selectedScopes:[],appliedScopes:[],tree:{scopeNodeId:"",expanded:!1,query:""}};const{updateNode:S,filterNode:Z,selectScope:ce,resetSelection:he,searchAllNodes:ve,deselectScope:xe,apply:Ce,getScopeNodes:je}=A.scopesSelectorService,_e=(0,bo.A)(A.scopesSelectorService.stateObservable??new Fi.c,A.scopesSelectorService.state);return{getScopeNodes:je,filterNode:Z,updateNode:S,selectScope:ce,resetSelection:he,searchAllNodes:ve,apply:Ce,deselectScope:xe,..._e}}function sd(){return{id:"scopes",section:(0,f.t)("command-palette.action.scopes","Scopes"),name:(0,f.t)("command-palette.action.scopes","Scopes"),keywords:"scopes filters",priority:ed}}function Km(A,S,Z,ce){const he=[sd()],ve=(xe,Ce)=>{if(!(!xe.children||Object.keys(xe.children).length===0))for(const je of Object.keys(xe.children)){const _e=xe.children[je],Xe=A[je],et=Z.some(vt=>vt.scopeNodeId?vt.scopeNodeId===Xe.metadata.name:vt.scopeId===Xe.spec.linkId);if(Xe.spec.nodeType==="leaf"&&et)continue;let dt=rd(Xe,ce,Ce,Xe.spec.parentName?A[Xe.spec.parentName]?.spec.title:void 0);he.push(dt),ve(_e,dt.id)}};return ve(S,"scopes"),he}function rd(A,S,Z,ce){let he;const ve=ce||A.spec.parentName||void 0;return Z?(he={id:`${Z}/${A.metadata.name}`,name:A.spec.title,subtitle:ve,keywords:`${A.spec.title} ${A.metadata.name}`,priority:ed,parent:Z},A.spec.nodeType==="leaf"&&(he.perform=()=>{S(A.metadata.name)})):he={id:`scopes/${A.metadata.name}`,name:A.spec.title,keywords:`${A.spec.title} ${A.metadata.name}`,priority:ed,section:(0,f.t)("command-palette.action.scopes","Scopes"),subtitle:ve,perform:()=>{S(A.metadata.name)}},he}function wm(){const A=Fm();(0,Zt.useRegisterActions)(A,[A])}function Vm(A,S,Z){if(!q.$.featureToggles.scopeFilters)return{scopesRow:void 0};const ce=Gm(A,Z),he=$m(A,Z),ve=ce||he;return(0,Zt.useRegisterActions)(ve,[ve]),zm(S)}function $m(A,S){const{updateNode:Z,selectScope:ce,resetSelection:he,nodes:ve,tree:xe,selectedScopes:Ce}=ad();return(0,u.useEffect)(()=>(Z("",!0,""),he(),()=>{he()}),[Z,he]),(0,u.useEffect)(()=>{const je=!S||S==="scopes"?"":(0,ie.last)(S.split("/"));Z(je,!0,A)},[Z,A,S]),(0,u.useMemo)(()=>Km(ve,xe,Ce,ce),[ve,xe,Ce,ce])}function zm(A){const{nodes:S,scopes:Z,selectedScopes:ce,appliedScopes:he,deselectScope:ve,apply:xe}=ad(),Ce=he.map(_e=>_e.scopeId).sort().join("")!==ce.map(_e=>_e.scopeId).sort().join(""),je=(0,u.useCallback)(()=>{xe(),A()},[xe,A]);return(0,u.useEffect)(()=>{function _e(Xe){Ce&&Xe.key==="Enter"&&Xe.metaKey&&(Xe.preventDefault(),je())}return window.addEventListener("keydown",_e),()=>window.removeEventListener("keydown",_e)},[Ce,je]),{scopesRow:Ce||ce?.length?(0,L.jsx)(Nm,{nodes:S,scopes:Z,deselectScope:ve,selectedScopes:ce,apply:je,isDirty:Ce}):null}}function Gm(A,S){const{selectScope:Z,searchAllNodes:ce,getScopeNodes:he}=ad(),[ve,xe]=(0,u.useState)(void 0),Ce=(0,u.useRef)();return(0,u.useEffect)(()=>{(!S||S==="scopes")&&A&&q.$.featureToggles.scopeSearchAllLevels?(Ce.current=A,ce(A,10).then(je=>{if(Ce.current===A){const _e=new Map;if(q.$.featureToggles.useMultipleScopeNodesEndpoint){const Xe=[...new Set(je.map(et=>et.spec.parentName).filter(et=>et!==void 0))];he(Xe).then(et=>{for(const lt of et)_e.set(lt.metadata.name,lt.spec.title);const dt=je.filter(lt=>lt.spec.nodeType==="leaf"),vt=[sd()];for(const lt of dt){const Et=_e.get(lt.spec.parentName);vt.push(rd(lt,Z,S||void 0,Et||void 0))}xe(vt)})}else{const Xe=je.filter(dt=>dt.spec.nodeType==="leaf"),et=[sd()];for(const dt of Xe)et.push(rd(dt,Z,S||void 0));xe(et)}}})):(Ce.current=void 0,xe(void 0))},[ce,A,S,Z,he]),ve}var Mr=e(30362),Hm=e(79776);const Au=()=>q.$.featureToggles.inviteUserExperimental&&q.$.externalUserMngLinkUrl&&xa.TP.hasPermission(ln.w.OrgUsersAdd),Lu=(A,S)=>{(0,vn.rR)("invite_user_button_clicked",{placement:A});const Z=(0,Hm.o)(S);window.open(Z.toString(),"_blank")};var Hl=e(44410),xc=e(64762),rD=e(69738);const ju="grafana.dev.mockApi",Bu=()=>Sr.A.getBool(ju,!1),oD=()=>{const A=Bu();store.set(ju,String(!A));const S=A?"Disabling":"Enabling";sendAppNotification(`${S} Mock API`,"Reloading...",AppNotificationSeverity.Info),setTimeout(()=>{window.location.reload()},200)},Qm=async()=>{const A=Bu()},_m=()=>{},iD=async()=>{const A=new PreferencesService("user"),S=await A.load(),Z=S.language===PSEUDO_LOCALE,ce=Z?"Disabling":"Enabling";sendAppNotification(`${ce} pseudo locale`,"Reloading...",AppNotificationSeverity.Info),await A.update({...S,language:Z?DEFAULT_LANGUAGE:PSEUDO_LOCALE}),setTimeout(()=>{window.location.reload()},200)};function Uu(A){return"navModel."+(A.id??A.url??A.text??A.subTitle)}function Nu(A,S=[]){const Z=[];for(let ce of A){ce.id==="help"&&(ce=(0,Mr.Vp)({...ce}),delete ce.url);const{url:he,target:ve,text:xe,isCreateAction:Ce,children:je,onClick:_e,keywords:Xe}=ce,et=!!je?.length;if(!(he||_e||et))continue;let dt=he;he&&(ce.id==="connections-add-new-connection"||ce.id==="standalone-plugin-page-/connections/add-new-connection")&&(dt=_t=>{const rn=Xe?.find(Mn=>Mn.toLowerCase().includes(_t.toLowerCase()));return rn?`${he}?search=${rn}`:he});const vt=Ce?(0,f.t)("command-palette.section.actions","Actions"):(0,f.t)("command-palette.section.pages","Pages"),lt=Ce?Ru:Om,Et=S.map(_t=>_t.text).join(" > "),It={id:Uu(ce),name:xe,section:vt,url:dt,target:ve,parent:S.length>0&&!Ce?Uu(S[S.length-1]):void 0,perform:_e,keywords:Xe?.join(" "),priority:lt,subtitle:Ce?void 0:Et};if(Z.push(It),je?.length){const _t=Nu(je,[...S,ce]);Z.push(..._t)}}return Z}function km(){return[{id:"preferences/theme",name:(0,f.t)("command-palette.action.change-theme","Change theme"),keywords:"interface color dark light",section:(0,f.t)("command-palette.section.preferences","Preferences"),priority:td},{id:"preferences/dark-theme",name:(0,f.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,Hl.K)("dark"),parent:"preferences/theme",priority:td},{id:"preferences/light-theme",name:(0,f.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,Hl.K)("light"),parent:"preferences/theme",priority:td}]}function Ym(){const A=(0,Ma.d4)(S=>S.navBarTree);return(0,u.useMemo)(()=>{const S=Nu(A);return Au()&&S.push({id:"invite-user",name:(0,f.t)("navigation.invite-user.invite-new-user-button","Invite new user"),section:(0,f.t)("command-palette.section.actions","Actions"),priority:Ru,perform:()=>{Lu("command_palette_actions","invite-user-command-palette")}}),[...km(),...S]},[A])}var Ql=e(54092);const Jm={};function Xm(){const{links:A}=(0,N.U)({extensionPointId:Ql.SM.CommandPalette,context:Jm,limitPerPlugin:40});return(0,u.useMemo)(()=>A.map(S=>({section:S.category??"Extensions",priority:Rm,id:S.id,name:S.title,perform:()=>S.onClick&&S.onClick(),url:S.path})),[A])}function Zm(){const A=Xm(),S=Ym(),Z=(0,u.useMemo)(()=>[...S,...A],[S,A]);(0,Zt.useRegisterActions)(Z,[Z])}function qm(){const[A,S]=(0,u.useState)([]);(0,u.useEffect)(()=>{jm().then(Z=>S(Z)).catch(Z=>{console.error("Error loading recent dashboard actions",Z)})},[]),(0,Zt.useRegisterActions)(A,[A])}var eg=e(99885);const Wu={name:"none",priority:Zt.Priority.NORMAL};function od(A,S){return S.priority-A.priority}function tg(){const{search:A,actions:S,rootActionId:Z}=(0,Zt.useKBar)(Xe=>({search:Xe.searchQuery,actions:Xe.actions,rootActionId:Xe.currentRootActionId})),ce=u.useMemo(()=>Object.keys(S).reduce((Xe,et)=>{const dt=S[et];if(!dt.parent&&!Z&&Xe.push(dt),dt.id===Z)for(let vt=0;vt<dt.children.length;vt++)Xe.push(dt.children[vt]);return Xe},[]).sort(od),[S,Z]),he=u.useCallback(Xe=>{let et=[];for(let dt=0;dt<Xe.length;dt++)et.push(Xe[dt]);return function dt(vt,lt=et){for(let Et=0;Et<vt.length;Et++)if(vt[Et].children.length>0){let It=vt[Et].children;for(let _t=0;_t<It.length;_t++)lt.push(It[_t]);dt(vt[Et].children,lt)}return lt}(Xe)},[]),ve=!A,xe=u.useMemo(()=>ve?ce:he(ce),[he,ce,ve]),Ce=ng(xe,A),je=u.useMemo(()=>{let Xe={},et=[],dt=[];for(let lt=0;lt<Ce.length;lt++){const Et=Ce[lt],It=Et.action,_t=Et.score||Zt.Priority.NORMAL,rn={name:typeof It.section=="string"?It.section:It.section?.name||Wu.name,priority:typeof It.section=="string"?_t:It.section?.priority||0+_t};Xe[rn.name]||(Xe[rn.name]=[],et.push(rn)),Xe[rn.name].push({priority:It.priority+_t,action:It})}dt=et.sort(od).map(lt=>({name:lt.name,actions:Xe[lt.name].sort(od).map(Et=>Et.action)}));let vt=[];for(let lt=0;lt<dt.length;lt++){let Et=dt[lt];Et.name!==Wu.name&&vt.push(Et.name);for(let It=0;It<Et.actions.length;It++)vt.push(Et.actions[It])}return vt},[Ce]),_e=u.useMemo(()=>Z,[je]);return u.useMemo(()=>({results:je,rootActionId:_e}),[_e,je])}function ng(A,S){const Z=u.useMemo(()=>({filtered:A,search:S}),[A,S]),{filtered:ce,search:he}=(0,Cu.useThrottledValue)(Z);return u.useMemo(()=>{if(he.trim()==="")return ce.map(je=>({score:0,action:je}));const ve=ce.map(({name:je,keywords:_e})=>`${je} ${_e??""}`.toLowerCase()),xe=(0,eg.X)(ve,he);return xe.map((je,_e)=>{const et=ce[je].name.toLowerCase()===he.toLowerCase();let dt=xe.length-_e;return et&&(dt+=100),{action:ce[je],score:dt}})},[ce,he])}function ag(){return Zm(),(0,L.jsx)(Zt.KBarPortal,{children:(0,L.jsx)(sg,{})})}function sg(){const A=id(),S=(0,Pt.of)(ld,A),{query:Z,searchQuery:ce,currentRootActionId:he}=(0,Zt.useKBar)(dt=>({showing:dt.visualState===Zt.VisualState.showing,searchQuery:dt.searchQuery,currentRootActionId:dt.currentRootActionId}));qm(),wm();const ve=(0,u.useCallback)(()=>Z.toggle(),[Z]),{scopesRow:xe}=Vm(ce,ve,he),{searchResults:Ce,isFetchingSearchResults:je}=Um({searchQuery:ce,show:!he}),_e=(0,u.useRef)(null),{overlayProps:Xe}=(0,Du.e)({isOpen:!0,onClose:()=>Z.setVisualState(Zt.VisualState.animatingOut)},_e),{dialogProps:et}=(0,Pu.s)({},_e);return(0,u.useEffect)(()=>{(0,vn.rR)("command_palette_opened")},[]),(0,L.jsx)(Zt.KBarPositioner,{className:S.positioner,children:(0,L.jsx)(Zt.KBarAnimator,{className:S.animator,children:(0,L.jsx)(bu.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,L.jsxs)("div",{...Xe,...et,children:[(0,L.jsxs)("div",{className:S.searchContainer,children:[(0,L.jsx)(Ha.I,{name:"search",size:"md",className:S.searchIcon}),(0,L.jsx)(rg,{}),(0,L.jsx)(bm,{defaultPlaceholder:(0,f.t)("command-palette.search-box.placeholder","Search or jump to..."),className:S.search}),(0,L.jsx)("div",{className:S.loadingBarContainer,children:je&&(0,L.jsx)(gm.G,{width:500,delay:0})})]}),xe?(0,L.jsx)("div",{className:S.searchContainer,children:xe}):null,(0,L.jsx)("div",{className:S.resultsContainer,children:(0,L.jsx)(og,{isFetchingSearchResults:je,searchResults:Ce})})]})})})})}function rg(){const A=id(),S=(0,Pt.of)(ld,A),{actions:Z,currentRootActionId:ce}=(0,Zt.useKBar)(ve=>({actions:ve.actions,currentRootActionId:ve.currentRootActionId})),he=ce?[...Z[ce].ancestors,Z[ce]]:[];return he.length>0&&(0,L.jsx)("span",{className:S.breadcrumbs,children:he.map((ve,xe)=>(0,L.jsxs)(u.Fragment,{children:[ve.name,"\xA0/\xA0"]},ve.id||xe))})}const og=({isFetchingSearchResults:A,searchResults:S})=>{const{results:Z,rootActionId:ce}=tg(),he=id(),ve=(0,Pt.of)(ld,he),xe=(0,f.t)("command-palette.section.dashboard-search-results","Dashboards"),Ce=(0,f.t)("command-palette.section.folder-search-results","Folders"),je=(0,u.useMemo)(()=>S.filter(dt=>dt.id.startsWith("go/dashboard")).map(dt=>new Zt.ActionImpl(dt,{store:{}})),[S]),_e=(0,u.useMemo)(()=>S.filter(dt=>dt.id.startsWith("go/folder")).map(dt=>new Zt.ActionImpl(dt,{store:{}})),[S]),Xe=(0,u.useMemo)(()=>{const dt=[...Z];return _e.length>0&&(dt.push(Ce),dt.push(..._e)),je.length>0&&(dt.push(xe),dt.push(...je)),dt},[Z,xe,je,Ce,_e]),et=!A&&Xe.length===0;return(0,u.useEffect)(()=>{et&&(0,vn.rR)("grafana_empty_state_shown",{source:"command_palette"})},[et]),et?(0,L.jsx)(vm.p,{variant:"not-found",role:"alert",message:(0,f.t)("command-palette.empty-state.message","No results found")}):(0,L.jsx)(xm,{items:Xe,maxHeight:650,onRender:({item:dt,active:vt})=>{const lt=Xe[0]===dt;return typeof dt=="string"?(0,L.jsx)("div",{className:(0,Je.cx)(ve.sectionHeader,lt&&ve.sectionHeaderFirst),children:dt}):(0,L.jsx)(Tu,{action:dt,active:vt,currentRootActionId:ce})}})},id=()=>{const S=document.querySelector(`[data-testid="${Za.Tp.components.NavToolbar.commandPaletteTrigger}"]`)?.getBoundingClientRect().right??0;return document.body.clientWidth-S},ld=(A,S)=>({positioner:(0,Je.css)({zIndex:A.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:A.components.overlay.background}}),animator:(0,Je.css)({width:"100%",maxWidth:A.breakpoints.values.md,background:A.colors.background.primary,color:A.colors.text.primary,borderRadius:A.shape.radius.lg,border:`1px solid ${A.colors.border.weak}`,overflow:"hidden",boxShadow:A.shadows.z3,[A.breakpoints.up("lg")]:{position:"fixed",right:S,left:S,maxWidth:"unset",width:"unset"}}),loadingBarContainer:(0,Je.css)({position:"absolute",left:0,right:0,bottom:0}),searchContainer:(0,Je.css)({alignItems:"center",background:A.components.input.background,borderBottom:`1px solid ${A.colors.border.weak}`,display:"flex",padding:A.spacing(1,2),position:"relative",justifyContent:"space-between"}),search:(0,Je.css)({fontSize:A.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:A.components.input.text}),spinner:(0,Je.css)({height:"22px"}),resultsContainer:(0,Je.css)({paddingBottom:A.spacing(1)}),sectionHeader:(0,Je.css)({padding:A.spacing(1.5,2,2,2),fontSize:A.typography.bodySmall.fontSize,fontWeight:A.typography.fontWeightMedium,color:A.colors.text.secondary,borderTop:`1px solid ${A.colors.border.weak}`,marginTop:A.spacing(1)}),sectionHeaderFirst:(0,Je.css)({paddingBottom:A.spacing(1),borderTop:"none",marginTop:0}),breadcrumbs:(0,Je.css)({label:"breadcrumbs",fontSize:A.typography.body.fontSize,fontWeight:A.typography.fontWeightMedium,lineHeight:A.typography.body.lineHeight,color:A.colors.text.primary,display:"flex",alignItems:"center",whiteSpace:"nowrap"}),scopesText:(0,Je.css)({label:"scopesText",fontSize:A.typography.bodySmall.fontSize,fontWeight:A.typography.fontWeightMedium,lineHeight:A.typography.bodySmall.lineHeight,color:A.colors.text.secondary}),searchIcon:(0,Je.css)({marginRight:A.spacing(1)}),selectedScope:(0,Je.css)({background:A.colors.background.secondary,borderRadius:A.shape.radius.default,padding:A.spacing(0,.5),fontSize:A.typography.bodySmall.fontSize,fontWeight:A.typography.fontWeightMedium,lineHeight:A.typography.bodySmall.lineHeight,color:A.colors.text.secondary,display:"inline-flex",alignItems:"center",position:"relative",border:`1px solid ${A.colors.background.secondary}`,whiteSpace:"nowrap",marginRight:A.spacing(.5)})});var cd=e(92807),Fu=e(5556),ig=e(70958);function lg({folder:A,folderPath:S,folders:Z,onFolderUpdate:ce}){const he=(0,Pt.of)(cg);return(0,L.jsxs)("div",{className:he.container,role:"treeitem","aria-selected":A.expanded,children:[(0,L.jsxs)("button",{className:he.expand,"data-testid":`scopes-dashboards-${A.title}-expand`,"aria-label":A.expanded?(0,f.t)("scopes.dashboards.collapse","Collapse"):(0,f.t)("scopes.dashboards.expand","Expand"),onClick:()=>{ce(S,!A.expanded)},children:[(0,L.jsx)(Ha.I,{name:A.expanded?"angle-down":"angle-right",className:he.icon}),A.title]}),A.expanded&&(0,L.jsx)("div",{className:he.children,children:(0,L.jsx)(Ku,{folders:Z,folderPath:S,onFolderUpdate:ce})})]})}const cg=A=>({container:(0,Je.css)({display:"flex",flexDirection:"column",padding:A.spacing(.5,0)}),expand:(0,Je.css)({alignItems:"flex-start",background:"none",border:0,display:"flex",gap:A.spacing(1),margin:0,padding:0,textAlign:"left",wordBreak:"break-word"}),icon:(0,Je.css)({marginTop:A.spacing(.25)}),children:(0,Je.css)({paddingLeft:A.spacing(3)})});function dg({to:A,title:S,id:Z}){const ce=(0,Pt.of)(fg),he=(0,u.useMemo)(()=>ug(A),[A]),ve=(0,bn.zy)().pathname,xe=Zc(ve,A);return(0,L.jsxs)(xu.Link,{to:A,"aria-current":xe?"page":void 0,className:(0,Je.cx)(ce.container,xe&&ce.current),"data-testid":`scopes-dashboards-${Z}`,role:"treeitem",children:[(0,L.jsx)(Ha.I,{name:he})," ",S]},Z)}function ug(A){const S=b.I.stripBaseFromUrl(A);for(const[Z,ce]of hg.entries())if(S.startsWith(Z))return ce;return"link"}const hg=new Map([["http","external-link-alt"],["/d","apps"],["/explore/metrics","drilldown"],["/a/grafana-metricsdrilldown-app/","drilldown"],["/a/grafana-lokiexplore-app/","drilldown"],["/a/grafana-exploretraces-app/","drilldown"],["/a/grafana-pyroscope-app/","drilldown"]]),fg=A=>({container:(0,Je.css)({display:"flex",alignItems:"center",gap:A.spacing(1),padding:A.spacing(.75,0),textAlign:"left",paddingLeft:A.spacing(1),wordBreak:"break-word","&:hover, &:focus":(0,Je.css)({textDecoration:"underline"})}),current:(0,Je.css)({position:"relative",background:A.colors.action.selected,borderRadius:`0 ${A.shape.radius.default} ${A.shape.radius.default} 0`,"&::before":{backgroundImage:A.colors.gradients.brandVertical,borderRadius:A.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",width:A.spacing(.5),top:0,left:0}})});function Ku({folders:A,folderPath:S,onFolderUpdate:Z}){const[ce]=(0,ig.s)(),he=S[S.length-1],ve=A[he];return(0,L.jsxs)("div",{role:"tree",children:[Object.entries(ve.folders).map(([xe,Ce])=>(0,L.jsx)(lg,{folder:Ce,folders:ve.folders,folderPath:[...S,xe],onFolderUpdate:Z},xe)),Object.values(ve.suggestedNavigations).map(xe=>(0,L.jsx)(dg,{to:Fu.kM.renderUrl(xe.url,ce),title:xe.title,id:xe.id},xe.id+xe.title))]})}var wu=e(40996),Vu=e(12737);function pg({disabled:A,query:S,onChange:Z}){const ce=(0,Pt.of)(mg),[he,ve]=(0,u.useState)({value:S,dirty:!1}),[xe]=(0,wu.A)(()=>{he.dirty&&Z(he.value)},500,[he.dirty,he.value]);return(0,u.useEffect)(()=>{(xe()||!he.dirty)&&he.value!==S&&ve({value:S,dirty:!1})},[xe,he,S]),(0,L.jsx)("div",{className:ce.container,children:(0,L.jsx)(Vu.Z,{disabled:A,placeholder:(0,f.t)("scopes.dashboards.search","Search"),value:he.value,"data-testid":"scopes-dashboards-search",onChange:Ce=>ve({value:Ce,dirty:!0})})})}const mg=A=>({container:(0,Je.css)({flex:"0 1 auto"})});function gg(){const A=(0,Pt.of)(vg),S=(0,mc.b)(),Z=Ho();if((0,bo.A)(Z?.scopesDashboardsService.stateObservable??new Fi.c,Z?.scopesDashboardsService.state),!Z||!S||!S.state.enabled||!S.state.drawerOpened||S.state.readOnly)return null;const{scopesDashboardsService:ce}=Z,{loading:he,forScopeNames:ve,dashboards:xe,scopeNavigations:Ce,searchQuery:je,filteredFolders:_e}=ce.state,{changeSearchQuery:Xe,updateFolder:et,clearSearchQuery:dt}=ce;if(!he){if(ve.length===0)return(0,L.jsx)("div",{className:(0,Je.cx)(A.container,A.noResultsContainer),"data-testid":"scopes-dashboards-notFoundNoScopes",children:(0,L.jsx)(f.x6,{i18nKey:"scopes.dashboards.noResultsNoScopes",children:"No scopes selected"})});if(xe.length===0&&Ce.length===0)return(0,L.jsx)("div",{className:(0,Je.cx)(A.container,A.noResultsContainer),"data-testid":"scopes-dashboards-notFoundForScope",children:(0,L.jsx)(f.x6,{i18nKey:"scopes.dashboards.noResultsForScopes",children:"No dashboards or links found for the selected scopes"})})}return(0,L.jsxs)("div",{className:A.container,"data-testid":"scopes-dashboards-container",children:[(0,L.jsx)(pg,{disabled:he,query:je,onChange:Xe}),he?(0,L.jsx)(au._,{className:A.loadingIndicator,text:(0,f.t)("scopes.dashboards.loading","Loading dashboards"),"data-testid":"scopes-dashboards-loading"}):_e[""]?(0,L.jsx)(cd.P,{children:(0,L.jsx)(Ku,{folders:_e,folderPath:[""],onFolderUpdate:et})}):(0,L.jsxs)("p",{className:A.noResultsContainer,"data-testid":"scopes-dashboards-notFoundForFilter",children:[(0,L.jsx)(f.x6,{i18nKey:"scopes.dashboards.noResultsForFilter",children:"No results found for your query"}),(0,L.jsx)(me.$n,{variant:"secondary",onClick:dt,"data-testid":"scopes-dashboards-notFoundForFilter-clear",children:(0,L.jsx)(f.x6,{i18nKey:"scopes.dashboards.noResultsForFilterClear",children:"Clear search"})})]})]})}const vg=A=>({container:(0,Je.css)({backgroundColor:A.colors.background.primary,borderRight:`1px solid ${A.colors.border.weak}`,display:"flex",flexDirection:"column",height:"100%",gap:A.spacing(1),padding:A.spacing(2),width:A.spacing(37.5)}),noResultsContainer:(0,Je.css)({alignItems:"center",display:"flex",flexDirection:"column",gap:A.spacing(1),height:"100%",justifyContent:"center",margin:0,textAlign:"center"}),loadingIndicator:(0,Je.css)({alignSelf:"center"})});var yg=e(59875),$u=e(66588),zu=e(47925),Gu=e(38206),xg=e(89409),Eg=e(78685),Pg=e(30360),_l=e(1906),Hu=e(991),bg=e(90666);const Dg=({children:A})=>{const S=(0,Pt.of)(Cg);return(0,L.jsxs)(L.Fragment,{children:[A,(0,L.jsx)("span",{className:S.highlight})]})},Cg=A=>({highlight:(0,Je.css)({backgroundColor:A.colors.success.main,borderRadius:A.shape.radius.circle,width:"6px",height:"6px",display:"inline-block;",position:"absolute",top:"50%",transform:"translateY(-50%)"})});var Tg=e(20941);function Qu({children:A,isActive:S,onClick:Z,target:ce,url:he,onPin:ve,isPinned:xe}){const Ce=(0,Pt.$j)(),je=Sg(Ce,S),_e=!ce&&he.startsWith("/")?Tg.N:"a",Xe=(0,L.jsxs)("div",{className:je.linkContent,children:[A,ce==="_blank"&&(0,L.jsx)(Ha.I,{"data-testid":"external-link-icon",name:"external-link-alt"})]});return(0,L.jsxs)("div",{className:(0,Je.cx)(je.wrapper,{[je.wrapperActive]:S,[je.wrapperBookmark]:q.$.featureToggles.pinNavItems}),children:[(0,L.jsx)(_e,{"data-testid":Za.Tp.components.NavMenu.item,className:je.container,href:he,target:ce,onClick:Z,...S&&{"aria-current":"page"},children:Xe}),q.$.featureToggles.pinNavItems&&qt.TP.isSignedIn&&he&&he!=="/bookmarks"&&(0,L.jsx)(js.K,{name:"bookmark",className:"pin-icon",iconType:xe?"solid":"default",onClick:()=>ve(he),"aria-label":xe?(0,f.t)("navigation.item.remove-bookmark","Remove from Bookmarks"):(0,f.t)("navigation.item.add-bookmark","Add to Bookmarks")})]})}Qu.displayName="MegaMenuItemText";const Sg=(A,S)=>({wrapper:(0,Je.css)({display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}),wrapperBookmark:(0,Je.css)({".pin-icon":{visibility:"hidden"},"&:hover, &:focus-within":{a:{width:"calc(100% - 20px)"},".pin-icon":{visibility:"visible"}}}),wrapperActive:(0,Je.css)({backgroundColor:A.colors.action.selected,borderTopRightRadius:A.shape.radius.default,borderBottomRightRadius:A.shape.radius.default,position:"relative","&::before":{backgroundImage:A.colors.gradients.brandVertical,borderRadius:A.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",transform:"translateX(-50%)",width:A.spacing(.5)}}),container:(0,Je.css)({alignItems:"center",color:S?A.colors.text.primary:A.colors.text.secondary,height:"100%",position:"relative",width:"100%","&:hover span, &:focus-visible span":{color:A.colors.text.primary,textDecoration:"underline"},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${A.colors.primary.main}`,outlineOffset:"-2px"}}),linkContent:(0,Je.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%",justifyContent:"space-between"})}),Ec=2;function _u({link:A,activeItem:S,level:Z=0,onClick:ce,onPin:he,isPinned:ve}){const{chrome:xe}=(0,nr.Il)(),je=xe.useState().megaMenuDocked,_e=(0,bn.zy)(),Xe=A.highlightText?Dg:u.Fragment,et=(0,Mr.m0)(A,S),dt=A===S||Z===Ec&&et,[vt,lt]=(0,Eg.A)(`grafana.navigation.expanded[${A.text}]`,!!et),Et=Z<Ec&&!!(ku(A)||A.emptyMessage),It=(0,u.useRef)(null),_t=(0,Pt.of)(Mg);if((0,u.useEffect)(()=>{et&&lt(!0)},[et,_e,je,lt]),(0,u.useEffect)(()=>{dt&&It.current&&Og(It.current)&&It.current.scrollIntoView({block:"center"})},[dt]),!A.url)return null;let rn=null;A.icon?rn=(0,L.jsx)(Ha.I,{className:_t.icon,name:(0,Pg.Uo)(A.icon)??"link",size:"lg"}):A.img&&(rn=(0,L.jsx)(dn.B,{width:3,justifyContent:"center",children:(0,L.jsx)("img",{className:_t.img,src:A.img,alt:""})}));function Mn(cn){return cn?"angle-up":"angle-down"}return(0,L.jsxs)("li",{ref:It,className:_t.listItem,children:[(0,L.jsxs)("div",{className:(0,Je.cx)(_t.menuItem,{[_t.menuItemWithIcon]:!!(Z===0&&rn)}),children:[Z!==0&&(0,L.jsx)(bg.T,{level:Z===Ec?Z-1:Z,spacing:3}),Z===Ec&&(0,L.jsx)("div",{className:_t.itemConnector}),(0,L.jsx)("div",{className:_t.collapsibleSectionWrapper,children:(0,L.jsx)(Qu,{isActive:dt,onClick:()=>{A.onClick?.(),ce?.()},target:A.target,url:A.url,onPin:()=>he(A),isPinned:ve(A.url),children:(0,L.jsxs)("div",{className:(0,Je.cx)(_t.labelWrapper,{[_t.hasActiveChild]:et,[_t.labelWrapperWithIcon]:!!(Z===0&&rn)}),children:[Z===0&&rn&&(0,L.jsx)(Xe,{children:rn}),(0,L.jsx)(Ya.E,{truncate:!0,element:"p",children:A.text}),A.isNew&&(0,L.jsx)(Hu.y,{featureState:_l.Ay.new})]})})}),(0,L.jsx)("div",{className:_t.collapseButtonWrapper,children:Et&&(0,L.jsx)(js.K,{"aria-label":vt?(0,f.t)("navigation.megamenu-item.collapse-aria-label","Collapse section: {{sectionName}}",{sectionName:A.text}):(0,f.t)("navigation.megamenu-item.expand-aria-label","Expand section: {{sectionName}}",{sectionName:A.text}),className:_t.collapseButton,onClick:()=>lt(!vt),name:Mn(!!vt),size:"md",variant:"secondary"})})]}),Et&&vt&&(0,L.jsx)("ul",{className:_t.children,children:ku(A)?A.children.filter(cn=>!cn.isCreateAction).map(cn=>(0,L.jsx)(_u,{link:cn,activeItem:S,onClick:ce,level:Z+1,onPin:he,isPinned:ve},`${A.text}-${cn.text}`)):(0,L.jsx)("div",{className:_t.emptyMessage,"aria-live":"polite",children:A.emptyMessage})})]})}const Mg=A=>({icon:(0,Je.css)({width:A.spacing(3)}),img:(0,Je.css)({height:A.spacing(2),width:A.spacing(2)}),listItem:(0,Je.css)({flex:1,maxWidth:"100%"}),menuItem:(0,Je.css)({display:"flex",alignItems:"center",gap:A.spacing(1.5),height:A.spacing(4),paddingLeft:A.spacing(.5),position:"relative"}),menuItemWithIcon:(0,Je.css)({paddingLeft:A.spacing(0)}),collapseButtonWrapper:(0,Je.css)({display:"flex",justifyContent:"center",width:A.spacing(3),flexShrink:0}),itemConnector:(0,Je.css)({position:"relative",height:"100%",width:A.spacing(1.5),"&::before":{borderLeft:`1px solid ${A.colors.border.medium}`,content:'""',height:"100%",right:0,position:"absolute",transform:"translateX(50%)"}}),collapseButton:(0,Je.css)({margin:0}),collapsibleSectionWrapper:(0,Je.css)({alignItems:"center",display:"flex",flex:1,height:"100%",minWidth:0}),labelWrapper:(0,Je.css)({display:"flex",alignItems:"center",gap:A.spacing(.75),minWidth:0,paddingLeft:A.spacing(1)}),labelWrapperWithIcon:(0,Je.css)({paddingLeft:A.spacing(.5),gap:A.spacing(.75)}),hasActiveChild:(0,Je.css)({color:A.colors.text.primary}),children:(0,Je.css)({display:"flex",listStyleType:"none",flexDirection:"column"}),emptyMessage:(0,Je.css)({color:A.colors.text.secondary,fontStyle:"italic",padding:A.spacing(1,1.5,1,7)})});function ku(A){return!!(A.children&&A.children.length>0)}function Og(A){const S=A.getBoundingClientRect();return S.bottom<0||S.top>=window.innerHeight}var Rg=e(5071);const Qo="300px",dd=(0,u.memo)((0,u.forwardRef)(({onClose:A,...S},Z)=>{const ce=(0,Ma.d4)(_t=>_t.navBarTree),he=(0,Pt.of)(Ig),ve=(0,bn.zy)(),{chrome:xe}=(0,nr.Il)(),Ce=(0,Ma.wA)(),je=xe.useState(),[_e]=(0,zu.o)(),Xe=(0,Rg.s)(),et=ce.filter(_t=>_t.id!=="profile"&&_t.id!=="help").map(_t=>(0,Mr.J0)(_t,je.megaMenuDocked));if(q.$.featureToggles.pinNavItems){const _t=et.find(rn=>rn.id==="bookmarks");_t&&(_t.children=Xe.reduce((rn,Mn)=>{const cn=(0,Mr.Wk)(et,Mn);if(!cn)return rn;const Cn={id:cn.id,text:cn.text,url:cn.url,parentItem:{id:"bookmarks",text:"Bookmarks"}};return rn.push((0,Mr.J0)(Cn,je.megaMenuDocked)),rn},[]))}const dt=(0,Mr.A6)(et,je.sectionNav.node,ve.pathname),vt=()=>{xe.setMegaMenuOpen(!je.megaMenuOpen)},lt=()=>{xe.setMegaMenuDocked(!je.megaMenuDocked),je.megaMenuDocked&&xe.setMegaMenuOpen(!1)},Et=(0,u.useCallback)(_t=>!_t||!Xe?.length?!1:Xe?.includes(_t),[Xe]),It=_t=>{const rn=_t.url;if(rn&&q.$.featureToggles.pinNavItems){const Mn=Et(rn),cn=Mn?Xe.filter(Jn=>rn!==Jn):[...Xe,rn],Cn=Mn?"grafana_nav_item_unpinned":"grafana_nav_item_pinned";(0,vn.rR)(Cn,{path:rn}),_e({patchPrefsCmd:{navbar:{bookmarkUrls:cn}}}).then(Jn=>{Jn.error||Ce((0,Gu.ve)({item:_t,isSaved:!Mn}))})}};return(0,L.jsxs)("div",{"data-testid":Za.Tp.components.NavMenu.Menu,ref:Z,...S,children:[(0,L.jsx)(xg.fn,{handleDockedMenu:lt,handleMegaMenu:vt,onClose:A}),(0,L.jsx)("nav",{className:he.content,children:(0,L.jsx)(cd.P,{height:"100%",overflowX:"hidden",showScrollIndicators:!0,children:(0,L.jsx)("ul",{className:he.itemList,"aria-label":(0,f.t)("navigation.megamenu.list-label","Navigation"),children:et.map((_t,rn)=>(0,L.jsx)(_u,{link:_t,isPinned:Et,onClick:je.megaMenuDocked?void 0:A,activeItem:dt,onPin:It},_t.text))})})})]})}));dd.displayName="MegaMenu";const Ig=A=>({content:(0,Je.css)({display:"flex",flexDirection:"column",minHeight:0,flexGrow:1,position:"relative"}),mobileHeader:(0,Je.css)({display:"flex",justifyContent:"space-between",padding:A.spacing(1,1,1,2),borderBottom:`1px solid ${A.colors.border.weak}`,[A.breakpoints.up("md")]:{display:"none"}}),itemList:(0,Je.css)({boxSizing:"border-box",display:"flex",flexDirection:"column",listStyleType:"none",padding:A.spacing(1,1,2,1),[A.breakpoints.up("md")]:{width:Qo}}),dockMenuButton:(0,Je.css)({display:"none",position:"relative",top:A.spacing(1),[A.breakpoints.up("xl")]:{display:"inline-flex"}})});function Ag({}){const A=(0,Pt.$j)(),{chrome:S}=(0,nr.Il)(),Z=S.useState(),ce=(0,u.useRef)(null),he=(0,u.useRef)(null),ve=A.transitions.duration.shortest,xe=(0,Pt.of)(jg,ve),Ce=Z.megaMenuOpen&&!Z.megaMenuDocked,je=()=>S.setMegaMenuOpen(!1),{overlayProps:_e,underlayProps:Xe}=(0,Du.e)({isDismissable:!0,isOpen:!0,onClose:je,shouldCloseOnInteractOutside:vt=>!document.querySelector(`[data-testid="${Za.Tp.components.Select.menu}"]`)?.contains(vt)},ce),{dialogProps:et}=(0,Pu.s)({},ce),dt=(0,Pt.of)(Lg);return(0,L.jsx)("div",{className:dt.wrapper,children:(0,L.jsxs)(yg.Sf,{children:[(0,L.jsx)($u.A,{nodeRef:ce,in:Ce,unmountOnExit:!0,classNames:xe.overlay,timeout:{enter:ve,exit:0},children:(0,L.jsx)(L.Fragment,{children:Ce&&(0,L.jsx)(bu.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,L.jsx)(dd,{className:dt.menu,onClose:je,ref:ce,..._e,...et})})})}),(0,L.jsx)($u.A,{nodeRef:he,in:Ce,unmountOnExit:!0,classNames:xe.backdrop,timeout:{enter:ve,exit:0},children:(0,L.jsx)("div",{ref:he,className:dt.backdrop,...Xe})})]})})}const Lg=A=>({backdrop:(0,Je.css)({backgroundColor:A.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:A.zIndex.modalBackdrop}),menu:(0,Je.css)({display:"flex",bottom:0,flexDirection:"column",left:0,right:0,zIndex:A.zIndex.modal,position:"fixed",top:0,backgroundColor:A.colors.background.primary,flex:"1 1 0",[A.breakpoints.up("md")]:{right:"unset"}}),wrapper:(0,Je.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:A.zIndex.sidemenu})}),jg=(A,S)=>{const Z={[A.transitions.handleMotion("no-preference")]:{transitionDuration:`${S}ms`,transitionTimingFunction:A.transitions.easing.easeInOut},[A.breakpoints.down("md")]:{overflow:"hidden"}},ce={...Z,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},he={...Z,transitionProperty:"opacity"},ve={width:"100%",[A.breakpoints.up("md")]:{borderRight:`1px solid ${A.colors.border.weak}`,boxShadow:A.shadows.z3,width:Qo}},xe={boxShadow:"none",width:0},Ce={opacity:1},je={opacity:0};return{backdrop:{enter:(0,Je.css)(je),enterActive:(0,Je.css)(he,Ce),enterDone:(0,Je.css)(Ce)},overlay:{enter:(0,Je.css)(xe),enterActive:(0,Je.css)(ce,ve),enterDone:(0,Je.css)(ve)}}};var Ki=e(32899),us=e(45229);function Bg(A,S){if(A===S)return!0;if(!(A instanceof Object)||!(S instanceof Object))return!1;const Z=Object.keys(A),ce=Z.length;for(let he=0;he<ce;he++)if(!(Z[he]in S))return!1;for(let he=0;he<ce;he++)if(A[Z[he]]!==S[Z[he]])return!1;return ce===Object.keys(S).length}var Yu=e(18607);const Ug="grafana_unified_history_entry_clicked",Ng="grafana_unified_history_duplicated_entry_rendered",Wg="grafana_unified_history_drawer_interaction",Fg="grafana_unified_history_show_more",Ju=({entryURL:A,subEntry:S})=>{(0,vn.rR)(Ug,{entryURL:A,subEntry:S})},Kg=({entryName:A,lastEntryURL:S,newEntryURL:Z})=>{(0,vn.rR)(Ng,{entryName:A,lastEntryURL:S,newEntryURL:Z})},Xu=({type:A})=>{(0,vn.rR)(Wg,{type:A})},wg=()=>{(0,vn.rR)(Fg)},ud="grafana.navigation.docked",Zu="grafana.navigation.open",kl="grafana.navigation.history";class Vg{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.megaMenuDocked=!!(window.innerWidth>=q.$.theme2.breakpoints.values.xl&&Sr.A.getBool(ud,window.innerWidth>=q.$.theme2.breakpoints.values.xl)),this.sessionStorageData=window.sessionStorage.getItem("returnToPrevious"),this.returnToPreviousData=this.sessionStorageData?JSON.parse(this.sessionStorageData):void 0,this.state=new Gl.t({chromeless:!0,sectionNav:{node:{text:(0,f.t)("nav.home.title","Home")},main:{text:""}},megaMenuOpen:this.megaMenuDocked&&Sr.A.getBool(Zu,!0),megaMenuDocked:this.megaMenuDocked,kioskMode:null,layout:Yc.k.Canvas,returnToPrevious:this.returnToPreviousData}),this.setReturnToPrevious=S=>{const Z=this.state.getValue().returnToPrevious;(0,vn.rR)("grafana_return_to_previous_button_created",{page:S.href,previousPage:Z?.href}),this.update({returnToPrevious:S}),window.sessionStorage.setItem("returnToPrevious",JSON.stringify(S))},this.clearReturnToPrevious=S=>{const Z=this.state.getValue().returnToPrevious;Z&&(0,vn.rR)("grafana_return_to_previous_button_dismissed",{action:S,page:Z.href}),this.update({returnToPrevious:void 0}),window.sessionStorage.removeItem("returnToPrevious")},this.setMegaMenuOpen=(S,Z=!0)=>{const{megaMenuDocked:ce}=this.state.getValue();ce&&Z&&Sr.A.set(Zu,S),(0,vn.rR)("grafana_mega_menu_open",{state:S}),this.update({megaMenuOpen:S})},this.setMegaMenuDocked=(S,Z=!0)=>{Z&&Sr.A.set(ud,S),(0,vn.rR)("grafana_mega_menu_docked",{state:S}),this.update({megaMenuDocked:S})},this.onToggleKioskMode=()=>{const S=this.getNextKioskMode();this.update({kioskMode:S}),M.Ny.partial({kiosk:this.getKioskUrlValue(S)}),(0,vn.rR)("grafana_kiosk_mode",{action:"toggle",mode:S})}}setMatchedRoute(S){this.currentRoute!==S&&(this.currentRoute=S,this.routeChangeHandled=!1)}update(S){const Z=this.state.getValue(),ce={...Z};this.routeChangeHandled||(ce.actions=void 0,ce.pageNav=void 0,ce.sectionNav={node:{text:(0,f.t)("nav.home.title","Home")},main:{text:""}},ce.chromeless=this.currentRoute?.chromeless,ce.layout=Yc.k.Standard,this.routeChangeHandled=!0),Object.assign(ce,S),ce.chromeless=ce.kioskMode===_s.d9.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(ce,Z)||(q.$.featureToggles.unifiedHistory&&Sr.A.setObject(kl,this.getUpdatedHistory(ce)),this.state.next(ce))}getUpdatedHistory(S){const Z=(0,Yu.Z)(S.sectionNav.node,S.pageNav,{text:"Home",url:"/"},!0),ce=S.pageNav||S.sectionNav.node;let he=Sr.A.getObject(kl,[]);if(Sr.A.getObject("CLICKING_HISTORY"))return Sr.A.setObject("CLICKING_HISTORY",!1),he;if(!ce)return he;const xe=he[0],Ce={name:ce.text,views:[],breadcrumbs:Z,time:Date.now(),url:window.location.href};return xe&&Ce.url.split("?")[0]===xe.url.split("?")[0]?he[0]=Ce:(xe&&xe.name===Ce.name&&Kg({entryName:Ce.name,lastEntryURL:xe.url,newEntryURL:Ce.url}),he=[Ce,...he]),he}ignoreStateUpdate(S,Z){return!!(Bg(S,Z)||(S.sectionNav!==Z.sectionNav||S.pageNav!==Z.pageNav)&&S.actions===Z.actions&&S.layout===Z.layout&&hd(S.sectionNav.node,Z.sectionNav.node)&&hd(S.pageNav,Z.pageNav))}useState(){return(0,bo.A)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),M.Ny.partial({kiosk:null}),(0,vn.rR)("grafana_kiosk_mode",{action:"exit"})}setKioskModeFromUrl(S){let Z;switch(S){case"1":case!0:Z=_s.d9.Full}Z&&Z!==this.state.getValue().kioskMode&&this.update({kioskMode:Z})}getKioskUrlValue(S){switch(S){case _s.d9.Full:return!0;default:return null}}getNextKioskMode(){return us.A.emit(Ki.r1.alertInfo,[(0,f.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),_s.d9.Full}}function hd(A,S){if(A===S)return!0;const Z=A?.children?.find(he=>he.active),ce=S?.children?.find(he=>he.active);return A?.text===S?.text&&A?.url===S?.url&&Z?.url===ce?.url&&hd(A?.parentItem,S?.parentItem)}var fd=e(92270),$g=e(93256);const qu=({label:A,onClick:S,onDismiss:Z})=>{const ce=(0,Pt.of)(zg);return(0,L.jsxs)($g.e,{className:ce.buttonGroup,children:[(0,L.jsx)(me.$n,{icon:"angle-left",size:"sm",variant:"primary",fill:"outline",onClick:S,title:A,className:ce.mainDismissableButton,"data-testid":Za.Tp.components.ReturnToPrevious.backButton,children:A}),(0,L.jsx)(me.$n,{icon:"times","aria-label":(0,f.t)("return-to-previous.dismissable-button","Close"),variant:"primary",fill:"outline",size:"sm",onClick:Z,"data-testid":Za.Tp.components.ReturnToPrevious.dismissButton})]})},zg=A=>({mainDismissableButton:(0,Je.css)({width:"100%","> span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"270px",display:"inline-block"}}),buttonGroup:(0,Je.css)({width:"fit-content",backgroundColor:A.colors.background.secondary})});qu.displayName="DismissableButton";const eh=({href:A,title:S})=>{const Z=(0,Pt.of)(Gg),{chrome:ce}=(0,nr.Il)(),he=(0,u.useCallback)(()=>{M.Ny.push(A),ce.clearReturnToPrevious("clicked")},[A,ce]),ve=(0,u.useCallback)(()=>{ce.clearReturnToPrevious("dismissed")},[ce]);return(0,L.jsx)("div",{className:Z.returnToPrevious,"data-testid":Za.Tp.components.ReturnToPrevious.buttonGroup,children:(0,L.jsx)(qu,{label:(0,f.t)("return-to-previous.button.label","Back to {{title}}",{title:S}),onClick:he,onDismiss:ve})})},Gg=A=>({returnToPrevious:(0,Je.css)({label:"return-to-previous",display:"flex",justifyContent:"center",left:"50%",transform:"translateX(-50%)",zIndex:A.zIndex.tooltip,position:"fixed",bottom:A.spacing.x4,boxShadow:A.shadows.z3})});eh.displayName="ReturnToPrevious";var Or=e(7895),Hg=e(95943),pd=e(43550),th=e(92948);function Qg({href:A,isCurrent:S,text:Z,index:ce,flexGrow:he}){const ve=(0,Pt.of)(_g),xe=()=>{(0,vn.rR)("grafana_breadcrumb_clicked",{url:A})};return(0,L.jsx)("li",{className:ve.breadcrumbWrapper,style:{flexGrow:he},children:S?(0,L.jsx)("span",{"data-testid":Za.XF.Breadcrumbs.breadcrumb(Z),className:ve.breadcrumb,"aria-current":"page",title:Z,children:Z}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("a",{onClick:xe,"data-testid":Za.XF.Breadcrumbs.breadcrumb(Z),className:(0,Je.cx)(ve.breadcrumb,ve.breadcrumbLink),title:Z,href:A,children:Z}),(0,L.jsx)("div",{className:ve.separator,"aria-hidden":!0,children:(0,L.jsx)(Ha.I,{name:"angle-right"})})]})})}const _g=A=>({breadcrumb:(0,Je.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:A.colors.text.secondary}),breadcrumbLink:(0,Je.css)({color:A.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,Je.css)({alignItems:"center",color:A.colors.text.primary,display:"flex",flex:1,gap:A.spacing(.5),minWidth:0,maxWidth:"max-content",padding:A.spacing(.5,0,.5,.5),[A.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,Je.css)({color:A.colors.text.secondary})});function kg({breadcrumbs:A,className:S}){const Z=(0,Pt.of)(Jg);return(0,L.jsx)("nav",{"aria-label":(0,f.t)("navigation.breadcrumbs.aria-label","Breadcrumbs"),className:S,children:(0,L.jsx)("ol",{className:Z.breadcrumbs,children:A.map((ce,he)=>(0,u.createElement)(Qg,{...ce,isCurrent:he===A.length-1,key:he,index:he,flexGrow:Yg(he,A.length)}))})})}function Yg(A,S){return S<5&&A>0&&A<S-2||S>6&&A>1&&A<S-3?4:10}const Jg=A=>({breadcrumbs:(0,Je.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var _o=e(5423);function Xg(A){switch(A){case"grafana-grafanadocsplugin-app":case"grafana-pathfinder-app":return"book";case"grafana-investigations-app":return"eye";default:return"ai-sparkle"}}function Zg({isOpen:A,title:S,onClick:Z,pluginId:ce},he){const ve=(0,Pt.of)(qg),xe=Xg(ce);if(A)return(0,L.jsx)(Or.I,{ref:he,className:(0,Je.cx)(ve.button,ve.buttonActive),icon:xe,"data-testid":"extension-toolbar-button-close",variant:"default",onClick:Z,tooltip:(0,f.t)("navigation.extension-sidebar.button-tooltip.close","Close {{title}}",{title:S})});let Ce=(0,f.t)("navigation.extension-sidebar.button-tooltip.open-all","Open AI assistants and sidebar apps");return S&&(Ce=(0,f.t)("navigation.extension-sidebar.button-tooltip.open","Open {{title}}",{title:S})),(0,L.jsx)(Or.I,{ref:he,className:(0,Je.cx)(ve.button),icon:xe,"data-testid":"extension-toolbar-button-open",variant:"default",onClick:Z,tooltip:Ce})}const md=u.forwardRef(Zg);function qg(A){return{button:(0,Je.css)({aspectRatio:"1 / 1 !important",width:"28px",height:"28px",padding:0,justifyContent:"center",borderRadius:A.shape.radius.circle,margin:A.spacing(0,.25)}),buttonActive:(0,Je.css)({borderRadius:A.shape.radius.circle,backgroundColor:A.colors.primary.transparent,border:`1px solid ${A.colors.primary.borderTransparent}`,color:A.colors.text.primary})}}const e0=["grafana-assistant-app"],nh=["grafana-pathfinder-app","grafana-grafanadocsplugin-app"];function t0({compact:A}){const{availableComponents:S,dockedComponentId:Z,setDockedComponentId:ce}=(0,zr.sA)();if(Array.from(S.keys()).filter(Ce=>!nh.includes(Ce)).length===0)return null;const ve=Z?(0,zr.rS)(Z):null,xe=(Ce,je)=>{if(nh.includes(Ce))return null;if(je.length===1){const et=je[0],dt=(0,zr.pF)(Ce,et.title),vt=Z===dt;return A&&!e0.includes(Ce)?null:(0,L.jsx)(md,{isOpen:vt,title:et.title,onClick:()=>ce(vt?void 0:dt),pluginId:Ce},Ce)}const _e=ve?.pluginId===Ce,Xe=(0,L.jsx)(Vr.W,{children:je.map(et=>{const dt=(0,zr.pF)(Ce,et.title);return(0,L.jsx)(Vr.W.Item,{active:Z===dt,label:et.title,onClick:()=>ce(Z===dt?void 0:dt)},dt)})});return _e?(0,L.jsx)(md,{isOpen:!0,title:ve?.componentTitle,onClick:()=>ce(void 0),pluginId:Ce},Ce):(0,L.jsx)($l.m,{overlay:Xe,placement:"bottom-end",children:(0,L.jsx)(md,{isOpen:!1,pluginId:Ce})},Ce)};return(0,L.jsxs)(L.Fragment,{children:[Array.from(S.entries()).map(([Ce,{addedComponents:je}])=>xe(Ce,je.map(_e=>({..._e,pluginId:Ce})))),(0,L.jsx)(_o.K,{})]})}var gd=e(42941),As=e(87745),n0=e(95093),Yl=e.n(n0),a0=e(35137),ah=e(8073),s0=e(53431),r0=e(12810);function o0({onClose:A}){const S=Po.M.getObject(kl,[]).filter(Ce=>Yl()(Ce.time).isAfter(Yl()().subtract(2,"day").startOf("day"))),[Z,ce]=(0,u.useState)(5),he=S.find(Ce=>Ce.url===window.location.href||Ce.views.some(je=>je.url===window.location.href))?.time,ve=S.slice(0,Z).reduce((Ce,je)=>{const _e=Yl()(je.time);let Xe="";return _e.isSame(Yl()(),"day")?Xe=(0,f.t)("nav.history-wrapper.today","Today"):_e.isSame(Yl()().subtract(1,"day"),"day")?Xe=(0,f.t)("nav.history-wrapper.yesterday","Yesterday"):Xe=_e.format("YYYY-MM-DD"),Ce[Xe]=[...Ce[Xe]||[],je],Ce},{}),xe=(0,Pt.of)(sh);return(0,L.jsxs)(dn.B,{direction:"column",alignItems:"flex-start",children:[(0,L.jsx)(Ve.a,{width:"100%",children:Object.keys(ve).map((Ce,je)=>(0,L.jsxs)(dn.B,{direction:"column",gap:1,children:[(0,L.jsx)(Ve.a,{paddingLeft:2,children:(0,L.jsx)(Ya.E,{color:"secondary",children:Ce})}),(0,L.jsx)("div",{className:xe.timeline,children:ve[Ce].map((_e,Xe)=>(0,L.jsx)(i0,{entry:_e,isSelected:_e.time===he,onClick:()=>A()},Xe))})]},je))}),S.length>Z&&(0,L.jsx)(Ve.a,{paddingLeft:2,children:(0,L.jsx)(me.$n,{variant:"secondary",fill:"text",onClick:()=>{ce(Z+5),wg()},children:(0,f.t)("nav.history-wrapper.show-more","Show more")})})]})}function i0({entry:A,isSelected:S,onClick:Z}){const ce=(0,Pt.of)(sh),he=(0,Pt.$j)(),[ve,xe]=(0,u.useState)(S&&A.views.length>0),{breadcrumbs:Ce,views:je,time:_e,url:Xe,sparklineData:et}=A,dt=ve?(0,f.t)("nav.history-wrapper.collapse","Collapse"):(0,f.t)("nav.history-wrapper.expand","Expand"),vt=ve?(0,f.t)("nav.history-wrapper.icon-selected","Selected Entry"):(0,f.t)("nav.history-wrapper.icon-unselected","Normal Entry"),lt=S&&A.views.find(Et=>Et.url===window.location.href)?.time;return(0,L.jsx)(Ve.a,{marginBottom:1,children:(0,L.jsxs)(dn.B,{direction:"column",gap:1,children:[(0,L.jsxs)(dn.B,{alignItems:"baseline",children:[je.length>0?(0,L.jsx)(js.K,{name:ve?"angle-down":"angle-right",onClick:()=>xe(!ve),"aria-label":dt,className:ce.iconButton}):(0,L.jsx)(a0.$,{h:2}),(0,L.jsx)(Ha.I,{size:"sm",name:S?"circle-mono":"circle","aria-label":vt,className:ve?ce.iconButtonDot:ce.iconButtonCircle}),(0,L.jsx)(ah.Z,{noMargin:!0,onClick:()=>{Po.M.setObject("CLICKING_HISTORY",!0),Z(),Ju({entryURL:Xe})},href:Xe,isCompact:!0,className:S?ce.card:(0,Je.cx)(ce.card,ce.cardSelected),children:(0,L.jsxs)(dn.B,{direction:"column",children:[(0,L.jsx)("div",{children:Ce.map((Et,It)=>(0,L.jsxs)(Ya.E,{children:[Et.text," ",It!==Ce.length-1?"> ":""]},It))}),(0,L.jsx)(Ya.E,{variant:"bodySmall",color:"secondary",children:(0,r0.Y)(_e,{timeStyle:"short"})}),et&&(0,L.jsx)(s0.O,{theme:he,width:240,height:40,config:{custom:{fillColor:"rgba(130, 181, 216, 0.1)",lineColor:"#82B5D8"}},sparkline:{y:{type:oe.PU.number,name:"test",config:{},values:et.values,state:{range:{...et.range}}}}})]})})]}),ve&&(0,L.jsx)("div",{className:ce.expanded,children:je.map((Et,It)=>(0,L.jsx)(ah.Z,{noMargin:!0,href:Et.url,onClick:()=>{Po.M.setObject("CLICKING_HISTORY",!0),Z(),Ju({entryURL:Et.url,subEntry:"timeRange"})},isCompact:!0,className:Et.time===lt?void 0:ce.subCard,children:(0,L.jsxs)(dn.B,{direction:"column",gap:0,children:[(0,L.jsx)(Ya.E,{variant:"bodySmall",children:Et.name}),Et.description&&(0,L.jsx)(Ya.E,{color:"secondary",variant:"bodySmall",children:Et.description})]})},It))})]})})}const sh=A=>({card:(0,Je.css)({label:"card",background:"none",margin:A.spacing(.5,0)}),cardSelected:(0,Je.css)({label:"card-selected",background:"none"}),subCard:(0,Je.css)({label:"subcard",background:"none",margin:0}),iconButton:(0,Je.css)({label:"expand-button",margin:0}),iconButtonCircle:(0,Je.css)({label:"blue-circle-icon",margin:0,background:A.colors.background.primary,fill:A.colors.primary.main,cursor:"default","&:hover:before":{background:"none"},zIndex:0}),iconButtonDot:(0,Je.css)({label:"blue-dot-icon",margin:0,color:A.colors.primary.main,border:A.shape.radius.circle,cursor:"default","&:hover:before":{background:"none"},zIndex:0}),expanded:(0,Je.css)({label:"expanded",display:"flex",flexDirection:"column",marginLeft:A.spacing(6),gap:A.spacing(1),position:"relative","&:before":{content:'""',position:"absolute",left:0,top:0,height:"100%",width:"1px",background:A.colors.border.weak}}),timeline:(0,Je.css)({label:"timeline",position:"relative",height:"100%",width:"100%",paddingLeft:A.spacing(2),"&:before":{content:'""',position:"absolute",left:A.spacing(5.75),top:0,height:"100%",width:"1px",borderLeft:`1px dashed ${A.colors.border.strong}`}})});function l0(){const[A,S]=(0,gd.A)(!1),Z=(0,Pt.of)(c0);return(0,u.useEffect)(()=>{const ce=us.l.subscribe(As.sj,he=>{if(Po.M.getObject("CLICKING_HISTORY")){Po.M.setObject("CLICKING_HISTORY",!1);return}const xe=Po.M.getObject(kl,[]);let Ce=xe[0];const je=he.payload.url;return Ce.views[0]?.url!==je&&(Ce.views=[{name:he.payload.name,description:he.payload.description,url:je,time:Date.now()},...Ce.views],Po.M.setObject(kl,[...xe])),()=>{ce.unsubscribe()}})},[]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Or.I,{onClick:()=>{S(),Xu({type:"open"})},iconOnly:!0,icon:"history","aria-label":(0,f.t)("nav.history-container.drawer-tittle","History")}),(0,L.jsx)(_o.K,{className:Z.separator}),A&&(0,L.jsx)(Vl._,{title:(0,f.t)("nav.history-container.drawer-tittle","History"),onClose:()=>{S(),Xu({type:"close"})},size:"sm",children:(0,L.jsx)(o0,{onClose:()=>S(!1)})})]})}const c0=A=>({separator:(0,Je.css)({[A.breakpoints.down("sm")]:{display:"none"}})});function rh(A){const S=[];for(const Z of A)Z.isCreateAction&&S.push(Z),Z.children&&S.push(...rh(Z.children));return S}const d0=({})=>{const A=(0,Ma.d4)(xe=>xe.navBarTree),[S,Z]=(0,u.useState)(!1),ce=(0,u.useMemo)(()=>rh(A),[A]),he=ce.length>0;if(!he)return null;const ve=()=>(0,L.jsx)(Vr.W,{children:ce.map((xe,Ce)=>(0,L.jsx)(Vr.W.Item,{url:xe.url,label:xe.text,onClick:()=>(0,vn.rR)("grafana_menu_item_clicked",{url:xe.url,from:"quickadd"})},Ce))});return he?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($l.m,{overlay:ve,placement:"bottom-end",onVisibleChange:Z,children:(0,L.jsx)(Or.I,{iconOnly:!0,icon:"plus",isOpen:S,"aria-label":(0,f.t)("navigation.quick-add.aria-label","New")})}),(0,L.jsx)(_o.K,{})]}):null};var Jl=e(94535);function oh({node:A,children:S}){const Z=(0,Pt.of)(u0),ce=(0,Mr.J0)((0,ie.cloneDeep)(A),!1);return ce?(0,L.jsxs)(Vr.W,{header:(0,L.jsxs)("div",{onClick:he=>he.stopPropagation(),className:Z.header,children:[(0,L.jsx)("div",{children:ce.text}),ce.subTitle&&(0,L.jsx)("div",{className:Z.subTitle,children:ce.subTitle})]}),children:[ce.children?.map(he=>he.url?(0,L.jsx)(Jl.D,{url:he.url,label:he.text,icon:he.icon,target:he.target},he.id):(0,L.jsx)(Jl.D,{icon:he.icon,onClick:he.onClick,label:he.text},he.id)),S]}):null}const u0=A=>({header:(0,Je.css)({fontSize:A.typography.h5.fontSize,fontWeight:A.typography.h5.fontWeight,padding:A.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,Je.css)({color:A.colors.text.secondary,fontSize:A.typography.bodySmall.fontSize})});function ih(){const A=(0,Ma.d4)(Z=>Z.navIndex);return(0,u.useMemo)(()=>{const Z=(0,ie.cloneDeep)(A.help);return Z?(0,Mr.Vp)(Z):void 0},[A])}const h0=(0,u.memo)(function({isSmallScreen:S}){const Z=ih(),{setDockedComponentId:ce,dockedComponentId:he,availableComponents:ve}=(0,zr.sA)(),xe=(0,Pt.of)(f0);if(!Z)return null;const Ce=(0,zr.h_)(ve);if(S||!Z.hideFromTabs||Ce===void 0)return(0,L.jsx)($l.m,{overlay:()=>(0,L.jsx)(oh,{node:Z}),placement:"bottom-end",children:(0,L.jsx)(Or.I,{iconOnly:!0,icon:"question-circle","aria-label":(0,f.t)("navigation.help.aria-label","Help"),tooltip:(0,f.t)("navigation.help.tooltip","Get help and useful links")})});const je=(0,zr.pF)(Ce,"Interactive learning"),_e=he===je;return(0,L.jsx)(Or.I,{iconOnly:!0,icon:"question-circle","aria-label":(0,f.t)("navigation.help.aria-label","Help"),className:_e?xe.helpButtonActive:void 0,tooltip:_e?(0,f.t)("navigation.help.interactive-learning.close-tooltip","Close interactive learning, help, and documentation"):(0,f.t)("navigation.help.interactive-learning.open-tooltip","Open interactive learning, help, and documentation"),onClick:()=>{_e?ce(void 0):(0,W.J7)().publish(new As.Am({pluginId:Ce,componentTitle:"Interactive learning"}))}})}),f0=A=>({helpButtonActive:(0,Je.css)({borderRadius:A.shape.radius.circle,backgroundColor:A.colors.primary.transparent,border:`1px solid ${A.colors.primary.borderTransparent}`,color:A.colors.text.primary})});function p0(){const A=(0,vc.i)("lg"),S=()=>{try{Lu("top_bar_right","invite-user-top-bar")}catch(Z){console.error("Failed to handle invite user click:",Z)}};return Au()&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Or.I,{icon:"add-user",iconOnly:!A,onClick:S,tooltip:(0,f.t)("navigation.invite-user.invite-tooltip","Invite user"),"aria-label":(0,f.t)("navigation.invite-user.invite-tooltip","Invite user"),children:A?(0,f.t)("navigation.invite-user.invite-button","Invite"):void 0}),(0,L.jsx)(_o.K,{})]})}var lh=e(45450),m0=e(35555),g0=e(3271);function v0({theme:A}){return(0,L.jsx)(m0.D.Provider,{value:A,children:(0,L.jsx)(y0,{})})}function y0(){const A=(0,Pt.of)(x0);return(0,L.jsx)(Ve.a,{backgroundColor:"canvas",display:"flex",direction:"column",grow:1,children:(0,L.jsxs)(dn.B,{gap:0,direction:"column",children:[(0,L.jsxs)(Ve.a,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:.5,backgroundColor:"primary",height:3,paddingY:.5,paddingX:1,children:[(0,L.jsxs)(dn.B,{alignItems:"center",gap:.5,children:[(0,L.jsx)(th.M.MenuLogo,{className:A.img}),(0,L.jsxs)("div",{className:A.breadcrumbs,children:[(0,L.jsx)(f.x6,{i18nKey:"theme-preview.breadcrumbs.home",children:"Home"}),(0,L.jsx)(Ha.I,{className:A.breadcrumbSeparator,name:"angle-right"}),(0,L.jsx)(f.x6,{i18nKey:"theme-preview.breadcrumbs.dashboards",children:"Dashboards"})]})]}),(0,L.jsxs)(dn.B,{alignItems:"center",gap:.5,children:[(0,L.jsx)("div",{className:A.formInput}),(0,L.jsx)(Ve.a,{borderStyle:"solid",borderColor:"medium",borderRadius:"circle",height:1,width:1,backgroundColor:"secondary",marginLeft:.5})]})]}),(0,L.jsx)(g0.c,{spacing:0}),(0,L.jsx)(Ve.a,{padding:2.5,display:"flex",direction:"column",flex:1,children:(0,L.jsxs)("div",{className:A.panel,children:[(0,L.jsx)("div",{className:A.panelHeader,children:(0,L.jsx)(f.x6,{i18nKey:"theme-preview.panel.title",children:"Panel"})}),(0,L.jsxs)(Ve.a,{padding:.5,display:"flex",direction:"column",gap:.5,grow:1,children:[(0,L.jsx)("div",{className:A.formLabel,children:(0,L.jsx)(f.x6,{i18nKey:"theme-preview.panel.form-label",children:"Form label"})}),(0,L.jsx)("div",{className:A.formInput})]}),(0,L.jsxs)(Ve.a,{display:"flex",gap:.5,padding:1,justifyContent:"flex-end",children:[(0,L.jsx)("div",{className:(0,Je.cx)(A.action,A.actionSecondary)}),(0,L.jsx)("div",{className:(0,Je.cx)(A.action,A.actionDanger)}),(0,L.jsx)("div",{className:(0,Je.cx)(A.action,A.actionPrimary)})]})]})})]})})}const x0=A=>({breadcrumbs:(0,Je.css)({alignItems:"center",color:A.colors.text.primary,display:"flex",fontSize:Math.round(A.typography.fontSize/3),gap:A.spacing(.25),lineHeight:Math.round(A.typography.body.lineHeight/3),paddingLeft:A.spacing(.5)}),breadcrumbSeparator:(0,Je.css)({height:A.spacing(.75),width:A.spacing(.75)}),img:(0,Je.css)({height:A.spacing(1),width:A.spacing(1)}),panel:(0,Je.css)({background:A.components.panel.background,border:`1px solid ${A.components.panel.borderColor}`,borderRadius:A.shape.radius.default,display:"flex",flexDirection:"column",flexGrow:1}),panelHeader:(0,Je.css)({alignItems:"center",color:A.colors.text.primary,display:"flex",fontSize:Math.round(A.typography.fontSize/3),height:A.spacing(2),lineHeight:Math.round(A.typography.body.lineHeight/3),padding:A.spacing(.5)}),formLabel:(0,Je.css)({color:A.colors.text.primary,fontSize:Math.round(A.typography.fontSize/3),lineHeight:Math.round(A.typography.body.lineHeight/3)}),formInput:(0,Je.css)({background:A.components.input.background,border:`1px solid ${A.colors.border.medium}`,borderRadius:A.shape.radius.default,height:A.spacing(1),width:A.spacing(6)}),action:(0,Je.css)({borderRadius:A.shape.radius.default,height:A.spacing(1),width:A.spacing(2.5)}),actionSecondary:(0,Je.css)({background:A.colors.secondary.main}),actionDanger:(0,Je.css)({background:A.colors.error.main}),actionPrimary:(0,Je.css)({background:A.colors.primary.main})});function E0({themeOption:A,isExperimental:S,isSelected:Z,onSelect:ce}){const he=A.build(),ve=b0(A),xe=(0,Pt.of)(P0);return(0,L.jsxs)("div",{className:xe.card,onClick:ce,children:[(0,L.jsxs)("div",{className:xe.header,children:[(0,L.jsx)(lh.J,{id:`theme-${he.name}`,name:"theme",label:ve,onClick:Ce=>{Ce.stopPropagation()},onChange:ce,checked:Z}),S&&(0,L.jsx)(Hu.y,{featureState:_l.Ay.experimental})]}),(0,L.jsx)(v0,{theme:he})]})}const P0=A=>({card:(0,Je.css)({border:`1px solid ${A.colors.border.weak}`,borderRadius:A.shape.radius.default,display:"flex",flexDirection:"column",overflow:"hidden",cursor:"pointer","&:hover":{border:`1px solid ${A.colors.border.medium}`}}),header:(0,Je.css)({alignItems:"center",borderBottom:`1px solid ${A.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:A.spacing(1),"> label":{cursor:"pointer"}})});function b0(A){switch(A.id){case"dark":return(0,f.t)("shared.preferences.theme.dark-label","Dark");case"light":return(0,f.t)("shared.preferences.theme.light-label","Light");case"system":return(0,f.t)("shared.preferences.theme.system-label","System preference");default:return A.name}}var D0=e(61074);function C0({onClose:A}){const S=(0,Pt.of)(T0),Z=(0,D0.F)(),ce=(0,Pt.$j)(),he=xe=>{(0,vn.rR)("grafana_preferences_theme_changed",{toTheme:xe.id,preferenceType:"theme_drawer"}),(0,Hl.K)(xe.id,!1)},ve=(0,L.jsxs)(f.x6,{i18nKey:"shared-preferences.fields.theme-description",children:["Enjoying the experimental themes? Tell us what you'd like to see"," ",(0,L.jsx)(ka.Y,{variant:"bodySmall",external:!0,href:"https://docs.google.com/forms/d/e/1FAIpQLSeRKAY8nUMEVIKSYJ99uOO-dimF6Y69_If1Q1jTLOZRWqK1cw/viewform?usp=dialog",children:"here."})]});return(0,L.jsx)(Vl._,{title:(0,f.t)("profile.change-theme","Change theme"),onClose:A,size:"md",subtitle:q.$.feedbackLinksEnabled?ve:void 0,children:(0,L.jsx)("div",{className:S.grid,role:"radiogroup",children:Z.map(xe=>(0,L.jsx)(E0,{themeOption:xe,isExperimental:xe.isExtra,onSelect:()=>he(xe),isSelected:ce.name===xe.name},xe.id))})})}const T0=A=>({grid:(0,Je.css)({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gridAutoRows:"250px",gap:A.spacing(2)})});var S0=e(73745),ch=e(49229),M0=e(49185),wi=e(46831),O0=e(30054);function R0({feedUrl:A}){const S=(0,Pt.of)(I0),{state:Z,getNews:ce}=(0,O0.n)(A),[he,ve]=(0,M0.A)();return(0,u.useEffect)(()=>{ce()},[ce]),Z.error?(0,L.jsx)("div",{className:S.innerWrapper,children:Z.error&&Z.error.message}):(0,L.jsxs)("div",{ref:he,children:[Z.loading?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(wi.K.Skeleton,{showImage:!0,width:ve.width}),(0,L.jsx)(wi.K.Skeleton,{showImage:!0,width:ve.width}),(0,L.jsx)(wi.K.Skeleton,{showImage:!0,width:ve.width}),(0,L.jsx)(wi.K.Skeleton,{showImage:!0,width:ve.width}),(0,L.jsx)(wi.K.Skeleton,{showImage:!0,width:ve.width})]}):(0,L.jsx)(L.Fragment,{children:ve.width>0&&Z.value?.map((xe,Ce)=>(0,L.jsx)(wi.K,{index:Ce,showImage:!0,width:ve.width,data:Z.value},Ce))}),(0,L.jsx)("div",{className:S.grot,children:(0,L.jsx)("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:(0,f.t)("news.link-title","Go to Grafana labs blog"),children:(0,L.jsx)("img",{src:ch,alt:"Grot reading news"})})})]})}const I0=A=>({innerWrapper:(0,Je.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),grot:(0,Je.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:A.spacing(5,0),img:{width:"186px",height:"186px"}})});function A0({onClose:A}){const S=(0,Pt.of)(L0);return(0,L.jsx)(Vl._,{title:(0,L.jsxs)("div",{className:S.title,children:[(0,L.jsx)(Ya.E,{element:"h2",children:(0,f.t)("news.title","Latest from the blog")}),(0,L.jsx)("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:(0,f.t)("news.link-title","Go to Grafana labs blog"),className:S.grot,children:(0,L.jsx)("img",{src:ch,alt:"Grot reading news"})})]}),onClose:A,size:"md",children:(0,L.jsx)(R0,{feedUrl:S0.$})})}const L0=A=>({title:(0,Je.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:A.spacing(2)}),grot:(0,Je.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:A.spacing(2,0),img:{width:"75px",height:"75px"}})});function j0({profileNode:A,onToggleKioskMode:S}){const Z=(0,Pt.of)(B0),ce=(0,Mr.J0)((0,ie.cloneDeep)(A),!1),[he,ve]=(0,gd.A)(!1),[xe,Ce]=(0,gd.A)(!1);if(!ce)return null;const je=()=>(0,L.jsx)(oh,{node:A,children:(0,L.jsxs)(L.Fragment,{children:[q.$.featureToggles.grafanaconThemes&&(0,L.jsx)(Jl.D,{icon:"palette",onClick:Ce,label:(0,f.t)("profile.change-theme","Change theme")}),(0,L.jsx)(Vr.W.Item,{icon:"monitor",onClick:S,label:(0,f.t)("profile.enable-kiosk-mode","Enable kiosk mode")}),q.$.newsFeedEnabled&&(0,L.jsx)(Jl.D,{icon:"rss",onClick:ve,label:(0,f.t)("navigation.rss-button","Latest from the blog")}),(0,L.jsx)(Vr.W.Divider,{}),!q.$.auth.disableSignoutMenu&&(0,L.jsx)(Jl.D,{url:`${q.$.appSubUrl}/logout`,label:(0,f.t)("nav.sign-out.title","Sign out"),icon:"arrow-from-right",target:"_self"})]})});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($l.m,{overlay:je,placement:"bottom-end",children:(0,L.jsx)(Or.I,{className:Z.profileButton,imgSrc:xa.TP.user.gravatarUrl,imgAlt:"User avatar","aria-label":(0,f.t)("navigation.profile.aria-label","Profile")})}),he&&(0,L.jsx)(A0,{onClose:ve}),xe&&(0,L.jsx)(C0,{onClose:Ce})]})}const B0=A=>({profileButton:(0,Je.css)({padding:A.spacing(0,.5),img:{borderRadius:A.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});var dh=e(63704);function U0(){const A=iu(),S=(0,bn.zy)(),Z=(0,Pt.of)(N0);let ce=A?b.I.assureBaseUrl("/login"):dh.sQ.sanitizeUrl(b.I.getUrlForPartial(S,{forceLogin:"true"}));ce.startsWith("//")&&(ce=ce.replace(/\/+/g,"/"));const he=(0,u.useCallback)(()=>{qt.TP.setRedirectToUrl()},[]);return(0,L.jsx)("a",{className:Z.link,onClick:he,href:ce,target:A?void 0:"_self",children:(0,L.jsx)(f.x6,{i18nKey:"app-chrome.top-bar.sign-in",children:"Sign in"})})}const N0=A=>({link:(0,Je.css)({paddingLeft:A.spacing(1),paddingRight:A.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var W0=e(68079),uh=e(70255);function hh(A){const[S,Z]=(0,u.useState)(void 0),[ce,he]=(0,u.useState)(!1),ve=Ho()?.scopesSelectorService;return(0,u.useEffect)(()=>{(async()=>{if(!A||!ve){Z(void 0);return}he(!0);try{const Ce=await ve.getScopeNode(A);Z(Ce)}catch(Ce){console.error("Failed to load node",Ce)}finally{he(!1)}})()},[A,ve]),{node:S,isLoading:ce}}function F0({nodes:A,scopes:S,appliedScopes:Z,disabled:ce,loading:he,onInputClick:ve,onRemoveAllClick:xe}){const[Ce,je]=(0,u.useState)(!1),_e=Z[0]?.scopeNodeId,Xe=Z[0]?.parentNodeId,{node:et,isLoading:dt}=hh(_e),vt=et?.spec.parentName??Xe,{node:lt,isLoading:Et}=hh(vt),It=et?.spec.subTitle??lt?.spec.title,_t=dt||Et;(0,u.useEffect)(()=>{je(!1)},[Z]);const rn=Z.length>0?(0,L.jsx)(w0,{nodes:A,scopes:S,appliedScopes:Z}):(0,L.jsx)(L.Fragment,{}),Mn=(0,u.useMemo)(()=>Z.map(Jn=>S[Jn.scopeId]?.spec.title||Jn.scopeId).join(" + "),[Z,S]),cn=(0,u.useMemo)(()=>_t?(0,L.jsx)(uh.A,{width:30,height:14}):It?(0,L.jsxs)("span",{children:[It,":"]}):void 0,[_t,It]),Cn=(0,u.useMemo)(()=>(0,L.jsx)(Pa.p,{readOnly:!0,placeholder:(0,f.t)("scopes.selector.input.placeholder","Select scopes..."),disabled:ce,loading:he,value:Mn,"aria-label":(0,f.t)("scopes.selector.input.placeholder","Select scopes..."),"data-testid":"scopes-selector-input",prefix:cn,suffix:Z.length>0&&!ce?(0,L.jsx)(js.K,{"aria-label":(0,f.t)("scopes.selector.input.removeAll","Remove all scopes"),name:"times","data-testid":"scopes-selector-input-clear",onClick:()=>xe()}):void 0,onMouseOver:()=>je(!0),onMouseOut:()=>je(!1),onClick:()=>{ce||ve()}}),[ce,he,ve,xe,Z,Mn,cn]);return(0,L.jsx)(Hc.m,{content:rn,show:Z.length===0?!1:Ce,children:Cn})}const K0=(A,S)=>{let Z;if(A.length>0&&A[0].scopeNodeId){let ce=Ni(A[0].scopeNodeId,S);ce=ce.slice(1,-1),Z=ce.map(he=>S[he]?.spec.title).filter(he=>he)}return Z};function w0({nodes:A,scopes:S,appliedScopes:Z}){const ce=(0,Pt.of)(V0),he=K0(Z,A),ve=Z.map(xe=>xe.scopeNodeId?A[xe.scopeNodeId]?.spec.title||xe.scopeNodeId:S[xe.scopeId]?.spec.title||xe.scopeId);return(0,L.jsx)(L.Fragment,{children:(0,L.jsx)("p",{className:ce.scopePath,children:(he&&he.length>0?he.join(" > ")+" > ":"")+ve.join(", ")})})}const V0=A=>({scopePath:(0,Je.css)({color:A.colors.text.primary,fontSize:A.typography.pxToRem(12),margin:A.spacing(0,0)})}),$0=({recentScopes:A,onSelect:S})=>{const Z=(0,Pt.of)(z0),[ce,he]=(0,u.useState)(!1),ve=(0,u.useId)();return(0,L.jsxs)("fieldset",{children:[(0,L.jsx)("legend",{className:Z.legend,children:(0,L.jsxs)("button",{className:Z.expandButton,"aria-expanded":ce,"aria-controls":ve,onClick:()=>he(!ce),"data-testid":"scopes-selector-recent-scopes-section",children:[(0,L.jsx)(Ha.I,{name:ce?"angle-down":"angle-right"}),(0,L.jsx)(Ya.E,{variant:"body",children:(0,L.jsx)(f.x6,{i18nKey:"command-palette.section.recent-scopes"})})]})}),(0,L.jsx)(Ve.a,{paddingLeft:3,paddingTop:ce?1:0,paddingBottom:ce?1:0,children:(0,L.jsx)(dn.B,{direction:"column",gap:1,id:ve,children:ce&&A.map(xe=>(0,L.jsxs)("button",{className:Z.recentScopeButton,onClick:()=>{S(xe.map(Ce=>Ce.metadata.name),xe[0]?.parentNode?.metadata?.name)},children:[(0,L.jsx)(Ya.E,{truncate:!0,children:xe.map(Ce=>Ce.spec.title).join(", ")}),xe[0]?.parentNode?.spec.title&&(0,L.jsx)(Ya.E,{truncate:!0,variant:"body",color:"secondary",children:xe[0]?.parentNode?.spec.title})]},xe.map(Ce=>Ce.metadata.name).join(",")+xe[0]?.parentNode?.metadata?.name))})})]})},z0=A=>({recentScopeButton:(0,Je.css)({textAlign:"left",background:"none",border:"none",padding:0,cursor:"pointer",display:"flex",gap:A.spacing(1),alignItems:"center"}),expandButton:(0,Je.css)({display:"flex",alignItems:"center",gap:A.spacing(1),background:"none",border:"none",padding:0,cursor:"pointer"}),legend:(0,Je.css)({marginBottom:0,padding:`${A.spacing(.5)} 0`})});function G0({anyChildExpanded:A,query:S,resultsNodes:Z,scopeNodes:ce}){const he=(0,Pt.of)(H0);return A||Z.some(ve=>ce[ve.scopeNodeId].spec.nodeType==="container")&&!S?null:(0,L.jsx)("h6",{className:he.container,"data-testid":"scopes-tree-headline",children:S?Z.length===0?(0,L.jsx)(f.x6,{i18nKey:"scopes.tree.headline.noResults",children:"No results found for your query"}):(0,L.jsx)(f.x6,{i18nKey:"scopes.tree.headline.results",children:"Results"}):(0,L.jsx)(f.x6,{i18nKey:"scopes.tree.headline.recommended",children:"Recommended"})})}const H0=A=>({container:(0,Je.css)({color:A.colors.text.secondary,margin:A.spacing(1,0)})});var Q0=e(23257),_0=e.n(Q0),k0=e(32635);function Y0({scopeNodeId:A,selected:S,onChange:Z,children:ce,"aria-labelledby":he}){return(0,L.jsx)(lh.J,{id:A,name:A,checked:S,label:ce??void 0,"data-testid":`scopes-tree-${A}-radio`,onChange:Z,"aria-labelledby":he??void 0})}function J0({scopeNodeId:A,onClick:S,children:Z}){const ce=(0,Pt.of)(bc);return(0,L.jsx)("button",{className:ce.linkLikeItem,"data-testid":`scopes-tree-${A}-link`,onClick:S,children:Z})}function fh({scopeNodeId:A,selected:S,showLabel:Z,onChange:ce,children:he,"aria-labelledby":ve}){const xe=(0,Pt.of)(bc);return(0,L.jsxs)("div",{className:xe.checkboxWithLabel,children:[(0,L.jsx)(k0.S,{id:A,checked:S,"data-testid":`scopes-tree-${A}-checkbox`,label:"",onChange:ce,"aria-labelledby":ve??void 0}),Z&&(0,L.jsx)("label",{htmlFor:A,className:xe.checkboxLabel,children:he})]})}function vd({shouldHighlight:A,titleText:S,searchWords:Z}){return A?(0,L.jsx)(_0(),{textToHighlight:S,searchWords:Z,autoEscape:!0}):(0,L.jsx)(L.Fragment,{children:S})}function X0({scopeNodeId:A,expanded:S,onClick:Z,children:ce,controlsId:he,isSelectable:ve,disableMultiSelect:xe,selected:Ce,onSelect:je}){const _e=(0,Pt.of)(bc),Xe=Pc(A)+"-button",et=()=>!ve||S?null:xe?(0,L.jsx)(Y0,{scopeNodeId:A,selected:Ce,onChange:je,"aria-labelledby":Xe}):(0,L.jsx)(fh,{scopeNodeId:A,selected:Ce,showLabel:!1,onChange:je,"aria-labelledby":Xe});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(et,{}),(0,L.jsxs)("button",{id:Xe,className:_e.expand,"data-testid":`scopes-tree-${A}-expand`,onClick:Z,"aria-expanded":S,"aria-controls":he,children:[(0,L.jsx)(Ha.I,{name:S?"angle-down":"angle-right"}),ce]})]})}function Z0({anyChildExpanded:A,loadingNodeName:S,treeNode:Z,filterNode:ce,scopeNodes:he,selected:ve,selectedScopes:xe,selectScope:Ce,deselectScope:je,highlighted:_e,toggleExpandedNode:Xe}){const et=(0,Pt.of)(bc),dt=Ho(),{closeAndApply:vt}=dt?.scopesSelectorService||{};if(A&&!Z.expanded)return null;const lt=he[Z.scopeNodeId];if(!lt)return null;const It=(lt.spec.parentName?he[lt.spec.parentName]:void 0)?.spec.disableMultiSelect??!1,_t=gc(lt),rn=Ui(lt),Mn=lt.spec.title,cn=!!(Z.query&&!Z.expanded),Cn=cn?q0(Z.query):[],Jn=Pc(Z.scopeNodeId)+"-children";return(0,L.jsxs)("div",{id:Pc(Z.scopeNodeId),role:"treeitem","aria-selected":_e,"aria-expanded":rn?Z.expanded:void 0,className:A?et.expandedContainer:void 0,children:[(0,L.jsxs)("div",{className:(0,Je.cx)(et.title,_t&&!Z.expanded&&et.titlePadding,_e&&et.highlighted),"data-testid":`scopes-tree-${Z.scopeNodeId}`,children:[_t&&!rn&&!Z.expanded&&(0,L.jsxs)(L.Fragment,{children:[It&&(0,L.jsx)(J0,{scopeNodeId:Z.scopeNodeId,onClick:()=>{Ce(Z.scopeNodeId),vt?.()},children:(0,L.jsx)(vd,{shouldHighlight:cn,titleText:Mn,searchWords:Cn})}),!It&&(0,L.jsx)(fh,{scopeNodeId:Z.scopeNodeId,selected:ve,showLabel:!rn,onChange:()=>{ve?je(Z.scopeNodeId):Ce(Z.scopeNodeId)},children:(0,L.jsx)(vd,{shouldHighlight:cn,titleText:Mn,searchWords:Cn})})]}),rn&&(0,L.jsx)(X0,{scopeNodeId:Z.scopeNodeId,expanded:Z.expanded,controlsId:Jn,onClick:()=>Xe(Z.scopeNodeId),onSelect:()=>ve?je(Z.scopeNodeId):Ce(Z.scopeNodeId),isSelectable:_t,disableMultiSelect:It,selected:ve,children:(0,L.jsx)(vd,{shouldHighlight:cn,titleText:Mn,searchWords:Cn})}),lt.spec.subTitle&&(0,L.jsx)(Ya.E,{truncate:!0,variant:"body",color:"secondary",children:lt.spec.subTitle})]}),(0,L.jsx)("div",{id:Jn,className:et.children,children:Z.expanded&&(0,L.jsx)(mh,{tree:Z,loadingNodeName:S,filterNode:ce,scopeNodes:he,selectedScopes:xe,selectScope:Ce,deselectScope:je,toggleExpandedNode:Xe})})]},Z.scopeNodeId)}function q0(A){return A?A.split("*").filter(S=>S.length>0):[]}const Pc=A=>A?`scopes-tree-item-${A}`:void 0,bc=A=>({highlighted:(0,Je.css)({background:A.colors.action.focus,borderRadius:A.shape.radius.default}),expandedContainer:(0,Je.css)({display:"flex",flexDirection:"column",maxHeight:"100%"}),title:(0,Je.css)({alignItems:"center",display:"flex",gap:A.spacing(1),fontSize:A.typography.pxToRem(14),lineHeight:A.typography.pxToRem(22),padding:A.spacing(.5,0),"& > label :last-child":(0,Je.css)({fontSize:A.typography.pxToRem(14),lineHeight:A.typography.pxToRem(22),fontWeight:A.typography.fontWeightRegular})}),titlePadding:(0,Je.css)({paddingLeft:A.spacing(.5)}),checkboxWithLabel:(0,Je.css)({alignItems:"center",display:"flex",gap:A.spacing(1)}),checkboxLabel:(0,Je.css)({fontSize:A.typography.pxToRem(14),lineHeight:A.typography.pxToRem(22),fontWeight:A.typography.fontWeightRegular,cursor:"pointer",margin:0}),expand:(0,Je.css)({alignItems:"center",background:"none",border:0,display:"flex",gap:A.spacing(1),margin:0,padding:0}),linkLikeItem:(0,Je.css)({alignItems:"center",background:"none",border:0,display:"flex",gap:A.spacing(1),margin:0,padding:0,textDecoration:"none","&:hover":{textDecoration:"underline"}}),children:(0,Je.css)({display:"flex",flexDirection:"column",overflowY:"hidden",maxHeight:"100%",paddingLeft:A.spacing(4)})});function ph({items:A,anyChildExpanded:S,lastExpandedNode:Z,maxHeight:ce,selectedScopes:he,scopeNodes:ve,loadingNodeName:xe,filterNode:Ce,selectScope:je,deselectScope:_e,highlightedId:Xe,id:et,toggleExpandedNode:dt}){const vt=(0,Pt.of)(ev);if(A.length===0)return null;const lt=(0,L.jsx)("div",{role:"tree",id:et,className:S?vt.expandedContainer:void 0,children:A.map(Et=>{const It=gc(ve[Et.scopeNodeId])&&he.some(_t=>_t.scopeNodeId?_t.scopeNodeId===Et.scopeNodeId:_t.scopeId===ve[Et.scopeNodeId]?.spec.linkId);return(0,L.jsx)(Z0,{treeNode:Et,selected:It,selectedScopes:he,scopeNodes:ve,loadingNodeName:xe,anyChildExpanded:S,filterNode:Ce,selectScope:je,deselectScope:_e,highlighted:Et.scopeNodeId===Xe,toggleExpandedNode:dt},Et.scopeNodeId)})});return Z?(0,L.jsx)(cd.P,{minHeight:`${Math.min(5,A.length)*30}px`,maxHeight:ce,children:lt}):lt}const ev=A=>({expandedContainer:(0,Je.css)({display:"flex",flexDirection:"column",maxHeight:"100%"})});function tv({anyChildExpanded:A,treeNode:S,filterNode:Z,searchArea:ce,onFocus:he,onBlur:ve,"aria-controls":xe,"aria-activedescendant":Ce}){const je=(0,Pt.of)(nv),[_e,Xe]=(0,u.useState)({value:S.query,dirty:!1});if((0,u.useEffect)(()=>{!_e.dirty&&_e.value!==S.query&&Xe({value:S.query,dirty:!1})},[_e,S.query]),(0,wu.A)(()=>{_e.dirty&&Z(S.scopeNodeId,_e.value)},500,[_e.dirty,_e.value]),A)return null;const et=(0,f.t)("scopes.tree.search","Search {{parentTitle}}",{parentTitle:ce});return(0,L.jsx)(Vu.Z,{placeholder:et,autoFocus:S.scopeNodeId!=="",role:"combobox","aria-expanded":!0,"aria-autocomplete":"list","aria-controls":xe,"aria-activedescendant":Ce,"aria-label":et,value:_e.value,className:je.input,"data-testid":"scopes-tree-search",escapeRegex:!1,onChange:dt=>{Xe({value:dt,dirty:!0})},onFocus:he,onBlur:()=>{setTimeout(()=>{ve()},0)}})}const nv=A=>({input:(0,Je.css)({margin:A.spacing(1,0),minHeight:A.spacing(4),height:A.spacing(4),maxHeight:A.spacing(4),width:`calc(100% - ${A.spacing(.5)})`})});var yd=(A=>(A.SELECT="select",A.EXPAND="expand",A))(yd||{});function av(A,S,Z,ce){const[he,ve]=(0,u.useState)(-1),xe=(0,u.useCallback)(je=>{if(A&&S.length!==0)switch(je.key){case"ArrowDown":je.preventDefault(),ve(_e=>(_e+1)%S.length);break;case"ArrowUp":je.preventDefault(),ve(_e=>(_e-1+S.length)%S.length);break;case"Enter":je.preventDefault(),he!==-1&&ce(S[he]?.scopeNodeId,"select");break;case"ArrowRight":he!==-1&&(je.preventDefault(),ce(S[he]?.scopeNodeId,"expand"));break;case"Escape":ve(-1);break;default:break}},[S,ce,he,A]);return(0,u.useEffect)(()=>(window.addEventListener("keydown",xe),()=>{window.removeEventListener("keydown",xe)}),[xe]),(0,u.useEffect)(()=>{S.length===0&&ve(-1)},[S]),(0,u.useEffect)(()=>{ve(-1)},[Z,A]),{highlightedId:he===-1?void 0:S[he]?.scopeNodeId}}function sv({selectedNodes:A,resultNodes:S,treeQuery:Z,scopeNodes:ce,selectedScopes:he,toggleExpandedNode:ve,selectScope:xe,deselectScope:Ce}){const[je,_e]=(0,u.useState)(!1),Xe=Ho(),{changeScopes:et}=Xe?.scopesSelectorService||{},dt=[...A,...S],{highlightedId:vt}=av(je,dt,je?Z:"",(Et,It)=>{if(!Et)return;const _t=It===yd.EXPAND&&Ui(ce[Et]),rn=It===yd.SELECT&&!gc(ce[Et])&&Ui(ce[Et]);if(_t||rn){ve(Et),_e(!1);return}const Mn=ce[Et]?.spec.parentName?ce[ce[Et]?.spec.parentName]:void 0;if(Mn?.spec.disableMultiSelect&&et&&ce[Et]?.spec.linkId){et([ce[Et].spec.linkId],Mn.metadata.name);return}he.some(cn=>cn.scopeNodeId===Et)?Ce(Et):xe(Et)}),lt=Pc(vt);return{highlightedId:vt,ariaActiveDescendant:lt,enableHighlighting:()=>_e(!0),disableHighlighting:()=>_e(!1)}}function mh({tree:A,loadingNodeName:S,selectedScopes:Z,recentScopes:ce,onRecentScopesSelect:he,filterNode:ve,scopeNodes:xe,selectScope:Ce,deselectScope:je,toggleExpandedNode:_e}){const Xe=(0,Pt.of)(rv),et=(0,u.useId)(),dt=(0,u.useId)(),vt=S===A.scopeNodeId,lt=A.children;let Et=Object.values(lt||{});const It=Et.some(({expanded:lr})=>lr);let _t=[];Z.length>0&&Z[0].scopeNodeId&&A.scopeNodeId===xe[Z[0].scopeNodeId]?.spec.parentName&&(_t=Z.filter(lr=>!Et.map(qd=>qd.scopeNodeId).includes(lr.scopeNodeId)).map(lr=>({scopeNodeId:lr.scopeNodeId,query:"",expanded:!1})));const{highlightedId:rn,ariaActiveDescendant:Mn,enableHighlighting:cn,disableHighlighting:Cn}=sv({selectedNodes:_t,resultNodes:Et,treeQuery:A.query,scopeNodes:xe,selectedScopes:Z,toggleExpandedNode:_e,selectScope:Ce,deselectScope:je}),Jn=xe[A.scopeNodeId]?.spec?.title||"",Ba=A.scopeNodeId===""?"":Jn,ks=!It&&A.expanded;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(tv,{anyChildExpanded:It,searchArea:Ba,filterNode:ve,treeNode:A,"aria-controls":`${et} ${dt}`,"aria-activedescendant":Mn,onFocus:cn,onBlur:Cn}),A.scopeNodeId===""&&!It&&ce&&ce.length>0&&he&&!A.query&&(0,L.jsx)($0,{recentScopes:ce,onSelect:he}),vt?(0,L.jsx)(uh.A,{count:5,className:Xe.loader}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ph,{items:_t,anyChildExpanded:It,lastExpandedNode:ks,loadingNodeName:S,filterNode:ve,selectedScopes:Z,scopeNodes:xe,selectScope:Ce,deselectScope:je,toggleExpandedNode:_e,maxHeight:`${Math.min(5,_t.length)*30}px`,highlightedId:rn,id:et}),(0,L.jsx)(G0,{anyChildExpanded:It,query:A.query,resultsNodes:Et,scopeNodes:xe}),(0,L.jsx)(ph,{items:Et,anyChildExpanded:It,lastExpandedNode:ks,loadingNodeName:S,filterNode:ve,selectedScopes:Z,scopeNodes:xe,selectScope:Ce,toggleExpandedNode:_e,deselectScope:je,maxHeight:"100%",highlightedId:rn,id:dt})]})]})}const rv=A=>({loader:(0,Je.css)({margin:A.spacing(.5,0)})}),ov=()=>{const{chrome:A}=(0,nr.Il)(),S=A.useState(),Z=!S.chromeless&&S.megaMenuDocked&&S.megaMenuOpen,ce=(0,Pt.of)(iv,Z),he=(0,mc.b)(),ve=Ho(),xe=(0,bo.A)(ve?.scopesSelectorService.stateObservable??new Fi.c,ve?.scopesSelectorService.state);if((0,u.useEffect)(()=>{if(!ve?.scopesSelectorService)return;const ic=Nc=>{Nc.key==="Enter"&&Nc.metaKey&&ve.scopesSelectorService.closeAndApply()};return window.addEventListener("keydown",ic),()=>window.removeEventListener("keydown",ic)},[ve?.scopesSelectorService]),!ve||!he||!he.state.enabled||!xe)return null;const{nodes:Ce,loadingNodeName:je,opened:_e,selectedScopes:Xe,appliedScopes:et,tree:dt,scopes:vt}=xe,{scopesService:lt,scopesSelectorService:Et,scopesDashboardsService:It}=ve,{readOnly:_t,drawerOpened:rn,loading:Mn}=he.state,{open:cn,removeAllScopes:Cn,closeAndApply:Jn,closeAndReset:Ba,filterNode:ks,selectScope:lr,deselectScope:qd,getRecentScopes:eD,toggleExpandedNode:tD}=Et,nD=eD(),Rf=_t?(0,f.t)("scopes.dashboards.toggle.disabled","Suggested dashboards list is disabled due to read only mode"):rn?(0,f.t)("scopes.dashboards.toggle.collapse","Collapse suggested dashboards list"):(0,f.t)("scopes.dashboards.toggle.expand","Expand suggested dashboards list");return(0,L.jsxs)("div",{className:ce.container,children:[(0,L.jsx)(js.K,{name:"web-section-alt",className:ce.dashboards,"aria-label":Rf,tooltip:Rf,"data-testid":"scopes-dashboards-expand",disabled:_t,onClick:It.toggleDrawer}),(0,L.jsx)(F0,{nodes:Ce,scopes:vt,appliedScopes:et,disabled:_t,loading:Mn,onInputClick:()=>{lt.state.readOnly||cn()},onRemoveAllClick:Cn}),_e&&(0,L.jsx)(Vl._,{title:(0,f.t)("scopes.selector.title","Select scopes"),size:"sm",onClose:Ba,children:(0,L.jsx)(ua.tH,{boundaryName:"scopes-selector",children:({error:ic,errorInfo:Nc})=>ic?(0,L.jsx)(Jc.D,{error:ic,title:(0,f.t)("scopes.selector.error-title","An unexpected error happened"),errorInfo:Nc}):(0,L.jsxs)("div",{className:ce.drawerContainer,children:[(0,L.jsx)("div",{className:ce.treeContainer,children:Mn||!dt?(0,L.jsx)(W0.y,{"data-testid":"scopes-selector-loading"}):(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(mh,{tree:dt,loadingNodeName:je,filterNode:ks,recentScopes:nD,selectedScopes:Xe,scopeNodes:Ce,selectScope:lr,deselectScope:qd,toggleExpandedNode:tD,onRecentScopesSelect:(aD,sD)=>{Et.changeScopes(aD,sD),Et.closeAndReset()}})})}),(0,L.jsxs)("div",{className:ce.buttonsContainer,children:[(0,L.jsxs)(me.$n,{variant:"primary","data-testid":"scopes-selector-apply",onClick:Jn,children:[(0,L.jsx)(f.x6,{i18nKey:"scopes.selector.apply",children:"Apply"}),"\xA0",(0,L.jsx)(Ya.E,{variant:"bodySmall",children:`${(0,nd.gn)()}+\u21B5`})]}),(0,L.jsx)(me.$n,{variant:"secondary","data-testid":"scopes-selector-cancel",onClick:Ba,children:(0,L.jsx)(f.x6,{i18nKey:"scopes.selector.cancel",children:"Cancel"})})]})]})})})]})},iv=(A,S)=>({container:(0,Je.css)({display:"flex",flexDirection:"row",paddingLeft:S?A.spacing(2):"unset"}),dashboards:(0,Je.css)({color:A.colors.text.secondary,marginRight:A.spacing(2),"&:hover":(0,Je.css)({color:A.colors.text.primary})}),drawerContainer:(0,Je.css)({display:"flex",flexDirection:"column",height:"100%"}),treeContainer:(0,Je.css)({display:"flex",flexDirection:"column",maxHeight:"100%",overflowY:"hidden",paddingLeft:A.spacing(.5)}),buttonsContainer:(0,Je.css)({display:"flex",gap:A.spacing(1),marginTop:A.spacing(8)})});var Xl=e(31937);function lv({actions:A,breadcrumbActions:S,scopes:Z}){const ce=(0,Pt.of)(cv);return(0,L.jsx)("div",{"data-testid":Za.XF.NavToolbar.container,className:ce.actionsBar,children:(0,L.jsxs)(dn.B,{alignItems:"center",justifyContent:"flex-start",flex:1,wrap:"nowrap",minWidth:0,children:[Z?.state.enabled?(0,L.jsx)(ov,{}):void 0,(0,L.jsxs)(dn.B,{alignItems:"center",justifyContent:"flex-end",flex:1,wrap:"nowrap",minWidth:0,children:[S,S&&A&&(0,L.jsx)(_o.K,{}),A]})]})})}const cv=A=>({actionsBar:(0,Je.css)({alignItems:"center",backgroundColor:A.colors.background.primary,borderBottom:`1px solid ${A.colors.border.weak}`,display:"flex",height:(0,Xl.vn)(),padding:A.spacing(0,1,0,2)})});var dv=e(35484);const gh=u.memo(()=>{const{query:A}=(0,Zt.useKBar)(ce=>({kbarSearchQuery:ce.searchQuery,kbarIsOpen:ce.visualState===Zt.VisualState.showing})),S=(0,vc.i)("lg"),Z=()=>{A.toggle()};return S?(0,L.jsx)(uv,{onClick:Z}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Or.I,{iconOnly:!0,icon:"search","aria-label":(0,f.t)("nav.search.placeholderCommandPalette","Search..."),onClick:Z}),(0,L.jsx)(_o.K,{})]})});gh.displayName="TopSearchBarCommandPaletteTrigger";function uv({onClick:A}){const S=(0,Pt.of)(hv),Z=(0,u.useMemo)(()=>(0,nd.gn)(),[]);return(0,L.jsx)("div",{className:S.wrapper,"data-testid":Za.Tp.components.NavToolbar.commandPaletteTrigger,children:(0,L.jsxs)("div",{className:S.inputWrapper,children:[(0,L.jsx)("div",{className:S.prefix,children:(0,L.jsx)(Ha.I,{name:"search"})}),(0,L.jsx)("button",{className:S.fakeInput,onClick:A,children:(0,f.t)("nav.search.placeholderCommandPalette","Search...")}),(0,L.jsx)("div",{className:S.suffix,children:(0,L.jsx)(Ya.E,{variant:"bodySmall",children:`${Z}+k`})})]})})}const hv=A=>{const S=(0,Pa.n)({theme:A});return{wrapper:(0,Je.cx)(S.wrapper,(0,Je.css)({width:"auto",minWidth:140,maxWidth:350,flexGrow:1})),inputWrapper:S.inputWrapper,prefix:S.prefix,suffix:(0,Je.css)([S.suffix,{display:"flex",gap:A.spacing(.5)}]),fakeInput:(0,Je.css)([S.input,{textAlign:"left",paddingLeft:28,color:A.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,dv.getFocusStyles)(A)}]),button:(0,Je.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}},fv=(0,u.memo)(function({onToggleMegaMenu:S,onToggleKioskMode:Z,pageNav:ce,sectionNav:he,scopes:ve,actions:xe,breadcrumbActions:Ce,showToolbarLevel:je}){const{chrome:_e}=(0,nr.Il)(),Xe=_e.useState(),et=!Xe.chromeless&&Xe.megaMenuDocked&&Xe.megaMenuOpen,dt=(0,Pt.of)(pv,et),vt=(0,Ma.d4)(rn=>rn.navIndex.profile),lt=(0,Ma.d4)(rn=>rn.navIndex)[pd.Id],Et=(0,Yu.Z)(he,ce,lt),It=le.$W.featureToggles.unifiedHistory,_t=!(0,vc.i)("sm");return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:dt.layout,children:[(0,L.jsxs)(dn.B,{minWidth:0,gap:.5,alignItems:"center",flex:{xs:2,lg:1},children:[!et&&(0,L.jsx)(Or.I,{narrow:!0,id:Hg.Ut,onClick:S,tooltip:(0,f.t)("navigation.megamenu.open","Open menu"),children:(0,L.jsxs)(dn.B,{gap:0,alignItems:"center",children:[(0,L.jsx)(th.M.MenuLogo,{className:dt.img}),(0,L.jsx)(Ha.I,{size:"sm",name:"angle-down"})]})}),(0,L.jsx)(kg,{breadcrumbs:Et,className:dt.breadcrumbsWrapper}),!je&&Ce]}),(0,L.jsxs)(dn.B,{gap:.5,alignItems:"center",justifyContent:"flex-end",flex:1,"data-testid":je?void 0:Za.XF.NavToolbar.container,minWidth:{xs:"unset",lg:0},children:[(0,L.jsx)(gh,{}),It&&!_t&&(0,L.jsx)(l0,{}),!_t&&(0,L.jsx)(d0,{}),(0,L.jsx)(h0,{isSmallScreen:_t}),(0,L.jsx)(_o.K,{}),!_t&&(0,L.jsx)(t0,{compact:_t}),!je&&xe,!xa.TP.user.isSignedIn&&(0,L.jsx)(U0,{}),(0,L.jsx)(p0,{}),vt&&(0,L.jsx)(j0,{profileNode:vt,onToggleKioskMode:Z})]})]}),je&&(0,L.jsx)(lv,{scopes:ve,actions:xe,breadcrumbActions:Ce})]})}),pv=(A,S)=>({layout:(0,Je.css)({height:(0,Xl.vn)(),display:"flex",gap:A.spacing(2),alignItems:"center",padding:A.spacing(0,1),paddingLeft:S?A.spacing(3.5):A.spacing(.75),borderBottom:`1px solid ${A.colors.border.weak}`,justifyContent:"space-between"}),breadcrumbsWrapper:(0,Je.css)({display:"flex",overflow:"hidden",[A.breakpoints.down("sm")]:{minWidth:"40%"}}),img:(0,Je.css)({alignSelf:"center",height:A.spacing(3),width:A.spacing(3)}),kioskToggle:(0,Je.css)({[A.breakpoints.down("lg")]:{display:"none"}})});function mv({children:A}){const{chrome:S}=(0,nr.Il)(),{isOpen:Z,extensionSidebarWidth:ce,setExtensionSidebarWidth:he}=(0,zr.sA)(),ve=S.useState(),xe=(0,mc.b)(),Ce=!ve.chromeless&&ve.megaMenuDocked&&ve.megaMenuOpen,je=!!(xe?.state.enabled&&xe?.state.drawerOpened&&!xe?.state.readOnly),_e=(0,Xl.UH)(),Xe=_e*(0,Xl.vn)(),et=(0,Pt.of)(vv,Xe),dt=(0,Pt.of)(yv,ce),vt=(0,Pt.of)(pm.l);gv(S),(0,Mr.n0)(ve.megaMenuOpen,ve.megaMenuDocked);const lt=(0,Je.cx)({[et.content]:!0,[et.contentChromeless]:ve.chromeless,[et.contentWithSidebar]:Z&&!ve.chromeless}),Et=()=>{S.setMegaMenuOpen(!ve.megaMenuOpen)},{pathname:It,search:_t}=M.Ny.getLocation(),rn=It+_t,Mn=ve.returnToPrevious&&rn!==ve.returnToPrevious.href;return(0,u.useEffect)(()=>{ve.returnToPrevious&&rn===ve.returnToPrevious.href&&S.clearReturnToPrevious("auto_dismissed")},[S,rn]),(0,u.useEffect)(()=>{const cn=(0,M.SE)(_t);S.setKioskModeFromUrl(cn.kiosk)},[S,_t]),(0,L.jsxs)("div",{id:mm.BOUNDARY_ELEMENT_ID,className:hm()("main-view",{"main-view--chrome-hidden":ve.chromeless}),children:[!ve.chromeless&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(me.z9,{className:et.skipLink,href:"#pageContent",children:(0,L.jsx)(f.x6,{i18nKey:"app-chrome.skip-content-button",children:"Skip to main content"})}),Ce&&(0,L.jsx)(dd,{className:et.dockedMegaMenu,onClose:()=>S.setMegaMenuOpen(!1)}),(0,L.jsx)("header",{className:(0,Je.cx)(et.topNav,Ce&&et.topNavMenuDocked),children:(0,L.jsx)(fv,{sectionNav:ve.sectionNav.node,pageNav:ve.pageNav,onToggleMegaMenu:Et,onToggleKioskMode:S.onToggleKioskMode,actions:ve.actions,breadcrumbActions:ve.breadcrumbActions,scopes:xe,showToolbarLevel:_e===2})})]}),(0,L.jsx)("div",{className:lt,children:(0,L.jsxs)("div",{className:(0,Je.cx)(et.panes,{[et.panesWithSidebar]:Z}),children:[!ve.chromeless&&(0,L.jsx)("div",{className:(0,Je.cx)(et.scopesDashboardsContainer,{[et.scopesDashboardsContainerDocked]:Ce}),children:(0,L.jsx)(ua.Xw,{boundaryName:"scopes-dashboards",children:(0,L.jsx)(gg,{})})}),(0,L.jsx)("main",{className:(0,Je.cx)(et.pageContainer,{[et.pageContainerMenuDocked]:Ce||je,[et.pageContainerMenuDockedScopes]:Ce&&je,[et.pageContainerWithSidebar]:!ve.chromeless&&Z,[dt.contentWidth]:!ve.chromeless&&Z}),id:"pageContent",children:A}),!ve.chromeless&&Z&&(0,L.jsx)(fm.c,{className:et.sidebarContainer,defaultSize:{width:ce},enable:{left:!0},onResize:(cn,Cn,Jn)=>he(Jn.getBoundingClientRect().width),handleClasses:{left:vt.dragHandleBaseVertical},minWidth:fd.nf,maxWidth:fd.T0,children:(0,L.jsx)(fd.EE,{})})]})}),!ve.chromeless&&!ve.megaMenuDocked&&(0,L.jsx)(Ag,{}),!ve.chromeless&&(0,L.jsx)(ag,{}),Mn&&ve.returnToPrevious&&(0,L.jsx)(eh,{href:ve.returnToPrevious.href,title:ve.returnToPrevious.title})]})}function gv(A){const S=Sr.A.getBool(ud,!0),Z=(0,vc.i)("xl");(0,u.useEffect)(()=>{if(!S)return;const ce=A.state.getValue();Z&&!ce.megaMenuDocked?(A.setMegaMenuDocked(!0,!1),A.setMegaMenuOpen(!0)):!Z&&ce.megaMenuDocked&&(A.setMegaMenuDocked(!1,!1),A.setMegaMenuOpen(!1))},[Z,A,S])}const vv=(A,S)=>({content:(0,Je.css)({label:"page-content",display:"flex",flexDirection:"column",paddingTop:S,flexGrow:1,height:"auto"}),contentWithSidebar:(0,Je.css)({height:"100vh",overflow:"hidden"}),contentChromeless:(0,Je.css)({paddingTop:0}),dockedMegaMenu:(0,Je.css)({background:A.colors.background.primary,borderRight:`1px solid ${A.colors.border.weak}`,display:"none",height:"100%",position:"fixed",top:0,width:Qo,zIndex:2,[A.breakpoints.up("xl")]:{display:"flex",flexDirection:"column"}}),scopesDashboardsContainer:(0,Je.css)({position:"fixed",height:`calc(100% - ${S}px)`,zIndex:1}),scopesDashboardsContainerDocked:(0,Je.css)({left:Qo}),topNav:(0,Je.css)({display:"flex",position:"fixed",zIndex:A.zIndex.navbarFixed,left:0,right:0,background:A.colors.background.primary,flexDirection:"column"}),topNavMenuDocked:(0,Je.css)({left:Qo}),panes:(0,Je.css)({display:"flex",flexDirection:"column",flexGrow:1,label:"page-panes"}),panesWithSidebar:(0,Je.css)({height:"100%",overflow:"hidden",position:"relative"}),pageContainerMenuDocked:(0,Je.css)({paddingLeft:Qo}),pageContainerMenuDockedScopes:(0,Je.css)({paddingLeft:`calc(${Qo} * 2)`}),pageContainer:(0,Je.css)({label:"page-container",display:"flex",flexDirection:"column",flexGrow:1}),pageContainerWithSidebar:(0,Je.css)({overflow:"auto",height:"100%",minHeight:0}),skipLink:(0,Je.css)({position:"fixed",top:-1e3,":focus":{left:A.spacing(1),top:A.spacing(1),zIndex:A.zIndex.portal}}),sidebarContainer:(0,Je.css)({position:"fixed !important",top:S,bottom:0,zIndex:2,right:0})}),yv=(A,S=0)=>({contentWidth:(0,Je.css)({maxWidth:`calc(100% - ${S}px) !important`})});var xv=e(22099);function Ev(){const{chrome:A}=(0,nr.Il)(),S=A.useState();return q.$.featureToggles.enableAppChromeExtensions!==!0||S.chromeless?null:(0,L.jsx)(Pv,{})}function Pv(){const{components:A,isLoading:S}=(0,G.f)({extensionPointId:Ql.SM.AppChrome});return S?null:(0,xv.RC)({props:{},components:A,pluginId:"grafana-setupguide-app"})}var Zl=e(6890),vh=e(12066),bv=e(94701);function Dv({appNotification:A,onClearNotification:S}){const Z=(0,Pt.of)(Cv);(0,bv.A)(()=>{setTimeout(()=>{S(A.id)},Qa.g2[A.severity])});const ce=A.component||A.text||A.traceId,he=A.traceId;return(0,L.jsx)(vs.F,{severity:A.severity,title:A.title,onRemove:()=>S(A.id),elevated:!0,children:ce&&(0,L.jsxs)("div",{className:Z.wrapper,children:[(0,L.jsx)("span",{children:A.component||A.text}),he&&(0,L.jsx)("span",{className:Z.trace,children:(0,L.jsxs)(f.x6,{i18nKey:"app-notification.item.trace-id",children:["Trace ID: ",{traceId:he}]})})]})})}function Cv(A){return{wrapper:(0,Je.css)({display:"flex",flexDirection:"column"}),trace:(0,Je.css)({fontSize:A.typography.pxToRem(10)})}}function Tv(){const A=(0,Ma.d4)(xe=>(0,vh.fX)(xe.appNotifications)),S=(0,Ma.wA)(),Z=(0,Pt.of)(Sv),{chrome:ce}=(0,nr.Il)(),he=(0,yu.zy)();(0,u.useEffect)(()=>{const xe=Ce=>{ce.state.getValue().kioskMode&&he.pathname.startsWith("/d/")||S((0,Zl.dx)((0,xc.gi)(...Ce)))};us.A.on(Ki.r1.alertWarning,Ce=>S((0,Zl.dx)((0,xc.q8)(...Ce)))),us.A.on(Ki.r1.alertSuccess,Ce=>S((0,Zl.dx)((0,xc.tZ)(...Ce)))),us.A.on(Ki.r1.alertError,xe),us.A.on(Ki.r1.alertInfo,Ce=>S((0,Zl.dx)((0,xc.Cf)(...Ce))))},[S,ce,he.pathname]);const ve=xe=>{S((0,Zl.Do)(xe))};return(0,L.jsx)("div",{className:Z.wrapper,children:(0,L.jsx)(dn.B,{direction:"column",children:A.map((xe,Ce)=>(0,L.jsx)(Dv,{appNotification:xe,onClearNotification:ve},`${xe.id}-${Ce}`))})})}function Sv(A){return{wrapper:(0,Je.css)({label:"app-notifications-list",zIndex:A.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var Mv=e(71599);function Ov(A){const[S,Z]=(0,u.useState)({component:null,props:{}}),ce=(0,u.useMemo)(()=>{function he(xe,Ce){Z({component:xe,props:Ce})}function ve(){Z({component:null,props:{}})}return{component:S.component,props:{...S.props,isOpen:!0,onDismiss:ve},showModal:he,hideModal:ve}},[S]);return(0,u.useEffect)(()=>{us.A.subscribe(As.S8,({payload:ve})=>{Z({component:ve.component,props:ve.props})}),us.A.subscribe(As.bY,ve=>{Rv(ve,Z)});let he="";M.Ny.getHistory().listen(ve=>{ve.pathname!==he&&Z({component:null,props:{}}),he=ve.pathname})},[]),(0,L.jsx)(Eu.wE.Provider,{value:ce,children:A.children})}function Rv({payload:A},S){const{confirmText:Z,onConfirm:ce=()=>{},onDismiss:he,text2:ve,altActionText:xe,onAltAction:Ce,noText:je,text:_e,text2htmlBind:Xe,yesText:et="Yes",icon:dt,title:vt="Confirm",yesButtonVariant:lt}=A,Et=()=>S({component:null,props:{}}),It={confirmText:et,confirmButtonVariant:lt,confirmationText:Z,icon:dt,title:vt,body:_e,description:ve&&Xe?dh.sQ.sanitize(ve):ve,isOpen:!0,dismissText:je,onConfirm:()=>{ce(),Et()},onDismiss:()=>{he?.(),Et()},onAlternative:Ce?()=>{Ce(),Et()}:void 0,alternativeText:xe};S({component:Mv.u,props:It})}var Iv=e(52830);function Av(A){return A.providers.reduce((S,Z)=>(0,L.jsx)(Z,{children:S}),A.children)}function Lv(A){return(0,L.jsx)(yu.Ix,{history:M.Ny.getHistory(),children:(0,L.jsx)(M._K,{service:M.Ny,children:(0,L.jsx)(xu.CompatRouter,{children:(0,L.jsx)(Iv.YZ,{children:(0,L.jsx)(Av,{providers:A.providers,children:(0,L.jsxs)(Ov,{children:[(0,L.jsxs)(mv,{children:[(0,L.jsx)(Tv,{}),(0,L.jsxs)(dn.B,{gap:0,grow:1,direction:"column",children:[(0,L.jsx)(Ev,{}),A.pageBanners.map((S,Z)=>(0,L.jsx)(S,{},Z.toString())),A.routes]}),A.bodyRenderHooks.map((S,Z)=>(0,L.jsx)(S,{},Z.toString()))]}),(0,L.jsx)(Eu.EO,{})]})})})})})})}let yh=[],xh=[];const Eh=[];function lD(A){Eh.push(A)}function cD(A){yh.push(A)}function dD(A){xh.push(A)}class jv extends u.Component{constructor(S){super(S),this.iconCacheID=`grafana-icon-cache-${q.$.buildInfo.commit}`,this.renderRoute=Z=>(0,L.jsx)(bn.qh,{caseSensitive:Z.sensitive===void 0?!1:Z.sensitive,path:Z.path,element:(0,L.jsx)(Kp,{route:Z})},Z.path),this.state={}}async componentDidMount(){this.setState({ready:!0}),$(".preloader").remove();const S=await window.caches?.keys()??[];for(const Z of S)Z.startsWith("grafana-icon-cache")&&Z!==this.iconCacheID&&window.caches.delete(Z)}renderRoutes(){return(0,L.jsx)(bn.BV,{children:bp().map(S=>this.renderRoute(S))})}render(){const{app:S}=this.props,{ready:Z}=this.state;(0,M.Lc)("AppWrapper",!1,"rendering");const ce=xe=>{(0,vn.rR)("command_palette_action_selected",{actionId:xe.id,actionName:xe.name})},he={routes:Z&&this.renderRoutes(),pageBanners:xh,bodyRenderHooks:yh,providers:Eh},ve=q.$.featureToggles.timeRangeProvider?_n.A:u.Fragment;return(0,L.jsx)(pn.Provider,{store:qa.M_,children:(0,L.jsx)(ua.Xw,{boundaryName:"app-wrapper",style:"page",children:(0,L.jsx)(nr.YE.Provider,{value:S.context,children:(0,L.jsx)(Vp.N,{value:q.$.theme2,children:(0,L.jsx)(tn.A,{name:this.iconCacheID,children:(0,L.jsx)(Zt.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:ce}},children:(0,L.jsx)(ve,{children:(0,L.jsx)(dm,{children:(0,L.jsx)(zl.AZ,{registries:Hp.qm,children:(0,L.jsx)(zr.kn,{children:(0,L.jsxs)(Xt.N$,{getContainer:$a.gF,children:[(0,L.jsx)(ba.k,{}),(0,L.jsxs)("div",{className:"grafana-app",children:[(0,L.jsx)(Lv,{...he}),(0,L.jsx)(zp,{}),(0,L.jsx)($a.qB,{})]})]})})})})})})})})})})})}}var Bv=e(35222);const Uv=(0,u.lazy)(()=>Promise.resolve().then(e.bind(e,62769)).then(A=>({default:A.NestedFolderPicker}))),Nv=A=>(0,L.jsx)(u.Suspense,{fallback:(0,L.jsx)(Bv.A,{}),children:(0,L.jsx)(Uv,{...A})});var Ph=e(83162),Wv=e(70715);function Fv({actions:A,children:S,info:Z,pageNav:ce,layout:he,renderTitle:ve,subTitle:xe}){const Ce=(0,u.useContext)(Wv.A);return(0,L.jsx)(za.Y,{navModel:Ce.sectionNav,pageNav:ce,layout:he,actions:A,renderTitle:ve,info:Z,subTitle:xe,children:(0,L.jsx)(za.Y.Contents,{children:S})})}var Kv=e(45928),wv=e(43561),Vv=e(25992),$v=e(81041);function bh(){return typeof window.SharedWorker<"u"}class zv{constructor(S,Z){if(!bh())throw new Error("SharedWorker is not supported");const ce=S.toString(),he=new URL(".",S).toString(),ve=`importScripts('${ce}');`,xe=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${he}'; ${ve}`],{type:"application/javascript"})),Ce=new SharedWorker(xe,Z);return URL.revokeObjectURL(xe),Ce}}function Gv(A){return!A||typeof A!="object"?!1:"totalJSHeapSize"in A&&"usedJSHeapSize"in A&&"jsHeapSizeLimit"in A}function Hv(A){return!A||typeof A!="object"?!1:"memory"in A&&Gv(A.memory)}function Dh(A){const S={};function Z(ce,he){if(typeof ce=="object"&&ce!==null){if(Array.isArray(ce))throw new Error("Array values are not supported.");for(const ve in ce)ce.hasOwnProperty(ve)&&Z(ce[ve],he?`${he}_${ve}`:ve)}else typeof ce=="string"?S[he]=ce:typeof ce=="number"&&(Number.isInteger(ce)?S[he]=ce.toString():S[he]=ce.toFixed(4))}return Z(A,"crash"),S}const Ch=(0,Vv.DW)("core.crash-detection");function Qv(){if(!bh())return;let A=Date.now();document.body.addEventListener("click",()=>A=Date.now(),!0),document.body.addEventListener("keypress",()=>A=Date.now(),!0),(0,Kv.initCrashDetection)({id:(0,wv.Ak)(5),dbName:"grafana.crashes",createClientWorker(){return new $v.c(new URL(e.p+e.u(7235),e.b))},createDetectorWorker(){return new zv(new URL(e.p+e.u(8220),e.b))},reportCrash:async S=>{const Z=Dh(S);return Ch.logWarning("browser crash detected",Z),!0},reportStaleTab:async S=>{const Z=Dh(S);return Ch.logWarning("stale browser tab detected",Z),!0},updateInfo:S=>{S.app={version:q.$.buildInfo.version,url:window.location.href},S.user={email:qt.TP.user.email,login:qt.TP.user.login,name:qt.TP.user.name,lastInteraction:A},Hv(performance)&&(S.memory={heapUtilization:performance.memory.usedJSHeapSize/performance.memory.totalJSHeapSize,limitUtilization:performance.memory.totalJSHeapSize/performance.memory.jsHeapSizeLimit,usedJSHeapSize:performance.memory.usedJSHeapSize,totalJSHeapSize:performance.memory.totalJSHeapSize,jsHeapSizeLimit:performance.memory.jsHeapSizeLimit})}})}var Dc=e(29662);const Th=A=>A.split("-")[0].toLowerCase(),_v={type:"backend",init(){},async read(A,S,Z){let ce=Dc.Yj.find(xe=>xe.code===A);if(ce||(ce=Dc.Yj.find(xe=>Th(xe.code)===Th(A))),!ce)return Z(new Error(`No message loader available for ${A}`),null);const he=ce.loader[S];if(!he)return Z(new Error(`No message loader available for ${A} with namespace ${S}`),null);const ve=await he();Z(null,ve)}};async function kv(){if(window.location.search.indexOf("why-render")!==-1){const{default:A}=await e.e(3718).then(e.t.bind(e,13718,23));A(r,{trackAllPureComponents:!0})}await Qm()}async function Yv(){await kv()}async function Jv(){_m()}var Xv=e(17016);function Zv(A){const S=A.target instanceof Element&&qv(A.target);if(!(A.ctrlKey||A.metaKey||A.defaultPrevented)&&S){let Z=S.getAttribute("href");const ce=S.getAttribute("target");if(Z&&!ce){const he=Fu.kM.parseKeyValue(Z.split("?")[1]),ve=he.orgId&&Number(he.orgId)!==qt.TP.user.orgId;if((0,M.Lc)("utils",!1,"intercepting link click",A),A.preventDefault(),Z=b.I.stripBaseFromUrl(Z),Z[0]!=="/"||ve)if(Z.indexOf("://")>0||Z.indexOf("mailto:")===0||ve){window.location.href=Z;return}else if(Z.indexOf("#")===0){window.location.hash=Z;return}else Z=`/${Z}`;M.Ny.push(Z)}}}function qv(A){for(;A!==null&&A.tagName;){if(A.tagName.toUpperCase()==="A")return A;A=A.parentElement}return null}var Sh=e(6219),ey=e(78529);class ty{attachCorrelationsToDataFrames(S,Z,ce){return(0,Sh.cA)(S,Z,ce)}correlationsDataLinkPostProcessorFactory(S){return(0,ey.YV)(void 0,S)}getCorrelationsBySourceUIDs(S){return(0,Sh.J6)(S)}}var Mh=e(33184),ny=e(4590);class ay{constructor(S){this.hasUpdates=!1,this.checked=Date.now(),this.prevLocationPath="",this.interval=S??1e3*60*5}start(){const S=(0,Mh.oF)();S&&S.getConnectionState().subscribe(Z=>{Z&&this._checkForUpdates()}),M.Ny.getHistory().listen(this.locationUpdated.bind(this)),this.prevLocationPath=M.Ny.getLocation().pathname}locationUpdated(S){if(this.prevLocationPath===S.pathname)return;const Z=S.pathname.split("/");Z[1]==="/"&&this.prevLocationPath!=="/"?this.reloadIfUpdateDetected():Z[1]==="d"&&!ny._o.state.isPlaying?this.reloadIfUpdateDetected():this.hasUpdates&&(0,vn.rR)("new_frontend_assets_reload_ignored",{newLocation:S.pathname,prevLocation:this.prevLocationPath}),this.prevLocationPath=S.pathname}async _checkForUpdates(){if(this.hasUpdates||Date.now()-this.checked<this.interval)return;this.checked=Date.now();const S=this.previous,Z=await(0,C.AI)().get("/api/frontend/assets");S&&!(0,ie.isEqual)(S,Z)&&(this.hasUpdates=!0,(0,vn.rR)("new_frontend_assets_detected",{assets:S.assets!==Z.assets,plugins:S.plugins!==Z.plugins,version:S.version!==Z.version,flags:S.flags!==Z.flags})),this.previous=Z}reloadIfUpdateDetected(){this.hasUpdates&&((0,vn.rR)("new_frontend_assets_reload",{}),window.location.reload()),this._checkForUpdates()}}var Cc=e(83873),Do=e(78646),ko=e(37268),Oh=e(25240);class sy{constructor(S){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const Z of this.backends)Z.flush()},this.addBackend=Z=>{(0,Oh.S5)("Adding backend",!1,Z),this.backends.push(Z)},this.addEvent=(Z,ce)=>{const he=this.getMeta(),ve={...Z,meta:{...he,...ce}};for(const xe of this.backends)(xe.supportedEvents.length===0||xe.supportedEvents.indexOf(ve.type)>-1)&&xe.addEvent(ve);(0,Oh.S5)(`${Z.type} event`,!1,{...Z.payload,meta:ve.meta})},this.getMeta=()=>({sessionId:"",userId:qt.TP.user.id,userLogin:qt.TP.user.login,userSignedIn:qt.TP.user.isSignedIn,orgRole:qt.TP.user.orgRole,orgId:qt.TP.user.orgId,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...S},setInterval(this.flush,this.config.flushInterval)}}async function ry(){(0,Do.H2)(new sy({debug:!1})),window.addEventListener("load",A=>{const S="frontend_boot_load_time_seconds";performance&&(performance.mark(S),(0,ko.W3)("first-paint","frontend_boot_","_time_seconds"),(0,ko.W3)("first-contentful-paint","frontend_boot_","_time_seconds"),(0,ko.W3)(S),(0,ko.W3)("frontend_boot_js_done_time_seconds"),(0,ko.W3)("frontend_boot_css_time_seconds"))});try{await oy()}catch(A){console.error("Error initializing EchoSrv Performance backend",A)}try{await iy()}catch(A){console.error("Error initializing EchoSrv Faro backend",A)}try{await ly()}catch(A){console.error("Error initializing EchoSrv GoogleAnalytics backend",A)}try{await cy()}catch(A){console.error("Error initializing EchoSrv GoogleAnalaytics4 backend",A)}try{await dy()}catch(A){console.error("Error initializing EchoSrv Rudderstack backend",A)}try{await uy()}catch(A){console.error("Error initializing EchoSrv AzureAppInsights backend",A)}try{await hy()}catch(A){console.error("Error initializing EchoSrv Console backend",A)}}async function oy(){if(qt.TP.user.orgRole==="")return;const{PerformanceBackend:A}=await e.e(4857).then(e.bind(e,4857));(0,Do.pl)(new A({}))}async function iy(){if(!q.$.grafanaJavascriptAgent.enabled)return;const A=[q.$.rudderstackConfigUrl,q.$.rudderstackDataPlaneUrl,q.$.rudderstackIntegrationsUrl].filter(Boolean).map(Z=>new RegExp(`${Z}.*.`)),{GrafanaJavascriptAgentBackend:S}=await e.e(1484).then(e.bind(e,41484));(0,Do.pl)(new S({buildInfo:q.$.buildInfo,userIdentifier:qt.TP.user.analytics.identifier,ignoreUrls:A,apiKey:q.$.grafanaJavascriptAgent.apiKey,customEndpoint:q.$.grafanaJavascriptAgent.customEndpoint,consoleInstrumentalizationEnabled:q.$.grafanaJavascriptAgent.consoleInstrumentalizationEnabled,performanceInstrumentalizationEnabled:q.$.grafanaJavascriptAgent.performanceInstrumentalizationEnabled,cspInstrumentalizationEnabled:q.$.grafanaJavascriptAgent.cspInstrumentalizationEnabled,tracingInstrumentalizationEnabled:q.$.grafanaJavascriptAgent.tracingInstrumentalizationEnabled,webVitalsAttribution:q.$.grafanaJavascriptAgent.webVitalsAttribution,internalLoggerLevel:q.$.grafanaJavascriptAgent.internalLoggerLevel,botFilterEnabled:q.$.grafanaJavascriptAgent.botFilterEnabled}))}async function ly(){if(!q.$.googleAnalyticsId)return;const{GAEchoBackend:A}=await e.e(9820).then(e.bind(e,59820));(0,Do.pl)(new A({googleAnalyticsId:q.$.googleAnalyticsId}))}async function cy(){if(!q.$.googleAnalytics4Id)return;const{GA4EchoBackend:A}=await e.e(7018).then(e.bind(e,47018));(0,Do.pl)(new A({googleAnalyticsId:q.$.googleAnalytics4Id,googleAnalytics4SendManualPageViews:q.$.googleAnalytics4SendManualPageViews}))}async function dy(){if(!(q.$.rudderstackWriteKey&&q.$.rudderstackDataPlaneUrl))return;const{RudderstackBackend:A}=await e.e(4564).then(e.bind(e,34564));(0,Do.pl)(new A({writeKey:q.$.rudderstackWriteKey,dataPlaneUrl:q.$.rudderstackDataPlaneUrl,user:qt.TP.user,sdkUrl:q.$.rudderstackSdkUrl,configUrl:q.$.rudderstackConfigUrl,integrationsUrl:q.$.rudderstackIntegrationsUrl,buildInfo:q.$.buildInfo}))}async function uy(){if(!q.$.applicationInsightsConnectionString)return;const{ApplicationInsightsBackend:A}=await e.e(2699).then(e.bind(e,2699));(0,Do.pl)(new A({connectionString:q.$.applicationInsightsConnectionString,endpointUrl:q.$.applicationInsightsEndpointUrl}))}async function hy(){if(!q.$.analyticsConsoleReporting)return;const{BrowserConsoleBackend:A}=await e.e(5747).then(e.bind(e,75747));(0,Do.pl)(new A)}var Rh=e(82679),fy=e(57852),py=e(62635),my=e(37010),gy=e(47192),Yo=e(75421),vy=e(47981),ql=e(12469);class yy{constructor(S,Z){this.locationService=S,this.chromeService=Z,this.panelId=null,this.assistantSubscription=null,us.A.subscribe(fy.Tp,ce=>{this.panelId=ce.payload.panelId})}clearAndInitGlobalBindings(S){ql.R.reset(),S.chromeless||(this.bind("?",this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bindAssistantShortcutIfAvailable(),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,Hl.O)(!1)),this.bind("c r",()=>(0,Hl.O)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const Z=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(Z&&Z instanceof HTMLElement&&(Z.nodeName==="INPUT"||Z.nodeName==="TEXTAREA"||Z.hasAttribute("data-slate-editor"))){Z.blur();return}this.exit()}}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){us.A.publish(new As.S8({component:vy.N}))}bindAssistantShortcutIfAvailable(){this.assistantSubscription&&this.assistantSubscription.unsubscribe(),this.assistantSubscription=(0,Rh.isAssistantAvailable)().subscribe(S=>{S?this.bind("mod+.",this.toggleAssistant):ql.R.unbind("mod+.")})}toggleAssistant(){(0,Rh.toggleAssistant)({origin:"grafana/keyboard-shortcut",prompt:"",context:[]})}exit(){const S=this.locationService.getSearchObject();if(S.editview){this.locationService.partial({editview:null,editIndex:null});return}if(S.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(S.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(S.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:Z}=this.chromeService.state.getValue();Z&&this.chromeService.exitKioskMode()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(S,Z){ql.R.bind(S,ce=>{ce.preventDefault(),ce.stopPropagation(),ce.returnValue=!1,Z.call(this)},"keydown")}bindGlobal(S,Z){ql.R.bindGlobal(S,ce=>{ce.preventDefault(),ce.stopPropagation(),ce.returnValue=!1,Z.call(this)},"keydown")}unbind(S,Z){ql.R.unbind(S,Z)}bindWithPanelId(S,Z){this.bind(S,this.withFocusedPanel(Z))}withFocusedPanel(S){return()=>{if(typeof this.panelId=="number"){S(this.panelId);return}}}setupTimeRangeBindings(S=!0){this.bind("t a",()=>{us.A.publish(new As.Rh({updateUrl:S}))}),this.bind("t z",()=>{us.A.publish(new As.U0({scale:2,updateUrl:S}))}),this.bind("ctrl+z",()=>{us.A.publish(new As.U0({scale:2,updateUrl:S}))}),this.bind("t left",()=>{us.A.publish(new As.Io({direction:As.xL.Left,updateUrl:S}))}),this.bind("t right",()=>{us.A.publish(new As.Io({direction:As.xL.Right,updateUrl:S}))}),this.bind("t c",()=>{us.A.publish(new As.Bt)}),this.bind("t v",()=>{us.A.publish(new As.VZ({updateUrl:S}))})}setupDashboardBindings(S){this.bind("mod+o",()=>{S.graphTooltip=(S.graphTooltip+1)%3,S.events.publish(new Ki.Tq),S.startRefresh()}),this.bind("mod+s",()=>{S.meta.canSave&&us.A.publish(new As.S8({component:my.$,props:{dashboard:S}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",Z=>{if(S.canEditPanelById(Z)){const ce=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:ce?null:Z})}}),this.bindWithPanelId("v",Z=>{const ce=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:ce?null:Z})}),this.bindWithPanelId("p l",Z=>{const ce=S.getPanelById(Z),he={...ce.options};he.legend.showLegend?he.legend.showLegend=!1:he.legend.showLegend=!0,ce.updateOptions(he)}),this.bindWithPanelId("i",Z=>{this.locationService.partial({inspect:Z})}),xa.TP.hasAccessToExplore()&&this.bindWithPanelId("p x",async Z=>{const ce=S.getPanelById(Z),he=await(0,py.Xe)({queries:ce.targets,dsRef:ce.datasource,scopedVars:ce.scopedVars,timeRange:(0,Yo.jG)().timeRange()});if(he){const ve=b.I.stripBaseFromUrl(he);ve&&this.locationService.push(ve)}}),this.bindWithPanelId("p r",Z=>{S.canEditPanelById(Z)&&!(S.panelInView||S.panelInEdit)&&us.A.publish(new As.Vz(Z))}),this.bindWithPanelId("p d",Z=>{if(S.canEditPanelById(Z)){const ce=S.getPanelInfoById(Z).index;S.duplicatePanel(S.panels[ce])}}),this.bindWithPanelId("p s",Z=>{const ce=S.getPanelInfoById(Z);us.A.publish(new As.S8({component:gy.Zy,props:{dashboard:S,panel:ce?.panel}}))}),this.bind("d l",()=>{S.toggleLegendsForAll()}),this.bind("d x",()=>{S.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{S.collapseRows()}),this.bind("d shift+e",()=>{S.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{S.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const ce=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+ce})}}var xy=e(25157);const Ey=(0,u.lazy)(()=>e.e(192).then(e.bind(e,48278)));function Py(){const A=(0,_a.Wd)(fc.hY),S=q.$.unifiedAlertingEnabled;qt.TP.hasPermission(A.read)&&(0,xy.fP)({show:()=>S,component:({dashboard:Z})=>S?(0,L.jsx)(u.Suspense,{fallback:null,children:Z&&(0,L.jsx)(Ey,{dashboardUid:Z.uid})},"alert-rules-button"):null,index:-2})}var by=e(69874);function Dy(A){return(0,L.jsx)(Cy,{...A})}const Cy=(0,u.lazy)(async()=>{const{EmbeddedDashboard:A}=await e.e(2859).then(e.bind(e,72340));return{default:A}});var Ih=e(80011);class Ah{constructor(S,Z){this.state={name:S,type:"time_macro"},this._sceneObject=Z.getRoot()}getValue(){const S=ae.jh.getTimeRange(this._sceneObject);return this.state.name==="__from"?S.state.value.from.valueOf():S.state.value.to.valueOf()}getValueText(){const S=ae.jh.getTimeRange(this._sceneObject);return this.state.name==="__from"?(0,Ih.LE)(S.state.value.from,{timeZone:S.getTimeZone()}):(0,Ih.LE)(S.state.value.to,{timeZone:S.getTimeZone()})}}var Ty=e(4405),Sy=e(65556),ec=e(35392),My=e(1005),Oy=e(96222),Es=e(38619),Vi=e(51388),Lh=e(39741),xd=e(97534),Gr=e(46383);const Ry=A=>S=>new Fi.c(Z=>{let ce=[],he=!0;const ve=()=>{Z.next(ce),ce=[]},xe=A.subscribe({next:je=>{he=je,he&&ce.length&&ve()}}),Ce=S.subscribe({next(je){he?ce.length?ve():Z.next([je]):ce.push(je)},error(je){Z.error(je)},complete(){Z.complete()}});return()=>{Ce.unsubscribe(),xe.unsubscribe()}});var Iy=(A=>(A[A.Error=0]="Error",A[A.NewValuesSameSchema=1]="NewValuesSameSchema",A[A.ChangedSchema=2]="ChangedSchema",A))(Iy||{});const Ay=A=>({values:A.reduce((S,{values:Z})=>{for(let ce=0;ce<Z.length;ce++){S[ce]||(S[ce]=[]);for(let he=0;he<Z[ce].length;he++)S[ce].push(Z[ce][he])}return S},[]),type:1}),jh=(A,S)=>A.filter(Z=>Z.type===S);class Ly{constructor(S){this.deps=S,this.stream=new Lh.m(1),this.shutdown=()=>{this.stream.complete(),this.liveEventsSubscription.unsubscribe(),this.deps.onShutdown()},this.shutdownIfNoSubscribers=()=>{this.stream.observed||this.shutdown()},this.onError=Z=>{console.log("LiveQuery [error]",{err:Z},this.deps.channelId),this.stream.next({type:0,error:(0,xd.u)(Z)}),this.shutdown()},this.onComplete=()=>{console.log("LiveQuery [complete]",this.deps.channelId),this.shutdown()},this.onNext=Z=>{if((0,Es.Z7)(Z)){this.process(Z.message);return}const ce=(0,Es.ew)(Z);if(ce&&Z.error){const he=(0,xd.u)(Z.error);this.stream.next({type:0,error:{...he,message:`Streaming channel error: ${he.message}`}})}ce&&(Z.state===Es.ZF.Connected||Z.state===Es.ZF.Pending)&&Z.message&&this.process(Z.message)},this.process=Z=>{this.frameBuffer.push(Z).schemaChanged?this.stream.next({type:2}):this.stream.next({type:1,values:this.frameBuffer.getValuesFromLastPacket()})},this.resizeBuffer=Z=>{Z&&this.frameBuffer.needsResizing(Z)&&this.frameBuffer.resize(Z)},this.prepareInternalStreamForNewSubscription=Z=>{!this.frameBuffer.hasAtLeastOnePacket()&&Z.frame&&this.process(Z.frame)},this.clearShutdownTimeout=()=>{this.shutdownTimeoutId&&(clearTimeout(this.shutdownTimeoutId),this.shutdownTimeoutId=void 0)},this.get=(Z,ce)=>{this.clearShutdownTimeout();const he=(0,Vi.m8)(Z.buffer);this.resizeBuffer(he),this.prepareInternalStreamForNewSubscription(Z);const ve=Z?.buffer?.action===Vi.Kh.Replace,xe=Z.filter?.fields,je=xe?.length?({name:lt})=>xe.includes(lt):void 0;let _e;const Xe=(lt,Et)=>(_e=je?this.frameBuffer.getMatchingFieldIndexes(je):void 0,ve?Et?{key:ce,state:ha.Gu.Error,data:[{type:Gr._w.FullFrame,frame:this.frameBuffer.serialize(je,he,{maxLength:0})}],error:Et}:lt.length?{key:ce,state:ha.Gu.Streaming,data:[{type:Gr._w.FullFrame,frame:this.frameBuffer.serialize(je,he,{maxLength:this.frameBuffer.packetInfo.length})}],error:Et}:(console.warn(`expected to find at least one non error message ${lt.map(({type:It})=>It)}`),{key:ce,state:ha.Gu.Streaming,data:[{type:Gr._w.FullFrame,frame:this.frameBuffer.serialize(je,he,{maxLength:0})}],error:Et}):{key:ce,state:Et?ha.Gu.Error:ha.Gu.Streaming,data:[{type:Gr._w.FullFrame,frame:this.frameBuffer.serialize(je,he)}],error:Et}),et=lt=>{const Et=lt.length?lt[lt.length-1]:void 0,It=ve&&Et?Et.values:Ay(lt).values,_t=_e?It.filter((rn,Mn)=>_e?.includes(Mn)):It;return{key:ce,state:ha.Gu.Streaming,data:[{type:Gr._w.NewValuesSameSchema,values:_t}]}};let dt=!0;const vt=this.stream.pipe(Ry(this.deps.subscriberReadiness),(0,kt.T)((lt,Et)=>{const It=jh(lt,0),_t=It.length?It[It.length-1].error:void 0;if(dt)return dt=!1,Xe(lt,_t);if(It.length)return Xe(lt,_t);if(lt.some(cn=>cn.type===2))return Xe(lt,void 0);const Mn=jh(lt,1);return Mn.length!==lt.length&&console.warn(`unsupported message type ${lt.map(({type:cn})=>cn)}`),et(Mn)}));return new Fi.c(lt=>{const Et=vt.subscribe({next:It=>{lt.next(It)},error:It=>{lt.error(It)},complete:()=>{lt.complete()}});return()=>{Et.unsubscribe(),this.stream.observed||(this.clearShutdownTimeout(),this.shutdownTimeoutId=setTimeout(this.shutdownIfNoSubscribers,this.deps.shutdownDelayInMs))}})},this.frameBuffer=Vi.k9.empty(S.defaultStreamingFrameOptions),this.liveEventsSubscription=S.liveEventsObservable.subscribe({error:this.onError,complete:this.onComplete,next:this.onNext})}}var Tc=e(13752);class jy{constructor(S,Z){this.opened=Date.now(),this.stream=new Tc.B,this.disconnectIfNoListeners=()=>{this.stream.observers.length===0&&this.disconnect()},this.publish=ce=>this.subscription?.publish(ce),this.id=S,this.addr=Z,this.currentStatus={type:Es.o4.Status,id:S,timestamp:this.opened,state:Es.ZF.Pending},(0,Es.aj)(Z)||(this.currentStatus.state=Es.ZF.Invalid,this.currentStatus.error="invalid channel address")}initalize(){if(this.initalized)throw new Error("Channel already initalized: "+this.id);this.initalized=!0,this.subscription.on("publication",S=>{try{S.data&&(S.data.schema&&(this.lastMessageWithSchema=S.data),this.stream.next({type:Es.o4.Message,message:S.data})),this.currentStatus.error&&(this.currentStatus.timestamp=Date.now(),delete this.currentStatus.error,this.sendStatus())}catch(Z){console.log("publish error",this.addr,Z),this.currentStatus.error=Z,this.currentStatus.timestamp=Date.now(),this.sendStatus()}}).on("error",S=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.error=S.error.message,this.sendStatus()}).on("subscribed",S=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=Es.ZF.Connected,delete this.currentStatus.error,S.data?.schema&&(this.lastMessageWithSchema=S.data),this.sendStatus(S.data)}).on("unsubscribed",()=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=Es.ZF.Disconnected,this.sendStatus()}).on("subscribing",()=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=Es.ZF.Connecting,this.sendStatus()}).on("join",S=>{this.stream.next({type:Es.o4.Join,user:S.info.user})}).on("leave",S=>{this.stream.next({type:Es.o4.Leave,user:S.info.user})})}sendStatus(S){const Z={...this.currentStatus};S&&(Z.message=S),this.stream.next(Z)}getStream(){return new Fi.c(S=>{const Z={...this.currentStatus};this.lastMessageWithSchema?.schema&&(Z.message={schema:this.lastMessageWithSchema?.schema}),S.next({...this.currentStatus,message:this.lastMessageWithSchema});const ce=this.stream.subscribe(S);return()=>{ce.unsubscribe(),this.stream.observers.length===0&&setTimeout(this.disconnectIfNoListeners,250)}})}async getPresence(){return this.subscription?this.subscription.presence().then(S=>({users:Object.keys(S.clients)})):Promise.reject("not subscribed")}disconnect(){this.currentStatus.state=Es.ZF.Shutdown,this.currentStatus.timestamp=Date.now(),this.subscription&&(this.subscription.unsubscribe(),this.subscription.removeAllListeners(),this.subscription=void 0),this.stream.complete(),this.stream.next({...this.currentStatus}),this.stream.complete(),this.shutdownCallback&&this.shutdownCallback()}shutdownWithError(S){this.currentStatus.error=S,this.sendStatus(),this.disconnect()}}function uD(A,S,Z){return{id:S,opened:Date.now(),addr:Z,getStream:()=>of({type:LiveChannelEventType.Status,id:S,timestamp:Date.now(),state:LiveChannelConnectionState.Invalid,error:A}),disconnect:()=>{}}}const By={maxLength:100,maxDelta:1/0,action:Vi.Kh.Append},Uy=5e3;class Ny{constructor(S){this.deps=S,this.open=new Map,this.liveDataStreamByChannelId={},this.onConnect=he=>{this.connectionState.next(!0)},this.onDisconnect=he=>{this.connectionState.next(!1)},this.onServerSideMessage=he=>{console.log("Publication from server-side channel",he)},this.getConnectionState=()=>this.connectionState.asObservable(),this.getStream=he=>this.getChannel(he).getStream(),this.createSubscriptionKey=he=>he.key??`xstr/${Wy++}`,this.getLiveDataStream=he=>{const ve=(0,Es.Qp)(he.addr),xe=this.liveDataStreamByChannelId[ve];if(xe)return xe;const Ce=this.getChannel(he.addr);return this.liveDataStreamByChannelId[ve]=new Ly({channelId:ve,onShutdown:()=>{delete this.liveDataStreamByChannelId[ve]},liveEventsObservable:Ce.getStream(),subscriberReadiness:this.dataStreamSubscriberReadiness,defaultStreamingFrameOptions:By,shutdownDelayInMs:Uy}),this.liveDataStreamByChannelId[ve]},this.getDataStream=he=>{const ve=this.createSubscriptionKey(he);return this.getLiveDataStream(he).get(he,ve)},this.getQueryData=async he=>(this.centrifuge.state!==ec.Uw.Connected&&await this.connectionBlocker,this.centrifuge.rpc("grafana.query",he.body)),this.getPresence=he=>this.getChannel(he).getPresence(),this.publish=async(he,ve,xe)=>this.getChannel(he).publish(ve),this.dataStreamSubscriberReadiness=S.dataStreamSubscriberReadiness.pipe((0,My.u)(),(0,Oy.Z)(!0));let Z=`${S.appUrl.replace(/^http/,"ws")}/api/live/ws`;const ce=S.grafanaAuthToken;ce!==null&&ce!==""&&(Z+="?auth_token="+ce),this.centrifuge=new ec.Ft(Z,{timeout:3e4}),S.liveEnabled&&S.orgRole!==""&&this.centrifuge.connect(),this.connectionState=new Gl.t(this.centrifuge.state===ec.Uw.Connected),this.connectionBlocker=new Promise(he=>{if(this.centrifuge.state===ec.Uw.Connected)return he();const ve=()=>{he(),this.centrifuge.removeListener("connected",ve)};this.centrifuge.addListener("connected",ve)}),this.centrifuge.on("connected",this.onConnect),this.centrifuge.on("connecting",this.onDisconnect),this.centrifuge.on("disconnected",this.onDisconnect),this.centrifuge.on("publication",this.onServerSideMessage)}getChannel(S){const Z=`${this.deps.orgId}/${S.scope}/${S.namespace}/${S.path}`;let ce=this.open.get(Z);return ce!=null||(ce=new jy(Z,S),ce.currentStatus.state===Es.ZF.Invalid)||(ce.shutdownCallback=()=>{this.open.delete(Z),this.centrifuge.removeSubscription(this.centrifuge.getSubscription(Z))},this.open.set(Z,ce),this.initChannel(ce).catch(he=>{ce&&(ce.currentStatus.state=Es.ZF.Invalid,ce.shutdownWithError(he)),this.open.delete(Z)})),ce}async initChannel(S){this.centrifuge.state!==ec.Uw.Connected&&await this.connectionBlocker;const Z=this.centrifuge.newSubscription(S.id,{data:S.addr.data});S.subscription=Z,S.initalize(),Z.subscribe()}}let Wy=0;class Fy{constructor(S){this.deps=S,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=Z=>{let ce;const he=ve=>{const xe=ve.data[0];if(!ce&&!(0,Gr.ot)(xe,Gr._w.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${xe?.type}`);return}switch(xe.type){case Gr._w.FullFrame:{ce=Vi.k9.deserialize(xe.frame);return}case Gr._w.NewValuesSameSchema:{ce.pushNewValues(xe.values);return}}};return this.deps.centrifugeSrv.getDataStream(Z).pipe((0,kt.T)(ve=>(he(ve),{...ve,data:[ce??Vi.k9.empty()]})))},this.getStream=Z=>this.deps.centrifugeSrv.getStream(Z),this.publish=async(Z,ce,he)=>he?.useSocket?this.deps.centrifugeSrv.publish(Z,ce):this.deps.backendSrv.post("api/live/publish",{channel:(0,Es.Qp)(Z),data:ce}),this.getPresence=Z=>this.deps.centrifugeSrv.getPresence(Z)}}function Ky(){const A={appUrl:`${window.location.origin}${q.$.appSubUrl}`,orgId:qt.TP.user.orgId,orgRole:qt.TP.user.orgRole,liveEnabled:q.$.liveEnabled,dataStreamSubscriberReadiness:Ty.a.ok.asObservable(),grafanaAuthToken:(0,Sy.r)()},S=new Ny(A);(0,Mh.S8)(new Fy({centrifugeSrv:S,backendSrv:(0,C.AI)()}))}function hD(){return getGrafanaLiveSrv()}var wy=e(88642),Vy=e(35307),$i=e(28998),Bh=e(8001),Sc=e(31595),Uh=e(4745),Nh=e(96016),$y=e(16817),zy=e(95027),Gy=e(16900);const Mc=new Map,fD=()=>{Mc.clear()};async function Ed(A=[]){const S=A.map(Z=>(Mc.has(Z.id)||Mc.set(Z.id,Hy(Z)),Mc.get(Z.id)));await Promise.all(S)}async function Hy(A){const S=qt.TP.user.orgRole!=="";try{const Z=await(0,zy.x)(A.id,{showErrorAlert:S});await Gy.y.importApp(Z)}catch(Z){if(!S)return;console.error(`[Plugins] Failed to preload plugin: ${A.path} (version: ${A.version})`,Z)}}var Cs=e(3260);function Oc(A=[]){const{loading:S}=(0,$y.A)(async()=>{const Z=(0,Cs.uS)(A);Z.length&&await Ed(Z)});return{isLoading:S}}var Pd=e(9453);function Qy(A){const S=(0,zl.ZV)(),Z=(0,bo.A)(S.asObservable()),ce=(0,Sc.Q)(),{isLoading:he}=Oc((0,Cs.Uy)(A));return(0,u.useMemo)(()=>{const ve=(0,Cs.V2)()&&ce;if(he)return{isLoading:!0,component:null};if(!Z?.[A])return{isLoading:!1,component:null};const xe=Z[A],Ce=Nh.R.child({title:xe.title,description:xe.description??"",pluginId:xe.pluginId});return ve&&(0,Pd.xM)(A,ce)?(Ce.error(Uh.ij),{isLoading:!1,component:null}):{isLoading:!1,component:(0,Cs.nv)({pluginId:xe.pluginId,extensionTitle:xe.title,Component:xe.component,log:Ce})}},[A,ce,Z,he])}function bd({extensionPointId:A,isLoadingAppPlugins:S,pluginContext:Z}){const ce=!!Z,he=Z?.meta.module.startsWith("core:")??!1,ve=Z?.meta.id??"",xe=Nh.R.child({pluginId:ve,extensionPointId:A});return(0,Cs.V2)()&&!(0,Pd.Fe)({extensionPointId:A,pluginId:ve,isInsidePlugin:ce,isCoreGrafanaPlugin:he,log:xe})?{result:{isLoading:!1},pointLog:xe}:(0,Cs.V2)()&&!he&&Z&&(0,Pd.PW)(A,Z)?(xe.error(Uh.Ri),{result:{isLoading:!1},pointLog:xe}):S?{result:{isLoading:!0},pointLog:xe}:{result:null,pointLog:xe}}function _y({limitPerPlugin:A,extensionPointId:S}){const Z=(0,zl.TX)(),ce=(0,bo.A)(Z.asObservable()),he=(0,Sc.Q)(),{isLoading:ve}=Oc((0,Cs.Ce)(S));return(0,u.useMemo)(()=>{const{result:xe}=bd({extensionPointId:S,pluginContext:he,isLoadingAppPlugins:ve});if(xe)return{isLoading:xe.isLoading,components:[]};const Ce=[],je={};for(const _e of ce?.[S]??[]){const{pluginId:Xe}=_e;if(A&&je[Xe]>=A)continue;je[Xe]===void 0&&(je[Xe]=0);const et=ky(_e,S);Ce.push(et),je[Xe]+=1}return{isLoading:!1,components:Ce}},[S,A,he,ce,ve])}function ky(A,S){const{component:Z,...ce}=A;function he(ve){return(0,L.jsx)(Z,{...ve})}return he.displayName=Z.displayName,he.defaultProps=Z.defaultProps,he.propTypes=Z.propTypes,he.contextTypes=Z.contextTypes,he.meta={pluginId:ce.pluginId,title:ce.title??"",description:ce.description??"",id:(0,Cs.yt)(ce.pluginId,S,ce.title),type:Ql.u6.component},he}function Yy({limitPerPlugin:A,extensionPointId:S}){const Z=(0,zl.ov)(),ce=(0,bo.A)(Z.asObservable()),he=(0,Sc.Q)(),ve=(0,Cs.Ce)(S),{isLoading:xe}=Oc(ve);return(0,u.useMemo)(()=>{const{result:Ce}=bd({extensionPointId:S,pluginContext:he,isLoadingAppPlugins:xe});if(Ce)return{isLoading:Ce.isLoading,functions:[]};const je=[],_e={};for(const Xe of ce?.[S]??[]){const{pluginId:et}=Xe;A&&_e[et]>=A||(_e[et]===void 0&&(_e[et]=0),je.push({id:(0,Cs.yt)(et,S,Xe.title),type:Ql.u6.function,title:Xe.title,description:Xe.description??"",pluginId:et,fn:Xe.fn}),_e[et]+=1)}return{isLoading:!1,functions:je}},[S,A,he,ce,xe])}function Jy({limitPerPlugin:A,extensionPointId:S,context:Z}){const ce=(0,zl.OG)(),he=(0,Sc.Q)(),ve=(0,bo.A)(ce.asObservable()),{isLoading:xe}=Oc((0,Cs.Ce)(S));return(0,u.useMemo)(()=>{const{result:Ce,pointLog:je}=bd({extensionPointId:S,pluginContext:he,isLoadingAppPlugins:xe});if(Ce)return{isLoading:Ce.isLoading,links:[]};const _e=Z?(0,Cs.$Y)(Z):{},Xe=[],et={};for(const dt of ve?.[S]??[]){const{pluginId:vt}=dt,lt=je.child({path:dt.path??"",title:dt.title,description:dt.description??"",onClick:typeof dt.onClick});if(A&&et[vt]>=A){lt.debug(`Skipping link extension from plugin "${vt}". Reason: Limit reached.`);continue}et[vt]===void 0&&(et[vt]=0);const Et=(0,Cs.hS)(vt,dt,lt,_e);if(dt.configure&&Et===void 0)continue;const It=Et?.path||dt.path,_t={id:(0,Cs.yt)(vt,S,dt.title),type:Ql.u6.link,pluginId:vt,onClick:(0,Cs.dx)(vt,S,dt,lt,_e),icon:Et?.icon||dt.icon,title:Et?.title||dt.title,description:Et?.description||dt.description||"",path:(0,ie.isString)(It)?(0,Cs.YS)(vt,It,S):void 0,category:Et?.category||dt.category};Xe.push(_t),et[vt]+=1}return{isLoading:!1,links:Xe}},[Z,S,A,ve,he,xe])}var Wh=e(92391),Xy=e(52060),Dd=e(98060),Cd=e(14658),Rc=e(6223),pD=e(54087),mD=e(80851),gD=e(32176),vD=e(31221),yD=e(91520),xD=e(92275),ED=e(82013),PD=e(2341),bD=e(19538),Zy=e(16207),Fh=e(94644),qy=e(98215),ex=e(33239),tx=e(92243),nx=e(565),ax=e(873),Kh=e(58047);const sx=(A,S,Z)=>(A.splice(Z,0,A.splice(S,1)[0]),A);function rx(A,S){S=S||{};const Z=S.delimiter||".";let ce=S.maxDepth||3,he=1;const ve={};function xe(Ce,je){Object.entries(Ce).forEach(([_e,Xe])=>{const et=S?.safe&&Array.isArray(Xe),vt=Object.prototype.toString.call(Xe)==="[object Object]",lt=je?je+Z+_e:_e;if(S?.maxDepth||(ce=he+1),!et&&vt&&Object.keys(Xe).length&&he<ce)return++he,xe(Xe,lt);ve[lt]=Xe})}return xe(A,null),ve}var ox=e(77197);function ix(A,S,Z){const ce=Math.sqrt(50),he=Math.sqrt(10),ve=Math.sqrt(2),xe=Math.abs(S-A)/Math.max(0,Z);let Ce=Math.pow(10,Math.floor(Math.log(xe)/Math.LN10));const je=xe/Ce;return je>=ce?Ce*=10:je>=he?Ce*=5:je>=ve&&(Ce*=2),S<A?-Ce:Ce}function lx(A,S){return A-Math.floor(Math.log(S)/Math.LN10)}function cx(A,S,Z){if(S&&Z&&A){const ce=Z-S,he=ce/A/1e3,ve=864e5,xe=31536e6;return he<=45?"HH:mm:ss":he<=7200||ce<=ve?"HH:mm":he<=8e4?"MM/DD HH:mm":he<=2419200||ce<=xe?"MM/DD":"YYYY-MM"}return"HH:mm"}function dx(A,S){return Math.log(A)/Math.log(S)}function ux(A){const S=A.toString();return wh(S)}function wh(A){if(isNaN(A))return 0;const S=A.indexOf(".");return S===-1?0:A.length-S-1}const tc=nx;tc.PanelPlugin=Zy.m,tc.DataSourcePlugin=Fh.tD,tc.AppPlugin=_l.hX,tc.DataSourceApi=Fh.mA;const hx=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((A,S)=>({...A,[S]:{fakeDep:1}}),{}),fx={"@emotion/css":()=>Promise.resolve().then(e.bind(e,22803)),"@emotion/react":()=>Promise.resolve().then(e.bind(e,17437)),"@grafana/data":qy,"@grafana/data/unstable":()=>e.e(2223).then(e.bind(e,2223)),"@grafana/runtime":tx,"@grafana/runtime/unstable":()=>e.e(3259).then(e.bind(e,83259)),"@grafana/slate-react":()=>Promise.resolve().then(e.bind(e,29317)),"@grafana/ui":tc,"@grafana/ui/unstable":()=>Promise.all([e.e(1142),e.e(1492)]).then(e.bind(e,58045)),"@kusto/monaco-kusto":()=>Promise.all([e.e(630),e.e(7396),e.e(4350)]).then(e.bind(e,20582)),"app/core/app_events":{default:xa.lE,__useDefault:!0},"app/core/config":{default:le.Ay,__useDefault:!0},"app/core/core":{appEvents:xa.lE,contextSrv:xa.TP},"app/core/services/backend_srv":{BackendSrv:Cc.Mf,getBackendSrv:Cc.AI},"app/core/table_model":{default:ax.A,__useDefault:!0},"app/core/time_series":{default:Kh.A,__useDefault:!0},"app/core/time_series2":{default:Kh.A,__useDefault:!0},"app/core/utils/datemath":ex,"app/core/utils/flatten":n,"app/core/utils/kbn":{default:ox.A,__useDefault:!0},"app/core/utils/ticks":a,"app/features/dashboard/impression_store":{impressions:Su.A},d3:()=>Promise.all([e.e(407),e.e(5995)]).then(e.bind(e,55995)),emotion:()=>Promise.resolve().then(e.bind(e,22803)),i18next:()=>e.e(5757).then(e.bind(e,55757)).then(A=>A.getI18nInstance()),jquery:{default:h(),__useDefault:!0},...hx,lodash:()=>Promise.resolve().then(e.t.bind(e,2543,23)).then(A=>({...A,move:sx,__useDefault:!0})),moment:()=>Promise.resolve().then(e.t.bind(e,95093,23)).then(A=>({...A,__useDefault:!0})),prismjs:()=>Promise.resolve().then(e.t.bind(e,28848,23)),react:()=>Promise.resolve().then(e.t.bind(e,96540,19)),"react/jsx-runtime":()=>Promise.resolve().then(e.t.bind(e,74848,19)),"react/jsx-dev-runtime":()=>e.e(5446).then(e.t.bind(e,85446,19)),"react-dom":()=>Promise.resolve().then(e.t.bind(e,40961,19)),"react-inlinesvg":()=>Promise.resolve().then(e.bind(e,55494)),"react-redux":()=>Promise.resolve().then(e.bind(e,71468)),"react-router-dom":()=>Promise.resolve().then(e.bind(e,61417)),"react-router":()=>Promise.resolve().then(e.bind(e,35557)),redux:()=>Promise.resolve().then(e.bind(e,14644)),rxjs:()=>Promise.all([e.e(4251),e.e(5091)]).then(e.bind(e,75091)),"rxjs/operators":()=>Promise.all([e.e(4251),e.e(2975)]).then(e.bind(e,32975)),slate:()=>Promise.resolve().then(e.bind(e,82611)),"slate-plain-serializer":()=>Promise.resolve().then(e.bind(e,75226)),"slate-react":()=>Promise.resolve().then(e.bind(e,29317))};var Td=e(61844);function px(){const A=(0,Td.kB)(fx);Rc.z.addImportMap({imports:A});const S=Rc.z.constructor.prototype;S.shouldFetch=function(ve){const xe=(0,Cd.IQ)(ve);return/^[^#?]+\.(js)([?#].*)?$/.test(ve)?xe?.loadingStrategy!==gt.xf.script:!0};const Z=S.import;S.import=function(...ve){return Z.apply(this,ve).then(xe=>xe&&xe.__useDefault?xe.default:xe)};const ce=S.fetch;S.fetch=function(ve,xe){return mx(ce,ve,xe)};const he=S.resolve;S.resolve=gx.bind(S,he),S.onload=vx}async function mx(A,S,Z){const ce=await A(S,Z),he=ce.headers.get("content-type")||"";if(Dd.Bu.test(he)){let xe=await ce.text();if((0,Td.OD)(ce.url)){const Ce=(0,Xy.N)({url:ce.url,source:xe});return new Response(new Blob([Ce],{type:"text/javascript"}))}return new Response(new Blob([xe],{type:"text/javascript"}))}return ce}function gx(A,S,Z){try{const ce=A.apply(this,[S,Z]),he=yx(ce);return(he.endsWith(".js")||he.endsWith(".css"))&&!(0,Td.OD)(he)?(0,Cd.Ve)(he):he}catch{if(Dd.$b.test(S)){const he=xx(S),ve=A.apply(this,[he,Z]);return(0,Cd.Ve)(ve)}return console.warn(`SystemJS: failed to resolve '${S}'`),S}}function vx(A,S){if(new URL(S,window.location.origin).pathname.endsWith(".css")&&!A){const he=Rc.z.get(S)?.default;he&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,he])}}function yx(A){return A.startsWith(`${Dd.XV}:`)?A:(A.endsWith("!")&&(A=A.slice(0,-1)),["css","js","json","wasm"].some(ce=>A.endsWith(ce))?A:A+".js")}function xx(A){const S=A.split("/")[1];let Z="";for(const[ve]of Rc.z.entries())if(ve.includes(S)){Z=ve;break}const ce=Z.lastIndexOf("/plugins");return ce===-1?`${q.$.appSubUrl??""}/public/${A}`:`${Z.substring(0,ce)}/${A}`}var Ex=e(57532),Vh=e(17548),Px=e(96215),bx=e(39050),Sd=e(71393);class Dx{constructor(){this.subject=new Lh.m(1)}get(){return this.subject.asObservable()}run(S){const{queries:Z,timezone:ce,datasource:he,panelId:ve,app:xe,dashboardUID:Ce,timeRange:je,timeInfo:_e,cacheTimeout:Xe,queryCachingTTL:et,maxDataPoints:dt,scopedVars:vt,minInterval:lt}=S;this.subscription&&this.subscription.unsubscribe();const Et={app:xe??_l.Jk.Unknown,requestId:(0,Px.S)(),timezone:ce,panelId:ve,dashboardUID:Ce,range:je,timeInfo:_e,interval:"",intervalMs:0,targets:(0,ie.cloneDeep)(Z),maxDataPoints:dt,scopedVars:vt||{},cacheTimeout:Xe,queryCachingTTL:et,startTime:Date.now()};Et.rangeRaw=je.raw,(0,Pr.H)(Cx(he,Et.scopedVars)).pipe((0,Ex.$)()).subscribe({next:It=>{Et.targets=Et.targets.map(Mn=>(Mn.datasource||(Mn.datasource=It.getRef()),Mn));const _t=lt?(0,Zn.w)().replace(lt,Et.scopedVars):It.interval,rn=Vh.calculateInterval(je,dt,_t);Et.scopedVars=Object.assign({},Et.scopedVars,{__interval:{text:rn.interval,value:rn.interval},__interval_ms:{text:rn.intervalMs.toString(),value:rn.intervalMs}}),Et.interval=rn.interval,Et.intervalMs=rn.intervalMs,this.subscription=(0,Sd.BN)(It,Et).subscribe({next:Mn=>{const cn=(0,Br.N$)(Mn,this.lastResult);this.lastResult=(0,bx.B)(cn,this.lastResult),this.subject.next(this.lastResult)}})},error:It=>console.error("PanelQueryRunner Error",It)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===ha.Gu.Loading&&this.subject.next({...this.lastResult,state:ha.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function Cx(A,S){return A&&"query"in A?A:(0,$i.tR)().get(A,S)}var $h=e(22429);function Tx(){window.grafanaRuntime={getDashboardSaveModel:()=>{const A=(0,$h.UA)().getCurrent();if(A)return A.getSaveModelCloneOld()},getDashboardTimeRange:()=>{const A=(0,Yo.jG)().timeRange();return{from:A.from.valueOf(),to:A.to.valueOf(),raw:A.raw}},getPanelData:()=>{const A=(0,$h.UA)().getCurrent();if(A)return A.panels.reduce((S,Z)=>(S[Z.id]=Z.getQueryRunner().getLastResult(),S),{})}}}var Sx=e(35886),nc=e(54742),Yn=e(99305),zh=e(48480),Mx=e(99584),Hr=e(17752);function Gh(A){return A.extended&&"infoText"in A.extended?A.extended:null}function Hh(A){return A.extended&&"dataSourceTypes"in A.extended?A.extended:null}function Md(A){return A.extended&&"dataSource"in A.extended?A.extended:null}var ja=e(93612),ac=e(48421);const Ox=(A,S)=>{const{rootStateKey:Z}=S.variable;if(!Z)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:Gh(Hr.nS)};const{editor:ce}=(0,ja.nx)(Z,A);return{extended:Gh(ce)}},Rx={changeVariableDatasource:ac.Iv},Ix=(0,pn.connect)(Ox,Rx);class Ax extends u.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=S=>{this.props.changeVariableDatasource((0,Yn.jX)(this.props.variable),(0,zh.p$)(S))}}componentDidMount(){const{rootStateKey:S}=this.props.variable;if(!S){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:S,extended:Z}=this.props;return(0,L.jsx)(Mx.Q,{datasource:S.datasource??void 0,onDataSourceChange:this.onDatasourceChanged,infoText:Z?.infoText,datasourceSupported:S.datasource!==void 0})}}const Lx=Ix(Ax);var Qh=e(61875),Od=e(76671);const _h=90,kh=({datasource:A,onChange:S,disabled:Z,filterKey:ce,allFilters:he})=>{const ve=()=>Yh(A,ce,he),xe=()=>Bx(A,ce,he),Ce=(0,L.jsx)("span",{className:"gf-form-label query-part","aria-label":(0,f.t)("variables.ad-hoc-filter-key.plus-segment.aria-label-add-filter","Add Filter"),children:(0,L.jsx)(Ha.I,{name:"plus"})});return ce===null?(0,L.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper",children:(0,L.jsx)(Od.s,{disabled:Z,className:"query-segment-key",Component:Ce,value:ce,onChange:S,loadOptions:ve,inputMinWidth:_h})}):(0,L.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper",children:(0,L.jsx)(Od.s,{disabled:Z,className:"query-segment-key",value:ce,onChange:S,loadOptions:xe,inputMinWidth:_h})})},Ic="-- remove filter --",jx={label:Ic,value:Ic},Yh=async(A,S,Z)=>{const ce=await(0,$i.tR)().get(A);if(!ce||!ce.getTagKeys)return[];const he=Z.filter(Ce=>Ce.key!==S),ve=await ce.getTagKeys({filters:he});return(Array.isArray(ve)?ve:ve.data).map(Ce=>({label:Ce.text,value:Ce.text}))},Bx=async(A,S,Z)=>{const ce=await Yh(A,S,Z);return[jx,...ce]},Ux=({datasource:A,disabled:S,onChange:Z,filterKey:ce,filterValue:he,placeHolder:ve,allFilters:xe})=>{const Ce=(0,Pt.of)(Wx),je=()=>Nx(A,ce,xe);return(0,L.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper",children:(0,L.jsx)(Od.s,{className:Ce.segment,disabled:S,placeholder:ve,value:he,onChange:Z,loadOptions:je})})},Nx=async(A,S,Z)=>{const ce=await(0,$i.tR)().get(A);if(!ce||!ce.getTagValues)return[];const he=(0,Yo.jG)().timeRange(),ve=Z.filter(je=>je.key!==S),xe=await ce.getTagValues({key:S,filters:ve,timeRange:he});return(Array.isArray(xe)?xe:xe.data).map(je=>({label:je.text,value:je.text}))};function Wx(){return{segment:(0,Je.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"500px"})}}const Fx=["=","!=","<",">","=~","!~"].map(A=>({label:A,value:A})),Kx=({value:A,disabled:S,onChange:Z})=>(0,L.jsx)(Qh.Y,{className:"query-segment-operator",value:A,disabled:S,options:Fx,onChange:Z}),Jh=({datasource:A,filter:{key:S,operator:Z,value:ce},onKeyChange:he,onOperatorChange:ve,onValueChange:xe,placeHolder:Ce,allFilters:je,disabled:_e})=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(kh,{disabled:_e,datasource:A,filterKey:S,onChange:he,allFilters:je}),(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)(Kx,{disabled:_e,value:Z,onChange:ve})}),(0,L.jsx)(Ux,{disabled:_e,datasource:A,filterKey:S,filterValue:ce,allFilters:je,onChange:xe,placeHolder:Ce})]}),wx=({datasource:A,appendBefore:S,onCompleted:Z,allFilters:ce})=>{const[he,ve]=(0,u.useState)(null),[xe,Ce]=(0,u.useState)("="),je=(0,u.useCallback)(et=>{if(et.value!==Ic){ve(et.value??"");return}ve(null)},[ve]),_e=(0,u.useCallback)(et=>Ce(et.value??""),[Ce]),Xe=(0,u.useCallback)(et=>{Z({value:et.value??"",operator:xe,key:he}),ve(null),Ce("=")},[Z,xe,he]);return he===null?(0,L.jsx)(kh,{datasource:A,filterKey:he,onChange:je,allFilters:ce}):(0,L.jsxs)(u.Fragment,{children:[S,(0,L.jsx)(Jh,{datasource:A,filter:{key:he,value:"",operator:xe},placeHolder:(0,f.t)("variable.adhoc.placeholder","Select value"),onKeyChange:je,onOperatorChange:_e,onValueChange:Xe,allFilters:ce})]},"filter-builder")},Xh=({label:A})=>(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)("span",{className:"gf-form-label query-keyword",children:A})});class Vx extends u.PureComponent{constructor(){super(...arguments),this.connectorLabel=(0,f.t)("variables.ad-hoc-filter.label-and","AND"),this.onChange=(S,Z)=>ce=>{const{filters:he}=this.props,{value:ve}=ce;return ce.value===Ic?this.props.removeFilter(S):this.props.changeFilter(S,{...he[S],[Z]:ve})},this.appendFilterToVariable=S=>{this.props.addFilter(S)}}render(){const{filters:S,disabled:Z}=this.props;return(0,L.jsxs)("div",{className:"gf-form-inline",children:[this.renderFilters(S,Z),!Z&&(0,L.jsx)(wx,{datasource:this.props.datasource,appendBefore:S.length>0?(0,L.jsx)(Xh,{label:this.connectorLabel}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()})]})}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(S,Z){return S.length===0&&Z?(0,L.jsx)(Qh.Y,{disabled:Z,value:"No filters",options:[],onChange:()=>{}}):S.reduce((ce,he,ve)=>(ce.length>0&&ce.push((0,L.jsx)(Xh,{label:this.connectorLabel},`condition-${ve}`)),ce.push(this.renderFilterSegments(he,ve,Z)),ce),[])}renderFilterSegments(S,Z,ce){return(0,L.jsx)(u.Fragment,{children:(0,L.jsx)(Jh,{disabled:ce,datasource:this.props.datasource,filter:S,onKeyChange:this.onChange(Z,"key"),onOperatorChange:this.onChange(Z,"operator"),onValueChange:this.onChange(Z,"value"),allFilters:this.getAllFilters()})},`filter-${Z}`)}}const $x={addFilter:ac.U2,removeFilter:ac.VT,changeFilter:ac.$u},zx=(0,pn.connect)(null,$x);class Gx extends u.PureComponent{constructor(){super(...arguments),this.addFilter=S=>{this.props.addFilter((0,Yn.jX)(this.props.variable),S)},this.removeFilter=S=>{this.props.removeFilter((0,Yn.jX)(this.props.variable),S)},this.changeFilter=(S,Z)=>{this.props.changeFilter((0,Yn.jX)(this.props.variable),{index:S,filter:Z})}}render(){const{filters:S,datasource:Z,baseFilters:ce}=this.props.variable;return(0,L.jsx)(Vx,{datasource:Z,filters:S,baseFilters:ce,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Zh=zx(Gx);Zh.displayName="AdHocPicker";var qh=e(25206);const Hx=A=>A.map(S=>Yx(S).map(_x).join("|")),Qx=A=>{if((0,ie.isArray)(A))return A.map(ef).filter(Jx);const S=ef(A);return S===null?[]:[S]};function _x(A){return A==null?"":/\|/g[Symbol.replace](A,"__gfp__")}function kx(A){return A==null?"":/__gfp__/g[Symbol.replace](A,"|")}function Yx(A){return[A.key,A.operator,A.value]}function ef(A){if(!(0,ie.isString)(A)||A.length===0)return null;const S=A.split("|").map(kx);return{key:S[0],operator:S[1],value:S[2]}}function Jx(A){return A!==null&&(0,ie.isString)(A.value)}const tf=async()=>{},Xx=()=>({id:"adhoc",description:(0,f.t)("variables.create-ad-hoc-variable-adapter.description.add-keyvalue-filters-on-the-fly","Add key/value filters on the fly."),name:"Ad hoc filters",initialState:qh.MK,reducer:qh.AA,picker:Zh,editor:Lx,dependsOn:()=>!1,setValue:tf,setValueFromUrl:async(A,S)=>{const Z=Qx(S);await(0,qa.JD)((0,ac.D4)((0,Yn.jX)(A),Z))},updateOptions:tf,getSaveModel:A=>{const{index:S,id:Z,state:ce,global:he,rootStateKey:ve,...xe}=(0,ie.cloneDeep)(A);return xe},getValueForUrl:A=>{const S=A?.filters??[];return Hx(S)}});var Rd=e(14644),Zx=e(8135),Ls=e(8921),Ts=e(67933),nf=e(13288),qx=e(44240),Ac=e(16126),eE=e(38975),tE=e(67791),nE=e(66847),aE=e(69850),sE=e(24726),hs=e(39167),Ga=e(74887),Qr=e(65307),Jo=e(7389),sc=e(96120),zi=e(88813);const rE={...zi.Vg,type:"query",datasource:null,query:"",regex:"",sort:Jo.ZG.disabled,refresh:Jo.CO.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},oE=(A,S)=>{if(S===Jo.ZG.disabled)return A;const Z=Math.ceil(S/2),ce=S%2===0;return Z===1?A=(0,ie.sortBy)(A,"text"):Z===2?A=(0,ie.sortBy)(A,he=>{if(!he.text)return-1;const ve=he.text.match(/.*?(\d+).*/);return!ve||ve.length<2?-1:parseInt(ve[1],10)}):Z===3?A=(0,ie.sortBy)(A,he=>(0,ie.toLower)(he.text)):Z===4&&A.sort((he,ve)=>he.text?ve.text?he.text.localeCompare(ve.text,void 0,{numeric:!0}):1:-1),ce&&(A=A.reverse()),A},iE=(A,S)=>{const Z=[];let ce=null;S.lastIndex=0;do ce=S.exec(A),ce&&Z.push(ce);while(S.global&&ce&&ce[0]!==""&&ce[0]!==void 0);return Z},lE=(A,S,Z)=>{let ce,he=[];A&&(ce=(0,bt.dO)(A));for(let ve=0;ve<Z.length;ve++){const xe=Z[ve];let Ce=xe.text===void 0||xe.text===null?xe.value:xe.text,je=xe.value===void 0||xe.value===null?xe.text:xe.value;if((0,ie.isNumber)(je)&&(je=je.toString()),(0,ie.isNumber)(Ce)&&(Ce=Ce.toString()),ce){const _e=iE(je,ce);if(!_e.length)continue;const Xe=_e.find(lt=>lt.groups&&lt.groups.value),et=_e.find(lt=>lt.groups&&lt.groups.text),dt=_e.find(lt=>lt.length>1),vt=_e.length>1&&dt;if(Xe||et)je=Xe?.groups?.value??et?.groups?.text,Ce=et?.groups?.text??Xe?.groups?.value;else if(vt){for(let lt=0;lt<_e.length;lt++){const Et=_e[lt];he.push({text:Et[1],value:Et[1],selected:!1})}continue}else dt&&(Ce=dt[1],je=dt[1])}he.push({text:Ce,value:je,selected:!1})}return he=(0,ie.uniqBy)(he,"value"),oE(he,S)},af=(0,Qr.Z0)({name:"templating/query",initialState:sc.j,reducers:{updateVariableOptions:(A,S)=>{const{results:Z,templatedRegex:ce}=S.payload.data,he=(0,ja.Fs)(A,S.payload.id);if(he.type!=="query")return;const{includeAll:ve,sort:xe}=he,Ce=lE(ce,xe,Z);ve&&Ce.unshift({text:Ls.Zm,value:Ls.To,selected:!1}),Ce.length||Ce.push({text:Ls.ou,value:Ls.Ek,isNone:!0,selected:!1}),he.options=Ce}}}),cE=af.reducer,{updateVariableOptions:dE}=af.actions;function uE(){return A=>A.pipe((0,kt.T)(hE))}function hE(A){const S=A.series;if(!S||!S.length)return[];if(mE(S))return S;const Z=(0,Br.Bt)(S),ce=[];let he=-1,ve=-1,xe=-1,Ce=-1;for(const je of Z)for(let _e=0;_e<je.fields.length;_e++){const Xe=je.fields[_e],et=(0,fe.Ct)(Xe,je,S).toLowerCase();Xe.type===oe.PU.string&&xe===-1&&(xe=_e),et==="text"&&Xe.type===oe.PU.string&&ve===-1&&(ve=_e),et==="value"&&Xe.type===oe.PU.string&&he===-1&&(he=_e),et==="expandable"&&(Xe.type===oe.PU.boolean||Xe.type===oe.PU.number)&&Ce===-1&&(Ce=_e)}if(xe===-1)throw new Error("Couldn't find any field of type string in the results.");for(const je of Z)for(let _e=0;_e<je.length;_e++){const Xe=Ce!==-1?je.fields[Ce].values[_e]:void 0,et=je.fields[xe].values[_e],dt=ve!==-1?je.fields[ve].values[_e]:null,vt=he!==-1?je.fields[he].values[_e]:null;if(he===-1&&ve===-1){ce.push({text:et,value:et,expandable:Xe});continue}if(he===-1&&ve!==-1){ce.push({text:dt,value:dt,expandable:Xe});continue}if(he!==-1&&ve===-1){ce.push({text:vt,value:vt,expandable:Xe});continue}ce.push({text:dt,value:vt,expandable:Xe})}return ce}function fE(A){return S=>S.pipe((0,kt.T)(Z=>{const{variable:ce,dispatch:he,getTemplatedRegexFunc:ve}=A;if(!ce.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const xe=ve(ce),Ce=(0,Yn.qD)(ce,{results:Z,templatedRegex:xe});he((0,Ga.kb)(ce.rootStateKey,dE(Ce)))}))}function pE(A){return S=>S.pipe((0,Bs.Z)(()=>{const{dispatch:Z,variable:ce,searchFilter:he}=A;return he?(0,Nn.of)():(0,Pr.H)(Z((0,hs.kl)((0,Yn.jX)(ce))))}))}function mE(A){if(!A)return!1;if(!A.length)return!0;const S=A[0];if((0,Br.ci)(S))return!1;for(const Z in S){if(!S.hasOwnProperty(Z)||S[Z]!==null&&typeof S[Z]!="string"&&typeof S[Z]!="number")continue;const ce=Z.toLowerCase();if(ce==="text"||ce==="value")return!0}return!1}var Lc=e(48592),gE=e(22592);class vE{constructor(){this.runners=[new yE,new xE,new EE,new bE]}getRunnerForDatasource(S){const Z=this.runners.find(ce=>ce.canRun(S));if(Z)return Z;throw new Error("Couldn't find a query runner that matches supplied arguments.")}isQueryRunnerAvailableForDatasource(S){return this.runners.some(Z=>Z.canRun(S))}}class yE{constructor(){this.type=Lc.Qz.Legacy}canRun(S){return(0,Ts.d5)(S)}getTarget({datasource:S,variable:Z}){if((0,Ts.d5)(S))return Z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:S,variable:Z,searchFilter:ce,timeSrv:he},ve){if(!(0,Ts.d5)(S))return rc();const xe=(0,Yn.iP)(Z,ce,he,ve.scopedVars);return(0,Pr.H)(S.metricFindQuery(Z.query,xe)).pipe((0,Bs.Z)(Ce=>{if(!Ce||!Ce.length)return rc();const je=Ce;return(0,Nn.of)({series:je,state:ha.Gu.Done,timeRange:xe.range})}))}}class xE{constructor(){this.type=Lc.Qz.Standard}canRun(S){return(0,Ts.Hf)(S)}getTarget({datasource:S,variable:Z}){if((0,Ts.Hf)(S))return S.variables.toDataQuery(Z.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:S,runRequest:Z},ce){return(0,Ts.Hf)(S)?S.variables.query?Z(S,ce,S.variables.query.bind(S.variables)):Z(S,ce):rc()}}class EE{constructor(){this.type=Lc.Qz.Custom}canRun(S){return(0,Ts.zs)(S)}getTarget({datasource:S,variable:Z}){if((0,Ts.zs)(S))return Z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:S,runRequest:Z},ce){return(0,Ts.zs)(S)?Z(S,ce,S.variables.query.bind(S.variables)):rc()}}const PE="variable-query";class bE{constructor(){this.type=Lc.Qz.Datasource}canRun(S){return(0,Ts.X3)(S)}getTarget({datasource:S,variable:Z}){if((0,Ts.X3)(S))return{...Z.query,refId:Z.query.refId??PE};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:S,runRequest:Z},ce){return(0,Ts.X3)(S)?Z(S,ce):rc()}}function rc(){return(0,Nn.of)({state:ha.Gu.Done,series:[],timeRange:(0,gE.E2)()})}class DE{constructor(S={dispatch:qa.JD,getState:qa.Gu,getVariable:ja.dn,getTemplatedRegex:Yn.u7,getTimeSrv:Yo.jG,queryRunners:new vE,runRequest:Sd.BN}){this.dependencies=S,this.updateOptionsRequests=new Tc.B,this.updateOptionsResults=new Tc.B,this.cancelRequests=new Tc.B,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(S){this.updateOptionsRequests.next(S)}getResponse(S){return this.updateOptionsResults.asObservable().pipe((0,Ac.p)(Z=>Z.identifier===S))}cancelRequest(S){this.cancelRequests.next({identifier:S})}destroy(){this.subscription.unsubscribe()}onNewRequest(S){const{datasource:Z,identifier:ce,searchFilter:he}=S;try{const{dispatch:ve,runRequest:xe,getTemplatedRegex:Ce,getVariable:je,queryRunners:_e,getTimeSrv:Xe,getState:et}=this.dependencies,dt=(0,ja.y7)(et());this.updateOptionsResults.next({identifier:ce,state:ha.Gu.Loading});const vt=je(ce,et());if(vt.type!=="query")return;const lt=Xe(),Et={variable:vt,datasource:Z,searchFilter:he,timeSrv:lt,runRequest:xe};if(!_e.isQueryRunnerAvailableForDatasource(Z)){const Mn=new Error("Query Runner is not available for datasource.");this.updateOptionsResults.next({identifier:ce,state:ha.Gu.Error,error:Mn});return}const It=_e.getRunnerForDatasource(Z),_t=It.getTarget({datasource:Z,variable:vt}),rn=this.getRequest(vt,S,_t);It.runRequest(Et,rn).pipe((0,Ac.p)(()=>{const Mn=(0,ja.y7)(et());return dt===Mn}),(0,Ac.p)(Mn=>Mn.state===ha.Gu.Done||Mn.state===ha.Gu.Error),(0,eE.s)(1),(0,Bs.Z)(Mn=>Mn.state===ha.Gu.Error?(0,nf.$)(()=>Mn.error):(0,Nn.of)(Mn)),uE(),fE({variable:vt,dispatch:ve,getTemplatedRegexFunc:Ce}),pE({variable:vt,dispatch:ve,searchFilter:he}),(0,tE.Q)((0,qx.h)(this.updateOptionsRequests,this.cancelRequests).pipe((0,Ac.p)(Mn=>{let cn=!1;return Mn.identifier.id===ce.id&&(cn=!0,this.updateOptionsResults.next({identifier:ce,state:ha.Gu.Loading,cancelled:cn})),cn}))),(0,nE.W)(Mn=>Mn.cancelled?(0,Nn.of)({}):(this.updateOptionsResults.next({identifier:ce,state:ha.Gu.Error,error:Mn}),(0,nf.$)(()=>Mn))),(0,aE.j)(()=>{this.updateOptionsResults.next({identifier:ce,state:ha.Gu.Done})})).subscribe()}catch(ve){this.updateOptionsResults.next({identifier:ce,state:ha.Gu.Error,error:ve})}}getRequest(S,Z,ce){const{searchFilter:he}=Z,ve={variable:{text:S.current.text,value:S.current.value}},je={...he?{searchFilter:{text:he,value:he}}:{},...ve},_e=this.dependencies.getTimeSrv().timeRange();return{app:_l.Jk.Dashboard,requestId:(0,sE.A)(),timezone:"",range:_e,interval:"",intervalMs:0,targets:[ce],scopedVars:je,startTime:Date.now()}}}let sf;function CE(A){sf=A}function Id(){return sf}const TE=A=>{if(!SE(A))return A.name;const{current:S}=A;return Array.isArray(S.text)?S.text.join(" + "):S.text},SE=A=>Array.isArray(A?.options)||typeof A?.current=="object";var Co=(A=>(A[A.moveUp=38]="moveUp",A[A.moveDown=40]="moveDown",A[A.select=32]="select",A[A.cancel=27]="cancel",A[A.selectAndClose=13]="selectAndClose",A))(Co||{});const rf=(0,u.memo)(({value:A,id:S,onNavigate:Z,onChange:ce,...he})=>{const ve=Ce=>{if(Co[Ce.keyCode]&&Ce.keyCode!==Co.select){const je=Ce.ctrlKey||Ce.metaKey||Ce.shiftKey;Z(Ce.keyCode,je),Ce.preventDefault()}},xe=Ce=>{ce(Ce.target.value)};return(0,L.jsx)("input",{...he,ref:Ce=>{Ce&&(Ce.focus(),Ce.setAttribute("style",`width:${Math.max(Ce.width,150)}px`))},id:S,type:"text",className:"gf-form-input",value:A??"",onChange:xe,onKeyDown:ve,placeholder:(0,f.t)("variable.dropdown.placeholder","Enter variable value")})});rf.displayName="VariableInput";var ME=e(39884),OE=e(11297);const RE=({loading:A,disabled:S,onClick:Z,text:ce,onCancel:he,id:ve})=>{const xe=(0,Pt.of)(cf),Ce=(0,u.useCallback)(je=>{je.stopPropagation(),je.preventDefault(),Z()},[Z]);return A?(0,L.jsxs)("div",{className:xe.container,"data-testid":Za.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ce}`),title:ce,id:ve,children:[(0,L.jsx)(lf,{text:ce}),(0,L.jsx)(ME.I,{loading:!0,onCancel:he})]}):(0,L.jsxs)("button",{onClick:Ce,className:xe.container,"data-testid":Za.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${ce}`),"aria-expanded":!1,"aria-controls":`options-${ve}`,id:ve,title:ce,disabled:S,children:[(0,L.jsx)(lf,{text:ce}),(0,L.jsx)(Ha.I,{"aria-hidden":!0,name:"angle-down",size:"sm"})]})},lf=({text:A})=>{const S=(0,Pt.of)(cf);return(0,L.jsx)("span",{className:S.textAndTags,children:A===Ls.Zm?(0,f.t)("variable.picker.link-all","All"):A})},cf=A=>{const S=(0,OE.$)(A);return{container:(0,Je.css)({maxWidth:"500px",paddingRight:"10px",padding:A.spacing(0,1),backgroundColor:A.components.input.background,border:`1px solid ${A.components.input.borderColor}`,borderRadius:A.shape.radius.default,display:"flex",alignItems:"center",color:A.colors.text.primary,height:A.spacing(A.components.height.md),[`.${S.badge}`]:{margin:"0 5px"},"&:disabled":{backgroundColor:A.colors.action.disabledBackground,color:A.colors.action.disabledText,border:`1px solid ${A.colors.action.disabledBackground}`}}),textAndTags:(0,Je.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:A.spacing(.25),userSelect:"none"})}};var IE=e(65240),AE=e(45893),LE=e(70427);class jE extends u.PureComponent{constructor(){super(...arguments),this.onToggle=S=>Z=>{const ce=Z.shiftKey||Z.ctrlKey||Z.metaKey;this.handleEvent(Z),this.props.onToggle(S,ce)},this.onToggleAll=S=>{this.handleEvent(S),this.props.onToggleAll()}}handleEvent(S){S.preventDefault(),S.stopPropagation()}render(){const{multi:S,values:Z,highlightIndex:ce,selectedValues:he,onToggle:ve,onToggleAll:xe,theme:Ce,...je}=this.props,_e=Ad(Ce);return(0,L.jsx)("div",{className:_e.variableValueDropdown,children:(0,L.jsx)("div",{className:_e.variableOptionsWrapper,children:(0,L.jsxs)("ul",{className:_e.variableOptionsColumn,"aria-label":Za.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...je,children:[this.renderMultiToggle(),Z.map((Xe,et)=>this.renderOption(Xe,et))]})})})}renderOption(S,Z){const{highlightIndex:ce,multi:he,theme:ve}=this.props,xe=Ad(ve),Ce=S.value===Ls.To;return(0,L.jsx)("li",{children:(0,L.jsxs)("button",{"data-testid":Za.Tp.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":S.selected,className:(0,Je.cx)((0,me.my)(ve),xe.variableOption,{[xe.highlighted]:Z===ce,[xe.variableAllOption]:Ce},xe.noStyledButton),onClick:this.onToggle(S),children:[(0,L.jsx)("span",{className:(0,Je.cx)(xe.variableOptionIcon,{[xe.variableOptionIconSelected]:S.selected,[xe.hideVariableOptionIcon]:!he})}),(0,L.jsx)("span",{"data-testid":Za.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${S.text}`),children:Ce?(0,f.t)("variable.picker.option-all","All"):S.text})]})},`${S.value}`)}renderMultiToggle(){const{multi:S,selectedValues:Z,theme:ce,values:he}=this.props,ve=Ad(ce),xe=he.some(je=>je.value===Ls.To);if(!S)return null;const Ce=()=>(0,L.jsx)(f.x6,{i18nKey:"variable.picker.option-tooltip",children:"Clear selections"});return(0,L.jsx)(Hc.m,{content:Ce,placement:"top",children:(0,L.jsxs)("button",{className:(0,Je.cx)((0,me.my)(ce),ve.variableOption,ve.variableOptionColumnHeader,ve.noStyledButton,{[ve.noPaddingBotton]:xe}),role:"checkbox","aria-checked":Z.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":(0,f.t)("variables.variable-options.aria-label-toggle-all-values","Toggle all values"),"data-placement":"top",children:[(0,L.jsx)("span",{className:(0,Je.cx)(ve.variableOptionIcon,{[ve.variableOptionIconManySelected]:Z.length>1})}),(0,L.jsxs)(f.x6,{i18nKey:"variable.picker.option-selected-values",values:{numSelected:Z.length},children:["Selected (","{{numSelected}}",")"]})]})})}}const Ad=(0,IE.N)(A=>{const S=A.isDark?AE:LE;return{hideVariableOptionIcon:(0,Je.css)({display:"none"}),highlighted:(0,Je.css)({backgroundColor:A.colors.action.hover}),noStyledButton:(0,Je.css)({width:"100%",textAlign:"left"}),variableOption:(0,Je.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px","&:hover":{backgroundColor:A.colors.action.hover}}),variableOptionColumnHeader:(0,Je.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,Je.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${S}) left top no-repeat`}),variableOptionIconManySelected:(0,Je.css)({background:`url(${S}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,Je.css)({background:`url(${S}) 0px -18px no-repeat`}),variableValueDropdown:(0,Je.css)({backgroundColor:A.colors.background.primary,border:`1px solid ${A.colors.border.weak}`,borderRadius:A.shape.borderRadius(2),boxShadow:A.shadows.z2,position:"absolute",top:A.spacing(A.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:A.zIndex.typeahead}),variableOptionsColumn:(0,Je.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,Je.css)({display:"table",width:"100%"}),variableAllOption:(0,Je.css)({borderBottom:`1px solid ${A.colors.border.weak}`,paddingBottom:A.spacing(1)}),noPaddingBotton:(0,Je.css)({paddingBottom:0})}}),BE=(0,Pt.cV)(jE);var UE=e(94452),df=e(3594),To=e(88681),pr=e(99598);const NE=(A,S,Z)=>async(ce,he)=>{if(S===Co.cancel)return await ce(jc(A));if(S===Co.select)return ce(Ld(A,Z));if(S===Co.selectAndClose)return(0,ja.nx)(A,he()).optionsPicker.multi?ce(Ld(A,Z)):(ce(Ld(A,Z,!0)),ce(jc(A)));if(S===Co.moveDown)return ce((0,Ga.kb)(A,(0,pr.O$)(1)));if(S===Co.moveUp)return ce((0,Ga.kb)(A,(0,pr.O$)(-1)))},WE=(A,S="")=>async(Z,ce)=>{const{rootStateKey:he}=A,{id:ve,queryValue:xe}=(0,ja.nx)(he,ce()).optionsPicker,Ce={id:ve,rootStateKey:he,type:"query"},je=(0,ja.dn)(Ce,ce());if(!("options"in je)||(Z((0,Ga.kb)(he,(0,pr.S8)(S))),(0,ie.trim)(xe)===(0,ie.trim)(S)))return;const{query:_e,options:Xe}=je,et=typeof _e=="string"?_e:_e.target;return(0,UE.E)(et)?VE(Z,ce,S,he):Z((0,Ga.kb)(he,(0,pr.fx)(Xe)))},FE=async A=>{if((0,df.R)(A.current))return;await nc.B.get(A.type).setValue(A,A.current,!0)},jc=(A,S)=>async(Z,ce)=>{const he=(0,ja.nx)(A,ce()).optionsPicker,ve={id:he.id,rootStateKey:A,type:"query"},xe=(0,ja.dn)(ve,ce());if(!(0,Ts.SP)(xe))return;const Ce={option:$E(he)},je={propName:"queryValue",propValue:he.queryValue};Z((0,Ga.kb)(A,(0,To.dE)((0,Yn.qD)(xe,Ce)))),Z((0,Ga.kb)(A,(0,To.QP)((0,Yn.qD)(xe,je))));const _e=(0,ja.dn)(ve,ce());if((0,Ts.SP)(_e)&&(Z((0,Ga.kb)(A,(0,pr.Fu)())),(0,Yn.Lz)(xe)!==(0,Yn.Lz)(_e)))return S?S(_e):await FE(_e)},KE=(A,S)=>async(Z,ce)=>{const{id:he,rootStateKey:ve}=A,xe=(0,ja.nx)(ve,ce()).optionsPicker;xe.id&&xe.id!==he&&await Z(jc(ve,S));const Ce=(0,ja.dn)(A,ce());(0,Ts.SP)(Ce)&&Z((0,Ga.kb)(ve,(0,pr.MO)(Ce)))},Ld=(A,S,Z=!1)=>(ce,he)=>{const{highlightIndex:ve,options:xe}=(0,ja.nx)(A,he()).optionsPicker,Ce=xe[ve];ce((0,Ga.kb)(A,(0,pr.U9)({option:Ce,forceSelect:Z,clearOthers:S})))},wE=async(A,S,Z,ce)=>{try{const{id:he}=(0,ja.nx)(ce,S()).optionsPicker,ve={id:he,rootStateKey:ce,type:"query"},xe=(0,ja.dn)(ve,S());if(!(0,Ts.SP)(xe))return;await nc.B.get(xe.type).updateOptions(xe,Z);const je=(0,ja.dn)(ve,S());if(!(0,Ts.SP)(je))return;A((0,Ga.kb)(ce,(0,pr.qh)(je.options)))}catch(he){console.error(he)}},VE=(0,ie.debounce)(wE,500);function $E(A){const{options:S,selectedValues:Z,queryValue:ce,multi:he}=A;if(S.length===0&&ce&&ce.length>0)return{text:ce,value:ce,selected:!1};if(!he)return Z.find(Ce=>Ce.selected);const ve=[],xe=[];for(const Ce of Z)Ce.selected&&(ve.push(Ce.text.toString()),xe.push(Ce.value.toString()));return{value:xe,text:ve,selected:!0}}const oc=()=>{const A=ve=>({...(0,Rd.bindActionCreators)({openOptions:KE,commitChangesToVariable:jc,navigateOptions:NE},ve),filterOrSearchOptions:(xe,Ce="")=>{ve(WE(xe,Ce))},toggleAllOptions:xe=>ve((0,Ga.kb)(xe.rootStateKey,(0,pr.an)())),toggleOption:(xe,Ce,je,_e)=>ve((0,Ga.kb)(xe.rootStateKey,(0,pr.U9)({option:Ce,clearOthers:je,forceSelect:_e})))}),S=(ve,xe)=>{const{rootStateKey:Ce}=xe.variable;return Ce?{picker:(0,ja.nx)(Ce,ve).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:pr.$z})},Z=(0,pn.connect)(S,A);class ce extends u.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,Yn.jX)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(xe,Ce)=>{((0,Ts.iv)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(xe,Ce)},this.onToggleSingleValueVariable=(xe,Ce)=>{this.props.toggleOption((0,Yn.jX)(this.props.variable),xe,Ce,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(xe,Ce)=>{this.props.toggleOption((0,Yn.jX)(this.props.variable),xe,Ce,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,Yn.jX)(this.props.variable))},this.onFilterOrSearchOptions=xe=>{this.props.filterOrSearchOptions((0,Yn.jX)(this.props.variable),xe)},this.onNavigate=(xe,Ce)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,xe,Ce)},this.onCancel=()=>{Id().cancelRequest((0,Yn.jX)(this.props.variable))}}render(){const{variable:xe,picker:Ce}=this.props,je=Ce.id===xe.id,_e=zE();return(0,L.jsx)("div",{className:_e.variableLinkWrapper,"data-testid":Za.Tp.components.Variables.variableLinkWrapper,children:je?this.renderOptions(Ce):this.renderLink(xe)})}renderLink(xe){const Ce=TE(xe),je=xe.state===ha.Gu.Loading;return(0,L.jsx)(RE,{id:Ls.qz+xe.id,text:Ce,onClick:this.onShowOptions,loading:je,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(xe){const{id:Ce}=this.props.variable;return(0,L.jsxs)(Zx.N,{onClick:this.onHideOptions,children:[(0,L.jsx)(rf,{id:Ls.qz+Ce,value:xe.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Ce}`}),(0,L.jsx)(BE,{values:xe.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:xe.highlightIndex,multi:xe.multi,selectedValues:xe.selectedValues,id:`options-${Ce}`})]})}}const he=Z(ce);return he.displayName="OptionsPicker",he},zE=()=>({variableLinkWrapper:(0,Je.css)({display:"inline-block",position:"relative"})});var GE=e(23675);const uf=(0,u.memo)(({variable:A,onPropChange:S})=>{const Z=ce=>{S({propName:"query",propValue:ce.currentTarget.value,updateOptions:!0})};return(0,L.jsx)(GE.d,{constantValue:A.query,onChange:Z})});uf.displayName="ConstantVariableEditor";const HE={...zi.Vg,type:"constant",hide:Jo.zL.hideVariable,query:"",current:{},options:[]},hf=(0,Qr.Z0)({name:"templating/constant",initialState:sc.j,reducers:{createConstantOptionsFromQuery:(A,S)=>{const Z=(0,ja.Fs)(A,S.payload.id);Z.type==="constant"&&(Z.options=[{text:Z.query.trim(),value:Z.query.trim(),selected:!1}])}}}),QE=hf.reducer,{createConstantOptionsFromQuery:_E}=hf.actions,kE=A=>async S=>{const{rootStateKey:Z}=A;await S((0,Ga.kb)(Z,_E((0,Yn.qD)(A)))),await S((0,hs.kl)(A))},YE=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:HE,reducer:QE,picker:oc(),editor:uf,dependsOn:()=>!1,setValue:async(A,S,Z=!1)=>{await(0,qa.JD)((0,hs.t9)((0,Yn.jX)(A),S,Z))},setValueFromUrl:async(A,S)=>{await(0,qa.JD)((0,hs.x7)((0,Yn.jX)(A),S))},updateOptions:async A=>{await(0,qa.JD)(kE((0,Yn.jX)(A)))},getSaveModel:A=>{const{index:S,id:Z,state:ce,global:he,current:ve,options:xe,rootStateKey:Ce,...je}=(0,ie.cloneDeep)(A);return je},getValueForUrl:A=>A.current.value,beforeAdding:A=>{const{current:S,options:Z,query:ce,...he}=(0,ie.cloneDeep)(A),ve={selected:!0,text:ce,value:ce};return{...he,current:ve,options:[ve],query:ce}}});function JE(A,...S){const Z=(0,pn.connect)(...S)(A);return ce=>(0,L.jsx)(Z,{...ce,store:qa.M_})}function DD(A,...S){const Z=connect(...S)(A);return ce=>jsx(Provider,{store,children:jsx(Z,{...ce,store})})}var XE=e(70430);class ZE extends u.PureComponent{constructor(){super(...arguments),this.onSelectionOptionsChange=async({propName:S,propValue:Z})=>{this.props.onPropChange({propName:S,propValue:Z,updateOptions:!0})},this.onQueryChange=S=>{this.props.onPropChange({propName:"query",propValue:S.currentTarget.value,updateOptions:!0})}}render(){return(0,L.jsx)(XE.w,{query:this.props.variable.query,multi:this.props.variable.multi,allValue:this.props.variable.allValue,includeAll:this.props.variable.includeAll,onQueryChange:this.onQueryChange,onMultiChange:S=>this.onSelectionOptionsChange({propName:"multi",propValue:S.currentTarget.checked}),onIncludeAllChange:S=>this.onSelectionOptionsChange({propName:"includeAll",propValue:S.currentTarget.checked}),onAllValueChange:S=>this.onSelectionOptionsChange({propName:"allValue",propValue:S.currentTarget.value})})}}const qE=(A,S)=>({}),eP={changeVariableMultiValue:hs.TI},tP=JE(ZE,qE,eP),nP={...zi.Vg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},ff=(0,Qr.Z0)({name:"templating/custom",initialState:sc.j,reducers:{createCustomOptionsFromQuery:(A,S)=>{const Z=(0,ja.Fs)(A,S.payload.id);if(Z.type!=="custom")return;const{includeAll:ce}=Z,xe=(S.payload.data.match(/(?:\\,|[^,])+/g)??[]).map(Ce=>{Ce=Ce.replace(/\\,/g,",");const je=/^(.+)\s:\s(.+)$/g.exec(Ce)??[];if(je.length===3){const[,_e,Xe]=je;return{text:_e.trim(),value:Xe.trim(),selected:!1}}else return{text:Ce.trim(),value:Ce.trim(),selected:!1}});ce&&xe.unshift({text:Ls.Zm,value:Ls.To,selected:!1}),Z.options=xe}}}),aP=ff.reducer,{createCustomOptionsFromQuery:sP}=ff.actions,rP=A=>async(S,Z)=>{const{rootStateKey:ce}=A,he=(0,ja.dn)(A,Z());if(he.type!=="custom")return;const ve=(0,Zn.w)().replace(he.query);await S((0,Ga.kb)(ce,sP((0,Yn.qD)(A,ve)))),await S((0,hs.kl)(A))},oP=()=>({id:"custom",description:(0,f.t)("variables.create-custom-variable-adapter.description.define-variable-values-manually","Define variable values manually"),name:"Custom",initialState:nP,reducer:aP,picker:oc(),editor:tP,dependsOn:(A,S)=>(0,Yn.wJ)(A.query,S.name),setValue:async(A,S,Z=!1)=>{await(0,qa.JD)((0,hs.t9)((0,Yn.jX)(A),S,Z))},setValueFromUrl:async(A,S)=>{await(0,qa.JD)((0,hs.x7)((0,Yn.jX)(A),S))},updateOptions:async A=>{await(0,qa.JD)(rP((0,Yn.jX)(A)))},getSaveModel:A=>{const{index:S,id:Z,state:ce,global:he,rootStateKey:ve,...xe}=(0,ie.cloneDeep)(A);return xe},getValueForUrl:A=>(0,Yn.ML)(A)?Ls.Zm:A.current.value});var iP=e(42272),lP=e(8134);const cP={...zi.Vg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:Jo.CO.onDashboardLoad},pf=(0,Qr.Z0)({name:"templating/datasource",initialState:sc.j,reducers:{createDataSourceOptions:(A,S)=>{const{sources:Z,regex:ce}=S.payload.data,he=[],ve=(0,ja.Fs)(A,S.payload.id);if(ve.type==="datasource"){for(let xe=0;xe<Z.length;xe++){const Ce=Z[xe];(0,lP._)(ve.query,Ce.meta)&&(dP(Ce,ce)&&he.push({text:Ce.name,value:Ce.uid,selected:!1}),uP(Ce,ce)&&he.push({text:(0,f.t)("variables.data-source-variable-slice.text.default","default"),value:"default",selected:!1}))}he.length===0&&he.push({text:(0,f.t)("variables.data-source-variable-slice.text.no-data-sources-found","No data sources found"),value:"",selected:!1}),ve.includeAll&&he.unshift({text:Ls.Zm,value:Ls.To,selected:!1}),ve.options=he}}}});function dP(A,S){return S?S.exec(A.name):!0}function uP(A,S){return A.isDefault?S?S.exec("default"):!0:!1}const hP=pf.reducer,{createDataSourceOptions:fP}=pf.actions,pP=(A,S={getDatasourceSrv:$i.tR})=>async(Z,ce)=>{const{rootStateKey:he}=A,ve=S.getDatasourceSrv().getList({metrics:!0,variables:!1}),xe=(0,ja.dn)(A,ce());if(xe.type!=="datasource")return;let Ce;xe.regex&&(Ce=(0,Zn.w)().replace(xe.regex,void 0,"regex"),Ce=(0,bt.dO)(Ce)),Z((0,Ga.kb)(he,fP((0,Yn.qD)(A,{sources:ve,regex:Ce})))),await Z((0,hs.kl)(A))},mP=(A,S={getDatasourceSrv:$i.tR})=>Z=>{const ce=S.getDatasourceSrv().getList({metrics:!0,variables:!0}),he=(0,ie.chain)(ce).uniqBy("meta.id").map(ve=>({text:ve.meta.name,value:ve.meta.id})).value();he.unshift({text:"",value:""}),Z((0,Ga.kb)(A,(0,Hr.BC)({dataSourceTypes:he})))},gP=(A,S)=>{const{variable:{rootStateKey:Z}}=S;if(!Z)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:Hh(Hr.nS)};const{editor:ce}=(0,ja.nx)(Z,A);return{extended:Hh(ce)}},vP={initDataSourceVariableEditor:mP,changeVariableMultiValue:hs.TI},yP=(0,pn.connect)(gP,vP);class xP extends u.PureComponent{constructor(){super(...arguments),this.onRegExBlur=S=>{this.props.onPropChange({propName:"regex",propValue:S.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:S,propName:Z})=>{this.props.onPropChange({propName:Z,propValue:S,updateOptions:!0})},this.onMultiChanged=S=>{this.props.changeVariableMultiValue((0,Yn.jX)(this.props.variable),S.currentTarget.checked)},this.onIncludeAllChanged=S=>{this.onSelectionOptionsChange({propName:"includeAll",propValue:S.currentTarget.checked})},this.onAllValueChanged=S=>{this.onSelectionOptionsChange({propName:"allValue",propValue:S.currentTarget.value})},this.getSelectedDataSourceTypeValue=()=>{const{extended:S}=this.props;if(!S?.dataSourceTypes.length)return"";const Z=S.dataSourceTypes.find(he=>he.value===this.props.variable.query);return(Z?Z.value:S.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=S=>{this.props.onPropChange({propName:"query",propValue:S.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:S}=this.props.variable;if(!S){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(S)}render(){const{variable:S,extended:Z}=this.props,ce=Z?.dataSourceTypes?.length?Z.dataSourceTypes?.map(he=>({value:he.value??"",label:he.text})):[];return(0,L.jsx)(iP.y,{query:S.query,regex:S.regex,multi:S.multi,includeAll:S.includeAll,optionTypes:ce,onChange:this.onDataSourceTypeChanged,onRegExBlur:this.onRegExBlur,onMultiChange:this.onMultiChanged,onIncludeAllChange:this.onIncludeAllChanged,onAllValueChange:this.onAllValueChanged})}}const EP=yP(xP),PP=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:cP,reducer:hP,picker:oc(),editor:EP,dependsOn:(A,S)=>A.regex?(0,Yn.wJ)(A.regex,S.name):!1,setValue:async(A,S,Z=!1)=>{await(0,qa.JD)((0,hs.t9)((0,Yn.jX)(A),S,Z))},setValueFromUrl:async(A,S)=>{await(0,qa.JD)((0,hs.x7)((0,Yn.jX)(A),S))},updateOptions:async A=>{await(0,qa.JD)(pP((0,Yn.jX)(A)))},getSaveModel:A=>{const{index:S,id:Z,state:ce,global:he,rootStateKey:ve,...xe}=(0,ie.cloneDeep)(A);return{...xe,options:[]}},getValueForUrl:A=>(0,Yn.ML)(A)?Ls.Zm:A.current.value});var bP=e(66223),DP=e(1096);const mf=(0,u.memo)(({onPropChange:A,variable:S})=>{const Z=xe=>{A({propName:"auto",propValue:xe.target.checked,updateOptions:!0})},ce=xe=>{A({propName:"query",propValue:xe.currentTarget.value,updateOptions:!0})},he=xe=>{A({propName:"auto_count",propValue:xe.value,updateOptions:!0})},ve=xe=>{A({propName:"auto_min",propValue:xe.currentTarget.value,updateOptions:!0})};return(0,L.jsx)(DP.s,{intervals:S.query,autoStepCount:S.auto_count,autoEnabled:S.auto,onAutoCountChanged:he,onIntervalsChange:ce,onAutoEnabledChange:Z,onAutoMinIntervalChanged:ve,autoMinInterval:S.auto_min})});mf.displayName="IntervalVariableEditor";var CP=e(59373),jd=e(98732);const TP=A=>async S=>{const{rootStateKey:Z}=A;await S((0,Ga.kb)(Z,(0,jd.mn)((0,Yn.qD)(A)))),await S(Bd(A)),await S((0,hs.kl)(A))},Bd=(A,S={calculateInterval:Vh.calculateInterval,getTimeSrv:Yo.jG,templateSrv:(0,CP.w)()})=>(Z,ce)=>{const he=(0,ja.dn)(A,ce());if(he.type==="interval"&&he.auto){const ve=S.calculateInterval(S.getTimeSrv().timeRange(),he.auto_count,he.auto_min);S.templateSrv.setGrafanaVariable("$__auto_interval_"+he.name,ve.interval),S.templateSrv.setGrafanaVariable("$__auto_interval",ve.interval)}},SP=()=>({id:"interval",description:(0,f.t)("variables.create-interval-variable-adapter.description.define-timespan-interval","Define a timespan interval (for example: {{timeIntervals}})",{timeIntervals:"1m, 1h, 1d"}),name:"Interval",initialState:jd.Ez,reducer:jd.E5,picker:oc(),editor:mf,dependsOn:()=>!1,setValue:async(A,S,Z=!1)=>{await(0,qa.JD)(Bd((0,Yn.jX)(A))),await(0,qa.JD)((0,hs.t9)((0,Yn.jX)(A),S,Z))},setValueFromUrl:async(A,S)=>{await(0,qa.JD)(Bd((0,Yn.jX)(A))),await(0,qa.JD)((0,hs.x7)((0,Yn.jX)(A),S))},updateOptions:async A=>{await(0,qa.JD)(TP((0,Yn.jX)(A)))},getSaveModel:A=>{const{index:S,id:Z,state:ce,global:he,rootStateKey:ve,...xe}=(0,ie.cloneDeep)(A);return xe},getValueForUrl:A=>A.current.value});var MP=e(28799),OP=e(64423),RP=e(38681);function IP(A,S,Z){return{next:he=>{if(he.state===ha.Gu.Error){Z.unsubscribe(),S(he.error);return}if(he.state===ha.Gu.Done){Z.unsubscribe(),A();return}},error:he=>{Z.unsubscribe(),S(he)},complete:()=>{Z.unsubscribe(),A()}}}const AP=(A,S)=>async(Z,ce)=>{try{const{rootStateKey:he}=A;if(!(0,Yn.sN)(he,ce()))return;const ve=(0,ja.dn)(A,ce());if(ve.type!=="query")return;(0,ja.nx)(he,ce()).editor.id===ve.id&&Z((0,Ga.kb)(he,(0,Hr.Eo)({errorProp:"update"})));const xe=await(0,R.l)().get(ve.datasource??"");await new Promise((Ce,je)=>{const _e=new OP.yU,Xe=IP(Ce,je,_e),et=Id().getResponse(A).subscribe(Xe);_e.add(et),Id().queueRequest({identifier:A,datasource:xe,searchFilter:S})})}catch(he){if(he instanceof Error){const ve=(0,xd.u)(he),{rootStateKey:xe}=A;throw(0,ja.nx)(xe,ce()).editor.id===A.id&&Z((0,Ga.kb)(xe,(0,Hr.NY)({errorProp:"update",errorText:ve.message??""}))),ve}}},LP=A=>async(S,Z)=>{const ce=(0,ja.dn)(A,Z());ce.type==="query"&&await S(gf((0,Yn.jX)(ce),ce.datasource))},gf=(A,S)=>async(Z,ce)=>{try{const{rootStateKey:he}=A,{editor:ve}=(0,ja.nx)(he,ce()),Ce=Md(ve)?.dataSource,je=await(0,R.l)().get(S??"");Ce&&Ce.type!==je?.type&&Z((0,Ga.kb)(he,(0,To.QP)((0,Yn.qD)(A,{propName:"query",propValue:""}))));const _e=await(0,RP.y)(je);Z((0,Ga.kb)(he,(0,Hr.BC)({dataSource:je,VariableQueryEditor:_e})))}catch(he){console.error(he)}},jP=(A,S,Z)=>async(ce,he)=>{const{rootStateKey:ve}=A,xe=(0,ja.dn)(A,he());if(xe.type==="query"){if(BP(xe.name,S)){const Ce="Query cannot contain a reference to itself. Variable: $"+xe.name;ce((0,Ga.kb)(ve,(0,Hr.NY)({errorProp:"query",errorText:Ce})));return}ce((0,Ga.kb)(ve,(0,Hr.Eo)({errorProp:"query"}))),ce((0,Ga.kb)(ve,(0,To.QP)((0,Yn.qD)(A,{propName:"query",propValue:S})))),Z!==void 0?ce((0,Ga.kb)(ve,(0,To.QP)((0,Yn.qD)(A,{propName:"definition",propValue:Z})))):typeof S=="string"&&ce((0,Ga.kb)(ve,(0,To.QP)((0,Yn.qD)(A,{propName:"definition",propValue:S})))),await ce((0,hs.mZ)(A))}};function BP(A,S){if(typeof S=="string"&&S.match(new RegExp("\\$"+A+"(/| |$)")))return!0;const Z=vf(S);for(let ce in Z)if(Z.hasOwnProperty(ce)){const he=Z[ce];if(typeof he=="string"&&he.match(new RegExp("\\$"+A+"(/| |$)")))return!0}return!1}function vf(A){return typeof A!="object"||A===null?{query:A}:Object.keys(A).reduce((ce,he)=>{const ve=A[he];if(typeof ve!="object"||ve===null)return ce[he]=ve,ce;const xe=vf(ve);for(let Ce in xe)xe.hasOwnProperty(Ce)&&(ce[`${he}_${Ce}`]=xe[Ce]);return ce},{})}const UP=(A,S)=>{const{rootStateKey:Z}=S.variable;if(!Z)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:Md(Hr.nS)};const{editor:ce}=(0,ja.nx)(Z,A);return{extended:Md(ce)}},NP={initQueryVariableEditor:LP,changeQueryVariableDataSource:gf,changeQueryVariableQuery:jP,changeVariableMultiValue:hs.TI},WP=(0,pn.connect)(UP,NP);class FP extends u.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=S=>{this.props.onPropChange({propName:"datasource",propValue:S.isDefault?null:(0,zh.p$)(S)})},this.onLegacyQueryChange=async(S,Z)=>{this.props.variable.query!==S&&this.props.changeQueryVariableQuery((0,Yn.jX)(this.props.variable),S,Z)},this.onQueryChange=async S=>{if(this.props.variable.query!==S){let Z="";S&&S.hasOwnProperty("query")&&typeof S.query=="string"&&(Z=S.query),this.props.changeQueryVariableQuery((0,Yn.jX)(this.props.variable),S,Z)}},this.onRegExBlur=async S=>{const Z=S.currentTarget.value;this.props.variable.regex!==Z&&this.props.onPropChange({propName:"regex",propValue:Z,updateOptions:!0})},this.onRefreshChange=S=>{this.props.onPropChange({propName:"refresh",propValue:S})},this.onSortChange=async S=>{this.props.onPropChange({propName:"sort",propValue:S.value,updateOptions:!0})},this.onMultiChange=S=>{this.props.onPropChange({propName:"multi",propValue:S.currentTarget.checked})},this.onIncludeAllChange=S=>{this.props.onPropChange({propName:"includeAll",propValue:S.currentTarget.checked})},this.onAllValueChange=S=>{this.props.onPropChange({propName:"allValue",propValue:S.currentTarget.value})}}async componentDidMount(){await this.props.initQueryVariableEditor((0,Yn.jX)(this.props.variable))}componentDidUpdate(S){S.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,Yn.jX)(this.props.variable),this.props.variable.datasource)}render(){const{extended:S,variable:Z}=this.props;if(!S||!S.dataSource)return null;const ce=(0,Yo.jG)().timeRange();return(0,L.jsx)(MP.u,{datasource:Z.datasource??void 0,onDataSourceChange:this.onDataSourceChange,query:Z.query,onQueryChange:this.onQueryChange,onLegacyQueryChange:this.onLegacyQueryChange,timeRange:ce,regex:Z.regex,onRegExChange:this.onRegExBlur,sort:Z.sort,onSortChange:this.onSortChange,refresh:Z.refresh,onRefreshChange:this.onRefreshChange,isMulti:Z.multi,includeAll:Z.includeAll,allValue:Z.allValue??"",onMultiChange:this.onMultiChange,onIncludeAllChange:this.onIncludeAllChange,onAllValueChange:this.onAllValueChange})}}const KP=WP(FP),wP=()=>({id:"query",description:(0,f.t)("variables.create-query-variable-adapter.description.variable-values-fetched-datasource-query","Variable values are fetched from a datasource query"),name:"Query",initialState:rE,reducer:cE,picker:oc(),editor:KP,dependsOn:(A,S)=>(0,Yn.wJ)(A.query,A.datasource?.uid,A.regex,S.name),setValue:async(A,S,Z=!1)=>{await(0,qa.JD)((0,hs.t9)((0,Yn.jX)(A),S,Z))},setValueFromUrl:async(A,S)=>{await(0,qa.JD)((0,hs.x7)((0,Yn.jX)(A),S))},updateOptions:async(A,S)=>{await(0,qa.JD)(AP((0,Yn.jX)(A),S))},getSaveModel:A=>{const{index:S,id:Z,state:ce,global:he,queryValue:ve,rootStateKey:xe,...Ce}=(0,ie.cloneDeep)(A);return A.refresh!==Jo.CO.never?{...Ce,options:[]}:Ce},getValueForUrl:A=>(0,Yn.ML)(A)?Ls.Zm:A.current.value}),VP=()=>({id:"system",description:"",name:"system",initialState:{...zi.Vg,type:"system",hide:Jo.zL.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:ha.Gu.Done},reducer:A=>A,picker:null,editor:null,dependsOn:()=>!1,setValue:async(A,S,Z=!1)=>{},setValueFromUrl:async(A,S)=>{},updateOptions:async A=>{},getSaveModel:A=>({}),getValueForUrl:A=>""});var $P=e(32442),zP=e(49602);function GP({onPropChange:A,variable:{query:S}}){const Z=(0,u.useCallback)((ve,xe)=>{ve.preventDefault(),A({propName:"originalQuery",propValue:ve.currentTarget.value,updateOptions:!1}),A({propName:"query",propValue:ve.currentTarget.value,updateOptions:xe})},[A]),ce=(0,u.useCallback)(ve=>Z(ve,!1),[Z]),he=(0,u.useCallback)(ve=>Z(ve,!0),[Z]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)($P.Y,{children:(0,L.jsx)(f.x6,{i18nKey:"variables.text-box-variable-editor.text-options",children:"Text options"})}),(0,L.jsx)(zP._,{value:S,name:(0,f.t)("variables.text-box-variable-editor.name-default-value","Default value"),placeholder:(0,f.t)("variables.text-box-variable-editor.placeholder-default-value-if-any","default value, if any"),onChange:ce,onBlur:he,width:30,testId:Za.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2})]})}function HP({variable:A,onVariableChange:S,readOnly:Z}){const ce=(0,Ma.wA)(),[he,ve]=(0,u.useState)(A.current.value);(0,u.useEffect)(()=>{ve(A.current.value)},[A]);const xe=(0,u.useCallback)(()=>{if(!A.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(A.current.value!==he){if(ce((0,Ga.kb)(A.rootStateKey,(0,To.QP)((0,Yn.qD)({id:A.id,type:A.type},{propName:"query",propValue:he})))),S){S({...A,current:(0,df.R)(A.current)?{}:{...A.current,value:he}});return}nc.B.get(A.type).updateOptions(A)}},[A,he,ce,S]),Ce=(0,u.useCallback)(Xe=>ve(Xe.target.value),[ve]),je=Xe=>xe(),_e=Xe=>{Xe.keyCode===13&&(Xe.preventDefault(),xe())};return(0,L.jsx)(Pa.p,{type:"text",value:he,onChange:Ce,onBlur:je,disabled:Z,onKeyDown:_e,placeholder:(0,f.t)("variable.textbox.placeholder","Enter variable value"),id:Ls.qz+A.id})}const QP={...zi.Vg,type:"textbox",query:"",current:{},options:[],originalQuery:null},yf=(0,Qr.Z0)({name:"templating/textbox",initialState:sc.j,reducers:{createTextBoxOptions:(A,S)=>{const Z=(0,ja.Fs)(A,S.payload.id);if(Z.type!=="textbox")return;const ce={text:Z.query.trim(),value:Z.query.trim(),selected:!1};Z.options=[ce],Z.current=ce}}}),_P=yf.reducer,{createTextBoxOptions:kP}=yf.actions,YP=A=>async(S,Z)=>{const{rootStateKey:ce,type:he}=A;S((0,Ga.kb)(ce,kP((0,Yn.qD)(A))));const ve=(0,ja.dn)(A,Z());ve.type==="textbox"&&await nc.B.get(he).setValue(ve,ve.options[0],!0)},JP=(A,S)=>async(Z,ce)=>{const{rootStateKey:he}=A,ve=(0,ja.dn)(A,ce());if(ve.type!=="textbox")return;const xe=(0,Yn.QT)(S);Z((0,Ga.kb)(he,(0,To.QP)((0,Yn.qD)(ve,{propName:"query",propValue:xe})))),await Z((0,hs.x7)((0,Yn.jX)(ve),xe))},XP=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:QP,reducer:_P,picker:HP,editor:GP,dependsOn:(A,S)=>!1,setValue:async(A,S,Z=!1)=>{await(0,qa.JD)((0,hs.t9)((0,Yn.jX)(A),S,Z))},setValueFromUrl:async(A,S)=>{await(0,qa.JD)(JP((0,Yn.jX)(A),S))},updateOptions:async A=>{await(0,qa.JD)(YP((0,Yn.jX)(A)))},getSaveModel:(A,S)=>{const{index:Z,id:ce,state:he,global:ve,originalQuery:xe,rootStateKey:Ce,...je}=(0,ie.cloneDeep)(A);if(A.query!==xe&&!S){const _e=xe??"",Xe={selected:!1,text:_e,value:_e};return{...je,query:_e,current:Xe,options:[Xe]}}return je},getValueForUrl:A=>A.current.value,beforeAdding:A=>({...(0,ie.cloneDeep)(A),originalQuery:A.query})});var ZP=e(10378),Ud=e(76541),qP=e(97816),eb=e(9594),xf=e(64157);const Ef="v0alpha1",Pf="rules.alerting.grafana.app",tb=(0,xf.TP)(Pf,Ef),nb=(0,xf.gN)(Pf,Ef),ab=(0,qP.xP)({reducerPath:nb,baseQuery:(0,eb.cw)({baseUrl:new URL(tb,globalThis.location.origin).href}),endpoints:()=>({})}),sb=["API Discovery","AlertRule","RecordingRule"],Nd=ab.enhanceEndpoints({addTagTypes:sb}).injectEndpoints({endpoints:A=>({getApiResources:A.query({query:()=>({url:"/apis/rules.alerting.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),listAlertRule:A.query({query:S=>({url:"/alertrules",params:{pretty:S.pretty,allowWatchBookmarks:S.allowWatchBookmarks,continue:S.continue,fieldSelector:S.fieldSelector,labelSelector:S.labelSelector,limit:S.limit,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds,watch:S.watch}}),providesTags:["AlertRule"]}),createAlertRule:A.mutation({query:S=>({url:"/alertrules",method:"POST",body:S.alertRule,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["AlertRule"]}),deletecollectionAlertRule:A.mutation({query:S=>({url:"/alertrules",method:"DELETE",params:{pretty:S.pretty,continue:S.continue,dryRun:S.dryRun,fieldSelector:S.fieldSelector,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:S.labelSelector,limit:S.limit,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds}}),invalidatesTags:["AlertRule"]}),getAlertRule:A.query({query:S=>({url:`/alertrules/${S.name}`,params:{pretty:S.pretty}}),providesTags:["AlertRule"]}),replaceAlertRule:A.mutation({query:S=>({url:`/alertrules/${S.name}`,method:"PUT",body:S.alertRule,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["AlertRule"]}),deleteAlertRule:A.mutation({query:S=>({url:`/alertrules/${S.name}`,method:"DELETE",params:{pretty:S.pretty,dryRun:S.dryRun,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy}}),invalidatesTags:["AlertRule"]}),updateAlertRule:A.mutation({query:S=>({url:`/alertrules/${S.name}`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["AlertRule"]}),getAlertRuleStatus:A.query({query:S=>({url:`/alertrules/${S.name}/status`,params:{pretty:S.pretty}}),providesTags:["AlertRule"]}),replaceAlertRuleStatus:A.mutation({query:S=>({url:`/alertrules/${S.name}/status`,method:"PUT",body:S.alertRule,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["AlertRule"]}),updateAlertRuleStatus:A.mutation({query:S=>({url:`/alertrules/${S.name}/status`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["AlertRule"]}),listRecordingRule:A.query({query:S=>({url:"/recordingrules",params:{pretty:S.pretty,allowWatchBookmarks:S.allowWatchBookmarks,continue:S.continue,fieldSelector:S.fieldSelector,labelSelector:S.labelSelector,limit:S.limit,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds,watch:S.watch}}),providesTags:["RecordingRule"]}),createRecordingRule:A.mutation({query:S=>({url:"/recordingrules",method:"POST",body:S.recordingRule,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["RecordingRule"]}),deletecollectionRecordingRule:A.mutation({query:S=>({url:"/recordingrules",method:"DELETE",params:{pretty:S.pretty,continue:S.continue,dryRun:S.dryRun,fieldSelector:S.fieldSelector,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:S.labelSelector,limit:S.limit,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds}}),invalidatesTags:["RecordingRule"]}),getRecordingRule:A.query({query:S=>({url:`/recordingrules/${S.name}`,params:{pretty:S.pretty}}),providesTags:["RecordingRule"]}),replaceRecordingRule:A.mutation({query:S=>({url:`/recordingrules/${S.name}`,method:"PUT",body:S.recordingRule,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["RecordingRule"]}),deleteRecordingRule:A.mutation({query:S=>({url:`/recordingrules/${S.name}`,method:"DELETE",params:{pretty:S.pretty,dryRun:S.dryRun,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy}}),invalidatesTags:["RecordingRule"]}),updateRecordingRule:A.mutation({query:S=>({url:`/recordingrules/${S.name}`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["RecordingRule"]}),getRecordingRuleStatus:A.query({query:S=>({url:`/recordingrules/${S.name}/status`,params:{pretty:S.pretty}}),providesTags:["RecordingRule"]}),replaceRecordingRuleStatus:A.mutation({query:S=>({url:`/recordingrules/${S.name}/status`,method:"PUT",body:S.recordingRule,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["RecordingRule"]}),updateRecordingRuleStatus:A.mutation({query:S=>({url:`/recordingrules/${S.name}/status`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["RecordingRule"]})}),overrideExisting:!1});var Wd=e(75816),Fd=e(73659);const rb=(0,Xc.TP)("advisor.grafana.app","v0alpha1"),ob=(0,Wd.xP)({reducerPath:"advisorAPIv0alpha1",baseQuery:(0,Fd.W)({baseURL:rb}),endpoints:()=>({})}),ib=["API Discovery","Check","CheckType"],bf=ob.enhanceEndpoints({addTagTypes:ib}).injectEndpoints({endpoints:A=>({getApiResources:A.query({query:()=>({url:"/apis/advisor.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),listCheck:A.query({query:S=>({url:"/checks",params:{pretty:S.pretty,allowWatchBookmarks:S.allowWatchBookmarks,continue:S.continue,fieldSelector:S.fieldSelector,labelSelector:S.labelSelector,limit:S.limit,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds,watch:S.watch}}),providesTags:["Check"]}),createCheck:A.mutation({query:S=>({url:"/checks",method:"POST",body:S.check,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["Check"]}),deletecollectionCheck:A.mutation({query:S=>({url:"/checks",method:"DELETE",params:{pretty:S.pretty,continue:S.continue,dryRun:S.dryRun,fieldSelector:S.fieldSelector,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:S.labelSelector,limit:S.limit,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds}}),invalidatesTags:["Check"]}),getCheck:A.query({query:S=>({url:`/checks/${S.name}`,params:{pretty:S.pretty}}),providesTags:["Check"]}),replaceCheck:A.mutation({query:S=>({url:`/checks/${S.name}`,method:"PUT",body:S.check,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["Check"]}),deleteCheck:A.mutation({query:S=>({url:`/checks/${S.name}`,method:"DELETE",params:{pretty:S.pretty,dryRun:S.dryRun,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy}}),invalidatesTags:["Check"]}),updateCheck:A.mutation({query:S=>({url:`/checks/${S.name}`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["Check"]}),getCheckStatus:A.query({query:S=>({url:`/checks/${S.name}/status`,params:{pretty:S.pretty}}),providesTags:["Check"]}),replaceCheckStatus:A.mutation({query:S=>({url:`/checks/${S.name}/status`,method:"PUT",body:S.check,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["Check"]}),updateCheckStatus:A.mutation({query:S=>({url:`/checks/${S.name}/status`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["Check"]}),listCheckType:A.query({query:S=>({url:"/checktypes",params:{pretty:S.pretty,allowWatchBookmarks:S.allowWatchBookmarks,continue:S.continue,fieldSelector:S.fieldSelector,labelSelector:S.labelSelector,limit:S.limit,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds,watch:S.watch}}),providesTags:["CheckType"]}),createCheckType:A.mutation({query:S=>({url:"/checktypes",method:"POST",body:S.checkType,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["CheckType"]}),deletecollectionCheckType:A.mutation({query:S=>({url:"/checktypes",method:"DELETE",params:{pretty:S.pretty,continue:S.continue,dryRun:S.dryRun,fieldSelector:S.fieldSelector,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:S.labelSelector,limit:S.limit,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds}}),invalidatesTags:["CheckType"]}),getCheckType:A.query({query:S=>({url:`/checktypes/${S.name}`,params:{pretty:S.pretty}}),providesTags:["CheckType"]}),replaceCheckType:A.mutation({query:S=>({url:`/checktypes/${S.name}`,method:"PUT",body:S.checkType,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["CheckType"]}),deleteCheckType:A.mutation({query:S=>({url:`/checktypes/${S.name}`,method:"DELETE",params:{pretty:S.pretty,dryRun:S.dryRun,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy}}),invalidatesTags:["CheckType"]}),updateCheckType:A.mutation({query:S=>({url:`/checktypes/${S.name}`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["CheckType"]}),getCheckTypeStatus:A.query({query:S=>({url:`/checktypes/${S.name}/status`,params:{pretty:S.pretty}}),providesTags:["CheckType"]}),replaceCheckTypeStatus:A.mutation({query:S=>({url:`/checktypes/${S.name}/status`,method:"PUT",body:S.checkType,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["CheckType"]}),updateCheckTypeStatus:A.mutation({query:S=>({url:`/checktypes/${S.name}/status`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["CheckType"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:SD,useLazyGetApiResourcesQuery:MD,useListCheckQuery:OD,useLazyListCheckQuery:RD,useCreateCheckMutation:ID,useDeletecollectionCheckMutation:AD,useGetCheckQuery:LD,useLazyGetCheckQuery:jD,useReplaceCheckMutation:BD,useDeleteCheckMutation:UD,useUpdateCheckMutation:ND,useGetCheckStatusQuery:WD,useLazyGetCheckStatusQuery:FD,useReplaceCheckStatusMutation:KD,useUpdateCheckStatusMutation:wD,useListCheckTypeQuery:VD,useLazyListCheckTypeQuery:$D,useCreateCheckTypeMutation:zD,useDeletecollectionCheckTypeMutation:GD,useGetCheckTypeQuery:HD,useLazyGetCheckTypeQuery:QD,useReplaceCheckTypeMutation:_D,useDeleteCheckTypeMutation:kD,useUpdateCheckTypeMutation:YD,useGetCheckTypeStatusQuery:JD,useLazyGetCheckTypeStatusQuery:XD,useReplaceCheckTypeStatusMutation:ZD,useUpdateCheckTypeStatusMutation:qD}=bf,Kd=bf.enhanceEndpoints({}),lb=(0,Xc.TP)("correlations.grafana.app","v0alpha1"),cb=(0,Wd.xP)({reducerPath:"correlationsAPIv0alpha1",baseQuery:(0,Fd.W)({baseURL:lb}),endpoints:()=>({})}),db=["API Discovery","Correlation"],Df=cb.enhanceEndpoints({addTagTypes:db}).injectEndpoints({endpoints:A=>({getApiResources:A.query({query:()=>({url:"/apis/correlations.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),listCorrelation:A.query({query:S=>({url:"/correlations",params:{pretty:S.pretty,allowWatchBookmarks:S.allowWatchBookmarks,continue:S.continue,fieldSelector:S.fieldSelector,labelSelector:S.labelSelector,limit:S.limit,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds,watch:S.watch}}),providesTags:["Correlation"]}),createCorrelation:A.mutation({query:S=>({url:"/correlations",method:"POST",body:S.correlation,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["Correlation"]}),deletecollectionCorrelation:A.mutation({query:S=>({url:"/correlations",method:"DELETE",params:{pretty:S.pretty,continue:S.continue,dryRun:S.dryRun,fieldSelector:S.fieldSelector,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:S.labelSelector,limit:S.limit,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy,resourceVersion:S.resourceVersion,resourceVersionMatch:S.resourceVersionMatch,sendInitialEvents:S.sendInitialEvents,timeoutSeconds:S.timeoutSeconds}}),invalidatesTags:["Correlation"]}),getCorrelation:A.query({query:S=>({url:`/correlations/${S.name}`,params:{pretty:S.pretty}}),providesTags:["Correlation"]}),replaceCorrelation:A.mutation({query:S=>({url:`/correlations/${S.name}`,method:"PUT",body:S.correlation,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation}}),invalidatesTags:["Correlation"]}),deleteCorrelation:A.mutation({query:S=>({url:`/correlations/${S.name}`,method:"DELETE",params:{pretty:S.pretty,dryRun:S.dryRun,gracePeriodSeconds:S.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:S.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:S.orphanDependents,propagationPolicy:S.propagationPolicy}}),invalidatesTags:["Correlation"]}),updateCorrelation:A.mutation({query:S=>({url:`/correlations/${S.name}`,method:"PATCH",body:S.patch,params:{pretty:S.pretty,dryRun:S.dryRun,fieldManager:S.fieldManager,fieldValidation:S.fieldValidation,force:S.force}}),invalidatesTags:["Correlation"]})}),overrideExisting:!1}),{useGetApiResourcesQuery:nC,useLazyGetApiResourcesQuery:aC,useListCorrelationQuery:sC,useLazyListCorrelationQuery:rC,useCreateCorrelationMutation:oC,useDeletecollectionCorrelationMutation:iC,useGetCorrelationQuery:lC,useLazyGetCorrelationQuery:cC,useReplaceCorrelationMutation:dC,useDeleteCorrelationMutation:uC,useUpdateCorrelationMutation:hC}=Df,wd=Df.enhanceEndpoints({endpoints:{createCorrelation:A=>{const S=A.query;S&&(A.query=Z=>{Z.correlation.metadata||(Z.correlation.metadata={});const ce=Z.correlation.metadata;return!ce.name&&!ce.generateName&&(ce.generateName="c"),S(Z)})}}});var Vd=e(60793),$d=e(19705),zd=e(65488),Gd=e(64464),Hd=e(11418);const Qd=zu.qR.enhanceEndpoints({addTagTypes:["UserPreferences"],endpoints:{getUserPreferences:{providesTags:["UserPreferences"]},updateUserPreferences:{invalidatesTags:["UserPreferences"]},patchUserPreferences:{invalidatesTags:["UserPreferences"]}}});var _d=e(28845),kd=e(71313),Yd=e(61638),Jd=e(85594);const ub=[Kd.middleware,Vd.qR.middleware,$d.qR.middleware,zd.qR.middleware,Gd.qR.middleware,Hd.qR.middleware,_d.qR.middleware,Qd.middleware,kd.qR.middleware,Yd.qR.middleware,wd.middleware,Jd.qR.middleware],hb={[Kd.reducerPath]:Kd.reducer,[Vd.qR.reducerPath]:Vd.qR.reducer,[$d.qR.reducerPath]:$d.qR.reducer,[zd.qR.reducerPath]:zd.qR.reducer,[Gd.qR.reducerPath]:Gd.qR.reducer,[Hd.qR.reducerPath]:Hd.qR.reducer,[_d.qR.reducerPath]:_d.qR.reducer,[Qd.reducerPath]:Qd.reducer,[kd.qR.reducerPath]:kd.qR.reducer,[Yd.qR.reducerPath]:Yd.qR.reducer,[wd.reducerPath]:wd.reducer,[Jd.qR.reducerPath]:Jd.qR.reducer},fb=(0,Wd.xP)({reducerPath:"legacyAPI",baseQuery:(0,Fd.W)({baseURL:"/api"}),endpoints:()=>({})}),pb=["enterprise","access_control","ldap_debug","admin_ldap","access_control_provisioning","admin_provisioning","admin","admin_users","quota","annotations","devices","migrations","convert_prometheus","dashboards","snapshots","dashboard_public","permissions","versions","datasources","correlations","health","folders","group_attribute_sync","library_elements","licensing","saml","org","invites","preferences","orgs","playlists","query_history","recording_rules","reports","search","service_accounts","signing_keys","teams","sync_team_groups","signed_in_user","user","users","provisioning","sso_settings"],Bc=fb.enhanceEndpoints({addTagTypes:pb}).injectEndpoints({endpoints:A=>({searchResult:A.mutation({query:()=>({url:"/access-control/assignments/search",method:"POST"}),invalidatesTags:["enterprise"]}),listRoles:A.query({query:S=>({url:"/access-control/roles",params:{delegatable:S.delegatable,includeHidden:S.includeHidden}}),providesTags:["access_control","enterprise"]}),createRole:A.mutation({query:S=>({url:"/access-control/roles",method:"POST",body:S.createRoleForm}),invalidatesTags:["access_control","enterprise"]}),deleteRole:A.mutation({query:S=>({url:`/access-control/roles/${S.roleUid}`,method:"DELETE",params:{force:S.force,global:S.global}}),invalidatesTags:["access_control","enterprise"]}),getRole:A.query({query:S=>({url:`/access-control/roles/${S.roleUid}`}),providesTags:["access_control","enterprise"]}),updateRole:A.mutation({query:S=>({url:`/access-control/roles/${S.roleUid}`,method:"PUT",body:S.updateRoleCommand}),invalidatesTags:["access_control","enterprise"]}),getRoleAssignments:A.query({query:S=>({url:`/access-control/roles/${S.roleUid}/assignments`}),providesTags:["access_control","enterprise"]}),setRoleAssignments:A.mutation({query:S=>({url:`/access-control/roles/${S.roleUid}/assignments`,method:"PUT",body:S.setRoleAssignmentsCommand}),invalidatesTags:["access_control","enterprise"]}),getAccessControlStatus:A.query({query:()=>({url:"/access-control/status"}),providesTags:["access_control","enterprise"]}),listTeamsRoles:A.mutation({query:S=>({url:"/access-control/teams/roles/search",method:"POST",body:S.rolesSearchQuery}),invalidatesTags:["access_control","enterprise"]}),listTeamRoles:A.query({query:S=>({url:`/access-control/teams/${S.teamId}/roles`}),providesTags:["access_control","enterprise"]}),addTeamRole:A.mutation({query:S=>({url:`/access-control/teams/${S.teamId}/roles`,method:"POST",body:S.addTeamRoleCommand}),invalidatesTags:["access_control","enterprise"]}),setTeamRoles:A.mutation({query:S=>({url:`/access-control/teams/${S.teamId}/roles`,method:"PUT"}),invalidatesTags:["access_control","enterprise"]}),removeTeamRole:A.mutation({query:S=>({url:`/access-control/teams/${S.teamId}/roles/${S.roleUid}`,method:"DELETE"}),invalidatesTags:["access_control","enterprise"]}),listUsersRoles:A.mutation({query:S=>({url:"/access-control/users/roles/search",method:"POST",body:S.rolesSearchQuery}),invalidatesTags:["access_control","enterprise"]}),listUserRoles:A.query({query:S=>({url:`/access-control/users/${S.userId}/roles`}),providesTags:["access_control","enterprise"]}),addUserRole:A.mutation({query:S=>({url:`/access-control/users/${S.userId}/roles`,method:"POST",body:S.addUserRoleCommand}),invalidatesTags:["access_control","enterprise"]}),setUserRoles:A.mutation({query:S=>({url:`/access-control/users/${S.userId}/roles`,method:"PUT",body:S.setUserRolesCommand}),invalidatesTags:["access_control","enterprise"]}),removeUserRole:A.mutation({query:S=>({url:`/access-control/users/${S.userId}/roles/${S.roleUid}`,method:"DELETE",params:{global:S.global}}),invalidatesTags:["access_control","enterprise"]}),getResourceDescription:A.query({query:S=>({url:`/access-control/${S.resource}/description`}),providesTags:["access_control"]}),getResourcePermissions:A.query({query:S=>({url:`/access-control/${S.resource}/${S.resourceId}`}),providesTags:["access_control"]}),setResourcePermissions:A.mutation({query:S=>({url:`/access-control/${S.resource}/${S.resourceId}`,method:"POST",body:S.setPermissionsCommand}),invalidatesTags:["access_control"]}),setResourcePermissionsForBuiltInRole:A.mutation({query:S=>({url:`/access-control/${S.resource}/${S.resourceId}/builtInRoles/${S.builtInRole}`,method:"POST",body:S.setPermissionCommand}),invalidatesTags:["access_control"]}),setResourcePermissionsForTeam:A.mutation({query:S=>({url:`/access-control/${S.resource}/${S.resourceId}/teams/${S.teamId}`,method:"POST",body:S.setPermissionCommand}),invalidatesTags:["access_control"]}),setResourcePermissionsForUser:A.mutation({query:S=>({url:`/access-control/${S.resource}/${S.resourceId}/users/${S.userId}`,method:"POST",body:S.setPermissionCommand}),invalidatesTags:["access_control"]}),getSyncStatus:A.query({query:()=>({url:"/admin/ldap-sync-status"}),providesTags:["ldap_debug","enterprise"]}),reloadLdapCfg:A.mutation({query:()=>({url:"/admin/ldap/reload",method:"POST"}),invalidatesTags:["admin_ldap"]}),getLdapStatus:A.query({query:()=>({url:"/admin/ldap/status"}),providesTags:["admin_ldap"]}),postSyncUserWithLdap:A.mutation({query:S=>({url:`/admin/ldap/sync/${S.userId}`,method:"POST"}),invalidatesTags:["admin_ldap"]}),getUserFromLdap:A.query({query:S=>({url:`/admin/ldap/${S.userName}`}),providesTags:["admin_ldap"]}),adminProvisioningReloadAccessControl:A.mutation({query:()=>({url:"/admin/provisioning/access-control/reload",method:"POST"}),invalidatesTags:["access_control_provisioning","enterprise"]}),adminProvisioningReloadDashboards:A.mutation({query:()=>({url:"/admin/provisioning/dashboards/reload",method:"POST"}),invalidatesTags:["admin_provisioning"]}),adminProvisioningReloadDatasources:A.mutation({query:()=>({url:"/admin/provisioning/datasources/reload",method:"POST"}),invalidatesTags:["admin_provisioning"]}),adminProvisioningReloadPlugins:A.mutation({query:()=>({url:"/admin/provisioning/plugins/reload",method:"POST"}),invalidatesTags:["admin_provisioning"]}),adminGetSettings:A.query({query:()=>({url:"/admin/settings"}),providesTags:["admin"]}),adminGetStats:A.query({query:()=>({url:"/admin/stats"}),providesTags:["admin"]}),adminCreateUser:A.mutation({query:S=>({url:"/admin/users",method:"POST",body:S.adminCreateUserForm}),invalidatesTags:["admin_users"]}),adminDeleteUser:A.mutation({query:S=>({url:`/admin/users/${S.userId}`,method:"DELETE"}),invalidatesTags:["admin_users"]}),adminGetUserAuthTokens:A.query({query:S=>({url:`/admin/users/${S.userId}/auth-tokens`}),providesTags:["admin_users"]}),adminDisableUser:A.mutation({query:S=>({url:`/admin/users/${S.userId}/disable`,method:"POST"}),invalidatesTags:["admin_users"]}),adminEnableUser:A.mutation({query:S=>({url:`/admin/users/${S.userId}/enable`,method:"POST"}),invalidatesTags:["admin_users"]}),adminLogoutUser:A.mutation({query:S=>({url:`/admin/users/${S.userId}/logout`,method:"POST"}),invalidatesTags:["admin_users"]}),adminUpdateUserPassword:A.mutation({query:S=>({url:`/admin/users/${S.userId}/password`,method:"PUT",body:S.adminUpdateUserPasswordForm}),invalidatesTags:["admin_users"]}),adminUpdateUserPermissions:A.mutation({query:S=>({url:`/admin/users/${S.userId}/permissions`,method:"PUT",body:S.adminUpdateUserPermissionsForm}),invalidatesTags:["admin_users"]}),getUserQuota:A.query({query:S=>({url:`/admin/users/${S.userId}/quotas`}),providesTags:["quota","admin_users"]}),updateUserQuota:A.mutation({query:S=>({url:`/admin/users/${S.userId}/quotas/${S.quotaTarget}`,method:"PUT",body:S.updateQuotaCmd}),invalidatesTags:["quota","admin_users"]}),adminRevokeUserAuthToken:A.mutation({query:S=>({url:`/admin/users/${S.userId}/revoke-auth-token`,method:"POST",body:S.revokeAuthTokenCmd}),invalidatesTags:["admin_users"]}),getAnnotations:A.query({query:S=>({url:"/annotations",params:{from:S.from,to:S.to,userId:S.userId,alertId:S.alertId,alertUID:S.alertUid,dashboardId:S.dashboardId,dashboardUID:S.dashboardUid,panelId:S.panelId,limit:S.limit,tags:S.tags,type:S.type,matchAny:S.matchAny}}),providesTags:["annotations"]}),postAnnotation:A.mutation({query:S=>({url:"/annotations",method:"POST",body:S.postAnnotationsCmd}),invalidatesTags:["annotations"]}),postGraphiteAnnotation:A.mutation({query:S=>({url:"/annotations/graphite",method:"POST",body:S.postGraphiteAnnotationsCmd}),invalidatesTags:["annotations"]}),massDeleteAnnotations:A.mutation({query:S=>({url:"/annotations/mass-delete",method:"POST",body:S.massDeleteAnnotationsCmd}),invalidatesTags:["annotations"]}),getAnnotationTags:A.query({query:S=>({url:"/annotations/tags",params:{tag:S.tag,limit:S.limit}}),providesTags:["annotations"]}),deleteAnnotationById:A.mutation({query:S=>({url:`/annotations/${S.annotationId}`,method:"DELETE"}),invalidatesTags:["annotations"]}),getAnnotationById:A.query({query:S=>({url:`/annotations/${S.annotationId}`}),providesTags:["annotations"]}),patchAnnotation:A.mutation({query:S=>({url:`/annotations/${S.annotationId}`,method:"PATCH",body:S.patchAnnotationsCmd}),invalidatesTags:["annotations"]}),updateAnnotation:A.mutation({query:S=>({url:`/annotations/${S.annotationId}`,method:"PUT",body:S.updateAnnotationsCmd}),invalidatesTags:["annotations"]}),listDevices:A.query({query:()=>({url:"/anonymous/devices"}),providesTags:["devices"]}),searchDevices:A.query({query:()=>({url:"/anonymous/search"}),providesTags:["devices"]}),getSessionList:A.query({query:()=>({url:"/cloudmigration/migration"}),providesTags:["migrations"]}),createSession:A.mutation({query:S=>({url:"/cloudmigration/migration",method:"POST",body:S.cloudMigrationSessionRequestDto}),invalidatesTags:["migrations"]}),deleteSession:A.mutation({query:S=>({url:`/cloudmigration/migration/${S.uid}`,method:"DELETE"}),invalidatesTags:["migrations"]}),getSession:A.query({query:S=>({url:`/cloudmigration/migration/${S.uid}`}),providesTags:["migrations"]}),createSnapshot:A.mutation({query:S=>({url:`/cloudmigration/migration/${S.uid}/snapshot`,method:"POST",body:S.createSnapshotRequestDto}),invalidatesTags:["migrations"]}),getSnapshot:A.query({query:S=>({url:`/cloudmigration/migration/${S.uid}/snapshot/${S.snapshotUid}`,params:{resultPage:S.resultPage,resultLimit:S.resultLimit,resultSortColumn:S.resultSortColumn,resultSortOrder:S.resultSortOrder,errorsOnly:S.errorsOnly}}),providesTags:["migrations"]}),cancelSnapshot:A.mutation({query:S=>({url:`/cloudmigration/migration/${S.uid}/snapshot/${S.snapshotUid}/cancel`,method:"POST"}),invalidatesTags:["migrations"]}),uploadSnapshot:A.mutation({query:S=>({url:`/cloudmigration/migration/${S.uid}/snapshot/${S.snapshotUid}/upload`,method:"POST"}),invalidatesTags:["migrations"]}),getShapshotList:A.query({query:S=>({url:`/cloudmigration/migration/${S.uid}/snapshots`,params:{page:S.page,limit:S.limit,sort:S.sort}}),providesTags:["migrations"]}),getResourceDependencies:A.query({query:()=>({url:"/cloudmigration/resources/dependencies"}),providesTags:["migrations"]}),getCloudMigrationToken:A.query({query:()=>({url:"/cloudmigration/token"}),providesTags:["migrations"]}),createCloudMigrationToken:A.mutation({query:()=>({url:"/cloudmigration/token",method:"POST"}),invalidatesTags:["migrations"]}),deleteCloudMigrationToken:A.mutation({query:S=>({url:`/cloudmigration/token/${S.uid}`,method:"DELETE"}),invalidatesTags:["migrations"]}),routeConvertPrometheusCortexGetRules:A.query({query:()=>({url:"/convert/api/prom/rules"}),providesTags:["convert_prometheus"]}),routeConvertPrometheusCortexPostRuleGroups:A.mutation({query:()=>({url:"/convert/api/prom/rules",method:"POST"}),invalidatesTags:["convert_prometheus"]}),routeConvertPrometheusCortexDeleteNamespace:A.mutation({query:S=>({url:`/convert/api/prom/rules/${S.namespaceTitle}`,method:"DELETE"}),invalidatesTags:["convert_prometheus"]}),routeConvertPrometheusCortexGetNamespace:A.query({query:S=>({url:`/convert/api/prom/rules/${S.namespaceTitle}`}),providesTags:["convert_prometheus"]}),routeConvertPrometheusCortexPostRuleGroup:A.mutation({query:S=>({url:`/convert/api/prom/rules/${S.namespaceTitle}`,method:"POST",body:S.prometheusRuleGroup,headers:{"x-grafana-alerting-datasource-uid":S["x-grafana-alerting-datasource-uid"],"x-grafana-alerting-recording-rules-paused":S["x-grafana-alerting-recording-rules-paused"],"x-grafana-alerting-alert-rules-paused":S["x-grafana-alerting-alert-rules-paused"],"x-grafana-alerting-target-datasource-uid":S["x-grafana-alerting-target-datasource-uid"],"x-grafana-alerting-folder-uid":S["x-grafana-alerting-folder-uid"],"x-grafana-alerting-notification-receiver":S["x-grafana-alerting-notification-receiver"]}}),invalidatesTags:["convert_prometheus"]}),routeConvertPrometheusCortexDeleteRuleGroup:A.mutation({query:S=>({url:`/convert/api/prom/rules/${S.namespaceTitle}/${S.group}`,method:"DELETE"}),invalidatesTags:["convert_prometheus"]}),routeConvertPrometheusCortexGetRuleGroup:A.query({query:S=>({url:`/convert/api/prom/rules/${S.namespaceTitle}/${S.group}`}),providesTags:["convert_prometheus"]}),routeConvertPrometheusGetRules:A.query({query:()=>({url:"/convert/prometheus/config/v1/rules"}),providesTags:["convert_prometheus"]}),routeConvertPrometheusPostRuleGroups:A.mutation({query:()=>({url:"/convert/prometheus/config/v1/rules",method:"POST"}),invalidatesTags:["convert_prometheus"]}),routeConvertPrometheusDeleteNamespace:A.mutation({query:S=>({url:`/convert/prometheus/config/v1/rules/${S.namespaceTitle}`,method:"DELETE"}),invalidatesTags:["convert_prometheus"]}),routeConvertPrometheusGetNamespace:A.query({query:S=>({url:`/convert/prometheus/config/v1/rules/${S.namespaceTitle}`}),providesTags:["convert_prometheus"]}),routeConvertPrometheusPostRuleGroup:A.mutation({query:S=>({url:`/convert/prometheus/config/v1/rules/${S.namespaceTitle}`,method:"POST",body:S.prometheusRuleGroup,headers:{"x-grafana-alerting-datasource-uid":S["x-grafana-alerting-datasource-uid"],"x-grafana-alerting-recording-rules-paused":S["x-grafana-alerting-recording-rules-paused"],"x-grafana-alerting-alert-rules-paused":S["x-grafana-alerting-alert-rules-paused"],"x-grafana-alerting-target-datasource-uid":S["x-grafana-alerting-target-datasource-uid"],"x-grafana-alerting-folder-uid":S["x-grafana-alerting-folder-uid"],"x-grafana-alerting-notification-receiver":S["x-grafana-alerting-notification-receiver"]}}),invalidatesTags:["convert_prometheus"]}),routeConvertPrometheusDeleteRuleGroup:A.mutation({query:S=>({url:`/convert/prometheus/config/v1/rules/${S.namespaceTitle}/${S.group}`,method:"DELETE"}),invalidatesTags:["convert_prometheus"]}),routeConvertPrometheusGetRuleGroup:A.query({query:S=>({url:`/convert/prometheus/config/v1/rules/${S.namespaceTitle}/${S.group}`}),providesTags:["convert_prometheus"]}),searchDashboardSnapshots:A.query({query:S=>({url:"/dashboard/snapshots",params:{query:S.query,limit:S.limit}}),providesTags:["dashboards","snapshots"]}),calculateDashboardDiff:A.mutation({query:S=>({url:"/dashboards/calculate-diff",method:"POST",body:S.body}),invalidatesTags:["dashboards"]}),postDashboard:A.mutation({query:S=>({url:"/dashboards/db",method:"POST",body:S.saveDashboardCommand}),invalidatesTags:["dashboards"]}),getHomeDashboard:A.query({query:()=>({url:"/dashboards/home"}),providesTags:["dashboards"]}),importDashboard:A.mutation({query:S=>({url:"/dashboards/import",method:"POST",body:S.importDashboardRequest}),invalidatesTags:["dashboards"]}),interpolateDashboard:A.mutation({query:()=>({url:"/dashboards/interpolate",method:"POST"}),invalidatesTags:["dashboards"]}),listPublicDashboards:A.query({query:()=>({url:"/dashboards/public-dashboards"}),providesTags:["dashboards","dashboard_public"]}),getDashboardTags:A.query({query:()=>({url:"/dashboards/tags"}),providesTags:["dashboards"]}),getPublicDashboard:A.query({query:S=>({url:`/dashboards/uid/${S.dashboardUid}/public-dashboards`}),providesTags:["dashboards","dashboard_public"]}),createPublicDashboard:A.mutation({query:S=>({url:`/dashboards/uid/${S.dashboardUid}/public-dashboards`,method:"POST",body:S.publicDashboardDto}),invalidatesTags:["dashboards","dashboard_public"]}),deletePublicDashboard:A.mutation({query:S=>({url:`/dashboards/uid/${S.dashboardUid}/public-dashboards/${S.uid}`,method:"DELETE"}),invalidatesTags:["dashboards","dashboard_public"]}),updatePublicDashboard:A.mutation({query:S=>({url:`/dashboards/uid/${S.dashboardUid}/public-dashboards/${S.uid}`,method:"PATCH",body:S.publicDashboardDto}),invalidatesTags:["dashboards","dashboard_public"]}),deleteDashboardByUid:A.mutation({query:S=>({url:`/dashboards/uid/${S.uid}`,method:"DELETE"}),invalidatesTags:["dashboards"]}),getDashboardByUid:A.query({query:S=>({url:`/dashboards/uid/${S.uid}`}),providesTags:["dashboards"]}),getDashboardPermissionsListByUid:A.query({query:S=>({url:`/dashboards/uid/${S.uid}/permissions`}),providesTags:["dashboards","permissions"]}),updateDashboardPermissionsByUid:A.mutation({query:S=>({url:`/dashboards/uid/${S.uid}/permissions`,method:"POST",body:S.updateDashboardAclCommand}),invalidatesTags:["dashboards","permissions"]}),restoreDashboardVersionByUid:A.mutation({query:S=>({url:`/dashboards/uid/${S.uid}/restore`,method:"POST",body:S.restoreDashboardVersionCommand}),invalidatesTags:["dashboards","versions"]}),getDashboardVersionsByUid:A.query({query:S=>({url:`/dashboards/uid/${S.uid}/versions`,params:{limit:S.limit,start:S.start}}),providesTags:["dashboards","versions"]}),getDashboardVersionByUid:A.query({query:S=>({url:`/dashboards/uid/${S.uid}/versions/${S.dashboardVersionId}`}),providesTags:["dashboards","versions"]}),getDataSources:A.query({query:()=>({url:"/datasources"}),providesTags:["datasources"]}),addDataSource:A.mutation({query:S=>({url:"/datasources",method:"POST",body:S.addDataSourceCommand}),invalidatesTags:["datasources"]}),getCorrelations:A.query({query:S=>({url:"/datasources/correlations",params:{limit:S.limit,page:S.page,sourceUID:S.sourceUid}}),providesTags:["datasources","correlations"]}),getDataSourceIdByName:A.query({query:S=>({url:`/datasources/id/${S.name}`}),providesTags:["datasources"]}),deleteDataSourceByName:A.mutation({query:S=>({url:`/datasources/name/${S.name}`,method:"DELETE"}),invalidatesTags:["datasources"]}),getDataSourceByName:A.query({query:S=>({url:`/datasources/name/${S.name}`}),providesTags:["datasources"]}),datasourceProxyDeleteByUiDcalls:A.mutation({query:S=>({url:`/datasources/proxy/uid/${S.uid}/${S.datasourceProxyRoute}`,method:"DELETE"}),invalidatesTags:["datasources"]}),datasourceProxyGetByUiDcalls:A.query({query:S=>({url:`/datasources/proxy/uid/${S.uid}/${S.datasourceProxyRoute}`}),providesTags:["datasources"]}),datasourceProxyPostByUiDcalls:A.mutation({query:S=>({url:`/datasources/proxy/uid/${S.uid}/${S.datasourceProxyRoute}`,method:"POST",body:S.body}),invalidatesTags:["datasources"]}),getCorrelationsBySourceUid:A.query({query:S=>({url:`/datasources/uid/${S.sourceUid}/correlations`}),providesTags:["datasources","correlations"]}),createCorrelation:A.mutation({query:S=>({url:`/datasources/uid/${S.sourceUid}/correlations`,method:"POST",body:S.createCorrelationCommand}),invalidatesTags:["datasources","correlations"]}),getCorrelation:A.query({query:S=>({url:`/datasources/uid/${S.sourceUid}/correlations/${S.correlationUid}`}),providesTags:["datasources","correlations"]}),updateCorrelation:A.mutation({query:S=>({url:`/datasources/uid/${S.sourceUid}/correlations/${S.correlationUid}`,method:"PATCH",body:S.updateCorrelationCommand}),invalidatesTags:["datasources","correlations"]}),deleteDataSourceByUid:A.mutation({query:S=>({url:`/datasources/uid/${S.uid}`,method:"DELETE"}),invalidatesTags:["datasources"]}),getDataSourceByUid:A.query({query:S=>({url:`/datasources/uid/${S.uid}`}),providesTags:["datasources"]}),updateDataSourceByUid:A.mutation({query:S=>({url:`/datasources/uid/${S.uid}`,method:"PUT",body:S.updateDataSourceCommand}),invalidatesTags:["datasources"]}),deleteCorrelation:A.mutation({query:S=>({url:`/datasources/uid/${S.uid}/correlations/${S.correlationUid}`,method:"DELETE"}),invalidatesTags:["datasources","correlations"]}),checkDatasourceHealthWithUid:A.query({query:S=>({url:`/datasources/uid/${S.uid}/health`}),providesTags:["datasources","health"]}),getTeamLbacRulesApi:A.query({query:S=>({url:`/datasources/uid/${S.uid}/lbac/teams`}),providesTags:["enterprise"]}),updateTeamLbacRulesApi:A.mutation({query:S=>({url:`/datasources/uid/${S.uid}/lbac/teams`,method:"PUT",body:S.updateTeamLbacCommand}),invalidatesTags:["enterprise"]}),callDatasourceResourceWithUid:A.query({query:S=>({url:`/datasources/uid/${S.uid}/resources/${S.datasourceProxyRoute}`}),providesTags:["datasources"]}),getDataSourceCacheConfig:A.query({query:S=>({url:`/datasources/${S.dataSourceUid}/cache`}),providesTags:["enterprise"]}),setDataSourceCacheConfig:A.mutation({query:S=>({url:`/datasources/${S.dataSourceUid}/cache`,method:"POST",body:S.cacheConfigSetter}),invalidatesTags:["enterprise"]}),cleanDataSourceCache:A.mutation({query:S=>({url:`/datasources/${S.dataSourceUid}/cache/clean`,method:"POST"}),invalidatesTags:["enterprise"]}),disableDataSourceCache:A.mutation({query:S=>({url:`/datasources/${S.dataSourceUid}/cache/disable`,method:"POST"}),invalidatesTags:["enterprise"]}),enableDataSourceCache:A.mutation({query:S=>({url:`/datasources/${S.dataSourceUid}/cache/enable`,method:"POST"}),invalidatesTags:["enterprise"]}),queryMetricsWithExpressions:A.mutation({query:S=>({url:"/ds/query",method:"POST",body:S.metricRequest}),invalidatesTags:["datasources"]}),getFolders:A.query({query:S=>({url:"/folders",params:{limit:S.limit,page:S.page,parentUid:S.parentUid,permission:S.permission}}),providesTags:["folders"]}),createFolder:A.mutation({query:S=>({url:"/folders",method:"POST",body:S.createFolderCommand}),invalidatesTags:["folders"]}),deleteFolder:A.mutation({query:S=>({url:`/folders/${S.folderUid}`,method:"DELETE",params:{forceDeleteRules:S.forceDeleteRules}}),invalidatesTags:["folders"]}),getFolderByUid:A.query({query:S=>({url:`/folders/${S.folderUid}`}),providesTags:["folders"]}),updateFolder:A.mutation({query:S=>({url:`/folders/${S.folderUid}`,method:"PUT",body:S.updateFolderCommand}),invalidatesTags:["folders"]}),getFolderDescendantCounts:A.query({query:S=>({url:`/folders/${S.folderUid}/counts`}),providesTags:["folders"]}),moveFolder:A.mutation({query:S=>({url:`/folders/${S.folderUid}/move`,method:"POST",body:S.moveFolderCommand}),invalidatesTags:["folders"]}),getFolderPermissionList:A.query({query:S=>({url:`/folders/${S.folderUid}/permissions`}),providesTags:["folders","permissions"]}),updateFolderPermissions:A.mutation({query:S=>({url:`/folders/${S.folderUid}/permissions`,method:"POST",body:S.updateDashboardAclCommand}),invalidatesTags:["folders","permissions"]}),getMappedGroups:A.query({query:()=>({url:"/groupsync/groups"}),providesTags:["group_attribute_sync","enterprise"]}),deleteGroupMappings:A.mutation({query:S=>({url:`/groupsync/groups/${S.groupId}`,method:"DELETE"}),invalidatesTags:["group_attribute_sync","enterprise"]}),createGroupMappings:A.mutation({query:S=>({url:`/groupsync/groups/${S.groupId}`,method:"POST",body:S.groupAttributes}),invalidatesTags:["group_attribute_sync","enterprise"]}),updateGroupMappings:A.mutation({query:S=>({url:`/groupsync/groups/${S.groupId}`,method:"PUT",body:S.groupAttributes}),invalidatesTags:["group_attribute_sync","enterprise"]}),getGroupRoles:A.query({query:S=>({url:`/groupsync/groups/${S.groupId}/roles`}),providesTags:["group_attribute_sync","enterprise"]}),getHealth:A.query({query:()=>({url:"/health"}),providesTags:["health"]}),getLibraryElements:A.query({query:S=>({url:"/library-elements",params:{searchString:S.searchString,kind:S.kind,sortDirection:S.sortDirection,typeFilter:S.typeFilter,excludeUid:S.excludeUid,folderFilter:S.folderFilter,perPage:S.perPage,page:S.page}}),providesTags:["library_elements"]}),createLibraryElement:A.mutation({query:S=>({url:"/library-elements",method:"POST",body:S.createLibraryElementCommand}),invalidatesTags:["library_elements"]}),getLibraryElementByName:A.query({query:S=>({url:`/library-elements/name/${S.libraryElementName}`}),providesTags:["library_elements"]}),deleteLibraryElementByUid:A.mutation({query:S=>({url:`/library-elements/${S.libraryElementUid}`,method:"DELETE"}),invalidatesTags:["library_elements"]}),getLibraryElementByUid:A.query({query:S=>({url:`/library-elements/${S.libraryElementUid}`}),providesTags:["library_elements"]}),updateLibraryElement:A.mutation({query:S=>({url:`/library-elements/${S.libraryElementUid}`,method:"PATCH",body:S.patchLibraryElementCommand}),invalidatesTags:["library_elements"]}),getLibraryElementConnections:A.query({query:S=>({url:`/library-elements/${S.libraryElementUid}/connections/`}),providesTags:["library_elements"]}),getStatus:A.query({query:()=>({url:"/licensing/check"}),providesTags:["licensing","enterprise"]}),refreshLicenseStats:A.query({query:()=>({url:"/licensing/refresh-stats"}),providesTags:["licensing","enterprise"]}),deleteLicenseToken:A.mutation({query:S=>({url:"/licensing/token",method:"DELETE",body:S.deleteTokenCommand}),invalidatesTags:["licensing","enterprise"]}),getLicenseToken:A.query({query:()=>({url:"/licensing/token"}),providesTags:["licensing","enterprise"]}),postLicenseToken:A.mutation({query:S=>({url:"/licensing/token",method:"POST",body:S.deleteTokenCommand}),invalidatesTags:["licensing","enterprise"]}),postRenewLicenseToken:A.mutation({query:S=>({url:"/licensing/token/renew",method:"POST",body:S.body}),invalidatesTags:["licensing","enterprise"]}),getSamlLogout:A.query({query:()=>({url:"/logout/saml"}),providesTags:["saml","enterprise"]}),getCurrentOrg:A.query({query:()=>({url:"/org"}),providesTags:["org"]}),updateCurrentOrg:A.mutation({query:S=>({url:"/org",method:"PUT",body:S.updateOrgForm}),invalidatesTags:["org"]}),updateCurrentOrgAddress:A.mutation({query:S=>({url:"/org/address",method:"PUT",body:S.updateOrgAddressForm}),invalidatesTags:["org"]}),getPendingOrgInvites:A.query({query:()=>({url:"/org/invites"}),providesTags:["org","invites"]}),addOrgInvite:A.mutation({query:S=>({url:"/org/invites",method:"POST",body:S.addInviteForm}),invalidatesTags:["org","invites"]}),revokeInvite:A.mutation({query:S=>({url:`/org/invites/${S.invitationCode}/revoke`,method:"DELETE"}),invalidatesTags:["org","invites"]}),getOrgPreferences:A.query({query:()=>({url:"/org/preferences"}),providesTags:["org","preferences"]}),patchOrgPreferences:A.mutation({query:S=>({url:"/org/preferences",method:"PATCH",body:S.patchPrefsCmd}),invalidatesTags:["org","preferences"]}),updateOrgPreferences:A.mutation({query:S=>({url:"/org/preferences",method:"PUT",body:S.updatePrefsCmd}),invalidatesTags:["org","preferences"]}),getCurrentOrgQuota:A.query({query:()=>({url:"/org/quotas"}),providesTags:["quota","org"]}),getOrgUsersForCurrentOrg:A.query({query:S=>({url:"/org/users",params:{query:S.query,limit:S.limit}}),providesTags:["org"]}),addOrgUserToCurrentOrg:A.mutation({query:S=>({url:"/org/users",method:"POST",body:S.addOrgUserCommand}),invalidatesTags:["org"]}),getOrgUsersForCurrentOrgLookup:A.query({query:S=>({url:"/org/users/lookup",params:{query:S.query,limit:S.limit}}),providesTags:["org"]}),removeOrgUserForCurrentOrg:A.mutation({query:S=>({url:`/org/users/${S.userId}`,method:"DELETE"}),invalidatesTags:["org"]}),updateOrgUserForCurrentOrg:A.mutation({query:S=>({url:`/org/users/${S.userId}`,method:"PATCH",body:S.updateOrgUserCommand}),invalidatesTags:["org"]}),searchOrgs:A.query({query:S=>({url:"/orgs",params:{page:S.page,perpage:S.perpage,name:S.name,query:S.query}}),providesTags:["orgs"]}),createOrg:A.mutation({query:S=>({url:"/orgs",method:"POST",body:S.createOrgCommand}),invalidatesTags:["orgs"]}),getOrgByName:A.query({query:S=>({url:`/orgs/name/${S.orgName}`}),providesTags:["orgs"]}),deleteOrgById:A.mutation({query:S=>({url:`/orgs/${S.orgId}`,method:"DELETE"}),invalidatesTags:["orgs"]}),getOrgById:A.query({query:S=>({url:`/orgs/${S.orgId}`}),providesTags:["orgs"]}),updateOrg:A.mutation({query:S=>({url:`/orgs/${S.orgId}`,method:"PUT",body:S.updateOrgForm}),invalidatesTags:["orgs"]}),updateOrgAddress:A.mutation({query:S=>({url:`/orgs/${S.orgId}/address`,method:"PUT",body:S.updateOrgAddressForm}),invalidatesTags:["orgs"]}),getOrgQuota:A.query({query:S=>({url:`/orgs/${S.orgId}/quotas`}),providesTags:["quota","orgs"]}),updateOrgQuota:A.mutation({query:S=>({url:`/orgs/${S.orgId}/quotas/${S.quotaTarget}`,method:"PUT",body:S.updateQuotaCmd}),invalidatesTags:["quota","orgs"]}),getOrgUsers:A.query({query:S=>({url:`/orgs/${S.orgId}/users`}),providesTags:["orgs"]}),addOrgUser:A.mutation({query:S=>({url:`/orgs/${S.orgId}/users`,method:"POST",body:S.addOrgUserCommand}),invalidatesTags:["orgs"]}),searchOrgUsers:A.query({query:S=>({url:`/orgs/${S.orgId}/users/search`}),providesTags:["orgs"]}),removeOrgUser:A.mutation({query:S=>({url:`/orgs/${S.orgId}/users/${S.userId}`,method:"DELETE"}),invalidatesTags:["orgs"]}),updateOrgUser:A.mutation({query:S=>({url:`/orgs/${S.orgId}/users/${S.userId}`,method:"PATCH",body:S.updateOrgUserCommand}),invalidatesTags:["orgs"]}),searchPlaylists:A.query({query:S=>({url:"/playlists",params:{query:S.query,limit:S.limit}}),providesTags:["playlists"]}),createPlaylist:A.mutation({query:S=>({url:"/playlists",method:"POST",body:S.createPlaylistCommand}),invalidatesTags:["playlists"]}),deletePlaylist:A.mutation({query:S=>({url:`/playlists/${S.uid}`,method:"DELETE"}),invalidatesTags:["playlists"]}),getPlaylist:A.query({query:S=>({url:`/playlists/${S.uid}`}),providesTags:["playlists"]}),updatePlaylist:A.mutation({query:S=>({url:`/playlists/${S.uid}`,method:"PUT",body:S.updatePlaylistCommand}),invalidatesTags:["playlists"]}),getPlaylistItems:A.query({query:S=>({url:`/playlists/${S.uid}/items`}),providesTags:["playlists"]}),viewPublicDashboard:A.query({query:S=>({url:`/public/dashboards/${S.accessToken}`}),providesTags:["dashboards","dashboard_public"]}),getPublicAnnotations:A.query({query:S=>({url:`/public/dashboards/${S.accessToken}/annotations`}),providesTags:["dashboards","annotations","dashboard_public"]}),queryPublicDashboard:A.mutation({query:S=>({url:`/public/dashboards/${S.accessToken}/panels/${S.panelId}/query`,method:"POST"}),invalidatesTags:["dashboards","dashboard_public"]}),searchQueries:A.query({query:S=>({url:"/query-history",params:{datasourceUid:S.datasourceUid,searchString:S.searchString,onlyStarred:S.onlyStarred,sort:S.sort,page:S.page,limit:S.limit,from:S.from,to:S.to}}),providesTags:["query_history"]}),createQuery:A.mutation({query:S=>({url:"/query-history",method:"POST",body:S.createQueryInQueryHistoryCommand}),invalidatesTags:["query_history"]}),unstarQuery:A.mutation({query:S=>({url:`/query-history/star/${S.queryHistoryUid}`,method:"DELETE"}),invalidatesTags:["query_history"]}),starQuery:A.mutation({query:S=>({url:`/query-history/star/${S.queryHistoryUid}`,method:"POST"}),invalidatesTags:["query_history"]}),deleteQuery:A.mutation({query:S=>({url:`/query-history/${S.queryHistoryUid}`,method:"DELETE"}),invalidatesTags:["query_history"]}),patchQueryComment:A.mutation({query:S=>({url:`/query-history/${S.queryHistoryUid}`,method:"PATCH",body:S.patchQueryCommentInQueryHistoryCommand}),invalidatesTags:["query_history"]}),listRecordingRules:A.query({query:()=>({url:"/recording-rules"}),providesTags:["recording_rules","enterprise"]}),createRecordingRule:A.mutation({query:S=>({url:"/recording-rules",method:"POST",body:S.recordingRuleJson}),invalidatesTags:["recording_rules","enterprise"]}),updateRecordingRule:A.mutation({query:S=>({url:"/recording-rules",method:"PUT",body:S.recordingRuleJson}),invalidatesTags:["recording_rules","enterprise"]}),testCreateRecordingRule:A.mutation({query:S=>({url:"/recording-rules/test",method:"POST",body:S.recordingRuleJson}),invalidatesTags:["recording_rules","enterprise"]}),deleteRecordingRuleWriteTarget:A.mutation({query:()=>({url:"/recording-rules/writer",method:"DELETE"}),invalidatesTags:["recording_rules","enterprise"]}),getRecordingRuleWriteTarget:A.query({query:()=>({url:"/recording-rules/writer"}),providesTags:["recording_rules","enterprise"]}),createRecordingRuleWriteTarget:A.mutation({query:S=>({url:"/recording-rules/writer",method:"POST",body:S.prometheusRemoteWriteTargetJson}),invalidatesTags:["recording_rules","enterprise"]}),deleteRecordingRule:A.mutation({query:S=>({url:`/recording-rules/${S.recordingRuleId}`,method:"DELETE"}),invalidatesTags:["recording_rules","enterprise"]}),getReports:A.query({query:()=>({url:"/reports"}),providesTags:["reports","enterprise"]}),createReport:A.mutation({query:S=>({url:"/reports",method:"POST",body:S.createOrUpdateReport}),invalidatesTags:["reports","enterprise"]}),getReportsByDashboardUid:A.query({query:S=>({url:`/reports/dashboards/${S.uid}`}),providesTags:["reports","enterprise"]}),sendReport:A.mutation({query:S=>({url:"/reports/email",method:"POST",body:S.reportEmail}),invalidatesTags:["reports","enterprise"]}),getSettingsImage:A.query({query:()=>({url:"/reports/images/:image"}),providesTags:["reports","enterprise"]}),renderReportCsVs:A.query({query:S=>({url:"/reports/render/csvs",params:{dashboards:S.dashboards,title:S.title}}),providesTags:["reports","enterprise"]}),renderReportPdFs:A.query({query:S=>({url:"/reports/render/pdfs",params:{dashboards:S.dashboards,orientation:S.orientation,layout:S.layout,title:S.title,scaleFactor:S.scaleFactor,includeTables:S.includeTables}}),providesTags:["reports","enterprise"]}),getReportSettings:A.query({query:()=>({url:"/reports/settings"}),providesTags:["reports","enterprise"]}),saveReportSettings:A.mutation({query:S=>({url:"/reports/settings",method:"POST",body:S.reportSettings}),invalidatesTags:["reports","enterprise"]}),sendTestEmail:A.mutation({query:S=>({url:"/reports/test-email",method:"POST",body:S.createOrUpdateReport}),invalidatesTags:["reports","enterprise"]}),postAcs:A.mutation({query:S=>({url:"/saml/acs",method:"POST",params:{RelayState:S.relayState}}),invalidatesTags:["saml","enterprise"]}),getMetadata:A.query({query:()=>({url:"/saml/metadata"}),providesTags:["saml","enterprise"]}),getSlo:A.query({query:()=>({url:"/saml/slo"}),providesTags:["saml","enterprise"]}),postSlo:A.mutation({query:S=>({url:"/saml/slo",method:"POST",params:{SAMLRequest:S.samlRequest,SAMLResponse:S.samlResponse}}),invalidatesTags:["saml","enterprise"]}),search:A.query({query:S=>({url:"/search",params:{query:S.query,tag:S.tag,type:S.type,dashboardIds:S.dashboardIds,dashboardUIDs:S.dashboardUiDs,folderIds:S.folderIds,folderUIDs:S.folderUiDs,starred:S.starred,limit:S.limit,page:S.page,permission:S.permission,sort:S.sort,deleted:S.deleted}}),providesTags:["search"]}),listSortOptions:A.query({query:()=>({url:"/search/sorting"}),providesTags:["search"]}),createServiceAccount:A.mutation({query:S=>({url:"/serviceaccounts",method:"POST",body:S.createServiceAccountForm}),invalidatesTags:["service_accounts"]}),searchOrgServiceAccountsWithPaging:A.query({query:S=>({url:"/serviceaccounts/search",params:{Disabled:S.disabled,expiredTokens:S.expiredTokens,query:S.query,perpage:S.perpage,page:S.page}}),providesTags:["service_accounts"]}),deleteServiceAccount:A.mutation({query:S=>({url:`/serviceaccounts/${S.serviceAccountId}`,method:"DELETE"}),invalidatesTags:["service_accounts"]}),retrieveServiceAccount:A.query({query:S=>({url:`/serviceaccounts/${S.serviceAccountId}`}),providesTags:["service_accounts"]}),updateServiceAccount:A.mutation({query:S=>({url:`/serviceaccounts/${S.serviceAccountId}`,method:"PATCH",body:S.updateServiceAccountForm}),invalidatesTags:["service_accounts"]}),listTokens:A.query({query:S=>({url:`/serviceaccounts/${S.serviceAccountId}/tokens`}),providesTags:["service_accounts"]}),createToken:A.mutation({query:S=>({url:`/serviceaccounts/${S.serviceAccountId}/tokens`,method:"POST",body:S.addServiceAccountTokenCommand}),invalidatesTags:["service_accounts"]}),deleteToken:A.mutation({query:S=>({url:`/serviceaccounts/${S.serviceAccountId}/tokens/${S.tokenId}`,method:"DELETE"}),invalidatesTags:["service_accounts"]}),retrieveJwks:A.query({query:()=>({url:"/signing-keys/keys"}),providesTags:["signing_keys"]}),getSharingOptions:A.query({query:()=>({url:"/snapshot/shared-options"}),providesTags:["snapshots"]}),createDashboardSnapshot:A.mutation({query:S=>({url:"/snapshots",method:"POST",body:S.createDashboardSnapshotCommand}),invalidatesTags:["dashboards","snapshots"]}),deleteDashboardSnapshotByDeleteKey:A.query({query:S=>({url:`/snapshots-delete/${S.deleteKey}`}),providesTags:["dashboards","snapshots"]}),deleteDashboardSnapshot:A.mutation({query:S=>({url:`/snapshots/${S.key}`,method:"DELETE"}),invalidatesTags:["dashboards","snapshots"]}),getDashboardSnapshot:A.query({query:S=>({url:`/snapshots/${S.key}`}),providesTags:["dashboards","snapshots"]}),createTeam:A.mutation({query:S=>({url:"/teams",method:"POST",body:S.createTeamCommand}),invalidatesTags:["teams"]}),searchTeams:A.query({query:S=>({url:"/teams/search",params:{page:S.page,perpage:S.perpage,name:S.name,query:S.query}}),providesTags:["teams"]}),removeTeamGroupApiQuery:A.mutation({query:S=>({url:`/teams/${S.teamId}/groups`,method:"DELETE",params:{groupId:S.groupId}}),invalidatesTags:["sync_team_groups","enterprise"]}),getTeamGroupsApi:A.query({query:S=>({url:`/teams/${S.teamId}/groups`}),providesTags:["sync_team_groups","enterprise"]}),addTeamGroupApi:A.mutation({query:S=>({url:`/teams/${S.teamId}/groups`,method:"POST",body:S.teamGroupMapping}),invalidatesTags:["sync_team_groups","enterprise"]}),searchTeamGroups:A.query({query:S=>({url:`/teams/${S.teamId}/groups/search`,params:{page:S.page,perpage:S.perpage,query:S.query,name:S.name}}),providesTags:["sync_team_groups","enterprise"]}),deleteTeamById:A.mutation({query:S=>({url:`/teams/${S.teamId}`,method:"DELETE"}),invalidatesTags:["teams"]}),getTeamById:A.query({query:S=>({url:`/teams/${S.teamId}`}),providesTags:["teams"]}),updateTeam:A.mutation({query:S=>({url:`/teams/${S.teamId}`,method:"PUT",body:S.updateTeamCommand}),invalidatesTags:["teams"]}),getTeamMembers:A.query({query:S=>({url:`/teams/${S.teamId}/members`}),providesTags:["teams"]}),addTeamMember:A.mutation({query:S=>({url:`/teams/${S.teamId}/members`,method:"POST",body:S.addTeamMemberCommand}),invalidatesTags:["teams"]}),setTeamMemberships:A.mutation({query:S=>({url:`/teams/${S.teamId}/members`,method:"PUT",body:S.setTeamMembershipsCommand}),invalidatesTags:["teams"]}),removeTeamMember:A.mutation({query:S=>({url:`/teams/${S.teamId}/members/${S.userId}`,method:"DELETE"}),invalidatesTags:["teams"]}),updateTeamMember:A.mutation({query:S=>({url:`/teams/${S.teamId}/members/${S.userId}`,method:"PUT",body:S.updateTeamMemberCommand}),invalidatesTags:["teams"]}),getTeamPreferences:A.query({query:S=>({url:`/teams/${S.teamId}/preferences`}),providesTags:["teams","preferences"]}),updateTeamPreferences:A.mutation({query:S=>({url:`/teams/${S.teamId}/preferences`,method:"PUT",body:S.updatePrefsCmd}),invalidatesTags:["teams","preferences"]}),getSignedInUser:A.query({query:()=>({url:"/user"}),providesTags:["signed_in_user"]}),updateSignedInUser:A.mutation({query:S=>({url:"/user",method:"PUT",body:S.updateUserCommand}),invalidatesTags:["signed_in_user"]}),getUserAuthTokens:A.query({query:()=>({url:"/user/auth-tokens"}),providesTags:["signed_in_user"]}),updateUserEmail:A.query({query:()=>({url:"/user/email/update"}),providesTags:["user"]}),clearHelpFlags:A.query({query:()=>({url:"/user/helpflags/clear"}),providesTags:["signed_in_user"]}),setHelpFlag:A.mutation({query:S=>({url:`/user/helpflags/${S.flagId}`,method:"PUT"}),invalidatesTags:["signed_in_user"]}),getSignedInUserOrgList:A.query({query:()=>({url:"/user/orgs"}),providesTags:["signed_in_user"]}),changeUserPassword:A.mutation({query:S=>({url:"/user/password",method:"PUT",body:S.changeUserPasswordCommand}),invalidatesTags:["signed_in_user"]}),getUserPreferences:A.query({query:()=>({url:"/user/preferences"}),providesTags:["signed_in_user","preferences"]}),patchUserPreferences:A.mutation({query:S=>({url:"/user/preferences",method:"PATCH",body:S.patchPrefsCmd}),invalidatesTags:["signed_in_user","preferences"]}),updateUserPreferences:A.mutation({query:S=>({url:"/user/preferences",method:"PUT",body:S.updatePrefsCmd}),invalidatesTags:["signed_in_user","preferences"]}),getUserQuotas:A.query({query:()=>({url:"/user/quotas"}),providesTags:["quota","signed_in_user"]}),revokeUserAuthToken:A.mutation({query:S=>({url:"/user/revoke-auth-token",method:"POST",body:S.revokeAuthTokenCmd}),invalidatesTags:["signed_in_user"]}),unstarDashboardByUid:A.mutation({query:S=>({url:`/user/stars/dashboard/uid/${S.dashboardUid}`,method:"DELETE"}),invalidatesTags:["signed_in_user"]}),starDashboardByUid:A.mutation({query:S=>({url:`/user/stars/dashboard/uid/${S.dashboardUid}`,method:"POST"}),invalidatesTags:["signed_in_user"]}),getSignedInUserTeamList:A.query({query:()=>({url:"/user/teams"}),providesTags:["signed_in_user"]}),userSetUsingOrg:A.mutation({query:S=>({url:`/user/using/${S.orgId}`,method:"POST"}),invalidatesTags:["signed_in_user"]}),searchUsers:A.query({query:S=>({url:"/users",params:{perpage:S.perpage,page:S.page}}),providesTags:["users"]}),getUserByLoginOrEmail:A.query({query:S=>({url:"/users/lookup",params:{loginOrEmail:S.loginOrEmail}}),providesTags:["users"]}),searchUsersWithPaging:A.query({query:()=>({url:"/users/search"}),providesTags:["users"]}),getUserById:A.query({query:S=>({url:`/users/${S.userId}`}),providesTags:["users"]}),updateUser:A.mutation({query:S=>({url:`/users/${S.userId}`,method:"PUT",body:S.updateUserCommand}),invalidatesTags:["users"]}),getUserOrgList:A.query({query:S=>({url:`/users/${S.userId}/orgs`}),providesTags:["users"]}),getUserTeams:A.query({query:S=>({url:`/users/${S.userId}/teams`}),providesTags:["users"]}),routeGetAlertRules:A.query({query:()=>({url:"/v1/provisioning/alert-rules"}),providesTags:["provisioning"]}),routePostAlertRule:A.mutation({query:S=>({url:"/v1/provisioning/alert-rules",method:"POST",body:S.provisionedAlertRule,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeGetAlertRulesExport:A.query({query:S=>({url:"/v1/provisioning/alert-rules/export",params:{download:S.download,format:S.format,folderUid:S.folderUid,group:S.group,ruleUid:S.ruleUid}}),providesTags:["provisioning"]}),routeDeleteAlertRule:A.mutation({query:S=>({url:`/v1/provisioning/alert-rules/${S.uid}`,method:"DELETE",headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeGetAlertRule:A.query({query:S=>({url:`/v1/provisioning/alert-rules/${S.uid}`}),providesTags:["provisioning"]}),routePutAlertRule:A.mutation({query:S=>({url:`/v1/provisioning/alert-rules/${S.uid}`,method:"PUT",body:S.provisionedAlertRule,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeGetAlertRuleExport:A.query({query:S=>({url:`/v1/provisioning/alert-rules/${S.uid}/export`,params:{download:S.download,format:S.format}}),providesTags:["provisioning"]}),routeGetContactpoints:A.query({query:S=>({url:"/v1/provisioning/contact-points",params:{name:S.name}}),providesTags:["provisioning"]}),routePostContactpoints:A.mutation({query:S=>({url:"/v1/provisioning/contact-points",method:"POST",body:S.embeddedContactPoint,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeGetContactpointsExport:A.query({query:S=>({url:"/v1/provisioning/contact-points/export",params:{download:S.download,format:S.format,decrypt:S.decrypt,name:S.name}}),providesTags:["provisioning"]}),routeDeleteContactpoints:A.mutation({query:S=>({url:`/v1/provisioning/contact-points/${S.uid}`,method:"DELETE"}),invalidatesTags:["provisioning"]}),routePutContactpoint:A.mutation({query:S=>({url:`/v1/provisioning/contact-points/${S.uid}`,method:"PUT",body:S.embeddedContactPoint,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeDeleteAlertRuleGroup:A.mutation({query:S=>({url:`/v1/provisioning/folder/${S.folderUid}/rule-groups/${S.group}`,method:"DELETE"}),invalidatesTags:["provisioning"]}),routeGetAlertRuleGroup:A.query({query:S=>({url:`/v1/provisioning/folder/${S.folderUid}/rule-groups/${S.group}`}),providesTags:["provisioning"]}),routePutAlertRuleGroup:A.mutation({query:S=>({url:`/v1/provisioning/folder/${S.folderUid}/rule-groups/${S.group}`,method:"PUT",body:S.alertRuleGroup,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeGetAlertRuleGroupExport:A.query({query:S=>({url:`/v1/provisioning/folder/${S.folderUid}/rule-groups/${S.group}/export`,params:{download:S.download,format:S.format}}),providesTags:["provisioning"]}),routeGetMuteTimings:A.query({query:()=>({url:"/v1/provisioning/mute-timings"}),providesTags:["provisioning"]}),routePostMuteTiming:A.mutation({query:S=>({url:"/v1/provisioning/mute-timings",method:"POST",body:S.muteTimeInterval,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeExportMuteTimings:A.query({query:S=>({url:"/v1/provisioning/mute-timings/export",params:{download:S.download,format:S.format}}),providesTags:["provisioning"]}),routeDeleteMuteTiming:A.mutation({query:S=>({url:`/v1/provisioning/mute-timings/${S.name}`,method:"DELETE",headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]},params:{version:S.version}}),invalidatesTags:["provisioning"]}),routeGetMuteTiming:A.query({query:S=>({url:`/v1/provisioning/mute-timings/${S.name}`}),providesTags:["provisioning"]}),routePutMuteTiming:A.mutation({query:S=>({url:`/v1/provisioning/mute-timings/${S.name}`,method:"PUT",body:S.muteTimeInterval,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeExportMuteTiming:A.query({query:S=>({url:`/v1/provisioning/mute-timings/${S.name}/export`,params:{download:S.download,format:S.format}}),providesTags:["provisioning"]}),routeResetPolicyTree:A.mutation({query:()=>({url:"/v1/provisioning/policies",method:"DELETE"}),invalidatesTags:["provisioning"]}),routeGetPolicyTree:A.query({query:()=>({url:"/v1/provisioning/policies"}),providesTags:["provisioning"]}),routePutPolicyTree:A.mutation({query:S=>({url:"/v1/provisioning/policies",method:"PUT",body:S.route,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),routeGetPolicyTreeExport:A.query({query:()=>({url:"/v1/provisioning/policies/export"}),providesTags:["provisioning"]}),routeGetTemplates:A.query({query:()=>({url:"/v1/provisioning/templates"}),providesTags:["provisioning"]}),routeDeleteTemplate:A.mutation({query:S=>({url:`/v1/provisioning/templates/${S.name}`,method:"DELETE",params:{version:S.version}}),invalidatesTags:["provisioning"]}),routeGetTemplate:A.query({query:S=>({url:`/v1/provisioning/templates/${S.name}`}),providesTags:["provisioning"]}),routePutTemplate:A.mutation({query:S=>({url:`/v1/provisioning/templates/${S.name}`,method:"PUT",body:S.notificationTemplateContent,headers:{"X-Disable-Provenance":S["X-Disable-Provenance"]}}),invalidatesTags:["provisioning"]}),listAllProvidersSettings:A.query({query:()=>({url:"/v1/sso-settings"}),providesTags:["sso_settings"]}),removeProviderSettings:A.mutation({query:S=>({url:`/v1/sso-settings/${S.key}`,method:"DELETE"}),invalidatesTags:["sso_settings"]}),getProviderSettings:A.query({query:S=>({url:`/v1/sso-settings/${S.key}`}),providesTags:["sso_settings"]}),updateProviderSettings:A.mutation({query:S=>({url:`/v1/sso-settings/${S.key}`,method:"PUT",body:S.body}),invalidatesTags:["sso_settings"]})}),overrideExisting:!1}),{useSearchResultMutation:fC,useListRolesQuery:pC,useLazyListRolesQuery:mC,useCreateRoleMutation:gC,useDeleteRoleMutation:vC,useGetRoleQuery:yC,useLazyGetRoleQuery:xC,useUpdateRoleMutation:EC,useGetRoleAssignmentsQuery:PC,useLazyGetRoleAssignmentsQuery:bC,useSetRoleAssignmentsMutation:DC,useGetAccessControlStatusQuery:CC,useLazyGetAccessControlStatusQuery:TC,useListTeamsRolesMutation:SC,useListTeamRolesQuery:MC,useLazyListTeamRolesQuery:OC,useAddTeamRoleMutation:RC,useSetTeamRolesMutation:IC,useRemoveTeamRoleMutation:AC,useListUsersRolesMutation:LC,useListUserRolesQuery:jC,useLazyListUserRolesQuery:BC,useAddUserRoleMutation:UC,useSetUserRolesMutation:NC,useRemoveUserRoleMutation:WC,useGetResourceDescriptionQuery:FC,useLazyGetResourceDescriptionQuery:KC,useGetResourcePermissionsQuery:wC,useLazyGetResourcePermissionsQuery:VC,useSetResourcePermissionsMutation:$C,useSetResourcePermissionsForBuiltInRoleMutation:zC,useSetResourcePermissionsForTeamMutation:GC,useSetResourcePermissionsForUserMutation:HC,useGetSyncStatusQuery:QC,useLazyGetSyncStatusQuery:_C,useReloadLdapCfgMutation:kC,useGetLdapStatusQuery:YC,useLazyGetLdapStatusQuery:JC,usePostSyncUserWithLdapMutation:XC,useGetUserFromLdapQuery:ZC,useLazyGetUserFromLdapQuery:qC,useAdminProvisioningReloadAccessControlMutation:eT,useAdminProvisioningReloadDashboardsMutation:tT,useAdminProvisioningReloadDatasourcesMutation:nT,useAdminProvisioningReloadPluginsMutation:aT,useAdminGetSettingsQuery:sT,useLazyAdminGetSettingsQuery:rT,useAdminGetStatsQuery:oT,useLazyAdminGetStatsQuery:iT,useAdminCreateUserMutation:lT,useAdminDeleteUserMutation:cT,useAdminGetUserAuthTokensQuery:dT,useLazyAdminGetUserAuthTokensQuery:uT,useAdminDisableUserMutation:hT,useAdminEnableUserMutation:fT,useAdminLogoutUserMutation:pT,useAdminUpdateUserPasswordMutation:mT,useAdminUpdateUserPermissionsMutation:gT,useGetUserQuotaQuery:vT,useLazyGetUserQuotaQuery:yT,useUpdateUserQuotaMutation:xT,useAdminRevokeUserAuthTokenMutation:ET,useGetAnnotationsQuery:PT,useLazyGetAnnotationsQuery:bT,usePostAnnotationMutation:DT,usePostGraphiteAnnotationMutation:CT,useMassDeleteAnnotationsMutation:TT,useGetAnnotationTagsQuery:ST,useLazyGetAnnotationTagsQuery:MT,useDeleteAnnotationByIdMutation:OT,useGetAnnotationByIdQuery:RT,useLazyGetAnnotationByIdQuery:IT,usePatchAnnotationMutation:AT,useUpdateAnnotationMutation:LT,useListDevicesQuery:jT,useLazyListDevicesQuery:BT,useSearchDevicesQuery:UT,useLazySearchDevicesQuery:NT,useGetSessionListQuery:WT,useLazyGetSessionListQuery:FT,useCreateSessionMutation:KT,useDeleteSessionMutation:wT,useGetSessionQuery:VT,useLazyGetSessionQuery:$T,useCreateSnapshotMutation:zT,useGetSnapshotQuery:GT,useLazyGetSnapshotQuery:HT,useCancelSnapshotMutation:QT,useUploadSnapshotMutation:_T,useGetShapshotListQuery:kT,useLazyGetShapshotListQuery:YT,useGetResourceDependenciesQuery:JT,useLazyGetResourceDependenciesQuery:XT,useGetCloudMigrationTokenQuery:ZT,useLazyGetCloudMigrationTokenQuery:qT,useCreateCloudMigrationTokenMutation:eS,useDeleteCloudMigrationTokenMutation:tS,useRouteConvertPrometheusCortexGetRulesQuery:nS,useLazyRouteConvertPrometheusCortexGetRulesQuery:aS,useRouteConvertPrometheusCortexPostRuleGroupsMutation:sS,useRouteConvertPrometheusCortexDeleteNamespaceMutation:rS,useRouteConvertPrometheusCortexGetNamespaceQuery:oS,useLazyRouteConvertPrometheusCortexGetNamespaceQuery:iS,useRouteConvertPrometheusCortexPostRuleGroupMutation:lS,useRouteConvertPrometheusCortexDeleteRuleGroupMutation:cS,useRouteConvertPrometheusCortexGetRuleGroupQuery:dS,useLazyRouteConvertPrometheusCortexGetRuleGroupQuery:uS,useRouteConvertPrometheusGetRulesQuery:hS,useLazyRouteConvertPrometheusGetRulesQuery:fS,useRouteConvertPrometheusPostRuleGroupsMutation:pS,useRouteConvertPrometheusDeleteNamespaceMutation:mS,useRouteConvertPrometheusGetNamespaceQuery:gS,useLazyRouteConvertPrometheusGetNamespaceQuery:vS,useRouteConvertPrometheusPostRuleGroupMutation:yS,useRouteConvertPrometheusDeleteRuleGroupMutation:xS,useRouteConvertPrometheusGetRuleGroupQuery:ES,useLazyRouteConvertPrometheusGetRuleGroupQuery:PS,useSearchDashboardSnapshotsQuery:bS,useLazySearchDashboardSnapshotsQuery:DS,useCalculateDashboardDiffMutation:CS,usePostDashboardMutation:TS,useGetHomeDashboardQuery:SS,useLazyGetHomeDashboardQuery:MS,useImportDashboardMutation:OS,useInterpolateDashboardMutation:RS,useListPublicDashboardsQuery:IS,useLazyListPublicDashboardsQuery:AS,useGetDashboardTagsQuery:LS,useLazyGetDashboardTagsQuery:jS,useGetPublicDashboardQuery:BS,useLazyGetPublicDashboardQuery:US,useCreatePublicDashboardMutation:NS,useDeletePublicDashboardMutation:WS,useUpdatePublicDashboardMutation:FS,useDeleteDashboardByUidMutation:KS,useGetDashboardByUidQuery:wS,useLazyGetDashboardByUidQuery:VS,useGetDashboardPermissionsListByUidQuery:$S,useLazyGetDashboardPermissionsListByUidQuery:zS,useUpdateDashboardPermissionsByUidMutation:GS,useRestoreDashboardVersionByUidMutation:HS,useGetDashboardVersionsByUidQuery:QS,useLazyGetDashboardVersionsByUidQuery:_S,useGetDashboardVersionByUidQuery:kS,useLazyGetDashboardVersionByUidQuery:YS,useGetDataSourcesQuery:JS,useLazyGetDataSourcesQuery:XS,useAddDataSourceMutation:ZS,useGetCorrelationsQuery:qS,useLazyGetCorrelationsQuery:eM,useGetDataSourceIdByNameQuery:tM,useLazyGetDataSourceIdByNameQuery:nM,useDeleteDataSourceByNameMutation:aM,useGetDataSourceByNameQuery:sM,useLazyGetDataSourceByNameQuery:rM,useDatasourceProxyDeleteByUiDcallsMutation:oM,useDatasourceProxyGetByUiDcallsQuery:iM,useLazyDatasourceProxyGetByUiDcallsQuery:lM,useDatasourceProxyPostByUiDcallsMutation:cM,useGetCorrelationsBySourceUidQuery:dM,useLazyGetCorrelationsBySourceUidQuery:uM,useCreateCorrelationMutation:hM,useGetCorrelationQuery:fM,useLazyGetCorrelationQuery:pM,useUpdateCorrelationMutation:mM,useDeleteDataSourceByUidMutation:gM,useGetDataSourceByUidQuery:vM,useLazyGetDataSourceByUidQuery:yM,useUpdateDataSourceByUidMutation:xM,useDeleteCorrelationMutation:EM,useCheckDatasourceHealthWithUidQuery:PM,useLazyCheckDatasourceHealthWithUidQuery:bM,useGetTeamLbacRulesApiQuery:DM,useLazyGetTeamLbacRulesApiQuery:CM,useUpdateTeamLbacRulesApiMutation:TM,useCallDatasourceResourceWithUidQuery:SM,useLazyCallDatasourceResourceWithUidQuery:MM,useGetDataSourceCacheConfigQuery:OM,useLazyGetDataSourceCacheConfigQuery:RM,useSetDataSourceCacheConfigMutation:IM,useCleanDataSourceCacheMutation:AM,useDisableDataSourceCacheMutation:LM,useEnableDataSourceCacheMutation:jM,useQueryMetricsWithExpressionsMutation:BM,useGetFoldersQuery:UM,useLazyGetFoldersQuery:NM,useCreateFolderMutation:WM,useDeleteFolderMutation:FM,useGetFolderByUidQuery:KM,useLazyGetFolderByUidQuery:wM,useUpdateFolderMutation:VM,useGetFolderDescendantCountsQuery:$M,useLazyGetFolderDescendantCountsQuery:zM,useMoveFolderMutation:GM,useGetFolderPermissionListQuery:HM,useLazyGetFolderPermissionListQuery:QM,useUpdateFolderPermissionsMutation:_M,useGetMappedGroupsQuery:kM,useLazyGetMappedGroupsQuery:YM,useDeleteGroupMappingsMutation:JM,useCreateGroupMappingsMutation:XM,useUpdateGroupMappingsMutation:ZM,useGetGroupRolesQuery:qM,useLazyGetGroupRolesQuery:eO,useGetHealthQuery:tO,useLazyGetHealthQuery:nO,useGetLibraryElementsQuery:aO,useLazyGetLibraryElementsQuery:sO,useCreateLibraryElementMutation:rO,useGetLibraryElementByNameQuery:oO,useLazyGetLibraryElementByNameQuery:iO,useDeleteLibraryElementByUidMutation:lO,useGetLibraryElementByUidQuery:cO,useLazyGetLibraryElementByUidQuery:dO,useUpdateLibraryElementMutation:uO,useGetLibraryElementConnectionsQuery:hO,useLazyGetLibraryElementConnectionsQuery:fO,useGetStatusQuery:pO,useLazyGetStatusQuery:mO,useRefreshLicenseStatsQuery:gO,useLazyRefreshLicenseStatsQuery:vO,useDeleteLicenseTokenMutation:yO,useGetLicenseTokenQuery:xO,useLazyGetLicenseTokenQuery:EO,usePostLicenseTokenMutation:PO,usePostRenewLicenseTokenMutation:bO,useGetSamlLogoutQuery:DO,useLazyGetSamlLogoutQuery:CO,useGetCurrentOrgQuery:TO,useLazyGetCurrentOrgQuery:SO,useUpdateCurrentOrgMutation:MO,useUpdateCurrentOrgAddressMutation:OO,useGetPendingOrgInvitesQuery:RO,useLazyGetPendingOrgInvitesQuery:IO,useAddOrgInviteMutation:AO,useRevokeInviteMutation:LO,useGetOrgPreferencesQuery:jO,useLazyGetOrgPreferencesQuery:BO,usePatchOrgPreferencesMutation:UO,useUpdateOrgPreferencesMutation:NO,useGetCurrentOrgQuotaQuery:WO,useLazyGetCurrentOrgQuotaQuery:FO,useGetOrgUsersForCurrentOrgQuery:KO,useLazyGetOrgUsersForCurrentOrgQuery:wO,useAddOrgUserToCurrentOrgMutation:VO,useGetOrgUsersForCurrentOrgLookupQuery:$O,useLazyGetOrgUsersForCurrentOrgLookupQuery:zO,useRemoveOrgUserForCurrentOrgMutation:GO,useUpdateOrgUserForCurrentOrgMutation:HO,useSearchOrgsQuery:QO,useLazySearchOrgsQuery:_O,useCreateOrgMutation:kO,useGetOrgByNameQuery:YO,useLazyGetOrgByNameQuery:JO,useDeleteOrgByIdMutation:XO,useGetOrgByIdQuery:ZO,useLazyGetOrgByIdQuery:qO,useUpdateOrgMutation:eR,useUpdateOrgAddressMutation:tR,useGetOrgQuotaQuery:nR,useLazyGetOrgQuotaQuery:aR,useUpdateOrgQuotaMutation:sR,useGetOrgUsersQuery:rR,useLazyGetOrgUsersQuery:oR,useAddOrgUserMutation:iR,useSearchOrgUsersQuery:lR,useLazySearchOrgUsersQuery:cR,useRemoveOrgUserMutation:dR,useUpdateOrgUserMutation:uR,useSearchPlaylistsQuery:hR,useLazySearchPlaylistsQuery:fR,useCreatePlaylistMutation:pR,useDeletePlaylistMutation:mR,useGetPlaylistQuery:gR,useLazyGetPlaylistQuery:vR,useUpdatePlaylistMutation:yR,useGetPlaylistItemsQuery:xR,useLazyGetPlaylistItemsQuery:ER,useViewPublicDashboardQuery:PR,useLazyViewPublicDashboardQuery:bR,useGetPublicAnnotationsQuery:DR,useLazyGetPublicAnnotationsQuery:CR,useQueryPublicDashboardMutation:TR,useSearchQueriesQuery:SR,useLazySearchQueriesQuery:MR,useCreateQueryMutation:OR,useUnstarQueryMutation:RR,useStarQueryMutation:IR,useDeleteQueryMutation:AR,usePatchQueryCommentMutation:LR,useListRecordingRulesQuery:jR,useLazyListRecordingRulesQuery:BR,useCreateRecordingRuleMutation:UR,useUpdateRecordingRuleMutation:NR,useTestCreateRecordingRuleMutation:WR,useDeleteRecordingRuleWriteTargetMutation:FR,useGetRecordingRuleWriteTargetQuery:KR,useLazyGetRecordingRuleWriteTargetQuery:wR,useCreateRecordingRuleWriteTargetMutation:VR,useDeleteRecordingRuleMutation:$R,useGetReportsQuery:zR,useLazyGetReportsQuery:GR,useCreateReportMutation:HR,useGetReportsByDashboardUidQuery:QR,useLazyGetReportsByDashboardUidQuery:_R,useSendReportMutation:kR,useGetSettingsImageQuery:YR,useLazyGetSettingsImageQuery:JR,useRenderReportCsVsQuery:XR,useLazyRenderReportCsVsQuery:ZR,useRenderReportPdFsQuery:qR,useLazyRenderReportPdFsQuery:eI,useGetReportSettingsQuery:tI,useLazyGetReportSettingsQuery:nI,useSaveReportSettingsMutation:aI,useSendTestEmailMutation:sI,usePostAcsMutation:rI,useGetMetadataQuery:oI,useLazyGetMetadataQuery:iI,useGetSloQuery:lI,useLazyGetSloQuery:cI,usePostSloMutation:dI,useSearchQuery:uI,useLazySearchQuery:hI,useListSortOptionsQuery:fI,useLazyListSortOptionsQuery:pI,useCreateServiceAccountMutation:mI,useSearchOrgServiceAccountsWithPagingQuery:gI,useLazySearchOrgServiceAccountsWithPagingQuery:vI,useDeleteServiceAccountMutation:yI,useRetrieveServiceAccountQuery:xI,useLazyRetrieveServiceAccountQuery:EI,useUpdateServiceAccountMutation:PI,useListTokensQuery:bI,useLazyListTokensQuery:DI,useCreateTokenMutation:CI,useDeleteTokenMutation:TI,useRetrieveJwksQuery:SI,useLazyRetrieveJwksQuery:MI,useGetSharingOptionsQuery:OI,useLazyGetSharingOptionsQuery:RI,useCreateDashboardSnapshotMutation:II,useDeleteDashboardSnapshotByDeleteKeyQuery:AI,useLazyDeleteDashboardSnapshotByDeleteKeyQuery:LI,useDeleteDashboardSnapshotMutation:jI,useGetDashboardSnapshotQuery:BI,useLazyGetDashboardSnapshotQuery:UI,useCreateTeamMutation:NI,useSearchTeamsQuery:WI,useLazySearchTeamsQuery:FI,useRemoveTeamGroupApiQueryMutation:KI,useGetTeamGroupsApiQuery:wI,useLazyGetTeamGroupsApiQuery:VI,useAddTeamGroupApiMutation:$I,useSearchTeamGroupsQuery:zI,useLazySearchTeamGroupsQuery:GI,useDeleteTeamByIdMutation:HI,useGetTeamByIdQuery:QI,useLazyGetTeamByIdQuery:_I,useUpdateTeamMutation:kI,useGetTeamMembersQuery:YI,useLazyGetTeamMembersQuery:JI,useAddTeamMemberMutation:XI,useSetTeamMembershipsMutation:ZI,useRemoveTeamMemberMutation:qI,useUpdateTeamMemberMutation:e1,useGetTeamPreferencesQuery:t1,useLazyGetTeamPreferencesQuery:n1,useUpdateTeamPreferencesMutation:a1,useGetSignedInUserQuery:s1,useLazyGetSignedInUserQuery:r1,useUpdateSignedInUserMutation:o1,useGetUserAuthTokensQuery:i1,useLazyGetUserAuthTokensQuery:l1,useUpdateUserEmailQuery:d1,useLazyUpdateUserEmailQuery:u1,useClearHelpFlagsQuery:h1,useLazyClearHelpFlagsQuery:f1,useSetHelpFlagMutation:p1,useGetSignedInUserOrgListQuery:m1,useLazyGetSignedInUserOrgListQuery:g1,useChangeUserPasswordMutation:v1,useGetUserPreferencesQuery:y1,useLazyGetUserPreferencesQuery:x1,usePatchUserPreferencesMutation:E1,useUpdateUserPreferencesMutation:P1,useGetUserQuotasQuery:b1,useLazyGetUserQuotasQuery:D1,useRevokeUserAuthTokenMutation:C1,useUnstarDashboardByUidMutation:T1,useStarDashboardByUidMutation:S1,useGetSignedInUserTeamListQuery:M1,useLazyGetSignedInUserTeamListQuery:O1,useUserSetUsingOrgMutation:R1,useSearchUsersQuery:I1,useLazySearchUsersQuery:A1,useGetUserByLoginOrEmailQuery:L1,useLazyGetUserByLoginOrEmailQuery:j1,useSearchUsersWithPagingQuery:B1,useLazySearchUsersWithPagingQuery:U1,useGetUserByIdQuery:N1,useLazyGetUserByIdQuery:W1,useUpdateUserMutation:F1,useGetUserOrgListQuery:K1,useLazyGetUserOrgListQuery:w1,useGetUserTeamsQuery:V1,useLazyGetUserTeamsQuery:$1,useRouteGetAlertRulesQuery:z1,useLazyRouteGetAlertRulesQuery:G1,useRoutePostAlertRuleMutation:H1,useRouteGetAlertRulesExportQuery:Q1,useLazyRouteGetAlertRulesExportQuery:_1,useRouteDeleteAlertRuleMutation:k1,useRouteGetAlertRuleQuery:Y1,useLazyRouteGetAlertRuleQuery:J1,useRoutePutAlertRuleMutation:X1,useRouteGetAlertRuleExportQuery:Z1,useLazyRouteGetAlertRuleExportQuery:q1,useRouteGetContactpointsQuery:eA,useLazyRouteGetContactpointsQuery:tA,useRoutePostContactpointsMutation:nA,useRouteGetContactpointsExportQuery:aA,useLazyRouteGetContactpointsExportQuery:sA,useRouteDeleteContactpointsMutation:rA,useRoutePutContactpointMutation:oA,useRouteDeleteAlertRuleGroupMutation:iA,useRouteGetAlertRuleGroupQuery:lA,useLazyRouteGetAlertRuleGroupQuery:cA,useRoutePutAlertRuleGroupMutation:dA,useRouteGetAlertRuleGroupExportQuery:uA,useLazyRouteGetAlertRuleGroupExportQuery:hA,useRouteGetMuteTimingsQuery:fA,useLazyRouteGetMuteTimingsQuery:pA,useRoutePostMuteTimingMutation:mA,useRouteExportMuteTimingsQuery:gA,useLazyRouteExportMuteTimingsQuery:vA,useRouteDeleteMuteTimingMutation:yA,useRouteGetMuteTimingQuery:xA,useLazyRouteGetMuteTimingQuery:EA,useRoutePutMuteTimingMutation:PA,useRouteExportMuteTimingQuery:bA,useLazyRouteExportMuteTimingQuery:DA,useRouteResetPolicyTreeMutation:CA,useRouteGetPolicyTreeQuery:TA,useLazyRouteGetPolicyTreeQuery:SA,useRoutePutPolicyTreeMutation:MA,useRouteGetPolicyTreeExportQuery:OA,useLazyRouteGetPolicyTreeExportQuery:RA,useRouteGetTemplatesQuery:IA,useLazyRouteGetTemplatesQuery:AA,useRouteDeleteTemplateMutation:LA,useRouteGetTemplateQuery:jA,useLazyRouteGetTemplateQuery:BA,useRoutePutTemplateMutation:UA,useListAllProvidersSettingsQuery:NA,useLazyListAllProvidersSettingsQuery:WA,useRemoveProviderSettingsMutation:FA,useGetProviderSettingsQuery:KA,useLazyGetProviderSettingsQuery:wA,useUpdateProviderSettingsMutation:VA}=Bc,mb=Bc.enhanceEndpoints({});var Xd=e(15203),Zd=e(62905);const gb={navBarTree:Gu.I_,navIndex:pd._h,appNotifications:vh.g5};var vb=e(52695),Gi=e(36200),Hi=e(11018);const yb=(0,Rd.combineReducers)({promRules:(0,Gi.Xw)("promRules",Hi.mB,({rulesSourceName:A})=>A).reducer,rulerRules:(0,Gi.Xw)("rulerRules",Hi.eB,({rulesSourceName:A})=>A).reducer,saveAMConfig:(0,Gi.J7)("saveAMConfig",Hi.RW).reducer,deleteAMConfig:(0,Gi.J7)("deleteAMConfig",Hi.nO).reducer,amAlertGroups:(0,Gi.Xw)("amAlertGroups",Hi.D3,A=>A).reducer,managedAlertStateHistory:(0,Gi.J7)("managedAlertStateHistory",Hi.JH).reducer});var xb=e(2954);const Eb={items:[],searchQuery:"",isLoading:!1},Pb={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function bb(A,S){const Z=xb.A.getStateDisplayModel(S),ce={...A,stateText:Z.text,stateIcon:Z.iconClass,stateClass:Z.stateClass,stateAge:(0,g.KQ)(A.newStateDate).fromNow(!0)};return ce.state!=="paused"&&(ce.executionError&&(ce.info="Execution Error: "+ce.executionError),ce.evalData&&ce.evalData.noData&&(ce.info="Query returned no data")),ce}const Cf=(0,Qr.Z0)({name:"alertRules",initialState:Eb,reducers:{loadAlertRules:A=>({...A,isLoading:!0}),loadedAlertRules:(A,S)=>{const ce=S.payload.map(he=>bb(he,he.state));return{...A,items:ce,isLoading:!1}},setSearchQuery:(A,S)=>({...A,searchQuery:S.payload})}}),Tf=(0,Qr.Z0)({name:"notificationChannel",initialState:Pb,reducers:{setNotificationChannels:(A,S)=>({...A,notificationChannelTypes:Mb(S.payload),notifiers:S.payload}),notificationChannelLoaded:(A,S)=>{const Z=S.payload,he=A.notifiers.find(ve=>ve.type===Z.type).options.filter(ve=>ve.secure);return he.length>0&&he.some(ve=>Z.settings[ve.propertyName]!=="")?Sb(A,S.payload,he):{...A,notificationChannel:Z}},resetSecureField:(A,S)=>({...A,notificationChannel:{...A.notificationChannel,secureFields:{...A.notificationChannel.secureFields,[S.payload]:!1}}})}}),{loadAlertRules:zA,loadedAlertRules:GA,setSearchQuery:HA}=Cf.actions,{setNotificationChannels:QA,notificationChannelLoaded:_A,resetSecureField:kA}=Tf.actions,Db=Cf.reducer,Cb=Tf.reducer,Tb={alertRules:Db,notificationChannel:Cb,unifiedAlerting:yb};function Sb(A,S,Z){const ce={},he={};return Z.forEach(ve=>{he[ve.propertyName]=S.settings[ve.propertyName],ce[ve.propertyName]=""}),{...A,notificationChannel:{...S,settings:{...S.settings,...ce},secureSettings:{...he}}}}function Mb(A){return A.map(S=>({value:S.type,label:S.name,...S,typeName:S.type})).sort((S,Z)=>S.name>Z.name?1:-1)}var Ob=e(44256),Rb=e(87186),Ib=e(42795),Ab=e(37918),Lb=e(18548),jb=e(35231),Bb=e(17621),Ub=e(38748),Nb=e(2559),Wb=e(74396),Fb=e(89224),Kb=e(54687),wb=e(69289),Vb=e(13640),$b=e(69807),zb=e(27104),Gb=e(1302),Hb=e(20018);const Qb={...gb,...Tb,...zb.Ay,...Bb.Ay,...Ab.Ay,...jb.Ay,...Lb.Ay,...Gb.Ay,...Vb.Ay,...wb.Ay,...Ub.Ay,...Wb.Ay,...Rb.Ay,...vb.Ay,...Nb.Ay,...Ib.Ay,...Fb.Ay,...Ga.Ay,...$b.Ay,...Ob.Ay,[Bc.reducerPath]:Bc.reducer,plugins:Kb.Ff,[wl.H.reducerPath]:wl.H.reducer,[Ud.n.reducerPath]:Ud.n.reducer,[Nd.reducerPath]:Nd.reducer,[Zd.Sm.reducerPath]:Zd.Sm.reducer,[Xd.cU.reducerPath]:Xd.cU.reducer,...hb},Sf={},YA=A=>{Object.assign(Sf,A)},_b=()=>{const A=(0,Rd.combineReducers)({...Qb,...Sf});return(S,Z)=>{if(Z.type!==Hb.N.type)return A(S,Z);const{cleanupAction:ce}=Z.payload;return ce(S),A(S,Z)}};function JA(A){addReducer(A)}const kb=(0,Qr.Nc)(),Mf=[];function XA(A){Mf.push(A)}function Yb(A){const S=(0,Qr.U1)({reducer:_b(),middleware:Z=>Z({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(kb.middleware,wl.H.middleware,Ud.n.middleware,Nd.middleware,Zd.Sm.middleware,Xd.cU.middleware,mb.middleware,...ub,...Mf),devTools:!1,preloadedState:{navIndex:(0,pd.s2)(),...A}});return(0,ZP.$k)(S.dispatch),(0,qa.k3)(S),S}const Of=e(39572),Uc=Of.keys().map(A=>Of(A));class Jb{async init(){try{if(await Yv(),window.parent.postMessage("GrafanaAppInit","*"),px(),qt.TP.user.isSignedIn)try{await se()}catch(Xe){console.error("Failed to initialize OpenFeature provider",Xe)}const S=le.Ay.featureToggles.localeFormatPreference?le.Ay.regionalFormat:qt.TP.user.language,Z=(0,f.JL)({language:qt.TP.user.language,ns:Dc.dK,module:_v},S);Z.then(async({language:Xe})=>((0,le._R)({language:Xe}),(0,f.fl)(Dc.VV,Xe??D.Nm,[ae._H]))),(0,C.u5)(Cc.IB),await ry(),(0,ko.jn)("frontend_app_init"),(0,g.xS)(le.Ay.regionalFormat),(0,g.$D)(qt.TP.user.weekStart),(0,Y.Y)(Vy.m),(0,X.l)(Fv),(0,P.N)(Nv),(0,J.e)(wy.a),(0,T.T)(M.Ny),(0,I.l)(new ty),(0,B.p)(Dy),(0,E.G)(()=>qt.TP.user.timezone),Ky(),(0,U.l)(qt.TP.user),(0,by.$m)(),(0,W.H8)(us.A),await Z,Xb(),Yb(),Zb(),Py(),x.D.setInit(Ph.H),x.G.setInit(Ph.u),m.h.setInit(At),nc.B.setInit(()=>[wP(),oP(),XP(),YE(),PP(),SP(),Xx(),VP()]),y.l.setInit(Qt.A),(0,Xv.f)(),(0,V.HC)(()=>new Dx),CE(new DE),(0,V.pC)(Sd.BN),(0,z.se)({importPanelPlugin:Wh.TV,getPanelPluginFromCache:Wh.PY}),b.I.initialize({config:window.grafanaBootData.settings,getTimeRangeForUrl:(0,Yo.jG)().timeRangeForUrl,getVariablesUrlParams:bP.z}),le.Ay.featureToggles.useSessionStorageForRedirection&&qb(),document.addEventListener("click",Zv);const ce=new $i.xq;ce.init(le.Ay.datasources,le.Ay.defaultDatasource),(0,R.h)(ce),Tx();const he=le.Ay.featureToggles.rendererDisableAppPluginsPreload&&qt.TP.user.authenticatedBy==="render";if(qt.TP.user.orgRole!==""&&!he){const Xe=(0,Cs.Xs)(),et=(0,Cs.mi)();Ed(et),await Ed(Xe)}(0,O.R)(ih),(0,N.q)(Jy),(0,F.A)(Qy),(0,G.R)(_y),(0,H.U)(Yy),(0,_.C)(Bh.m5),(0,ee.h)(Bh.zN);const ve=M.Ny.getSearchObject(),xe=new Vg,Ce=new yy(M.Ny,xe),je=new ay;je.start(),xe.setKioskModeFromUrl(ve.kiosk);try{(0,Sx.W1)()}catch(Xe){console.warn("Failed to clean up old expanded folders",Xe)}this.context={backend:Cc.IB,location:M.Ny,chrome:xe,keybindings:Ce,newAssetsChecker:je,config:le.Ay},(0,K._)(nr.ni),(0,w.$)(nr.iQ),(0,Q._)(Xl.k9),le.Ay.featureToggles.crashDetection&&Qv(),le.Ay.featureToggles.dashboardLevelTimeMacros&&(ae.Go.registerVariableMacro("__from",Ah,!0),ae.Go.registerVariableMacro("__to",Ah,!0)),(0,v.H)(document.getElementById("reactRoot")).render((0,u.createElement)(jv,{app:this})),await Jv()}catch(S){console.error("Failed to start Grafana",S),window.__grafana_load_failed()}finally{(0,ko.zw)("frontend_app_init")}}}function Xb(){Uc.length>0&&Uc[0].addExtensionReducers()}function Zb(){Uc.length>0&&Uc[0].init()}function qb(){const A=M.Ny.getSearch(),S="redirectTo";if(A.has("auth_token")){window.sessionStorage.removeItem(qt.OG);return}if(A.has(S)&&window.location.pathname!=="/"){const ve=A.get(S);window.sessionStorage.setItem(qt.OG,encodeURIComponent(ve)),A.delete(S),window.history.replaceState({},"",`${window.location.pathname}${A.size>0?`?${A}`:""}`);return}if(!qt.TP.user.isSignedIn)return;const Z=window.sessionStorage.getItem(qt.OG);if(!Z)return;window.sessionStorage.removeItem(qt.OG);let ce=decodeURIComponent(Z);if(ce.startsWith("/goto/")){const ve=b.I.assureBaseUrl(ce);window.location.replace(ve);return}const he=b.I.stripBaseFromUrl(ce);M.Ny.replace(he)}new Jb().init()},72489:(ne,j,e)=>{"use strict";e.d(j,{p:()=>o});var n=e(74848),a=e(22803),s=e(55386),d=e(63142);const o=({value:i,variant:c="secondary"})=>{const p=(0,d.of)(l,c);return(0,n.jsx)("span",{className:p.counter,children:(0,s.Hg)(i,0).text})},l=(i,c)=>({counter:(0,a.css)({label:"counter",marginLeft:i.spacing(1),borderRadius:i.spacing(3),backgroundColor:c==="primary"?i.colors.primary.main:i.colors.secondary.main,padding:i.spacing(.25,1),color:i.colors.text.secondary,fontWeight:i.typography.fontWeightMedium,fontSize:i.typography.size.sm})})},72598:(ne,j,e)=>{"use strict";e.d(j,{I9:()=>f,N_:()=>b,ZI:()=>v,aG:()=>m,fJ:()=>x,gD:()=>u,qt:()=>D,qy:()=>y,wS:()=>C});var n=e(96540),a=e(40996),s=e(16515),d=e(62717),o=e(79319),l=e(79609),i=e(92745),c=e(2863),p=e(12594),h=e(99305);const u=(P,T=!1)=>{let M=P.flatMap(I=>I.fields.map(B=>(0,s.Ct)(B,I,P)));if(T){let I=new Map;P.forEach(U=>U.fields.forEach(W=>{let V=I.get(W.name)??0;I.set(W.name,V+1)}));let B=[];I.forEach((U,W)=>{U>1&&B.push(W)}),M=[...new Set(B.concat(M))]}return M},r=P=>{const T=P.some(({fields:I})=>I.length>0),M=P.some(({fields:I})=>!I.length);return T&&M};function v(P,T=!1){return(0,n.useMemo)(()=>u(P,T),[P,T])}const g=()=>n.createElement(p.P,null,(0,i.t)("transformers.query-validation-message","One or more queries failed to return fields. This transformation can only reference fields from queries with a successful and visible result.")),E=300;function x(P,{withBaseFieldNames:T=!1}={}){function M({input:I,...B}){const[U,W]=(0,n.useState)(!1),V=v(I,T),z=r(I),R=V.length===0||z;(0,a.A)(()=>W(R),E,[R]);const O=n.createElement(P,{...B,input:I,fieldNames:V});return U?n.createElement(n.Fragment,null,n.createElement(g),O):O}return M}function m(P){const T=new Set;for(const M of P)for(const I of M.fields)if(I.labels)for(const B of Object.keys(I.labels))T.add(B);return T}const y=()=>({combine:(0,i.t)("transformers.utils.get-categories-labels.combine","Combine"),calculateNewFields:(0,i.t)("transformers.utils.get-categories-labels.calculate-new-fields","Calculate new fields"),createNewVisualization:(0,i.t)("transformers.utils.get-categories-labels.create-new-visualization","Create new visualization"),filter:(0,i.t)("transformers.utils.get-categories-labels.filter","Filter"),performSpatialOperations:(0,i.t)("transformers.utils.get-categories-labels.perform-spatial-operations","Perform spatial operations"),reformat:(0,i.t)("transformers.utils.get-categories-labels.reformat","Reformat"),reorderAndRename:(0,i.t)("transformers.utils.get-categories-labels.reorder-and-rename","Reorder and rename")}),b=P=>{if(typeof P=="number"||!Number.isNaN(Number(P)))return!0;const T=h.SY.test(P);return h.SY.lastIndex=0,!!T};function D(P){const T=[];P&&(T.push({label:(0,i.t)("transformers.get-timezone-options.label.browser","Browser"),value:"browser"}),T.push({label:(0,i.t)("transformers.get-timezone-options.label.utc","UTC"),value:"utc"}));const M=(0,d.P3)();for(const I of M)T.push({label:I,value:I});return T}function f(){return(0,c.w)().getVariables().map(P=>({value:P.name,label:P.label||P.name,origin:l.$0.Template}))}function C(){return[{label:(0,i.t)("transformers.utils.special-value-options.label.null-value","Null"),description:(0,i.t)("transformers.utils.special-value-options.description.null-value","Null value"),value:o.N.Null},{label:(0,i.t)("transformers.utils.special-value-options.label.boolean-true","True"),description:(0,i.t)("transformers.utils.special-value-options.description.boolean-true","Boolean true value"),value:o.N.True},{label:(0,i.t)("transformers.utils.special-value-options.label.boolean-false","False"),description:(0,i.t)("transformers.utils.special-value-options.description.boolean-false","Boolean false value"),value:o.N.False},{label:(0,i.t)("transformers.utils.special-value-options.label.number-value","Zero"),description:(0,i.t)("transformers.utils.special-value-options.description.number-value","Number 0 value"),value:o.N.Zero},{label:(0,i.t)("transformers.utils.special-value-options.label.empty-string","Empty"),description:(0,i.t)("transformers.utils.special-value-options.description.empty-string","Empty String"),value:o.N.Empty}]}},72636:(ne,j,e)=>{"use strict";e.d(j,{J:()=>o,f:()=>l});var n=e(74848),a=e(22803),s=e(63142),d=e(30703);const o=({children:i,description:c,className:p,category:h,...u})=>{const r=(0,s.of)(l),v=h?.map((g,E)=>(0,n.jsxs)("span",{className:r.categories,children:[(0,n.jsx)("span",{children:g}),(0,n.jsx)(d.I,{name:"angle-right",className:r.chevron})]},`${g}/${E}`));return(0,n.jsx)("div",{className:(0,a.cx)(r.label,p),children:(0,n.jsxs)("label",{...u,children:[(0,n.jsxs)("div",{className:r.labelContent,children:[v,i]}),c&&(0,n.jsx)("span",{className:r.description,children:c})]})})},l=i=>({label:(0,a.css)({label:"Label",fontSize:i.typography.size.sm,fontWeight:i.typography.fontWeightMedium,lineHeight:1.25,marginBottom:i.spacing(.5),color:i.colors.text.primary,maxWidth:"480px"}),labelContent:(0,a.css)({display:"flex",alignItems:"center"}),description:(0,a.css)({label:"Label-description",color:i.colors.text.secondary,fontSize:i.typography.size.sm,fontWeight:i.typography.fontWeightRegular,marginTop:i.spacing(.25),display:"block"}),categories:(0,a.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,a.css)({margin:i.spacing(0,.25)})})},72649:(ne,j,e)=>{"use strict";e.d(j,{y:()=>n});var n=(a=>(a.seconds="s",a.minutes="m",a.hours="h",a.days="d",a.weeks="w",a))(n||{})},72748:(ne,j,e)=>{"use strict";e.d(j,{$8:()=>i,X9:()=>o,f1:()=>p,ov:()=>l});var n=e(65307),a=e(2543),s=e.n(a),d=e(24610);const o=(0,n.VP)("muteTiming/add"),l=(0,n.VP)("muteTiming/update"),i=(0,n.VP)("muteTiming/delete"),c={alertmanager_config:{},template_files:{}},p=(0,n.vy)(c,h=>{h.addCase(o,(u,{payload:r})=>{const{interval:v}=r;u.alertmanager_config.time_intervals=(u.alertmanager_config.time_intervals??[]).concat(v)}).addCase(l,(u,{payload:r})=>{const{interval:v,originalName:g}=r,E=v.name!==g,x=u.alertmanager_config.time_intervals??[],m=u.alertmanager_config.mute_time_intervals??[],y=x.findIndex(({name:D})=>D===g);y!==-1&&(x[y]=v);const b=m.findIndex(({name:D})=>D===g);b!==-1&&(m[b]=v),E&&u.alertmanager_config.route&&(u.alertmanager_config.route=(0,d.$m)(v.name,g,u.alertmanager_config.route))}).addCase(i,(u,{payload:r})=>{const{name:v}=r,{alertmanager_config:g}=u,{time_intervals:E=[],mute_time_intervals:x=[]}=g;(0,a.remove)(E,m=>m.name===v),(0,a.remove)(x,m=>m.name===v),g.route=(0,d._n)(v,g.route??{})})})},72930:(ne,j,e)=>{"use strict";e.d(j,{u:()=>n});function n(a,s,d,o={}){return{propertyName:a,label:s,description:d,element:"input",inputType:"",required:!1,secure:!1,placeholder:"",validationRule:"",showWhen:{field:"",is:""},dependsOn:"",...o}}},73163:(ne,j,e)=>{"use strict";e.d(j,{AL:()=>f,Bs:()=>g,Xx:()=>b,ko:()=>x});var n=e(63704),a=e(60519),s=e(32899),d=e(85891),o=e(95004),l=e(68143),i=e(43173),c=e(73427),p=e(86967),h=e(92367),u=e(75421),r=e(96215),v=e(55142);const g=T=>(i.$.featureToggles.vizActionsAuth??!1)&&T.type===d.X2.Infinity,E=(T,M,I)=>(B,U,W)=>(M.variables&&I&&(B=B.replace(/\$\w+/g,V=>{const z=V.slice(1);return M.variables.some(R=>R.key===z)&&I[z]!=null?I[z]:V})),T(B,U,W)),x=(T,M,I,B,U,W,V)=>!U||U.length===0?[]:U.filter(R=>R.type===d.X2.Fetch||g(R)).map(R=>{const O=(0,a.vd)(T,M,I),N={...I,__dataContext:O},F=(H,K,w)=>B(H,{...N,...K},w);return W.valueRowIndex!==void 0&&!isNaN(W.valueRowIndex)?O.value.rowIndex=W.valueRowIndex:O.value.calculatedValue=W.calculatedValue,{title:B(R.title,N),type:R.type,confirmation:H=>E(F,R,H)(R.confirmation||`Are you sure you want to ${R.title}?`),onClick:(H,K,w)=>{V&&(0,v.n)(R.type,R.oneClick??!1,V);let Q={};g(R)?Q=P(R,E(F,R,w)):R.type===d.X2.Fetch&&(Q=y(R,E(F,R,w)));try{(0,l.AI)().fetch(Q).subscribe({error:k=>{c.lE.emit(s.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(k)},complete:()=>{c.lE.emit(s.r1.alertSuccess,["API call was successful"])}})}catch(k){c.lE.emit(s.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(k);return}},oneClick:R.oneClick??!1,style:{backgroundColor:R.style?.backgroundColor??i.$.theme2.colors.secondary.main},variables:R.variables}}).filter(R=>!!R),m=(T,M)=>{const I=T[T.type];if(!I)throw new Error("Action does not have the correct configuration");const B=new URL(D(M(I.url))),U=I.method===p.DO.GET?void 0:I.body?M(I.body):"{}",W=[],V=[];let z="application/json";return I.headers&&I.headers.forEach(([R,O])=>{const N=M(R),F=M(O);W.push([N,F]),N.toLowerCase()==="content-type"&&(z=F)}),I.queryParams&&I.queryParams.forEach(([R,O])=>{V.push([M(R),M(O)])}),{config:I,url:B,data:U,processedHeaders:W,processedQueryParams:V,contentType:z}},y=(T,M)=>{const{config:I,url:B,data:U,processedHeaders:W,processedQueryParams:V}=m(T,M),z={};return W.forEach(([O,N])=>{z[O]=N}),V.forEach(([O,N])=>{B.searchParams.append(O,N)}),z["X-Grafana-Action"]="1",{url:B.toString(),method:I.method,data:U,headers:z}},b=(T=[],M=[])=>({name:"Default field",type:o.PU.string,config:{links:T,actions:M},values:[]}),D=T=>{if(T.startsWith("/")){const I=n.sQ.sanitizeUrl(T);T=(0,h.z)(I,[])}return T},f="yesoreyeram-infinity-datasource";class C{buildRequest(M,I,B,U,W,V){const z=(0,r.S)(),R=`api/ds/query?ds_type=${f}&requestId=${z}`,O=(0,u.jG)().timeRange(),N=[];U.forEach(([H,K])=>{N.push({key:H,value:K})});const F=[];W.forEach(([H,K])=>{F.push({key:H,value:K})});const G={method:M.method,data:B,headers:N,params:F,body_type:"raw",body_content_type:V};return{url:R,method:p.DO.POST,data:{queries:[{refId:"A",datasource:{type:f,uid:M.datasourceUid},type:"json",source:"url",format:"as-is",url:I,url_options:G}],from:O.from.valueOf().toString(),to:O.to.valueOf().toString()}}}}const P=(T,M)=>{const{config:I,url:B,data:U,processedHeaders:W,processedQueryParams:V,contentType:z}=m(T,M),R=I;if(!R.datasourceUid)throw new Error("Datasource not configured for Infinity action");return new C().buildRequest(R,B,U,W,V,z)}},73304:(ne,j,e)=>{"use strict";e.d(j,{i:()=>G});var n=e(74848),a=e(22803),s=e(18828),d=e(43107),o=e(93225),l=e(96540),i=e(92745),c=e(68143),p=e(63142),h=e(45861),u=e(65642),r=e(4896),v=e(37386),g=e(40279),E=e(30868);function x({secondaryText:K="Drag and drop here or browse"}){const w=(0,p.of)(y);return(0,n.jsxs)("div",{className:w.iconWrapper,children:[(0,n.jsx)("small",{className:w.small,children:K}),(0,n.jsx)(h.$n,{type:"button",icon:"upload",children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.file-dropzone-custom-children.upload",children:"Upload"})})]})}const m=({mediaType:K,setFormData:w,setUpload:Q,error:k})=>{const te=(0,p.of)(y),[q,se]=(0,l.useState)(!1),[re,Y]=(0,l.useState)(""),X=()=>(0,n.jsx)(v.D,{label:(0,i.t)("dimensions.file-uploader.preview.label-preview","Preview"),children:(0,n.jsxs)("div",{className:te.iconPreview,children:[K===r.zu.Icon&&(0,n.jsx)(E.y,{src:re,className:te.img}),K===r.zu.Image&&(0,n.jsx)("img",{src:re,alt:"Preview of the uploaded file",className:te.img})]})}),J=ee=>{fetch(`/api/storage/delete/upload/${ee.file.name}`,{method:"DELETE"}).catch(ae=>console.error("cannot delete file",ae))},_=K==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return(0,n.jsx)(g.gH,{readAs:"readAsBinaryString",onFileRemove:J,options:{accept:_,multiple:!1,onDrop:ee=>{let ae=new FormData;ae.append("file",ee[0]),Y(URL.createObjectURL(ee[0])),se(!0),w(ae),Q(!0)}},children:k.message!==""&&q?(0,n.jsx)("p",{children:k.message}):q?(0,n.jsx)(X,{}):(0,n.jsx)(x,{})})};function y(K,w){return{container:(0,a.css)({display:"flex",flexDirection:"column",width:"100%"}),dropzone:(0,a.css)({display:"flex",flex:1,flexDirection:"column",alignItems:"center",padding:K.spacing(6),borderRadius:K.shape.radius.default,border:`2px dashed ${K.colors.border.medium}`,backgroundColor:w?K.colors.background.secondary:K.colors.background.primary,cursor:"pointer"}),iconWrapper:(0,a.css)({display:"flex",flexDirection:"column",alignItems:"center"}),acceptMargin:(0,a.css)({margin:K.spacing(2,0,1)}),small:(0,a.css)({color:K.colors.text.secondary,marginBottom:K.spacing(2)}),iconContainer:(0,a.css)({display:"flex",flexDirection:"column",width:"80%",alignItems:"center",alignSelf:"center"}),iconPreview:(0,a.css)({width:"238px",height:"198px",border:`1px solid ${K.colors.border.medium}`,display:"flex",alignItems:"center",justifyContent:"center"}),img:(0,a.css)({width:"147px",height:"147px",fill:K.colors.text.primary})}}var b=e(18857),D=e(12737),f=e(28998),C=e(70713),P=e(97222);const T=(0,l.memo)(function(w){const{columnIndex:Q,rowIndex:k,style:te,data:q}=w,{cards:se,columnCount:re,onChange:Y,selected:X}=q,J=Q+k*re,_=se[J],ee=(0,p.of)(I);return(0,n.jsx)("div",{style:te,children:_&&(0,n.jsxs)("div",{className:X===_.value?(0,a.cx)(ee.card,ee.selected):ee.card,onClick:()=>Y(_.value),onKeyDown:ae=>{ae.key==="Enter"&&Y(_.value)},role:"button",tabIndex:0,children:[_.imgUrl.endsWith(".svg")?(0,n.jsx)(E.y,{src:_.imgUrl,className:ee.img}):(0,n.jsx)("img",{src:_.imgUrl,alt:"",className:ee.img}),(0,n.jsx)("h6",{className:ee.text,children:_.label.slice(0,-4)})]},_.value)})},P.t7),M=K=>{const{onChange:w,cards:Q,value:k}=K,te=(0,p.of)(I);return(0,n.jsx)(C.Ay,{defaultWidth:680,children:({width:q,height:se})=>{const X=Math.floor(q/90),J=Math.ceil(Q.length/X);return(0,n.jsx)(P.yi,{width:q,height:se,columnCount:X,columnWidth:90,rowCount:J,rowHeight:90,itemData:{cards:Q,columnCount:X,onChange:w,selected:k},className:te.grid,children:T})}})},I=K=>({card:(0,a.css)({display:"inline-block",width:"90px",height:"90px",margin:"0.75rem",marginLeft:"15px",textAlign:"center",cursor:"pointer",position:"relative",backgroundColor:"transparent",border:"1px solid transparent",borderRadius:K.shape.radius.default,paddingTop:"6px",":hover":{borderColor:K.colors.action.hover,boxShadow:K.shadows.z2}}),selected:(0,a.css)({border:`2px solid ${K.colors.primary.main}`,":hover":{borderColor:K.colors.primary.main}}),img:(0,a.css)({width:"40px",height:"40px",objectFit:"cover",verticalAlign:"middle",fill:K.colors.text.primary}),text:(0,a.css)({color:K.colors.text.primary,whiteSpace:"nowrap",fontSize:"12px",textOverflow:"ellipsis",display:"block",overflow:"hidden"}),grid:(0,a.css)({border:`1px solid ${K.colors.border.medium}`})}),B=K=>K===r.zu.Icon?[r.Iu.Icon,r.Iu.IOT,r.Iu.Marker]:[r.Iu.BG],U=(K,w)=>K.find(Q=>w.startsWith(Q.value))??K[0],W=K=>{const{value:w,mediaType:Q,folderName:k,newValue:te,setNewValue:q,maxFiles:se}=K,re=(0,p.of)(V),Y=B(Q).map(ue=>({label:ue,value:ue})),[X,J]=(0,l.useState)(),[_,ee]=(0,l.useState)(U(Y,w?.length?w:k)),[ae,le]=(0,l.useState)([]),[L,ie]=(0,l.useState)([]),oe=ue=>{ue?(ue=ue.toLowerCase(),ie(ae.filter(ye=>ye.search.includes(ue)))):ie(ae)};return(0,l.useEffect)(()=>{const ue=_?.value;if(ue){const ye=Q===r.zu.Icon?fe=>fe.name.endsWith(".svg"):fe=>fe.name.endsWith(".png")||fe.name.endsWith(".gif");(0,f.tR)().get("-- Grafana --").then(fe=>{fe.listFiles(ue,se).subscribe({next:Ee=>{const Ae=[];Ee.forEach(Ge=>{if(ye(Ge)){const Fe=Ge.name.lastIndexOf(".");Ae.push({value:`${ue}/${Ge.name}`,label:Ge.name,search:(Fe?Ge.name.substring(0,Fe):Ge.name).toLowerCase(),imgUrl:`${window.__grafana_public_path__}build/${ue}/${Ge.name}`})}}),le(Ae),ie(Ae)}})})}},[Q,_,se]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.D,{children:(0,n.jsx)(b.l6,{options:Y,onChange:ee,value:_,menuShouldPortal:!1})}),(0,n.jsx)(v.D,{children:(0,n.jsx)(D.Z,{value:X??"",placeholder:(0,i.t)("dimensions.folder-picker-tab.placeholder-search","Search"),onChange:ue=>{oe(ue),J(ue)}})}),L&&(0,n.jsx)("div",{className:re.cardsWrapper,children:(0,n.jsx)(M,{cards:L,onChange:ue=>q(ue),value:te})})]})},V=K=>({cardsWrapper:(0,a.css)({height:"30vh",minHeight:"50px",marginTop:"5px",maxWidth:"680px"})});var z=e(63527),R=e(72636),O=e(20012);const N=K=>{const{newValue:w,setNewValue:Q,mediaType:k}=K,te=(0,p.of)(F),q=(0,O.D)(w);let se=w?.substring(w.lastIndexOf("/")+1,w.lastIndexOf("."));return se.length>20&&(se=se.substring(0,20)+"..."),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.D,{children:(0,n.jsx)(z.p,{onChange:re=>Q(re.currentTarget.value),value:w})}),(0,n.jsxs)("div",{className:te.iconContainer,children:[(0,n.jsx)(v.D,{label:(0,i.t)("dimensions.urlpicker-tab.label-preview","Preview"),children:(0,n.jsxs)("div",{className:te.iconPreview,children:[k===r.zu.Icon&&(0,n.jsx)(E.y,{src:q,className:te.img}),k===r.zu.Image&&w&&(0,n.jsx)("img",{src:q,alt:"Preview of the selected URL",className:te.img})]})}),(0,n.jsx)(R.J,{children:se})]})]})},F=K=>({iconContainer:(0,a.css)({display:"flex",flexDirection:"column",width:"80%",alignItems:"center",alignSelf:"center"}),iconPreview:(0,a.css)({width:"238px",height:"198px",border:`1px solid ${K.colors.border.medium}`,display:"flex",alignItems:"center",justifyContent:"center"}),img:(0,a.css)({width:"147px",height:"147px",fill:K.colors.text.primary})}),G=K=>{const{value:w,onChange:Q,mediaType:k,folderName:te,maxFiles:q,hidePopper:se}=K,re=(0,p.of)(H),Y=()=>{Q(w),se?.()},X=(0,l.useRef)(null),{dialogProps:J}=(0,s.s)({},X),{overlayProps:_}=(0,o.e)({onClose:Y,isDismissable:!0,isOpen:!0},X),ee=w&&w.includes("://"),[ae,le]=(0,l.useState)(w??""),[L,ie]=(0,l.useState)(ee?r.QC.URL:r.QC.Folder),[oe,ue]=(0,l.useState)(new FormData),[ye,fe]=(0,l.useState)(!1),[Ee,Ae]=(0,l.useState)({message:""}),Ge=Se=>`${re.resourcePickerPopoverTab} ${L===Se&&re.resourcePickerPopoverActiveTab}`,Fe=()=>(0,n.jsx)(W,{value:w,mediaType:k,folderName:te,newValue:ae,setNewValue:le,maxFiles:q}),Pe=()=>(0,n.jsx)(N,{newValue:ae,setNewValue:le,mediaType:k}),Ve=()=>(0,n.jsx)(m,{mediaType:k,setFormData:ue,setUpload:fe,newValue:ae,error:Ee}),me=()=>{switch(L){case r.QC.Folder:return Fe();case r.QC.URL:return Pe();case r.QC.Upload:return Ve();default:return Fe()}};return(0,n.jsx)(d.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("section",{ref:X,..._,...J,children:(0,n.jsxs)("div",{className:re.resourcePickerPopover,children:[(0,n.jsxs)("div",{className:re.resourcePickerPopoverTabs,children:[(0,n.jsx)("button",{className:Ge(r.QC.Folder),onClick:()=>ie(r.QC.Folder),children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.resource-picker-popover.folder",children:"Folder"})}),(0,n.jsx)("button",{className:Ge(r.QC.URL),onClick:()=>ie(r.QC.URL),children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.resource-picker-popover.url",children:"URL"})})]}),(0,n.jsxs)("div",{className:re.resourcePickerPopoverContent,children:[me(),(0,n.jsxs)("div",{className:re.buttonRow,children:[(0,n.jsx)(h.$n,{variant:"secondary",onClick:()=>Y(),fill:"outline",children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.resource-picker-popover.cancel",children:"Cancel"})}),(0,n.jsx)(h.$n,{variant:ae&&ae!==w?"primary":"secondary",onClick:()=>{ye?fetch("/api/storage/upload",{method:"POST",body:oe}).then(Se=>{if(Se.status>=400){Se.json().then(Qe=>Ae(Qe));return}else return Se.json()}).then(Se=>{(0,c.AI)().get(`api/storage/read/${Se.path}`).then(()=>le(`${u.$W.appUrl}api/storage/read/${Se.path}`)).then(()=>Q(`${u.$W.appUrl}api/storage/read/${Se.path}`)).then(()=>se?.())}).catch(Se=>console.error(Se)):(Q(ae),se?.())},children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.resource-picker-popover.select",children:"Select"})})]})]})]})})})},H=K=>({resourcePickerPopover:(0,a.css)({borderRadius:K.shape.radius.default,boxShadow:K.shadows.z3,background:K.colors.background.primary,border:`1px solid ${K.colors.border.weak}`}),resourcePickerPopoverTab:(0,a.css)({width:"50%",textAlign:"center",padding:K.spacing(1,0),background:K.colors.background.secondary,color:K.colors.text.secondary,fontSize:K.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}}),resourcePickerPopoverActiveTab:(0,a.css)({color:K.colors.text.primary,fontWeight:K.typography.fontWeightMedium,background:K.colors.background.primary}),resourcePickerPopoverContent:(0,a.css)({width:"315px",fontSize:K.typography.bodySmall.fontSize,minHeight:"184px",padding:K.spacing(1),display:"flex",flexDirection:"column"}),resourcePickerPopoverTabs:(0,a.css)({display:"flex",width:"100%",borderRadius:`${K.shape.radius.default} ${K.shape.radius.default} 0 0`}),buttonRow:(0,a.css)({display:"flex",justifyContent:"center",gap:K.spacing(2),padding:K.spacing(1)})})},73397:(ne,j,e)=>{"use strict";e.d(j,{R:()=>p});var n=e(74848),a=e(22803),s=e(96540),d=e(84140),o=e(30703),l=e(41654),i=e(48542),c=e(63142);const p=g=>{const{labelKey:E,value:x,icon:m,color:y,colorBy:b,size:D="md",onClick:f,...C}=g,P=u({color:y,colorBy:b,labelKey:E,value:x}),T=(0,c.of)(v,P,D),M=`${E}: ${x}`,I=!E,B=(0,s.useMemo)(()=>(0,n.jsxs)(l.B,{direction:"row",gap:0,alignItems:"stretch",children:[E&&(0,n.jsx)("div",{className:T.label,children:(0,n.jsxs)(l.B,{direction:"row",gap:.5,alignItems:"center",children:[m&&(0,n.jsx)(o.I,{name:m}),E&&(0,n.jsx)("span",{className:T.labelText,title:E.toString(),children:E??""})]})}),(0,n.jsx)("div",{className:(0,a.cx)(T.value,I&&T.valueWithoutKey),title:x?.toString(),children:x??"-"})]}),[E,T.label,T.labelText,T.value,T.valueWithoutKey,m,I,x]);return(0,n.jsx)("div",{className:T.wrapper,"aria-label":M,"data-testid":"label-value",...C,children:f&&(E||x)?(0,n.jsx)("button",{type:"button",className:T.clickable,onClick:()=>f?.([x??"",E??""]),children:B},`${E??""}${x??""}`):B})};function h(g){if(!g)return;const m=Array.from({length:6},(y,b)=>g+"-".repeat(b)).find(y=>{const b=(0,i.MC)(y).color;return d.A.isReadable(b,"#000",{level:"AA",size:"small"})||d.A.isReadable(b,"#fff",{level:"AA",size:"small"})})??g;return(0,i.MC)(m).color}function u({color:g,colorBy:E,labelKey:x,value:m}){if(g)return h(g);if(E==="key")return h(x);if(E==="value")return h(m);if(E==="both"&&x&&m)return h(x+m)}function r(g,E){return d.A.isReadable(g,"#000",{level:"AA",size:"small"})?"#000":d.A.isReadable(g,"#fff",{level:"AA",size:"small"})?"#fff":d.A.isReadable(g,E,{level:"AA",size:"small"})?(0,d.A)(E).toHexString():d.A.mostReadable(g,["#000","#fff",E],{includeFallbackColors:!0}).toHexString()}const v=(g,E,x)=>{const m=E??g.colors.secondary.main,y=g.isDark?(0,d.A)(m).lighten(5).toString():(0,d.A)(m).darken(5).toString(),b=g.isDark?(0,d.A)(m).darken(5).toString():(0,d.A)(m).lighten(5).toString(),D=E?r(m,g.colors.text.primary):g.colors.text.primary,f=E?r(b,g.colors.text.primary):g.colors.text.primary;let C=g.spacing(.33,1);switch(x){case"sm":C=g.spacing(.2,.6);break;case"xs":C=g.spacing(0,.5);break;default:break}return{wrapper:(0,a.css)({fontSize:g.typography.bodySmall.fontSize,borderRadius:g.shape.borderRadius(2)}),labelText:(0,a.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"300px"}),label:(0,a.css)({display:"flex",alignItems:"center",color:D,padding:C,background:m,border:`solid 1px ${y}`,borderTopLeftRadius:g.shape.borderRadius(2),borderBottomLeftRadius:g.shape.borderRadius(2)}),clickable:(0,a.css)({border:"none",background:"none",outline:"none",boxShadow:"none",padding:0,margin:0,"&:hover":{opacity:.8,cursor:"pointer"}}),value:(0,a.css)({color:f,padding:C,background:b,border:`solid 1px ${y}`,borderLeft:"none",borderTopRightRadius:g.shape.borderRadius(2),borderBottomRightRadius:g.shape.borderRadius(2),whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"300px"}),valueWithoutKey:(0,a.css)({borderTopLeftRadius:g.shape.borderRadius(2),borderBottomLeftRadius:g.shape.borderRadius(2),borderLeft:`solid 1px ${y}`})}}},73601:(ne,j,e)=>{"use strict";e.d(j,{k:()=>c,m:()=>p});var n=e(88483),a=e(739),s=e(22592),d=e(28105),o=e(22429),l=e(82612),i=e(9931);function c(r){return r?typeof r=="string"?r===i.K:"meta"in r&&r.meta.name===i.K||r.uid===i.K:!1}function p(r,v){return new n.c(g=>{const E=(0,o.UA)().getCurrent(),x=h(r.queries);if(!x){g.next(u("Missing panel reference ID"));return}let m=E?.getPanelById(x,!0);if(m instanceof l.a9||(m=new l.a9(m)),!m){g.next(u("Unknown Panel: "+x));return}const y=m.getQueryRunner(),b=y.getData({withTransforms:!!v?.withTransforms,withFieldConfig:!1}).subscribe({next:D=>{v?.topic===a.QR.Annotations&&(D={...D,series:D.annotations??[],annotations:void 0}),g.next(D)}});if(!m.isInView&&m.refreshWhenInView||E?.otherPanelInFullscreen(m)){const{datasource:D,targets:f}=m,C={...r,datasource:D,panelId:x,queries:f};m.refreshWhenInView=!1,y.run(C)}return()=>{b.unsubscribe()}})}function h(r){if(!(!r||!r.length))return r[0].panelId}function u(r){return{state:d.Gu.Error,series:[],request:{},error:{message:r},timeRange:(0,s.E2)()}}},73628:(ne,j,e)=>{"use strict";e.d(j,{J:()=>E});var n=e(74848),a=e(22803),s=e(89332),d=e(2543),o=e(96540),l=e(92745),i=e(63142),c=e(45861),p=e(22787),h=e(99887),u=e(30703),r=e(76319);function v({item:m,onEdit:y,onRemove:b,index:D,itemKey:f}){const C=(0,i.of)(g),{title:P="",oneClick:T=!1}=m,M=("type"in m?m[m.type]?.url:m.url)??"",I=P.trim()!=="",B=M.trim()!=="";return(0,n.jsx)(s.sx,{draggableId:f,index:D,children:U=>(0,o.createElement)("div",{className:(0,a.cx)(C.wrapper,C.dragRow),ref:U.innerRef,...U.draggableProps,key:D},(0,n.jsxs)("div",{className:C.linkDetails,children:[(0,n.jsx)("div",{className:(0,a.cx)(C.url,!I&&C.notConfigured),children:I?P:(0,l.t)("grafana-ui.data-links-inline-editor.title-not-provided","Title not provided")}),(0,n.jsx)("div",{className:(0,a.cx)(C.url,!B&&C.notConfigured),title:M,children:B?M:(0,l.t)("grafana-ui.data-links-inline-editor.url-not-provided","Data link url not provided")})]}),(0,n.jsxs)("div",{className:C.icons,children:[T&&(0,n.jsx)(h.E,{color:"blue",text:(0,l.t)("grafana-ui.data-links-inline-editor.one-click","One click"),tooltip:(0,l.t)("grafana-ui.data-links-inline-editor.one-click-enabled","One click enabled")}),(0,n.jsx)(r.K,{name:"pen",onClick:y,className:C.icon,tooltip:(0,l.t)("grafana-ui.data-links-inline-editor.tooltip-edit","Edit")}),(0,n.jsx)(r.K,{name:"trash-alt",onClick:b,className:C.icon,tooltip:(0,l.t)("grafana-ui.data-links-inline-editor.tooltip-remove","Remove")}),(0,n.jsx)("div",{className:C.dragIcon,...U.dragHandleProps,children:(0,n.jsx)(u.I,{name:"draggabledots",size:"lg"})})]}))},f)}const g=m=>({wrapper:(0,a.css)({display:"flex",flexGrow:1,alignItems:"center",justifyContent:"space-between",padding:"5px 0 5px 10px",borderRadius:m.shape.radius.default,background:m.colors.background.secondary,gap:8}),linkDetails:(0,a.css)({display:"flex",flexDirection:"column",flexGrow:1,maxWidth:"calc(100% - 100px)"}),errored:(0,a.css)({color:m.colors.error.text,fontStyle:"italic"}),notConfigured:(0,a.css)({fontStyle:"italic"}),title:(0,a.css)({color:m.colors.text.primary,fontSize:m.typography.size.sm,fontWeight:m.typography.fontWeightMedium}),url:(0,a.css)({color:m.colors.text.secondary,fontSize:m.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),dragRow:(0,a.css)({position:"relative",margin:"8px"}),icons:(0,a.css)({display:"flex",padding:6,alignItems:"center",gap:8}),dragIcon:(0,a.css)({cursor:"grab",color:m.colors.text.secondary,margin:m.spacing(0,.5)}),icon:(0,a.css)({color:m.colors.text.secondary})});function E({type:m,items:y,onChange:b,data:D,children:f}){const[C,P]=(0,o.useState)(null),[T,M]=(0,o.useState)(!1),[I,B]=(0,o.useState)([]);(0,o.useEffect)(()=>{B(y??[])},[y]);const U=(0,i.of)(x),W=C!==null,V=(G,H)=>{if(T){const w=H.title,Q=H.url??H.fetch?.url??"";if(w.trim()===""&&Q.trim()===""){M(!1),P(null);return}else P(null),M(!1)}H.oneClick===!0&&I.forEach(w=>{w.oneClick&&(w.oneClick=!1)});const K=(0,d.cloneDeep)(I);K[G]=H,b(K),P(null)},z=G=>{T&&M(!1),P(null)},R=()=>{let G=(0,d.cloneDeep)(I);P(G.length),M(!0)},O=G=>{const H=(0,d.cloneDeep)(I);H.splice(G,1),b(H)},N=G=>{if(y==null||G.destination==null)return;const H=(0,d.cloneDeep)(I),K=H[G.source.index];H.splice(G.source.index,1),H.splice(G.destination.index,0,K),B(H),b(H)},F=G=>{let H="";switch(m){case"link":H=G==="edit"?(0,l.t)("grafana-ui.data-links-inline-editor.edit-link","Edit link"):(0,l.t)("grafana-ui.data-links-inline-editor.add-link","Add link");break;case"action":H=G==="edit"?(0,l.t)("grafana-ui.action-editor.inline.edit-action","Edit action"):(0,l.t)("grafana-ui.action-editor.inline.add-action","Add action");break}return H};return(0,n.jsxs)("div",{className:U.container,children:[(0,n.jsx)(s.JY,{onDragEnd:N,children:(0,n.jsx)(s.gL,{droppableId:"sortable-links",direction:"vertical",children:G=>(0,n.jsxs)("div",{className:U.wrapper,ref:G.innerRef,...G.droppableProps,children:[I.map((H,K)=>{const w=`${H.title}/${K}`;return(0,n.jsx)(v,{index:K,item:H,onChange:V,onEdit:()=>P(K),onRemove:()=>O(K),data:D,itemKey:w},w)}),G.placeholder]})})}),W&&C!==null&&(0,n.jsx)(p.a,{title:F(T?"add":"edit"),isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{z(C)},children:f(I[C],C,V,z)}),(0,n.jsx)(c.$n,{size:"sm",icon:"plus",onClick:R,variant:"secondary",className:U.button,children:F("add")})]})}const x=m=>({container:(0,a.css)({position:"relative"}),wrapper:(0,a.css)({marginBottom:m.spacing(2),display:"flex",flexDirection:"column"}),button:(0,a.css)({marginLeft:m.spacing(1)})})},73659:(ne,j,e)=>{"use strict";e.d(j,{W:()=>d});var n=e(75505),a=e(68143),s=e(59553);function d({baseURL:o}){async function l(i){try{const c={...i.headers};i.method?.toUpperCase()==="PATCH"&&o?.startsWith("/apis/")&&!c["Content-Type"]&&(c["Content-Type"]="application/strategic-merge-patch+json");const{data:p,...h}=await(0,n.s)((0,a.AI)().fetch({...i,url:o+i.url,showErrorAlert:i.showErrorAlert??!1,data:i.body,headers:c}));return{data:p,meta:h}}catch(c){return i.manageError?i.manageError(c):(0,s.ss)(c)}}return l}},73745:(ne,j,e)=>{"use strict";e.d(j,{$:()=>n});const n="https://grafana.com/blog/news.xml"},73829:(ne,j,e)=>{"use strict";e.d(j,{M:()=>n});var n=(a=>(a[a.MaxSize=50]="MaxSize",a))(n||{})},73858:(ne,j,e)=>{"use strict";e.d(j,{p:()=>a});var n=e(74848);const a=({x:s,y:d,children:o})=>(0,n.jsx)("div",{style:{position:"absolute",top:`${d}px`,left:`${s}px`},children:o})},74048:(ne,j,e)=>{"use strict";e.d(j,{J:()=>o,W:()=>d});var n=e(2543),a=e.n(n),s=e(96540);function d(l,i=1,c){const[p,h]=(0,s.useState)(i),u=(0,s.useMemo)(()=>(0,n.chunk)(l,c),[l,c]),r=u.length,v=u[p-1]??[],g=(p-1)*c+1,E=(0,n.clamp)(p*c,l.length),x=(0,s.useCallback)(b=>{h((0,n.clamp)(b,1,u.length))},[h,u]),m=(0,s.useCallback)(()=>x(p+1),[p,x]),y=(0,s.useCallback)(()=>x(p-1),[p,x]);return(0,s.useEffect)(()=>h(1),[r]),{page:p,onPageChange:x,numberOfPages:r,pageItems:v,pageStart:g,pageEnd:E,nextPage:m,previousPage:y}}function o(l,i){const[c,p]=(0,s.useState)(1),h=l.length>i*c,u=l.slice(0,i*c),r=(0,s.useCallback)(()=>{p(v=>v+1)},[]);return{pageItems:u,pageIndex:c,loadMore:r,hasMore:h}}},74098:(ne,j,e)=>{"use strict";e.d(j,{D:()=>E});var n=e(74848),a=e(22803),s=e(96540),d=e(78685),o=e(51898),l=e(92745),i=e(30703),c=e(45967),p=e(72489),h=e(45861),u=e(63142),r=e(70958),v=e(42795);const g="showCategory",E=s.memo(({id:y,title:b,children:D,forceOpen:f,isOpenDefault:C=!0,renderTitle:P,className:T,itemsCount:M,isNested:I=!1,sandboxId:B,disabledText:U})=>{const[W,V]=(0,d.A)(m(y),{isExpanded:C}),z=f||(W?.isExpanded??C),[R,O]=(0,s.useState)(z),N=(0,s.useRef)(null),[F,G]=(0,r.s)(),H=F[g]===y;(0,s.useEffect)(()=>{(f||H)&&!R&&(O(!0),setTimeout(()=>{N.current?.scrollIntoView()},200))},[R,H,f]);const K=(0,s.useCallback)(()=>{G({[g]:R?void 0:y},!0),V({isExpanded:!R}),O(!R)},[G,R,y,V]);P||(P=function(se){return se||M===void 0||M===0?b:(0,n.jsxs)("span",{children:[b," ",(0,n.jsx)(p.p,{value:M})]})});const w=(0,u.of)(x),Q=(0,a.cx)({[w.box]:!0,[w.boxNestedExpanded]:I&&R},T),k=(0,a.cx)(w.header,{[w.headerExpanded]:R,[w.headerNested]:I}),te=(0,a.cx)(w.body,{[w.bodyNested]:I});return U?(0,n.jsx)("div",{className:Q,"data-plugin-sandbox":B,"data-testid":o.Tp.components.OptionsGroup.group(y),ref:N,children:(0,n.jsx)(c.m,{interactive:typeof U!="string",content:U,children:(0,n.jsxs)("div",{className:k,children:[(0,n.jsx)("h6",{id:`button-${y}`,className:(0,a.cx)(w.title,w.titleDisabled),children:P(R)}),(0,n.jsx)(i.I,{size:"sm",name:"ban",className:w.disabledIcon})]})})}):(0,n.jsxs)("div",{className:Q,"data-plugin-sandbox":B,"data-testid":o.Tp.components.OptionsGroup.group(y),ref:N,children:[(0,n.jsxs)("div",{className:k,onClick:K,children:[(0,n.jsx)("h6",{id:`button-${y}`,className:(0,a.cx)(w.title,R&&w.titleExpanded),children:P(R)}),(0,n.jsx)(h.$n,{"aria-label":R?(0,l.t)("dashboard.options-pane-category.aria-label-collapse","Collapse {{title}} category",{title:b}):(0,l.t)("dashboard.options-pane-category.aria-label-expand","Expand {{title}} category",{title:b}),"data-testid":o.Tp.components.OptionsGroup.toggle(y),type:"button",fill:"text",size:"md",variant:"secondary","aria-expanded":R,className:w.toggleButton,icon:R?"angle-up":"angle-down",onClick:K})]}),R&&(0,n.jsx)("div",{className:te,id:y,"aria-labelledby":`button-${y}`,children:D})]})});E.displayName="OptionsPaneCategory";const x=y=>({box:(0,a.css)({borderTop:`1px solid ${y.colors.border.weak}`}),boxNestedExpanded:(0,a.css)({marginBottom:y.spacing(2)}),title:(0,a.css)({flexGrow:1,overflow:"hidden",lineHeight:1.5,fontSize:"1rem",fontWeight:y.typography.fontWeightMedium,margin:0,color:y.colors.text.secondary}),titleExpanded:(0,a.css)({color:y.colors.text.primary}),header:(0,a.css)({display:"flex",alignItems:"center",padding:y.spacing(.5,1.5),color:y.colors.text.primary,fontWeight:y.typography.fontWeightMedium,cursor:"pointer","&:hover":{background:y.colors.emphasize(y.colors.background.primary,.03)}}),toggleButton:(0,a.css)({alignSelf:"baseline"}),headerExpanded:(0,a.css)({color:y.colors.text.primary}),headerNested:(0,a.css)({padding:y.spacing(.5,0,.5,0)}),body:(0,a.css)({padding:y.spacing(1,2,1,2)}),titleDisabled:(0,a.css)({color:y.colors.text.disabled,cursor:"not-allowed"}),disabledIcon:(0,a.css)({color:y.colors.text.disabled,margin:y.spacing(1,1,1,0)}),bodyNested:(0,a.css)({position:"relative",paddingRight:0,"&:before":{content:"''",position:"absolute",top:0,left:"1px",width:"1px",height:"100%",background:y.colors.border.weak}})}),m=y=>`${v.wi}.optionGroup[${y}]`},74101:(ne,j,e)=>{"use strict";e.d(j,{z:()=>s});var n=e(54148),a=e(36490);function s(){const d=(0,n.zy)();return[new URLSearchParams(d.search),(i,c)=>{a.Ny.partial(i,c)}]}},74194:(ne,j,e)=>{"use strict";e.d(j,{K:()=>s});var n=e(739);const a="12.3.0",s={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:n.T6.Auto}},74198:(ne,j,e)=>{"use strict";e.d(j,{jV:()=>_,HY:()=>Ke,MY:()=>ie,XX:()=>Ve,zi:()=>Ie,HW:()=>Le,bk:()=>Se,GH:()=>ae,tJ:()=>$e,Sj:()=>fe,Ux:()=>Fe,j1:()=>ee,O4:()=>Be,M2:()=>ze,Iy:()=>Re,o7:()=>Qe,IM:()=>Ee,Ok:()=>Ae,nR:()=>de,Yz:()=>ue});var n=e(2543),a=e(47078),s=e.n(a),d=e(84140),o=e(95004),l=e(16515),i=e(41119),c=e(17503),p=e(55386),h=e(46644),u=e(11576),r=e(739),v=e(8255),g=e(74848),E=e(22803),x=e(63142),m=e(31210);const y=ge=>{const{cellProps:pe,tableStyles:De,actions:Me}=ge,be=(0,x.of)(b);return(0,g.jsx)("div",{...pe,className:(0,E.cx)(De.cellContainerText,be.buttonsGap),children:Me&&Me.map((Oe,Ne)=>(0,g.jsx)(m.r,{action:Oe,variant:"secondary"},Ne))})},b=ge=>({buttonsGap:(0,E.css)({gap:6})});var D=e(96540),f=e(33553),C=e(79118),P=e(38919),T=e(98005),M=e(58738);const I={mode:f.O.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},B=ge=>{const{field:pe,innerWidth:De,tableStyles:Me,cell:be,cellProps:Oe,row:Ne}=ge,We=pe.display(be.value),qe=Se(pe);let st=(0,C.xg)(pe,!1);st.thresholds||(st={...st,thresholds:I});let rt=r.eX.Gradient,ot;qe.type===r.ob.Gauge&&(rt=qe.mode??r.eX.Gradient,ot=qe.valueDisplayMode!==void 0?qe.valueDisplayMode:r.$l.Text);const mt=()=>(0,n.isFunction)(pe.getLinks)?pe.getLinks({valueRowIndex:Ne.index}):[],pt=Ie(pe,We,be.row.index),ke=()=>(0,g.jsx)(T.xE,{width:De,height:Me.cellHeightInner,field:st,display:pe.display,text:{valueSize:14},value:We,orientation:P.wV.Horizontal,theme:Me.theme,alignmentFactors:pt,itemSpacing:1,lcdCellWidth:8,displayMode:rt,valueDisplayMode:ot}),[Ze,nt]=(0,D.useState)(),{shouldShowLink:ut,hasMultipleLinksOrActions:gt}=$e(mt()),ht=gt&&Ze!==void 0,tt=mt();return(0,g.jsx)("div",{...Oe,className:Me.cellContainer,style:{...Oe.style,cursor:gt?"context-menu":"auto"},onClick:({clientX:Ot,clientY:jt})=>{nt({clientX:Ot,clientY:jt})},children:ut?(0,M.h)(tt[0],ke()):ht?(0,g.jsx)(M.e,{links:tt,value:ke(),coords:Ze,onTooltipClose:()=>nt(void 0)}):ke()})};var U=e(86059);const W=ge=>{const{field:pe,row:De,cellProps:Me,tableStyles:be}=ge,Oe=(0,U.k)(pe,De);return(0,g.jsx)("div",{...Me,className:be.cellContainerText,children:Oe?.map((Ne,We)=>!Ne.href&&Ne.onClick==null?(0,g.jsx)("span",{className:be.cellLinkEmpty,children:Ne.title},We):(0,g.jsx)("span",{className:be.cellLink,onClick:Ne.onClick,children:(0,g.jsx)("a",{href:Ne.href,target:Ne.target,children:Ne.title})},We))})};var V=e(92745),z=e(76319),R=e(41654),O=e(36100);function N({field:ge,cell:pe,previewMode:De,showFilters:Me,onCellFilterAdded:be,setInspectCell:Oe}){const Ne=ee(ge)==="flex-end",We=!!ge.config.custom?.inspect,qe={size:"sm",tooltipPlacement:"top"},st=(0,D.useCallback)(ot=>{be&&be({key:ge.name,operator:O.mc,value:pe.value})},[pe,ge,be]),rt=(0,D.useCallback)(ot=>{be&&be({key:ge.name,operator:O.Zi,value:pe.value})},[pe,ge,be]);return(0,g.jsx)("div",{className:`cellActions${Ne?" cellActionsLeft":""}`,children:(0,g.jsxs)(R.B,{gap:.5,children:[We&&(0,g.jsx)(z.K,{name:"eye",tooltip:(0,V.t)("grafana-ui.table.cell-inspect","Inspect value"),onClick:()=>{Oe&&Oe({value:pe.value,mode:De})},...qe}),Me&&(0,g.jsx)(z.K,{name:"search-plus",onClick:st,tooltip:(0,V.t)("grafana-ui.table.cell-filter-on","Filter for value"),...qe}),Me&&(0,g.jsx)(z.K,{name:"search-minus",onClick:rt,tooltip:(0,V.t)("grafana-ui.table.cell-filter-out","Filter out value"),...qe})]})})}var F=e(64780);const G=ge=>{const{field:pe,cell:De,tableStyles:Me,row:be,cellProps:Oe,frame:Ne,rowStyled:We,rowExpanded:qe,textWrapped:st,height:rt}=ge,ot=!!pe.config.custom?.inspect,mt=pe.display(De.value),pt=ge.onCellFilterAdded&&pe.config.filterable,ke=pt&&De.value!==void 0||ot,Ze=Se(pe);let nt;const ut=140;if(Ze.type===r.ob.Custom){const ft=Ze.cellComponent;nt=(0,g.jsx)(ft,{field:pe,value:De.value,rowIndex:be.index,frame:Ne})}else D.isValidElement(De.value)?nt=De.value:nt=(0,p.cN)(mt);const gt=typeof nt=="string",ht=mt.text.length<=ut&&/\s/.test(mt.text),tt=K(Me,Ze,mt,ot,gt,ht,st,We,qe);if(gt){let ft=Oe.style?.justifyContent;ft==="flex-end"?Oe.style={...Oe.style,textAlign:"right"}:ft==="center"&&(Oe.style={...Oe.style,textAlign:"center"})}rt&&(Oe.style={...Oe.style,height:rt}),st&&(Oe.style={...Oe.style,textWrap:"wrap"});const{key:Ot,...jt}=Oe,wt=(0,U.k)(pe,be)||[],[Ht,hn]=(0,D.useState)(),{shouldShowLink:Dn,hasMultipleLinksOrActions:Bn}=$e(wt),xn=Bn&&Ht!==void 0;return(0,g.jsxs)("div",{...jt,className:tt,style:{...Oe.style,cursor:Bn?"context-menu":"auto"},onClick:de(hn),children:[Dn?(0,M.h)(wt[0],nt,H(Me,Ze)):xn?(0,g.jsx)(M.e,{links:wt,value:nt,coords:Ht,onTooltipClose:()=>hn(void 0)}):gt?`${nt}`:(0,g.jsx)("div",{className:Me.cellText,children:nt}),ke&&(0,g.jsx)(N,{...ge,previewMode:F.B.text,showFilters:pt})]},Ot)},H=(ge,pe)=>pe.type===r.ob.Auto?ge.cellLink:ge.cellLinkForColoredCell;function K(ge,pe,De,Me=!1,be=!1,Oe=!1,Ne=!1,We=!1,qe=!1){let st,rt,ot;const mt=Le(ge.theme,pe,De);return st=mt.textColor,rt=mt.bgColor,ot=mt.bgHoverColor,ge.buildCellContainerStyle(st,rt,ot,!Me,be,Oe,Ne,We,qe)}var w=e(64136),Q=e(27430);function k(ge){const{cell:pe,tableStyles:De,cellProps:Me}=ge;let be="";return pe.value instanceof Q.A?be=new w.A().writeGeometry(pe.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):pe.value!=null&&(be=`${pe.value}`),(0,g.jsx)("div",{...Me,className:De.cellContainer,children:(0,g.jsx)("div",{className:De.cellText,style:{fontFamily:"monospace"},children:be})})}const te=10,q=ge=>{const{field:pe,cell:De,tableStyles:Me,row:be,cellProps:Oe}=ge,Ne=Se(pe),{title:We,alt:qe}=Ne.type===r.ob.Image?Ne:{title:void 0,alt:void 0},st=pe.display(De.value),rt=(0,U.k)(pe,be)||[],[ot,mt]=(0,D.useState)(),{shouldShowLink:pt,hasMultipleLinksOrActions:ke}=$e(rt),Ze=ke&&ot!==void 0,nt=(0,g.jsx)("img",{style:{height:Me.cellHeight-te,width:"auto"},src:st.text,className:Me.imageCell,alt:qe,title:We});return(0,g.jsx)("div",{...Oe,className:Me.cellContainer,style:{...Oe.style,cursor:ke?"context-menu":"auto"},onClick:de(mt),children:pt?(0,M.h)(rt[0],nt):Ze?(0,g.jsx)(M.e,{links:rt,value:nt,coords:ot,onTooltipClose:()=>mt(void 0)}):nt})};function se(ge){const{cell:pe,tableStyles:De,cellProps:Me,field:be,row:Oe}=ge,Ne=!!be.config.custom?.inspect,We=(0,E.css)({cursor:"pointer",fontFamily:"monospace"});let qe=pe.value,st=qe;if((0,n.isString)(qe))try{qe=JSON.parse(qe)}catch{}else try{st=JSON.stringify(qe,null," ")}catch{st=void 0}const rt=(0,U.k)(be,Oe)||[],[ot,mt]=(0,D.useState)(),{shouldShowLink:pt,hasMultipleLinksOrActions:ke}=$e(rt),Ze=ke&&ot!==void 0;return(0,g.jsxs)("div",{...Me,className:Ne?De.cellContainerNoOverflow:De.cellContainer,children:[(0,g.jsx)("div",{className:(0,E.cx)(De.cellText,We),onClick:de(mt),children:pt?(0,M.h)(rt[0],st):Ze?(0,g.jsx)(M.e,{links:rt,value:st,coords:ot,onTooltipClose:()=>mt(void 0)}):(0,g.jsx)("div",{className:De.cellText,children:st})}),Ne&&(0,g.jsx)(N,{...ge,previewMode:F.B.code})]})}var re=e(93948),Y=e(74533),X=e(30703);function J({row:ge,tableStyles:pe}){return(0,g.jsx)("div",{className:pe.expanderCell,...ge.getToggleRowExpandedProps(),children:(0,g.jsx)(X.I,{"aria-label":ge.isExpanded?(0,V.t)("grafana-ui.row-expander.collapse","Collapse row"):(0,V.t)("grafana-ui.row-expander.expand","Expand row"),name:ge.isExpanded?"angle-down":"angle-right",size:"lg"})})}const _=50;function ee(ge){if(!ge)return"flex-start";if(ge.config.custom)switch(ge.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return ge.type===o.PU.number?"flex-end":"flex-start"}function ae(ge,pe,De,Me,be,Oe){const Ne=[];let We=0;Me&&(Ne.push({Header:()=>null,id:"expander",Cell:J,width:_,minWidth:_,filter:(st,rt,ot)=>[],justifyContent:"left",field:ge.fields[0],sortType:"basic"}),pe-=_);for(const[st,rt]of ge.fields.entries()){const ot=rt.config.custom||{};if(ot.hidden||ot.hideFrom?.viz||rt.type===o.PU.nestedFrames)continue;ot.width?pe-=ot.width:We++;const mt=ke=>{switch(ke){case o.PU.number:case o.PU.frame:return"number";case o.PU.time:return"basic";default:return"alphanumeric-insensitive"}},pt=le(ot.cellOptions?.type,rt);Ne.push({Cell:pt,id:st.toString(),field:rt,Header:ot.hideHeader?"":(0,l.Ct)(rt,ge),accessor:(ke,Ze)=>rt.values[Ze],sortType:mt(rt.type),width:ot.width,minWidth:ot.minWidth??De,filter:s()(L(rt)),justifyContent:ee(rt),Footer:(0,Y.d)(st,be,Oe)})}let qe=pe/We;for(let st=We;st>0;st--)for(const rt of Ne)!rt.width&&rt.minWidth>qe&&(rt.width=rt.minWidth,pe-=rt.width,We-=1,qe=pe/We);for(const st of Ne)st.width||(st.width=qe),st.minWidth=50;return Ne}function le(ge,pe){switch(ge){case r.ob.Custom:case r.ob.ColorText:case r.ob.ColorBackground:return G;case r.ob.Image:return q;case r.ob.Gauge:return B;case r.ob.Sparkline:return re.a;case r.ob.JSONView:return se;case r.ob.DataLinks:return W;case r.ob.Actions:return y;case r.ob.Pill:return G}if(pe.type===o.PU.geo)return k;if(pe.type===o.PU.frame){const De=pe.values[0];return(0,i.ci)(De)&&(0,c.aH)(De)?re.a:se}return pe.type===o.PU.other?se:G}function L(ge){return function(pe,De,Me){return pe.length===0||!Me||!ge?pe:pe.filter(be=>{if(!be.values.hasOwnProperty(De))return!1;const Oe=oe(be,ge);return Me.find(Ne=>Ne.value===Oe)!==void 0})}}function ie(ge,pe){if(!pe||ge.length===0)return{};const De={};for(let Me=0;Me<ge.length;Me++){const be=oe(ge[Me],pe);De[be||"(Blanks)"]=be}return De}function oe(ge,pe){if(!pe||!ge)return"";const De=pe.values[ge.index],Me=pe.display?pe.display(De):De;return pe.display?(0,p.cN)(Me):Me}function ue(ge){return Object.keys(ge).reduce((pe,De)=>pe.concat({value:ge[De],label:De}),[]).sort(ye)}function ye(ge,pe){return ge.label===void 0&&pe.label===void 0?0:ge.label===void 0&&pe.label!==void 0?-1:ge.label!==void 0&&pe.label===void 0?1:ge.label<pe.label?-1:ge.label>pe.label?1:0}function fe(ge,pe){return pe?ge.filter(De=>pe.some(Me=>Me.value===De.value)):[]}function Ee(ge,pe,De){return String(ge.values[De]).localeCompare(String(pe.values[De]),void 0,{sensitivity:"base"})}function Ae(ge,pe,De){const Me=Ge(ge.values[De]),be=Ge(pe.values[De]);return Me===be?0:Me>be?1:-1}function Ge(ge){return(0,i.LI)(ge)?ge.value??Number.NEGATIVE_INFINITY:ge==null||ge===""||isNaN(ge)?Number.NEGATIVE_INFINITY:typeof ge=="number"?ge:Number(ge)}function Fe(ge,pe,De,Me){return Ue(ge),ge.map((be,Oe)=>{if(be?.field?.type!==o.PU.number)return Oe===0&&De.reducer&&De.reducer.length>0?h.AS.get(De.reducer[0]).name:void 0;let Ne=(0,n.clone)(be.field);return Ne.values=pe[be.id],Ne.state=void 0,be.field=Ne,De.fields&&De.fields.length>0?De.fields.find(qe=>qe===be?.field?.name)?Pe(be.field,De.reducer,Me):void 0:Pe(be.field,De.reducer||[],Me)})}function Pe(ge,pe,De){const Me=pe[0];if(Me===void 0)return"";const be=ge.display??(0,u.J)({field:ge,theme:De}),Oe=(0,h.Nw)({field:ge,reducers:pe})[Me];return h.AS.get(Me).preservesUnits?(0,p.cN)(be(Oe)):(0,p.cN)({text:Oe})}function Ve(ge){const pe=[];for(const De in ge)for(const[Me,be]of Object.entries(ge[De].values))pe[Me]===void 0&&(pe[Me]=[]),pe[Me].push(be);return pe}const me={type:r.ob.Auto};function Se(ge){return ge.config.custom?.displayMode?Qe(ge.config.custom?.displayMode):ge.config.custom?.cellOptions?ge.config.custom.cellOptions:me}function Qe(ge){switch(ge){case"basic":case"gradient-gauge":case"lcd-gauge":let pe=r.eX.Basic;return ge==="gradient-gauge"?pe=r.eX.Gradient:ge==="lcd-gauge"&&(pe=r.eX.Lcd),{type:r.ob.Gauge,mode:pe};case"color-background":case"color-background-solid":let De=r.Wq.Basic;return ge==="color-background"&&(De=r.Wq.Gradient),{type:r.ob.ColorBackground,mode:De};default:return{type:ge}}}function Ue(ge){const pe=ge.findIndex((De,Me)=>De?.id!==String(Me));pe===-1||ge[pe]?.id==="expander"||(ge.splice(pe,0,{id:String(pe)}),Ue(ge))}function Ie(ge,pe,De){let Me=ge.state?.alignmentFactors;if(Me)return(0,p.cN)(Me).length<(0,p.cN)(pe).length&&(Me={...pe},ge.state.alignmentFactors=Me),Me;{Me={...pe};const be=Math.min(ge.values.length,De+1e3);for(let Oe=De+1;Oe<be;Oe++){const Ne=ge.display(ge.values[Oe]);(0,p.cN)(Me).length>(0,p.cN)(Ne).length&&(Me.text=pe.text)}return ge.state?ge.state.alignmentFactors=Me:ge.state={alignmentFactors:Me},Me}}function Re(ge,pe,De){return Math.abs(Math.floor(ge)-pe)<De}function Ke(ge){let pe=-Number.MAX_VALUE,De=Number.MAX_VALUE;if(ge.values.length<2)return 0;for(let Me=0;Me<ge.values.length;Me++){const be=ge.values[Me];be>pe&&(pe=be),be<De&&(De=be)}return(pe-De)/ge.values.length}function Le(ge,pe,De){const Me=ge.isDark?1:-.7;let be,Oe,Ne;if(pe.type===r.ob.ColorText)be=De.color;else if(pe.type===r.ob.ColorBackground){const We=pe.mode??r.Wq.Gradient;if(We===r.Wq.Basic)be=(0,v.mZ)(De.color,ge.isDark),Oe=(0,d.A)(De.color).toRgbString(),Ne=(0,d.A)(De.color).setAlpha(1).toRgbString();else if(We===r.Wq.Gradient){const qe=(0,d.A)(De.color).setAlpha(1).toRgbString(),st=(0,d.A)(De.color).darken(10*Me).spin(5);be=(0,v.mZ)(De.color,ge.isDark),Oe=`linear-gradient(120deg, ${st.toRgbString()}, ${De.color})`,Ne=`linear-gradient(120deg, ${st.setAlpha(1).toRgbString()}, ${qe})`}}return{textColor:be,bgColor:Oe,bgHoverColor:Ne}}function ze(ge,pe,De,Me,be,Oe=0){const Ne=Number(pe?.width??300),We=1.17,qe=42,st=Oe*2;if(De!==null&&typeof ge=="string"){const rt=ge.split(/\s/),ot=[];let mt="",pt=0,ke=0;for(let ut=0;ut<rt.length;ut++){const gt=rt[ut];let ht=De.measureText(mt+" "+gt).width;ht<Ne-st?(mt+=" "+gt,pt++):(ot.push({width:ht,line:mt}),mt=gt,pt=0)}for(let ut=0;ut<ot.length;ut++)if(ot[ut].width>Ne){let gt=Math.floor(ot[ut].width/Ne)-1;ke+=gt}let Ze=ot.length+ke,nt=38;return Ze>5?nt=Ze*Me*We:nt=Ze*Me+qe,nt+=st,{width:Ne,height:nt}}return{width:Ne,height:be}}function Be(ge,pe){let De;if(ge.defaults.custom?.cellOptions?.wrapText){const be=pe.fields.filter(Oe=>Oe.type===o.PU.string);if(be.length>=1&&be[0].values.length>0){const Oe=be[0].values.length;let Ne=0;if(Oe<=30)for(const We of be){const qe=We.values.find(st=>st!=null)?.length??0;qe>Ne&&(Ne=qe,De=We)}else for(const We of be){const qe=(0,n.sampleSize)(We.values,3),st=(qe[0]?.length+qe[1]?.length+qe[2]?.length)/3;st>Ne&&(Ne=st,De=We)}}}return De}const $e=(ge,pe)=>{const De=ge.length>1||!!pe?.length;return{shouldShowLink:ge.length===1&&!pe?.length,hasMultipleLinksOrActions:De}},Ye=ge=>ge.target===ge.currentTarget,de=ge=>pe=>{if(Ye(pe)){const{clientX:De,clientY:Me}=pe;ge({clientX:De,clientY:Me})}}},74232:(ne,j,e)=>{"use strict";e.d(j,{e:()=>n});function n(a){return"isDashboardLayoutManager"in a}},74261:(ne,j,e)=>{"use strict";e.d(j,{EO:()=>B,H1:()=>b,NX:()=>m,OA:()=>E,Rt:()=>g,Uh:()=>P,ZU:()=>C,cg:()=>I,d$:()=>x,dA:()=>y,ix:()=>D,p3:()=>f,rW:()=>h,rs:()=>T});var n=e(81160),a=e(8721),s=e(11576),d=e(69884),o=e(95004),l=e(39443),i=e(79243),c=e(64761),p=e(34455);const h=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],u=30,r=[],v=(U,W)=>U-W,g={bucketCount:{name:"Bucket count",description:"approx bucket count"},bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},E={id:c.F.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(U,W)=>V=>V.pipe((0,n.T)(z=>E.transformer(U,W)(z))),transformer:(U,W)=>V=>{if(!Array.isArray(V)||V.length===0)return V;let z,R;U.bucketSize&&(typeof U.bucketSize=="string"?z=parseFloat(U.bucketSize):z=U.bucketSize,isNaN(z)&&(z=void 0)),U.bucketOffset&&(typeof U.bucketOffset=="string"?R=parseFloat(U.bucketOffset):R=U.bucketOffset,isNaN(R)&&(R=void 0));const O={bucketSize:z,bucketOffset:R,combine:U.combine},N=f(V,O);return N==null?[]:[I(N)]}},x="xMin";function m(U){return U===x||U==="BucketMin"}const y="xMax";function b(U){return U===y||U==="BucketMax"}function D(U){if(U.meta?.type===l.m.HeatmapCells){let R=U.fields.find(te=>te.name==="yMin"),O=U.fields.find(te=>te.name==="yMax"),N=U.fields.find(te=>te.name==="count"),F=[...new Set(O.values)].sort((te,q)=>te-q),G=[...new Set(R.values)].sort((te,q)=>te-q),H=F[0]/G[0],K=[],w=[];for(let te=0;te<F.length;te++){let q=F[te],se=G[te];w.push(q),K.push(se);let re=F[te+1];if(re!=null)for(q=q*H,se=se*H;q<re*.999999;)w.push(q),K.push(se),q=q*H,se=se*H}let Q=new Map;w.forEach(te=>Q.set(te,0));for(let te=0;te<O.values.length;te++){let q=O.values[te];Q.set(q,Q.get(q)+N.values[te])}return{xMin:{...R,name:"xMin",values:K},xMax:{...O,name:"xMax",values:w},counts:[{...N,values:[...Q.values()]}]}}else if(U.meta?.type===l.m.HeatmapRows){let R=[],O=[],N=[],F="0";return U.fields.forEach(H=>{if(H.type===o.PU.number){let K=H.values.reduce((w,Q)=>w+Q,0);N.push(K),R.push(F),O.push(F=H.name)}}),N.push(0),R.push(F),O.push(F),{xMin:{...U.fields[1],name:"xMin",type:o.PU.string,values:R},xMax:{...U.fields[1],name:"xMax",type:o.PU.string,values:O},counts:[{...U.fields[1],name:"count",type:o.PU.number,values:N}]}}let W,V;const z=[];for(const R of U.fields)m(R.name)?W=R:b(R.name)?V=R:R.type===o.PU.number&&z.push(R);if(!V&&W&&W.values.length>1){let R=W.values,O=(0,i.h)(R[1]-R[0],6);V={...W,name:y,values:R.map(N=>N+O)}}if(!W&&V&&V?.values.length>1){let R=V.values,O=(0,i.h)(R[1]-R[0],6);W={...V,name:x,values:R.map(N=>N-O)}}if(W&&V&&z.length)return{xMin:W,xMax:V,counts:z}}function f(U,W,V){let z=W?.bucketSize,R=W?.bucketCount??u,O=W?.bucketOffset??0;if(U=U.map(te=>({...te,fields:te.fields.map(q=>{if(q.type===o.PU.number){const se=Number(q.config.noValue);Number.isNaN(se)?q={...q,values:q.values.filter(re=>re!=null)}:q=(0,p.A)(q,se)}return q})})),!z||z<0){let te=[];for(const J of U)for(const _ of J.fields)_.type===o.PU.number&&(te=te.concat(_.values));te.sort((J,_)=>J-_);let q=1/0;if(te.length===1)q=1;else for(let J=1;J<te.length;J++){let _=te[J]-te[J-1];_!==0&&(q=Math.min(q,_))}let se=te[0];const X=(te[te.length-1]-se)/R;for(let J=0;J<h.length;J++){let _=h[J];if(X<_&&_>=q){z=_;break}}}const N=te=>(0,i.h)(T(te-O,z)+O,9);let F=((""+z).match(/\.\d+$/)??["."])[0].length-1,G=[],H=[],K;for(const te of U)for(const q of te.fields)if(q.type===o.PU.number){let se=M(q.values,N,r,v);G.push(se);const re={...q,config:{...q.config,unit:q.config.unit==="short"?"short":void 0}};re.display=(0,s.J)({field:re,theme:V??(0,d.a)()}),H.push(re),!K&&q.config.unit&&(K=q.config)}if(!H.length)return null;let w=(0,a.fj)(G);for(let te=1;te<w.length;te++){let q=w[te];for(let se=0;se<q.length;se++)q[se]==null&&(q[se]=0)}const Q={name:x,values:w[0],type:o.PU.number,state:void 0,config:F===0?K??{}:{...K,decimals:F}},k={...Q,name:y,values:w[0].map(te=>te+z)};if(W?.combine){const te=new Array(w[0].length).fill(0);for(let q=1;q<w.length;q++)for(let se=0;se<te.length;se++)te[se]+=w[q][se];H=[{...H[0],name:"count",values:te,type:o.PU.number,state:{...H[0].state,displayName:"Count",multipleFrames:!1,origin:{frameIndex:0,fieldIndex:2}}}]}else H.forEach((te,q)=>{te.values=w[q+1]});return{xMin:Q,xMax:k,counts:H}}function C(U,W){return Math.round(U/W)*W}function P(U,W){return Math.ceil(U/W)*W}function T(U,W){return Math.floor(U/W)*W}function M(U,W,V,z){let R=new Map;for(let G=0;G<U.length;G++){let H=U[G];H!=null&&(H=W(H));let K=R.get(H);K?K.count++:R.set(H,{value:H,count:1})}V&&V.forEach(G=>R.delete(G));let O=[...R.values()];z&&O.sort((G,H)=>z(G.value,H.value));let N=Array(O.length),F=Array(O.length);for(let G=0;G<O.length;G++)N[G]=O[G].value,F[G]=O[G].count;return[N,F]}function I(U,W){if(!U.xMin.display){const V=(0,s.J)({field:U.xMin,theme:W??(0,d.a)()});U.xMin.display=V,U.xMax.display=V}return{length:U.xMin.values.length,meta:{type:l.m.Histogram},fields:[U.xMin,U.xMax,...U.counts],refId:`${c.F.histogram}`}}function B(U){if(U.length===1)return U[0];let W=(0,a.Fd)({frames:U.map(N=>({length:N.xMax.values.length,fields:[N.xMax,N.xMin,...N.counts]})),joinBy:N=>N.name==="xMax"}),V=null,z=null,R=[];return W.fields.forEach(N=>{if(N.name==="xMax")V=N;else if(N.name==="xMin")if(z==null)z=N;else for(let F=0;F<N.values.length;F++)z.values[F]??=N.values[F];else R.push({...N,values:N.values.map(F=>F??0)})}),{xMin:z,xMax:V,counts:R}}},74267:(ne,j,e)=>{"use strict";e.d(j,{$u:()=>H,A5:()=>q,Bc:()=>se,DX:()=>z,JI:()=>W,Jc:()=>R,Kg:()=>V,MV:()=>x,N6:()=>b,P3:()=>C,Pi:()=>P,T$:()=>M,TK:()=>g,VR:()=>I,Vk:()=>w,hG:()=>y,hU:()=>N,is:()=>re,kz:()=>r,ly:()=>E,mI:()=>U,nM:()=>G,nh:()=>f,nr:()=>m,pm:()=>B,xq:()=>k,yd:()=>K});var n=e(2543),a=e.n(n),s=e(80011),d=e(68143),o=e(62061),l=e(36490),i=e(65642),c=e(73427),p=e(81871),h=e(11257),u=e(52695);function r(Y){return async X=>{try{X((0,u.D1)(!1)),await X(v(Y)),await X(D(Y)),await X(T(Y)),i.Ay.ldapEnabled&&(0,o.a)("ldapsync")&&await X(B()),X((0,u.D1)(!0))}catch(J){if(console.error(J),(0,d.NF)(J)){const _={title:J.data.message,body:J.data.error};X((0,u.PV)(_))}}}}function v(Y){return async X=>{const J=await(0,d.AI)().get(`/api/users/${Y}`,(0,p.F)());X((0,u.G_)(J))}}function g(Y){return async X=>{await(0,d.AI)().put(`/api/users/${Y.uid}`,Y),X(r(Y.uid))}}function E(Y,X){return async J=>{const _={password:X};await(0,d.AI)().put(`/api/admin/users/${Y}/password`,_),J(r(Y))}}function x(Y){return async X=>{await(0,d.AI)().post(`/api/admin/users/${Y}/disable`),l.Ny.push("/admin/users")}}function m(Y){return async X=>{await(0,d.AI)().post(`/api/admin/users/${Y}/enable`),X(r(Y))}}function y(Y){return async X=>{await(0,d.AI)().delete(`/api/admin/users/${Y}`),l.Ny.push("/admin/users")}}function b(Y,X){return async J=>{const _={isGrafanaAdmin:X};await(0,d.AI)().put(`/api/admin/users/${Y}/permissions`,_),J(r(Y))}}function D(Y){return async X=>{const J=await(0,d.AI)().get(`/api/users/${Y}/orgs`);X((0,u.OF)(J))}}function f(Y,X,J){return async _=>{const ee={loginOrEmail:Y.login,role:J};await(0,d.AI)().post(`/api/orgs/${X}/users/`,ee),_(r(Y.uid))}}function C(Y,X,J){return async _=>{const ee={role:J};await(0,d.AI)().patch(`/api/orgs/${X}/users/${Y}`,ee),_(r(Y))}}function P(Y,X){return async J=>{await(0,d.AI)().delete(`/api/orgs/${X}/users/${Y}`),J(r(Y))}}function T(Y){return async X=>{if(!c.TP.hasPermission(h.w.UsersAuthTokenList))return;const J=await(0,d.AI)().get(`/api/admin/users/${Y}/auth-tokens`);J.reverse();const _=J.map(ee=>({id:ee.id,isActive:ee.isActive,seenAt:(0,s.fq)(ee.seenAt),createdAt:ee.createdAt,clientIp:ee.clientIp,browser:ee.browser,browserVersion:ee.browserVersion,authModule:ee.authModule,os:ee.os,osVersion:ee.osVersion,device:ee.device}));X((0,u.ag)(_))}}function M(Y,X){return async J=>{const _={authTokenId:Y};await(0,d.AI)().post(`/api/admin/users/${X}/revoke-auth-token`,_),J(T(X))}}function I(Y){return async X=>{await(0,d.AI)().post(`/api/admin/users/${Y}/logout`),X(T(Y))}}function B(){return async Y=>{const X=c.TP.hasPermission(h.w.LDAPStatusRead);if((0,o.a)("ldapsync")&&X){const J=await(0,d.AI)().get("/api/admin/ldap-sync-status");Y((0,u.OR)(J))}}}function U(Y,X){return async J=>{await(0,d.AI)().post(`/api/admin/ldap/sync/${Y}`),J(r(X))}}function W(){return async Y=>{if(c.TP.hasPermission(h.w.LDAPStatusRead))try{const X=await(0,d.AI)().get("/api/admin/ldap/status");Y((0,u.pH)(X))}catch(X){if((0,d.NF)(X)){X.isHandled=!0;const J={title:X.data.message,body:X.data.error};Y((0,u.V$)(J))}}}}function V(Y){return async X=>{try{const J=await(0,d.AI)().get(`/api/admin/ldap/${encodeURIComponent(Y)}`),{name:_,surname:ee,email:ae,login:le,isGrafanaAdmin:L,isDisabled:ie,roles:oe,teams:ue}=J,ye={info:{name:_,surname:ee,email:ae,login:le},permissions:{isGrafanaAdmin:L,isDisabled:ie},roles:oe,teams:ue};X((0,u.TW)(ye))}catch(J){if((0,d.NF)(J)){J.isHandled=!0;const _={title:J.data.message,body:J.data.error};X((0,u.Vv)()),X((0,u.Nf)(_))}}}}function z(){return Y=>{Y((0,u.zi)())}}function R(){return Y=>{Y((0,u.zi)()),Y((0,u.Vv)())}}const O=Y=>Y.map(X=>Array.isArray(X.value)?X.value.map(J=>`${X.name}=${J.value}`).join("&"):`${X.name}=${X.value}`).join("&");function N(){return async(Y,X)=>{try{const{perPage:J,page:_,query:ee,filters:ae,sort:le}=X().userListAdmin;let L=`/api/users/search?perpage=${J}&page=${_}&query=${ee}&${O(ae)}`;le&&(L+=`&sort=${le}`);const ie=await(0,d.AI)().get(L);Y((0,u.Mb)(ie))}catch(J){(0,u.g4)(),console.error(J)}}}const F=(0,n.debounce)(Y=>Y(N()),500);function G(Y){return async X=>{X((0,u.Cj)()),X((0,u.L5)(Y)),F(X)}}function H(Y){return async X=>{X((0,u.Cj)()),X((0,u.jX)(Y)),F(X)}}function K(Y){return async X=>{X((0,u.Cj)()),X((0,u.EC)(Y)),X(N())}}function w({sortBy:Y}){const X=Y.length?`${Y[0].id}-${Y[0].desc?"desc":"asc"}`:void 0;return async(J,_)=>{_().userListAdmin.sort!==X&&(J((0,u.Cj)()),J((0,u.$u)(X)),J(N()))}}const Q=Y=>Y.map(X=>Array.isArray(X.value)?X.value.map(J=>`${X.name}=${J.value}`).join("&"):`${X.name}=${X.value}`).join("&");function k(){return async(Y,X)=>{try{const{perPage:J,page:_,query:ee,filters:ae,sort:le}=X().userListAnonymousDevices;let L=`/api/anonymous/search?perpage=${J}&page=${_}&query=${ee}&${Q(ae)}`;le&&(L+=`&sort=${le}`);const ie=await(0,d.AI)().get(L);Y((0,u.o3)(ie))}catch(J){console.error(J)}}}const te=(0,n.debounce)(Y=>Y(k()),500);function q({sortBy:Y}){const X=Y.length?`${Y[0].id}-${Y[0].desc?"desc":"asc"}`:void 0;return async(J,_)=>{_().userListAnonymousDevices.sort!==X&&(J((0,u.kh)(X)),J(k()))}}function se(Y){return async X=>{X((0,u.xx)(Y)),te(X)}}function re(Y){return async X=>{X((0,u.iK)(Y)),X(k())}}},74268:(ne,j,e)=>{"use strict";e.d(j,{AK:()=>M,Cl:()=>G,D0:()=>Q,D_:()=>se,Ey:()=>W,FF:()=>u,Gn:()=>C,Hs:()=>w,IR:()=>f,KF:()=>g,Ke:()=>x,Ks:()=>k,O$:()=>_,P6:()=>H,Pq:()=>V,QA:()=>te,Rh:()=>I,Rk:()=>D,Sq:()=>y,Tc:()=>R,U6:()=>N,U7:()=>v,XW:()=>U,Yk:()=>T,Zc:()=>q,a5:()=>re,aL:()=>O,cg:()=>B,fH:()=>c,iF:()=>z,iH:()=>X,iW:()=>K,l$:()=>h,lC:()=>ae,le:()=>i,nf:()=>b,oY:()=>Y,pf:()=>J,t6:()=>F,vO:()=>P,vV:()=>p,xd:()=>r});var n=e(2543),a=e.n(n),s=e(43173),d=e(27489),o=e(25992),l=e(73427);const i={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError",grafanaRecording:"creating Grafana recording rule from scratch",loadedCentralAlertStateHistory:"loaded central alert state history",exportNewGrafanaRule:"exporting new Grafana rule",noAlertRuleVersionsFound:"no alert rule versions found"},{logInfo:c,logError:p,logMeasurement:h,logWarning:u}=(0,o.DW)("features.alerting",{module:"Alerting"});function r(le,L,ie={}){return async function(...oe){const ue=`${L}:start`;performance.mark(ue);const ye=await le(...oe),fe=performance.measure(L,ue);return h(L,{duration:fe.duration,loadTimesMs:fe.duration},ie),ye}}function v(le,L,ie){return async(...oe)=>{const ue=performance.now(),ye=await L(...oe),{namespacesCount:fe,groupsCount:Ee,rulesCount:Ae}=E(ye);return h(le,{loadTimeMs:performance.now()-ue,namespacesCount:fe,groupsCount:Ee,rulesCount:Ae},ie),ye}}function g(le){Object.entries(le).forEach(([L,ie])=>{const oe=ie.message??"unknown error",ue=String(ie.type)??"unknown",ye=new Error(oe);p(ye,{field:L,type:ue})})}function E(le){const L=le.length,ie=le.flatMap(ye=>ye.groups).length,oe=le.flatMap(ye=>ye.groups).flatMap(ye=>ye.rules).length;return{namespacesCount:L,groupsCount:ie,rulesCount:oe}}function x(le,L,ie){return async(...oe)=>{const ue=performance.now(),ye=await L(...oe),{namespacesCount:fe,groupsCount:Ee,rulesCount:Ae}=m(ye);return h(le,{namespacesCount:fe,groupsCount:Ee,rulesCount:Ae,loadTimeMs:performance.now()-ue},ie),ye}}function m(le){const L=Object.keys(le),ie=Object.values(le).flatMap(ue=>ue),oe=ie.flatMap(ue=>ue.rules);return{namespacesCount:L.length,groupsCount:ie.length,rulesCount:oe.length}}const y=async(le={grafana_version:s.$.buildInfo.version,org_id:l.TP.user.orgId,user_id:l.TP.user.id})=>{(0,d.rR)("grafana_alerting_navigation",le)},b=le=>{(0,d.rR)("grafana_alerting_rule_creation",le)},D=le=>{(0,d.rR)("grafana_alerting_rule_aborted",le)},f=le=>{(0,d.rR)("grafana_alerting_rule_form_error",le)},C=le=>{(0,d.rR)("grafana_alerting_grafana_rule_creation_new_success",le)},P=()=>{(0,d.rR)("grafana_alerting_grafana_rule_creation_new_aborted")},T=()=>{(0,d.rR)("grafana_alerting_grafana_rule_creation_new_error")},M=async le=>{const L={grafana_version:s.$.buildInfo.version,org_id:l.TP.user.orgId,user_id:l.TP.user.id};(0,d.rR)("grafana_alerting_insights",{...L,...le})},I=async le=>{(0,d.rR)("grafana_alerting_rule_versions_comparison_click",{...le})},B=async le=>{(0,d.rR)("grafana_alerting_rule_versions_restore_success",{...le})},U=async le=>{(0,d.rR)("grafana_alerting_rule_versions_restore_error",{...le})},W=async()=>{(0,d.rR)("grafana_alerting_deleted_rule_restore_success")},V=async()=>{(0,d.rR)("grafana_alerting_deleted_rule_restore_error")},z=async le=>{(0,d.rR)("grafana_alerting_import_to_gma_success",{...le})},R=async le=>{(0,d.rR)("grafana_alerting_import_to_gma_error",{...le})};function O(le){(0,d.rR)("grafana_alerting_rules_list_mode",{...le})}function N(){(0,d.rR)("grafana_alerting_contact_point_form_edit_input_with_template")}function F(){(0,d.rR)("grafana_alerting_contact_point_form_use_custom_input_in_template")}function G(){(0,d.rR)("grafana_alerting_contact_point_form_use_single_template_in_input")}function H(le){(0,d.rR)("grafana_alerting_central_alert_state_history_filter_by_clicking",le)}function K(){(0,d.rR)("grafana_alerting_central_alert_state_history_expand_row")}function w(le){(0,d.rR)("grafana_alerting_central_alert_state_history_max_events_reached",le)}function Q(){(0,d.rR)("grafana_alerting_folder_bulk_actions_delete_success")}function k(){(0,d.rR)("grafana_alerting_folder_bulk_actions_delete_fail")}function te(){(0,d.rR)("grafana_alerting_folder_bulk_actions_pause_success")}function q(){(0,d.rR)("grafana_alerting_folder_bulk_actions_unpause_success")}function se(){(0,d.rR)("grafana_alerting_folder_bulk_actions_pause_fail")}function re(){(0,d.rR)("grafana_alerting_folder_bulk_actions_unpause_fail")}function Y(){(0,d.rR)("grafana_alerting_filter_button_click")}function X(le){const L=le.filterVariant;if(le.filterMethod==="search-input"){const ie=ee(le.filter);(0,d.rR)("grafana_alerting_rules_filter",{...ie,filter_method:"search-input",filter_variant:L});return}(0,d.rR)("grafana_alerting_rules_filter",{filter:le.filter,filter_method:"filter-component",filter_variant:L})}function J(le,L){le!==""&&L===""&&(0,d.rR)("grafana_alerting_rules_filter_cleared",{filter_method:"search-input"})}function _(le,L){const ie=ee(le,{pluginsFilterEnabled:L});(0,d.rR)("grafana_alerting_rules_filter",{...ie,filter_method:"filter-component",filter_variant:"v2"})}function ee(le,L){const{pluginsFilterEnabled:ie=!0}=L??{};return(0,n.pickBy)(le,(oe,ue)=>!(oe==null||oe===""||Array.isArray(oe)&&oe.length===0||oe==="*"||ue==="plugins"&&!ie||ue==="plugins"&&oe==="show"))}function ae(){(0,d.rR)("grafana_alerting_rules_filter_cleared",{filter_method:"filter-component"})}},74276:(ne,j,e)=>{"use strict";e.d(j,{$O:()=>p,Dd:()=>h,i3:()=>d,kH:()=>i,pu:()=>c});var n=e(65307),a=e(88813),s=e(88681);const d={uid:null,status:a.x8.NotStarted,isDirty:!1},o=(0,n.Z0)({name:"templating/transaction",initialState:d,reducers:{variablesInitTransaction:(u,r)=>{u.uid=r.payload.uid,u.status=a.x8.Fetching},variablesCompleteTransaction:(u,r)=>{u.uid===r.payload.uid&&(u.status=a.x8.Completed)},variablesClearTransaction:(u,r)=>{u.uid=null,u.status=a.x8.NotStarted,u.isDirty=!1}},extraReducers:u=>u.addMatcher(l,(r,v)=>{r.status===a.x8.Completed&&(r.isDirty=!0)})});function l(u){return s.Hr.match(u)||s.QV.match(u)||s.QP.match(u)||s.hj.match(u)||s.ut.match(u)||s.l_.match(u)}const{variablesInitTransaction:i,variablesClearTransaction:c,variablesCompleteTransaction:p}=o.actions,h=o.reducer},74396:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>c,Bz:()=>l,bK:()=>o,n:()=>d});var n=e(65307);const a={organization:{},userOrgs:[]},s=(0,n.Z0)({name:"organization",initialState:a,reducers:{organizationLoaded:(p,h)=>({...p,organization:h.payload}),setOrganizationName:(p,h)=>({...p,organization:{...p.organization,name:h.payload}}),userOrganizationsLoaded:(p,h)=>({...p,userOrgs:h.payload})}}),{setOrganizationName:d,organizationLoaded:o,userOrganizationsLoaded:l}=s.actions,c={organization:s.reducer}},74440:(ne,j,e)=>{"use strict";e.d(j,{o:()=>s,y:()=>a});var n=e(99885);function a(d){return d==null?"":d.label??d.value.toString()}function s(d,o,l){return(0,n.X)(o,l).map(c=>d[c])}},74451:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({children:l})=>{const i=(0,s.of)(o);return(0,n.jsx)("div",{className:i.container,children:l})},o=l=>({container:(0,a.css)({borderLeft:`3px solid ${l.colors.info.main}`,backgroundColor:`${l.colors.background.secondary}`,padding:l.spacing(2),minWidth:"350px",borderRadius:l.shape.radius.default,marginBottom:l.spacing(4)})})},74475:(ne,j,e)=>{"use strict";e.d(j,{M:()=>h});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(96540),l=e(63142),i=e(35484),c=e(30703),p=e(68079);const h=({label:r,isOpen:v,onToggle:g,className:E,contentClassName:x,children:m,labelId:y,loading:b=!1,headerDataTestId:D,contentDataTestId:f,unmountContentWhenClosed:C=!0})=>{const[P,T]=(0,o.useState)(v),M=(0,l.of)(u),I=v!==void 0&&g!==void 0,B=I?v:P,U=R=>{R.target instanceof HTMLElement&&R.target.tagName==="A"||(R.preventDefault(),R.stopPropagation(),g?.(!v),I||T(!P))},{current:W}=(0,o.useRef)((0,s.uniqueId)()),V=y??`collapse-label-${W}`,z=(0,n.jsx)("div",{id:`collapse-content-${W}`,className:(0,a.cx)(M.content,x,{[M.contentHidden]:!C&&!B}),"data-testid":f,children:m});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{onClick:U,className:(0,a.cx)(M.header,E),children:[(0,n.jsx)("button",{type:"button",id:`collapse-button-${W}`,className:M.button,onClick:U,"aria-expanded":B&&!b,"aria-controls":`collapse-content-${W}`,"aria-labelledby":V,children:b?(0,n.jsx)(p.y,{className:M.spinner}):(0,n.jsx)(c.I,{name:B?"angle-down":"angle-right",className:M.icon})}),(0,n.jsx)("div",{className:M.label,id:`collapse-label-${W}`,"data-testid":D,children:r})]}),C?B&&z:z]})},u=r=>({header:(0,a.css)({display:"flex",alignItems:"center",cursor:"pointer",boxSizing:"border-box",position:"relative",justifyContent:"flex-start",fontSize:r.typography.size.lg,padding:`${r.spacing(.5)} 0`,"&:focus-within":(0,i.getFocusStyles)(r)}),button:(0,a.css)({all:"unset",marginRight:r.spacing(1),"&:focus-visible":{outline:"none",outlineOffset:"unset",[r.transitions.handleMotion("no-preference","reduce")]:{transition:"none"},boxShadow:"none"}}),icon:(0,a.css)({color:r.colors.text.secondary}),content:(0,a.css)({padding:`${r.spacing(2)} 0`}),contentHidden:(0,a.css)({display:"none"}),spinner:(0,a.css)({display:"flex",alignItems:"center",width:r.spacing(2)}),label:(0,a.css)({display:"flex",flex:"1 1 auto",fontWeight:r.typography.fontWeightMedium,color:r.colors.text.maxContrast})})},74529:(ne,j,e)=>{"use strict";e.d(j,{E9:()=>i,Q7:()=>l,Ri:()=>c,V3:()=>v,WT:()=>p,dU:()=>o,di:()=>u,pp:()=>r,vd:()=>h});var n=e(66907),a=e(60365),s=e(47402);const d={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function o(E,x=!0){if((0,s.d)(E.start,E.end))return"";const m=(0,a.F)(E);return l(m,x)}function l(E,x){return Object.entries(E).reduce((m,[y,b])=>b&&b!==0&&!(y==="seconds"&&!x&&m)?m+`${m!==""?" ":""}${b}${d[y][0]}`:m,"")}function i(E){return E.split(" ").reduce((x,m)=>{const y=m.match(/(\d+)(.+)/),b=y?.[1],D=y?.[2];if(!(b&&D))return x;const f=Object.entries(d).find(([P,T])=>T?.includes(y[2])),C=parseInt(b,10);return f?{...x,[f[0]]:C}:x},{})}function c(E,x){return(0,n.W)(E,x)}function p(E){const x=new Date;return c(x,E).getTime()-x.getTime()}function h(E){return!isNaN(Date.parse(E))}function u(E){for(const x of E.trim().split(" ")){const m=x.match(/(\d+)(.+)/);if(m===null||m.length!==3||!Object.entries(d).find(([b,D])=>D?.includes(m[2]))?.[0])return!1}return!0}function r(E){return g(E,["h","m","s","ms","us","\xB5s","ns"])}function v(E){return g(E,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function g(E,x){for(const m of E.trim().split(" ")){const y=m.match(/([0-9]*[.]?[0-9]+)(.+)/);if(y===null||y.length!==3||!x.includes(y[2]))return!1}return!0}},74533:(ne,j,e)=>{"use strict";e.d(j,{u:()=>c,d:()=>h});var n=e(74848),a=e(96540),s=e(46644),d=e(51898),o=e(22803);const l=u=>{const r=(0,o.css)({width:"100%",listStyle:"none"}),v=(0,o.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return u.value&&!Array.isArray(u.value)?(0,n.jsx)("span",{children:u.value}):u.value&&Array.isArray(u.value)&&u.value.length>0?(0,n.jsx)("ul",{className:r,children:u.value.map((g,E)=>{const x=Object.keys(g)[0];return(0,n.jsxs)("li",{className:v,children:[(0,n.jsx)("span",{children:x}),(0,n.jsx)("span",{children:g[x]})]},E)})}):i},i=()=>(0,n.jsx)("span",{children:"\xA0"});function c(u){const{totalColumnsWidth:r,footerGroups:v,isPaginationVisible:g,tableStyles:E}=u,x=d.Tp.components.Panels.Visualization.Table;return(0,n.jsx)("div",{style:{position:g?"relative":"absolute",width:r?`${r}px`:"100%",bottom:"0px"},children:v.map(m=>{const{key:y,...b}=m.getFooterGroupProps();return(0,a.createElement)("div",{className:E.tfoot,...b,key:y,"data-testid":x.footer},m.headers.map(D=>p(D,E)))})})}function p(u,r){const{key:v,...g}=u.getHeaderProps();return g?(g.style=g.style??{},g.style.position="absolute",g.style.justifyContent=u.justifyContent,(0,n.jsx)("div",{className:r.headerCell,...g,children:u.render("Footer")},v)):null}function h(u,r,v){if(r===void 0)return i;if(v){if(r[u]===void 0)return i;const g=s.AS.get(s.gy.count).name;return l({value:[{[g]:String(r[u])}]})}return l({value:r[u]})}},74618:(ne,j,e)=>{"use strict";e.d(j,{$:()=>v});var n=e(74848),a=e(96540),s=e(33239),d=e(92745),o=e(75234),l=e(90811),i=e(5857),c=e(51158),p=e(73427),h=e(15130),u=e(75421),r=e(87745);class v extends a.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=E=>{(0,u.jG)().setAutoRefresh(E),this.forceUpdate()},this.onRefresh=()=>((0,u.jG)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{p.lE.publish(new r.Io({direction:r.xL.Left}))},this.onMoveForward=()=>{p.lE.publish(new r.Io({direction:r.xL.Right}))},this.onChangeTimePicker=E=>{const{dashboard:x}=this.props,m=x.timepicker,y=m.nowDelay&&E.raw.to==="now",b=s.isMathString(E.raw.from)?E.raw.from:E.from,D=s.isMathString(E.raw.to)?E.raw.to:E.to,f={from:b,to:y?"now-"+m.nowDelay:D};(0,u.jG)().setTime(f)},this.onChangeTimeZone=E=>{this.props.dashboard.timezone=E,this.props.onChangeTimeZone(E),this.onRefresh()},this.onChangeFiscalYearStartMonth=E=>{this.props.dashboard.fiscalYearStartMonth=E,this.onRefresh()},this.onZoom=()=>{this.props.onToolbarZoomClick&&this.props.onToolbarZoomClick(),p.lE.publish(new r.U0({scale:2}))},this.onRefreshClick=()=>{this.props.onToolbarRefreshClick&&this.props.onToolbarRefreshClick(),this.onRefresh()}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(o.sR,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:E,isOnCanvas:x}=this.props,{quick_ranges:m,refresh_intervals:y}=E.timepicker,b=(0,u.jG)().getValidIntervals(y||l.cb),D=(0,u.jG)().timeRange(),f=E.getTimezone(),C=E.fiscalYearStartMonth,P=E.panelInEdit?.isEditing,T=E.weekStart;let M;return E.refresh===h.SM&&(M=(0,u.jG)().getAutoRefreshInteval().interval),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.mR,{value:D,onChange:this.onChangeTimePicker,timeZone:f,fiscalYearStartMonth:C,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:x,onToolbarTimePickerClick:this.props.onToolbarTimePickerClick,weekStart:(0,i.rE)(T)?T:void 0,quickRanges:m}),(0,n.jsx)(l.cC,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefreshClick,value:E.refresh,intervals:b,isOnCanvas:x,tooltip:(0,d.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:P,showAutoInterval:!0,text:M})]})}}},74746:(ne,j,e)=>{"use strict";e.d(j,{Ck:()=>L,Dk:()=>q,Dm:()=>k,Dx:()=>w,EK:()=>B,Ei:()=>F,Hw:()=>H,K7:()=>ue,M1:()=>z,PO:()=>le,R:()=>se,Tj:()=>U,Vu:()=>ie,XM:()=>I,a8:()=>Y,dO:()=>_,e3:()=>te,kA:()=>X,oR:()=>N,oT:()=>Q,qR:()=>G,s:()=>oe,s2:()=>W,tX:()=>re,zy:()=>O});var n=e(4213),a=e.n(n),s=e(2543),d=e.n(s),o=e(75505),l=e(81160),i=e(739),c=e(10279),p=e(18700),h=e(41119),u=e(16515),r=e(92138),v=e(5556),g=e(78012),E=e(2197),x=e(25229),m=e(80011),y=e(22592),b=e(67770),D=e(95004),f=e(92745),C=e(65642),P=e(67155),T=e(7542),M=e(62215);function I(fe){if(!fe)return b.$b.unknown;let Ee=b.$b.unknown,Ae;for(const[Ge,Fe]of Object.entries(b.$b)){const Ve=new RegExp(`\\b${Ge}\\b`,"i").exec(fe);Ve&&(Ae===void 0||Ve.index<Ae)&&(Ee=Fe,Ae=Ve.index)}return Ee}function B(fe){const Ee=b.$b[fe.toString().toLowerCase()];if(Ee)return Ee;if(typeof fe=="string"){const Ae=parseInt(fe,10);if(fe.length===Ae.toString().length)return b.s5[fe]||b.$b.unknown}else if(typeof fe=="number")return b.s5[fe]||b.$b.unknown;return b.$b.unknown}function U(fe,Ee){const Ae=fe.filter(Pe=>Pe.labels[Ee]!==void 0),Ge=Ae.length,Fe=(0,s.countBy)(Ae,Pe=>Pe.labels[Ee]);return V(Fe,Ge)}function W(fe){const Ee=fe.filter(Ge=>Ge!=null),Ae=(0,s.countBy)(Ee);return V(Ae,Ee.length)}const V=(fe,Ee)=>(0,s.chain)(fe).map((Ae,Ge)=>({count:Ae,value:Ge,proportion:Ae/Ee})).sortBy("count").reverse().value(),z=(fe,Ee)=>fe.timeEpochMs<Ee.timeEpochMs?-1:fe.timeEpochMs>Ee.timeEpochMs?1:fe.timeEpochNs<Ee.timeEpochNs?-1:fe.timeEpochNs>Ee.timeEpochNs?1:0,R=(fe,Ee)=>fe.timeEpochMs>Ee.timeEpochMs?-1:fe.timeEpochMs<Ee.timeEpochMs?1:fe.timeEpochNs>Ee.timeEpochNs?-1:fe.timeEpochNs<Ee.timeEpochNs?1:0,O=(fe,Ee)=>{const Ae=fe?N(fe.rows,Ee):[];return fe?{...fe,rows:Ae}:{hasUniqueLabels:!1,rows:Ae}},N=(fe,Ee)=>Ee===i.uH.Ascending?fe.sort(z):fe.sort(R),F=fe=>fe.labels.__error__,G=fe=>{if(fe.labels.__adaptive_logs_sampled__)return fe.labels.__adaptive_logs_sampled__==="true"?"Logs like this one have been dropped by Adaptive Logs":`${fe.labels.__adaptive_logs_sampled__}% of logs like this one have been dropped by Adaptive Logs`},H=fe=>fe.replace(/\\r\\n|\\n|\\t|\\r/g,Ee=>Ee.slice(1)==="t"?"	":`
`);function K(fe,Ee=[]){return fe.map(Ae=>{let Fe={...(0,M.FE)(Ae).reduce((Pe,Ve)=>{const me=Ve.keys[0];return Pe[me]=Ve.values[0],Pe},{}),...Ae.labels};return Ee.length&&(Fe=Object.fromEntries(Object.entries(Fe).filter(([Pe])=>Ee.includes(Pe)))),{line:Ae.entry,timestamp:Ae.timeEpochNs,date:(0,x.KQ)(Ae.timeEpochMs).toISOString(),fields:Fe}})}const w=fe=>{let Ee={from:1/0,to:-1/0};return fe.forEach(Ae=>{const Ge=Ae.meta?.custom||{};Ge.absoluteRange?.from&&Ge.absoluteRange?.to&&(Ee={from:Math.min(Ee.from,Ge.absoluteRange.from),to:Math.max(Ee.to,Ge.absoluteRange.to)})}),Ee},Q=fe=>{if(fe.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const Ee={},Ae={};let Ge=-1/0;const Fe={};let Pe=[];return fe.forEach(Ve=>{const{level:me,valueField:Se,timeField:Qe}=re(Ve,fe);if(!(!Qe||!Se)){Fe[me]={meta:Ve.meta,valueFieldConfig:Se?.config??{},timeFieldConfig:Qe?.config??{}};for(let Ue=0;Ue<Ve.length;Ue++){const Ie=Qe.values[Ue],Re=Se.values[Ue];Ee[me]??={},Ee[me][Ie]=(Ee[me][Ie]||0)+Re,Ae[Ie]=(Ae[Ie]||0)+Re,Ae[Ie]>Ge&&(Ge=Ae[Ie])}}}),Object.keys(Ee).forEach(Ve=>{const me=new p.k,{meta:Se,timeFieldConfig:Qe,valueFieldConfig:Ue}=Fe[Ve];me.name=Ve,me.meta=Se,me.addField({name:"Time",type:D.PU.time,config:Qe}),me.addField({name:"Value",type:D.PU.number,config:Ue}),Object.entries(Ee[Ve]).sort((Ie,Re)=>Number(Ie[0])-Number(Re[0])).forEach(([Ie,Re])=>{me.add({Time:Number(Ie),Value:Re})}),Pe.push(me)}),{dataFrames:Pe,maximum:Ge}},k=fe=>{const Ee=fe[0]?.meta?.custom;return Ee&&Ee.datasourceName?{name:Ee.datasourceName}:null},te=fe=>fe[0]?.meta?.custom?.logsVolumeType===b.Aj.Limited,q=async(fe,Ee)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(fe);{const Ae=document.createElement("textarea");Ee.current?.appendChild(Ae),Ae.value=fe,Ae.focus(),Ae.select(),document.execCommand("copy"),Ae.remove()}};async function se(fe,Ee,Ae,Ge){if(Ae&&(fe.nativeEvent.ctrlKey||fe.nativeEvent.metaKey||fe.nativeEvent.shiftKey)){const Fe=window.open("about:blank"),Pe=await Ae(Ee,void 0,!1);if(Pe&&Fe){const Ve=v.kM.renderUrl(r.I.assureBaseUrl(`${(0,C.zj)().appSubUrl}explore`),{left:JSON.stringify({datasource:Pe.datasource,queries:[Pe],range:(0,y.E2)()})});Fe.location=Ve;return}Fe?.close()}Ge(Ee)}function re(fe,Ee){const Ae=new c.L(fe),Ge=Ae.getFirstFieldOfType(D.PU.time),Fe=Ae.getFirstFieldOfType(D.PU.number);return Ge||console.error("Time field missing in data frame"),Fe||console.error("Value field missing in data frame"),{level:Fe?(0,u.Ct)(Fe,fe,Ee):"logs",valueField:Fe,timeField:Ge}}function Y(fe){return fe instanceof Element}function X(){const fe=new Set;return function(Ee){let Ae=`${Ee.dataFrame.refId}_${Ee.rowId?Ee.rowId:`${Ee.timeEpochNs}_${Ee.entry}`}`;return fe.has(Ae)?!0:(fe.add(Ae),!1)}}function J(fe,Ee,Ae){const Ge=Ee.fields.find(Fe=>Fe.name==="labelTypes")?.values[Ae];return Ge?Ge[fe]??null:null}function _(fe,Ee,Ae=!1){if(!Ee.datasourceType)return null;const Ge=J(fe,Ee.dataFrame,Ee.rowIndex);return Ge?ee(Ge,Ee.datasourceType,Ae):null}function ee(fe,Ee,Ae){switch(Ee){case"loki":switch(fe){case"I":return(0,f.t)("logs.fields.type.loki.indexed-label","Indexed label",{count:Ae?2:1});case"S":return(0,f.t)("logs.fields.type.loki.structured-metadata","Structured metadata",{count:Ae?2:1});case"P":return(0,f.t)("logs.fields.type.loki.parsedl-label","Parsed field",{count:Ae?2:1});default:return null}default:return null}}const ae="logs.popover.disabled";function le(){g.M.set(ae,"true")}function L(){g.M.delete(ae)}function ie(){return!!g.M.get(ae)}var oe=(fe=>(fe.Text="text",fe.Json="json",fe.CSV="csv",fe))(oe||{});const ue=async(fe,Ee,Ae,Ge=[])=>{switch(fe){case"text":(0,T.Zy)({meta:Ae,rows:Ee},"",Ge);break;case"json":const Fe=K(Ee,Ge),Pe=new Blob([JSON.stringify(Fe)],{type:"application/json;charset=utf-8"}),Ve=`Logs-${(0,m.LE)(new Date)}.json`;a()(Pe,Ve);break;case"csv":const me=new Map;Ee.forEach(Se=>{Se.dataFrame?.refId&&!me.has(Se.dataFrame?.refId)&&me.set(Se.dataFrame?.refId,Se.dataFrame)}),me.forEach(async Se=>{const Qe=(0,P.v)(Se);Ge.length?Qe.push(ye,{id:"filterFieldsByName",options:{include:{names:["Date",...Ge]}}}):Qe.push({id:"organize",options:{excludeByName:{labels:!0,labelTypes:!0}}},ye);const Ue=await(0,o.s)((0,E.m)(Qe,[Se]));(0,T.EM)(Ue[0],`Logs-${Se.refId}`)})}},ye=()=>fe=>fe.pipe((0,l.T)(Ee=>Ee.map(Ae=>{const Ge=(0,h.KR)(Ae),Fe={name:"Date",values:Ge.timeField?Ge.timeField?.values.map(Pe=>(0,x.KQ)(Pe).toISOString()):[],type:D.PU.other,config:{}};return{...Ae,fields:[Fe,...Ae.fields]}})))},74869:(ne,j,e)=>{"use strict";e.d(j,{VB:()=>i,f2:()=>l,sk:()=>o,wS:()=>d});var n=e(43173),a=e(1487),s=e(77256);const d=()=>n.$.featureToggles.alertingPrometheusRulesPrimary??!1,o=()=>{const c=(0,a.H)("alertingListViewV2");return n.$.featureToggles.alertingListViewV2PreviewToggle&&c!==void 0?c:n.$.featureToggles.alertingListViewV2},l=()=>((0,s.qc)()&&n.$.featureToggles.alertingRuleRecoverDeleted&&n.$.featureToggles.alertRuleRestore)??!1,i=()=>(l()&&n.$.featureToggles.alertingRulePermanentlyDelete)??!1},74887:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>p,L1:()=>d,kb:()=>l});var n=e(99305),a=e(38221),s=e(74276);const d={keys:{}},o=h=>({type:`templating/keyed/${h.action.type.replace(/^templating\//,"")}`,payload:h});function l(h,u){const r=(0,n.q4)(h);return o({key:r,action:u})}const i=h=>typeof h.type=="string"&&h.type.startsWith("templating/keyed")&&"payload"in h&&typeof h.payload.key=="string";function c(h=d,u){if(i(u)){const{key:r,action:v}=u.payload,g=(0,n.q4)(r),E=s.kH.match(v)?g:h.lastKey,x=(0,a.H)(),m=h.keys[g],y=x(m,v);return{...h,lastKey:E,keys:{...h.keys,[g]:y}}}return h}const p={templating:c}},75080:(ne,j,e)=>{"use strict";e.d(j,{c:()=>N,h:()=>F});var n=e(74848),a=e(42941),s=e(41053),d=e(51898),o=e(92745),l=e(27489),i=e(43173),c=e(45861),p=e(71599),h=e(66404),u=e(35137),r=e(22787),v=e(89640),g=e(29646),E=e(96540),x=e(49785),m=e(54148),y=e(32899),b=e(75234),D=e(8207),f=e(41654),C=e(83793),P=e(15983),T=e(91555),M=e(80465),I=e(34621),B=e(49314),U=e(97971),W=e(96733),V=e(49349);function z({dashboard:H,defaultValues:K,loadedFromRef:w,readOnly:Q,isNew:k,workflowOptions:te,repository:q,onDismiss:se}){const[re,Y]=(0,E.useState)(),[X,J]=(0,E.useState)(!1),[_,ee]=(0,E.useState)(),ae=(0,m.Zp)(),{editPanel:le}=H.useState(),{createBulkJob:L,isLoading:ie}=(0,U.Z)(),[oe,ue]=(0,C.Qo)(),ye=(0,x.mN)({defaultValues:K}),{handleSubmit:fe,watch:Ee}=ye,[Ae,Ge]=Ee(["ref","workflow"]),Fe=Se=>{const Qe=[(0,o.t)("dashboard-scene.delete-provisioned-dashboard-form.api-error","Failed to delete dashboard"),Se];(0,b.J7)().publish({type:y.r1.alertError.name,payload:Qe})},Pe=async({repo:Se,path:Qe,comment:Ue})=>{if(!Se||!q){console.error("Missing required repository for deletion:",{repo:Se});return}if((0,l.rR)("grafana_provisioning_dashboard_delete_submitted",{workflow:Ge,repositoryName:Se,repositoryType:q?.type??"unknown"}),Ge==="branch"){const Ke=Ae,Le=Ue||`Delete dashboard: ${H.state.title}`;try{await oe({name:Se,path:Qe,ref:Ke,message:Le}).unwrap()}catch(ze){Fe(ze)}return}const Re={action:"delete",delete:{ref:k?void 0:w,resources:[{name:H.state.meta.uid??H.state.meta.k8s?.name??"",group:"dashboard.grafana.app",kind:"Dashboard"}]}};try{const Ke=await L(q,Re);if(!Ke.success){Fe(Ke.error);return}Ke.job&&(Y(Ke.job),J(!0))}catch(Ke){Fe(Ke)}},Ve=(Se,Qe,Ue)=>{le?.onDiscard();const Ie=(0,B.q)({baseUrl:`${T.mL}/${K.repo}/dashboard/preview/${Se}`,paramName:"pull_request_url",paramValue:Ue?.newPullRequestURL,repoType:Qe.repoType});ae(Ie)},me=(0,E.useCallback)(Se=>{Se.status==="success"&&(le?.onDiscard(),ae("/dashboards")),Se.status==="error"&&Se.error&&ee(Se.error)},[le,ae]);return(0,I.J)({request:ue,workflow:Ge,resourceType:"dashboard",repository:q,selectedBranch:Ae||w,successMessage:(0,o.t)("dashboard-scene.delete-provisioned-dashboard-form.success-message","Dashboard deleted successfully"),handlers:{onDismiss:se,onBranchSuccess:({path:Se,urls:Qe},Ue)=>Ve(Se,Ue,Qe),onError:Fe}}),(0,n.jsx)(D._,{title:(0,o.t)("dashboard-scene.delete-provisioned-dashboard-form.drawer-title","Delete Provisioned Dashboard"),subtitle:H.state.title,onClose:se,children:X&&re?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Y,{error:_}),(0,n.jsx)(P.A,{watch:re,jobType:"move",onStatusChange:me})]}):(0,n.jsx)(x.Op,{...ye,children:(0,n.jsx)("form",{onSubmit:fe(Pe),children:(0,n.jsxs)(f.B,{direction:"column",gap:2,children:[Q&&(0,n.jsx)(W.t,{noRepository:!1,isReadOnlyRepo:!0,readOnlyMessage:"To delete this dashboard, please remove the file from your repository."}),(0,n.jsx)(V.x,{resourceType:"dashboard",isNew:k,readOnly:Q,workflow:Ge,workflowOptions:te,repository:q}),(0,n.jsxs)(f.B,{gap:2,children:[(0,n.jsx)(c.$n,{variant:"secondary",onClick:se,fill:"outline",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.delete-provisioned-dashboard-form.cancel-action",children:"Cancel"})}),(0,n.jsx)(c.$n,{variant:"destructive",type:"submit",disabled:ie||ue.isLoading||Q,children:ie||ue.isLoading?(0,o.t)("dashboard-scene.delete-provisioned-dashboard-form.deleting","Deleting..."):(0,o.t)("dashboard-scene.delete-provisioned-dashboard-form.delete-action","Delete dashboard")})]})]})})})})}function R({dashboard:H,onDismiss:K}){const{defaultValues:w,loadedFromRef:Q,readOnly:k,workflowOptions:te,isNew:q,repository:se}=(0,g.S)(H);return w?(0,n.jsx)(z,{dashboard:H,defaultValues:w,loadedFromRef:Q,readOnly:k,repository:se,isNew:q,workflowOptions:te,onDismiss:K}):null}var O=e(15203);function N({dashboard:H}){const[K,w]=(0,a.A)(!1),[Q]=(0,O.vd)(),[,k]=(0,s.A)(async()=>{(0,l.rR)("grafana_manage_dashboards_delete_clicked",{item_counts:{dashboard:1},source:"dashboard_scene_settings",restore_enabled:!!i.$.featureToggles.restoreDashboards}),w(),H.state.uid&&await Q({dashboardUIDs:[H.state.uid]}),await H.onDashboardDelete()},[H,w]);return H.isManagedRepository()&&K?(0,n.jsx)(R,{dashboard:H,onDismiss:w}):H.state.meta.provisioned&&K?(0,n.jsx)(G,{dashboardId:H.state.meta.provisionedExternalId,onClose:w}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.$n,{variant:"destructive",onClick:w,"data-testid":d.Tp.pages.Dashboard.Settings.General.deleteDashBoard,children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-settings.dashboard-delete-button",children:"Delete dashboard"})}),K&&(0,n.jsx)(F,{dashboardTitle:H.state.title,onConfirm:k,onClose:w})]})}function F({dashboardTitle:H,onConfirm:K,onClose:w}){return(0,n.jsx)(p.u,{isOpen:!0,body:(0,n.jsxs)(n.Fragment,{children:[i.$.featureToggles.restoreDashboards&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.E,{element:"p",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-settings.delete-modal-restore-dashboards-text",children:"This action will mark the dashboard for deletion in 30 days. Your organization administrator can restore it anytime before the 30 days expire."})}),(0,n.jsx)(u.$,{v:1})]}),(0,n.jsx)(h.E,{element:"p",children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-settings.delete-modal-text",children:"Do you want to delete this dashboard?"})}),(0,n.jsx)(h.E,{element:"p",children:H}),(0,n.jsx)(u.$,{v:2})]}),onConfirm:K,onDismiss:w,title:(0,o.t)("dashboard-settings.delete-modal.title","Delete"),icon:"trash-alt",confirmText:(0,o.t)("dashboard-settings.delete-modal.delete-button","Delete"),confirmationText:(0,o.t)("dashboard-settings.delete-modal.confirmation-text","Delete")})}function G({dashboardId:H,onClose:K}){return(0,n.jsxs)(r.a,{isOpen:!0,title:(0,o.t)("dashboard-scene.provisioned-delete-modal.title-cannot-delete-provisioned-dashboard","Cannot delete provisioned dashboard"),icon:"trash-alt",onDismiss:K,children:[(0,n.jsx)("p",{children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.provisioned-delete-modal.cannot-be-deleted",children:"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."})}),(0,n.jsxs)("p",{children:[(0,n.jsx)("i",{children:(0,n.jsxs)(o.x6,{i18nKey:"dashboard-scene.provisioned-delete-modal.see-docs",children:["See"," ",(0,n.jsx)(v.Y,{href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",external:!0,children:"documentation"})," ","for more information about provisioning."]})}),(0,n.jsx)("br",{}),(0,n.jsxs)(o.x6,{i18nKey:"dashboard-scene.provisioned-delete-modal.file-path",children:["File path: ",{dashboardId:H}]})]}),(0,n.jsx)(r.a.ButtonRow,{children:(0,n.jsx)(c.$n,{variant:"primary",onClick:K,children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.provisioned-delete-modal.ok",children:"OK"})})})]})}},75168:(ne,j,e)=>{"use strict";e.d(j,{l:()=>u});var n=e(34743),a=e(83505),s=e(46885),d=e(96540),o=e(76373),l=e(53568),i=e(98869);const c=1e5,p=16,h=8,u=(v,g)=>{const E=(0,d.useRef)(null),x=(0,d.useRef)(null),m=(0,d.useRef)(null),[y,b]=(0,d.useState)({width:0,height:0}),D=(0,d.useMemo)(()=>r(),[]),f=[(0,n.RK)({allowedPlacements:["bottom-start","bottom-end","top-start","top-end"],boundary:document.getElementById(o.BOUNDARY_ELEMENT_ID)??void 0,crossAxis:!0}),(0,n.Ej)({apply({availableWidth:I,availableHeight:B}){const U=I-p,W=B-p,V=Math.max(U,0),z=Math.min(Math.max(W,i.Aj*6),i.xB);b({width:V,height:z})}})],C={reference:E.current,floating:x.current},{floatingStyles:P}=(0,a.we)({strategy:"fixed",open:g,placement:"bottom-start",middleware:f,elements:C,whileElementsMounted:s.ll}),T=(0,d.useMemo)(()=>{let I="";const B=Math.min(v.length,c);for(let W=0;W<B;W++){const V=v[W].label??v[W].value.toString();I=V.length>I.length?V:I}return(0,l.kD)(I,i.sh,i.zx).width+h+i.AK*2+D},[v,D]),M={...P,width:T,maxWidth:y.width,minWidth:E.current?.offsetWidth,maxHeight:y.height};return{inputRef:E,floatingRef:x,scrollRef:m,floatStyles:M}};function r(){const v=document.createElement("div");v.style.visibility="hidden",v.style.overflow="scroll",document.body.appendChild(v);const g=document.createElement("div");v.appendChild(g);const E=v.offsetWidth-g.offsetWidth;return v.parentNode?.removeChild(v),E}},75254:(ne,j,e)=>{"use strict";e.d(j,{J:()=>n});const n=a=>a().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick}))},75421:(ne,j,e)=>{"use strict";e.d(j,{jG:()=>f});var n=e(2543),a=e(25229),s=e(22592),d=e(17548),o=e(32899),l=e(33239),i=e(92745),c=e(36490),p=e(44248),h=e(45229),u=e(65642),r=e(15130),v=e(23237),g=e(90593),E=e(87745),x=e(90811);function m({urlRefresh:C,currentRefresh:P,isAllowedIntervalFn:T,minRefreshInterval:M,refreshIntervals:I=x.cb}){if(!C)return P;const B=T(C),U=I.find(W=>W===C);if(!B||!U){const W=M?I.find(z=>z===M):void 0,V=I?.length?I[0]:void 0;return W??V??P}return C||P}class y{constructor(P){this.contextSrv=P,this.timeRangeForUrl=()=>{const T=this.timeRange().raw;return(0,a.Ar)(T.from)&&(T.from=T.from.valueOf().toString()),(0,a.Ar)(T.to)&&(T.to=T.to.valueOf().toString()),T},this.time=(0,s.E2)().raw,this.timeAtLoad=(0,s.E2)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),h.A.subscribe(E.U0,T=>{this.zoomOut(T.payload.scale,T.payload.updateUrl)}),h.A.subscribe(E.Io,T=>{this.shiftTime(T.payload.direction,T.payload.updateUrl)}),h.A.subscribe(E.Rh,T=>{this.makeAbsoluteTime(T.payload.updateUrl)}),h.A.subscribe(E.Bt,()=>{this.copyTimeRangeToClipboard()}),h.A.subscribe(E.VZ,T=>{this.pasteTimeRangeFromClipboard(T.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(P){this.timeModel=P,this.time=P.time,this.refresh=P.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,n.cloneDeep)(this.time),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(P){return this.contextSrv.getValidIntervals(P)}parseTime(){this.time.from=(0,v.EX)(this.time.from),this.time.to=(0,v.EX)(this.time.to)}parseUrlParam(P,T){if(P.indexOf("now")!==-1)return P;if(P.length===8){const M=(0,a.yT)(P,"YYYYMMDD");if(M.isValid())return M}else if(P.length===15){const M=(0,a.yT)(P,"YYYYMMDDTHHmmss");if(M.isValid())return M}if(!isNaN(Number(P))){const M=parseInt(P,10);return T?(0,a.oZ)(T,M):(0,a.yT)(M)}return null}getTimeWindow(P,T){const M=parseInt(P,10);let I;return T.match(/^\d+$/)&&parseInt(T,10)?I=parseInt(T,10):I=d.intervalToMs(T),{from:(0,a.yT)(M-I/2),to:(0,a.yT)(M+I/2)}}initTimeFromUrl(){if(u.$W.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const P=c.Ny.getSearch();P.get("time")&&P.get("time.window")&&(this.time=this.getTimeWindow(P.get("time"),P.get("time.window")));const T=this.timeModel?.getTimezone();P.get("from")&&(this.time.from=this.parseUrlParam(P.get("from"),T)||this.time.from),P.get("to")&&(this.time.to=this.parseUrlParam(P.get("to"),T)||this.time.to),P.get("to")&&P.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=void 0)),this.refresh=m({urlRefresh:P.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:u.$W.minRefreshInterval})}updateTimeRangeFromUrl(){const P=c.Ny.getSearch();if(P.get("left"))return;const T=this.timeRangeForUrl(),M=P.get("from"),I=P.get("to");M&&I?(M!==T.from||I!==T.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(P){this.timeModel&&(this.timeModel.refresh=P),this.stopAutoRefresh();const T=c.Ny.getSearchObject();if(!P){T.refresh&&c.Ny.partial({refresh:null},!0);return}let M=P,I=60*1e3;P===r.SM?I=this.getAutoRefreshInteval().intervalMs:(M=this.contextSrv.getValidInterval(P),I=d.intervalToMs(M)),this.refreshMS=I,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(I),this.refreshTimeModel()},I),T.refresh!==M&&c.Ny.partial({refresh:M},!0)}getAutoRefreshInteval(){const P=window?.innerWidth??2e3;return d.calculateInterval(this.timeRange(),P,u.$W.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(P){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(P),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},P)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(P,T=!0){if((0,n.extend)(this.time,P),(0,a.Ar)(P.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh("")):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),T===!0){const M=this.timeRangeForUrl(),I=c.Ny.getSearchObject();if(I.from===M.from.toString()&&I.to===M.to.toString())return;I.from=M.from.toString(),I.to=M.to.toString(),c.Ny.partial(I)}this.timeModel?.refresh===r.SM&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(r.SM),this.refreshTimeModel()}timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?p.jh.getTimeRange(window.__grafanaSceneContext).state.value:(0,g.z)(this.time,this.timeModel)}zoomOut(P,T=!0){const M=this.timeRange(),{from:I,to:B}=(0,v.Zk)(M,P);this.setTime({from:(0,a.yT)(I),to:(0,a.yT)(B)},T)}shiftTime(P,T=!0){const M=this.timeRange(),{from:I,to:B}=(0,v.Wb)(P,M);this.setTime({from:(0,a.yT)(I),to:(0,a.yT)(B)},T)}makeAbsoluteTime(P){const{from:T,to:M}=this.timeRange();this.setTime({from:T,to:M},P)}copyTimeRangeToClipboard(){const{raw:P}=this.timeRange(),T=d.formatRawTimeRange(P);navigator.clipboard.writeText(JSON.stringify(T)),h.A.emit(o.r1.alertSuccess,[(0,i.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}async pasteTimeRangeFromClipboard(P=!0){const{range:T,isError:M}=await(0,v.zG)();if(M===!0){h.A.emit(o.r1.alertError,[(0,i.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,i.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:T})]);return}let{from:I,to:B}=T;I=(0,v.EX)(I),B=(0,v.EX)(B),this.setTime({from:I,to:B},P)}isRefreshOutsideThreshold(P,T=.05){const M=this.timeRange();if(l.isMathString(M.raw.from)){const I=M.to.diff(M.from),B=Date.now()-P,U=I*T;return B>=U}return!1}}let b;function D(C){b=C}function f(){return b||(b=new y(r.TP)),b}},75515:(ne,j,e)=>{"use strict";e.d(j,{X:()=>n});function n(a){return!!a.libraryPanel?.uid}},75541:(ne,j,e)=>{"use strict";e.d(j,{C:()=>n,Y:()=>a});const n={left:[],right:[]};function a(s,d){n[s].push(d)}},75570:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>p,h:()=>h});var n=e(33239),a=e(60188),s=e(22592),d=e(36490),o=e(6890),l=e(83873),i=e(66198),c=e(8535);async function p(u){try{const r=await l.IB.getFolderByUid(u);c.M_.dispatch((0,o.Vz)((0,i.R4)(r)))}catch(r){console.warn("Error fetching parent folder",u,"for dashboard",r)}}function h(){const u=d.Ny.getSearch(),r=d.Ny.getSearchObject();r.timezone=u.get("timezone")??void 0;const v=Date.now(),g=(0,a.O)({timeZone:u.get("timezone")??void 0}),E=(0,s.E2)(),x=u.get("from"),m=u.get("to"),y=m?n.toDateTime(m,{roundUp:!0,timezone:g,now:v}):void 0,b=x?n.toDateTime(x,{roundUp:!1,timezone:g,now:v}):void 0;return r.from=b?.toISOString()??E.from.toISOString(),r.to=y?.toISOString()??E.to.toISOString(),Object.keys(r).forEach(D=>{D!=="from"&&D!=="to"&&D!=="scopes"&&D!=="version"&&!D.startsWith("var-")&&delete r[D]}),r}},75640:(ne,j,e)=>{"use strict";e.d(j,{Hx:()=>o,gO:()=>l});var n=e(96540),a=e(95443),s=e(77256);function d(i){return{dashboardUID:i.find(([c])=>c===a.YH.dashboardUID)?.[1],panelId:i.find(([c])=>c===a.YH.panelID)?.[1]}}function o(i){return(0,n.useMemo)(()=>Object.entries(i||{}).filter(([c,p])=>!!p.trim()),[i])}function l(i){const c=new Map,{panelId:p,dashboardUID:h}=d(i);return h&&c.set(a.YH.dashboardUID,(0,s.JM)(h)),h&&p&&c.set(a.YH.panelID,(0,s.D2)(h,p)),c}},75683:(ne,j,e)=>{"use strict";e.d(j,{k:()=>n});var n=(a=>(a[a.Standard=0]="Standard",a[a.Canvas=1]="Canvas",a[a.Custom=2]="Custom",a))(n||{})},75735:(ne,j,e)=>{"use strict";e.d(j,{AI:()=>g,D1:()=>D,IC:()=>f,Jw:()=>c,LH:()=>i,Ms:()=>p,Pd:()=>v,Qu:()=>s,Sf:()=>l,UL:()=>m,Y5:()=>P,Y_:()=>h,ew:()=>d,fW:()=>C,fY:()=>o,hX:()=>E,hc:()=>n,hm:()=>y,qw:()=>x,w2:()=>b,xU:()=>a});const n="grafana.app/createdBy",a="grafana.app/updatedTimestamp",s="grafana.app/updatedBy",d="grafana.app/folder",o="grafana.app/message";var l=(T=>(T.Repo="repo",T.Terraform="terraform",T.Kubectl="kubectl",T.Plugin="plugin",T))(l||{});const i="grafana.app/managedBy",c="grafana.app/managerId",p="grafana.app/managerAllowsEdits",h="grafana.app/sourcePath",u="grafana.app/sourceChecksum",r="grafana.app/sourceTimestamp",v="grafana.app/saved-from-ui",g="grafana.app/grant-permissions",E="grafana.app/slug",x="grafana.app/dashboard-is-snapshot",m="grafana.app/dashboard-snapshot-original-url",y="grafana.app/dashboard-gnet-id",b="grafana.app/folderTitle",D="grafana.app/folderUrl",f="grafana.app/embedded",C="grafana.app/reloadOnParamsChange",P="grafana.app/deprecatedInternalID"},75745:(ne,j,e)=>{"use strict";e.d(j,{K:()=>s,Pw:()=>n,RP:()=>d,tf:()=>a});var n=(o=>(o.onBlur="onBlur",o.onFocus="onFocus",o.onChange="onChange",o))(n||{});const a=(o,l)=>{const i=l.reduce((c,p)=>p.rule(o)?c:c.concat(p.errorMessage),[]);return i.length>0?i:null},s=(o,l)=>l&&l[o],d=(o,l)=>({rule:i=>!!i.match(o),errorMessage:l||"Value is not valid"})},75756:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>l});var n=e(92745),a=e(70327),s=e(96137),d=e(80218),o=e(71639);function l(){const[i]=(0,o.D)(),[c]=a.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),[p]=a.hK.endpoints.deleteRuleGroupFromNamespace.useMutation();return(0,d.Yb)(async(h,u)=>{const{groupName:r,namespaceName:v}=h,g=(0,s.KH)({identifier:u}),{newRuleGroupDefinition:E,rulerConfig:x}=await i(h,[g]),m=(0,n.t)("alerting.rules.delete-rule.success","Rule successfully deleted");return E.rules.length===0?p({rulerConfig:x,namespace:v,group:r,notificationOptions:{successMessage:m}}).unwrap():c({rulerConfig:x,namespace:v,payload:E,notificationOptions:{successMessage:m}}).unwrap()})}},75983:(ne,j,e)=>{"use strict";e.d(j,{D:()=>D});var n=e(74848),a=e(96540),s=e(93374),d=e(25229),o=e(54092),l=e(92745),i=e(29609),c=e(6106),p=e(46907),h=e(88559),u=e(76319),r=e(20806),v=e(9860);const g=({rule:f,instance:C,extensionPointId:P})=>{const[T,M]=(0,a.useState)(),I=(0,a.useMemo)(()=>({instance:C,rule:f}),[C,f]),{links:B}=(0,p.U)({context:I,extensionPointId:P,limitPerPlugin:3});if(B.length===0)return null;const U=(0,n.jsx)(v.w,{extensions:B,onSelect:M});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.m,{placement:"bottom-start",overlay:U,children:(0,n.jsx)(u.K,{name:"ellipsis-v","aria-label":(0,l.t)("alerting.alert-instance-extension-point.aria-label-actions","Actions"),variant:"secondary"})}),!!T&&!!T.path&&(0,n.jsx)(r.s,{path:T.path,title:T.title,onDismiss:()=>M(void 0)})]})};var E=e(75640),x=e(83750),m=e(40165);const y=({instance:f})=>{const C=(0,E.Hx)(f.annotations),P=(0,E.gO)(C);return(0,n.jsxs)("div",{children:[f.value&&(0,n.jsx)(m.X,{label:(0,l.t)("alerting.alert-instance-details.label-value","Value"),horizontal:!0,children:f.value}),C.map(([T,M])=>(0,n.jsx)(x.s,{annotationKey:T,value:M,valueLink:P.get(T)},T))]})};var b=e(65420);const D=({rule:f,instances:C,pagination:P,footerRow:T})=>{const M=(0,a.useMemo)(()=>C.map(B=>({data:{rule:f,alert:B},id:(0,i.RI)(B)})),[C,f]),I=[{id:"state",label:(0,l.t)("alerting.alert-instances-table.state","State"),renderCell:({data:{alert:{state:B}}})=>(0,n.jsx)(b.C,{state:B}),size:"95px"},{id:"labels",label:(0,l.t)("alerting.alert-instances-table.labels","Labels"),renderCell:({data:{alert:{labels:B}}})=>(0,n.jsx)(s.m,{labels:B,labelSets:C.map(U=>U.labels),displayCommonLabels:!0,size:"sm"})},{id:"created",label:(0,l.t)("alerting.alert-instances-table.created","Created"),renderCell:({data:{alert:{activeAt:B}}})=>(0,n.jsx)(n.Fragment,{children:B.startsWith("0001")?"-":(0,d.KQ)(B).format("YYYY-MM-DD HH:mm:ss")}),size:"150px"},{id:"actions",label:"",renderCell:({data:{alert:B,rule:U}})=>(0,n.jsx)(g,{rule:U,instance:B,extensionPointId:o.SM.AlertInstanceAction},"alert-instance-extension-point"),size:"40px"}];return(0,n.jsx)(c.E,{cols:I,isExpandable:!0,items:M,renderExpandedContent:({data:B})=>(0,n.jsx)(y,{instance:B.alert}),pagination:P,footerRow:T})}},76070:(ne,j,e)=>{"use strict";e.d(j,{PE:()=>a,w6:()=>d});var n=e(11257);const a=[n.w.AlertingReceiversRead],s=[n.w.AlertingReceiversCreate,n.w.AlertingReceiversWrite],d=[...a,...s]},76190:(ne,j,e)=>{"use strict";e.d(j,{O:()=>n});var n=(a=>(a.NoData="no_data",a.Paused="paused",a.Alerting="alerting",a.OK="ok",a.Pending="pending",a.Recovering="recovering",a.Unknown="unknown",a))(n||{})},76267:(ne,j,e)=>{"use strict";e.d(j,{CN:()=>i,U:()=>p,Vw:()=>u});var n=e(79197),a=e(48497),s=e(25229),d=e(80011),o=e(74529),l=e(15629);function i(v,g){if(!v||!g||!(0,o.vd)(v))return;let E;try{E=(0,l.M9)(g)}catch{return}if((0,l.mo)(v))return;const x=Date.parse(v||""),m=(0,n.A)(x,E);return(0,a.Y)(m,new Date)?{humanized:`within ${g}`,fullDate:`within ${g}`}:{humanized:`in ${(0,s.KQ)(m).locale("en").fromNow(!0)}`,fullDate:(0,d.LE)(m,{format:"YYYY-MM-DD HH:mm:ss"})}}function c(v){if(!v)return null;if(!isNullDate(v))return formatDistanceToNowStrict(new Date(v))}function p(v){if(v){if(v==="err")return"error";if(h(v))return v}}function h(v){return["ok","nodata","error"].some(E=>E===v)}function u(v){if(!v)return"unknown";if(v==="inactive")return"normal";if(r(v))return v}function r(v){return["normal","firing","pending","unknown","recovering"].some(E=>E===v)}},76466:(ne,j,e)=>{"use strict";e.d(j,{EM:()=>a});var n=e(75735);function a({targetFolderUID:l,targetFolder:i,repoName:c,hidePrependSlash:p=!1}){return l===""||s(i,c)?p?"":"/":d(i)}function s(l,i){return!!(l?.metadata?.name===i&&i)}function d(l){if(!l)return;const c=(l?.metadata?.annotations||{})[n.Y_]||"";return c?`${c}/`:"/"}function o(l,i){const p=l.replace(/\/$/,"").split("/").pop();if(!p)throw new Error(`Invalid path: ${l}`);return l.endsWith("/")?`${i}/${p}/`:`${i}/${p}`}},76541:(ne,j,e)=>{"use strict";e.d(j,{n:()=>h});var n=e(97816),a=e(9594),s=e(64157);const d="v0alpha1",o="notifications.alerting.grafana.app",l=(0,s.TP)(o,d),i=(0,s.gN)(o,d),c=(0,n.xP)({reducerPath:i,baseQuery:(0,a.cw)({baseUrl:new URL(l,globalThis.location.origin).href}),endpoints:()=>({})}),p=["API Discovery","Receiver","RoutingTree","TemplateGroup","TimeInterval"],h=c.enhanceEndpoints({addTagTypes:p}).injectEndpoints({endpoints:u=>({getApiResources:u.query({query:()=>({url:"/apis/notifications.alerting.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),listReceiver:u.query({query:r=>({url:"/receivers",params:{pretty:r.pretty,allowWatchBookmarks:r.allowWatchBookmarks,continue:r.continue,fieldSelector:r.fieldSelector,labelSelector:r.labelSelector,limit:r.limit,resourceVersion:r.resourceVersion,resourceVersionMatch:r.resourceVersionMatch,sendInitialEvents:r.sendInitialEvents,timeoutSeconds:r.timeoutSeconds,watch:r.watch}}),providesTags:["Receiver"]}),createReceiver:u.mutation({query:r=>({url:"/receivers",method:"POST",body:r.receiver,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["Receiver"]}),deletecollectionReceiver:u.mutation({query:r=>({url:"/receivers",method:"DELETE",params:{pretty:r.pretty,continue:r.continue,dryRun:r.dryRun,fieldSelector:r.fieldSelector,gracePeriodSeconds:r.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:r.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:r.labelSelector,limit:r.limit,orphanDependents:r.orphanDependents,propagationPolicy:r.propagationPolicy,resourceVersion:r.resourceVersion,resourceVersionMatch:r.resourceVersionMatch,sendInitialEvents:r.sendInitialEvents,timeoutSeconds:r.timeoutSeconds}}),invalidatesTags:["Receiver"]}),getReceiver:u.query({query:r=>({url:`/receivers/${r.name}`,params:{pretty:r.pretty}}),providesTags:["Receiver"]}),replaceReceiver:u.mutation({query:r=>({url:`/receivers/${r.name}`,method:"PUT",body:r.receiver,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["Receiver"]}),deleteReceiver:u.mutation({query:r=>({url:`/receivers/${r.name}`,method:"DELETE",params:{pretty:r.pretty,dryRun:r.dryRun,gracePeriodSeconds:r.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:r.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:r.orphanDependents,propagationPolicy:r.propagationPolicy}}),invalidatesTags:["Receiver"]}),updateReceiver:u.mutation({query:r=>({url:`/receivers/${r.name}`,method:"PATCH",body:r.patch,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation,force:r.force}}),invalidatesTags:["Receiver"]}),getReceiverStatus:u.query({query:r=>({url:`/receivers/${r.name}/status`,params:{pretty:r.pretty}}),providesTags:["Receiver"]}),replaceReceiverStatus:u.mutation({query:r=>({url:`/receivers/${r.name}/status`,method:"PUT",body:r.receiver,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["Receiver"]}),updateReceiverStatus:u.mutation({query:r=>({url:`/receivers/${r.name}/status`,method:"PATCH",body:r.patch,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation,force:r.force}}),invalidatesTags:["Receiver"]}),listRoutingTree:u.query({query:r=>({url:"/routingtrees",params:{pretty:r.pretty,allowWatchBookmarks:r.allowWatchBookmarks,continue:r.continue,fieldSelector:r.fieldSelector,labelSelector:r.labelSelector,limit:r.limit,resourceVersion:r.resourceVersion,resourceVersionMatch:r.resourceVersionMatch,sendInitialEvents:r.sendInitialEvents,timeoutSeconds:r.timeoutSeconds,watch:r.watch}}),providesTags:["RoutingTree"]}),createRoutingTree:u.mutation({query:r=>({url:"/routingtrees",method:"POST",body:r.routingTree,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["RoutingTree"]}),deletecollectionRoutingTree:u.mutation({query:r=>({url:"/routingtrees",method:"DELETE",params:{pretty:r.pretty,continue:r.continue,dryRun:r.dryRun,fieldSelector:r.fieldSelector,gracePeriodSeconds:r.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:r.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:r.labelSelector,limit:r.limit,orphanDependents:r.orphanDependents,propagationPolicy:r.propagationPolicy,resourceVersion:r.resourceVersion,resourceVersionMatch:r.resourceVersionMatch,sendInitialEvents:r.sendInitialEvents,timeoutSeconds:r.timeoutSeconds}}),invalidatesTags:["RoutingTree"]}),getRoutingTree:u.query({query:r=>({url:`/routingtrees/${r.name}`,params:{pretty:r.pretty}}),providesTags:["RoutingTree"]}),replaceRoutingTree:u.mutation({query:r=>({url:`/routingtrees/${r.name}`,method:"PUT",body:r.routingTree,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["RoutingTree"]}),deleteRoutingTree:u.mutation({query:r=>({url:`/routingtrees/${r.name}`,method:"DELETE",params:{pretty:r.pretty,dryRun:r.dryRun,gracePeriodSeconds:r.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:r.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:r.orphanDependents,propagationPolicy:r.propagationPolicy}}),invalidatesTags:["RoutingTree"]}),updateRoutingTree:u.mutation({query:r=>({url:`/routingtrees/${r.name}`,method:"PATCH",body:r.patch,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation,force:r.force}}),invalidatesTags:["RoutingTree"]}),getRoutingTreeStatus:u.query({query:r=>({url:`/routingtrees/${r.name}/status`,params:{pretty:r.pretty}}),providesTags:["RoutingTree"]}),replaceRoutingTreeStatus:u.mutation({query:r=>({url:`/routingtrees/${r.name}/status`,method:"PUT",body:r.routingTree,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["RoutingTree"]}),updateRoutingTreeStatus:u.mutation({query:r=>({url:`/routingtrees/${r.name}/status`,method:"PATCH",body:r.patch,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation,force:r.force}}),invalidatesTags:["RoutingTree"]}),listTemplateGroup:u.query({query:r=>({url:"/templategroups",params:{pretty:r.pretty,allowWatchBookmarks:r.allowWatchBookmarks,continue:r.continue,fieldSelector:r.fieldSelector,labelSelector:r.labelSelector,limit:r.limit,resourceVersion:r.resourceVersion,resourceVersionMatch:r.resourceVersionMatch,sendInitialEvents:r.sendInitialEvents,timeoutSeconds:r.timeoutSeconds,watch:r.watch}}),providesTags:["TemplateGroup"]}),createTemplateGroup:u.mutation({query:r=>({url:"/templategroups",method:"POST",body:r.templateGroup,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["TemplateGroup"]}),deletecollectionTemplateGroup:u.mutation({query:r=>({url:"/templategroups",method:"DELETE",params:{pretty:r.pretty,continue:r.continue,dryRun:r.dryRun,fieldSelector:r.fieldSelector,gracePeriodSeconds:r.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:r.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:r.labelSelector,limit:r.limit,orphanDependents:r.orphanDependents,propagationPolicy:r.propagationPolicy,resourceVersion:r.resourceVersion,resourceVersionMatch:r.resourceVersionMatch,sendInitialEvents:r.sendInitialEvents,timeoutSeconds:r.timeoutSeconds}}),invalidatesTags:["TemplateGroup"]}),getTemplateGroup:u.query({query:r=>({url:`/templategroups/${r.name}`,params:{pretty:r.pretty}}),providesTags:["TemplateGroup"]}),replaceTemplateGroup:u.mutation({query:r=>({url:`/templategroups/${r.name}`,method:"PUT",body:r.templateGroup,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["TemplateGroup"]}),deleteTemplateGroup:u.mutation({query:r=>({url:`/templategroups/${r.name}`,method:"DELETE",params:{pretty:r.pretty,dryRun:r.dryRun,gracePeriodSeconds:r.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:r.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:r.orphanDependents,propagationPolicy:r.propagationPolicy}}),invalidatesTags:["TemplateGroup"]}),updateTemplateGroup:u.mutation({query:r=>({url:`/templategroups/${r.name}`,method:"PATCH",body:r.patch,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation,force:r.force}}),invalidatesTags:["TemplateGroup"]}),getTemplateGroupStatus:u.query({query:r=>({url:`/templategroups/${r.name}/status`,params:{pretty:r.pretty}}),providesTags:["TemplateGroup"]}),replaceTemplateGroupStatus:u.mutation({query:r=>({url:`/templategroups/${r.name}/status`,method:"PUT",body:r.templateGroup,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["TemplateGroup"]}),updateTemplateGroupStatus:u.mutation({query:r=>({url:`/templategroups/${r.name}/status`,method:"PATCH",body:r.patch,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation,force:r.force}}),invalidatesTags:["TemplateGroup"]}),listTimeInterval:u.query({query:r=>({url:"/timeintervals",params:{pretty:r.pretty,allowWatchBookmarks:r.allowWatchBookmarks,continue:r.continue,fieldSelector:r.fieldSelector,labelSelector:r.labelSelector,limit:r.limit,resourceVersion:r.resourceVersion,resourceVersionMatch:r.resourceVersionMatch,sendInitialEvents:r.sendInitialEvents,timeoutSeconds:r.timeoutSeconds,watch:r.watch}}),providesTags:["TimeInterval"]}),createTimeInterval:u.mutation({query:r=>({url:"/timeintervals",method:"POST",body:r.timeInterval,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["TimeInterval"]}),deletecollectionTimeInterval:u.mutation({query:r=>({url:"/timeintervals",method:"DELETE",params:{pretty:r.pretty,continue:r.continue,dryRun:r.dryRun,fieldSelector:r.fieldSelector,gracePeriodSeconds:r.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:r.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:r.labelSelector,limit:r.limit,orphanDependents:r.orphanDependents,propagationPolicy:r.propagationPolicy,resourceVersion:r.resourceVersion,resourceVersionMatch:r.resourceVersionMatch,sendInitialEvents:r.sendInitialEvents,timeoutSeconds:r.timeoutSeconds}}),invalidatesTags:["TimeInterval"]}),getTimeInterval:u.query({query:r=>({url:`/timeintervals/${r.name}`,params:{pretty:r.pretty}}),providesTags:["TimeInterval"]}),replaceTimeInterval:u.mutation({query:r=>({url:`/timeintervals/${r.name}`,method:"PUT",body:r.timeInterval,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["TimeInterval"]}),deleteTimeInterval:u.mutation({query:r=>({url:`/timeintervals/${r.name}`,method:"DELETE",params:{pretty:r.pretty,dryRun:r.dryRun,gracePeriodSeconds:r.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:r.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:r.orphanDependents,propagationPolicy:r.propagationPolicy}}),invalidatesTags:["TimeInterval"]}),updateTimeInterval:u.mutation({query:r=>({url:`/timeintervals/${r.name}`,method:"PATCH",body:r.patch,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation,force:r.force}}),invalidatesTags:["TimeInterval"]}),getTimeIntervalStatus:u.query({query:r=>({url:`/timeintervals/${r.name}/status`,params:{pretty:r.pretty}}),providesTags:["TimeInterval"]}),replaceTimeIntervalStatus:u.mutation({query:r=>({url:`/timeintervals/${r.name}/status`,method:"PUT",body:r.timeInterval,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation}}),invalidatesTags:["TimeInterval"]}),updateTimeIntervalStatus:u.mutation({query:r=>({url:`/timeintervals/${r.name}/status`,method:"PATCH",body:r.patch,params:{pretty:r.pretty,dryRun:r.dryRun,fieldManager:r.fieldManager,fieldValidation:r.fieldValidation,force:r.force}}),invalidatesTags:["TimeInterval"]})}),overrideExisting:!1})},76548:(ne,j,e)=>{"use strict";e.d(j,{e:()=>l});var n=e(74848),a=e(92745),s=e(41654),d=e(77824),o=e(44580);const l=({value:i,onChange:c,item:p})=>{const h=[{label:(0,a.t)("timeseries.span-nulls-editor.gaps-options.label-never","Never"),value:!1},{label:(0,a.t)("timeseries.span-nulls-editor.gaps-options.label-always","Always"),value:!0},{label:(0,a.t)("timeseries.span-nulls-editor.gaps-options.label-threshold","Threshold"),value:36e5}],u=typeof i=="number";return h[2].value=u?i:36e5,(0,n.jsxs)(s.B,{wrap:!0,children:[(0,n.jsx)(d.z,{value:i,options:h,onChange:c}),u&&(0,n.jsx)(o.g,{value:i,onChange:c,inputPrefix:o.F.LessThan,isTime:p.settings?.isTime??!1})]})}},76584:(ne,j,e)=>{"use strict";e.d(j,{HQ:()=>l,Vf:()=>i,aL:()=>o,g5:()=>c});var n=e(97335),a=e(97883),s=e(59006),d=e(67350);function o(p){return{kind:"RowsLayout",spec:{rows:p.state.rows.filter(h=>!h.state.repeatSourceKey).map(l)}}}function l(p){const h=p.state.layout.serialize(),u={kind:"RowsLayoutRow",spec:{title:p.state.title,collapse:p.state.collapse,layout:h,fillScreen:p.state.fillScreen,hideHeader:p.state.hideHeader,...p.state.repeatByVariable&&{repeat:{mode:"variable",value:p.state.repeatByVariable}}}},r=p.state.conditionalRendering?.serialize();return r?.spec.items.length&&(u.spec.conditionalRendering=r),u}function i(p,h,u,r){if(p.kind!=="RowsLayout")throw new Error("Invalid layout kind");const v=p.spec.rows.map(g=>c(g,h,u,r));return new a.V({rows:v})}function c(p,h,u,r){const v=p.spec.layout;return new n.o({title:p.spec.title,collapse:p.spec.collapse,hideHeader:p.spec.hideHeader,fillScreen:p.spec.fillScreen,repeatByVariable:p.spec.repeat?.value,layout:s.j.get(v.kind).deserialize(v,h,u,r),conditionalRendering:(0,d.Xy)(p)})}},76623:(ne,j,e)=>{"use strict";e.d(j,{h:()=>i});var n=e(74848),a=e(16200),s=e(37680),d=e(66769);const l="You are an expert in creating Grafana Panels.Your goal is to write short, descriptive, and concise panel title.The title should be shorter than 50 characters.",i=({onGenerate:p,panel:h,dashboard:u})=>(0,n.jsx)(a.n,{messages:()=>c(h,u),onGenerate:p,eventTrackingSrc:s.ec.panelTitle,toggleTipTitle:"Improve your panel title"});function c(p,h){const u=(0,d.hn)(p);return[{content:l,role:d.Xh.system},{content:`The panel is part of a dashboard with the title: ${h.title}
The panel is part of a dashboard with the description: ${h.description}
Use this JSON object which defines the panel: ${u}`,role:d.Xh.user}]}},76637:(ne,j,e)=>{"use strict";e.d(j,{Hs:()=>g,O7:()=>x,Qi:()=>v,lz:()=>E,uf:()=>u});var n=e(21197),a=e(55459),s=e.n(a),d=e(84140),o=e(6773),l=e(46644),i=e(64394),c=e(42954),p=e(79118),h=e(36394);const u=new c.O(()=>[{id:i.Y.Fixed,name:"Single color",description:"Set a specific color",getCalculator:m},{id:i.Y.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:y},{id:i.Y.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(b,D)=>(f,C,P)=>{const T=P??h.QS;return D.visualization.getColorByName(T.color)}},new r({id:i.Y.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:b=>b.visualization.palette}),new r({id:i.Y.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:b=>b.visualization.palette.filter(D=>(0,o.eM)(b.visualization.getColorByName(D),b.colors.background.primary)>=b.colors.contrastThreshold)}),new r({id:i.Y.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:b=>["green","yellow","red"]}),new r({id:i.Y.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:b=>["red","yellow","green"]}),new r({id:i.Y.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:b=>["dark-blue","super-light-yellow","dark-red"]}),new r({id:i.Y.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:b=>["super-light-yellow","dark-red"]}),new r({id:i.Y.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:b=>["blue","purple"]}),new r({id:i.Y.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:b=>["super-light-yellow","dark-blue"]}),new r({id:i.Y.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:b=>["panel-bg","dark-blue"]}),new r({id:i.Y.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:b=>["panel-bg","dark-red"]}),new r({id:i.Y.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:b=>["panel-bg","dark-green"]}),new r({id:i.Y.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:b=>["panel-bg","dark-purple"]})]);class r{constructor(D){this.id=D.id,this.name=D.name,this.description=D.description,this.getNamedColors=D.getColors,this.isContinuous=D.isContinuous,this.isByValue=D.isByValue,this.useSeriesName=D.useSeriesName}getColors(D){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===D?this.colorCache:(this.colorCache=this.getNamedColors(D).map(D.visualization.getColorByName),this.colorCacheTheme=D,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,n.Ik)(this.colorCache)),this.interpolator}getCalculator(D,f){const C=this.getColors(f);return this.isByValue?this.isContinuous?(P,T,M)=>this.getInterpolator()(T):(P,T,M)=>C[T*(C.length-1)]:this.useSeriesName?(P,T,M)=>x(C,D.state?.displayName??D.name):(P,T,M)=>{const I=D.state?.seriesIndex??0;return C[I%C.length]}}}function v(b){return u.get(b.config.color?.mode??i.Y.Thresholds)}function g(b){return u.get(b??i.Y.Thresholds)}function E(b,D){const f=v(b);if(!f.isByValue)return{color:f.getCalculator(b,D)(0,0),threshold:h.QS,percent:1};const C=(0,p.jc)(b,D),P=b.config.color?.seriesBy??"last",M=(0,l.Nw)({field:b,reducers:[P]})[P]??0;return C(M)}function x(b,D){return b[Math.abs(s()(D))%b.length]}function m(b,D){return()=>D.visualization.getColorByName(b.config.color?.fixedColor??i.F)}function y(b,D){return()=>{const f=D.visualization.getColorByName(b.config.color?.fixedColor??i.F),C=[f],P=6,T=10,M=35,I=35;for(let U=1;U<P;U++)C.push((0,d.A)(f).spin(U/P*T).brighten(U/P*M).toHexString()),C.push((0,d.A)(f).spin(-(U/P)*T).darken(U/P*I).toHexString());const B=b.state?.seriesIndex??0;return C[B%C.length]}}},76671:(ne,j,e)=>{"use strict";e.d(j,{s:()=>r});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(41053),l=e(92745),i=e(63142),c=e(79233),p=e(89467),h=e(37864),u=e(3431);function r({value:g,onChange:E,loadOptions:x,reloadOptionsOnChange:m=!1,Component:y,className:b,allowCustomValue:D,allowEmptyValue:f,disabled:C,placeholder:P,inputMinWidth:T,inputPlaceholder:M,autofocus:I=!1,onExpandedChange:B,noOptionMessageHandler:U=v,...W}){const[V,z]=(0,o.A)(x,[x]),[R,O,N,F]=(0,u.Q)(I,B),G=T?Math.max(T,O):O,H=(0,i.of)(h.m);if(!N){const K=(0,s.isObject)(g)?g.label:g,w=K!=null?String(K):void 0;return(0,n.jsx)(R,{onClick:m?void 0:z,disabled:C,Component:y||(0,n.jsx)(c.c,{className:(0,a.cx)(H.segment,{[H.queryPlaceholder]:P!==void 0&&!g,[H.disabled]:C},b),children:w||P})})}return(0,n.jsx)(p.a,{...W,value:g&&!(0,s.isObject)(g)?{value:g}:g,placeholder:M,options:V.value??[],loadOptions:m?z:void 0,width:G,noOptionsMessage:U(V),allowCustomValue:D,allowEmptyValue:f,onClickOutside:()=>{F(!1)},onChange:K=>{F(!1),E(K)}})}function v(g){return g.loading?(0,l.t)("grafana-ui.segment-async.loading","Loading options..."):g.error?(0,l.t)("grafana-ui.segment-async.error","Failed to load options"):(0,l.t)("grafana-ui.segment-async.no-options","No options found")}},76701:(ne,j,e)=>{"use strict";e.d(j,{a:()=>s,r:()=>a});var n=e(92745);function a(d,o){return o&&o!==d?.branch?"write":d?.workflows?.[0]}function s(d){return d?d.type==="local"?[{label:"Save",value:"write"}]:d.workflows.map(o=>{switch(o){case"write":return{label:(0,n.t)("provisioning.workflow-options-label.push-to-existing-branch","Push to an existing branch"),value:o};case"branch":return{label:(0,n.t)("provisioning.workflow-options-label.push-to-a-new-branch","Push to a new branch"),value:o}}return{label:o,value:o}}):[]}},76732:(ne,j,e)=>{"use strict";e.d(j,{J3:()=>d,ab:()=>l,bW:()=>s});var n=e(2543),a=e.n(n);function s(i,c,p){if(i===c)return!0;if(i?.fields?.length!==c?.fields?.length||i.name!==c.name)return!1;for(let h=0;h<i.fields.length;h++){const u=i.fields[h],r=c.fields[h];if(u.type!==r.type||u.name!==r.name)return!1;if(p)continue;if(u.labels&&r.labels&&!l(u.labels,r.labels))return!1;const v=u.config,g=r.config;if(Object.keys(v).length!==Object.keys(g).length)return!1;let E;for(E in v){if(!(E in g))return!1;if(E!=="interval"&&!(0,n.isEqual)(v[E],g[E]))return!1}}return!0}function d(i,c,p){if(i===c)return!0;if(i?.length!==c?.length)return!1;for(let h=0;h<i.length;h++)if(!p(i[h],c[h]))return!1;return!0}const o=(i,c)=>i===c;function l(i,c,p=o){if(i===c)return!0;if(Object.keys(i).length!==Object.keys(c).length)return!1;let h;for(h in i)if(!p(i[h],c[h]))return!1;return!0}},76792:(ne,j,e)=>{"use strict";e.d(j,{sk:()=>F,kw:()=>O,fE:()=>N});var n=e(74848),a=e(22803),s=e(34743),d=e(83505),o=e(46885),l=e(18828),i=e(43107),c=e(93225),p=e(2543),h=e(96540),u=e(51898),r=e(92745),v=e(27489),g=e(77870),E=e(63142),x=e(76373),m=e(63527),y=e(30703),b=e(15245),D=e(92807),f=e(8515),C=e(45861),P=e(65642),T=e(5478),M=e(8095),I=e(42227),B=e(93602);function U(k){const{dataSource:te}=k,q=(0,E.$j)(),se=V(q,te?.meta.builtIn);return te?(0,n.jsx)("img",{className:se.pickerDSLogo,alt:`${te.meta.name} logo`,src:te.meta.info.logos.small}):W()}function W(){const k=(0,E.of)(V);return(0,n.jsx)("div",{className:k.pickerDSLogo})}function V(k,te=!1){return{pickerDSLogo:(0,a.css)({height:"20px",width:"20px",filter:`invert(${te&&k.isLight?1:0})`})}}var z=e(41776),R=e(7078);const O="dashboards_dspicker_clicked",N={SEARCH:"search",OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",TOGGLE_FAVORITE:"toggle_favorite"};function F(k){const{current:te,onChange:q,hideTextValue:se=!1,width:re,inputId:Y,noDefault:X=!1,disabled:J=!1,placeholder:_="Select data source",...ee}=k,ae=(0,E.of)(G,k),[le,L]=(0,h.useState)(!1),[ie,oe]=(0,h.useState)(!1),[ue,ye]=(0,h.useState)(""),{onKeyDown:fe,keyboardEvents:Ee}=(0,T.d)(),Ae=(0,h.useRef)(null),Ge=(0,h.useMemo)(()=>(0,p.debounce)(We=>{(0,v.rR)(O,{item:N.SEARCH,query:We,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"})},300),[]),[Fe,Pe]=(0,h.useState)(),[Ve,me]=(0,h.useState)(),Se=(0,I.ps)(te),Qe=(0,I.ps)("-- Grafana --"),Ue=!te&&X?void 0:Se,Ie=ue&&le?(0,n.jsx)(W,{}):(0,n.jsx)(U,{dataSource:Ue}),Re=(0,I.Kr)({alerting:k.alerting,annotations:k.annotations,dashboard:k.dashboard,logs:k.logs,metrics:k.metrics,mixed:k.mixed,pluginId:k.pluginId,tracing:k.tracing,type:k.type,variables:k.variables}),Ke=(0,g.S)(),Le="bottom-start",ze=[(0,s.cY)(4),(0,s.Ej)({apply({availableHeight:We,elements:qe}){qe.floating.style.maxHeight=`${Math.max(200,We-20)}px`,qe.floating.style.minHeight="200px"}}),...x.getPositioningMiddleware(Le)],{refs:Be,floatingStyles:$e}=(0,d.we)({open:le,placement:Le,onOpenChange:L,middleware:ze,whileElementsMounted:o.ll,strategy:"fixed"}),Ye=(0,h.useCallback)(We=>{Be.setReference(We),Pe(We)},[Be]),de=(0,h.useCallback)(()=>{ye(""),L(!1),Fe?.focus()},[L,Fe]),{overlayProps:ge,underlayProps:pe}=(0,c.e)({onClose:de,isDismissable:!0,isOpen:le,shouldCloseOnInteractOutside:We=>Fe?!Fe.isSameNode(We):!1},Ae),{dialogProps:De}=(0,l.s)({"aria-label":"Opened data source picker list"},Ae);function Me(){L(!0),Fe?.focus()}function be(){Qe&&q(Qe,[M.dx])}function Oe(We){We.key==="Tab"&&!We.shiftKey&&le&&(We.preventDefault(),Ve?.focus()),We.key==="Tab"&&We.shiftKey&&le&&de(),fe(We)}function Ne(We){We.shiftKey?(We.preventDefault(),Fe?.focus()):de()}return(0,h.useEffect)(()=>{const We=Ee.subscribe({next:qe=>{switch(qe?.code){case"ArrowDown":Me(),qe.preventDefault();break;case"ArrowUp":Me(),qe.preventDefault();break;case"Escape":de(),qe.preventDefault();break}}});return()=>We.unsubscribe()}),(0,n.jsxs)("div",{className:ae.container,"data-testid":u.Tp.components.DataSourcePicker.container,children:[(0,n.jsx)("div",{className:ae.trigger,onClick:()=>{Me(),(0,v.rR)(O,{item:N.OPEN_DROPDOWN,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0",total_configured:Re.length})},children:(0,n.jsx)(m.p,{id:Y||"data-source-picker",className:ie?void 0:ae.input,"data-testid":u.Tp.components.DataSourcePicker.inputV2,"aria-label":(0,r.t)("datasources.data-source-picker.aria-label-select-a-data-source","Select a data source"),autoComplete:"off",prefix:Ue?Ie:void 0,suffix:(0,n.jsx)(y.I,{name:le?"search":"angle-down"}),placeholder:se?"":(0,R.q7)(Ue)||_,onFocus:()=>{oe(!0)},onBlur:()=>{oe(!1)},onKeyDown:Oe,value:ue,onChange:We=>{Me(),ye(We.currentTarget.value),We.currentTarget.value&&Ge(We.currentTarget.value)},ref:Ye,disabled:J})}),le?(0,n.jsxs)(b.ZL,{children:[(0,n.jsx)("div",{...pe}),(0,n.jsx)("div",{ref:Ae,...ge,...De,children:(0,n.jsx)(H,{...ee,style:$e,ref:Be.setFloating,footerRef:me,current:Ue,filterTerm:ue,keyboardEvents:Ee,onChange:(We,qe)=>{de(),We.uid!==Ue?.uid&&(q(We,qe),(0,v.rR)(O,{item:N.SELECT_DS,ds_type:We.type,is_favorite:Ke.enabled?Ke.isFavoriteDatasource(We.uid):void 0}))},onClose:de,onClickAddCSV:be,onDismiss:de,onNavigateOutsiteFooter:Ne,dataSources:Re})})]}):null]})}function G(k,te){return{container:(0,a.css)({position:"relative",cursor:te.disabled?"not-allowed":"pointer",width:k.spacing(te.width||"auto")}),trigger:(0,a.css)({cursor:"pointer",pointerEvents:te.disabled?"none":"auto"}),input:(0,a.css)({"input::placeholder":{color:te.disabled?k.colors.action.disabledText:k.colors.text.primary}})}}const H=h.forwardRef((k,te)=>{const{filterTerm:q,onChange:se,onClose:re,onClickAddCSV:Y,current:X,filter:J,dataSources:_}=k,ee=(0,h.useCallback)(L=>{se(L)},[se]),ae=(0,h.useCallback)(()=>{Y?.(),re(),(0,v.rR)(O,{item:N.ADD_FILE})},[Y,re]),le=(0,E.of)(K);return(0,n.jsxs)("div",{style:k.style,ref:te,className:le.container,children:[(0,n.jsx)(D.P,{showScrollIndicators:!0,children:(0,n.jsx)(B.S,{...k,enableKeyboardNavigation:!0,className:le.dataSourceList,current:X,onChange:ee,filter:L=>(J?J?.(L):!0)&&(0,R.Zn)(L,q),onClickEmptyStateCTA:()=>(0,v.rR)(O,{item:N.CONFIG_NEW_DS_EMPTY_STATE}),dataSources:_})}),(0,n.jsx)(i.n1,{children:(0,n.jsx)(w,{...k,onClickAddCSV:ae,onChange:ee,onNavigateOutsiteFooter:k.onNavigateOutsiteFooter})})]})});H.displayName="PickerContent";function K(k){return{container:(0,a.css)({display:"flex",flexDirection:"column",background:k.colors.background.elevated,borderRadius:k.shape.radius.default,boxShadow:k.shadows.z3,overflow:"hidden"}),picker:(0,a.css)({background:k.colors.background.secondary}),dataSourceList:(0,a.css)({flex:1}),footer:(0,a.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:k.spacing(1.5),borderTop:`1px solid ${k.colors.border.weak}`,backgroundColor:k.colors.background.secondary})}}function w({onClose:k,onChange:te,onClickAddCSV:q,...se}){const re=(0,E.of)(Q),Y=se.uploadFile&&P.Ay.featureToggles.editPanelCSVDragAndDrop,X=_=>{_.key==="Tab"&&se.onNavigateOutsiteFooter(_)},J=_=>{_.key==="Tab"&&_.shiftKey&&se.onNavigateOutsiteFooter(_)};return(0,n.jsxs)("div",{className:re.footer,children:[(0,n.jsx)(f.$s,{children:({showModal:_,hideModal:ee})=>(0,n.jsxs)(C.$n,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{k(),_(z.p,{reportedInteractionFrom:"ds_picker",tracing:se.tracing,dashboard:se.dashboard,mixed:se.mixed,metrics:se.metrics,type:se.type,annotations:se.annotations,variables:se.variables,alerting:se.alerting,pluginId:se.pluginId,logs:se.logs,filter:se.filter,uploadFile:se.uploadFile,current:se.current,onDismiss:ee,onChange:(ae,le)=>{te(ae,le),ee()},dataSources:se.dataSources}),(0,v.rR)(O,{item:N.OPEN_ADVANCED_DS_PICKER})},ref:se.footerRef,onKeyDown:Y?J:X,children:[(0,n.jsx)(r.x6,{i18nKey:"data-source-picker.open-advanced-button",children:"Open advanced data source picker"}),(0,n.jsx)(y.I,{name:"arrow-right"})]})}),Y&&(0,n.jsx)(C.$n,{variant:"secondary",size:"sm",onClick:q,onKeyDown:X,children:(0,n.jsx)(r.x6,{i18nKey:"datasources.footer.add-csv-or-spreadsheet",children:"Add csv or spreadsheet"})})]})}function Q(k){return{footer:(0,a.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:k.spacing(1.5),borderTop:`1px solid ${k.colors.border.weak}`,backgroundColor:k.colors.background.secondary})}}},76803:(ne,j,e)=>{"use strict";e.d(j,{K:()=>a});var n=e(42954);class a extends n.O{}},76808:(ne,j,e)=>{"use strict";e.d(j,{R:()=>B});var n=e(74848),a=e(22803),s=e(96540),d=e(79319),o=e(8642),l=e(51898),i=e(92745),c=e(63142),p=e(8207),h=e(41654),u=e(63527),r=e(21285),v=e(34343),g=e(13943),E=e(8073),x=e(99887),m=e(76319),y=e(65642),b=e(85622),D=e(72598),f=e(66615),C=e(34999),P=e(89640);const T="grafana.dashboard.sql-expressions-banner.dismissed",M=()=>(0,n.jsx)(f.b,{storageKey:T,defaultValue:!1,children:(z,R)=>z?null:(0,n.jsx)(C.F,{bottomSpacing:1,title:(0,i.t)("dashboard.transformation-picker-ng.sql-expressions-title","SQL Expressions"),severity:"info",onRemove:()=>R(!0),children:(0,n.jsxs)(h.B,{direction:"column",gap:1,children:[(0,n.jsx)(i.x6,{i18nKey:"dashboard.transformation-picker-ng.sql-expressions-message-description",children:"A new way to manipulate and transform the results of data source queries using MySQL-like syntax."}),(0,n.jsx)(P.Y,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/query-transform-data/sql-expressions/",external:!0,children:(0,n.jsx)(i.x6,{i18nKey:"dashboard.transformation-picker-ng.sql-expressions-message-link",children:"Learn more"})})]})})}),I="viewAll";function B(z){const R=(0,c.of)(U),{suffix:O,xforms:N,search:F,onSearchChange:G,onSearchKeyDown:H,showIllustrations:K,onTransformationAdd:w,selectedFilter:Q,data:k,onClose:te,onShowIllustrationsChange:q,onSelectedFilterChange:se}=z,re=[[I,(0,i.t)("dashboard.transformation-picker-ng.view-all","View all")],...Object.entries((0,D.qy)())],Y=(0,s.useCallback)(X=>{X?.click()},[]);return(0,n.jsx)(p._,{size:"md",onClose:()=>{te&&te()},title:(0,i.t)("dashboard.transformation-picker-ng.title-add-another-transformation","Add another transformation"),children:(0,n.jsxs)(h.B,{direction:"column",gap:2,children:[y.Ay?.featureToggles?.sqlExpressions&&(0,n.jsx)(M,{}),(0,n.jsxs)("div",{className:R.searchWrapper,children:[(0,n.jsx)(u.p,{"data-testid":l.Tp.components.Transforms.searchInput,className:R.searchInput,value:F??"",placeholder:(0,i.t)("dashboard.transformation-picker-ng.placeholder-search-for-transformation","Search for transformation"),onChange:G,onKeyDown:H,suffix:O,ref:Y,autoFocus:!0}),(0,n.jsxs)(h.B,{direction:"row",alignItems:"center",gap:.5,children:[(0,n.jsx)("span",{className:R.switchLabel,children:(0,n.jsx)(i.x6,{i18nKey:"dashboard.transformation-picker-ng.show-images",children:"Show images"})}),(0,n.jsx)(r.d,{value:K,onChange:()=>q&&q(!K)})]})]}),(0,n.jsx)(h.B,{direction:"row",wrap:"wrap",rowGap:1,columnGap:.5,children:re.map(([X,J])=>(0,n.jsx)(v.m,{onClick:()=>se&&se(X),label:J,selected:Q===X},X))}),(0,n.jsx)(W,{showIllustrations:K,transformations:N,data:k,onClick:X=>{w({value:X})}})]})})}function U(z){return{pickerInformationLine:(0,a.css)({fontSize:"16px",marginBottom:z.spacing(2)}),pickerInformationLineHighlight:(0,a.css)({verticalAlign:"middle"}),searchWrapper:(0,a.css)({display:"flex",flexWrap:"wrap",columnGap:z.spacing(2),rowGap:z.spacing(1),width:"100%",paddingBottom:z.spacing(1)}),searchInput:(0,a.css)({flexGrow:"1",width:"initial"}),switchLabel:(0,a.css)({whiteSpace:"nowrap"})}}function W({showIllustrations:z,transformations:R,onClick:O,data:N}){const F=(0,c.$j)(),G=(0,c.of)(V);return(0,n.jsx)(g.x,{columns:3,gap:1,children:R.map(H=>{let K=d.M.Applicable;H.transformation.isApplicable!==void 0&&(K=H.transformation.isApplicable(N));const w=K>0;let Q=null;H.transformation.isApplicableDescription!==void 0&&(typeof H.transformation.isApplicableDescription=="function"?Q=H.transformation.isApplicableDescription(N):Q=H.transformation.isApplicableDescription);let k=G.newCard;w||(k=(0,a.cx)(G.newCard,G.cardDisabled));const te=F.isDark?H.imageDark:H.imageLight;return(0,n.jsxs)(E.Z,{className:k,"data-testid":l.Tp.components.TransformTab.newTransform(H.name),onClick:()=>O(H.id),noMargin:!0,children:[(0,n.jsxs)(E.Z.Heading,{className:G.heading,children:[(0,n.jsxs)("div",{className:G.titleRow,children:[(0,n.jsx)("span",{children:H.name}),(0,n.jsx)("span",{className:G.pluginStateInfoWrapper,children:(0,n.jsx)(b.p,{state:H.state})})]}),H.tags&&H.tags.size>0&&(0,n.jsx)("div",{className:G.tagsWrapper,children:Array.from(H.tags).map(q=>(0,n.jsx)(x.E,{color:"darkgrey",icon:"tag-alt",text:q},q))})]}),(0,n.jsxs)(E.Z.Description,{className:G.description,children:[(0,n.jsx)("span",{children:o.h.getIfExists(H.id)?.description}),z&&(0,n.jsx)("span",{children:(0,n.jsx)("img",{className:G.image,src:te,alt:H.name})}),!w&&Q!==null&&(0,n.jsx)(m.K,{className:G.cardApplicableInfo,name:"info-circle",tooltip:Q})]})]},H.id)})})}function V(z){return{heading:(0,a.css)({fontWeight:400,"> button":{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:z.spacing(1)}}),titleRow:(0,a.css)({display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",width:"100%"}),description:(0,a.css)({fontSize:z.typography.bodySmall.fontSize,display:"flex",flexDirection:"column",justifyContent:"space-between"}),image:(0,a.css)({display:"block",maxWidth:"100%",marginTop:z.spacing(2)}),grid:(0,a.css)({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gridAutoRows:"1fr",gap:z.spacing(1),width:"100%",padding:`${z.spacing(1)} 0`}),cardDisabled:(0,a.css)({backgroundColor:z.colors.action.disabledBackground,img:{filter:"grayscale(100%)",opacity:.33}}),cardApplicableInfo:(0,a.css)({position:"absolute",bottom:z.spacing(1),right:z.spacing(1)}),newCard:(0,a.css)({gridTemplateRows:"min-content 0 1fr 0",marginBottom:0}),pluginStateInfoWrapper:(0,a.css)({marginLeft:z.spacing(.5)}),tagsWrapper:(0,a.css)({display:"flex",flexWrap:"wrap",gap:z.spacing(.5)})}}},76874:(ne,j,e)=>{"use strict";e.d(j,{x:()=>l});var n=e(74848),a=e(22803),s=e(92745),d=e(30703),o=e(63142);function l({error:c}){const p=(0,o.of)(i),h=c?.message??c?.data?.message??"Query error";return(0,n.jsxs)("div",{className:p.wrapper,children:[(0,n.jsx)("div",{className:p.icon,children:(0,n.jsx)(d.I,{name:"exclamation-triangle"})}),(0,n.jsxs)("div",{className:p.message,children:[h,c.traceId!=null&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{})," ",(0,n.jsx)("span",{children:(0,n.jsxs)(s.x6,{i18nKey:"query.query-error-alert.trace-id",values:{traceId:c.traceId},children:["(Trace ID: ","{{traceId}}",")"]})})]})]})]})}const i=c=>({wrapper:(0,a.css)({marginTop:c.spacing(.5),background:c.colors.background.secondary,display:"flex"}),icon:(0,a.css)({background:c.colors.error.main,color:c.colors.error.contrastText,padding:c.spacing(1)}),message:(0,a.css)({fontSize:c.typography.bodySmall.fontSize,fontFamily:c.typography.fontFamilyMonospace,padding:c.spacing(1)})})},77010:(ne,j,e)=>{"use strict";e.d(j,{G:()=>i});var n=e(96540),a=e(31595),s=e(17564),d=e(27489),o=e(61190);const l="grafana_plugin_";function i(){const p=(0,a.Q)();return(0,n.useMemo)(()=>{if(!p)throw new Error("No PluginContext found. The usePluginInteractionReporter() hook can only be used from a plugin.");const h=(0,s.S)(p)?(0,o.y)(p.instanceSettings):(0,o.L)(p.meta);return(u,r)=>{if(!c(u))throw new Error(`Interactions reported in plugins should start with: "${l}".`);return(0,d.rR)(u,{...r,...h})}},[p])}function c(p){return p.startsWith(l)&&p.length>l.length}},77154:(ne,j,e)=>{"use strict";e.d(j,{EL:()=>o,Nw:()=>c,or:()=>i,t:()=>d});var n=e(95004),a=e(41119);const s={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function d(p,h){let u;for(u in p){const r=s[u];for(const v of p[u])v<h.length&&(h[v]=r)}}function o(p,h){for(let u=0;u<h.length;u++)h[u]=p[Number(h[u])]}function l(p,h){for(const u of h)if(u!=null)return(0,a.by)(p,u);return n.PU.other}function i(p){const{schema:h,data:u}=p;if(!h||!h.fields)throw new Error("JSON needs a fields definition");const r=u?u.values.reduce((g,E)=>Math.max(g,E.length),0):0,v=h.fields.map((g,E)=>{let x=u?u.values[E]:[],m=x.length,y=g.type;m!==r&&(x.length=r,x.fill(void 0,m));let b=u?.entities?.[E];b&&d(b,x);let D=u?.enums?.[E];D&&(o(D,x),y=n.PU.string);const f=u?.nanos?.[E],C={...g,type:y??l(g.name,x),config:g.config??{},values:x,entities:b??{}};return f!=null&&(C.nanos=f),C});return{...h,fields:v,length:r}}function c(p){const h={values:[]},u=[];let r=!1;const v={refId:p.refId,meta:p.meta,name:p.name,fields:p.fields.map(g=>{const{values:E,nanos:x,state:m,display:y,...b}=g;return"entities"in b&&delete b.entities,h.values.push(E),x!=null?(u.push(x),r=!0):u.push(null),b})};return r&&(h.nanos=u),{schema:v,data:h}}},77197:(ne,j,e)=>{"use strict";e.d(j,{A:()=>i});var n=e(8934),a=e(37615),s=e(55386),d=e(17548);const l={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:c=>((0,a.l)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.$f)(c)),roundInterval:c=>((0,a.l)("kbn.ts","kbn.roundInterval()","@grafana/data"),d.roundInterval(c)),secondsToHms:c=>((0,a.l)("kbn.ts","kbn.secondsToHms()","@grafana/data"),d.secondsToHms(c)),secondsToHhmmss:c=>{const p=[],h=Math.floor(c/3600),u=Math.floor(c%3600/60),r=Math.floor(c%3600%60);return h>9?p.push(""+h):p.push("0"+h),u>9?p.push(""+u):p.push("0"+u),r>9?p.push(""+r):p.push("0"+r),p.join(":")},toPercent:(c,p)=>Math.floor(c/p*1e4)/100+"%",addSlashes:c=>c.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:c=>((0,a.l)("kbn.ts","kbn.describeInterval()","@grafana/data"),d.describeInterval(c)),intervalToSeconds:c=>((0,a.l)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),d.intervalToSeconds(c)),intervalToMs:c=>((0,a.l)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),d.intervalToMs(c)),calculateInterval:(c,p,h)=>((0,a.l)("kbn.ts","kbn.calculateInterval()","@grafana/data"),d.calculateInterval(c,p,h)),queryColorDot:(c,p)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+c,"font-size:"+p+"px"].join(";")+'"></div>',slugifyForUrl:c=>c.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:c=>((0,a.l)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.dO)(c)),toFixed:(c,p)=>{if(c===null)return"";const h=p?Math.pow(10,Math.max(0,p)):1,u=String(Math.round(c*h)/h);if(u.indexOf("e")!==-1||c===0)return u;if(p!=null){const r=u.indexOf("."),v=r===-1?0:u.length-r-1;if(v<p)return(v?u:u+".")+String(h).slice(1,p-v+1)}return u},toFixedScaled:(c,p,h,u,r)=>h===null?l.toFixed(c,p)+r:l.toFixed(c,h+u)+r,roundValue:(c,p)=>{if(c===null)return null;const h=Math.pow(10,p),u=(h*c).toFixed(p);return Math.round(parseFloat(u))/h},getUnitFormats:s.Ke};typeof Proxy<"u"?l.valueFormats=new Proxy(l.valueFormats,{get(c,p,h){if(typeof p!="string")throw{message:`Value format ${String(p)} is not a string`};const u=(0,s.j_)(p);return u?(r,v,g,E)=>(0,s.cN)(u(r,v,g,E?"utc":"browser")):Reflect.get(c,p,h)}}):l.valueFormats=(0,s.uH)();const i=l},77236:(ne,j,e)=>{"use strict";e.d(j,{AW:()=>l,Ay:()=>c,RQ:()=>d,dZ:()=>n,fV:()=>o,vB:()=>i});const n=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],a=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],s=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],d=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],o=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],l=[...n,...d,...o],i={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...a,...s].map(p=>p.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${l.map(p=>p.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},c=i},77256:(ne,j,e)=>{"use strict";e.d(j,{BK:()=>O,Cp:()=>se,D2:()=>w,E2:()=>le,ES:()=>X,GD:()=>N,Ht:()=>U,JM:()=>K,JZ:()=>ie,KT:()=>z,NH:()=>F,NJ:()=>k,S2:()=>I,Sl:()=>B,Yp:()=>C,bI:()=>T,bg:()=>P,i7:()=>M,i9:()=>te,nL:()=>R,qc:()=>Y,qy:()=>V,u7:()=>J,vV:()=>Q,w$:()=>b,y$:()=>re});var n=e(2543),a=e.n(n),s=e(41607),d=e(92745),o=e(68143),l=e(43173),i=e(15130),c=e(47797),p=e(94646),h=e(29609),u=e(21834),r=e(24619),v=e(95443),g=e(52161),E=e(33998),x=e(63895),m=e(29442),y=e(92367);function b(oe,ue,ye){const fe=(0,g.EV)(oe),Ee=p.UP(fe,ue);return m.PP.detailsPageLink(fe,Ee,ye?{returnTo:ye}:void 0)}function D(oe,ue,ye){const fe=oe.rulesSource.name,Ee=ruleId.fromRule(fe,oe.namespace.name,oe.groupName,ue);return rulesNav.detailsPageLink(fe,Ee,ye?{returnTo:ye}:void 0)}function f(oe){const ue=oe.ruleSourceName,ye=ruleId.fromRuleWithLocation(oe),fe=encodeURIComponent(ruleId.stringifyIdentifier(ye)),Ee=encodeURIComponent(ue);return createRelativeUrl(`/alerting/${Ee}/${fe}/view`)}function C(oe,ue){const{uid:ye,type:fe}=oe;return(0,y.G)("/explore",{left:JSON.stringify({datasource:oe.uid,queries:[{refId:"A",datasource:{uid:ye,type:fe},expr:ue}],range:{from:"now-1h",to:"now"}})})}function P(oe,ue=""){return(0,y.G)(`/alerting/notifications/receivers/${encodeURIComponent(oe)}/edit`,{alertmanager:ue})}function T(oe,ue=""){return(0,y.G)("/alerting/notifications",{search:oe,tab:"contact_points",alertmanager:ue})}function M(oe,ue=""){return(0,y.G)("/alerting/routes/mute-timing/edit",{muteName:oe,alertmanager:ue})}function I(oe){if((0,h.X4)(oe)||(0,h.Mj)(oe))return(0,y.z)(`/alerting/${encodeURIComponent(oe.ruleSourceName)}/${encodeURIComponent((0,p.PH)(oe.ruleName))}/find`);if((0,h.A4)(oe))return(0,y.z)(`/alerting/grafana/${oe.uid}/view`)}function B(oe){return oe.reduce((ue,{key:ye,value:fe})=>(ue[ye]=fe,ue),{})}const U=oe=>{const ue=oe.queryString===void 0?void 0:String(oe.queryString),ye=oe.alertState===void 0?void 0:String(oe.alertState),fe=oe.dataSource===void 0?void 0:String(oe.dataSource),Ee=oe.ruleType===void 0?void 0:String(oe.ruleType),Ae=oe.groupBy===void 0?void 0:String(oe.groupBy).split(","),Ge=oe.receivers===void 0?void 0:String(oe.receivers).split(",");return{queryString:ue,alertState:ye,dataSource:fe,groupBy:Ae,ruleType:Ee,receivers:Ge}},W=oe=>({queryString:oe.get("queryString")??void 0,contactPoint:oe.get("contactPoint")??void 0}),V=oe=>{const ue=oe.queryString===void 0?void 0:String(oe.queryString),ye=oe.silenceState===void 0?void 0:String(oe.silenceState);return{queryString:ue,silenceState:ye}};function z(oe){return Object.entries(oe).map(([ue,ye])=>({key:ue,value:ye}))}function R(oe,ue,ye){const fe=new URLSearchParams(ye);return ue&&fe.set(v.DD,ue),`${oe}?${fe.toString()}`}function O(oe,ue){const ye=new URLSearchParams;return ye.append("alertmanager",oe),(0,x.J9)(ue).forEach((Ee,Ae)=>ye.append(Ae,Ee)),(0,y.G)("/alerting/silence/new",ye)}function N(oe){return(0,y.G)(`/datasources/edit/${oe}`)}function F(oe){return(0,y.G)(`/dashboards/f/${oe}`)}function G(oe,ue){return createRelativeUrl(`/dashboards/f/${oe}/${ue}/alerting`)}function H(oe){return createRelativeUrl(`/dashboards/f/${oe}/settings`)}function K(oe){return(0,y.G)(`/d/${encodeURIComponent(oe)}`)}function w(oe,ue){const ye=new URLSearchParams({viewPanel:ue});return(0,y.G)(`/d/${encodeURIComponent(oe)}`,ye)}function Q(oe,ue){return(0,y.G)(`/alerting/notifications/receivers/${encodeURIComponent(oe)}/edit`,ue)}function k(oe,ue){return(0,y.G)("/alerting/routes/mute-timing/edit",{...ue,muteName:oe})}function te(oe,ue,ye,fe=1e3){const Ee=new Date().getTime(),Ae=()=>oe().catch(Ge=>{if(ue(Ge)&&new Date().getTime()-Ee<ye)return new Promise(Fe=>setTimeout(Fe,fe)).then(Ae);throw Ge});return Ae()}const q={[r.Gi.Alerting]:1,[r.cF.Firing]:1,[r.Gi.Error]:1,[r.Gi.Pending]:2,[r.Gi.Recovering]:2,[r.cF.Pending]:2,[r.cF.Recovering]:2,[r.cF.Inactive]:2,[r.Gi.NoData]:3,[r.Gi.Normal]:4,[r.cF.Unknown]:5};function se(oe,ue){if(oe===u.xB.Importance)return(0,n.sortBy)(ue,fe=>[q[(0,r.lh)(fe.state)],(0,h.RI)(fe).toLocaleLowerCase()]);if(oe===u.xB.TimeAsc)return(0,n.sortBy)(ue,fe=>[new Date(fe.activeAt)||new Date,(0,h.RI)(fe).toLocaleLowerCase()]);if(oe===u.xB.TimeDesc)return(0,n.sortBy)(ue,fe=>[new Date(fe.activeAt)||new Date,(0,h.RI)(fe).toLocaleLowerCase()]).reverse();const ye=(0,n.sortBy)(ue,fe=>(0,h.RI)(fe).toLocaleLowerCase());return oe===u.xB.AlphaDesc&&ye.reverse(),ye}function re(){return l.$.buildInfo.edition===s.r.OpenSource}function Y(){return i.TP.hasRole("Admin")||i.TP.isGrafanaAdmin}function X(){return l.$.buildInfo.env==="development"}function J(oe){return!!(oe&&typeof oe=="object"&&"message"in oe)}function _(oe){return typeof oe=="object"&&oe!==null}function ee(oe){return _(oe)&&"data"in oe}function ae(oe){return _(oe)?typeof Object.getOwnPropertyDescriptor(oe,"message")?.value=="string":!1}function le(oe){if((0,E.jX)(oe)&&oe.data.details)return oe.data.details.uid;if(J(oe)&&(0,n.isString)(oe.cause))return oe.cause}function L(oe,ue){return oe?le(oe)===ue:!1}function ie(oe){if((0,o.NF)(oe)){if((0,E.jX)(oe)){const ye=(0,E.LQ)(oe);if(ye)return ye}if(oe.message)return oe.message;if(ee(oe)&&ae(oe.data)){const ye=(0,c.do)(oe),fe=(0,c.q6)(oe),Ee=(0,c.ee)(oe);return(0,d.t)("alerting.errors.failedWith","{{-config}} failed with {{status}}: {{-message}}",{config:Ee,status:ye,message:fe})}return oe.statusText?oe.statusText:String(oe.status)||"Unknown error"}if(!J(oe))return String(oe);const ue=le(oe);if(typeof ue=="string"){const ye=(0,E.j2)(ue);if(ye)return ye}return oe.cause?`${oe.message}, cause: ${ie(oe.cause)}`:oe.message}},77295:(ne,j,e)=>{"use strict";e.d(j,{$o:()=>h,HO:()=>x,Zp:()=>E,iy:()=>v});var n=e(75505),a=e(28105),s=e(68143),d=e(55376),o=e(95443),l=e(52161),i=e(78467);const c="QUERY_NAMESPACE",p="QUERY_GROUP";function h(f){const C=r(f),P=u(f),T=f.apiVersion==="legacy"?"cortex":"mimir";return{rules:M=>({path:C,params:{subtype:T,...(0,i.ou)(M)}}),namespace:M=>{const{namespace:I,searchParams:B}=P.namespace(M);return{path:`${C}/${encodeURIComponent(I)}`,params:{subtype:T,...B}}},namespaceGroup:(M,I)=>{if(!M)throw new Error("Namespace UID is required to fetch ruler group");if(!I)throw new Error("Group name is required to fetch ruler group");const{namespace:B,searchParams:U}=P.namespace(M),{group:W,searchParams:V}=P.group(I);return{path:`${C}/${encodeURIComponent(B)}/${encodeURIComponent(W)}`,params:{subtype:T,...U,...V}}}}}function u(f){const C=f.dataSourceName===l.hY,P=T=>(0,d.Cl)(T)===!0?{group:p,searchParams:{group:T}}:{group:T,searchParams:{}};return C?{namespace:T=>({namespace:T,searchParams:{}}),group:P}:{namespace:T=>(0,d.Cl)(T)===!0?{namespace:c,searchParams:{namespace:T}}:{namespace:T,searchParams:{}},group:P}}function r(f){return`${`/api/ruler/${f.dataSourceUid}`}/api/v1/rules`}async function v(f,C){if(C?.dashboardUID&&f.dataSourceName!==l.hY)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:P,params:T}=h(f).rules(C);return m(P,{},T)}async function g(f,C){const{path:P,params:T}=h(f).namespace(C);return(await m(P,{},T))[C]||[]}async function E(f){return m(`/api/ruler/${(0,l.w5)(f)}/api/v1/rules/test/test`,null)}async function x(f,C,P){const{path:T,params:M}=h(f).namespaceGroup(C,P);return m(T,null,M)}async function m(f,C,P){try{return(await(0,n.s)((0,s.AI)().fetch({url:f,showErrorAlert:!1,showSuccessAlert:!1,params:P}))).data}catch(T){if(!y(T))throw T;if(D(T))return C;throw b(T)?{...T,data:{...T.data,message:o.UU}}:T}}function y(f){if(!(0,a.Gv)(f))return!1;const C="data"in f&&f.data!==null&&f.data!==void 0;return"status"in f&&Number.isFinite(f.status)&&C}function b(f){return f.status===404||f.status===500&&f.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function D(f){return f.status===404&&(f.data.message?.includes("group does not exist")||f.data.message?.includes("no rule groups found"))}},77345:(ne,j,e)=>{"use strict";e.d(j,{k:()=>R});var n=e(74848),a=e(17437),s=e(63142);function d(O){return(0,a.css)({".sr-only":{position:"absolute",width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",border:0}})}function o(O){return(0,a.css)({".alert-state-paused, .alert-state-pending":{color:O.colors.text.secondary,fontWeight:O.typography.fontWeightMedium},".alert-state-ok":{color:O.colors.success.text,fontWeight:O.typography.fontWeightMedium},".alert-state-warning":{color:O.colors.warning.text,fontWeight:O.typography.fontWeightMedium},".alert-state-critical":{color:O.colors.error.text,fontWeight:O.typography.fontWeightMedium}})}function l(O){return(0,a.css)({".card-section":{marginBottom:O.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:O.colors.background.secondary,boxShadow:"none",padding:O.spacing(2),borderRadius:O.shape.radius.default,"&:hover":{background:O.colors.emphasize(O.colors.background.secondary,.03)},".label-tag":{marginLeft:O.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:O.spacing(2)},".card-item-type":{color:O.colors.text.secondary,textTransform:"uppercase",fontSize:O.typography.size.sm,fontWeight:O.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:O.typography.size.sm},".card-item-name":{color:O.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:O.spacing(1)},".card-item-sub-name":{color:O.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:O.colors.text.secondary,textTransform:"uppercase",marginBottom:O.spacing(2),fontSize:O.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:O.typography.size.sm,display:"inline-block",marginLeft:O.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:O.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:O.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:O.typography.h3.fontSize},[O.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[O.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[O.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:O.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:O.shape.radius.default},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:O.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:O.typography.h4.fontSize},".card-item-sub-name":{fontSize:O.typography.size.sm},".layout-selector":{marginRight:0}}})}function i(O){return(0,a.css)({"code, pre, kbd, samp":{...O.typography.code,fontSize:O.typography.bodySmall.fontSize,backgroundColor:O.colors.background.primary,color:O.colors.text.primary,border:`1px solid ${O.colors.border.medium}`,borderRadius:O.shape.radius.default},code:{whiteSpace:"nowrap",padding:"2px 5px",margin:"0 2px"},pre:{display:"block",margin:O.spacing(0,0,2),lineHeight:O.typography.body.lineHeight,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",overflow:"auto",padding:"10px",code:{padding:0,color:"inherit",whiteSpace:"pre-wrap",backgroundColor:"transparent",border:0}}})}function c(O){return(0,a.css)({".react-resizable-handle":{visibility:"hidden"},".react-grid-item, #grafana-portal-container":{touchAction:"initial !important","&:hover":{".react-resizable-handle":{visibility:"visible"}}},".dragging-active":{"*":{cursor:"move",userSelect:"none"}},[O.breakpoints.down("md")]:{".react-grid-layout":{height:"unset !important"},".react-grid-item":{display:"block !important",transitionProperty:"none !important",position:"unset !important",transform:"translate(0px, 0px) !important",marginBottom:O.spacing(2)},".panel-repeater-grid-item":{height:"auto !important"}},".react-grid-item.react-grid-placeholder":{boxShadow:`0 0 4px ${O.colors.primary.border} !important`,background:`${O.colors.primary.transparent} !important`,zIndex:"-1 !important",opacity:"unset !important"},".react-grid-item > .react-resizable-handle::after":{borderRight:`2px solid ${O.isDark?O.v1.palette.gray1:O.v1.palette.gray3} !important`,borderBottom:`2px solid ${O.isDark?O.v1.palette.gray1:O.v1.palette.gray3} !important`},".react-grid-item.resizing.panel, .react-grid-item.panel.dropdown-menu-open, .react-grid-item.react-draggable-dragging.panel":{zIndex:O.zIndex.dropdown},".react-grid-item.cssTransforms":{transitionProperty:"none !important"},[O.transitions.handleMotion("no-preference")]:{".react-grid-layout--enable-move-animations":{".react-grid-item.cssTransforms":{transitionProperty:"transform !important"}}},".dashboard-selected-element":{outline:`1px dashed ${O.colors.primary.border}`,outlineOffset:"0px",borderRadius:O.shape.radius.default},".dashboard-selectable-element":{"&:hover":{outline:`1px dashed ${O.colors.border.strong}`,outlineOffset:"0px",borderRadius:O.shape.radius.default,backgroundColor:O.colors.emphasize(O.colors.background.canvas,.08)}},".dashboard-canvas-add-button":{display:"flex",opacity:.5,[O.transitions.handleMotion("no-preference","reduce")]:{transition:O.transitions.create("opacity")},filter:"grayscale(100%)","&:hover,:focus-within":{opacity:1,filter:"unset"}},".dashboard-visible-hidden-element":{position:"relative"},".dashboard-drop-target":{"&:is(:hover),&:not(:hover)":{outline:`2px solid ${O.colors.primary.border}`,outlineOffset:"0px",borderRadius:O.shape.radius.default}},".dashboard-draggable-transparent-selection":{"*::selection":{all:"inherit"}},".react-draggable-dragging":{opacity:.8}})}function p(O){return(0,a.css)({".delta-html":{background:O.colors.background.secondary,paddingTop:"5px",paddingBottom:"5px",userSelect:"none"},".diff-line":{color:O.colors.text.primary,fontFamily:O.typography.fontFamilyMonospace,fontSize:O.typography.size.sm,lineHeight:2,marginBottom:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative","&:after":{left:"-40px"}},".diff-line-number":{color:O.colors.text.secondary,display:"inline-block",fontSize:O.typography.size.xs,lineHeight:2.3,textAlign:"right",width:"30px"},".diff-line-number-hide":{visibility:"hidden"},".diff-line-icon":{color:O.colors.text.primary,fontSize:O.typography.size.xs,float:"right",position:"relative",top:"2px",right:"10px"},".diff-json-new, .diff-json-old, .diff-json-deleted, .diff-json-added":{color:O.v1.palette.gray5,".diff-line-number":{color:O.colors.text.primary}},".diff-json-new":{backgroundColor:O.isDark?"#457740":"#664e33"},".diff-json-old":{backgroundColor:O.isDark?"#a04338":"#5a372a"},".diff-json-added":{backgroundColor:O.colors.primary.shade},".diff-json-deleted":{backgroundColor:O.colors.error.shade},".diff-value":{userSelect:"all"},".diff-circle":{marginRight:"0.5em","*":{marginBottom:"1px"}},".diff-circle-changed":{color:"#f59433"},".diff-circle-added":{color:"#29d761"},".diff-circle-deleted":{color:"#fd474a"},".diff-item-added, .diff-item-deleted":{listStyle:"none"},".diff-group":{background:O.colors.background.secondary,fontSize:"16px",fontStyle:"normal",padding:"10px 15px",margin:O.spacing(2,0),".diff-group":{padding:"0 5px"}},".diff-group-name":{display:"inline-block",width:"100%",fontSize:"16px",paddingLeft:"1.75em",margin:"0 0 14px 0"},".diff-summary-key":{paddingLeft:"0.25em"},".diff-list":{paddingLeft:"40px",".diff-list":{paddingLeft:0}},".diff-item":{color:O.v1.palette.gray2,lineHeight:2.5,"> div":{display:"inline"}},".diff-item-changeset":{listStyle:"none"},".diff-label":{backgroundColor:O.colors.action.hover,borderRadius:O.shape.radius.default,color:O.colors.text.primary,display:"inline",fontSize:`${O.typography.fontSize}px`,margin:"0 5px",padding:"3px 8px"},".diff-linenum":{float:"right"},".diff-arrow":{color:O.colors.text.primary},".diff-block":{width:"100%",display:"inline-block"},".diff-block-title":{fontSize:"16px",display:"inline-block"},".diff-title":{fontSize:"16px"},".diff-change-container":{margin:"0 0",paddingLeft:"3em",paddingRight:0},".diff-change-group":{width:"100%",color:O.colors.text.primary,marginBottom:"14px"},".diff-change-item":{display:"inline-block"},".diff-change-title":{fontSize:"16px"},".bullet-position-container":{position:"relative",left:"-6px"},".diff-list-circle":{marginBottom:"3px"}})}var h=e(27629),u=e(35484);function r(O){return(0,a.css)({"*, *::before, *::after":{boxSizing:"inherit"},"[tabindex='-1']:focus":{outline:"none !important"},html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",boxSizing:"border-box",height:"100%",fontSize:`${O.typography.htmlFontSize}px`,fontFamily:O.typography.fontFamily,lineHeight:O.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:O.colors.mode},body:{height:"100%",width:"100%",position:"unset",color:O.colors.text.primary,backgroundColor:O.colors.background.canvas,paddingRight:"0 !important","@media print":{overflow:"visible"},"@page":{margin:0,size:"auto",padding:0},overflowY:"auto !important",fontVariantLigatures:"no-contextual",...O.typography.body,fontVariantNumeric:(0,h.$)("tabularNumbers")?"tabular-nums":"initial"},"h1, .h1":v(O.typography.h1),"h2, .h2":v(O.typography.h2),"h3, .h3":v(O.typography.h3),"h4, .h4":v(O.typography.h4),"h5, .h5":v(O.typography.h5),"h6, .h6":v(O.typography.h6),p:{margin:O.spacing(0,0,2)},textarea:{overflow:"auto",resize:"vertical"},button:{letterSpacing:O.typography.body.letterSpacing,"&:focus-visible":(0,u.getFocusStyles)(O),"&:focus":{outline:"none"}},label:{display:"inline-block"},figure:{margin:O.spacing(0,0,2)},img:{verticalAlign:"middle"},fieldset:{minWidth:0,padding:0,margin:0,border:0},legend:{display:"block",width:"100%",padding:0,marginBottom:O.spacing(1),fontSize:O.spacing(3),lineHeight:"inherit",border:0},"small, .small":{fontSize:O.typography.bodySmall.fontSize,fontWeight:"normal"},"b, strong":{fontWeight:O.typography.fontWeightMedium},em:{fontStyle:"italic",color:O.colors.text.primary},cite:{fontStyle:"normal"},blockquote:{padding:O.spacing(0,0,0,2),margin:O.spacing(0,0,2),borderLeft:`5px solid ${O.v1.palette.gray3}`,p:{marginBottom:0,fontSize:O.typography.fontSize*1.25,fontWeight:300,lineHeight:1.25},small:{display:"block",lineHeight:O.typography.body.lineHeight,color:O.v1.palette.gray2,"&:before":{content:"'\\2014 \\00A0'"}}},"q:before, q:after, blockquote:before, blockquote:after":{content:"''"},address:{display:"block",marginBottom:O.spacing(2),fontStyle:"normal",lineHeight:O.typography.body.lineHeight},"a.external-link":{color:O.colors.text.link,textDecoration:"normal","&:hover":{color:O.colors.text.link,textDecoration:"underline"}},".link":{color:O.colors.text.primary,cursor:"pointer"},".link:hover":{color:O.colors.text.maxContrast},".pointer":{cursor:"pointer"},"audio, canvas, progress, video":{display:"inline-block",verticalAlign:"baseline"},"audio:not([controls])":{display:"none",height:0},"abbr[title]":{borderBottom:"1px dotted",cursor:"help"},dfn:{fontStyle:"italic"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sup:{top:"-0.5em"},sub:{bottom:"-0.25em"},hr:{marginTop:O.spacing(2),marginBottom:O.spacing(2),border:0,borderTop:`1px solid ${O.colors.border.medium}`},"mark, .mark":{background:O.colors.warning.main},"ul, ol, dl":{marginTop:0,marginBottom:0,padding:0},"ul ul, ul ol, ol ol, ol ul":{marginBottom:0},li:{lineHeight:O.typography.body.lineHeight},dd:{marginBottom:O.spacing(1),marginLeft:0},"dt, dd":{lineHeight:O.typography.body.lineHeight},dt:{fontWeight:O.typography.fontWeightMedium},"button, input, optgroup, select, textarea":{borderRadius:0,color:"inherit",font:"inherit",lineHeight:"inherit",margin:0},optgroup:{fontWeight:"bold"},'button, html input[type="button"], input[type="submit"]':{WebkitAppearance:"button",cursor:"pointer"},'input[type="search"]':{WebkitAppearance:"none"},'input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration':{WebkitAppearance:"none"},table:{backgroundColor:"transparent",borderCollapse:"collapse",borderSpacing:0},caption:{paddingTop:O.spacing(.5),paddingBottom:O.spacing(.5),color:O.colors.text.secondary,textAlign:"left",captionSide:"bottom"},th:{fontWeight:O.typography.fontWeightMedium,textAlign:"left"},"td, th":{padding:0},".muted":{color:O.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:O.colors.text.primary},".text-warning":{color:O.colors.warning.text,"&:hover, &:focus":{color:O.colors.emphasize(O.colors.warning.text,.15)}},".text-error":{color:O.colors.error.text,"&:hover, &:focus":{color:O.colors.emphasize(O.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:O.colors.emphasize(O.colors.success.text,.15)}},a:{cursor:"pointer",color:O.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,u.getFocusStyles)(O),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},"[role='button']":{cursor:"pointer"},"[hidden]":{display:"none !important"},"a, area, button, [role='button'], input, label, select, summary, textarea":{touchAction:"manipulation"},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:O.components.textHighlight.background,color:O.components.textHighlight.text,padding:0},".template-variable":{color:O.colors.primary.text},".modal-header-title":{fontSize:O.typography.size.lg,float:"left",paddingTop:O.spacing(1),margin:O.spacing(0,2)}})}function v(O){return{margin:0,fontSize:O.fontSize,lineHeight:O.lineHeight,fontWeight:O.fontWeight,letterSpacing:O.letterSpacing,fontFamily:O.fontFamily,marginBottom:"0.45em"}}function g(O){return(0,a.css)({"iframe.intercom-borderless-frame":{colorScheme:O.colors.mode}})}function E(O){return(0,a.css)({".filter-table *":{boxSizing:"border-box"},".filter-table":{width:"100%",borderCollapse:"separate",tbody:{"tr:nth-of-type(odd)":{background:O.colors.emphasize(O.colors.background.primary,.02)}},th:{width:"auto",padding:O.spacing(.5,1),textAlign:"left",lineHeight:"30px",height:"30px",whiteSpace:"nowrap"},td:{padding:O.spacing(.5,1),lineHeight:"30px",height:"30px",whiteSpace:"nowrap"},".link-td":{padding:0,lineHeight:"30px",height:"30px",whiteSpace:"nowrap",a:{display:"block",padding:O.spacing(0,1),height:"30px"}},".ellipsis":{display:"block",width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},".expanded":{borderColor:O.components.panel.background},".expanded > td":{paddingBottom:0},".filter-table__avatar":{width:"25px",height:"25px",borderRadius:O.shape.radius.circle},"&--hover":{"tbody tr:hover":{background:O.colors.emphasize(O.colors.background.primary,.05)}}}})}function x(O){const N=typeof window<"u"&&window.__grafana_public_path__,F=N?`${N}fonts/`:"public/fonts/";return(0,a.css)([{"@font-face":{fontFamily:"Roboto Mono",fontStyle:"normal",fontWeight:400,fontDisplay:"swap",src:`url('${F}roboto/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSh0mQ.woff2') format('woff2')`,unicodeRange:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD"}},{"@font-face":{fontFamily:"Roboto Mono",fontStyle:"normal",fontWeight:500,fontDisplay:"swap",src:`url('${F}roboto/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSh0mQ.woff2') format('woff2')`,unicodeRange:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD"}},{"@font-face":{fontFamily:"Inter",fontStyle:"normal",fontWeight:400,fontDisplay:"swap",src:`url('${F}inter/Inter-Regular.woff2') format('woff2')`}},{"@font-face":{fontFamily:"Inter",fontStyle:"normal",fontWeight:500,fontDisplay:"swap",src:`url('${F}inter/Inter-Medium.woff2') format('woff2')`}},{"@font-face":{fontFamily:"Inter",fontStyle:"italic",fontWeight:400,fontDisplay:"swap",src:`url('${F}inter/Inter-Italic.woff2') format('woff2')`}},{"@font-face":{fontFamily:"Inter",fontStyle:"italic",fontWeight:500,fontDisplay:"swap",src:`url('${F}inter/Inter-MediumItalic.woff2') format('woff2')`}}])}function m(O){return(0,a.css)({"input, button, select, textarea":{fontFamily:O.typography.body.fontFamily,fontSize:O.typography.body.fontSize,fontWeight:O.typography.body.fontWeight,lineHeight:O.typography.body.lineHeight},"input, select":{backgroundColor:O.components.input.background,color:O.components.input.text,border:"none",boxShadow:"none"},"input, textarea":{"&::placeholder":{color:O.colors.text.disabled}},'input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button':{WebkitAppearance:"none",margin:0},'input[type="number"]':{MozAppearance:"textfield"},'select, input[type="file"]':{height:O.components.height.md,lineHeight:O.components.height.md},select:{width:"220px",border:`1px solid ${O.components.input.borderColor}`,backgroundColor:O.components.input.background},"select[multiple], select[size], textarea":{height:"auto"},'select:focus, input[type="file"]:focus, input[type="radio"]:focus, input[type="checkbox"]:focus':{outline:"5px auto -webkit-focus-ring-color",outlineOffset:"-2px"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"},"input[disabled], select[disabled], textarea[disabled], input[readonly], select[readonly], textarea[readonly]":{cursor:"not-allowed",backgroundColor:O.colors.action.disabledBackground},'input[type="radio"][disabled], input[type="checkbox"][disabled], input[type="radio"][readonly], input[type="checkbox"][readonly]':{cursor:"not-allowed",backgroundColor:"transparent"},"input:-webkit-autofill, input:-webkit-autofill:hover, input:-webkit-autofill:focus, input:-webkit-autofill, textarea:-webkit-autofill, textarea:-webkit-autofill:hover, textarea:-webkit-autofill:focus, select:-webkit-autofill, select:-webkit-autofill:hover, select:-webkit-autofill:focus":{WebkitBoxShadow:`0 0 0px 1000px ${O.components.input.background} inset !important`,WebkitTextFillColor:O.components.input.text,boxShadow:`0 0 0px 1000px ${O.components.input.background} inset`,border:`1px solid ${O.components.input.background}`},".gf-form":{display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",marginBottom:O.spacing(.5),"&--offset-1":{marginLeft:O.spacing(2)},"&--grow":{flexGrow:1},"&--flex-end":{justifyContent:"flex-end"},"&--align-center":{alignContent:"center"},"&--alt":{flexDirection:"column",alignItems:"flex-start",".gf-form-label":{padding:"4px 0"}}},".gf-form--has-input-icon":{position:"relative",marginRight:O.spacing(.5),".gf-form-input-icon":{position:"absolute",top:"8px",fontSize:O.typography.size.lg,left:"10px",color:O.colors.text.disabled},"> input":{paddingLeft:"35px","&:focus + .gf-form-input-icon":{color:O.colors.text.secondary}},".Select--multi .Select-multi-value-wrapper, .Select-placeholder":{paddingLeft:"30px"}},".gf-form-disabled":{color:O.colors.text.secondary,".gf-form-select-wrapper::after":{color:O.colors.text.secondary},"a, .gf-form-input":{color:O.colors.text.secondary}},".gf-form-group":{marginBottom:O.spacing(5)},".gf-form-inline":{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start","&--nowrap":{flexWrap:"nowrap"},"&--xs-view-flex-column":{flexDirection:"row",flexWrap:"nowrap",[O.breakpoints.down("sm")]:{flexDirection:"column"}},".select-container":{marginRight:O.spacing(.5)},".gf-form-spacing":{marginRight:O.spacing(.5)}},".gf-form-button-row":{paddingTop:O.spacing(3),"a, button":{marginRight:O.spacing(2)}},".gf-form-label":{display:"flex",alignItems:"center",padding:O.spacing(0,1),flexShrink:0,fontWeight:O.typography.fontWeightMedium,fontSize:O.typography.size.sm,backgroundColor:O.colors.background.secondary,height:"32px",lineHeight:"32px",marginRight:O.spacing(.5),borderRadius:O.shape.radius.default,justifyContent:"space-between",border:"none","&--grow":{flexGrow:1},"&--transparent":{backgroundColor:"transparent",border:0,textAlign:"right",paddingLeft:0},"&--variable":{color:O.colors.primary.text,background:O.components.panel.background,border:`1px solid ${O.components.panel.borderColor}`},"&--btn":{border:"none",borderRadius:O.shape.radius.default,"&:hover":{background:O.colors.background.secondary,color:O.colors.text.primary}},"&:disabled":{color:O.colors.text.secondary}},".gf-form-label + .gf-form-label":{marginRight:O.spacing(.5)},".gf-form-pre":{display:"block !important",flexGrow:1,margin:0,marginRight:O.spacing(.5),border:"1px solid transparent",borderLeft:"none",borderRadius:O.shape.radius.default},".gf-form-textarea":{maxWidth:"650px"},".gf-form-input":{display:"block",width:"100%",height:"32px",padding:O.spacing(0,1),fontSize:O.typography.size.md,lineHeight:"18px",color:O.components.input.text,backgroundColor:O.components.input.background,backgroundImage:"none",backgroundClip:"padding-box",border:`1px solid ${O.components.input.borderColor}`,borderRadius:O.shape.radius.default,marginRight:O.spacing(.5),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&textarea":{overflow:"auto",whiteSpace:"pre-wrap",padding:`6px ${O.spacing(1)}`,minHeight:"32px",height:"auto"},"&::-ms-expand":{backgroundColor:"transparent",border:0,display:"none"},"&:focus":{borderColor:O.colors.primary.border,outline:"none"},"&::placeholder":{color:O.colors.text.disabled,opacity:1},"&:disabled, &[readonly]":{backgroundColor:O.colors.action.disabledBackground,opacity:1},"&:disabled":{cursor:"not-allowed"},"&.gf-size-auto":{width:"auto"},"&--dropdown":{paddingRight:O.spacing(3),position:"relative",display:"flex",alignItems:"center","&::after":{position:"absolute",top:"36%",right:"11px",fontSize:"11px",backgroundColor:"transparent",color:O.colors.text.primary,font:`normal normal normal ${O.typography.size.sm}/1 FontAwesome`,content:'"\f0d7"',pointerEvents:"none"}},"&--has-help-icon":{paddingRight:O.spacing(4)}},".gf-form-select-wrapper":{position:"relative",backgroundColor:O.components.input.background,marginRight:O.spacing(.5),".gf-form-select-icon":{position:"absolute",zIndex:1,top:"50%",marginTop:"-7px","+ .gf-form-input":{position:"relative",zIndex:2,paddingLeft:O.spacing(4),backgroundColor:"transparent",option:{color:O.v1.palette.black}}},".gf-form-input":{marginRight:0,lineHeight:"32px"},"select.gf-form-input":{textIndent:"0.01px",textOverflow:"''",paddingRight:O.spacing(4),appearance:"none","&:-moz-focusring":{outline:"none",color:"transparent",textShadow:`0 0 0 ${O.colors.text.primary}`},"&.ng-empty":{color:O.colors.text.secondary}},"&::after":{position:"absolute",top:"36%",right:"11px",backgroundColor:"transparent",color:O.colors.text.primary,font:`normal normal normal ${O.typography.size.sm}/1 FontAwesome`,content:'"\f0d7"',pointerEvents:"none",fontSize:"11px"},"&--has-help-icon":{"&::after":{right:O.spacing(4)}}},".gf-form--v-stretch":{alignItems:"stretch"},".gf-form-btn":{padding:O.spacing(0,1),marginRight:O.spacing(.5),lineHeight:"18px",fontSize:O.typography.size.sm,flexShrink:0,flexGrow:0},".gf-form-help-icon":{flexGrow:0,color:O.colors.text.secondary,"&:hover":{color:O.colors.text.primary}},".cta-form":{position:"relative",padding:O.spacing(3),backgroundColor:O.colors.background.secondary,marginBottom:O.spacing(3),borderTop:`3px solid ${O.colors.success.main}`},".input-small":{width:"90px"}})}function y(O){return(0,a.css)([])}function b(O){return(0,a.css)({".json-formatter-row":{fontFamily:"monospace","&, a, a:hover":{color:O.colors.text.primary,textDecoration:"none"},".json-formatter-row":{marginLeft:O.spacing(2)},".json-formatter-children":{"&.json-formatter-empty":{opacity:.5,marginLeft:O.spacing(2),"&::after":{display:"none"},"&.json-formatter-object::after":{content:"'No properties'"},"&.json-formatter-array::after":{content:"'[]'"}}},".json-formatter-string":{color:O.isDark?"#23d662":"green",whiteSpace:"pre-wrap",wordWrap:"break-word",wordBreak:"break-all"},".json-formatter-number":{color:O.isDark?O.colors.primary.text:O.colors.primary.main},".json-formatter-boolean":{color:O.isDark?O.colors.primary.text:O.colors.error.main},".json-formatter-null":{color:O.isDark?"#eec97d":"#855a00"},".json-formatter-undefined":{color:O.isDark?"rgb(239, 143, 190)":"rgb(202, 11, 105)"},".json-formatter-function":{color:O.isDark?"#fd48cb":"#ff20ed"},".json-formatter-url":{textDecoration:"underline",color:O.isDark?"#027bff":O.colors.primary.main,cursor:"pointer"},".json-formatter-bracket":{color:O.isDark?"#9494ff":O.colors.primary.main},".json-formatter-key":{color:O.isDark?"#23a0db":"#00008b",cursor:"pointer",paddingRight:O.spacing(.25),marginRight:O.spacing(.5)},".json-formatter-constructor-name":{cursor:"pointer"},".json-formatter-array-comma":{marginRight:O.spacing(.5)},".json-formatter-toggler":{lineHeight:"16px",fontSize:O.typography.size.xs,verticalAlign:"middle",opacity:.6,cursor:"pointer",paddingRight:O.spacing(.25),"&::after":{display:"inline-block",[O.transitions.handleMotion("no-preference")]:{transition:"transform 100ms ease-in"},content:"'\u25BA'"}},"> a > .json-formatter-preview-text":{opacity:0,[O.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.15s ease-in"},fontStyle:"italic"},"&:hover > a > .json-formatter-preview-text":{opacity:.6},"&.json-formatter-open":{"> .json-formatter-toggler-link .json-formatter-toggler::after":{transform:"rotate(90deg)"},"> .json-formatter-children::after":{display:"inline-block"},"> a > .json-formatter-preview-text":{display:"none"},"&.json-formatter-empty::after":{display:"block"}}}})}function D(O){return(0,a.css)({".gf-form-select-box__control":{width:"100%",marginRight:O.spacing(.5),backgroundColor:O.components.input.background,border:`1px solid ${O.components.input.borderColor}`,borderRadius:O.shape.radius.default,color:O.components.input.text,cursor:"default",height:O.spacing(4),outline:"none",overflow:"hidden",position:"relative"},".gf-form-select-box__control--is-focused":{backgroundColor:O.components.input.background,borderColor:O.colors.primary.border,outline:"none",boxShadow:`inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px ${O.colors.primary.border}`},".gf-form-select-box__control--is-disabled":{backgroundColor:O.colors.action.disabledBackground},".gf-form-select-box__control--menu-right":{".gf-form-select-box__menu":{right:0,left:"unset"}},".gf-form-select-box__input":{input:{lineHeight:"inherit"}},".gf-form-select-box__menu":{background:O.colors.background.primary,boxShadow:O.shadows.z3,position:"absolute",zIndex:O.zIndex.dropdown,minWidth:"100%","&-notice--no-options":{backgroundColor:O.components.input.background,padding:"10px"}},".gf-form-select-box__menu-list":{overflowY:"auto",maxHeight:"300px",maxWidth:"600px"},".tag-filter .gf-form-select-box__menu":{width:"100%"},".gf-form-select-box__multi-value":{display:"inline",margin:"0 6px 0 0",cursor:"pointer"},".gf-form-select-box__multi-value__remove":{textAlign:"center",display:"inline-block",marginLeft:"2px",position:"relative"},".gf-form-select-box__multi-value__label":{display:"inline",verticalAlign:"middle"},".gf-form-select-box__option":{borderLeft:"2px solid transparent",whiteSpace:"nowrap",backgroundColor:O.components.input.background,"&.gf-form-select-box__option--is-focused":{color:O.colors.text.primary,background:O.colors.action.hover,borderImage:O.colors.gradients.brandVertical,borderImageSlice:1,borderStyle:"solid",borderTop:0,borderRight:0,borderBottom:0,borderLeftWidth:"2px"},"&.gf-form-select-box__option--is-selected":{".fa":{color:O.colors.text.primary}}},".gf-form-select-box__placeholder":{color:O.colors.text.disabled},".gf-form-select-box__control--is-focused .gf-form-select-box__placeholder":{display:"none"},".gf-form-select-box__value-container":{display:"inline-block",padding:"6px 20px 6px 10px",verticalAlign:"middle","> div":{display:"inline-block",verticalAlign:"middle"}},".gf-form-select-box__indicators":{position:"absolute",height:"100%",right:"8px",top:"1px",display:"inline-block",textAlign:"right"},".gf-form-input--form-dropdown":{padding:0,border:0,overflow:"visible",position:"relative"},".gf-form--has-input-icon":{".gf-form-select-box__value-container":{paddingLeft:"30px"}},".gf-form-select-box__desc-option":{display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%"},".gf-form-select-box__desc-option__body":{display:"flex",flexDirection:"column",flexGrow:1,paddingRight:"10px",fontWeight:O.typography.fontWeightMedium},".gf-form-select-box__desc-option__desc":{fontWeight:"normal",fontSize:O.typography.bodySmall.fontSize,color:O.colors.text.secondary},".gf-form-select-box__desc-option__img":{width:"16px",marginRight:"10px"},".gf-form-select-box__option-group__header":{display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${O.v1.palette.dark9}`,textTransform:"capitalize",".fa":{paddingRight:"2px"}},".gf-form-select-box-button-select":{height:"auto"},".select-button":{display:"flex",alignItems:"center"}})}function f(O){return(0,a.css)({".markdown-html":{img:{maxWidth:"100%"},"ul, ol":{paddingLeft:O.spacing(3),marginBottom:O.spacing(2)},table:{marginBottom:O.spacing(2),"td, th":{padding:O.spacing(.5,1)},th:{fontWeight:O.typography.fontWeightMedium,background:O.colors.background.secondary}},"table, th, td":{border:`1px solid ${O.colors.border.medium}`,borderCollapse:"collapse"},a:{color:O.colors.text.link,textDecoration:"none","&:hover":{color:O.colors.text.link,textDecoration:"underline"}},"p:last-child":{marginBottom:0},"table:last-child, ul:last-child, ol:last-child":{marginBottom:0}}})}function C(O){const N=O.breakpoints.values.xxl+O.spacing.gridSize*2+O.components.sidemenu.width;return(0,a.css)({".grafana-app":{display:"flex",flexDirection:"column",height:"100vh"},".main-view":{display:"flex",flexDirection:"column",flexGrow:1,position:"relative",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:O.spacing(2),paddingRight:O.spacing(2),[O.breakpoints.up("sm")]:{margin:O.spacing(0,1)},[O.breakpoints.up("md")]:{margin:O.spacing(0,2)},[`@media (min-width: ${N}px)`]:{maxWidth:`${O.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:O.spacing(2),paddingLeft:O.spacing(2),paddingRight:O.spacing(2)},".page-body":{padding:O.spacing(1),background:O.components.panel.background,border:`1px solid ${O.components.panel.borderColor}`,marginBottom:"32px",[O.breakpoints.up("md")]:{padding:O.spacing(2)},[O.breakpoints.up("lg")]:{padding:O.spacing(3)}},".page-heading":{fontSize:O.typography.h4.fontSize,marginTop:0,marginBottom:O.spacing(2)},".page-action-bar":{marginBottom:O.spacing(2),display:"flex",alignItems:"flex-start",gap:O.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:O.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:O.spacing(2)},".page-sub-heading-icon":{marginLeft:O.spacing(1),marginTop:O.spacing(.5)},".page-hidden":{display:"none"}})}function P(O){return(0,a.css)({".query-editor-row":{marginBottom:"2px","&--disabled":{".query-keyword":{color:O.colors.text.secondary}}},".query-keyword":{fontWeight:O.typography.fontWeightMedium,color:`${O.colors.primary.text} !important`},".query-part":{backgroundColor:O.colors.background.secondary,"&:hover":{background:O.colors.emphasize(O.colors.background.secondary,.03)}},".query-segment-operator":{color:`${O.v1.palette.orange} !important`},".tight-form-func":{background:O.colors.background.secondary},'input[type="text"].tight-form-func-param':{fontSize:O.typography.bodySmall.fontSize,background:"transparent",border:"none",margin:0,padding:0},".tight-form-func-controls":{textAlign:"center",".fa-arrow-left":{float:"left",position:"relative",top:2},".fa-arrow-right":{float:"right",position:"relative",top:2},".fa-remove":{marginLeft:"10px"}}})}var T=e(21348);const M=O=>(0,a.css)({".react-loading-skeleton":T.Q});function I(O){return(0,a.css)({".slate-query-field":{fontSize:O.typography.fontSize,fontFamily:O.typography.fontFamilyMonospace,height:"auto",wordBreak:"break-word",overflow:"auto"},".slate-query-field__wrapper":{position:"relative",display:"inline-block",padding:"6px 8px",minHeight:"32px",width:"100%",color:O.colors.text.primary,backgroundColor:O.components.input.background,backgroundImage:"none",border:`1px solid ${O.components.input.borderColor}`,borderRadius:O.shape.radius.default,[O.transitions.handleMotion("no-preference")]:{transition:"all 0.3s"},lineHeight:"18px"},".slate-query-field__wrapper--disabled":{backgroundColor:"inherit",cursor:"not-allowed"},".slate-typeahead":{".typeahead":{position:"relative",zIndex:O.zIndex.typeahead,borderRadius:O.shape.radius.default,border:`1px solid ${O.components.panel.borderColor}`,maxHeight:"66vh",overflowY:"scroll",overflowX:"hidden",outline:"none",listStyle:"none",background:O.components.panel.background,color:O.colors.text.primary,boxShadow:O.shadows.z2},".typeahead-group__title":{color:O.colors.text.secondary,fontSize:O.typography.size.sm,lineHeight:O.typography.body.lineHeight,padding:O.spacing(1)},".typeahead-item":{height:"auto",fontFamily:O.typography.fontFamilyMonospace,padding:O.spacing(1,1,1,2),fontSize:O.typography.size.sm,textOverflow:"ellipsis",overflow:"hidden",zIndex:1,display:"block",whiteSpace:"nowrap",cursor:"pointer",[O.transitions.handleMotion("no-preference")]:{transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}},".typeahead-item__selected":{backgroundColor:O.isDark?O.v1.palette.dark9:O.v1.palette.gray6,".typeahead-item-hint":{fontSize:O.typography.size.xs,color:O.colors.text.primary,whiteSpace:"normal"}},".typeahead-match":{color:O.v1.palette.yellow,borderBottom:`1px solid ${O.v1.palette.yellow}`,padding:"inherit",background:"inherit"}},".slate-query-field, .prism-syntax-highlight":{".token.comment, .token.block-comment, .token.prolog, .token.doctype, .token.cdata":{color:O.colors.text.secondary},".token.variable, .token.entity":{color:O.colors.text.primary},".token.property, .token.tag, .token.constant, .token.symbol, .token.deleted":{color:O.colors.error.text},".token.attr-value, .token.selector, .token.string, .token.char, .token.builtin, .token.inserted":{color:O.colors.success.text},".token.boolean, .token.number, .token.operator, .token.url":{color:"#fe85fc"},".token.function, .token.attr-name, .token.function-name, .token.atrule, .token.keyword, .token.class-name":{color:O.colors.primary.text},".token.punctuation, .token.regex, .token.important":{color:O.v1.palette.orange},".token.important":{fontWeight:"normal"},".token.bold":{fontWeight:"bold"},".token.italic":{fontStyle:"italic"},".token.entity":{cursor:"help"},".namespace":{opacity:.7}}})}function B(O){return(0,a.css)({".uplot":{fontFamily:"inherit"},".u-select":{background:"rgba(120, 120, 130, 0.2)"},".u-hz .u-cursor-x, .u-vt .u-cursor-y":{borderRight:"1px dashed rgba(120, 120, 130, 0.5)"},".u-hz .u-cursor-y, .u-vt .u-cursor-x":{borderBottom:"1px dashed rgba(120, 120, 130, 0.5)"},".shared-crosshair:not(.plot-active) .u-cursor-pt":{display:"none !important"}})}function U(O,N,F="#fff",G="0px 1px 0 rgba(0, 0, 0, 0.1)"){return{backgroundColor:O,backgroundImage:`linear-gradient(to bottom, ${O}, ${N})`,backgroundRepeat:"repeat-x",color:F,textShadow:G,borderColor:O,"&:hover, &:focus, &:active, &.active, &.disabled, &[disabled]":{color:F,backgroundImage:"none",backgroundColor:O}}}function W(O,N,F,G){return{padding:`${O} ${N}`,fontSize:F,borderRadius:G}}function V(O,N){let F={};for(let G=1;G<=N;G++){const H=`${O.spacing(2*G)} !important`;F[`.width-${G}`]={width:H},F[`.max-width-${G}`]={maxWidth:H,flexGrow:1},F[`.min-width-${G}`]={minWidth:H},F[`.offset-width-${G}`]={marginLeft:H}}return F}function z(O){return(0,a.css)({".highlight-word":{color:O.v1.palette.orange},".hide":{display:"none"},".show":{display:"block"},".invisible":{visibility:"hidden !important"},".absolute":{position:"absolute"},".flex-grow-1":{flexGrow:1},".flex-shrink-1":{flexShrink:1},".flex-shrink-0":{flexShrink:0},".center-vh":{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",justifyItems:"center"},".btn":{display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:O.typography.fontWeightMedium,lineHeight:O.typography.body.lineHeight,textAlign:"center",verticalAlign:"middle",cursor:"pointer",border:"none",height:`${O.spacing.gridSize*O.components.height.md}px`,...W(O.spacing(0),O.spacing(2),`${O.typography.fontSize}px`,O.shape.radius.default),"&, &:active, &.active":{"&:focus, &.focus":{outline:"none"}},"&:focus, &:hover":{textDecoration:"none"},"&.focus":{textDecoration:"none"},"&:active, &.active":{backgroundImage:"none",outline:0},"&.disabled, &[disabled], &:disabled":{cursor:"not-allowed",opacity:.65,boxShadow:"none",pointerEvents:"none"}},".btn-small":{...W(O.spacing(.5),O.spacing(1),O.typography.size.sm,O.shape.radius.default),height:`${O.spacing.gridSize*O.components.height.sm}px`},".btn-mini":{...W(O.spacing(.5),O.spacing(1),O.typography.size.sm,O.shape.radius.default),height:`${O.spacing.gridSize*O.components.height.sm}px`},".btn-success, .btn-primary":{...U(O.colors.primary.main,O.colors.primary.shade)},".btn-danger":{...U(O.colors.error.main,O.colors.error.shade)},".btn-secondary":{...U(O.colors.secondary.main,O.colors.secondary.shade,O.colors.text.primary)},".btn-inverse":{...U(O.isDark?O.v1.palette.dark6:O.v1.palette.gray5,O.isDark?O.v1.palette.dark5:O.v1.palette.gray4,O.colors.text.primary),"&":{boxShadow:"none"}},".typeahead":{zIndex:O.zIndex.typeahead},...V(O,30),".row":{display:"flex",flexWrap:"wrap",marginLeft:`calc(${O.spacing(4)} / -2)`,marginRight:`calc(${O.spacing(4)} / -2)`},".container":{marginLeft:"auto",marginRight:"auto",paddingLeft:`calc(${O.spacing(4)} / 2)`,paddingRight:`calc(${O.spacing(4)} / 2)`,[O.breakpoints.up("sm")]:{maxWidth:O.breakpoints.values.sm},[O.breakpoints.up("md")]:{maxWidth:O.breakpoints.values.md},[O.breakpoints.up("lg")]:{maxWidth:O.breakpoints.values.lg},[O.breakpoints.up("xl")]:{maxWidth:O.breakpoints.values.xl}}})}function R(){const O=(0,s.$j)();return(0,n.jsx)(a.Global,{styles:[d(O),o(O),i(O),p(O),c(O),r(O),g(O),E(O),x(O),m(O),b(O),l(O),f(O),C(O),P(O),M(O),I(O),B(O),z(O),D(O),y({})]})}},77526:(ne,j,e)=>{"use strict";e.d(j,{N:()=>a});var n=e(69850);function a(s,d){return(0,n.j)(()=>{d&&s.resolveCancelerIfExists(d)})}},77731:(ne,j,e)=>{"use strict";e.d(j,{B1:()=>D,CW:()=>y,LH:()=>p,OK:()=>h,SD:()=>r,VF:()=>v,_u:()=>x,dH:()=>f,ko:()=>b,no:()=>E,s3:()=>g});var n=e(2543),a=e.n(n),s=e(92745),d=e(36490),o=e(65642),l=e(95943),i=e(29043),c=e(17097);const p="New panel";function h(P,T){const M={type:"timeseries",title:p,gridPos:(0,c.Ft)(P),datasource:T?{uid:T}:null,isNew:!0};return P.addPanel(M),M.id}function u(P,T){const M={type:T,title:t("dashboard.on-create-new-widget-panel.new-panel.title.widget-title","Widget title"),gridPos:calculateNewPanelGridPos(P),datasource:null,isNew:!0};return P.addPanel(M),M.id}function r(P){const T={type:"row",title:(0,s.t)("dashboard.on-create-new-row.new-row.title.row-title","Row title"),gridPos:{x:0,y:0}};P.addPanel(T)}function v(){d.Ny.push("/dashboard/import")}function g(P){const T={type:"add-library-panel",gridPos:(0,c.Ft)(P)};P.addPanel(T)}function E(P,T){if(!T)return;const M=(0,c.Ft)(P),I={type:T.id,title:p,gridPos:{x:M.x,y:M.y,w:T.defaults.gridPos.w,h:T.defaults.gridPos.h}};T.defaults&&((0,n.defaults)(I,T.defaults),I.title=T.defaults.title,i.A.delete(l.tH)),P.addPanel(I)}function x(){const P=(0,n.chain)(o.Ay.panels).filter({hideFromList:!1}).map(M=>M).value(),T=i.A.get(l.tH);if(T){const M=JSON.parse(T),I=(0,n.find)(P,{id:M.type});if(I){const B=(0,n.cloneDeep)(I);return B.name=M.title,B.sort=-1,{...B,defaults:{...M}}}}}const m="grafana.dashboards.panelEdit.lastUsedDatasource";function y(P){if(i.A.exists(m)){const T=i.A.getObject(m);if(T?.dashboardUid===P)return T}}function b(P){if(!i.A.exists(m))return;const M=i.A.getObject(m)?.datasourceUid??"";C(P,M)}function D(P){i.A.setObject(m,{dashboardUid:P,datasourceUid:""})}function f(P,T){const M=y(P);if(!M)C(P,T);else{const I=M?.dashboardUid??"";C(I,T)}}function C(P,T){i.A.setObject(m,{dashboardUid:P,datasourceUid:T})}},77788:(ne,j,e)=>{"use strict";e.d(j,{Pc:()=>o,WG:()=>i,uz:()=>h});var n=e(68143),a=e(6135),s=e(182),d=e(5709);const o="grafana_alerting_v2";function l(u){return`/api/plugins/${(0,s.BO)()}/resources${u}`}const i=d.H.injectEndpoints({endpoints:u=>({grafanaOnCallIntegrations:u.query({query:()=>({url:l("/alert_receive_channels/"),params:{filters:!0,integration:[a.FI,"legacy_grafana_alerting"],skip_pagination:!0},showErrorAlert:!1}),transformResponse:r=>c(r)?r.results:r,providesTags:["OnCallIntegrations"]}),validateIntegrationName:u.query({query:r=>({url:l("/alert_receive_channels/validate_name/"),params:{verbal_name:r},showErrorAlert:!1})}),createIntegration:u.mutation({query:r=>({url:l("/alert_receive_channels/"),data:r,method:"POST",showErrorAlert:!0}),invalidatesTags:["OnCallIntegrations"]}),features:u.query({query:()=>({url:l("/features/"),showErrorAlert:!1})}),onCallConfigChecks:u.query({query:()=>({url:l("/organization/config-checks/"),showErrorAlert:!1})})})});function c(u){return"results"in u&&Array.isArray(u.results)}const{useGrafanaOnCallIntegrationsQuery:p}=i;function h(u){return(0,n.NF)(u)&&"detail"in u.data}},77824:(ne,j,e)=>{"use strict";e.d(j,{z:()=>E});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(30360),l=e(63142),i=e(30703),c=e(51898),p=e(35484),h=e(45967),u=e(3343);const r=2,v=d.forwardRef(({children:m,active:y=!1,disabled:b=!1,size:D="md",onChange:f,onClick:C,id:P,name:T=void 0,description:M,fullWidth:I,"aria-label":B},U)=>{const W=(0,l.of)(g,D,I),V=(0,n.jsx)("input",{type:"radio",className:W.radio,onChange:f,onClick:C,disabled:b,id:P,checked:y,name:T,"aria-label":B,ref:U});return M?(0,n.jsxs)("div",{className:W.radioOption,"data-testid":c.Tp.components.RadioButton.container,children:[(0,n.jsx)(h.m,{content:M,placement:"bottom",children:V}),(0,n.jsx)("label",{className:W.radioLabel,htmlFor:P,title:M||B,children:m})]}):(0,n.jsxs)("div",{className:W.radioOption,"data-testid":c.Tp.components.RadioButton.container,children:[V,(0,n.jsx)("label",{className:W.radioLabel,htmlFor:P,title:M||B,children:m})]})});v.displayName="RadioButton";const g=(m,y,b)=>{const{fontSize:D,height:f,padding:C}=(0,u.SM)(y,m),P=m.colors.text.secondary,T=m.colors.text.primary,M=f*m.spacing.gridSize-4-2;return{radioOption:(0,a.css)({display:"flex",justifyContent:"space-between",position:"relative",flex:b?"1 0 0":"none",textAlign:"center"}),radio:(0,a.css)({position:"absolute",opacity:0,zIndex:2,width:"100% !important",height:"100%",cursor:"pointer","&:checked + label":{color:m.colors.text.primary,fontWeight:m.typography.fontWeightMedium,background:m.colors.action.selected,zIndex:1},"&:focus + label, &:focus-visible + label":(0,p.getFocusStyles)(m),"&:focus:not(:focus-visible) + label":(0,p.getMouseFocusStyles)(m),"&:disabled + label":{color:m.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"center",fontSize:D,height:`${M}px`,lineHeight:`${M}px`,color:P,padding:m.spacing(0,C),borderRadius:(0,p.getInternalRadius)(m,r),background:m.colors.background.primary,cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",flexGrow:1,"&:hover":{color:T}})}};function E({options:m,value:y,onChange:b,onClick:D,disabled:f,disabledOptions:C,size:P="md",id:T,className:M,fullWidth:I=!1,autoFocus:B=!1,"aria-label":U,invalid:W=!1}){const V=(0,d.useCallback)(G=>()=>{b&&b(G.value)},[b]),z=(0,d.useCallback)(G=>()=>{D&&D(G.value)},[D]),R=T??(0,s.uniqueId)("radiogroup-"),O=(0,d.useRef)(R),N=(0,l.of)(x),F=(0,d.useRef)(null);return(0,d.useEffect)(()=>{B&&F.current&&F.current.focus()},[B]),(0,n.jsx)("div",{role:"radiogroup","aria-label":U,className:(0,a.cx)(N.radioGroup,I&&N.fullWidth,W&&N.invalid,M),children:m.map((G,H)=>{const K=C&&G.value&&C.includes(G.value),w=G.icon?(0,o.Uo)(G.icon):void 0,Q=!!(G.imgUrl||G.label||G.component);return(0,n.jsxs)(v,{size:P,disabled:K||f,active:y===G.value,"aria-label":G.ariaLabel,onChange:V(G),onClick:z(G),id:`option-${G.value}-${R}`,name:O.current,description:G.description,fullWidth:I,ref:y===G.value?F:void 0,children:[w&&(0,n.jsx)(i.I,{name:w,className:(0,a.cx)(Q&&N.icon)}),G.imgUrl&&(0,n.jsx)("img",{src:G.imgUrl,alt:G.label,className:N.img}),G.label," ",G.component?(0,n.jsx)(G.component,{}):null]},`o.label-${H}`)})})}E.displayName="RadioButtonGroup";const x=m=>({radioGroup:(0,a.css)({backgroundColor:m.colors.background.primary,display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${m.components.input.borderColor}`,borderRadius:m.shape.radius.default,padding:r,"&:hover":{borderColor:m.components.input.borderHover}}),fullWidth:(0,a.css)({display:"flex",flexGrow:1}),icon:(0,a.css)({marginRight:"6px"}),img:(0,a.css)({width:m.spacing(2),height:m.spacing(2),marginRight:m.spacing(1)}),invalid:(0,a.css)({border:`1px solid ${m.colors.error.border}`})})},77839:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>l,v:()=>o});var n=e(65307),a=e(54742),s=e(88681),d=e(96120);const o=(0,n.VP)("templating/cleanVariables"),l=(i=d.j,c)=>{if(o.match(c)){const p=Object.values(i).filter(u=>u.global);return p?p.reduce((u,r)=>(u[r.id]=r,u),{}):d.j}return c?.payload?.type&&a.B.getIfExists(c?.payload?.type)?a.B.get(c.payload.type).reducer((0,s.qi)(i,c),c):i}},77870:(ne,j,e)=>{"use strict";e.d(j,{S:()=>l});var n=e(96540),a=e(43173),s=e(55315);const d="favoriteDatasources",o=new s.X("grafana-runtime");function l(){const[i,c]=(0,n.useState)([]),[p,h]=(0,n.useState)([]),[u,r]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!a.$.featureToggles.favoriteDatasources)return;(async()=>{r(!0);const y=await o.getItem(d);if(y){const b=JSON.parse(y);c(b),h(b)}r(!1)})()},[]);const v=(0,n.useCallback)(async m=>{r(!0),await o.setItem(d,JSON.stringify(m)),c(m),r(!1)},[]),g=(0,n.useCallback)(m=>{if(!m.meta.builtIn&&!i.includes(m.uid)){const y=[...i,m.uid];v(y)}},[i,v]),E=(0,n.useCallback)(m=>{const y=i.filter(b=>b!==m.uid);y.length!==i.length&&v(y)},[i,v]),x=(0,n.useCallback)(m=>i.includes(m),[i]);return a.$.featureToggles.favoriteDatasources?{enabled:!0,isLoading:u,favoriteDatasources:i,addFavoriteDatasource:g,removeFavoriteDatasource:E,isFavoriteDatasource:x,initialFavoriteDataSources:p}:{enabled:!1,isLoading:!1,favoriteDatasources:[],initialFavoriteDataSources:[],addFavoriteDatasource:()=>{},removeFavoriteDatasource:()=>{},isFavoriteDatasource:()=>!1}}},77880:(ne,j,e)=>{"use strict";e.d(j,{J:()=>E});var n=e(74848),a=e(22803),s=e(4213),d=e.n(s),o=e(96540),l=e(70713),i=e(92745),c=e(47931),p=e(50992),h=e(34999),u=e(45861),r=e(89640),v=e(63142),g=e(78102);function E({format:y,textDefinition:b,downloadFileName:D,onClose:f}){const C=(0,v.of)(x),P=g.sl[y],T=(0,o.useCallback)(()=>{const I=new Blob([b],{type:`application/${y};charset=utf-8`});d()(I,`${D}.${y}`)},[b,D,y]),M=(0,o.useMemo)(()=>P.formatter?P.formatter(b):b,[P,b]);return(0,n.jsxs)("div",{className:C.container,children:[(0,n.jsx)(m,{exportProvider:P}),(0,n.jsx)("div",{className:C.content,children:(0,n.jsx)(l.Ay,{disableWidth:!0,children:({height:I})=>(0,n.jsx)(p.B,{width:"100%",height:I,language:y,value:M,monacoOptions:{minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",readOnly:!0}})})}),(0,n.jsxs)("div",{className:C.actions,children:[(0,n.jsx)(u.$n,{variant:"secondary",onClick:f,children:(0,n.jsx)(i.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})}),(0,n.jsx)(c.b,{icon:"copy",getText:()=>b,children:(0,n.jsx)(i.x6,{i18nKey:"alerting.file-export-preview.copy-code",children:"Copy code"})}),(0,n.jsx)(u.$n,{icon:"download-alt",onClick:T,children:(0,n.jsx)(i.x6,{i18nKey:"alerting.file-export-preview.download",children:"Download"})})]})]})}const x=y=>({container:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",gap:y.spacing(2)}),content:(0,a.css)({flex:"1 1 100%"}),actions:(0,a.css)({flex:0,justifyContent:"flex-end",display:"flex",gap:y.spacing(1)})});function m({exportProvider:y}){const{name:b,type:D}=y,f={file:{title:(0,i.t)("alerting.file-export-inline-documentation.export-inline-doc.title.fileprovisioning-format","File-provisioning format"),component:(0,n.jsxs)(i.x6,{i18nKey:"alerting.file-export-inline-documentation.file-provisioning",children:[{name:b}," format is only valid for File Provisioning."," ",(0,n.jsx)(r.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/file-provisioning/",external:!0,children:"Read more in the docs."})]})},api:{title:(0,i.t)("alerting.file-export-inline-documentation.export-inline-doc.title.apiprovisioning-format","API-provisioning format"),component:(0,n.jsxs)(i.x6,{i18nKey:"alerting.file-export-inline-documentation.api-provisioning",children:[{name:b}," format is only valid for API Provisioning."," ",(0,n.jsx)(r.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/http-api-provisioning/",external:!0,children:"Read more in the docs."})]})},terraform:{title:(0,i.t)("alerting.file-export-inline-documentation.export-inline-doc.title.terraformprovisioning-format","Terraform-provisioning format"),component:(0,n.jsxs)(i.x6,{i18nKey:"alerting.file-export-inline-documentation.terraform-provisioning",children:[{name:b}," format is only valid for Terraform Provisioning."," ",(0,n.jsx)(r.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/",external:!0,children:"Read more in the docs."})]})}},{title:C,component:P}=f[D];return(0,n.jsx)(h.F,{title:C,severity:"info",bottomSpacing:0,topSpacing:0,children:P})}},78012:(ne,j,e)=>{"use strict";e.d(j,{M:()=>a,i:()=>n});class n{constructor(){this.subscribers=new Map,window.addEventListener("storage",d=>{d.key&&this.notifySubscribers(d.key)})}notifySubscribers(d){const o=this.subscribers.get(d);o&&o.forEach(l=>l())}subscribe(d,o){return this.subscribers.has(d)||this.subscribers.set(d,new Set),this.subscribers.get(d).add(o),()=>{const l=this.subscribers.get(d);l&&(l.delete(o),l.size===0&&this.subscribers.delete(d))}}get(d){return window.localStorage[d]}set(d,o){window.localStorage[d]=o,this.notifySubscribers(d)}getBool(d,o){return o!==void 0&&!this.exists(d)?o:window.localStorage[d]==="true"}getObject(d,o){let l=o;if(this.exists(d)){const i=window.localStorage[d];try{l=JSON.parse(i)}catch(c){console.error(`Error parsing store object: ${d}. Returning default: ${o}. [${c}]`)}}return l}setObject(d,o){let l;try{l=JSON.stringify(o)}catch(i){throw new Error(`Could not stringify object: ${d}. [${i}]`)}try{this.set(d,l)}catch(i){const c=new Error(`Could not save item in localStorage: ${d}. [${i}]`);throw i instanceof Error&&(c.name=i.name),c}return!0}exists(d){return window.localStorage[d]!==void 0}delete(d){window.localStorage.removeItem(d),this.notifySubscribers(d)}}const a=new n},78013:(ne,j,e)=>{"use strict";e.d(j,{M:()=>h});var n=e(16515),a=e(36638),s=e(57866),d=e(4575),o=e(83340),l=e(95004),i=e(49256);const c="hideSeriesFrom",p=(0,o.ZW)(c);function h(m,y,b,D){const{overrides:f}=b,C=m,P=f.findIndex(p);if(P<0){if(y===i.B.ToggleSelection){const W=u([C,...x(f,D)]);return{...b,overrides:[...b.overrides,W]}}const B=E(D,C),U=u(B);return{...b,overrides:[...b.overrides,U]}}const T=Array.from(f),[M]=T.splice(P,1);if(y===i.B.ToggleSelection){let B=v(M);const U=x(T,D);if(U.length>0&&(B=B.filter(V=>U.indexOf(V)<0)),B[0]===C&&B.length===1)return{...b,overrides:T};const W=u([C,...U]);return{...b,overrides:[...T,W]}}const I=r(M,C);return g(I,D)?{...b,overrides:T}:{...b,overrides:[...T,I]}}function u(m,y=d.PP.exclude,b){return b=b??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!0}},{__systemRef:c,matcher:{id:s.Ct.byNames,options:{mode:y,names:m,prefix:y===d.PP.exclude?"All except:":void 0,readOnly:!0}},properties:[{...b,value:{viz:!0,legend:!1,tooltip:!0}}]}}const r=(m,y,b=d.PP.exclude)=>{const D=m.properties.find(P=>P.id==="custom.hideFrom"),f=v(m),C=f.findIndex(P=>P===y);return C<0?f.push(y):f.splice(C,1),u(f,b,D)},v=m=>{const y=m.matcher.options?.names;return Array.isArray(y)?[...y]:[]},g=(m,y)=>v(m).length===E(y).length,E=(m,y)=>{const b=new Set;for(const D of m)for(const f of D.fields){if(f.type!==l.PU.number)continue;const C=(0,n.Ct)(f,D,m);C!==y&&b.add(C)}return Array.from(b)},x=(m,y)=>{let b=[];for(const D of m){const f=D.properties.find(C=>C.id==="custom.hideFrom");if(f!==void 0&&f.value?.legend===!0){const P=a.sJ.get(D.matcher.id).get(D.matcher.options);for(const T of y)for(const M of T.fields){if(M.type!==l.PU.number)continue;const I=(0,n.Ct)(M,T,y);P(M,T,y)&&b.push(I)}}}return b}},78034:(ne,j,e)=>{"use strict";e.d(j,{R:()=>n,T:()=>a});function n(s,d,o){for(const l of s)if(l.uid===o)return l;for(const l in d){const i=d[l];if(i){for(const c of i.items)if(c.uid===o)return c}}}function a(s,d,o){return new Array(s).fill(null).map((l,i)=>({parentUID:d,level:o,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${d}-pagination-${i}`}}))}},78045:(ne,j,e)=>{"use strict";e.d(j,{B8:()=>c,LY:()=>d,Z8:()=>o,tD:()=>l});var n=e(65307),a=e(20443),s=e(67923);const d=(0,n.VP)("routes/update"),o=(0,n.VP)("routes/delete"),l=(0,n.VP)("routes/add"),i={alertmanager_config:{},template_files:{}},c=(0,n.vy)(i,p=>{p.addCase(d,(h,{payload:u})=>{const{update:r,alertmanager:v}=u,{alertmanager_config:g}=h;if(!g.route)return;const E=(0,a.QM)(g.route),x=(0,s.AB)(v,r,E);g.route=(0,s.dn)(x)}).addCase(o,(h,{payload:u})=>{const{id:r}=u,{alertmanager_config:v}=h;if(!v.route)return;const g=(0,a.QM)(v.route),E=(0,s.AS)(r,g);h.alertmanager_config.route=(0,s.dn)(E)}).addCase(l,(h,{payload:u})=>{const{partialRoute:r,referenceRouteIdentifier:v,insertPosition:g,alertmanager:E}=u,{alertmanager_config:x}=h;if(!x.route)return;const m=(0,a.QM)(x.route),y=(0,s.I8)(E,r,v,m,g);h.alertmanager_config.route=(0,s.dn)(y)})})},78059:(ne,j,e)=>{"use strict";e.d(j,{x:()=>c});var n=e(74848),a=e(70255),s=e(92745),d=e(34999),o=e(66404),l=e(62779);function i(p,h,u,r){const v=p+h+u+r,g=[];p&&g.push((0,s.t)("browse-dashboards.counts.folder","{{count}} folder",{count:p})),h&&g.push((0,s.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:h})),u&&g.push((0,s.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:u})),r&&g.push((0,s.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:r}));let E=(0,s.t)("browse-dashboards.counts.total","{{count}} item",{count:v});return g.length>0&&(E+=`: ${g.join(", ")}`),E}const c=({selectedItems:p})=>{const{data:h,isFetching:u,isLoading:r,error:v}=(0,l.IH)(p);return v?(0,n.jsx)(d.F,{severity:"error",title:(0,s.t)("browse-dashboards.descendant-count.title-unable-to-retrieve-descendant-information","Unable to retrieve descendant information")}):(0,n.jsxs)(o.E,{element:"p",color:"secondary",children:[h&&i(h.folders,h.dashboards,h.library_elements,h.alertrules),(u||r)&&(0,n.jsx)(a.A,{width:200})]})}},78089:(ne,j,e)=>{"use strict";e.d(j,{EX:()=>h,pp:()=>r,tt:()=>c});var n=e(70915),a=e(11217),s=e(44294),d=e(82922),o=e(52490),l=e(95004),i=e(90176);function c(v){const g=[];for(const E of v.values)E&&g.push(h(E));return new a.A(g)}function p(v){const g=new Array(v.length);if(v.length>1){let E=u(v[0]);for(let x=1;x<v.length;x++){let m=u(v[x]);if(E&&m){let y=Math.atan2(m[0]-E[0],m[1]-E[1])*180/Math.PI;y<0&&(y+=360),g[x-1]=g[x]=y}}}else g.fill(0);return g}function h(v){return v instanceof s.A?v.getCoordinates():(0,n.q1)(v.getExtent())}function u(v){if(v)return(0,d.WP)(h(v))}function r(v,g){const E=v.values,x=new Array(v.values.length),m=g.calc??i.kD.Heading,y=g.field??m;switch(m){case i.kD.Area:{for(let b=0;b<E.length;b++){const D=E[b];D&&(x[b]=(0,o.UG)(D))}return{name:y,type:l.PU.number,config:{unit:"areaM2"},values:x}}case i.kD.Distance:{for(let b=0;b<E.length;b++){const D=E[b];D&&(x[b]=(0,o.R3)(D))}return{name:y,type:l.PU.number,config:{unit:"lengthm"},values:x}}case i.kD.Heading:default:return{name:y,type:l.PU.number,config:{unit:"degree"},values:p(E)}}}},78102:(ne,j,e)=>{"use strict";e.d(j,{dX:()=>s,sl:()=>d});const n={name:"JSON",exportFormat:"json",type:"file",formatter:l=>{try{return JSON.stringify(JSON.parse(l),null,4)}catch{return l}}},a={name:"YAML",exportFormat:"yaml",type:"file"},s={name:"Terraform (HCL)",exportFormat:"hcl",type:"terraform"},d={[n.exportFormat]:n,[a.exportFormat]:a,[s.exportFormat]:s},o=[n,a]},78121:(ne,j,e)=>{"use strict";e.d(j,{W:()=>a,k:()=>n});const n=o=>(l,i)=>{o&&o(l.map(c=>String(c)),s(i))},a=o=>l=>{o&&o(s(l))},s=o=>o.map(d),d=o=>{const l=o.value?String(o.value):"";return{value:l,label:typeof o.label=="string"?o.label:l}}},78159:(ne,j,e)=>{"use strict";e.d(j,{C:()=>c,m:()=>p});var n=e(74848),a=e(51898),s=e(92745),d=e(27489),o=e(8515),l=e(45861),i=e(37010);const c=({dashboard:h,onSaveSuccess:u,size:r})=>(0,n.jsx)(o.$s,{children:({showModal:v,hideModal:g})=>(0,n.jsx)(l.$n,{size:r,onClick:()=>{v(i.$,{dashboard:h,onSaveSuccess:u,onDismiss:g})},"aria-label":a.Tp.pages.Dashboard.Settings.General.saveDashBoard,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-button.save-dashboard",children:"Save dashboard"})})}),p=({dashboard:h,onClick:u,onSaveSuccess:r,variant:v,size:g})=>(0,n.jsx)(o.$s,{children:({showModal:E,hideModal:x})=>(0,n.jsx)(l.$n,{size:g,onClick:()=>{(0,d.rR)("grafana_dashboard_save_as_clicked"),u?.(),E(i.$,{dashboard:h,onSaveSuccess:r,onDismiss:x,isCopy:!0})},variant:v,"aria-label":a.Tp.pages.Dashboard.Settings.General.saveAsDashBoard,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-as-button.save-as",children:"Save as"})})})},78282:(ne,j,e)=>{"use strict";e.d(j,{h:()=>a,l:()=>s});let n;function a(d){n=d}function s(){return n}},78320:(ne,j,e)=>{"use strict";e.d(j,{o:()=>a,x:()=>n});const n={name:"grafana",uid:"grafana"},a=1},78467:(ne,j,e)=>{"use strict";e.d(j,{Dj:()=>h,JY:()=>u,Kw:()=>v,lH:()=>r,ou:()=>p,sA:()=>E});var n=e(1932),a=e(75505),s=e(68143),d=e(74268),o=e(24619),l=e(52161),i=e(29609);function c(x){const{dataSourceName:m,limitAlerts:y,identifier:b}=x;return{rules:(D,f,C)=>{const P=new URLSearchParams;m===l.hY&&y&&P.set("limit_alerts",String(y)),b&&((0,i.Mj)(b)||(0,i.X4)(b))&&(P.set("file",b.namespace),P.set("rule_group",b.groupName));const M={...p(D),...Object.fromEntries(P)};return{url:`/api/prometheus/${(0,l.w5)(m)}/api/v1/rules`,params:h(M,f,C)}}}}function p(x){const m={};return x?.dashboardUID&&(m.dashboard_uid=x.dashboardUID,x?.panelId&&(m.panel_id=String(x.panelId))),m}function h(x,m,y){let b={...x};if(m?.length&&(b={...b,state:m}),y?.length){const D=y.map(f=>JSON.stringify(f));b={...b,matcher:D}}return b}function u(x){return(0,n.jM)(x,m=>{m.rules.forEach(y=>{y.query=y.query||"",y.type===o.JS.Alerting&&(y.state||((0,d.fH)("prom rule with type=alerting is missing a state",{ruleName:y.name}),y.state=o.cF.Inactive))})})}const r=(x,m)=>{const y=x.map(u),b={};return y.forEach(D=>{b[D.file]?b[D.file].groups.push(D):b[D.file]={dataSourceName:m,name:D.file,groups:[D]}}),Object.values(b)},v=(x=[])=>x?.flatMap(m=>m.groups.flatMap(y=>g(y,m.name)));function g(x,m){return{name:x.name,file:m,rules:x.rules,interval:x.interval}}async function E(x,m,y,b,D,f){if(m?.dashboardUID&&x!==l.hY)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:C,params:P}=c({dataSourceName:x,limitAlerts:y,identifier:f}).rules(m,D,b),T=await(0,a.s)((0,s.AI)().fetch({url:C,params:P,showErrorAlert:!1,showSuccessAlert:!1})).catch(M=>{throw"status"in M&&M.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):M});return r(T.data.data.groups,x)}},78479:(ne,j,e)=>{"use strict";e.d(j,{R:()=>n});var n=(a=>(a.Grid="grid",a.List="list",a))(n||{})},78529:(ne,j,e)=>{"use strict";e.d(j,{JQ:()=>T,O1:()=>I,QL:()=>C,YV:()=>f,_O:()=>W});var n=e(2543),a=e.n(n),s=e(96540),d=e(7102),o=e(5556),l=e(38036),i=e(1906),c=e(79609),p=e(39443),h=e(92745),u=e(2863),r=e(27489),v=e(15130),g=e(70191),E=e(46072),x=e(82345),m=e(55133);const b=[V=>!V.internal||v.TP.hasAccessToExplore()],D="grafana_data_link_clicked",f=(V,z)=>O=>{const{field:N,dataLinkScopedVars:F,frame:G,link:H,linkModel:K}=O,{valueRowIndex:w}=O.config;if(w===void 0)return K;const Q=C({field:N,rowIndex:w,splitOpenFn:V,range:z,vars:F,dataFrame:G,linksToProcess:[H]});return Q.length?(0,n.first)(Q):void 0},C=V=>{const{field:z,vars:R,splitOpenFn:O,range:N,rowIndex:F,dataFrame:G}=V,H={...R||{}};H.__value={value:{raw:z.values[F]},text:(0,h.t)("explore.get-field-links-for-explore.text.raw-value","Raw value")};let K;if(G){if(K=(0,d.F)({frame:G,rowIndex:F}),H.__data={value:{name:G.name,refId:G.refId,fields:K},text:(0,h.t)("explore.get-field-links-for-explore.text.data","Data")},G.meta?.type===p.m.LogLines){const k=(0,E.ww)(G)?.getLogFrameLabels();k!=null&&Object.entries(k[F]).forEach(te=>{H[te[0]]={value:te[1]}})}G.fields.forEach(Q=>{K&&K[Q.name]&&(H[Q.name]={value:K[Q.name]})}),H.__targetField={value:K[z.name]}}const w=V.linksToProcess||z.config.links;return w?w.filter(te=>b.every(q=>q(te,H))).map(te=>{let q={};te.meta?.transformations&&te.meta?.transformations.forEach(X=>{let J;X.field?J=G?.fields.find(ee=>ee.name===X.field)?.values[F]:J=z.values[F],q={...q,...(0,g.k)(X,J,z.name)}});const se={...H,...q},re=I(te,se);let Y=[];if(re.variables.length===0){const X=z.name.toString();Y.push({variableName:X,value:"",match:""})}else Y=re.variables;if(re.allVariablesDefined)if(te.internal){const X=_=>{(0,r.rR)(D,{origin:te.origin||c.x0.Datasource,app:i.Jk.Explore,internal:!0}),O?.(_)};return{...(0,l.u)({link:te,internalLink:te.internal,scopedVars:se,range:N,field:z,onClickFn:V.splitOpenFn?_=>X(_):void 0,replaceVariables:(0,u.w)().replace.bind((0,u.w)())}),variables:Y}}else{const X=(_,ee)=>(0,u.w)().replace(_,{...ee,...se,...H}),J=(0,x.mQ)().getDataLinkUIModel(te,X,z);return J.title||(J.title=P(J.href)),J.target=J.target??"_blank",{...J,variables:Y}}else return}).filter(te=>!!te):[]};function P(V){V.indexOf("://")<0&&(V=`http://${V}`);let z;try{z=new URL(V).hostname}catch{z=V}return z}function T(V,z){return(0,s.useCallback)((R,O)=>R.fields.flatMap(N=>N.config?.links&&N.config?.links.length?C({field:N,rowIndex:O,range:V,dataFrame:R,splitOpenFn:z}):[]),[V,z])}const M=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function I(V,z){let R=[];return(0,u.w)().replace.bind((0,u.w)())(B(V),z,void 0,R),R=(0,n.uniqBy)(R,"variableName"),{variables:R,allVariablesDefined:R.filter(N=>!M.includes(N.variableName)).every(N=>N.found)}}function B(V){let z="",R;for(R in V)typeof V[R]=="string"?z+=" "+V[R]:typeof V[R]=="object"&&(z+=" "+B(V[R]));return z}const U=V=>V[1]!==void 0,W=V=>{const z=Object.entries(V).filter(U).map(([R,O])=>{const N=(0,m.m)(O);return N.range={to:O.range.to.valueOf().toString(),from:O.range.from.valueOf().toString()},[R,N]}).reduce((R,[O,N])=>({...R,[O]:N}),{});return o.kM.renderUrl("/explore",{schemaVersion:1,panes:JSON.stringify(z)})}},78646:(ne,j,e)=>{"use strict";e.d(j,{H2:()=>s,c_:()=>l,on:()=>n,pl:()=>o,x$:()=>d});var n=(i=>(i.Performance="performance",i.MetaAnalytics="meta-analytics",i.Pageview="pageview",i.Interaction="interaction",i.ExperimentView="experimentview",i.GrafanaJavascriptAgent="grafana-javascript-agent",i))(n||{});let a;function s(i){if(a instanceof l)for(const c of a.buffer)i.addEvent(c.event,c.meta);a=i}function d(){return a||(a=new l),a}const o=i=>{d().addBackend(i)};class l{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(c){}addEvent(c,p){this.buffer.push({event:c,meta:p})}}},78725:(ne,j,e)=>{"use strict";e.d(j,{h:()=>r});var n=e(74848),a=e(92745),s=e(30703),d=e(45967),o=e(41654),l=e(25797),i=e(51156),c=e(6048),p=e(32603);let h;function u(){return h||(h=c.M.createEmpty()),h}function r(v,g){const E=(0,a.t)("dashboard.conditional-rendering.root.title","Show / hide rules"),x=v??u();return new l.C({title:E,disabledText:v?void 0:g??(0,a.t)("dashboard.conditional-rendering.editor.unsupported-object-type","Conditional rendering not supported for this item type"),id:"conditional-rendering-options",renderTitle:()=>{const{result:m}=x.useState();return(0,n.jsxs)(o.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("div",{children:E}),v?(0,n.jsx)(d.m,{content:(0,a.t)("dashboard.conditional-rendering.editor.info","Set rules to control {{type}} visibility by matching any or all rules.",{type:(0,p.L9)((0,p.dQ)(x.parent))}),children:(0,n.jsx)(s.I,{name:m?"eye":"eye-slash"})}):(0,n.jsx)(s.I,{name:"eye-slash"})]})},isOpenDefault:!0}).addItem(new i.v({title:E,id:"conditional-rendering-options-item",render:()=>(0,n.jsx)(x.Component,{model:x})}))}},78763:(ne,j,e)=>{"use strict";e.d(j,{C:()=>n});const n=(d,o)=>d&&(o&&!Array.isArray(d.value)?{...d,value:s(d.value),text:s(d.text)}:!o&&Array.isArray(d.value)?{...d,value:a(d.value),text:a(d.text)}:d),a=d=>Array.isArray(d)?d.length>0?d[0]:"":d,s=d=>Array.isArray(d)?d:[d]},78767:(ne,j,e)=>{"use strict";e.d(j,{l:()=>o});var n=e(41119),a=e(68143);class s{query(i,c){return(0,a.AI)().get("/api/annotations",i,c).then(p=>(0,n.Vc)(p))}forAlert(i){return(0,a.AI)().get("/api/annotations",{alertUID:i})}save(i){return(0,a.AI)().post("/api/annotations",i)}update(i){return(0,a.AI)().put(`/api/annotations/${i.id}`,i)}delete(i){return(0,a.AI)().delete(`/api/annotations/${i.id}`)}async tags(){return(await(0,a.AI)().get("/api/annotations/tags?limit=1000")).result.tags.map(({tag:c,count:p})=>({term:c,count:p}))}}let d=null;function o(){return d||(d=new s),d}},78830:(ne,j,e)=>{"use strict";e.d(j,{M:()=>n});function n(a){const s=a?.angular?.detected??a?.angularDetected??!1,d=a?.angularPanelCtrl??!1,o=a.PanelCtrl??a?.ConfigCtrl??!1;if(s||d||o)throw new Error("Angular plugins are not supported")}},79104:(ne,j,e)=>{"use strict";e.d(j,{C:()=>a});var n=e(96540);function a(){const[s,d]=(0,n.useState)(0);return(0,n.useCallback)(()=>d(o=>o+1),[])}},79118:(ne,j,e)=>{"use strict";e.d(j,{AP:()=>p,jc:()=>i,xg:()=>h});var n=e(2543),a=e.n(n),s=e(46644),d=e(95004),o=e(76637),l=e(36394);function i(u,r){if(u.type===d.PU.boolean)return c(u,r);const g=(0,o.Qi)(u).getCalculator(u,r),E=u.state?.range??p(u);return x=>{let m=0;x!==-1/0&&(m=(x-E.min)/E.delta,Number.isNaN(m)&&(m=0));const y=(0,l.k5)(u,x,m);return{percent:m,threshold:y,color:g(x,m,y)}}}function c(u,r){const v={color:r.visualization.getColorByName("green"),percent:1,threshold:void 0},g={color:r.visualization.getColorByName("red"),percent:0,threshold:void 0},E=(0,o.Qi)(u);if(E.isContinuous&&E.getColors){const x=E.getColors(r);v.color=x[x.length-1],g.color=x[0]}return x=>x?v:g}function p(u){if(u.type!==d.PU.number)return{min:0,max:100,delta:100};let r=u.config.min,v=u.config.max;if(!(0,n.isNumber)(r)||!(0,n.isNumber)(v))if(u.values&&u.values.length){const g=(0,s.Nw)({field:u,reducers:[s.gy.min,s.gy.max]});(0,n.isNumber)(r)||(r=g[s.gy.min]),(0,n.isNumber)(v)||(v=g[s.gy.max])}else r=0,v=100;return{min:r,max:v,delta:v-r}}function h(u,r){const{config:v}=u;let{min:g,max:E}=v;return(0,n.isNumber)(g)&&(0,n.isNumber)(E)?v:r||!u.state?.range?{...v,...p(u)}:{...v,...u.state.range}}},79184:(ne,j,e)=>{"use strict";e.d(j,{V:()=>l,n:()=>o});var n=e(81160),a=e(16515),s=e(95004),d=e(64761),o=(c=>(c.Columns="columns",c.Rows="rows",c))(o||{});const l={id:d.F.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(c,p)=>h=>h.pipe((0,n.T)(u=>l.transformer(c,p)(u))),transformer:c=>p=>{if(c.mode==="rows")return i(p,c.keepLabels);const h=[],u=c.keepLabels?.length?new Set(c.keepLabels):void 0;for(const r of p){const v=[],g={};for(const E of r.fields){if(!E.labels){v.push(E);continue}const x={...E,config:{...E.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};v.push(x);for(const m of Object.keys(E.labels)){if(u&&!u.has(m))continue;if(c.valueLabel===m){x.name=E.labels[m];continue}(g[m]??(g[m]=new Set)).add(E.labels[m])}}for(const E in g)for(const x of g[E]){const m=new Array(r.length).fill(x);v.push({name:E,type:s.PU.string,values:m,config:{}})}h.push({...r,fields:v,length:r.length})}return h}};function i(c,p){const h=[];for(const u of c)for(const r of u.fields)if(r.labels){const v=[],g=[];if(p)for(const E of p)v.push(E),g.push(r.labels[E]);else for(const[E,x]of Object.entries(r.labels))v.push(E),g.push(x);g.length&&h.push({...u,name:(0,a.Ct)(r,u,c),fields:[{name:"label",type:s.PU.string,config:{},values:v},{name:"value",type:s.PU.string,config:{},values:g}],length:g.length})}return h}},79233:(ne,j,e)=>{"use strict";e.d(j,{c:()=>l});var n=e(74848),a=e(22803),s=e(63142),d=e(30703),o=e(45967);const l=({children:c,className:p,tooltip:h,width:u,transparent:r,interactive:v,as:g="label",...E})=>{const x=(0,s.of)(i,r,u);return(0,n.jsxs)(g,{className:(0,a.cx)(x.label,p),...E,children:[c,h&&(0,n.jsx)(o.m,{interactive:v,placement:"top",content:h,theme:"info",children:(0,n.jsx)(d.I,{tabIndex:0,name:"info-circle",size:"sm",className:x.icon})})]})},i=(c,p=!1,h)=>({label:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:c.spacing(0,1),fontWeight:c.typography.fontWeightMedium,fontSize:c.typography.size.sm,backgroundColor:p?"transparent":c.colors.background.secondary,height:c.spacing(c.components.height.md),lineHeight:c.spacing(c.components.height.md),marginRight:c.spacing(.5),borderRadius:c.shape.radius.default,border:"none",width:h?h!=="auto"?`${8*h}px`:h:"100%",color:c.colors.text.primary}),icon:(0,a.css)({color:c.colors.text.secondary,marginLeft:"10px",":hover":{color:c.colors.text.primary}})})},79243:(ne,j,e)=>{"use strict";e.d(j,{E:()=>a,h:()=>n});function n(s,d=0){if(Number.isInteger(s))return s;let o=10**d,l=s*o*(1+Number.EPSILON);return Math.round(l)/o}function a(s){return((""+s).split(".")[1]||"").length}},79277:(ne,j,e)=>{"use strict";e.d(j,{D:()=>d,U:()=>s});var n=e(92745),a=e(739);const s={tooltip:{mode:a.$N.Single,sort:a.xB.None,hideZeros:!1}};function d(o,l=!1,i=!1,c){const p=[(0,n.t)("grafana-ui.builder.tooltip.category","Tooltip")],h=l?[{value:a.$N.Single,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-single","Single")},{value:a.$N.None,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-hidden","Hidden")}]:[{value:a.$N.Single,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-single","Single")},{value:a.$N.Multi,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-all","All")},{value:a.$N.None,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-hidden","Hidden")}],u=[{value:a.xB.None,label:(0,n.t)("grafana-ui.builder.tooltip.sortOptions.label-none","None")},{value:a.xB.Ascending,label:(0,n.t)("grafana-ui.builder.tooltip.sortOptions.label-ascending","Ascending")},{value:a.xB.Descending,label:(0,n.t)("grafana-ui.builder.tooltip.sortOptions.label-descending","Descending")}];o.addRadio({path:"tooltip.mode",name:(0,n.t)("grafana-ui.builder.tooltip.name-tooltip-mode","Tooltip mode"),category:p,defaultValue:c?.tooltip?.mode??a.$N.Single,settings:{options:h}}).addRadio({path:"tooltip.sort",name:(0,n.t)("grafana-ui.builder.tooltip.name-values-sort-order","Values sort order"),category:p,defaultValue:c?.tooltip?.sort??a.xB.None,showIf:r=>r.tooltip?.mode===a.$N.Multi,settings:{options:u}}).addBooleanSwitch({path:"tooltip.hideZeros",name:(0,n.t)("grafana-ui.builder.tooltip.name-hide-zeros","Hide zeros"),category:p,defaultValue:!1,showIf:r=>c?.tooltip?.hideZeros!==void 0&&r.tooltip?.mode===a.$N.Multi}),i&&o.addNumberInput({path:"tooltip.hoverProximity",name:(0,n.t)("grafana-ui.builder.tooltip.name-hover-proximity","Hover proximity"),description:(0,n.t)("grafana-ui.builder.tooltip.description-hover-proximity","How close the cursor must be to a point to trigger the tooltip, in pixels"),category:p,settings:{integer:!0},showIf:r=>r.tooltip?.mode!==a.$N.None}),o.addNumberInput({path:"tooltip.maxWidth",name:(0,n.t)("grafana-ui.builder.tooltip.name-max-width","Max width"),category:p,settings:{integer:!0},showIf:r=>r.tooltip?.mode!==a.$N.None}).addNumberInput({path:"tooltip.maxHeight",name:(0,n.t)("grafana-ui.builder.tooltip.name-max-height","Max height"),category:p,defaultValue:void 0,settings:{integer:!0},showIf:(r,v,g)=>r.tooltip?.mode===a.$N.Multi||g?.some(E=>E.meta?.custom?.resultType==="exemplar")})}},79319:(ne,j,e)=>{"use strict";e.d(j,{M:()=>n,N:()=>a});var n=(s=>(s[s.NotPossible=-1]="NotPossible",s[s.NotApplicable=0]="NotApplicable",s[s.Applicable=1]="Applicable",s[s.HighlyApplicable=2]="HighlyApplicable",s))(n||{}),a=(s=>(s.True="true",s.False="false",s.Null="null",s.Empty="empty",s.Zero="zero",s))(a||{})},79331:(ne,j,e)=>{"use strict";e.d(j,{w:()=>i});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(34999),l=e(30703);const i=s.memo(s.forwardRef(({title:p,className:h,children:u,branded:r,url:v,urlTitle:g,onDismiss:E,severity:x="info",...m},y)=>{const b=(0,d.of)(c);return(0,n.jsxs)(o.F,{severity:x,className:h,...m,ref:y,title:p,children:[(0,n.jsx)("div",{children:u}),v&&(0,n.jsxs)("a",{href:v,className:(0,a.cx)("external-link",b.docsLink),target:"_blank",rel:"noreferrer",children:[(0,n.jsx)(l.I,{name:"book"})," ",g||"Read more"]})]})}));i.displayName="InfoBox";const c=p=>({docsLink:(0,a.css)({display:"inline-block",marginTop:p.spacing(2)})})},79409:(ne,j,e)=>{"use strict";e.d(j,{R:()=>a,X:()=>s});let n;function a(d){if(n)throw new Error("setHelpNavItemHook() function should only be called once, when Grafana is starting.");n=d}function s(){if(!n)throw new Error("useHelpNavItem() can only be used after the Grafana instance has started.");return n()}},79450:(ne,j,e)=>{"use strict";e.d(j,{b:()=>a});var n=e(96540);const a=(0,n.createContext)(void 0)},79609:(ne,j,e)=>{"use strict";e.d(j,{$0:()=>s,CC:()=>a,uP:()=>d,x0:()=>n,yd:()=>o});var n=(l=>(l.Datasource="Datasource",l.Correlations="Correlations",l.ExploreCorrelationsEditor="CorrelationsEditor",l))(n||{}),a=(l=>(l.Regex="regex",l.Logfmt="logfmt",l))(a||{}),s=(l=>(l.Series="series",l.Field="field",l.Fields="fields",l.Value="value",l.BuiltIn="built-in",l.Template="template",l))(s||{}),d=(l=>(l.Values="values",l))(d||{}),o=(l=>(l.Action="action",l.Link="link",l.Off="off",l))(o||{})},79718:(ne,j,e)=>{"use strict";e.d(j,{t:()=>D});var n=e(24726),a=e(38619),s=e(32899),d=e(33184),o=e(36490),l=e(73427),i=e(87745),c=e(22429),p=e(74848),h=e(22803),u=e(92745),r=e(63142),v=e(22787),g=e(45861),E=(f=>(f.Saved="saved",f.EditingStarted="editing-started",f.EditingCanceled="editing-cancelled",f.Deleted="deleted",f))(E||{});function x({onDismiss:f,event:C}){const P=(0,r.of)(m),T=()=>{if(C?.action===E.Deleted){o.Ny.push("/");return}D.reloadPage(),f()};return(0,p.jsxs)(v.a,{isOpen:!0,title:(0,u.t)("live.dashboard-changed-modal.title-dashboard-changed","Dashboard changed"),icon:"copy",onDismiss:f,onClickBackdrop:()=>{},className:P.modal,children:[(0,p.jsx)("div",{className:P.description,children:(0,p.jsx)(u.x6,{i18nKey:"live.dashboard-changed-modal.description",children:"The dashboard has been updated by another session. Do you want to continue editing or discard your local changes?"})}),(0,p.jsxs)(v.a.ButtonRow,{children:[(0,p.jsx)(g.$n,{onClick:f,variant:"secondary",fill:"outline",children:(0,p.jsx)(u.x6,{i18nKey:"live.dashboard-changed-modal.continue-editing",children:"Continue editing"})}),(0,p.jsx)(g.$n,{onClick:T,variant:"destructive",children:(0,p.jsx)(u.x6,{i18nKey:"live.dashboard-changed-modal.discard-local-changes",children:"Discard local changes"})})]})]})}const m=f=>({modal:(0,h.css)({width:"600px"}),description:(0,h.css)({color:f.colors.text.secondary,paddingBottom:f.spacing(1)})}),y=(0,n.A)();class b{constructor(){this.editing=!1,this.observer={next:C=>{if((0,a.ew)(C)&&this.editing&&C.state===a.ZF.Connected&&this.sendEditingState(),(0,a.Z7)(C)){if(C.message.sessionId===y)return;const{action:P,message:T}=C.message;switch(P){case E.EditingStarted:case E.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const M=(0,c.UA)().getCurrent();if(M?.uid!==C.message.uid){console.log("dashboard event for different dashboard?",C,M);return}let I=this.editing||M.hasUnsavedChanges();if(T?.includes("Restored from version")&&(I=!1),P===E.Saved)I?l.lE.publish(new i.S8({component:x,props:{event:C}})):(l.lE.emit(s.r1.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(I&&P===E.EditingStarted&&!this.hasSeenNotice){const B=C.message,U=this.getRecentEditingEvent();(!U||U.message!==B.message)&&(this.hasSeenNotice=!0,l.lE.emit(s.r1.alertWarning,["Another session is editing this dashboard",B.message])),this.lastEditing=B}return}}}}}}setEditingState(C){const P=this.editing=C;this.editing=C,this.hasSeenNotice=!1,P&&l.TP.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:C,uid:P}=this;C&&P&&(0,d.oF)().publish(C,{sessionId:y,uid:P,action:this.editing?E.EditingStarted:E.EditingCanceled,timestamp:Date.now()})}watch(C){const P=(0,d.oF)();P&&C!==this.uid&&(this.channel={scope:a.qD.Grafana,namespace:"dashboard",path:`uid/${C}`},this.leave(),C&&(this.subscription=P.getStream(this.channel).subscribe(this.observer)),this.uid=C)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){o.Ny.reload()}}const D=new b},79776:(ne,j,e)=>{"use strict";e.d(j,{o:()=>a});var n=e(43173);function a(s){const d=new URL(n.$.externalUserMngLinkUrl);return n.$.externalUserMngAnalytics&&(n.$.externalUserMngAnalyticsParams&&n.$.externalUserMngAnalyticsParams.split("&").forEach(l=>{const[i,c]=l.split("=");d.searchParams.append(i,c)}),d.searchParams.append("cnt",s)),d.toString()}},80144:(ne,j,e)=>{"use strict";e.d(j,{v:()=>a});var n=e(39796);function a(s){const d=new Set(s.map(o=>o.refId).filter(Boolean));return d.size===s.length?s:(d.clear(),s.map(o=>{if(o.refId&&!d.has(o.refId))return d.add(o.refId),o;const l=(0,n.M)(s);return d.add(l),{...o,refId:l}}))}},80218:(ne,j,e)=>{"use strict";e.d(j,{Gz:()=>h,VP:()=>p,Yb:()=>d,bJ:()=>l});var n=e(74848),a=e(96540),s=e(77256);function d(r,v){const[g,E]=(0,a.useState)({status:"not-executed",error:void 0,result:v}),x=(0,a.useRef)(),m=(0,a.useRef)(),y=o({execute(...b){m.current=b;const D=r(...b);return x.current=D,E(f=>({...f,status:"loading"})),D.then(f=>{D===x.current&&E(C=>({...C,status:"success",error:void 0,result:f}))},f=>{D===x.current&&E(C=>({...C,status:"error",error:f}))}),D},reset(){E({status:"not-executed",error:void 0,result:v}),x.current=void 0,m.current=void 0}});return[(0,a.useMemo)(()=>({reset(){y.current.reset()},execute:(...b)=>y.current.execute(...b)}),[]),g,{promise:x.current,lastArgs:m.current}]}function o(r){const v=(0,a.useRef)(r);return v.current=r,(0,a.useMemo)(()=>Object.freeze({get current(){return v.current}}),[])}function l(r){return r.status==="error"}function i(r){return r.status==="success"}function c(r){return r.status==="not-executed"}function p(r){return r.status==="loading"}function h(...r){return{uninitialized:r.every(c),loading:r.some(p),error:r.find(l)?.error,success:r.some(i)}}function u({state:r}){return jsxs(Fragment,{children:[c(r)&&"uninitialized",p(r)&&"loading",i(r)&&"success",i(r)&&`result: ${JSON.stringify(r.result,null,2)}`,l(r)&&`error: ${stringifyErrorLike(r.error)}`]})}},80231:(ne,j,e)=>{"use strict";e.d(j,{Am:()=>p,Ms:()=>y,QE:()=>m,V6:()=>b,Zg:()=>f,eC:()=>E,ku:()=>c,q0:()=>x,xK:()=>D});var n=e(96540),a=e(25508),s=e(52763),d=e(27044),o=e(62963),l=e(44220),i=e(78034);const c=P=>P.browseDashboards.rootItems,p=P=>P.browseDashboards.childrenByParentUID,h=P=>P.browseDashboards.openFolders,u=P=>P.browseDashboards.selectedItems,r=(0,a.Mz)(c,p,h,(P,T)=>T,(P,T,M,I)=>C(I,P,T,M)),v=(0,a.Mz)(u,P=>Object.values(P).some(T=>Object.values(T).some(M=>M))),g=(0,a.Mz)(u,p,(P,T)=>{const M={dashboard:{...P.dashboard},folder:{...P.folder}};for(const I of Object.keys(P.folder))if(P.folder[I]){const U=T[I];if(U)for(const W of U.items)W.kind==="dashboard"&&(M.dashboard[W.uid]=!1),W.kind==="folder"&&(M.folder[W.uid]=!1)}return M});function E(P){return(0,s.d4)(T=>(P?T.browseDashboards.childrenByParentUID[P]:T.browseDashboards.rootItems)?"fulfilled":"pending")}function x(P){return(0,s.d4)(T=>r(T,P))}function m(){return(0,s.d4)(P=>v(P))}function y(){return(0,s.d4)(u)}function b(){return(0,s.d4)(P=>P.browseDashboards.childrenByParentUID)}function D(){return(0,s.d4)(P=>g(P))}function f(P=[]){const T=(0,s.wA)(),M=(0,n.useRef)(!1);return(0,n.useCallback)(B=>{if(M.current)return Promise.resolve();M.current=!0;const U=T((0,l.Ii)({parentUID:B,excludeKinds:P,pageSize:d.md}));return U.finally(()=>M.current=!1),U},[T,P])}function C(P,T,M,I,B=0,U=[],W=[]){function V(H,K,w){if(U.includes(H.kind)||W.includes(H.uid))return[];const Q=C(H.uid,T,M,I,w+1,U,W),k=!!I[H.uid],te=M[H.uid]?.items.length===0;k&&te&&!U.includes("empty-folder")&&Q.push({isOpen:!1,level:w+1,item:{kind:"ui",uiKind:"empty-folder",uid:H.uid+"empty-folder"},parentUID:K});const q={item:H,parentUID:K,level:w,isOpen:k},se=[q,...Q];return(0,o.I2)(q.item.uid)&&se.push({item:{kind:"ui",uiKind:"divider",uid:"shared-with-me-divider"},parentUID:K,level:w+1,isOpen:!1}),se}const z=P&&I[P]||B===0,R=P?M[P]:T;let N=((P?z&&R?.items:R?.items)||[]).flatMap(H=>V(H,P,B));const F=U.includes("dashboard")&&R?.lastFetchedKind==="dashboard";return(B===0&&!R||z&&R&&!(R.isFullyLoaded||F))&&(N=N.concat((0,i.T)(d.md,P,B))),N}},80276:(ne,j,e)=>{"use strict";e.d(j,{IH:()=>C,zx:()=>f});var n=e(2543),a=e.n(n),s=e(96540),d=e(86791),o=e(74268),l=e(70327),i=e(55143),c=e(94646),p=e(29609),h=e(80218);const{useLazyPrometheusRuleNamespacesQuery:u,useLazyGetRuleGroupForNamespaceQuery:r}=l.hK,{useLazyDiscoverDsFeaturesQuery:v}=i.L,g=3*1e3,E=90*1e3,{setInterval:x,clearInterval:m}=window;function y(){const[T]=u();return{matchingPromRuleExists:(0,s.useCallback)(async I=>{const{ruleSourceName:B,namespace:U,groupName:W,ruleName:V}=I;return(await T({ruleSourceName:B,namespace:U,groupName:W,ruleName:V}).unwrap()).find(N=>N.name===U)?.groups.find(N=>N.name===W)?.rules.some(N=>{const F=c.Lg(B,U,W,N);return c.LC(F,I)})??!1},[T])}}const b=!0;function D(){const[T]=v(),[M]=u(),[I]=r();return{isGroupInSync:(0,s.useCallback)(async U=>{const W=U.groupOrigin==="datasource"?U.rulesSource.uid:d.l$,V=await T({uid:W},b).unwrap();if(!V.rulerConfig)throw new Error("Datasource does not support ruler. Unable to determine group consistency");const z=U.groupOrigin==="datasource"?U.namespace.name:U.namespace.uid,R={ruleSourceName:V.name,namespace:z,groupName:U.groupName,limitAlerts:0,excludeAlerts:!0},O={namespace:z,group:U.groupName,rulerConfig:V.rulerConfig,notificationOptions:{showSuccessAlert:!1,showErrorAlert:!1}},[N,F]=await Promise.allSettled([M(R).unwrap(),I(O).unwrap()]);if(N.status==="rejected"&&F.status==="rejected")return(0,o.vV)(new Error("Error fetching Prometheus and Ruler rule groups",{cause:[N.reason,F.reason]})),!0;if(N.status==="rejected"&&F.status==="fulfilled")return(0,o.vV)(new Error("Error fetching Prometheus rule groups",{cause:N.reason})),!0;if(F.status==="rejected"&&N.status==="fulfilled")return N.value.flatMap(H=>H.groups).every(H=>H.name!==U.groupName);if(N.status==="fulfilled"&&F.status==="fulfilled"){const G=N.value.flatMap(K=>K.groups).find(K=>K.name===U.groupName),H=F.value;if(G&&H){if(!(G.rules.length===H.rules.length))return!1;const w=G.rules.map(k=>k.name),Q=H.rules.map(p.qz);for(const[k,te]of(0,n.zip)(w,Q))if(k!==te)return!1;return!0}}return!1},[T,M,I])}}function f(){const{isGroupInSync:T}=D(),[M,I]=(0,s.useState)(),B=(0,s.useRef)(),U=(0,s.useRef)();(0,s.useEffect)(()=>()=>{W(),V()},[]);function W(){U.current&&(clearTimeout(U.current),U.current=void 0)}function V(){B.current&&(clearTimeout(B.current),B.current=void 0)}async function z(R){W(),V();const O=new Promise((F,G)=>{U.current=setTimeout(()=>{V();const H=new Error("Timeout while waiting for rule group consistency");(0,o.vV)(H,{groupOrigin:R.groupOrigin}),G(H)},E)}),N=new Promise((F,G)=>{function H(){performance.mark("waitForGroupConsistency:finished");const w=performance.measure("waitForGroupConsistency","waitForGroupConsistency:started","waitForGroupConsistency:finished");(0,o.l$)("alerting:wait-for-group-consistency",{duration:w.duration},{groupOrigin:R.groupOrigin})}function K(){T(R).then(w=>{I(w),w?(H(),F()):B.current=setTimeout(K,g)}).catch(w=>{G(w)}).finally(()=>{W()})}performance.mark("waitForGroupConsistency:started"),K()});return Promise.race([O,N])}return{waitForGroupConsistency:z,groupConsistent:M}}function C(){const{matchingPromRuleExists:T}=y(),M=(0,s.useRef)(),I=(0,s.useRef)();(0,s.useEffect)(()=>()=>{B(),U()},[]);const B=()=>{M.current&&(m(M.current),M.current=void 0)},U=()=>{I.current&&(m(I.current),I.current=void 0)};async function W(z){B();const R=new Promise((N,F)=>{setTimeout(()=>{B(),F(new Error("Timeout while waiting for rule removal"))},E)}),O=new Promise((N,F)=>{M.current=x(()=>{T(z).then(G=>{G===!1&&(B(),N())}).catch(G=>{B(),F(G)})},g)});return Promise.race([R,O])}async function V(z){U();const R=new Promise((N,F)=>{setTimeout(()=>{U(),F(new Error("Timeout while waiting for rule creation"))},E)}),O=new Promise((N,F)=>{I.current=x(()=>{T(z).then(G=>{G===!0&&(U(),N())}).catch(G=>{U(),F(G)})},g)});return Promise.race([R,O])}return{waitForRemoval:W,waitForCreation:V}}function P(T){const{matchingPromRuleExists:M}=y(),{waitForCreation:I}=C(),[B,U]=useAsync(async W=>isCloudRuleIdentifier(W)?I(W):Promise.resolve());return useEffect(()=>{isCloudRuleIdentifier(T)&&M(T).then(W=>{W||B.execute(T)})},[B,T,M]),{isConsistent:U.status==="success"||U.status==="not-executed",error:U.error}}},80465:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>i});var n=e(74848),a=e(92745),s=e(34999),d=e(88227);const o=(c,p="error")=>typeof c=="string"?c:p==="warning"?c.title||(0,a.t)("provisioning.warning-title-default","Warning"):p==="success"?c.title||(0,a.t)("provisioning.success-title-default","Success"):c.title||(0,a.t)("provisioning.error-title-default","Error"),l=c=>typeof c=="string"||!c.message?null:Array.isArray(c.message)?(0,n.jsx)(d.M,{messages:c.message}):c.message;function i({error:c,warning:p,success:h}){const u=c||p||h,r=c?"error":p?"warning":"success",v=r==="success"?"success":r;return u?(0,n.jsx)(s.F,{severity:v,title:o(u,r),children:l(u)}):null}},80763:(ne,j,e)=>{"use strict";e.d(j,{M:()=>u,v:()=>v});var n=e(88483),a=e(78282),s=e(27489),d=e(6890),o=e(64762),l=e(6219),i=e(8535),c=e(51845),p=e(35231),h=e(19050);const u=g=>new n.c(E=>{const x=i.M_.getState().explore.panes[g]?.correlations;if(x)E.next(x),E.complete();else{const m=i.M_.subscribe(()=>{const y=i.M_.getState().explore.panes[g]?.correlations;y&&(m(),E.next(y),E.complete())})}});function r(g){return async(E,x)=>{const m=x().explore.panes[g];if(m.datasourceInstance?.uid!==void 0){let y=m.datasourceInstance.meta.mixed?m.queries.map(D=>D.datasource?.uid).filter(D=>D!==null):[m.datasourceInstance.uid];const b=await(0,l.J6)(y);E((0,c.Fb)({exploreId:g,correlations:b.correlations||[]}))}}}function v(g,E,x){return async(m,y)=>{const b=Object.keys(y().explore?.panes),D=y().explore?.panes[b[0]],f=y().explore?.panes[b[1]];if(!D||!f)return;const C=D.datasourceInstance?.meta.mixed?D.queries[0].datasource:D.datasourceInstance?.getRef(),P=f.datasourceInstance?.meta.mixed?f.queries[0].datasource:f.datasourceInstance?.getRef(),[T,M]=await Promise.all([(0,a.l)().get(C),(0,a.l)().get(P)]);if(T?.uid&&M?.uid&&f.correlationEditorHelperData?.resultField){const I={sourceUID:T.uid,targetUID:M.uid,label:g||await(0,l.tZ)(D,f),description:E,type:"query",config:{field:f.correlationEditorHelperData.resultField,target:f.queries[0],transformations:x}};await(0,l.$q)(T.uid,I).then(async()=>{m((0,p.J8)(b[1])),await m(r(b[0])),await m((0,h.Od)({exploreId:b[0]})),(0,s.rR)("grafana_explore_correlation_editor_saved",{sourceDatasourceType:T.type,targetDataSourceType:M.type})}).catch(B=>{m((0,d.dx)((0,o.gi)("Error creating correlation",B))),console.error(B)})}}}},80839:(ne,j,e)=>{"use strict";e.d(j,{s:()=>u});var n=e(74848),a=e(96540),s=e(48480),d=e(29246),o=e(51898),l=e(41654),i=e(18857),c=e(63509),p=e(78282),h=e(36580);class u extends a.PureComponent{constructor(v){super(v),this.dataSourceSrv=(0,p.l)(),this.state={},this.onChange=(g,E)=>{if(E.action==="clear"&&this.props.onClear){this.props.onClear();return}const x=this.dataSourceSrv.getInstanceSettings(g.value);x&&(this.props.onChange(x),this.setState({error:void 0}))}}static{this.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}}componentDidMount(){const{current:v}=this.props;this.dataSourceSrv.getInstanceSettings(v)||this.setState({error:"Could not find data source "+v})}getCurrentValue(){const{current:v,hideTextValue:g,noDefault:E}=this.props;if(!v&&E)return;const x=this.dataSourceSrv.getInstanceSettings(v);if(x)return{label:x.name.slice(0,37),value:x.uid,imgUrl:x.meta.info.logos.small,hideText:g,meta:x.meta};const m=(0,s.Iz)(v);return m===h.dR.uid||m===h.dR.name?{label:m,value:m,hideText:g}:{label:(m??"no name")+" - not found",value:m??void 0,imgUrl:"",hideText:g}}getDataSourceOptions(){const{alerting:v,tracing:g,metrics:E,mixed:x,dashboard:m,variables:y,annotations:b,pluginId:D,type:f,filter:C,logs:P}=this.props;return this.dataSourceSrv.getList({alerting:v,tracing:g,metrics:E,logs:P,dashboard:m,mixed:x,variables:y,annotations:b,pluginId:D,filter:C,type:f}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:v,onBlur:g,onClear:E,openMenuOnFocus:x,placeholder:m,width:y,inputId:b,disabled:D=!1,isLoading:f=!1}=this.props,{error:C}=this.state,P=this.getDataSourceOptions(),T=this.getCurrentValue(),M=typeof E=="function";return(0,n.jsx)("div",{"aria-label":"Data source picker select container","data-testid":o.Tp.components.DataSourcePicker.container,children:(0,n.jsx)(i.l6,{isLoading:f,disabled:D,"aria-label":"Select a data source","data-testid":o.Tp.components.DataSourcePicker.inputV2,inputId:b||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:P,autoFocus:v,onBlur:g,width:y,openMenuOnFocus:x,maxMenuHeight:500,placeholder:m,noOptionsMessage:"No datasources found",value:T??null,invalid:!!C||!!this.props.invalid,getOptionLabel:I=>I.meta&&(0,d.x)(I.meta.signature)&&I!==T?(0,n.jsxs)(l.B,{alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)("span",{children:I.label})," ",(0,n.jsx)(c.B,{status:I.meta.signature})]}):I.label||""})})}}},80849:(ne,j,e)=>{"use strict";e.d(j,{p:()=>c});var n=e(74848),a=e(51898),s=e(92745),d=e(45861),o=e(66404),l=e(31286),i=e(41654);function c(p){return(0,n.jsx)(l.a,{alignItems:"center",padding:4,children:(0,n.jsxs)(i.B,{direction:"column",alignItems:"center",gap:2,children:[(0,n.jsx)(o.E,{element:"h3",textAlignment:"center",children:(0,n.jsx)(s.x6,{i18nKey:"transformations.empty.add-transformation-header",children:"Start transforming data"})}),(0,n.jsx)(o.E,{element:"p",textAlignment:"center","data-testid":a.Tp.components.Transforms.noTransformationsMessage,children:(0,n.jsxs)(s.x6,{i18nKey:"transformations.empty.add-transformation-body",children:["Transformations allow data to be changed in various ways before your visualization is shown.",(0,n.jsx)("br",{}),"This includes joining data together, renaming fields, making calculations, formatting data for display, and more."]})}),(0,n.jsx)(d.$n,{icon:"plus",variant:"primary",size:"md",onClick:p.onShowPicker,"data-testid":a.Tp.components.Transforms.addTransformationButton,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.empty-transformations-message.add-transformation",children:"Add transformation"})})]})})}},80851:()=>{(function(ne){function j(e){var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},s=null;function d(x){n.active&&(u(x),e.getPlaceholder().trigger("plotselecting",[i()]))}function o(x){x.which==1&&(document.body.focus(),document.onselectstart!==void 0&&a.onselectstart==null&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&a.ondrag==null&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),h(n.first,x),n.active=!0,s=function(m){l(m)},ne(document).one("mouseup",s))}function l(x){return s=null,document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag),n.active=!1,u(x),E()?c(x):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function i(){if(!E()||!n.show)return null;var x={},m=n.first,y=n.second,b=e.getAxes(),D=!0;return ne.each(b,function(f,C){C.used&&(anyUsed=!1)}),ne.each(b,function(f,C){if(C.used||D){var P=C.c2p(m[C.direction]),T=C.c2p(y[C.direction]);x[f]={from:Math.min(P,T),to:Math.max(P,T)}}}),x}function c(x){var m=i();m.ctrlKey=x.ctrlKey,m.metaKey=x.metaKey,e.getPlaceholder().trigger("plotselected",[m]),m.xaxis&&m.yaxis&&e.getPlaceholder().trigger("selected",[{x1:m.xaxis.from,y1:m.yaxis.from,x2:m.xaxis.to,y2:m.yaxis.to}])}function p(x,m,y){return m<x?x:m>y?y:m}function h(x,m){var y=e.getOptions(),b=e.getPlaceholder().offset(),D=e.getPlotOffset();x.x=p(0,m.pageX-b.left-D.left,e.width()),x.y=p(0,m.pageY-b.top-D.top,e.height()),y.selection.mode=="y"&&(x.x=x==n.first?0:e.width()),y.selection.mode=="x"&&(x.y=x==n.first?0:e.height())}function u(x){x.pageX!=null&&(h(n.second,x),E()?(e.isSelecting=!0,n.show=!0,e.triggerRedrawOverlay()):r(!0))}function r(x){n.show&&(n.show=!1,e.triggerRedrawOverlay(),x||e.getPlaceholder().trigger("plotunselected",[]))}function v(x,m){var y,b,D,f,C=e.getAxes();for(var P in C)if(y=C[P],y.direction==m&&(f=m+y.n+"axis",!x[f]&&y.n==1&&(f=m+"axis"),x[f])){b=x[f].from,D=x[f].to;break}if(x[f]||(y=m=="x"?e.getXAxes()[0]:e.getYAxes()[0],b=x[m+"1"],D=x[m+"2"]),b!=null&&D!=null&&b>D){var T=b;b=D,D=T}return{from:b,to:D,axis:y}}function g(x,m){var y,b,D=e.getOptions();D.selection.mode=="y"?(n.first.x=0,n.second.x=e.width()):(b=v(x,"x"),n.first.x=b.axis.p2c(b.from),n.second.x=b.axis.p2c(b.to)),D.selection.mode=="x"?(n.first.y=0,n.second.y=e.height()):(b=v(x,"y"),n.first.y=b.axis.p2c(b.from),n.second.y=b.axis.p2c(b.to)),n.show=!0,e.triggerRedrawOverlay(),!m&&E()&&c()}function E(){var x=e.getOptions().selection.minSize;return Math.abs(n.second.x-n.first.x)>=x&&Math.abs(n.second.y-n.first.y)>=x}e.clearSelection=r,e.setSelection=g,e.getSelection=i,e.hooks.bindEvents.push(function(x,m){var y=x.getOptions();y.selection.mode!=null&&(m.mousemove(d),m.mousedown(o))}),e.hooks.drawOverlay.push(function(x,m){if(n.show&&E()){var y=x.getPlotOffset(),b=x.getOptions();m.save(),m.translate(y.left,y.top);var D=ne.color.parse(b.selection.color);m.strokeStyle=D.scale("a",.8).toString(),m.lineWidth=1,m.lineJoin=b.selection.shape,m.fillStyle=D.scale("a",.4).toString();var f=Math.min(n.first.x,n.second.x)+.5,C=Math.min(n.first.y,n.second.y)+.5,P=Math.abs(n.second.x-n.first.x)-1,T=Math.abs(n.second.y-n.first.y)-1;m.fillRect(f,C,P,T),m.strokeRect(f,C,P,T),m.restore()}}),e.hooks.shutdown.push(function(x,m){m.unbind("mousemove",d),m.unbind("mousedown",o),s&&(ne(document).unbind("mouseup",s),document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag))})}ne.plot.plugins.push({init:j,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},80977:(ne,j,e)=>{"use strict";e.d(j,{x:()=>n});var n=(a=>(a.Descending="Descending",a.Ascending="Ascending",a.DatasourceAZ="Datasource A-Z",a.DatasourceZA="Datasource Z-A",a))(n||{})},81045:(ne,j,e)=>{"use strict";e.d(j,{T:()=>d});var n=e(41778),a=e(11194),s=e(25274);function d(o){let l=o?.editorMode||n.lX.Builder;return o?.editorMode===void 0&&o?.rawSql!==void 0&&(l=n.lX.Code),{...o,refId:o?.refId||"A",format:o?.format!==void 0?o.format:a.gv.Table,rawSql:o?.rawSql||"",editorMode:l,sql:o?.sql??{columns:[(0,s.JD)()],groupBy:[(0,s.xG)()],limit:50}}}},81082:(ne,j,e)=>{"use strict";e.d(j,{I:()=>r,m:()=>u});var n=e(74848),a=e(38809),s=e(95004),d=e(92745),o=e(739),l=e(77824),i=e(76319),c=e(63527),p=e(41654),h=e(99555);const u=({value:v,context:g,onChange:E,item:x})=>(0,n.jsxs)(p.B,{children:[(0,n.jsx)(l.z,{value:v?.mode||o.gs.None,options:x.settings?.options??[],onChange:m=>{E({...v,mode:m})}}),g.isOverride&&v?.mode&&v?.mode!==o.gs.None&&(0,n.jsx)(c.p,{type:"text",placeholder:(0,d.t)("grafana-ui.stacking-builder.group","Group"),suffix:(0,n.jsx)(i.K,{name:"question-circle",tooltip:(0,d.t)("grafana-ui.stacking-builder.group-tooltip","Name of the stacking group"),tooltipPlacement:"top"}),defaultValue:v?.group,onChange:m=>{E({...v,group:m.currentTarget.value.trim()})}})]});function r(v,g,E=["Graph styles"]){const x=(0,h.P)();v.addCustomEditor({id:"stacking",path:"stacking",name:(0,d.t)("grafana-ui.builder.stacking.name-stack-series","Stack series"),category:E,defaultValue:g,editor:u,override:u,settings:{options:x.stacking},process:a.hS,shouldApply:m=>m.type===s.PU.number})}},81166:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>i,QB:()=>l});const n="12.3.0";var a=(c=>(c.Circle="circle",c.Square="square",c))(a||{}),s=(c=>(c.Auto="auto",c.Manual="manual",c))(s||{}),d=(c=>(c.Lines="lines",c.Points="points",c.PointsAndLines="points+lines",c))(d||{});const o={id:""},l={fillOpacity:50,show:"points"},i={series:[]}},81538:(ne,j,e)=>{"use strict";e.d(j,{b:()=>h});var n=e(74848),a=e(22803),s=e(92745),d=e(63142),o=e(45861),l=e(37386),i=e(16780),c=e(63527),p=e(22787);function h({action:r,onDismiss:v,onShowConfirm:g,variables:E,setVariables:x}){const m=(0,d.of)(u),y=()=>{v(),g()};return(0,n.jsxs)(p.a,{isOpen:!0,title:(0,s.t)("grafana-ui.action-editor.button.action-variables-title","Action variables"),onDismiss:v,className:m.variablesModal,children:[(0,n.jsx)(i.n,{children:r.variables.map(b=>(0,n.jsx)(l.D,{label:b.name,children:(0,n.jsx)(c.p,{type:"text",value:E[b.key]??"",onChange:D=>{x({...E,[b.key]:D.currentTarget.value})},placeholder:(0,s.t)("grafana-ui.action-editor.button.variable-value-placeholder","Value"),width:20})},b.name))}),(0,n.jsxs)(p.a.ButtonRow,{children:[(0,n.jsx)(o.$n,{variant:"secondary",onClick:v,children:(0,s.t)("grafana-ui.action-editor.close","Close")}),(0,n.jsx)(o.$n,{variant:"primary",onClick:y,children:(0,s.t)("grafana-ui.action-editor.continue","Continue")})]})]})}const u=()=>({variablesModal:(0,a.css)({zIndex:1e4})})},81563:(ne,j,e)=>{"use strict";e.d(j,{k:()=>h});var n=e(74848),a=e(96540),s=e(22803),d=e(2543),o=e.n(d),l=e(29647),i=e(63142),c=e(5585);const p=r=>({list:(0,s.css)({borderBottom:`1px solid ${r.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,s.css)({background:r.colors.background.primary,width:"250px"}),item:(0,s.css)({background:"none",padding:"2px 8px",userSelect:"none",color:r.colors.text.primary,cursor:"pointer","&:hover":{background:r.colors.action.hover}}),label:(0,s.css)({color:r.colors.text.secondary}),activeItem:(0,s.css)({background:r.colors.background.secondary,"&:hover":{background:r.colors.background.secondary}}),itemValue:(0,s.css)({fontFamily:r.typography.fontFamilyMonospace,fontSize:r.typography.size.sm})}),h=({suggestions:r,...v})=>{const g=(0,a.useRef)(null);(0,l.A)(g,()=>{v.onClose&&v.onClose()});const E=(0,a.useMemo)(()=>(0,d.groupBy)(r,m=>m.origin),[r]),x=(0,i.of)(p);return(0,n.jsx)("div",{role:"menu",ref:g,className:x.wrapper,children:Object.keys(E).map((m,y)=>{const b=y===0?0:Object.keys(E).reduce((D,f,C)=>C>=y?D:D+E[f].length,0);return(0,a.createElement)(u,{...v,suggestions:E[m],label:(0,d.capitalize)(m),activeIndex:v.activeIndex,activeIndexOffset:b,key:m})})})};h.displayName="DataLinkSuggestions";const u=a.memo(({activeIndex:r,activeIndexOffset:v,label:g,onClose:E,onSuggestionSelect:x,suggestions:m,activeRef:y})=>{const b=(0,i.of)(p);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.B,{className:b.list,items:m,renderItem:(D,f)=>{const C=f+v===r;return(0,n.jsx)("div",{role:"menuitem",tabIndex:0,className:(0,s.cx)(b.item,C&&b.activeItem),ref:C?y:void 0,onClick:()=>{x(D)},title:D.documentation,children:(0,n.jsxs)("span",{className:b.itemValue,children:[(0,n.jsx)("span",{className:b.label,children:g})," ",D.label]})})}})})});u.displayName="DataLinkSuggestionsList"},81871:(ne,j,e)=>{"use strict";e.d(j,{F:()=>n});function n(a={}){return{...a,accesscontrol:!0}}},81917:(ne,j,e)=>{"use strict";e.d(j,{l:()=>B});var n=e(74848),a=e(22803),s=e(34743),d=e(83505),o=e(46885),l=e(28848),i=e.n(l),c=e(96540),p=e(84596),h=e(75226),u=e(29317),r=e(79609),v=e(38036),g=e(56103),E=e(63142),x=e(76373),m=e(35458),y=e(63527),b=e(15245),D=e(92807),f=e(81563);class C{getBoundingClientRect(){const V=window.getSelection(),z=V&&V.anchorNode;return z&&z.parentElement?z.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const P=(W,V)=>W-V*Math.floor(W/V),T={builtInVariable:{pattern:/(\${\S+?})/}},M=[(0,g.D)({onlyIn:W=>"type"in W&&W.type==="code_block",getSyntax:()=>"links"},{...i().languages,links:T})],I=W=>({input:(0,y.n)({theme:W,invalid:!1}).input,editor:(0,a.css)({".token.builtInVariable":{color:W.colors.success.text},".token.variable":{color:W.colors.primary.text}}),suggestionsWrapper:(0,a.css)({boxShadow:W.shadows.z2}),wrapperOverrides:(0,a.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),B=(0,c.memo)(({value:W,onChange:V,suggestions:z,placeholder:R="http://your-grafana.com/d/000000010/annotations"})=>{const O=(0,c.useRef)(null),N=(0,E.of)(I),[F,G]=(0,c.useState)(!1),[H,K]=(0,c.useState)(0),[w,Q]=(0,c.useState)((0,m.mO)(W)),k=(0,p.A)(w),[te,q]=(0,c.useState)(0),se=(0,c.useRef)(null);(0,c.useEffect)(()=>{se.current?.scrollTo(0,te)},[te]);const re=[(0,s.cY)(({rects:ie})=>({alignmentAxis:ie.reference.width})),...(0,x.getPositioningMiddleware)()],{refs:Y,floatingStyles:X}=(0,d.we)({open:F,placement:"bottom-start",onOpenChange:G,middleware:re,whileElementsMounted:o.ll,strategy:"fixed"}),J=(0,c.useRef)({showingSuggestions:F,suggestions:z,suggestionsIndex:H,linkUrl:w,onChange:V});J.current={showingSuggestions:F,suggestions:z,suggestionsIndex:H,linkUrl:w,onChange:V};const _=(0,c.useRef)(null);(0,c.useEffect)(()=>{q(U(_.current,H))},[H]);const ee=c.useCallback((ie,oe)=>{if(!J.current.showingSuggestions){if(ie.key==="="||ie.key==="$"||ie.keyCode===32&&ie.ctrlKey){const ue=new C;return Y.setReference(ue),G(!0)}return oe()}switch(ie.key){case"Backspace":J.current.linkUrl.focusText.getText().length===1&&oe();case"Escape":return G(!1),K(0);case"Enter":return ie.preventDefault(),le(J.current.suggestions[J.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":ie.preventDefault();const ue=ie.key==="ArrowDown"?1:-1;return K(ye=>P(ye+ue,J.current.suggestions.length));default:return oe()}},[]);(0,c.useEffect)(()=>{k&&k.selection.isFocused&&!w.selection.isFocused&&J.current.onChange(h.default.serialize(w))},[w,k]);const ae=c.useCallback(({value:ie})=>{Q(ie)},[]),le=(ie,oe=O.current)=>{const ye=L()==="$";ie.origin!==r.$0.Template||ie.value===v.c.includeVars?oe.insertText(`${ye?"":"$"}{${ie.value}}`):oe.insertText(`${ye?"":"$"}{${ie.value}:queryparam}`),Q(oe.value),G(!1),K(0),J.current.onChange(h.default.serialize(oe.value))},L=()=>{const ie=document.getElementById("data-link-input");let oe="",ue,ye;return window.getSelection&&(ue=window.getSelection(),ue&&ue.rangeCount>0&&(ye=ue.getRangeAt(0).cloneRange(),ye.collapse(!0),ye.setStart(ie,0),oe=ye.toString().slice(-1))),oe};return(0,n.jsx)("div",{className:N.wrapperOverrides,children:(0,n.jsx)("div",{className:"slate-query-field__wrapper",children:(0,n.jsxs)("div",{id:"data-link-input",className:"slate-query-field",children:[F&&(0,n.jsx)(b.ZL,{children:(0,n.jsx)("div",{ref:Y.setFloating,style:X,children:(0,n.jsx)(D.P,{maxHeight:"300px",ref:se,onScroll:ie=>q(ie.currentTarget.scrollTop),children:(0,n.jsx)(f.k,{activeRef:_,suggestions:J.current.suggestions,onSuggestionSelect:le,onClose:()=>G(!1),activeIndex:H})})})}),(0,n.jsx)(u.Editor,{schema:m.yx,ref:O,placeholder:R,value:J.current.linkUrl,onChange:ae,onKeyDown:(ie,oe,ue)=>ee(ie,ue),plugins:M,className:(0,a.cx)(N.editor,N.input,(0,a.css)({padding:"3px 8px"}))})]})})})});B.displayName="DataLinkInput";function U(W,V){return(W?.clientHeight??0)*V}},81970:(ne,j,e)=>{"use strict";e.d(j,{Ax:()=>U,DI:()=>x,Gx:()=>y,IA:()=>T,NC:()=>C,TR:()=>V,U3:()=>P,X1:()=>b,cX:()=>f,l0:()=>E,oU:()=>D,rs:()=>m,x8:()=>W});var n=e(2543),a=e.n(n),s=e(5556),d=e(80011),o=e(92745),l=e(78282),i=e(6890),c=e(64762),p=e(8535),h=e(72054),u=e(68126),r=e(53222),v=e(15130),g=e(80977);async function E(R){const{queries:O,localOverride:N,datasource:F,starred:G,comment:H,showNotif:K}=R,w=K?.quotaExceededError??!0,Q=K?.limitExceededWarning??!0,k=K?.otherErrors??!0,te=O&&O.filter(q=>z(q));if(te.length>0){let q=!1,se=!1,re;try{re=(await(N?(0,r.tU)():(0,r.a)()).addToRichHistory({datasourceUid:F.uid,datasourceName:F.name??"",queries:te,starred:G,comment:H??""})).warning}catch(Y){return Y instanceof Error&&(Y.name===h.m.StorageFull?(q=!0,w&&(0,p.JD)((0,i.dx)((0,c.gi)(Y.message)))):k&&Y.name!==h.m.DuplicatedEntry&&(0,p.JD)((0,i.dx)((0,c.gi)((0,o.t)("explore.rich-history-utils-notification.update-failed","Rich History update failed"),Y.message)))),{richHistoryStorageFull:q,limitExceeded:se}}return re&&re.type===h.C.LimitExceeded&&(se=!0,Q&&(0,p.JD)((0,i.dx)((0,c.q8)(re.message)))),{richHistoryStorageFull:q,limitExceeded:se}}return{}}async function x(R){const O={...R,from:R.to===void 0?R.to:(0,u.wQ)(R.to,{isLastTs:!0,tz:v.TP.user?.timezone}),to:R.from===void 0?R.from:(0,u.wQ)(R.from,{isLastTs:!0,tz:v.TP.user?.timezone})};return await(0,r.a)().getRichHistory(O)}async function m(R){await(0,r.a)().updateSettings(R)}async function y(){return await(0,r.a)().getSettings()}async function b(){return(0,r.a)().deleteAll()}async function D(R,O){try{return await(0,r.a)().updateStarred(R,O)}catch(N){N instanceof Error&&(0,p.JD)((0,i.dx)((0,c.gi)((0,o.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),N.message)));return}}async function f(R,O){try{return await(0,r.a)().updateComment(R,O)}catch(N){N instanceof Error&&(0,p.JD)((0,i.dx)((0,c.gi)((0,o.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),N.message)));return}}async function C(R){try{return await(0,r.a)().deleteRichHistory(R),R}catch(O){O instanceof Error&&(0,p.JD)((0,i.dx)((0,c.gi)((0,o.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),O.message)));return}}const P=R=>{const O={range:{from:"now-1h",to:"now"},datasource:R.datasourceName,queries:R.queries},N=(0,s.Pp)(O),F=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return s.kM.renderUrl(`${F}/explore`,{left:N})},T=R=>{let O;switch(R){case 0:O=(0,o.t)("explore.rich-history-utils.today","today");break;case 1:O=(0,o.t)("explore.rich-history-utils.yesterday","yesterday");break;case 7:O=(0,o.t)("explore.rich-history-utils.a-week-ago","a week ago");break;case 14:O=(0,o.t)("explore.rich-history-utils.two-weeks-ago","two weeks ago");break;default:O=(0,o.t)("explore.rich-history-utils.days-ago","{{num}} days ago",{num:`${R}`})}return O};function M(R){return(0,d.LE)(R,{format:"MMMM D"})}function I(R){const O=(0,n.omit)(R,["key","refId","datasource"]);return JSON.stringify(O)}function B(R,O){let N="";return O===g.x.DatasourceAZ||O===g.x.DatasourceZA?N=R.datasourceName:N=M(R.createdAt),N}function U(R,O){return O?.getQueryDisplayText?O.getQueryDisplayText(R):I(R)}function W(R,O){let N={};return R.forEach(F=>{let G=B(F,O);G in N?N[G]=[...N[G],F]:N[G]=[F]}),N}function V(){return(0,l.l)().getList({mixed:!0}).map(R=>({name:R.name,uid:R.uid}))}function z(R){const O=(0,n.omit)(R,["key","refId","datasource"]);return Object.keys(O).length>0}},81988:(ne,j,e)=>{"use strict";e.d(j,{E:()=>l});var n=e(74848),a=e(22803),s=e(15356),d=e(63142),o=e(4651);function l({onChange:c,value:p}){const h=(0,d.of)(i);return(0,n.jsx)(s.f,{className:h.buttonSelectText,options:o.zd,onChange:c,value:p})}const i=c=>({buttonSelectText:(0,a.css)({color:c.colors.primary.text,fontSize:c.typography.bodySmall.fontSize,textTransform:"uppercase",padding:`0 ${c.spacing(1)}`})})},82013:()=>{(function(ne){var j={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(n){var a={x:-1,y:-1,locked:!1};n.setCrosshair=function(l){if(!l)a.x=-1;else{var i=n.p2c(l);a.x=Math.max(0,Math.min(i.left,n.width())),a.y=Math.max(0,Math.min(i.top,n.height()))}n.triggerRedrawOverlay()},n.clearCrosshair=n.setCrosshair,n.lockCrosshair=function(l){l&&n.setCrosshair(l),a.locked=!0},n.unlockCrosshair=function(){a.locked=!1};function s(o){a.locked||a.x!=-1&&(a.x=-1,n.triggerRedrawOverlay())}function d(o){if(!a.locked){if(n.getSelection&&n.getSelection()){a.x=-1;return}var l=n.offset();a.x=Math.max(0,Math.min(o.pageX-l.left,n.width())),a.y=Math.max(0,Math.min(o.pageY-l.top,n.height())),n.triggerRedrawOverlay()}}n.hooks.bindEvents.push(function(o,l){o.getOptions().crosshair.mode&&(l.mouseout(s),l.mousemove(d))}),n.hooks.drawOverlay.push(function(o,l){var i=o.getOptions().crosshair;if(i.mode){var c=o.getPlotOffset();if(l.save(),l.translate(c.left,c.top),a.x!=-1){var p=o.getOptions().crosshair.lineWidth%2?.5:0;if(l.strokeStyle=i.color,l.lineWidth=i.lineWidth,l.lineJoin="round",l.beginPath(),i.mode.indexOf("x")!=-1){var h=Math.floor(a.x)+p;l.moveTo(h,0),l.lineTo(h,o.height())}if(i.mode.indexOf("y")!=-1){var u=Math.floor(a.y)+p;l.moveTo(0,u),l.lineTo(o.width(),u)}l.stroke()}l.restore()}}),n.hooks.shutdown.push(function(o,l){l.unbind("mouseout",s),l.unbind("mousemove",d)})}ne.plot.plugins.push({init:e,options:j,name:"crosshair",version:"1.0"})})(jQuery)},82110:(ne,j,e)=>{"use strict";e.d(j,{a:()=>Ue,b:()=>Ie});var n=e(74848),a=e(22803),s=e(92745),d=e(63142),o=e(68079),l=e(62905),i=e(24313),c=e(52763),p=e(40203),h=e(49785),u=e(51898),r=e(37386),v=e(63527),g=e(47931),E=e(41654),x=e(21285),m=e(72636),y=e(45861),b=e(8515),D=e(90593),f=e(23289),C=e(61730),P=e(11257),T=e(15130),M=e(52908);const I=()=>{const{width:Ke}=(0,M.A)();return Ke>1024};var B=e(47192),U=e(58662),W=e(35195),V=e(34999);const z=()=>(0,n.jsx)(V.F,{title:(0,s.t)("public-dashboard.modal-alerts.save-dashboard-changes-alert-title","Please save your dashboard changes before updating the public configuration"),severity:"warning",bottomSpacing:0});var R=e(37672),O=e(44173),N=e(16780),F=e(56265);const G=u.Tp.pages.ShareDashboardModal.PublicDashboard,H=({disabled:Ke,onChange:Le,register:ze,timeRange:Be})=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(N.n,{disabled:Ke,children:(0,n.jsxs)(E.B,{direction:"column",gap:1,children:[(0,n.jsxs)(E.B,{direction:"column",gap:.5,justifyContent:"space-between",children:[(0,n.jsx)(m.J,{description:(0,s.t)("public-dashboard.settings-configuration.default-time-range-label-desc","The public dashboard uses the default time range settings of the dashboard"),children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.settings-configuration.default-time-range-label",children:"Default time range"})}),(0,n.jsx)(F.b,{value:Be,disabled:!0,onChange:()=>{}})]}),(0,n.jsxs)(E.B,{direction:"row",gap:.5,children:[(0,n.jsx)(x.d,{...ze("isTimeSelectionEnabled"),"data-testid":G.EnableTimeRangeSwitch,onChange:$e=>{Le("isTimeSelectionEnabled",$e.currentTarget.checked),f.c.publicDashboardTimeSelectionChanged({enabled:$e.currentTarget.checked})}}),(0,n.jsx)(m.J,{description:(0,s.t)("public-dashboard.settings-configuration.time-range-picker-label-desc","Allow viewers to change time range"),children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.settings-configuration.time-range-picker-label",children:"Time range picker enabled"})})]}),(0,n.jsxs)(E.B,{direction:"row",gap:.5,children:[(0,n.jsx)(x.d,{...ze("isAnnotationsEnabled"),onChange:$e=>{Le("isAnnotationsEnabled",$e.currentTarget.checked),f.c.publicDashboardAnnotationsSelectionChanged({enabled:$e.currentTarget.checked})},"data-testid":G.EnableAnnotationsSwitch}),(0,n.jsx)(m.J,{description:(0,s.t)("public-dashboard.settings-configuration.show-annotations-label-desc","Show annotations on public dashboard"),children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.settings-configuration.show-annotations-label",children:"Show annotations"})})]})]})})});var K=e(93256),w=e(77824),Q=e(11534);const k=u.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,te=({recipients:Ke,dashboardUid:Le,publicDashboardUid:ze})=>{const Be=(0,d.of)(se),[$e,{isLoading:Ye}]=(0,l.$L)(),[de,{isLoading:ge}]=(0,l.NA)(),pe=Ye||ge,De=(be,Oe)=>{f.c.revokePublicDashboardEmailClicked(),$e({recipientUid:be,recipientEmail:Oe,dashboardUid:Le,uid:ze})},Me=be=>{f.c.resendPublicDashboardEmailClicked(),de({recipientUid:be,uid:ze})};return(0,n.jsx)("table",{className:Be.table,"data-testid":k.EmailSharingList,children:(0,n.jsx)("tbody",{children:Ke.map((be,Oe)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:be.recipient}),(0,n.jsx)("td",{children:(0,n.jsxs)(K.e,{className:Be.tableButtonsContainer,children:[(0,n.jsx)(y.$n,{type:"button",variant:"destructive",fill:"text",title:(0,s.t)("public-dashboard.email-sharing.revoke-button-title","Revoke"),size:"sm",disabled:pe,onClick:()=>De(be.uid,be.recipient),"data-testid":`${k.DeleteEmail}-${Oe}`,children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.email-sharing.revoke-button",children:"Revoke"})}),(0,n.jsx)(y.$n,{type:"button",variant:"primary",fill:"text",title:(0,s.t)("public-dashboard.email-sharing.resend-button-title","Resend"),size:"sm",disabled:pe,onClick:()=>Me(be.uid),"data-testid":`${k.ReshareLink}-${Oe}`,children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.email-sharing.resend-button",children:"Resend"})})]})})]},be.uid))})})},q=({dashboard:Ke})=>{const{width:Le}=(0,M.A)(),ze=(0,d.of)(se),Be=Ke instanceof Q.H$?Ke.state.uid:Ke.uid,{data:$e}=(0,l.Bs)(Be),[Ye]=(0,l.ft)(),[de,{isLoading:ge}]=(0,l.NY)(),pe=T.TP.hasPermission(P.w.DashboardsPublicWrite),{register:De,setValue:Me,control:be,watch:Oe,handleSubmit:Ne,formState:{errors:We},reset:qe}=(0,h.mN)({defaultValues:{shareType:$e?.share||i.Xo.PUBLIC,email:""},mode:"onSubmit"}),st=ot=>{const mt={dashboard:Ke,payload:{...$e,share:ot}};Ye(mt)},rt=async ot=>{f.c.publicDashboardEmailInviteClicked(),await de({recipient:ot.email,uid:$e.uid,dashboardUid:Be}).unwrap(),qe({email:"",shareType:i.Xo.EMAIL})};return(0,n.jsx)("form",{onSubmit:Ne(rt),children:(0,n.jsxs)(N.n,{disabled:!pe,"data-testid":k.Container,className:ze.container,children:[(0,n.jsx)(r.D,{label:(0,s.t)("public-dashboard.config.can-view-dashboard-radio-button-label","Can view dashboard"),className:ze.field,children:(0,n.jsx)(h.xI,{name:"shareType",control:be,render:({field:ot})=>{const{ref:mt,...pt}=ot,ke=[{label:(0,s.t)("public-dashboard.config.public-share-type-option-label","Anyone with a link"),value:i.Xo.PUBLIC},{label:(0,s.t)("public-dashboard.config.email-share-type-option-label","Only specified people"),value:i.Xo.EMAIL}];return(0,n.jsx)(w.z,{...pt,size:Le<480?"sm":"md",options:ke,onChange:Ze=>{f.c.publicDashboardShareTypeChange({shareType:Ze===i.Xo.EMAIL?"email":"public"}),Me("shareType",Ze),st(Ze)}})}})}),Oe("shareType")===i.Xo.EMAIL&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.D,{label:(0,s.t)("public-dashboard.email-sharing.invite-field-label","Invite"),description:(0,s.t)("public-dashboard.email-sharing.invite-field-desc","Invite people by email"),error:We.email?.message,invalid:!!We.email?.message||void 0,className:ze.field,children:(0,n.jsxs)("div",{className:ze.emailContainer,children:[(0,n.jsx)(v.p,{className:ze.emailInput,placeholder:"me@example.com",autoCapitalize:"none",...De("email",{required:(0,s.t)("public-dashboard.email-sharing.input-required-email-text","Email is required"),pattern:{value:i._l,message:(0,s.t)("public-dashboard.email-sharing.input-invalid-email-text","Invalid email")}}),"data-testid":k.EmailSharingInput}),(0,n.jsxs)(y.$n,{type:"submit",variant:"primary",disabled:ge,"data-testid":k.EmailSharingInviteButton,children:[(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.email-sharing.invite-button",children:"Invite"}),ge&&(0,n.jsx)(o.y,{})]})]})}),!!$e?.recipients?.length&&(0,n.jsx)(te,{recipients:$e.recipients,dashboardUid:Be,publicDashboardUid:$e.uid})]})]})})},se=Ke=>({container:(0,a.css)({label:"emailConfigContainer",display:"flex",flexDirection:"column",flexWrap:"wrap",gap:Ke.spacing(3)}),field:(0,a.css)({label:"field-noMargin",marginBottom:0}),emailContainer:(0,a.css)({label:"emailContainer",display:"flex",gap:Ke.spacing(1)}),emailInput:(0,a.css)({label:"emailInput",flexGrow:1}),table:(0,a.css)({label:"table",display:"flex",maxHeight:"220px",overflowY:"scroll","& tbody":{display:"flex",flexDirection:"column",flexGrow:1},"& tr":{minHeight:"40px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:Ke.spacing(.5,1),":nth-child(odd)":{background:Ke.colors.background.secondary}}}),tableButtonsContainer:(0,a.css)({display:"flex",justifyContent:"end"})});var re=e(96540),Y=e(44019),X=e(76319);function J({headerElement:Ke,isContentVisible:Le=!1,onRowToggle:ze,title:Be,...$e}){const Ye=(0,d.of)(_),de=Ke&&Y.renderOrCallToRender(Ke,{className:Ye.summaryWrapper});return(0,n.jsx)("div",{className:Ye.wrapper,children:(0,n.jsxs)("div",{className:Ye.header,children:[(0,n.jsx)(X.K,{name:Le?"angle-down":"angle-right",tooltip:Le?(0,s.t)("public-dashboard.settings-bar-header.collapse-settings-tooltip","Collapse settings"):(0,s.t)("public-dashboard.settings-bar-header.expand-settings-tooltip","Expand settings"),className:Ye.collapseIcon,onClick:ze,"aria-expanded":Le,...$e}),Be&&(0,n.jsx)("div",{className:Ye.titleWrapper,onClick:ze,children:(0,n.jsx)("span",{className:Ye.title,children:Be})}),de]})})}J.displayName="SettingsBarHeader";function _(Ke){return{wrapper:(0,a.css)({label:"header",padding:Ke.spacing(.5,.5),borderRadius:Ke.shape.radius.default,background:Ke.colors.background.secondary,minHeight:Ke.spacing(4),"&:focus":{outline:"none"}}),header:(0,a.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,a.css)({marginLeft:Ke.spacing(.5),color:Ke.colors.text.disabled}),titleWrapper:(0,a.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${Ke.spacing(.5)}`,[Ke.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,a.css)({fontWeight:Ke.typography.fontWeightBold,marginLeft:Ke.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,a.css)({display:"flex",flexWrap:"wrap",[Ke.breakpoints.down("sm")]:{flex:"2 2"}})}}function ee({children:Ke,title:Le,headerElement:ze,...Be}){const $e=(0,d.of)(ae),[Ye,de]=(0,re.useState)(!1);function ge(){de(pe=>!pe)}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J,{onRowToggle:ge,isContentVisible:Ye,title:Le,headerElement:ze,...Be}),Ye&&(0,n.jsx)("div",{className:$e.content,children:Ke})]})}ee.displayName="SettingsBar";const ae=Ke=>({content:(0,a.css)({marginTop:Ke.spacing(1),marginLeft:Ke.spacing(4)})});var le=e(83692);function L({className:Ke,isDataLoading:Le=!1,timeRange:ze,timeSelectionEnabled:Be,annotationsEnabled:$e}){const Ye=(0,d.of)(ie),de=(0,s.t)("public-dashboard.settings-summary.time-range-picker-enabled-text","Time range picker = enabled"),ge=(0,s.t)("public-dashboard.settings-summary.time-range-picker-disabled-text","Time range picker = disabled"),pe=(0,s.t)("public-dashboard.settings-summary.annotations-show-text","Annotations = show"),De=(0,s.t)("public-dashboard.settings-summary.annotations-hide-text","Annotations = hide");return Le?(0,n.jsx)("div",{className:(0,a.cx)(Ye.summaryWrapper,Ke),children:(0,n.jsx)(o.y,{className:Ye.summary,inline:!0,size:"sm"})}):(0,n.jsxs)("div",{className:(0,a.cx)(Ye.summaryWrapper,Ke),children:[(0,n.jsxs)("span",{className:Ye.summary,children:[(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.settings-summary.time-range-text",children:"Time range = "}),(0,n.jsx)(le.f,{className:Ye.timeRange,value:ze})]}),(0,n.jsx)("span",{className:Ye.summary,children:Be?de:ge}),(0,n.jsx)("span",{className:Ye.summary,children:$e?pe:De})]})}L.displayName="SettingsSummary";const ie=Ke=>({summaryWrapper:(0,a.css)({display:"flex"}),summary:(0,a.css)({label:"collapsedText",marginLeft:`${Ke.spacing.gridSize*2}px`,fontSize:Ke.typography.bodySmall.fontSize,color:Ke.colors.text.secondary}),timeRange:(0,a.css)({display:"inline-block"})}),oe=u.Tp.pages.ShareDashboardModal.PublicDashboard;function ue({onRevoke:Ke,timeRange:Le,hasTemplateVariables:ze=!1,showSaveChangesAlert:Be=!1,unsupportedDatasources:$e=[],publicDashboard:Ye,dashboard:de}){const ge=(0,d.of)(fe),pe=I(),[De,{isLoading:Me}]=(0,l.T2)(),[be,{isLoading:Oe}]=(0,l.eq)(),Ne=T.TP.hasPermission(P.w.DashboardsPublicWrite),We=!Ne||Me||Oe,{handleSubmit:qe,setValue:st,register:rt}=(0,h.mN)({defaultValues:{isAnnotationsEnabled:Ye?.annotationsEnabled,isTimeSelectionEnabled:Ye?.timeSelectionEnabled,isPaused:!Ye?.isEnabled}}),ot=async nt=>{const{isAnnotationsEnabled:ut,isTimeSelectionEnabled:gt,isPaused:ht}=nt;De({dashboard:de,payload:{...Ye,annotationsEnabled:ut,timeSelectionEnabled:gt,isEnabled:!ht}})},mt=async nt=>{const{isAnnotationsEnabled:ut,isTimeSelectionEnabled:gt,isPaused:ht}=nt;be({dashboard:de,payload:{...Ye,annotationsEnabled:ut,timeSelectionEnabled:gt,isEnabled:!ht}})},pt=async(nt,ut)=>{st(nt,ut),await qe(gt=>ot(gt))()},ke=async nt=>{st("isPaused",nt),await qe(ut=>mt(ut))()};function Ze(){f.c.publicDashboardUrlCopied()}return(0,n.jsxs)("div",{className:ge.configContainer,children:[Be&&(0,n.jsx)(z,{}),!Ne&&(0,n.jsx)(W.t,{mode:"edit"}),ze&&(0,n.jsx)(O.D,{}),$e.length>0&&(0,n.jsx)(R.s,{unsupportedDataSources:$e.join(", ")}),(0,i.AY)()&&(0,n.jsx)(q,{dashboard:de}),(0,n.jsx)(r.D,{label:(0,s.t)("public-dashboard.config.dashboard-url-field-label","Dashboard URL"),className:ge.fieldSpace,children:(0,n.jsx)(v.p,{value:(0,i.mL)(Ye.accessToken),readOnly:!0,disabled:!Ye?.isEnabled,"data-testid":oe.CopyUrlInput,addonAfter:(0,n.jsx)(g.b,{"data-testid":oe.CopyUrlButton,variant:"primary",disabled:!Ye?.isEnabled,getText:()=>(0,i.mL)(Ye.accessToken),onClipboardCopy:Ze,children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.config.copy-button",children:"Copy"})})})}),(0,n.jsx)(r.D,{className:ge.fieldSpace,children:(0,n.jsxs)(E.B,{children:[(0,n.jsx)(x.d,{...rt("isPaused"),disabled:We,onChange:nt=>{f.c.publicDashboardPauseSharingClicked({paused:nt.currentTarget.checked}),ke(nt.currentTarget.checked)},"data-testid":oe.PauseSwitch}),(0,n.jsx)(m.J,{className:(0,a.css)({marginBottom:0}),children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.config.pause-sharing-dashboard-label",children:"Pause sharing dashboard"})})]})}),(0,n.jsx)(r.D,{className:ge.fieldSpace,children:(0,n.jsx)(ee,{title:(0,s.t)("public-dashboard.config.settings-title","Settings"),headerElement:({className:nt})=>(0,n.jsx)(L,{className:nt,isDataLoading:Me,timeRange:Le,timeSelectionEnabled:Ye?.timeSelectionEnabled,annotationsEnabled:Ye?.annotationsEnabled}),"data-testid":oe.SettingsDropdown,children:(0,n.jsx)(H,{disabled:We,onChange:pt,register:rt,timeRange:Le})})}),(0,n.jsx)(E.B,{direction:pe?"row":"column",justifyContent:pe?"flex-end":"flex-start",alignItems:pe?"center":"stretch",children:(0,n.jsx)(E.B,{justifyContent:"flex-end",children:(0,n.jsx)(y.$n,{title:(0,s.t)("public-dashboard.config.revoke-public-URL-button-title","Revoke public URL"),onClick:Ke,type:"button",disabled:We,"data-testid":oe.DeleteButton,variant:"destructive",fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.config.revoke-public-URL-button",children:"Revoke public URL"})})})})]})}function ye({publicDashboard:Ke,unsupportedDatasources:Le}){const Be=(0,c.d4)(De=>De.dashboard).getModel(),$e=(0,D.z)(Be.getDefaultTime(),Be),Ye=T.TP.hasPermission(P.w.DashboardsPublicWrite),de=(0,i.kD)(Be.getVariables()),[ge]=(0,l.bN)(),pe=De=>{ge({dashboard:Be,uid:Ke.uid,dashboardUid:Be.uid}),De()};return(0,n.jsx)(b.$s,{children:({showModal:De,hideModal:Me})=>(0,n.jsx)(ue,{publicDashboard:Ke,dashboard:Be,unsupportedDatasources:Le,timeRange:$e,showSaveChangesAlert:Ye&&Be.hasUnsavedChanges(),hasTemplateVariables:de,onRevoke:()=>{f.c.revokePublicDashboardClicked(),De(C.m,{onConfirm:()=>pe(Me),onDismiss:()=>{De(B.Zy,{dashboard:Be,onDismiss:Me,activeTab:U.wr.publicDashboard})}})}})})}const fe=Ke=>({configContainer:(0,a.css)({label:"config container",display:"flex",flexDirection:"column",flexWrap:"wrap",gap:Ke.spacing(3)}),fieldSpace:(0,a.css)({label:"field space",width:"100%",marginBottom:0}),timeRange:(0,a.css)({display:"inline-block"})}),Ee=Ke=>{const[Le,ze]=(0,re.useState)([]);return(0,re.useEffect)(()=>{(async()=>await(0,i._A)(Ke.panels))().then($e=>{ze($e)})},[Ke.panels]),{unsupportedDataSources:Le}};var Ae=e(32635);const Ge=u.Tp.pages.ShareDashboardModal.PublicDashboard,Fe=({disabled:Ke,register:Le})=>{const ze=(0,d.of)(Pe),Be=[{type:"publicAcknowledgment",description:(0,s.t)("public-dashboard.acknowledgment-checkboxes.public-ack-desc","Your entire dashboard will be public*"),testId:Ge.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:(0,s.t)("public-dashboard.acknowledgment-checkboxes.public-ack-tooltip","Learn more about public dashboards")}},{type:"dataSourcesAcknowledgment",description:(0,s.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-desc","Publishing currently only works with a subset of data sources*"),testId:Ge.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:(0,s.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-tooltip","Learn more about public datasources")}},{type:"usageAcknowledgment",description:(0,s.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc","Making a dashboard public will cause queries to run each time it is viewed, which may increase costs*"),testId:Ge.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:(0,s.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc-tooltip","Learn more about query caching")}}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:ze.title,children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.acknowledgment-checkboxes.ack-title",children:"Before you make the dashboard public, acknowledge the following:"})}),(0,n.jsx)(N.n,{disabled:Ke,children:(0,n.jsx)(E.B,{direction:"column",gap:2,children:Be.map($e=>(0,n.jsxs)(E.B,{gap:0,alignItems:"center",children:[(0,n.jsx)(Ae.S,{...Le($e.type,{required:!0}),label:$e.description,"data-testid":$e.testId}),(0,n.jsx)(y.z9,{variant:"primary",href:$e.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:$e.info.tooltip})]},$e.type))})})]})},Pe=Ke=>({title:(0,a.css)({fontWeight:Ke.typography.fontWeightBold})}),Ve=u.Tp.pages.ShareDashboardModal.PublicDashboard,me=({unsupportedDatasources:Ke=[],unsupportedTemplateVariables:Le=!1,dashboard:ze,hasError:Be=!1})=>{const $e=(0,d.of)(Qe),Ye=T.TP.hasPermission(P.w.DashboardsPublicWrite),[de,{isLoading:ge,isError:pe}]=(0,l.U9)(),De=()=>{de({dashboard:ze,payload:{isEnabled:!0}}),f.c.generatePublicDashboardUrlClicked({})},{handleSubmit:Me,register:be,formState:{isValid:Oe}}=(0,h.mN)({mode:"onChange"}),Ne=!Ye||ge||pe||Be;return(0,n.jsxs)("div",{className:$e.container,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:$e.title,children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.create-page.welcome-title",children:"Welcome to public dashboards!"})}),(0,n.jsx)("p",{className:$e.description,children:(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.create-page.unsupported-features-desc",children:"Currently, we don\u2019t support template variables or frontend data sources"})})]}),!Ye&&(0,n.jsx)(W.t,{mode:"create"}),Le&&(0,n.jsx)(O.D,{}),Ke.length>0&&(0,n.jsx)(R.s,{unsupportedDataSources:Ke.join(", ")}),(0,n.jsxs)("form",{onSubmit:Me(De),children:[(0,n.jsx)("div",{className:$e.checkboxes,children:(0,n.jsx)(Fe,{disabled:Ne,register:be})}),(0,n.jsx)("div",{className:$e.buttonContainer,children:(0,n.jsxs)(y.$n,{type:"submit",disabled:Ne||!Oe,"data-testid":Ve.CreateButton,children:[(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.create-page.generate-public-url-button",children:"Generate public URL"}),ge&&(0,n.jsx)(o.y,{className:$e.loadingSpinner})]})})]})]})};function Se({hasError:Ke}){const ze=(0,c.d4)(Ye=>Ye.dashboard).getModel(),{unsupportedDataSources:Be}=Ee(ze),$e=(0,i.kD)(ze.getVariables());return(0,n.jsx)(me,{dashboard:ze,unsupportedDatasources:Be,unsupportedTemplateVariables:$e,hasError:Ke})}const Qe=Ke=>({container:(0,a.css)({display:"flex",flexDirection:"column",gap:Ke.spacing(4)}),title:(0,a.css)({fontSize:Ke.typography.h4.fontSize,margin:Ke.spacing(0,0,2)}),description:(0,a.css)({color:Ke.colors.text.secondary,marginBottom:Ke.spacing(0)}),checkboxes:(0,a.css)({margin:Ke.spacing(0,0,4)}),buttonContainer:(0,a.css)({display:"flex",justifyContent:"end"}),loadingSpinner:(0,a.css)({marginLeft:Ke.spacing(1)})}),Ue=()=>{const Ke=(0,d.of)(Re);return(0,n.jsx)(p.G,{className:Ke.loadingContainer,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.x6,{i18nKey:"dashboard.share-public-dashboard-loader.loading-configuration",children:"Loading configuration"}),(0,n.jsx)(o.y,{size:"lg",className:Ke.spinner})]})})},Ie=Ke=>{const{data:Le,isLoading:ze,isError:Be}=(0,l.Bs)(Ke.dashboard.uid),Ye=(0,c.d4)(ge=>ge.dashboard).getModel(),{unsupportedDataSources:de}=Ee(Ye);return(0,n.jsx)(n.Fragment,{children:ze?(0,n.jsx)(Ue,{}):(0,i.lI)(Le)?(0,n.jsx)(ye,{publicDashboard:Le,unsupportedDatasources:de}):(0,n.jsx)(Se,{hasError:Be})})},Re=Ke=>({loadingContainer:(0,a.css)({height:"280px",alignItems:"center",justifyContent:"center",gap:Ke.spacing(1)}),spinner:(0,a.css)({marginBottom:Ke.spacing(0)})})},82143:(ne,j,e)=>{"use strict";e.d(j,{u:()=>v});var n=e(2543),a=e.n(n),s=e(96540),d=e(13752),o=e(96083),l=e(62467),i=e(11150),c=e(63720),p=e(59099),h=e(8934),u=e(90811);function r(g){return{label:g,value:stringToMs(g)}}class v extends s.PureComponent{constructor(E){super(E),this.propsSubject=new d.B,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,c.n)(E=>u.cC.isLive(E.interval)?(0,l.of)({}):E.loading?i.t:(0,o.Y)((0,h.dc)(E.interval))),(0,p.M)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(E){u.cC.isLive(E.interval)&&u.cC.isLive(this.props.interval)||(0,n.isEqual)(E,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},82151:(ne,j,e)=>{"use strict";e.d(j,{b:()=>h});var n=e(74848),a=e(96540),s=e(92745),d=e(41654),o=e(99887),l=e(75735),i=e(55266),c=e(27321),p=e(45942);const h=(0,a.memo)(function({folder:v}){const g=(0,c.F)(),E=u(v,g),{isReadOnlyRepo:x,repoType:m}=(0,i.T)({folderName:E?void 0:v?.uid,skipQuery:E});return E?null:(0,n.jsxs)(d.B,{direction:"row",alignItems:"stretch",children:[x&&(0,n.jsx)(o.E,{color:"darkgrey",text:(0,s.t)("folder-repo.read-only-badge","Read only"),tooltip:(0,p.Te)({isLocal:m==="local"})}),(0,n.jsx)(o.E,{title:(0,s.t)("folder-repo.provisioned-badge","Provisioned"),color:"purple",icon:"exchange-alt",tooltip:(0,s.t)("folder-repo.provisioned-badge","Provisioned")})]})});function u(r,v){const g=r&&!!("parentUID"in r&&r.parentUID),E=r&&r.managedBy!==l.Sf.Repo;return!r||g||E||v}},82345:(ne,j,e)=>{"use strict";e.d(j,{Fq:()=>b,Hf:()=>C,mQ:()=>B});var n=e(2543),a=e.n(n),s=e(63704),d=e(16515),o=e(92138),l=e(5556),i=e(38036),c=e(37615),p=e(79609),h=e(95004),u=e(92745),r=e(2863),v=e(739),g=e(65642);const E=[{value:`${i.c.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:p.$0.BuiltIn},{value:`${i.c.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:p.$0.BuiltIn},{value:`${i.c.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:p.$0.BuiltIn}],x=[{value:`${i.c.seriesName}`,label:"Name",documentation:"Name of the series",origin:p.$0.Series}],m=[{value:`${i.c.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:p.$0.Value},{value:`${i.c.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:p.$0.Value},{value:`${i.c.valueRaw}`,label:"Raw",documentation:"Raw value",origin:p.$0.Value}],y=U=>U.includes(".")||U.trim().includes(" ")?`["${U}"]`:`.${U}`,b=()=>[...(0,r.w)().getVariables().map(U=>({value:U.name,label:U.name,origin:p.$0.Template})),{value:`${i.c.includeVars}`,label:(0,u.t)("panel.get-panel-links-variable-suggestions.label.all-variables","All variables"),documentation:"Adds current variables",origin:p.$0.Template},...E],D=U=>{const W=[];for(const z of U)for(const R of z.fields)if(R.labels)for(const O of Object.keys(R.labels))W.push(O);const V=(0,n.chain)(W).flatten().uniq().value();return[{value:`${i.c.fieldName}`,label:(0,u.t)("panel.get-field-vars.label.name","Name"),documentation:"Field name of the clicked datapoint (in ms epoch)",origin:p.$0.Field},...V.map(z=>({value:`__field.labels${y(z)}`,label:`labels.${z}`,documentation:`${z} label value`,origin:p.$0.Field}))]},f=U=>{let W,V;const z=[],R={};if(U.length!==1)return[];const O=U[0];for(const N of O.fields){const F=(0,d.Ct)(N,O,U);R[F]||(z.push({value:`__data.fields${y(F)}`,label:`${F}`,documentation:`Formatted value for ${F} on the same row`,origin:p.$0.Fields}),R[F]=!0,!W&&N.type===h.PU.number&&(W={...N,name:F}),!V&&N.config.displayName&&N.config.displayName!==N.name&&(V={...N,name:F}))}return z.length&&z.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:p.$0.Fields}),W&&(z.push({value:`__data.fields${y(W.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:p.$0.Fields}),z.push({value:`__data.fields${y(W.name)}.text`,label:"Show text value",documentation:"the text value",origin:p.$0.Fields})),V&&z.push({value:`__data.fields${y(V.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:p.$0.Fields}),z},C=(U,W)=>{const V={value:`${i.c.valueTime}`,label:(0,u.t)("panel.get-data-links-variable-suggestions.value-time-var.label.time","Time"),documentation:"Time value of the clicked datapoint (in ms epoch)",origin:p.$0.Value};return W===p.uP.Values?[...x,...D(U),...m,V,...f(U),...b()]:[...x,...D(U),...f(U),...b()]},P=U=>{const W=D(U),V={value:`${DataLinkBuiltInVars.valueCalc}`,label:t("panel.get-calculation-value-data-links-variable-suggestions.value-calc-var.label.calculation-name","Calculation name"),documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...x,...W,...m,V,...b()]};class T{constructor(){this.getDataLinkUIModel=(W,V,z)=>{let R=W.url;W.onBuildUrl&&(R=W.onBuildUrl({origin:z,replaceVariables:V}));const O={href:o.I.assureBaseUrl(R.replace(/\n/g,"")),title:W.title??"",target:W.targetBlank!==void 0?W.targetBlank?"_blank":"_self":void 0,origin:z};return V&&(O.href=V(O.href,void 0,v.$m.UriEncode),O.title=V(W.title)),W.onClick&&(O.onClick=N=>{W.onClick({origin:z,replaceVariables:V,e:N})}),O.href=(0,g.zj)().disableSanitizeHtml?O.href:s.sQ.sanitizeUrl(O.href),O}}getLinkUrl(W){let V=W.url??"";return W.keepTime&&(V=l.kM.appendQueryToUrl(V,`$${i.c.keepTime}`)),W.includeVars&&(V=l.kM.appendQueryToUrl(V,`$${i.c.includeVars}`)),V=(0,r.w)().replace(V),V=o.I.assureBaseUrl(V),(0,g.zj)().disableSanitizeHtml?V:s.sQ.sanitizeUrl(V)}getAnchorInfo(W){const V=(0,r.w)();return{href:this.getLinkUrl(W),title:V.replace(W.title||""),tooltip:V.replace(W.tooltip||"")}}getPanelLinkAnchorInfo(W,V){(0,c.l)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const z=(R,O,N)=>(0,r.w)().replace(R,{...V,...O},N);return this.getDataLinkUIModel(W,z,{})}}let M;function I(U){M=U}function B(){return M||(M=new T),M}},82472:(ne,j,e)=>{"use strict";e.d(j,{a:()=>D});var n=e(74848),a=e(22803),s=e(96540),d=e(16817),o=e(70713),l=e(92745),i=e(63142),c=e(38919),p=e(43173),h=e(92391);const u=["timeseries","barchart","gauge","stat","piechart","bargauge","table","state-timeline","status-history","logs","candlestick","flamegraph","traces","nodeGraph"];async function r(P,T){const M=new c.v2(P,T);for(const B of u){const W=(await(0,h.TV)(B)).getSuggestionsSupplier();W&&W.getSuggestionsForData(M)}const I=M.getList();if(M.dataSummary.fieldCount===0)for(const B of Object.values(p.$.panels))!B.skipDataQuery||B.hideFromList||I.push({name:B.name,pluginId:B.id,description:B.info.description,cardOptions:{imgSrc:B.info.logos.small}});return I.sort((B,U)=>{if(M.dataSummary.preferredVisualisationType){if(B.pluginId===M.dataSummary.preferredVisualisationType)return-1;if(U.pluginId===M.dataSummary.preferredVisualisationType)return 1}return(U.score??c.nQ.OK)-(B.score??c.nQ.OK)})}var v=e(2543),g=e(51898),E=e(45967),x=e(35307);function m({data:P,suggestion:T,onChange:M,width:I}){const B=(0,i.of)(y),{innerStyles:U,outerStyles:W,renderWidth:V,renderHeight:z}=b(I),R=T.cardOptions??{},O={"aria-label":T.name,className:B.vizBox,"data-testid":g.Tp.components.VisualizationPreview.card(T.name),style:W,onClick:()=>{M({pluginId:T.pluginId,options:T.options,fieldConfig:T.fieldConfig})}};if(R.imgSrc)return(0,n.jsx)(E.m,{content:T.description??T.name,children:(0,n.jsxs)("button",{...O,className:(0,a.cx)(B.vizBox,B.imgBox),children:[(0,n.jsx)("div",{className:B.name,children:T.name}),(0,n.jsx)("img",{className:B.img,src:R.imgSrc,alt:T.name})]})});let N=T;return T.cardOptions?.previewModifier&&(N=(0,v.cloneDeep)(T),T.cardOptions.previewModifier(N)),(0,n.jsx)("button",{...O,children:(0,n.jsx)(E.m,{content:T.name,children:(0,n.jsxs)("div",{style:U,className:B.renderContainer,children:[(0,n.jsx)(x.m,{title:"",data:P,pluginId:T.pluginId,width:V,height:z,options:N.options,fieldConfig:N.fieldConfig}),(0,n.jsx)("div",{className:B.hoverPane})]})})})}const y=P=>({hoverPane:(0,a.css)({position:"absolute",top:0,right:0,left:0,borderRadius:P.spacing(2),bottom:0}),vizBox:(0,a.css)({position:"relative",background:"none",borderRadius:P.shape.radius.default,cursor:"pointer",border:`1px solid ${P.colors.border.medium}`,[P.transitions.handleMotion("no-preference","reduce")]:{transition:P.transitions.create(["background"],{duration:P.transitions.duration.short})},"&:hover":{background:P.colors.background.secondary}}),imgBox:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",color:P.colors.text.primary,width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"}),name:(0,a.css)({paddingBottom:P.spacing(.5),marginTop:P.spacing(-1),fontSize:P.typography.bodySmall.fontSize,whiteSpace:"nowrap",overflow:"hidden",color:P.colors.text.secondary,fontWeight:P.typography.fontWeightMedium,textOverflow:"ellipsis"}),img:(0,a.css)({maxWidth:P.spacing(8),maxHeight:P.spacing(8)}),renderContainer:(0,a.css)({position:"absolute",transformOrigin:"left top",top:"6px",left:"6px"})});function b(P){const M=P,I=P*(1/1.6),B=350,U=B*(1/1.6),W=6,V=(M-W*2)/B,z=(I-W*2)/U;return{renderHeight:U,renderWidth:B,outerStyles:{width:M,height:I},innerStyles:{width:B,height:U,transform:`scale(${V}, ${z})`}}}function D({searchQuery:P,onChange:T,data:M,panel:I,trackSearch:B}){const U=(0,i.of)(C),{value:W}=(0,d.A)(()=>r(M,I),[M,I]),V=(0,s.useMemo)(()=>{const z=f(P,W);return B&&B(P,z.length),z},[P,W,B]);return(0,n.jsx)("div",{children:(0,n.jsx)(o.Ay,{disableHeight:!0,style:{width:"100%",height:"100%"},children:({width:z})=>{if(!z)return null;z=z-1;const R=Math.floor(z/200),O=8*(R-1),N=Math.floor((z-O)/R);return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:U.filterRow,children:(0,n.jsx)("div",{className:U.infoText,children:(0,n.jsx)(l.x6,{i18nKey:"panel.visualization-suggestions.based-on-current-data",children:"Based on current data"})})}),(0,n.jsxs)("div",{className:U.grid,style:{gridTemplateColumns:`repeat(auto-fill, ${N}px)`},children:[V.map((F,G)=>(0,n.jsx)(m,{data:M,suggestion:F,onChange:T,width:N-1},G)),P&&V.length===0&&(0,n.jsx)("div",{className:U.infoText,children:(0,n.jsx)(l.x6,{i18nKey:"panel.visualization-suggestions.no-results-matched-your-query",children:"No results matched your query"})})]})]})}})})}function f(P,T){if(!P||!T)return T||[];const M=new RegExp(P,"i");return T.filter(I=>M.test(I.name)||M.test(I.pluginId))}const C=P=>({heading:(0,a.css)({...P.typography.h5,margin:P.spacing(0,.5,1)}),filterRow:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",paddingBottom:"8px"}),infoText:(0,a.css)({fontSize:P.typography.bodySmall.fontSize,color:P.colors.text.secondary,fontStyle:"italic"}),grid:(0,a.css)({display:"grid",gridGap:P.spacing(1),gridTemplateColumns:"repeat(auto-fill, 144px)",marginBottom:P.spacing(1),justifyContent:"space-evenly"})})},82612:(ne,j,e)=>{"use strict";e.d(j,{NB:()=>y,a9:()=>b,tw:()=>f});var n=e(2543),a=e.n(n),s=e(24726),d=e(39796),o=e(19379),l=e(69168),i=e(1906),c=e(2863),p=e(75234),h=e(65642),u=e(62635),r=e(87745),v=e(96215),g=e(56623);const E={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0,refreshWhenInView:!0},x={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,isViewing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},m={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},links:[],transformations:[],fieldConfig:{defaults:{},overrides:[]},title:""},y={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap","natel-discrete-panel":"state-timeline"};class b{constructor(P){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.refreshWhenInView=!0,this.cachedPluginOptions={},this.events=new o.o,this.restoreModel(P),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,s.A)()}restoreModel(P){for(const M in this)E[M]||!this.hasOwnProperty(M)||P[M]||typeof this[M]!="function"&&typeof this[M]!="symbol"&&delete this[M];for(const M in P)this[M]=P[M];const T=(0,g.p)(this);T&&(this.autoMigrateFrom=this.type,this.type=T),(0,n.defaultsDeep)(this,(0,n.cloneDeep)(m)),this.ensureQueryIds()}generateNewKey(){this.key=(0,s.A)()}ensureQueryIds(){if(this.targets&&(0,n.isArray)(this.targets))for(const P of this.targets)P.refId||(P.refId=(0,d.M)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(P){this.options=P,this.configRev++,this.events.publish(new r.PR),this.render()}updateFieldConfig(P){this.fieldConfig=P,this.configRev++,this.events.publish(new r.PR),this.resendLastResult(),this.render()}getSaveModel(){const P={};for(const T in this)E[T]||!this.hasOwnProperty(T)||(0,n.isEqual)(this[T],m[T])||(P[T]=(0,n.cloneDeep)(this[T]));return this.type==="row"&&this.panels&&this.panels.length>0&&(P.panels=this.panels.map(T=>{if(T.libraryPanel){const{id:M,title:I,libraryPanel:B,gridPos:U}=T;return{id:M,title:I,gridPos:U,libraryPanel:{uid:B.uid,name:B.name}}}return T})),P}setIsViewing(P){this.isViewing=P}updateGridPos(P,T=!0){P.x===this.gridPos.x&&P.y===this.gridPos.y&&P.h===this.gridPos.h&&P.w===this.gridPos.w||(this.gridPos.x=P.x,this.gridPos.y=P.y,this.gridPos.w=P.w,this.gridPos.h=P.h,T&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:P,dashboardTimezone:T,timeData:M,width:I,dashboardTitle:B}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,panelName:this.title,panelPluginId:this.type,dashboardUID:P,dashboardTitle:B,timezone:T,timeRange:M.timeRange,timeInfo:M.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(I),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?i.Jk.PanelEditor:this.isViewing?i.Jk.PanelViewer:i.Jk.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new p._)}render(){this.hasRefreshed?this.events.publish(new r.XM):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((P,T)=>E[T]||x[T]?P:{...P,[T]:this[T]},{})}restorePanelOptions(P){const T=this.cachedPluginOptions[P];T&&(Object.keys(T.properties).map(M=>{this[M]=T.properties[M]}),this.fieldConfig=(0,l.H9)(this.fieldConfig,T.fieldConfig))}applyPluginOptionDefaults(P,T){const M=(0,l.F)({plugin:P,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:T});this.fieldConfig=M.fieldConfig,this.options=M.options}async pluginLoaded(P){this.plugin=P;const T=D(P);if(this.autoMigrateFrom){const M=y[this.autoMigrateFrom]!=null,I=this.getOptionsToRemember(),B=this.autoMigrateFrom,U=this.type;this.clearPropertiesBeforePluginChange(),this.type=U,this.plugin=P,this.callPanelTypeChangeHandler(P,B,I,M)}if(P.onPanelMigration&&(T!==this.pluginVersion||P.shouldMigrate?.(this))){const M=P.onPanelMigration(this);this.options=await M,this.pluginVersion=T}this.applyPluginOptionDefaults(P,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const P in this)x[P]||delete this[P];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,l.aW)(this.fieldConfig.overrides,l.nx)}}callPanelTypeChangeHandler(P,T,M,I){if(P.onPanelTypeChanged){const B=I?{angular:M}:M.options;Object.assign(this.options,P.onPanelTypeChanged(this,T,B,this.fieldConfig))}}changePlugin(P){const T=P.meta.id,M=this.getOptionsToRemember(),I=this.fieldConfig,B=this.type,U=this.autoMigrateFrom||B,W=!!y[U];this.cachedPluginOptions[B]={properties:M,fieldConfig:I},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(T),this.callPanelTypeChangeHandler(P,B,M,W),this.type=T,this.plugin=P,this.configRev++,this.applyPluginOptionDefaults(P,!0),P.onPanelMigration&&(this.pluginVersion=D(P))}updateQueries(P){const{dataSource:T}=P;this.datasource=T,this.cacheTimeout=P.cacheTimeout,this.queryCachingTTL=P.queryCachingTTL,this.timeFrom=P.timeRange?.from,this.timeShift=P.timeRange?.shift,this.hideTimeOverride=P.timeRange?.hide,this.interval=P.minInterval,this.maxDataPoints=P.maxDataPoints,this.targets=P.queries,this.configRev++,this.events.publish(new r.zq)}addQuery(P){P=P||{refId:"A"},P.refId=(0,d.M)(this.targets),this.targets.push(P),this.configRev++}changeQuery(P,T){P.refId=this.targets[T].refId,this.configRev++,this.targets=this.targets.map((M,I)=>I===T?P:M)}getEditClone(){const P=this.getSaveModel(),T=new b(P);T.isEditing=!0,T.plugin=this.plugin;const M=this.getQueryRunner();return T.getQueryRunner().useLastResultFrom(M),T}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:h.Ay.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new v.Z(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(P){this.transformations=P,this.resendLastResult(),this.configRev++,this.events.publish(new r.JI)}setProperty(P,T){this[P]=T,this.configRev++,P==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(P,T,M){const I=this.getQueryRunner().getLastRequest(),B=Object.assign({},this.scopedVars,I?.scopedVars,T);return(0,c.w)().replace(P,B,M)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(P){for(const[T,M]of Object.entries(P.model)){switch(T){case"id":case"gridPos":case"libraryPanel":continue}this[T]=M}this.libraryPanel=P}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function D(C){return C&&C.meta.info.version?C.meta.info.version:h.Ay.buildInfo.version}function f(C){const P={};return Object.entries(C).filter(([T,M])=>!E[T]&&C.hasOwnProperty(T)&&!(0,n.isEqual)(M,m[T])).forEach(([T,M])=>{P[T]=M}),(0,u.MA)(P)}},82754:(ne,j,e)=>{"use strict";e.d(j,{L:()=>s});var n=e(96540),a=e(93008);function s({direction:d,initialSize:o,dragPosition:l,collapseBelowPixels:i,collapsed:c,handleSize:p,usePixels:h,disabled:u}){const[r,v]=(0,n.useState)({collapsed:c??!1,snapSize:c?0:void 0}),g=(0,n.useCallback)((f,C,P)=>{f<=0&&C<=0&&P<=0||(r.collapsed&&P>i&&v({collapsed:!1}),!r.collapsed&&P<i&&v({collapsed:!0}))},[r,i]),E=(0,n.useCallback)((f,C,P)=>{if(f<=0&&C<=0&&P<=0)return;const T=r.snapSize===0;if(r.collapsed&&!T)v({snapSize:0,collapsed:r.collapsed});else if(r.collapsed&&T)if(h){const M=Math.max(P,o??200);v({snapSize:M,collapsed:!r.collapsed})}else{const M=Math.max(1-(o??.5),1-f);v({snapSize:M,collapsed:!r.collapsed})}},[r,o,h]),x=(0,n.useCallback)(()=>{v({collapsed:!r.collapsed})},[r.collapsed]),{containerProps:m,primaryProps:y,secondaryProps:b,splitterProps:D}=(0,a.h)({direction:d,dragPosition:l,handleSize:p,initialSize:o,usePixels:h,onResizing:g,onSizeChanged:E});return u?(m.className="",y.className="",y.style={},b.className="",b.style={},D.style.display="none",{containerProps:m,primaryProps:y,secondaryProps:b,splitterProps:D,splitterState:{collapsed:!1},onToggleCollapse:x}):(b.style.overflow="hidden",b.style.minWidth="unset",b.style.minHeight="unset",r.snapSize?h?b.style.flexBasis=`${r.snapSize}px`:(y.style={...y.style,flexGrow:1-r.snapSize},b.style.flexGrow=r.snapSize):r.snapSize===0&&(b.style.minWidth="min-content",b.style.minHeight="min-content",b.style.overflow="unset",h?b.style.flexBasis="0px":(y.style.flexGrow=1,b.style.flexGrow=0)),{containerProps:m,primaryProps:y,secondaryProps:b,splitterProps:D,splitterState:r,onToggleCollapse:x})}},82779:(ne,j,e)=>{"use strict";e.d(j,{D5:()=>p,H3:()=>i,OC:()=>c,P0:()=>l,hJ:()=>u,rV:()=>o,sk:()=>h});var n=e(46644),a=e(2954),s=e(44022),d=e(4651);const o=r=>{switch(r.type){case d.Tz.reduce:r.reducer||(r.reducer=n.gy.mean);break;case d.Tz.resample:r.downsampler||(r.downsampler=n.gy.mean),r.upsampler||(r.upsampler="fillna"),r.reducer=void 0;break;case d.Tz.math:r.expression=void 0;break;case d.Tz.classic:r.conditions||(r.conditions=[l]);break;default:r.reducer=void 0}return r},l={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:a.p.IsAbove}};function i(r){if((0,s.z)(r))return r}function c(r){if(!p(r))return!1;const v=r.settings?.mode;return v===d.Mt.Strict||v===void 0}function p(r){return r.type===d.Tz.reduce}function h(r){return r.type===d.Tz.threshold}function u(r){return r===a.p.IsWithinRange||r===a.p.IsOutsideRange||r===a.p.IsOutsideRangeIncluded||r===a.p.IsWithinRangeIncluded}},82781:(ne,j,e)=>{"use strict";e.d(j,{QM:()=>c,R0:()=>l,fo:()=>p});var n=e(92745),a=e(20074),s=e(55849),d=e(68198);const o=()=>[{type:"git",label:(0,n.t)("provisioning.repository-types.pure-git","Pure Git"),description:(0,n.t)("provisioning.repository-types.pure-git-description","Connect to any Git repository"),icon:"git",logo:s},{type:"github",label:(0,n.t)("provisioning.repository-types.github","GitHub"),description:(0,n.t)("provisioning.repository-types.github-description","Connect to GitHub repositories"),icon:"github"},{type:"gitlab",label:(0,n.t)("provisioning.repository-types.gitlab","GitLab"),description:(0,n.t)("provisioning.repository-types.gitlab-description","Connect to GitLab repositories"),icon:"gitlab",logo:d},{type:"bitbucket",label:(0,n.t)("provisioning.repository-types.bitbucket","Bitbucket"),description:(0,n.t)("provisioning.repository-types.bitbucket-description","Connect to Bitbucket repositories"),icon:"bitbucket",logo:a},{type:"local",label:(0,n.t)("provisioning.repository-types.local","Local"),description:(0,n.t)("provisioning.repository-types.local-description","Configure file provisioning"),icon:"file-alt"}],l=h=>o().find(u=>u.type===h),i=["github","gitlab","bitbucket","git"],c=h=>i.includes(h),p=h=>{const u=o().filter(g=>h.includes(g.type)),r=u.filter(g=>c(g.type)&&g.type!=="git"),v=u.filter(g=>!c(g.type)||g.type==="git");return{gitProviders:r,otherProviders:v,orderedConfigs:[...r,...v]}}},83058:(ne,j,e)=>{"use strict";e.d(j,{O:()=>f,Y:()=>P});var n=e(74848),a=e(22803),s=e(89332),d=e(96014),o=e(63704),l=e(92138),i=e(92745),c=e(44248),p=e(30703),h=e(45967),u=e(60208),r=e(13941),v=e(31286),g=e(56887),E=e(36324),x=e(63142),m=e(86292),y=e(3371),b=e(92119),D=e(96691);function f({model:M}){const{title:I,key:B,isDropTarget:U,layout:W}=M.useState(),V=M.getParentLayout(),{currentTabSlug:z}=V.useState(),R=c.jh.interpolate(M,I,void 0,"text"),{isSelected:O,onSelect:N,isSelectable:F}=(0,g.y)(B),{isEditing:G}=(0,b.TN)(M),H=M.getSlug(),K=V.getUrlKey(),w=H===z,Q=V.getTabsIncludingRepeats().findIndex(ee=>ee===M),k=(0,d.zy)(),te=o.sQ.sanitize(l.I.getUrlForPartial(k,{[K]:H})),q=(0,x.of)(T),se=(0,E.C)(),[re]=(0,m.H)(M),Y=(0,y.bn)(M),X=(0,D.MK)(),J=!Y&&G;if(re&&!G&&!w)return null;if(X)return(0,n.jsx)(W.Component,{model:W});let _={};return M.hasUniqueTitle()||(_={icon:"exclamation-triangle",tooltip:(0,i.t)("dashboard.tabs-layout.tab-warning.title-not-unique","This title is not unique")}),(0,n.jsx)(s.sx,{draggableId:B,index:Q,isDragDisabled:!J,children:(ee,ae)=>(0,n.jsx)("div",{ref:le=>ee.innerRef(le),className:(0,a.cx)(ae.isDragging&&q.dragging),...ee.draggableProps,...ee.dragHandleProps,children:(0,n.jsx)(u.o,{ref:M.containerRef,truncate:!0,className:(0,a.cx)(re&&q.hidden,O&&"dashboard-selected-element",F&&!O&&"dashboard-selectable-element",U&&"dashboard-drop-target"),active:w,title:R,suffix:re?C:void 0,href:te,"aria-selected":w,onPointerDown:le=>{le.stopPropagation(),se.set(le)},onPointerUp:le=>{le.stopPropagation(),!(!F||se.check(le))&&N?.(le)},label:R,"data-dashboard-drop-target-key":M.state.key,..._})})},B)}function C(){return(0,n.jsx)(v.a,{paddingLeft:1,display:"inline",children:(0,n.jsx)(h.m,{content:(0,i.t)("dashboard.conditional-rendering.overlay.tooltip","Element is hidden by show/hide rules."),children:(0,n.jsx)(p.I,{name:"eye-slash"})})})}function P({tab:M,isEditing:I}){const{layout:B,key:U}=M.useState(),W=(0,x.of)(T),[V,z,R]=(0,m.H)(M);return(0,n.jsxs)(r.J,{className:(0,a.cx)(W.tabContentContainer,I&&z),"data-dashboard-drop-target-key":U,children:[(0,n.jsx)(B.Component,{model:B}),I&&R]})}const T=M=>({dragging:(0,a.css)({cursor:"move"}),hidden:(0,a.css)({opacity:.4,"&:hover":(0,a.css)({opacity:1})}),tabContentContainer:(0,a.css)({backgroundColor:"transparent",position:"relative",display:"flex",flexDirection:"column",flex:1,minHeight:M.spacing(1+.125),paddingTop:M.spacing(1)})})},83127:(ne,j,e)=>{"use strict";e.d(j,{B:()=>s});var n=e(33749),a=e(27489);function s(d){const o={dashboardId:d.id,dashboardName:d.title,dashboardUid:d.uid,folderName:d.meta.folderTitle,eventName:n.n_.DashboardView};(0,a.G$)(o)}},83162:(ne,j,e)=>{"use strict";e.d(j,{H:()=>de,u:()=>ge});var n=e(74848),a=e(53543),s=e(38809),d=e(95004),o=e(33553),l=e(92745),i=e(21285),c=e(77824),p=e(59310),h=e(48457),u=e(96540),r=e(22803),v=e(2543),g=e(36394),E=e(35555),x=e(8255),m=e(63527),y=e(35427),b=e(76319),D=e(45861),f=e(72636),C=e(65240);class P extends u.PureComponent{constructor(De){super(De),this.onAddThreshold=()=>{const{steps:be}=this.state;let Oe=0;be.length>1&&(Oe=be[be.length-1].value+10);let Ne=x.Tj.filter(st=>!be.some(rt=>rt.color===st))[1];Ne||(Ne="#CCCCCC");const We={value:Oe,color:Ne,key:T++},qe=[...be,We];(0,g.RU)(qe),this.setState({steps:qe},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=be=>{const{steps:Oe}=this.state;Oe.length&&be.key!==Oe[0].key&&this.setState({steps:Oe.filter(Ne=>Ne.key!==be.key)},this.onChange)},this.onChangeThresholdValue=(be,Oe)=>{const Ne=be.target.value.replace(/,/g,"."),We=parseFloat(Ne),qe=isNaN(We)?"":We,st=this.state.steps.map(rt=>(rt.key===Oe.key&&(rt={...rt,value:qe}),rt));st.length&&(st[0].value=-1/0),(0,g.RU)(st),this.setState({steps:st})},this.onChangeThresholdColor=(be,Oe)=>{const{steps:Ne}=this.state,We=Ne.map(qe=>(qe.key===be.key&&(qe={...qe,color:Oe}),qe));this.setState({steps:We},this.onChange)},this.onBlur=()=>{const be=[...this.state.steps];(0,g.RU)(be),this.setState({steps:be},this.onChange)},this.onChange=()=>{this.props.onChange(I(this.props.thresholds,this.state.steps))},this.onModeChanged=be=>{this.props.onChange({...this.props.thresholds,mode:be})};const Me=M(De.thresholds.steps);Me[0].value=-1/0,this.state={steps:Me},this.latestThresholdInputRef=u.createRef()}renderInput(De,Me,be){const Oe=this.props.thresholds.mode===o.O.Percentage,Ne=be+1,We=(0,l.t)("dimensions.thresholds-editor.aria-label-threshold","Threshold {{thresholdNumber}}",{thresholdNumber:Ne});return isFinite(De.value)?(0,n.jsx)(m.p,{type:"number",step:"0.0001",onChange:qe=>this.onChangeThresholdValue(qe,De),value:De.value,"aria-label":We,ref:be===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:(0,n.jsxs)("div",{className:Me.inputPrefix,children:[(0,n.jsx)("div",{className:Me.colorPicker,children:(0,n.jsx)(y.sk,{color:De.color,onChange:qe=>this.onChangeThresholdColor(De,qe),enableNamedColors:!0})}),Oe&&(0,n.jsx)("div",{className:Me.percentIcon,children:"%"})]}),suffix:(0,n.jsx)(b.K,{className:Me.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(De),tooltip:(0,l.t)("dimensions.threshold-editor.tooltip-remove-threshold","Remove threshold {{thresholdNumber}}",{thresholdNumber:Ne})})},Oe.toString()):(0,n.jsx)(m.p,{type:"text",value:(0,l.t)("dimensions.thresholds-editor.value-base","Base"),"aria-label":We,disabled:!0,prefix:(0,n.jsx)("div",{className:Me.colorPicker,children:(0,n.jsx)(y.sk,{color:De.color,onChange:qe=>this.onChangeThresholdColor(De,qe),enableNamedColors:!0})})})}render(){const{thresholds:De}=this.props,{steps:Me}=this.state,be=[{value:o.O.Absolute,label:(0,l.t)("dimensions.thresholds-editor.modes.label.absolute","Absolute"),description:(0,l.t)("dimensions.thresholds-editor.modes.description.thresholds-based-absolute-values","Pick thresholds based on the absolute values")},{value:o.O.Percentage,label:(0,l.t)("dimensions.thresholds-editor.modes.label.percentage","Percentage"),description:(0,l.t)("dimensions.thresholds-editor.modes.description.threshold-based-percent-between-minmax","Pick threshold based on the percent between min/max")}];return(0,n.jsx)(E.D.Consumer,{children:Oe=>{const Ne=B(Oe);return(0,n.jsxs)("div",{className:Ne.wrapper,children:[(0,n.jsx)(D.$n,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Ne.addButton,fullWidth:!0,children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.thresholds-editor.add-threshold",children:"Add threshold"})}),(0,n.jsx)("div",{className:Ne.thresholds,children:Me.slice(0).reverse().map((We,qe)=>(0,n.jsx)("div",{className:Ne.item,children:this.renderInput(We,Ne,qe)},`${We.key}`))}),(0,n.jsxs)("div",{children:[(0,n.jsx)(f.J,{description:(0,l.t)("dimensions.thresholds-editor.description-percentage-means-thresholds-relative","Percentage means thresholds relative to min & max"),children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.thresholds-editor.thresholds-mode",children:"Thresholds mode"})}),(0,n.jsx)(c.z,{options:be,onChange:this.onModeChanged,value:De.mode})]})]})}})}}let T=100;function M(pe){return(!pe||pe.length===0)&&(pe=[{value:-1/0,color:"green"}]),pe.filter((De,Me)=>(0,v.isNumber)(De.value)||Me===0).map(De=>({color:De.color,value:De.value===null?-1/0:De.value,key:T++}))}function I(pe,De){return{mode:pe.mode??o.O.Absolute,steps:De.map(be=>{const{key:Oe,...Ne}=be;return Ne})}}const B=(0,C.N)(pe=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column"}),thresholds:(0,r.css)({display:"flex",flexDirection:"column",marginBottom:pe.spacing(2)}),item:(0,r.css)({marginBottom:pe.spacing(1),"&:last-child":{marginBottom:0}}),colorPicker:(0,r.css)({padding:pe.spacing(0,1)}),addButton:(0,r.css)({marginBottom:pe.spacing(1)}),percentIcon:(0,r.css)({fontSize:pe.typography.bodySmall.fontSize,color:pe.colors.text.secondary}),inputPrefix:(0,r.css)({display:"flex",alignItems:"center"}),trashIcon:(0,r.css)({color:pe.colors.text.secondary,cursor:"pointer",marginRight:0,"&:hover":{color:pe.colors.text.primary}})})),U=(0,u.memo)(({value:pe,onChange:De})=>{const Me=pe??{mode:o.O.Percentage,steps:[]};return(0,n.jsx)(P,{thresholds:Me,onChange:De})});U.displayName="ThresholdsValueEditor";var W=e(18600),V=e(63142),z=e(41654),R=e(30703),O=e(22787),N=e(4896),F=e(71451),G=e(89332),H=e(59695),K=e(18857);function w({mapping:pe,index:De,onChange:Me,onRemove:be,onDuplicate:Oe,showIconPicker:Ne}){const{key:We,result:qe,id:st}=pe,rt=(0,V.of)(Q),ot=(0,u.useRef)(null),mt=(0,u.useCallback)(Ht=>{const hn={...pe,result:{...pe.result}};Ht(hn),Me(De,hn)},[pe,De,Me]);(0,u.useEffect)(()=>{ot.current&&pe.isNew&&(ot.current.focus(),mt(Ht=>{Ht.isNew=!1}))},[pe,ot,mt]);const pt=Ht=>{mt(hn=>{hn.result.color=Ht})},ke=()=>{mt(Ht=>{Ht.result.color=void 0})},Ze=Ht=>{mt(hn=>{hn.result.icon=Ht})},nt=()=>{mt(Ht=>{Ht.result.icon=void 0})},ut=Ht=>{mt(hn=>{hn.key=Ht.currentTarget.value})},gt=Ht=>{mt(hn=>{hn.result.text=Ht.currentTarget.value})},ht=Ht=>{mt(hn=>{hn.from=parseFloat(Ht.currentTarget.value)})},tt=Ht=>{mt(hn=>{hn.to=parseFloat(Ht.currentTarget.value)})},Ot=Ht=>{mt(hn=>{hn.pattern=Ht.currentTarget.value})},jt=Ht=>{mt(hn=>{hn.specialMatch=Ht.value})},wt=[{label:"Null",value:W.W.Null,description:(0,l.t)("dimensions.value-mapping-edit-row.special-match-options.description.matches-null-and-undefined-values","Matches null and undefined values")},{label:"NaN",value:W.W.NaN,description:(0,l.t)("dimensions.value-mapping-edit-row.special-match-options.description.matches-against-number-na-n-not-a-number","Matches against Number.NaN (not a number)")},{label:"Null + NaN",value:W.W.NullAndNaN,description:(0,l.t)("dimensions.value-mapping-edit-row.special-match-options.description.matches-null-undefined-and-na-n","Matches null, undefined and NaN")},{label:"True",value:W.W.True,description:(0,l.t)("dimensions.value-mapping-edit-row.special-match-options.description.boolean-true-values","Boolean true values")},{label:"False",value:W.W.False,description:(0,l.t)("dimensions.value-mapping-edit-row.special-match-options.description.boolean-false-values","Boolean false values")},{label:(0,l.t)("dimensions.value-mapping-edit-row.special-match-options.label.empty","Empty"),value:W.W.Empty,description:(0,l.t)("dimensions.value-mapping-edit-row.special-match-options.description.empty-string","Empty string")}];return(0,n.jsx)(G.sx,{draggableId:st,index:De,children:Ht=>(0,n.jsxs)("tr",{className:rt.dragRow,ref:Ht.innerRef,...Ht.draggableProps,children:[(0,n.jsx)("td",{children:(0,n.jsx)("div",{className:rt.dragHandle,...Ht.dragHandleProps,children:(0,n.jsx)(R.I,{name:"draggabledots",size:"lg"})})}),(0,n.jsx)("td",{className:rt.typeColumn,children:pe.type}),(0,n.jsxs)("td",{children:[pe.type===W.d.ValueToText&&(0,n.jsx)(m.p,{ref:ot,type:"text",value:We??"",onChange:ut,placeholder:(0,l.t)("dimensions.value-mapping-edit-row.placeholder-exact-value-to-match","Exact value to match")}),pe.type===W.d.RangeToText&&(0,n.jsxs)("div",{className:rt.rangeInputWrapper,children:[(0,n.jsx)(m.p,{type:"number",value:pe.from??"",placeholder:(0,l.t)("dimensions.value-mapping-edit-row.placeholder-from","From"),onChange:ht}),(0,n.jsx)(m.p,{type:"number",value:pe.to??"",placeholder:(0,l.t)("dimensions.value-mapping-edit-row.placeholder-to","To"),onChange:tt})]}),pe.type===W.d.RegexToText&&(0,n.jsx)(m.p,{type:"text",value:pe.pattern??"",placeholder:(0,l.t)("dimensions.value-mapping-edit-row.placeholder-regular-expression","Regular expression"),onChange:Ot}),pe.type===W.d.SpecialValue&&(0,n.jsx)(K.l6,{value:wt.find(hn=>hn.value===pe.specialMatch),options:wt,onChange:jt})]}),(0,n.jsx)("td",{children:(0,n.jsx)(m.p,{type:"text",value:qe.text??"",onChange:gt,placeholder:(0,l.t)("dimensions.value-mapping-edit-row.placeholder-optional-display-text","Optional display text")})}),(0,n.jsxs)("td",{className:rt.textAlignCenter,children:[qe.color&&(0,n.jsxs)(z.B,{gap:1,justifyContent:"center",children:[(0,n.jsx)(y.sk,{color:qe.color,onChange:pt,enableNamedColors:!0}),(0,n.jsx)(b.K,{name:"times",onClick:ke,tooltip:(0,l.t)("dimensions.value-mapping-edit-row.tooltip-remove-color","Remove color"),tooltipPlacement:"top"})]}),!qe.color&&(0,n.jsx)(y.sk,{color:"gray",onChange:pt,enableNamedColors:!0,children:hn=>(0,n.jsx)(D.$n,{variant:"primary",fill:"text",onClick:hn.showColorPicker,ref:hn.ref,size:"sm",children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mapping-edit-row.set-color",children:"Set color"})})})]}),Ne&&(0,n.jsx)("td",{className:rt.textAlignCenter,children:(0,n.jsxs)(z.B,{gap:1,justifyContent:"center",children:[(0,n.jsx)(F.n,{onChange:Ze,onClear:nt,value:qe.icon,size:N.Iy.SMALL,folderName:N.Iu.Icon,mediaType:N.zu.Icon,color:qe.color}),qe.icon&&(0,n.jsx)(b.K,{name:"times",onClick:nt,tooltip:(0,l.t)("dimensions.value-mapping-edit-row.tooltip-remove-icon","Remove icon"),tooltipPlacement:"top"})]})}),(0,n.jsx)("td",{className:rt.textAlignCenter,children:(0,n.jsxs)(z.B,{gap:1,children:[(0,n.jsx)(b.K,{name:"copy",onClick:()=>Oe(De),"data-testid":"duplicate-value-mapping","aria-label":(0,l.t)("dimensions.value-mapping-edit-row.duplicate-value-mapping-aria-label-duplicate-value-mapping","Duplicate value mapping"),tooltip:(0,l.t)("dimensions.value-mapping-edit-row.duplicate-value-mapping-tooltip-duplicate","Duplicate")}),(0,n.jsx)(b.K,{name:"trash-alt",onClick:()=>be(De),"data-testid":"remove-value-mapping","aria-label":(0,l.t)("dimensions.value-mapping-edit-row.remove-value-mapping-aria-label-delete-value-mapping","Delete value mapping"),tooltip:(0,l.t)("dimensions.value-mapping-edit-row.remove-value-mapping-tooltip-delete","Delete")})]})})]})},st)}const Q=pe=>({dragRow:(0,r.css)({position:"relative"}),dragHandle:(0,r.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${pe.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:pe.spacing(2)}}),regexInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:pe.spacing(2)}}),typeColumn:(0,r.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,r.css)({textAlign:"center"})});function k({value:pe,onChange:De,onClose:Me,showIconPicker:be}){const Oe=(0,V.of)(te),[Ne,We]=(0,u.useState)([]);(0,u.useEffect)(()=>{We(X(pe))},[pe]);const qe=Ze=>{if(!pe||!Ze.destination)return;const nt=[...Ne],ut=nt[Ze.source.index];nt.splice(Ze.source.index,1),nt.splice(Ze.destination.index,0,ut),We(nt)},st=(Ze,nt)=>{const ut=[...Ne];ut.splice(Ze,1,nt),We(ut)},rt=Ze=>{const nt=[...Ne];nt.splice(Ze,1),We(nt)},ot=[{label:(0,l.t)("dimensions.value-mappings-editor-modal.mapping-types.label.value","Value"),value:W.d.ValueToText,description:(0,l.t)("dimensions.value-mappings-editor-modal.mapping-types.description.match-a-specific-text-value","Match a specific text value")},{label:(0,l.t)("dimensions.value-mappings-editor-modal.mapping-types.label.range","Range"),value:W.d.RangeToText,description:(0,l.t)("dimensions.value-mappings-editor-modal.mapping-types.description.match-a-numerical-range-of-values","Match a numerical range of values")},{label:(0,l.t)("dimensions.value-mappings-editor-modal.mapping-types.label.regex","Regex"),value:W.d.RegexToText,description:(0,l.t)("dimensions.value-mappings-editor-modal.mapping-types.description.match-a-regular-expression-with-replacement","Match a regular expression with replacement")},{label:(0,l.t)("dimensions.value-mappings-editor-modal.mapping-types.label.special","Special"),value:W.d.SpecialValue,description:(0,l.t)("dimensions.value-mappings-editor-modal.mapping-types.description.match-boolean-empty-values","Match on null, NaN, boolean and empty values")}],mt=Ze=>{We([...Ne,se({type:Ze.value,result:{},isNew:!0})])},pt=Ze=>{const nt=re(Ne[Ze]),ut=[...Ne];ut.splice(Ze,0,{...nt});for(let gt=Ze;gt<Ne.length;gt++)ut[gt].result.index=gt;We(ut)},ke=()=>{De(Y(Ne)),Me()};return(0,u.useEffect)(()=>{pe?.length||mt({value:W.d.ValueToText})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:Oe.tableWrap,children:(0,n.jsxs)("table",{className:Oe.editTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{width:"1%"}}),(0,n.jsx)("th",{style:{width:"40%",textAlign:"left"},colSpan:2,children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mappings-editor-modal.condition",children:"Condition"})}),(0,n.jsx)("th",{style:{textAlign:"left"},children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mappings-editor-modal.display-text",children:"Display text"})}),(0,n.jsx)("th",{style:{width:"10%"},children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mappings-editor-modal.color",children:"Color"})}),be&&(0,n.jsx)("th",{style:{width:"10%"},children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mappings-editor-modal.icon",children:"Icon"})}),(0,n.jsx)("th",{style:{width:"1%"}})]})}),(0,n.jsx)(G.JY,{onDragEnd:qe,children:(0,n.jsx)(G.gL,{droppableId:"sortable-field-mappings",direction:"vertical",children:Ze=>(0,n.jsxs)("tbody",{ref:Ze.innerRef,...Ze.droppableProps,children:[Ne.map((nt,ut)=>(0,n.jsx)(w,{mapping:nt,index:ut,onChange:st,onRemove:rt,onDuplicate:pt,showIconPicker:be},nt.id)),Ze.placeholder]})})})]})}),(0,n.jsxs)(O.a.ButtonRow,{leftItems:(0,n.jsx)(H.i,{label:(0,l.t)("dimensions.value-mappings-editor-modal.label-add-a-new-mapping","Add a new mapping"),variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:ot,onChange:mt}),children:[(0,n.jsx)(D.$n,{variant:"secondary",fill:"outline",onClick:Me,children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mappings-editor-modal.cancel",children:"Cancel"})}),(0,n.jsx)(D.$n,{variant:"primary",onClick:ke,children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mappings-editor-modal.update",children:"Update"})})]})]})}const te=pe=>({tableWrap:(0,r.css)({minHeight:"40px"}),editTable:(0,r.css)({width:"100%",marginBottom:pe.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:pe.colors.action.hover}," th, td":{padding:pe.spacing(1)}})});function q(){return(0,v.uniqueId)("mapping-")}function se(pe){return{type:W.d.ValueToText,result:{},id:q(),...pe}}function re(pe){return{...se(pe),id:q()}}function Y(pe){const De=[],Me={type:W.d.ValueToText,options:{}};return pe.forEach((be,Oe)=>{const Ne={...be.result,index:Oe};switch((!Ne.text||Ne.text.trim().length===0)&&(Ne.text=void 0),be.type){case W.d.ValueToText:be.key!=null&&(Me.options[be.key]=Ne);break;case W.d.RangeToText:(be.from!=null||be.to!=null)&&De.push({type:be.type,options:{from:be.from??null,to:be.to??null,result:Ne}});break;case W.d.RegexToText:be.pattern!=null&&De.push({type:be.type,options:{pattern:be.pattern,result:Ne}});break;case W.d.SpecialValue:De.push({type:be.type,options:{match:be.specialMatch,result:Ne}})}}),Object.keys(Me.options).length>0&&De.unshift(Me),De}function X(pe){const De=[];if(pe)for(const Me of pe)switch(Me.type){case W.d.ValueToText:for(const be in Me.options)De.push(se({type:Me.type,result:Me.options[be],key:be}));break;case W.d.RangeToText:De.push(se({type:Me.type,result:Me.options.result,from:Me.options.from,to:Me.options.to}));break;case W.d.RegexToText:De.push(se({type:Me.type,result:Me.options.result,pattern:Me.options.pattern}));break;case W.d.SpecialValue:De.push(se({type:Me.type,result:Me.options.result,specialMatch:Me.options.match??W.W.Null}))}return De.sort((Me,be)=>(Me.result.index??0)>(be.result.index??0)?1:-1),De}const J=(0,u.memo)(pe=>{const{value:De,onChange:Me,item:be}=pe,Oe=(0,V.of)(_),Ne=be.settings?.icon,[We,qe]=(0,u.useState)(!1),st=(0,u.useCallback)(()=>{qe(!1)},[qe]),rt=(0,u.useMemo)(()=>X(De),[De]),ot=(0,u.useCallback)((pt,ke)=>{rt[ke].result.color=pt,Me(Y(rt))},[rt,Me]),mt=(0,u.useCallback)((pt,ke)=>{rt[ke].result.icon=pt,Me(Y(rt))},[rt,Me]);return(0,n.jsxs)(z.B,{direction:"column",children:[(0,n.jsx)("table",{className:Oe.compactTable,children:(0,n.jsx)("tbody",{children:rt.map((pt,ke)=>(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[pt.type===W.d.ValueToText&&pt.key,pt.type===W.d.RangeToText&&(0,n.jsxs)("span",{children:["[",pt.from??"-\u221E"," - ",pt.to??"\u221E","]"]}),pt.type===W.d.RegexToText&&pt.pattern,pt.type===W.d.SpecialValue&&pt.specialMatch]}),(0,n.jsx)("td",{children:(0,n.jsx)(R.I,{name:"arrow-right"})}),(0,n.jsx)("td",{children:pt.result.text}),pt.result.color&&(0,n.jsx)("td",{children:(0,n.jsx)(y.sk,{color:pt.result.color,onChange:Ze=>ot(Ze,ke),enableNamedColors:!0})}),Ne&&pt.result.icon&&(0,n.jsx)("td",{"data-testid":"iconPicker",children:(0,n.jsx)(F.n,{onChange:Ze=>mt(Ze,ke),value:pt.result.icon,size:N.Iy.SMALL,folderName:N.Iu.Icon,mediaType:N.zu.Icon,color:pt.result.color})})]},ke.toString()))})}),(0,n.jsxs)(D.$n,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>qe(!0),children:[rt.length>0&&(0,n.jsx)("span",{children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mappings-editor.edit-value-mappings",children:"Edit value mappings"})}),rt.length===0&&(0,n.jsx)("span",{children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.value-mappings-editor.add-value-mappings",children:"Add value mappings"})})]}),(0,n.jsx)(O.a,{isOpen:We,title:(0,l.t)("dimensions.value-mappings-editor.title-value-mappings","Value mappings"),onDismiss:st,className:Oe.modal,closeOnBackdropClick:!1,children:(0,n.jsx)(k,{value:De,onChange:Me,onClose:st,showIconPicker:Ne})})]})});J.displayName="ValueMappingsEditor";const _=pe=>({modal:(0,r.css)({width:"980px"}),compactTable:(0,r.css)({width:"100%","tbody td":{padding:pe.spacing(.5)}})});var ee=e(95506);const ae=({value:pe,onChange:De,item:Me})=>{const{placeholder:be,isClearable:Oe}=Me?.settings??{},Ne=(0,u.useCallback)(We=>{De(We?.value?.uid)},[De]);return(0,n.jsx)(ee.b,{isClearable:Oe,defaultOptions:!0,onChange:Ne,placeholder:be,value:pe})};var le=e(79609),L=e(23207);const ie=({value:pe,onChange:De,context:Me})=>(0,n.jsx)(L.G,{actions:pe,onChange:De,data:Me.data,getSuggestions:()=>Me.getSuggestions?Me.getSuggestions(le.uP.Values):[]});var oe=e(38669),ue=e(76637),ye=e(64394),fe=e(37386);const Ee=({value:pe,onChange:De,item:Me,id:be})=>{const Oe=(0,V.$j)(),Ne=(0,V.of)(Ge),We=(0,ue.Hs)(pe?.mode),st=(Me.settings?.byValueSupport?ue.uf.list():ue.uf.list().filter(ke=>!ke.isByValue)).filter(ke=>!ke.excludeFromPicker).map(ke=>{let Ze=ke.isByValue?" (by value)":"";return{value:ke.id,label:`${ke.name}${Ze}`,description:ke.description,isContinuous:ke.isContinuous,isByValue:ke.isByValue,component(){return(0,n.jsx)(Ae,{mode:ke,theme:Oe})}}}),rt=ke=>{De({...pe,mode:ke.value})},ot=ke=>{De({...pe,mode:pt,fixedColor:ke})},mt=ke=>{De({...pe,mode:pt,seriesBy:ke})},pt=pe?.mode??ye.Y.Thresholds;if(pt===ye.Y.Fixed||pt===ye.Y.Shades)return(0,n.jsxs)("div",{className:Ne.group,children:[(0,n.jsx)(K.l6,{minMenuHeight:200,options:st,value:pt,onChange:rt,className:Ne.select,inputId:be}),(0,n.jsx)(oe.a,{value:pe?.fixedColor,onChange:ot})]});if(Me.settings?.bySeriesSupport&&We.isByValue){const ke=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{marginBottom:Oe.spacing(2)},children:(0,n.jsx)(K.l6,{minMenuHeight:200,options:st,value:pt,onChange:rt,inputId:be})}),(0,n.jsx)(fe.D,{label:(0,l.t)("options-ui.field-color.color-by-label","Color series by"),children:(0,n.jsx)(c.z,{value:pe?.seriesBy??"last",options:ke,onChange:mt})})]})}return(0,n.jsx)(K.l6,{minMenuHeight:200,options:st,value:pt,onChange:rt,inputId:be})},Ae=({mode:pe,theme:De})=>{if(!pe.getColors)return null;const Me=pe.getColors(De).map(De.visualization.getColorByName),be={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(pe.isContinuous)be.background=`linear-gradient(90deg, ${Me.join(",")})`;else{let Oe="",Ne="";for(let We=0;We<Me.length;We++){const qe=Me[We];if(Oe==="")Oe=`linear-gradient(90deg, ${qe} 0%`;else{const rt=We/Me.length*100;Oe+=`, ${Ne} ${rt}%, ${qe} ${rt}%`}Ne=qe}be.background=Oe}return(0,n.jsx)("div",{style:be})},Ge=pe=>({group:(0,r.css)({display:"flex"}),select:(0,r.css)({marginRight:pe.spacing(1),flexGrow:1})});var Fe=e(96822);const Pe=({value:pe,onChange:De,context:Me,item:be})=>(0,n.jsx)(Fe.e,{links:pe,onChange:De,data:Me.data,getSuggestions:()=>Me.getSuggestions?Me.getSuggestions(le.uP.Values):[],showOneClick:be.settings?.showOneClick});class Ve extends u.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:De}=this.props,{settings:Me}=De;let be=De.settings?.options||[];Me?.getOptions&&(be=await Me.getOptions(this.props.context)),this.state.options!==be&&this.setState({isLoading:!1,options:be})}}componentDidMount(){this.updateOptions()}componentDidUpdate(De){const Me=De.item?.settings,be=this.props.item?.settings;if(Me!==be)this.updateOptions();else if(be?.getOptions){const Oe=De.context?.data,Ne=this.props.context?.data;Oe!==Ne&&this.updateOptions()}}render(){const{options:De,isLoading:Me}=this.state,{value:be,onChange:Oe,item:Ne,id:We}=this.props,{settings:qe}=Ne;return(0,n.jsx)(K.KF,{inputId:We,isLoading:Me,value:be,defaultValue:be,allowCustomValue:qe?.allowCustomValue,onChange:st=>{Oe(st.map(rt=>rt.value).flatMap(rt=>rt!==void 0?[rt]:[]))},options:De})}}var me=e(85053);class Se extends u.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:De}=this.props,{settings:Me}=De;let be=De.settings?.options||[];Me?.getOptions&&(be=await Me.getOptions(this.props.context)),this.state.options!==be&&this.setState({isLoading:!1,options:be})}}componentDidMount(){this.updateOptions()}componentDidUpdate(De){const Me=De.item?.settings,be=this.props.item?.settings;if(Me!==be)this.updateOptions();else if(be?.getOptions){const Oe=De.context?.data,Ne=this.props.context?.data;Oe!==Ne&&this.updateOptions()}}render(){const{options:De,isLoading:Me}=this.state,{value:be,onChange:Oe,item:Ne,id:We}=this.props,{settings:qe}=Ne;let st=De.find(rt=>rt.value===be);return!st&&be&&(st={label:`${be}`,value:be}),(0,n.jsx)(K.l6,{inputId:We,isLoading:Me,value:st,defaultValue:be,allowCustomValue:qe?.allowCustomValue,isClearable:qe?.isClearable,onChange:rt=>Oe(rt?.value),options:De})}}var Qe=e(21253),Ue=e(34107);const Ie=({value:pe,onChange:De,item:Me,id:be})=>(0,n.jsx)(Ue.S,{stats:pe,onChange:De,allowMultiple:!!Me.settings?.allowMultiple,defaultStat:Me.settings?.defaultStat,inputId:be});var Re=e(41185),Ke=e(43173);class Le extends u.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=De=>{const{value:Me,onChange:be}=this.props,Oe=[...Me];Oe.splice(De,1),be(Oe)},this.onValueChange=(De,Me)=>{if("key"in De&&De.key!=="Enter")return;const{value:be,onChange:Oe}=this.props,Ne=De.currentTarget.value.trim();if(Me<0){Ne&&(De.currentTarget.value="",Oe([...be,Ne])),this.setState({showAdd:!1});return}if(!Ne)return this.onRemoveString(Me);const We=[...be];We[Me]=Ne,Oe(We)}}render(){const{value:De,item:Me}=this.props,{showAdd:be}=this.state,Oe=ze(Ke.$.theme2),Ne=Me.settings?.placeholder||"Add text";return(0,n.jsxs)("div",{children:[De.map((We,qe)=>(0,n.jsx)(m.p,{className:Oe.textInput,defaultValue:We||"",onBlur:st=>this.onValueChange(st,qe),onKeyDown:st=>this.onValueChange(st,qe),suffix:(0,n.jsx)(R.I,{className:Oe.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(qe)})},`${qe}/${We}`)),be?(0,n.jsx)(m.p,{autoFocus:!0,className:Oe.textInput,placeholder:Ne,defaultValue:"",onBlur:We=>this.onValueChange(We,-1),onKeyDown:We=>this.onValueChange(We,-1),suffix:(0,n.jsx)(R.I,{name:"plus-circle"})}):(0,n.jsx)(D.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0}),children:Ne})]})}}const ze=(0,C.N)(pe=>({textInput:(0,r.css)({marginBottom:"5px","&:hover":{border:`1px solid ${pe.components.input.borderHover}`}}),trashIcon:(0,r.css)({color:pe.colors.text.secondary,cursor:"pointer","&:hover":{color:pe.colors.text.primary}})}));var Be=e(12965);function $e({value:pe,onChange:De,item:Me,id:be}){const Oe=(0,V.of)(Ye);return Me?.settings?.isClearable&&pe!=null?(0,n.jsxs)("div",{className:Oe.wrapper,children:[(0,n.jsx)("span",{className:Oe.first,children:(0,n.jsx)(Be.p,{value:pe,onChange:De,id:be})}),(0,n.jsx)(b.K,{name:"times",onClick:()=>De(void 0),tooltip:(0,l.t)("options-ui.units.clear-tooltip","Clear unit selection")})]}):(0,n.jsx)(Be.p,{value:pe,onChange:De,id:be})}const Ye=pe=>({wrapper:(0,r.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center"}),first:(0,r.css)({marginRight:pe.spacing(1),flexGrow:2})}),de=()=>{const pe={id:"number",name:"Number",description:"Allows numeric values input",editor:me.w},De={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Qe.G},Me={id:"text",name:"Text",description:"Allows string values input",editor:Re.g},be={id:"strings",name:"String array",description:"An array of strings",editor:Le},Oe={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(tt){return(0,n.jsx)(i.d,{...tt,onChange:Ot=>tt.onChange(Ot.currentTarget.checked)})}},Ne={id:"select",name:"Select",description:"Allows option selection",editor:Se},We={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Ve},qe={id:"radio",name:"Radio",description:"Allows option selection",editor(tt){return(0,n.jsx)(c.z,{...tt,options:tt.item.settings?.options})}},st={id:"unit",name:"Unit",description:"Allows unit input",editor:$e},rt={id:"color",name:"Color",description:"Allows color selection",editor(tt){return(0,n.jsx)(oe.a,{value:tt.value,onChange:tt.onChange,settings:tt.item.settings,details:!0})}},ot={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:Ee},mt={id:"links",name:"Links",description:"Allows defining data links",editor:Pe},pt={id:"actions",name:"Actions",description:"Allows defining actions",editor:ie},ke={id:"stats-picker",name:"Stats Picker",editor:Ie,description:""},Ze={id:"timezone",name:(0,l.t)("options-ui.registry.get-all-option-editors.name-time-zone","Time zone"),description:(0,l.t)("options-ui.registry.get-all-option-editors.description-time-zone","Time zone selection"),editor:p.U},nt={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:h.O};return[Me,pe,De,Oe,qe,Ne,st,mt,pt,ke,be,Ze,ot,rt,We,nt,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ae},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:J},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:U}]},ge=()=>{const pe=[(0,l.t)("options-ui.registry.standard-field-configs.category","Standard options")],De={id:"displayName",path:"displayName",name:(0,l.t)("options-ui.registry.standard-field-configs.name-display-name","Display name"),description:(0,l.t)("options-ui.registry.standard-field-configs.description-display-name","Change the field or series name"),editor:a.D.get("text").editor,override:a.D.get("text").editor,process:s.AM,settings:{placeholder:(0,l.t)("options-ui.registry.standard-field-configs.placeholder-display-name","none"),expandTemplateVars:!0},shouldApply:()=>!0,category:pe},Me={id:"unit",path:"unit",name:(0,l.t)("options-ui.registry.standard-field-configs.name-unit","Unit"),description:"",editor:a.D.get("unit").editor,override:a.D.get("unit").editor,process:s.OU,settings:{placeholder:(0,l.t)("options-ui.registry.standard-field-configs.placeholder-unit","none")},shouldApply:()=>!0,category:pe},be={id:"fieldMinMax",path:"fieldMinMax",name:(0,l.t)("options-ui.registry.standard-field-configs.name-field-min-max","Field min/max"),description:(0,l.t)("options-ui.registry.standard-field-configs.description-field-min-max","Calculate min max per field"),editor:a.D.get("boolean").editor,override:a.D.get("boolean").editor,process:s.FM,shouldApply:nt=>nt.type===d.PU.number,showIf:nt=>nt.min===void 0||nt.max===void 0,category:pe},Oe={id:"min",path:"min",name:(0,l.t)("options-ui.registry.standard-field-configs.name-min","Min"),description:(0,l.t)("options-ui.registry.standard-field-configs.description-min","Leave empty to calculate based on all values"),editor:a.D.get("number").editor,override:a.D.get("number").editor,process:s.m0,settings:{placeholder:(0,l.t)("options-ui.registry.standard-field-configs.placeholder-min","auto")},shouldApply:nt=>nt.type===d.PU.number,category:pe},Ne={id:"max",path:"max",name:(0,l.t)("options-ui.registry.standard-field-configs.name-max","Max"),description:(0,l.t)("options-ui.registry.standard-field-configs.description-max","Leave empty to calculate based on all values"),editor:a.D.get("number").editor,override:a.D.get("number").editor,process:s.m0,settings:{placeholder:(0,l.t)("options-ui.registry.standard-field-configs.placeholder-max","auto")},shouldApply:nt=>nt.type===d.PU.number,category:pe},We={id:"decimals",path:"decimals",name:(0,l.t)("options-ui.registry.standard-field-configs.name-decimals","Decimals"),editor:a.D.get("number").editor,override:a.D.get("number").editor,process:s.m0,settings:{placeholder:(0,l.t)("options-ui.registry.standard-field-configs.placeholder-decimals","auto"),min:0,max:15,integer:!0},shouldApply:nt=>nt.type===d.PU.number,category:pe},qe={id:"noValue",path:"noValue",name:(0,l.t)("options-ui.registry.standard-field-configs.name-no-value","No value"),description:(0,l.t)("options-ui.registry.standard-field-configs.description-no-value","What to show when there is no value"),editor:a.D.get("text").editor,override:a.D.get("text").editor,process:s.OU,settings:{placeholder:"-"},shouldApply:()=>!0,category:pe},st=(0,l.t)("options-ui.registry.standard-field-condigs.category-data-links","Data links and actions"),rt={id:"links",path:"links",name:(0,l.t)("options-ui.registry.standard-field-configs.name-data-links","Data links"),editor:a.D.get("links").editor,override:a.D.get("links").editor,process:s.Ch,settings:{showOneClick:!1},shouldApply:()=>!0,category:[st],getItemsCount:nt=>nt?nt.length:0},ot={id:"actions",path:"actions",name:(0,l.t)("options-ui.registry.standard-field-configs.name-actions","Actions"),editor:a.D.get("actions").editor,override:a.D.get("actions").editor,process:s.cz,settings:{showOneClick:!1},shouldApply:()=>!0,category:[st],getItemsCount:nt=>nt?nt.length:0,hideFromDefaults:!0},mt={id:"color",path:"color",name:(0,l.t)("options-ui.registry.standard-field-configs.name-color-scheme","Color scheme"),editor:a.D.get("fieldColor").editor,override:a.D.get("fieldColor").editor,process:s.hS,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:pe},pt={id:"mappings",path:"mappings",name:(0,l.t)("options-ui.registry.standard-field-configs.name-value-mappings","Value mappings"),description:(0,l.t)("options-ui.registry.standard-field-configs.description-value-mappings","Modify the display text based on input value"),editor:a.D.get("mappings").editor,override:a.D.get("mappings").editor,process:s.xT,settings:{},defaultValue:[],shouldApply:nt=>nt.type!==d.PU.time,category:[(0,l.t)("options-ui.registry.standard-field-configs.category-value-mappings","Value mappings")],getItemsCount:nt=>nt?nt.length:0},ke={id:"thresholds",path:"thresholds",name:(0,l.t)("options-ui.registry.standard-field-configs.name-thresholds","Thresholds"),editor:a.D.get("thresholds").editor,override:a.D.get("thresholds").editor,process:s.N7,settings:{},defaultValue:{mode:o.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:[(0,l.t)("options-ui.registry.standard-field-configs.category-thresholds","Thresholds")],getItemsCount:nt=>nt?nt.steps.length:0},Ze={id:"filterable",path:"filterable",name:(0,l.t)("options-ui.registry.standard-field-configs.name-ad-hoc","Ad-hoc filterable"),hideFromDefaults:!0,editor:a.D.get("boolean").editor,override:a.D.get("boolean").editor,process:s.FM,shouldApply:()=>!0,settings:{},category:pe};return[Me,Oe,Ne,be,We,De,mt,qe,rt,ot,pt,ke,Ze]}},83203:(ne,j,e)=>{"use strict";e.d(j,{g:()=>n});const n={Template:"/dashboard/template"}},83276:(ne,j,e)=>{"use strict";e.d(j,{V:()=>p,b:()=>i});var n=e(84266),a=e(63895);function s(h){return"id"in h&&typeof h.id=="string"}function d(h){return"id"in h&&typeof h.id=="string"}function o(h){const u=h.matchers?.map(p),r=h.routes?.length?h.routes.map(o):void 0,g={...{receiver:h.receiver||null,group_by:h.group_by,continue:h.continue,group_wait:h.group_wait,group_interval:h.group_interval,repeat_interval:h.repeat_interval,mute_time_intervals:h.mute_time_intervals,active_time_intervals:h.active_time_intervals},object_matchers:u,routes:r};return d(h)?{...g,id:h.id}:g}function l(h){let u=[];h.object_matchers?u=h.object_matchers.map(a.iX):h.matchers&&(u=[],h.matchers.forEach(E=>{const x=(0,a.So)(E).map(a.NL).map(a.iX);u.push(...x)}));const r=h.routes?.length?h.routes.map(l):[],g={...{receiver:h.receiver??void 0,group_by:h.group_by,continue:h.continue??!1,group_wait:h.group_wait,group_interval:h.group_interval,repeat_interval:h.repeat_interval,mute_time_intervals:h.mute_time_intervals,active_time_intervals:h.active_time_intervals},matchers:u,routes:r};return s(h)?{...g,id:h.id}:g}const i={fromPackage:o,toPackage:l};function c(h){switch(h){case"=":return n.ho.equal;case"!=":return n.ho.notEqual;case"=~":return n.ho.regex;case"!~":return n.ho.notRegex;default:const u=h;throw new Error(`Unknown matcher type: ${u}`)}}function p(h){return[h.label,c(h.type),h.value]}},83340:(ne,j,e)=>{"use strict";e.d(j,{Ow:()=>a,ZW:()=>n,uo:()=>s});function n(d){return o=>"__systemRef"in o&&o.__systemRef===d}const a=d=>"__systemRef"in d&&typeof d.__systemRef=="string";var s=(d=>(d.Unit="unit",d.Min="min",d.Max="max",d.FieldMinMax="fieldMinMax",d.Decimals="decimals",d.DisplayName="displayName",d.NoValue="noValue",d.Thresholds="thresholds",d.Mappings="mappings",d.Links="links",d.Actions="actions",d.Color="color",d.Filterable="filterable",d))(s||{})},83458:(ne,j,e)=>{"use strict";e.d(j,{G:()=>n,P:()=>a});var n=(s=>(s.DashDB="dash-db",s.DashHome="dash-home",s.DashFolder="dash-folder",s))(n||{}),a=(s=>(s.List="list",s.Folders="folders",s))(a||{})},83501:(ne,j,e)=>{"use strict";e.d(j,{z:()=>l});var n=e(74848),a=e(96540),s=e(7389),d=e(92745),o=e(68577);function l({onChange:i,sort:c,testId:p}){const h=(0,a.useMemo)(()=>[{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.disabled","Disabled"),value:s.ZG.disabled},{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.alphabetical-asc","Alphabetical (asc)"),value:s.ZG.alphabeticalAsc},{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.alphabetical-desc","Alphabetical (desc)"),value:s.ZG.alphabeticalDesc},{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.numerical-asc","Numerical (asc)"),value:s.ZG.numericalAsc},{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.numerical-desc","Numerical (desc)"),value:s.ZG.numericalDesc},{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.alphabetical-caseinsensitive-asc","Alphabetical (case-insensitive, asc)"),value:s.ZG.alphabeticalCaseInsensitiveAsc},{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.alphabetical-caseinsensitive-desc","Alphabetical (case-insensitive, desc)"),value:s.ZG.alphabeticalCaseInsensitiveDesc},{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.natural-asc","Natural (asc)"),value:s.ZG.naturalAsc},{label:(0,d.t)("variables.query-variable-sort-select.sort_options.label.natural-desc","Natural (desc)"),value:s.ZG.naturalDesc}],[]),u=(0,a.useMemo)(()=>h.find(r=>r.value===c)??h[0],[c,h]);return(0,n.jsx)(o.v,{name:(0,d.t)("variables.query-variable-sort-select.name-sort","Sort"),description:(0,d.t)("variables.query-variable-sort-select.description-values-variable","How to sort the values of this variable"),value:u,options:h,onChange:i,testId:p,width:25})}},83692:(ne,j,e)=>{"use strict";e.d(j,{f:()=>i});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(91867),l=e(62348);const i=(0,s.memo)(function({hideText:h,value:u,timeZone:r="browser",placeholder:v="No time range selected",className:g}){const E=(0,d.of)(c);return h?null:(0,n.jsx)("span",{className:g,children:(0,l.X)(u)?(0,n.jsx)(o._8,{value:u,timeZone:r}):(0,n.jsx)("span",{className:E.placeholder,children:v})})}),c=p=>({placeholder:(0,a.css)({color:p.colors.text.disabled,opacity:1})})},83734:(ne,j,e)=>{"use strict";e.d(j,{HC:()=>a,XJ:()=>l,d:()=>s,pC:()=>o});let n;const a=i=>{if(n)throw new Error("Runner should only be set when Grafana is starting.");n=i},s=()=>{if(!n)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return n()};let d;function o(i){if(d)throw new Error("runRequest function should only be set once, when Grafana is starting.");d=i}function l(){if(!d)throw new Error("getRunRequest can only be used after Grafana instance has started.");return d}},83750:(ne,j,e)=>{"use strict";e.d(j,{s:()=>u});var n=e(74848),a=e(22803),s=e(45967),d=e(89640),o=e(63142),l=e(95443),i=e(40165),c=e(9368),p=e(16591);const h=["message","description"],u=({annotationKey:g,value:E,valueLink:x})=>{const m=g,y=l.J3[m]?(0,n.jsx)(s.m,{content:g,placement:"top",theme:"info",children:(0,n.jsx)("span",{children:l.J3[m]})}):g;return(0,n.jsx)(i.X,{label:y,horizontal:!0,children:(0,n.jsx)(r,{annotationKey:g,value:E,valueLink:x})})},r=({annotationKey:g,value:E,valueLink:x})=>{const m=(0,o.of)(v),y=h.includes(g),b=E&&E.startsWith("http"),D=(0,n.jsx)(c.Y,{input:E,delimiter:["{{","}}"]});return x?(0,n.jsx)(d.Y,{href:x,external:!0,children:E}):y?(0,n.jsx)(p.L,{className:m.well,children:D}):b?(0,n.jsx)(d.Y,{href:E,external:!0,children:E}):(0,n.jsx)(n.Fragment,{children:D})},v=g=>({well:(0,a.css)({wordBreak:"break-word"})})},83793:(ne,j,e)=>{"use strict";e.d(j,{PP:()=>v,tj:()=>n.tj,bS:()=>n.bS,ZL:()=>n.ZL,L:()=>n.L,Qo:()=>n.Qo,So:()=>n.So,KA:()=>n.KA,F9:()=>n.F9,Bm:()=>n.Bm,Kw:()=>n.Kw,$j:()=>n.$j,qC:()=>n.qC,$9:()=>n.$9,Sw:()=>n.Sw,Cx:()=>n.Cx,nS:()=>n.nS,c2:()=>n.c2,v$:()=>n.v$,L3:()=>n.L3,Ih:()=>n.Ih,XM:()=>n.XM,hD:()=>n.hD});var n=e(71313),a=e(92745),s=e(68143),d=e(87186),o=e(8535),l=e(6890),i=e(64762),c=e(27044),p=e(44220),h=e(85618),u=e(54115);function r(g){return async function(x,{updateCachedData:m,cacheDataLoaded:y,cacheEntryRemoved:b}){if(!x?.watch)return;const D=new u.ws({group:"provisioning.grafana.app",version:"v0alpha1",resource:g});let f=null;try{const P=(await y).data.metadata?.resourceVersion;f=D.watch({resourceVersion:P}).subscribe(T=>{m(M=>{M.items||(M.items=[]);const I=M.items.findIndex(B=>B.metadata?.name===T.object.metadata.name);T.type==="ADDED"&&I===-1?M.items.push(T.object):T.type==="DELETED"&&I!==-1?M.items.splice(I,1):I!==-1&&(M.items[I]=T.object)})})}catch(C){console.error("Error in onCacheEntryAdded:",C)}await b,f?.unsubscribe()}}const v=n.qR.enhanceEndpoints({endpoints:{listJob:{query:({watch:g,...E})=>({url:"/jobs",params:E}),onCacheEntryAdded:r("jobs")},listRepository:{query:({watch:g,...E})=>({url:"/repositories",params:E}),onCacheEntryAdded:r("repositories")},deleteRepository:{onQueryStarted:async(g,{queryFulfilled:E,dispatch:x})=>{try{await E,x((0,l.dx)((0,i.tZ)((0,a.t)("provisioning.delete-repository-button.success-repository-deleted","Repository settings queued for deletion"))))}catch(m){m instanceof Error&&x((0,l.dx)((0,i.gi)((0,a.t)("provisioning.delete-repository-button.error-repository-delete","Failed to delete repository"),m)))}setTimeout(()=>{x((0,p.bw)({parentUID:void 0,pageSize:c.md}))},1e3)}},deletecollectionRepository:{onQueryStarted:async(g,{queryFulfilled:E,dispatch:x})=>{try{await E,x((0,l.dx)((0,i.tZ)((0,a.t)("provisioning.home-page.success-all-repositories-deleted","All configured repositories deleted"))))}catch(m){m instanceof Error&&x((0,l.dx)((0,i.gi)((0,a.t)("provisioning.home-page.error-delete-all-repositories","Failed to delete all repositories"),m)))}setTimeout(()=>{x((0,p.bw)({parentUID:void 0,pageSize:c.md}))},1e3)}},createRepositoryTest:{onQueryStarted:async(g,{queryFulfilled:E,dispatch:x})=>{try{await E}catch(m){if(typeof m=="object"&&m&&"error"in m&&(0,s.NF)(m.error)){if(m.error.data.kind==="Status"&&m.error.data.status==="Failure"){const y=m.error.data;x((0,l.dx)((0,i.gi)("Error validating repository",new Error(y.message||"Unknown error"))));return}if(Array.isArray(m.error.data.errors)&&m.error.data.errors.length){m.error.data.errors.filter(b=>!b.field).length>0&&x((0,l.dx)((0,i.gi)("Error validating repository")));return}}(0,h.H4)(m,x,"Error validating repository")}}},createRepositoryJobs:{onQueryStarted:async({jobSpec:g},{queryFulfilled:E,dispatch:x})=>{try{const m=g.action==="pull"||g.action==="migrate";await E,m&&x((0,l.dx)((0,i.tZ)((0,a.t)("provisioning.sync-repository.success-pull-started","Pull started"))))}catch(m){m instanceof Error&&x((0,l.dx)((0,i.gi)((0,a.t)("provisioning.sync-repository.error-pulling-resources","Error pulling resources"),m)))}}},createRepository:{onQueryStarted:async(g,{queryFulfilled:E,dispatch:x})=>{try{await E,x((0,l.dx)((0,i.tZ)((0,a.t)("provisioning.config-form.alert-repository-settings-saved","Repository settings saved"))))}catch(m){m instanceof Error&&x((0,l.dx)((0,i.gi)((0,a.t)("provisioning.config-form.error-save-repository","Failed to save repository settings"),m)))}}},replaceRepository:{onQueryStarted:async(g,{queryFulfilled:E,dispatch:x})=>{try{await E,x((0,l.dx)((0,i.tZ)((0,a.t)("provisioning.config-form.alert-repository-settings-updated","Repository settings updated"))))}catch(m){m instanceof Error&&x((0,l.dx)((0,i.gi)((0,a.t)("provisioning.config-form.error-save-repository","Failed to save repository settings"),m)))}x((0,p.bw)({parentUID:void 0,pageSize:c.md}))}},getRepositoryJobsWithPath:{onQueryStarted:async(g,{queryFulfilled:E,dispatch:x})=>{try{const y=(await E).data;if(y.status?.state==="success"&&(y.spec?.action==="delete"||y.spec?.action==="move")){const b=(0,o.Gu)().browseDashboards,D=y.spec?.action;let f=Object.keys(b.childrenByParentUID);if(D==="delete"){const C=y.spec?.[D]?.resources?.map(P=>P.name).filter(Boolean)||[];f=f.filter(P=>!C.includes(P))}x((0,d.xN)(f))}}catch(m){console.error("Error in getRepositoryJobsWithPath:",m)}}}}})},83871:(ne,j,e)=>{"use strict";e.d(j,{e:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({children:l,className:i,grow:c,...p})=>{const h=(0,s.of)(o,c);return(0,n.jsx)("div",{className:(0,a.cx)(h.container,i),...p,children:l})};d.displayName="InlineSegmentGroup";const o=(l,i)=>({container:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${i?1:0} 0 auto`,marginBottom:l.spacing(.5)})})},83873:(ne,j,e)=>{"use strict";e.d(j,{Mf:()=>Ue,IB:()=>Ie,AI:()=>Re});var n=e(56568),a=e(13752),s=e(75505),d=e(88483),o=e(64423),l=e(13288),i=e(65474),c=e(20039),p=e(81160),h=e(69862),u=e(59099),r=e(37748),v=e(66847),g=e(67791),E=e(16126),x=e(41560),m=e(69850),y=e(1005),b=e(24726),D=e(32899),f=e(94644),C=e(37615),P=e(43173),T=e(45229),M=e(65642),I=e(57680),B=e(65556),U=e(13956),W=e(74848),V=e(22803),z=e(92745),R=e(63142),O=e(15245),N=e(79331),F=e(45861),G=e(35621);const H=Ke=>{const Le=(0,R.of)(K),ze=(0,R.$j)(),Be=(0,G.o)(ze),$e=!!Ke.maxConcurrentSessions,Ye=()=>{window.location.reload()};return(0,W.jsxs)(O.ZL,{children:[(0,W.jsx)("div",{className:Be.modal,children:(0,W.jsxs)(N.w,{title:(0,z.t)("users.token-revoked-modal.title-you-have-been-automatically-signed-out","You have been automatically signed out"),severity:"warning",className:Le.infobox,children:[(0,W.jsxs)("div",{className:Le.text,children:[(0,W.jsx)("p",{children:(0,W.jsxs)(z.x6,{i18nKey:"users.token-revoked-modal.auto-revoked",values:{numSessions:$e?Ke.maxConcurrentSessions:""},children:["Your session token was automatically revoked because you have reached"," ",(0,W.jsxs)("strong",{children:["the maximum number of ","{{numSessions}}"," concurrent sessions"]})," for your account."]})}),(0,W.jsx)("p",{children:(0,W.jsxs)(z.x6,{i18nKey:"users.token-revoked-modal.resume-message",children:[(0,W.jsx)("strong",{children:"To resume your session, sign in again."}),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically."]})})]}),(0,W.jsx)(F.$n,{size:"md",variant:"primary",onClick:Ye,children:(0,W.jsx)(z.x6,{i18nKey:"users.token-revoked-modal.sign-in",children:"Sign in"})})]})}),(0,W.jsx)("div",{className:(0,V.cx)(Be.modalBackdrop,Le.backdrop)})]})},K=Ke=>({infobox:(0,V.css)({marginBottom:0}),text:(0,V.css)({margin:Ke.spacing(1,0,2)}),backdrop:(0,V.css)({backgroundColor:Ke.colors.background.canvas,opacity:.8})});var w=e(87745),Q=e(2543),k=e(62467),te=e(63704);const q=Ke=>{const Le=Ke.method,ze=le(Ke),Be=L(ze),$e=ie(Ke,Be),Ye=fe(Ke);return{method:Le,headers:ze,body:$e,credentials:Ye,signal:Ke.abortSignal}},se={canParse:()=>!0,parse:Ke=>(Ke.get("accept")||Ke.set("accept","application/json, text/plain, */*"),Ke)},re=Ke=>({canParse:Le=>(Le?.method?Le?.method.toLowerCase():"")===Ke,parse:Le=>(Le.get("content-type")||Le.set("content-type","application/json"),Le)}),Y=re("post"),X=re("put"),J=re("patch"),_=[Y,X,J,se],ee=/[^\u0000-\u00ff]/g;function ae(Ke){return ee.test(Ke)?encodeURI(Ke):Ke}const le=Ke=>{const Le={};for(let[Ye,de]of Object.entries(Ke.headers??{}))Le[ae(Ye)]=ae(de);const ze=new Headers(Le);return _.filter(Ye=>Ye.canParse(Ke)).reduce((Ye,de)=>de.parse(Ye),ze)},L=Ke=>{if(!Ke)return!1;const Le=Ke.get("content-type");return!!(Le&&["application/json","application/merge-patch+json","application/strategic-merge-patch+json"].includes(Le.toLowerCase()))},ie=(Ke,Le)=>Ke&&(!Ke.data||typeof Ke.data=="string"||Ke.data instanceof Blob?Ke.data:Le?JSON.stringify(Ke.data):new URLSearchParams(Ke.data));async function oe(Ke,Le){if(Le)switch(Le){case"arraybuffer":return Ke.arrayBuffer();case"blob":return Ke.blob();case"json":return Ke.headers.get("Content-Length")==="0"?(console.warn(`${Ke.url} returned an invalid JSON`),{}):await Ke.json();case"text":return Ke.text()}const ze=await Ke.text();try{return JSON.parse(ze)}catch{}return ze}function ue(Ke){return Object.keys(Ke).map(Le=>{const ze=Ke[Le];return Array.isArray(ze)?ze.map(Be=>`${encodeURIComponent(Le)}=${encodeURIComponent(Be)}`).join("&"):`${encodeURIComponent(Le)}=${encodeURIComponent(ze)}`}).join("&")}const ye=Ke=>{try{const Le=(0,Q.omitBy)(Ke.params,$e=>$e===void 0||$e&&$e.length===0),ze=ue(Le),Be=Ke.validatePath?(0,te.iQ)(Ke.url):Ke.url;return Ke.params&&ze.length?(0,k.of)(`${Be}?${ze}`):(0,k.of)(Be)}catch(Le){return(0,l.$)(()=>Le)}},fe=Ke=>Ke&&(Ke.credentials?Ke.credentials:Ke.withCredentials?((0,C.l)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin");var Ee=e(1404),Ae=(Ke=>(Ke[Ke.Pending=0]="Pending",Ke[Ke.InProgress=1]="InProgress",Ke[Ke.Done=2]="Done",Ke))(Ae||{});class Ge{constructor(Le=!1){this.state={},this.queue=new a.B,this.updates=new a.B,this.add=(ze,Be)=>this.queue.next({id:ze,options:Be,state:0}),this.setInProgress=ze=>this.queue.next({id:ze,state:1}),this.setDone=ze=>this.queue.next({id:ze,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=ze=>{const Be=Object.keys(ze).filter(Ye=>ze[Ye].state===1).length;return{noOfPending:Object.keys(ze).filter(Ye=>ze[Ye].state===0).length,noOfInProgress:Be,state:ze}},this.publishUpdate=(ze,Be)=>{this.printState(ze,Be),this.updates.next(ze)},this.printState=(ze,Be)=>{if(!Be)return;const $e=Object.keys(ze.state).reduce((Ye,de)=>{const ge={id:de,state:ze.state[de].state};return Ye.push(ge),Ye},[]);console.log("FetchQueue noOfStarted",ze.noOfInProgress),console.log("FetchQueue noOfNotStarted",ze.noOfPending),console.log("FetchQueue state",$e)},this.queue.subscribe(ze=>{const{id:Be,state:$e,options:Ye}=ze;if(this.state[Be]||(this.state[Be]={state:0,options:{url:""}}),$e===2){delete this.state[Be];const ge=this.getUpdate(this.state);this.publishUpdate(ge,Le);return}this.state[Be].state=$e,Ye&&(this.state[Be].options=Ye);const de=this.getUpdate(this.state);this.publishUpdate(de,Le)})}}var Fe=e(95864);class Pe{constructor(Le,ze,Be){const $e=Be?.http2Enabled?1e3:5;Le.getUpdates().pipe((0,E.p)(({noOfPending:Ye})=>Ye>0),(0,Fe.H)(({state:Ye,noOfInProgress:de})=>{const ge=Object.keys(Ye).filter(be=>Ye[be].state===Ae.Pending&&!(0,Ee.dr)(Ye[be].options.url)).reduce((be,Oe)=>{const Ne={id:Oe,options:Ye[Oe].options};return be.push(Ne),be},[]),pe=Object.keys(Ye).filter(be=>Ye[be].state===Ae.Pending&&(0,Ee.dr)(Ye[be].options.url)).reduce((be,Oe)=>{const Ne={id:Oe,options:Ye[Oe].options};return be.push(Ne),be},[]),De=Math.max($e-de-ge.length,0),Me=pe.slice(0,De);return ge.concat(Me)})).subscribe(({id:Ye,options:de})=>{ze.add(Ye,de)})}}class Ve{constructor(Le,ze){this.queue=new a.B,this.responses=new a.B,this.add=(Be,$e)=>{this.queue.next({id:Be,options:$e})},this.getResponses=Be=>this.responses.asObservable().pipe((0,E.p)($e=>$e.id===Be)),this.queue.subscribe(Be=>{const{id:$e,options:Ye}=Be;Le.setInProgress($e),this.responses.next({id:$e,observable:ze(Ye)})})}}var me=e(15130);const Se="cancel_all_requests_request_id",Qe="grafana-trace-id";class Ue{constructor(Le){this.inFlightRequests=new a.B,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new a.B,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:c.$,appEvents:T.A,contextSrv:me.TP,logout:()=>{me.TP.setLoggedOut()}},this.chunkRequestId=1,Le&&(this.dependencies={...this.dependencies,...Le}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new Ge,this.responseQueue=new Ve(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new Pe(this.fetchQueue,this.responseQueue,(0,M.zj)())}async initGrafanaDeviceID(){try{const ze=await(await n.Ay.load()).get();this.deviceID=ze.visitorId}catch(Le){console.error(Le)}}async request(Le){return await(0,s.s)(this.fetch(Le).pipe((0,p.T)(ze=>ze.data)))}fetch(Le){const ze=(0,b.A)(),Be=this.fetchQueue;return new d.c($e=>{const Ye=new o.yU;return Ye.add(this.responseQueue.getResponses(ze).subscribe(de=>{Ye.add(de.observable.subscribe($e))})),this.fetchQueue.add(ze,Le),function(){Be.setDone(ze),Ye.unsubscribe()}})}chunked(Le){const ze=Le.requestId??`chunked-${this.chunkRequestId++}`,Be=new AbortController,$e=q({...Le,requestId:ze,abortSignal:Be.signal});return new d.c(Ye=>{const de=ye(Le).pipe((0,h.Z)(ge=>this.dependencies.fromFetch(ge,$e))).subscribe(this.getChunkedResponseObserver({controller:Be,observer:Ye,options:Le,requestId:ze}));return function(){console.log(ze,"unsubscribe"),Be.abort("unsubscribe"),de.unsubscribe()}})}getChunkedResponseObserver({controller:Le,observer:ze,options:Be,requestId:$e}){let Ye=!1;return{next:de=>{const ge={status:de.status,statusText:de.statusText,ok:de.ok,headers:de.headers,url:de.url,type:de.type,redirected:de.redirected,config:Be,traceId:de.headers.get(Qe)??void 0,data:void 0};if(!de.body){ze.next(ge),ze.complete();return}const pe=de.body.getReader();Le.signal.onabort=()=>{pe.cancel(Le.signal.reason),console.log($e,"signal.aborted")};async function De(){for(;pe&&!Ye;){const Me=await pe.read();ze.next({...ge,data:Me.value}),Me.done&&(Ye=!0,console.log($e,"done"))}}De().then(()=>{console.log($e,"complete"),ze.complete()}).catch(Me=>{console.log($e,"catch",Me),ze.error(Me)})},error:de=>{ze.error(de)}}}internalFetch(Le){Le.requestId&&this.inFlightRequests.next(Le.requestId),Le=this.parseRequestOptions(Le);const ze=(0,B.r)();return ze!==null&&ze!==""&&P.$.jwtUrlLogin&&P.$.jwtHeaderName&&(Le.headers=Le.headers??{},Le.headers[P.$.jwtHeaderName]=`${ze}`),this.deviceID&&(Le.headers=Le.headers??{},Le.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),ye(Le).pipe(this.getFromFetchStream(Le),this.handleStreamResponse(Le),this.handleStreamError(Le),this.handleStreamCancellation(Le))}resolveCancelerIfExists(Le){this.inFlightRequests.next(Le)}cancelAllInFlightRequests(){this.inFlightRequests.next(Se)}async datasourceRequest(Le){return(0,s.s)(this.fetch(Le))}parseRequestOptions(Le){const ze=this.dependencies.contextSrv.user?.orgId;return Le.retry=Le.retry??0,(0,Ee.Lr)(Le.url)&&(ze&&(Le.headers=Le.headers??{},Le.headers["X-Grafana-Org-Id"]=ze),Le.url.startsWith("/")&&(Le.url=Le.url.substring(1)),Le.headers?.Authorization&&(Le.headers["X-DS-Authorization"]=Le.headers.Authorization,delete Le.headers.Authorization),this.noBackendCache&&(Le.headers=Le.headers??{},Le.headers["X-Grafana-NoCache"]="true")),Le.hideFromInspector===void 0&&(Le.hideFromInspector=(0,Ee.Lr)(Le.url)&&!(0,Ee.dr)(Le.url)),Le}getFromFetchStream(Le){return ze=>ze.pipe((0,h.Z)(Be=>{const $e=q(Le);return this.dependencies.fromFetch(Be,$e).pipe((0,h.Z)(async Ye=>{const{status:de,statusText:ge,ok:pe,headers:De,url:Me,type:be,redirected:Oe}=Ye,Ne=Le.responseType??(L(De)?"json":void 0),We=await oe(Ye,Ne);return{status:de,statusText:ge,ok:pe,data:We,headers:De,url:Me,type:be,redirected:Oe,config:Le,traceId:Ye.headers.get(Qe)??void 0}}))}))}showApplicationErrorAlert(Le){}showSuccessAlert(Le){const{config:ze}=Le;if(ze.showSuccessAlert===!1||ze.showSuccessAlert===void 0&&(ze.method==="GET"||(0,Ee.dr)(ze.url)||!(0,Ee.Lr)(ze.url)))return;const Be=Le.data;Be?.message&&this.dependencies.appEvents.emit(D.r1.alertSuccess,[Be.message])}showErrorAlert(Le,ze){if((ze.status<400||ze.status>=500)&&this.dependencies.contextSrv.isSignedIn&&(this.dependencies.contextSrv.user.authenticatedBy==="apikey"||this.dependencies.contextSrv.user.authenticatedBy==="render")||Le.showErrorAlert===!1||Le.showErrorAlert===void 0&&((0,Ee.dr)(Le.url)||!(0,Ee.Lr)(Le.url)))return;let Be="",$e=ze.data.message;$e==="Unexpected error"&&ze.message&&($e=ze.message),$e.length>80&&(Be=$e,$e="Error"),ze.status===422&&(Be=ze.data.message,$e="Validation failed"),this.dependencies.appEvents.emit(ze.status<500?D.r1.alertWarning:D.r1.alertError,[$e,Be,ze.data.traceID])}processRequestError(Le,ze){return ze.data=ze.data??{message:"Unexpected error"},typeof ze.data=="string"&&(ze.data={message:ze.data,error:ze.statusText,response:ze.data}),ze.data&&!ze.data.message&&typeof ze.data.error=="string"&&(ze.data.message=ze.data.error),ze.data.message&&setTimeout(()=>{ze.isHandled||this.showErrorAlert(Le,ze)},50),this.inspectorStream.next({response:ze,requestId:Le.requestId}),ze}handleStreamResponse(Le){return ze=>ze.pipe((0,p.T)(Be=>{if(!Be.ok){const{status:$e,statusText:Ye,data:de}=Be;throw{status:$e,statusText:Ye,data:de,config:Le,traceId:Be.headers.get(Qe)??void 0}}return Be}),(0,u.M)(Be=>{this.showSuccessAlert(Be),this.inspectorStream.next({response:Be,requestId:Le.requestId})}))}handleStreamError(Le){const{isSignedIn:ze}=this.dependencies.contextSrv.user;return Be=>Be.pipe((0,r.l)($e=>$e.pipe((0,h.Z)((Ye,de)=>{const ge=de===0&&Le.retry===0;if(Ye.status===401&&(0,Ee.Lr)(Le.url)&&ge&&ze){if(Ye.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new w.S8({component:H,props:{maxConcurrentSessions:Ye.data?.error?.maxConcurrentSessions}})),this.dependencies.contextSrv.setRedirectToUrl(),(0,l.$)(()=>Ye);let pe=this.loginPing();return(0,I.m)()&&(0,I.W)()*1e3<Date.now()&&(pe=this.rotateToken()),(0,i.H)(pe).pipe((0,v.W)(De=>(De.status===401&&this.dependencies.logout(),(0,l.$)(De))))}return(0,l.$)(Ye)}))),(0,v.W)($e=>(0,l.$)(()=>this.processRequestError(Le,$e))))}handleStreamCancellation(Le){return ze=>ze.pipe((0,g.Q)(this.inFlightRequests.pipe((0,E.p)(Be=>{let $e=!1;return Le&&Le.requestId&&Le.requestId===Be&&($e=!0),Be===Se&&($e=!0),$e}))),(0,x.v)(()=>({type:f.v2.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Le})))}getInspectorStream(){return this.inspectorStream}async get(Le,ze,Be,$e){return this.request({...$e,method:"GET",url:Le,params:ze,requestId:Be})}async delete(Le,ze,Be){return this.request({...Be,method:"DELETE",url:Le,data:ze})}async post(Le,ze,Be){return this.request({...Be,method:"POST",url:Le,data:ze})}async patch(Le,ze,Be){return this.request({...Be,method:"PATCH",url:Le,data:ze})}async put(Le,ze,Be){return this.request({...Be,method:"PUT",url:Le,data:ze})}withNoBackendCache(Le){return this.noBackendCache=!0,Le().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,m.j)(()=>{this._tokenRotationInProgress=null}),(0,y.u)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(Le){return this.get("/api/search",Le)}getDashboardByUid(Le){return(0,C.l)("backend_srv","getDashboardByUid(uid)","getDashboardAPI().getDashboardDTO(uid)"),(0,U.n)("v1").getDashboardDTO(Le)}validateDashboard(Le){return Promise.resolve({isValid:!1,message:"dashboard validation is not supported"})}getPublicDashboardByUid(Le){return this.get(`/api/public/dashboards/${Le}`)}getFolderByUid(Le,ze={}){const Be=new URLSearchParams;return ze.withAccessControl&&Be.set("accesscontrol","true"),this.get(`/api/folders/${Le}?${Be.toString()}`,void 0,void 0,{showErrorAlert:!1})}}const Ie=new Ue,Re=()=>Ie},83903:(ne,j,e)=>{"use strict";e.d(j,{y:()=>o});var n=e(74848),a=e(84266),s=e(67834);const d={[a.Or.Active]:"bad",[a.Or.Unprocessed]:"neutral",[a.Or.Suppressed]:"info"},o=({state:l})=>(0,n.jsx)(s.O,{state:d[l],children:l})},83953:(ne,j,e)=>{"use strict";e.d(j,{BE:()=>f,HZ:()=>b,O2:()=>C,RA:()=>D,Z9:()=>M,aj:()=>W,dq:()=>U,eO:()=>T,ng:()=>y,pg:()=>B,rk:()=>P});var n=e(2543),a=e.n(n),s=e(33239),d=e(25229),o=e(22592),l=e(28105),i=e(78282),c=e(53222),p=e(80977),h=e(18615),u=e(29043),r=e(62635),v=e(28998),g=e(10951),E=e(2513);const x=100,m="grafana.explore.style.graph",y=V=>{u.A.set(m,V)},b=V=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:E.kn},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:D(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],supplementaryQueries:(0,g.Ez)(),panelsState:{},correlations:void 0,compact:!1,...V}),D=()=>({state:l.Gu.NotStarted,series:[],timeRange:(0,o.E2)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function f(V,z){let R;try{R=await(0,v.tR)().get(z)}catch{R=await(0,v.tR)().get()}if(R.init)try{R.init()}catch(G){console.error(G)}let O=[];const N=(0,c.tU)(),F=await N.getRichHistory({search:"",sortOrder:p.x.Ascending,datasourceFilters:[R.name],starred:!1});if((F.total||0)>0&&F.richHistory.forEach(G=>{G.queries.forEach(H=>{O.push({ts:parseInt(G.id,10),query:H})})}),O.length<x){const G=await N.getRichHistory({search:"",sortOrder:p.x.Ascending,datasourceFilters:[h.uv],starred:!1});(G.total||0)>0&&G.richHistory.forEach(H=>{H.queries.forEach(K=>{K?.datasource?.uid===R.uid&&O.push({ts:parseInt(H.id,10),query:K})})})}if(O.length<x){const G=`grafana.explore.history.${R.meta?.id}`;O=[...O,...u.A.getObject(G,[])]}return O.length>x&&(O.length=x),(0,r.dr)(V,R.uid),{history:O,instance:R}}function C(V){const z={from:V.from,to:V.to};return Object.entries(z).map(([O,N])=>`${encodeURIComponent(O)}=${encodeURIComponent(N.toString())}`).join("&")}function P(V,z){const R=C(z),O=V.findIndex(F=>F.key===R);return O>=0?V[O].value:void 0}function T(V,z){return{from:s.parse(V.from,!1,z),to:s.parse(V.to,!0,z),raw:V}}function M(V){let z=E.kn,R={from:I(V.from),to:I(V.to)};return R.from!==null&&R.to!==null&&(z={from:R.from,to:R.to}),z}function I(V){if(V===null)return null;if((0,d.Ar)(V))return V;if(typeof V!="string")return null;const z=V;if(z.indexOf("now")!==-1)return z;if(z.length===8)return(0,d.yT)(z,"YYYYMMDD");if(z.length===15)return(0,d.yT)(z,"YYYYMMDDTHHmmss");if(z.length===19)return(0,d.yT)(z,"YYYY-MM-DD HH:mm:ss");if(z.match(/^\d+$/)){const O=parseInt(z,10);return(0,d.yT)(O)}const R=(0,d.yT)(z);return R.isValid()?R:null}const B=(V,z)=>z?V?z.slice(V+1):z:[],U=(V,z)=>V===h.uv?(0,n.uniq)(z.map(R=>R.datasource?.uid).filter(R=>!!R)):[V];async function W(V,z){const R=V.explore.panes[z].correlationEditorHelperData,O=V.explore.correlationEditorDetails?.editorMode||!1,N=Object.keys(V.explore.panes)[0]===z,F=O&&N,G=F?await(0,i.l)().get():void 0,H=O&&!N&&R!==void 0;let K={};return H&&R!==void 0&&Object.entries(R?.vars).forEach(w=>{K[w[0]]={value:w[1]}}),{defaultCorrelationEditorDatasource:G,scopedVars:K,showCorrelationEditorLinks:F}}},84019:(ne,j,e)=>{"use strict";e.d(j,{V:()=>p,X:()=>c});var n=e(92745),a=e(43173),s=e(59857),d=e(11393),o=e(75735),l=e(28998),i=e(15130);async function c(h){let u=s.Ye.templating?.list;if(a.$.featureToggles.newDashboardWithFiltersAndGroupBy){const v=await(0,l.tR)().get();if(v.getTagKeys){const g={type:v.meta.id,uid:v.uid},E={datasource:g,filters:[],name:"Filter",type:"adhoc"},x={datasource:g,name:"Group by",type:"groupby"};u=(u||[]).concat([E,x])}}const r={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{...s.Ye,uid:"",title:(0,n.t)("dashboard-scene.build-new-dashboard-save-model.data.title.new-dashboard","New dashboard"),panels:[],timezone:i.TP.user?.timezone||s.Ye.timezone}};return u&&(r.dashboard.templating={list:u}),h&&(r.meta.folderUid=h),r}async function p(h){let u=(0,d.xE)().variables;if(a.$.featureToggles.newDashboardWithFiltersAndGroupBy){const v=await(0,l.tR)().get();if(v.getTagKeys){const g={type:v.meta.id,uid:v.uid},E={kind:"AdhocVariable",group:g.type,datasource:{name:g.uid},spec:{...(0,d.IP)(),name:"Filter"}},x={kind:"GroupByVariable",group:g.type,datasource:{name:g.uid},spec:{...(0,d.Bj)(),name:"Group by"}};u=(u||[]).concat([E,x])}}const r={apiVersion:"v2beta1",kind:"DashboardWithAccessInfo",spec:{...(0,d.xE)(),title:(0,n.t)("dashboard-scene.build-new-dashboard-save-model-v2.data.title.new-dashboard","New dashboard"),timeSettings:{...(0,d.ft)(),timezone:i.TP.user?.timezone||(0,d.ft)().timezone}},access:{canStar:!1,canShare:!1,canDelete:!1},metadata:{name:"",resourceVersion:"0",creationTimestamp:new Date().toISOString(),annotations:{[o.ew]:""}}};return u&&(r.spec.variables=u),h&&r.metadata.annotations&&(r.metadata.annotations[o.ew]=h),r}},84057:(ne,j,e)=>{"use strict";e.d(j,{rH:()=>l,tc:()=>o});var n=e(41811),a=e(66198),s=e(43550);const d=()=>{const p={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:p,main:p}},o=(0,n.default)((p,h,u,r=!1)=>{if(p[h]){const v=p[h],g=r?v:l(v),E=i(g,h);return{node:v,main:E}}return u||d()});function l(p){return p.id===a.Rj?p:p.parentItem&&p.parentItem.id!==s.Id?l(p.parentItem):p}function i(p,h){return p.id===h?{...p,active:!0}:p.children&&p.children.length>0?{...p,children:p.children.map(u=>i(u,h))}:p}const c=p=>`${p.main.text}${p.node.text?": "+p.node.text:""}`},84229:(ne,j,e)=>{"use strict";e.d(j,{y:()=>n});var n=(a=>(a[a.Off=0]="Off",a[a.Crosshair=1]="Crosshair",a[a.Tooltip=2]="Tooltip",a))(n||{})},84266:(ne,j,e)=>{"use strict";e.d(j,{Or:()=>s,Oz:()=>l,RC:()=>a,ho:()=>d,nA:()=>o,uz:()=>n});const n=Symbol("routes_metadata");var a=(i=>(i.Active="active",i.Expired="expired",i.Pending="pending",i))(a||{}),s=(i=>(i.Unprocessed="unprocessed",i.Active="active",i.Suppressed="suppressed",i))(s||{}),d=(i=>(i.equal="=",i.notEqual="!=",i.regex="=~",i.notRegex="!~",i))(d||{}),o=(i=>(i.Internal="internal",i.External="external",i.All="all",i))(o||{}),l=(i=>(i.cortex="cortex",i.mimir="mimir",i.prometheus="prometheus",i))(l||{})},84500:(ne,j,e)=>{"use strict";e.d(j,{$o:()=>v,CN:()=>u,Gs:()=>g,Ru:()=>E});var n=e(43173),a=e(44248),s=e(21275),d=e(59857),o=e(11393),l=e(50803),i=e(92119),c=e(67350),p=e(62265),h=e(39508);function u(x,m){const y=[];for(const b of x.state.variables){const D={name:b.state.name,label:b.state.label,description:b.state.description??void 0,skipUrlSync:!!b.state.skipUrlSync,hide:b.state.hide||d.zL.dontHide,type:b.state.type};if(a.Go.isQueryVariable(b)){let f=[];((0,h.qJ)(b.state.refresh)==="never"||m)&&(f=r(b.state)),y.push({...D,current:{value:b.state.value,text:b.state.text},options:f,query:b.state.query,definition:b.state.definition,datasource:(0,p.AB)(x,b,"variable"),sort:b.state.sort,refresh:b.state.refresh,regex:b.state.regex,allValue:b.state.allValue,includeAll:b.state.includeAll,multi:b.state.isMulti,allowCustomValue:b.state.allowCustomValue,skipUrlSync:b.state.skipUrlSync,staticOptions:b.state.staticOptions?.map(C=>({text:C.label,value:String(C.value)})),staticOptionsOrder:b.state.staticOptionsOrder})}else if(a.Go.isCustomVariable(b))y.push({...D,current:{text:b.state.value,value:b.state.value},options:r(b.state),query:b.state.query,multi:b.state.isMulti,allValue:b.state.allValue,includeAll:b.state.includeAll,allowCustomValue:b.state.allowCustomValue});else if(a.Go.isDataSourceVariable(b))y.push({...D,current:{value:b.state.value,text:b.state.text},options:[],regex:b.state.regex,refresh:s.CO.onDashboardLoad,query:b.state.pluginId,multi:b.state.isMulti,allValue:b.state.allValue,includeAll:b.state.includeAll,allowCustomValue:b.state.allowCustomValue});else if(a.Go.isConstantVariable(b))y.push({...D,current:{value:b.state.value,text:b.state.value},query:b.state.value,hide:d.zL.hideVariable});else if(a.Go.isIntervalVariable(b)){const f=(0,i.bx)(b.state.intervals);y.push({...D,current:{text:b.state.value,value:b.state.value},query:f,refresh:b.state.refresh,options:b.state.intervals.map(C=>({value:C,text:C,selected:C===b.state.value})),auto:b.state.autoEnabled,auto_min:b.state.autoMinInterval,auto_count:b.state.autoStepCount})}else if(a.Go.isTextBoxVariable(b)){const f={text:b.state.value,value:b.state.value};y.push({...D,current:f,options:[{...f,selected:!0}],query:b.state.value})}else if(a.Go.isGroupByVariable(b)&&n.$.featureToggles.groupByVariable){const f=b.state.defaultValue?{value:b.state.defaultValue.value,text:b.state.defaultValue.text}:void 0;y.push({...D,datasource:b.state.datasource,options:b.state.defaultOptions?.map(C=>({text:C.text,value:String(C.value)})),current:{text:b.state.text,value:b.state.value},defaultValue:f,allowCustomValue:b.state.allowCustomValue})}else if(a.Go.isAdHocVariable(b))y.push({...D,datasource:b.state.datasource,allowCustomValue:b.state.allowCustomValue,baseFilters:b.state.baseFilters||[],filters:[...g(b.state.originFilters),...b.state.filters],defaultKeys:b.state.defaultKeys});else if(a.Go.isSwitchVariable(b))y.push({...D,current:{value:b.state.value,text:b.state.value},options:[{value:b.state.enabledValue,text:b.state.enabledValue},{value:b.state.disabledValue,text:b.state.disabledValue}]});else if(b.state.type!=="system")throw new Error("Unsupported variable type")}for(const b of y)b.hide===d.zL.dontHide&&delete b.hide,b.skipUrlSync||delete b.skipUrlSync,b.label===""&&delete b.label,b.multi||delete b.multi,b.sort===s.ZG.disabled&&delete b.sort;return y}function r(x){return x.options.map(m=>({value:String(m.value),text:m.label,selected:Array.isArray(x.value)?x.value.includes(m.value):x.value===m.value}))}function v(x,m,y){let b=[];for(const D of x.state.variables){const f={name:D.state.name,label:D.state.label,description:D.state.description??void 0,skipUrlSync:!!D.state.skipUrlSync,hide:(0,h.NB)(D.state.hide)||(0,o.SR)()},C={value:D.state.value,text:D.state.text};let P=[];if(a.Go.isQueryVariable(D)){((0,h.qJ)(D.state.refresh)==="never"||m)&&(P=r(D.state));const T=D.state.query;let M;const I=(0,p.AB)(x,D,"variable",void 0,y);typeof T!="string"?M={kind:"DataQuery",version:(0,o.iM)().version,group:I?.type??(0,p.lD)(T),...I?.uid&&{datasource:{name:I.uid}},spec:(0,p.c8)(T)}:M={kind:"DataQuery",version:(0,o.iM)().version,group:I?.type??(0,p.lD)(T),...I?.uid&&{datasource:{name:I.uid}},spec:{[h.sB]:T}};const B={kind:"QueryVariable",spec:{...f,current:C,options:P,query:M,definition:D.state.definition,sort:(0,h.LY)(D.state.sort),refresh:(0,h.qJ)(D.state.refresh),regex:D.state.regex,allValue:D.state.allValue,includeAll:D.state.includeAll||!1,multi:D.state.isMulti||!1,skipUrlSync:D.state.skipUrlSync||!1,allowCustomValue:D.state.allowCustomValue??!0,staticOptions:D.state.staticOptions?.map(U=>({text:U.label,value:String(U.value)})),staticOptionsOrder:D.state.staticOptionsOrder}};b.push(B)}else if(a.Go.isCustomVariable(D)){P=r(D.state);const T={kind:"CustomVariable",spec:{...f,current:C,options:P,query:D.state.query,multi:D.state.isMulti||!1,allValue:D.state.allValue,includeAll:D.state.includeAll??!1,allowCustomValue:D.state.allowCustomValue??!0}};b.push(T)}else if(a.Go.isDataSourceVariable(D)){const T={kind:"DatasourceVariable",spec:{...f,current:C,options:[],regex:D.state.regex,refresh:"onDashboardLoad",pluginId:D.state.pluginId,multi:D.state.isMulti||!1,includeAll:D.state.includeAll||!1,allowCustomValue:D.state.allowCustomValue??!0}};D.state.allValue!==void 0&&(T.spec.allValue=D.state.allValue),b.push(T)}else if(a.Go.isConstantVariable(D)){const T={kind:"ConstantVariable",spec:{...f,current:{...C,text:String(D.state.value)},query:D.state.value}};b.push(T)}else if(a.Go.isIntervalVariable(D)){const T=(0,i.bx)(D.state.intervals),M={kind:"IntervalVariable",spec:{...f,current:{...C,text:D.state.value},query:T,refresh:"onTimeRangeChanged",options:D.state.intervals.map(I=>({value:I,text:I,selected:I===D.state.value})),auto:D.state.autoEnabled,auto_min:D.state.autoMinInterval,auto_count:D.state.autoStepCount}};b.push(M)}else if(a.Go.isTextBoxVariable(D)){const T={text:D.state.value,value:D.state.value},M={kind:"TextVariable",spec:{...f,current:T,query:D.state.value}};b.push(M)}else if(a.Go.isGroupByVariable(D)&&n.$.featureToggles.groupByVariable){P=r(D.state);const T=D.state.defaultValue?{value:D.state.defaultValue.value,text:D.state.defaultValue.text}:void 0,M=(0,c.DG)(D.state.datasource,D.state.datasource?.type||(0,l.nV)().type),I={kind:"GroupByVariable",group:M.type,datasource:{name:M.uid},spec:{...f,options:D.state.defaultOptions?.map(B=>({text:B.text,value:String(B.value)}))||[],current:C,defaultValue:T,multi:D.state.isMulti||!1}};b.push(I)}else if(a.Go.isAdHocVariable(D)){const T=(0,c.DG)(D.state.datasource,D.state.datasource?.type||(0,l.nV)().type),M={kind:"AdhocVariable",group:T.type,datasource:{name:T.uid},spec:{...f,name:D.state.name,baseFilters:g(D.state.baseFilters)||[],filters:[...g(D.state.originFilters),...g(D.state.filters)],defaultKeys:D.state.defaultKeys||[],allowCustomValue:D.state.allowCustomValue??!0}};b.push(M)}else if(a.Go.isSwitchVariable(D)){const T={kind:"SwitchVariable",spec:{...f,current:D.state.value,enabledValue:D.state.enabledValue,disabledValue:D.state.disabledValue}};b.push(T)}else if(D.state.type!=="system")throw new Error("Unsupported variable type: "+D.state.type)}return b}function g(x){return x?.filter(m=>!m.origin||m.origin==="dashboard")||[]}function E(x){return x.state.type!=="system"}},84522:(ne,j,e)=>{"use strict";e.d(j,{J:()=>o});var n=e(74848),a=e(22803),s=e(76319),d=e(63142);const o=({onClick:i,"aria-label":c,style:p})=>{const h=(0,d.of)(l);return(0,n.jsx)(s.K,{"aria-label":c??"Close",className:h,name:"times",onClick:i,style:p})},l=i=>(0,a.css)({position:"absolute",margin:"0px",right:5,top:6})},84523:(ne,j,e)=>{"use strict";e.d(j,{BH:()=>W,IJ:()=>C,JG:()=>M,T6:()=>D,_u:()=>V,b0:()=>B,ir:()=>U});var n=e(2543),a=e.n(n),s=e(49954),d=e(43173),o=e(78282),l=e(58755),i=e(24619),c=e(67817),p=e(54),h=e(95443),u=e(52161),r=e(20437),v=e(29609),g=e(15629),E=e(6194);const x=(0,g.P8)(d.$.unifiedAlerting?.minInterval??"10s"),m=(0,g.P8)("1m"),y=1/0,b="0s",D=(0,g.an)((0,n.clamp)(x,m,y));function f(){const z=d.$.unifiedAlerting?.defaultRecordingRulesTargetDatasourceUID;if(z)try{const R=(0,o.l)().getInstanceSettings(z);if(R&&(0,u.Gb)(R))return z}catch{}}const C=z=>{const{canCreateGrafanaRules:R,canCreateCloudRules:O}=(0,p.Q9)(),N=(()=>{if(z===c.Z.grafanaRecording)return c.Z.grafanaRecording;if(R)return c.Z.grafana;if(O)return c.Z.cloudAlerting})();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:h.kl,dataSourceName:u.hY,type:N,group:"",folder:void 0,queries:[],recordingRulesQueries:[],condition:"",noDataState:i.Q8.NoData,execErrState:i.Q8.Error,evaluateFor:D,keepFiringFor:b,evaluateEvery:D,manualRouting:P(),contactPoints:{},overrideGrouping:!1,overrideTimings:!1,muteTimeIntervals:[],editorSettings:T(z),targetDatasourceUid:f(),namespace:"",expression:"",forTime:1,forTimeUnit:"m"})},P=()=>localStorage.getItem(r.Q8)!=="false";function T(z){if(z===c.Z.grafanaRecording||!(d.$.featureToggles.alertingQueryAndExpressionsStepMode??!1))return;const O=localStorage.getItem(r.Os),N=localStorage.getItem(r.Q8);return{simplifiedQueryEditor:O!=="false",simplifiedNotificationEditor:N!=="false"}}function M(z,R){let O;try{O=JSON.parse(z)}catch{return{...C(R),queries:(0,r.qO)()}}return(0,E.bx)((0,E.A2)((0,E.i_)({...C(R),...O,annotations:(0,E.JE)(O.annotations??[]),queries:O.queries??(0,r.qO)(),type:O.type??R??c.Z.grafana,evaluateEvery:D})))}const I=s.Ay$.looseObject({name:s.Ay$.string().optional(),type:s.Ay$.enum(c.Z).catch(c.Z.grafana),dataSourceName:s.Ay$.string().optional().default(""),group:s.Ay$.string().optional(),labels:s.Ay$.array(s.Ay$.object({key:s.Ay$.string(),value:s.Ay$.string()})).optional().default([]),annotations:s.Ay$.array(s.Ay$.object({key:s.Ay$.string(),value:s.Ay$.string()})).optional().default([]),queries:s.Ay$.array(s.Ay$.any()).optional(),condition:s.Ay$.string().optional(),noDataState:s.Ay$.enum(i.Q8).optional().default(i.Q8.NoData).catch(i.Q8.NoData),execErrState:s.Ay$.enum(i.Q8).optional().default(i.Q8.Error).catch(i.Q8.Error),folder:s.Ay$.union([s.Ay$.object({title:s.Ay$.string(),uid:s.Ay$.string()}),s.Ay$.undefined()]).optional(),evaluateEvery:s.Ay$.string().optional(),evaluateFor:s.Ay$.string().optional().default("0s"),keepFiringFor:s.Ay$.string().optional(),isPaused:s.Ay$.boolean().optional().default(!1),manualRouting:s.Ay$.boolean().optional(),contactPoints:s.Ay$.record(s.Ay$.string(),s.Ay$.object({selectedContactPoint:s.Ay$.string(),overrideGrouping:s.Ay$.boolean(),groupBy:s.Ay$.array(s.Ay$.string()),overrideTimings:s.Ay$.boolean(),groupWaitValue:s.Ay$.string(),groupIntervalValue:s.Ay$.string(),repeatIntervalValue:s.Ay$.string(),muteTimeIntervals:s.Ay$.array(s.Ay$.string()),activeTimeIntervals:s.Ay$.array(s.Ay$.string())})).optional(),editorSettings:s.Ay$.object({simplifiedQueryEditor:s.Ay$.boolean(),simplifiedNotificationEditor:s.Ay$.boolean()}).optional(),metric:s.Ay$.string().optional(),targetDatasourceUid:s.Ay$.string().optional(),namespace:s.Ay$.string().optional(),expression:s.Ay$.string().optional(),missingSeriesEvalsToResolve:s.Ay$.number().optional()});function B(z){let R;return z.type===c.Z.cloudAlerting?R=I.parse(z):R=l.EF.parse(z),(0,E.i_)({...C(z.type),...R})}function U(z){return(0,E.i_)((0,r.QX)(z))}function W(z){return{...C(z),condition:"C",queries:(0,r.qO)((0,v.pq)(z)),type:z,evaluateEvery:D}}function V(z=""){return z==="recording"?c.Z.cloudRecording:z==="grafana-recording"?c.Z.grafanaRecording:c.Z.grafana}},84600:(ne,j,e)=>{"use strict";e.d(j,{d:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(92745),l=e(63142),i=e(35484),c=e(30703),p=e(76319),h=e(20941),u=e(36219);const r=(0,s.memo)(({title:g,section:E,parent:x,pageIcon:m,onGoBack:y,children:b,titleHref:D,parentHref:f,leftItems:C,isFullscreen:P,className:T,"aria-label":M,buttonOverflowAlignment:I="right",forceShowLeftItems:B=!1})=>{const U=(0,l.of)(v),W=(0,a.cx)("page-toolbar",U.toolbar,{"page-toolbar--fullscreen":P,[U.noPageIcon]:!m},T),V=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:U.truncateText,children:g}),E&&(0,n.jsxs)("span",{className:U.pre,children:[" / ",E]})]}),z=(0,o.t)("grafana-ui.page-toolbar.go-back","Go back (Esc)"),R=(0,o.t)("grafana-ui.page-toolbar.search-parent-folder","Search dashboard in the {{parent}} folder",{parent:x}),O=(0,o.t)("grafana-ui.page-toolbar.search-dashboard-name","Search dashboard by name"),N=(0,o.t)("grafana-ui.page-toolbar.search-links","Search links");return(0,n.jsxs)("nav",{className:W,"aria-label":M,children:[(0,n.jsxs)("div",{className:U.leftWrapper,children:[m&&!y&&(0,n.jsx)("div",{className:U.pageIcon,children:(0,n.jsx)(c.I,{name:m,size:"lg","aria-hidden":!0})}),y&&(0,n.jsx)("div",{className:U.pageIcon,children:(0,n.jsx)(p.K,{name:"arrow-left",tooltip:z,tooltipPlacement:"bottom",size:"xxl","data-testid":d.Tp.components.BackButton.backArrow,onClick:y})}),(0,n.jsxs)("nav",{"aria-label":N,className:U.navElement,children:[x&&f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h.N,{"aria-label":R,className:(0,a.cx)(U.titleText,U.parentLink,U.titleLink,U.truncateText),href:f,children:[x," ",(0,n.jsx)("span",{className:U.parentIcon})]}),D&&(0,n.jsx)("span",{className:(0,a.cx)(U.titleText,U.titleDivider),"aria-hidden":!0,children:"/"})]}),(g||!!C?.length)&&(0,n.jsxs)("div",{className:U.titleWrapper,children:[g&&(0,n.jsx)("h1",{className:U.h1Styles,children:D?(0,n.jsx)(h.N,{"aria-label":O,className:(0,a.cx)(U.titleText,U.titleLink),href:D,children:V}):(0,n.jsx)("div",{className:U.titleText,children:V})}),C?.map((F,G)=>(0,n.jsx)("div",{className:(0,a.cx)(U.leftActionItem,{[U.forceShowLeftActionItems]:B}),children:F},G))]})]})]}),(0,n.jsx)(u.U,{alignment:I,children:s.Children.toArray(b).filter(Boolean)})]})});r.displayName="PageToolbar";const v=g=>{const{spacing:E,typography:x}=g,m=(0,i.getFocusStyles)(g);return{pre:(0,a.css)({whiteSpace:"pre"}),toolbar:(0,a.css)({alignItems:"center",background:g.colors.background.canvas,display:"flex",gap:g.spacing(2),justifyContent:"space-between",padding:g.spacing(1.5,2),[g.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,a.css)({[g.breakpoints.down("md")]:{paddingLeft:g.spacing(2)}}),leftWrapper:(0,a.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,a.css)({display:"none",[g.breakpoints.up("sm")]:{display:"flex",paddingRight:g.spacing(1),alignItems:"center"}}),truncateText:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,a.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,a.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,a.css)({margin:E(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,a.css)({marginLeft:g.spacing(.5)}),titleText:(0,a.css)({display:"flex",fontSize:x.size.lg,margin:0,borderRadius:g.shape.radius.default}),titleLink:(0,a.css)({"&:focus-visible":m}),titleDivider:(0,a.css)({padding:E(0,.5,0,.5),display:"none",[g.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,a.css)({display:"none",[g.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,a.css)({display:"none",alignItems:"center",paddingRight:E(.5),[g.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,a.css)({display:"flex"})}}},84691:(ne,j,e)=>{"use strict";e.d(j,{Bp:()=>m,SC:()=>P,UY:()=>x,Uj:()=>D,ip:()=>y,pR:()=>O,sw:()=>F});var n=e(2543),a=e.n(n),s=e(81160),d=e(41119),o=e(16515),l=e(28105),i=e(95004),c=e(12823),p=e(48233),h=e(46644),u=e(36638),r=e(57866),v=e(882),g=e(64761),E=e(1027),x=(G=>(G.ReduceRow="reduceRow",G.CumulativeFunctions="cumulativeFunctions",G.WindowFunctions="windowFunctions",G.BinaryOperation="binary",G.UnaryOperation="unary",G.Index="index",G))(x||{}),m=(G=>(G.Percentage="percentage",G.Fixed="fixed",G))(m||{}),y=(G=>(G.Trailing="trailing",G.Centered="centered",G))(y||{});const b={reducer:h.gy.sum},D={reducer:h.gy.mean,windowAlignment:"trailing",windowSizeMode:"percentage",windowSize:.1},f={left:{fixed:""},operator:c.k.Add,right:{fixed:""}},C={operator:p._.Abs,fieldName:""},P={id:g.F.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:h.gy.sum}},operator:(G,H)=>K=>{const w=G.mode??"reduceRow",Q=G.timeSeries!==!1,k=G.binary?.right,te=typeof k=="string"?k:typeof k=="object"?k.fixed:void 0,q=w==="binary"&&!Number.isNaN(Number(te)),re=Q&&!q?v.b.operator(null,H):E.W.operator({},H);return K.pipe(re,(0,s.T)(Y=>{let X;switch(w){case"reduceRow":X=V((0,n.defaults)(G.reduce,b),Y);break;case"cumulativeFunctions":X=W((0,n.defaults)(G.cumulative,b),Y);break;case"windowFunctions":X=T((0,n.defaults)(G.window,D),Y);break;case"unary":X=N((0,n.defaults)(G.unary,C),Y);break;case"binary":const _=[];Y.map(ae=>{ae.fields.map(le=>{_.push(le.name)})});const ee={left:O(G.binary?.left??"",_),operator:G.binary?.operator??f.operator,right:O(G.binary?.right??"",_)};if(G.binary=ee,ee.left?.matcher?.id&&ee.left?.matcher.id===r.Ct.byType){const ae=ee.left.matcher.options,le=c.b.getIfExists(ee.operator);return Y.map(ie=>{const{timeField:oe}=(0,d.KR)(ie),ue=[];let ye=!1;if(oe&&G.timeSeries!==!1&&ue.push(oe),ie.fields.map((fe,Ee)=>{if(!G.replaceFields&&!ue.includes(fe)&&ue.push(fe),fe.type===ae){const Ae=fe.values,Ge=z(ie,ee.right??f.right,Y,H);if(!Ae||!Ge||!le)return;const Fe=new Array(Ae.length);for(let Ve=0;Ve<Fe.length;Ve++)Fe[Ve]=le.operation(Ae[Ve],Ge[Ve]);const Pe={...fe,name:`${fe.name} ${G.binary?.operator??""} ${G.binary?.right.matcher?.options??G.binary?.right.fixed}`,values:Fe};delete Pe.state,ue.push(Pe),ye=!0}}),!(G.replaceFields&&!ye))return{...ie,fields:ue}}).filter(ie=>ie!=null)}else X=R((0,n.defaults)(ee,f),Y,H);break;case"index":return Y.map(ae=>{const le=[...Array(ae.length).keys()];if(G.index?.asPercentile)for(let ie=0;ie<le.length;ie++)le[ie]=le[ie]/le.length;const L={name:G.alias??"Row",type:i.PU.number,values:le,config:G.index?.asPercentile?{unit:"percentunit"}:{}};return{...ae,fields:G.replaceFields?[L]:[...ae.fields,L]}})}return X?Y.map(_=>{const ee=X(_);if(!ee)return G.replaceFields?void 0:_;const ae={name:F(G),type:i.PU.number,config:{},values:ee};G.alias?.length&&(ae.config.displayName=G.alias);let le=[];if(G.replaceFields){const{timeField:L}=(0,d.KR)(_);L&&G.timeSeries!==!1?le=[L,ae]:le=[ae]}else le=[..._.fields,ae];return{..._,fields:le}}).filter(_=>_!=null):Y}))}};function T(G,H){if(G.windowSize<=0)throw new Error("Add field from calculation transformation - Window size must be larger than 0");let K=(0,u.NS)({id:r.Ct.numeric});return G.field&&(K=(0,u.NS)({id:r.Ct.byNames,options:{names:[G.field]}})),w=>{const Q=Math.ceil(G.windowSize*(G.windowSizeMode==="percentage"?w.length:1));let k=null;for(const te of w.fields)if(K(te,w,H)){k=te;break}if(k){if(![h.gy.mean,h.gy.stdDev,h.gy.variance].includes(G.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${G.reducer}`);return G.windowAlignment==="centered"?I(w,G.reducer,k,Q):M(w,G.reducer,k,Q)}}}function M(G,H,K,w){const Q=[];let k=0,te=0;for(let q=0;q<G.length;q++)if(H===h.gy.mean){const se=K.values[q];if(se!=null&&(te++,k+=se,q>w-1)){const re=K.values[q-w];re!=null&&(k-=re,te--)}Q.push(te===0?0:k/te)}else if(H===h.gy.variance){const se=Math.max(0,q-w+1),re=q+1;Q.push(B(K.values.slice(se,re)))}else if(H===h.gy.stdDev){const se=Math.max(0,q-w+1),re=q+1;Q.push(U(K.values.slice(se,re)))}return Q}function I(G,H,K,w){const Q=[];let k=0,te=0;const q=Math.ceil(w/2)-1,se=Math.floor(w/2);for(let re=0;re<G.length;re++){const Y=re-se,X=re+q;if(H===h.gy.mean){if(re===0)for(let J=0;J<q+1&&J<K.values.length;J++)K.values[J]!=null&&(k+=K.values[J],te++);else X<K.values.length&&K.values[X]!=null&&(k+=K.values[X],te++),Y>0&&K.values[Y-1]!=null&&(k-=K.values[Y-1],te--);Q.push(te===0?0:k/te)}else if(H===h.gy.variance){const J=K.values.slice(Math.max(0,Y),Math.min(X+1,K.values.length));Q.push(B(J))}else if(H===h.gy.stdDev){const J=K.values.slice(Math.max(0,Y),Math.min(X+1,K.values.length));Q.push(U(J))}}return Q}function B(G){if(G.length<1)return 0;let H=0,K=0,w=0;for(let k=0;k<G.length;k++){const te=G[k];if(te!=null){w++;let q=K;K+=(te-q)/w,H+=(te-q)*(te-K)}}return w===0?0:H/w}function U(G){return Math.sqrt(B(G))}function W(G,H){let K=(0,u.NS)({id:r.Ct.numeric});if(G.field&&(K=(0,u.NS)({id:r.Ct.byNames,options:{names:[G.field]}})),![h.gy.mean,h.gy.sum].includes(G.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${G.reducer}`);return w=>{let Q=null;for(const q of w.fields)if(K(q,w,H)){Q=q;break}if(!Q)return;const k=[];let te=0;for(let q=0;q<w.length;q++)te+=Q.values[q]??0,G.reducer===h.gy.sum?k.push(te):G.reducer===h.gy.mean&&k.push(te/(q+1));return k}}function V(G,H){let K=(0,u.NS)({id:r.Ct.numeric});G.include&&G.include.length&&(K=(0,u.NS)({id:r.Ct.byNames,options:{names:G.include}}));const w=h.AS.get(G.reducer);if(!w)throw new Error(`Unknown reducer: ${G.reducer}`);const Q=w.reduce??h.H3,k=G.nullValueMode===l.UW.Ignore,te=G.nullValueMode===l.UW.AsZero;return q=>{const se=[];for(const J of q.fields)K(J,q,H)&&se.push(J.values);const re=se.length,Y={name:"temp",values:new Array(re),type:i.PU.number,config:{}},X=[];for(let J=0;J<q.length;J++){for(let _=0;_<re;_++)Y.values[_]=se[_][J];X.push(Q(Y,k,te)[G.reducer])}return X}}function z(G,H,K,w){if(!H)return;if(H.matcher&&H.matcher.id===r.Ct.byName){const k=H.matcher.options??"";for(const te of G.fields)if(k===(0,o.Ct)(te,G,K))return te.type===i.PU.boolean?te.values.map(q=>q?1:0):te.values}const Q=parseFloat(H.fixed??H.matcher?.options??"");if(!isNaN(Q))return new Array(G.length).fill(Q)}function R(G,H,K){const w=c.b.getIfExists(G.operator);return Q=>{const k=z(Q,G.left,H,K),te=z(Q,G.right,H,K);if(!k||!te||!w)return;const q=new Array(k.length);for(let se=0;se<q.length;se++)q[se]=w.operation(k[se],te[se]);return q}}function O(G,H){return typeof G=="string"?isNaN(Number(G))?{matcher:{id:r.Ct.byName,options:G}}:H.includes(G)?{matcher:{id:r.Ct.byName,options:G}}:{fixed:G}:G}function N(G,H){const K=p.j.getIfExists(G.operator);return w=>{let Q=[];for(const q of w.fields)G.fieldName===(0,o.Ct)(q,w,H)&&q.type===i.PU.number&&(Q=q.values);if(!Q.length||!K)return;const k=new Array(Q.length);let te=0;if(G.operator===p._.Percent)for(let q=0;q<Q.length;q++)Number.isFinite(Q[q])&&(te+=Q[q]);for(let q=0;q<k.length;q++)k[q]=K.operation(Q[q],te);return k}}function F(G){if(G.alias?.length)return G.alias;switch(G.mode){case"cumulativeFunctions":{const{cumulative:H}=G;return`cumulative ${H?.reducer??""}${H?.field?`(${H.field})`:""}`}case"windowFunctions":{const{window:H}=G;return`${H?.windowAlignment??""} moving ${H?.reducer??""}${H?.field?`(${H.field})`:""}`}case"unary":{const{unary:H}=G;return`${H?.operator??""}${H?.fieldName?`(${H.fieldName})`:""}`}case"binary":{const{binary:H}=G,K=H?.left?.matcher?.options??H?.left?.fixed??"",w=H?.right?.matcher?.options??H?.right?.fixed??"";if(/\$/.test(K)||/\$/.test(w))return"";const Q=H?.operator??c.k.Add;return K&&w?`${K} ${Q} ${w}`:""}case"reduceRow":{const H=h.AS.getIfExists(G.reduce?.reducer);if(H)return H.name}break;case"index":return"Row"}return"math"}},85032:(ne,j,e)=>{"use strict";e.d(j,{A:()=>i});var n=e(74848),a=e(22803),s=e(30703),d=e(37658),o=e(8073),l=e(63142);function i({ds:p,onClick:h,selected:u,description:r,isFavorite:v=!1,onToggleFavorite:g,...E}){const x=(0,l.$j)(),m=c(x,p.meta.builtIn);return(0,n.jsxs)(o.Z,{noMargin:!0,onClick:h,className:(0,a.cx)(m.card,u?m.selected:void 0),...E,children:[(0,n.jsx)(o.Z.Heading,{className:m.heading,children:(0,n.jsxs)("div",{className:m.headingContent,children:[(0,n.jsxs)("span",{className:m.name,children:[p.name," ",p.isDefault?(0,n.jsx)(d.L,{tags:["default"]}):null]}),(0,n.jsxs)("div",{className:m.rightSection,children:[(0,n.jsx)("small",{className:m.type,children:r||p.meta.name}),g&&!p.meta.builtIn&&(0,n.jsx)(s.I,{name:v?"favorite":"star",onClick:y=>{y.stopPropagation(),g(p)},className:m.favoriteButton})]})]})}),(0,n.jsx)(o.Z.Figure,{className:m.logo,children:(0,n.jsx)("img",{src:p.meta.info.logos.small,alt:`${p.meta.name} Logo`})})]},p.uid)}function c(p,h=!1){return{card:(0,a.css)({cursor:"pointer",backgroundColor:"transparent",padding:p.spacing(1),"&:hover":{backgroundColor:p.colors.action.hover}}),heading:(0,a.css)({width:"100%",overflow:"hidden","> button":{width:"100%"}}),headingContent:(0,a.css)({color:p.colors.text.secondary,width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",justifyContent:"space-between",columnGap:p.spacing(1),alignItems:"center",[p.breakpoints.down("sm")]:{display:"grid",gridTemplateColumns:"1fr",gridTemplateRows:"repeat(2, 1fr)"}}),rightSection:(0,a.css)({display:"flex",alignItems:"center",gap:p.spacing(1),minWidth:0,flex:1,justifyContent:"flex-end",overflow:"hidden",textOverflow:"ellipsis",[p.breakpoints.down("sm")]:{justifyContent:"flex-start"}}),logo:(0,a.css)({width:"32px",height:"32px",padding:p.spacing(0,1),display:"flex",alignItems:"center","> img":{maxHeight:"100%",minWidth:"24px",filter:`invert(${h&&p.isLight?1:0})`}}),name:(0,a.css)({color:p.colors.text.primary,display:"flex",gap:p.spacing(2)}),type:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center"}),favoriteButton:(0,a.css)({flexShrink:0,pointerEvents:"auto",zIndex:1}),separator:(0,a.css)({margin:p.spacing(0,1),color:p.colors.border.weak}),selected:(0,a.css)({background:p.colors.action.selected,"&::before":{backgroundImage:p.colors.gradients.brandVertical,borderRadius:p.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",width:p.spacing(.5),left:0}}),meta:(0,a.css)({display:"block",overflowWrap:"unset",whiteSpace:"nowrap",width:"100%",overflow:"hidden",textOverflow:"ellipsis"})}}},85053:(ne,j,e)=>{"use strict";e.d(j,{w:()=>d});var n=e(74848),a=e(96540),s=e(19753);const d=({value:o,onChange:l,item:i,id:c})=>{const{settings:p}=i,h=(0,a.useCallback)(u=>{l(p?.integer&&u!==void 0?Math.floor(u):u)},[l,p?.integer]);return(0,n.jsx)(s.Q,{id:c,value:o,min:p?.min,max:p?.max,step:p?.step,placeholder:p?.placeholder,onChange:h})}},85311:(ne,j,e)=>{"use strict";e.d(j,{A:()=>o});var n=e(74848),a=e(92745),s=e(34999);const o=()=>(0,n.jsx)(s.F,{severity:"info",title:(0,a.t)("alerting.alert.evaluation-paused","Alert evaluation currently paused"),children:(0,n.jsx)(a.x6,{i18nKey:"alerting.alert.evaluation-paused-description",children:"Notifications for this rule will not fire and no alert instances will be created until the rule is un-paused."})})},85343:(ne,j,e)=>{"use strict";e.d(j,{L:()=>l});var n=e(74848),a=e(22803),s=e(28105),d=e(44248),o=e(63142);function l({layer:c,inMenu:p}){const h=`data-layer-${c.state.key}`,{data:u,isHidden:r}=c.useState(),v=!!(u&&u.state===s.Gu.Loading),g=(0,o.of)(i);return r?null:p?(0,n.jsxs)("div",{className:g.menuContainer,children:[(0,n.jsx)("div",{className:g.controlWrapper,children:(0,n.jsx)(c.Component,{model:c})}),(0,n.jsx)(d.Zx,{htmlFor:h,isLoading:v,onCancel:()=>c.cancelQuery?.(),label:c.state.name,description:c.state.description,error:c.state.data?.errors?.[0].message,layout:"vertical",className:g.menuLabel})]}):(0,n.jsxs)("div",{className:g.container,children:[(0,n.jsx)(d.Zx,{htmlFor:h,isLoading:v,onCancel:()=>c.cancelQuery?.(),label:c.state.name,description:c.state.description,error:c.state.data?.errors?.[0].message}),(0,n.jsx)(c.Component,{model:c})]})}const i=c=>({container:(0,a.css)({display:"flex"}),menuContainer:(0,a.css)({display:"flex",alignItems:"center",gap:c.spacing(1)}),controlWrapper:(0,a.css)({"& > div":{border:"none",background:"transparent","&:hover":{border:"none",background:"transparent"}}}),menuLabel:(0,a.css)({marginTop:c.spacing(.5)})})},85348:(ne,j,e)=>{"use strict";e.d(j,{u:()=>E});var n=e(74848),a=e(22803),s=e(89332),d=e(96540),o=e(22589),l=e(27489),i=e(63142),c=e(44019),p=e(92745),h=e(76319),u=e(41654),r=e(30703);const v=({actionsElement:m,disabled:y,draggable:b,collapsable:D=!0,dragHandleProps:f,headerElement:C,isContentVisible:P,onRowToggle:T,reportDragMousePosition:M,title:I,id:B,expanderMessages:U})=>{const W=(0,i.of)(g);let V=P?(0,p.t)("query-operation.header.collapse-row","Collapse query row"):(0,p.t)("query-operation.header.expand-row","Expand query row");U!==void 0&&P?V=U.close:U!==void 0&&(V=U?.open);const z=(0,p.t)("query-operation.header.drag-and-drop","Drag and drop to reorder");return(0,n.jsxs)("div",{className:W.header,children:[(0,n.jsxs)("div",{className:W.column,children:[D&&(0,n.jsx)(h.K,{name:P?"angle-down":"angle-right",tooltip:V,className:W.collapseIcon,onClick:T,"aria-expanded":P,"aria-controls":B}),I&&(0,n.jsx)("div",{className:W.titleWrapper,onClick:T,children:(0,n.jsx)("div",{className:(0,a.cx)(W.title,y&&W.disabled),children:I})}),C]}),(0,n.jsxs)(u.B,{gap:1,alignItems:"center",children:[m,b&&(0,n.jsx)("div",{onMouseMove:M,...f,children:(0,n.jsx)(r.I,{title:z,name:"draggabledots",size:"lg",className:W.dragIcon})})]})]})},g=m=>({header:(0,a.css)({label:"Header",padding:m.spacing(.5,.5),borderRadius:m.shape.radius.default,background:m.colors.background.secondary,minHeight:m.spacing(4),display:"grid",gridTemplateColumns:"minmax(100px, max-content) min-content",alignItems:"center",justifyContent:"space-between",whiteSpace:"nowrap","&:focus":{outline:"none"}}),column:(0,a.css)({label:"Column",display:"flex",alignItems:"center",overflow:"hidden"}),dragIcon:(0,a.css)({cursor:"grab",color:m.colors.text.disabled,margin:m.spacing(0,.5),"&:hover":{color:m.colors.text.primary}}),collapseIcon:(0,a.css)({marginLeft:m.spacing(.5),color:m.colors.text.disabled}),titleWrapper:(0,a.css)({display:"flex",alignItems:"center",flexGrow:1,cursor:"pointer",overflow:"hidden",marginRight:m.spacing(.5)}),title:(0,a.css)({fontWeight:m.typography.fontWeightBold,color:m.colors.text.link,marginLeft:m.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),disabled:(0,a.css)({color:m.colors.text.disabled})});v.displayName="QueryOperationRowHeader";function E({children:m,actions:y,title:b,headerElement:D,onClose:f,onOpen:C,isOpen:P,disabled:T,draggable:M,collapsable:I,index:B,id:U,expanderMessages:W}){const[V,z]=(0,d.useState)(P!==void 0?P:!0),R=(0,i.of)(x),O=(0,d.useCallback)(()=>{z(!V)},[V,z]);(0,d.useEffect)(()=>{typeof P=="boolean"&&z(P)},[P]);const N=(0,d.useCallback)(K=>{if(K.defaultPrevented){const w=K.currentTarget.getBoundingClientRect(),Q=K.clientX-w.left,k=K.clientY-w.top;(0,l.rR)("query_row_reorder_drag_position",{x:Q/w.width,y:k/w.height,width:w.width,height:w.height})}},[]);(0,o.A)(()=>{V?C&&C():f&&f()},[V]);const F={isOpen:V,onOpen:()=>{z(!0)},onClose:()=>{z(!1)}},G=y&&c.renderOrCallToRender(y,F),H=D&&c.renderOrCallToRender(D,F);return M?(0,n.jsx)(s.sx,{draggableId:U,index:B,children:K=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{ref:K.innerRef,className:R.wrapper,...K.draggableProps,children:[(0,n.jsx)("div",{children:(0,n.jsx)(v,{id:U,actionsElement:G,disabled:T,draggable:!0,collapsable:I,dragHandleProps:K.dragHandleProps,headerElement:H,isContentVisible:V,onRowToggle:O,reportDragMousePosition:N,title:b,expanderMessages:W})}),V&&(0,n.jsx)("div",{className:R.content,children:m})]})})}):(0,n.jsxs)("div",{className:R.wrapper,children:[(0,n.jsx)(v,{id:U,actionsElement:G,disabled:T,draggable:!1,collapsable:I,headerElement:H,isContentVisible:V,onRowToggle:O,reportDragMousePosition:N,title:b,expanderMessages:W}),V&&(0,n.jsx)("div",{className:R.content,children:m})]})}const x=m=>({wrapper:(0,a.css)({marginBottom:m.spacing(2)}),content:(0,a.css)({marginTop:m.spacing(.5),marginLeft:m.spacing(3)})});E.displayName="QueryOperationRow"},85594:(ne,j,e)=>{"use strict";e.d(j,{VT:()=>s,qR:()=>a});var n=e(16608);const a=n.qR.enhanceEndpoints({addTagTypes:["dashboardStars"],endpoints:{starDashboardByUid:{invalidatesTags:["dashboardStars"]},unstarDashboardByUid:{invalidatesTags:["dashboardStars"]}}}).injectEndpoints({endpoints:d=>({getStars:d.query({query:()=>({url:"/user/stars"}),providesTags:["dashboardStars"]})})}),{useGetStarsQuery:s}=a},85618:(ne,j,e)=>{"use strict";e.d(j,{Ge:()=>n.Ge,H4:()=>d,PE:()=>o,TP:()=>n.TP});var n=e(59553),a=e(6890),s=e(64762);const d=(l,i,c)=>{const p=(0,n.cQ)(l);i((0,a.dx)((0,s.gi)(c,p)))};function o(l){if(l&&typeof l=="object"){if("data"in l&&l.data&&typeof l.data=="object"&&"message"in l.data)return String(l.data.message);if("message"in l)return String(l.message)}return String(l)}},85622:(ne,j,e)=>{"use strict";e.d(j,{p:()=>o});var n=e(74848),a=e(11594),s=e(92745),d=e(99887);const o=i=>{const c=l(i.state);return c?(0,n.jsx)(d.E,{className:i.className,color:c.color,title:typeof c.tooltip=="string"?c.tooltip:void 0,tooltip:typeof c.tooltip!="string"?c.tooltip:void 0,text:c.text,icon:c.icon}):null};function l(i){switch(i){case a.pn.deprecated:return{text:(0,s.t)("plugins.get-feature-state-info.text.deprecated","Deprecated"),color:"red",tooltip:"This feature is deprecated and will be removed in a future release"};case a.pn.alpha:return{text:(0,s.t)("plugins.get-feature-state-info.text.alpha","Alpha"),color:"blue",tooltip:"This feature is experimental and future updates might not be backward compatible"};case a.pn.beta:return{text:(0,s.t)("plugins.get-feature-state-info.text.beta","Beta"),color:"blue",tooltip:"This feature is close to complete but not fully tested"};default:return null}}},85835:(ne,j,e)=>{"use strict";e.d(j,{h:()=>d});var n=e(2543),a=e.n(n),s=e(61371);function d(o,l,i=n.identity){const c=i(o),p=i(l),h=(0,s.G4)(c,p),u=(0,n.chain)(h).values().flatMap().filter(v=>v.op==="add"||v.op==="replace"||v.op==="move").sumBy(v=>v.endLineNumber-v.startLineNumber+1).value(),r=(0,n.chain)(h).values().flatMap().filter(v=>v.op==="remove"||v.op==="replace").sumBy(v=>v.endLineNumber-v.startLineNumber+1).value();return{added:u,removed:r}}},85891:(ne,j,e)=>{"use strict";e.d(j,{DO:()=>s,Ur:()=>o,VR:()=>a,X2:()=>n,ki:()=>d,mx:()=>l});var n=(i=>(i.Fetch="fetch",i.Infinity="infinity",i))(n||{}),a=(i=>(i.String="string",i))(a||{}),s=(i=>(i.POST="POST",i.PUT="PUT",i.GET="GET",i.DELETE="DELETE",i.PATCH="PATCH",i))(s||{});const d=[{label:"POST",value:"POST"},{label:"GET",value:"GET"}],o=[{label:"application/json",value:"application/json"},{label:"text/plain",value:"text/plain"},{label:"application/xml",value:"application/xml"},{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}],l={type:"fetch",title:"",fetch:{url:"",method:"POST",body:"{}",queryParams:[],headers:[["Content-Type","application/json"]]}}},86059:(ne,j,e)=>{"use strict";e.d(j,{k:()=>n});const n=(a,s)=>{let d;if(a.getLinks&&(d=a.getLinks({valueRowIndex:s.index})),!!d){for(let o=0;o<d?.length;o++)if(d[o].onClick){const l=d[o].onClick;d[o].onClick=i=>{i.ctrlKey||i.metaKey||i.shiftKey||(i.preventDefault(),l(i,{field:a,rowIndex:s.index}))}}return d.filter(o=>o.href||o.onClick!=null)}}},86292:(ne,j,e)=>{"use strict";e.d(j,{H:()=>v});var n=e(74848),a=e(44248),s=e(6048),d=e(22803),o=e(92745),l=e(63142),i=e(45967),c=e(30703);const p=()=>{const g=(0,l.of)(h);return(0,n.jsx)("div",{className:g.container,children:(0,n.jsx)(i.m,{content:(0,o.t)("dashboard.conditional-rendering.overlay.tooltip","Element is hidden by show/hide rules."),children:(0,n.jsx)(c.I,{name:"eye-slash"})})})},h=g=>({container:(0,d.css)({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%",height:"100%",bottom:0,right:0,zIndex:1,[g.transitions.handleMotion("no-preference","reduce")]:{transition:"all 0.2s ease"},"&:before":(0,d.css)({content:'""',opacity:.6,position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:g.colors.background.canvas,pointerEvents:"none"}),"& > svg":(0,d.css)({height:"48px",width:"48px",maxWidth:"75%",maxHeight:"75%"}),".dashboard-visible-hidden-element:hover > &":(0,d.css)({width:"30px",height:"30px",top:"unset",left:"unset",right:0,bottom:0})})});let u;function r(){return u||(u=s.M.createEmpty()),u}function v(g){const E="conditionalRendering"in g.state&&g.state.conditionalRendering instanceof s.M?g.state.conditionalRendering:r(),{result:x,renderHidden:m}=(0,a.gn)(E,{shouldActivateOrKeepAlive:!0});return[!x,x?void 0:"dashboard-visible-hidden-element",x?null:(0,n.jsx)(p,{}),m]}},86678:(ne,j,e)=>{"use strict";e.d(j,{H:()=>o});var n=e(74848),a=e(75683),s=e(13791),d=e(1506);function o(){return(0,n.jsx)(s.Y,{navId:"home",layout:a.k.Canvas,pageNav:{text:"Page not found"},children:(0,n.jsx)(d.L,{entity:"Page"})})}},86791:(ne,j,e)=>{"use strict";e.d(j,{$7:()=>d,SA:()=>a,l$:()=>o});var n=e(24619);function a(l,i){return(0,n.lh)(l.state)===i}var s=(l=>(l.Firing="firing",l))(s||{}),d=(l=>(l.Alerting="alerting",l.Pending="pending",l.Recovering="recovering",l.Normal="inactive",l.NoData="nodata",l.Error="error",l))(d||{});const o=Symbol("grafana")},86871:(ne,j,e)=>{"use strict";e.d(j,{G:()=>a,q:()=>n});const n={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},a={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"}},86967:(ne,j,e)=>{"use strict";e.d(j,{DO:()=>d,en:()=>n,gR:()=>a,xp:()=>s});var n=(p=>(p.Center="center",p.Left="left",p.LeftRight="leftright",p.Right="right",p.Scale="scale",p))(n||{}),a=(p=>(p.Bottom="bottom",p.Center="center",p.Scale="scale",p.Top="top",p.TopBottom="topbottom",p))(a||{}),s=(p=>(p.Contain="contain",p.Cover="cover",p.Fill="fill",p.Original="original",p.Tile="tile",p))(s||{}),d=(p=>(p.GET="GET",p.POST="POST",p.PUT="PUT",p))(d||{}),o=(p=>(p.Straight="straight",p))(o||{});const l={vertices:[]},i={connections:[]},c={inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0,zoomToContent:!0}},87033:(ne,j,e)=>{"use strict";e.d(j,{b:()=>h});var n=e(62467),a=e(81160),s=e(69862),d=e(17548),o=e(1906),l=e(71393),i=e(90696);let c=100;function p(){return"AQ"+c++}function h(u,r,v){const g={...i.CU,...r.annotations},E={...g.getDefaultQuery?.(),...v},x=g.prepareAnnotation(E);if(!x)return(0,n.of)({});const m=g.prepareQuery(x);if(!m)return(0,n.of)({});const y=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=d.calculateInterval(u.range,y,r.interval),D={__interval:{text:b.interval,value:b.interval},__interval_ms:{text:b.intervalMs.toString(),value:b.intervalMs},__annotation:{text:x.name,value:x}},f={startTime:Date.now(),requestId:p(),range:u.range,maxDataPoints:y,scopedVars:D,...b,app:o.Jk.Dashboard,timezone:u.dashboard.timezone,targets:[{...m,refId:"Anno"}]};return(0,l.BN)(r,f).pipe((0,s.Z)(C=>{const P=C?.series.length?C.series:C.annotations;return P?.length?g.processEvents(x,P).pipe((0,a.T)(T=>({panelData:C,events:T}))):(0,n.of)({panelData:C,events:[]})}))}},87039:(ne,j,e)=>{"use strict";e.d(j,{FM:()=>g,nE:()=>r});var n=e(16515),a=e(36638),s=e(57866),d=e(95004),o=e(92745),l=e(739),i=e(98643),c=e(46189);function p(E){return x=>{for(const m of x.fields)if(E(m,x,[]))return m}}function h(E){return x=>{for(const m of x.fields){if(E.has(m.name.toLowerCase()))return m;const y=(0,n.Ct)(m,x);if(E.has(y))return m}}}const u={mode:l.aG.Auto,geohash:h(new Set(["geohash"])),latitude:h(new Set(["latitude","lat"])),longitude:h(new Set(["longitude","lon","lng"])),h3:h(new Set(["h3"])),wkt:h(new Set(["wkt"])),lookup:h(new Set(["lookup"])),geo:E=>E.fields.find(x=>x.type===d.PU.geo)};async function r(E){const x={...u,mode:E?.mode??l.aG.Auto};switch(x.gazetteer=await(0,c.q3)(E?.gazetteer),x.mode){case l.aG.Geohash:E?.geohash?x.geohash=p((0,a.NS)({id:s.Ct.byName,options:E.geohash})):x.geohash=()=>{};break;case l.aG.Lookup:const m=E?.lookup?.length?(0,a.NS)({id:s.Ct.byName,options:E.lookup}):(0,a.NS)({id:s.Ct.byType,options:d.PU.string});x.lookup=p(m);break;case l.aG.Coords:E?.latitude?x.latitude=p((0,a.NS)({id:s.Ct.byName,options:E.latitude})):x.latitude=()=>{},E?.longitude?x.longitude=p((0,a.NS)({id:s.Ct.byName,options:E.longitude})):x.longitude=()=>{};break}return x}function v(E,x){const m={mode:x.mode??l.aG.Auto};if(m.mode===l.aG.Auto){if(m.geo=x.geo(E),m.geo)return m;if(m.latitude=x.latitude(E),m.longitude=x.longitude(E),m.latitude&&m.longitude)return m.mode=l.aG.Coords,m;if(m.geohash=x.geohash(E),m.geohash)return m.mode=l.aG.Geohash,m;if(m.lookup=x.lookup(E),m.lookup)return m.mode=l.aG.Lookup,m}switch(m.mode){case l.aG.Coords:m.latitude=x.latitude(E),m.longitude=x.longitude(E);break;case l.aG.Geohash:m.geohash=x.geohash(E);break;case l.aG.Lookup:m.lookup=x.lookup(E);break}return m}function g(E,x){const m=v(E,x);switch(m.mode){case l.aG.Auto:return m.geo?{field:m.geo}:{warning:(0,o.t)("geo.get-geometry-field.warning-unable-to-find","Unable to find location fields")};case l.aG.Coords:return m.latitude&&m.longitude?{field:(0,i.Pz)(m.longitude,m.latitude),derived:!0,description:`${m.mode}: ${m.latitude.name}, ${m.longitude.name}`}:{warning:(0,o.t)("geo.get-geometry-field.warning-select-lat-long","Select latitude/longitude fields")};case l.aG.Geohash:return m.geohash?{field:(0,i.qy)(m.geohash),derived:!0,description:`${m.mode}`}:{warning:(0,o.t)("geo.get-geometry-field.warning-select-geohash","Select geohash field")};case l.aG.Lookup:return m.lookup?x.gazetteer?{field:(0,i.Dc)(x.gazetteer,m.lookup),derived:!0,description:`${m.mode}: ${x.gazetteer.path}`}:{warning:(0,o.t)("geo.get-geometry-field.warning-gazetteer-not-found","Gazetteer not found")}:{warning:(0,o.t)("geo.get-geometry-field.warning-select-lookup","Select lookup field")}}return{warning:(0,o.t)("geo.get-geometry-field.warning-no-geometry","unable to find geometry")}}},87063:(ne,j,e)=>{"use strict";e.d(j,{W:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(31286),l=e(25460),i=e(30930),c=e(94535),p=e(92132);const h=s.forwardRef(({header:g,children:E,ariaLabel:x,onOpen:m,onClose:y,onKeyDown:b,...D},f)=>{const C=(0,d.of)(v),P=r(),T=(0,s.useRef)(null);(0,s.useImperativeHandle)(f,()=>T.current);const[M]=(0,p.t)({isMenuOpen:!0,localRef:T,onOpen:m,onClose:y,onKeyDown:b});return(0,n.jsxs)(o.a,{...D,"aria-label":x,backgroundColor:"elevated",borderRadius:P.borderRadius,boxShadow:"z3",display:"inline-block",onKeyDown:M,padding:P.padding,ref:T,role:"menu",tabIndex:-1,children:[g&&(0,n.jsx)("div",{className:(0,a.cx)(C.header,!!E&&s.Children.toArray(E).length>0&&C.headerBorder),children:g}),E]})});h.displayName="Menu";const u=Object.assign(h,{Item:c.D,Divider:l.N,Group:i.r}),r=()=>(0,d.of)(g=>{const{components:{menu:E}}=g;return{padding:E.padding,borderRadius:E.borderRadius}}),v=g=>({header:(0,a.css)({padding:g.spacing(.5,.5,1,.5)}),headerBorder:(0,a.css)({borderBottom:`1px solid ${g.colors.border.weak}`,marginBottom:g.spacing(.5)})})},87105:(ne,j,e)=>{"use strict";e.d(j,{f:()=>l});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(3343);const l=(0,s.forwardRef)(({invalid:c,className:p,...h},u)=>{const r=(0,d.of)(i,c);return(0,n.jsx)("textarea",{...h,className:(0,a.cx)(r.textarea,p),ref:u})}),i=(c,p=!1)=>({textarea:(0,a.cx)((0,o.Xb)(c),(0,o.gm)(c),(0,a.css)({display:"block",borderRadius:c.shape.radius.default,padding:`${c.spacing.gridSize/4}px ${c.spacing.gridSize}px`,width:"100%",borderColor:p?c.colors.error.border:c.components.input.borderColor}))});l.displayName="TextArea"},87186:(ne,j,e)=>{"use strict";e.d(j,{xN:()=>C,Ay:()=>P,cT:()=>f,wn:()=>b,t$:()=>D});var n={};e.r(n),e.d(n,{clearFolders:()=>r,fetchNextChildrenPageFulfilled:()=>c,refetchChildrenFulfilled:()=>i,setAllSelection:()=>u,setFolderOpenState:()=>p,setItemSelectionState:()=>h});var a=e(65307),s=e(44220),d=e(99090),o=e(62963),l=e(78034);function i(T,M){const{children:I,page:B,kind:U,lastPageOfKind:W}=M.payload,{parentUID:V}=M.meta.arg,z={items:I,lastFetchedKind:U,lastFetchedPage:B,lastKindHasMoreItems:!W,isFullyLoaded:U==="dashboard"&&W};V&&V!==d.TF?T.childrenByParentUID[V]=z:T.rootItems=z}function c(T,M){const I=M.payload;if(!I)return;const{children:B,page:U,kind:W,lastPageOfKind:V}=I,{parentUID:z,excludeKinds:R=[]}=M.meta.arg,F={items:((z?T.childrenByParentUID[z]:T.rootItems)?.items??[]).concat(B),lastFetchedKind:W,lastFetchedPage:U,lastKindHasMoreItems:!V,isFullyLoaded:(R.includes("dashboard")||W==="dashboard")&&V};if(!z){T.rootItems=F;return}if(T.childrenByParentUID[z]=F,T.selectedItems.folder[z])for(const H of B)T.selectedItems[H.kind][H.uid]=!0}function p(T,M){const{folderUID:I,isOpen:B}=M.payload;T.openFolders[I]=B}function h(T,M){const{item:I,isSelected:B}=M.payload;if((0,o.I2)(I.uid))return;function U(W,V){if(T.selectedItems[W][V]=B,W!=="folder")return;let z=T.childrenByParentUID[V];for(const R of z?.items??[])U(R.kind,R.uid)}if(U(I.kind,I.uid),!B){let W=I.parentUID;for(;W;){const V=(0,l.R)(T.rootItems?.items??[],T.childrenByParentUID,W);if(!V)break;T.selectedItems[V.kind][V.uid]=!1,W=V.parentUID}}T.selectedItems.$all=T.rootItems?.items?.every(W=>T.selectedItems[W.kind][W.uid])??!1}function u(T,M){const{isSelected:I,folderUID:B,excludeUIDs:U}=M.payload;if(!(B&&(0,o.I2)(B)))if(T.selectedItems.$all=I,I){let V=function(z){if(z&&(0,o.I2)(z))return;const R=z?T.childrenByParentUID[z]:T.rootItems;if(R)for(const O of R.items)(0,o.I2)(O.uid)||U?.includes(O.uid)||(T.selectedItems[O.kind][O.uid]=I,O.kind==="folder"&&V(O.uid))};var W=V;V(B)}else for(const V in T.selectedItems){if(!(V==="dashboard"||V==="panel"||V==="folder"))continue;const z=T.selectedItems[V];for(const R in z)z[R]=I}}function r(T,M){const I=Array.isArray(M.payload)?M.payload:[M.payload];for(const B of I)B?(T.childrenByParentUID[B]=void 0,T.openFolders[B]=!1):T.rootItems=void 0}const{fetchNextChildrenPageFulfilled:v,refetchChildrenFulfilled:g,...E}=n,x={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},m=(0,a.Z0)({name:"browseDashboards",initialState:x,reducers:E,extraReducers:T=>{T.addCase(s.Ii.fulfilled,v),T.addCase(s.bw.fulfilled,g)}}),y=m.reducer,{setFolderOpenState:b,setItemSelectionState:D,setAllSelection:f,clearFolders:C}=m.actions,P={browseDashboards:y}},87281:(ne,j,e)=>{"use strict";e.d(j,{z:()=>c});var n=e(74848),a=e(70255),s=e(64157),d=e(76541),o=e(89640),l=e(56476),i=e(77256);const c=({name:h,...u})=>{const r=(0,s.$1)(h),{currentData:v,isLoading:g,isSuccess:E}=d.n.endpoints.listReceiver.useQuery({fieldSelector:(0,l.v2)([["metadata.name",r]])}),x=v?.items.at(0)?.metadata.name;return g?p:E&&x?(0,n.jsx)(o.Y,{href:(0,i.vV)(x,{alertmanager:"grafana"}),inline:!1,...u,children:h}):h},p=(0,n.jsx)(a.A,{height:8,width:64})},87308:(ne,j,e)=>{"use strict";e.d(j,{L:()=>l});var n=e(2543),a=e.n(n),s=e(44248),d=e(3371),o=e(92119);class l extends s.Bs{constructor(u){super(u),this._variableDependency=new s.Sh(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:()=>this.performRepeat()}),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.performRepeat();const u=this._getLayout(),r=this._getRow(),v=u.subscribeToState(()=>{const g=u.state.children.filter(E=>E instanceof s.tI&&E.state.repeatSourceKey===r.state.key);for(const E of g)E instanceof s.tI&&E.state.children.length!==r.state.children.length&&this.performRepeat(!0)});return()=>{v.unsubscribe()}}_getRow(){if(!(this.parent instanceof s.tI))throw new Error("RepeatedRowBehavior: Parent is not a SceneGridRow");return this.parent}_getLayout(){const u=s.jh.getLayout(this);if(!(u instanceof s.hy))throw new Error("RepeatedRowBehavior: Layout is not a SceneGridLayout");return u}performRepeat(u=!1){if(this._variableDependency.hasDependencyInLoadingState())return;const r=s.jh.lookupVariable(this.state.variableName,this.parent?.parent);if(!r){console.error("RepeatedRowBehavior: Variable not found");return}if(!(r instanceof s.n8)){console.error("RepeatedRowBehavior: Variable is not a MultiValueVariable");return}const v=this._getRow(),g=this._getLayout(),{values:E,texts:x}=(0,o.a7)(r);if((0,n.isEqual)(this._prevRepeatValues,E)&&!u)return;this._prevRepeatValues=E,this._clonedRows=[];const m=v.state.children,y=i(m);let b=0;const D={values:[""],texts:r.hasAllValue()?["All"]:["None"]},f=E.length?E:D.values,C=x.length?x:D.texts;for(let P=0;P<f.length;P++){const M=P===0?v:v.clone({key:(0,d.lv)(v.state.key,P),repeatSourceKey:v.state.key,y:(v.state.y??0)+y*P+P,$behaviors:[],actions:void 0});M.setState({$variables:(0,d.D1)(r,f[P],C[P]),children:[]});const I=[];for(const B of m){const U=B.state.y??0,W=P>0?B.clone():B,V=U+(y+1)*P;P>0&&W.setState({y:V,key:M.state.key+B.state.key}),I.push(W),b<V+W.state.height&&(b=V+W.state.height)}M.setState({children:I}),this._clonedRows.push(M)}c(g,this._clonedRows,b,v.state.key)}removeBehavior(){const u=this._getRow(),r=this._getLayout(),v=p(r,u.state.key);r.setState({children:v}),u.setState({$behaviors:u.state.$behaviors.filter(g=>g!==this),$variables:void 0})}resetPrevRepeatValues(){this._prevRepeatValues=void 0}}function i(h){let u=0,r=Number.MAX_VALUE;if(h.length===0)return 0;for(const v of h)v.state.y+v.state.height>u&&(u=v.state.y+v.state.height),v.state.y<r&&(r=v.state.y);return u-r}function c(h,u,r,v){const g=p(h,v),E=g.findIndex(m=>m instanceof s.tI&&m.state.key===v);if(E===-1)throw new Error("RowRepeaterBehavior: Parent row not found in layout children");const x=[...g.slice(0,E),...u,...g.slice(E+1)];if(g.length>E+1){const m=g.slice(E+1),y=m[0].state.y,b=r-y;for(const D of m)if(D.setState({y:D.state.y+b}),D instanceof s.tI)for(const f of D.state.children)f.setState({y:f.state.y+b})}h.setState({children:x})}function p(h,u){return h.state.children.filter(r=>!(r instanceof s.tI)||r.state.repeatSourceKey!==u)}},87390:(ne,j,e)=>{"use strict";e.d(j,{Ap:()=>i,O6:()=>c,Xk:()=>h,gW:()=>p});var n=e(69168),a=e(30124),s=e(41097),d=e(37256),o=e(87745),l=e(89224);function i(r){return async(v,g)=>{if(r.libraryPanel?.uid&&!("model"in r.libraryPanel)){v(u(r));return}r.maxDataPoints&&(r.maxDataPoints=Number(r.maxDataPoints));let E=r.type,x=g().plugins.panels[E];if(!x)try{x=await v((0,d.y7)(E))}catch{x=(0,s.$)(E,E==="row")}r.plugin||await r.pluginLoaded(x),v((0,l.XM)({key:r.key,plugin:x}))}}function c(r){return v=>{v((0,l.FC)({key:r}))}}function p({panel:r,pluginId:v,options:g,fieldConfig:E,transformations:x}){return async(m,y)=>{if(r.type===v&&!g&&!E&&!x)return;let D=y().plugins.panels[v];if(D||(D=await m((0,d.y7)(v))),r.type!==v&&r.changePlugin(D),g||E||x){const f=(0,n.F)({plugin:D,currentOptions:g||r.options,currentFieldConfig:E||r.fieldConfig,isAfterPluginChange:!1});r.options=f.options,r.fieldConfig=f.fieldConfig,r.transformations=x||r.transformations,r.configRev++}r.generateNewKey(),m((0,l.XM)({key:r.key,plugin:D}))}}function h(r,v){return async(g,E)=>{const x=v.model.type,m=r.type;if(r.restoreModel({...v.model,gridPos:r.gridPos,id:r.id,libraryPanel:v}),r.getQueryRunner().clearLastResult(),m!==x){let b=E().plugins.panels[x];b||(b=await g((0,d.y7)(x))),await r.pluginLoaded(b),r.generateNewKey(),await g((0,l.XM)({key:r.key,plugin:b}))}else{const y=r.key;r.generateNewKey(),g((0,l.io)({oldKey:y,newKey:r.key}))}r.configRev=0,r.hasSavedPanelEditChange=!0,r.refresh(),r.events.publish(o.zq),r.events.publish(o.PR)}}function u(r){return async(v,g)=>{const E=r.libraryPanel.uid;try{const x=await(0,a.Yr)(E,!0);r.initLibraryPanel(x);const m=g().dashboard.getModel();if(r.repeat&&m){const y=m.panels.findIndex(b=>b.id===r.id);m.repeatPanel(r,y),m.sortPanelsByGridPos(),m.events.publish(new o.Q$)}await v(i(r))}catch(x){console.log("ERROR: ",x),v((0,l.XM)({key:r.key,plugin:(0,s.$)("Unable to load library panel: "+E,!1)}))}}}},87745:(ne,j,e)=>{"use strict";e.d(j,{Am:()=>f,Bt:()=>g,Cf:()=>c,Eu:()=>M,Io:()=>v,JI:()=>o,KU:()=>C,PR:()=>l,Q$:()=>i,Rh:()=>x,S8:()=>D,U0:()=>u,VZ:()=>E,Vz:()=>m,XM:()=>h,_d:()=>P,bG:()=>s,bY:()=>b,i0:()=>W,sL:()=>U,sj:()=>V,xL:()=>r,xc:()=>I,yj:()=>B,zq:()=>d});var n=e(36819),a=e(68388);const s=(0,n.R)("template-variable-value-updated");class d extends a.a{static{this.type="panel-queries-changed"}}class o extends a.a{static{this.type="panel-transformations-changed"}}class l extends a.a{static{this.type="panels-options-changed"}}class i extends a.a{static{this.type="dashboard-panels-changed"}}class c extends a.a{static{this.type="dashboard-meta-changed"}}class p extends a.a{static{this.type="panel-directive-ready"}}class h extends a.a{static{this.type="render"}}class u extends a.x{static{this.type="zoom-out"}}var r=(z=>(z[z.Left=-1]="Left",z[z.Right=1]="Right",z))(r||{});class v extends a.x{static{this.type="shift-time"}}class g extends a.a{static{this.type="copy-time"}}class E extends a.x{static{this.type="paste-time"}}class x extends a.x{static{this.type="absolute-time"}}class m extends a.x{static{this.type="remove-panel"}}class y extends a.x{static{this.type="show-modal"}}class b extends a.x{static{this.type="show-confirm-modal"}}class D extends a.x{static{this.type="show-react-modal"}}class f extends a.x{static{this.type="open-extension-sidebar"}}class C extends a.a{static{this.type="close-extension-sidebar"}}class P extends a.x{static{this.type="toggle-extension-sidebar"}}class T extends a.a{static{this.type="hide-modal"}}class M extends a.a{static{this.type="dashboard-saved"}}class I extends a.x{static{this.type="annotation-query-started"}}class B extends a.x{static{this.type="annotation-query-finished"}}class U extends a.x{static{this.type="panel-edit-started"}}class W extends a.x{static{this.type="panel-edit-finished"}}class V extends a.x{static{this.type="record-history-entry"}}},87748:(ne,j,e)=>{"use strict";e.d(j,{AR:()=>c,Am:()=>i,I7:()=>p,KG:()=>l,ah:()=>h,iM:()=>o});var n=e(44248),a=e(6048),s=e(32603);function d(u){return u.parent instanceof a.M?u.parent:n.jh.getAncestor(u,a.M)}function o(u){return d(u).parent}function l(u){return(0,s.dQ)(o(u))}function i(u){d(u).removeCondition(u)}function c(u,r){d(u).undoRemoveCondition(u,r)}function p(u){return d(u).getConditionIndex(u)}function h(u){d(u).check()}},87766:(ne,j,e)=>{"use strict";e.d(j,{$:()=>i});var n=e(74848),a=e(80011),s=e(92745),d=e(27594),o=e(66404);const l="dddd YYYY-MM-DD HH:mm zz",i=({ldapSyncInfo:c})=>{const p=(0,a.LE)(c.nextSync,{format:l}),h=[{id:"syncAttribute"},{id:"syncValue"}],u=[{syncAttribute:"Active synchronization",syncValue:c.enabled?"Enabled":"Disabled"},{syncAttribute:"Scheduled",syncValue:c.schedule},{syncAttribute:"Next synchronization",syncValue:p}];return(0,n.jsxs)("section",{children:[(0,n.jsx)(o.E,{element:"h3",children:(0,n.jsx)(s.x6,{i18nKey:"admin.ldap-sync-info.title",children:"LDAP Synchronization"})}),(0,n.jsx)(d.j,{data:u,columns:h,getRowId:r=>r.syncAttribute})]})}},87767:(ne,j,e)=>{"use strict";e.d(j,{k:()=>J});var n=e(74848),a=e(22803),s=e(96540),d=e(49185),o=e(70713),l=e(92745),i=e(14170),c=e(1578),p=e(27489),h=e(52315),u=e(63142),r=e(41654),v=e(45861),g=e(22787),E=e(24726),x=e(22592),m=e(88673),y=e(41778);function b(ae){const le=[];for(const L of ae){let ie="text";switch(L.type?.toUpperCase()){case"BOOLEAN":case"BOOL":{ie="boolean";break}case"BYTES":case"VARCHAR":{ie="text";break}case"FLOAT":case"FLOAT64":case"INT":case"INTEGER":case"INT64":case"NUMERIC":case"BIGNUMERIC":{ie="number";break}case"DATE":{ie="date";break}case"DATETIME":{ie="datetime";break}case"TIME":{ie="time";break}case"TIMESTAMP":{ie="datetime";break}case"GEOGRAPHY":{ie="text";break}default:break}le.push({...L,raqbFieldType:ie,icon:D(L.type.toUpperCase())})}return le}function D(ae){switch(ae){case"TIME":case"DATETIME":case"TIMESTAMP":return"clock-nine";case"BOOLEAN":return"toggle-off";case"INTEGER":case"FLOAT":case"FLOAT64":case"INT":case"SMALLINT":case"BIGINT":case"TINYINT":case"BYTEINT":case"INT64":case"NUMERIC":case"DECIMAL":return"calculator-alt";case"CHAR":case"VARCHAR":case"STRING":case"BYTES":case"TEXT":case"TINYTEXT":case"MEDIUMTEXT":case"LONGTEXT":return"text";case"GEOGRAPHY":return"map";default:return}}var f=e(2543);function C({sql:ae,dataset:le,table:L}){let ie="";if(!ae||!haveColumns(ae.columns))return ie;if(ie+=createSelectClause(ae.columns),le&&L&&(ie+=`FROM ${le}.${L} `),ae.whereString&&(ie+=`WHERE ${ae.whereString} `),ae.groupBy?.[0]?.property.name){const oe=ae.groupBy.map(ue=>ue.property.name).filter(ue=>!isEmpty(ue));ie+=`GROUP BY ${oe.join(", ")} `}return ae.orderBy?.property.name&&(ie+=`ORDER BY ${ae.orderBy.property.name} `),ae.orderBy?.property.name&&ae.orderByDirection&&(ie+=`${ae.orderByDirection} `),ae.limit!==void 0&&ae.limit>=0&&(ie+=`LIMIT ${ae.limit} `),ie}function P(ae){return T(ae)?ae:`\`${ae}\``}function T(ae){const le=/^[a-zA-Z_][a-zA-Z0-9_$]*$/g.test(ae);return!B.includes(ae.toUpperCase())&&le}function M(ae){return ae[0]==='"'&&ae[ae.length-1]==='"'?ae.substring(1,ae.length-1).replace(/""/g,'"'):ae[0]==="`"&&ae[ae.length-1]==="`"?ae.substring(1,ae.length-1):ae}function I(ae){return"'"+ae.replace(/'/g,"''")+"'"}const B=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BIGINT","BINARY","BLOB","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHAR","CHARACTER","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEC","DECIMAL","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FLOAT","FLOAT4","FLOAT8","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LONGBLOB","LONGTEXT","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","NUMERIC","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRECISION","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","REAL","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SMALLINT","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TINYBLOB","TINYINT","TINYTEXT","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VARBINARY","VARCHAR","VARCHARACTER","VARYING","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"];var U=e(29328);async function W(ae,le){const L=U.Ex;if(!ae.table)return[];const ie=`SELECT * FROM ${ae.table} LIMIT 1`,oe=await L.runMetaSQLExprQuery({rawSql:ie,format:y.gv.Table,refId:`fields-${(0,E.A)()}`},(0,x.E2)(),le.filter(fe=>fe.refId===ae.table)),ue=new m.R(oe),ye=Object.values(ue.fields).map(({name:fe,type:Ee})=>({name:fe,text:fe,label:fe,value:P(fe),type:Ee}));return b(ye)}const V=["if","coalesce","ifnull","nullif","sum","avg","count","min","max","stddev","std","stddev_pop","variance","var_pop","group_concat","row_number","rank","dense_rank","lead","lag","first_value","last_value","abs","round","floor","ceiling","ceil","sqrt","pow","power","mod","log","log10","exp","sign","ln","truncate","sin","cos","tan","asin","acos","atan","atan2","rand","pi","concat","length","char_length","lower","upper","substring","substring_index","left","right","ltrim","rtrim","replace","reverse","lcase","ucase","mid","repeat","position","instr","locate","ascii","ord","char","regexp_substr","str_to_date","date_format","date_add","date_sub","year","month","day","weekday","datediff","unix_timestamp","from_unixtime","extract","hour","minute","second","dayname","monthname","dayofweek","dayofmonth","dayofyear","week","quarter","time_to_sec","sec_to_time","timestampdiff","timestampadd","cast","convert","json_extract","json_object","json_array","json_merge_patch","json_valid","json_contains","json_length","json_type","json_keys","json_search","json_quote","json_unquote","json_set","json_insert","json_replace","json_remove"],z=ae=>{const[le,L]=(0,s.useState)(""),[ie,oe]=(0,s.useState)(!1),[ue,ye]=(0,s.useState)(ae),fe=Ve=>{L(Ve),oe(!0)},Ee=()=>oe(!0),Ae=()=>oe(!1),Ge=Ve=>{ye(Ve),L("")},Fe=()=>{L(""),oe(!1)},Pe=(0,s.useMemo)(()=>!!le||ue!==ae,[le,ue,ae]);return{explanation:le,isExplanationOpen:ie,prevExpression:ue,shouldShowViewExplanation:Pe,handleExplain:fe,handleOpenExplanation:Ee,handleCloseExplanation:Ae,updatePrevExpression:Ge,clearExplanation:Fe}},R=()=>{const[ae,le]=(0,s.useState)([]),[L,ie]=(0,s.useState)(!1),oe=(0,s.useRef)(0);return{suggestions:ae,isDrawerOpen:L,handleHistoryUpdate:Ge=>{le(Ge),Ge.length>oe.current&&ie(!0),oe.current=Ge.length},handleApplySuggestion:Ge=>(ie(!1),Ge),handleOpenDrawer:()=>ie(!0),handleCloseDrawer:()=>ie(!1),clearSuggestions:()=>{le([]),ie(!1),oe.current=0}}};var O=e(76319),N=e(53371),F=e(45967),G=e(30703);const H=2*1e3,K=({onFormatCode:ae,onExpand:le,isExpanded:L,query:ie})=>{const oe=(0,u.of)(w),[ue,ye]=(0,s.useState)(!1),fe=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!ue)return;const Ge=setTimeout(()=>{ye(!1)},H);return()=>clearTimeout(Ge)},[ue]);const Ee=(0,s.useCallback)(async()=>{try{await navigator.clipboard.writeText(ie.expression??""),ye(!0)}catch(Ge){console.error(Ge)}},[ie.expression]),Ae=(0,l.t)("clipboard-button.inline-toast.success","Copied");return(0,n.jsx)("div",{className:oe.container,children:(0,n.jsxs)(r.B,{alignItems:"center",direction:"row",gap:1,children:[ae&&(0,n.jsx)(O.K,{onClick:ae,name:"brackets-curly",size:"xs",tooltip:(0,l.t)("expressions.query-toolbox.tooltip-format-query","Format query")}),le&&(0,n.jsx)(O.K,{onClick:()=>le(!L),name:L?"angle-double-up":"angle-double-down",size:"xs",tooltip:L?(0,l.t)("expressions.query-toolbox.tooltip-collapse-editor","Collapse editor"):(0,l.t)("expressions.query-toolbox.tooltip-expand-editor","Expand editor")}),ue&&(0,n.jsx)(N.r,{placement:"top",referenceElement:fe.current,children:Ae}),(0,n.jsx)(O.K,{name:ue?"check":"copy",onClick:Ee,ref:fe,size:"xs",tooltip:(0,l.t)("expressions.query-toolbox.tooltip-copy-query","Copy query"),variant:ue?"primary":"secondary"}),!L&&(0,n.jsx)(F.m,{content:(0,l.t)("expressions.query-toolbox.tooltip-run-query","Hit ctrl/cmd+enter to run query"),children:(0,n.jsx)(G.I,{name:"keyboard"})})]})})},w=ae=>({container:(0,a.css)({border:`1px solid ${ae.colors.border.medium}`,borderTop:"none",padding:ae.spacing(1),display:"flex",flexGrow:1,justifyContent:"end",fontSize:ae.typography.bodySmall.fontSize})});var Q=e(43173);const k=ae=>(le,L)=>({...L,triggerCharacters:[" "],tables:{resolve:async()=>ae.refIds.map(oe=>({name:oe.label||oe.value||"",completion:oe.label||oe.value||""}))},columns:{resolve:async ie=>{if(Q.$.featureToggles.sqlExpressionsColumnAutoComplete)try{return await ae.getFields({table:ie?.table})}catch{return[]}else return[]}},supportedFunctions:()=>V.map(ie=>({id:ie,name:ie}))}),te=(0,s.lazy)(()=>e.e(2311).then(e.bind(e,12311)).then(ae=>({default:ae.GenAISQLSuggestionsButton}))),q=(0,s.lazy)(()=>e.e(7585).then(e.bind(e,97585)).then(ae=>({default:ae.GenAISQLExplainButton}))),se=(0,s.lazy)(()=>e.e(5984).then(e.bind(e,15984)).then(ae=>({default:ae.SuggestionsDrawerButton}))),re=(0,s.lazy)(()=>e.e(5110).then(e.bind(e,25110)).then(ae=>({default:ae.GenAISuggestionsDrawer}))),Y=(0,s.lazy)(()=>e.e(8016).then(e.bind(e,58016)).then(ae=>({default:ae.GenAIExplanationDrawer}))),X=2,J=({onChange:ae,refIds:le,query:L,alerting:ie=!1,queries:oe,metadata:ue,onRunQuery:ye})=>{const fe=(0,s.useMemo)(()=>le.map(ke=>ke.value),[le]),Ae={id:"mysql",completionProvider:(0,s.useMemo)(()=>k({getFields:ke=>ee(ke,oe||[]),refIds:le}),[oe,le]),formatter:h.se},Ge=`SELECT
  *
FROM
  ${fe[0]}
LIMIT
  10`,Fe=(0,u.of)(_),Pe=(0,s.useRef)(null),[Ve,me]=(0,s.useState)({height:0}),[Se,Qe]=(0,d.A)(),[Ue,Ie]=(0,s.useState)(!1),{handleApplySuggestion:Re,handleHistoryUpdate:Ke,handleCloseDrawer:Le,handleOpenDrawer:ze,isDrawerOpen:Be,suggestions:$e}=R(),{explanation:Ye,handleCloseExplanation:de,handleOpenExplanation:ge,handleExplain:pe,isExplanationOpen:De,shouldShowViewExplanation:Me,updatePrevExpression:be}=z(L.expression||""),Oe=(0,s.useMemo)(()=>({alerting:ie,panelId:ue?.data?.request?.panelPluginId,queries:ue?.queries,dashboardContext:{dashboardTitle:ue?.data?.request?.dashboardTitle??"",panelName:ue?.data?.request?.panelName??""},datasources:ue?.queries?.map(ke=>ke.datasource?.type??"")??[],totalRows:ue?.data?.series.reduce((ke,Ze)=>ke+Ze.length,0),requestTime:ue?.data?.request?.endTime?ue?.data?.request?.endTime-ue?.data?.request?.startTime:-1,numberOfQueries:ue?.data?.request?.targets?.length??0,seriesData:ue?.data?.series}),[ie,ue]),Ne=(0,s.useMemo)(()=>{if(!ue?.data)return[];const ke=[];return ue.data.errors?.length?ke.push(...ue.data.errors.map(Ze=>Ze.message).filter(Ze=>!!Ze)):ue.data.error?.message&&ke.push(ue.data.error.message),ke},[ue?.data]),We=ke=>{ae({...L,expression:ke,format:ie?"alerting":void 0}),be(ke)},qe=ke=>{We(ke),Re(ke)},st=(0,s.useCallback)(()=>{ye&&((0,p.rR)("dashboards_expression_interaction",{action:"execute_expression",expression_type:"sql",context:"expression_editor"}),ye())},[ye]);(0,s.useEffect)(()=>{if(!Pe.current)return;const ke=new ResizeObserver(Ze=>{const{height:nt}=Ze[0].contentRect;me({height:nt})});return ke.observe(Pe.current),()=>ke.disconnect()},[]),(0,s.useEffect)(()=>{L.expression||We(Ge)},[]),(0,s.useEffect)(()=>{const ke=Ze=>{(navigator.userAgent.includes("Mac")?Ze.metaKey:Ze.ctrlKey)&&Ze.key==="Enter"&&(Ze.preventDefault(),Ze.stopPropagation(),st())};return document.addEventListener("keydown",ke,!0),()=>document.removeEventListener("keydown",ke,!0)},[st]);const rt=ke=>(0,n.jsx)("div",{ref:Se,children:(0,n.jsx)(K,{query:L,onFormatCode:ke,onExpand:Ie,isExpanded:Ue})}),ot=()=>(0,n.jsxs)("div",{className:Fe.sqlButtons,children:[(0,n.jsxs)(r.B,{direction:"row",gap:1,alignItems:"center",justifyContent:"end",children:[(0,n.jsx)(v.$n,{icon:"play",onClick:st,size:"sm",children:(0,l.t)("expressions.sql-expr.button-run-query","Run query")}),(0,n.jsx)(s.Suspense,{fallback:null,children:Me?(0,n.jsx)(v.$n,{fill:"outline",icon:"gf-movepane-right",onClick:ge,size:"sm",variant:"secondary",children:(0,n.jsx)(l.x6,{i18nKey:"sql-expressions.view-explanation",children:"View explanation"})}):(0,n.jsx)(q,{currentQuery:L.expression||"",onExplain:pe,queryContext:Oe,refIds:fe})}),(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(te,{currentQuery:L.expression||"",initialQuery:Ge,onGenerate:()=>{},onHistoryUpdate:Ke,queryContext:Oe,refIds:fe,errorContext:Ne})})]}),$e.length>0&&(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(se,{handleOpenDrawer:ze,suggestions:$e})})]}),mt=(ke,Ze)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:Fe.sqlContainer,children:[ot(),(0,n.jsx)("div",{ref:Pe,className:Fe.editorContainer,children:(0,n.jsx)(i.Y,{query:L.expression||Ge,onChange:We,width:ke,height:Ze??Ve.height-X-Qe.height,language:Ae,children:({formatQuery:nt})=>rt(nt)})})]}),(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(re,{isOpen:Be,onApplySuggestion:qe,onClose:Le,suggestions:$e})}),(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(Y,{isOpen:De,onClose:de,explanation:Ye})})]}),pt=()=>(0,n.jsx)(o.Ay,{children:({width:ke,height:Ze})=>(0,n.jsx)(i.Y,{query:L.expression||Ge,onChange:We,width:ke,height:Ze?Ze-X-Qe.height:void 0,language:Ae,children:({formatQuery:nt})=>rt(nt)})});return(0,n.jsxs)(n.Fragment,{children:[mt(),Ue&&(0,n.jsx)(g.a,{title:(0,l.t)("expressions.sql-expr.modal-title","SQL Editor"),closeOnBackdropClick:!1,closeOnEscape:!1,className:Fe.modal,contentClassName:Fe.modalContent,isOpen:Ue,onDismiss:()=>Ie(!1),children:pt()})]})},_=ae=>({sqlContainer:(0,a.css)({display:"grid",gridTemplateRows:"auto 1fr",gridTemplateAreas:`
      "buttons"
      "editor"
    `,gap:ae.spacing(.5)}),editorContainer:(0,a.css)({gridArea:"editor",height:"240px",resize:"vertical",overflow:"auto",minHeight:"100px"}),modal:(0,a.css)({width:"95vw",height:"95vh"}),modalContent:(0,a.css)({height:"100%",paddingTop:0}),sqlButtons:(0,a.css)({gridArea:"buttons",justifySelf:"end",transform:`translateY(${ae.spacing(-4)})`,marginBottom:ae.spacing(-4),zIndex:10,position:"relative",display:"flex",alignItems:"center",gap:ae.spacing(1)})});async function ee(ae,le){return(await W({table:ae.table},le)).map(ie=>({name:ie.name,completion:ie.value,kind:c.Io.Field}))}},87963:(ne,j,e)=>{"use strict";e.d(j,{MA:()=>s,WB:()=>o,_I:()=>d});var n=e(39796),a=e(51515);function s(l,i){const c=[];if(l?.statistics&&l?.statistics.length){l.statistic=l.statistics[0];for(const p of l.statistics.splice(1))c.push({...l,statistic:p})}for(const p of c)p.refId=(0,n.M)(i),delete p.statistics,i.push(p);return delete l.statistics,c}function d(l){const i=[];if(l&&"statistics"in l){if(l?.statistics?.length){for(const c of l.statistics.splice(1)){const{statistics:p,name:h,...u}=l;i.push({...u,statistic:c,name:`${h} - ${c}`})}l.statistic=l.statistics[0],i.length!==0&&(l.name=`${l.name} - ${l.statistic}`)}delete l.statistics}return i}function o(l){l.hasOwnProperty("metricQueryType")||(l.metricQueryType=a.d$.Search),l.hasOwnProperty("metricEditorMode")||(l.metricQueryType===a.d$.Insights?l.metricEditorMode=a.Rx.Code:l.metricEditorMode=l.expression?a.Rx.Code:a.Rx.Builder)}},88011:(ne,j,e)=>{"use strict";e.d(j,{Nn:()=>l,Ru:()=>i,hX:()=>d});var n=e(79118),a=e(739),s=e(59427);function d(c,p){return o((0,s.UI)(c,p?.field),p)}function o(c,p,h){if(!c){const x=p.fixed??0;return{isAssumed:!!p.field?.length||!p.fixed,fixed:x,value:()=>x,get:()=>x}}const u=(0,n.AP)(c),r=p.max-p.min;if(c.values.length<1||r<=0||u.delta<=0)return{fixed:p.min,value:()=>p.min,get:()=>p.min};let g=x=>p.min+x*r;if(h===a.QH.Quad){const x=Math.PI*(p.max/2)**2,m=Math.PI*(p.min/2)**2,y=x-m;g=b=>{let D=m+y*b;return Math.sqrt(D/Math.PI)*2}}const E=x=>{const m=c.values[x];let y=0;return m!==-1/0&&(y=(m-u.min)/u.delta),y>1?y=1:y<0&&(y=0),g(y)};return{get:E,value:()=>E((0,s.sB)(c)),field:c}}function l(c){return c||(c={min:0,max:1}),c.min==null&&(c.min=0),c.max==null&&(c.max=1),c}function i(c,p){let{min:h,max:u}=l(p);if(c||(c={}),c.max==null&&(c.max=u),c.min==null&&(c.min=h),c.min>c.max){const r=c.max;c.max=c.min,c.min=r}return c.min<h&&(c.min=h),c.max>u&&(c.max=u),c.fixed==null&&(c.fixed=c.min+(c.max-c.min)/2),c.field||(c.fixed>u?c.fixed=u:c.fixed<h&&(c.fixed=h)),c}},88114:(ne,j,e)=>{"use strict";e.d(j,{Im:()=>d,nv:()=>s,rw:()=>a});var n=e(11257);const a=[n.w.AlertingRoutesRead],s=[n.w.AlertingRoutesWrite],d=[...a,...s]},88227:(ne,j,e)=>{"use strict";e.d(j,{M:()=>o});var n=e(74848),a=e(22803),s=e(66404),d=e(63142);function o({messages:i,variant:c}){const p=(0,d.of)(l);return(0,n.jsx)("ul",{className:p.messageList,children:i.map((h,u)=>(0,n.jsx)("li",{children:c?(0,n.jsx)(s.E,{variant:c,children:h}):h},u))})}const l=i=>({messageList:(0,a.css)({margin:0,paddingLeft:i.spacing(3)})})},88366:(ne,j,e)=>{"use strict";e.d(j,{M:()=>n});const n='Go to the <a href="https://grafana.com/docs/grafana/latest/panels/transformations/?utm_source=grafana" target="_blank" rel="noreferrer">transformation documentation</a> for more general documentation.'},88499:(ne,j,e)=>{"use strict";e.d(j,{M:()=>d});var n=e(44248),a=e(92119);class s{constructor(l,i){this._sceneObject=i,this.state={name:l,type:"dashboard_macro"}}getValue(l){const i=(0,a.YQ)(this._sceneObject);switch(l){case"uid":return i.state.uid||"";case"title":case"name":case"id":default:return i.state.title}}getValueText(){return""}}function d(){try{const o=n.Go.registerVariableMacro("__dashboard",s);return()=>o()}catch(o){return console.error("Error registering dashboard macro",o),()=>{}}}},88531:(ne,j,e)=>{"use strict";e.d(j,{XL:()=>h,gK:()=>r,h:()=>y,pd:()=>E});var n=e(74848),a=e(96540),s=e(16515),d=e(47184),o=e(36638),l=e(57866),i=e(92745),c=e(18857);const p=(b,D,f)=>{if(!f)return;let C=b.find(P=>!D.some(T=>P===T));if(C)return C};function h({value:b,data:D,onChange:f,placeholder:C,id:P}){const T=(0,a.useMemo)(()=>v(D),[D]),[M,I]=(0,a.useState)({refIds:[],value:void 0}),B=(0,a.useMemo)(()=>T.find(W=>W.value===b)??p(T,M.refIds,M.value),[b,T,M]),U=(0,a.useCallback)(W=>{f(W?.value)},[f]);return(T!==M.refIds||B?.value!==M.value)&&I({refIds:T,value:B?.value}),(0,n.jsx)(c.l6,{inputId:P,options:T,onChange:U,isClearable:!0,placeholder:C??"Select query refId",value:B})}const u=(b,D,f)=>{if(!f||!f.length)return;const C=b.filter(P=>D.some(T=>P===T));if(C.length)return C};function r({value:b,data:D,onChange:f,placeholder:C,id:P}){const T=(0,a.useMemo)(()=>v(D),[D]),[M,I]=(0,a.useState)({refIds:[],value:void 0}),B=(0,a.useMemo)(()=>{let W=new Set;if(b)if(b.startsWith("/^"))try{W=new Set(m(b))}catch{W.add(b)}else b.includes("|")?W=new Set(b.split("|")):W.add(b);const V=T.filter(O=>W.has(O.value||""));if(V.length)return V;const z=[...W].map(d.z),R=u(z,M.refIds,M.value)??[];return R.length>0?R:z.length>0?z:void 0},[b,T,M]),U=(0,a.useCallback)(W=>{f(W.map(V=>V.value))},[f]);return(T!==M.refIds||B?.length!==M.value?.length)&&I({refIds:T,value:B}),(0,n.jsx)(c.KF,{inputId:P,options:T,onChange:U,isClearable:!0,placeholder:C??"Select query refId",value:B})}function v(b){const D=new Map;for(const C of b){const P=C.refId??"",T=D.get(P)??[];T.length===0&&D.set(P,T),T.push(C)}const f=[];for(const[C,P]of D.entries())f.push({value:C,label:C?(0,i.t)("grafana-ui.matchers-ui.get-list-of-query-ref-ids.label","Query: {{refId}}",{refId:C}):(0,i.t)("grafana-ui.matchers-ui.get-list-of-query-ref-ids.label-missing-ref-id","Query: (missing refId)"),description:g(P)});return f}function g(b){return(0,i.t)("grafana-ui.matchers-ui.get-list-of-query-ref-ids.description","Frames ({{framesCount}}): {{framesNames}}",{framesCount:b.length,framesNames:`${b.slice(0,Math.min(3,b.length)).map(D=>(0,s.Ri)(D)).join(", ")} ${b.length>3?"...":""}`})}const E=()=>({id:l.Ct.byFrameRefID,component:b=>(0,n.jsx)(h,{value:b.options,data:b.data,onChange:b.onChange}),matcher:o.sJ.get(l.Ct.byFrameRefID),name:(0,i.t)("grafana-ui.matchers-ui.name-fields-by-query","Fields returned by query"),description:(0,i.t)("grafana-ui.matchers-ui.description-fields-by-query","Set properties for fields from a specific query"),optionsToLabel:b=>b});function x(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const m=b=>b.slice(5,-3).split(/(?<!\\)\|/g).map(D=>D.replace(/\\(.)/g,"$1")),y=b=>`/^(?:${b.map(D=>x(D)).join("|")})$/`},88532:(ne,j,e)=>{"use strict";e.d(j,{g:()=>s});var n=e(97883),a=e(98279);function s(d){return d.descriptor.isGridLayout?[d.descriptor.id]:d instanceof a.K?d.state.tabs.flatMap(o=>s(o.getLayout())):d instanceof n.V?d.state.rows.flatMap(o=>s(o.getLayout())):[]}},88547:(ne,j,e)=>{"use strict";e.d(j,{S:()=>s});var n=e(36303),a=e(74268);function s(d,o={}){return(0,n.Xc)(d,{...o,style:"page",errorLogger:a.vV})}},88559:(ne,j,e)=>{"use strict";e.d(j,{m:()=>v});var n=e(74848),a=e(22803),s=e(34743),d=e(83505),o=e(46885),l=e(96540),i=e(66588),c=e(63142),p=e(76373),h=e(44019),u=e(71495),r=e(15245);const v=l.memo(({children:E,overlay:x,placement:m,offset:y,root:b,onVisibleChange:D})=>{const[f,C]=(0,l.useState)(!1),P=(0,l.useRef)(null),T=(0,u.O)(m),M=(0,l.useCallback)(K=>{C(K),D?.(K)},[D]),I=[(0,s.cY)({mainAxis:y?.[0]??8,crossAxis:y?.[1]??0}),...(0,p.getPositioningMiddleware)(T)],{context:B,refs:U,floatingStyles:W}=(0,d.we)({open:f,placement:T,onOpenChange:M,middleware:I,whileElementsMounted:o.ll}),V=(0,d.kp)(B),z=(0,d.s9)(B),{getReferenceProps:R,getFloatingProps:O}=(0,d.bv)([z,V]),N=150,F=(0,c.of)(g,N),G=()=>{M(!1)},H=K=>{K.key==="Tab"&&M(!1)};return(0,n.jsxs)(n.Fragment,{children:[l.cloneElement(E,{ref:U.setReference,...R()}),f&&(0,n.jsx)(r.ZL,{root:b,children:(0,n.jsx)(d.s3,{context:B,children:(0,n.jsx)("div",{ref:U.setFloating,style:W,onClick:G,onKeyDown:H,children:(0,n.jsx)(i.A,{nodeRef:P,appear:!0,in:!0,timeout:{appear:N,exit:0,enter:0},classNames:F,children:(0,n.jsx)("div",{ref:P,children:(0,h.renderOrCallToRender)(x,{...O()})})})})})})]})});v.displayName="Dropdown";const g=(E,x)=>({appear:(0,a.css)({opacity:"0",position:"relative",transformOrigin:"top",[E.transitions.handleMotion("no-preference")]:{transform:"scaleY(0.5)"}}),appearActive:(0,a.css)({opacity:"1",[E.transitions.handleMotion("no-preference")]:{transform:"scaleY(1)",transition:`transform ${x}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${x}ms cubic-bezier(0.2, 0, 0.2, 1)`}})})},88589:(ne,j,e)=>{"use strict";e.d(j,{Cs:()=>c,EL:()=>u,JQ:()=>p,Jw:()=>o,Lm:()=>l,PI:()=>v,h6:()=>h});var n=e(2543),a=e.n(n),s=e(79243),d=e(52161);const o=g=>{const E=g.fields.at(0);return E?.config?.displayNameFromDS??g.name??E?.labels?.__name__},l=g=>g.fields.at(0)?.values.at(0),i=new Intl.NumberFormat(void 0,{maximumSignificantDigits:5}),c=g=>Number.isFinite(g)&&typeof g=="number"?Math.abs(g)<1?i.format(g):(0,s.h)(g,5).toString(10):String(g),p=g=>g.fields[0]?.labels??{},h=g=>Object.entries(g).map(([E,x])=>E+"="+x).join(", "),u=g=>{const E=g.name;if((0,d.Eb)(g.rulesSource))return{name:E,parents:[]};try{const x=JSON.parse(E);if(!Array.isArray(x))throw new Error("not a nested Grafana folder");const m=(0,n.last)(x)??E,y=(0,n.dropRight)(x,1);return{name:m,parents:y}}catch{return{name:g.name,parents:[]}}},r=(g,E=[])=>JSON.stringify(E.concat(g)),v=g=>g.every(x=>x.fields.every(m=>m.values.every(y=>y==null)))},88632:(ne,j,e)=>{"use strict";e.d(j,{r:()=>l,s:()=>d});var n=e(74848),a=e(44248),s=e(85343);class d extends a.ps{static{this.Component=o}constructor(c){super({...c,name:c.name??"Data layers",annotationLayers:c.annotationLayers??[]}),this.addActivationHandler(()=>this._onActivate())}_onActivate(){return this._subs.add(this.subscribeToState((c,p)=>{c.annotationLayers!==p.annotationLayers&&(this.querySub?.unsubscribe(),this.subscribeToAllLayers(this.getAllLayers()))})),this.subscribeToAllLayers(this.getAllLayers()),()=>{this.querySub?.unsubscribe()}}addAnnotationLayer(c){this.setState({annotationLayers:[...this.state.annotationLayers,c]})}getAllLayers(){const c=[...this.state.annotationLayers];return this.state.alertStatesLayer&&c.push(this.state.alertStatesLayer),c}}function o({model:i}){const{annotationLayers:c}=i.useState();return(0,n.jsx)(n.Fragment,{children:c.map(p=>(0,n.jsx)(s.L,{layer:p},p.state.key))})}function l(i){return i&&typeof i=="object"?"annotationLayers"in i:!1}},88642:(ne,j,e)=>{"use strict";e.d(j,{a:()=>T});var n=e(74848),a=e(22803),s=e(38919),d=e(1906),o=e(51898),l=e(92745),i=e(36490),c=e(44248),p=e(63142),h=e(64400),u=e(96540),r=e(30703);const v=u.forwardRef(({icon:B,children:U,onClick:W,...V},z)=>{const R=(0,p.of)(g);return(0,n.jsxs)("button",{...V,className:R.action,onClick:W,children:[(0,n.jsx)(r.I,{name:B,size:"xl"}),U]})});v.displayName="CardButton";const g=B=>({action:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",cursor:"pointer",background:B.colors.background.secondary,borderRadius:B.shape.radius.default,color:B.colors.text.primary,border:"unset",width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center","&:hover":{background:B.colors.emphasize(B.colors.background.secondary)}})});var E=e(95943),x=e(29043),m=e(42795),y=e(62667),b=e(22429),D=e(11534),f=e(92119),C=e(52763),P=e(87390);function T(B){const U=(0,p.of)(I),W=(0,h.d2)(),V=new s.v2(B.data),{dataSummary:z}=V,R=M(B,z),O=(0,C.wA)(),N=window.__grafanaSceneContext;let F;N instanceof D.H$?F=(0,f.vL)(N,(0,f.XA)(B.panelId)):F=(0,b.UA)().getCurrent()?.getPanelById(B.panelId);const G=()=>{if(x.A.setObject(E.wV,y.__.Suggestions),N){N.state.editPanel?.state.optionsPane?.onToggleVizPicker();return}O((0,m.eK)(!0))},H=()=>{if(F){if(F instanceof c.Eb){F.changePluginType("table");return}O((0,P.gW)({panel:F,pluginId:"table"}))}},K=w=>{F&&(F instanceof c.Eb?F.changePluginType(w.pluginId,w.options,w.fieldConfig):O((0,P.gW)({...w,panel:F})),w.transformations&&setTimeout(()=>{i.Ny.partial({tab:"transform"})},100))};return(0,n.jsxs)("div",{className:U.wrapper,children:[(0,n.jsx)("div",{className:U.message,"data-testid":o.Tp.components.Panels.Panel.PanelDataErrorMessage,children:R}),W.app===d.Jk.PanelEditor&&z.hasData&&F&&(0,n.jsxs)("div",{className:U.actions,children:[B.suggestions&&(0,n.jsx)(n.Fragment,{children:B.suggestions.map(w=>(0,n.jsx)(v,{icon:"process",onClick:()=>K(w),children:w.name},w.name))}),(0,n.jsx)(v,{icon:"table",onClick:H,children:(0,n.jsx)(l.x6,{i18nKey:"panel.panel-data-error-view.switch-to-table",children:"Switch to table"})}),(0,n.jsx)(v,{icon:"chart-line",onClick:G,children:(0,n.jsx)(l.x6,{i18nKey:"panel.panel-data-error-view.open-visualization-suggestions",children:"Open visualization suggestions"})})]})]})}function M({data:B,fieldConfig:U,message:W,needsNumberField:V,needsTimeField:z,needsStringField:R},O){return W||(!B.series||B.series.length===0||B.series.every(N=>N.length===0)?U?.defaults.noValue??(0,l.t)("panel.panel-data-error-view.no-value.default","No data"):R&&!O.hasStringField?(0,l.t)("panel.panel-data-error-view.missing-value.string","Data is missing a string field"):V&&!O.hasNumberField?(0,l.t)("panel.panel-data-error-view.missing-value.number","Data is missing a number field"):z&&!O.hasTimeField?(0,l.t)("panel.panel-data-error-view.missing-value.time","Data is missing a time field"):(0,l.t)("panel.panel-data-error-view.missing-value.unknown","Cannot visualize data"))}const I=B=>({wrapper:(0,a.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,a.css)({textAlign:"center",color:B.colors.text.secondary,fontSize:B.typography.size.lg,width:"100%"}),actions:(0,a.css)({marginTop:B.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:B.spacing(1),rowGap:B.spacing(1),width:"100%",maxWidth:"600px"})})},88673:(ne,j,e)=>{"use strict";e.d(j,{R:()=>a});var n=e(96453);class a extends n.F{constructor(d){super(),this.data=d,this.index=0;const o={},l={};for(let i=0;i<d.fields.length;i++){const c=d.fields[i];if(!c.name)continue;l[c.name]=c;const p=()=>c.values.get(this.index);o.hasOwnProperty(c.name)||Object.defineProperty(o,c.name,{enumerable:!0,get:p}),o.hasOwnProperty(i.toString())||Object.defineProperty(o,i,{enumerable:!1,get:p})}this.obj=o,this.fields=l}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(d){if(!this.dataFrame||!this.dataFrame.fields)return;const o=this.dataFrame.fields[d];if(!(!o||!o.display))return o.display}get(d){return this.index=d,this.obj}toArray(){return new Array(this.data.length).fill(0).map((d,o)=>({...this.get(o)}))}}},88681:(ne,j,e)=>{"use strict";e.d(j,{Hr:()=>v,Pu:()=>C,QP:()=>E,QV:()=>g,Te:()=>P,a7:()=>f,dE:()=>y,hj:()=>x,l_:()=>b,qi:()=>r,ut:()=>m,wB:()=>D});var n=e(65307),a=e(2543),s=e.n(a),d=e(28105),o=e(54742),l=e(17752),i=e(67933),c=e(99305),p=e(93612),h=e(96120);const u=(0,n.Z0)({name:"templating/shared",initialState:h.j,reducers:{addVariable:(T,M)=>{const I=M.payload.id??M.payload.data.model.name,B=o.B.get(M.payload.type),U=(0,a.cloneDeep)(B.initialState),W=B.beforeAdding?B.beforeAdding(M.payload.data.model):(0,a.cloneDeep)(M.payload.data.model),V={...(0,a.defaults)({},W,U),id:I,index:M.payload.data.index,global:M.payload.data.global};T[I]=V},variableStateNotStarted:(T,M)=>{const I=(0,p.Fs)(T,M.payload.id);I.state=d.Gu.NotStarted,I.error=null},variableStateFetching:(T,M)=>{const I=(0,p.Fs)(T,M.payload.id);I.state=d.Gu.Loading,I.error=null},variableStateCompleted:(T,M)=>{const I=(0,p.Fs)(T,M.payload.id);I&&(I.state=d.Gu.Done,I.error=null)},variableStateFailed:(T,M)=>{const I=(0,p.Fs)(T,M.payload.id);I&&(I.state=d.Gu.Error,I.error=M.payload.data.error)},removeVariable:(T,M)=>{if(delete T[M.payload.id],!M.payload.data.reIndex)return;const I=Object.values(T).sort((B,U)=>B.index-U.index);for(let B=0;B<I.length;B++)I[B].index=B},duplicateVariable:(T,M)=>{function I(F){return F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const B=(0,a.cloneDeep)(T[M.payload.id]),U=new RegExp(`^copy_of_${I(B.name)}(_(\\d+))?$`),W=Object.values(T).map(({name:F})=>F.match(U)).filter(F=>F!=null),V=W.map(F=>F[2]).filter(F=>F!=null),z=W.length===0?null:V.length===0?1:V.map(F=>+F).sort((F,G)=>G-F)[0]+1,R=`copy_of_${B.name}${z?`_${z}`:""}`,O=M.payload.data?.newId??R,N=(0,p.wk)(Object.values(T));T[O]={...(0,a.cloneDeep)(o.B.get(M.payload.type).initialState),...B,id:O,name:R,index:N}},changeVariableOrder:(T,M)=>{const{toIndex:I,fromIndex:B}=M.payload.data,U=Object.values(T);for(let W=0;W<U.length;W++){const V=U[W];V.index===B?V.index=I:V.index>B&&V.index<=I?V.index--:V.index<B&&V.index>=I&&V.index++}},changeVariableType:(T,M)=>{const{id:I}=M.payload,{label:B,name:U,index:W,description:V,rootStateKey:z}=T[I];T[I]={...(0,a.cloneDeep)(o.B.get(M.payload.data.newType).initialState),id:I,rootStateKey:z,label:B,name:U,index:W,description:V}},setCurrentVariableValue:(T,M)=>{if(!M.payload.data.option)return;const I=(0,p.Fs)(T,M.payload.id);if(!(0,i.SP)(I))return;const{option:B}=M.payload.data,U={...B,text:(0,c.QT)(B?.text),value:(0,c.QT)(B?.value)};I.current=U,I.options=I.options.map(W=>{W.value=(0,c.QT)(W.value),W.text=(0,c.QT)(W.text);let V=!1;if(Array.isArray(U.value))for(let z=0;z<U.value.length;z++){const R=U.value[z];if(W.value===R){V=!0;break}}else W.value===U.value&&(V=!0);return W.selected=V,W})},changeVariableProp:(T,M)=>{const I=(0,p.Fs)(T,M.payload.id);I[M.payload.data.propName]=M.payload.data.propValue}},extraReducers:T=>T.addCase(l.FN,(M,I)=>{const B=(0,p.Fs)(M,I.payload.id);B.name=I.payload.data.newName})}),r=u.reducer,{removeVariable:v,addVariable:g,changeVariableProp:E,changeVariableOrder:x,duplicateVariable:m,setCurrentVariableValue:y,changeVariableType:b,variableStateNotStarted:D,variableStateFetching:f,variableStateCompleted:C,variableStateFailed:P}=u.actions},88806:(ne,j,e)=>{"use strict";e.d(j,{V:()=>a,l:()=>s});var n=e(74848);let a=({children:d})=>(0,n.jsx)("div",{children:d});function s(d){a=d}},88813:(ne,j,e)=>{"use strict";e.d(j,{BS:()=>c,Vg:()=>l,eF:()=>p,og:()=>i,x8:()=>o});var n=e(68388),a=e(7389),s=e(28105),d=e(8921),o=(h=>(h.NotStarted="Not started",h.Fetching="Fetching",h.Completed="Completed",h))(o||{});const l={id:d.qF,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:a.zL.dontHide,skipUrlSync:!1,state:s.Gu.NotStarted,error:null,description:null};class i extends n.x{static{this.type="variables-changed"}}class c extends n.x{static{this.type="variables-time-range-process-done"}}class p extends n.x{static{this.type="variables-changed-in-url"}}},88898:(ne,j,e)=>{"use strict";e.d(j,{X:()=>v});var n=e(74848),a=e(22803),s=e(92745),d=e(30703),o=e(76319),l=e(44458),i=e(50201),c=e(37658),p=e(45861),h=e(89640),u=e(41654),r=e(63142);function v({links:E,onNew:x,onOrderChange:m,onEdit:y,onDuplicate:b,onDelete:D}){const f=(0,r.of)(g);return E.length===0?(0,n.jsx)(u.B,{direction:"column",children:(0,n.jsx)(i.p,{variant:"call-to-action",button:(0,n.jsx)(p.$n,{onClick:x,size:"lg",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-links.empty-state.button-title",children:"Add dashboard link"})}),message:(0,s.t)("dashboard-links.empty-state.title","There are no dashboard links added yet"),children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard-links.empty-state.info-box-content",children:["Dashboard links allow you to place links to other dashboards and web sites directly below the dashboard header."," ",(0,n.jsx)(h.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/manage-dashboard-links/",children:"Learn more"})]})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("table",{role:"grid",className:"filter-table filter-table--hover",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.dashboard-link-list.type",children:"Type"})}),(0,n.jsx)("th",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.dashboard-link-list.info",children:"Info"})}),(0,n.jsx)("th",{colSpan:3})]})}),(0,n.jsx)("tbody",{children:E.map((P,T)=>(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{role:"gridcell",className:"pointer",onClick:()=>y(T),children:[(0,n.jsx)(d.I,{name:"external-link-alt"})," \xA0 ",P.type]}),(0,n.jsx)("td",{role:"gridcell",className:"pointer",onClick:()=>y(T),children:(0,n.jsxs)(u.B,{children:[P.title&&(0,n.jsx)("span",{className:f.titleWrapper,children:P.title}),P.type==="link"&&(0,n.jsx)("span",{className:f.urlWrapper,children:P.url}),P.type==="dashboards"&&(0,n.jsx)(c.L,{tags:P.tags??[]})]})}),(0,n.jsx)("td",{style:{width:"1%"},role:"gridcell",children:T!==0&&(0,n.jsx)(o.K,{name:"arrow-up",onClick:()=>m(T,-1),tooltip:(0,s.t)("dashboard-scene.dashboard-link-list.tooltip-move-link-up","Move link up")})}),(0,n.jsx)("td",{style:{width:"1%"},role:"gridcell",children:E.length>1&&T!==E.length-1?(0,n.jsx)(o.K,{name:"arrow-down",onClick:()=>m(T,1),tooltip:(0,s.t)("dashboard-scene.dashboard-link-list.tooltip-move-link-down","Move link down")}):null}),(0,n.jsx)("td",{style:{width:"1%"},role:"gridcell",children:(0,n.jsx)(o.K,{name:"copy",onClick:()=>b(P),tooltip:(0,s.t)("dashboard-scene.dashboard-link-list.tooltip-copy-link","Copy link")})}),(0,n.jsx)("td",{style:{width:"1%"},role:"gridcell",children:(0,n.jsx)(l.e,{"aria-label":(0,s.t)("dashboard-scene.dashboard-link-list.delete-aria-label",'Delete link with title "{{title}}"',{title:P.title}),size:"sm",onConfirm:()=>D(T)})})]},`${P.title}-${T}`))})]}),(0,n.jsx)(p.$n,{className:f.newLinkButton,icon:"plus",onClick:x,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.dashboard-link-list.new-link",children:"New link"})})]})}const g=E=>({titleWrapper:(0,a.css)({width:"20vw",textOverflow:"ellipsis",overflow:"hidden"}),urlWrapper:(0,a.css)({width:"40vw",textOverflow:"ellipsis",overflow:"hidden"}),newLinkButton:(0,a.css)({marginTop:E.spacing(3)})})},88907:(ne,j,e)=>{"use strict";e.d(j,{V:()=>n});var n=(a=>(a.Field="field",a.Text="text",a.Skip="skip",a))(n||{})},88977:(ne,j,e)=>{"use strict";e.d(j,{J:()=>c});var n=e(74848),a=e(22803),s=e(96540),d=e(23257),o=e.n(d),l=e(63142),i=e(20662);const c=(0,s.forwardRef)(({name:h,value:u,hidden:r,facets:v,onClick:g,className:E,loading:x,searchTerm:m,active:y,style:b,title:D,highlightParts:f,...C},P)=>{const T=(0,l.$j)(),M=p(T),I=m?[m]:[],B=(0,s.useCallback)(W=>{g&&!r&&g(h,u,W)},[g,h,r,u]);let U=u||h;return v&&(U=`${U} (${v})`),(0,n.jsx)("button",{ref:P,onClick:B,style:b,title:D||U,type:"button",role:"option","aria-selected":!!y,className:(0,a.cx)(M.base,y&&M.active,x&&M.loading,r&&M.hidden,E,g&&!r&&M.hover),...C,children:f!==void 0?(0,n.jsx)(i.z,{text:U,highlightClassName:M.matchHighLight,highlightParts:f}):(0,n.jsx)(o(),{textToHighlight:U,searchWords:I,autoEscape:!0,highlightClassName:M.matchHighLight})},U)});c.displayName="Label";const p=h=>({base:(0,a.css)({display:"inline-block",cursor:"pointer",fontSize:h.typography.size.sm,lineHeight:h.typography.bodySmall.lineHeight,backgroundColor:h.colors.background.secondary,color:h.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:h.spacing(.5),borderRadius:h.shape.radius.default,border:"none",marginRight:h.spacing(1),marginBottom:h.spacing(.5)}),loading:(0,a.css)({fontWeight:h.typography.fontWeightMedium,backgroundColor:h.colors.primary.shade,color:h.colors.text.primary,[h.transitions.handleMotion("no-preference","reduce")]:{animation:"pulse 3s ease-out 0s infinite normal forwards"},"@keyframes pulse":{"0%":{color:h.colors.text.primary},"50%":{color:h.colors.text.secondary},"100%":{color:h.colors.text.disabled}}}),active:(0,a.css)({fontWeight:h.typography.fontWeightMedium,backgroundColor:h.colors.primary.main,color:h.colors.primary.contrastText}),matchHighLight:(0,a.css)({background:"inherit",color:h.components.textHighlight.text,backgroundColor:h.components.textHighlight.background}),hidden:(0,a.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,a.css)({"&:hover":{opacity:.85,cursor:"pointer"}})})},89123:(ne,j,e)=>{"use strict";e.d(j,{M:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(63142),l=e(87),i=e(2543),c=e(55386),p=e(12569);const h=({stats:g})=>{const E=(0,o.of)(u);return g.length===0?null:(0,n.jsx)(p.c,{className:E.list,items:g,renderItem:x=>(0,n.jsxs)("div",{className:E.item,title:x.description,children:[x.title&&`${(0,i.capitalize)(x.title)}:`," ",(0,c.cN)(x)]})})},u=()=>({list:(0,a.css)({flexGrow:1,textAlign:"right"}),item:(0,a.css)({marginLeft:"8px"})});h.displayName="VizLegendStatsList";const r=({item:g,onLabelClick:E,onLabelMouseOver:x,onLabelMouseOut:m,className:y,readonly:b})=>{const D=(0,o.of)(v),f=(0,s.useCallback)(T=>{x&&x(g,T)},[g,x]),C=(0,s.useCallback)(T=>{m&&m(g,T)},[g,m]),P=(0,s.useCallback)(T=>{E&&E(g,T)},[g,E]);return(0,n.jsxs)("div",{className:(0,a.cx)(D.itemWrapper,g.disabled&&D.itemDisabled,y),"data-testid":d.Tp.components.VizLegend.seriesName(g.label),children:[(0,n.jsx)(l.R,{seriesName:g.fieldName??g.label,color:g.color,gradient:g.gradient,readonly:b,lineStyle:g.lineStyle}),(0,n.jsx)("button",{disabled:b,type:"button",onBlur:C,onFocus:f,onMouseOver:f,onMouseOut:C,onClick:P,className:D.label,children:g.label}),g.getDisplayValues&&(0,n.jsx)(h,{stats:g.getDisplayValues()})]})};r.displayName="VizLegendListItem";const v=g=>({label:(0,a.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,a.css)({label:"LegendLabelDisabled",color:g.colors.text.disabled}),itemWrapper:(0,a.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,a.css)({textAlign:"right"}),yAxisLabel:(0,a.css)({color:g.v1.palette.gray2})})},89144:(ne,j,e)=>{"use strict";e.d(j,{j:()=>u});var n=e(74848),a=e(22803),s=e(70713),d=e(17503),o=e(92745),l=e(63142),i=e(45229),c=e(5929),p=e(51993),h=e(55376);const u=({data:v,thresholds:g,thresholdsType:E})=>{const x=(0,l.of)(r),m=(0,d.jq)(v.series),y=(0,h.yW)(v),b=E?{mode:E}:void 0;return(0,n.jsx)("div",{className:x.wrapper,children:(0,n.jsx)(s.Ay,{disableHeight:!0,children:({width:D})=>(0,n.jsx)("div",{style:{width:D},children:m?(0,n.jsx)(c.y,{statusMessage:y,data:v.series,eventBus:i.A,height:300,width:D,timeRange:v.timeRange,timeZone:"browser",onChangeTime:()=>{},splitOpenFn:()=>{},loadingState:v.state,thresholdsConfig:g,thresholdsStyle:b}):(0,n.jsxs)("div",{className:x.instantVectorResultWrapper,children:[(0,n.jsx)("header",{className:x.title,children:(0,n.jsx)(o.x6,{i18nKey:"alerting.viz-wrapper.table",children:"Table"})}),(0,n.jsx)(p.GX,{series:v.series})]})})})})},r=v=>({wrapper:(0,a.css)({width:"100%",position:"relative"}),instantVectorResultWrapper:(0,a.css)({border:`solid 1px ${v.colors.border.medium}`,borderRadius:v.shape.radius.default,padding:0,display:"flex",flexDirection:"column",flexWrap:"nowrap"}),title:(0,a.css)({label:"panel-title",padding:v.spacing(),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:v.typography.h6.fontSize,fontWeight:v.typography.h6.fontWeight})})},89223:(ne,j,e)=>{"use strict";e.d(j,{P:()=>o});var n=e(92745),a=e(55860);class s extends Error{constructor(i,c){super(c),this.type=i}}class d{constructor(){this.rootName="general"}validateNewDashboardName(i,c){return this.validate(i,c,(0,n.t)("manage-dashboards.validation-srv.message-same-name","A dashboard or a folder with the same name already exists"))}validateNewFolderName(i,c){const p=c?(0,n.t)("manage-dashboards.validation-srv.message-same-name-current-folder","A dashboard or a folder with the same name already exists in the current folder"):(0,n.t)("manage-dashboards.validation-srv.message-same-name-general","A folder or dashboard with the same name already exists in the root folder");return this.validate(c||this.rootName,i,p)}async validate(i,c,p){c=(c||"").trim();const h=c.toLowerCase();if(c.length===0)throw new s("REQUIRED",(0,n.t)("manage-dashboards.validation-srv.message-name-required","Name is required"));if(h===this.rootName)throw new s("EXISTING",(0,n.t)("manage-dashboards.validation-srv.message-reserved-name","This is a reserved name and cannot be used for a folder."));const r=await(0,a.S)().search({kind:["dashboard","folder"],query:c,location:i||"general"});for(const v of r.view)if(h===v.name.toLowerCase())throw new s("EXISTING",p)}}const o=new d},89224:(ne,j,e)=>{"use strict";e.d(j,{Ay:()=>h,FC:()=>i,XM:()=>d,io:()=>l,nF:()=>o,rG:()=>c});var n=e(65307);const a={},s=(0,n.Z0)({name:"panels",initialState:a,reducers:{panelModelAndPluginReady:(u,r)=>{u[r.payload.key]={plugin:r.payload.plugin}},changePanelKey:(u,r)=>{u[r.payload.newKey]=u[r.payload.oldKey],delete u[r.payload.oldKey]},removePanel:(u,r)=>{delete u[r.payload.key]},removeAllPanels:u=>{Object.keys(u).forEach(r=>delete u[r])},setPanelInstanceState:(u,r)=>{u[r.payload.key].instanceState=r.payload.value}}}),{panelModelAndPluginReady:d,setPanelInstanceState:o,changePanelKey:l,removePanel:i,removeAllPanels:c}=s.actions,h={panels:s.reducer}},89381:(ne,j,e)=>{"use strict";e.d(j,{h:()=>s});var n=e(96540),a=e(78529);const s=(d,o)=>(0,n.useMemo)(()=>(0,a.YV)(d,o),[d,o])},89409:(ne,j,e)=>{"use strict";e.d(j,{t3:()=>C,iL:()=>P,fn:()=>T});var n=e(74848),a=e(22803),s=e(92745),d=e(63142),o=e(41654),l=e(7895),i=e(76319),c=e(27963),p=e(92948),h=e(96540),u=e(36490),r=e(66404),v=e(15130),g=e(93922),E=e(52763),x=e(18857),m=e(30703);function y({orgs:I,onSelectChange:B}){const U=(0,d.of)(b),{orgId:W}=v.TP.user,V=(0,h.useMemo)(()=>I.map(F=>({label:F.name,description:F.role,value:F})),[I]),z=(0,h.useMemo)(()=>V.find(F=>F.value.orgId===W),[V,W]),[R,O]=(0,h.useState)(()=>z),N=F=>{O(F),B(F)};return(0,n.jsx)(x.l6,{"aria-label":(0,s.t)("navigation.org-switcher.aria-label","Change organization"),width:"auto",value:R,prefix:(0,n.jsx)(m.I,{className:"prefix-icon",name:"building"}),className:U.select,options:V,onChange:N})}const b=I=>({select:(0,a.css)({border:"none",background:"none",color:I.colors.text.secondary,"&:hover":{color:I.colors.text.primary,"& .prefix-icon":(0,a.css)({color:I.colors.text.primary})}})});function D(){const I=(0,E.wA)(),B=(0,E.d4)(W=>W.organization.userOrgs),U=W=>{W.value&&((0,g.bA)(W.value.orgId),u.Ny.push(`/?orgId=${W.value.orgId}`),window.location.reload())};return(0,h.useEffect)(()=>{v.TP.isSignedIn&&!(v.TP.user.authenticatedBy==="apikey"||v.TP.user.authenticatedBy==="render")&&I((0,g.wV)())},[I]),B?.length<=1?(0,n.jsx)(r.E,{truncate:!0,children:p.M.AppTitle}):(0,n.jsx)(y,{orgs:B,onSelectChange:U})}var f=e(31937);const C="dock-menu-button",P="mega-menu-header-toggle";function T({handleMegaMenu:I,handleDockedMenu:B,onClose:U}){const W=(0,d.$j)(),{chrome:V}=(0,c.Il)(),z=V.useState(),R=M(W);return(0,n.jsxs)("div",{className:R.header,children:[(0,n.jsxs)(o.B,{alignItems:"center",minWidth:0,gap:.25,children:[(0,n.jsx)(l.I,{narrow:!0,id:P,onClick:I,tooltip:(0,s.t)("navigation.megamenu.close","Close menu"),children:(0,n.jsx)(p.M.MenuLogo,{className:R.img})}),(0,n.jsx)(D,{})]}),(0,n.jsx)(i.K,{id:C,className:R.dockMenuButton,tooltip:z.megaMenuDocked?(0,s.t)("navigation.megamenu.undock","Undock menu"):(0,s.t)("navigation.megamenu.dock","Dock menu"),name:"web-section-alt",onClick:B,variant:"secondary"}),(0,n.jsx)(i.K,{className:R.mobileCloseButton,tooltip:(0,s.t)("navigation.megamenu.close","Close menu"),name:"times",onClick:U,size:"xl",variant:"secondary"})]})}T.displayName="MegaMenuHeader";const M=I=>({dockMenuButton:(0,a.css)({display:"none",[I.breakpoints.up("xl")]:{display:"inline-flex"}}),header:(0,a.css)({alignItems:"center",borderBottom:`1px solid ${I.colors.border.weak}`,display:"flex",gap:I.spacing(1),justifyContent:"space-between",padding:I.spacing(0,1,0,.75),height:(0,f.vn)(),flexShrink:0}),img:(0,a.css)({alignSelf:"center",height:I.spacing(3),width:I.spacing(3)}),mobileCloseButton:(0,a.css)({[I.breakpoints.up("md")]:{display:"none"}})})},89460:(ne,j,e)=>{"use strict";e.d(j,{A:()=>o,c:()=>d});var n=e(22803),a=e(65240),s=e(65642);const d=(0,a.N)(()=>o(s.$W.theme2)),o=l=>({heading:(0,n.css)({fontSize:l.typography.body.fontSize,marginBottom:l.spacing(1)}),wrap:(0,n.css)({display:"flex",flexDirection:"column",height:"100%",width:"100%",flex:"1 1 0",minHeight:0}),toolbar:(0,n.css)({display:"flex",width:"100%",flexGrow:0,alignItems:"center",justifyContent:"flex-end",marginBottom:l.v1.spacing.sm}),toolbarItem:(0,n.css)({marginLeft:l.v1.spacing.md}),content:(0,n.css)({flexGrow:1,height:"100%"}),editor:(0,n.css)({fontFamily:"monospace",height:"100%",flexGrow:1}),viewer:(0,n.css)({overflow:"scroll"}),dataFrameSelect:(0,n.css)({flexGrow:2}),leftActions:(0,n.css)({display:"flex",flexGrow:1,maxWidth:"85%","@media (max-width: 1345px)":{maxWidth:"75%"}}),options:(0,n.css)({paddingTop:l.v1.spacing.sm}),dataDisplayOptions:(0,n.css)({flexGrow:1,minWidth:"300px",marginRight:l.v1.spacing.sm}),selects:(0,n.css)({display:"flex","> *":{marginRight:l.v1.spacing.sm}})})},89467:(ne,j,e)=>{"use strict";e.d(j,{a:()=>o});var n=e(74848),a=e(96540),s=e(63142),d=e(18857);function o({value:l,placeholder:i="",options:c=[],onChange:p,onClickOutside:h,loadOptions:u=void 0,width:r,noOptionsMessage:v="",allowCustomValue:g=!1,allowEmptyValue:E=!1,...x}){const m=(0,a.useRef)(null),y=(0,s.$j)();let b=r>0?r/y.spacing.gridSize:void 0,D,f={};return u?(D=d.DW,f={loadOptions:u,defaultOptions:!0}):D=d.l6,(0,n.jsx)("div",{...x,ref:m,children:(0,n.jsx)(D,{width:b,noOptionsMessage:v,placeholder:i,autoFocus:!0,isOpen:!0,onChange:p,options:c,value:l,closeMenuOnSelect:!1,onCloseMenu:()=>{if(m&&m.current){const C=m.current.querySelector('input[id^="react-select-"]');C&&(C.value||E)?p({value:C.value,label:C.value}):h()}},allowCustomValue:g,...f})})}},89599:(ne,j,e)=>{"use strict";e.d(j,{S:()=>c,a:()=>i});var n=e(74848),a=e(22803),s=e(96540),d=e(63142),o=e(76319);const l=p=>({collapse:(0,a.css)({label:"collapse",marginBottom:p.spacing(1),backgroundColor:p.colors.background.primary,border:`1px solid ${p.colors.border.weak}`,position:"relative",borderRadius:p.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,a.css)({label:"collapse__body",padding:p.spacing(p.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,a.css)({label:"bodyContentWrapper",flex:1}),loader:(0,a.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:p.spacing(.5)}),loaderActive:(0,a.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",[p.transitions.handleMotion("no-preference","reduce")]:{animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100},[p.transitions.handleMotion("reduce")]:{animationDuration:"10s",animationIterationCount:20},left:"-25%",background:p.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,a.css)({cursor:"pointer",label:"collapse__header",padding:p.spacing(1),display:"flex",gap:p.spacing(1)}),button:(0,a.css)({marginRight:0}),headerLabel:(0,a.css)({label:"collapse__header-label",fontWeight:p.typography.fontWeightMedium,fontSize:p.typography.size.md,display:"flex",flex:1})}),i=({isOpen:p,onToggle:h,...u})=>{const[r,v]=(0,s.useState)(p);return(0,n.jsx)(c,{isOpen:r,...u,onToggle:()=>{v(!r),h&&h(!r)}})},c=({isOpen:p,label:h,loading:u,onToggle:r,className:v,children:g})=>{const E=(0,d.of)(l),x=(0,s.useId)(),m=(0,s.useId)(),y=()=>{r&&r(!p)},b=(0,a.cx)([E.collapse,v]),D=u?(0,a.cx)([E.loader,E.loaderActive]):E.loader;return(0,n.jsxs)("div",{className:b,children:[(0,n.jsxs)("div",{className:E.header,onClick:y,children:[(0,n.jsx)(o.K,{"aria-describedby":x,"aria-expanded":p,"aria-controls":m,className:E.button,"aria-labelledby":x,name:p?"angle-down":"angle-right"}),(0,n.jsx)("div",{id:x,className:E.headerLabel,children:h})]}),p&&(0,n.jsxs)("div",{className:E.collapseBody,id:m,children:[(0,n.jsx)("div",{className:D}),(0,n.jsx)("div",{className:E.bodyContentWrapper,children:g})]})]})};c.displayName="Collapse"},89640:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(63704),o=e(92138),l=e(63142),i=e(30703),c=e(66969),p=e(20941);const h={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},u=(0,s.forwardRef)(({href:v,color:g="link",external:E=!1,inline:x=!0,variant:m="body",weight:y,icon:b,children:D,...f},C)=>{const P=d.sQ.sanitizeUrl(v??""),T=(0,l.$j)(),M=r(T,x,m,y,g),I=b||"external-link-alt";if(E)return(0,n.jsxs)("a",{href:P,ref:C,...f,target:"_blank",rel:"noreferrer",className:M,children:[D,(0,n.jsx)(i.I,{size:h[m]||"md",name:I})]});const B=o.I.stripBaseFromUrl(P);return(0,n.jsxs)(p.N,{ref:C,href:B,...f,className:M,children:[D,b&&(0,n.jsx)(i.I,{name:b,size:h[m]||"md"})]})});u.displayName="TextLink";const r=(v,g,E,x,m)=>(0,a.css)([E&&{...v.typography[E]},x&&{fontWeight:(0,c.iV)(x,v)},m&&{color:v.colors.text[m]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:v.colors.text.link}},g&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},89772:(ne,j,e)=>{"use strict";e.d(j,{$:()=>D});var n=e(74848),a=e(22803),s=e(43107),d=e(96540),o=e(6773),l=e(92745),i=e(63142),c=e(65240),p=e(60208),h=e(54314),u=e(13409),r=e(2543);const g=({hue:C,selectedColor:P,onColorSelect:T,...M})=>{const I=(0,r.upperFirst)(C.name),B=(0,i.of)(E),U=(0,d.useMemo)(()=>[...C.shades].reverse(),[C.shades]);return(0,n.jsxs)("div",{className:B.colorRow,children:[(0,n.jsx)("div",{className:B.colorLabel,children:I}),(0,n.jsx)("div",{...M,className:B.swatchRow,children:U.map(W=>(0,n.jsx)(u.q,{"aria-label":W.name,variant:W.primary?u.h.Large:u.h.Small,isSelected:W.name===P,color:W.color,onClick:()=>T(W.name)},W.name))})]})},E=C=>({colorRow:(0,a.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:C.spacing(2),padding:C.spacing(.5,0),"&:hover":{background:C.colors.background.secondary}}),colorLabel:(0,a.css)({paddingLeft:C.spacing(1),display:"flex",alignItems:"center"}),swatchRow:(0,a.css)({display:"flex",gap:C.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),x=({color:C,onChange:P})=>{const T=(0,i.$j)(),M=(0,i.of)(m),I=[];for(const B of T.visualization.hues)I.push((0,n.jsx)(g,{selectedColor:C,hue:B,onColorSelect:P},B.name));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:M.swatches,children:I}),(0,n.jsxs)("div",{className:M.extraColors,children:[(0,n.jsx)(u.q,{isSelected:C==="transparent",color:"rgba(0,0,0,0)",label:(0,l.t)("grafana-ui.named-colors-palette.transparent-swatch","Transparent"),onClick:()=>P("transparent")}),(0,n.jsx)(u.q,{isSelected:C==="text",color:T.colors.text.primary,label:(0,l.t)("grafana-ui.named-colors-palette.text-color-swatch","Text color"),onClick:()=>P("text")})]})]})},m=C=>({container:(0,a.css)({display:"flex",flexDirection:"column"}),extraColors:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:C.spacing(1),padding:C.spacing(1,0)}),swatches:(0,a.css)({display:"grid",flexGrow:1})});var y=e(32550);class b extends d.Component{constructor(P){super(P),this.handleChange=T=>{const{onChange:M,enableNamedColors:I,theme:B}=this.props;if(I)return M(T);M(o.MV.asHexString(B.visualization.getColorByName(T)))},this.onTabChange=T=>()=>this.setState({activePicker:T}),this.renderPicker=()=>{const{activePicker:T}=this.state,{color:M}=this.props;switch(T){case"spectrum":return(0,n.jsx)(y.A,{color:M,onChange:this.handleChange});case"palette":return(0,n.jsx)(x,{color:M,onChange:this.handleChange});default:return this.renderCustomPicker(T)}},this.renderCustomPicker=T=>{const{customPickers:M,color:I,theme:B}=this.props;return M?d.createElement(M[T].tabComponent,{color:I,theme:B,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:T}=this.props;return T?(0,n.jsx)(n.Fragment,{children:Object.keys(T).map(M=>(0,n.jsx)(p.o,{label:T[M].name,onChangeTab:this.onTabChange(M)},M))}):null},this.state={activePicker:"palette"}}render(){const{theme:P}=this.props,{activePicker:T}=this.state,M=f(P);return(0,n.jsx)(s.n1,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,n.jsxs)("div",{tabIndex:-1,className:M.colorPickerPopover,children:[(0,n.jsxs)(h.U,{children:[(0,n.jsx)(p.o,{label:(0,l.t)("grafana-ui.color-picker-popover.palette-tab","Colors"),onChangeTab:this.onTabChange("palette"),active:T==="palette"}),(0,n.jsx)(p.o,{label:(0,l.t)("grafana-ui.color-picker-popover.spectrum-tab","Custom"),onChangeTab:this.onTabChange("spectrum"),active:T==="spectrum"}),this.renderCustomPickerTabs()]}),(0,n.jsx)("div",{className:M.colorPickerPopoverContent,children:this.renderPicker()})]})})}}const D=(0,i.cV)(b);D.displayName="ColorPickerPopover";const f=(0,c.N)(C=>({colorPickerPopover:(0,a.css)({borderRadius:C.shape.radius.default,boxShadow:C.shadows.z3,background:C.colors.background.elevated,padding:C.spacing(.5),border:`1px solid ${C.colors.border.weak}`}),colorPickerPopoverContent:(0,a.css)({width:"246px",fontSize:C.typography.bodySmall.fontSize,minHeight:"184px",height:"290px",padding:C.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,a.css)({display:"flex",width:"100%",borderRadius:`${C.shape.radius.default} ${C.shape.radius.default} 0 0`})}))},89931:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>u});var n=e(74848),a=e(1906),s=e(92745),d=e(34999),o=e(89640),l=e(18027),i=e(97095),c=e(18857),p=e(63527),h=e(4651);const u=({labelWidth:r="auto",onChange:v,app:g,refIds:E,query:x})=>{const m=h.Cu.find(I=>I.value===x.reducer),y=I=>{v({...x,expression:I.value})},b=I=>{v({...x,reducer:I.value})},D=I=>{v({...x,settings:I})},f=I=>{let B;switch(I.value){case h.Mt.Strict:B={mode:h.Mt.Strict};break;case h.Mt.ReplaceNonNumbers:let U=0;x.settings?.mode===h.Mt.ReplaceNonNumbers&&(U=x.settings?.replaceWithValue??0),B={mode:h.Mt.ReplaceNonNumbers,replaceWithValue:U};break;default:B={mode:I.value}}D(B)},C=I=>{const B=I.currentTarget.valueAsNumber;D({mode:h.Mt.ReplaceNonNumbers,replaceWithValue:B??0})},P=x.settings?.mode??h.Mt.Strict,T=()=>{if(P===h.Mt.ReplaceNonNumbers)return(0,n.jsx)(l.I,{label:(0,s.t)("expressions.reduce.replace-with-number.label-replace-with","Replace with"),labelWidth:r,children:(0,n.jsx)(p.p,{type:"number",width:10,onChange:C,value:x.settings?.replaceWithValue??0})})},M=()=>{const I=g===a.Jk.UnifiedAlerting;return P!==h.Mt.Strict||I?null:(0,n.jsx)(d.F,{title:(0,s.t)("reduce.strictMode.title","Strict Mode Behaviour"),severity:"info",children:(0,n.jsxs)(s.x6,{i18nKey:"reduce.strictMode.description",children:["When ",(0,n.jsx)("code",{children:"Reduce Strict mode"})," is used, the ",(0,n.jsx)("code",{children:"fill(null)"})," function (InfluxQL) will result in"," ",(0,n.jsx)("code",{children:"NaN"}),"."," ",(0,n.jsx)(o.Y,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/query-transform-data/expression-queries/#reduction-modes",children:"See the documentation for more details."})]})})};return(0,n.jsxs)(n.Fragment,{children:[M(),(0,n.jsx)(i.C,{children:(0,n.jsx)(l.I,{label:(0,s.t)("expressions.reduce.label-input","Input"),labelWidth:r,children:(0,n.jsx)(c.l6,{onChange:y,options:E,value:x.expression,width:"auto"})})}),(0,n.jsxs)(i.C,{children:[(0,n.jsx)(l.I,{label:(0,s.t)("expressions.reduce.label-function","Function"),labelWidth:r,children:(0,n.jsx)(c.l6,{options:h.Cu,value:m,onChange:b,width:20})}),(0,n.jsx)(l.I,{label:(0,s.t)("expressions.reduce.label-mode","Mode"),labelWidth:r,children:(0,n.jsx)(c.l6,{onChange:f,options:h.HZ,value:P,width:25})}),T()]})]})}},90157:(ne,j,e)=>{"use strict";e.d(j,{Jv:()=>d});const n={filters:[],groupBy:[]};var a=(l=>(l.Instant="instant",l.Range="range",l))(a||{}),s=(l=>(l.Done="done",l.Error="error",l.Pending="pending",l.Streaming="streaming",l))(s||{}),d=(l=>(l.Raw="raw",l.Spans="spans",l.Traces="traces",l))(d||{}),o=(l=>(l.Event="event",l.Instrumentation="instrumentation",l.Intrinsic="intrinsic",l.Link="link",l.Resource="resource",l.Span="span",l.Unscoped="unscoped",l))(o||{})},90176:(ne,j,e)=>{"use strict";e.d(j,{YD:()=>d,dy:()=>a,kD:()=>s});var n=e(739),a=(l=>(l.Prepare="prepare",l.Calculate="calculate",l.Modify="modify",l))(a||{}),s=(l=>(l.Heading="heading",l.Distance="distance",l.Area="area",l))(s||{}),d=(l=>(l.AsLine="asLine",l.LineBuilder="lineBuilder",l))(d||{});const o={action:"prepare",source:{mode:n.aG.Auto}}},90186:(ne,j,e)=>{"use strict";e.d(j,{Ys:()=>X,DI:()=>J});var n=e(74848),a=e(22803),s=e(93374),d=e(80011),o=e(25229),l=e(92745),i=e(63142),c=e(45967),p=e(55555),h=e(11504),u=e(75640),r=e(29609),v=e(15629),g=e(40165),E=e(83750);function x(ae){const le=(0,i.of)(m),{annotations:L}=ae,ie=(0,u.gO)(L);return L.length===0?null:(0,n.jsx)("div",{className:le.annotations,children:L.map(([oe,ue])=>(0,n.jsx)(E.s,{annotationKey:oe,value:ue,valueLink:ie.get(oe)},oe))})}const m=()=>({annotations:(0,a.css)({marginTop:"46px"})});var y=e(96540),b=e(63704),D=e(41071),f=e(45861),C=e(41654),P=e(16692),T=e(58138),M=e(95443),I=e(52161),B=e(77256);const W=({rule:ae,rulesSource:le})=>{const{group:L}=ae,{StateHistoryModal:ie,showStateHistoryModal:oe}=(0,T.G)(),ue=(0,D.i)(),[ye,fe]=(0,P.mh)(ae,P.j5.Explore),Ee=[],Ae=(0,r.YN)(L);if((0,I.Eb)(le)&&ye&&fe&&!Ae&&Ee.push((0,n.jsx)(f.z9,{size:"sm",variant:"primary",icon:"chart-line",target:"_blank",href:(0,B.Yp)(le,ae.query),children:(0,n.jsx)(l.x6,{i18nKey:"alerting.rule-details-buttons.see-graph",children:"See graph"})},"explore")),ae.annotations[M.YH.runbookURL]&&Ee.push((0,n.jsx)(f.z9,{size:"sm",variant:"primary",icon:"book",target:"_blank",href:b.sQ.sanitizeUrl(ae.annotations[M.YH.runbookURL]),children:(0,n.jsx)(l.x6,{i18nKey:"alerting.rule-details-buttons.view-runbook",children:"View runbook"})},"runbook")),ae.annotations[M.YH.dashboardUID]){const Ge=ae.annotations[M.YH.dashboardUID];if(Ge){Ee.push((0,n.jsx)(f.z9,{size:"sm",variant:"primary",icon:"apps",href:`d/${encodeURIComponent(Ge)}`,onClick:()=>{ue(ae.name)},children:(0,n.jsx)(l.x6,{i18nKey:"alerting.rule-details-buttons.go-to-dashboard",children:"Go to dashboard"})},"dashboard"));const Fe=ae.annotations[M.YH.panelID];Fe&&Ee.push((0,n.jsx)(f.z9,{size:"sm",variant:"primary",icon:"apps",href:`d/${encodeURIComponent(Ge)}?viewPanel=${encodeURIComponent(Fe)}`,onClick:()=>{ue(ae.name)},children:(0,n.jsx)(l.x6,{i18nKey:"alerting.rule-details-buttons.go-to-panel",children:"Go to panel"})},"panel"))}}return r.p.grafana.alertingRule(ae.rulerRule)&&Ee.push((0,n.jsxs)(y.Fragment,{children:[(0,n.jsx)(f.$n,{size:"sm",icon:"history",onClick:()=>r.p.grafana.rule(ae.rulerRule)&&oe(ae.rulerRule),children:(0,n.jsx)(l.x6,{i18nKey:"alerting.rule-details-buttons.show-state-history",children:"Show state history"})}),ie]},"history")),Ee.length?(0,n.jsx)(C.B,{children:Ee}):null};var V=e(78282),z=e(4651);function R(ae){const{rulesSource:le,rule:L}=ae,ie=(0,i.of)(O),oe=(0,y.useMemo)(()=>{if((0,I.Eb)(le))return[{name:le.name,icon:le.meta.info.logos.small}];if(r.p.grafana.rule(L.rulerRule)){const{data:ue}=L.rulerRule.grafana_alert,ye=ue.reduce((fe,Ee)=>{const Ae=(0,V.l)().getInstanceSettings(Ee.datasourceUid);return!Ae||Ae.uid===z.Uj||(fe[Ae.name]={name:Ae.name,icon:Ae.meta.info.logos.small}),fe},{});return Object.values(ye)}return[]},[L,le]);return oe.length===0?null:(0,n.jsx)(g.X,{label:(0,l.t)("alerting.rule-details-data-sources.label-data-source","Data source"),children:oe.map(({name:ue,icon:ye},fe)=>(0,n.jsxs)("div",{children:[ye&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{alt:`${ue} datasource logo`,className:ie.dataSourceIcon,src:ye})," "]}),ue]},ue))})}function O(ae){const le=ae.spacing(2);return{dataSourceIcon:(0,a.css)({width:le,height:le})}}var N=e(28848),F=e(29317),G=e(35748),H=e(56103),K=e(35458),w=e(77236),Q=e(16591);const k=({language:ae,expr:le})=>{const L=(0,y.useMemo)(()=>[(0,H.D)({onlyIn:oe=>"type"in oe&&oe.type==="code_block",getSyntax:()=>ae},{...N.languages,[ae]:ae==="logql"?w.Ay:G.n6})],[ae]),ie=(0,y.useMemo)(()=>(0,K.mO)(le),[le]);return(0,n.jsx)(F.Editor,{"data-testid":"expression-editor",plugins:L,value:ie})},te=({expression:ae,rulesSource:le})=>{const L=(0,i.of)(q);return(0,n.jsx)(Q.L,{className:(0,a.cx)(L.well,"slate-query-field"),children:(0,I.Eb)(le)?(0,n.jsx)(k,{expr:ae,language:le.type===I.ol.Loki?"logql":"promql"}):ae})},q=ae=>({well:(0,a.css)({fontFamily:ae.typography.fontFamilyMonospace})});function se(ae){const{annotations:le,rulesSource:L,rule:ie}=ae,oe=re();return(0,I.Eb)(L)?(0,n.jsx)(g.X,{label:(0,l.t)("alerting.rule-details-expression.label-expression","Expression"),horizontal:!0,className:(0,a.cx)({[oe.exprRow]:!!le.length}),children:(0,n.jsx)(te,{expression:ie.query,rulesSource:L})}):null}const re=()=>({exprRow:(0,a.css)({marginBottom:"46px"})});var Y=e(66773);const X=15,J=({rule:ae})=>{const le=(0,i.of)(ee),{namespace:{rulesSource:L}}=ae,ie=(0,u.Hx)(ae.annotations),oe=r.p.any.alertingRule(ae.rulerRule)||r.R$.alertingRule(ae.promRule);return(0,n.jsxs)("div",{children:[(0,n.jsx)(W,{rule:ae,rulesSource:L}),(0,n.jsxs)("div",{className:le.wrapper,children:[(0,n.jsxs)("div",{className:le.leftSide,children:[(0,n.jsx)(_,{rule:ae}),!!ae.labels&&!!Object.keys(ae.labels).length&&(0,n.jsx)(g.X,{label:(0,l.t)("alerting.rule-details.label-labels","Labels"),horizontal:!0,children:(0,n.jsx)(s.m,{labels:ae.labels})}),(0,n.jsx)(se,{rulesSource:L,rule:ae,annotations:ie}),(0,n.jsx)(x,{annotations:ie})]}),(0,n.jsx)("div",{className:le.rightSide,children:(0,n.jsx)(R,{rulesSource:L,rule:ae})})]}),oe&&(0,n.jsx)(g.X,{label:(0,l.t)("alerting.rule-details.label-instances","Instances"),horizontal:!0,children:(0,n.jsx)(Y.s,{rule:ae,itemsDisplayLimit:X})})]})},_=({rule:ae})=>{const le=ae.group.interval,L=ae.promRule?.lastEvaluation,ie=ae.promRule?.evaluationTime,oe=r.p.grafana.recordingRule(ae.rulerRule)?ae.rulerRule?.grafana_alert.record?.metric:void 0,ue=(0,h.G)(ae),ye=r.p.grafana.alertingRule(ae.rulerRule)?ae.rulerRule.keep_firing_for:void 0;return(0,n.jsxs)(n.Fragment,{children:[oe&&(0,n.jsx)(g.X,{label:(0,l.t)("alerting.evaluation-behavior-summary.label-metric","Metric"),horizontal:!0,children:oe}),le&&(0,n.jsx)(g.X,{label:(0,l.t)("alerting.evaluation-behavior-summary.label-evaluate","Evaluate"),horizontal:!0,children:(0,n.jsxs)(l.x6,{i18nKey:"alerting.evaluation-behavior-summary.evaluate",values:{interval:le},children:["Every ",{interval:le}]})}),ue&&(0,n.jsx)(g.X,{label:(0,l.t)("alerting.evaluation-behavior-summary.label-pending-period","Pending period"),horizontal:!0,children:ue}),ye&&(0,n.jsx)(g.X,{label:(0,l.t)("alerting.rule-details.keep-firing-for","Keep firing for"),horizontal:!0,children:ye}),L&&!(0,v.mo)(L)&&(0,n.jsx)(g.X,{label:(0,l.t)("alerting.evaluation-behavior-summary.label-last-evaluation","Last evaluation"),horizontal:!0,children:(0,n.jsx)(c.m,{placement:"top",content:`${(0,d.LE)(L,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info",children:(0,n.jsx)("span",{children:(0,l.t)("alerting.rule-details.last-evaluation-ago","{{time}} ago",{time:(0,o.KQ)(L).locale("en").fromNow(!0)})})})}),L&&!(0,v.mo)(L)&&ie!==void 0&&(0,n.jsx)(g.X,{label:(0,l.t)("alerting.evaluation-behavior-summary.label-evaluation-time","Evaluation time"),horizontal:!0,children:(0,n.jsx)(c.m,{placement:"top",content:`${ie}s`,theme:"info",children:(0,n.jsx)("span",{children:(0,p.g)({timeInMs:ie,humanize:!0})})})})]})},ee=ae=>({wrapper:(0,a.css)({display:"flex",flexDirection:"row",[ae.breakpoints.down("md")]:{flexDirection:"column"}}),leftSide:(0,a.css)({flex:1}),rightSide:(0,a.css)({[ae.breakpoints.up("md")]:{paddingLeft:"90px",width:"300px"}})})},90232:(ne,j,e)=>{"use strict";e.d(j,{y:()=>E});var n=e(74848),a=e(22803),s=e(96540),d=e(40996),o=e(28105),l=e(92745),i=e(50201),c=e(34213),p=e(89640),h=e(41654),u=e(63142),r=e(70905),v=e(55290),g=e(24381);const E=({onClickCard:m,searchString:y,sortDirection:b,panelFilter:D,folderFilter:f,showSecondaryActions:C,currentPanelId:P,perPage:T=40})=>{const M=(0,u.of)(x),[{libraryPanels:I,page:B,perPage:U,numberOfPages:W,loadingState:V,currentPanelId:z},R]=(0,s.useReducer)(g.w_,{...g.Xb,currentPanelId:P,perPage:T}),O=(0,s.useMemo)(()=>(0,v.QC)(R),[R]),N=(0,s.useRef)();(0,d.A)(()=>{N.current&&N.current.abort();const K=new AbortController;N.current=K,O((0,v.IF)({searchString:y,sortDirection:b,panelFilter:D,folderFilterUIDs:f,page:B,perPage:U,currentPanelId:z}),K)},300,[y,b,D,f,B,O]),(0,s.useEffect)(()=>()=>{N.current&&N.current.abort()},[]);const F=({uid:K})=>O((0,v.h4)(K,{searchString:y,sortDirection:b,panelFilter:D,folderFilterUIDs:f,page:B,perPage:U})),G=K=>O((0,g.yd)({page:K}));return!(y||D?.length||f?.length)&&V===o.Gu.Done&&I.length<1?(0,n.jsx)(i.p,{variant:"call-to-action",message:(0,l.t)("library-panel.empty-state.message","You haven't created any library panels yet"),children:(0,n.jsxs)(l.x6,{i18nKey:"library-panel.empty-state.more-info",children:["Create a library panel from any existing dashboard panel through the panel context menu."," ",(0,n.jsx)(p.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/manage-library-panels/#create-a-library-panel",children:"Learn more"})]})}):(0,n.jsxs)(h.B,{direction:"column",wrap:"nowrap",children:[V===o.Gu.Loading?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.E.Skeleton,{showSecondaryActions:C}),(0,n.jsx)(r.E.Skeleton,{showSecondaryActions:C}),(0,n.jsx)(r.E.Skeleton,{showSecondaryActions:C})]}):I.length<1?(0,n.jsx)(i.p,{variant:"not-found",message:(0,l.t)("library-panels.empty-state.message","No library panels found")}):I?.map((K,w)=>(0,n.jsx)(r.E,{libraryPanel:K,onDelete:F,onClick:m,showSecondaryActions:C},`library-panel=${w}`)),I.length?(0,n.jsx)("div",{className:M.pagination,children:(0,n.jsx)(c.d,{currentPage:B,numberOfPages:W,onNavigate:G,hideWhenSinglePage:!0})}):null]})},x=m=>({pagination:(0,a.css)({alignSelf:"center",marginTop:m.spacing(1)})})},90267:(ne,j,e)=>{"use strict";e.d(j,{G:()=>m});var n=e(95004),a=e(92745),s=e(739),d=e(93139),o=e(74848),l=e(22803),i=e(96540),c=e(51898),p=e(63142),h=e(34999),u=e(30703),r=e(18857),v=e(87039);const g="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",E=({value:y,onChange:b,context:D,item:f,id:C})=>{const[P,T]=(0,i.useState)(),M=[{value:s.aG.Auto,label:(0,a.t)("geo.location-more-editor.mode-options.label-auto","Auto"),ariaLabel:c.Tp.components.Transforms.SpatialOperations.location.autoOption,description:(0,a.t)("geo.location-more-editor.mode-options.description-auto","Automatically identify location data based on default field names")},{value:s.aG.Coords,label:(0,a.t)("geo.location-more-editor.mode-options.label-coords","Coords"),ariaLabel:c.Tp.components.Transforms.SpatialOperations.location.coords.option,description:(0,a.t)("geo.location-more-editor.mode-options.description-coords","Specify latitude and longitude fields")},{value:s.aG.Geohash,label:(0,a.t)("geo.location-more-editor.mode-options.label-geohash","Geohash"),ariaLabel:c.Tp.components.Transforms.SpatialOperations.location.geohash.option,description:(0,a.t)("geo.location-more-editor.mode-options.description-geohash","Specify geohash field")},{value:s.aG.Lookup,label:(0,a.t)("geo.location-more-editor.mode-options.label-lookup","Lookup"),ariaLabel:c.Tp.components.Transforms.SpatialOperations.location.lookup.option,description:(0,a.t)("geo.location-more-editor.mode-options.description-lookup","Specify Gazetteer and lookup field")}];(0,i.useEffect)(()=>{f.settings?.source&&f.settings?.data?.length&&f.settings.data[0]&&(0,v.nE)(f.settings.source).then(U=>{f.settings&&f.settings.data&&T((0,v.FM)(f.settings.data[0],U))})},[f.settings]);const I=(0,p.of)(x),B=()=>{if(P){if(P.warning)return(0,o.jsx)(h.F,{title:P.warning,severity:"warning",buttonContent:(0,o.jsx)(u.I,{name:"question-circle",size:"xl"}),className:I.alert,onRemove:()=>{const U=window.open(g,"_blank","noopener,noreferrer");U&&(U.opener=null)}});if(y===s.aG.Auto&&P.description)return(0,o.jsx)("span",{children:P.description})}return null};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.l6,{inputId:C,options:M,value:y,onChange:U=>{b(U.value)}}),B()]})},x=y=>({alert:(0,l.css)({"& div":{padding:y.spacing(.5)},marginBottom:"0px",marginTop:"5px",padding:y.spacing(.25)})});function m(y,b,D,f,C){switch(D.addCustomEditor({id:"modeEditor",path:`${b}mode`,name:(0,a.t)("geo.location-editor.name-location-mode","Location Mode"),editor:E,settings:{data:C,source:f}}),f?.mode){case s.aG.Coords:D.addFieldNamePicker({path:`${b}latitude`,name:(0,a.t)("geo.location-editor.name-latitude-field","Latitude field"),settings:{filter:P=>P.type===n.PU.number,noFieldsMessage:(0,a.t)("geo.location-editor.latitude-field.no-fields-message","No numeric fields found")}}).addFieldNamePicker({path:`${b}longitude`,name:(0,a.t)("geo.location-editor.name-longitude-field","Longitude field"),settings:{filter:P=>P.type===n.PU.number,noFieldsMessage:(0,a.t)("geo.location-editor.longitude-field.no-fields-message","No numeric fields found")}});break;case s.aG.Geohash:D.addFieldNamePicker({path:`${b}geohash`,name:(0,a.t)("geo.location-editor.name-geohash-field","Geohash field"),settings:{filter:P=>P.type===n.PU.string,noFieldsMessage:(0,a.t)("geo.location-editor.geohash-field.no-fields-message","No strings fields found")}});break;case s.aG.Lookup:D.addFieldNamePicker({path:`${b}lookup`,name:(0,a.t)("geo.location-editor.name-lookup-field","Lookup field"),settings:{filter:P=>P.type===n.PU.string,noFieldsMessage:(0,a.t)("geo.location-editor.lookup-field.no-fields-message","No strings fields found")}}).addCustomEditor({id:"gazetteer",path:`${b}gazetteer`,name:(0,a.t)("geo.location-editor.name-gazetteer","Gazetteer"),editor:d.G})}}},90297:(ne,j,e)=>{"use strict";e.d(j,{a:()=>p,x:()=>i});var n=e(32899),a=e(92745),s=e(43173),d=e(45229),o=e(68528),l=e(2924);async function i(h,u,r){if(s.$.featureToggles.provisioning){const v=await h(l.Zt.endpoints.getFolder.initiate({name:u}));return v.data&&(0,o.x)(v.data)?(d.A.publish({type:n.r1.alertWarning.name,payload:[r?.warning||(0,a.t)("folders.api.folder-delete-error-provisioned","Cannot delete provisioned folder. To remove it, delete it from the repository and synchronise to apply the changes.")]}),!0):!1}else return!1}const c={folder:0,dashboard:0,libraryPanel:0,alertRule:0},p=h=>h.reduce((u,{resource:r,count:v})=>(u[r]||(u[r]=v),u),c)},90382:(ne,j,e)=>{"use strict";e.d(j,{X:()=>n});var n=(a=>(a.None="None",a.Viewer="Viewer",a.Editor="Editor",a.Admin="Admin",a))(n||{})},90593:(ne,j,e)=>{"use strict";e.d(j,{z:()=>s});var n=e(33239),a=e(25229);const s=(d,o)=>{const l={from:(0,a.Ar)(d.from)?(0,a.KQ)(d.from):d.from,to:(0,a.Ar)(d.to)?(0,a.KQ)(d.to):d.to},i=o?o.getTimezone():void 0;return{from:n.parse(l.from,!1,i,o?.fiscalYearStartMonth),to:n.parse(l.to,!0,i,o?.fiscalYearStartMonth),raw:l}}},90666:(ne,j,e)=>{"use strict";e.d(j,{T:()=>o});var n=e(74848),a=e(22803),s=e(63142),d=e(43990);function o({children:i,spacing:c,level:p}){const h=(0,s.of)(l,c,p);return(0,n.jsx)("span",{className:(0,a.css)(h.indentor),children:i})}const l=(i,c,p)=>({indentor:(0,a.css)((0,d.Y)(i,c,h=>({paddingLeft:i.spacing(h*p)})))})},90696:(ne,j,e)=>{"use strict";e.d(j,{CU:()=>r,E7:()=>D,JX:()=>b,g6:()=>g});var n=e(2543),a=e.n(n),s=e(62467),d=e(81160),o=e(69862),l=e(16515),i=e(52645),c=e(88907),p=e(95004),h=e(92745),u=e(65642);const r={prepareAnnotation:f=>{if((0,n.isString)(f?.query)){const{query:C,...P}=f;return{...P,target:{refId:"annotation_query",query:C},mappings:{}}}return f},prepareQuery:f=>f.target,processEvents:(f,C)=>m(C,f.mappings)};function v(){return f=>f.pipe((0,o.Z)(C=>{if(!C?.length)return(0,s.of)(void 0);if(C.length===1)return(0,s.of)(C[0]);const P={interpolate:T=>T};return(0,s.of)(C).pipe(i.c.mergeTransformer.operator({},P),(0,d.T)(T=>T[0]))}))}const g=()=>[{key:"time",field:f=>f.fields.find(C=>C.type===p.PU.time),placeholder:(0,h.t)("annotations.get-annotation-event-names.placeholder.time-or-the-first-field","{{defaultField}}, or the first time field",{defaultField:"time"})},{key:"timeEnd",help:(0,h.t)("annotations.get-annotation-event-names.help.annotation-treated-as-range","When this field is defined, the annotation will be treated as a range")},{key:"title"},{key:"text",field:f=>f.fields.find(C=>C.type===p.PU.string),placeholder:(0,h.t)("annotations.get-annotation-event-names.placeholder.text-or-the-first-field","{{defaultField}}, or the first text field",{defaultField:"text"})},{key:"tags",split:",",help:(0,h.t)("annotations.get-annotation-event-names.help.results-split-on-comma","The results will be split on comma (,)")},{key:"id"}],E=[{key:"color"},{key:"isRegion"},{key:"source"}],x=[...u.$W.publicDashboardAccessToken?E:[],...g(),{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function m(f,C){return(0,s.of)(f).pipe(v(),(0,d.T)(P=>{if(!P?.length)return[];let T=!1,M=!1;const I={};for(const W of P.fields){const V=(0,l.Ct)(W,P);I[V.toLowerCase()]=W}C||(C={});const B=[];for(const W of x){const V=C[W.key]||{};if(V.source===c.V.Skip)continue;const z={key:W.key,split:W.split};if(V.source===c.V.Text)z.text=V.value;else{const R=(V.value||W.key).toLowerCase();z.field=I[R],!z.field&&W.field&&(z.field=W.field(P))}(z.field||z.text)&&(B.push(z),z.key==="time"?T=!0:z.key==="text"&&(M=!0))}if(!T||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const U=[];for(let W=0;W<P.length;W++){const V={type:"default",color:"red"};for(const z of B){let R;if(z.text)R=z.text;else if(z.field&&(R=z.field.values[W],R!==void 0&&z.regex)){const O=z.regex.exec(R);O&&(R=O[1]?O[1]:O[0])}R!=null&&(z.split&&typeof R=="string"&&(R=R.split(",")),V[z.key]=R)}U.push(V)}return U}))}const y=["loki","elasticsearch","grafana-opensearch-datasource"];function b(f){const{type:C}=f;return!(C==="datasource"||y.includes(C))}function D(f){const{type:C}=f;return y.includes(C)}},90811:(ne,j,e)=>{"use strict";e.d(j,{cC:()=>r,cb:()=>u});var n=e(74848),a=e(22803),s=e(58521),d=e(96540),o=e(74529),l=e(51898),i=e(92745),c=e(93256),p=e(15356),h=e(7895);const u=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class r extends d.PureComponent{constructor(x){super(x),this.onChangeSelect=m=>{const{onIntervalChanged:y}=this.props;y&&m.value!=null&&y(m.value)}}static{this.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"}}static{this.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"}}static{this.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"}}static{this.isLive=x=>x===r.liveOption.value}getVariant(){return this.props.isLive||this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:x,intervals:m,tooltip:y,value:b,text:D,isLoading:f,noIntervalPicker:C,width:P,showAutoInterval:T}=this.props,M=b||"",I=this.getVariant(),B=g({intervals:m,showAutoInterval:T}),U=B.find(({value:K})=>K===M),W=v(r.offOption.value);let V=U||W;V.label===W.label&&(V={value:""});const z=V.ariaLabel,R=(0,i.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:z}),O=(0,i.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),N=V.value===""?O:R,F=(0,i.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),G=(0,i.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),H=V.value===""?G:F;return(0,n.jsxs)(c.e,{className:"refresh-picker",children:[(0,n.jsx)(h.I,{"aria-label":D,tooltip:y,onClick:x,variant:I,icon:f?"spinner":"sync",style:P?{width:P}:void 0,"data-testid":l.Tp.components.RefreshPicker.runButtonV2,children:D}),!C&&(0,n.jsx)(p.f,{className:(0,a.css)({borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset"}),value:V,options:B,onChange:this.onChangeSelect,variant:I,"data-testid":l.Tp.components.RefreshPicker.intervalButtonV2,"aria-label":N,tooltip:H})]})}}function v(E){switch(E){case r.liveOption.value:return{label:(0,i.t)("refresh-picker.live-option.label","Live"),value:E,ariaLabel:(0,i.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case r.offOption.value:return{label:(0,i.t)("refresh-picker.off-option.label","Off"),value:E,ariaLabel:(0,i.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case r.autoOption.value:return{label:(0,i.t)("refresh-picker.auto-option.label",r.autoOption.label),value:E,ariaLabel:(0,i.t)("refresh-picker.auto-option.aria-label",r.autoOption.ariaLabel)}}return{label:E,value:E}}function g({intervals:E=u,showAutoInterval:x=!1}={}){const m=E.map(y=>{const b=(0,o.E9)(y),D=(0,s.a)(b);return{label:y,value:y,ariaLabel:D}});return x&&m.unshift(v(r.autoOption.value)),m.unshift(v(r.offOption.value)),m}},90856:(ne,j,e)=>{"use strict";e.d(j,{r:()=>y,s:()=>b});var n=e(74848),a=e(1906),s=e(92745),d=e(43173),o=e(44248),l=e(991),i=e(8207),c=e(45861),p=e(31286),h=e(41654),u=e(72636),r=e(37386),v=e(43243),g=e(21285),E=e(8431),x=e(92119),m=e(23244);const y=[{label:"Disabled",value:""},{label:"Day before",value:"1d"},{label:"Week before",value:"1w"},{label:"Month before",value:"1M"}];class b extends o.Bs{constructor(f){super({...f}),this.onClose=()=>{(0,x.YQ)(this).closeModal()},this.onApply=()=>{const T=this.state.panelRef.resolve();let M=T.state.$timeRange;M instanceof m.v||(M=new m.v),M.setState({timeFrom:this.state.timeFrom,timeShift:this.state.timeShift,hideTimeOverride:this.state.hideTimeOverride,compareWith:this.state.compareWith,zoomBehavior:this.state.zoomBehavior}),T.state.$timeRange||(T.setState({$timeRange:M}),(0,x.un)(T)?.runQueries()),this.onClose()};const P=this.state.panelRef.resolve().state.$timeRange;P instanceof m.v&&this.setState({timeFrom:P.state.timeFrom,timeShift:P.state.timeShift,hideTimeOverride:P.state.hideTimeOverride,compareWith:P.state.compareWith})}static{this.Component=({model:f})=>{const{timeFrom:C,timeShift:P,compareWith:T,hideTimeOverride:M}=f.useState(),I=(0,E.O)().filter(U=>U.to==="now").map((U,W)=>({label:U.display,value:U.from}));I.unshift({label:(0,s.t)("common.disabled","Disabled"),value:""});const B=[{label:(0,s.t)("common.disabled","Disabled"),value:""},{label:(0,s.t)("time-period.1_hour","1 hour"),value:"1h"},{label:(0,s.t)("time-period.6_hours","6 hours"),value:"6h"},{label:(0,s.t)("time-period.12_hours","12 hours"),value:"12h"},{label:(0,s.t)("time-period.1_day","1 day"),value:"24h"},{label:(0,s.t)("time-period.7_days","7 days"),value:"7d"},{label:(0,s.t)("time-period.30_days","30 days"),value:"30d"}];return(0,n.jsx)(i._,{title:(0,s.t)("dashboard.panel.time-range-settings.title","Panel time settings"),onClose:f.onClose,size:"sm",children:(0,n.jsxs)(h.B,{direction:"column",gap:2,children:[(0,n.jsx)(r.D,{label:(0,s.t)("dashboard.panel.time-range-settings.time-from","Panel time range"),noMargin:!0,description:(0,s.t)("dashboard.panel.time-range-settings.time-from-description","Overrides the dashboard time range. Use one of the preset values or enter a custom value like 5m or 2h."),children:(0,n.jsx)(h.B,{children:(0,n.jsx)(v.G,{options:I,value:C??"",createCustomValue:!0,onChange:U=>{f.setState({timeFrom:U.value})}})})}),(0,n.jsx)(r.D,{label:(0,s.t)("dashboard.panel.time-range-settings.time-shift","Time shift"),noMargin:!0,description:(0,s.t)("dashboard.panel.time-range-settings.time-shift-description","Adds a time shift relative to the dashboard or panel time range. Use one of the preset values or enter a custom value like 5m or 2h."),children:(0,n.jsx)(v.G,{options:B,value:P??"",createCustomValue:!0,onChange:U=>{f.setState({timeShift:U.value})}})}),d.$.featureToggles.timeComparison&&(0,n.jsx)(r.D,{noMargin:!0,label:(0,n.jsxs)(h.B,{alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)(u.J,{description:(0,s.t)("dashboard.panel.time-range-settings.time-window-compare-description","Compare data between two time ranges"),children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.panel.time-range-settings.time-window-compare",children:"Time comparison"})}),(0,n.jsx)(l.y,{featureState:a.Ay.new})]}),children:(0,n.jsx)(v.G,{options:y,createCustomValue:!0,value:T??"",onChange:U=>f.setState({compareWith:U.value})})}),(0,n.jsx)(r.D,{noMargin:!0,label:(0,s.t)("dashboard.panel.time-range-settings.hide-time-info","Hide panel time range"),description:(0,s.t)("dashboard.panel.time-range-settings.hide-time-info-description","Do not show the panel time range in the panel header"),children:(0,n.jsx)(g.d,{value:!!M,onChange:U=>f.setState({hideTimeOverride:U.currentTarget.checked})})}),(0,n.jsx)(p.a,{paddingTop:3,children:(0,n.jsxs)(h.B,{children:[(0,n.jsx)(c.$n,{variant:"secondary",onClick:f.onClose,children:(0,n.jsx)(s.x6,{i18nKey:"common.cancel",children:"Cancel"})}),(0,n.jsx)(c.$n,{variant:"primary",onClick:f.onApply,children:(0,n.jsx)(s.x6,{i18nKey:"common.apply",children:"Apply"})})]})})]})})}}}},90909:(ne,j,e)=>{"use strict";e.d(j,{o:()=>u});var n=e(74848),a=e(96540),s=e(92745),d=e(30703),o=e(45967),l=e(27594),i=e(34999),c=e(66404),p=e(41654),h=e(96221);const u=({ldapConnectionInfo:v})=>{const g=(0,a.useMemo)(()=>[{id:"host",header:"Host",disableGrow:!0},{id:"port",header:"Port",disableGrow:!0},{id:"available",cell:x=>x.cell.value?(0,n.jsx)(p.B,{justifyContent:"end",children:(0,n.jsx)(o.m,{content:(0,s.t)("admin.ldap-connection-status.columns.content-connection-is-available","Connection is available"),children:(0,n.jsx)(d.I,{name:"check"})})}):(0,n.jsx)(p.B,{justifyContent:"end",children:(0,n.jsx)(o.m,{content:(0,s.t)("admin.ldap-connection-status.columns.content-connection-is-not-available","Connection is not available"),children:(0,n.jsx)(d.I,{name:"exclamation-triangle"})})})}],[]),E=(0,a.useMemo)(()=>v,[v]);return(0,n.jsx)("section",{children:(0,n.jsxs)(p.B,{direction:"column",gap:2,children:[(0,n.jsx)(c.E,{color:"primary",element:"h3",children:(0,n.jsx)(s.x6,{i18nKey:"admin.ldap-status.title",children:"LDAP Connection"})}),(0,n.jsx)(l.j,{data:E,columns:g,getRowId:x=>x.host+x.port}),(0,n.jsx)(r,{ldapConnectionInfo:v})]})})},r=({ldapConnectionInfo:v})=>{if(!v.some(m=>m.error))return null;const E=[];v.forEach(m=>{m.error&&E.push(m)});const x=E.map((m,y)=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{style:{fontWeight:500},children:[`${m.host}:${m.port}`,(0,n.jsx)("br",{})]}),(0,n.jsx)("span",{children:m.error}),y!==E.length-1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})]},y));return(0,n.jsx)(i.F,{title:(0,s.t)("admin.ldap-error-box.title-connection-error","Connection error"),severity:h.Qd.Error,children:x})}},90929:(ne,j,e)=>{"use strict";e.d(j,{N:()=>W});var n=e(74848),a=e(22803),s=e(83505),d=e(46885),o=e(18828),l=e(43107),i=e(93225),c=e(96540),p=e(92745),h=e(63142),u=e(76373),r=e(45861),v=e(37386),g=e(30703),E=e(63527),x=e(92807),m=e(47087),y=e(44398),b=e(8431);const D=/^now$|^now(\-|\+)(\d{1,10})([wdhms])$/,f=R=>({from:M(R.from),to:M(R.to)}),C=R=>{const O=B(R.from),N=B(R.to);return{from:O,to:N,display:`${O} to ${N}`}},P=(R,O=Date.now())=>T(R)?M(R)>Math.ceil(O/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},T=R=>D.test(R),M=R=>{const O=D.exec(R);if(!O||O.length!==4)return 0;const[,N,F,G]=O,H=parseInt(F,10);if(isNaN(H))return 0;const K=H*I[G];return N==="+"?K*-1:K},I={w:604800,d:86400,h:3600,m:60,s:1},B=R=>{if(R===0)return"now";const O=Math.abs(R);return R<0?`now+${U(O)}`:`now-${U(O)}`};function U(R){const O=[{unit:"w",value:604800},{unit:"d",value:86400},{unit:"h",value:3600},{unit:"m",value:60},{unit:"s",value:1}];for(const{unit:F,value:G}of O)if(R%G===0)return`${R/G}${F}`;const N=O[O.length-1];return`${R}${N.unit}`}function W(R){const{timeRange:O,onChange:N}=R,[F,G]=(0,c.useState)(!1),H=(0,c.useCallback)(()=>G(!1),[]),K=C(O),[w,Q]=(0,c.useState)({value:K.from,validation:P(K.from)}),[k,te]=(0,c.useState)({value:K.to,validation:P(K.to)}),q=(0,c.useRef)(null),{overlayProps:se,underlayProps:re}=(0,i.e)({onClose:()=>G(!1),isDismissable:!0,isOpen:F},q),{dialogProps:Y}=(0,o.s)({},q),X=(0,b.O)().filter(Pe=>T(Pe.from)),J="bottom-start",_=(0,u.getPositioningMiddleware)(J),{context:ee,refs:ae,floatingStyles:le}=(0,s.we)({open:F,placement:J,onOpenChange:G,middleware:_,whileElementsMounted:d.ll,strategy:"fixed"}),L=(0,s.kp)(ee),ie=(0,s.s9)(ee),{getReferenceProps:oe,getFloatingProps:ue}=(0,s.bv)([ie,L]),ye=(0,h.of)(V(w.validation.errorMessage,k.validation.errorMessage)),fe=Pe=>{const Ve=f(Pe);Ve&&(H(),Q({...w,value:Pe.from}),te({...k,value:Pe.to}),N(Ve))},Ee=(0,c.useCallback)(Pe=>{Pe.stopPropagation(),Pe.preventDefault(),G(!F)},[F]),Ae=Pe=>{if(Pe.preventDefault(),!k.validation.isValid||!w.validation.isValid)return;const Ve=f({from:w.value,to:k.value,display:""});Ve&&(N(Ve),G(!1))},{from:Ge,to:Fe}=K;return(0,n.jsxs)("div",{className:ye.container,children:[(0,n.jsxs)("button",{ref:ae.setReference,className:ye.pickerInput,type:"button",onClick:Ee,...oe(),children:[(0,n.jsx)("span",{className:ye.clockIcon,children:(0,n.jsx)(g.I,{name:"clock-nine"})}),(0,n.jsx)("span",{children:(0,n.jsxs)(p.x6,{i18nKey:"time-picker.time-range.from-to",children:[{timeOptionFrom:Ge}," to ",{timeOptionTo:Fe}]})}),(0,n.jsx)("span",{className:ye.caretIcon,children:(0,n.jsx)(g.I,{name:F?"angle-up":"angle-down",size:"lg"})})]}),F&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{role:"presentation",className:ye.backdrop,...re}),(0,n.jsx)(l.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("div",{ref:q,...se,...Y,children:(0,n.jsx)("div",{className:ye.content,ref:ae.setFloating,style:le,...ue(),children:(0,n.jsxs)("div",{className:ye.body,children:[(0,n.jsx)("div",{className:ye.leftSide,children:(0,n.jsx)(x.P,{showScrollIndicators:!0,children:(0,n.jsx)(y.l,{title:(0,p.t)("time-picker.time-range.example-title","Example time ranges"),options:X,onChange:fe,value:K})})}),(0,n.jsxs)("div",{className:ye.rightSide,children:[(0,n.jsx)("div",{className:ye.title,children:(0,n.jsx)(m.e,{children:(0,n.jsx)(p.x6,{i18nKey:"time-picker.time-range.specify",children:"Specify time range"})})}),(0,n.jsx)(v.D,{label:(0,p.t)("time-picker.time-range.from-label","From"),invalid:!w.validation.isValid,error:w.validation.errorMessage,children:(0,n.jsx)(E.p,{onClick:Pe=>Pe.stopPropagation(),onBlur:()=>Q({...w,validation:P(w.value)}),onChange:Pe=>Q({...w,value:Pe.currentTarget.value}),value:w.value})}),(0,n.jsx)(v.D,{label:(0,p.t)("time-picker.time-range.to-label","To"),invalid:!k.validation.isValid,error:k.validation.errorMessage,children:(0,n.jsx)(E.p,{onClick:Pe=>Pe.stopPropagation(),onBlur:()=>te({...k,validation:P(k.value)}),onChange:Pe=>te({...k,value:Pe.currentTarget.value}),value:k.value})}),(0,n.jsx)(r.$n,{"aria-label":(0,p.t)("time-picker.time-range.submit-button-label","TimePicker submit button"),onClick:Ae,children:(0,n.jsx)(p.x6,{i18nKey:"time-picker.time-range.apply",children:"Apply time range"})})]})]})})})})]})]})}const V=(R,O)=>N=>{const F=(0,E.n)({theme:N,invalid:!1}),H=250+z(N,R)+z(N,O);return{backdrop:(0,a.css)({position:"fixed",zIndex:N.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,a.css)({display:"flex",position:"relative"}),pickerInput:(0,a.cx)(F.input,F.wrapper,(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${N.spacing.gridSize*N.components.height.md-2}px`})),caretIcon:(0,a.cx)(F.suffix,(0,a.css)({position:"relative",marginLeft:N.spacing(.5)})),clockIcon:(0,a.cx)(F.prefix,(0,a.css)({position:"relative",marginRight:N.spacing(.5)})),content:(0,a.css)({background:N.colors.background.primary,boxShadow:N.shadows.z3,position:"absolute",zIndex:N.zIndex.modal,width:"500px",top:"100%",borderRadius:N.shape.radius.default,border:`1px solid ${N.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,a.css)({display:"flex",height:`${H}px`}),description:(0,a.css)({color:N.colors.text.secondary,fontSize:N.typography.size.sm}),leftSide:(0,a.css)({width:"50% !important",borderRight:`1px solid ${N.colors.border.medium}`}),rightSide:(0,a.css)({width:"50%",padding:N.spacing(1)}),title:(0,a.css)({marginBottom:N.spacing(1)})}};function z(R,O){return O?O.length>34?R.spacing.gridSize*6.5:R.spacing.gridSize*4:0}},91073:(ne,j,e)=>{"use strict";e.d(j,{z:()=>D});var n=e(74848),a=e(92745),s=e(97095),d=e(18027),o=e(45861),l=e(30703),i=e(82779),c=e(22803),p=e(63142),h=e(41654),u=e(15356),r=e(18857),v=e(63527),g=e(2954);const E=g.A.reducerTypes.map(f=>({label:f.text,value:f.value})),x=g.A.evalOperators.map(f=>({label:f.text,value:f.value})),m=g.A.evalFunctions.map(f=>({label:f.text,value:f.value})),y=({condition:f,index:C,onChange:P,onRemoveCondition:T,refIds:M})=>{const I=(0,p.of)(b),B=N=>{P({...f,operator:{type:N.value}})},U=N=>{P({...f,reducer:{type:N.value,params:[]}})},W=N=>{P({...f,query:{params:[N.value]}})},V=N=>{P({...f,evaluator:{params:f.evaluator.params,type:N.value}})},z=(N,F)=>{const G=parseFloat(N.currentTarget.value),H=[...f.evaluator.params];H[F]=G,P({...f,evaluator:{...f.evaluator,params:H}})},R=(0,c.css)({width:"75px"}),O=f.evaluator.type===g.p.IsWithinRange||f.evaluator.type===g.p.IsOutsideRange||f.evaluator.type===g.p.IsOutsideRangeIncluded||f.evaluator.type===g.p.IsWithinRangeIncluded;return(0,n.jsxs)(h.B,{children:[(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsxs)(s.C,{children:[C===0?(0,n.jsx)("div",{className:(0,c.cx)(I.button,R),children:(0,n.jsx)(a.x6,{i18nKey:"expressions.condition.when",children:"WHEN"})}):(0,n.jsx)(u.f,{className:(0,c.cx)(I.buttonSelectText,R),options:x,onChange:B,value:x.find(N=>N.value===f.operator.type)}),(0,n.jsx)(r.l6,{options:E,onChange:U,width:20,value:E.find(N=>N.value===f.reducer.type)}),(0,n.jsx)("div",{className:I.button,children:(0,n.jsx)(a.x6,{i18nKey:"expressions.condition.of",children:"OF"})}),(0,n.jsx)(r.l6,{onChange:W,options:M,width:"auto",value:M.find(N=>N.value===f.query.params[0])})]}),(0,n.jsxs)(s.C,{children:[(0,n.jsx)(u.f,{className:I.buttonSelectText,options:m,onChange:V,value:m.find(N=>N.value===f.evaluator.type)}),O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.p,{type:"number",width:10,onChange:N=>z(N,0),value:f.evaluator.params[0]}),(0,n.jsx)("div",{className:I.button,children:(0,n.jsx)(a.x6,{i18nKey:"expressions.condition.to",children:"TO"})}),(0,n.jsx)(v.p,{type:"number",width:10,onChange:N=>z(N,1),value:f.evaluator.params[1]})]}):f.evaluator.type!==g.p.HasNoValue?(0,n.jsx)(v.p,{type:"number",width:10,onChange:N=>z(N,0),value:f.evaluator.params[0]}):null]})]}),(0,n.jsx)(o.$n,{variant:"secondary",type:"button",onClick:()=>T(C),children:(0,n.jsx)(l.I,{name:"trash-alt"})})]})},b=f=>{const C=(0,c.css)({color:f.colors.primary.text,fontSize:f.typography.bodySmall.fontSize});return{buttonSelectText:C,button:(0,c.cx)((0,c.css)({display:"flex",alignItems:"center",borderRadius:f.shape.radius.default,fontWeight:f.typography.fontWeightMedium,border:`1px solid ${f.colors.border.weak}`,whiteSpace:"nowrap",padding:`0 ${f.spacing(1)}`,backgroundColor:f.colors.background.canvas}),C)}},D=({onChange:f,query:C,refIds:P})=>{const T=(B,U)=>{C.conditions&&f({...C,conditions:[...C.conditions.slice(0,U),B,...C.conditions.slice(U+1)]})},M=()=>{if(C.conditions){const B=C.conditions.at(-1)?.query?.params??[],U={...i.P0,query:{params:B}};f({...C,conditions:C.conditions.length>0?[...C.conditions,U]:[U]})}},I=B=>{if(C.conditions){const U=C.conditions[B],W=C.conditions.filter(V=>V!==U).map((V,z)=>z===0?{...V,operator:{type:"when"}}:V);f({...C,conditions:W})}};return(0,n.jsxs)("div",{children:[(0,n.jsx)(s.C,{children:(0,n.jsx)(d.I,{label:(0,a.t)("expressions.classic-conditions.label-conditions","Conditions"),labelWidth:14,children:(0,n.jsx)("div",{children:C.conditions?.map((B,U)=>{if(B)return(0,n.jsx)(y,{index:U,condition:B,onChange:W=>T(W,U),onRemoveCondition:I,refIds:P},U)})})})}),(0,n.jsx)(o.$n,{variant:"secondary",type:"button",onClick:M,children:(0,n.jsx)(l.I,{name:"plus-circle"})})]})}},91146:(ne,j,e)=>{"use strict";e.d(j,{f:()=>a,v:()=>s});var n=e(79319);function a(d){let o=0;for(const l of d)l.fields.length>o&&(o=l.fields.length);return o}function s(d){switch(d){case n.N.False:return!1;case n.N.True:return!0;case n.N.Null:return null;case n.N.Zero:return 0;case n.N.Empty:default:return""}}},91156:(ne,j,e)=>{"use strict";e.d(j,{d:()=>a});var n=e(62769);const a=n.NestedFolderPicker},91272:(ne,j,e)=>{"use strict";e.d(j,{l:()=>s});var n=e(57746);const a=(0,n.Sn)("mod+l");function s(){return{onKeyDown(d,o,l){if(a(d)){d.preventDefault();const{focusBlock:i,document:c}=o.value;o.moveAnchorToStartOfBlock(),c.getNextBlock(i.key)?o.moveFocusToStartOfNextBlock():o.moveFocusToEndOfText()}else return l();return!0}}}},91302:(ne,j,e)=>{"use strict";e.d(j,{$:()=>s});var n=e(22803),a=e(17437);const s=(d,o,l=!1)=>{const{spacing:i}=d,c=d.colors.border.strong,p=d.colors.primary.main,h=d.colors.primary.main,r=`box-shadow: 0px 0px 0px 6px ${d.colors.primary.transparent}`;return{container:(0,n.css)({width:"100%",margin:o?"inherit":i(1,3,1,1),paddingBottom:o&&l?d.spacing(1):"inherit",height:o?"auto":"100%"}),slider:(0,n.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${d.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${d.colors.text.disabled};
        font-size: ${d.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${d.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${h};
        box-shadow: ${d.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${r};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${d.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${d.colors.text.primary};
        border-color: ${d.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${p};
      }
      .rc-slider-rail {
        background-color: ${c};
        cursor: pointer;
      }
    `,tooltip:(0,a.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${d.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${d.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,n.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,n.css)({marginLeft:d.spacing(3),input:{textAlign:"center"}}),sliderInputFieldVertical:(0,n.css)({margin:`0 0 ${d.spacing(3)} 0`,order:1})}}},91520:()=>{(function(ne){var j={series:{stackpercent:null}};function e(n){var a={},s=!1,d={};function o(c,p,h,u){if(s||(s=!0,d=l(c.getData())),p.stackpercent==!0){var r=h.length;p.percents=[];var v=0,g=1;p.bars&&p.bars.horizontal&&p.bars.horizontal===!0&&(v=1,g=0);for(var E=0;E<r;E++){var x=d[h[E][v]+""];x>0?p.percents.push(h[E][g]*100/x):p.percents.push(0)}}}function l(c){var p=c.length,h={};if(p>0){for(var u=0;u<p;u++)if(c[u].stackpercent){var r=0,v=1;c[u].bars&&c[u].bars.horizontal&&c[u].bars.horizontal===!0&&(r=1,v=0);for(var g=c[u].data.length,E=0;E<g;E++){var x=0;c[u].data[E][1]!=null&&(x=c[u].data[E][v]),h[c[u].data[E][r]+""]?h[c[u].data[E][r]+""]+=x:h[c[u].data[E][r]+""]=x}}}return h}function i(c,p,h){if(p.stackpercent){s||(d=l(c.getData()));var u=[],r=0,v=1;p.bars&&p.bars.horizontal&&p.bars.horizontal===!0&&(r=1,v=0);for(var g=0;g<h.points.length;g+=3)a[h.points[g+r]]||(a[h.points[g+r]]=0),u[g+r]=h.points[g+r],u[g+v]=h.points[g+v]+a[h.points[g+r]],u[g+2]=a[h.points[g+r]],a[h.points[g+r]]+=h.points[g+v],d[u[g+r]+""]>0?(u[g+v]=u[g+v]*100/d[u[g+r]+""],u[g+2]=u[g+2]*100/d[u[g+r]+""]):(u[g+v]=0,u[g+2]=0);h.points=u}}n.hooks.processRawData.push(o),n.hooks.processDatapoints.push(i)}ne.plot.plugins.push({init:e,options:j,name:"stackpercent",version:"0.1"})})(jQuery)},91555:(ne,j,e)=>{"use strict";e.d(j,{TD:()=>d,mL:()=>n,pd:()=>a,zM:()=>s});const n="/admin/provisioning",a=`${n}/connect`,s=`${n}/getting-started`,d=["github","local"]},91867:(ne,j,e)=>{"use strict";e.d(j,{_8:()=>W,xS:()=>U,$6:()=>I});var n=e(74848),a=e(22803),s=e(18828),d=e(43107),o=e(93225),l=e(96540),i=e(62717),c=e(80011),p=e(17548),h=e(33239),u=e(51898),r=e(92745),v=e(63142),g=e(93256),E=e(35621),x=e(15245),m=e(7895),y=e(45967),b=e(4364),D=e(34788),f=e(8431),C=e(84596),P=e(72296);function T(O){const{onClick:N,isSynced:F}=O,G=()=>{const H=F?"Unsync all views":"Sync all views to this time range";return(0,n.jsx)(n.Fragment,{children:H})};return(0,n.jsx)(y.m,{content:G,placement:"bottom",children:(0,n.jsx)(m.I,{icon:"link",variant:F?"active":"canvas","aria-label":F?(0,r.t)("grafana-ui.time-sync-button.aria-label-unsync","Unsync times"):(0,r.t)("grafana-ui.time-sync-button.aria-label-sync","Sync times"),onClick:N})})}function M(O){const{value:N,onChangeProp:F,isSyncedProp:G,initialIsSynced:H,timeSyncButtonProp:K}=O,w=(0,P.X)(H&&N?N:void 0),Q=w?.synced,k=w?.syncedValue,te=w?.sync,q=!!(O.isSyncedProp===void 0&&w),se=(0,l.useCallback)(_=>{F(_),q&&Q&&te?.(_)},[F,q,te,Q]),re=(0,C.A)(N),Y=(0,C.A)(w?.syncedValue);(0,l.useEffect)(()=>{q&&Q&&(N!==re&&N!==k?te?.(N):k&&k!==Y&&k!==N&&F(k))},[q,Q,k,te,Y,N,re,F]);const X=q?w?.synced:G,J=q?w?.syncPossible&&(0,n.jsx)(T,{isSynced:w?.synced,onClick:()=>w?.synced?w.unSync():w.sync(N)}):K;return{onChangeWithSync:se,isSynced:X,timeSyncButton:J}}function I(O){const[N,F]=(0,l.useState)(!1),{value:G,onMoveBackward:H,onMoveForward:K,moveForwardTooltip:w,moveBackwardTooltip:Q,onZoom:k,onError:te,timeZone:q,fiscalYearStartMonth:se,history:re,onChangeTimeZone:Y,onChangeFiscalYearStartMonth:X,quickRanges:J,hideQuickRanges:_,widthOverride:ee,isOnCanvas:ae,onToolbarTimePickerClick:le,weekStart:L,initialIsSynced:ie}=O,{onChangeWithSync:oe,isSynced:ue,timeSyncButton:ye}=M({initialIsSynced:ie,value:G,onChangeProp:O.onChange,isSyncedProp:O.isSynced,timeSyncButtonProp:O.timeSyncButton}),fe=Le=>{oe(Le),F(!1)};(0,l.useEffect)(()=>{N&&le&&le()},[N,le]);const Ee=()=>{F(Le=>!Le)},Ae=()=>{F(!1)},Ge=(0,l.createRef)(),Fe=(0,l.createRef)(),{overlayProps:Pe,underlayProps:Ve}=(0,o.e)({onClose:Ae,isDismissable:!0,isOpen:N,shouldCloseOnInteractOutside:Le=>{const ze=(0,x.gF)();return!Fe.current?.contains(Le)&&!ze.contains(Le)}},Ge),{dialogProps:me}=(0,s.s)({},Ge),Se=(0,v.of)(z),{modalBackdrop:Qe}=(0,v.of)(E.o),Ue=ue?"active":ae?"canvas":"default",Re=G?.to?.isBefore(G.from)?"exclamation-triangle":"clock-nine",Ke=V(G,q,J);return(0,n.jsxs)(g.e,{className:Se.container,children:[(0,n.jsx)(m.I,{variant:Ue,onClick:H,icon:"angle-double-left",type:"button",iconSize:"xl",tooltip:Q??(0,r.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),narrow:!0}),(0,n.jsx)(y.m,{ref:Fe,content:(0,n.jsx)(U,{timeRange:G,timeZone:q}),placement:"bottom",interactive:!0,children:(0,n.jsx)(m.I,{"data-testid":u.Tp.components.TimePicker.openButton,"aria-label":(0,r.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:Ke}),"aria-controls":"TimePickerContent",onClick:Ee,icon:Re,isOpen:N,type:"button",variant:Ue,children:(0,n.jsx)(W,{...O})})}),N&&(0,n.jsxs)("div",{"data-testid":u.Tp.components.TimePicker.overlayContent,children:[(0,n.jsx)("div",{role:"presentation",className:(0,a.cx)(Qe,Se.backdrop),...Ve}),(0,n.jsx)(d.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("section",{className:Se.content,ref:Ge,...Pe,...me,children:(0,n.jsx)(b.r,{timeZone:q,fiscalYearStartMonth:se,value:G,onChange:fe,quickOptions:J||(0,f.O)(),history:re,showHistory:!0,widthOverride:ee,onChangeTimeZone:Y,onChangeFiscalYearStartMonth:X,hideQuickRanges:_,onError:te,weekStart:L})})})]}),ye,(0,n.jsx)(m.I,{onClick:K,icon:"angle-double-right",type:"button",variant:Ue,iconSize:"xl",tooltip:w??(0,r.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),narrow:!0}),(0,n.jsx)(y.m,{content:B,placement:"bottom",children:(0,n.jsx)(m.I,{"aria-label":(0,r.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:k,icon:"search-minus",type:"button",variant:Ue})})]})}I.displayName="TimeRangePicker";const B=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(r.x6,{i18nKey:"time-picker.range-picker.zoom-out-tooltip",children:["Time range zoom out ",(0,n.jsx)("br",{})," CTRL+Z"]})}),U=({timeRange:O,timeZone:N})=>{const F=(0,v.of)(R),G=Date.now(),H=N?(0,i.QZ)(N,G):void 0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,c.LE)(O.from,{timeZone:N}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(r.x6,{i18nKey:"time-picker.range-picker.to",children:"to"})}),(0,c.LE)(O.to,{timeZone:N})]}),(0,n.jsxs)("div",{className:F.container,children:[(0,n.jsx)("span",{className:F.utc,children:(0,i.le)(N)}),(0,n.jsx)(D.E,{info:H})]})]})},W=(0,l.memo)(({hideText:O,value:N,timeZone:F,quickRanges:G})=>{const H=(0,v.of)(R);return O?null:(0,n.jsxs)("span",{className:H.container,"aria-live":"polite","aria-atomic":"true",children:[(0,n.jsx)("span",{children:V(N,F,G)}),(0,n.jsx)("span",{className:H.utc,children:p.describeTimeRangeAbbreviation(N,F)})]})});W.displayName="TimePickerButtonLabel";const V=(O,N,F)=>{const G={to:h.isMathString(O.raw.to)?O.raw.to:O.to,from:h.isMathString(O.raw.from)?O.raw.from:O.from};return p.describeTimeRange(G,N,F)},z=O=>({container:(0,a.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,a.css)({display:"none",[O.breakpoints.down("sm")]:{display:"block"}}),content:(0,a.css)({position:"absolute",right:0,top:"116%",zIndex:O.zIndex.dropdown,[O.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:O.zIndex.modal}})}),R=O=>({container:(0,a.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap",columnGap:O.spacing(.5)}),utc:(0,a.css)({color:O.v1.palette.orange,fontSize:O.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:O.typography.fontWeightMedium})})},91909:(ne,j,e)=>{"use strict";e.d(j,{Y:()=>u,F:()=>h});var n=e(92745),a=e(45229),s=e(87745),d=e(74848),o=e(22787),l=e(45861),i=e(94850);function c({availableIds:r,onSelect:v,onDismiss:g}){const E=i._.list(Array.from(r));return(0,d.jsxs)(o.a,{isOpen:!0,title:(0,n.t)("dashboard.rows-layout.ungroup-convert-title","Convert mixed grids?"),onDismiss:g,children:[(0,d.jsx)("p",{children:(0,d.jsx)(n.x6,{i18nKey:"dashboard.rows-layout.ungroup-convert-text",children:"All grids must be converted to the same type and positions will be lost."})}),(0,d.jsxs)(o.a.ButtonRow,{children:[(0,d.jsx)(l.$n,{variant:"secondary",fill:"outline",onClick:g,children:(0,d.jsx)(n.x6,{i18nKey:"dashboard.rows-layout.cancel",children:"Cancel"})}),E.map(x=>(0,d.jsx)(l.$n,{icon:x.icon,variant:"primary",onClick:()=>{v(x.id),g()},children:(0,d.jsxs)(n.x6,{i18nKey:"dashboard.rows-layout.convert-to",values:{name:x.name},children:["Convert to ","{{name}}"]})},x.id))]})]})}var p=e(20246);function h({hasNonGridLayout:r,gridTypes:v,onConfirm:g,onConvertMixedGrids:E}){if(r){a.A.publish(new s.bY({title:(0,n.t)("dashboard.layout.ungroup-nested-title","Ungroup nested groups?"),text:(0,n.t)("dashboard.layout.ungroup-nested-text","This will ungroup all nested groups."),yesText:(0,n.t)("dashboard.layout.continue","Continue"),noText:(0,n.t)("dashboard.layout.cancel","Cancel"),onConfirm:()=>{if(v.size>1)requestAnimationFrame(()=>{E(v)});else{const x=(0,p.$Y)(v.values().next().value);x&&g(x)}}}));return}if(v.size>1){E(v);return}else{const x=(0,p.$Y)(v.values().next().value);x&&g(x)}}function u(r,v){a.A.publish(new s.S8({component:c,props:{availableIds:r,onSelect:v}}))}},91984:(ne,j,e)=>{"use strict";e.d(j,{m:()=>x});var n=e(2543),a=e.n(n),s=e(63895),d=e(8535),o=e(74268),l=e(24610),i=e(52161),c=e(77256),p=e(36200),h=e(5709),u=e(47938),r=e(55143);const v=30,g=30*1e3,E=["AlertingConfiguration","AlertmanagerConfiguration","AlertmanagerConnectionStatus","ContactPoint","ContactPointsStatus","Receiver"],x=h.H.injectEndpoints({endpoints:m=>({getAlertmanagerAlerts:m.query({query:({amSourceName:y,filter:b,showErrorAlert:D=!0})=>{const f=b?.matchers?.filter(U=>U.name&&U.value).map(U=>(0,s.b2)((0,l.MU)(U))),{silenced:C,inhibited:P,unprocessed:T,active:M}=b||{},I=Object.fromEntries(Object.entries({silenced:C,active:M,inhibited:P,unprocessed:T}).filter(([U,W])=>W!==void 0)),B={filter:f};return I&&Object.keys(I).forEach(U=>{B[U]=I[U]}),{url:`/api/alertmanager/${(0,i.w5)(y)}/api/v2/alerts`,params:B,showErrorAlert:D}},providesTags:["AlertmanagerAlerts"]}),getAlertmanagerAlertGroups:m.query({query:({amSourceName:y})=>({url:`/api/alertmanager/${(0,i.w5)(y)}/api/v2/alerts/groups`})}),grafanaNotifiers:m.query({query:()=>({url:"/api/alert-notifiers"}),transformResponse:y=>{const b=(D,f)=>({...D,secureFieldKey:D.secure&&!D.secureFieldKey?`${f}${D.propertyName}`:void 0,subformOptions:D.subformOptions?.map(C=>b(C,`${f}${D.propertyName}.`))});return y.map(D=>({...D,options:D.options.map(f=>b(f,""))}))}}),getGrafanaAlertingConfiguration:m.query({query:()=>({url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}),providesTags:["AlertingConfiguration"]}),getGrafanaAlertingConfigurationStatus:m.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertingConfiguration"]}),getExternalAlertmanagers:m.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:y=>y.data,providesTags:["AlertmanagerConnectionStatus"]}),updateGrafanaAlertingConfiguration:m.mutation({query:y=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:y,showSuccessAlert:!1}),invalidatesTags:[...E]}),getAlertmanagerConfigurationHistory:m.query({query:()=>({url:`/api/alertmanager/${(0,i.w5)(i.hY)}/config/history`,params:{limit:v}}),providesTags:["AlertmanagerConfiguration"]}),resetAlertmanagerConfigurationToOldVersion:m.mutation({query:y=>({url:`/api/alertmanager/${(0,i.w5)(i.hY)}/config/history/${y.id}/_activate`,method:"POST"}),invalidatesTags:["AlertmanagerConfiguration"]}),getAlertmanagerConfiguration:m.query({queryFn:async y=>{const b=y===i.hY;if((0,i.AL)(y))return(0,p.$I)((0,u.VO)(y).then(I=>({data:{alertmanager_config:I.config,template_files:{},extra_config:void 0}})));const{data:f}=await(0,d.JD)(r.L.endpoints.discoverAmFeatures.initiate({amSourceName:y})),C={alertmanager_config:{},template_files:{},template_file_provenances:{},extra_config:void 0},P=f?.lazyConfigInit??!1,T=(0,o.xd)(u.WS,"unifiedalerting/fetchAmConfig",{dataSourceName:y,thunk:"unifiedalerting/fetchAmConfig"}),M=(0,c.i9)(()=>T(y),I=>!!(0,p.CZ)(I)?.includes("alertmanager storage object not found")&&!P,g).then(I=>b?I:(0,n.isEmpty)(I.alertmanager_config)&&(0,n.isEmpty)(I.template_files)?(0,u.VO)(y).then(U=>({alertmanager_config:U.config,template_files:{},template_file_provenances:I.template_file_provenances,last_applied:I.last_applied,id:I.id,extra_config:I.extra_config})):I).then(I=>I??C).then(I=>({data:I})).catch(I=>{if(P&&(0,p.CZ)(I)?.includes("alertmanager storage object not found"))return{data:C};throw I});return(0,p.$I)(M).catch(I=>({error:I,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:m.mutation({query:({selectedAlertmanager:y,config:b})=>({url:`/api/alertmanager/${(0,i.w5)(y)}/config/api/v1/alerts`,method:"POST",data:b,showSuccessAlert:!1}),invalidatesTags:["AlertmanagerConfiguration","ContactPoint","ContactPointsStatus","Receiver"]}),getContactPointsStatus:m.query({query:()=>({url:`/api/alertmanager/${(0,i.w5)(i.hY)}/config/api/v1/receivers`}),transformResponse:y=>{const b=D=>D.startsWith("0001-01-01");return y.map(D=>({...D,integrations:D.integrations.map(f=>{const C=b(f.lastNotifyAttempt);return{...f,lastNotifyAttempt:C?"":f.lastNotifyAttempt,lastNotifyAttemptDuration:C?"":f.lastNotifyAttemptDuration}})}))},providesTags:["ContactPointsStatus"]})})})},92036:(ne,j,e)=>{"use strict";e.d(j,{c:()=>D});var n=e(74848),a=e(96540),s=e(51898),d=e(92745),o=e(30703),l=e(7895),i=e(10378),c=e(16608),p=e(85594),h=e(92138),u=e(43173),r=e(38032),v=e(73427),g=e(38206),E=e(8535);const x=(f,C)=>{const[P]=(0,r.oJ)(),[T]=(0,r.$U)(),[M]=(0,c.Sx)(),[I]=(0,c.LR)(),B=y();return u.$.featureToggles.starsFromAPIServer?async({id:U,title:W},V)=>{const z=`user-${v.TP.user.uid}`,R={id:U,name:z,group:f,kind:C};V?await P(R):await T(R),B({id:U,title:W},V)}:async({id:U,title:W},V)=>{V?await M({dashboardUid:U}):await I({dashboardUid:U}),B({id:U,title:W},V)}},m=(f,C)=>{const P=`user-${v.TP.user.uid}`,T=u.$.featureToggles.starsFromAPIServer,M=(0,p.VT)(T?i.hT:void 0),I=(0,r.Pi)(T?{fieldSelector:`metadata.name=${P}`}:i.hT),B=(0,a.useMemo)(()=>{const{data:U}=I;if(U){const W=I.data?.items||[];return W.length?W[0]?.spec.resource.find(V=>V.group===f&&V.kind===C)?.names||[]:[]}},[I,f,C]);return T?{...I,data:B}:M},y=()=>({id:f,title:C},P)=>{const T=h.I.assureBaseUrl(`/d/${f}`);return(0,E.JD)((0,g.ci)({id:f,title:C,url:T,isStarred:P}))},b=f=>({star:(0,d.t)("stars.mark-as-starred",'Mark "{{title}}" as favorite',{title:f}),unstar:(0,d.t)("stars.unmark-as-starred",'Unmark "{{title}}" as favorite',{title:f})});function D({title:f,group:C,kind:P,id:T,onStarChange:M}){const I=b(f),B=x(C,P),{data:U,isLoading:W}=m(C,P),V=(0,a.useMemo)(()=>(U||[]).includes(T),[T,U]),z=async()=>{await B({id:T,title:f},!V),M?.(T,!V)},R=W?{name:"spinner",type:"default"}:V?{name:"favorite",type:"mono"}:{name:"star",type:"default"},O=(()=>{if(!W)return V?I.unstar:I.star})(),N=(0,n.jsx)(o.I,{...R,size:"lg"});return(0,n.jsx)(l.I,{disabled:W,tooltip:O,icon:N,"data-testid":s.Tp.components.NavToolbar.markAsFavorite,onClick:z})}},92100:(ne,j,e)=>{"use strict";e.d(j,{$:()=>h});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(30703),l=e(45861),i=e(18857),c=e(63142),p=e(52193);const h=({onChange:r,maxMenuHeight:v})=>{const g=(0,s.useMemo)(p.A4,[]),E=(0,s.useMemo)(()=>g.map(f=>({label:f.name,imgUrl:f.info.logos.small,value:f})).sort((f,C)=>f.label?.localeCompare(C.label)),[g]),[x,m]=(0,s.useState)([]),y=(0,s.useCallback)(f=>{const C=f.filter(P=>P.value).map(P=>P.value);r(C),m(f)},[r]),b=(0,c.of)(u),D={defaultOptions:!0,getOptionLabel:f=>f.label,getOptionValue:f=>f.value,noOptionsMessage:(0,d.t)("panel-type-filter.select-no-options","No panel types found"),placeholder:(0,d.t)("panel-type-filter.select-placeholder","Filter by type"),maxMenuHeight:v,options:E,value:x,onChange:y};return(0,n.jsxs)("div",{className:b.container,children:[x.length>0&&(0,n.jsx)(l.$n,{size:"xs",icon:"trash-alt",fill:"text",className:b.clear,onClick:()=>y([]),children:(0,n.jsx)(d.x6,{i18nKey:"panel-type-filter.clear-button",children:"Clear types"})}),(0,n.jsx)(i.KF,{...D,prefix:(0,n.jsx)(o.I,{name:"filter"}),"aria-label":(0,d.t)("panel-type-filter.select-aria-label","Panel type filter")})]})};function u(r){return{container:(0,a.css)({label:"container",position:"relative",minWidth:"180px",flexGrow:1}),clear:(0,a.css)({label:"clear",fontSize:r.spacing(1.5),position:"absolute",top:r.spacing(-4.5),right:0})}}},92119:(ne,j,e)=>{"use strict";e.d(j,{Cs:()=>D,ME:()=>O,MZ:()=>k,O8:()=>R,Sm:()=>I,TN:()=>te,Uv:()=>P,X0:()=>T,XA:()=>b,YQ:()=>V,a7:()=>M,bR:()=>F,bx:()=>B,dQ:()=>J,h$:()=>w,hg:()=>q,iL:()=>N,pk:()=>U,sf:()=>G,sw:()=>x,tk:()=>Y,ty:()=>Q,un:()=>W,vL:()=>f,vm:()=>m,wP:()=>se,xp:()=>X,xz:()=>z});var n=e(48480),a=e(92745),s=e(43173),d=e(78282),o=e(44248),l=e(60379),i=e(98732),c=e(36605),p=e(11534),h=e(7094),u=e(32540),r=e(37040),v=e(29700),g=e(35718),E=e(74232);const x=8,m=12,y={LIBRARY_PANEL:"libraryPanel",COLLAPSED:"collapsed"};function b(_){return`panel-${_}`}function D(_){return parseInt(_.state.key.replace("panel-",""),10)}function f(_,ee){if(!ee)return null;const ae=C(_,ee);if(ae)return ae;const le=parseInt(ee,10);return isNaN(le)?null:C(_,b(le))}function C(_,ee){if(!ee)return null;const ae=o.jh.findObject(_,le=>le.state.key===ee?!0:(le instanceof o.Eb,!1));if(ae){if(ae instanceof o.Eb)return ae;throw new Error(`Found panel with key ${ee} but it was not a VizPanel`)}return null}function P(_,ee){if(!ee)return null;let ae=f(_,ee);return!ae||!ae.state.key||!(ae instanceof o.Eb)?null:ae}function T(_,ee){_.forEachChild(ae=>{ae.isActive&&(ae.forceRender(),T(ae,ee))})}function M(_){const{value:ee,text:ae,options:le}=_.state;return _.hasAllValue()?{values:le.map(L=>L.value),texts:le.map(L=>L.label)}:{values:Array.isArray(ee)?ee:[ee],texts:Array.isArray(ae)?ae:[ae]}}function I(_){const ee=_.match(/(["'])(.*?)\1|\w+/g);if(!ee)return i.Ez.query?.split(",")??[];const ae=new Set,le=ee.reduce((L,ie)=>{const oe=ie.replace(/["']+/g,"");return oe.startsWith("$__auto_interval_")||L.add(oe),L},ae);return Array.from(le)}function B(_){return Array.isArray(_)?_.join(","):""}function U(_,ee){const ae=Array.isArray(_.current.value)?_.current.value[0]:_.current.value;return ae.startsWith("$__auto_interval_")||ae==="$__auto"?"$__auto":ee.includes(ae)?ae:ee[0]}function W(_){if(!_)return;const ee=_.state.$data??_.parent?.state.$data;if(ee instanceof o.dt)return ee;if(ee instanceof o.Es)return W(ee)}function V(_){const ee=_.getRoot();if(ee instanceof p.H$)return ee;throw new Error("SceneObject root is not a DashboardScene")}function z(_){return _ instanceof o.Eb?_:_.parent?z(_.parent):null}function R(){const _=s.$.featureToggles.dashboardNewLayouts?v.r:"timeseries",ee=(0,a.t)("dashboard.new-panel-title","New panel");return new o.Eb({title:ee,pluginId:_,seriesLimit:s.$.panelSeriesLimit,titleItems:[new u.$({menu:new u.m({})})],hoverHeaderOffset:0,$behaviors:[],extendPanelContext:g.C,menu:new o.Lw({$behaviors:[r._i]}),$data:new o.Es({$data:new o.dt({queries:[{refId:"A"}],datasource:(0,n.p$)((0,d.l)().getInstanceSettings(null)),$behaviors:[new c.L({})]}),transformations:[]})})}function O(_){return N(_)!==void 0}function N(_){const ee=_.state.$behaviors?.find(ae=>ae instanceof h.u);if(ee)return ee}function F(_){const ee=Math.ceil(_.getChildCount()/_.getMaxPerRow()),ae=Math.ceil(_.getChildCount()/ee),le=24/ae;return{h:_.state.itemHeight??10,w:le,columnCount:ae}}function G(_){let ee,ae;return _.isActive?ee:(_.parent&&(ae=G(_.parent)),ee=_.activate(),()=>{ae?.(),ee()})}function H(_){let ee,ae;return _.parent&&(ae=H(_.parent)),_.isActive?()=>{ae?.(),ee?.()}:(ee=_.activate(),()=>{ae?.(),ee?.()})}const K=null;function w(_){let ee=_.parent;for(;ee;){if((0,E.e)(ee))return ee;ee=ee.parent}throw new Error("Could not find layout manager for scene object")}function Q(_){return`grid-item-${_}`}function k(_){return V(_)}function te(_){return k(_).useState()}function q(_){const{title:ee}=_.useState();return ee?o.jh.interpolate(_,ee,void 0,"text"):""}function se(_){return V(_).state.layoutOrchestrator}function re(_){return y.LIBRARY_PANEL in _&&_.libraryPanel&&!!(_.libraryPanel?.uid&&_.libraryPanel?.name)||!1}function Y(_){return _?.panels?_.panels.some(ee=>re(ee)?!0:y.COLLAPSED in ee&&ee.collapsed&&"panels"in ee&&ee.panels?ee.panels.some(re):!1):!1}const X=(0,l.h)("Dashboard");function J(_){return!!_.getDashboardChanges().diffCount}},92125:(ne,j,e)=>{"use strict";e.d(j,{s:()=>h,u:()=>u});var n=e(74848),a=e(22803),s=e(2543),d=e.n(s),o=e(41654),l=e(48542),i=e(63142),c=e(63895),p=e(38055);const h=({matchers:v,formatter:g="default"})=>{const E=(0,i.of)(r),x=5,m=(0,s.take)(v,x),y=(0,s.takeRight)(v,v.length-x),b=y.length>0;return(0,n.jsx)("span",{"data-testid":"label-matchers",children:(0,n.jsxs)(o.B,{direction:"row",gap:1,alignItems:"center",wrap:"wrap",children:[m.map(D=>(0,n.jsx)(u,{matcher:D,formatter:g},(0,s.uniqueId)())),b&&(0,n.jsx)(p.B,{arrow:!0,placement:"top",content:(0,n.jsx)(n.Fragment,{children:y.map(D=>(0,n.jsx)(u,{matcher:D},(0,s.uniqueId)()))}),children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{className:E.metadata,children:`and ${y.length} more`})})})]})})},u=({matcher:v,formatter:g="default"})=>{const E=(0,i.of)(r);return(0,n.jsx)("div",{className:E.matcher(v[0]).wrapper,children:(0,n.jsx)(o.B,{direction:"row",gap:0,alignItems:"baseline",children:c.t8[g](v)})})},r=v=>({matcher:g=>{const{color:E,borderColor:x}=(0,l.MC)(g);return{wrapper:(0,a.css)({color:"#fff",background:E,padding:`${v.spacing(.33)} ${v.spacing(.66)}`,fontSize:v.typography.bodySmall.fontSize,border:`solid 1px ${x}`,borderRadius:v.shape.borderRadius(2),whiteSpace:"pre"})}},metadata:(0,a.css)({color:v.colors.text.secondary,fontSize:v.typography.bodySmall.fontSize,fontWeight:v.typography.bodySmall.fontWeight})})},92132:(ne,j,e)=>{"use strict";e.d(j,{t:()=>o});var n=e(96540),a=e(94701);const s=(l,i)=>(l%i+i)%i,d=-1,o=({localRef:l,isMenuOpen:i,close:c,onOpen:p,onClose:h,onKeyDown:u})=>{const[r,v]=(0,n.useState)(d);return(0,n.useEffect)(()=>{i&&v(0)},[i]),(0,n.useEffect)(()=>{const E=l?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');E?.[r]?.focus(),E?.forEach((x,m)=>{x.tabIndex=m===r?0:-1})},[l,r]),(0,a.A)(()=>{p?.(v)}),[E=>{const x=l?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),m=x?.length??0;switch(E.key){case"ArrowUp":E.preventDefault(),E.stopPropagation(),v(s(r-1,m));break;case"ArrowDown":E.preventDefault(),E.stopPropagation(),v(s(r+1,m));break;case"ArrowLeft":E.preventDefault(),E.stopPropagation(),v(d),c?.();break;case"Home":E.preventDefault(),E.stopPropagation(),v(0);break;case"End":E.preventDefault(),E.stopPropagation(),v(m-1);break;case"Enter":E.preventDefault(),E.stopPropagation(),x?.[r]?.click();break;case"Escape":h?.();break;case"Tab":E.preventDefault(),h?.();break;default:break}u?.(E)}]}},92138:(ne,j,e)=>{"use strict";e.d(j,{I:()=>u});var n=e(63704),a=e(5556);let s={appSubUrl:""},d,o;const l=r=>{try{return new URL(r)}catch{return}},i=r=>{const v=l(r);if(v&&v.origin!==window.location.origin)return r;const g=s.appSubUrl??"",E=g.endsWith("/")?1:0,x=r.startsWith("http");let m=g;return(!r.startsWith("/")||x)&&(m=`${window.location.origin}${g}`),r.length>0&&(r.indexOf(m+"/")===0||r===m)?r.slice(m.length-E):r},c=r=>r.startsWith("/")?`${s.appSubUrl}${i(r)}`:r,u={initialize:r=>{s=r.config,d=r.getTimeRangeForUrl,o=r.getVariablesUrlParams},stripBaseFromUrl:i,assureBaseUrl:c,updateSearchParams:(r,v)=>{const g=new URLSearchParams(v);try{const E=new URL(r);return g.forEach((x,m)=>E.searchParams.set(m,x)),E.href}catch{const E=new URLSearchParams(r);return g.forEach((x,m)=>{E.set(m,x)}),"?"+E.toString()}},getTimeRangeUrlParams:()=>d?a.kM.toUrlParams(d()):null,getVariablesUrlParams:r=>{if(!o)return null;const v=o(r);return a.kM.toUrlParams(v)},getUrlForPartial:(r,v)=>{const g=a.kM.parseKeyValue(r.search.startsWith("?")?r.search.substring(1):r.search);for(const E in v)v[E]===null||v[E]===void 0?delete g[E]:g[E]=v[E];return c(a.kM.renderUrl(r.pathname,g))},processUrl:r=>s.disableSanitizeHtml?r:n.sQ.sanitizeUrl(r)}},92243:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{CopyPanelEvent:()=>c.ah,DataSourcePicker:()=>F.s,DataSourceWithBackend:()=>U.iy,EchoEventType:()=>d.on,EmbeddedDashboard:()=>k.f,FakeEchoSrv:()=>d.c_,FolderPicker:()=>ie.d,GrafanaBootConfig:()=>C.p,HealthCheckError:()=>U.b1,HealthStatus:()=>U.VQ,HistoryWrapper:()=>i.K9,LocationServiceProvider:()=>i._K,MetaAnalyticsEventName:()=>P.n_,PanelDataErrorView:()=>z.a,PanelRenderer:()=>V.m,PluginPage:()=>N.V,QueryEditorWithMigration:()=>ae,RefreshEvent:()=>c._,RuntimeDataSource:()=>D,ScopesContext:()=>f.j,StreamingFrameAction:()=>l.Kh,ThemeChangedEvent:()=>c.E8,TimeRangeUpdatedEvent:()=>c.sR,config:()=>C.$,createDataSourcePluginEventProperties:()=>G.y,createMonitoringLogger:()=>B.DW,createPluginEventProperties:()=>G.L,createQueryRunner:()=>O.d,featureEnabled:()=>I.a,frameToMetricFindValue:()=>W.$h,getAppEvents:()=>c.J7,getBackendSrv:()=>n.AI,getCorrelationsService:()=>oe.r,getDataSourceSrv:()=>a.l,getEchoSrv:()=>d.x$,getGrafanaLiveSrv:()=>l.oF,getLimitedComponentsToRender:()=>x.CP,getLocationSrv:()=>s.X,getObservablePluginComponents:()=>E.z,getObservablePluginLinks:()=>g.m,getPluginImportUtils:()=>T.o,getRunRequest:()=>O.XJ,getTemplateSrv:()=>o.w,hasAllPermissions:()=>re,hasAnyPermission:()=>Y,hasPermission:()=>q,hasPermissionInMetadata:()=>se,isExperimentViewEvent:()=>P.p6,isExpressionReference:()=>U.s9,isFetchError:()=>n.NF,isInteractionEvent:()=>P.fX,isMigrationHandler:()=>ee.LZ,isPageviewEvent:()=>P.nB,isPluginExtensionComponent:()=>x.aR,isPluginExtensionLink:()=>x.DG,loadPluginCss:()=>T.PL,locationSearchToObject:()=>i.SE,locationService:()=>i.Ny,logDebug:()=>B.MD,logError:()=>B.vV,logInfo:()=>B.fH,logMeasurement:()=>B.l$,logWarning:()=>B.FF,migrateQuery:()=>ee.aX,migrateRequest:()=>ee.xt,navigationLogger:()=>i.Lc,registerEchoBackend:()=>d.pl,renderLimitedComponents:()=>x.RC,reportExperimentView:()=>M.Xp,reportInteraction:()=>M.rR,reportMetaAnalytics:()=>M.G$,reportPageview:()=>M.Jy,setAppEvents:()=>c.H8,setBackendSrv:()=>n.u5,setChromeHeaderHeightHook:()=>Q._,setCorrelationsService:()=>oe.l,setCurrentUser:()=>m.l,setDataSourceSrv:()=>a.h,setEchoSrv:()=>d.H2,setEmbeddedDashboard:()=>k.p,setFolderPicker:()=>ie.N,setGrafanaLiveSrv:()=>l.S8,setHelpNavItemHook:()=>v.R,setLocationService:()=>i.vG,setLocationSrv:()=>s.T,setMegaMenuOpenHook:()=>w.$,setPluginComponentHook:()=>p.A,setPluginComponentsHook:()=>h.R,setPluginFunctionsHook:()=>r.U,setPluginImportUtils:()=>T.se,setPluginLinksHook:()=>u.q,setQueryRunnerFactory:()=>O.HC,setReturnToPreviousHook:()=>K._,setRunRequest:()=>O.pC,setTemplateSrv:()=>o.d,toDataQueryError:()=>R.u,toDataQueryResponse:()=>W.bE,useChromeHeaderHeight:()=>Q.k,useFavoriteDatasources:()=>L.S,useHelpNavItem:()=>v.X,useLocationService:()=>i.at,useMegaMenuOpen:()=>w.x,usePluginComponent:()=>p.S,usePluginComponents:()=>h.f,usePluginFunctions:()=>r.W,usePluginInteractionReporter:()=>H.G,usePluginLinks:()=>u.U,usePluginUserStorage:()=>le.D,useReturnToPrevious:()=>K.i,useScopes:()=>f.b});var n=e(68143),a=e(78282),s=e(48072),d=e(78646),o=e(2863),l=e(33184),i=e(36490),c=e(75234),p=e(33005),h=e(33604),u=e(46907),r=e(33707),v=e(79409),g=e(58873),E=e(2874),x=e(22099),m=e(6201),y=e(94644),b=e(11594);class D extends y.mA{constructor(ye,fe){const Ee={name:"RuntimeDataSource-"+ye,uid:fe,type:ye,id:1,readOnly:!0,jsonData:{},access:"direct",meta:{id:ye,name:"RuntimeDataSource-"+ye,type:b.QE.datasource,info:{author:{name:""},description:"",links:[],logos:{large:"",small:""},screenshots:[],updated:"",version:""},module:"",baseUrl:""}};super(Ee),this.instanceSettings=Ee}testDatasource(){return Promise.resolve({status:"success",message:""})}}var f=e(69896),C=e(43173),P=e(33749),T=e(39698),M=e(27489),I=e(62061),B=e(25992),U=e(36580),W=e(38866),V=e(60311),z=e(14477),R=e(97534),O=e(83734),N=e(88806),F=e(80839),G=e(61190),H=e(77010),K=e(41071),w=e(45012),Q=e(92293),k=e(43122),te=e(7918);const q=ue=>(0,te.ZU)(ue,(0,m.H)()),se=(ue,ye)=>(0,te.T6)(ue,ye),re=ue=>(0,te.Fj)(ue,(0,m.H)()),Y=ue=>(0,te.jW)(ue,(0,m.H)());var X=e(74848),J=e(96540),_=e(70255),ee=e(38353);function ae(ue){return fe=>{const[Ee,Ae]=(0,J.useState)(!1),[Ge,Fe]=(0,J.useState)(fe.query);return(0,J.useEffect)(()=>{fe.query&&(0,ee.LZ)(fe.datasource)?(0,ee.aX)(fe.datasource,fe.query).then(Pe=>{fe.onChange(Pe),Fe(Pe),Ae(!0)}):Ae(!0)},[]),(0,J.useEffect)(()=>{Fe(fe.query)},[fe.query]),Ee?(0,X.jsx)(ue,{...fe,query:Ge}):(0,X.jsx)(_.A,{containerTestId:"react-loading-skeleton-testid",height:75})}}var le=e(55315),L=e(77870),ie=e(47700),oe=e(25076)},92270:(ne,j,e)=>{"use strict";e.d(j,{EE:()=>u,T0:()=>h,nf:()=>p,yq:()=>c});var n=e(74848),a=e(22803),s=e(17437),d=e(54092),o=e(33604),l=e(63142),i=e(58449);const c=300,p=100,h=Math.floor(window.innerWidth*(2/3));function u(){const v=r((0,l.$j)()),{dockedComponentId:g,props:E={}}=(0,i.sA)(),{components:x,isLoading:m}=(0,o.f)({extensionPointId:d.SM.ExtensionSidebar});if(m||!g)return null;const y=(0,i.rS)(g);if(!y)return null;const b=x.find(D=>D.meta.pluginId===y.pluginId&&D.meta.title===y.componentTitle);return b?(0,n.jsx)("div",{className:v.sidebarWrapper,children:(0,n.jsxs)("div",{className:v.content,children:[(0,n.jsx)(s.Global,{styles:[(0,s.css)({body:{overflowY:"unset !important"}})]}),(0,n.jsx)(b,{...E})]})}):null}const r=v=>({sidebarWrapper:(0,a.css)({backgroundColor:v.colors.background.primary,borderLeft:`1px solid ${v.colors.border.weak}`,display:"flex",flexDirection:"column",gap:v.spacing(1),padding:v.spacing(1),width:"100%",height:"100%",overflow:"auto"}),content:(0,a.css)({flex:1,minHeight:0})})},92275:()=>{(function(ne){"use strict";var j={series:{fillBelowTo:null}};function e(n){function a(o,l){var i;for(i=0;i<l.length;++i)if(l[i].id===o.fillBelowTo)return l[i];return null}function s(o,l,i,c,p,h,u,r){var v,g,E,x,m,y;return v=i-o,g=c-l,E=u-p,x=r-h,m=(-g*(o-p)+v*(l-h))/(-E*g+v*x),y=(E*(l-h)-x*(o-p))/(-E*g+v*x),m>=0&&m<=1&&y>=0&&y<=1?[o+y*v,l+y*g]:null}function d(o,l,i){if(i.fillBelowTo===null)return;var c,p,h,u,r,v,g;function E(C,P){l.beginPath(),l.moveTo(i.xaxis.p2c(C)+v.left,i.yaxis.p2c(P)+v.top)}function x(){l.closePath(),l.fill()}function m(){if(h.length/p!==r.length/u)return console.error("Refusing to graph inconsistent number of points"),!1;var C;for(C=0;C<h.length/p;C++)if(h[C*p]!==null&&r[C*u]!==null&&h[C*p]!==r[C*u])return console.error("Refusing to graph points without matching value"),!1;return!0}function y(C,P){console.assert(P>C,"expects the end index to be greater than the start index");var T=C===0||h[C-1]===null||r[C-1]===null,M=!1,I,B;for(I=C;I<P;I++)if(h[I*p+1]===null||r[I*p+1]===null)M=!1,T=!0;else if(h[I*p+1]===r[I*u+1])M=!0,T=!1;else if(h[I*p+1]>r[I*u+1]){T?E(h[I*p],h[I*p+1]):M?E(h[(I-1)*p],h[(I-1)*p+1]):(B=b(I),E(B[0],B[1])),f(I,P);return}else T=!1,M=!1}function b(C){console.assert(C>0,"expects the second point in the series line segment");var P,T;for(P=1;P<r.length/u;P++)if(T=s(h[(C-1)*p],h[(C-1)*p+1],h[C*p],h[C*p+1],r[(P-1)*u],r[(P-1)*u+1],r[P*u],r[P*u+1]),T!==null)return T;console.error("intersectionPoint() should only be called when an intersection happens")}function D(C,P){console.assert(C>=P,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var T;for(T=C;T>=P;T--)l.lineTo(c.xaxis.p2c(r[T*u])+v.left,c.yaxis.p2c(r[T*u+1])+v.top);x()}function f(C,P){console.assert(C<=P,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var T,M;for(T=C;T<P;T++)if(h[T*p+1]===null&&T>C){D(T-1,C),y(T,P);return}else if(h[T*p+1]===r[T*u+1]){D(T,C),y(T,P);return}else if(h[T*p+1]<r[T*u+1]){M=b(T),l.lineTo(i.xaxis.p2c(M[0])+v.left,i.yaxis.p2c(M[1])+v.top),D(T,C),y(T,P);return}else l.lineTo(i.xaxis.p2c(h[T*p])+v.left,i.yaxis.p2c(h[T*p+1])+v.top);D(P,C)}c=a(i,o.getData()),c&&(p=i.datapoints.pointsize,h=i.datapoints.points,u=c.datapoints.pointsize,r=c.datapoints.points,v=o.getPlotOffset(),m()&&(g=ne.color.parse(i.color),g.a=.4,g.normalize(),l.fillStyle=g.toString(),y(0,h.length/p)))}n.hooks.drawSeries.push(d)}ne.plot.plugins.push({init:e,options:j,name:"fillbelow",version:"0.1.0"})})(jQuery)},92293:(ne,j,e)=>{"use strict";e.d(j,{_:()=>a,k:()=>s});let n;const a=d=>{n=d},s=()=>(n||console.error("useChromeHeaderHeight hook not found"),n?.())},92367:(ne,j,e)=>{"use strict";e.d(j,{G:()=>a,z:()=>s});var n=e(43173);function a(d,o,l={skipSubPath:!1}){const c=new URLSearchParams(o).toString();return`${l.skipSubPath?"":n.$.appSubUrl}${d}${c?`?${c}`:""}`}function s(d,o){const i=new URLSearchParams(o).toString();try{return`${new URL(n.$.appSubUrl+d,n.$.appUrl).href}${i?`?${i}`:""}`}catch{return a(d,o)}}},92388:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>n});function n(a){return"ungroup"in a&&"convertAllGridLayouts"in a}},92391:(ne,j,e)=>{"use strict";e.d(j,{Kk:()=>i,PY:()=>c,TV:()=>d,d4:()=>l,oZ:()=>o});var n=e(65642),a=e(16900);const s={};function d(h){const u=s[h];if(u)return u;const r=l(h);if(!r)throw new Error(`Plugin ${h} not found`);return s[h]=p(r),h!==r.type&&(s[r.type]=s[h]),s[h]}function o(h){return!!l(h)}function l(h){const u=n.Ay.panels[h];if(!u){for(const r of Object.values(n.Ay.panels))if(r.aliasIDs?.includes(h))return r}return u}function i(h){return p(h)}function c(h){return a.y.getPanel(h)}function p(h){return a.y.importPanel(h)}},92415:(ne,j,e)=>{"use strict";e.d(j,{c:()=>Fe});var n=e(74848),a=e(96540),s=e(22803),d=e(78012),o=e(51898),l=e(92745),i=e(43173),c=e(36490),p=e(63142),h=e(99887),u=e(88559),r=e(87063),v=e(45861),g=e(30703),E=e(7895),x=e(93256),m=e(36219),y=e(43707),b=e(5423),D=e(95943),f=e(73427),C=e(22429),P=e(50893),T=e(4590),M=e(55266),I=e(45942),B=e(92036),U=e(52763),W=e(25508),V=e(83793);const z=[],R=()=>V.PP.endpoints.listRepository.select({}),O=()=>(0,W.Mz)(R(),Ue=>Ue.data?.items||z),N=()=>(0,W.Mz)(O(),(Ue,Ie)=>Ie,(Ue,Ie)=>{if(Ie)return Ue.find(Re=>Re.metadata?.name===Ie)});var F=e(23656),G=e(55867);function H({dashboard:Ue}){const[Ie,Re]=(0,a.useState)(!1),Ke=(0,a.useCallback)(ze=>{Re(ze)},[]),Le=()=>(0,n.jsx)(G.A,{dashboard:Ue});return(0,n.jsx)(x.e,{children:(0,n.jsx)(u.m,{overlay:Le,placement:"bottom-end",onVisibleChange:Ke,children:(0,n.jsxs)(v.$n,{size:"sm",variant:"secondary",fill:"solid",tooltip:(0,l.t)("export.menu.export-as-json-tooltip","Export"),"aria-label":(0,l.t)("dashboard.export.button.label","Export dashboard"),"aria-haspopup":"menu","aria-expanded":Ie,"data-testid":o.Tp.pages.Dashboard.DashNav.NewExportButton.arrowMenu,children:[(0,n.jsx)(l.x6,{i18nKey:"export.menu.export-as-json-label",children:"Export"}),"\xA0",(0,n.jsx)(g.I,{name:Ie?"angle-up":"angle-down",size:"sm","aria-hidden":"true"})]})})})}var K=e(41053),w=e(23289),Q=e(16001),k=e(12434);const te=o.Tp.pages.Dashboard.DashNav.newShareButton;function q({dashboard:Ue,panel:Ie}){const Re=(0,p.of)(se),[Ke,Le]=(0,a.useState)(!1),[ze,Be]=(0,K.A)(async()=>{w.c.toolbarShareClick(),await(0,k.Xe)(Ue,Ie)},[Ue,Ie]),$e=(0,a.useCallback)(de=>{de&&w.c.toolbarShareDropdownClick(),Le(de)},[]),Ye=()=>(0,n.jsx)(Q.Ay,{dashboard:Ue});return(0,n.jsxs)(x.e,{"data-testid":te.container,className:Re.container,children:[(0,n.jsx)(v.$n,{"data-testid":te.shareLink,size:"sm",tooltip:(0,l.t)("share-dashboard.share-button-tooltip","Copy link"),onClick:Be,children:(0,n.jsx)(l.x6,{i18nKey:"share-dashboard.share-button",children:"Share"})}),(0,n.jsx)(u.m,{overlay:Ye,placement:"bottom-end",onVisibleChange:$e,children:(0,n.jsx)(v.$n,{"aria-label":(0,l.t)("dashboard-scene.share-button.aria-label-sharedropdownmenu","Toggle share menu"),"data-testid":te.arrowMenu,size:"sm",icon:Ke?"angle-up":"angle-down"})})]})}function se(Ue){return{container:(0,s.css)({gap:1})}}var re=e(75541),Y=e(92119),X=e(63704),J=e(71599),_=e(45229),ee=e(87745);function ae(Ue){return(0,n.jsx)(E.I,{"data-testid":"button-snapshot",tooltip:(0,l.t)("dashboard.toolbar.open-original","Open original dashboard"),icon:"link",onClick:()=>le(Ue.originalURL)},"button-snapshot")}const le=Ue=>{const Ie=Ue??"",Re=X.sQ.sanitizeUrl(Ie);try{const Ke=new URL(Re,i.$.appUrl),Le=new URL(i.$.appUrl);Ke.host!==Le.host?_.A.publish(new ee.S8({component:J.u,props:{title:(0,l.t)("dashboard-scene.on-open-snapshot-original-dashboard.title.proceed-to-external-site","Proceed to external site?"),modalClass:(0,s.css)({width:"max-content",maxWidth:"80vw"}),body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["This link connects to an external website at"," ",(0,n.jsx)("code",{children:Ie})]}),(0,n.jsx)("p",{children:"Are you sure you'd like to proceed?"})]}),confirmVariant:"primary",confirmText:(0,l.t)("dashboard-scene.on-open-snapshot-original-dashboard.confirmText.proceed","Proceed"),onConfirm:()=>{window.location.href=Ke.href}}})):c.Ny.push(Re)}catch(Ke){console.error("Failed to open original dashboard",Ke)}};var L=e(10378),ie=e(75735);const oe=({dashboard:Ue})=>{const Ie=Ue.getManagerKind(),Re=Ue.getManagerIdentity(),Ke=!i.$.featureToggles.provisioning||Ie!==ie.Sf.Repo||!Re,{data:Le}=(0,V.Sw)(Ke?L.hT:{name:Re});if(!Ie)return null;let ze;switch(Ie){case ie.Sf.Terraform:ze=(0,l.t)("dashboard-scene.managed-badge.terraform","Managed by: Terraform");break;case ie.Sf.Kubectl:ze=(0,l.t)("dashboard-scene.managed-badge.kubectl","Managed by: Kubectl");break;case ie.Sf.Plugin:ze=(0,l.t)("dashboard-scene.managed-badge.plugin","Managed by: Plugin {{id}}",{id:Re});break;case ie.Sf.Repo:ze=(0,l.t)("dashboard-scene.managed-badge.repository","Managed by: Repository {{title}}",{title:Le?.spec?.title||Re,interpolation:{escapeValue:!1}});break;default:ze=(0,l.t)("dashboard-scene.managed-badge.provisioned","Provisioned")}return(0,n.jsx)(h.E,{color:"purple",icon:"exchange-alt",tooltip:ze},"provisioned-dashboard-button-badge")},ue=({dashboard:Ue})=>(0,n.jsx)(ae,{originalURL:Ue.getSnapshotUrl()??""});var ye=e(98036);const fe=({dashboard:Ue})=>{const{uid:Ie,title:Re}=Ue.useState();return Ie?(0,n.jsx)(B.c,{group:"dashboard.grafana.app",kind:"Dashboard",id:Ie,title:Re}):null};var Ee=e(12991);const Ae=({dashboard:Ue})=>{const{editview:Ie,editPanel:Re,isEditing:Ke,uid:Le,meta:ze,viewPanel:Be}=Ue.useState(),$e=!!Ie,Ye=!!Be,de=!!Ke,ge=!!Re,pe=!!Le,De=!!ze.canEdit,Me=!!ze.canStar,be=!!ze.isSnapshot,Oe=!$e&&!Ye&&!ge,Ne=(0,Ee.g)([...(0,Ee.f)(re.C.left,"left-dynamic",!ge),{key:"star-button",component:fe,group:"actions",condition:pe&&Me&&Oe&&!de},{key:"public-dashboard-badge",component:ye.d,group:"actions",condition:pe&&Me&&Oe&&!de},{key:"managed-dashboard-badge",component:oe,group:"actions",condition:Ue.isManaged()&&De},{key:"open-snapshot-origin-button",component:ue,group:"actions",condition:be&&!de}],Ue);return Ne.length===0?null:(0,n.jsx)(m.U,{alignment:"left",children:Ne})};var Ge=e(95395);const Fe=(0,a.memo)(({dashboard:Ue})=>i.$.featureToggles.dashboardNewLayouts?(0,n.jsx)(y.H,{breadcrumbActions:(0,n.jsx)(Ae,{dashboard:Ue}),actions:(0,n.jsx)(Ge.GA,{dashboard:Ue})}):(0,n.jsx)(y.H,{actions:(0,n.jsx)(Pe,{dashboard:Ue})}));Fe.displayName="NavToolbarActions";function Pe({dashboard:Ue}){const{isEditing:Ie,viewPanel:Re,isDirty:Ke,uid:Le,meta:ze,editview:Be,editPanel:$e,editable:Ye,title:de}=Ue.useState(),{isPlaying:ge}=T._o.useState(),[pe,De]=(0,a.useState)(!1),Me=f.TP.hasEditPermissionInFolders,be=[],Oe=(0,p.of)(Qe),Ne=!!$e,We=!!Re,qe=Se($e),st=$e&&(0,Y.ME)($e.state.panelRef.resolve()),rt=!(Le||Ue.isManaged()),ot=d.M.exists(D.tH),mt=!Be&&!We&&!Ne,pt=Ie&&mt,ke=(0,U.d4)(ht=>N()(ht,ze.folderUid)),Ze=!!(Ue.isManagedRepository()||ke),{isReadOnlyRepo:nt,repoType:ut}=(0,M.T)({folderName:ze.folderUid});Ne||me(be,re.C.left,"left-actions"),be.push({group:"icon-actions",condition:Le&&!!ze.canStar&&mt&&!Ie,render:()=>Le?(0,n.jsx)(B.c,{group:"dashboard.grafana.app",kind:"Dashboard",title:de,id:Le},"star-dashboard-button"):null}),be.push({group:"icon-actions",condition:Le&&!!ze.canStar&&mt&&!Ie,render:()=>(0,n.jsx)(ye.d,{dashboard:Ue},"public-dashboard-badge")}),nt&&be.push({group:"icon-actions",condition:!0,render:()=>(0,n.jsx)(h.E,{color:"darkgrey",text:(0,l.t)("dashboard.toolbar.read-only","Read only"),tooltip:(0,I.Te)({isLocal:ut==="local"})})}),Ue.isManaged()&&ze.canEdit&&be.push({group:"icon-actions",condition:!0,render:()=>(0,n.jsx)(oe,{dashboard:Ue},"managed-dashboard-badge")}),be.push({group:"icon-actions",condition:ze.isSnapshot&&!Ie,render:()=>(0,n.jsx)(ae,{originalURL:Ue.getSnapshotUrl()??""},"go-to-snapshot-origin")}),!Ne&&!Ie&&me(be,re.C.right,"icon-actions"),be.push({group:"add-panel",condition:pt,render:()=>(0,n.jsx)(u.m,{onVisibleChange:ht=>{De(ht),w.c.toolbarAddClick()},overlay:()=>(0,n.jsxs)(r.W,{children:[(0,n.jsx)(r.W.Item,{testId:o.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,l.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const ht=Ue.onCreateNewPanel();w.c.toolbarAddButtonClicked({item:"add_visualization"}),Ue.setState({editPanel:(0,F.L)(ht,!0)})}},"add-visualization"),(0,n.jsx)(r.W.Item,{testId:o.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,l.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{Ue.onShowAddLibraryPanelDrawer(),w.c.toolbarAddButtonClicked({item:"add_library_panel"})},disabled:Ue.isManagedRepository()},"add-panel-lib"),(0,n.jsx)(r.W.Item,{testId:o.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,l.t)("dashboard.add-menu.row","Row"),onClick:()=>{Ue.onCreateNewRow(),w.c.toolbarAddButtonClicked({item:"add_row"})}},"add-row"),(0,n.jsx)(r.W.Item,{disabled:!ot,testId:o.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,l.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{Ue.pastePanel(),w.c.toolbarAddButtonClicked({item:"paste_panel"})}},"paste-panel")]}),placement:"bottom",offset:[0,6],children:(0,n.jsxs)(v.$n,{variant:"primary",size:"sm",fill:"outline","data-testid":o.Tp.components.PageToolbar.itemButton("Add button"),children:[(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.add",children:"Add"}),(0,n.jsx)(g.I,{name:pe?"angle-up":"angle-down",size:"lg"})]},"add-panel-button")},"add-panel-dropdown")}),be.push({group:"playlist-actions",condition:ge&&mt&&!Ie,render:()=>(0,n.jsx)(E.I,{"data-testid":o.Tp.pages.Dashboard.DashNav.playlistControls.prev,tooltip:(0,l.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:()=>T._o.prev()},"play-list-prev")}),be.push({group:"playlist-actions",condition:ge&&mt&&!Ie,render:()=>(0,n.jsx)(E.I,{onClick:()=>T._o.stop(),"data-testid":o.Tp.pages.Dashboard.DashNav.playlistControls.stop,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.playlist-stop",children:"Stop playlist"})},"play-list-stop")}),be.push({group:"playlist-actions",condition:ge&&mt&&!Ie,render:()=>(0,n.jsx)(E.I,{"data-testid":o.Tp.pages.Dashboard.DashNav.playlistControls.next,tooltip:(0,l.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:()=>T._o.next(),narrow:!0},"play-list-next")}),be.push({group:"back-button",condition:(We||Ne)&&!st,render:()=>(0,n.jsx)(v.$n,{onClick:()=>{c.Ny.partial({viewPanel:null,editPanel:null})},tooltip:"",variant:"secondary",size:"sm",icon:"arrow-left","data-testid":o.Tp.components.NavToolbar.editDashboard.backToDashboardButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.back-to-dashboard",children:"Back to dashboard"})},"back")}),be.push({group:"back-button",condition:!!Be,render:()=>(0,n.jsx)(v.$n,{onClick:()=>{c.Ny.partial({editview:null})},tooltip:"",fill:"text",variant:"secondary",size:"sm",icon:"arrow-left","data-testid":o.Tp.components.NavToolbar.editDashboard.backToDashboardButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.back-to-dashboard",children:"Back to dashboard"})},"back")});const gt=Le&&!Ie&&!ze.isSnapshot&&!ge;return be.push({group:"main-buttons",condition:!Ie&&Ue.canEditDashboard()&&!We&&!ge&&Ye,render:()=>(0,n.jsx)(v.$n,{onClick:()=>{(0,P.L1)(Ue.state.uid),Ue.onEnterEditMode()},tooltip:nt?(0,I.Te)({isLocal:ut==="local"}):(0,l.t)("dashboard.toolbar.edit.tooltip","Enter edit mode"),className:Oe.buttonWithExtraMargin,variant:"secondary",size:"sm","data-testid":o.Tp.components.NavToolbar.editDashboard.editButton,disabled:nt,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.edit.label",children:"Edit"})},"edit")}),be.push({group:"main-buttons",condition:!Ie&&Ue.canEditDashboard()&&!We&&!ge&&!Ye,render:()=>(0,n.jsx)(v.$n,{onClick:()=>{(0,P.L1)(Ue.state.uid),Ue.onEnterEditMode(),Ue.setState({editable:!0,meta:{...ze,canEdit:!0}})},tooltip:(0,l.t)("dashboard.toolbar.enter-edit-mode.tooltip","This dashboard was marked as read only"),className:Oe.buttonWithExtraMargin,variant:"secondary",size:"sm","data-testid":o.Tp.components.NavToolbar.editDashboard.editButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.enter-edit-mode.label",children:"Make editable"})},"edit")}),be.push({group:"new-share-dashboard-buttons",condition:gt,render:()=>(0,n.jsx)(H,{dashboard:Ue},"new-export-dashboard-button")}),be.push({group:"new-share-dashboard-buttons",condition:gt,render:()=>(0,n.jsx)(q,{dashboard:Ue},"new-share-dashboard-button")}),be.push({group:"settings",condition:Ie&&Ue.canEditDashboard()&&mt,render:()=>(0,n.jsx)(v.$n,{onClick:()=>{Ue.onOpenSettings()},tooltip:(0,l.t)("dashboard.toolbar.dashboard-settings.tooltip","Dashboard settings"),fill:"text",size:"sm",variant:"secondary","data-testid":o.Tp.components.NavToolbar.editDashboard.settingsButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.dashboard-settings.label",children:"Settings"})},"settings")}),be.push({group:"main-buttons",condition:Ie&&!rt&&mt,render:()=>(0,n.jsx)(v.$n,{onClick:()=>{w.c.exitEditButtonClicked(),Ue.exitEditMode({skipConfirm:!1})},tooltip:(0,l.t)("dashboard.toolbar.exit-edit-mode.tooltip","Exits edit mode and discards unsaved changes"),size:"sm",fill:"text",variant:"primary","data-testid":o.Tp.components.NavToolbar.editDashboard.exitButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.exit-edit-mode.label",children:"Exit edit"})},"discard")}),be.push({group:"main-buttons",condition:Ne&&!st&&!Be&&!We,render:()=>(0,n.jsx)(v.$n,{onClick:$e?.onDiscard,tooltip:$e?.state.isNewPanel?(0,l.t)("dashboard.toolbar.discard-panel-new","Discard panel"):(0,l.t)("dashboard.toolbar.discard-panel","Discard panel changes"),size:"sm",disabled:!qe,fill:"outline",variant:"destructive","data-testid":o.Tp.components.NavToolbar.editDashboard.discardChangesButton,children:$e?.state.isNewPanel?(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.discard-panel-new",children:"Discard panel"}):(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.discard-panel",children:"Discard panel changes"})},"discard")}),be.push({group:"main-buttons",condition:Ne&&st&&!Be&&!We,render:()=>(0,n.jsx)(v.$n,{onClick:$e?.onDiscard,tooltip:(0,l.t)("dashboard.toolbar.discard-library-panel-changes","Discard library panel changes"),size:"sm",fill:"outline",variant:"destructive","data-testid":o.Tp.components.NavToolbar.editDashboard.discardChangesButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.discard-library-panel-changes",children:"Discard library panel changes"})},"discardLibraryPanel")}),be.push({group:"main-buttons",condition:Ne&&st&&!Be&&!We,render:()=>(0,n.jsx)(v.$n,{onClick:$e?.onUnlinkLibraryPanel,tooltip:(0,l.t)("dashboard.toolbar.unlink-library-panel","Unlink library panel"),size:"sm",fill:"outline",variant:"secondary","data-testid":o.Tp.components.NavToolbar.editDashboard.unlinkLibraryPanelButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.unlink-library-panel",children:"Unlink library panel"})},"unlinkLibraryPanel")}),be.push({group:"main-buttons",condition:Ne&&st&&!Be&&!We,render:()=>(0,n.jsx)(v.$n,{onClick:$e?.onSaveLibraryPanel,tooltip:(0,l.t)("dashboard.toolbar.save-library-panel","Save library panel"),size:"sm",fill:"outline",variant:"primary","data-testid":o.Tp.components.NavToolbar.editDashboard.saveLibraryPanelButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.save-library-panel",children:"Save library panel"})},"saveLibraryPanel")}),be.push({group:"main-buttons",condition:Ie&&!st&&(ze.canSave||Me),render:()=>{if(rt)return(0,n.jsx)(v.$n,{onClick:()=>{Ue.openSaveDrawer({})},className:Oe.buttonWithExtraMargin,tooltip:(0,l.t)("dashboard.toolbar.save-dashboard.tooltip","Save changes"),size:"sm",variant:"primary","data-testid":o.Tp.components.NavToolbar.editDashboard.saveButton,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.save-dashboard.label",children:"Save dashboard"})},"save");if(Me&&!ze.canSave&&!ze.canMakeEditable&&!Ze)return(0,n.jsx)(v.$n,{onClick:()=>{Ue.openSaveDrawer({saveAsCopy:!0})},className:Oe.buttonWithExtraMargin,tooltip:(0,l.t)("dashboard.toolbar.save-dashboard-copy.tooltip","Save as copy"),size:"sm",variant:Ke?"primary":"secondary",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.save-dashboard-copy.label",children:"Save as copy"})},"save");const ht=(0,n.jsxs)(r.W,{children:[(0,n.jsx)(r.W.Item,{label:(0,l.t)("dashboard.toolbar.save-dashboard-short","Save"),icon:"save",onClick:()=>{Ue.openSaveDrawer({})}}),(0,n.jsx)(r.W.Item,{label:(0,l.t)("dashboard.toolbar.save-dashboard-copy.label","Save as copy"),icon:"copy",onClick:()=>{Ue.openSaveDrawer({saveAsCopy:!0})}})]});return(0,n.jsxs)(x.e,{className:Oe.buttonWithExtraMargin,children:[(0,n.jsx)(v.$n,{onClick:()=>{Ue.openSaveDrawer({})},tooltip:(0,l.t)("dashboard.toolbar.save-dashboard.tooltip","Save changes"),size:"sm","data-testid":o.Tp.components.NavToolbar.editDashboard.saveButton,variant:Ke?"primary":"secondary",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.toolbar.save-dashboard.label",children:"Save dashboard"})}),(0,n.jsx)(u.m,{overlay:ht,children:(0,n.jsx)(v.$n,{"aria-label":(0,l.t)("dashboard.toolbar.more-save-options","More save options"),icon:"angle-down",variant:Ke?"primary":"secondary",size:"sm"})})]},"save")}}),(0,n.jsx)(m.U,{alignment:"right",children:Ve(be)})}function Ve(Ue){const Ie=[];let Re="";for(const Ke of Ue)Ke.condition&&(Re&&Re!==Ke.group&&Re&&Ie.push((0,n.jsx)(b.K,{},`${Ke.group}-separator`)),Ie.push(Ke.render()),Re=Ke.group);return Ie}function me(Ue,Ie,Re){if(Ie.length>0)for(const Ke of Ie){const Le={dashboard:(0,C.UA)().getCurrent()};if(Ke.show(Le)){const ze=Ke.component;Ue.push({group:Re,condition:!0,render:()=>(0,a.createElement)(ze,{...Le,key:Ue.length})})}}}function Se(Ue){const[Ie,Re]=(0,a.useState)();return(0,a.useEffect)(()=>{if(Ue){const Ke=Ue.subscribeToState(Le=>{Le.isDirty!==Ie&&Re(Le.isDirty)});return()=>Ke.unsubscribe()}},[Ue,Ie]),Ie}function Qe(Ue){return{hiddenElementsContainer:(0,s.css)({display:"flex",padding:0,gap:Ue.spacing(1),whiteSpace:"nowrap"}),buttonWithExtraMargin:(0,s.css)({margin:Ue.spacing(0,.5)}),publicBadge:(0,s.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})}}},92446:(ne,j,e)=>{"use strict";e.d(j,{i:()=>o});var n=e(2543),a=e.n(n),s=e(25229),d=e(95004);const o=(y,b=!1)=>{const D=y.values;switch(y.type){case d.PU.number:return E(D,b);case d.PU.string:return x(D,b);case d.PU.boolean:return g(D,b);case d.PU.time:return typeof y.values[0]=="number"?r(D,b,y.nanos):v(D,b,y.nanos);default:return m(b)}},l=(y,b)=>{if(!y||!b)return u(y,b);if((0,n.isNumber)(y)&&(0,n.isNumber)(b))return i(y,b);if((0,s.u8)(y)&&(0,s.u8)(b)){if((0,s.KQ)(y).isBefore(b))return-1;if((0,s.KQ)(b).isBefore(y))return 1}return 0},i=(y,b)=>y-b,c=new Intl.Collator("en",{sensitivity:"base"}).compare,p=(y,b)=>!y||!b?u(y,b):c(String(y),String(b)),h=(y,b)=>u(y,b),u=(y,b)=>!y&&b?1:y&&!b?-1:0,r=(y,b,D)=>{let f=b?-1:1;return D!==void 0?(C,P)=>f*(y[C]-y[P]||D[C]-D[P]):(C,P)=>f*(y[C]-y[P])},v=(y,b,D)=>{const f=b?-1:1;return D!==void 0?(C,P)=>f*(l(y[C],y[P])||D[C]-D[P]):(C,P)=>f*l(y[C],y[P])},g=(y,b)=>(D,f)=>{const C=y[D],P=y[f];return b?h(P,C):h(C,P)},E=(y,b)=>(D,f)=>{const C=y[D],P=y[f];return b?i(P,C):i(C,P)},x=(y,b)=>(D,f)=>{const C=y[D],P=y[f];return b?p(P,C):p(C,P)},m=y=>(b,D)=>y?i(D,b):i(b,D)},92505:(ne,j,e)=>{"use strict";e.d(j,{X:()=>C});var n=e(74848),a=e(22803),s=e(46942),d=e.n(s),o=e(2543),l=e.n(o),i=e(96540),c=e(75226),p=e(29317),h=e(51898),u=e(16123),r=e(54024),v=e(52513),g=e(21266),E=e(59490),x=e(91272),m=e(93427),y=e(63142),b=e(35484),D=e(35458);class f extends i.PureComponent{constructor(M){super(M),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(V,z)=>{const R=V.document!==this.state.value.document,O=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(V),this.setState({value:V},()=>{if(R){const N=c.default.serialize(O)!==c.default.serialize(V);N&&z&&this.runOnChangeAndRunQuery(),N&&!z&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:V}=this.props,z=c.default.serialize(this.state.value);V&&V(this.cleanText(z))},this.runOnRunQuery=()=>{const{onRunQuery:V}=this.props;V&&(V(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(V,z,R)=>{const{onBlur:O}=this.props;if(O)O();else{const N=this.lastExecutedValue?c.default.serialize(this.lastExecutedValue):"",F=c.default.serialize(z.value);N!==F&&this.runOnChangeAndRunQuery()}return R()},this.runOnChangeDebounced=(0,o.debounce)(this.runOnChange,500);const{onTypeahead:I,cleanText:B,portalOrigin:U,onWillApplySuggestion:W}=M;this.plugins=[(0,m.Pz)({onTypeahead:I,cleanText:B,portalOrigin:U,onWillApplySuggestion:W}),(0,E.U)({handler:this.runOnChangeAndRunQuery}),(0,g.O)(),(0,u.v)(),(0,x.l)(),(0,v.T)(),(0,r.s)(),...M.additionalPlugins||[]].filter(V=>V),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,D.mO)(M.query||"",M.syntax)}}static{this.defaultProps={onBlur:()=>{}}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,I){const{query:B,syntax:U,syntaxLoaded:W}=this.props;if(!M.syntaxLoaded&&W&&this.editor){const z=this.editor.insertText(" ").deleteBackward(1);this.onChange(z.value,!0)}const{value:V}=this.state;B!==M.query&&B!==c.default.serialize(V)&&this.setState({value:(0,D.mO)(B||"",U)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:I}=this.props,B=d()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),U=P(I);return(0,n.jsx)("div",{className:(0,a.cx)(B,U.wrapper),children:(0,n.jsx)("div",{className:"slate-query-field","data-testid":h.Tp.components.QueryField.container,children:(0,n.jsx)(p.Editor,{ref:W=>this.editor=W,schema:D.yx,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:W=>{this.onChange(W.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})})})}}const C=(0,y.cV)(f),P=T=>{const M=(0,b.getFocusStyles)(T);return{wrapper:(0,a.css)({"&:focus-within":M})}}},92511:(ne,j,e)=>{"use strict";e.d(j,{$:()=>u,FK:()=>g,G9:()=>E,H0:()=>h,SD:()=>p,Zr:()=>r});var n=e(2543),a=e.n(n),s=e(62467),d=e(43173),o=e(97534),l=e(8535),i=e(64762),c=e(12066);function p(m){return m.cancelled?(0,s.of)([]):(v("AnnotationQueryRunner failed",m),(0,s.of)([]))}function h(m){return v("Failed to retrieve datasource",m),(0,s.of)(void 0)}const u=()=>(0,s.of)({annotations:[],alertStates:[]});function r(m){return m.cancelled||v("DashboardQueryRunner failed",m),u()}function v(m,y){const b=(0,o.u)(y);console.error("handleAnnotationQueryRunnerError",b);const D=(0,i.gi)(m,b.message);(0,l.JD)((0,c.dx)(D))}function g(m,y){return y==null?m:m.filter(b=>{let D;if(D=b.source,!D)return!0;if(D.filter){const f=(D.filter.ids??[]).includes(y);if(D.filter.exclude){if(f)return!1}else if(!f)return!1}return b.panelId&&b.source.type==="dashboard"?b.panelId===y:!0})}function E(m,y){m.snapshotData&&(m=(0,n.cloneDeep)(m),delete m.snapshotData);for(const b of y)switch(b.source=m,b.color=d.$.theme2.visualization.getColorByName(m.iconColor),b.type=m.name,b.isRegion=!!(b.timeEnd&&b.time!==b.timeEnd),b.newState?.toLowerCase()){case"pending":b.color="yellow";break;case"alerting":b.color="red";break;case"ok":b.color="green";break;case"normal":b.color="green";break;case"no_data":b.color="gray";break;case"nodata":b.color="gray";break}return y}function x(m){if(!m||!m.length)return[];const y=[];for(const b of m){const D=new DataFrameView(b);for(let f=0;f<b.length;f++){const C=cloneDeep(D.get(f));y.push(C)}}return y}},92580:(ne,j,e)=>{"use strict";e.d(j,{E:()=>a});var n=e(70958);const a=()=>{const[s]=(0,n.s)(),d=s.ref;if(typeof d=="string")return d}},92641:(ne,j,e)=>{"use strict";e.d(j,{H:()=>u});var n=e(74848),a=e(67490),s=e(52763),d=e(20718),o=e(92745);function l(r,v){let g=[];return r==="table"&&v.panelState?.logs?.columns&&(v.panelState.logs?.labelFieldName&&g.push({id:"extractFields",options:{source:v.panelState.logs.labelFieldName}}),g.push({id:"organize",options:{indexByName:Object.values(v.panelState.logs.columns).reduce((E,x,m)=>({...E,[x]:m}),{}),includeByName:Object.values(v.panelState.logs.columns).reduce((E,x)=>({...E,[x]:!0}),{})}})),g}function i(r){const v=h(r.queries,r.queryResponse,r?.panelState);return{targets:r.queries,type:v,title:(0,o.t)("explore.build-dashboard-panel-from-explore-state.title.new-panel","New Panel"),gridPos:{x:0,y:0,w:12,h:8},datasource:r.datasource,transformations:l(v,r)}}const c=r=>!r.hide,p=r=>v=>v.refId===r;function h(r,v,g){for(const{refId:E}of r.filter(c)){const x=p(E);if(v.flameGraphFrames.some(x))return"flamegraph";if(v.graphFrames.some(x))return"timeseries";if(v.logsFrames.some(x))return g?.logs?.visualisationType?g.logs.visualisationType:"logs";if(v.nodeGraphFrames.some(x))return"nodeGraph";if(v.traceFrames.some(x))return"traces";if(v.customFrames.some(x))return v.customFrames.find(x)?.meta?.preferredVisualisationPluginId??"table"}return"table"}function u(r){const{exploreId:v,onClose:g}=r,E=(0,s.d4)((0,d.qq)(v)),x=()=>i({datasource:E.datasourceInstance?.getRef(),queries:E.queries,queryResponse:E.queryResponse,panelState:E?.panelsState});return(0,n.jsx)(a.AddToDashboardForm,{onClose:g,buildPanel:x,timeRange:E.range,options:void 0})}},92654:(ne,j,e)=>{"use strict";e.d(j,{i:()=>n});var n=(a=>(a.All="All",a.WithExpiredTokens="WithExpiredTokens",a.External="External",a.Disabled="Disabled",a))(n||{})},92784:(ne,j,e)=>{"use strict";e.d(j,{HM:()=>o,Ib:()=>s,Nv:()=>d,ar:()=>a,eg:()=>n});function n(l){return l&&/^(?!\/|.*\/\/|.*\.\.|.*@{)(?!.*[~^:?*[\]\\]).+(?<!\/|\.|\s)$/.test(l)}const a=l=>{if(l?.url)return l.branch?`${l.url}/tree/${l.branch}`:l.url},s=l=>{if(!(!l||!l.type))switch(l.type){case"github":{const i=l.github?.url,c=l.github?.branch;return i?c?`${i}/tree/${c}`:i:void 0}case"gitlab":{const i=l.gitlab?.url,c=l.gitlab?.branch;return i?c?`${i}/-/tree/${c}`:i:void 0}case"bitbucket":{const i=l.bitbucket?.url,c=l.bitbucket?.branch;return i?c?`${i}/src/${c}`:i:void 0}case"git":return l.git?.url;default:return}};function d(l){return l==="github"||l==="gitlab"||l==="bitbucket"}function o(l,i){let c,p=!1;if(!l||!l.type||!i)return{hasUrl:p,url:c};const h=l.type;if(h!=="local"&&i)switch(h){case"github":l.github?.url&&(c=`${l.github.url}/commit/${i}`,p=!0);break;case"gitlab":l.gitlab?.url&&(c=`${l.gitlab.url}/-/commit/${i}`,p=!0);break;case"bitbucket":l.bitbucket?.url&&(c=`${l.bitbucket.url}/commits/${i}`,p=!0);break}return{hasUrl:p,url:c}}},92790:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>c});var n=e(74848),a=e(96540),s=e(36613),d=e(36192);function o(p,h){return h.width===p.width&&h.height===p.height}function l(p,h){return h.data===p.data}function i(p,h){return h.config===p.config}class c extends a.Component{constructor(h){super(h),this.plotContainer=(0,a.createRef)(),this.plotCanvasBBox=(0,a.createRef)(),this.plotInstance=null}reinitPlot(){let{width:h,height:u,plotRef:r}=this.props;if(this.plotInstance?.destroy(),h===0&&u===0)return;this.props.config.addHook("setSize",E=>{E.over});const v={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,d.uY)("UPlot",!1,"Reinitializing plot",v);const g=new s.A(v,this.props.data,this.plotContainer.current);r&&r(g),this.plotInstance=g}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.plotInstance?.destroy()}componentDidUpdate(h){o(h,this.props)?i(h,this.props)?l(h,this.props)||this.plotInstance?.setData(this.props.data):this.reinitPlot():this.plotInstance?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children]})}}},92842:(ne,j,e)=>{"use strict";e.d(j,{f:()=>s});var n=e(74848),a=e(30703);const s=({isLoading:d,isOpen:o})=>{const l=d?"spinner":o?"search":"angle-down";return(0,n.jsx)(a.I,{name:l})}},92948:(ne,j,e)=>{"use strict";e.d(j,{M:()=>r});var n=e(74848),a=e(22803),s=e(6773),d=e(63142),o=e(11701),l=e(53459),i=e(42581);const c=({className:v,logo:g})=>(0,n.jsx)("img",{className:v,src:`${g||i}`,alt:"Grafana"}),p=({className:v,children:g})=>{const E=(0,d.$j)(),x=(0,a.css)({"&:before":{content:'""',position:"fixed",left:0,right:0,bottom:0,top:0,background:`url(${E.isDark?o:l})`,backgroundPosition:"top center",backgroundSize:"auto",backgroundRepeat:"no-repeat",opacity:0,[E.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 3s ease-in-out"},[E.breakpoints.up("md")]:{backgroundPosition:"center",backgroundSize:"cover"}}});return(0,n.jsx)("div",{className:(0,a.cx)(x,v),children:g})},h=({className:v})=>(0,n.jsx)("img",{className:v,src:i,alt:"Grafana"}),u=()=>{const v=(0,d.$j)();return(0,a.css)({background:s.MV.alpha(v.colors.background.primary,.7),backgroundSize:"cover"})};class r{static{this.LoginLogo=c}static{this.LoginBackground=p}static{this.MenuLogo=h}static{this.LoginBoxBackground=u}static{this.AppTitle="Grafana"}static{this.LoginTitle="Welcome to Grafana"}static{this.HideEdition=!1}static{this.GetLoginSubTitle=()=>null}}},93008:(ne,j,e)=>{"use strict";e.d(j,{h:()=>u});var n=e(22803),a=e(2543),s=e.n(a),d=e(96540),o=e(63142),l=e(45897);const i=.3,c=new Set(["ArrowUp","ArrowDown"]),p=new Set(["ArrowLeft","ArrowRight"]),h={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function u(x){const{direction:m,initialSize:y=x.usePixels?300:.5,dragPosition:b="middle",onResizing:D,onSizeChanged:f,usePixels:C}=x,P=E(x.handleSize),T=(0,d.useRef)(null),M=(0,d.useRef)(null),I=(0,d.useRef)(null),B=(0,d.useRef)(null),U=(0,d.useRef)(null),W=(0,d.useRef)(null),V=(0,d.useRef)(void 0),z=(0,d.useRef)(void 0),R=h[m].dim,O=h[m].axis,N=h[m].min,F=h[m].max,G=(0,d.useRef)(null),H=(0,d.useCallback)(oe=>{!M.current||!I.current||(W.current=M.current.getBoundingClientRect()[R],U.current=B.current.getBoundingClientRect()[R],G.current=oe[O],T.current.setPointerCapture(oe.pointerId),C?V.current=v(I.current,C):V.current=v(M.current),z.current=void 0)},[R,O,C]),K=(0,d.useCallback)(oe=>{if(!U.current||!W.current||!I.current)return;const ue=W.current,ye=U.current-ue-P,fe=V.current;if(C){const Ee=(0,a.clamp)(ye-oe,fe[N],fe[F]);I.current.style.flexBasis=`${Ee}px`,T.current.ariaValueNow=`${Ee}`,D?.(Ee,ue+oe,Ee)}else{const Ee=(0,a.clamp)(W.current+oe,fe[N],fe[F]),Ae=Ee/(U.current-P);M.current.style.flexGrow=`${Ae}`,I.current.style.flexGrow=`${1-Ae}`,T.current.ariaValueNow=r(Ee,fe[N],fe[F]),D?.(Ae,Ee,ye-oe)}},[D,P,C,N,F]),w=(0,d.useCallback)(oe=>{G.current!==null&&K(oe[O]-G.current)},[K,O]),Q=(0,d.useCallback)(oe=>{oe.preventDefault(),oe.stopPropagation(),G.current=null,T.current.releasePointerCapture(oe.pointerId);const ue=M.current.getBoundingClientRect()[R],ye=U.current-ue-P;f?.(parseFloat(M.current.style.flexGrow),ue,ye)},[f,P,R]),k=(0,d.useRef)(new Set),te=(0,d.useRef)(null),q=(0,d.useCallback)(oe=>{if(k.current.size===0){te.current=null;return}else if(W.current===null)return;const fe=(oe-(te.current??oe))*i;let Ee=0;m==="row"?(k.current.has("ArrowLeft")&&(Ee-=fe),k.current.has("ArrowRight")&&(Ee+=fe)):(k.current.has("ArrowUp")&&(Ee-=fe),k.current.has("ArrowDown")&&(Ee+=fe)),W.current=M.current.getBoundingClientRect()[R],U.current=B.current.getBoundingClientRect()[R],K(Ee),te.current=oe,window.requestAnimationFrame(q)},[m,R,K]),se=(0,d.useCallback)(oe=>{if(!M.current||!I.current||!T.current||!B.current||!(m==="column"&&c.has(oe.key)||m==="row"&&p.has(oe.key))||k.current.has(oe.key))return;if(z.current=void 0,oe.preventDefault(),oe.stopPropagation(),W.current=M.current.getBoundingClientRect()[R],U.current=B.current.getBoundingClientRect()[R],C?V.current=v(I.current):V.current=v(M.current),!k.current.has(oe.key)){const ye=k.current.size===0;k.current.add(oe.key),ye&&window.requestAnimationFrame(q)}},[m,q,,R,C]),re=(0,d.useCallback)(oe=>{if(!(m==="row"&&!p.has(oe.key)||m==="column"&&!c.has(oe.key))&&(k.current.delete(oe.key),W.current!==null)){const ue=U.current-W.current-P;f?.(parseFloat(M.current.style.flexGrow),W.current,ue)}},[m,f,P]),Y=(0,d.useCallback)(()=>{!M.current||!I.current||(C?I.current.style.flexBasis=`${y}px`:(M.current.style.flexGrow="0.5",I.current.style.flexGrow="0.5",W.current=M.current.getBoundingClientRect()[R],T.current.ariaValueNow="50"))},[R,C,y]),X=(0,d.useCallback)(()=>{if(k.current.size>0&&(k.current.clear(),G.current=null,typeof W.current=="number")){const oe=U.current-W.current-P;f?.(parseFloat(M.current.style.flexGrow),W.current,oe)}},[f,P]),J=(0,o.of)(g,m),_=(0,o.of)(l.l,b),ee=m==="column"?_.dragHandleHorizontal:_.dragHandleVertical,ae=(0,d.useId)(),le={flexGrow:(0,a.clamp)(y,0,1),[N]:"min-content"},L={flexGrow:(0,a.clamp)(1-y,0,1),[N]:"min-content"};C&&(le.flexGrow=1,L.flexGrow="unset",L.flexBasis=`${y}px`);const ie=`start-panel-${ae}`;return{containerProps:{ref:B,className:J.container},primaryProps:{ref:M,className:J.panel,style:le,id:ie},secondaryProps:{ref:I,className:J.panel,style:L},splitterProps:{onPointerUp:Q,onPointerDown:H,onPointerMove:w,onKeyDown:se,onKeyUp:re,onDoubleClick:Y,onBlur:X,ref:T,style:{[R]:`${P}px`},role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":y*100,"aria-controls":ie,"aria-label":"Pane resize widget",tabIndex:0,className:ee}}}function r(x,m,y){return`${(0,a.clamp)((x-m)/(y-m)*100,0,100)}`}function v(x,m){const y=document.body.style.overflow,b=x.style.width,D=x.style.height,f=x.style.flexGrow,C=x.style.flexBasis;document.body.style.overflow="hidden",x.style.flexGrow="0",x.style.flexBasis="0";const{width:P,height:T}=x.getBoundingClientRect();x.style.flexGrow="100";const{width:M,height:I}=x.getBoundingClientRect();return document.body.style.overflow=y,x.style.width=b,x.style.height=D,x.style.flexGrow=f,x.style.flexBasis=C,{minWidth:P,maxWidth:M,minHeight:T,maxHeight:I}}function g(x,m){return{container:(0,n.css)({display:"flex",flexDirection:m==="row"?"row":"column",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,n.css)({display:"flex",position:"relative",flexBasis:0})}}function E(x="md"){return{xs:4,sm:8,md:16,lg:32}[x]}},93139:(ne,j,e)=>{"use strict";e.d(j,{G:()=>p});var n=e(74848),a=e(22803),s=e(96540),d=e(34999),o=e(18857),l=e(63142),i=e(46189);const c=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:i.fx},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],p=({value:u,onChange:r,context:v,item:g})=>{const E=(0,l.of)(h),[x,m]=(0,s.useState)(),y=g.settings;(0,s.useEffect)(()=>{async function f(){const C=await(0,i.q3)(u);m(C)}f()},[u,m]);const{current:b,options:D}=(0,s.useMemo)(()=>{let f=y?.options?[...y.options]:[...c],C=f?.find(P=>P.value===x?.path);return!C&&x&&(C={label:x.path,value:x.path},f.push(C)),{options:f,current:C}},[x,y?.options]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.l6,{value:b,options:D,onChange:f=>r(f.value),allowCustomValue:!0,formatCreateLabel:f=>`Load from URL: ${f}`}),x&&(0,n.jsxs)(n.Fragment,{children:[x.error&&(0,n.jsx)(d.F,{title:x.error,severity:"warning"}),x.count&&(0,n.jsxs)("div",{className:E.keys,children:[(0,n.jsxs)("b",{children:["(",x.count,")"]}),x.examples(10).map(f=>(0,n.jsxs)("span",{children:[f,","]},f)),x.count>10&&" ..."]})]})]})},h=u=>({keys:(0,a.css)({marginTop:u.spacing(.5),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap","> span":{marginLeft:u.spacing(.5)}})})},93256:(ne,j,e)=>{"use strict";e.d(j,{e:()=>o});var n=e(74848),a=e(22803),s=e(96540),d=e(63142);const o=(0,s.forwardRef)(({className:i,children:c,...p},h)=>{const u=(0,d.of)(l);return(0,n.jsx)("div",{ref:h,className:(0,a.cx)("button-group",u.wrapper,i),...p,children:c})});o.displayName="ButtonGroup";const l=i=>({wrapper:(0,a.css)({display:"flex",borderRadius:i.shape.radius.default,"> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset",borderLeft:"1px solid rgba(255, 255, 255, 0.12)"},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:"unset",borderBottomRightRadius:"unset",borderRight:"1px solid rgba(0, 0, 0, 0.12)"}})})},93374:(ne,j,e)=>{"use strict";e.d(j,{m:()=>E});var n=e(74848),a=e(22803),s=e(2543),d=e(96540),o=e(92745),l=e(63142),i=e(41654),c=e(45861),p=e(59243);const h="__grafana_origin";function u(m){return m.startsWith("__")&&m.endsWith("__")||m===h}const r=([m,y])=>u(m);function v(m){return!Array.isArray(m)||m.length===0?{}:m.reduce((y,b)=>{if(!b)throw new Error("Need parsed labels to find common labels.");return Object.keys(b).forEach(D=>{(y[D]===void 0||y[D]!==b[D])&&delete y[D]}),Object.keys(y).forEach(D=>{b[D]===void 0&&delete y[D]}),y},{...m[0]})}var g=e(73397);const E=({labels:m,displayCommonLabels:y,labelSets:b,size:D,onClick:f,commonLabelsMode:C="expand"})=>{const P=(0,l.of)(x,D),[T,M]=(0,d.useState)(!1),I=(0,d.useMemo)(()=>y&&Array.isArray(b)&&b.length>1?v(b):{},[y,b]),B=(0,s.chain)(m).toPairs().reject(r).reject(([R])=>T?!1:R in I).value(),U=Object.keys(I).length,W=U>0,V=(0,o.t)("alert-labels.button.show.tooltip","Show common labels"),z=(0,d.useMemo)(()=>(0,n.jsx)(i.B,{"data-testid":"common-labels-tooltip-content",role:"list",direction:"row",wrap:"wrap",gap:1,width:48,children:Object.entries(I).map(([R,O])=>(0,n.jsx)(g.R,{size:D,labelKey:R,value:O,colorBy:"key",role:"listitem"},R+O))}),[I,D]);return(0,n.jsxs)("div",{className:P.wrapper,role:"list","aria-label":(0,o.t)("alerting.alert-labels.aria-label-labels","Labels"),children:[B.map(([R,O])=>(0,n.jsx)(g.R,{size:D,labelKey:R,value:O,colorBy:"key",onClick:f,role:"listitem"},R+O)),!T&&W&&(0,n.jsx)("div",{role:"listitem",children:C==="expand"?(0,n.jsx)(c.$n,{variant:"secondary",fill:"text",onClick:()=>M(!0),tooltip:V,tooltipPlacement:"top",size:"sm",children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.alert-labels.common-labels-count",count:U,children:["+","{{count}}"," common labels"]})}):(0,n.jsx)(p.G,{content:z,closeButton:!1,fitContent:!0,children:(0,n.jsx)(c.$n,{"data-testid":"common-labels-tooltip-trigger",variant:"secondary",fill:"text",size:"sm",children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.alert-labels.common-labels-count",count:U,children:["+","{{count}}"," common labels"]})})})}),T&&W&&(0,n.jsx)("div",{role:"listitem",children:(0,n.jsx)(c.$n,{variant:"secondary",fill:"text",onClick:()=>M(!1),tooltipPlacement:"top",size:"sm",children:(0,n.jsx)(o.x6,{i18nKey:"alert-labels.button.hide",children:"Hide common labels"})})})]})},x=(m,y)=>({wrapper:(0,a.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:y==="md"?m.spacing():m.spacing(.5)})})},93384:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>s,QB:()=>d});var n=e(739);const a="12.3.0",s={colWidth:.9,perPage:20,rowHeight:.9,showValue:n.yL.Auto},d={fillOpacity:70,lineWidth:1}},93389:(ne,j,e)=>{"use strict";e.d(j,{U:()=>V});var n=e(2543),a=e(96540),s=e(44248),d=e(95943),o=e(33143),l=e(3371),i=e(92119),c=e(41667),p=e(74848),h=e(92745),u=e(43173),r=e(89640),v=e(77824),g=e(18857),E=e(25797),x=e(51156),m=e(31819),y=e(78725);function b(z){const R="repeat-options",O=new E.C({title:(0,h.t)("dashboard.default-layout.item-options.repeat.title","Repeat options"),id:R,isOpenDefault:!1}).addItem(new x.v({title:(0,h.t)("dashboard.default-layout.item-options.repeat.variable.title","Repeat by variable"),id:`${R}-repeat-by-variable`,description:(0,h.t)("dashboard.default-layout.item-options.repeat.variable.description","Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard."),render:G=>(0,p.jsx)(C,{id:G.props.id,gridItem:z})})).addItem(new x.v({title:(0,h.t)("dashboard.default-layout.item-options.repeat.direction.title","Repeat direction"),id:`${R}-repeat-direction`,useShowIf:()=>{const{variableName:G}=z.useState();return!!G},render:()=>(0,p.jsx)(D,{gridItem:z})})).addItem(new x.v({title:(0,h.t)("dashboard.default-layout.item-options.repeat.max","Max per row"),id:`${R}-max-per-row`,useShowIf:()=>{const{variableName:G,repeatDirection:H}=z.useState();return!!G&&H==="h"},render:G=>(0,p.jsx)(f,{id:G.props.id,gridItem:z})})),N=(0,y.h)(void 0,(0,p.jsxs)("div",{children:[(0,p.jsx)(h.x6,{i18nKey:"dashboard.conditional-rendering.editor.not-supported-for-custom-grid",children:"Show/hide rules aren't supported for panels in the Custom panel layout. Change the panel layout to Auto grid to enable this feature."}),(0,p.jsx)("div",{children:(0,p.jsx)(r.Y,{href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dynamic-dashboard/#configure-showhide-rules",external:!0,children:(0,p.jsx)(h.x6,{i18nKey:"dashboard.conditional-rendering.editor.learn-more",children:"Learn more"})})})]})),F=[O];return u.$.featureToggles.dashboardNewLayouts&&F.push(N),F}function D({gridItem:z}){const{repeatDirection:R}=z.useState(),O=[{label:(0,h.t)("dashboard.default-layout.item-options.repeat.direction.horizontal","Horizontal"),value:"h"},{label:(0,h.t)("dashboard.default-layout.item-options.repeat.direction.vertical","Vertical"),value:"v"}];return(0,p.jsx)(v.z,{options:O,value:R??"h",onChange:N=>{o.cc.edit({description:(0,h.t)("dashboard.edit-actions.panel-repeat-direction","Repeat direction"),source:z,perform:()=>z.setRepeatDirection(N),undo:()=>z.setRepeatDirection(R??"h")})}})}function f({gridItem:z,id:R}){const{maxPerRow:O}=z.useState(),N=[2,3,4,6,8,12].map(F=>({label:F.toString(),value:F}));return(0,p.jsx)(g.l6,{id:R,options:N,value:O??4,onChange:F=>{o.cc.edit({description:(0,h.t)("dashboard.edit-actions.panel-max-repeats-per-row","Max repeats per row"),source:z,perform:()=>z.setMaxPerRow(F.value),undo:()=>z.setMaxPerRow(O??4)})}})}function C({gridItem:z,id:R}){const{variableName:O,width:N}=z.useState(),F=(0,a.useCallback)(H=>{z.setRepeatByVariable(H),z.handleVariableName(),N!==24&&(z.setState({width:24}),s.jh.getAncestor(z,s.hy).forceRender())},[z,N]),G=(0,a.useCallback)(H=>{H!==O&&o.cc.edit({description:(0,h.t)("dashboard.edit-actions.panel-repeat-variable","Panel repeat by"),source:z,perform:()=>F(H),undo:()=>F(O)})},[z,F,O]);return(0,p.jsx)(m.U,{id:R,sceneContext:z,repeat:O,onChange:G})}var P=e(22803),T=e(96691);function M({model:z}){const{repeatedPanels:R=[],itemHeight:O,variableName:N,body:F}=z.useState(),G=(0,T.MK)(),H=I(z.getRepeatDirection(),z.getChildCount(),z.getMaxPerRow(),O??10);return G?(0,T.mN)(G,[F,...R]):N?(0,p.jsxs)("div",{className:H,ref:z.containerRef,children:[(0,p.jsx)("div",{className:B,children:(0,p.jsx)(F.Component,{model:F},F.state.key)},F.state.key),R.map(K=>(0,p.jsx)("div",{className:B,children:(0,p.jsx)(K.Component,{model:K},K.state.key)},K.state.key))]}):(0,p.jsx)("div",{className:B,ref:z.containerRef,children:(0,p.jsx)(F.Component,{model:F},F.state.key)})}function I(z,R,O,N){return(0,a.useMemo)(()=>{const F=u.$.theme2,G=N*d.sD*R+(R-1)*d.dU;if(z==="h"){const H=Math.ceil(R/O),K=Math.min(R,O);return(0,P.css)({display:"grid",height:"100%",width:"100%",gridTemplateColumns:`repeat(${K}, 1fr)`,gridTemplateRows:`repeat(${H}, 1fr)`,gridColumnGap:F.spacing(1),gridRowGap:F.spacing(1),[F.breakpoints.down("md")]:{display:"flex",flexDirection:"column",height:G}})}return(0,P.css)({display:"flex",height:"100%",width:"100%",flexDirection:"column",gap:F.spacing(1),[F.breakpoints.down("md")]:{height:G}})},[z,R,O,N])}const B=(0,P.css)({display:"flex",flexGrow:1,position:"relative",width:"100%",height:"100%"});class U{constructor(R){this._gridItem=R}getNames(){return this._gridItem.state.variableName?new Set([this._gridItem.state.variableName]):new Set}hasDependencyOn(R){return this._gridItem.state.variableName===R}variableUpdateCompleted(R){this._gridItem.state.variableName===R.state.name&&this._gridItem.performRepeat()}}var W=e(87308);class V extends s.Bs{constructor(R){super(R),this._variableDependency=new U(this),this.isDashboardLayoutItem=!0,this.containerRef=a.createRef(),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=M}_activationHandler(){return this.handleVariableName(),this._subs.add(this.subscribeToEvent(o.WG,()=>this.handleEditChange())),()=>{this._handleGridSizeUnsubscribe()}}_handleGridSizeSubscribe(){this._gridSizeSub||(this._gridSizeSub=this.subscribeToState((R,O)=>this._handleGridResize(R,O)))}_handleGridSizeUnsubscribe(){this._gridSizeSub&&(this._gridSizeSub.unsubscribe(),this._gridSizeSub=void 0)}_handleGridResize(R,O){if(R.height===O.height)return;const N={};if(this.getRepeatDirection()==="v")N.itemHeight=Math.ceil(R.height/this.getChildCount());else{const F=Math.ceil(this.getChildCount()/this.getMaxPerRow());N.itemHeight=Math.ceil(R.height/F)}N.itemHeight!==this.state.itemHeight&&this.setState(N)}getChildCount(){return(this.state.repeatedPanels?.length??0)+1}getClassName(){return this.state.variableName?"panel-repeater-grid-item":""}getOptions(){return b(this)}setElementBody(R){this.setState({body:R})}handleEditChange(){if(this._prevRepeatValues=void 0,this.parent instanceof s.tI){const R=this.parent.state.$behaviors?.find(O=>O instanceof W.L);R&&R.resetPrevRepeatValues()}this.state.variableName&&this.state.repeatDirection==="h"&&this.state.width!==d.cV&&this.setState({width:d.cV}),this.performRepeat()}performRepeat(){if(!this.state.variableName||s.jh.hasVariableDependencyInLoadingState(this))return;const R=s.jh.lookupVariable(this.state.variableName,this)??new s.yP({name:"_____default_sys_repeat_var_____",options:[],value:"",text:"",query:"A"});if(!(R instanceof s.n8)){console.error("DashboardGridItem: Variable is not a MultiValueVariable");return}const{values:O,texts:N}=(0,i.a7)(R);if((0,n.isEqual)(this._prevRepeatValues,O))return;const F=this.state.body,G=[],H={values:[""],texts:R.hasAllValue()?["All"]:["None"]},K=O.length?O:H.values,w=N.length?N:H.texts;for(let Y=0;Y<K.length;Y++){const J=Y===0?F:F.clone({key:(0,l.lv)(F.state.key,Y),repeatSourceKey:F.state.key});J.setState({$variables:(0,l.D1)(R,K[Y],w[Y])}),Y>0&&G.push(J)}const Q=this.getRepeatDirection(),k={repeatedPanels:G},te=this.state.itemHeight??10,q=this.state.height,se=this.getMaxPerRow(),re=G.length+1;if(Q==="h"){const Y=Math.ceil(re/se);k.height=Y*te}else k.height=re*te;if(this.setState(k),q!==this.state.height){const Y=s.jh.getLayout(this);if(Y instanceof s.hy){const X=(this.state.height??0)-(q??0);X>0&&Y.adjustYPositions(this.state.y,X),Y.forceRender()}}this._prevRepeatValues=O}handleVariableName(){this.state.variableName?this._handleGridSizeSubscribe():this._handleGridSizeUnsubscribe(),this.performRepeat()}setRepeatByVariable(R){const O={variableName:R};R||(O.repeatedPanels=void 0),R&&!this.state.repeatDirection&&(O.repeatDirection="h"),this.state.body.state.$variables&&this.state.body.setState({$variables:void 0}),this.setState(O)}getMaxPerRow(){return this.state.maxPerRow??4}setMaxPerRow(R){this.setState({maxPerRow:R})}getRepeatDirection(){return this.state.repeatDirection==="v"?"v":"h"}setRepeatDirection(R){this.setState({repeatDirection:R})}isRepeated(){return this.state.variableName!==void 0}scrollIntoView(){const R=document.querySelector(`[data-griditem-key="${this.state.key}"`);R instanceof HTMLElement?(0,c.R)(R):(0,c.d)(this,this.containerRef)}}},93395:(ne,j,e)=>{"use strict";e.d(j,{W:()=>s});var n=e(96540),a=e(52161);function s(d){return(0,n.useMemo)(()=>(0,a.sq)(d),[d])}},93427:(ne,j,e)=>{"use strict";e.d(j,{Pz:()=>O});var n=e(74848),a=e(2543),s=e(22803),d=e(96540),o=e(40961),l=e(97222),i=e(35555),c=e(53926),p=e(49579);const h=G=>G.reduce((H,{items:K,label:w})=>(H.push({label:w,kind:c.I.GroupTitle}),K.reduce((Q,k)=>(Q.push(k),Q),H)),[]),u=G=>G.reduce((H,K)=>H.length<K.label.length?K.label:H,""),r=(G,H,K)=>{const w=(0,p.A)(K,{font:G.typography.fontFamilyMonospace,fontSize:G.typography.bodySmall.fontSize,fontWeight:"normal"}),Q=g(w.width,G),k=v(w.height,G),te=E(k,H);return{listWidth:Q,listHeight:te,itemHeight:k}},v=(G,H)=>{const K=H.spacing.gridSize*2;return G+K},g=(G,H)=>{const K=H.spacing.gridSize*3;return Math.min(Math.max(G+K,200),800)},E=(G,H)=>{const K=Math.min(H.length,10),w=100,Q=K*G;return Math.max(Q,w)};var x=e(67458),m=e(63142);const y=(G,H,K)=>({typeaheadItem:(0,s.css)({label:"type-ahead-item",zIndex:11,padding:G.spacing(1,1,1,2),border:G.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:G.colors.background.secondary,color:G.colors.text.secondary,boxShadow:`0 0 20px ${G.v1.colors.dropdownShadow}`,visibility:K===!0?"visible":"hidden",width:"250px",minHeight:`${H+parseInt(G.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),b=({item:G,height:H})=>{const K=G&&!!G.documentation,w=G?G.label:"",Q=(0,x.G)(G?.documentation),k=(0,m.$j)(),te=y(k,H,K);return(0,n.jsxs)("div",{className:(0,s.cx)([te.typeaheadItem]),children:[(0,n.jsx)("b",{children:w}),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:Q}})]})};var D=e(23257),f=e.n(D),C=e(20662);const P=G=>({typeaheadItem:(0,s.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:G.typography.fontFamilyMonospace,padding:G.spacing(1,1,1,2),fontSize:G.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",[G.transitions.handleMotion("no-preference","reduce")]:{transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}}),typeaheadItemSelected:(0,s.css)({label:"type-ahead-item-selected",backgroundColor:G.colors.background.secondary}),typeaheadItemMatch:(0,s.css)({label:"type-ahead-item-match",color:G.v1.palette.yellow,borderBottom:`1px solid ${G.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,s.css)({label:"type-ahead-item-group-title",color:G.colors.text.secondary,fontSize:G.typography.bodySmall.fontSize,lineHeight:G.typography.body.lineHeight,padding:G.spacing(1)})}),T=G=>{const H=(0,m.of)(P),{isSelected:K,item:w,prefix:Q,style:k,onMouseEnter:te,onMouseLeave:q,onClickItem:se}=G,re=K?(0,s.cx)([H.typeaheadItem,H.typeaheadItemSelected]):(0,s.cx)([H.typeaheadItem]),Y=(0,s.cx)([H.typeaheadItemMatch]),X=(0,s.cx)([H.typeaheadItemGroupTitle]),J=w.label||"";return w.kind===c.I.GroupTitle?(0,n.jsx)("li",{className:X,style:k,children:(0,n.jsx)("span",{children:J})}):(0,n.jsx)("li",{role:"none",children:(0,n.jsx)("button",{role:"menuitem",className:re,style:k,onMouseDown:se,onMouseEnter:te,onMouseLeave:q,type:"button",children:w.highlightParts!==void 0?(0,n.jsx)(C.z,{text:J,highlightClassName:Y,highlightParts:w.highlightParts}):(0,n.jsx)(f(),{textToHighlight:J,searchWords:[Q??""],autoEscape:!0,highlightClassName:Y})})})},M=(G,H)=>G-H*Math.floor(G/H);class I extends d.PureComponent{constructor(){super(...arguments),this.listRef=(0,d.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const H=h(this.props.groupedItems),K=u(H),{listWidth:w,listHeight:Q,itemHeight:k}=r(this.context,H,K);this.setState({listWidth:w,listHeight:Q,itemHeight:k,allItems:H})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(H,K)=>{if(this.state.typeaheadIndex!==null&&K.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,a.isEqual)(H.groupedItems,this.props.groupedItems)===!1){const w=h(this.props.groupedItems),Q=u(w),{listWidth:k,listHeight:te,itemHeight:q}=r(this.context,w,Q);this.setState({listWidth:k,listHeight:te,itemHeight:q,allItems:w,typeaheadIndex:null})}},this.onMouseEnter=H=>{this.setState({hoveredItem:H})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=H=>{const K=this.state.allItems.length;if(K){const w=this.state.typeaheadIndex||0;let Q=M(w+H,K);this.state.allItems[Q].kind===c.I.GroupTitle&&(Q=M(Q+H,K)),this.setState({typeaheadIndex:Q});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}static{this.contextType=i.D}get menuPosition(){if(!window.getSelection)return"";const H=window.getSelection(),K=H&&H.anchorNode;if(K&&K.parentElement){const w=K.parentElement.getBoundingClientRect(),Q=window.scrollX,k=window.scrollY;return`position: absolute; display: flex; top: ${w.top+k+w.height+6}px; left: ${w.left+Q-2}px`}return""}render(){const{prefix:H,isOpen:K=!1,origin:w}=this.props,{allItems:Q,listWidth:k,listHeight:te,itemHeight:q,hoveredItem:se,typeaheadIndex:re}=this.state,Y=U(this.context),X=se||re,J=Q[se||re||0];return(0,n.jsxs)(B,{origin:w,isOpen:K,style:this.menuPosition,children:[(0,n.jsx)("ul",{role:"menu",className:Y.typeahead,"data-testid":"typeahead",children:(0,n.jsx)(l.Y1,{ref:this.listRef,itemCount:Q.length,itemSize:q,itemKey:_=>{const ee=Q&&Q[_];return ee?`${_}-${ee.label}`:`${_}`},width:k,height:te,children:({index:_,style:ee})=>{const ae=Q&&Q[_];return ae?(0,n.jsx)(T,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(ae):{},isSelected:re===null?!1:Q[re]===ae,item:ae,prefix:H,style:ee,onMouseEnter:()=>this.onMouseEnter(_),onMouseLeave:this.onMouseLeave}):null}})}),X&&(0,n.jsx)(b,{height:te,item:J})]})}}class B extends d.PureComponent{constructor(H){super(H);const{index:K=0,origin:w="query",style:Q}=H;this.node=document.createElement("div"),this.node.setAttribute("style",Q),this.node.classList.add(`slate-typeahead-${w}-${K}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),o.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}const U=G=>({typeahead:(0,s.css)({position:"relative",zIndex:G.zIndex.typeahead,borderRadius:G.shape.radius.default,border:`1px solid ${G.components.panel.borderColor}`,maxHeight:"66vh",overflowY:"scroll",overflowX:"hidden",outline:"none",listStyle:"none",background:G.components.panel.background,color:G.colors.text.primary,boxShadow:G.shadows.z2,strong:{color:G.v1.palette.yellow}})});var W=e(59258),V=e(35458),z=e(65937);const R=250;function O({onTypeahead:G,cleanText:H,onWillApplySuggestion:K,portalOrigin:w}){let Q,k={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const te=(0,a.debounce)(N,R),q=se=>{k={...k,...se}};return{onBlur:(se,re,Y)=>(k={...k,groupedItems:[]},Y()),onClick:(se,re,Y)=>(k={...k,groupedItems:[]},Y()),onKeyDown:(se,re,Y)=>{const J=k.groupedItems.length;switch(se.key){case"Escape":{if(J)return se.preventDefault(),k={...k,groupedItems:[]},re.insertText("");break}case"ArrowDown":case"ArrowUp":if(J){se.preventDefault(),Q.moveMenuIndex(se.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(se.shiftKey||se.ctrlKey)&&J)return se.preventDefault(),Q.insertSuggestion();break}case"Tab":{if(J)return se.preventDefault(),Q.insertSuggestion();break}default:{se.key.length===1&&te(re,q,G,H);break}}return Y()},commands:{selectSuggestion:(se,re)=>{const Y=k.groupedItems;if(!Y||!Y.length)return se;const X=se.applyTypeahead(re);return te(se,q,G,H),X},applyTypeahead:(se,re)=>{let Y=re.insertText||re.label;const X=re.kind==="function",J=re.move||0,_=J>0?J:0,ee=J<0?-J:0,{typeaheadPrefix:ae,typeaheadText:le,typeaheadContext:L}=k;K&&(Y=K(Y,{groupedItems:k.groupedItems,typeaheadContext:L,typeaheadPrefix:ae,typeaheadText:le}));const{forward:ie,backward:oe}=F(Y,ae,le,X,re.deleteBackwards,H);if(Y.match(/\n/)){const ue=(0,V.dF)(Y);return se.deleteBackward(oe).deleteForward(ie).insertFragment(ue).focus(),se}return k={...k,groupedItems:[]},se.snapshotSelection().deleteBackward(oe).deleteForward(ie).insertText(Y).moveForward(_).moveBackward(ee).focus(),se}},renderEditor(se,re,Y){if(re.value.selection.isExpanded)return Y();const X=Y();return(0,n.jsxs)(n.Fragment,{children:[X,(0,n.jsx)(I,{menuRef:J=>Q=J,origin:w,prefix:k.typeaheadPrefix,isOpen:!!k.groupedItems.length,groupedItems:k.groupedItems,onSelectSuggestion:re.selectSuggestion})]})}}}const N=async(G,H,K,w)=>{if(!K)return;const{value:Q}=G,{selection:k}=Q,te=Q.document.getClosestBlock(Q.focusBlock.key),q=Q.selection.start.offset-1,se=te&&te.getDecorations(G),re=se?se.filter(oe=>oe.start.offset<=q&&oe.end.offset>q&&oe.type===z.A).toArray():[],Y=se&&se.filter(oe=>oe.end.offset<=q&&oe.type===z.A&&oe.data.get("className").includes("label-key")).last(),X=Y&&Q.focusText.text.slice(Y.start.offset,Y.end.offset),J=re.map(oe=>oe.data.get("className")).join(" ").split(" ").filter(oe=>oe.length);let _=Q.focusText.text,ee=_.slice(0,k.focus.offset);re.length&&(_=Q.focusText.text.slice(re[0].start.offset,re[0].end.offset),ee=Q.focusText.text.slice(re[0].start.offset,k.focus.offset));const ae=ee.match(/(?:!?=~?"?|")(.*)/);ae?ee=ae[1]:w&&(ee=w(ee));const{suggestions:le,context:L}=await K({prefix:ee,text:_,value:Q,wrapperClasses:J,labelKey:X||void 0,editor:G}),ie=le.map(oe=>{if(!oe.items)return oe;const ue=oe.searchFunctionType||(oe.prefixMatch?W.T.Prefix:W.T.Word),ye=W.H[ue];let fe={...oe};return ee&&(oe.skipFilter||(fe.items=fe.items.filter(Ee=>(Ee.filterText||Ee.label).length>=ee.length),fe.items=ye(fe.items,ee)),fe.items=fe.items.filter(Ee=>!(Ee.insertText===ee||(Ee.filterText??Ee.label)===ee))),oe.skipSort||(fe.items=(0,a.sortBy)(fe.items,Ee=>Ee.sortText===void 0?Ee.sortValue!==void 0?Ee.sortValue:Ee.label:Ee.sortText||Ee.label)),fe}).filter(oe=>oe.items&&oe.items.length);H({groupedItems:ie,typeaheadPrefix:ee,typeaheadContext:L,typeaheadText:_}),G.blur().focus()};function F(G,H,K,w,Q,k){const te=Q||H.length,q=k?k(K):K,se=K.indexOf(H),re=se>-1?q.length-se-H.length:q.length-H.length;return{forward:!!(H&&re>0||G===K)&&!w?re+se:0,backward:te}}},93521:(ne,j,e)=>{"use strict";e.d(j,{S:()=>n});const n=(a,s)=>{const d=a.group;return d?s?s.group!==d:!0:!!s?.group}},93602:(ne,j,e)=>{"use strict";e.d(j,{S:()=>E});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(92745),l=e(27489),i=e(2863),c=e(77870),p=e(63142),h=e(42227),u=e(6079),r=e(85032),v=e(76792),g=e(7078);function E(D){const f=(0,s.useRef)(null),[C,P]=(0,h.dR)({keyboardEvents:D.keyboardEvents,containerRef:f}),T=(0,p.$j)(),M=b(T,P),{className:I,current:B,onChange:U,enableKeyboardNavigation:W,onClickEmptyStateCTA:V}=D,z=(0,h.Kr)({alerting:D.alerting,annotations:D.annotations,dashboard:D.dashboard,logs:D.logs,metrics:D.metrics,mixed:D.mixed,pluginId:D.pluginId,tracing:D.tracing,type:D.type,variables:D.variables},D.dataSources),[R,O]=(0,h.TX)(),N=(0,c.S)(),F=D.filter?z.filter(D.filter):z;return(0,n.jsxs)("div",{ref:f,className:(0,a.cx)(I,M.container),"data-testid":d.Tp.components.DataSourcePicker.dataSourceList,children:[F.length===0&&(0,n.jsx)(x,{className:M.emptyState,onClickCTA:V}),F.sort((0,g.Tj)(B,R,y(),N.enabled?N.initialFavoriteDataSources:void 0)).map(G=>(0,n.jsx)(r.A,{"data-testid":"data-source-card",ds:G,onClick:()=>{O(G),U(G)},selected:(0,g.Df)(G,B),isFavorite:N.enabled?N.isFavoriteDatasource(G.uid):void 0,onToggleFavorite:N.enabled?()=>{(0,l.rR)(v.kw,{item:v.fE.TOGGLE_FAVORITE,ds_type:G.type,is_favorite:!N.isFavoriteDatasource(G.uid)}),N.isFavoriteDatasource(G.uid)?N.removeFavoriteDatasource(G):N.addFavoriteDatasource(G)}:void 0,...W?C:{}},G.uid))]})}function x({className:D,onClickCTA:f}){const C=(0,p.of)(m);return(0,n.jsxs)("div",{className:(0,a.cx)(D,C.container),children:[(0,n.jsx)("p",{className:C.message,children:(0,n.jsx)(o.x6,{i18nKey:"data-source-picker.list.no-data-source-message",children:"No data sources found"})}),(0,n.jsx)(u.r,{onClick:f})]})}function m(D){return{container:(0,a.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),message:(0,a.css)({marginBottom:D.spacing(3)})}}function y(){return(0,i.w)().getVariables().filter(f=>f.type==="datasource").map(f=>`\${${f.id}}`)}function b(D,f){return{container:(0,a.css)({display:"flex",flexDirection:"column",padding:D.spacing(.5),[`${f}`]:{backgroundColor:D.colors.background.secondary}}),emptyState:(0,a.css)({height:"100%",flex:1})}}},93612:(ne,j,e)=>{"use strict";e.d(j,{Fs:()=>D,SS:()=>c,Tk:()=>E,UN:()=>y,_2:()=>b,bZ:()=>m,dn:()=>o,hk:()=>r,nS:()=>u,nx:()=>i,pi:()=>h,wk:()=>v,y7:()=>x});var n=e(41811),a=e(8535),s=e(99305),d=e(38221);function o(f,C=(0,a.Gu)(),P=!0){const{id:T,rootStateKey:M}=f,B=i(M,C).variables[T];if(!B){if(P)throw new Error(`Couldn't find variable with id:${T}`);return}return B}function l(f,C,P=(0,a.Gu)()){return Object.values(i(C,P).variables).filter(f).sort((T,M)=>T.index-M.index)}function i(f,C=(0,a.Gu)()){return C.templating.keys[(0,s.q4)(f)]??(0,d.x)()}function c(f,C=(0,a.Gu)()){return l(p,f,C)}function p(f){return f.type!=="system"}const h=(0,n.default)((f,C)=>c(f,(0,a.Gu)())),u=(f,C)=>c(f,C);function r(f,C=(0,a.Gu)()){return v(Object.values(i(f,C).variables))}function v(f){const C=f.filter(p).sort((P,T)=>P.index-T.index);return C.length>0?C[C.length-1].index+1:0}function g(f,C=getState()){return i(f,C).transaction.isDirty}function E(f=(0,a.Gu)()){return f.templating?.lastKey}function x(f=(0,a.Gu)()){if(!f.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return f.templating.lastKey}function m(f,C=(0,a.Gu)()){const P=E(C);return P?l(f,P,C):[]}function y(f=(0,a.Gu)()){const C=E(f);return C?c(C,f):[]}function b(f,C=(0,a.Gu)()){const P=E(C);if(P)return o({id:f,rootStateKey:P,type:"query"},C,!1)}function D(f,C){return f[C]}},93630:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>c});var n=e(2543),a=e.n(n),s=e(96540);const d=.1,o=2,l=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),i=p=>{let h=p.root,u=new Set,r=null,v=null;if(!h)return;h.tabIndex=0;const g=(f,C)=>{const{cursor:P}=p;if(P.left===void 0||P.top===void 0)return;const{width:T,height:M}=p.over.style,[I,B]=[Math.floor(parseFloat(T)),Math.floor(parseFloat(M))];p.setCursor({left:(0,n.clamp)(P.left+f,0,I),top:(0,n.clamp)(P.top+C,0,B)})},E=f=>{if(u.size===0||!p){v=null;return}const T=(f-(v??f))*d;let M=0,I=0;u.has("ArrowUp")&&(I-=T),u.has("ArrowDown")&&(I+=T),u.has("ArrowLeft")&&(M-=T),u.has("ArrowRight")&&(M+=T),u.has("Shift")&&(M*=o,I*=o),g(M,I);const{cursor:B}=p;if(u.has(" ")&&B){const U=Number(p.over.style.height.slice(0,-2));p.setSelect({left:B.left<r?B.left:r,top:0,width:Math.abs(B.left-(r??B.left)),height:U},!1)}v=f,window.requestAnimationFrame(E)},x=f=>{if(f.key==="Tab"){p.setCursor({left:-5,top:-5});return}if(!l.has(f.key))return;if(f.preventDefault(),f.stopPropagation(),!u.has(f.key)){const P=u.size===0;u.add(f.key),r=f.key===" "&&r===null?p.cursor.left:r,P&&window.requestAnimationFrame(E)}},m=f=>{l.has(f.key)&&(u.delete(f.key),f.key===" "&&(f.preventDefault(),f.stopPropagation(),p.setSelect(p.select),r=null))},y=()=>{if(!h?.matches(":focus-visible"))return;const f=parseFloat(p.over.style.width),C=parseFloat(p.over.style.height);p.setCursor({left:f/2,top:C/2})},b=()=>{v=null,r=null,u.clear(),p.setSelect({left:0,top:0,width:0,height:0},!1)};h.addEventListener("keydown",x),h.addEventListener("keyup",m),h.addEventListener("focus",y),h.addEventListener("blur",b);const D=()=>{h?.removeEventListener("keydown",x),h?.removeEventListener("keyup",m),h?.removeEventListener("focus",y),h?.removeEventListener("blur",b),h=null};(p.hooks.destroy??=[]).push(D)},c=({config:p})=>((0,s.useLayoutEffect)(()=>p.addHook("init",i),[p]),null)},93732:(ne,j,e)=>{"use strict";e.d(j,{$:()=>g});var n=e(74848),a=e(22803),s=e(96540),d=e(73757),o=e(8934),l=e(92745),i=e(63142),c=e(18857),p=e(30703),h=e(11297);const u=({data:x,className:m,label:y,isFocused:b,innerProps:D})=>{const f=(0,i.of)(r);return(0,n.jsx)("div",{className:(0,a.cx)(f.option,b&&f.optionFocused),"aria-label":(0,l.t)("tag-filter.tag-option-label","Tag option"),...D,children:(0,n.jsx)("div",{className:(0,a.cx)(f.optionInner,m),children:typeof y=="string"?(0,n.jsx)(h.E,{label:y,removeIcon:!1,count:x.count??0}):y})})},r=x=>({option:(0,a.css)({padding:x.spacing(.5),whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent",borderRadius:x.shape.radius.default,"&:hover":{background:x.colors.action.hover}}),optionFocused:(0,a.css)({background:x.colors.action.focus,borderStyle:"solid",borderTop:0,borderRight:0,borderBottom:0,borderLeftWidth:"2px"}),optionInner:(0,a.css)({position:"relative",textAlign:"left",width:"100%",display:"block",cursor:"pointer",padding:"2px 0"})}),v=(x,m)=>{const y=RegExp((0,o.jD)(m),"i");return!!(x.value&&y.test(x.value))},g=({allowCustomValue:x=!1,formatCreateLabel:m,hideValues:y,inputId:b,isClearable:D,onChange:f,placeholder:C,tagOptions:P,tags:T,width:M,disabled:I})=>{const B=(0,i.of)(E),U=T.map(te=>({value:te,label:te,count:0})),[W,V]=(0,s.useState)(U),[z,R]=(0,s.useState)(!1),[O,N]=(0,s.useState)(T),[F,G]=(0,s.useState)(U),H=(0,s.useMemo)(()=>T.join(),[T]),K=(0,s.useCallback)(async()=>(await P()).map(q=>T.includes(q.term)?{value:q.term,label:q.term,count:0}:{value:q.term,label:q.term,count:q.count}),[P,T]),w=(0,s.useCallback)(async()=>{R(!0);const te=await K();x&&F.forEach(q=>te.push(q)),V(te),R(!1)},[x,F,K]);(0,s.useEffect)(()=>{T.length>0&&W.length===0&&w()},[w,W.length,T.length]),(0,s.useEffect)(()=>{T!==O&&(N(T),w())},[w,O,T]);const Q=te=>{te.forEach(q=>q.count=0),f((te||[]).map(q=>q.value)),x&&G(te.filter(q=>!T.includes(q)))},k={onFocus:w,isLoading:z,options:W,allowCreateWhileLoading:!0,allowCustomValue:x,formatCreateLabel:m,defaultOptions:!0,filterOption:v,getOptionLabel:te=>te.label,getOptionValue:te=>te.value,inputId:b,isMulti:!0,onChange:Q,loadingMessage:(0,l.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,l.t)("tag-filter.no-tags","No tags found"),placeholder:C||(0,l.t)("tag-filter.placeholder","Filter by tag"),value:U,width:M,components:{Option:u,MultiValueLabel:()=>null,MultiValueRemove(te){const{data:q}=te;return(0,n.jsx)(d.c.MultiValueRemove,{...te,children:(0,n.jsx)(h.E,{label:q.label,removeIcon:!0,count:q.count},q.label)})},MultiValueContainer:y?()=>null:d.c.MultiValueContainer}};return(0,n.jsxs)("div",{className:B.tagFilter,children:[D&&T.length>0&&(0,n.jsx)("button",{className:B.clear,onClick:()=>Q([]),disabled:I,children:(0,n.jsx)(l.x6,{i18nKey:"tag-filter.clear-button",children:"Clear tags"})}),(0,n.jsx)(c.KF,{...k,prefix:(0,n.jsx)(p.I,{name:"tag-alt"}),"aria-label":(0,l.t)("tag-filter.select-aria-label","Tag filter"),disabled:I},H)]})};g.displayName="TagFilter";const E=x=>{const m=(0,h.$)(x);return{tagFilter:(0,a.css)({position:"relative",minWidth:"180px",flexGrow:1,[`.${m.badge}`]:{marginLeft:"6px",cursor:"pointer"}}),clear:(0,a.css)({background:"none",border:"none",textDecoration:"underline",fontSize:"12px",padding:"none",position:"absolute",top:"-17px",right:0,cursor:"pointer",color:x.colors.text.secondary,"&:hover":{color:x.colors.text.primary}})}}},93854:(ne,j,e)=>{"use strict";e.d(j,{A5:()=>g,TM:()=>p,Tm:()=>x,cu:()=>h,hI:()=>v,m6:()=>E,u4:()=>l});var n=e(99885),a=e(62963),s=e(22429),d=e(75735),o=e(83458);async function l(m){return m.query&&m.query.indexOf("folder:current")>=0&&(m={...m,location:await i(),query:m.query.replace("folder:current","").trim()},m.query?.length||(m.query="*")),Promise.resolve(m)}async function i(){try{let m=(0,s.UA)().getCurrent();return m||(await c(500),m=(0,s.UA)().getCurrent()),Promise.resolve(m?.meta?.folderUid)}catch(m){console.error(m)}}function c(m){return new Promise(y=>setTimeout(y,m))}function p(m,y){return m==="dashboard"?"apps":m==="folder"?y?"folder-open":"folder":m==="sharedwithme"?"users-alt":"question-circle"}function h(m,y){return m&&(0,a.I2)(m.uid)?"users-alt":p(m.kind,y)}function u(m){switch(m){case"dashboard":case"folder":case"panel":return m;default:return"dashboard"}}function r(m){return m!==null&&typeof m=="object"&&"locationInfo"in m}function v(m,y){const b=y?.dataFrame.meta?.custom,D=r(b)?b:void 0,f={kind:u(m.kind),uid:m.uid,title:m.name,url:m.url,tags:m.tags??[],managedBy:m.managedBy},C=D?.sortBy;if(C){const P=m[C];(typeof P=="string"||typeof P=="number")&&(f.sortMetaName=C,f.sortMeta=P)}if(m.location){const P=m.location.split("/"),T=P[P.length-1],M=D?.locationInfo[T];M&&(f.parentTitle=M.name,f.parentKind=M.kind,f.parentUID=T)}return f}function g(m){return m.items.map(y=>{const b={};y.metadata.deletionTimestamp&&(b.deletionTimestamp=y.metadata.deletionTimestamp);const D={resource:"dashboards",name:y.metadata.name,title:y.spec?.title,location:"general",folder:y?.metadata?.annotations?.[d.ew]??"general",tags:y.spec?.tags||[],field:b,url:""};return D.folder?D:{...D,location:"general",folder:"general"}})}function E(m){return m.map(y=>{const b={type:y.resource==="folders"?o.G.DashFolder:o.G.DashDB,title:y.title,uid:y.name,url:y.url,tags:y.tags||[],isDeleted:!0,sortMeta:0};return y.folder&&y.folder!=="general"&&(b.folderUid=y.folder),b})}function x(m,y){let b=m;if(y.query&&y.query.trim()!==""&&y.query!=="*"||y.tag&&y.tag.length>0){const D=y.query||y.tag?.join(",")||"",f=m.map(P=>`${P.title},${P.tags.join(",")}`);b=(0,n.X)(f,D).map(P=>m[P])}if(y.sort)if(y.sort==="deleted-asc"||y.sort==="deleted-desc"){const D=y.sort==="deleted-desc"?-1:1;b.sort((f,C)=>{const P=f.field.deletionTimestamp,T=C.field.deletionTimestamp;if(typeof P!="string"&&typeof T!="string")return 0;if(typeof P!="string")return 1;if(typeof T!="string")return-1;const M=Date.parse(P),I=Date.parse(T);return D*(M-I)})}else{const D=new Intl.Collator,f=y.sort==="alpha-desc"?-1:1;b.sort((C,P)=>f*D.compare(C.title,P.title))}return b}},93922:(ne,j,e)=>{"use strict";e.d(j,{EC:()=>i,L_:()=>o,YS:()=>d,bA:()=>l,wV:()=>c});var n=e(68143),a=e(6890),s=e(74396);function d(p={getBackendSrv:n.AI}){return async h=>{const u=await p.getBackendSrv().get("/api/org");return h((0,s.bK)(u)),u}}function o(p={getBackendSrv:n.AI}){return async(h,u)=>{const r=u().organization.organization;await p.getBackendSrv().put("/api/org",{name:r.name}),h((0,a.YA)(r.name)),h(d(p))}}function l(p,h={getBackendSrv:n.AI}){return async u=>{const r=await h.getBackendSrv().post("/api/user/using/"+p);u((0,a.YA)(r.name))}}function i(p,h={getBackendSrv:n.AI}){return async u=>{const r=await h.getBackendSrv().post("/api/orgs/",p);u(l(r.orgId))}}function c(p={getBackendSrv:n.AI}){return async h=>{const u=await p.getBackendSrv().get("/api/user/orgs");return h((0,s.Bz)(u)),u}}},93948:(ne,j,e)=>{"use strict";e.d(j,{a:()=>v,t:()=>r});var n=e(74848),a=e(41119),s=e(79118),d=e(55386),o=e(95004),l=e(739),i=e(63142),c=e(53568),p=e(21539),h=e(53431),u=e(74198);const r={type:l.ob.Sparkline,drawStyle:l.GR.Line,lineInterpolation:l.dx.Smooth,lineWidth:1,fillOpacity:17,gradientMode:l.on.Hue,pointSize:2,barAlignment:l.Nj.Center,showPoints:l.yL.Never,hideValue:!1},v=x=>{const{field:m,innerWidth:y,tableStyles:b,cell:D,cellProps:f,timeRange:C}=x,P=g(D.value),T=(0,i.$j)();if(!P)return(0,n.jsx)("div",{...f,className:b.cellContainer,children:m.config.noValue||"no data"});P.x&&!P.x.config.interval&&P.x.values.length>1&&(P.x.config.interval=P.x.values[1]-P.x.values[0]),P.y.values=P.y.values.map(z=>Number.isFinite(z)?z:null);const M=(0,s.AP)(P.y);P.y.config.min=M.min,P.y.config.max=M.max,P.y.state={range:M},P.timeRange=C;const I=E(m),B={color:m.config.color,custom:{...r,...I}},U=m.config.custom?.cellOptions?.hideValue;let W=0,V=null;if(!U){const z=(0,a.LI)(D.value)?D.value.value:null,R=m.display(z),O=(0,u.zi)(m,R,D.row.index);W=(0,c.kD)((0,d.cN)(O),16).width+T.spacing.gridSize,V=(0,n.jsx)(p.i,{style:{width:`${W-T.spacing.gridSize}px`,textAlign:"right",marginRight:T.spacing(1)},value:R})}return(0,n.jsxs)("div",{...f,className:b.cellContainer,children:[V,(0,n.jsx)("div",{children:(0,n.jsx)(h.O,{width:y-W,height:b.cellHeightInner,sparkline:P,config:B,theme:b.theme})})]})};function g(x){if(Array.isArray(x))return{y:{name:"test",type:o.PU.number,values:x,config:{}}};if((0,a.ci)(x)){const m=x.fields.find(b=>b.type===o.PU.time),y=x.fields.find(b=>b.type===o.PU.number);if(m&&y)return{x:m,y}}}function E(x){let m=(0,u.bk)(x);if(m.type===l.ob.Auto&&(m={...m,type:l.ob.Sparkline}),m.type===l.ob.Sparkline)return m;throw new Error(`Expected options type ${l.ob.Sparkline} but got ${m.type}`)}},94018:(ne,j,e)=>{"use strict";e.d(j,{v:()=>u});var n=e(74848),a=e(22803),s=e(96540),d=e(70255),o=e(63142),l=e(21348),i=e(48542),c=e(30703);const p=(0,s.forwardRef)(({name:g,onClick:E,icon:x,className:m,colorIndex:y,...b},D)=>{const f=(0,o.$j)(),C=v(f,g,y),P=M=>{M.preventDefault(),M.stopPropagation(),E?.(g,M)},T=(0,a.cx)(C.wrapper,m,{[C.hover]:E!==void 0});return E?(0,n.jsxs)("button",{...b,className:T,onClick:P,ref:D,children:[x&&(0,n.jsx)(c.I,{name:x}),g]}):(0,n.jsxs)("span",{...b,className:T,ref:D,children:[x&&(0,n.jsx)(c.I,{name:x}),g]})});p.displayName="Tag";const h=({rootProps:g})=>{const E=(0,o.of)(r);return(0,n.jsx)(d.A,{width:60,height:22,containerClassName:E.container,...g})},u=(0,l.j)(p,h),r=()=>({container:(0,a.css)({lineHeight:1})}),v=(g,E,x)=>{let m;return x===void 0?m=(0,i.MC)(E):m=(0,i.yC)(x),{wrapper:(0,a.css)({appearance:"none",borderStyle:"none",fontWeight:g.typography.fontWeightMedium,fontSize:g.typography.size.sm,lineHeight:g.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:m.color,color:g.v1.palette.gray98,whiteSpace:"pre",textShadow:"none",padding:"3px 6px",borderRadius:g.shape.radius.sm}),hover:(0,a.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},94076:(ne,j,e)=>{"use strict";e.d(j,{A:()=>a,X:()=>s});var n=e(96540);function a({children:d,onSetScrollRef:o,divId:l}){const i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{o&&o(new s(document.documentElement))},[i,o]),d}class s{constructor(o){this.element=o}get scrollTop(){return this.element.scrollTop}scrollTo(o,l,i=0){if(!(this.element.scrollHeight-this.element.clientHeight-l>=0)&&i<10){requestAnimationFrame(()=>this.scrollTo(o,l,i+1));return}this.element.scrollTo(o,l)}}},94232:(ne,j,e)=>{"use strict";e.d(j,{u:()=>a});var n=e(96540);function a(s,d){const[o,l]=(0,n.useState)();return(0,n.useEffect)(()=>{const i=s.subscribe(d,l);return()=>i.unsubscribe()},[s,d]),o}},94380:(ne,j,e)=>{"use strict";e.d(j,{A:()=>w});var n=e(74848),a=e(32899),s=e(92745),d=e(43173),o=e(87063),l=e(88559),i=e(45229),c=e(64762),p=e(70327),h=e(96137),u=e(67598),r=e(80218),v=e(71639);function g(){const[Q]=(0,v.D)(),[k]=p.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),te=(0,s.t)("alerting.rules.pause-rule.success","Rule evaluation paused"),q=(0,s.t)("alerting.rules.resume-rule.success","Rule evaluation resumed");return(0,r.Yb)(async(se,re,Y)=>{const X=(0,u.Rc)(se),J=(0,h.LH)({uid:re,pause:Y}),{newRuleGroupDefinition:_,rulerConfig:ee}=await Q(X,[J]);return k({rulerConfig:ee,namespace:se.namespace.uid,payload:_,notificationOptions:{successMessage:Y?te:q}}).unwrap()})}var E=e(77256);const m=({uid:Q,isPaused:k,groupIdentifier:te,onPauseChange:q})=>{const se=(0,c._2)(),[re,Y]=g(),[X,J]=k?["play","Resume evaluation"]:["pause","Pause evaluation"],_=async ee=>{try{await re.execute(te,Q,ee)}catch(ae){se.error(`Failed to ${ee?"pause":"resume"} the rule: ${(0,E.JZ)(ae)}`);return}q?.()};return(0,n.jsx)(o.W.Item,{label:J,icon:X,disabled:(0,r.VP)(Y),onClick:()=>{_(!k)}})};var y=e(27691),b=e(96540),D=e(54092),f=e(46907),C=e(24619),P=e(29609);function T(Q,k){const te=(0,b.useRef)([]),q=M(Q,k),{links:se}=(0,f.U)(q);if(!Q)return te.current;const re=(0,P.uo)(Q),Y=Q.type;if(!re||!Y)return te.current;const{pluginId:X}=re;return se.filter(J=>J.pluginId===X)}function M(Q,k){return(0,b.useMemo)(()=>{if(!Q)return{extensionPointId:""};const te=Q.type,{namespace:q,groupName:se}=k,re="uid"in q?q.uid:q.name;switch(te){case C.JS.Alerting:return{extensionPointId:D.SM.AlertingAlertingRuleAction,context:{name:Q.name,namespace:re,group:se,expression:Q.query,labels:Q.labels??{},annotations:Q.annotations??{}}};case C.JS.Recording:return{extensionPointId:D.SM.AlertingRecordingRuleAction,context:{name:Q.name,namespace:re,group:se,expression:Q.query,labels:Q.labels??{}}};default:return{extensionPointId:""}}},[k,Q])}var I=e(16692),B=e(94646),U=e(92367),W=e(45967),V=e(3986),z=e(182),R=e(28405);const O=(0,z.Wx)(),N=({title:Q="",severity:k="",url:te=""})=>{const q=createBridgeURL(O,"/incidents/declare",{title:Q,severity:k,url:te}),{loading:se,installed:re,settings:Y}=usePluginBridge(O);return jsxs(Fragment,{children:[se===!0&&jsx(Button,{icon:"fire",size:"sm",type:"button",disabled:!0,children:jsx(Trans,{i18nKey:"alerting.declare-incident-button.declare-incident",children:"Declare Incident"})}),re===!1&&jsx(Tooltip,{content:t("alerting.declare-incident-button.content-grafana-incident-installed-configured-correctly","Grafana Incident is not installed or is not configured correctly"),children:jsx(Button,{icon:"fire",size:"sm",type:"button",disabled:!0,children:jsx(Trans,{i18nKey:"alerting.declare-incident-button.declare-incident",children:"Declare Incident"})})}),Y&&jsx(LinkButton,{icon:"fire",size:"sm",type:"button",href:q,children:jsx(Trans,{i18nKey:"alerting.declare-incident-button.declare-incident",children:"Declare Incident"})})]})},F=({title:Q="",severity:k="",url:te=""})=>{const q=(0,R.h)(O,"/incidents/declare",{title:Q,severity:k,url:te}),{loading:se,installed:re,settings:Y}=(0,V._)(O);return(0,n.jsxs)(n.Fragment,{children:[se===!0&&(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.declare-incident-menu-item.label-declare-incident","Declare incident"),icon:"fire",disabled:!0}),re===!1&&(0,n.jsx)(W.m,{content:(0,s.t)("alerting.declare-incident-menu-item.content-grafana-incident-installed-configured-correctly","Grafana Incident is not installed or is not configured correctly"),children:(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.declare-incident-menu-item.label-declare-incident","Declare incident"),icon:"fire",disabled:!0})}),Y&&(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.declare-incident-menu-item.label-declare-incident","Declare incident"),url:q,icon:"fire"})]})},G=({promRule:Q,rulerRule:k,identifier:te,groupIdentifier:q,handleSilence:se,handleManageEnrichments:re,handleDelete:Y,handleDuplicateRule:X,onPauseChange:J,buttonSize:_,fill:ee})=>{const[ae,le,L,ie,oe]=(0,I.Gy)(k,q,[I.j5.Pause,I.j5.Delete,I.j5.Duplicate,I.j5.Silence,I.j5.ModifyExport]),[ue,ye,fe,Ee,Ae]=(0,I.M6)(P.R$.grafana.rule(Q)?Q:I.hT,[I.j5.Pause,I.j5.Delete,I.j5.Duplicate,I.j5.Silence,I.j5.ModifyExport]),[Ge,Fe]=ae,[Pe,Ve]=ue,me=Ge&&Fe||Pe&&Ve,[Se,Qe]=le,[Ue,Ie]=ye,Re=Se&&Qe||Ue&&Ie,[Ke,Le]=L,[ze,Be]=fe,$e=Ke&&Le||ze&&Be,[Ye,de]=ie,[ge,pe]=Ee,De=Ye&&de||ge&&pe,[Me,be]=oe,[Oe,Ne]=Ae,We=Me&&be||Oe&&Ne,qe=T(Q,q),st=qe.length>0,rt=(!(0,E.y$)()||(0,E.ES)())&&P.R$.alertingRule(Q)&&Q.state===C.cF.Firing,ot=(0,E.S2)(te),mt=[me,De,rt,$e].some(Boolean)&&[We].some(Boolean),pt=(0,P.xE)(k??Q),ke=P.p.grafana.rule(k)&&(0,P.hC)(k)||P.R$.grafana.rule(Q)&&Q.isPaused,Ze=pt&&re&&d.$.featureToggles.alertingEnrichmentPerRule&&d.$.featureToggles.alertEnrichment,nt=(0,n.jsxs)(n.Fragment,{children:[Ze&&(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.alert-menu.manage-enrichments","Manage enrichments"),icon:"edit",onClick:re}),me&&pt&&q.groupOrigin==="grafana"&&(0,n.jsx)(m,{uid:pt,isPaused:ke,groupIdentifier:q,onPauseChange:J}),De&&(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.alert-menu.silence-notifications","Silence notifications"),icon:"bell-slash",onClick:se}),rt&&(0,n.jsx)(F,{title:Q.name,url:""}),$e&&(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.alert-menu.duplicate","Duplicate"),icon:"copy",onClick:()=>X(te)}),mt&&(0,n.jsx)(o.W.Divider,{}),ot&&(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.alert-menu.copy-link","Copy link"),icon:"share-alt",onClick:()=>K(ot)}),We&&(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.alert-menu.export","Export"),icon:"download-alt",childItems:[(0,n.jsx)(H,{identifier:te},"export-with-modifications")]}),st&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.W.Divider,{}),qe.map(ut=>(0,n.jsx)(o.W.Item,{label:ut.title,icon:ut.icon,onClick:ut.onClick},ut.id))]}),Re&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.W.Divider,{}),(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.common.delete","Delete"),icon:"trash-alt",destructive:!0,onClick:()=>{(0,P.aw)(te)&&Y(te,q)}})]})]});return(0,n.jsx)(l.m,{overlay:(0,n.jsx)(o.W,{children:nt}),placement:"bottom",children:(0,n.jsx)(y.A,{size:_,fill:ee})})},H=({identifier:Q})=>{const k=window.location.pathname+window.location.search,te=(0,U.G)(`/alerting/${encodeURIComponent(B.$9(Q))}/modify-export`,{returnTo:k});return(0,n.jsx)(o.W.Item,{label:(0,s.t)("alerting.alert-menu.with-modifications","With modifications"),icon:"file-edit-alt",url:te},"with-modifications")};function K(Q){navigator.clipboard?.writeText(Q).then(()=>{i.A.emit(a.r1.alertSuccess,["URL copied to clipboard"])})}const w=G},94452:(ne,j,e)=>{"use strict";e.d(j,{E:()=>a,c:()=>s});const n="__searchFilter",a=d=>d&&typeof d=="string"?d.indexOf(n)!==-1:!1,s=d=>{const{query:o,wildcardChar:l}=d;if(!a(o))return{};let{options:i}=d;return i=i||{searchFilter:""},{__searchFilter:{value:i.searchFilter?`${i.searchFilter}${l}`:`${l}`,text:""}}}},94535:(ne,j,e)=>{"use strict";e.d(j,{D:()=>g});var n=e(74848),a=e(22803),s=e(96540),d=e(92745),o=e(63142),l=e(35484),i=e(30703),c=e(41654),p=e(51898),h=e(92132);const u=x=>{if(!x)return!1;const m=x.parentElement.getBoundingClientRect(),y=x.getBoundingClientRect();return y.width!==0&&m.right+y.width+10>window.innerWidth},r=(0,s.memo)(({items:x,isOpen:m,close:y,customStyle:b})=>{const D=(0,o.of)(v),f=(0,s.useRef)(null),[C]=(0,h.t)({localRef:f,isMenuOpen:m,close:y}),[P,T]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{m&&f.current&&T(u(f.current))},[m]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:D.iconWrapper,"aria-hidden":!0,"data-testid":p.Tp.components.Menu.SubMenu.icon,children:(0,n.jsx)(i.I,{name:"angle-right",className:D.icon})}),m&&(0,n.jsx)("div",{ref:f,className:(0,a.cx)(D.subMenu,{[D.pushLeft]:P}),"data-testid":p.Tp.components.Menu.SubMenu.container,style:b,children:(0,n.jsx)("div",{tabIndex:-1,className:D.itemsWrapper,role:"menu",onKeyDown:C,children:x})})]})});r.displayName="SubMenu";const v=x=>({iconWrapper:(0,a.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,a.css)({opacity:.7,marginLeft:x.spacing(1),color:x.colors.text.secondary}),itemsWrapper:(0,a.css)({background:x.colors.background.elevated,padding:x.spacing(.5),boxShadow:x.shadows.z3,display:"inline-block",borderRadius:x.shape.radius.default}),pushLeft:(0,a.css)({right:"100%",left:"unset"}),subMenu:(0,a.css)({position:"absolute",top:0,left:"100%",zIndex:x.zIndex.dropdown})}),g=s.memo(s.forwardRef((x,m)=>{const{url:y,icon:b,label:D,description:f,ariaLabel:C,ariaChecked:P,target:T,onClick:M,className:I,active:B,disabled:U,destructive:W,childItems:V,role:z,tabIndex:R=-1,customSubMenuContainerStyles:O,shortcut:N,testId:F}=x,G=(0,o.of)(E),[H,K]=(0,s.useState)(B),[w,Q]=(0,s.useState)(!1),k=(0,s.useCallback)(()=>{U||(Q(!0),K(!0))},[U]),te=(0,s.useCallback)(()=>{U||(Q(!1),K(!1))},[U]),q=V&&V.length>0,se=q?"div":y===void 0?"button":"a",re=(0,a.cx)({[G.item]:!0,[G.active]:H,[G.disabled]:U,[G.destructive]:W&&!U},I),Y={[se==="button"?"disabled":"aria-disabled"]:U,...se==="a"&&U&&{href:void 0,onClick:void 0},...U&&{tabIndex:-1,"data-disabled":U}},X=(0,s.useRef)(null);(0,s.useImperativeHandle)(m,()=>X.current);const J=ae=>{switch(ae.key){case"ArrowRight":ae.preventDefault(),ae.stopPropagation(),q&&(Q(!0),K(!0));break;default:break}},_=()=>{Q(!1),K(!1),X?.current?.focus()},ee=!!(N&&N.length>0);return(0,n.jsxs)(se,{target:T,className:re,rel:T==="_blank"?"noopener noreferrer":void 0,href:y,onClick:ae=>{q&&!w&&(ae.preventDefault(),ae.stopPropagation()),M?.(ae)},onMouseEnter:k,onMouseLeave:te,onKeyDown:J,role:y?z:z||"menuitem","data-role":"menuitem",ref:X,"data-testid":F,"aria-label":C,"aria-checked":P,tabIndex:R,...Y,children:[(0,n.jsxs)(c.B,{direction:"row",justifyContent:"flex-start",alignItems:"center",children:[b&&(0,n.jsx)(i.I,{name:b,className:G.icon,"aria-hidden":!0}),(0,n.jsx)("span",{className:G.ellipsis,children:D}),(0,n.jsxs)("div",{className:(0,a.cx)(G.rightWrapper,{[G.withShortcut]:ee}),children:[ee&&(0,n.jsxs)("div",{className:G.shortcut,children:[(0,n.jsx)(i.I,{name:"keyboard",title:(0,d.t)("grafana-ui.menu-item.keyboard-shortcut-label","Keyboard shortcut")}),N]}),q&&(0,n.jsx)(r,{items:V,isOpen:w,close:_,customStyle:O})]})]}),f&&(0,n.jsx)("div",{className:(0,a.cx)(G.description,G.ellipsis,{[G.descriptionWithIcon]:b!==void 0}),children:f}),x.component?(0,n.jsx)(x.component,{}):null]})}));g.displayName="MenuItem";const E=x=>{const m=x.components.menu.padding*x.spacing.gridSize;return{item:(0,a.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:x.colors.text.primary,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center",padding:x.spacing(.5,1.5),minHeight:x.spacing(4),borderRadius:(0,l.getInternalRadius)(x,m,{parentBorderWidth:0}),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus-visible":{background:x.colors.action.hover,color:x.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,l.getFocusStyles)(x)}),active:(0,a.css)({background:x.colors.action.hover}),destructive:(0,a.css)({color:x.colors.error.text,svg:{color:x.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:x.colors.error.main,color:x.colors.error.contrastText,svg:{color:x.colors.error.contrastText}}}),disabled:(0,a.css)({color:x.colors.action.disabledText,label:"menu-item-disabled","&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:x.colors.action.disabledText}}),icon:(0,a.css)({opacity:.7,color:x.colors.text.secondary}),rightWrapper:(0,a.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),withShortcut:(0,a.css)({minWidth:x.spacing(10.5)}),shortcut:(0,a.css)({display:"flex",alignItems:"center",gap:x.spacing(1),marginLeft:x.spacing(2),color:x.colors.text.secondary}),description:(0,a.css)({...x.typography.bodySmall,color:x.colors.text.secondary,textAlign:"start"}),descriptionWithIcon:(0,a.css)({marginLeft:x.spacing(3)}),ellipsis:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})}}},94543:(ne,j,e)=>{"use strict";e.d(j,{$_:()=>T,GA:()=>U,GH:()=>b,Iy:()=>M,JA:()=>f,QP:()=>W,Xk:()=>B,eM:()=>m,hO:()=>y,iO:()=>C,ke:()=>I,zY:()=>D});var n=e(65307),a=e(17548),s=e(25229),d=e(32899),o=e(28105),l=e(92745),i=e(2863),c=e(90811),p=e(45229),h=e(62635),u=e(23237),r=e(75421),v=e(74746),g=e(34984),E=e(35231),x=e(19050);const m=(0,n.VP)("explore/changeRange"),y=(0,n.VP)("explore/changeRefreshInterval"),b=V=>(z,R)=>{const{syncedTimes:O}=R().explore;O?Object.keys(R().explore.panes).forEach(N=>{z(f({...V,exploreId:N})),z((0,x.Od)({exploreId:N,preserveCache:!0}))}):(z(f({...V})),z((0,x.Od)({exploreId:V.exploreId,preserveCache:!0})))},D=V=>z=>{z((0,x.S6)({...V}))},f=V=>(z,R)=>{const{exploreId:O,absoluteRange:N,rawRange:F}=V,G=R().explore.panes[O],H=(0,g.O)(R().user),K=(0,g.q)(R().user),{range:w}=G;let Q=w.raw;N&&(Q={from:(0,s.oZ)(H,N.from),to:(0,s.oZ)(H,N.to)}),F&&(Q=F);const k=(0,h.zq)(H,Q,K),te={from:k.from.valueOf(),to:k.to.valueOf()};(0,r.jG)().init({timepicker:{},getTimezone:()=>H,timeRangeUpdated(q){},time:k.raw}),(0,i.w)().updateTimeRange(k),z(m({exploreId:O,range:k,absoluteRange:te}))};function C(V){return(z,R)=>{const O=R().explore.panes[V].range.raw;Object.keys(R().explore.panes).filter(F=>F!==V).forEach(F=>{z(b({exploreId:F,rawRange:O}))});const N=R().explore.syncedTimes;z((0,E.qz)({syncedTimes:!N}))}}function P(V){return(z,R)=>{const O=(0,g.O)(R().user),N=(0,g.q)(R().user);Object.entries(R().explore.panes).forEach(([F,G])=>{const H=(0,h.zq)(O,G.range.raw,N);V(F,G,H,z)})}}function T(){return P((V,z,R,O)=>{const N={from:R.from.valueOf(),to:R.to.valueOf()};O(b({exploreId:V,absoluteRange:N}))})}function M(V){return P((z,R,O,N)=>{const F=(0,u.Wb)(V,O);N(b({exploreId:z,absoluteRange:F}))})}function I(V){return P((z,R,O,N)=>{const F=(0,u.Zk)(O,V);N(b({exploreId:z,absoluteRange:F}))})}function B(){return(V,z)=>{const R=z().explore.panes[Object.keys(z().explore.panes)[0]].range.raw,O=a.formatRawTimeRange(R);navigator.clipboard.writeText(JSON.stringify(O)),p.A.emit(d.r1.alertSuccess,[(0,l.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}}function U(){return async(V,z)=>{const{range:R,isError:O}=await(0,u.zG)();if(O===!0){p.A.emit(d.r1.alertError,[(0,l.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,l.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:R})]);return}const N={from:(0,u.EX)(R.from),to:(0,u.EX)(R.to)};if(z().explore.syncedTimes){V(b({exploreId:Object.keys(z().explore.panes)[0],rawRange:N})),V(b({exploreId:Object.keys(z().explore.panes)[1],rawRange:N}));return}V(b({exploreId:Object.keys(z().explore.panes)[0],rawRange:N}))}}const W=(V,z)=>{if(y.match(z)){const{refreshInterval:R}=z.payload,O=c.cC.isLive(R),N=(0,h.uE)(R),F=(0,v.zy)(V.logsResult,N);return c.cC.isLive(V.refreshInterval)&&!O&&(0,h._u)(V.querySubscription),{...V,refreshInterval:R,queryResponse:{...V.queryResponse,state:O?o.Gu.Streaming:o.Gu.Done},isLive:O,isPaused:O?!1:V.isPaused,logsResult:F}}if(m.match(z)){const{range:R,absoluteRange:O}=z.payload;return{...V,range:R,absoluteRange:O}}return V}},94626:(ne,j,e)=>{"use strict";e.d(j,{a:()=>p});var n=e(74848),a=e(10378),s=e(43173),d=e(83793),o=e(34624),l=e(91156),i=e(75735),c=e(27321);function p({repositoryName:v,showAllFolders:g,...E}){const x=(0,c.F)(),m=s.$.featureToggles.provisioning,{data:y}=(0,d.F9)(m?void 0:a.hT),b=!v,D=h({isProvisionedInstance:x,provisioningEnabled:m,repositoryName:v}),f=u({isProvisionedInstance:x,isNonProvisionedResource:b,provisioningEnabled:m,settingsData:y}),C=r({isProvisionedInstance:x,rootFolderUID:D,settingsDataItem:y?.items});return(0,n.jsx)(l.d,{...E,rootFolderUID:g?void 0:D,excludeUIDs:g?void 0:[...f,...E.excludeUIDs||[]],rootFolderItem:g?void 0:C})}function h({isProvisionedInstance:v,provisioningEnabled:g,repositoryName:E}){if(!v&&g&&E)return E}function u({isProvisionedInstance:v,isNonProvisionedResource:g,provisioningEnabled:E,settingsData:x}){return v?[]:g?E?x?.items.map(m=>m.name)||[]:[]:[]}function r({isProvisionedInstance:v,rootFolderUID:g,settingsDataItem:E}){if(v)return;const x=E?.find(m=>m.name===g);return x?(0,o.P)({title:x.title,uid:x.name,managedBy:i.Sf.Repo}):void 0}},94644:(ne,j,e)=>{"use strict";e.d(j,{Is:()=>p,ZF:()=>i,mA:()=>l,tD:()=>o,v2:()=>c});var n=e(37615),a=e(35814),s=e(78830),d=e(11594);class o extends d.Ud{constructor(u){super(),this.DataSourceClass=u,this.components={}}setConfigEditor(u){return this.components.ConfigEditor=u,this}setConfigCtrl(u){return(0,n.l)("DataSourcePlugin","setConfigCtrl"),this.angularConfigCtrl=u,this}setQueryCtrl(u){return(0,n.l)("DataSourcePlugin","setQueryCtrl"),this.components.QueryCtrl=u,this}setAnnotationQueryCtrl(u){return this.components.AnnotationsQueryCtrl=u,this}setQueryEditor(u){return this.components.QueryEditor=u,this}setExploreQueryField(u){return this.components.ExploreQueryField=u,this}setExploreMetricsQueryField(u){return this.components.ExploreMetricsQueryField=u,this}setExploreLogsQueryField(u){return this.components.ExploreLogsQueryField=u,this}setQueryEditorHelp(u){return this.components.QueryEditorHelp=u,this}setExploreStartPage(u){return this.setQueryEditorHelp(u)}setVariableQueryEditor(u){return this.components.VariableQueryEditor=u,this}setMetadataInspector(u){return this.components.MetadataInspector=u,this}setComponentsFromLegacyExports(u){(0,s.M)(u),this.components.QueryCtrl=u.QueryCtrl,this.components.AnnotationsQueryCtrl=u.AnnotationsQueryCtrl,this.components.ExploreQueryField=u.ExploreQueryField,this.components.QueryEditor=u.QueryEditor,this.components.QueryEditorHelp=u.QueryEditorHelp,this.components.VariableQueryEditor=u.VariableQueryEditor}}class l{constructor(u){this.name=u.name,this.id=u.id,this.type=u.type,this.meta=u.meta,this.cachingConfig=u.cachingConfig,this.uid=u.uid,this.apiVersion=u.apiVersion}filterQuery(u){return!0}getRef(){const u={type:this.type,uid:this.uid};return this.apiVersion&&(u.apiVersion=this.apiVersion),u}}var i=(h=>(h.Logs="Logs",h.Metrics="Metrics",h.Tracing="Tracing",h))(i||{}),c=(h=>(h.Cancelled="cancelled",h.Timeout="timeout",h.Unknown="unknown",h))(c||{});class p{}p=(0,a.Y)(p),l=(0,a.Y)(l)},94646:(ne,j,e)=>{"use strict";e.d(j,{$9:()=>T,LC:()=>E,Lg:()=>r,Ns:()=>I,P1:()=>p,PH:()=>D,Tn:()=>W,UP:()=>v,VY:()=>R,c:()=>f,co:()=>h,h1:()=>V,jY:()=>U,mw:()=>u,qg:()=>C,uE:()=>O,vL:()=>B,x6:()=>P});var n=e(2543),a=e.n(n),s=e(36490),d=e(24619),o=e(74268),l=e(74869),i=e(52161),c=e(29609);function p(N,F,G,H){return c.p.grafana.rule(H)?{uid:H.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:N,namespace:F,groupName:G,ruleName:(0,c.qz)(H),rulerRuleHash:I(H)}}function h(N,F){if(N.groupOrigin==="grafana"){if(c.p.grafana.rule(F))return{uid:F.grafana_alert.uid,ruleSourceName:"grafana"};throw(0,o.vV)(new Error("Rule is not a Grafana Ruler rule")),new Error("Rule is not a Grafana Ruler rule")}return p(N.rulesSource.name,N.namespace.name,N.groupName,F)}function u(N,F){const{dataSourceName:G,namespaceName:H,groupName:K}=N;return p(G,H,K,F)}function r(N,F,G,H){return{ruleSourceName:N,namespace:F,groupName:G,ruleName:H.name,ruleHash:U(H)}}function v(N,F){const G=F.namespace.name,H=F.group.name;if(F.rulerRule)return p(N,G,H,F.rulerRule);if(F.promRule)return r(N,G,H,F.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function g(N){return p(N.ruleSourceName,N.namespace,N.group.name,N.rule)}function E(N,F){return(0,c.A4)(N)&&(0,c.A4)(F)?N.uid===F.uid:(0,c.X4)(N)&&(0,c.X4)(F)?N.groupName===F.groupName&&N.namespace===F.namespace&&N.ruleName===F.ruleName&&N.rulerRuleHash===F.rulerRuleHash&&N.ruleSourceName===F.ruleSourceName:(0,c.Mj)(N)&&(0,c.Mj)(F)?N.groupName===F.groupName&&N.namespace===F.namespace&&N.ruleName===F.ruleName&&N.ruleHash===F.ruleHash&&N.ruleSourceName===F.ruleSourceName:(0,c.X4)(N)&&(0,c.Mj)(F)?N.groupName===F.groupName&&N.namespace===F.namespace&&N.ruleName===F.ruleName&&N.rulerRuleHash===F.ruleHash&&N.ruleSourceName===F.ruleSourceName:(0,c.Mj)(N)&&(0,c.X4)(F)?N.groupName===F.groupName&&N.namespace===F.namespace&&N.ruleName===F.ruleName&&N.ruleHash===F.rulerRuleHash&&N.ruleSourceName===F.ruleSourceName:!1}const x="cri",m="pri";function y(N){return N.replace(/\$/g,"_DOLLAR_")}function b(N){return N.replace(/\_DOLLAR\_/g,"$")}function D(N){return N.replace(/\//g,"").replace(/\\/g,"")}function f(N){return N.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function C(N,F=!1){const H=(F?decodeURIComponent(N):N).split("$");if(H.length===1)return{uid:N,ruleSourceName:"grafana"};if(H.length===6){const[K,w,Q,k,te,q]=H.map(b).map(f);if(K===x)return{ruleSourceName:w,namespace:Q,groupName:k,ruleName:te,rulerRuleHash:q};if(K===m)return{ruleSourceName:w,namespace:Q,groupName:k,ruleName:te,ruleHash:q}}throw new Error(`Failed to parse rule location: ${N}`)}function P(N,F=!1){if(N)try{return C(N,F)}catch{return}}function T(N){return(0,c.A4)(N)?N.uid:(0,c.X4)(N)?[x,N.ruleSourceName,N.namespace,N.groupName,N.ruleName,N.rulerRuleHash].map(String).map(y).map(D).join("$"):[m,N.ruleSourceName,N.namespace,N.groupName,N.ruleName,N.ruleHash].map(String).map(y).map(D).join("$")}function M(N){let F=0;if(N.length===0)return F;for(let G=0;G<N.length;G++){const H=N.charCodeAt(G);F=(F<<5)-F+H,F=F&F}return F}function I(N){if(c.p.grafana.rule(N))return N.grafana_alert.uid;const G=!(0,l.wS)(),H=B(N,G);return M(JSON.stringify(H)).toString()}function B(N,F){const G=F?V(N.expr):"",H=z(N.labels);if(c.p.dataSource.recordingRule(N))return[N.record,d.JS.Recording,G,H];if(c.p.dataSource.alertingRule(N))return[N.alert,d.JS.Alerting,G,z(N.annotations),H];throw new Error("Only recording and alerting ruler rules can be hashed")}function U(N){const G=!(0,l.wS)(),H=W(N,G);return M(JSON.stringify(H)).toString()}function W(N,F){const G=F?V(N.query):"",H=z(N.labels);if(c.R$.recordingRule(N))return[N.name,d.JS.Recording,G,H];if(c.R$.alertingRule(N))return[N.name,d.JS.Alerting,G,z(N.annotations),H];throw new Error("Only recording and alerting rules can be hashed")}function V(N){return N=N.split(`
`).map(F=>F.trim()).filter(F=>F&&!F.startsWith("#")).join(`
`),N.length>1&&N[0]==="("&&N[N.length-1]===")"&&(N=N.slice(1,-1)),N=N.replace(/\s|\n/g,""),N=N.replace(/\\"/g,'"'),N=N.replace(/`([^`]*)`/g,'"$1"'),N=N.replace(/['"()\[\]\\`]/g,""),N.split("").sort().join("")}function z(N){return JSON.stringify(Object.entries(N||{}).sort((F,G)=>F[0].localeCompare(G[0])))}function R(N){return(0,c.A4)(N)?i.hY:N.ruleSourceName}function O(N){const{pathname:F=""}=s.Ny.getLocation(),{id:G}=N;return G?(0,n.nth)(F.split("/"),-2):void 0}},94777:(ne,j,e)=>{"use strict";e.d(j,{$:()=>a});var n=e(96453);class a extends n.F{constructor(d){return super(),this.buffer=d.buffer||[],this.capacity=this.buffer.length,this.tail=d.append!=="head",this.index=0,this.add=this.getAddFunction(),d.capacity&&this.setCapacity(d.capacity),new Proxy(this,{get(o,l,i){if(typeof l!="symbol"){const c=+l;if(String(c)===l)return o.get(c)}return Reflect.get(o,l,i)},set(o,l,i,c){if(typeof l!="symbol"){const p=+l;if(String(p)===l)return o.set(p,i),!0}return Reflect.set(o,l,i,c)}})}getAddFunction(){return this.capacity>this.buffer.length?this.tail?d=>{this.buffer.push(d),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:d=>{this.buffer.unshift(d),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?d=>{this.buffer[this.index]=d,this.index=(this.index+1)%this.buffer.length}:d=>{let o=this.index-1;o<0&&(o=this.buffer.length-1),this.buffer[o]=d,this.index=o}}setCapacity(d){if(this.capacity===d)return;const o=this.toArray();if(d>this.length)this.buffer=o;else if(d<this.capacity){const l=this.length-d;this.tail?this.buffer=o.slice(l,o.length):this.buffer=o.slice(0,o.length-l)}this.capacity=d,this.index=0,this.add=this.getAddFunction()}setAppendMode(d){const o=d!=="head";o!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=o,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(d){return this.buffer[(d+this.index)%this.buffer.length]}set(d,o){this.buffer[(d+this.index)%this.buffer.length]=o}get length(){return this.buffer.length}}},94850:(ne,j,e)=>{"use strict";e.d(j,{_:()=>l});var n=e(42954),a=e(8835),s=e(1131),d=e(97883),o=e(98279);const l=new n.O(()=>[s.D.descriptor,a.X2.descriptor,d.V.descriptor,o.K.descriptor])},94959:(ne,j,e)=>{"use strict";e.d(j,{z:()=>o});var n=e(74848),a=e(22803),s=e(96540),d=e(51115);const o=({label:i,tooltip:c,labelWidth:p=6,inputWidth:h=12,inputEl:u,className:r,interactive:v,...g})=>{const E=l(),x=(0,s.useId)();return(0,n.jsxs)("div",{className:(0,a.cx)(E.formField,r),children:[(0,n.jsx)(d.I,{htmlFor:x,width:p,tooltip:c,interactive:v,children:i}),u||(0,n.jsx)("input",{id:x,type:"text",className:`gf-form-input ${h?`width-${h}`:""}`,...g,disabled:g.disabled})]})};o.displayName="FormField";const l=()=>({formField:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},95027:(ne,j,e)=>{"use strict";e.d(j,{o:()=>d,x:()=>s});var n=e(68143);const a={};function s(o,l){const i=a[o];return i?Promise.resolve(i):(0,n.AI)().get(`/api/plugins/${o}/settings`,void 0,void 0,{...l,validatePath:!0}).then(c=>(a[o]=c,c)).catch(c=>typeof c=="object"&&c!==null&&"status"in c&&(c.status===403||c.status===401)?(c.isHandled=!0,Promise.reject(c)):Promise.reject(new Error("Unknown Plugin")))}const d=o=>o?delete a[o]:Object.keys(a).forEach(l=>delete a[l])},95256:(ne,j,e)=>{"use strict";e.d(j,{Mi:()=>a,P5:()=>s,Sw:()=>n,fu:()=>d});const n="/api/plugins",a="/api/instance",s="/api/gnet",d="plugins"},95395:(ne,j,e)=>{"use strict";e.d(j,{GA:()=>le,aS:()=>oe,Qk:()=>L});var n=e(74848),a=e(22803),s=e(43173),d=e(63142),o=e(36219),l=e(7895),i=e(15130),c=e(4590),p=e(75541),h=e(92119),u=e(51898),r=e(92745),v=e(36490),g=e(45861);const E=({dashboard:fe})=>(0,n.jsx)(g.$n,{onClick:()=>v.Ny.partial(fe.state.editview?{editview:null}:{viewPanel:null,editPanel:null}),tooltip:"",fill:fe.state.editview?"text":void 0,variant:"secondary",size:"sm",icon:"arrow-left","data-testid":u.Tp.components.NavToolbar.editDashboard.backToDashboardButton,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.back-to-dashboard",children:"Back to dashboard"})});var x=e(30703);const m=({dashboard:fe})=>(0,n.jsx)(l.I,{tooltip:(0,r.t)("dashboard.toolbar.new.dashboard-settings.tooltip","Dashboard settings"),icon:(0,n.jsx)(x.I,{name:"cog",size:"lg",type:"default"}),onClick:()=>fe.onOpenSettings(),"data-testid":u.Tp.components.NavToolbar.editDashboard.settingsButton}),y=({dashboard:fe})=>(0,n.jsx)(g.$n,{onClick:()=>fe.state.editPanel?.onDiscard(),tooltip:(0,r.t)("dashboard.toolbar.new.discard-library-panel-changes","Discard library panel changes"),size:"sm",fill:"outline",variant:"destructive","data-testid":u.Tp.components.NavToolbar.editDashboard.discardChangesButton,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.discard-library-panel-changes",children:"Discard library panel changes"})});var b=e(96540);const D=({dashboard:fe})=>{const Ee=f(fe.state.editPanel);return(0,n.jsx)(g.$n,{onClick:()=>fe.state.editPanel?.onDiscard(),tooltip:fe.state.editPanel?.state.isNewPanel?(0,r.t)("dashboard.toolbar.new.discard-panel-new","Discard panel"):(0,r.t)("dashboard.toolbar.new.discard-panel","Discard panel changes"),size:"sm",disabled:!Ee,fill:"outline",variant:"destructive","data-testid":u.Tp.components.NavToolbar.editDashboard.discardChangesButton,children:fe.state.editPanel?.state.isNewPanel?(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.discard-panel-new",children:"Discard panel"}):(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.discard-panel",children:"Discard panel changes"})})};function f(fe){const[Ee,Ae]=(0,b.useState)();return(0,b.useEffect)(()=>{if(fe){const Ge=fe.subscribeToState(Fe=>{Fe.isDirty!==Ee&&Ae(Fe.isDirty)});return()=>Ge.unsubscribe()}},[fe,Ee]),Ee}var C=e(23289),P=e(50893),T=e(45967),M=e(35484);const I=({icon:fe,label:Ee,checked:Ae,checkedIcon:Ge,checkedLabel:Fe,disabled:Pe,onClick:Ve,"data-testid":me})=>{const Se=(0,d.of)(B),Qe=Ae&&Fe?Fe:Ee,Ue=Ae&&Ge?Ge:fe;return(0,n.jsx)(T.m,{content:Qe,children:(0,n.jsx)("button",{"aria-label":Qe,className:(0,a.cx)({[Se.container]:!0,[Se.containerChecked]:Ae,[Se.containerDisabled]:Pe}),"data-testid":me,onClick:Pe?void 0:Ve,children:(0,n.jsx)("div",{className:(0,a.cx)(Se.box,Ae&&Se.boxChecked),children:(0,n.jsx)(x.I,{name:Ue,size:"xs"})})})})},B=fe=>({container:(0,a.css)({border:`1px solid ${fe.components.input.borderColor}`,padding:fe.spacing(.25),backgroundColor:fe.components.input.background,borderRadius:fe.shape.radius.default,width:fe.spacing(5.5),height:fe.spacing(3),cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",[fe.transitions.handleMotion("no-preference","reduce")]:{transition:"all 0.2s ease-in-out"},"&:hover":{borderColor:fe.components.input.borderHover}}),containerChecked:(0,a.css)({backgroundColor:fe.colors.primary.main,borderColor:"transparent","&:hover":{backgroundColor:fe.colors.primary.shade,borderColor:"transparent"}}),containerDisabled:(0,a.css)({cursor:"initial",background:fe.colors.action.disabledBackground,borderColor:fe.colors.border.weak}),box:(0,a.css)({background:fe.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center",width:fe.spacing(2.5),height:"100%",transform:"translateX(0)",position:"relative",borderRadius:M.getInternalRadius(fe,2),border:`1px solid ${fe.colors.secondary.border}`,[fe.transitions.handleMotion("no-preference","reduce")]:{transition:"all 0.2s ease-in-out"}}),boxChecked:(0,a.css)({transform:`translateX(calc(100% - ${fe.spacing(.25)}))`,borderColor:"transparent"})}),U=({dashboard:fe})=>(0,n.jsx)(I,{checked:!!fe.state.isEditing,icon:"pen",label:(0,r.t)("dashboard.toolbar.new.edit-toggle.enter.label","Enter edit mode"),checkedLabel:(0,r.t)("dashboard.toolbar.new.edit-toggle.exit.label","Exit edit mode"),disabled:c._o.state.isPlaying,"data-testid":u.Tp.components.NavToolbar.editDashboard.editButton,onClick:Ee=>{Ee.preventDefault(),Ee.stopPropagation(),fe.state.isEditing?(C.c.exitEditButtonClicked(),fe.exitEditMode({skipConfirm:!1})):((0,P.L1)(fe.state.uid),fe.onEnterEditMode())}});var W=e(58662),V=e(55867),z=e(93256),R=e(88559),O=e(45229),N=e(87745);const F=({dashboard:fe,menu:Ee,onMenuVisibilityChange:Ae,groupTestId:Ge,buttonLabel:Fe,buttonTooltip:Pe,buttonTestId:Ve,onButtonClick:me,arrowLabel:Se,arrowTestId:Qe,variant:Ue="secondary"})=>{const[Ie,Re]=(0,b.useState)(!1);return(0,n.jsxs)(z.e,{"data-testid":Ge,onPointerDown:Ke=>{fe.state.isEditing&&fe.state.isDirty&&(Ke.preventDefault(),Ke.stopPropagation(),O.A.publish(new N.bY({title:(0,r.t)("dashboard.toolbar.new.share-export.modal.title","Save changes to dashboard?"),text:(0,r.t)("dashboard.toolbar.new.share-export.modal.text","You have unsaved changes to this dashboard. You need to save them before you can share it."),icon:"exclamation-triangle",noText:(0,r.t)("dashboard.toolbar.new.share-export.modal.noText","Discard"),yesText:(0,r.t)("dashboard.toolbar.new.share-export.modal.yesText","Save"),yesButtonVariant:"primary",onConfirm:()=>fe.openSaveDrawer({})})))},children:[(0,n.jsx)(g.$n,{"data-testid":Ve,size:"sm",tooltip:Pe,variant:Ue,onClick:me,children:Fe}),(0,n.jsx)(R.m,{overlay:Ee,placement:"bottom-end",onVisibleChange:Ke=>{fe.state.isEditing&&fe.state.isDirty||(Ae?.(Ke),Re(Ke))},children:(0,n.jsx)(g.$n,{"aria-label":Se,"data-testid":Qe,size:"sm",icon:Ie?"angle-up":"angle-down",variant:Ue})})]})},G=u.Tp.pages.Dashboard.DashNav.NewExportButton,H=({dashboard:fe})=>{const Ee=s.$.featureToggles.kubernetesDashboards?(0,r.t)("dashboard.toolbar.new.export.tooltip.as-code","Export as code"):(0,r.t)("dashboard.toolbar.new.export.tooltip.json","Export as JSON");return(0,n.jsx)(F,{menu:()=>(0,n.jsx)(V.A,{dashboard:fe}),groupTestId:G.container,buttonLabel:(0,r.t)("dashboard.toolbar.new.export.title","Export"),buttonTooltip:Ee,buttonTestId:G.container,onButtonClick:()=>{v.Ny.partial({shareView:W.wr.export}),C.c.sharingCategoryClicked({item:W.wr.export,shareResource:(0,W.hD)()})},arrowLabel:(0,r.t)("dashboard.toolbar.new.export.arrow","Export"),arrowTestId:G.arrowMenu,dashboard:fe})},K=({dashboard:fe})=>(0,n.jsx)(g.$n,{disabled:c._o.state.isPlaying,onClick:()=>{(0,P.L1)(fe.state.uid),fe.onEnterEditMode(),fe.setState({editable:!0,meta:{...fe.state.meta,canEdit:!0}})},tooltip:(0,r.t)("dashboard.toolbar.new.enter-edit-mode.tooltip","This dashboard was marked as read only"),variant:"secondary",size:"sm","data-testid":u.Tp.components.NavToolbar.editDashboard.editButton,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.enter-edit-mode.label",children:"Make editable"})}),w=({})=>(0,n.jsx)(l.I,{"data-testid":u.Tp.pages.Dashboard.DashNav.playlistControls.next,tooltip:(0,r.t)("dashboard.toolbar.new.playlist-next","Go to next dashboard"),icon:"forward",onClick:()=>c._o.next(),narrow:!0}),Q=({})=>(0,n.jsx)(l.I,{"data-testid":u.Tp.pages.Dashboard.DashNav.playlistControls.prev,tooltip:(0,r.t)("dashboard.toolbar.new.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:()=>c._o.prev()}),k=({})=>(0,n.jsx)(l.I,{onClick:()=>c._o.stop(),"data-testid":u.Tp.pages.Dashboard.DashNav.playlistControls.stop,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.playlist-stop",children:"Stop playlist"})});var te=e(87063);const q=({dashboard:fe})=>{const{meta:Ee,isDirty:Ae,uid:Ge}=fe.state,Fe=!(Ge||fe.isManaged()),Pe=fe.isManaged();return Fe?(0,n.jsx)(g.$n,{onClick:()=>fe.openSaveDrawer({}),tooltip:(0,r.t)("dashboard.toolbar.new.save-dashboard.tooltip","Save changes"),size:"sm",variant:"primary","data-testid":u.Tp.components.NavToolbar.editDashboard.saveButton,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.save-dashboard.label",children:"Save"})}):i.TP.hasEditPermissionInFolders&&!Ee.canSave&&!Ee.canMakeEditable&&!Pe?(0,n.jsx)(g.$n,{onClick:()=>fe.openSaveDrawer({saveAsCopy:!0}),tooltip:(0,r.t)("dashboard.toolbar.new.save-dashboard-copy.tooltip","Save as copy"),size:"sm",variant:Ae?"primary":"secondary",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.save-dashboard-copy.label",children:"Save as copy"})}):(0,n.jsxs)(z.e,{children:[(0,n.jsx)(g.$n,{onClick:()=>fe.openSaveDrawer({}),tooltip:(0,r.t)("dashboard.toolbar.new.save-dashboard.tooltip","Save changes"),size:"sm","data-testid":u.Tp.components.NavToolbar.editDashboard.saveButton,variant:Ae?"primary":"secondary",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.save-dashboard.label",children:"Save"})}),(0,n.jsx)(R.m,{overlay:(0,n.jsxs)(te.W,{children:[(0,n.jsx)(te.W.Item,{label:(0,r.t)("dashboard.toolbar.new.save-dashboard-short","Save"),icon:"save",onClick:()=>fe.openSaveDrawer({})}),(0,n.jsx)(te.W.Item,{label:(0,r.t)("dashboard.toolbar.new.save-dashboard-copy.label","Save as copy"),icon:"copy",onClick:()=>fe.openSaveDrawer({saveAsCopy:!0})})]}),children:(0,n.jsx)(g.$n,{"aria-label":(0,r.t)("dashboard.toolbar.new.more-save-options","More save options"),icon:"angle-down",variant:Ae?"primary":"secondary",size:"sm"})})]})},se=({dashboard:fe})=>(0,n.jsx)(g.$n,{onClick:()=>fe.state.editPanel?.onSaveLibraryPanel(),tooltip:(0,r.t)("dashboard.toolbar.new.save-library-panel","Save library panel"),size:"sm",fill:"outline",variant:"primary","data-testid":u.Tp.components.NavToolbar.editDashboard.saveLibraryPanelButton,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.save-library-panel",children:"Save library panel"})});var re=e(41053),Y=e(16001),X=e(12434);const J=u.Tp.pages.Dashboard.DashNav.newShareButton,_=({dashboard:fe})=>{const[Ee,Ae]=(0,re.A)(async()=>{C.c.toolbarShareClick(),await(0,X.Xe)(fe)},[fe]);return(0,n.jsx)(F,{menu:()=>(0,n.jsx)(Y.Ay,{dashboard:fe}),onMenuVisibilityChange:Ge=>{Ge&&C.c.toolbarShareDropdownClick()},groupTestId:J.shareLink,buttonLabel:(0,r.t)("dashboard.toolbar.new.share.title","Share"),buttonTooltip:(0,r.t)("dashboard.toolbar.new.share.tooltip","Copy link"),buttonTestId:J.container,onButtonClick:Ae,arrowLabel:(0,r.t)("dashboard.toolbar.new.share.arrow","Share"),arrowTestId:J.arrowMenu,dashboard:fe,variant:fe.state.isEditing?"secondary":"primary"})},ee=({dashboard:fe})=>(0,n.jsx)(g.$n,{onClick:()=>fe.state.editPanel?.onUnlinkLibraryPanel(),tooltip:(0,r.t)("dashboard.toolbar.new.unlink-library-panel","Unlink library panel"),size:"sm",fill:"outline",variant:"secondary","data-testid":u.Tp.components.NavToolbar.editDashboard.unlinkLibraryPanelButton,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard.toolbar.new.unlink-library-panel",children:"Unlink library panel"})});var ae=e(12991);const le=({dashboard:fe})=>{const{editPanel:Ee,editable:Ae,editview:Ge,isEditing:Fe,uid:Pe,meta:Ve,viewPanel:me}=fe.useState(),{isPlaying:Se}=c._o.useState(),Qe=(0,d.of)(ye),Ue=!!Ae,Ie=!!Ve.canSave,Re=!!Pe,Ke=!!Fe,Le=!!Ge,ze=!!Ee,Be=!!me,$e=ze&&(0,h.ME)(Ee.state.panelRef.resolve()),Ye=!Le&&!Be&&!ze,de=Ke&&Ye,ge=!!Ve.isSnapshot,pe=i.TP.hasEditPermissionInFolders,De=fe.canEditDashboard(),Me=ze&&!Le&&!Be,be=Se&&Ye&&!Ke,Oe=Re&&!ge&&!Se&&!ze,Ne=de&&!!s.$.featureToggles.dashboardUndoRedo;return(0,n.jsx)(o.U,{alignment:"right",className:Qe.container,children:(0,ae.g)([...(0,ae.f)(p.C.right,"",!ze&&!Ke),{key:"play-list-previous-button",component:Q,group:"playlist",condition:be},{key:"play-list-stop-button",component:k,group:"playlist",condition:be},{key:"play-list-next-button",component:w,group:"playlist",condition:be},{key:"back-to-dashboard-button",component:E,group:"panel",condition:Le||(Be||ze)&&!$e},{key:"discard-panel-button",component:D,group:"panel",condition:Me&&!$e},{key:"discard-library-panel-button",component:y,group:"panel",condition:Me&&$e},{key:"unlink-library-panel-button",component:ee,group:"panel",condition:Me&&$e},{key:"save-library-panel-button",component:se,group:"panel",condition:Me&&$e},{key:"dashboard-undo",component:ie,group:"dashboard",condition:Ne},{key:"dashboard-redo",component:ue,group:"dashboard",condition:Ne},{key:"dashboard-settings",component:m,group:"dashboard",condition:de&&De},{key:"save-dashboard",component:q,group:"save-edit",condition:Ke&&!$e&&(Ie||pe)},{key:"make-dashboard-editable-button",component:K,group:"save-edit",condition:!Fe&&De&&!Be&&!Ue&&!Se},{key:"edit-dashboard-switch",component:U,group:"save-edit",condition:De&&!ze&&!$e&&!Be&&Ue&&!Se&&!ze},{key:"new-export-dashboard-button",component:H,group:"export-share",condition:Oe},{key:"new-share-dashboard-button",component:_,group:"export-share",condition:Oe}],fe)})},L="undo-button";function ie({dashboard:fe}){const Ee=fe.state.editPane,{undoStack:Ae}=Ee.useState(),Ge=Ae[Ae.length-1],Fe=`Undo${Ge?.description?` '${Ge.description}'`:""}`;return(0,n.jsx)(l.I,{id:L,icon:"corner-up-left",disabled:Ae.length===0,onClick:()=>Ee.undoAction(),tooltip:Fe})}const oe="redo-button";function ue({dashboard:fe}){const Ee=fe.state.editPane,{redoStack:Ae}=Ee.useState(),Ge=Ae[Ae.length-1],Fe=`Redo${Ge?.description?` '${Ge.description}'`:""}`;return(0,n.jsx)(l.I,{id:oe,icon:"corner-up-right",disabled:Ae.length===0,tooltip:Fe,onClick:()=>Ee.redoAction()})}const ye=fe=>({container:(0,a.css)({paddingLeft:fe.spacing(.5)})})},95407:(ne,j,e)=>{"use strict";e.d(j,{P:()=>n});class n extends Error{constructor(s,d="Dashboard version mismatch"){super(d),this.name="DashboardVersionError",this.status=200,this.data={storedVersion:s??"unknown",message:d}}}},95443:(ne,j,e)=>{"use strict";e.d(j,{DD:()=>s,H8:()=>g,HH:()=>a,J3:()=>v,Oq:()=>d,Tl:()=>c,U3:()=>l,UU:()=>n,YH:()=>r,cB:()=>i,kW:()=>x,kl:()=>E,wG:()=>o});const n="ruler not supported",a=3e4,s="alertmanager",d="alerting-alertmanager",o=2e4,l=2e4,i=2e4,c=100,p="timeseries",h="table",u="stat";var r=(m=>(m.description="description",m.summary="summary",m.runbookURL="runbook_url",m.alertId="__alertId__",m.dashboardUID="__dashboardUid__",m.panelID="__panelId__",m))(r||{});const v={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},g={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},E=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}],x="__alert_rule_uid__"},95506:(ne,j,e)=>{"use strict";e.d(j,{b:()=>v});var n=e(74848),a=e(76459),s=e.n(a),d=e(96540),o=e(18857),l=e(75735),i=e(13956),c=e(60171),p=e(55860);const h=(g="Dashboards",E)=>`${g}/${E}`;async function u(g=""){const E=await(0,p.S)().search({query:g,kind:["dashboard"],limit:100}),x=await(0,p.S)().getLocationInfo();return E.view.toArray().map(m=>{const y=x[m.location]?.name;return{value:{uid:m.uid,name:m.name,folderTitle:y,folderUid:m.location},label:h(y,m.name)}})}const r=s()(u,250,{leading:!0}),v=(0,d.forwardRef)(({value:g,onChange:E,placeholder:x="Select dashboard",noOptionsMessage:m="No dashboards found",...y},b)=>{const[D,f]=(0,d.useState)();(0,d.useEffect)(()=>{!g||g===D?.value?.uid||(async()=>{const P=await(0,i.n)().getDashboardDTO(g,void 0);(0,c.HG)(P)?f({value:{uid:P.metadata.name,name:P.spec.title,folderTitle:P.metadata.annotations?.[l.w2],folderUid:P.metadata.annotations?.[l.ew]},label:h(P.metadata.annotations?.[l.ew],P.spec.title)}):P.dashboard&&f({value:{uid:P.dashboard.uid,name:P.dashboard.title,folderTitle:P.meta.folderTitle,folderUid:P.meta.folderUid},label:h(P.meta?.folderTitle,P.dashboard.title)})})()},[g]);const C=(0,d.useCallback)(P=>{f(P),E?.(P?.value)},[E,f]);return(0,n.jsx)(o.DW,{loadOptions:r,onChange:C,placeholder:x,noOptionsMessage:m,value:D,defaultOptions:!0,...y,selectRef:b})});v.displayName="DashboardPicker"},95575:(ne,j,e)=>{"use strict";e.d(j,{Mq:()=>p,NU:()=>i,Xz:()=>u,pH:()=>c,wx:()=>E,xQ:()=>h});var n=e(2543),a=e.n(n),s=e(81160),d=e(16515),o=e(95004),l=e(64761),i=(x=>(x.Manual="manual",x.Auto="auto",x))(i||{}),c=(x=>(x.Off="off",x.Asc="asc",x.Desc="desc",x))(c||{}),p=(x=>(x.Name="name",x.Label="label",x))(p||{});const h={id:l.F.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:({indexByName:x,orderByMode:m="manual",orderBy:y=[]})=>b=>b.pipe((0,s.T)(D=>{(0,d.Fm)(D);const f=m==="manual"?r(x):E(y);return D.map(C=>({...C,fields:f(C.fields,D,C)}))}))},u=x=>(m,y)=>v(m,x)-v(y,x),r=x=>(m,y,b)=>{const D=u(x);return(0,n.clone)(m).sort((f,C)=>D((0,d.Ct)(f,b,y),(0,d.Ct)(C,b,y)))},v=(x,m)=>Number.isInteger(m[x])?m[x]:Number.MAX_SAFE_INTEGER,g=new Intl.Collator(void 0,{sensitivity:"base",numeric:!0}).compare,E=x=>m=>{const y=m.find(b=>b.type===o.PU.time);return m.slice().sort((b,D)=>{if(b===y)return-1;if(D===y)return 1;for(let f=0;f<x.length;f++){let{type:C,name:P="",desc:T=!1}=x[f],M=C==="name"?b.state?.displayName??b.name:b.labels?.[P]??"",I=C==="name"?D.state?.displayName??D.name:D.labels?.[P]??"",B=g(M,I)*(T?-1:1);if(B!==0)return B}return 0})}},95710:(ne,j,e)=>{"use strict";e.d(j,{GC:()=>d,dM:()=>a,ic:()=>s,wM:()=>o,z9:()=>i});var n=e(23289);function a(h,u,r){const v=o(h.templating.list),g=d(h.panels.map(E=>E.type));n.c.dashboardInitialized({uid:h.uid,title:h.title,theme:h.style,schemaVersion:h.schemaVersion,version_before_migration:r,panels_count:h.panels.length,...g,...v,settings_nowdelay:h.timepicker.nowDelay,settings_livenow:!!h.liveNow,duration:u,isScene:!1})}function s(h,u){n.c.dashboardCreatedOrSaved(h,u)}function d(h){return h.reduce((u,r)=>(u[p(r)]=1+u[p(r)]||1,u),{})}function o(h){return h.map(u=>u.type).reduce((u,r)=>(u[c(r)]=1+u[c(r)]||1,u),{})}function l(h){switch(h){case"AdhocVariable":return"adhoc";case"CustomVariable":return"custom";case"QueryVariable":return"query";case"IntervalVariable":return"interval";case"ConstantVariable":return"constant";case"DatasourceVariable":return"datasource";case"TextVariable":return"textbox";case"GroupByVariable":return"groupby";default:return}}function i(h){return h.map(u=>l(u.kind)).filter(u=>u!==void 0).reduce((u,r)=>(u[c(r)]=1+u[c(r)]||1,u),{})}const c=h=>`variable_type_${h}_count`,p=h=>`panel_type_${h}_count`},95943:(ne,j,e)=>{"use strict";e.d(j,{FG:()=>g,Gk:()=>u,HG:()=>o,IZ:()=>r,Pz:()=>d,Ut:()=>x,bJ:()=>i,cV:()=>s,cx:()=>c,dU:()=>a,o9:()=>l,rt:()=>h,sD:()=>n,tH:()=>p,wV:()=>E});const n=30,a=8,s=24,d="v",o="h",l=4,i=250,c=n*3,p="panel-copy",h="row-copy",u="tab-copy",r=2,v=23763571993,g=40,E="VisualizationSelectPane.ListMode",x="mega-menu-toggle"},96004:(ne,j,e)=>{"use strict";e.d(j,{t:()=>V});var n=e(74848),a=e(22803),s=e(96540),d=e(51898),o=e(92745),l=e(63142),i=e(34999),c=e(45861),p=e(37386),h=e(18027),u=e(77824),r=e(30703),v=e(63527),g=e(41654),E=e(21285),x=e(10928),m=e(66404),y=e(94959),b=e(23659);const D=({dataSourceConfig:z,onChange:R})=>{const O=z.secureJsonData?z.secureJsonData.basicAuthPassword:"",N=()=>{R({...z,secureJsonData:{...z.secureJsonData,basicAuthPassword:""},secureJsonFields:{...z.secureJsonFields,basicAuthPassword:!1}})},F=G=>{R({...z,secureJsonData:{...z.secureJsonData,basicAuthPassword:G.currentTarget.value}})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.I,{disabled:z.readOnly,children:(0,n.jsx)(y.z,{label:(0,o.t)("grafana-ui.data-source-basic-auth-settings.user-label","User"),labelWidth:10,inputWidth:18,placeholder:(0,o.t)("grafana-ui.data-source-basic-auth-settings.user-placeholder","user"),value:z.basicAuthUser,onChange:G=>R({...z,basicAuthUser:G.currentTarget.value})})}),(0,n.jsx)(h.I,{disabled:z.readOnly,children:(0,n.jsx)(b.L,{isConfigured:!!(z.secureJsonFields&&z.secureJsonFields.basicAuthPassword),value:O||"",inputWidth:18,labelWidth:10,onReset:N,onChange:F})})]})};var f=e(55803);const C=26,P=({dataSourceConfig:z,onChange:R,showForwardOAuthIdentityOption:O=!0})=>{const N=(0,l.of)(T);return(0,n.jsxs)("div",{className:N,children:[(0,n.jsxs)(g.B,{direction:"row",gap:.5,children:[(0,n.jsx)(h.I,{label:(0,o.t)("grafana-ui.data-source-http-proxy-settings.ts-client-auth-label","TLS Client Auth"),labelWidth:C,disabled:z.readOnly,children:(0,n.jsx)(E.K,{id:"http-settings-tls-client-auth",value:z.jsonData.tlsAuth||!1,onChange:F=>R({...z.jsonData,tlsAuth:F.currentTarget.checked})})}),(0,n.jsx)(h.I,{label:(0,o.t)("grafana-ui.data-source-http-proxy-settings.with-ca-cert-label","With CA Cert"),tooltip:(0,o.t)("grafana-ui.data-source-http-proxy-settings.with-ca-cert-tooltip","Needed for verifying self-signed TLS Certs"),labelWidth:C,disabled:z.readOnly,children:(0,n.jsx)(E.K,{id:"http-settings-ca-cert",value:z.jsonData.tlsAuthWithCACert||!1,onChange:F=>R({...z.jsonData,tlsAuthWithCACert:F.currentTarget.checked})})})]}),(0,n.jsx)(h.I,{label:(0,o.t)("grafana-ui.data-source-http-proxy-settings.skip-tls-verify-label","Skip TLS Verify"),labelWidth:C,disabled:z.readOnly,children:(0,n.jsx)(E.K,{id:"http-settings-skip-tls-verify",value:z.jsonData.tlsSkipVerify||!1,onChange:F=>R({...z.jsonData,tlsSkipVerify:F.currentTarget.checked})})}),O&&(0,n.jsx)(h.I,{label:(0,o.t)("grafana-ui.data-source-http-proxy-settings.oauth-identity-label","Forward OAuth Identity"),tooltip:(0,o.t)("grafana-ui.data-source-http-proxy-settings.oauth-identity-tooltip","Forward the user's upstream OAuth identity to the data source (Their access token gets passed along)."),labelWidth:C,disabled:z.readOnly,children:(0,n.jsx)(E.K,{id:"http-settings-forward-oauth",value:z.jsonData.oauthPassThru||!1,onChange:F=>R({...z.jsonData,oauthPassThru:F.currentTarget.checked})})})]})},T=z=>(0,a.css)({display:"grid",gridTemplateColumns:"auto",gap:0});var M=e(3936),I=e(37235);const B="grafana-http-access-help",U=()=>(0,n.jsxs)(i.F,{severity:"info",title:(0,o.t)("grafana-ui.data-source-http-settings.access-help-title","Access help"),topSpacing:3,id:B,children:[(0,n.jsx)("p",{children:(0,n.jsxs)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.access-help-details",children:["Access mode controls how requests to the data source will be handled.",(0,n.jsxs)("strong",{children:["\xA0",(0,n.jsx)("i",{children:"Server"})]})," ","should be the preferred way if nothing else is stated."]})}),(0,n.jsx)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.server-mode-title",children:(0,n.jsx)(m.E,{weight:"medium",children:"Server access mode (Default):"})}),(0,n.jsx)("p",{children:(0,n.jsx)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.server-mode-description",children:"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."})}),(0,n.jsx)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.browser-mode-title",children:(0,n.jsx)(m.E,{weight:"medium",children:"Browser access mode:"})}),(0,n.jsx)("p",{children:(0,n.jsx)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.browser-mode-description",children:"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode."})})]}),W=26,V=z=>{const{defaultUrl:R,dataSourceConfig:O,onChange:N,showAccessOptions:F,sigV4AuthToggleEnabled:G,showForwardOAuthIdentityOption:H,azureAuthSettings:K,renderSigV4Editor:w,secureSocksDSProxyEnabled:Q,urlLabel:k,urlDocs:te}=z,q=(0,s.useMemo)(()=>[{label:(0,o.t)("grafana-ui.data-source-http-settings.server-mode-label","Server (default)"),value:"proxy"},{label:(0,o.t)("grafana-ui.data-source-http-settings.browser-mode-label","Browser"),value:"direct"}],[]),se=(0,s.useMemo)(()=>q[0],[q]),[re,Y]=(0,s.useState)(!1),[X,J]=(0,s.useState)(!1),_=(0,l.$j)();let ee;const ae=(0,s.useCallback)(oe=>{const ue=K?.azureAuthSupported&&K.getAzureAuthEnabled(O)||!1;if(J(ue),ue){const ye=O.jsonData.oauthPassThru!==void 0?O.jsonData.oauthPassThru:!1;oe={...oe,jsonData:{...O.jsonData,oauthPassThru:ue?!1:ye}}}N({...O,...oe})},[K,O,N]);switch(O.access){case"direct":ee=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.direct-url-tooltip",children:["Your access method is ",(0,n.jsx)("em",{children:"Browser"}),", this means the URL needs to be accessible from the browser."]}),te]});break;case"proxy":ee=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.proxy-url-tooltip",children:["Your access method is ",(0,n.jsx)("em",{children:"Server"}),", this means the URL needs to be accessible from the grafana backend/server."]}),te]});break;default:ee=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.default-url-tooltip",children:"Specify a complete HTTP URL (for example http://your_server:8080)"}),te]})}const le=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(O.url),L=(0,a.css)({display:"grid",gridTemplateColumns:"auto 1fr",gap:_.spacing(.5)}),ie=(0,s.useId)();return(0,n.jsxs)(g.B,{direction:"column",gap:5,children:[(0,n.jsxs)("section",{children:[(0,n.jsx)("h3",{className:"page-heading",children:(0,n.jsx)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.heading",children:"HTTP"})}),(0,n.jsx)(p.D,{label:k??"URL",description:ee,invalid:!le,error:!le&&(0,o.t)("grafana-ui.data-source-http-settings.invalid-url-error","Invalid URL"),disabled:O.readOnly,children:(0,n.jsx)(v.p,{id:ie,width:40,placeholder:R,value:O.url,"data-testid":d.Tp.components.DataSource.DataSourceHttpSettings.urlInput,onChange:oe=>ae({url:oe.currentTarget.value})})}),F&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.D,{label:(0,o.t)("grafana-ui.data-source-http-settings.access-label","Access"),disabled:O.readOnly,children:(0,n.jsxs)(g.B,{direction:"row",gap:.5,children:[(0,n.jsx)(u.z,{"aria-label":(0,o.t)("grafana-ui.data-source-http-settings.access-label","Access"),options:q,value:q.find(oe=>oe.value===O.access)?.value||se.value,onChange:oe=>ae({access:oe})}),(0,n.jsx)(c.$n,{type:"button",variant:"secondary",size:"md",fill:"outline",onClick:()=>Y(oe=>!oe),"aria-expanded":re,"aria-controls":B,children:(0,n.jsxs)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.access-help",children:["Help\xA0",(0,n.jsx)(r.I,{name:re?"angle-down":"angle-right"})]})})]})}),re&&(0,n.jsx)(U,{})]}),O.access==="proxy"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.D,{label:(0,o.t)("grafana-ui.data-source-http-settings.allowed-cookies","Allowed cookies"),description:(0,o.t)("grafana-ui.data-source-http-settings.allowed-cookies-description","Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."),children:(0,n.jsx)(x.u,{tags:O.jsonData.keepCookies,width:40,onChange:oe=>ae({jsonData:{...O.jsonData,keepCookies:oe}}),disabled:O.readOnly})}),(0,n.jsx)(p.D,{label:(0,o.t)("grafana-ui.data-source-http-settings.timeout-label","Timeout"),description:(0,o.t)("grafana-ui.data-source-http-settings.timeout-description","HTTP request timeout in seconds"),disabled:O.readOnly,children:(0,n.jsx)(v.p,{type:"number",width:40,placeholder:(0,o.t)("grafana-ui.data-source-http-settings.timeout-placeholder","Timeout in seconds"),value:O.jsonData.timeout,onChange:oe=>{ae({jsonData:{...O.jsonData,timeout:parseInt(oe.currentTarget.value,10)}})}})})]})]}),(0,n.jsxs)("section",{children:[(0,n.jsx)("h3",{className:"page-heading",children:(0,n.jsx)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.auth",children:"Auth"})}),(0,n.jsxs)(g.B,{direction:"column",gap:4,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:L,children:[(0,n.jsx)(h.I,{label:(0,o.t)("grafana-ui.data-source-http-settings.basic-auth-label","Basic auth"),labelWidth:W,disabled:O.readOnly,children:(0,n.jsx)(E.K,{id:"http-settings-basic-auth",value:O.basicAuth,onChange:oe=>{ae({basicAuth:oe.currentTarget.checked})}})}),(0,n.jsx)(h.I,{label:(0,o.t)("grafana-ui.data-source-http-settings.with-credentials-label","With Credentials"),tooltip:(0,o.t)("grafana-ui.data-source-http-settings.with-credentials-tooltip","Whether credentials such as cookies or auth headers should be sent with cross-site requests."),labelWidth:W,disabled:O.readOnly,children:(0,n.jsx)(E.K,{id:"http-settings-with-credentials",value:O.withCredentials,onChange:oe=>{ae({withCredentials:oe.currentTarget.checked})}})}),K?.azureAuthSupported&&(0,n.jsx)(h.I,{label:(0,o.t)("grafana-ui.data-source-http-settings.azure-auth-label","Azure Authentication"),tooltip:(0,o.t)("grafana-ui.data-source-http-settings.azure-auth-tooltip","Use Azure authentication for Azure endpoint."),labelWidth:W,disabled:O.readOnly,children:(0,n.jsx)(E.K,{id:"http-settings-azure-auth",value:X,onChange:oe=>{ae(K.setAzureAuthEnabled(O,oe.currentTarget.checked))}})}),G&&(0,n.jsx)(h.I,{label:(0,o.t)("grafana-ui.data-source-http-settings.sigv4-auth-label","SigV4 auth"),labelWidth:W,disabled:O.readOnly,children:(0,n.jsx)(E.K,{id:"http-settings-sigv4-auth",value:O.jsonData.sigV4Auth||!1,onChange:oe=>{ae({jsonData:{...O.jsonData,sigV4Auth:oe.currentTarget.checked}})}})})]}),O.access==="proxy"&&(0,n.jsx)(P,{dataSourceConfig:O,onChange:oe=>ae({jsonData:oe}),showForwardOAuthIdentityOption:X?!1:H})]}),O.basicAuth&&(0,n.jsxs)("section",{children:[(0,n.jsx)(m.E,{variant:"h6",element:"h4",children:(0,n.jsx)(o.x6,{i18nKey:"grafana-ui.data-source-http-settings.basic-auth",children:"Basic Auth Details"})}),(0,n.jsx)(D,{...z})]}),K?.azureAuthSupported&&X&&K.azureSettingsUI&&(0,n.jsx)(K.azureSettingsUI,{dataSourceConfig:O,onChange:N}),O.jsonData.sigV4Auth&&G&&w,(O.jsonData.tlsAuth||O.jsonData.tlsAuthWithCACert)&&(0,n.jsx)(I.j,{dataSourceConfig:O,onChange:N}),O.access==="proxy"&&(0,n.jsx)(f.P,{dataSourceConfig:O,onChange:N})]})]}),Q&&(0,n.jsx)(M.Y,{options:O,onOptionsChange:N})]})}},96016:(ne,j,e)=>{"use strict";e.d(j,{R:()=>v});var n=e(2543),a=e.n(n),s=e(43561),d=e(39741),o=e(67770),l=e(43173),i=e(25992);const c="ui-extension-logs",p=1e3,h=1e3*60*10,u=(0,i.DW)(c);class r{constructor(E,x,m){this.baseLabels=E,this.channel=m??new BroadcastChannel(c),this.subject=x??new d.m(p,h),m||(this.channel.onmessage=y=>this.subject.next(y.data))}info(E,x){this.log(o.$b.info,E,x)}warning(E,x){u.logWarning(E,{...this.baseLabels,...x}),l.$.buildInfo.env==="development"&&console.warn(E,{...this.baseLabels,...x}),this.log(o.$b.warning,E,x)}error(E,x){u.logError(new Error(E),{...this.baseLabels,...x}),console.error(E,{...this.baseLabels,...x}),this.log(o.$b.error,E,x)}debug(E,x){this.log(o.$b.debug,E,x)}trace(E,x){this.log(o.$b.trace,E,x)}fatal(E,x){this.log(o.$b.fatal,E,x)}log(E,x,m){const y={...m,...this.baseLabels},{pluginId:b,extensionPointId:D}=y,f={level:E,labels:y,timestamp:Date.now(),id:(0,s.Ak)(),message:x,pluginId:(0,n.isString)(b)?b:void 0,extensionPointId:(0,n.isString)(D)?D:void 0};this.subject.next(f),this.channel.postMessage(f)}asObservable(){return this.subject.asObservable()}child(E){return new r({...E,...this.baseLabels},this.subject,this.channel)}}const v=new r},96041:(ne,j,e)=>{"use strict";e.d(j,{c:()=>Q,E:()=>k});var n=e(74848),a=e(46942),s=e.n(a),d=e(2543),o=e(55127),l=e.n(o),i=e(96540),c=e(1906),p=e(62392),h=e(48480),u=e(28105),r=e(54092),v=e(51898),g=e(92745),E=e(78282),x=e(27489),m=e(33604),y=e(22099),b=e(5585),D=e(99887),f=e(36303),C=e(68805),P=e(43260),T=e(85348),M=e(30419),I=e(4651),B=e(23117),U=e(22803),W=e(63142),V=e(30703),z=e(63527),R=e(12594),O=e(76792);const N=re=>{const{query:Y,queries:X,onChange:J,collapsedText:_,renderExtras:ee,hidden:ae,hideRefId:le=!1}=re,L=(0,W.of)(G),[ie,oe]=(0,i.useState)(!1),[ue,ye]=(0,i.useState)(null),fe=Ve=>{oe(!0)},Ee=Ve=>{if(oe(!1),ue){ye(null);return}Y.refId!==Ve&&J({...Y,refId:Ve})},Ae=Ve=>{const me=Ve.currentTarget.value.trim();if(me.length===0){ye("An empty query name is not allowed");return}for(const Se of X)if(Se!==Y&&me===Se.refId){ye("Query name already exists");return}ue&&ye(null)},Ge=Ve=>{Ee(Ve.currentTarget.value.trim())},Fe=Ve=>{Ve.key==="Enter"&&Ee(Ve.currentTarget.value)},Pe=Ve=>{Ve.target.select()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:L.wrapper,children:[!le&&!ie&&(0,n.jsxs)("button",{className:L.queryNameWrapper,"aria-label":v.Tp.components.QueryEditorRow.title(Y.refId),title:(0,g.t)("query.query-editor-row-header.query-name-div-title-edit-query-name","Edit query name"),onClick:fe,"data-testid":"query-name-div",type:"button",children:[(0,n.jsx)("span",{className:L.queryName,children:Y.refId}),(0,n.jsx)(V.I,{name:"pen",className:L.queryEditIcon,size:"sm"})]}),!le&&ie&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.p,{type:"text",defaultValue:Y.refId,onBlur:Ge,autoFocus:!0,onKeyDown:Fe,onFocus:Pe,invalid:ue!==null,onChange:Ae,className:L.queryNameInput,"data-testid":"query-name-input"}),ue&&(0,n.jsx)(R.P,{horizontal:!0,children:ue})]}),F(re,L),ee&&(0,n.jsx)("div",{className:L.itemWrapper,children:ee()}),ae&&(0,n.jsx)("em",{className:L.contextInfo,children:(0,n.jsx)(g.x6,{i18nKey:"query.query-editor-row-header.hidden",children:"Hidden"})})]}),_&&(0,n.jsx)("div",{className:L.collapsedText,children:_})]})},F=(re,Y)=>{const{alerting:X,dataSource:J,onChangeDataSource:_}=re;return _?(0,n.jsx)("div",{className:Y.itemWrapper,children:(0,n.jsx)(O.sk,{dashboard:!0,variables:!0,alerting:X,current:J.name,onChange:_})}):(0,n.jsxs)("em",{className:Y.contextInfo,children:["(",J.name,")"]})},G=re=>({wrapper:(0,U.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:re.spacing(.5),overflow:"hidden"}),queryNameWrapper:(0,U.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:re.shape.radius.default,alignItems:"center",padding:re.spacing(0,0,0,.5),margin:0,background:"transparent",overflow:"hidden","&:hover":{background:re.colors.action.hover,border:`1px dashed ${re.colors.border.strong}`},"&:focus":{border:`2px solid ${re.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),queryName:(0,U.css)({fontWeight:re.typography.fontWeightMedium,color:re.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:re.spacing(.5)}),queryEditIcon:(0,U.cx)((0,U.css)({marginLeft:re.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),queryNameInput:(0,U.css)({maxWidth:"300px",margin:"-4px 0"}),collapsedText:(0,U.css)({fontWeight:re.typography.fontWeightRegular,fontSize:re.typography.bodySmall.fontSize,color:re.colors.text.secondary,paddingLeft:re.spacing(1),alignItems:"center",overflow:"hidden",fontStyle:"italic",whiteSpace:"nowrap",textOverflow:"ellipsis"}),contextInfo:(0,U.css)({fontSize:re.typography.bodySmall.fontSize,fontStyle:"italic",color:re.colors.text.secondary,paddingLeft:"10px",paddingRight:"10px"}),itemWrapper:(0,U.css)({display:"flex",marginLeft:"4px"})});var H=e(76874);function K({children:re}){const Y=(0,W.of)(w);return(0,n.jsx)("div",{className:Y.container,children:re})}const w=re=>({container:(0,U.css)({border:`2px solid ${re.colors.primary.main}`,borderTopLeftRadius:"unset",borderTopRightRadius:"unset",borderBottomLeftRadius:re.shape.radius.default,borderBottomRightRadius:re.shape.radius.default,overflow:"hidden"})});class Q extends i.PureComponent{constructor(){super(...arguments),this.dataSourceSrv=(0,E.l)(),this.id="",this.state={datasource:null,data:void 0,isOpen:!0,showingHelp:!1},this.renderPluginEditor=()=>{const{query:Y,onChange:X,queries:J,onRunQuery:_,onAddQuery:ee,range:ae,app:le=c.Jk.PanelEditor,history:L}=this.props,{datasource:ie,data:oe}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(ie){let ue=this.getQueryEditor(ie);if(ue)return(0,n.jsx)(p.p,{instanceSettings:this.props.dataSource,children:(0,n.jsx)(ue,{query:Y,datasource:ie,onChange:X,onRunQuery:_,onAddQuery:ee,data:oe,range:ae,queries:J,app:le,history:L},ie?.name)})}return(0,n.jsx)("div",{children:(0,n.jsx)(g.x6,{i18nKey:"query-operation.query-editor-not-exported",children:"Data source plugin does not export any Query Editor component"})})},this.onRemoveQuery=()=>{const{onRemoveQuery:Y,query:X,onQueryRemoved:J}=this.props;Y(X),J&&J()},this.onCancelQueryLibraryEdit=()=>{const{query:Y}=this.props;(0,x.rR)("query_library-update_query_from_explore_cancelled",{datasourceType:Y.datasource?.type}),this.props.onCancelQueryLibraryEdit?.()},this.onExitQueryLibraryEditingMode=()=>{this.props.onCancelQueryLibraryEdit?.()},this.onCopyQuery=()=>{const{query:Y,onAddQuery:X,onQueryCopied:J}=this.props,_=(0,d.cloneDeep)(Y);X(_),J&&J()},this.onHideQuery=()=>{const{query:Y,onChange:X,onRunQuery:J,onQueryToggled:_}=this.props;X({...Y,hide:!Y.hide}),J(),_&&_(Y.hide),(0,x.rR)("query_editor_row_hide_query_clicked",{hide:!Y.hide})},this.onToggleHelp=()=>{this.setState(Y=>({showingHelp:!Y.showingHelp}))},this.onClickExample=Y=>{Y.datasource===void 0&&(Y.datasource=(0,h.p$)(this.props.dataSource)),this.props.onChange({...Y,refId:this.props.query.refId}),this.onToggleHelp()},this.onSelectQueryFromLibrary=Y=>{this.props.onQueryReplacedFromLibrary?.(),this.props.onReplace?.(Y)},this.renderWarnings=Y=>{const{data:X,query:J}=this.props,ee=(k(X,J.refId)?.series??[]).reduce((fe,Ee)=>{if(!Ee.meta?.notices)return fe;const Ae=(0,d.filter)(Ee.meta.notices,Ge=>Ge.severity===Y)??[];return fe.concat(Ae)},[]),ae=(0,d.uniqBy)(ee,"text");if(!(ae.length>0))return null;const L="query-"+Y+"s",ie=Y==="warning"?"orange":"blue",oe=Y==="warning"?"exclamation-triangle":"file-landscape-alt",ue=ae.map(fe=>fe.text),ye=(0,n.jsx)(b.B,{items:ue,renderItem:fe=>(0,n.jsx)(n.Fragment,{children:fe})});return(0,n.jsx)(D.E,{color:ie,icon:oe,text:(0,n.jsxs)(n.Fragment,{children:[ae.length," ",l()(Y,ae.length)]}),tooltip:ye},L)},this.renderExtraActions=()=>{const{query:Y,queries:X,data:J,onAddQuery:_,dataSource:ee,app:ae}=this.props,le=B.d.getAllExtraRenderAction();let L=[];ae!==void 0&&(L=B.d.getScopedExtraRenderAction(ae));const ie=[...le,...L].map((oe,ue)=>oe({query:Y,queries:X,timeRange:J.timeRange,onAddQuery:_,dataSource:ee,key:ue})).filter(Boolean);return ie.push(this.renderWarnings("info")),ie.push(this.renderWarnings("warning")),ie.push((0,n.jsx)(se,{query:Y},"adaptive-telemetry-actions")),ie},this.renderActions=Y=>{const{query:X,hideHideQueryButton:J=!1,queryLibraryRef:_,app:ee}=this.props,{datasource:ae,showingHelp:le}=this.state,L=!!X.hide,ie=ae?.components?.QueryEditorHelp,oe=_!==void 0,ue=ee===c.Jk.UnifiedAlerting,ye=X.datasource?.uid===I.Uj;return(0,n.jsxs)(n.Fragment,{children:[!oe&&!ue&&!ye&&(0,n.jsx)(te,{query:{...X,datasource:ae?{uid:ae.uid,type:ae.type}:X.datasource},app:ee,onUpdateSuccess:this.onExitQueryLibraryEditingMode,onSelectQuery:this.onSelectQueryFromLibrary,datasourceFilters:ae?.name?[ae.name]:[]}),ie&&(0,n.jsx)(P.A,{title:(0,g.t)("query-operation.header.datasource-help","Show data source help"),icon:"question-circle",onClick:this.onToggleHelp,active:le}),this.renderExtraActions(),!oe&&(0,n.jsx)(P.q,{title:(0,g.t)("query-operation.header.duplicate-query","Duplicate query"),icon:"copy",onClick:this.onCopyQuery}),J?null:(0,n.jsx)(P.A,{dataTestId:v.Tp.components.QueryEditorRow.actionButton("Hide response"),title:X.hide?(0,g.t)("query-operation.header.show-response","Show response"):(0,g.t)("query-operation.header.hide-response","Hide response"),icon:L?"eye-slash":"eye",active:L,onClick:this.onHideQuery}),!oe&&(0,n.jsx)(P.q,{title:(0,g.t)("query-operation.header.remove-query","Remove query"),icon:"trash-alt",onClick:this.onRemoveQuery})]})},this.renderHeader=Y=>{const{app:X,query:J,dataSource:_,onChangeDataSource:ee,onChange:ae,queries:le,renderHeaderExtras:L,hideRefId:ie}=this.props;return(0,n.jsx)(N,{query:J,queries:le,onChangeDataSource:ee,dataSource:_,hidden:J.hide,onChange:ae,collapsedText:Y.isOpen?null:this.renderCollapsedText(),renderExtras:L,alerting:X===c.Jk.UnifiedAlerting,hideRefId:ie})}}componentDidMount(){const{data:Y,query:X,id:J}=this.props,_=k(Y,X.refId);this.id=(0,d.uniqueId)(J+"_"),this.setState({data:_}),this.loadDatasource()}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const Y=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return Y?.rawRef?.uid??Y?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let Y;const X=this.getInterpolatedDataSourceUID();try{Y=await this.dataSourceSrv.get(X)}catch{Y=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(Y),this.setState({datasource:Y,queriedDataSourceIdentifier:X})}componentDidUpdate(Y){const{datasource:X,queriedDataSourceIdentifier:J}=this.state,{data:_,query:ee}=this.props;if(Y.id!==this.props.id&&(this.id=(0,d.uniqueId)(this.props.id+"_")),_!==Y.data){const ae=k(_,ee.refId);this.setState({data:ae})}if(X&&J!==this.getInterpolatedDataSourceUID()){this.loadDatasource();return}}getQueryEditor(Y){if(Y)switch(this.props.app){case c.Jk.Explore:return Y.components?.ExploreMetricsQueryField||Y.components?.ExploreLogsQueryField||Y.components?.ExploreQueryField||Y.components?.QueryEditor;case c.Jk.PanelEditor:case c.Jk.Dashboard:default:return Y.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:Y}=this.state;return Y?.getQueryDisplayText?Y.getQueryDisplayText(this.props.query):null}render(){const{query:Y,index:X,visualization:J,collapsable:_,hideActionButtons:ee,isOpen:ae,onQueryOpenChanged:le,app:L,queryLibraryRef:ie,onCancelQueryLibraryEdit:oe}=this.props,{datasource:ue,showingHelp:ye,data:fe}=this.state,Ee=Y.hide,Ae=fe?.error&&fe.error.refId===Y.refId?fe.error:fe?.errors?.find(me=>me.refId===Y.refId),Ge=s()("query-editor-row",{"query-editor-row--disabled":Ee,"gf-form-disabled":Ee});if(!ue)return null;const Fe=this.renderPluginEditor(),Pe=ue.components?.QueryEditorHelp,Ve=(0,n.jsx)(T.u,{id:this.id,draggable:!ee&&!ie,collapsable:_,index:X,headerElement:this.renderHeader,actions:ee?void 0:this.renderActions,isOpen:ae,onOpen:le,children:(0,n.jsxs)("div",{className:Ge,id:this.id,children:[(0,n.jsxs)(f.Xw,{boundaryName:"query-editor-operation-row",children:[ye&&Pe&&(0,n.jsx)(C.j,{children:(0,n.jsx)(Pe,{onClickExample:me=>this.onClickExample(me),query:this.props.query,datasource:ue})}),Fe]}),Ae&&(0,n.jsx)(H.x,{error:Ae}),J]})});return(0,n.jsxs)("div",{"data-testid":"query-editor-row","aria-label":v.Tp.components.QueryEditorRows.rows,children:[ie&&(0,n.jsx)(q,{query:Y,app:L,queryLibraryRef:ie,onCancelEdit:oe,onUpdateSuccess:this.onExitQueryLibraryEditingMode,onSelectQuery:this.onSelectQueryFromLibrary}),ie?(0,n.jsx)(K,{children:Ve}):Ve]})}}function k(re,Y){const X=re.series.filter(ae=>ae.refId===Y);if(re.state!==u.Gu.Loading&&(re.error||re.errors?.length)&&!re.series.length)return{...re,state:u.Gu.Error};let J=re.state,_=re.errors?.find(ae=>ae.refId===Y);!_&&re.error&&(_=re.error.refId===Y?re.error:void 0),J!==u.Gu.Loading&&(_?J=u.Gu.Error:re.state===u.Gu.Error&&(J=u.Gu.Done));const ee=re.timeRange;return{...re,state:J,series:X,error:_,errors:_?[_]:void 0,timeRange:ee}}function te(re){const{renderSavedQueryButtons:Y}=(0,M.Y)();return Y(re.query,re.app,re.onUpdateSuccess,re.onSelectQuery)}function q(re){const{renderQueryLibraryEditingHeader:Y}=(0,M.Y)();return Y(re.query,re.app,re.queryLibraryRef,re.onCancelEdit,re.onUpdateSuccess,re.onSelectQuery)}function se({query:re}){try{const{isLoading:Y,components:X}=(0,m.f)({extensionPointId:r.SM.QueryEditorRowAdaptiveTelemetryV1});return Y||!X.length?null:(0,y.RC)({props:{query:re,contextHints:["queryeditorrow","header"]},components:X,limit:1,pluginId:/grafana-adaptive.*/})}catch{return null}}},96065:(ne,j,e)=>{"use strict";e.d(j,{e:()=>m});var n=e(74848),a=e(22803),s=e(96540),d=e(64423),o=e(28105),l=e(51898),i=e(92745),c=e(43173),p=e(47931),h=e(6975),u=e(50275),r=e(45861),v=e(41654),g=e(35137),E=e(83873),x=e(89460);class m extends s.PureComponent{constructor(b){super(b),this.subs=new d.yU,this.setFormattedJson=D=>{this.formattedJson=D},this.getTextForClipboard=()=>JSON.stringify(this.formattedJson,null,2),this.onToggleExpand=()=>{this.setState(D=>({...D,allNodesExpanded:!this.state.allNodesExpanded}))},this.onToggleMocking=()=>{this.setState(D=>({...D,isMocking:!this.state.isMocking}))},this.getNrOfOpenNodes=()=>this.state.allNodesExpanded===null?3:this.state.allNodesExpanded?20:1,this.state={executedQueries:[],allNodesExpanded:null,isMocking:!1,mockedResponse:"",response:{}}}componentDidMount(){this.subs.add(E.IB.getInspectorStream().subscribe({next:b=>{let D=!0;if(this.props.instanceId&&b?.requestId&&(D=b.requestId.startsWith(this.props.instanceId)),D)return this.onDataSourceResponse(b.response)}}))}componentDidUpdate(b){this.props.data!==b.data&&this.updateQueryList()}updateQueryList(){const{data:b}=this.props,D=b.series,f=[];if(D?.length){let C;D.forEach((P,T)=>{const M=P.meta?.executedQueryString;if(M){const I=P.refId||"?";C?.refId===I?(C.frames++,C.rows+=P.length):(C={refId:I,frames:0,rows:P.length,query:M},f.push(C))}})}this.setState({executedQueries:f})}componentWillUnmount(){this.subs.unsubscribe()}onDataSourceResponse(b){b.config?.hideFromInspector||(b={...b},b.headers&&delete b.headers,b.config&&(b.request=b.config,delete b.config,delete b.request.transformRequest,delete b.request.transformResponse,delete b.request.paramSerializer,delete b.request.jsonpCallbackParam,delete b.request.headers,delete b.request.requestId,delete b.request.inspect,delete b.request.retry,delete b.request.timeout),b.data&&(b.response=b.data,delete b.config,delete b.data,delete b.status,delete b.statusText,delete b.ok,delete b.url,delete b.redirected,delete b.type,delete b.$$config),this.setState({response:b}))}renderExecutedQueries(b){if(!b.length)return null;const D={refId:(0,a.css)({fontWeight:c.$.theme.typography.weight.semibold,color:c.$.theme.colors.textBlue,marginRight:"8px"})};return(0,n.jsx)("div",{children:b.map(f=>(0,n.jsxs)(v.B,{gap:1,direction:"column",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:D.refId,children:[f.refId,":"]}),f.frames>1&&(0,n.jsx)("span",{children:(0,n.jsxs)(i.x6,{i18nKey:"inspector.query-inspector.count-frames",count:f.frames,children:["{{count}}"," frames,"," "]})}),(0,n.jsx)("span",{children:(0,n.jsxs)(i.x6,{i18nKey:"inspector.query-inspector.count-rows",count:f.rows,children:["{{count}}"," rows"]})})]}),(0,n.jsx)("pre",{children:f.query})]},f.refId))})}render(){const{allNodesExpanded:b,executedQueries:D,response:f}=this.state,{onRefreshQuery:C,data:P}=this.props,T=this.getNrOfOpenNodes(),M=(0,x.A)(c.$.theme2),I=Object.keys(f).length>0,B=P.state===o.Gu.Loading;return(0,n.jsxs)("div",{className:M.wrap,children:[(0,n.jsxs)("div",{"aria-label":l.Tp.components.PanelInspector.Query.content,children:[(0,n.jsx)("h3",{className:M.heading,children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query-inspector.query-inspector",children:"Query inspector"})}),(0,n.jsx)("p",{className:"small muted",children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.description",children:"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Click refresh button below to trigger a new query."})})]}),this.renderExecutedQueries(D),(0,n.jsxs)(v.B,{direction:"row",gap:2,justifyContent:"flex-start",wrap:!0,children:[(0,n.jsx)(r.$n,{icon:"sync",onClick:C,"aria-label":l.Tp.components.PanelInspector.Query.refreshButton,children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.refresh",children:"Refresh"})}),I&&b&&(0,n.jsx)(r.$n,{icon:"minus",variant:"secondary",onClick:this.onToggleExpand,children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.collapse-all",children:"Collapse all"})}),I&&!b&&(0,n.jsx)(r.$n,{icon:"plus",variant:"secondary",onClick:this.onToggleExpand,children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.expand-all",children:"Expand all"})}),I&&(0,n.jsx)(p.b,{getText:this.getTextForClipboard,icon:"copy",variant:"secondary",children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.copy-to-clipboard",children:"Copy to clipboard"})})]}),(0,n.jsx)(g.$,{v:2}),(0,n.jsxs)("div",{className:M.content,children:[B&&(0,n.jsx)(h._,{text:(0,i.t)("inspector.query-inspector.text-loading-query-inspector","Loading query inspector...")}),!B&&I&&(0,n.jsx)(u.B,{json:f,open:T,onDidRender:this.setFormattedJson}),!B&&!I&&(0,n.jsx)("p",{className:"muted",children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.no-data",children:"No request and response collected yet. Hit refresh button"})})]})]})}}},96120:(ne,j,e)=>{"use strict";e.d(j,{j:()=>n});const n={}},96137:(ne,j,e)=>{"use strict";e.d(j,{Ct:()=>b,KH:()=>h,KL:()=>v,LH:()=>p,Qn:()=>i,Wu:()=>c,bw:()=>g,fO:()=>r,i3:()=>x,lF:()=>u});var n=e(65307),a=e(2543),s=e.n(a),d=e(52161),o=e(94646),l=e(29609);const i=(0,n.VP)("ruleGroup/rules/add"),c=(0,n.VP)("ruleGroup/rules/update"),p=(0,n.VP)("ruleGroup/rules/pause"),h=(0,n.VP)("ruleGroup/rules/delete"),u=(0,n.VP)("ruleGroup/update"),r=(0,n.VP)("ruleGroup/move"),v=(0,n.VP)("ruleGroup/rename"),g=(0,n.VP)("ruleGroup/rules/reorder"),E={name:"initial",rules:[]},x=(0,n.vy)(E,f=>{f.addCase(i,(C,{payload:P})=>{const{rule:T}=P;C.rules.push(T)}).addCase(c,(C,{payload:P})=>{const{identifier:T,rule:M}=P,I=D(C.rules,T);C.rules[I]=M}).addCase(h,(C,{payload:P})=>{const{identifier:T}=P,M=D(C.rules,T);C.rules.splice(M,1)}).addCase(p,(C,{payload:P})=>{const{uid:T,pause:M}=P,I={ruleSourceName:d.hY,uid:T},B=D(C.rules,I),U=C.rules[B];if(l.p.grafana.rule(U))U.grafana_alert.is_paused=M;else throw new Error("Matching rule is not a Grafana-managed rule")}).addCase(g,(C,{payload:P})=>{const{swaps:T}=P;y(C.rules,T)}).addMatcher((0,n.i0)(v,r,i),(C,{payload:P})=>{const{groupName:T}=P;C.name=T??C.name}).addMatcher((0,n.i0)(u,v,r,i),(C,{payload:P})=>{const{interval:T}=P;C.interval=T??C.interval}).addDefaultCase((C,P)=>{throw new Error(`Unknown action for rule group reducer: ${P.type}`)})}),m=f=>{const C=(0,l.A4)(f),P=(0,l.X4)(f);return T=>{const M=l.p.grafana.rule(T),I=l.p.dataSource.rule(T);if(C&&M)return T.grafana_alert.uid===f.uid;if(I&&P)return(0,o.Ns)(T)===f.rulerRuleHash}};function y(f,C){for(const P of C)b(f,P);return f}function b(f,[C,P]){if(!((0,a.inRange)(C,f.length)&&(0,a.inRange)(P,f.length)))throw new Error("Invalid operation: index out of bounds");const[M]=f.splice(C,1);f.splice(P,0,M)}function D(f,C){const P=f.findIndex(m(C));if(P===-1)throw new Error("no rule matching identifier found");return P}},96215:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>z,S:()=>V});var n=e(2543),a=e(39741),s=e(62467),d=e(45650),o=e(69862),l=e(81160),i=e(66847),c=e(28105),p=e(41119),h=e(22592),u=e(60519),r=e(76732),v=e(739),g=e(2197),E=e(1906),x=e(17548),m=e(97534),y=e(36580),b=e(46383),D=e(28998),f=e(59373),C=e(73601),P=e(32380),T=e(49510),M=e(27359);function I(O=[]){O.forEach(N=>{N.meta={...N.meta,dataTopic:v.QR.Annotations}})}function B(O,N){return(0,T.z)([O,N]).pipe((0,o.Z)(F=>{const[G,H]=F;if(H.annotations?.length||H.alertState){G.annotations||(G.annotations=[]);const K=G.annotations.concat((0,M.I)(H.annotations));I(K);const w=H.alertState;return(0,s.of)({...G,annotations:K,alertState:w})}return I(G.annotations),(0,s.of)(G)}))}var U=e(71393);let W=100;function V(){return"Q"+W++}class z{constructor(N){this.templateSrv=(0,f.w)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new a.m(1),this.dataConfigSource=N}getData(N){const{withFieldConfig:F,withTransforms:G}=N;let H=1,K,w=[],Q=[],k,te=!0,q=-1;if(this.dataConfigSource.snapshotData){const se={state:c.Gu.Done,series:this.dataConfigSource.snapshotData.map(re=>(0,p.Vc)(re)),timeRange:(0,h.E2)(),structureRev:H};return(0,s.of)(se)}return this.subject.pipe((0,o.Z)(se=>{let re=this.dataConfigSource.getFieldOverrideOptions(),Y=this.dataConfigSource.getTransformations();if(se.series===Q&&K?.fieldConfig===re?.fieldConfig&&k===Y)return(0,s.of)({...se,structureRev:H,series:w});K=re,k=Y,Q=se.series;let X=(0,s.of)(se);return G&&(X=this.applyTransformations(se)),X.pipe((0,l.T)(J=>{let _=J,ee=!1;if(F&&J.series?.length){if(q===this.dataConfigSource.configRev){let ae;for(const le of J.series)if((0,b.o$)(le)){ae=le;break}ae&&!ae.packetInfo.schemaChanged&&w[0].fields.length===ae.fields.length&&(_={..._,series:w.map((le,L)=>({...le,length:J.series[L].length,fields:le.fields.map((ie,oe)=>({...ie,values:J.series[L].fields[oe].values,state:{...ie.state,calcs:void 0,range:void 0}}))}))},ee=!0)}re!=null&&(te||!ee)&&(q=this.dataConfigSource.configRev,_={..._,series:(0,u.we)({timeZone:J.request?.timezone??"browser",data:_.series,...re})},_.annotations&&(_.annotations=(0,u.we)({data:_.annotations,...re,fieldConfig:{defaults:{},overrides:[]}})),te=!1)}return!ee&&!(0,r.J3)(w,_.series,r.bW)&&H++,w=_.series,{..._,structureRev:H}}))}))}applyTransformations(N){const F=this.dataConfigSource.getTransformations();if(F&&F.every(se=>se.disabled)||!F||F.length===0)return(0,s.of)(N);const H={interpolate:se=>this.templateSrv.replace(se,N?.request?.scopedVars)};let K=F.filter(se=>se.topic==null||se.topic===v.QR.Series),w=F.filter(se=>se.topic===v.QR.Annotations),Q=(0,g.m)(K,N.series,H),k=(0,g.m)(w,N.annotations??[],H),te=[],q=[];return(0,d.p)([Q,k]).pipe((0,l.T)(se=>(se.forEach(re=>{for(const Y of re)Y.meta?.dataTopic===v.QR.Annotations?q.push(Y):te.push(Y)}),{...N,series:te,annotations:q})),(0,i.W)(se=>(console.warn("Error running transformation:",se),(0,s.of)({...N,state:c.Gu.Error,errors:[(0,m.u)(se)]}))))}async run(N){const{queries:F,timezone:G,datasource:H,panelId:K,panelName:w,panelPluginId:Q,dashboardUID:k,dashboardTitle:te,timeRange:q,timeInfo:se,cacheTimeout:re,queryCachingTTL:Y,maxDataPoints:X,scopedVars:J,minInterval:_,app:ee}=N;if((0,C.k)(H)){this.pipeToSubject((0,C.m)(N,F[0]),K,!0);return}const ae=this.shouldAddErrorWhenDatasourceVariableIsMultiple(H,J),le={app:ee??E.Jk.Dashboard,requestId:V(),timezone:G,panelId:K,panelName:w,panelPluginId:Q,dashboardUID:k,dashboardTitle:te,range:q,timeInfo:se,interval:"",intervalMs:0,targets:(0,n.cloneDeep)(F),maxDataPoints:X,scopedVars:J||{},cacheTimeout:re,queryCachingTTL:Y,startTime:Date.now(),rangeRaw:q.raw};try{const L=await R(H,le.scopedVars),ie=L.meta?.mixed;le.targets=le.targets.map(ye=>{const fe=ye.datasource?.type===y.dR.type;return(!ye.datasource||ye.datasource.uid!==L.uid&&!ie&&!fe)&&(ye.datasource=L.getRef()),ye});const oe=_?this.templateSrv.replace(_,le.scopedVars):L.interval,ue=x.calculateInterval(q,X,oe);le.scopedVars=Object.assign({},le.scopedVars,{__interval:{text:ue.interval,value:ue.interval},__interval_ms:{text:ue.intervalMs.toString(),value:ue.intervalMs}}),le.interval=ue.interval,le.intervalMs=ue.intervalMs,le.filters=this.templateSrv.getAdhocFilters(L.name,!0),le.panelId=K,le.panelName=w,this.lastRequest=le,this.pipeToSubject((0,U.BN)(L,le),K,!1,ae)}catch(L){this.pipeToSubject((0,s.of)({state:c.Gu.Error,error:(0,m.u)(L),series:[],timeRange:le.range}),K)}}pipeToSubject(N,F,G=!1,H=!1){this.subscription&&this.subscription.unsubscribe();let K=N;const w=this.dataConfigSource.getDataSupport();if(w.alertStates||w.annotations){const Q=this.dataConfigSource;K=B(N,(0,P.Dh)().getResult(Q.id))}this.subscription=K.subscribe({next:Q=>{const k=this.lastResult,te=G?Q:(0,p.N$)(Q,k);if(k!=null&&te.state!==c.Gu.Streaming){let q=(0,r.J3)(k.series??[],te.series??[],(X,J)=>X===J),se=(0,r.J3)(k.annotations??[],te.annotations??[],(X,J)=>X===J),re=k.state===te.state,Y=(0,r.J3)(k.errors??[],te.errors??[],(X,J)=>(0,n.isEqual)(X,J));if(q&&(te.series=k.series),se&&(te.annotations=k.annotations),q&&se&&re&&Y)return}this.lastResult=te,H&&(te.errors=[{message:"Panel is using a variable datasource with multiple values without repeat option. Please configure the panel to be repeated by the same datasource variable."}],te.state=c.Gu.Error),this.subject.next(te)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===c.Gu.Loading||this.lastResult.state===c.Gu.Streaming)&&this.subject.next({...this.lastResult,state:c.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new a.m(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(N){this.lastResult=N.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(N){this.lastResult=N}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}shouldAddErrorWhenDatasourceVariableIsMultiple(N,F){let G=!1;return N?.uid?.startsWith("${")&&this.templateSrv.replace(N.uid,F,H=>(Array.isArray(H)&&H.length>1&&(G=!0),"")),G}}async function R(O,N){return O&&typeof O=="object"&&"query"in O?O:await(0,D.tR)().get(O,N)}},96221:(ne,j,e)=>{"use strict";e.d(j,{Qd:()=>n,g2:()=>s});var n=(d=>(d.Success="success",d.Warning="warning",d.Error="error",d.Info="info",d))(n||{}),a=(d=>(d[d.Success=3e3]="Success",d[d.Warning=5e3]="Warning",d[d.Error=7e3]="Error",d))(a||{});const s={success:3e3,warning:5e3,error:7e3,info:3e3}},96371:(ne,j,e)=>{"use strict";e.d(j,{D:()=>Fe});var n=e(74848),a=e(96540),s=e(92745),d=e(43173),o=e(41654),l=e(34999),i=e(22803),c=e(2543),p=e(5556),h=e(27074),u=e(63142),r=e(66404),v=e(36303),g=e(99887),E=e(45861),x=e(44022),m=e(4651),y=e(2954),b=e(49779),D=e(26051),f=e(2401),C=e(51993),P=e(55376),T=e(89144);function M({data:Pe,thresholds:Ve}){return Pe?(0,n.jsx)(T.j,{data:Pe,thresholds:Ve?.config,thresholdsType:Ve?.mode}):null}var I=e(20382),B=e(52161),U=e(20437),W=e(65232);const V=({expression:Pe})=>(0,n.jsx)(W.m,{options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastColumn:0,scrollBeyondLastLine:!1,lineNumbers:"off",cursorWidth:0,overviewRulerLanes:0},defaultLanguage:"sql",height:80,defaultValue:Pe,width:"100%"});function z(Pe){return"rawSql"in Pe}const R=null,O=a.lazy(()=>e.e(3659).then(e.bind(e,33659))),N=a.lazy(()=>e.e(4964).then(e.bind(e,24964)));function F({model:Pe,dataSource:Ve}){return(0,B.bS)(Ve.type)&&(0,U.Bu)(Pe)?(0,n.jsx)(O,{query:Pe.expr}):Ve.type===B.ol.Loki&&(0,U.Bu)(Pe)?(0,n.jsx)(N,{query:Pe.expr??""}):z(Pe)?(0,n.jsx)(V,{expression:Pe.rawSql}):(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,I.Bh)(Pe)})})}var G=e(16692);function H({rule:Pe,queries:Ve,condition:me,evalDataByQuery:Se={}}){const Qe=(0,c.keyBy)(Object.values(d.$.datasources),Le=>Le.uid),Ue=Ve.filter(Le=>!(0,x.f)(Le.model)),Ie=Ve.filter(Le=>(0,x.f)(Le.model)),Re=(0,u.of)(le),Ke=(0,P.an)(Ve,me);return(0,n.jsxs)(o.B,{gap:1,direction:"column",flex:"1 1 320px",children:[(0,n.jsx)("div",{className:Re.maxWidthContainer,children:(0,n.jsx)(o.B,{gap:1,wrap:"wrap","data-testid":"queries-container",children:Ue.map(({model:Le,relativeTimeRange:ze,refId:Be,datasourceUid:$e},Ye)=>{const de=Qe[$e];return(0,n.jsx)(K,{rule:Pe,refId:Be,model:Le,relativeTimeRange:ze,dataSource:de,thresholds:Ke[Be],queryData:Se[Be]},Ye)})})}),(0,n.jsx)("div",{className:Re.maxWidthContainer,children:(0,n.jsx)(o.B,{gap:1,wrap:"wrap","data-testid":"expressions-container",children:Ie.map(({model:Le,refId:ze,datasourceUid:Be},$e)=>(0,x.f)(Le)&&(0,n.jsx)(te,{refId:ze,isAlertCondition:me===ze,model:Le,evalData:Se[ze]},$e))})})]})}function K({refId:Pe,rule:Ve,thresholds:me,model:Se,dataSource:Qe,queryData:Ue,relativeTimeRange:Ie}){const Re=(0,u.of)(k),Ke=(0,x.f)(Se),[Le,ze]=(0,G.mh)(Ve,G.j5.Explore),Be=Le&&ze,$e=[];if(Qe){const de=Qe.name??"[[Data source not found]]",ge=Qe.meta.info.logos.small;$e.push((0,n.jsx)(Q,{name:de,imgUrl:ge},"datasource"))}Ie&&$e.push((0,n.jsx)(r.E,{color:"secondary",children:(0,n.jsx)(D.f,{relativeTimeRange:Ie})},"timerange"));let Ye;return!Ke&&Be&&(Ye=Qe&&w(Qe,Se)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q,{refId:Pe,headerItems:$e,exploreLink:Ye,children:(0,n.jsx)("div",{className:Re.queryPreviewWrapper,children:(0,n.jsx)(v.Xw,{children:Se&&Qe&&(0,n.jsx)(F,{model:Se,dataSource:Qe})})})}),Qe&&(0,n.jsx)(M,{data:Ue,thresholds:me})]})}function w(Pe,Ve){const{uid:me,type:Se}=Pe,{refId:Qe,...Ue}=Ve;return p.kM.renderUrl(`${d.$.appSubUrl}/explore`,{left:JSON.stringify({datasource:Pe.uid,queries:[{refId:"A",...Ue,datasource:{type:Se,uid:me}}],range:{from:"now-1h",to:"now"}})})}function Q({name:Pe,imgUrl:Ve}){const me=(0,u.of)(k);return(0,n.jsxs)("div",{className:me.dataSource,children:[(0,n.jsx)("img",{src:Ve,width:16,alt:Pe}),Pe]},"datasource")}const k=Pe=>({queryPreviewWrapper:(0,i.css)({margin:Pe.spacing(1)}),contentBox:(0,i.css)({flex:"1 0 100%"}),dataSource:(0,i.css)({border:`1px solid ${Pe.colors.border.weak}`,borderRadius:Pe.shape.radius.default,padding:Pe.spacing(.5,1),display:"flex",alignItems:"center",gap:Pe.spacing(1)})});function te({refId:Pe,model:Ve,evalData:me,isAlertCondition:Se}){const Qe=(0,u.of)(se);function Ue(){switch(Ve.type){case m.Tz.math:return(0,n.jsx)(L,{model:Ve});case m.Tz.reduce:return(0,n.jsx)(X,{model:Ve});case m.Tz.resample:return(0,n.jsx)(_,{model:Ve});case m.Tz.classic:return(0,n.jsx)(re,{model:Ve});case m.Tz.threshold:return(0,n.jsx)(ae,{model:Ve});case m.Tz.sql:return(0,n.jsx)(h.l,{rawSql:Ve.expression||"",datasourceType:Ve.datasource?.type});default:return(0,n.jsxs)(s.x6,{i18nKey:"alerting.expression-preview.expression-not-supported",values:{type:Ve.type},children:["Expression not supported: ","{{type}}"]})}}return(0,n.jsxs)(q,{refId:Pe,headerItems:[(0,n.jsx)(r.E,{color:"secondary",children:(0,c.startCase)(Ve.type)},"expression-type")],isAlertCondition:Se,children:[(0,n.jsxs)("div",{className:Qe.previewWrapper,children:[me?.errors?.map(Ie=>(0,n.jsx)(l.F,{title:(0,s.t)("alerting.expression-preview.title-expression-failed","Expression failed"),severity:"error",bottomSpacing:1,children:Ie.message},(0,c.uniqueId)())),Ue()]}),(0,n.jsx)(b.h,{}),me&&(0,n.jsx)(C.GX,{series:me.series,isAlertCondition:Se})]})}function q({refId:Pe,headerItems:Ve=[],children:me,isAlertCondition:Se,exploreLink:Qe}){const Ue=(0,u.of)(se);return(0,n.jsxs)("div",{className:(0,i.cx)(Ue.container),children:[(0,n.jsxs)("header",{className:Ue.header,children:[(0,n.jsx)("span",{className:Ue.refId,children:Pe}),Ve,(0,n.jsx)(b.h,{}),Se&&(0,n.jsx)(g.E,{color:"green",icon:"check",text:(0,s.t)("alerting.query-box.text-alert-condition","Alert condition")}),Qe&&(0,n.jsx)(f.d,{component:(0,n.jsx)(E.z9,{size:"md",variant:"secondary",icon:"compass",href:Qe,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.query-box.view-in-explore",children:"View in Explore"})})})]}),me]})}const se=Pe=>({container:(0,i.css)({flex:"1 0 25%",border:`1px solid ${Pe.colors.border.weak}`,maxWidth:"100%",borderRadius:Pe.shape.radius.default,display:"flex",flexDirection:"column"}),header:(0,i.css)({display:"flex",alignItems:"center",gap:Pe.spacing(1),padding:Pe.spacing(1),backgroundColor:Pe.colors.background.secondary}),textBlock:(0,i.css)({border:`1px solid ${Pe.colors.border.weak}`,padding:Pe.spacing(.5,1),backgroundColor:Pe.colors.background.primary,borderRadius:Pe.shape.radius.default}),refId:(0,i.css)({color:Pe.colors.text.link,padding:Pe.spacing(.5,1),border:`1px solid ${Pe.colors.border.weak}`,borderRadius:Pe.shape.radius.default}),previewWrapper:(0,i.css)({padding:Pe.spacing(1)})});function re({model:Pe}){const Ve=(0,u.of)(Y),me=(0,c.keyBy)(y.A.reducerTypes,Ue=>Ue.value),Se=(0,c.keyBy)(y.A.evalOperators,Ue=>Ue.value),Qe=(0,c.keyBy)(y.A.evalFunctions,Ue=>Ue.value);return(0,n.jsx)("div",{className:Ve.container,children:Pe.conditions?.map(({query:Ue,operator:Ie,reducer:Re,evaluator:Ke},Le)=>{const ze=oe(Ke);return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("div",{className:Ve.blue,children:Le===0?(0,s.t)("alerting.classic-condition-viewer.when","WHEN"):!!Ie?.type&&Se[Ie?.type]?.text}),(0,n.jsx)("div",{className:Ve.bold,children:Re?.type&&me[Re.type]?.text}),(0,n.jsx)("div",{className:Ve.blue,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.classic-condition-viewer.of",children:"OF"})}),(0,n.jsx)("div",{className:Ve.bold,children:Ue.params[0]}),(0,n.jsx)("div",{className:Ve.blue,children:Qe[Ke.type].text}),(0,n.jsx)("div",{className:Ve.bold,children:ze?`(${Ke.params[0]}; ${Ke.params[1]})`:Ke.params[0]})]},Le)})})}const Y=Pe=>({container:(0,i.css)({display:"grid",gridTemplateColumns:"repeat(6, max-content)",gap:Pe.spacing(0,1)}),...ie(Pe)});function X({model:Pe}){const Ve=(0,u.of)(J),{reducer:me,expression:Se,settings:Qe}=Pe,Ue=m.Cu.find(Ke=>Ke.value===me),Ie=Qe?.mode??m.Mt.Strict,Re=m.HZ.find(Ke=>Ke.value===Ie);return(0,n.jsxs)("div",{className:Ve.container,children:[(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.reduce-condition-viewer.function",children:"Function"})}),(0,n.jsx)("div",{className:Ve.value,children:Ue?.label}),(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.reduce-condition-viewer.input",children:"Input"})}),(0,n.jsx)("div",{className:Ve.value,children:Se}),(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.reduce-condition-viewer.mode",children:"Mode"})}),(0,n.jsx)("div",{className:Ve.value,children:Re?.label})]})}const J=Pe=>({container:(0,i.css)({display:"grid",gap:Pe.spacing(.5),gridTemplateRows:"1fr 1fr",gridTemplateColumns:"repeat(4, 1fr)","> :nth-child(6)":{gridColumn:"span 3"}}),...ie(Pe)});function _({model:Pe}){const Ve=(0,u.of)(ee),{expression:me,window:Se,downsampler:Qe,upsampler:Ue}=Pe,Ie=m.PN.find(Ke=>Ke.value===Qe),Re=m.iX.find(Ke=>Ke.value===Ue);return(0,n.jsxs)("div",{className:Ve.container,children:[(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.resample-expression-viewer.input",children:"Input"})}),(0,n.jsx)("div",{className:Ve.value,children:me}),(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.resample-expression-viewer.resample-to",children:"Resample to"})}),(0,n.jsx)("div",{className:Ve.value,children:Se}),(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.resample-expression-viewer.downsample",children:"Downsample"})}),(0,n.jsx)("div",{className:Ve.value,children:Ie?.label}),(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.resample-expression-viewer.upsample",children:"Upsample"})}),(0,n.jsx)("div",{className:Ve.value,children:Re?.label})]})}const ee=Pe=>({container:(0,i.css)({display:"grid",gap:Pe.spacing(.5),gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"1fr 1fr"}),...ie(Pe)});function ae({model:Pe}){const Ve=(0,u.of)(le),{expression:me,conditions:Se}=Pe,Qe=Se&&Se[0]?.evaluator,Ue=m.zd.find(ze=>ze.value===Qe?.type),Ie=Qe?oe(Qe):!1,Re=Se&&Se[0]?.unloadEvaluator,Ke=m.zd.find(ze=>ze.value===Re?.type),Le=Re?oe(Re):!1;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:Ve.container,children:[(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.threshold-expression-viewer.input",children:"Input"})}),(0,n.jsx)("div",{className:Ve.value,children:me}),Qe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:Ve.blue,children:Ue?.label}),(0,n.jsx)("div",{className:Ve.bold,children:Ie?`(${Qe.params[0]}; ${Qe.params[1]})`:Qe.params[0]})]})]}),(0,n.jsx)("div",{className:Ve.container,children:Re&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsxs)(s.x6,{i18nKey:"alerting.threshold-expression-viewer.stop-alerting-when",children:["Stop alerting (or pending state) when"," "]})}),(0,n.jsx)("div",{className:Ve.value,children:me}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:Ve.blue,children:Ke?.label}),(0,n.jsx)("div",{className:Ve.bold,children:Le?`(${Re.params[0]}; ${Re.params[1]})`:Re.params[0]})]})]})})]})}const le=Pe=>{const{blue:Ve,bold:me,...Se}=ie(Pe);return{...Se,maxWidthContainer:(0,i.css)({maxWidth:"100%"}),container:(0,i.css)({display:"flex",gap:Pe.spacing(.5)}),blue:(0,i.css)(Ve,{margin:"auto 0"}),bold:(0,i.css)(me,{margin:"auto 0"})}};function L({model:Pe}){const Ve=(0,u.of)(le),{expression:me}=Pe;return(0,n.jsxs)("div",{className:Ve.container,children:[(0,n.jsx)("div",{className:Ve.label,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.math-expression-viewer.input",children:"Input"})}),(0,n.jsx)("div",{className:Ve.value,children:me})]})}const ie=Pe=>({blue:(0,i.css)({color:Pe.colors.text.link}),bold:(0,i.css)({fontWeight:Pe.typography.fontWeightBold}),label:(0,i.css)({display:"flex",alignItems:"center",padding:Pe.spacing(.5,1),backgroundColor:Pe.colors.background.secondary,fontSize:Pe.typography.bodySmall.fontSize,lineHeight:Pe.typography.bodySmall.lineHeight,fontWeight:Pe.typography.fontWeightBold,borderRadius:Pe.shape.radius.default}),value:(0,i.css)({padding:Pe.spacing(.5,1),border:`1px solid ${Pe.colors.border.weak}`,borderRadius:Pe.shape.radius.default})});function oe(Pe){return Pe.type===y.p.IsWithinRange||Pe.type===y.p.IsOutsideRange||Pe.type===y.p.IsOutsideRangeIncluded||Pe.type===y.p.IsWithinRangeIncluded}var ue=e(55096),ye=e(29609);function fe(Pe){if(!Pe)return[];const{namespace:Ve,rulerRule:me}=Pe,{rulesSource:Se}=Ve;if(ye.p.grafana.rule(me))return me.grafana_alert.data;if((0,B.Eb)(Se)){const Qe=Ae(Se,Pe);return[Ee(Qe,Se.uid)]}return[]}function Ee(Pe,Ve){return{refId:Pe.refId,datasourceUid:Ve,queryType:"",model:Pe,relativeTimeRange:{from:360,to:0}}}function Ae(Pe,Ve){if(!(0,B.cl)(Pe.type))throw new Error(`Query for datasource type ${Pe.type} is currently not supported by cloud alert rules.`);return{refId:"A",expr:Ve.query}}var Ge=e(54513);const Fe=({rule:Pe})=>{const{queryPreviewData:Ve,runQueries:me,isPreviewLoading:Se}=(0,Ge.Y)(),Qe=(0,a.useMemo)(()=>fe(Pe),[Pe]),{allDataSourcesAvailable:Ue}=(0,ue.g)(Qe),Ie=(0,a.useCallback)(()=>{if(Qe.length>0&&Ue){let Ke;Pe&&ye.p.grafana.rule(Pe.rulerRule)&&(Ke=Pe.rulerRule.grafana_alert.condition),me(Qe,Ke??"A")}},[Qe,Ue,Pe,me]);(0,a.useEffect)(()=>{Ue&&Ie()},[Ue,Ie]);const Re=(0,ye.YN)(Pe.group);return Se?(0,n.jsx)(s.x6,{i18nKey:"alerting.common.loading",children:"Loading..."}):(0,n.jsxs)(n.Fragment,{children:[ye.p.grafana.rule(Pe.rulerRule)&&!Re&&(0,n.jsx)(H,{rule:Pe,condition:Pe.rulerRule.grafana_alert.condition,queries:Qe,evalDataByQuery:Ve}),!ye.p.grafana.rule(Pe.rulerRule)&&!Re&&Ve&&Object.keys(Ve).length>0&&(0,n.jsx)(o.B,{direction:"column",gap:1,children:Qe.map(Ke=>(0,n.jsx)(K,{rule:Pe,refId:Ke.refId,model:Ke.model,dataSource:Object.values(d.$.datasources).find(Le=>Le.uid===Ke.datasourceUid),queryData:Ve[Ke.refId],relativeTimeRange:Ke.relativeTimeRange},Ke.refId))}),!Re&&!Ue&&(0,n.jsx)(l.F,{title:(0,s.t)("alerting.rule-view.query.datasources-na.title","Query not available"),severity:"warning",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.rule-view.query.datasources-na.description",children:"Cannot display the query preview. Some of the data sources used in the queries are not available."})})]})}},96396:(ne,j,e)=>{"use strict";e.d(j,{l:()=>p});var n=e(74848),a=e(22803),s=e(96540),d=e(93581),o=e(63142),l=e(8135),i=e(30703),c=e(66630);const p=(0,s.memo)(r=>{const v=(0,o.of)(u),{isOpen:g,onClose:E}=r;return g?(0,n.jsx)(l.N,{useCapture:!0,includeButtonPress:!1,onClick:E,children:(0,n.jsx)("div",{className:v.modal,"data-testid":"date-picker",children:(0,n.jsx)(h,{...r})})}):null});p.displayName="DatePicker";const h=(0,s.memo)(({value:r,minDate:v,maxDate:g,onChange:E})=>{const x=(0,o.of)(c.h2);return(0,n.jsx)(d.Ay,{className:x.body,tileClassName:x.title,value:r||new Date,minDate:v,maxDate:g,nextLabel:(0,n.jsx)(i.I,{name:"angle-right"}),prevLabel:(0,n.jsx)(i.I,{name:"angle-left"}),onChange:m=>{m&&!Array.isArray(m)&&E(m)},locale:"en"})});h.displayName="Body";const u=r=>({modal:(0,a.css)({zIndex:r.zIndex.modal,boxShadow:r.shadows.z3,backgroundColor:r.colors.background.primary,border:`1px solid ${r.colors.border.weak}`,borderTopLeftRadius:r.shape.radius.default,borderBottomLeftRadius:r.shape.radius.default,"button:disabled":{color:r.colors.text.disabled}})})},96453:(ne,j,e)=>{"use strict";e.d(j,{E:()=>o,F:()=>s});var n,a;class s{constructor(){this[n]={}}*iterator(){for(let i=0;i<this.length;i++)yield this.get(i)}set(i,c){throw"unsupported operation"}add(i){throw"unsupported operation"}push(...i){for(const c of i)this.add(c);return this.length}[(a=Symbol.iterator,n=Symbol.unscopables,a)](){return this.iterator()}forEach(i){return o(this).forEach(i)}map(i){return o(this).map(i)}filter(i){return o(this).filter(i)}at(i){return this.get(i)}toArray(){const i=new Array(this.length);for(let c=0;c<this.length;c++)i[c]=this.get(c);return i}join(i){return this.toArray().join(i)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...i){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(i){throw new Error("Method not implemented.")}splice(i,c,...p){throw new Error("Method not implemented.")}unshift(...i){throw new Error("Method not implemented.")}fill(i,c,p){throw new Error("Method not implemented.")}copyWithin(i,c,p){throw new Error("Method not implemented.")}slice(i,c){return this.toArray().slice(i,c)}indexOf(i,c){return this.toArray().indexOf(i,c)}lastIndexOf(i,c){return this.toArray().lastIndexOf(i,c)}every(i,c){return this.toArray().every(i,c)}some(i,c){return this.toArray().some(i,c)}reduce(i,c){throw new Error("Method not implemented.")}reduceRight(i,c){throw new Error("Method not implemented.")}find(i,c){return this.toArray().find(i,c)}findIndex(i,c){return this.toArray().findIndex(i,c)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(i,c){return this.toArray().includes(i,c)}flatMap(i,c){return this.toArray().flatMap(i,c)}flat(i){throw new Error("Method not implemented.")}}const d=[];function o(l){return{*[Symbol.iterator](){for(let i=0;i<l.length;i++)yield l.get(i)},forEach(i){for(let c=0;c<l.length;c++)i(l.get(c),c,d)},map(i){const c=[];for(let p=0;p<l.length;p++)c.push(i(l.get(p),p,d));return c},filter(i){const c=[];let p=0;for(const h of this)i(h,p++,d)&&c.push(h);return c}}}},96691:(ne,j,e)=>{"use strict";e.d(j,{MK:()=>p,Ob:()=>u,XF:()=>c,mN:()=>h});var n=e(74848),a=e(96540),s=e(92745),d=e(68079),o=e(31286);class l{constructor(E){this.keyPath=E,this.matchFound=!1}matches(E){return/^\d+$/.test(this.keyPath)?`panel-${this.keyPath}`===E.state.key?(this.matchFound=!0,!0):!1:this.keyPath===E.getPathId()?(this.matchFound=!0,!0):!1}}const i=a.createContext(null);function c(g){return a.useMemo(()=>g?new l(g):null,[g])}function p(){return(0,a.useContext)(i)}function h(g,E){const x=[];for(const m of E)g.matches(m)&&x.push((0,n.jsx)(m.Component,{model:m},m.state.key));return(0,n.jsx)(n.Fragment,{children:x})}function u({children:g,value:E,singleMatch:x,dashboard:m}){return(0,n.jsxs)(i.Provider,{value:E,children:[g,(0,n.jsx)(r,{singleMatch:x,dashboard:m})]})}function r({singleMatch:g,dashboard:E}){const x=p(),[m,y]=(0,a.useState)({matchFound:!1,isLoading:!0});return(0,a.useEffect)(()=>{const b=setInterval(()=>{y({matchFound:x.matchFound,isLoading:v(E)})},500);return()=>clearInterval(b)},[x,E]),m.matchFound||x.matchFound?null:m.isLoading?(0,n.jsx)(d.y,{}):(0,n.jsxs)(o.a,{backgroundColor:"primary",borderColor:"weak",borderStyle:"solid",padding:2,borderRadius:"default",display:"flex",justifyContent:"center",alignItems:"center",children:[g&&(0,n.jsx)(s.x6,{i18nKey:"dashboard.view-panel.not-found",children:"Panel not found"}),!g&&(0,n.jsx)(s.x6,{i18nKey:"dashboard.search-panel.no-match",children:"No panels matching"})]})}function v(g){const E=g.state.$variables;return!E||!E.isActive?!0:E.state.variables.some(x=>x.state.loading)}},96733:(ne,j,e)=>{"use strict";e.d(j,{t:()=>d});var n=e(74848),a=e(92745),s=e(34999);function d({noRepository:o,isReadOnlyRepo:l,readOnlyMessage:i}){return o?(0,n.jsx)(s.F,{title:(0,a.t)("browse-dashboards.bulk-move-resources-form.error.repository-not-found-title","Repository not found"),children:(0,n.jsx)(a.x6,{i18nKey:"browse-dashboards.bulk-move-resources-form.error.repository-not-found-message",children:"The repository for the selected folder could not be found. Please ensure that the folder is provisioned correctly."})}):l?(0,n.jsx)(s.F,{title:(0,a.t)("browse-dashboards.bulk-move-resources-form.error.read-only-title","This repository is read only"),children:i?(0,a.t)("browse-dashboards.bulk-move-resources-form.error.read-only-saving-message","Repository is read-only and provisioned in git. {{readOnlyMessage}}",{readOnlyMessage:i}):(0,a.t)("browse-dashboards.bulk-move-resources-form.error.read-only-message","If you have direct access to the target, please make modifications directly in the target repository.")}):null}},96784:(ne,j,e)=>{"use strict";e.d(j,{dI:()=>m,i7:()=>y});var n=e(1932),a=e(2543),s=e.n(a),d=e(96540),o=e(78282),l=e(24619),i=e(74268),c=e(56369),p=e(24610),h=e(95443),u=e(52161),r=e(20386),v=e(63895),g=e(29609),E=e(23265),x=e(20962);function m(){const[I,B]=(0,x.l)(),U=I.get("search")??"",W=(0,d.useMemo)(()=>(0,c.XY)(U),[U]),V=(0,d.useMemo)(()=>Object.values(W).some(F=>!(0,a.isEmpty)(F)),[W]),z=(0,d.useMemo)(()=>(0,a.chain)(W).omitBy(a.isEmpty).keys().filter(M).value(),[W]),R=(0,d.useCallback)(F=>{const G=(0,c.kL)(U,F);B({search:G})},[U,B]),O=(0,d.useCallback)(F=>{B({search:F})},[B]);(0,d.useEffect)(()=>{const F={dataSource:I.get("dataSource")??void 0,alertState:I.get("alertState")??void 0,ruleType:I.get("ruleType")??void 0,labels:(0,v.S6)(I.get("queryString")??"").map(p.MU)};Object.values(F).some(H=>!(0,a.isEmpty)(H))&&(B({dataSource:void 0,alertState:void 0,ruleType:void 0,queryString:void 0}),R((0,n.jM)(W,H=>{if(H.dataSourceNames??=F.dataSource?[F.dataSource]:[],F.alertState&&(0,l.Si)(F.alertState)&&(H.ruleState??=F.alertState),F.ruleType&&(0,g.nf)(F.ruleType)&&(H.ruleType??=F.ruleType),H.labels.length===0&&F.labels.length>0){const K=F.labels.map(({name:w,operator:Q,value:k})=>`${w}${Q}${k}`);H.labels.push(...K)}})))},[I,R,W,B]);const N=(0,d.useCallback)(()=>{B({search:void 0})},[B]);return{filterState:W,hasActiveFilters:V,searchQuery:U,setSearchQuery:O,updateFilters:R,clearAll:N,activeFilters:z}}const y=(I,B)=>{const U=(0,d.useDeferredValue)(I),W=(0,d.useDeferredValue)(B);return(0,d.useMemo)(()=>{const V=b(U,W);return V.forEach(z=>{z.groups.forEach(R=>{R.rules.forEach(O=>{g.R$.alertingRule(O.promRule)&&(O.instanceTotals=(0,E.Ug)(O.promRule),O.filteredInstanceTotals=(0,E.NW)(O.promRule))}),R.totals=(0,E.Tj)({rules:R.rules.map(O=>O.promRule).filter(O=>!!O)})})}),V},[U,W])},b=(I,B={dataSourceNames:[],labels:[],freeFormWords:[]})=>{let U=I;const W=B.dataSourceNames;W.length&&(U=U.filter(({rulesSource:R})=>(0,u.Eb)(R)?W.includes(R.name):!0));const V=B.namespace;V&&(U=(0,r.t)(U,R=>R.name,V));const z=[];try{U.reduce(D(B),[]).forEach(O=>{z.push(O)})}catch(R){(0,i.vV)(new Error("Failed to filter rules",{cause:R}),{search:JSON.stringify(B)})}return z},D=I=>(B,U)=>{const W=I.groupName;let V=U.groups;return W&&(V=(0,r.t)(V,z=>z.name,W)),V=V.reduce(f(I),[]),V.length&&B.push({...U,groups:V}),B},f=I=>{const B=I.ruleName??I.freeFormWords.join(" ");return(U,W)=>{let V=W.rules;if(B&&(V=(0,r.t)(V,z=>z.name,B)),I.ruleSource){const z=I.ruleSource===c.Eg.Grafana;V=V.filter(R=>{const O=!!(R.rulerRule&&g.p.grafana.rule(R.rulerRule));return z&&O})}return V=V.filter(z=>{const R=z.promRule,O=(0,a.chain)(I).pick(["ruleType","dataSourceNames","ruleHealth","labels","ruleState","dashboardUid","plugins","contactPoint","ruleSource"]).omitBy(a.isEmpty).mapValues(()=>!1).value();if("ruleType"in O&&I.ruleType===R?.type&&(O.ruleType=!0),"plugins"in O&&I.plugins==="hide"&&(O.plugins=z.rulerRule&&!(0,g.Tm)(z.rulerRule)),"contactPoint"in O){const N=I.contactPoint;g.p.grafana.rule(z.rulerRule)&&z.rulerRule.grafana_alert.notification_settings?.receiver===N&&(O.contactPoint=!0)}if("dataSourceNames"in O&&(g.p.grafana.rule(z.rulerRule)?P(z.rulerRule,I)&&(O.dataSourceNames=!0):O.dataSourceNames=!0),"ruleHealth"in I&&R){const N=(0,g.f6)(R.health);I.ruleHealth===N&&(O.ruleHealth=!0)}if("labels"in O){const N=(0,a.compact)(I.labels.map(C)),F=N.length>0&&(0,p.Av)(z.labels,N),G=N.length>0&&R&&R.type===l.JS.Alerting&&R.alerts&&R.alerts.some(H=>(0,p.Av)(H.labels,N));(F||G)&&(O.labels=!0)}if("ruleState"in O){const N=z.promRule;N&&g.R$.alertingRule(N)&&N.state===I.ruleState&&(O.ruleState=!0)}return"dashboardUid"in O&&z.annotations[h.YH.dashboardUID]===I.dashboardUid&&(O.dashboardUid=!0),Object.values(O).every(N=>N===!0)}),V.length&&U.push({...W,rules:V}),U}};function C(I){try{return(0,v.qR)(I)}catch{return{name:I,value:"",isRegex:!0,isEqual:!0}}}const P=(I,B)=>B.dataSourceNames?.length?!!I.grafana_alert.data.find(U=>{if(!U.datasourceUid)return!1;const W=(0,o.l)().getInstanceSettings(U.datasourceUid);return W?.name&&B?.dataSourceNames?.includes(W.name)}):!0,T=new Set(["freeFormWords","namespace","groupName","ruleName","ruleState","ruleType","dataSourceNames","labels","ruleHealth","dashboardUid","plugins","contactPoint","ruleSource"]),M=I=>T.has(I)},96822:(ne,j,e)=>{"use strict";e.d(j,{e:()=>x});var n=e(74848),a=e(96540),s=e(92745),d=e(45861),o=e(22787),l=e(22803),i=e(63142),c=e(37386),p=e(63527),h=e(21285),u=e(81917);const r=(0,a.memo)(({index:m,value:y,onChange:b,suggestions:D,isLast:f,showOneClick:C=!1})=>{const P=(0,i.of)(v),T=(U,W)=>{b(m,{...y,url:U},W)},M=U=>{b(m,{...y,title:U.target.value})},I=()=>{b(m,{...y,targetBlank:!y.targetBlank})},B=()=>{b(m,{...y,oneClick:!y.oneClick})};return(0,n.jsxs)("div",{className:P.listItem,children:[(0,n.jsx)(c.D,{label:(0,s.t)("grafana-ui.data-link-editor.title-label","Title"),children:(0,n.jsx)(p.p,{id:"link-title",value:y.title,onChange:M,placeholder:(0,s.t)("grafana-ui.data-link-editor.title-placeholder","Show details")})}),(0,n.jsx)(c.D,{label:(0,s.t)("grafana-ui.data-link-editor.url-label","URL"),children:(0,n.jsx)(u.l,{value:y.url,onChange:T,suggestions:D})}),(0,n.jsx)(c.D,{label:(0,s.t)("grafana-ui.data-link-editor.new-tab-label","Open in new tab"),children:(0,n.jsx)(h.d,{id:"new-tab-toggle",value:y.targetBlank||!1,onChange:I})}),C&&(0,n.jsx)(c.D,{label:(0,s.t)("grafana-ui.data-link-inline-editor.one-click","One click"),description:(0,s.t)("grafana-ui.data-link-editor-modal.one-click-description","Only one link can have one click enabled at a time"),children:(0,n.jsx)(h.d,{id:"one-click-toggle",value:y.oneClick||!1,onChange:B})}),f&&(0,n.jsx)(s.x6,{i18nKey:"grafana-ui.data-link-editor.info",className:P.infoText,children:"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."})]})});r.displayName="DataLinkEditor";const v=m=>({listItem:(0,l.css)({marginBottom:m.spacing()}),infoText:(0,l.css)({paddingBottom:m.spacing(2),marginLeft:"66px",color:m.colors.text.secondary})}),g=({link:m,index:y,onSave:b,onCancel:D,getSuggestions:f,showOneClick:C})=>{const[P,T]=(0,a.useState)(m);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{value:P,index:y,isLast:!1,onChange:(M,I)=>{T(I)},suggestions:f(),showOneClick:C}),(0,n.jsxs)(o.a.ButtonRow,{children:[(0,n.jsx)(d.$n,{variant:"secondary",onClick:()=>D(y),fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"grafana-ui.data-link-editor-modal.cancel",children:"Cancel"})}),(0,n.jsx)(d.$n,{onClick:()=>{b(y,P)},disabled:P.title.trim()===""||P.url.trim()==="",children:(0,n.jsx)(s.x6,{i18nKey:"grafana-ui.data-link-editor-modal.save",children:"Save"})})]})]})};var E=e(73628);const x=({links:m,getSuggestions:y,showOneClick:b=!1,...D})=>(0,n.jsx)(E.J,{type:"link",items:m,...D,children:(f,C,P,T)=>(0,n.jsx)(g,{index:C,link:f??{title:"",url:""},data:D.data,onSave:P,onCancel:T,getSuggestions:y,showOneClick:b})})},97095:(ne,j,e)=>{"use strict";e.d(j,{C:()=>d});var n=e(74848),a=e(22803),s=e(63142);const d=({children:l,className:i,...c})=>{const p=(0,s.of)(o);return(0,n.jsx)("div",{className:(0,a.cx)(p.container,i),...c,children:l})},o=l=>({container:(0,a.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:l.spacing(.5)})})},97335:(ne,j,e)=>{"use strict";e.d(j,{o:()=>ye});var n=e(96540),a=e(92745),s=e(44248),d=e(45229),o=e(95943),l=e(29043),i=e(77197),c=e(87745),p=e(6048),h=e(76584),u=e(67350),r=e(92119),v=e(8835),g=e(48492),E=e(41667),x=e(74848),m=e(51898),y=e(37386),b=e(63527),D=e(21285),f=e(34999),C=e(89640),P=e(25797),T=e(51156),M=e(31819),I=e(9931),B=e(18615),U=e(78725),W=e(33143),V=e(27160),z=e(20246);function R(fe){const Ee=this,{layout:Ae}=Ee.useState(),Ge=(0,n.useMemo)(()=>new P.C({title:"",id:"dash-row-edit"}).addItem(new T.v({title:"",id:"dash-row-title",skipField:!0,render:()=>(0,x.jsx)(O,{row:Ee,isNewElement:fe})})).addItem(new T.v({title:(0,a.t)("dashboard.rows-layout.row-options.row.fill-screen","Fill screen"),id:"dash-row-fill-screen",render:Se=>(0,x.jsx)(F,{id:Se.props.id,row:Ee})})).addItem(new T.v({title:(0,a.t)("dashboard.rows-layout.row-options.row.hide-header","Hide row header"),id:"dash-row-hide-header",render:Se=>(0,x.jsx)(N,{id:Se.props.id,row:Ee})})),[fe,Ee]),Fe=(0,n.useMemo)(()=>new P.C({title:(0,a.t)("dashboard.rows-layout.row-options.repeat.title","Repeat options"),id:"dash-row-repeat",isOpenDefault:!1}).addItem(new T.v({title:(0,a.t)("dashboard.rows-layout.row-options.repeat.variable.title","Repeat by variable"),id:"dash-row-repeat-by-variable",description:(0,a.t)("dashboard.rows-layout.row-options.repeat.variable.description","Repeat this row for each value in the selected variable."),render:Se=>(0,x.jsx)(G,{id:Se.props.id,row:Ee})})),[Ee]),Pe=(0,V.W)(Ae),Ve=[Ge,...Pe,Fe],me=(0,n.useMemo)(()=>(0,U.h)(Ee.state.conditionalRendering),[Ee]);return me&&Ve.push(me),Ve}function O({row:fe,isNewElement:Ee}){const{title:Ae}=fe.useState(),Ge=(0,n.useRef)(""),Fe=(0,z.z4)({autoFocus:Ee}),Pe=fe.hasUniqueTitle();return(0,x.jsx)(y.D,{label:(0,a.t)("dashboard.rows-layout.row-options.row.title","Title"),invalid:!Pe,error:Pe?void 0:(0,a.t)("dashboard.rows-layout.row-options.title-not-unique","Title should be unique"),children:(0,x.jsx)(b.p,{id:(0,n.useId)(),ref:Fe,title:(0,a.t)("dashboard.rows-layout.row-options.title-option","Title"),value:Ae,onFocus:()=>Ge.current=Ae||"",onBlur:()=>H(fe,Ae||"",Ge.current||""),onChange:Ve=>fe.onChangeTitle(Ve.currentTarget.value)})})}function N({row:fe,id:Ee}){const{hideHeader:Ae=!1}=fe.useState();return(0,x.jsx)(D.d,{id:Ee,value:Ae,onChange:()=>fe.onHeaderHiddenToggle()})}function F({row:fe,id:Ee}){const{fillScreen:Ae}=fe.useState();return(0,x.jsx)(D.d,{id:Ee,value:Ae,onChange:()=>fe.onChangeFillScreen(!Ae)})}function G({row:fe,id:Ee}){const{layout:Ae}=fe.useState(),Ge=(0,r.MZ)(fe),Fe=Ae.getVizPanels().some(Pe=>{const Ve=(0,r.un)(Pe);return Ve?.state.datasource?.uid===I.K||Ve?.state.datasource?.uid===B.uv&&Ve?.state.queries.some(me=>me.datasource?.uid===I.K)});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M.U,{id:Ee,sceneContext:Ge,repeat:fe.state.repeatByVariable,onChange:Pe=>fe.onChangeRepeat(Pe)}),Fe?(0,x.jsxs)(f.F,{"data-testid":m.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0,children:[(0,x.jsx)("p",{children:(0,x.jsxs)(a.x6,{i18nKey:"dashboard.rows-layout.row.repeat.warning",children:["Panels in this row use the ",{SHARED_DASHBOARD_QUERY:I.K}," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."]})}),(0,x.jsx)(C.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows",children:(0,x.jsx)(a.x6,{i18nKey:"dashboard.rows-layout.row.repeat.learn-more",children:"Learn more"})})]}):void 0]})}function H(fe,Ee,Ae){Ee!==Ae&&W.cc.edit({description:(0,a.t)("dashboard.edit-actions.row-title","Change row title"),source:fe,perform:()=>fe.onChangeTitle(Ee),undo:()=>fe.onChangeTitle(Ae)})}var K=e(22803),w=e(89332),Q=e(56887),k=e(63142),te=e(45861),q=e(36324),se=e(45967),re=e(30703),Y=e(86292),X=e(3371),J=e(11534),_=e(96691);function ee({model:fe}){const{layout:Ee,collapse:Ae,fillScreen:Ge,hideHeader:Fe,isDropTarget:Pe,key:Ve}=fe.useState(),me=(0,X.bn)(fe),{isEditing:Se}=(0,r.TN)(fe),[Qe,Ue,Ie]=(0,Y.H)(fe),{isSelected:Re,onSelect:Ke,isSelectable:Le}=(0,Q.y)(Ve),ze=(0,r.hg)(fe),{rows:Be}=fe.getParentLayout().useState(),$e=(0,k.of)(ae),Ye=(0,k.of)(te.my),de=fe.parent?.parent instanceof J.H$,ge=(0,q.C)(),pe=(0,_.MK)(),De=Be.findIndex(ot=>ot===fe),Me=!Ae&&Ge,be=Qe&&!Se,[Oe,Ne]=(0,n.useState)(!1),We=(0,n.useCallback)(()=>Ne(!0),[]),qe=(0,n.useCallback)(()=>Ne(!1),[]),st=!me&&Se;if(be)return null;if(pe)return(0,x.jsx)(Ee.Component,{model:Ee});const rt=(0,x.jsxs)("span",{className:(0,K.cx)($e.rowTitle,Fe&&$e.rowTitleHidden,!de&&$e.rowTitleNested,Ae&&$e.rowTitleCollapsed),children:[!fe.hasUniqueTitle()&&(0,x.jsx)(se.m,{content:(0,a.t)("dashboard.rows-layout.row-warning.title-not-unique","This title is not unique"),children:(0,x.jsx)(re.I,{name:"exclamation-triangle"})}),ze,Fe&&(0,x.jsx)(se.m,{content:(0,a.t)("dashboard.rows-layout.header-hidden-tooltip","Row header only visible in edit mode"),children:(0,x.jsx)(re.I,{name:"eye-slash"})})]});return(0,x.jsx)(w.sx,{draggableId:Ve,index:De,isDragDisabled:!st,children:(ot,mt)=>(0,x.jsxs)("div",{ref:pt=>{ot.innerRef(pt),fe.containerRef.current=pt},"data-dashboard-drop-target-key":fe.state.key,className:(0,K.cx)($e.wrapper,!Ae&&$e.wrapperNotCollapsed,mt.isDragging&&$e.dragging,Ae&&$e.wrapperCollapsed,Me&&$e.wrapperGrow,Ue,!me&&Re&&"dashboard-selected-element",!me&&!Re&&Oe&&"dashboard-selectable-element",Pe&&"dashboard-drop-target"),onPointerDown:pt=>{pt.stopPropagation(),ge.set(pt)},onPointerUp:pt=>{if(Re&&pt.target instanceof Element&&pt.target.closest("button")){pt.stopPropagation();return}ge.check(pt)||setTimeout(()=>Ke?.(pt))},"data-testid":m.Tp.components.DashboardRow.wrapper(ze),...ot.draggableProps,children:[(!Fe||Se)&&(0,x.jsxs)("div",{className:(0,K.cx)($e.rowHeader,"dashboard-row-header"),onMouseEnter:Le?We:void 0,onMouseLeave:Le?qe:void 0,...ot.dragHandleProps,children:[(0,x.jsxs)("button",{onClick:()=>fe.onCollapseToggle(),className:(0,K.cx)(Ye,$e.rowTitleButton),"aria-label":Ae?(0,a.t)("dashboard.rows-layout.row.expand","Expand row"):(0,a.t)("dashboard.rows-layout.row.collapse","Collapse row"),"data-testid":m.Tp.components.DashboardRow.title(ze),children:[(0,x.jsx)(re.I,{name:Ae?"angle-right":"angle-down"}),!Se&&rt]}),Se&&rt,st&&(0,x.jsx)(re.I,{name:"draggabledots",className:"dashboard-row-header-drag-handle"})]}),!Ae&&(0,x.jsx)(Ee.Component,{model:Ee}),Ie]})},Ve)}function ae(fe){return{rowHeader:(0,K.css)({display:"flex",gap:fe.spacing(1),padding:fe.spacing(.5,.5,.5,0),alignItems:"center",justifyContent:"space-between",marginBottom:fe.spacing(1),"& .dashboard-row-header-drag-handle":(0,K.css)({opacity:0,[fe.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.25s"}}),"&:hover":(0,K.css)({"& .dashboard-row-header-drag-handle":(0,K.css)({opacity:1})})}),rowTitleButton:(0,K.css)({display:"flex",alignItems:"center",cursor:"pointer",background:"transparent",border:"none",minWidth:0,gap:fe.spacing(1)}),rowTitle:(0,K.css)({display:"flex",alignItems:"center",gap:fe.spacing(2),...fe.typography.h5,fontWeight:fe.typography.fontWeightMedium,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",flexGrow:1,minWidth:0}),rowTitleHidden:(0,K.css)({textDecoration:"line-through",opacity:.6,"&:hover":(0,K.css)({opacity:1})}),rowTitleNested:(0,K.css)({fontSize:fe.typography.body.fontSize,fontWeight:fe.typography.fontWeightRegular}),rowTitleCollapsed:(0,K.css)({color:fe.colors.text.secondary}),wrapper:(0,K.css)({display:"flex",flexDirection:"column",minHeight:fe.spacing(2.75+1+1+.125)}),wrapperNotCollapsed:(0,K.css)({"> div:nth-child(2)":{marginLeft:fe.spacing(3),position:"relative",width:"auto","&:before":{content:'""',position:"absolute",top:"-8px",bottom:0,left:"-16px",width:"1px",backgroundColor:fe.colors.border.weak}}}),dragging:(0,K.css)({cursor:"move"}),wrapperGrow:(0,K.css)({flexGrow:1}),wrapperCollapsed:(0,K.css)({flexGrow:0,borderBottom:`1px solid ${fe.colors.border.weak}`,minHeight:"unset",".dashboard-row-header":{marginBottom:fe.spacing(0)}}),rowActions:(0,K.css)({display:"flex",opacity:0}),checkboxWrapper:(0,K.css)({display:"flex",alignItems:"center",paddingLeft:fe.spacing(1)})}}var le=e(32635);function L(fe){const Ee="rows-options";return[new P.C({title:"",id:Ee}).addItem(new T.v({title:(0,a.t)("dashboard.edit-pane.row.header.title","Row header"),id:`${Ee}-row-header`,render:()=>(0,x.jsx)(ie,{model:fe})}))]}function ie({model:fe}){const Ee=fe.getRows();let Ae=!1,Ge=!1;for(let Fe=0;Fe<Ee.length;Fe++){const{hideHeader:Pe}=Ee[Fe].useState(),Ve=Ee[Fe-1];Ge=Ge||Ve&&!!Ve.state.hideHeader!=!!Pe,Ae=Ae||!!Pe}return(0,x.jsx)(le.S,{label:(0,a.t)("dashboard.edit-pane.row.header.hide","Hide"),value:Ae,indeterminate:Ge,onChange:()=>fe.onHeaderHiddenToggle(Ae,Ge)})}class oe{constructor(Ee){this._rows=Ee,this.isEditableDashboardElement=!0}getEditableElementInfo(){return{typeName:(0,a.t)("dashboard.edit-pane.elements.rows","Rows"),icon:"folder",instanceName:""}}useEditPaneOptions(){return L(this)}getRows(){return this._rows}onDelete(){this._rows.forEach(Ee=>Ee.onDelete())}onHeaderHiddenToggle(Ee,Ae){this._rows.forEach(Ge=>Ge.onHeaderHiddenToggle(Ae?!0:!Ee))}}var ue=e(97883);class ye extends s.Bs{constructor(Ee){super({...Ee,title:Ee?.title??(0,a.t)("dashboard.rows-layout.row.new","New row"),layout:Ee?.layout??v.X2.createEmpty(),conditionalRendering:Ee?.conditionalRendering??p.M.createEmpty()}),this._variableDependency=new s.Sh(this,{statePaths:["title"]}),this.isEditableDashboardElement=!0,this.isDashboardDropTarget=!0,this.containerRef=n.createRef(),this.useEditPaneOptions=R.bind(this),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=ee}_activationHandler(){const Ee=this.state.conditionalRendering?.activate();return()=>{Ee&&Ee()}}getEditableElementInfo(){return{typeName:(0,a.t)("dashboard.edit-pane.elements.row","Row"),instanceName:s.jh.interpolate(this,this.state.title,void 0,"text"),icon:"list-ul"}}getOutlineChildren(){return this.state.layout.getOutlineChildren()}getLayout(){return this.state.layout}getSlug(){return i.A.slugifyForUrl(s.jh.interpolate(this,this.state.title??"Row"))}switchLayout(Ee){this.setState({layout:Ee})}onDelete(){this.getParentLayout().removeRow(this)}onConfirmDelete(){if(this.getLayout().getVizPanels().length===0){this.onDelete();return}if(this.getParentLayout().shouldUngroup()){this.onDelete();return}d.A.publish(new c.bY({title:(0,a.t)("dashboard.rows-layout.delete-row-title","Delete row?"),text:(0,a.t)("dashboard.rows-layout.delete-row-text","Deleting this row will also remove all panels. Are you sure you want to continue?"),yesText:(0,a.t)("dashboard.rows-layout.delete-row-yes","Delete"),onConfirm:()=>{this.onDelete()}}))}createMultiSelectedElement(Ee){return new oe(Ee.filter(Ae=>Ae instanceof ye))}onDuplicate(){this.getParentLayout().duplicateRow(this)}duplicate(){return this.clone({key:void 0,layout:this.getLayout().duplicate()})}serialize(){return(0,h.HQ)(this)}onCopy(){const Ee=(0,u.IC)(this.getLayout(),(0,r.YQ)(this));(0,g.G2)(),l.A.set(o.rt,JSON.stringify({elements:Ee,row:this.serialize()}))}setIsDropTarget(Ee){!!this.state.isDropTarget!==Ee&&this.setState({isDropTarget:Ee})}draggedPanelOutside(Ee){this.getLayout().removePanel?.(Ee),this.setIsDropTarget(!1)}draggedPanelInside(Ee){Ee.clearParent(),this.getLayout().addPanel(Ee),this.setIsDropTarget(!1)}onChangeTitle(Ee){this.setState({title:Ee})}onChangeName(Ee){this.onChangeTitle(Ee)}onHeaderHiddenToggle(Ee=!this.state.hideHeader){this.setState({hideHeader:Ee})}onChangeFillScreen(Ee){this.setState({fillScreen:Ee})}onChangeRepeat(Ee){Ee?this.setState({repeatByVariable:Ee}):this.setState({repeatedRows:void 0,$variables:void 0,repeatByVariable:void 0})}onCollapseToggle(){this.setState({collapse:!this.state.collapse})}getParentLayout(){return s.jh.getAncestor(this,ue.V)}scrollIntoView(){(0,E.d)(this,this.containerRef)}getCollapsedState(){return this.state.collapse??!1}setCollapsedState(Ee){this.setState({collapse:Ee})}hasUniqueTitle(){return!this.getParentLayout().duplicateTitles().has(this.state.title)}}},97375:(ne,j,e)=>{"use strict";e.d(j,{t:()=>i});var n=e(74848),a=e(96540),s=e(29647),d=e(51898),o=e(87063),l=e(15245);const i=a.memo(({x:c,y:p,onClose:h,focusOnOpen:u=!0,renderMenuItems:r,renderHeader:v})=>{const g=(0,a.useRef)(null),[E,x]=(0,a.useState)({});(0,a.useLayoutEffect)(()=>{const f=g.current;if(f){const C=f.getBoundingClientRect(),P=5,T={right:window.innerWidth<c+C.width,bottom:window.innerHeight<p+C.height+P};x({position:"fixed",left:T.right?c-C.width-P:c-P,top:Math.max(0,T.bottom?p-C.height-P:p+P)})}},[c,p]),(0,s.A)(g,()=>{h?.()});const m=v?.(),y=r?.(),b=f=>{u&&f(0)},D=f=>{f.key==="Escape"&&(f.preventDefault(),f.stopPropagation(),h?.())};return(0,n.jsx)(l.ZL,{children:(0,n.jsx)(o.W,{header:m,ref:g,style:E,ariaLabel:d.Tp.components.Menu.MenuComponent("Context"),onOpen:b,onClick:h,onKeyDown:D,children:y})})});i.displayName="ContextMenu"},97474:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>s,QB:()=>d});var n=e(739);const a="12.3.0",s={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:n.wV.Auto,showValue:n.yL.Auto,stacking:n.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},d={fillOpacity:80,gradientMode:n.on.None,lineWidth:1}},97486:(ne,j,e)=>{"use strict";e.d(j,{k:()=>P});var n=e(74848),a=e(2543),s=e(96540),d=e(37297),o=e(64394),l=e(60519),i=e(16515),c=e(84229),p=e(60311),h=e(739),u=e(63142),r=e(64400),v=e(12241),g=e(78013),E=e(89381),x=e(1932);function m(T,M,I){return(0,x.jM)(T,B=>{B.defaults.custom===void 0&&(B.defaults.custom={}),B.defaults.max=I;const{custom:U}=B.defaults;switch(U.stacking===void 0&&(U.stacking={group:"A"}),M){case"lines":U.drawStyle=h.GR.Line,U.stacking.mode=h.gs.None,U.fillOpacity=0;break;case"bars":U.drawStyle=h.GR.Bars,U.stacking.mode=h.gs.None,U.fillOpacity=100;break;case"points":U.drawStyle=h.GR.Points,U.stacking.mode=h.gs.None,U.fillOpacity=0;break;case"stacked_lines":U.drawStyle=h.GR.Line,U.stacking.mode=h.gs.Normal,U.fillOpacity=100,U.axisSoftMin=0;break;case"stacked_bars":U.drawStyle=h.GR.Bars,U.stacking.mode=h.gs.Normal,U.fillOpacity=100,U.axisSoftMin=0;break;default:{const W=M;throw new Error(`Invalid graph-style: ${W}`)}}})}function y(T,M,I){return(0,x.jM)(T,B=>{B.defaults.thresholds=I,B.defaults.custom=B.defaults.custom??{},B.defaults.custom.thresholdsStyle=M})}var b=e(56737),D=e(84596),f=e(76732);function C(T){const[M,{inc:I}]=(0,b.A)(1),B=(0,D.A)(T);return(0,s.useMemo)(()=>{B&&!(0,f.J3)(T,B,f.bW)&&I()},[T,B,I]),M}function P({data:T,height:M,width:I,timeZone:B,timeRange:U,onChangeTime:W,loadingState:V,annotations:z,onHiddenSeriesChanged:R,splitOpenFn:O,graphStyle:N,tooltipDisplayMode:F=h.$N.Single,anchorToZero:G=!1,yAxisMaximum:H,thresholdsConfig:K,thresholdsStyle:w,eventBus:Q,vizLegendOverrides:k,toggleLegendRef:te}){const q=(0,u.$j)(),se=(0,s.useMemo)(()=>(0,d.O)((0,v.V)(v.S),"Explore"),[]),[re,Y]=(0,s.useState)({defaults:{min:G?0:void 0,max:H||void 0,unit:"short",color:{mode:o.Y.PaletteClassic},custom:{drawStyle:h.GR.Line,fillOpacity:0,pointSize:5}},overrides:[]}),X=(0,s.useMemo)(()=>{const ue=m(re,N,H);return y(ue,w,K)},[re,N,H,K,w]),J=(0,E.h)(O,U),_=(0,s.useMemo)(()=>(0,l.we)({fieldConfig:X,data:T,timeZone:B,replaceVariables:ue=>ue,theme:q,fieldConfigRegistry:se}),[se,T,B,q,X]),ee=(0,s.useMemo)(()=>(0,l.we)({fieldConfig:{defaults:{},overrides:[]},data:z,timeZone:B,replaceVariables:ue=>ue,theme:q,dataLinkPostProcessor:J}),[z,B,q,J]),ae=C(_),le=(0,s.useRef)(void 0);(0,s.useEffect)(()=>{if(!R)return;const ue=[];_.forEach(ye=>{ye.fields.map(Ee=>Ee.config?.custom?.hideFrom?.viz).every(a.identity)&&ue.push((0,i.Ri)(ye))}),(le.current===void 0||!(0,a.isEqual)((0,a.sortBy)(ue),(0,a.sortBy)(le.current)))&&(le.current=ue,R(ue))},[_,R]);const L={eventsScope:"explore",eventBus:Q,sync:()=>c.y.Off,onToggleSeriesVisibility(ue,ye){Y((0,g.M)(ue,ye,re,T))}};function ie(ue,ye){if(!ue){Y({...re,overrides:[]});return}Y((0,g.M)(ue,ye,re,T))}te&&(te.current=ie);const oe=(0,s.useMemo)(()=>({tooltip:{mode:F,sort:h.xB.None},legend:{displayMode:h.lm.List,showLegend:!0,placement:"bottom",calcs:[],...k}}),[F,k]);return(0,n.jsx)(l.JC.Provider,{value:{dataLinkPostProcessor:J},children:(0,n.jsx)(r.XF,{value:L,children:(0,n.jsx)(p.m,{data:{series:_,timeRange:U,state:V,annotations:ee,structureRev:ae},pluginId:"timeseries",title:"",width:I,height:M,onChangeTimeRange:W,timeZone:B,options:oe})})})}},97507:(ne,j,e)=>{"use strict";e.d(j,{dK:()=>K,Kt:()=>k,$x:()=>w,om:()=>H,Z3:()=>N,Pm:()=>te,cB:()=>q});var n=e(96540),a=e(5709);const s=["Receiver"],o=a.H.enhanceEndpoints({addTagTypes:s}).injectEndpoints({endpoints:se=>({listNamespacedReceiver:se.query({query:re=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${re.namespace}/receivers`,params:{pretty:re.pretty,allowWatchBookmarks:re.allowWatchBookmarks,continue:re.continue,fieldSelector:re.fieldSelector,labelSelector:re.labelSelector,limit:re.limit,resourceVersion:re.resourceVersion,resourceVersionMatch:re.resourceVersionMatch,sendInitialEvents:re.sendInitialEvents,timeoutSeconds:re.timeoutSeconds,watch:re.watch}}),providesTags:["Receiver"]}),createNamespacedReceiver:se.mutation({query:re=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${re.namespace}/receivers`,method:"POST",body:re.comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1Receiver,params:{pretty:re.pretty,dryRun:re.dryRun,fieldManager:re.fieldManager,fieldValidation:re.fieldValidation}}),invalidatesTags:["Receiver"]}),readNamespacedReceiver:se.query({query:re=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${re.namespace}/receivers/${re.name}`,params:{pretty:re.pretty}}),providesTags:["Receiver"]}),replaceNamespacedReceiver:se.mutation({query:re=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${re.namespace}/receivers/${re.name}`,method:"PUT",body:re.comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1Receiver,params:{pretty:re.pretty,dryRun:re.dryRun,fieldManager:re.fieldManager,fieldValidation:re.fieldValidation}}),invalidatesTags:["Receiver"]}),deleteNamespacedReceiver:se.mutation({query:re=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${re.namespace}/receivers/${re.name}`,method:"DELETE",body:re.ioK8SApimachineryPkgApisMetaV1DeleteOptions,params:{pretty:re.pretty,dryRun:re.dryRun,gracePeriodSeconds:re.gracePeriodSeconds,orphanDependents:re.orphanDependents,propagationPolicy:re.propagationPolicy}}),invalidatesTags:["Receiver"]})}),overrideExisting:!1}).enhanceEndpoints({endpoints:{createNamespacedReceiver:{invalidatesTags:["Receiver","ContactPoint","ContactPointsStatus","AlertmanagerConfiguration"]},deleteNamespacedReceiver:se=>{const re=se.query;se.query=(...Y)=>{const X=re(...Y);return X.headers={"content-type":"application/json"},X}},readNamespacedReceiver:se=>{const re={hideErrorMessage:!0};se.extraOptions=re}}});var l=e(53226),i=e(51740),c=e(52161),p=e(56476),h=e(85618),u=e(91984),r=e(77788),v=e(80218),g=e(3986),E=e(43100),x=e(15518),m=e(182),y=e(66056);const b=10*1e3,{useGetAlertmanagerConfigurationQuery:D,useGetContactPointsStatusQuery:f,useGrafanaNotifiersQuery:C,useLazyGetAlertmanagerConfigurationQuery:P}=u.m,{useGrafanaOnCallIntegrationsQuery:T}=r.WG,{useListNamespacedReceiverQuery:M,useReadNamespacedReceiverQuery:I,useDeleteNamespacedReceiverMutation:B,useCreateNamespacedReceiverMutation:U,useReplaceNamespacedReceiverMutation:W}=o,V={refetchOnFocus:!0,refetchOnReconnect:!0},z=({skip:se}={})=>{const{installed:re,loading:Y}=(0,g._)((0,m.BO)()),X=T(void 0,{skip:se||!re});return(0,n.useMemo)(()=>re?X:{isLoading:Y,data:void 0},[re,Y,X])},R=se=>({id:se.metadata.name||se.metadata.uid||se.spec.title,name:se.spec.title,provisioned:(0,p.Uo)(se),grafana_managed_receiver_configs:se.spec.integrations,metadata:se.metadata}),O=(...[se,re])=>M(se,{...re,selectFromResult:Y=>{const X=Y.data?.items.map(J=>R(J));return{...Y,data:Y.error?[]:X,currentData:X}}}),N=({fetchStatuses:se,fetchPolicies:re,skip:Y}={})=>{const X=(0,h.Ge)(),J={skip:Y},_=z(J),ee=C(void 0,J),ae=O({namespace:X},J),le=f(void 0,{...V,pollingInterval:b,skip:Y||!se}),L=D(c.hY,{skip:Y||!re});return(0,n.useMemo)(()=>{if(_.isLoading||ee.isLoading||ae.isLoading)return{...ae,isLoading:!0,contactPoints:[]};const oe=(0,y.Rm)({status:le.data,notifiers:ee.data,onCallIntegrations:_?.data,contactPoints:ae.data||[],alertmanagerConfiguration:L.data});return{...ae,contactPoints:oe}},[ee,L,ae,le,_])},F=({alertmanager:se,name:re},Y)=>D(se,{...Y,selectFromResult:X=>{const J=X.data?.alertmanager_config.receivers?.find(_=>_.name===re);return{...X,data:J,currentData:J}}}),G=({name:se},re)=>{const Y=(0,h.Ge)();return I({namespace:Y,name:se},{...re,selectFromResult:X=>{const J=X.data?R(X.data):void 0;return{...X,data:J,currentData:J}},skip:re?.skip})},H=({alertmanager:se,name:re})=>{const Y=se===c.hY,X=G({name:re},{skip:!Y}),J=F({alertmanager:se,name:re},{skip:Y});return Y?X:J};function K({alertmanager:se,fetchStatuses:re,fetchPolicies:Y,skip:X}){const J=se===c.hY,_=N({skip:X||!J,fetchStatuses:re,fetchPolicies:Y}),ee=D(se,{...V,selectFromResult:ae=>({...ae,contactPoints:ae.data?(0,y.Rm)({notifiers:i.r,contactPoints:ae.data.alertmanager_config.receivers??[],alertmanagerConfiguration:ae.data}):[]}),skip:X||J});return J?_:ee}function w({alertmanager:se}){const re=(0,p.dM)(se),[Y]=(0,E.d)(),[X]=B(),J=(0,v.Yb)(async({name:ee,resourceVersion:ae})=>{const le=(0,h.Ge)();await X({name:ee,namespace:le,ioK8SApimachineryPkgApisMetaV1DeleteOptions:{preconditions:{resourceVersion:ae}}}).unwrap()}),_=(0,v.Yb)(async({name:ee})=>{const ae=(0,x.FS)(ee);return Y(ae)});return re?J:_}const Q=(se,re,Y)=>({metadata:{...re&&{name:re},resourceVersion:Y},spec:{title:se.name,integrations:se.grafana_managed_receiver_configs||[]}}),k=({alertmanager:se})=>{const re=se===c.hY,{createOnCallIntegrations:Y}=(0,l.VY)(),[X]=U(),[J]=(0,E.d)(),_=(0,v.Yb)(async({contactPoint:ae})=>{const le=await Y(ae),L=(0,h.Ge)(),ie=Q(le);return X({namespace:L,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1Receiver:ie}).unwrap()}),ee=(0,v.Yb)(async({contactPoint:ae})=>{const le=(0,x.BD)(ae);return J(le)});return re?_:ee},te=({alertmanager:se})=>{const re=se===c.hY,Y=(0,p.dM)(se),{createOnCallIntegrations:X}=(0,l.VY)(),[J]=W(),[_]=(0,E.d)();return(0,v.Yb)(async ae=>{if("resourceVersion"in ae&&Y){const{contactPoint:le,id:L,resourceVersion:ie}=ae,oe=re?await X(le):le,ue=(0,h.Ge)(),ye=Q(oe,L,ie);return J({name:L,namespace:ue,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1Receiver:ye}).unwrap()}else if("originalName"in ae){const{contactPoint:le,originalName:L}=ae,ie=re?await X(le):le,oe=(0,x.Xm)({name:L,receiver:ie});return _(oe)}})},q=({alertmanager:se})=>{const[re]=P();return se===c.hY?()=>{}:async(Y,X)=>{if(!(X&&Y===X))return re(se).unwrap().then(J=>{const{alertmanager_config:_}=J;return!!_.receivers?.find(ae=>ae.name===Y)?`Contact point already exists with name "${Y}"`:void 0})}}},97534:(ne,j,e)=>{"use strict";e.d(j,{u:()=>n});function n(a){const s=a||{};if(!s.message){if(typeof a=="string")return{message:a};let d="Query error";s.message?d=s.message:s.data&&s.data.message&&s.data?.message!=="Query data error"?d=s.data.message:s?.data?.message==="Query data error"&&s?.data?.error||s.data&&s.data.error?d=s.data.error:s.status&&(d=`Query error: ${s.status} ${s.statusText}`),s.message=d}return s}},97583:(ne,j,e)=>{"use strict";e.d(j,{i:()=>n});var n=(s=>(s[s.Panel=1]="Panel",s))(n||{}),a=(s=>(s[s.Dashboard=1]="Dashboard",s))(a||{})},97611:(ne,j,e)=>{"use strict";e.d(j,{yV:()=>R,yp:()=>U,$p:()=>W,F8:()=>V,SV:()=>z});var n=e(74848),a=e(22803),s=e(96540),d=e(45861),o=e(21539),l=e(84140),i=e(95004),c=e(55386),p=e(739),h=e(8255),u=e(53568),r=e(53431),v=e(30703);const g=({percentChange:O,styles:N})=>{let F;return O>0?F="arrow-up":O<0&&(F="arrow-down"),(0,n.jsxs)("div",{style:N.containerStyles,children:[F&&(0,n.jsx)(v.I,{name:F,height:N.iconSize,width:N.iconSize,viewBox:"6 6 12 12"}),E(O)]})},E=O=>(O/100).toLocaleString(void 0,{style:"percent",maximumSignificantDigits:3}),x=1.2,m=30,y=500;class b{constructor(N){this.props=N;const{width:F,height:G,value:H,text:K}=N;this.valueColor=H.color??"gray",this.panelPadding=G>100?12:8,this.textValues=I(N),this.justifyCenter=M(N.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.percentFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=F-this.panelPadding*2,this.maxTextHeight=G-this.panelPadding*2,K&&(K.titleSize&&(this.titleFontSize=K.titleSize,this.titleToAlignTo=void 0),K.valueSize&&(this.valueFontSize=K.valueSize,this.valueToAlignTo=""),K.percentSize&&(this.percentFontSize=K.percentSize))}getTitleStyles(){const N={fontSize:`${this.titleFontSize}px`,lineHeight:x};return(this.props.colorMode===U.Background||this.props.colorMode===U.BackgroundSolid)&&(N.color=(0,h.mZ)(this.valueColor,this.props.theme.isDark)),N}getValueStyles(){const N={fontSize:this.valueFontSize,fontWeight:y,lineHeight:x,position:"relative",zIndex:1};switch(this.justifyCenter&&(N.textAlign="center"),this.props.colorMode){case U.Value:N.color=this.valueColor;break;case U.Background:case U.BackgroundSolid:N.color=(0,h.mZ)(this.valueColor,this.props.theme.isDark);break;case U.None:N.color=this.props.theme.colors.text.primary;break}return N}getPercentChangeStyles(N,F,G){const K=this.getValueAndTitleContainerStyles(),w=this.percentFontSize||Math.max(this.valueFontSize/2.5,12);let Q=this.percentFontSize?this.percentFontSize-3:Math.max(this.valueFontSize/3,10);const k=this.props.theme.visualization,te=B(N,F,G,k),q={fontSize:w,fontWeight:y,lineHeight:x,position:"relative",display:"flex",alignItems:"center",gap:Math.max(w/3,4),zIndex:1,color:te};switch(this.justifyCenter&&(q.textAlign="center"),K.flexDirection==="column"&&w>12&&(q.marginTop=-(w/4)),K.flexDirection==="row"&&(q.alignItems="baseline",q.lineHeight=x*2.5),this.props.colorMode){case U.Background:case U.BackgroundSolid:q.color=(0,h.mZ)(this.valueColor,this.props.theme.isDark);break}return this.props.textMode===z.None&&(q.fontSize=(0,u.Vr)(E(N),this.maxTextWidth*.8,this.maxTextHeight*.8,x,void 0,y),Q=q.fontSize*.8),{containerStyles:q,iconSize:Q}}getValueAndTitleContainerStyles(){const N={display:"flex",flexWrap:"wrap"};return this.justifyCenter&&(N.alignItems="center",N.justifyContent="center",N.flexGrow=1,N.gap="0.75ch"),N}getPanelStyles(){const{width:N,height:F,theme:G,colorMode:H,textMode:K}=this.props,w={width:`${N}px`,height:`${F}px`,padding:`${K===z.None?2:this.panelPadding}px`,position:"relative",display:"flex"},Q=G.isDark?1:-.7;switch(H){case U.Background:const k=(0,l.A)(this.valueColor).darken(15*Q).spin(8).toRgbString(),te=(0,l.A)(this.valueColor).darken(5*Q).spin(-8).toRgbString();w.background=`linear-gradient(120deg, ${k}, ${te})`;break;case U.BackgroundSolid:w.background=(0,l.A)(this.valueColor).toString();break;case U.Value:w.background="transparent";break}return this.justifyCenter&&(w.alignItems="center",w.flexDirection="row"),w}renderChart(){const{sparkline:N,colorMode:F}=this.props;if(!N||N.y?.type!==i.PU.number)return null;let G,H;switch(F){case U.Background:case U.BackgroundSolid:G="rgba(255,255,255,0.4)",H=(0,l.A)(this.valueColor).brighten(40).toRgbString();break;case U.None:case U.Value:default:H=this.valueColor,G=(0,l.A)(this.valueColor).setAlpha(.2).toRgbString();break}const K={custom:{drawStyle:p.GR.Line,lineWidth:1,fillColor:G,lineColor:H}};return(0,n.jsx)("div",{style:this.getChartStyles(),children:(0,n.jsx)(r.O,{height:this.chartHeight,width:this.chartWidth,sparkline:N,config:K,theme:this.props.theme})})}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class D extends b{constructor(N){super(N);const F=this.titleToAlignTo?.length?.3:1;if(this.valueToAlignTo.length){let G=this.maxTextHeight;N.value.percentChange!=null&&(G=G*.75),this.valueFontSize=(0,u.Vr)(this.valueToAlignTo,this.maxTextWidth*F,G,x,void 0,y)}this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.Vr)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,x,m),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const N=super.getValueAndTitleContainerStyles();return N.flexDirection="row",N.alignItems="center",N.flexGrow=1,this.justifyCenter||(N.justifyContent="space-between"),N}renderChart(){return null}getPanelStyles(){const N=super.getPanelStyles();return N.alignItems="center",N}}class f extends b{constructor(N){super(N);const{width:F,height:G}=N,H=.5,K=.6,w=1-K,Q=.4;this.chartWidth=F,this.chartHeight=G*H,this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.Vr)(this.titleToAlignTo,this.maxTextWidth*K,this.maxTextHeight*Q,x,m)),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.Vr)(this.valueToAlignTo,this.maxTextWidth*w,this.maxTextHeight*H,x,void 0,y))}getValueAndTitleContainerStyles(){const N=super.getValueAndTitleContainerStyles();return N.flexDirection="row",N.flexGrow=1,this.justifyCenter||(N.justifyContent="space-between"),N}getPanelStyles(){const N=super.getPanelStyles();return N.flexDirection="row",N.justifyContent="space-between",N}}class C extends b{constructor(N){super(N);const{width:F,height:G}=N,H=.15,K=.25;let w=0;this.chartHeight=G*K,this.chartWidth=F,this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.Vr)(this.titleToAlignTo,this.maxTextWidth,G*H,x,m),w=this.titleFontSize*x),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-w,x,void 0,y)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=G-this.titleFontSize*x-this.valueFontSize*x}getValueAndTitleContainerStyles(){const N=super.getValueAndTitleContainerStyles();return N.flexDirection="column",N.justifyContent="center",N}getPanelStyles(){const N=super.getPanelStyles();return N.flexDirection="column",N}}class P extends b{constructor(N){super(N);const{height:F}=N,G=.15;let H=0;if(this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.Vr)(this.titleToAlignTo,this.maxTextWidth,F*G,x,m),H=this.titleFontSize*x),this.valueToAlignTo.length){let K=this.maxTextHeight-H;N.value.percentChange!=null&&(K=K*.75),this.valueFontSize=(0,u.Vr)(this.valueToAlignTo,this.maxTextWidth,K,x,void 0,y)}this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const N=super.getValueAndTitleContainerStyles();return N.flexDirection="column",N.flexGrow=1,N}renderChart(){return null}getPanelStyles(){const N=super.getPanelStyles();return N.alignItems="center",N}}function T(O){const{width:N,height:F,sparkline:G}=O;return N/F>2.5&&!O.disableWideLayout?F>50&&G&&G.y.values.length>1?new f(O):new D(O):F>100&&G&&G.y.values.length>1?new C(O):new P(O)}function M(O,N){return O===V.Center?!0:(N??"").length===0}function I(O){const{value:N,alignmentFactors:F,count:G}=O;let{textMode:H}=O;const K=F?F.title:N.title,w=(0,c.cN)(F||N);switch(H===z.Auto&&(G??1)===1&&(H=z.Value),H){case z.Name:return{...N,title:void 0,prefix:void 0,suffix:void 0,text:N.title||"",titleToAlignTo:void 0,valueToAlignTo:K??"",tooltip:(0,c.cN)(N)};case z.Value:return{...N,title:void 0,titleToAlignTo:void 0,valueToAlignTo:w,tooltip:N.title};case z.None:return{numeric:N.numeric,color:N.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${N.title}
Value: ${(0,c.cN)(N)}`};case z.ValueAndName:default:return{...N,titleToAlignTo:K,valueToAlignTo:w}}}function B(O,N,F,G){return N===p.CD.SameAsValue?F.color:O*(N===p.CD.Inverted?-1:1)>0?G.getColorByName("green"):G.getColorByName("red")}var U=(O=>(O.Background="background",O.BackgroundSolid="background_solid",O.None="none",O.Value="value",O))(U||{}),W=(O=>(O.None="none",O.Line="line",O.Area="area",O))(W||{}),V=(O=>(O.Auto="auto",O.Center="center",O))(V||{}),z=(O=>(O.Auto="auto",O.Value="value",O.ValueAndName="value_and_name",O.Name="name",O.None="none",O))(z||{});const R=(0,s.memo)(O=>{const{onClick:N,className:F,hasLinks:G,theme:H,justifyMode:K="auto"}=O,w=T({...O,justifyMode:K}),Q=w.getPanelStyles(),k=w.getValueAndTitleContainerStyles(),te=w.getValueStyles(),q=w.getTitleStyles(),se=w.textValues,re=O.value.percentChange,Y=O.percentChangeColorMode,X=re!=null&&!Number.isNaN(re),J=G?void 0:se.tooltip;return N?(0,n.jsxs)("button",{type:"button",className:(0,a.cx)((0,d.my)(H),F),style:Q,onClick:N,title:J,children:[(0,n.jsxs)("div",{style:k,children:[se.title&&(0,n.jsx)("div",{style:q,children:se.title}),(0,n.jsx)(o.i,{value:se,style:te})]}),w.renderChart()]}):(0,n.jsxs)("div",{className:F,style:Q,title:J,children:[(0,n.jsxs)("div",{style:k,children:[se.title&&(0,n.jsx)("div",{style:q,children:se.title}),(0,n.jsx)(o.i,{value:se,style:te}),X&&(0,n.jsx)(g,{percentChange:re,styles:w.getPercentChangeStyles(re,Y,te)})]}),w.renderChart()]})});R.displayName="BigValue"},97644:(ne,j,e)=>{"use strict";e.d(j,{KQ:()=>l});var n=e(739);const a="12.3.0";var s=(i=>(i.Opacity="opacity",i.Scheme="scheme",i))(s||{}),d=(i=>(i.Exponential="exponential",i.Linear="linear",i))(d||{}),o=(i=>(i.X="x",i.Xy="xy",i.Y="y",i))(o||{});const l={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},selectionMode:"x",showValue:n.yL.Auto,tooltip:{mode:n.$N.Single,yHistogram:!1,showColorScale:!1}}},97883:(ne,j,e)=>{"use strict";e.d(j,{V:()=>H});var n=e(92745),a=e(44248),s=e(33143),d=e(76584),o=e(92119),l=e(8835),i=e(93389),c=e(1131),p=e(87308),h=e(98279),u=e(88532),r=e(48492),v=e(91909),g=e(20246),E=e(54203),x=e(92388),m=e(15759),y=e(97335),b=e(74848),D=e(22803),f=e(89332),C=e(51898),P=e(63142),T=e(45861),M=e(3371),I=e(96691),B=e(61659),U=e(2543),W=e(96540),V=e(68079);function z({row:K,variable:w}){const{repeatedRows:Q}=K.useState();return(0,W.useEffect)(()=>{R(w,K,!1);const k=w.subscribeToState(q=>R(w,K,!1)),te=K.subscribeToEvent(s.WG,q=>R(w,K,!0));return()=>{te.unsubscribe(),k.unsubscribe()}},[w,K]),Q===void 0||a.jh.hasVariableDependencyInLoadingState(w)||w.state.loading?(o.xp.logger("RowItemRepeater",!1,"Variable is loading, showing spinner"),(0,b.jsx)(V.y,{})):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(K.Component,{model:K},K.state.key),Q?.map(k=>(0,b.jsx)(k.Component,{model:k},k.state.key))]})}function R(K,w,Q){if(a.jh.hasVariableDependencyInLoadingState(K)){o.xp.logger("RowItemRepeater",!1,"Skipped dependency in loading state");return}if(K.state.loading){o.xp.logger("RowItemRepeater",!1,"Skipped, variable is loading");return}const{values:k,texts:te}=(0,o.a7)(K),q=O(w,K.state.name);if(!Q&&(0,U.isEqual)(q,k)){o.xp.logger("RowItemRepeater",!1,"Skipped, values the same");return}Q?o.xp.logger("RowItemRepeater",!1,"Performing repeats, contentChanged"):o.xp.logger("RowItemRepeater",!1,"Performing repeats, variable values changed",k);const se=k.length?k:[""],re=te.length?te:K.hasAllValue()?["All"]:["None"],Y=[];for(let X=0;X<se.length;X++){const J=X===0,_=(0,M.lv)(w.state.key,X),ee=J?w:w.clone({key:_,repeatSourceKey:w.state.key,repeatByVariable:void 0,repeatedRows:void 0,layout:void 0}),ae=J?w.getLayout():w.getLayout().cloneLayout(_,!1);ee.setState({$variables:(0,M.D1)(K,se[X],re[X]),layout:ae}),J||Y.push(ee)}w.setState({repeatedRows:Y})}function O(K,w){const Q=[];if(!K.state.repeatedRows)return[];function k(te){const q=a.jh.lookupVariable(w,te);if(q){const se=q.getValue();se!=null&&!Array.isArray(se)&&Q.push(se)}}k(K);for(const te of K.state.repeatedRows)k(te);return Q}function N({model:K}){const{rows:w,key:Q}=K.useState(),{isEditing:k}=(0,o.TN)(K),te=(0,P.of)(G),{hasCopiedRow:q}=(0,B.x)();if((0,I.MK)())return w.map(Y=>(0,b.jsx)(F,{row:Y,manager:K},Y.state.key));const re=(0,M.bn)(K);return(0,b.jsx)(f.JY,{onBeforeDragStart:Y=>K.forceSelectRow(Y.draggableId),onDragEnd:Y=>{Y.destination&&Y.destination.index!==Y.source.index&&K.moveRow(Y.draggableId,Y.source.index,Y.destination.index)},children:(0,b.jsx)(f.gL,{droppableId:Q,direction:"vertical",children:Y=>(0,b.jsxs)("div",{className:te.wrapper,ref:Y.innerRef,...Y.droppableProps,children:[w.map(X=>(0,b.jsx)(F,{row:X,manager:K},X.state.key)),Y.placeholder,k&&!re&&(0,b.jsxs)("div",{className:"dashboard-canvas-add-button",children:[(0,b.jsx)(T.$n,{icon:"plus",variant:"primary",fill:"text",onClick:()=>K.addNewRow(),onPointerUp:X=>X.stopPropagation(),"data-testid":C.Tp.components.CanvasGridAddActions.addRow,children:(0,b.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.new-row",children:"New row"})}),q&&(0,b.jsx)(T.$n,{icon:"clipboard-alt",variant:"primary",fill:"text",onClick:()=>K.pasteRow(),onPointerUp:X=>X.stopPropagation(),"data-testid":C.Tp.components.CanvasGridAddActions.pasteRow,children:(0,b.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.paste-row",children:"Paste row"})}),(0,b.jsx)(T.$n,{icon:"layers-slash",variant:"primary",fill:"text",onClick:()=>K.ungroupRows(),"data-testid":C.Tp.components.CanvasGridAddActions.ungroupRows,children:(0,b.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.ungroup-rows",children:"Ungroup rows"})})]})]})})})}function F({row:K,manager:w}){const{repeatByVariable:Q}=(0,a.gn)(K,{shouldActivateOrKeepAlive:!0});if(Q){const k=a.jh.lookupVariable(Q,w);if(k instanceof a.n8)return(0,b.jsx)(z,{row:K,manager:w,variable:k},K.state.key)}return(0,b.jsx)(K.Component,{model:K},K.state.key)}function G(K){return{wrapper:(0,D.css)({display:"flex",flexDirection:"column",gap:K.spacing(1),flexGrow:1,width:"100%"})}}class H extends a.Bs{constructor(){super(...arguments),this.isDashboardLayoutManager=!0,this.descriptor=H.descriptor}static{this.Component=N}static{this.descriptor={get name(){return(0,n.t)("dashboard.rows-layout.name","Rows")},get description(){return(0,n.t)("dashboard.rows-layout.description","Collapsable panel groups with headings")},id:"RowsLayout",createFromLayout:H.createFromLayout,isGridLayout:!1,icon:"list-ul"}}serialize(){return(0,d.aL)(this)}addPanel(w){this.state.rows[0]?.getLayout().addPanel(w)}getVizPanels(){const w=[];for(const Q of this.state.rows){const k=Q.getLayout().getVizPanels();w.push(...k)}return w}cloneLayout(w,Q){return this.clone({})}duplicate(){const w=this.state.rows.map(Q=>Q.duplicate());return this.clone({rows:w,key:void 0})}duplicateRow(w){const Q=w.duplicate();this.addNewRow(Q)}addNewRow(w){const Q=w??new y.o({}),k=new Set(this.state.rows.map(q=>q.state.title).filter(q=>q!==void 0)),te=(0,g.BK)(Q.state.title,k);return te!==Q.state.title&&Q.setState({title:te}),s.cc.addElement({addedObject:Q,source:this,perform:()=>this.setState({rows:[...this.state.rows,Q]}),undo:()=>this.setState({rows:this.state.rows.filter(q=>q!==Q)})}),Q}editModeChanged(w){this.state.rows.forEach(Q=>Q.getLayout().editModeChanged?.(w))}pasteRow(){const w=(0,o.YQ)(this),Q=(0,r.$v)(w);this.addNewRow(Q)}shouldUngroup(){return this.state.rows.length===1}getOutlineChildren(){const w=[];for(const Q of this.state.rows)if(w.push(Q),Q.state.repeatedRows)for(const k of Q.state.repeatedRows)w.push(k);return w}convertAllGridLayouts(w){for(const Q of this.state.rows)switch(w){case g.lv.AutoGridLayout:Q.getLayout()instanceof l.X2||Q.switchLayout(l.X2.createFromLayout(Q.getLayout()));break;case g.lv.GridLayout:Q.getLayout()instanceof c.D||Q.switchLayout(c.D.createFromLayout(Q.getLayout()));break}}ungroupRows(){const w=this.state.rows.some(k=>!k.getLayout().descriptor.isGridLayout),Q=new Set((0,u.g)(this));(0,v.F)({hasNonGridLayout:w,gridTypes:Q,onConfirm:k=>{this.wrapUngroupRowsInEdit(k)},onConvertMixedGrids:k=>{this._confirmConvertMixedGrids(k)}})}_confirmConvertMixedGrids(w){(0,v.Y)(w,Q=>{const k=(0,g.$Y)(Q);k&&this.wrapUngroupRowsInEdit(k)})}wrapUngroupRowsInEdit(w){const Q=this.parent;if(!Q||!(0,m.l)(Q))throw new Error("Ungroup rows failed: parent is not a layout container");const k=this.clone({}),te=(0,o.YQ)(this);s.cc.edit({description:(0,n.t)("dashboard.rows-layout.edit.ungroup-rows","Ungroup rows"),source:te,perform:()=>{this.ungroup(w)},undo:()=>{Q.switchLayout(k)}})}ungroup(w){if(this.state.rows.some(se=>!se.getLayout().descriptor.isGridLayout))for(const se of this.state.rows){const re=se.getLayout();if(!re.descriptor.isGridLayout)if((0,x.Q)(re))re.ungroup(w);else throw new Error(`Ungrouping not supported for layout type: ${re.descriptor.name}`)}this.convertAllGridLayouts(w);const k=this.state.rows[0],te=k.getLayout(),q=this.state.rows.slice(1);for(const se of q){const re=se.getLayout();if((0,E.p)(te)&&(0,E.p)(re))te.mergeGrid(re);else throw new Error(`Layout type ${te.descriptor.name} does not support merging`)}this.setState({rows:[k]}),this.removeRow(k,!0),(0,g.f)(this,k.state.layout,!0)}removeRow(w,Q){const k=this.state.rows.findIndex(se=>se===w),te=()=>this.setState({rows:this.state.rows.filter(se=>se!==w)}),q=()=>{const se=[...this.state.rows];se.splice(k,0,w),this.setState({rows:se})};Q?te():s.cc.removeElement({removedObject:w,source:this,perform:te,undo:q})}moveRow(w,Q,k){const te=[...this.state.rows],[q]=te.splice(Q,1);te.splice(k,0,q),this.setState({rows:te}),this.publishEvent(new s.su(this),!0)}forceSelectRow(w){const Q=this.state.rows.findIndex(q=>q.state.key===w),k=this.state.rows[Q];if(!k)return;(0,o.YQ)(this).state.editPane.selectObject(k,w,{force:!0,multi:!1})}static createEmpty(){return new H({rows:[new y.o]})}static createFromLayout(w){let Q=[];if(w instanceof h.K)for(const k of w.state.tabs){if(k.state.repeatSourceKey)continue;const te=k.state.conditionalRendering;te?.clearParent(),Q.push(new y.o({layout:k.state.layout.clone(),title:k.state.title,conditionalRendering:te,repeatByVariable:k.state.repeatByVariable}))}else if(w instanceof c.D){const k=[];let te;w.state.grid.forEachChild(q=>{if(!(q instanceof i.U)&&!(q instanceof a.tI))throw new Error("Child is not a DashboardGridItem or SceneGridRow, invalid scene");if(q instanceof a.tI){if("repeatSourceKey"in q.state&&q.state.repeatSourceKey)return;const se=q.state.$behaviors?.find(re=>re instanceof p.L);k.push({title:q.state.title,isCollapsed:!!q.state.isCollapsed,isDraggable:q.state.isDraggable,isResizable:q.state.isResizable,children:q.state.children,repeat:se?.state.variableName}),te=void 0}else te||(te=[],k.push({children:te})),te.push(q)}),Q=k.map(q=>new y.o({title:q.title,collapse:!!q.isCollapsed,repeatByVariable:q.repeat,layout:c.D.fromGridItems(q.children,q.isDraggable??w.state.grid.state.isDraggable,q.isResizable??w.state.grid.state.isResizable,w.state.grid.state.isLazy)}))}else Q=[new y.o({layout:w.clone()})];return Q.length===0&&(Q=[new y.o]),new H({rows:Q})}duplicateTitles(){const w=new Map,Q=new Set;return this.state.rows.forEach(k=>{const te=a.jh.interpolate(k,k.state.title),q=(w.get(te)??0)+1;w.set(te,q),q>1&&te&&Q.add(te)}),Q}}},97971:(ne,j,e)=>{"use strict";e.d(j,{Z:()=>s});var n=e(83793),a=e(85618);function s(){const[d,{isLoading:o}]=(0,n.bS)();return{createBulkJob:async(i,c)=>{try{const p=await d({name:i.name,jobSpec:c}).unwrap();return{success:!0,jobId:p.metadata?.name,job:p}}catch(p){return{success:!1,error:(0,a.PE)(p)}}},isLoading:o}}},98005:(ne,j,e)=>{"use strict";e.d(j,{xE:()=>P});var n=e(74848),a=e(22803),s=e(96540),d=e(84140),o=e(76637),l=e(55386),i=e(64394),c=e(33553),p=e(38919),h=e(48588),u=e(51898),r=e(739),v=e(53568),g=e(45861),E=e(21539);const x=18,m=50,y=150,b=1.5,D=1,f=10,C=15;class P extends s.PureComponent{static{this.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:r.eX.Gradient,orientation:p.wV.Horizontal,field:{min:0,max:100,thresholds:{mode:c.O.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0,isOverflow:!1}}render(){const{onClick:F,className:G,theme:H}=this.props,{title:K}=this.props.value,w=I(this.props);return F?(0,n.jsxs)("button",{type:"button",style:w.wrapper,onClick:F,className:(0,a.cx)((0,g.my)(H),G),children:[(0,n.jsx)("div",{style:w.title,children:K}),this.renderBarAndValue()]}):(0,n.jsxs)("div",{style:w.wrapper,className:G,children:[K&&(0,n.jsx)("div",{style:w.title,children:K}),this.renderBarAndValue()]})}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:F,showUnfilled:G,valueDisplayMode:H}=this.props,K=V(this.props);return(0,n.jsxs)("div",{style:K.wrapper,children:[H!==r.$l.Hidden&&(0,n.jsx)(E.i,{"data-testid":u.Tp.components.Panels.Visualization.BarGauge.valueV2,value:F,style:K.value}),G&&(0,n.jsx)("div",{style:K.emptyBar}),(0,n.jsx)("div",{style:K.bar})]})}renderRetroBars(){const{display:F,field:G,value:H,itemSpacing:K,alignmentFactors:w,orientation:Q,lcdCellWidth:k,text:te,valueDisplayMode:q,isOverflow:se}=this.props,{valueHeight:re,valueWidth:Y,maxBarHeight:X,maxBarWidth:J,wrapperWidth:_,wrapperHeight:ee}=B(this.props),ae=G.min??h.tw,le=G.max??h.d1,L=T(Q),ie=le-ae,oe=L?X:J,ue=K,ye=Math.floor(oe/k),fe=Math.floor((oe-ue*ye)/ye),Ee=R(this.props),Ge=O(w||H,Ee,Y,re,Q,se,te),Fe={width:`${_}px`,height:`${ee}px`,display:"flex"};L?(Fe.flexDirection="column-reverse",Fe.alignItems="center"):(Fe.flexDirection="row",Fe.alignItems="center",Ge.justifyContent="flex-end");const Pe=[];for(let Ve=0;Ve<ye;Ve++){const me=ae+ie/ye*Ve,Se=U(me,H,F),Qe={borderRadius:"2px"};Se.isLit?Qe.backgroundImage=`radial-gradient(${Se.background} 10%, ${Se.backgroundShade})`:Qe.backgroundColor=Se.background,L?(Qe.height=`${fe}px`,Qe.width=`${J}px`,Qe.marginTop=`${ue}px`):(Qe.width=`${fe}px`,Qe.height=`${X}px`,Qe.marginRight=`${ue}px`),Pe.push((0,n.jsx)("div",{style:Qe},Ve.toString()))}return(0,n.jsxs)("div",{style:Fe,children:[Pe,q!==r.$l.Hidden&&(0,n.jsx)(E.i,{"data-testid":u.Tp.components.Panels.Visualization.BarGauge.valueV2,value:H,style:Ge})]})}}function T(N){return N===p.wV.Vertical}function M(N){const{height:F,width:G,alignmentFactors:H,orientation:K,text:w,namePlacement:Q}=N,k=H?H.title:N.value.title;if(!k)return{fontSize:0,width:0,height:0,placement:"above"};if(Q===r.TZ.Hidden)return{fontSize:0,width:0,height:0,placement:r.TZ.Hidden};if(T(K)){const J=w?.titleSize??14;return{fontSize:J,width:G,height:J*b,placement:"below"}}if(F>40&&Q===r.TZ.Auto||Q===r.TZ.Top){if(w?.titleSize)return{fontSize:w?.titleSize,width:0,height:w.titleSize*b,placement:"above"};const _=Math.max(Math.min(F*.45,m),17);return{fontSize:_/b,width:0,height:_,placement:"above"}}const re=Math.max(F*.6,x)/b,Y=(0,v.kD)(k,re),X=Math.min(Y.width+15,G*.4);return{fontSize:w?.titleSize??re,height:0,width:X,placement:"left"}}function I(N){const F={display:"flex",overflow:"hidden",width:"100%"},G=M(N),H={fontSize:`${G.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return G.placement==="hidden"?H.display="none":T(N.orientation)?(F.flexDirection="column-reverse",H.textAlign="center"):G.placement==="above"?F.flexDirection="column":(F.flexDirection="row",H.width=`${G.width}px`,H.textAlign="right",H.paddingRight="10px"),{wrapper:F,title:H}}function B(N){const{height:F,width:G,orientation:H,text:K,alignmentFactors:w,valueDisplayMode:Q}=N,k=M(N),te=w??N.value,q=(0,l.cN)(te);let se=0,re=0,Y=0,X=0,J=0,_=0;const ee=K?.valueSize??Math.max(k.fontSize,12),le=(0,v.kD)(q,ee).width+f*2;return T(H)?(K?.valueSize?Y=K.valueSize*D:Y=Math.min(Math.max(F*.1,x),m),X=G,Q===r.$l.Hidden&&(Y=0,X=0),se=F-(k.height+Y),re=G,J=G,_=F-k.height):(Q===r.$l.Hidden?(Y=0,X=0):(Y=F-k.height,X=Math.max(Math.min(G*.2,y),le)),se=F-k.height,re=G-X-k.width,k.placement==="above"?(J=G,_=F-k.height):(J=G-k.width,_=F)),{valueWidth:X,valueHeight:Y,maxBarWidth:re,maxBarHeight:se,wrapperHeight:_,wrapperWidth:J}}function U(N,F,G){if(N===null)return{background:i.F,border:i.F};const H=G?G(N).color:null;return H?F===null||isNaN(F.numeric)||N!==null&&N>F.numeric?{background:(0,d.A)(H).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,d.A)(H).setAlpha(.95).toRgbString(),backgroundShade:(0,d.A)(H).setAlpha(.55).toRgbString(),border:(0,d.A)(H).setAlpha(.9).toRgbString(),isLit:!0}:{background:i.F,border:i.F}}function W(N,F,G){const H=Math.min((N-F)/(G-F),1);return isNaN(H)?0:H}function V(N){const{displayMode:F,field:G,value:H,alignmentFactors:K,orientation:w,theme:Q,text:k,isOverflow:te}=N,{valueWidth:q,valueHeight:se,maxBarHeight:re,maxBarWidth:Y}=B(N),X=G.min??h.tw,J=G.max??h.d1,_=W(H.numeric,X,J),ee=R(N),ae=H.color??i.F,L=O(K||H,ee,q,se,w,te,k),ie=F==="basic",oe={display:"flex",flexGrow:1},ue={borderRadius:Q.shape.radius.sm,position:"relative"},ye={background:Q.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:Q.shape.radius.sm,position:"relative"};if(T(w)){const fe=Math.max(_*re,1);oe.flexDirection="column",oe.justifyContent="flex-end",ue.transition="height 1s",ue.height=`${fe}px`,ue.width=`${Y}px`,ye.bottom="-3px",ye.width=`${q}px`,ie?(ue.background=`${(0,d.A)(ae).setAlpha(.35).toRgbString()}`,ue.borderTop=`2px solid ${ae}`):ue.background=z(N,re)}else{const fe=Math.max(_*Y,1);oe.flexDirection="row-reverse",oe.justifyContent="flex-end",oe.alignItems="stretch",ue.transition="width 1s",ue.height=`${re}px`,ue.width=`${fe}px`,ye.left="-3px",ye.height=`${se}px`,ie?(ue.background=`${(0,d.A)(ae).setAlpha(.35).toRgbString()}`,ue.borderRight=`2px solid ${ae}`):ue.background=z(N,Y)}return{wrapper:oe,bar:ue,value:L,emptyBar:ye}}function z(N,F){const{field:G,value:H,orientation:K,theme:w}=N,Q=T(K)?"0deg":"90deg",k=G.min,te=G.max;let q="",se=0,re=(0,o.Hs)(G.color?.mode);if(re.id===i.Y.Thresholds){const Y=G.thresholds;for(let X=0;X<Y.steps.length;X++){const J=Y.steps[X],_=N.theme.visualization.getColorByName(J.color),ee=Y.mode===c.O.Percentage?J.value/100:W(J.value,k,te),ae=ee*F,le=Math.round(ae-(ae-se)/2),L=Y.mode===c.O.Percentage?k+(te-k)*ee:J.value;if(q==="")q=`linear-gradient(${Q}, ${_}, ${_}`;else{if(H.numeric<L)break;se=ae,q+=` ${le}px, ${_}`}}return q+")"}if(re.isContinuous&&re.getColors){const Y=re.getColors(w);for(let X=0;X<Y.length;X++){const J=Y[X];if(q==="")q=`linear-gradient(${Q}, ${J} 0px`;else{const ee=X/(Y.length-1)*F;q+=`, ${J} ${ee}px`}}return q+")"}return H.color??i.F}function R(N){if(N.valueDisplayMode==="text")return N.theme.colors.text.primary;const{value:F}=N;return F.color?F.color:i.F}function O(N,F,G,H,K,w,Q){const k={color:F,height:`${H}px`,maxWidth:`${G}px`,display:"flex",alignItems:"center",textWrap:"nowrap",lineHeight:D};let te=G;const q=(0,l.cN)(N);return T(K)?(k.fontSize=Q?.valueSize??(0,v.Vr)(q,te,H,D),k.justifyContent="center"):(k.fontSize=Q?.valueSize??(0,v.Vr)(q,te-f*2,H,D),k.justifyContent="flex-end",k.paddingLeft=`${f}px`,k.paddingRight=`${f+(w?C:0)}px`,te-=f),k}},98036:(ne,j,e)=>{"use strict";e.d(j,{d:()=>p,u:()=>h});var n=e(74848),a=e(22803),s=e(51898),d=e(92745),o=e(43173),l=e(99887),i=e(63142),c=e(62905);const p=({dashboard:v})=>!v.state.uid||!o.$.publicDashboardsEnabled?null:(0,n.jsx)(u,{uid:v.state.uid}),h=u;function u({uid:v}){const{data:g}=(0,c.Bs)(v),E=(0,i.of)(r);return g?(0,n.jsx)(l.E,{color:"blue",text:(0,d.t)("dashboard.toolbar.new.public-dashboard","Public"),className:E.badge,"data-testid":s.Tp.pages.Dashboard.DashNav.publicDashboardTag}):null}const r=()=>({badge:(0,a.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})})},98060:(ne,j,e)=>{"use strict";e.d(j,{$b:()=>a,Bu:()=>s,OW:()=>l,XV:()=>n,wZ:()=>o,x8:()=>d});const n="package",a=/^plugins.+\.css$/i,s=/^(text|application)\/(x-)?javascript(;|$)/,d=Date.now(),o=/\/?public\/plugins\/([^\/]+)\//,l=/\/?public\/app\/plugins\/(?:datasource|panel)\/([^\/]+)\//},98127:(ne,j,e)=>{"use strict";e.d(j,{$:()=>s});var n=e(25508),a=e(52763);function s(d,o){return(0,a.d4)((0,n.Mz)(l=>l.unifiedAlerting,l=>d(l)),o)}},98215:(ne,j,e)=>{"use strict";e.r(j),e.d(j,{AbstractLabelOperator:()=>pa.D_,ActionType:()=>Ka.X2,ActionVariableType:()=>Ka.VR,AlertState:()=>ft.O,AnnotationChangeEvent:()=>f.We,AnnotationEventFieldSource:()=>Pa.V,AppEvents:()=>Tt.r1,AppPlugin:()=>ra.hX,ArrayDataFrame:()=>p.f,ArrayVector:()=>on,BinaryOperationID:()=>fe.k,BusEventBase:()=>b.a,BusEventWithPayload:()=>b.x,ByNamesMatcherMode:()=>Be.PP,CSVHeaderStyle:()=>ae.F7,CSVReader:()=>ae.i8,CircularDataFrame:()=>Ln.x,CircularVector:()=>$t.$,CoreApp:()=>ra.Jk,CustomVariableSupport:()=>St.f5,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>W.Pm,DEFAULT_SAML_NAME:()=>Bt.En,DashboardCursorSync:()=>Ua.y,DashboardLoadedEvent:()=>f.gc,DataFrameType:()=>Oa.m,DataFrameView:()=>a.R,DataHoverClearEvent:()=>f.ql,DataHoverEvent:()=>f.b_,DataLinkBuiltInVars:()=>w.c,DataLinkConfigOrigin:()=>ma.x0,DataLinksContext:()=>M.JC,DataQueryErrorType:()=>ta.v2,DataSelectEvent:()=>f.LO,DataSourceApi:()=>ta.mA,DataSourcePlugin:()=>ta.tD,DataSourcePluginContextProvider:()=>Ht.p,DataSourceTestFailed:()=>f.LL,DataSourceTestSucceeded:()=>f.NI,DataSourceUpdatedSuccessfully:()=>f.wE,DataSourceVariableSupport:()=>St.ZV,DataTopic:()=>v.QR,DataTransformerID:()=>Ie.F,DefaultTimeZone:()=>ya.lE,DocsId:()=>Q.f,EventBusSrv:()=>D.o,ExploreMode:()=>ta.ZF,FALLBACK_COLOR:()=>Yt.F,FeatureState:()=>ra.Ay,FieldCache:()=>s.L,FieldColorModeId:()=>Yt.Y,FieldConfigEditorBuilder:()=>O.bk,FieldConfigOptionsRegistry:()=>P.K,FieldConfigProperty:()=>Un.uo,FieldMatcherID:()=>Re.Ct,FieldNamePickerBaseNameMode:()=>R.X4,FieldType:()=>is.PU,FrameGeometrySourceMode:()=>v.aG,FrameMatcherID:()=>Re.jR,GAUGE_DEFAULT_MAXIMUM:()=>Bt.d1,GAUGE_DEFAULT_MINIMUM:()=>Bt.tw,GrafanaPlugin:()=>zn.Ud,GrafanaThemeType:()=>Pt.I,HttpRequestMethod:()=>Ka.DO,ISO_8601:()=>ot.mt,InternalTimeZones:()=>mt.g$,LanguageProvider:()=>ta.Is,LayoutModes:()=>ut.R,LegacyGraphHoverClearEvent:()=>Tt.Tq,LegacyGraphHoverEvent:()=>Tt.kb,LegacyMappingType:()=>se.An,LiveChannelConnectionState:()=>En.ZF,LiveChannelEventType:()=>En.o4,LiveChannelScope:()=>En.qD,LiveChannelType:()=>En.os,LoadingState:()=>N.Gu,LocalStorageValueProvider:()=>Ve.b,LogLevel:()=>Ta.$b,LogRowContextQueryDirection:()=>Ta.ZF,LogSortOrderChangeEvent:()=>Ta.Df,LogsDedupDescription:()=>Ta._C,LogsDedupStrategy:()=>v.fY,LogsMetaKind:()=>Ta.tG,LogsSortOrder:()=>v.uH,LogsVolumeType:()=>Ta.Aj,MISSING_VALUE:()=>d.p,MappingType:()=>Ca.d,MatcherID:()=>Re.cV,MutableDataFrame:()=>d.k,NodeGraphDataFrameFieldNames:()=>Ae.u,NullValueMode:()=>N.UW,NumericLogLevel:()=>Ta.s5,OneClickMode:()=>ma.yd,OrgRole:()=>Je.X,PageLayoutType:()=>Xa.k,PanelEvents:()=>Tt.ee,PanelOptionsEditorBuilder:()=>O.pv,PanelPlugin:()=>gt.m,PathValidationError:()=>m.DX,PluginContext:()=>Ot.b,PluginContextProvider:()=>wt.a,PluginErrorCode:()=>zn.ZK,PluginExtensionExposedComponents:()=>An.L9,PluginExtensionPointPatterns:()=>An.YP,PluginExtensionPoints:()=>An.SM,PluginExtensionTypes:()=>An.u6,PluginIncludeType:()=>zn.ib,PluginLoadingStrategy:()=>zn.xf,PluginSignatureStatus:()=>zn.Ac,PluginSignatureType:()=>zn.kv,PluginState:()=>zn.pn,PluginType:()=>zn.QE,ReducerID:()=>Ke.gy,Registry:()=>J.O,RestrictedGrafanaApisContext:()=>jt.gz,RestrictedGrafanaApisContextProvider:()=>jt.Bm,SetPanelAttentionEvent:()=>f.Tp,SpecialValue:()=>oa.N,SpecialValueMatch:()=>Ca.W,StandardVariableSupport:()=>St.J$,Store:()=>Pe.i,StreamingDataFrame:()=>c.k9,StreamingFrameAction:()=>c.Kh,SupplementaryQueryType:()=>Ta.cF,SupportedTransformationType:()=>ma.CC,SystemDateFormatsState:()=>pt.JE,TIME_FORMAT:()=>ya.G$,TIME_SERIES_METRIC_FIELD_NAME:()=>is.aI,TIME_SERIES_TIME_FIELD_NAME:()=>is.LE,TIME_SERIES_VALUE_FIELD_NAME:()=>is.Bc,ThemeContext:()=>Ne.D,ThresholdsMode:()=>fn.O,TransformationApplicabilityLevels:()=>oa.M,TransformerCategory:()=>ze.m,UnaryOperationID:()=>Ee._,VAR_CALC:()=>W.k_,VAR_CELL_PREFIX:()=>W.a_,VAR_FIELD_LABELS:()=>W.nF,VAR_FIELD_NAME:()=>W.py,VAR_SERIES_NAME:()=>W.k3,ValueMatcherID:()=>Re.Js,VariableHide:()=>Lt.zL,VariableOrigin:()=>ma.$0,VariableRefresh:()=>Lt.CO,VariableSort:()=>Lt.ZG,VariableSuggestionsScope:()=>ma.uP,VariableSupportBase:()=>St.xi,VariableSupportType:()=>St.Qz,VisualizationSuggestionScore:()=>sa.nQ,VisualizationSuggestionsBuilder:()=>sa.v2,VisualizationSuggestionsListAppender:()=>sa.NV,VizOrientation:()=>sa.wV,addDurationToDate:()=>nt.Ri,addRow:()=>i.uY,alignTimeRangeCompareData:()=>i.Vh,amendTable:()=>n.c,anySeriesWithTimeField:()=>i.tP,anyToNumber:()=>te.t,applyFieldOverrides:()=>M.we,applyNullInsertThreshold:()=>ge.M,applyRawFieldOverrides:()=>M.K3,arrayToDataFrame:()=>p.I,arrayUtils:()=>Fe,availableIconsIndex:()=>xn.az,binaryOperators:()=>fe.b,booleanOverrideProcessor:()=>R.FM,booleanValueFormatter:()=>We.Qc,buildHistogram:()=>Ye.p3,cacheFieldDisplayNames:()=>B.Fm,classicColors:()=>oe.t,closestIdx:()=>c.Ls,colorManipulator:()=>Oe.MV,compareArrayValues:()=>u.J3,compareDataFrameStructures:()=>u.bW,containsSearchFilter:()=>re.E,contentTypeOptions:()=>Ka.Ur,convertOldAngularValueMappings:()=>se.bh,createDataFrame:()=>o.EI,createDimension:()=>l.r4,createFieldConfigRegistry:()=>tt.O,createTheme:()=>Me.a,dataFrameFromJSON:()=>h.or,dataFrameToJSON:()=>h.Nw,dataLinksOverrideProcessor:()=>R.Ch,dateMath:()=>qe,dateTime:()=>ot.KQ,dateTimeAsMoment:()=>ot.AN,dateTimeForTimeZone:()=>ot.oZ,dateTimeFormat:()=>ke.LE,dateTimeFormatISO:()=>ke.M7,dateTimeFormatTimeAgo:()=>ke.fq,dateTimeFormatWithAbbrevation:()=>ke._Q,dateTimeParse:()=>Ze.b,decodeFieldValueEntities:()=>h.t,decodeFieldValueEnums:()=>h.EL,defaultActionConfig:()=>Ka.mx,defaultCalcs:()=>Ke.C6,deprecationWarning:()=>ee.l,displayNameOverrideProcessor:()=>R.AM,doStandardCalcs:()=>Ke.H3,durationToMilliseconds:()=>nt.WT,ensureTimeField:()=>de.ks,escapeRegex:()=>g.$f,escapeStringForRegex:()=>g.jD,eventFactory:()=>y.R,fieldColorModeRegistry:()=>C.uf,fieldMatchers:()=>Ue.sJ,fieldReducers:()=>Ke.AS,filterFieldConfigOverrides:()=>ht.aW,findCommonLabels:()=>le.yO,findHighlightChunksInText:()=>E.Oq,findMatchesInText:()=>E.bs,findUniqueLabels:()=>le.s6,fixCellTemplateExpressions:()=>W.Zo,formatLabels:()=>le.h6,formattedValueToString:()=>We.cN,frameMatchers:()=>Ue.RE,fuzzySearch:()=>Se.X,getActiveThreshold:()=>T.yQ,getAllValuesFromDimension:()=>l.Km,getBuiltInThemes:()=>be.k,getColorByStringHash:()=>C.O7,getColumnFromDimension:()=>l.P4,getColumnsFromDimension:()=>l.g6,getDataFrameRow:()=>o.Yn,getDataSourceRef:()=>_.p$,getDataSourceUID:()=>_.Iz,getDefaultRelativeTimeRange:()=>ya.Cn,getDefaultTimeRange:()=>ya.E2,getDimensionByName:()=>l.xB,getDisplayProcessor:()=>V.J,getDisplayValueAlignmentFactors:()=>W.XS,getFieldColorMode:()=>C.Hs,getFieldColorModeForField:()=>C.Qi,getFieldConfigWithMinMax:()=>U.xg,getFieldDataContextClone:()=>M.vd,getFieldDisplayName:()=>B.Ct,getFieldDisplayValues:()=>W.PI,getFieldDisplayValuesProxy:()=>I.F,getFieldMatcher:()=>Ue.NS,getFieldSeriesColor:()=>C.lz,getFieldTypeFromValue:()=>o.oE,getFlotPairs:()=>F,getFlotPairsConstant:()=>G,getFrameDisplayName:()=>B.Ri,getFrameMatchers:()=>Ue.Dq,getHistogramFields:()=>Ye.ix,getLinksSupplier:()=>M._M,getLocale:()=>ot.JK,getLocaleData:()=>ot.XN,getMinMaxAndDelta:()=>U.AP,getNextRefId:()=>r.M,getPanelOptionsWithDefaults:()=>ht.F,getProcessedDataFrames:()=>o.Bt,getRawDisplayProcessor:()=>V.H,getRowUniqueId:()=>i.t9,getScaleCalculator:()=>U.jc,getSearchFilterScopedVar:()=>re.c,getSeriesTimeStep:()=>ue,getThemeById:()=>be.g,getTimeField:()=>o.KR,getTimeZone:()=>rt.O,getTimeZoneGroups:()=>mt.U3,getTimeZoneInfo:()=>mt.QZ,getTimeZones:()=>mt.P3,getUniqueFieldName:()=>B.fk,getValueFormat:()=>We.j_,getValueFormats:()=>We.Ke,getValueFormatterIndex:()=>We.uH,getValueFromDimension:()=>l.WK,getValueMatcher:()=>Ue.kK,getWeekdayIndex:()=>ot.xQ,getWeekdayIndexByEnglishName:()=>ot.pp,getZone:()=>mt.HD,guessDecimals:()=>L.E,guessFieldTypeForField:()=>o.dF,guessFieldTypeFromNameAndValue:()=>o.by,guessFieldTypeFromValue:()=>o.HW,guessFieldTypes:()=>o.XQ,hasLinks:()=>W.eG,hasLogsContextSupport:()=>Ta.Ol,hasLogsContextUiSupport:()=>Ta.wj,hasMsResolution:()=>ye,hasQueryExportSupport:()=>pa.Ee,hasQueryImportSupport:()=>pa.FL,hasQueryModificationSupport:()=>Ta._0,hasSupplementaryQuerySupport:()=>Ta.Nc,hasTimeField:()=>i.S1,hasToggleableQueryFiltersSupport:()=>Ta.FP,histogramBucketSizes:()=>Ye.rW,histogramFieldInfo:()=>Ye.Rt,histogramFieldsToFrame:()=>Ye.cg,histogramFrameBucketMaxFieldName:()=>Ye.dA,histogramFrameBucketMinFieldName:()=>Ye.d$,histogramTransformer:()=>Ye.OA,httpMethodOptions:()=>Ka.ki,identityOverrideProcessor:()=>R.hS,incrRound:()=>Ye.ZU,incrRoundDn:()=>Ye.rs,incrRoundUp:()=>Ye.Uh,intervalToAbbreviatedDurationString:()=>nt.dU,isBooleanUnit:()=>We.j9,isCustomFieldProp:()=>ht.TQ,isDataFrame:()=>o.ci,isDataFrameWithValue:()=>o.LI,isDataSourcePluginContext:()=>Dn.S,isDataSourceRef:()=>_.fN,isDateTime:()=>ot.Ar,isDateTimeInput:()=>ot.u8,isEmptyObject:()=>ie.R,isEqualityOrMultiOperator:()=>Gn.RU,isHistogramFrameBucketMaxFieldName:()=>Ye.H1,isHistogramFrameBucketMinFieldName:()=>Ye.NX,isIconName:()=>xn.n6,isLikelyAscendingVector:()=>$e.g2,isLiveChannelJoinEvent:()=>En.Cz,isLiveChannelLeaveEvent:()=>En.jQ,isLiveChannelMessageEvent:()=>En.Z7,isLiveChannelStatusEvent:()=>En.ew,isObject:()=>N.Gv,isReducerID:()=>Ke.Em,isStandardFieldProp:()=>ht.nx,isSystemOverride:()=>Un.Ow,isSystemOverrideWithRef:()=>Un.ZW,isTableData:()=>o.pH,isTimeSeriesField:()=>i.hF,isTimeSeriesFrame:()=>i.aH,isTimeSeriesFrames:()=>i.jq,isTruthy:()=>N.zz,isUnsignedPluginSignature:()=>Bn.x,isValidDate:()=>nt.vd,isValidDuration:()=>nt.di,isValidGoDuration:()=>nt.pp,isValidGrafanaDuration:()=>nt.V3,isValidLiveChannelAddress:()=>En.aj,joinHistograms:()=>Ye.EO,localTimeFormat:()=>pt.Od,locale:()=>We.Hg,locationUtil:()=>H.I,makeClassES5Compatible:()=>k.Y,makeTimeRange:()=>ya.HW,mapInternalLinkToExplore:()=>w.u,matchAllLabels:()=>le._p,matchPluginId:()=>X._,monacoLanguageRegistry:()=>De.l,nullToValue:()=>pe.C,numberOverrideProcessor:()=>R.m0,objRemoveUndefined:()=>ie.w,onUpdateDatasourceJsonDataOption:()=>_.PG,onUpdateDatasourceJsonDataOptionChecked:()=>_.EX,onUpdateDatasourceJsonDataOptionSelect:()=>_.BD,onUpdateDatasourceOption:()=>_.zX,onUpdateDatasourceResetOption:()=>_.yV,onUpdateDatasourceSecureJsonDataOption:()=>_.mn,onUpdateDatasourceSecureJsonDataOptionSelect:()=>_.wY,outerJoinDataFrames:()=>$e.Fd,parseDuration:()=>nt.E9,parseFlags:()=>E.bQ,parseLabels:()=>le.Xy,parseLiveChannelAddress:()=>En.DG,patchArrayVectorProrotypeMethods:()=>ea.V,preProcessPanelData:()=>o.N$,preferredVisualizationTypes:()=>N.Nx,rangeUtil:()=>st,readCSV:()=>ae.Jh,reduceField:()=>Ke.Nw,renderLegendFormat:()=>Y.j,renderMarkdown:()=>x.G,renderTextPanelMarkdown:()=>x.P,restoreCustomOverrideRules:()=>ht.H9,reverseDataFrame:()=>o.q7,reverseParseDuration:()=>nt.Q7,reverseScopeFilterOperatorMap:()=>Gn.Dv,roundDecimals:()=>L.h,scaledUnits:()=>We.yP,scopeFilterOperatorMap:()=>Gn.n9,selectOverrideProcessor:()=>R.hL,serializeStateToUrlParam:()=>K.Pp,setLocale:()=>ot.xS,setTimeZoneResolver:()=>rt.G,setWeekStart:()=>ot.$D,shallowCompare:()=>u.ab,shouldAlignTimeCompare:()=>i.dK,simpleCountUnit:()=>We.UR,sortDataFrame:()=>o.ES,sortThresholds:()=>T.RU,standardEditorsRegistry:()=>z.D,standardFieldConfigEditorRegistry:()=>z.G,standardTransformers:()=>Qe.c,standardTransformersRegistry:()=>ze.h,store:()=>Pe.M,stringFormater:()=>We.cH,stringOverrideProcessor:()=>R.OU,stringStartsAsRegEx:()=>g.AP,stringToJsRegex:()=>g.dO,stringToMs:()=>g.dc,systemDateFormats:()=>pt.WC,textUtil:()=>m.sQ,thresholdsOverrideProcessor:()=>R.N7,throwIfAngular:()=>me.M,timeZoneAbbrevation:()=>ke.jw,timeZoneFormatUserFriendly:()=>mt.le,toCSV:()=>ae._O,toDataFrame:()=>o.Vc,toDataFrameDTO:()=>o.Kl,toDuration:()=>ot.Ah,toFilteredDataFrameDTO:()=>o.By,toFixed:()=>We.Mg,toFixedScaled:()=>We.gZ,toFixedUnit:()=>We.G8,toFloatOrUndefined:()=>g.$D,toIconName:()=>xn.Uo,toIntegerOrUndefined:()=>g.vb,toLegacyResponseData:()=>o.w3,toLiveChannelId:()=>En.Qp,toNumberString:()=>g.kT,toOption:()=>Ge.z,toPascalCase:()=>g.MX,toURLRange:()=>K.sQ,toUtc:()=>ot.yT,transformDataFrame:()=>Le.m,trimTable:()=>n.F,unEscapeStringFromRegex:()=>g.xb,unaryOperators:()=>Ee.j,unitOverrideProcessor:()=>R.lG,updateDatasourcePluginJsonDataOption:()=>_.lO,updateDatasourcePluginOption:()=>_.pN,updateDatasourcePluginResetOption:()=>_.QP,updateDatasourcePluginSecureJsonDataOption:()=>_.wp,urlUtil:()=>K.kM,useDataLinksContext:()=>M.Cq,useFieldOverrides:()=>M.rJ,usePluginContext:()=>hn.Q,useRestrictedGrafanaApis:()=>jt.Iu,userHasAllPermissions:()=>Hn.Fj,userHasAnyPermission:()=>Hn.jW,userHasPermission:()=>Hn.ZU,userHasPermissionInMetadata:()=>Hn.T6,validateFieldConfig:()=>M.BF,validatePath:()=>m.iQ,valueMappingsOverrideProcessor:()=>R.xT,valueMatchers:()=>Ue.hI,vectorator:()=>zt.E,withLoadingIndicator:()=>q.k});var n=e(15083),a=e(88673),s=e(10279),d=e(18700),o=e(41119),l=e(26332),i=e(17503),c=e(51388),p=e(27359),h=e(77154),u=e(76732),r=e(39796),v=e(739),g=e(8934),E=e(38388),x=e(67458),m=e(63704),y=e(36819),b=e(68388),D=e(19379),f=e(57852),C=e(76637),P=e(76803),T=e(36394),M=e(60519),I=e(7102),B=e(16515),U=e(79118),W=e(44232),V=e(11576),z=e(53543),R=e(38809),O=e(52205),N=e(28105);function F({xField:Tn,yField:Nn,nullValueMode:gn}){const Zn=Tn.values,kn=Nn.values,it=Zn.length;if(kn.length!==it)throw new Error("Unexpected field length");const Wt=gn===N.UW.Ignore,Vt=gn===N.UW.AsZero,nn=[];for(let an=0;an<it;an++){const Rn=Zn[an];let Xn=kn[an];if(Xn===null){if(Wt)continue;Vt&&(Xn=0)}Rn!==null&&nn.push([Rn,Xn])}return nn}function G(Tn,Nn){if(!Nn.from||!Nn.to||!Tn||Tn.length===0)return[];const gn=Nn.from.valueOf(),Zn=Nn.to.valueOf(),kn=Tn[0][1];return[[gn,kn],[Zn,kn]]}var H=e(92138),K=e(5556),w=e(38036),Q=e(28882),k=e(35814),te=e(13227),q=e(47520),se=e(35987),re=e(94452),Y=e(428),X=e(8134),J=e(42954),_=e(48480),ee=e(37615),ae=e(68125),le=e(71642),L=e(79243),ie=e(3594),oe=e(33985);const ue=Tn=>{let Nn,gn,Zn=Number.MAX_VALUE;for(let kn=0;kn<Tn.values.length;kn++){const it=Tn.values[kn];if(Nn!==void 0){const Wt=it-Nn;gn===void 0&&(Zn=Wt),Wt<Zn&&(Zn=Wt)}Nn=it}return Zn},ye=Tn=>{for(let Nn=0;Nn<Tn.values.length;Nn++){const gn=Tn.values[Nn];if(gn!=null){const Zn=gn.toString();if(Zn.length===13&&Zn%1e3!==0)return!0}}return!1};var fe=e(12823),Ee=e(48233),Ae=e(14613),Ge=e(47184),Fe=e(46635),Pe=e(78012),Ve=e(66615),me=e(78830),Se=e(99885),Qe=e(52645),Ue=e(36638),Ie=e(64761),Re=e(57866),Ke=e(46644),Le=e(2197),ze=e(8642),Be=e(4575),$e=e(8721),Ye=e(74261),de=e(406),ge=e(63409),pe=e(34455),De=e(54734),Me=e(69884),be=e(7467),Oe=e(6773),Ne=e(35555),We=e(55386),qe=e(33239),st=e(17548),rt=e(60188),ot=e(25229),mt=e(62717),pt=e(5421),ke=e(80011),Ze=e(44922),nt=e(74529),ut=e(78479),gt=e(16207),ht=e(69168),tt=e(37297),Ot=e(79450),jt=e(15874),wt=e(20877),Ht=e(62392),hn=e(31595),Dn=e(17564),Bn=e(29246),xn=e(30360),ft=e(76190),St=e(48592),Tt=e(32899),Je=e(90382),Pt=e(68492),Yt=e(64394),Lt=e(7389),fn=e(33553),En=e(38619),An=e(54092),Gn=e(27164),zn=e(11594),sa=e(38919),ta=e(94644),ra=e(1906),ea=e(44326),Un=e(83340),oa=e(79319),Ca=e(18600),ya=e(22592),Xa=e(75683),Ta=e(67770),Pa=e(88907),pa=e(46933),Ua=e(84229),ma=e(79609),Ka=e(85891),Oa=e(39443),is=e(95004),Bt=e(48588),$t=e(94777),zt=e(96453);const kt="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let mn=!1;class on extends Array{get buffer(){return this}set buffer(Nn){this.length=0;const gn=Nn?.length;if(gn){let Zn=65e3,kn=Math.ceil(gn/Zn);for(let it=0;it<kn;it++)this.push.apply(this,Nn.slice(it*Zn,(it+1)*Zn))}}constructor(Nn){super(),this.buffer=Nn??[],mn||(console.warn(kt),mn=!0)}toJSON(){return[...this]}}var Ln=e(35479),Hn=e(7918)},98279:(ne,j,e)=>{"use strict";e.d(j,{K:()=>te});var n=e(92745),a=e(44248),s=e(33143),d=e(6461),o=e(92119),l=e(8835),i=e(1131),c=e(97335),p=e(97883),h=e(88532),u=e(48492),r=e(91909),v=e(20246),g=e(54203),E=e(92388),x=e(15759),m=e(30643),y=e(74848),b=e(22803),D=e(89332),f=e(96540),C=e(51898),P=e(63142),T=e(54314),M=e(45861),I=e(3371),B=e(96691),U=e(1837),W=e(61659),V=e(83058),z=e(2543),R=e(45967),O=e(68079);function N({tab:q,variable:se}){const{repeatedTabs:re}=q.useState(),Y=(0,P.of)(K);return(0,f.useEffect)(()=>{F(se,q,!1);const X=se.subscribeToState(_=>F(se,q,!1)),J=q.subscribeToEvent(s.WG,_=>F(se,q,!0));return()=>{J.unsubscribe(),X.unsubscribe()}},[se,q]),re===void 0||a.jh.hasVariableDependencyInLoadingState(se)||se.state.loading?(o.xp.logger("TabItemRepeater",!1,"Variable is loading, showing spinner"),(0,y.jsx)(R.m,{content:(0,n.t)("dashboard.tabs-layout.tab.repeat.loading","Loading tab repeats"),children:(0,y.jsx)("div",{className:Y.spinnerWrapper,children:(0,y.jsx)(O.y,{})})})):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(q.Component,{model:q},q.state.key),re?.map(X=>(0,y.jsx)(X.Component,{model:X},X.state.key))]})}function F(q,se,re){if(a.jh.hasVariableDependencyInLoadingState(q)){o.xp.logger("TabItemRepeater",!1,"Skipped dependency in loading state");return}if(q.state.loading){o.xp.logger("TabItemRepeater",!1,"Skipped, variable is loading");return}const{values:Y,texts:X}=(0,o.a7)(q),J=G(se,q.state.name);if(!re&&(0,z.isEqual)(J,Y)){o.xp.logger("TabItemRepeater",!1,"Skipped, values the same");return}re?o.xp.logger("TabItemRepeater",!1,"Performing repeats, contentChanged"):o.xp.logger("TabItemRepeater",!1,"Performing repeats, variable values changed",Y);const _=H({values:Y,texts:X,variable:q,tab:se});se.setState({repeatedTabs:_}),se.parent?.forceRender()}function G(q,se){const re=[];if(!q.state.repeatedTabs)return[];function Y(X){const J=a.jh.lookupVariable(se,X);if(J){const _=J.getValue();_!=null&&!Array.isArray(_)&&re.push(_)}}Y(q);for(const X of q.state.repeatedTabs)Y(X);return re}function H({values:q,texts:se,variable:re,tab:Y}){const X=q.length?q:[""],J=se.length?se:re.hasAllValue()?["All"]:["None"],_=[];for(let ee=0;ee<X.length;ee++){const ae=ee===0,le=(0,I.lv)(Y.state.key,ee),L=ae?Y:Y.clone({key:le,repeatSourceKey:Y.state.key,repeatByVariable:void 0,repeatedTabs:void 0,layout:void 0}),ie=ae?Y.getLayout():Y.getLayout().cloneLayout(le,!1);L.setState({$variables:(0,I.D1)(re,X[ee],J[ee]),layout:ie}),ae||_.push(L)}return _}const K=()=>({spinnerWrapper:(0,b.css)({alignSelf:"center"})});function w({model:q}){const se=(0,P.of)(k),{tabs:re,key:Y}=q.useState(),X=q.getCurrentTab(),J=(0,o.YQ)(q),{isEditing:_}=J.useState(),{hasCopiedTab:ee}=(0,W.x)(),ae=(0,f.useMemo)(()=>q.parent instanceof m.V,[q.parent]),le=(0,B.MK)();if((0,f.useEffect)(()=>{X&&X.getSlug()!==q.state.currentTabSlug&&q.setState({currentTabSlug:X.getSlug()})},[X,q]),le)return re.map(ie=>(0,y.jsx)(Q,{tab:ie,manager:q},ie.state.key));const L=(0,I.bn)(q);return(0,y.jsxs)("div",{className:(0,b.cx)(se.tabLayoutContainer,{[se.nestedTabsMargin]:ae}),children:[(0,y.jsx)(T.U,{className:se.tabsBar,children:(0,y.jsx)(D.JY,{onBeforeDragStart:ie=>q.forceSelectTab(ie.draggableId),onDragEnd:ie=>{ie.destination&&ie.destination.index!==ie.source.index&&q.moveTab(ie.source.index,ie.destination.index)},children:(0,y.jsxs)("div",{className:se.tabsRow,children:[(0,y.jsx)(D.gL,{droppableId:Y,direction:"horizontal",children:ie=>(0,y.jsxs)("div",{className:se.tabsContainer,ref:ie.innerRef,...ie.droppableProps,children:[re.map(oe=>(0,y.jsx)(Q,{tab:oe,manager:q},oe.state.key)),ie.placeholder]})}),_&&!L&&(0,y.jsxs)("div",{className:"dashboard-canvas-add-button",children:[(0,y.jsx)(M.$n,{icon:"plus",variant:"primary",fill:"text",onClick:()=>q.addNewTab(),onPointerUp:ie=>ie.stopPropagation(),"data-testid":C.Tp.components.CanvasGridAddActions.addTab,children:(0,y.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.new-tab",children:"New tab"})}),ee&&(0,y.jsx)(M.$n,{icon:"clipboard-alt",variant:"primary",fill:"text",onClick:()=>q.pasteTab(),onPointerUp:ie=>ie.stopPropagation(),"data-testid":C.Tp.components.CanvasGridAddActions.pasteTab,children:(0,y.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.paste-tab",children:"Paste tab"})}),(0,y.jsx)(M.$n,{icon:"layers-slash",variant:"primary",fill:"text",onClick:()=>q.ungroupTabs(),children:(0,y.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.ungroup-tabs",children:"Ungroup tabs"})})]})]})})}),X&&(0,y.jsx)(V.Y,{tab:X,isEditing:_})]})}function Q({tab:q,manager:se}){const{repeatByVariable:re}=(0,a.gn)(q,{shouldActivateOrKeepAlive:!0});if(re){const Y=a.jh.lookupVariable(re,se);if(Y instanceof a.n8)return(0,y.jsx)(N,{tab:q,manager:se,variable:Y},q.state.key)}return(0,y.jsx)(q.Component,{model:q},q.state.key)}const k=q=>({tabLayoutContainer:(0,b.css)({display:"flex",flexDirection:"column",flex:"1 1 auto"}),tabsBar:(0,b.css)(U.u),tabsRow:(0,b.css)({display:"flex",width:"100%",alignItems:"center"}),tabsContainer:(0,b.css)({display:"flex",justifyContent:"flex-start",alignItems:"flex-end",overflowX:"auto",overflowY:"hidden",paddingInline:q.spacing(.125),paddingTop:"1px"}),nestedTabsMargin:(0,b.css)({marginLeft:q.spacing(2)})});class te extends a.Bs{constructor(se){super({...se,tabs:se.tabs??[new m.V]}),this.isDashboardLayoutManager=!0,this.descriptor=te.descriptor,this._urlSync=new a.So(this,{keys:()=>[this.getUrlKey()]})}static{this.Component=w}static{this.descriptor={get name(){return(0,n.t)("dashboard.tabs-layout.name","Tabs")},get description(){return(0,n.t)("dashboard.tabs-layout.description","Organize panels into horizontal tabs")},id:"TabsLayout",createFromLayout:te.createFromLayout,isGridLayout:!1,icon:"window"}}serialize(){return(0,d.lX)(this)}duplicate(){throw new Error("Method not implemented.")}duplicateTab(se){const re=se.duplicate();this.addNewTab(re)}getUrlState(){return{[this.getUrlKey()]:this.state.currentTabSlug}}updateFromUrl(se){const re=this.getUrlKey();se[re]&&typeof se[re]=="string"&&this.setState({currentTabSlug:se[re]})}switchToTab(se){this.setState({currentTabSlug:se.getSlug()})}getCurrentTab(){const se=this.getTabsIncludingRepeats(),re=se.find(Y=>Y.getSlug()===this.state.currentTabSlug);if(re)return re;for(const Y of se)if(Y.state.repeatByVariable){const X=a.jh.lookupVariable(Y.state.repeatByVariable,this);if(X&&X.state.loading||!Y.state.repeatedTabs)return}return se[0]}getTabsIncludingRepeats(){return this.state.tabs.reduce((se,re)=>(se.push(re,...re.state.repeatedTabs??[]),se),[])}addPanel(se){const re=this.getCurrentTab()??this.state.tabs[0];re&&re.getLayout().addPanel(se)}getVizPanels(){const se=[];for(const re of this.state.tabs){const Y=re.getLayout().getVizPanels();se.push(...Y)}return se}cloneLayout(se,re){return this.clone()}getOutlineChildren(){const se=[];for(const re of this.state.tabs)if(se.push(re),re.state.repeatedTabs)for(const Y of re.state.repeatedTabs)se.push(Y);return se}addNewTab(se){const re=se??new m.V({}),Y=new Set(this.getTabsIncludingRepeats().map(J=>J.state.title).filter(J=>J!==void 0)),X=(0,v.BK)(re.state.title,Y);return X!==re.state.title&&re.setState({title:X}),s.cc.addElement({addedObject:re,source:this,perform:()=>this.setState({tabs:[...this.state.tabs,re],currentTabSlug:re.getSlug()}),undo:()=>{this.setState({tabs:this.state.tabs.filter(J=>J!==re),currentTabSlug:this.state.currentTabSlug===re.getSlug()?void 0:this.state.currentTabSlug})}}),re}editModeChanged(se){this.state.tabs.forEach(re=>re.getLayout().editModeChanged?.(se))}pasteTab(){const se=(0,o.YQ)(this),re=(0,u.sN)(se);this.addNewTab(re)}shouldUngroup(){return this.state.tabs.length===1}convertAllGridLayouts(se){for(const re of this.state.tabs)switch(se){case v.lv.AutoGridLayout:re.getLayout()instanceof l.X2||re.switchLayout(l.X2.createFromLayout(re.getLayout()));break;case v.lv.GridLayout:re.getLayout()instanceof i.D||re.switchLayout(i.D.createFromLayout(re.getLayout()));break}}ungroupTabs(){const se=this.state.tabs.some(Y=>!Y.getLayout().descriptor.isGridLayout),re=new Set((0,h.g)(this));(0,r.F)({hasNonGridLayout:se,gridTypes:re,onConfirm:Y=>{this.wrapUngroupTabsInEdit(Y)},onConvertMixedGrids:Y=>{this._confirmConvertMixedGrids(Y)}})}_confirmConvertMixedGrids(se){(0,r.Y)(se,re=>{const Y=(0,v.$Y)(re);Y&&this.wrapUngroupTabsInEdit(Y)})}wrapUngroupTabsInEdit(se){const re=this.parent;if(!re||!(0,x.l)(re))throw new Error("Ungroup tabs failed: parent is not a layout container");const Y=this.clone({}),X=(0,o.YQ)(this);s.cc.edit({description:(0,n.t)("dashboard.tabs-layout.edit.ungroup-tabs","Ungroup tabs"),source:X,perform:()=>{this.ungroup(se)},undo:()=>{re.switchLayout(Y)}})}ungroup(se){if(this.state.tabs.some(_=>!_.getLayout().descriptor.isGridLayout))for(const _ of this.state.tabs){const ee=_.getLayout();if(!ee.descriptor.isGridLayout)if((0,E.Q)(ee))ee.ungroup(se);else throw new Error(`Ungrouping not supported for layout type: ${ee.descriptor.name}`)}this.convertAllGridLayouts(se);const Y=this.state.tabs[0],X=Y.getLayout(),J=this.state.tabs.slice(1);for(const _ of J){const ee=_.getLayout();if((0,g.p)(X)&&(0,g.p)(ee))X.mergeGrid(ee);else throw new Error(`Layout type ${X.descriptor.name} does not support merging`)}this.setState({tabs:[Y]}),(0,v.f)(this,Y.state.layout,!0)}removeTab(se,re){const Y=this.state.tabs.findIndex(_=>_===se),X=()=>{const _=this.state.tabs,ee=_.findIndex(L=>L===se),ae=ee>0?ee-1:0,le=_.filter(L=>L!==se);this.setState({tabs:le,currentTabSlug:le[ae]?.getSlug()})},J=()=>{const _=[...this.state.tabs];_.splice(Y,0,se),this.setState({tabs:_,currentTabSlug:se.getSlug()})};re?X():s.cc.removeElement({removedObject:se,source:this,perform:X,undo:J})}moveTab(se,re){const Y=this.getTabsIncludingRepeats(),X=Y[se];let J=Y[re],_=re;if(J.state.repeatSourceKey){if(J.state.repeatSourceKey===X.state.repeatSourceKey)return;const le=Y.findIndex(L=>L.state.key===J.state.repeatSourceKey);if(le!==-1){J=Y[le];const L=re<se;_=le+(L?0:J.state.repeatedTabs?.length||0)}}const ee=this.state.tabs.findIndex(le=>le===X),ae=this.state.tabs.findIndex(le=>le===J);s.cc.moveElement({source:this,movedObject:X,perform:()=>{this.rearrangeTabs(ee,ae,_)},undo:()=>{this.rearrangeTabs(ae,ee,se)}})}rearrangeTabs(se,re,Y){const X=[...this.state.tabs],[J]=X.splice(se,1);X.splice(re,0,J),this.setState({tabs:X}),this.publishEvent(new s.su(this),!0)}forceSelectTab(se){const re=this.getTabsIncludingRepeats().findIndex(J=>J.state.key===se),Y=this.getTabsIncludingRepeats()[re];if(!Y)return;(0,o.YQ)(this).state.editPane.selectObject(Y,se,{force:!0,multi:!1}),this.setState({currentTabSlug:Y.getSlug()})}static createEmpty(){const se=new m.V;return new te({tabs:[se]})}static createFromLayout(se){let re=[];if(se instanceof p.V)for(const Y of se.state.rows){if(Y.state.repeatSourceKey)continue;const X=Y.state.conditionalRendering;X?.clearParent(),re.push(new m.V({layout:Y.state.layout.clone(),title:Y.state.title,conditionalRendering:X,repeatByVariable:Y.state.repeatByVariable}))}else se.clearParent(),re.push(new m.V({layout:se}));return new te({tabs:re})}getUrlKey(){let se=this.parent,re="dtab";for(;se;)se instanceof m.V&&(re=`${se.getSlug()}-${re}`),se instanceof c.o&&(re=`${se.getSlug()}-${re}`),se=se.parent;return re}duplicateTitles(){const se=new Map,re=new Set;return this.getTabsIncludingRepeats().forEach(Y=>{const X=a.jh.interpolate(Y,Y.state.title),J=(se.get(X)??0)+1;se.set(X,J),J>1&&re.add(X)}),re}}},98314:(ne,j,e)=>{"use strict";e.d(j,{B6:()=>r,E_:()=>g,jD:()=>v});var n=e(2543),a=e.n(n),s=e(72985),d=e(739),o=e(77154),l=e(80011),i=e(28105),c=e(92745),p=e(43173),h=e(34273),u=e(8095);function r(b){const D=[];if(b?.series)for(const f of b.series)D.push((0,o.Nw)(f));if(b?.annotations)for(const f of b.annotations){const C=(0,o.Nw)(f);C.schema?.meta||(C.schema.meta={}),C.schema.meta.dataTopic=d.QR.Annotations,D.push(C)}return D}function v(b,D){const f=b.getSaveModel(),C={panelType:f.type,datasource:"??"},P=p.$.buildInfo.versionString;let T=`| Key | Value |
|--|--|
| Panel | ${C.panelType} @ ${f.pluginVersion??P} |
| Grafana | ${P} // ${p.$.buildInfo.edition} |
`;return D&&(T+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+D+"\n```\n</details>"),T}async function g(b,D,f){const C=b.getSaveModel(),P=(0,n.cloneDeep)(y),T={panelType:C.type,datasource:"??"},M=await(0,s._)(b.getQueryRunner().getData({withFieldConfig:!1,withTransforms:!1})),I=b.datasource,B=(0,h.W)(r(M),D),U=p.$.buildInfo.versionString,W=C?.targets??[],V=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${T.panelType} @ ${C.pluginVersion??U}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${W.map(z=>{const R=z.datasource??I;return`${z.refId}[${R?.type}]`}).join(", ")}</td>
    </tr>
    ${E(C)}
    ${x(M,B)}
    ${m(M)}
    <tr>
      <th>Grafana</th>
      <td>${U} // ${p.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(P.panels[0]={...C,...P.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:u.nj.Snapshot,snapshot:B}]},C.transformations?.length){const z=P.panels[P.panels.length-1];z.title=z.title+" (after transformations)";const R=(0,n.cloneDeep)(z);R.id=100,R.title="Data (before transformations)",R.gridPos.w=24,R.targets[0].withTransforms=!1,P.panels.push(R)}return M.annotations?.length&&P.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:(0,c.t)("dashboard.get-debug-dashboard.title.annotations","Annotations"),datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:d.QR.Annotations,refId:"A"}]}),P.panels[1].options.content=V,P.panels[2].options.content=JSON.stringify(C,null,2),P.title=`Debug: ${C.title} // ${(0,l.LE)(new Date)}`,P.tags=["debug",`debug-${T.panelType}`],P.time={from:f.from.toISOString(),to:f.to.toISOString()},P}function E(b){return b.transformations?`<tr>
      <th>Transform</th>
      <td>${b.transformations.map(D=>D.id).join(", ")}</td>
  </tr>`:""}function x(b,D){let f=b.series.length??0,C=0,P=0;for(const T of b.series)C+=T.fields.length,P+=T.length;return`<tr><th>Data</th><td>${b.state!==i.Gu.Done?b.state:""} ${f} frames, ${C} fields, ${P} rows </td></tr>`}function m(b){return b.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${b.annotations.map((D,f)=>`<span>${D.length}</span>`)}</td>
</tr>`:""}const y={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37}},98533:(ne,j,e)=>{"use strict";e.d(j,{a9:()=>Q,rH:()=>q,lQ:()=>te,eY:()=>k,qm:()=>se});var n=e(54092),a=e(74848),s=e(96540);const d=(0,s.lazy)(()=>Promise.all([e.e(8706),e.e(3605),e.e(8932)]).then(e.bind(e,15784))),l=re=>(0,a.jsx)(s.Suspense,{fallback:"Loading...",children:(0,a.jsx)(d,{...re})});var i=e(92745);const c=(0,s.lazy)(()=>Promise.resolve().then(e.bind(e,67490))),p=re=>(0,a.jsx)(s.Suspense,{fallback:null,children:(0,a.jsx)(c,{onClose:re.onClose??(()=>{}),buildPanel:re.buildPanel??(()=>({type:"timeseries",title:(0,i.t)("dashboard-scene.add-to-dashboard-form-exposed.title.new-panel","New panel"),targets:[]})),timeRange:re.timeRange,options:re.options,children:re.children})});var h=e(73427),u=e(8535),r=e(11257),v=e(96016),g=e(3260),E=e(35231),x=e(19050),m=e(92641),y=e(39338);function b(){try{return[(0,g.xJ)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",targets:[n.SM.ExploreToolbarAction],icon:"apps",category:"Dashboards",configure:()=>{if(h.TP.hasPermission(r.w.DashboardsCreate)||h.TP.hasPermission(r.w.DashboardsWrite))return{}},onClick:(re,{context:Y,openModal:X})=>{X({title:(0,y.t)(),body:({onDismiss:J})=>(0,a.jsx)(m.H,{onClose:J,exploreId:Y?.exploreId})})}}),(0,g.xJ)({title:"Add correlation",description:"Create a correlation from this query",targets:[n.SM.ExploreToolbarAction],icon:"link",configure:re=>re?.shouldShowAddCorrelation?{}:void 0,onClick:(re,{context:Y})=>{(0,u.JD)((0,E.am)({editorMode:!0})),(0,u.JD)((0,x.Od)({exploreId:Y.exploreId}))}})]}catch(re){return v.R.warning(`Could not configure extensions for Explore due to: "${re}"`),[]}}function D(){return[...b()]}var f=e(4745),C=e(9453),P=e(13752),T=e(39741),M=e(29405),I=e(96222),B=e(81160),U=e(72985);const W="Cannot register to a read-only registry";class V{constructor(Y){if(this.resultSubject=new P.B,this.logger=Y.log??v.R,this.isReadOnly=!1,Y.registrySubject){this.registrySubject=Y.registrySubject,this.isReadOnly=!0;return}this.registrySubject=new T.m(1),this.resultSubject.pipe((0,M.S)(this.mapToRegistry.bind(this),Y.initialState??{}),(0,I.Z)(Y.initialState??{}),(0,B.T)(X=>(0,g.ol)(X))).subscribe(this.registrySubject)}register(Y){if(this.isReadOnly)throw new Error(W);this.resultSubject.next(Y)}asObservable(){return this.registrySubject.asObservable()}getState(){return(0,U._)(this.asObservable())}}const z="Could not register component extension. Reason:";class R extends V{constructor(Y={}){super(Y)}mapToRegistry(Y,X){const{pluginId:J,configs:_}=X;for(const ee of _){const ae=this.logger.child({description:ee.description,title:ee.title,pluginId:J});if(!ee.title){ae.error(`${z} ${f.o2}`);continue}if(J!=="grafana"&&(0,g.V2)()&&(0,C.dt)(J,ee,ae))continue;const le=Array.isArray(ee.targets)?ee.targets:[ee.targets];for(const L of le){const ie=ae.child({extensionPointId:L}),oe={pluginId:J,component:(0,g.nv)({pluginId:J,extensionTitle:ee.title,Component:ee.component,log:ie}),description:ee.description,title:ee.title};ie.debug("Added component extension successfully registered"),L in Y?Y[L].push(oe):Y[L]=[oe]}}return Y}readOnly(){return new R({registrySubject:this.registrySubject})}}var O=e(2543);const N="Could not register function extension. Reason:";class F extends V{constructor(Y={}){super(Y)}mapToRegistry(Y,X){const{pluginId:J,configs:_}=X;for(const ee of _){const ae=this.logger.child({title:ee.title,pluginId:J});if(!ee.title){ae.error(`${N} ${f.o2}`);continue}if(!(0,O.isFunction)(ee.fn)){ae.error(`${N} ${f.bw}`);continue}if(J!=="grafana"&&(0,g.V2)()&&(0,C.SY)(J,ee,ae))continue;const le=Array.isArray(ee.targets)?ee.targets:[ee.targets];for(const L of le){const ie=ae.child({extensionPointId:L}),oe={pluginId:J,fn:ee.fn,description:ee.description,title:ee.title,extensionPointId:L};ie.debug("Added function extension successfully registered"),L in Y?Y[L].push(oe):Y[L]=[oe]}}return Y}readOnly(){return new F({registrySubject:this.registrySubject})}}const G="Could not register link extension. Reason:";class H extends V{constructor(Y={}){super(Y)}mapToRegistry(Y,X){const{pluginId:J,configs:_}=X;for(const ee of _){const{path:ae,title:le,description:L,configure:ie,onClick:oe,targets:ue}=ee,ye=this.logger.child({path:ae??"",description:L??"",title:le,pluginId:J,onClick:typeof oe});if(!le){ye.error(`${G} ${f.o2}`);continue}if(!(0,C.jk)(ie)){ye.error(`${G} ${f.O6}`);continue}if(!ae&&!oe){ye.error(`${G} ${f.H$}`);continue}if(J!=="grafana"&&(0,g.V2)()&&(0,C.OO)(J,ee,ye))continue;const fe=Array.isArray(ue)?ue:[ue];for(const Ee of fe){const Ae=ye.child({extensionPointId:Ee}),{targets:Ge,...Fe}=ee;Ee in Y||(Y[Ee]=[]),Ae.debug("Added link extension successfully registered"),Y[Ee].push({...Fe,pluginId:J,extensionPointId:Ee})}}return Y}readOnly(){return new H({registrySubject:this.registrySubject})}}const K="Could not register exposed component. Reason:";class w extends V{constructor(Y={}){super(Y)}mapToRegistry(Y,{pluginId:X,configs:J}){if(!J)return Y;for(const _ of J){const{id:ee,description:ae,title:le}=_,L=this.logger.child({extensionPointId:ee,description:ae??"",title:le,pluginId:X});if(!ee.startsWith(X)){L.error(`${K} ${f.vT}`);continue}if(Y[ee]){L.error(`${K} ${f.Td}`);continue}if(!le){L.error(`${K} ${f.o2}`);continue}X!=="grafana"&&(0,g.V2)()&&(0,C.nl)(X,_,L)||(L.debug("Exposed component extension successfully registered"),Y[ee]={..._,pluginId:X})}return Y}readOnly(){return new w({registrySubject:this.registrySubject})}}const Q=new R,k=new w,te=new H,q=new F,se={addedComponentsRegistry:Q,exposedComponentsRegistry:k,addedLinksRegistry:te,addedFunctionsRegistry:q};te.register({pluginId:"grafana",configs:D()}),k.register({pluginId:"grafana",configs:[{id:n.L9.CentralAlertHistorySceneV1,title:"Central alert history scene",description:"Central alert history scene",component:l},{id:n.L9.AddToDashboardFormV1,title:"Add to dashboard form",description:"Add to dashboard form",component:p}]})},98643:(ne,j,e)=>{"use strict";e.d(j,{RA:()=>r,XR:()=>v,Dc:()=>u,qy:()=>p,Pz:()=>h});var n=e(44294),a=e(34338),s=e(11217),d=e(82922),o=e(95004),l=e(78089);function i(E){if(!E?.length)return;const x=[16,8,4,2,1],m="0123456789bcdefghjkmnpqrstuvwxyz";let y=!0;const b=[],D=[];b[0]=-90,b[1]=90,D[0]=-180,D[1]=180;let f;E.split("").forEach(T=>{f=m.indexOf(T),x.forEach(M=>{c(y?D:b,f,M),y=!y})});const C=(b[0]+b[1])/2;return[(D[0]+D[1])/2,C]}function c(E,x,m){x&m?E[0]=(E[0]+E[1])/2:E[1]=(E[0]+E[1])/2}function p(E){return{name:E.name??"Point",type:o.PU.geo,values:E.values.map(x=>{const m=i(x);if(m)return new n.A((0,d.Rb)(m))}),config:g}}function h(E,x){const m=new Array(E.values.length);for(let y=0;y<E.values.length;y++){const b=E.values[y],D=x.values[y];b===null||D===null||(m[y]=new n.A((0,d.Rb)([b,D])))}return{name:"Point",type:o.PU.geo,values:m,config:g}}function u(E,x){const m=x.values.length,y=new Array(m);for(let b=0;b<m;b++)y[b]=E.find(x.values[b])?.geometry();return{name:"Geometry",type:o.PU.geo,values:y,config:g}}function r(E,x){const m=E.values,y=x.values;if(!m||!y)throw"missing src/dest";if(m.length!==y.length)throw"Source and destination field lengths do not match";const b=E.values.length,D=new Array(b);for(let f=0;f<b;f++){const C=m[f],P=y[f];C&&P?D[f]=new a.A([C,P]):C?D[f]=C:P&&(D[f]=P)}return{name:"Geometry",type:o.PU.geo,values:D,config:g}}function v(E,x){const m=E.values,y=x.values;if(!m||!y)throw"missing src/dest";if(m.length!==y.length)throw"Source and destination field lengths do not match";const b=E.values.length,D=new Array(b);for(let f=0;f<b;f++){const C=m[f],P=y[f];C&&P&&(D[f]=new s.A([(0,l.EX)(C),(0,l.EX)(P)]))}return{name:"Geometry",type:o.PU.geo,values:D,config:g}}const g=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},98732:(ne,j,e)=>{"use strict";e.d(j,{E5:()=>h,Ez:()=>c,mn:()=>u});var n=e(65307),a=e(2543),s=e.n(a),d=e(7389),o=e(93612),l=e(96120),i=e(88813);const c={...i.Vg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:d.CO.onTimeRangeChanged,current:{}},p=(0,n.Z0)({name:"templating/interval",initialState:l.j,reducers:{createIntervalOptions:(r,v)=>{const g=(0,o.Fs)(r,v.payload.id);if(g.type!=="interval")return;const E=(0,a.map)(g.query.match(/(["'])(.*?)\1|\w+/g),x=>(x=x.replace(/["']+/g,""),{text:x.trim(),value:x.trim(),selected:!1}));g.auto&&E.length&&E[0].text!=="auto"&&E.unshift({text:"auto",value:"$__auto_interval_"+g.name,selected:!1}),g.options=E}}}),h=p.reducer,{createIntervalOptions:u}=p.actions},98869:(ne,j,e)=>{"use strict";e.d(j,{AK:()=>o,Aj:()=>c,C3:()=>u,pg:()=>p,sh:()=>a,xB:()=>h,zx:()=>d});var n=e(22803);const a=14,s=12,d=500,o=8,l=2,i=1.5,c=l+o*2+a*i,p=c+s*i,h=c*8.5,u=r=>({menuClosed:(0,n.css)({display:"none"}),menu:(0,n.css)({label:"combobox-menu",background:r.components.dropdown.background,boxShadow:r.shadows.z3,zIndex:r.zIndex.dropdown,position:"relative",borderRadius:r.shape.radius.default,overflow:"hidden"}),menuUlContainer:(0,n.css)({label:"combobox-menu-ul-container",listStyle:"none"}),listItem:(0,n.css)({label:"list-item",position:"absolute",width:"100%"}),optionGroupHeader:(0,n.css)({label:"combobox-new-option-group",borderTop:`1px solid ${r.colors.border.weak}`}),optionFirstGroupHeader:(0,n.css)({borderTop:"none"}),optionGroupLabel:(0,n.css)({textOverflow:"ellipsis",overflow:"hidden",letterSpacing:0,color:r.colors.text.secondary,fontSize:r.typography.bodySmall.fontSize,fontWeight:r.typography.fontWeightLight,padding:o}),option:(0,n.css)({label:"combobox-option",position:"relative",display:"flex",width:"100%",gap:r.spacing(1),alignItems:"center",padding:o,marginBottom:l,borderRadius:r.shape.radius.default,fontWeight:r.typography.fontWeightMedium,whiteSpace:"nowrap",overflow:"hidden",cursor:"pointer","&:hover":{background:r.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${r.colors.primary.border}`}}}),optionAccessory:(0,n.css)({label:"combobox-option-accessory",height:a*i}),optionBody:(0,n.css)({label:"combobox-option-body",display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"}),optionLabel:(0,n.css)({label:"combobox-option-label",fontSize:a,fontWeight:d,lineHeight:i,letterSpacing:0,textOverflow:"ellipsis",overflow:"hidden"}),optionDescription:(0,n.css)({label:"combobox-option-description",color:r.colors.text.secondary,fontSize:s,fontWeight:r.typography.fontWeightRegular,lineHeight:i,letterSpacing:0,textOverflow:"ellipsis",overflow:"hidden"}),optionFocused:(0,n.css)({label:"combobox-option-focused",background:r.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${r.colors.primary.border}`}}),optionSelected:(0,n.css)({background:r.colors.action.selected,"&::before":{backgroundImage:r.colors.gradients.brandVertical,borderRadius:r.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",width:r.spacing(.5),left:0,top:0}}),optionInfo:(0,n.css)({label:"combobox-option-info",color:r.colors.text.disabled,cursor:"not-allowed",pointerEvents:"none","&:hover":{background:"transparent"}}),clear:(0,n.css)({label:"combobox-clear",cursor:"pointer",pointerEvents:"auto","&:hover":{color:r.colors.text.primary}}),input:(0,n.css)({label:"combobox-input","> div > div:last-child":{pointerEvents:"none"},"& input":{cursor:"pointer"},"& input:focus":{cursor:"text"}}),adaptToParent:(0,n.css)({label:"combobox-adapt-to-parent",maxWidth:"100%",'[class*="input-wrapper-combobox-input"]':{maxWidth:"100%"}})})},99090:(ne,j,e)=>{"use strict";e.d(j,{G3:()=>l,TF:()=>p,XJ:()=>g,YU:()=>r,d7:()=>u,if:()=>E,r4:()=>o,w7:()=>v});var n=e(83458);const a=null,s=58,d=8,o={label:"A\u2013Z",value:"alpha-asc"},l="search.sections",i="grafana.search.expanded-folder",c=0,p="general",h="Dashboards",u="grafana.search.include.panels",r="grafana.search.layout",v="grafana.search.sort",g={dashboard:n.G.DashDB,folder:n.G.DashFolder,home:n.G.DashHome},E=1e3},99305:(ne,j,e)=>{"use strict";e.d(j,{AX:()=>D,Lz:()=>x,ML:()=>g,Nz:()=>E,QT:()=>P,SY:()=>u,Wz:()=>C,iP:()=>y,jX:()=>I,q$:()=>b,q4:()=>M,qD:()=>B,sN:()=>T,t4:()=>r,u7:()=>m,wJ:()=>v});var n=e(2543),a=e.n(n),s=e(7389),d=e(2863),o=e(62635),l=e(8535),i=e(54742),c=e(8921),p=e(93612),h=e(88813);const u=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,r=W=>(u.lastIndex=0,u.exec(W));function v(...W){const V=W[W.length-1];W[0]=typeof W[0]=="string"?W[0]:(0,o.MA)(W[0]);const R=W.slice(0,-1).join(" ").match(u);return!!(R!==null?R.find(N=>{const F=r(N);return F!==null&&F.indexOf(V)>-1}):!1)}const g=W=>{if(!W||!W.current)return!1;if(W.current.value){const V=Array.isArray(W.current.value);if(V&&W.current.value.length&&W.current.value[0]===c.To||!V&&W.current.value===c.To)return!0}if(W.current.text){const V=Array.isArray(W.current.text);if(V&&W.current.text.length&&W.current.text[0]===c.Zm||!V&&W.current.text===c.Zm)return!0}return!1},E=W=>!W||!W.current||!W.current.text?"":Array.isArray(W.current.text)?W.current.text.toString():typeof W.current.text!="string"?"":W.current.text,x=W=>!W||!W.current||W.current.value===void 0||W.current.value===null?null:Array.isArray(W.current.value)?W.current.value.toString():typeof W.current.value!="string"?null:W.current.value;function m(W,V=(0,d.w)()){return!W||!W.regex?"":V.replace(W.regex,{},"regex")}function y(W,V,z,R){const O={range:void 0,variable:W,searchFilter:V,scopedVars:R};return(W.refresh===s.CO.onTimeRangeChanged||W.refresh===s.CO.onDashboardLoad)&&(O.range=z.timeRange()),O}function b(W){return W?.type==="custom"?s.CO.onDashboardLoad:!W||!("refresh"in W)||W.refresh!==s.CO.onTimeRangeChanged&&W.refresh!==s.CO.onDashboardLoad?s.CO.never:W.refresh}function D(){return i.B.list().filter(W=>W.id!=="system").map(({id:W,name:V,description:z})=>({label:V,value:W,description:z}))}function f(W){return(0,n.isArray)(W)&&(W.length===0?W=void 0:W.length===1&&(W=W[0])),W}function C(W,V){let z=0;const R={};for(const O in W){if(!O.startsWith(c.qz))continue;let N=f(V[O]),F=f(W[O]);(0,n.isEqual)(F,N)||(R[O]={value:W[O]},z++)}for(const O in V){if(!O.startsWith(c.qz))continue;const N=V[O];(0,n.isArray)(N)&&N.length===0||W.hasOwnProperty(O)||(R[O]={value:"",removed:!0},z++)}return z?R:void 0}function P(W){return Array.isArray(W)?W.map(String):W==null?"":typeof W=="number"?W.toString(10):typeof W=="string"?W:typeof W=="boolean"?W.toString():""}function T(W,V=(0,l.Gu)()){return(0,p.nx)(W,V).transaction.status!==h.x8.NotStarted}function M(W){return String(W)}const I=W=>{if(!W.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${W.id}`);return{type:W.type,id:W.id,rootStateKey:W.rootStateKey}};function B(W,V){return{type:W.type,id:W.id,data:V}}function U(){const W=getTemplateSrv().getVariables(),V=locationService.getSearchObject();return Object.keys(V).filter(z=>z.indexOf(VARIABLE_PREFIX)!==-1&&W.some(R=>R.name===z.replace(VARIABLE_PREFIX,""))).reduce((z,R)=>{const O=R.replace(VARIABLE_PREFIX,"");return z[O]=V[R],z},{})}},99392:(ne,j,e)=>{"use strict";e.d(j,{O:()=>a});var n=e(44248);function a(s){const d=[];for(const o of s){if(!(o instanceof n.tV.g))continue;const l={...o.state.query,enable:!!o.state.isEnabled,hide:!!o.state.isHidden,placement:o.state.placement};d.push(l)}return d}},99555:(ne,j,e)=>{"use strict";e.d(j,{P:()=>s,t:()=>d});var n=e(92745),a=e(739);const s=()=>({drawStyle:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.draw-style.label-lines","Lines"),value:a.GR.Line},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.draw-style.label-bars","Bars"),value:a.GR.Bars},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.draw-style.label-points","Points"),value:a.GR.Points}],lineInterpolation:[{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.line-interpolation.description-linear","Linear"),value:a.dx.Linear,icon:"gf-interpolation-linear"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.line-interpolation.description-smooth","Smooth"),value:a.dx.Smooth,icon:"gf-interpolation-smooth"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.line-interpolation.description-step-before","Step before"),value:a.dx.StepBefore,icon:"gf-interpolation-step-before"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.line-interpolation.description-step-after","Step after"),value:a.dx.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.bar-alignment.description-before","Before"),value:a.Nj.Before,icon:"gf-bar-alignment-before"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.bar-alignment.description-center","Center"),value:a.Nj.Center,icon:"gf-bar-alignment-center"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.bar-alignment.description-after","After"),value:a.Nj.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.show-points.label-auto","Auto"),value:a.yL.Auto,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.show-points.description-auto","Show points when the density is low")},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.show-points.label-always","Always"),value:a.yL.Always},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.show-points.label-never","Never"),value:a.yL.Never}],axisPlacement:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.label-auto","Auto"),value:a.vM.Auto,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.description-auto","First field on the left, everything else on the right")},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.label-left","Left"),value:a.vM.Left},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.label-right","Right"),value:a.vM.Right},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.label-hidden","Hidden"),value:a.vM.Hidden}],fillGradient:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.label-none","None"),value:a.on.None},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.label-opacity","Opacity"),value:a.on.Opacity,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.description-opacity","Enable fill opacity gradient")},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.label-hue","Hue"),value:a.on.Hue,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.description-hue","Small color hue gradient")},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.label-scheme","Scheme"),value:a.on.Scheme,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.description-scheme","Use color scheme to define gradient")}],stacking:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.stacking.label-off","Off"),value:a.gs.None},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.stacking.label-normal","Normal"),value:a.gs.Normal},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.stacking.label-100","100%"),value:a.gs.Percent}],thresholdsDisplayModes:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-off","Off"),value:a.Ly.Off},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-lines","As lines"),value:a.Ly.Line},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-dashed-lines","As lines (dashed)"),value:a.Ly.Dashed},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-filled-regions","As filled regions"),value:a.Ly.Area},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-filled-regions-and-lines","As filled regions and lines"),value:a.Ly.LineAndArea},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-filled-regions-and-dashed-lines","As filled regions and lines (dashed)"),value:a.Ly.DashedAndArea}]}),d=s()},99584:(ne,j,e)=>{"use strict";e.d(j,{Q:()=>x});var n=e(74848),a=e(96540),s=e(68125),d=e(51898),o=e(92745),l=e(30048),i=e(43173),c=e(50992),p=e(34999),h=e(31286),u=e(37386),r=e(21285),v=e(76792),g=e(69076),E=e(32442);function x({datasource:m,infoText:y,allowCustomValue:b,onDataSourceChange:D,onDefaultKeysChange:f,onAllowCustomValueChange:C,defaultKeys:P,inline:T,datasourceSupported:M}){const I=(0,a.useCallback)(B=>{const U=(0,s.Jh)(`key,value
`+B)[0],W=[];for(let V=0;V<U.length;V++)W.push({text:U.fields[0].values[V],value:U.fields[1].values[V]});f?.(W)},[f]);return(0,n.jsxs)(n.Fragment,{children:[!T&&(0,n.jsx)(E.Y,{children:(0,n.jsx)(o.x6,{i18nKey:"dashboard-scene.ad-hoc-variable-form.adhoc-options",children:"Ad-hoc options"})}),(0,n.jsx)(h.a,{marginBottom:2,children:(0,n.jsx)(l.c,{label:(0,o.t)("dashboard-scene.ad-hoc-variable-form.label-data-source","Data source"),htmlFor:"data-source-picker",tooltip:y,children:(0,n.jsx)(v.sk,{current:m,onChange:D,width:30,variables:!0,dashboard:i.$.featureToggles.dashboardDsAdHocFiltering,noDefault:!0})})}),M===!1?(0,n.jsx)(p.F,{title:(0,o.t)("dashboard-scene.ad-hoc-variable-form.alert-not-supported","This data source does not support ad hoc filters"),severity:"warning","data-testid":d.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.infoText}):null,M&&f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.D,{label:(0,o.t)("dashboard-scene.ad-hoc-variable-form.label-use-static-key-dimensions","Use static key dimensions"),description:(0,o.t)("dashboard-scene.ad-hoc-variable-form.description-provide-dimensions-as-csv-dimension-name-dimension-id","Provide dimensions as CSV: {{name}}, {{value}}",{name:"dimensionName",value:"dimensionId"}),children:(0,n.jsx)(r.d,{"data-testid":d.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.modeToggle,value:P!==void 0,onChange:B=>{f(P===void 0?[]:void 0)}})}),P!==void 0&&(0,n.jsx)(c.B,{height:300,language:"csv",value:P.map(B=>`${B.text},${B.value}`).join(`
`),onBlur:I,onSave:I,showMiniMap:!1,showLineNumbers:!0})]}),M&&C&&(0,n.jsx)(g.c,{value:b??!0,name:(0,o.t)("dashboard-scene.ad-hoc-variable-form.name-allow-custom-values","Allow custom values"),description:(0,o.t)("dashboard-scene.ad-hoc-variable-form.description-enables-users-custom-values","Enables users to add custom values to the list"),onChange:C,testId:d.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsAllowCustomValueSwitch})]})}},99598:(ne,j,e)=>{"use strict";e.d(j,{jR:()=>B,Fu:()=>f,$z:()=>p,O$:()=>C,ho:()=>U,MO:()=>D,an:()=>P,U9:()=>b,fx:()=>M,qh:()=>I,S8:()=>T});var n=e(84139),a=e(65307),s=e(2543),d=e(94452);const o=(W,...V)=>V.reduce((z,R)=>R(z),W);var l=e(8921),i=e(67933);const c=/[^ -~]/m,p={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},h=1e3,u=new n.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),r=W=>Array.isArray(W)?W.reduce((V,z)=>((0,s.isString)(z.value)&&(V[z.value]=z),V),{}):{},v=W=>{if(!Array.isArray(W.options))return W.options=[],W;const V=r(W.selectedValues);return W.selectedValues=Object.values(V),W.options=W.options.map(z=>{if(!(0,s.isString)(z.value))return z;const R=!!V[z.value];return z.selected===R?z:{...z,selected:R}}),W.options=g(W.options),W},g=W=>Array.isArray(W)?W.length<=h?W:W.slice(0,h):[],E=W=>{const{options:V,selectedValues:z}=W;return V.length===0||z.length>0||!V[0]||V[0].value!==l.To||(W.selectedValues=[{...V[0],selected:!0}]),W},x=W=>{const{selectedValues:V}=W;return V.length>1&&(W.selectedValues=V.filter(z=>z.value!==l.To)),W},m=W=>W.filter(V=>V.value!==l.To).map(V=>({...V,selected:!0})),y=(0,a.Z0)({name:"templating/optionsPicker",initialState:p,reducers:{showOptions:(W,V)=>{const{query:z,options:R}=V.payload;if(W.highlightIndex=-1,W.options=(0,s.cloneDeep)(R),W.id=V.payload.id,W.queryValue="",W.multi=!1,(0,i.iv)(V.payload)&&(W.multi=V.payload.multi??!1),(0,i.P4)(V.payload)){const{queryValue:O}=V.payload,N=(0,d.E)(z);W.queryValue=N&&O?O:""}return W.selectedValues=W.options.filter(O=>O.selected),o(W,E,v)},hideOptions:(W,V)=>({...p}),toggleOption:(W,V)=>{const{option:z,clearOthers:R,forceSelect:O}=V.payload,{multi:N,selectedValues:F}=W;if(z){const G=!F.find(H=>H.value===z.value&&H.text===z.text);if(z.value===l.To||!N||R)return G||O?W.selectedValues=[{...z,selected:!0}]:W.selectedValues=[],o(W,E,x,v);if(O||G)return W.selectedValues.push({...z,selected:!0}),o(W,E,x,v);W.selectedValues=F.filter(H=>H.value!==z.value&&H.text!==z.text)}else W.selectedValues=[];return o(W,E,x,v)},moveOptionsHighlight:(W,V)=>{let z=W.highlightIndex+V.payload;return z<0?z=-1:z>=W.options.length&&(z=W.options.length-1),{...W,highlightIndex:z}},toggleAllOptions:(W,V)=>{const z=W.selectedValues.find(O=>O.value===l.To),R=W.options.find(O=>O.value===l.To);return W.selectedValues.length>0&&R&&!z?(W.selectedValues=[],W.selectedValues.push({text:R.text??"All",value:R.value,selected:!0}),o(W,v)):z&&W.selectedValues.length===1?(W.selectedValues=m(W.options),o(W,v)):W.selectedValues.length>0&&!R?(W.selectedValues=[],o(W,v)):(W.selectedValues=m(W.options),o(W,v))},updateSearchQuery:(W,V)=>(W.queryValue=V.payload,W),updateOptionsAndFilter:(W,V)=>{const z=W.queryValue.trim();let R=[];if(z==="")R=V.payload;else if(c.test(z))R=V.payload.filter(O=>O.text.includes(z));else{const O=V.payload.map(({text:H})=>Array.isArray(H)?H.toString():H),[N,F,G]=u.search(O,z,5);N?.length&&(F&&G?R=G.map(H=>V.payload[F.idx[H]]):R=N.map(H=>V.payload[H]),R.sort((H,K)=>(H.value===l.To?-1:0)-(K.value===l.To?-1:0)))}if(W.highlightIndex=0,z!==""){let O=R.findIndex(N=>N.value!==l.To);(O===-1||R[O].value!==z)&&(R.unshift({selected:!1,text:"> "+z,value:z}),W.highlightIndex=O===-1?0:O+1)}return W.options=R,o(W,E,v)},updateOptionsFromSearch:(W,V)=>(W.options=V.payload,W.highlightIndex=0,o(W,E,v)),cleanPickerState:()=>p}}),{toggleOption:b,showOptions:D,hideOptions:f,moveOptionsHighlight:C,toggleAllOptions:P,updateSearchQuery:T,updateOptionsAndFilter:M,updateOptionsFromSearch:I,cleanPickerState:B}=y.actions,U=y.reducer},99703:(ne,j,e)=>{"use strict";e.d(j,{WT:()=>a,bX:()=>o,t4:()=>d});var n=e(65307);const a={usages:[],usagesNetwork:[]},s=(0,n.Z0)({name:"templating/inspect",initialState:a,reducers:{initInspect:(l,i)=>{const{usages:c,usagesNetwork:p}=i.payload;l.usages=c,l.usagesNetwork=p}}}),d=s.reducer,{initInspect:o}=s.actions},99709:(ne,j,e)=>{"use strict";e.d(j,{D:()=>d});var n=e(74848),a=e(96540),s=e(18857);const d=({item:o,value:l,onChange:i,id:c})=>{const p=(0,a.useCallback)(h=>{i({mode:h.value})},[i]);return(0,n.jsx)(s.l6,{inputId:c,value:l.mode,options:o.settings?.options??[],onChange:p})}},99828:(ne,j,e)=>{"use strict";e.d(j,{L:()=>u,P:()=>h});var n=e(92138),a=e(92745),s=e(83873),d=e(47797),o=e(54115),l=e(75735),i=e(52043),c=e(95407),p=e(60171);const h={group:"dashboard.grafana.app",version:"v2beta1",resource:"dashboards"};class u{constructor(){this.client=new o.ws(h)}async getDashboardDTO(v){try{const g=await this.client.subresource(v,"dto");if(!(0,p.aK)(g.spec)&&g.status?.conversion?.failed&&(g.status.conversion.storedVersion==="v1alpha1"||g.status.conversion.storedVersion==="v1beta1"||g.status.conversion.storedVersion==="v0alpha1"))throw new c.P(g.status.conversion.storedVersion,g.status.conversion.error);if(g.metadata.annotations&&g.metadata.annotations[l.ew])try{const E=await s.IB.getFolderByUid(g.metadata.annotations[l.ew]);g.metadata.annotations[l.w2]=E.title,g.metadata.annotations[l.D1]=E.url}catch(E){if((0,d.do)(E)!==403)throw new Error("Failed to load folder")}else g.metadata.annotations&&!g.metadata.annotations[l.ew]&&(g.metadata.annotations[l.ew]="");return g}catch(g){const E=(0,d.do)(g);throw(0,d.q6)(g).includes("not found")&&E!==404&&(g.status=404,g.data.message="Dashboard not found"),g}}deleteDashboard(v,g){return this.client.delete(v,g).then(E=>({id:0,message:E.message,title:(0,a.t)("dashboard.k8s-dashboard-v2api.title.deleted","deleted")}))}async saveDashboard(v){const g=v.dashboard,E={metadata:{...v?.k8s},spec:{...g}};return v.message?E.metadata.annotations={...E.metadata.annotations,[l.fY]:v.message}:E.metadata.annotations&&delete E.metadata.annotations[l.fY],v.folderUid!==void 0&&(delete E.metadata.annotations?.[l.w2],delete E.metadata.annotations?.[l.D1],E.metadata.annotations={...E.metadata.annotations,[l.ew]:v.folderUid}),E.metadata.name?(delete E.metadata.resourceVersion,this.client.update(E).then(x=>this.asSaveDashboardResponseDTO(x))):(E.metadata.annotations={...E.metadata.annotations,[l.AI]:"default"},await this.client.create(E).then(x=>this.asSaveDashboardResponseDTO(x)))}asSaveDashboardResponseDTO(v){const E=n.I.assureBaseUrl((0,i.u)({uid:v.metadata.name,currentQueryParams:"",slug:""}));let x=0;return v.metadata.labels?.[l.Y5]&&(x=parseInt(v.metadata.labels[l.Y5],10)),{uid:v.metadata.name,version:v.metadata.generation??0,id:x,status:"success",url:E,slug:""}}listDeletedDashboards(v){return this.client.list({...v,labelSelector:"grafana.app/get-trash=true"})}restoreDashboard(v){return v.metadata.resourceVersion="",this.client.create(v)}}},99885:(ne,j,e)=>{"use strict";e.d(j,{X:()=>h});var n=e(84139),a=e(8934);const s=/[^ -~]/m,d=/^[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+$/m,o=5,l=25,i=5,c=1e4,p=new n.A({intraMode:1});function h(u,r){if(r==="")return u.map((v,g)=>g);if(s.test(r)||d.test(r)||r.length>l||p.split(r).length>i){const v=new RegExp((0,a.$f)(r),"i"),g=[];for(let E=0;E<u.length;E++){let x=u[E];v.test(x)&&g.push(E)}return g}else{const[v,g,E]=p.search(u,r,o,c);if(v?.length)return g&&E?E.map(x=>g.idx[x]):v}return[]}},99887:(ne,j,e)=>{"use strict";e.d(j,{E:()=>r});var n=e(74848),a=e(22803),s=e(96540),d=e(70255),o=e(84140),l=e(63142),i=e(21348),c=e(30703),p=e(45967);const h=s.memo(({icon:E,color:x,text:m,tooltip:y,className:b,...D})=>{const f=(0,l.of)(g,x),C=(0,n.jsxs)("div",{className:(0,a.cx)(f.wrapper,b),...D,children:[E&&(0,n.jsx)(c.I,{name:E,size:"sm"}),m]});return y?(0,n.jsx)(p.m,{content:y,placement:"auto",children:C}):C});h.displayName="Badge";const u=({rootProps:E})=>{const x=(0,l.of)(v);return(0,n.jsx)(d.A,{width:60,height:22,containerClassName:x.container,...E})},r=(0,i.j)(h,u),v=()=>({container:(0,a.css)({lineHeight:1})}),g=(E,x)=>{let m=E.visualization.getColorByName(x),y="",b="",D="";return E.isDark?(b=(0,o.A)(m).setAlpha(.15).toString(),y=(0,o.A)(m).setAlpha(.25).toString(),D=(0,o.A)(m).lighten(15).toString()):(b=(0,o.A)(m).setAlpha(.15).toString(),y=(0,o.A)(m).setAlpha(.25).toString(),D=(0,o.A)(m).darken(20).toString()),x==="brand"&&(b=E.colors.gradients.brandHorizontal,y="transparent",D=E.colors.primary.contrastText),{wrapper:(0,a.css)({display:"inline-flex",padding:"1px 4px",borderRadius:E.shape.radius.sm,background:b,border:`1px solid ${y}`,color:D,fontWeight:E.typography.fontWeightRegular,gap:E.spacing(.5),fontSize:E.typography.bodySmall.fontSize,lineHeight:E.typography.bodySmall.lineHeight,alignItems:"center"})}}}}]);

//# sourceMappingURL=9414.642bfe0d5eb16efd0c16.js.map